<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8522292">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8522347">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8522401">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8522452">package</span>&nbsp;<span class="ident" id="8522460">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8522470">import</span>&nbsp;<span class="op" id="8522477">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522480">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522489">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522496">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522502">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522515">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522527">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522538">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522549">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8522560">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8522570">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8522573">type</span>&nbsp;<span class="ident" id="8522578">dumpTest</span>&nbsp;<span class="keyword" id="8522587">struct</span>&nbsp;<span class="op" id="8522594">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522597">Req</span>&nbsp;&nbsp;<span class="ident" id="8522602"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8522606">.</span><span class="ident" id="8522607">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522616">Body</span>&nbsp;<span class="keyword" id="8522621">interface</span><span class="op" id="8522630">{</span><span class="op" id="8522631">}</span>&nbsp;<span class="comment" id="8522633">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522699">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8522711">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522719">WantDumpOut</span>&nbsp;<span class="builtintype" id="8522731">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522739">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8522751">bool</span>&nbsp;<span class="comment" id="8522756">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="8522804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8522807">var</span>&nbsp;<span class="ident" id="8522811">dumpTests</span>&nbsp;<span class="op" id="8522821">=</span>&nbsp;<span class="op" id="8522823">[</span><span class="op" id="8522824">]</span><span class="ident" id="8522825"><a href="/net/http/httputil/dump_test.go.html#8522578">dumpTest</a></span><span class="op" id="8522833">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8522837">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8522889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522893">Req</span><span class="op" id="8522896">:</span>&nbsp;<span class="ident" id="8522898"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8522902">.</span><span class="ident" id="8522903">Request</span><span class="op" id="8522910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522915">Method</span><span class="op" id="8522921">:</span>&nbsp;<span class="string" id="8522923">&#34;GET&#34;</span><span class="op" id="8522928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522933">URL</span><span class="op" id="8522936">:</span>&nbsp;<span class="op" id="8522938">&amp;</span><span class="ident" id="8522939"><a href="/net/http/httputil/dump_test.go.html#8522527">url</a></span><span class="op" id="8522942">.</span><span class="ident" id="8522943">URL</span><span class="op" id="8522946">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522952">Scheme</span><span class="op" id="8522958">:</span>&nbsp;<span class="string" id="8522960">&#34;http&#34;</span><span class="op" id="8522966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8522972">Host</span><span class="op" id="8522976">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8522980">&#34;www.google.com&#34;</span><span class="op" id="8522996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523002">Path</span><span class="op" id="8523006">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8523010">&#34;/search&#34;</span><span class="op" id="8523019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523024">}</span><span class="op" id="8523025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523030">ProtoMajor</span><span class="op" id="8523040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8523048">1</span><span class="op" id="8523049">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523054">ProtoMinor</span><span class="op" id="8523064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8523072">1</span><span class="op" id="8523073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523078">TransferEncoding</span><span class="op" id="8523094">:</span>&nbsp;<span class="op" id="8523096">[</span><span class="op" id="8523097">]</span><span class="builtintype" id="8523098">string</span><span class="op" id="8523104">{</span><span class="string" id="8523105">&#34;chunked&#34;</span><span class="op" id="8523114">}</span><span class="op" id="8523115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523119">}</span><span class="op" id="8523120">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523125">Body</span><span class="op" id="8523129">:</span>&nbsp;<span class="op" id="8523131">[</span><span class="op" id="8523132">]</span><span class="builtintype" id="8523133">byte</span><span class="op" id="8523137">(</span><span class="string" id="8523138">&#34;abcdef&#34;</span><span class="op" id="8523146">)</span><span class="op" id="8523147">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523152">WantDump</span><span class="op" id="8523160">:</span>&nbsp;<span class="string" id="8523162">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8523189">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523194">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="8523221">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523226">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8523263">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523268"><a href="/net/http/httputil/dump_test.go.html#8526573">chunk</a></span><span class="op" id="8523273">(</span><span class="string" id="8523274">&#34;abcdef&#34;</span><span class="op" id="8523282">)</span>&nbsp;<span class="op" id="8523284">+</span>&nbsp;<span class="ident" id="8523286"><a href="/net/http/httputil/dump_test.go.html#8526573">chunk</a></span><span class="op" id="8523291">(</span><span class="string" id="8523292">&#34;&#34;</span><span class="op" id="8523294">)</span><span class="op" id="8523295">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523298">}</span><span class="op" id="8523299">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8523303">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8523386">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523420">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523424">Req</span><span class="op" id="8523427">:</span>&nbsp;<span class="ident" id="8523429"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8523433">.</span><span class="ident" id="8523434">Request</span><span class="op" id="8523441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523446">Method</span><span class="op" id="8523452">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8523458">&#34;GET&#34;</span><span class="op" id="8523463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523468">URL</span><span class="op" id="8523471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8523480"><a href="/net/http/httputil/dump_test.go.html#8526653">mustParseURL</a></span><span class="op" id="8523492">(</span><span class="string" id="8523493">&#34;/foo&#34;</span><span class="op" id="8523499">)</span><span class="op" id="8523500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523505">ProtoMajor</span><span class="op" id="8523515">:</span>&nbsp;<span class="num" id="8523517">1</span><span class="op" id="8523518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523523">ProtoMinor</span><span class="op" id="8523533">:</span>&nbsp;<span class="num" id="8523535">0</span><span class="op" id="8523536">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523541">Header</span><span class="op" id="8523547">:</span>&nbsp;<span class="ident" id="8523549"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8523553">.</span><span class="ident" id="8523554">Header</span><span class="op" id="8523560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523566">&#34;X-Foo&#34;</span><span class="op" id="8523573">:</span>&nbsp;<span class="op" id="8523575">[</span><span class="op" id="8523576">]</span><span class="builtintype" id="8523577">string</span><span class="op" id="8523583">{</span><span class="string" id="8523584">&#34;X-Bar&#34;</span><span class="op" id="8523591">}</span><span class="op" id="8523592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523597">}</span><span class="op" id="8523598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523602">}</span><span class="op" id="8523603">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523608">WantDump</span><span class="op" id="8523616">:</span>&nbsp;<span class="string" id="8523618">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="8523642">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523647">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="8523669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523672">}</span><span class="op" id="8523673">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523677">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523681">Req</span><span class="op" id="8523684">:</span>&nbsp;<span class="op" id="8523686">*</span><span class="ident" id="8523687"><a href="/net/http/httputil/dump_test.go.html#8526806">mustNewRequest</a></span><span class="op" id="8523701">(</span><span class="string" id="8523702">&#34;GET&#34;</span><span class="op" id="8523707">,</span>&nbsp;<span class="string" id="8523709">&#34;http://example.com/foo&#34;</span><span class="op" id="8523733">,</span>&nbsp;<span class="ident" id="8523735">nil</span><span class="op" id="8523738">)</span><span class="op" id="8523739">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8523744">WantDumpOut</span><span class="op" id="8523755">:</span>&nbsp;<span class="string" id="8523757">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8523781">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523786">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="8523810">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523815">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8523853">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8523858">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="8523889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8523892">}</span><span class="op" id="8523893">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8523897">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8523961">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8524018">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524036">Req</span><span class="op" id="8524039">:</span>&nbsp;<span class="op" id="8524041">*</span><span class="ident" id="8524042"><a href="/net/http/httputil/dump_test.go.html#8526806">mustNewRequest</a></span><span class="op" id="8524056">(</span><span class="string" id="8524057">&#34;GET&#34;</span><span class="op" id="8524062">,</span>&nbsp;<span class="string" id="8524064">&#34;https://example.com/foo&#34;</span><span class="op" id="8524089">,</span>&nbsp;<span class="ident" id="8524091">nil</span><span class="op" id="8524094">)</span><span class="op" id="8524095">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524100">WantDumpOut</span><span class="op" id="8524111">:</span>&nbsp;<span class="string" id="8524113">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8524137">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524142">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="8524166">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524171">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8524209">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524214">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="8524245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524248">}</span><span class="op" id="8524249">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8524253">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524311">Req</span><span class="op" id="8524314">:</span>&nbsp;<span class="ident" id="8524316"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8524320">.</span><span class="ident" id="8524321">Request</span><span class="op" id="8524328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524333">Method</span><span class="op" id="8524339">:</span>&nbsp;<span class="string" id="8524341">&#34;POST&#34;</span><span class="op" id="8524347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524352">URL</span><span class="op" id="8524355">:</span>&nbsp;<span class="op" id="8524357">&amp;</span><span class="ident" id="8524358"><a href="/net/http/httputil/dump_test.go.html#8522527">url</a></span><span class="op" id="8524361">.</span><span class="ident" id="8524362">URL</span><span class="op" id="8524365">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524371">Scheme</span><span class="op" id="8524377">:</span>&nbsp;<span class="string" id="8524379">&#34;http&#34;</span><span class="op" id="8524385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524391">Host</span><span class="op" id="8524395">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8524399">&#34;post.tld&#34;</span><span class="op" id="8524409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524415">Path</span><span class="op" id="8524419">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8524423">&#34;/&#34;</span><span class="op" id="8524426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524431">}</span><span class="op" id="8524432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524437">ContentLength</span><span class="op" id="8524450">:</span>&nbsp;<span class="num" id="8524452">6</span><span class="op" id="8524453">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524458">ProtoMajor</span><span class="op" id="8524468">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8524473">1</span><span class="op" id="8524474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524479">ProtoMinor</span><span class="op" id="8524489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8524494">1</span><span class="op" id="8524495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524499">}</span><span class="op" id="8524500">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524505">Body</span><span class="op" id="8524509">:</span>&nbsp;<span class="op" id="8524511">[</span><span class="op" id="8524512">]</span><span class="builtintype" id="8524513">byte</span><span class="op" id="8524517">(</span><span class="string" id="8524518">&#34;abcdef&#34;</span><span class="op" id="8524526">)</span><span class="op" id="8524527">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524532">WantDumpOut</span><span class="op" id="8524543">:</span>&nbsp;<span class="string" id="8524545">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8524567">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524572">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="8524593">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524598">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8524636">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524641">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="8524665">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8524670">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="8524701">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524706">NoBody</span><span class="op" id="8524712">:</span>&nbsp;<span class="ident" id="8524714">true</span><span class="op" id="8524718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524721">}</span><span class="op" id="8524722">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8524726">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524781">Req</span><span class="op" id="8524784">:</span>&nbsp;<span class="ident" id="8524786"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8524790">.</span><span class="ident" id="8524791">Request</span><span class="op" id="8524798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524803">Method</span><span class="op" id="8524809">:</span>&nbsp;<span class="string" id="8524811">&#34;POST&#34;</span><span class="op" id="8524817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524822">URL</span><span class="op" id="8524825">:</span>&nbsp;<span class="op" id="8524827">&amp;</span><span class="ident" id="8524828"><a href="/net/http/httputil/dump_test.go.html#8522527">url</a></span><span class="op" id="8524831">.</span><span class="ident" id="8524832">URL</span><span class="op" id="8524835">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524841">Scheme</span><span class="op" id="8524847">:</span>&nbsp;<span class="string" id="8524849">&#34;http&#34;</span><span class="op" id="8524855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524861">Host</span><span class="op" id="8524865">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8524869">&#34;post.tld&#34;</span><span class="op" id="8524879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524885">Path</span><span class="op" id="8524889">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8524893">&#34;/&#34;</span><span class="op" id="8524896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524901">}</span><span class="op" id="8524902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524907">ContentLength</span><span class="op" id="8524920">:</span>&nbsp;<span class="num" id="8524922">8193</span><span class="op" id="8524926">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524931">ProtoMajor</span><span class="op" id="8524941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8524946">1</span><span class="op" id="8524947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524952">ProtoMinor</span><span class="op" id="8524962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8524967">1</span><span class="op" id="8524968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8524972">}</span><span class="op" id="8524973">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8524978">Body</span><span class="op" id="8524982">:</span>&nbsp;<span class="ident" id="8524984"><a href="/net/http/httputil/dump_test.go.html#8522480">bytes</a></span><span class="op" id="8524989">.</span><span class="ident" id="8524990">Repeat</span><span class="op" id="8524996">(</span><span class="op" id="8524997">[</span><span class="op" id="8524998">]</span><span class="builtintype" id="8524999">byte</span><span class="op" id="8525003">(</span><span class="string" id="8525004">&#34;a&#34;</span><span class="op" id="8525007">)</span><span class="op" id="8525008">,</span>&nbsp;<span class="num" id="8525010">8193</span><span class="op" id="8525014">)</span><span class="op" id="8525015">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525020">WantDumpOut</span><span class="op" id="8525031">:</span>&nbsp;<span class="string" id="8525033">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8525055">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8525060">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="8525081">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8525086">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8525124">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8525129">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="8525156">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8525161">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8525193">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525198"><a href="/net/http/httputil/dump_test.go.html#8522549">strings</a></span><span class="op" id="8525205">.</span><span class="ident" id="8525206">Repeat</span><span class="op" id="8525212">(</span><span class="string" id="8525213">&#34;a&#34;</span><span class="op" id="8525216">,</span>&nbsp;<span class="num" id="8525218">8193</span><span class="op" id="8525222">)</span><span class="op" id="8525223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8525226">}</span><span class="op" id="8525227">,</span><br>
<span class="lineno"></span><span class="op" id="8525229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8525232">func</span>&nbsp;<span class="ident" id="8525237">TestDumpRequest</span><span class="op" id="8525252">(</span><span class="ident" id="8525253">t</span>&nbsp;<span class="op" id="8525255">*</span><span class="ident" id="8525256"><a href="/net/http/httputil/dump_test.go.html#8522560">testing</a></span><span class="op" id="8525263">.</span><span class="ident" id="8525264">T</span><span class="op" id="8525265">)</span>&nbsp;<span class="op" id="8525267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525270">numg0</span>&nbsp;<span class="op" id="8525276">:=</span>&nbsp;<span class="ident" id="8525279"><a href="/net/http/httputil/dump_test.go.html#8522538">runtime</a></span><span class="op" id="8525286">.</span><span class="ident" id="8525287">NumGoroutine</span><span class="op" id="8525299">(</span><span class="op" id="8525300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525303">for</span>&nbsp;<span class="ident" id="8525307">i</span><span class="op" id="8525308">,</span>&nbsp;<span class="ident" id="8525310">tt</span>&nbsp;<span class="op" id="8525313">:=</span>&nbsp;<span class="keyword" id="8525316">range</span>&nbsp;<span class="ident" id="8525322"><a href="/net/http/httputil/dump_test.go.html#8522811">dumpTests</a></span>&nbsp;<span class="op" id="8525332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525336">setBody</span>&nbsp;<span class="op" id="8525344">:=</span>&nbsp;<span class="keyword" id="8525347">func</span><span class="op" id="8525351">(</span><span class="op" id="8525352">)</span>&nbsp;<span class="op" id="8525354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525359">if</span>&nbsp;<span class="ident" id="8525362"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525364">.</span><span class="ident" id="8525365">Body</span>&nbsp;<span class="op" id="8525370">==</span>&nbsp;<span class="ident" id="8525373">nil</span>&nbsp;<span class="op" id="8525377">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525383">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8525393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525398">switch</span>&nbsp;<span class="ident" id="8525405">b</span>&nbsp;<span class="op" id="8525407">:=</span>&nbsp;<span class="ident" id="8525410"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525412">.</span><span class="ident" id="8525413">Body</span><span class="op" id="8525417">.</span><span class="op" id="8525418">(</span><span class="keyword" id="8525419">type</span><span class="op" id="8525423">)</span>&nbsp;<span class="op" id="8525425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525430">case</span>&nbsp;<span class="op" id="8525435">[</span><span class="op" id="8525436">]</span><span class="builtintype" id="8525437">byte</span><span class="op" id="8525441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525447"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525449">.</span><span class="ident" id="8525450">Req</span><span class="op" id="8525453">.</span><span class="ident" id="8525454">Body</span>&nbsp;<span class="op" id="8525459">=</span>&nbsp;<span class="ident" id="8525461"><a href="/net/http/httputil/dump_test.go.html#8522502">ioutil</a></span><span class="op" id="8525467">.</span><span class="ident" id="8525468">NopCloser</span><span class="op" id="8525477">(</span><span class="ident" id="8525478"><a href="/net/http/httputil/dump_test.go.html#8522480">bytes</a></span><span class="op" id="8525483">.</span><span class="ident" id="8525484">NewReader</span><span class="op" id="8525493">(</span><span class="ident" id="8525494"><a href="/net/http/httputil/dump_test.go.html#8525405">b</a></span><span class="op" id="8525495">)</span><span class="op" id="8525496">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525501">case</span>&nbsp;<span class="keyword" id="8525506">func</span><span class="op" id="8525510">(</span><span class="op" id="8525511">)</span>&nbsp;<span class="ident" id="8525513"><a href="/net/http/httputil/dump_test.go.html#8522496">io</a></span><span class="op" id="8525515">.</span><span class="ident" id="8525516">ReadCloser</span><span class="op" id="8525526">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525532"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525534">.</span><span class="ident" id="8525535">Req</span><span class="op" id="8525538">.</span><span class="ident" id="8525539">Body</span>&nbsp;<span class="op" id="8525544">=</span>&nbsp;<span class="ident" id="8525546"><a href="/net/http/httputil/dump_test.go.html#8525405">b</a></span><span class="op" id="8525547">(</span><span class="op" id="8525548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525553">default</span><span class="op" id="8525560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525566"><a href="/net/http/httputil/dump_test.go.html#8525253">t</a></span><span class="op" id="8525567">.</span><span class="ident" id="8525568">Fatalf</span><span class="op" id="8525574">(</span><span class="string" id="8525575">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="8525608">,</span>&nbsp;<span class="ident" id="8525610"><a href="/net/http/httputil/dump_test.go.html#8525307">i</a></span><span class="op" id="8525611">,</span>&nbsp;<span class="ident" id="8525613"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525615">.</span><span class="ident" id="8525616">Body</span><span class="op" id="8525620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8525625">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8525629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525633"><a href="/net/http/httputil/dump_test.go.html#8525336">setBody</a></span><span class="op" id="8525640">(</span><span class="op" id="8525641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525645">if</span>&nbsp;<span class="ident" id="8525648"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525650">.</span><span class="ident" id="8525651">Req</span><span class="op" id="8525654">.</span><span class="ident" id="8525655">Header</span>&nbsp;<span class="op" id="8525662">==</span>&nbsp;<span class="ident" id="8525665">nil</span>&nbsp;<span class="op" id="8525669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525674"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525676">.</span><span class="ident" id="8525677">Req</span><span class="op" id="8525680">.</span><span class="ident" id="8525681">Header</span>&nbsp;<span class="op" id="8525688">=</span>&nbsp;<span class="builtinfunc" id="8525690">make</span><span class="op" id="8525694">(</span><span class="ident" id="8525695"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8525699">.</span><span class="ident" id="8525700">Header</span><span class="op" id="8525706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8525710">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525715">if</span>&nbsp;<span class="ident" id="8525718"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525720">.</span><span class="ident" id="8525721">WantDump</span>&nbsp;<span class="op" id="8525730">!=</span>&nbsp;<span class="string" id="8525733">&#34;&#34;</span>&nbsp;<span class="op" id="8525736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525741"><a href="/net/http/httputil/dump_test.go.html#8525336">setBody</a></span><span class="op" id="8525748">(</span><span class="op" id="8525749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525754">dump</span><span class="op" id="8525758">,</span>&nbsp;<span class="ident" id="8525760">err</span>&nbsp;<span class="op" id="8525764">:=</span>&nbsp;<span class="ident" id="8525767"><a href="/net/http/httputil/dump.go.html#6253027">DumpRequest</a></span><span class="op" id="8525778">(</span><span class="op" id="8525779">&amp;</span><span class="ident" id="8525780"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525782">.</span><span class="ident" id="8525783">Req</span><span class="op" id="8525786">,</span>&nbsp;<span class="op" id="8525788">!</span><span class="ident" id="8525789"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525791">.</span><span class="ident" id="8525792">NoBody</span><span class="op" id="8525798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525803">if</span>&nbsp;<span class="ident" id="8525806"><a href="/net/http/httputil/dump_test.go.html#8525760">err</a></span>&nbsp;<span class="op" id="8525810">!=</span>&nbsp;<span class="ident" id="8525813">nil</span>&nbsp;<span class="op" id="8525817">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525823"><a href="/net/http/httputil/dump_test.go.html#8525253">t</a></span><span class="op" id="8525824">.</span><span class="ident" id="8525825">Errorf</span><span class="op" id="8525831">(</span><span class="string" id="8525832">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="8525853">,</span>&nbsp;<span class="ident" id="8525855"><a href="/net/http/httputil/dump_test.go.html#8525307">i</a></span><span class="op" id="8525856">,</span>&nbsp;<span class="ident" id="8525858"><a href="/net/http/httputil/dump_test.go.html#8525760">err</a></span><span class="op" id="8525861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525867">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8525879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8525884">if</span>&nbsp;<span class="builtintype" id="8525887">string</span><span class="op" id="8525893">(</span><span class="ident" id="8525894"><a href="/net/http/httputil/dump_test.go.html#8525754">dump</a></span><span class="op" id="8525898">)</span>&nbsp;<span class="op" id="8525900">!=</span>&nbsp;<span class="ident" id="8525903"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525905">.</span><span class="ident" id="8525906">WantDump</span>&nbsp;<span class="op" id="8525915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8525921"><a href="/net/http/httputil/dump_test.go.html#8525253">t</a></span><span class="op" id="8525922">.</span><span class="ident" id="8525923">Errorf</span><span class="op" id="8525929">(</span><span class="string" id="8525930">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="8525974">,</span>&nbsp;<span class="ident" id="8525976"><a href="/net/http/httputil/dump_test.go.html#8525307">i</a></span><span class="op" id="8525977">,</span>&nbsp;<span class="ident" id="8525979"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8525981">.</span><span class="ident" id="8525982">WantDump</span><span class="op" id="8525990">,</span>&nbsp;<span class="builtintype" id="8525992">string</span><span class="op" id="8525998">(</span><span class="ident" id="8525999"><a href="/net/http/httputil/dump_test.go.html#8525754">dump</a></span><span class="op" id="8526003">)</span><span class="op" id="8526004">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526010">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526031">if</span>&nbsp;<span class="ident" id="8526034"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8526036">.</span><span class="ident" id="8526037">WantDumpOut</span>&nbsp;<span class="op" id="8526049">!=</span>&nbsp;<span class="string" id="8526052">&#34;&#34;</span>&nbsp;<span class="op" id="8526055">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526060"><a href="/net/http/httputil/dump_test.go.html#8525336">setBody</a></span><span class="op" id="8526067">(</span><span class="op" id="8526068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526073">dump</span><span class="op" id="8526077">,</span>&nbsp;<span class="ident" id="8526079">err</span>&nbsp;<span class="op" id="8526083">:=</span>&nbsp;<span class="ident" id="8526086"><a href="/net/http/httputil/dump.go.html#6249484">DumpRequestOut</a></span><span class="op" id="8526100">(</span><span class="op" id="8526101">&amp;</span><span class="ident" id="8526102"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8526104">.</span><span class="ident" id="8526105">Req</span><span class="op" id="8526108">,</span>&nbsp;<span class="op" id="8526110">!</span><span class="ident" id="8526111"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8526113">.</span><span class="ident" id="8526114">NoBody</span><span class="op" id="8526120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526125">if</span>&nbsp;<span class="ident" id="8526128"><a href="/net/http/httputil/dump_test.go.html#8526079">err</a></span>&nbsp;<span class="op" id="8526132">!=</span>&nbsp;<span class="ident" id="8526135">nil</span>&nbsp;<span class="op" id="8526139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526145"><a href="/net/http/httputil/dump_test.go.html#8525253">t</a></span><span class="op" id="8526146">.</span><span class="ident" id="8526147">Errorf</span><span class="op" id="8526153">(</span><span class="string" id="8526154">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="8526178">,</span>&nbsp;<span class="ident" id="8526180"><a href="/net/http/httputil/dump_test.go.html#8525307">i</a></span><span class="op" id="8526181">,</span>&nbsp;<span class="ident" id="8526183"><a href="/net/http/httputil/dump_test.go.html#8526079">err</a></span><span class="op" id="8526186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526192">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526209">if</span>&nbsp;<span class="builtintype" id="8526212">string</span><span class="op" id="8526218">(</span><span class="ident" id="8526219"><a href="/net/http/httputil/dump_test.go.html#8526073">dump</a></span><span class="op" id="8526223">)</span>&nbsp;<span class="op" id="8526225">!=</span>&nbsp;<span class="ident" id="8526228"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8526230">.</span><span class="ident" id="8526231">WantDumpOut</span>&nbsp;<span class="op" id="8526243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526249"><a href="/net/http/httputil/dump_test.go.html#8525253">t</a></span><span class="op" id="8526250">.</span><span class="ident" id="8526251">Errorf</span><span class="op" id="8526257">(</span><span class="string" id="8526258">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="8526305">,</span>&nbsp;<span class="ident" id="8526307"><a href="/net/http/httputil/dump_test.go.html#8525307">i</a></span><span class="op" id="8526308">,</span>&nbsp;<span class="ident" id="8526310"><a href="/net/http/httputil/dump_test.go.html#8525310">tt</a></span><span class="op" id="8526312">.</span><span class="ident" id="8526313">WantDumpOut</span><span class="op" id="8526324">,</span>&nbsp;<span class="builtintype" id="8526326">string</span><span class="op" id="8526332">(</span><span class="ident" id="8526333"><a href="/net/http/httputil/dump_test.go.html#8526073">dump</a></span><span class="op" id="8526337">)</span><span class="op" id="8526338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526344">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526356">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526366">if</span>&nbsp;<span class="ident" id="8526369">dg</span>&nbsp;<span class="op" id="8526372">:=</span>&nbsp;<span class="ident" id="8526375"><a href="/net/http/httputil/dump_test.go.html#8522538">runtime</a></span><span class="op" id="8526382">.</span><span class="ident" id="8526383">NumGoroutine</span><span class="op" id="8526395">(</span><span class="op" id="8526396">)</span>&nbsp;<span class="op" id="8526398">-</span>&nbsp;<span class="ident" id="8526400"><a href="/net/http/httputil/dump_test.go.html#8525270">numg0</a></span><span class="op" id="8526405">;</span>&nbsp;<span class="ident" id="8526407"><a href="/net/http/httputil/dump_test.go.html#8526369">dg</a></span>&nbsp;<span class="op" id="8526410">&gt;</span>&nbsp;<span class="num" id="8526412">4</span>&nbsp;<span class="op" id="8526414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526418">buf</span>&nbsp;<span class="op" id="8526422">:=</span>&nbsp;<span class="builtinfunc" id="8526425">make</span><span class="op" id="8526429">(</span><span class="op" id="8526430">[</span><span class="op" id="8526431">]</span><span class="builtintype" id="8526432">byte</span><span class="op" id="8526436">,</span>&nbsp;<span class="num" id="8526438">4096</span><span class="op" id="8526442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526446"><a href="/net/http/httputil/dump_test.go.html#8526418">buf</a></span>&nbsp;<span class="op" id="8526450">=</span>&nbsp;<span class="ident" id="8526452"><a href="/net/http/httputil/dump_test.go.html#8526418">buf</a></span><span class="op" id="8526455">[</span><span class="op" id="8526456">:</span><span class="ident" id="8526457"><a href="/net/http/httputil/dump_test.go.html#8522538">runtime</a></span><span class="op" id="8526464">.</span><span class="ident" id="8526465">Stack</span><span class="op" id="8526470">(</span><span class="ident" id="8526471"><a href="/net/http/httputil/dump_test.go.html#8526418">buf</a></span><span class="op" id="8526474">,</span>&nbsp;<span class="ident" id="8526476">true</span><span class="op" id="8526480">)</span><span class="op" id="8526481">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526485"><a href="/net/http/httputil/dump_test.go.html#8525253">t</a></span><span class="op" id="8526486">.</span><span class="ident" id="8526487">Errorf</span><span class="op" id="8526493">(</span><span class="string" id="8526494">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="8526551">,</span>&nbsp;<span class="ident" id="8526553"><a href="/net/http/httputil/dump_test.go.html#8526369">dg</a></span><span class="op" id="8526555">,</span>&nbsp;<span class="ident" id="8526557"><a href="/net/http/httputil/dump_test.go.html#8526418">buf</a></span><span class="op" id="8526560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526563">}</span><br>
<span class="lineno"></span><span class="op" id="8526565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8526568">func</span>&nbsp;<span class="ident" id="8526573">chunk</span><span class="op" id="8526578">(</span><span class="ident" id="8526579">s</span>&nbsp;<span class="builtintype" id="8526581">string</span><span class="op" id="8526587">)</span>&nbsp;<span class="builtintype" id="8526589">string</span>&nbsp;<span class="op" id="8526596">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526599">return</span>&nbsp;<span class="ident" id="8526606"><a href="/net/http/httputil/dump_test.go.html#8522489">fmt</a></span><span class="op" id="8526609">.</span><span class="ident" id="8526610">Sprintf</span><span class="op" id="8526617">(</span><span class="string" id="8526618">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="8526632">,</span>&nbsp;<span class="builtinfunc" id="8526634">len</span><span class="op" id="8526637">(</span><span class="ident" id="8526638"><a href="/net/http/httputil/dump_test.go.html#8526579">s</a></span><span class="op" id="8526639">)</span><span class="op" id="8526640">,</span>&nbsp;<span class="ident" id="8526642"><a href="/net/http/httputil/dump_test.go.html#8526579">s</a></span><span class="op" id="8526643">)</span><br>
<span class="lineno"></span><span class="op" id="8526645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8526648">func</span>&nbsp;<span class="ident" id="8526653">mustParseURL</span><span class="op" id="8526665">(</span><span class="ident" id="8526666">s</span>&nbsp;<span class="builtintype" id="8526668">string</span><span class="op" id="8526674">)</span>&nbsp;<span class="op" id="8526676">*</span><span class="ident" id="8526677"><a href="/net/http/httputil/dump_test.go.html#8522527">url</a></span><span class="op" id="8526680">.</span><span class="ident" id="8526681">URL</span>&nbsp;<span class="op" id="8526685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526688">u</span><span class="op" id="8526689">,</span>&nbsp;<span class="ident" id="8526691">err</span>&nbsp;<span class="op" id="8526695">:=</span>&nbsp;<span class="ident" id="8526698"><a href="/net/http/httputil/dump_test.go.html#8522527">url</a></span><span class="op" id="8526701">.</span><span class="ident" id="8526702">Parse</span><span class="op" id="8526707">(</span><span class="ident" id="8526708"><a href="/net/http/httputil/dump_test.go.html#8526666">s</a></span><span class="op" id="8526709">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526712">if</span>&nbsp;<span class="ident" id="8526715"><a href="/net/http/httputil/dump_test.go.html#8526691">err</a></span>&nbsp;<span class="op" id="8526719">!=</span>&nbsp;<span class="ident" id="8526722">nil</span>&nbsp;<span class="op" id="8526726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8526730">panic</span><span class="op" id="8526735">(</span><span class="ident" id="8526736"><a href="/net/http/httputil/dump_test.go.html#8522489">fmt</a></span><span class="op" id="8526739">.</span><span class="ident" id="8526740">Sprintf</span><span class="op" id="8526747">(</span><span class="string" id="8526748">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="8526774">,</span>&nbsp;<span class="ident" id="8526776"><a href="/net/http/httputil/dump_test.go.html#8526666">s</a></span><span class="op" id="8526777">,</span>&nbsp;<span class="ident" id="8526779"><a href="/net/http/httputil/dump_test.go.html#8526691">err</a></span><span class="op" id="8526782">)</span><span class="op" id="8526783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8526786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526789">return</span>&nbsp;<span class="ident" id="8526796"><a href="/net/http/httputil/dump_test.go.html#8526688">u</a></span><br>
<span class="lineno"></span><span class="op" id="8526798">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8526801">func</span>&nbsp;<span class="ident" id="8526806">mustNewRequest</span><span class="op" id="8526820">(</span><span class="ident" id="8526821">method</span><span class="op" id="8526827">,</span>&nbsp;<span class="ident" id="8526829">url</span>&nbsp;<span class="builtintype" id="8526833">string</span><span class="op" id="8526839">,</span>&nbsp;<span class="ident" id="8526841">body</span>&nbsp;<span class="ident" id="8526846"><a href="/net/http/httputil/dump_test.go.html#8522496">io</a></span><span class="op" id="8526848">.</span><span class="ident" id="8526849">Reader</span><span class="op" id="8526855">)</span>&nbsp;<span class="op" id="8526857">*</span><span class="ident" id="8526858"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8526862">.</span><span class="ident" id="8526863">Request</span>&nbsp;<span class="op" id="8526871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526874">req</span><span class="op" id="8526877">,</span>&nbsp;<span class="ident" id="8526879">err</span>&nbsp;<span class="op" id="8526883">:=</span>&nbsp;<span class="ident" id="8526886"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8526890">.</span><span class="ident" id="8526891">NewRequest</span><span class="op" id="8526901">(</span><span class="ident" id="8526902"><a href="/net/http/httputil/dump_test.go.html#8526821">method</a></span><span class="op" id="8526908">,</span>&nbsp;<span class="ident" id="8526910"><a href="/net/http/httputil/dump_test.go.html#8526829">url</a></span><span class="op" id="8526913">,</span>&nbsp;<span class="ident" id="8526915"><a href="/net/http/httputil/dump_test.go.html#8526841">body</a></span><span class="op" id="8526919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8526922">if</span>&nbsp;<span class="ident" id="8526925"><a href="/net/http/httputil/dump_test.go.html#8526879">err</a></span>&nbsp;<span class="op" id="8526929">!=</span>&nbsp;<span class="ident" id="8526932">nil</span>&nbsp;<span class="op" id="8526936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8526940">panic</span><span class="op" id="8526945">(</span><span class="ident" id="8526946"><a href="/net/http/httputil/dump_test.go.html#8522489">fmt</a></span><span class="op" id="8526949">.</span><span class="ident" id="8526950">Sprintf</span><span class="op" id="8526957">(</span><span class="string" id="8526958">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="8526991">,</span>&nbsp;<span class="ident" id="8526993"><a href="/net/http/httputil/dump_test.go.html#8526821">method</a></span><span class="op" id="8526999">,</span>&nbsp;<span class="ident" id="8527001"><a href="/net/http/httputil/dump_test.go.html#8526829">url</a></span><span class="op" id="8527004">,</span>&nbsp;<span class="ident" id="8527006"><a href="/net/http/httputil/dump_test.go.html#8526841">body</a></span><span class="op" id="8527010">,</span>&nbsp;<span class="ident" id="8527012"><a href="/net/http/httputil/dump_test.go.html#8526879">err</a></span><span class="op" id="8527015">)</span><span class="op" id="8527016">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8527022">return</span>&nbsp;<span class="ident" id="8527029"><a href="/net/http/httputil/dump_test.go.html#8526874">req</a></span><br>
<span class="lineno"></span><span class="op" id="8527033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8527036">var</span>&nbsp;<span class="ident" id="8527040">dumpResTests</span>&nbsp;<span class="op" id="8527053">=</span>&nbsp;<span class="op" id="8527055">[</span><span class="op" id="8527056">]</span><span class="keyword" id="8527057">struct</span>&nbsp;<span class="op" id="8527064">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527067">res</span>&nbsp;&nbsp;<span class="op" id="8527072">*</span><span class="ident" id="8527073"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8527077">.</span><span class="ident" id="8527078">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527088">body</span>&nbsp;<span class="builtintype" id="8527093">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527099">want</span>&nbsp;<span class="builtintype" id="8527104">string</span><br>
<span class="lineno"></span><span class="op" id="8527111">}</span><span class="op" id="8527112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527115">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527119">res</span><span class="op" id="8527122">:</span>&nbsp;<span class="op" id="8527124">&amp;</span><span class="ident" id="8527125"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8527129">.</span><span class="ident" id="8527130">Response</span><span class="op" id="8527138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527143">Status</span><span class="op" id="8527149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8527158">&#34;200&nbsp;OK&#34;</span><span class="op" id="8527166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527171">StatusCode</span><span class="op" id="8527181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527186">200</span><span class="op" id="8527189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527194">Proto</span><span class="op" id="8527199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8527209">&#34;HTTP/1.1&#34;</span><span class="op" id="8527219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527224">ProtoMajor</span><span class="op" id="8527234">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527239">1</span><span class="op" id="8527240">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527245">ProtoMinor</span><span class="op" id="8527255">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527260">1</span><span class="op" id="8527261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527266">ContentLength</span><span class="op" id="8527279">:</span>&nbsp;<span class="num" id="8527281">50</span><span class="op" id="8527283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527288">Header</span><span class="op" id="8527294">:</span>&nbsp;<span class="ident" id="8527296"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8527300">.</span><span class="ident" id="8527301">Header</span><span class="op" id="8527307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8527313">&#34;Foo&#34;</span><span class="op" id="8527318">:</span>&nbsp;<span class="op" id="8527320">[</span><span class="op" id="8527321">]</span><span class="builtintype" id="8527322">string</span><span class="op" id="8527328">{</span><span class="string" id="8527329">&#34;Bar&#34;</span><span class="op" id="8527334">}</span><span class="op" id="8527335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527340">}</span><span class="op" id="8527341">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527346">Body</span><span class="op" id="8527350">:</span>&nbsp;<span class="ident" id="8527352"><a href="/net/http/httputil/dump_test.go.html#8522502">ioutil</a></span><span class="op" id="8527358">.</span><span class="ident" id="8527359">NopCloser</span><span class="op" id="8527368">(</span><span class="ident" id="8527369"><a href="/net/http/httputil/dump_test.go.html#8522549">strings</a></span><span class="op" id="8527376">.</span><span class="ident" id="8527377">NewReader</span><span class="op" id="8527386">(</span><span class="string" id="8527387">&#34;foo&#34;</span><span class="op" id="8527392">)</span><span class="op" id="8527393">)</span><span class="op" id="8527394">,</span>&nbsp;<span class="comment" id="8527396">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527419">}</span><span class="op" id="8527420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527424">body</span><span class="op" id="8527428">:</span>&nbsp;<span class="ident" id="8527430">false</span><span class="op" id="8527435">,</span>&nbsp;<span class="comment" id="8527437">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527479">want</span><span class="op" id="8527483">:</span>&nbsp;<span class="string" id="8527485">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="8527530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527533">}</span><span class="op" id="8527534">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527542">res</span><span class="op" id="8527545">:</span>&nbsp;<span class="op" id="8527547">&amp;</span><span class="ident" id="8527548"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8527552">.</span><span class="ident" id="8527553">Response</span><span class="op" id="8527561">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527566">Status</span><span class="op" id="8527572">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8527581">&#34;200&nbsp;OK&#34;</span><span class="op" id="8527589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527594">StatusCode</span><span class="op" id="8527604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527609">200</span><span class="op" id="8527612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527617">Proto</span><span class="op" id="8527622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8527632">&#34;HTTP/1.1&#34;</span><span class="op" id="8527642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527647">ProtoMajor</span><span class="op" id="8527657">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527662">1</span><span class="op" id="8527663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527668">ProtoMinor</span><span class="op" id="8527678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527683">1</span><span class="op" id="8527684">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527689">ContentLength</span><span class="op" id="8527702">:</span>&nbsp;<span class="num" id="8527704">3</span><span class="op" id="8527705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527710">Body</span><span class="op" id="8527714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8527725"><a href="/net/http/httputil/dump_test.go.html#8522502">ioutil</a></span><span class="op" id="8527731">.</span><span class="ident" id="8527732">NopCloser</span><span class="op" id="8527741">(</span><span class="ident" id="8527742"><a href="/net/http/httputil/dump_test.go.html#8522549">strings</a></span><span class="op" id="8527749">.</span><span class="ident" id="8527750">NewReader</span><span class="op" id="8527759">(</span><span class="string" id="8527760">&#34;foo&#34;</span><span class="op" id="8527765">)</span><span class="op" id="8527766">)</span><span class="op" id="8527767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527771">}</span><span class="op" id="8527772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527776">body</span><span class="op" id="8527780">:</span>&nbsp;<span class="ident" id="8527782">true</span><span class="op" id="8527786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527790">want</span><span class="op" id="8527794">:</span>&nbsp;<span class="string" id="8527796">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="8527836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527839">}</span><span class="op" id="8527840">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8527844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527848">res</span><span class="op" id="8527851">:</span>&nbsp;<span class="op" id="8527853">&amp;</span><span class="ident" id="8527854"><a href="/net/http/httputil/dump_test.go.html#8522515">http</a></span><span class="op" id="8527858">.</span><span class="ident" id="8527859">Response</span><span class="op" id="8527867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527872">Status</span><span class="op" id="8527878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8527890">&#34;200&nbsp;OK&#34;</span><span class="op" id="8527898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527903">StatusCode</span><span class="op" id="8527913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527921">200</span><span class="op" id="8527924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527929">Proto</span><span class="op" id="8527934">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8527947">&#34;HTTP/1.1&#34;</span><span class="op" id="8527957">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527962">ProtoMajor</span><span class="op" id="8527972">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8527980">1</span><span class="op" id="8527981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8527986">ProtoMinor</span><span class="op" id="8527996">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8528004">1</span><span class="op" id="8528005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528010">ContentLength</span><span class="op" id="8528023">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8528028">-</span><span class="num" id="8528029">1</span><span class="op" id="8528030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528035">Body</span><span class="op" id="8528039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8528053"><a href="/net/http/httputil/dump_test.go.html#8522502">ioutil</a></span><span class="op" id="8528059">.</span><span class="ident" id="8528060">NopCloser</span><span class="op" id="8528069">(</span><span class="ident" id="8528070"><a href="/net/http/httputil/dump_test.go.html#8522549">strings</a></span><span class="op" id="8528077">.</span><span class="ident" id="8528078">NewReader</span><span class="op" id="8528087">(</span><span class="string" id="8528088">&#34;foo&#34;</span><span class="op" id="8528093">)</span><span class="op" id="8528094">)</span><span class="op" id="8528095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528100">TransferEncoding</span><span class="op" id="8528116">:</span>&nbsp;<span class="op" id="8528118">[</span><span class="op" id="8528119">]</span><span class="builtintype" id="8528120">string</span><span class="op" id="8528126">{</span><span class="string" id="8528127">&#34;chunked&#34;</span><span class="op" id="8528136">}</span><span class="op" id="8528137">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528141">}</span><span class="op" id="8528142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528146">body</span><span class="op" id="8528150">:</span>&nbsp;<span class="ident" id="8528152">true</span><span class="op" id="8528156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528160">want</span><span class="op" id="8528164">:</span>&nbsp;<span class="string" id="8528166">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="8528219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528222">}</span><span class="op" id="8528223">,</span><br>
<span class="lineno"></span><span class="op" id="8528225">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="8528228">func</span>&nbsp;<span class="ident" id="8528233">TestDumpResponse</span><span class="op" id="8528249">(</span><span class="ident" id="8528250">t</span>&nbsp;<span class="op" id="8528252">*</span><span class="ident" id="8528253"><a href="/net/http/httputil/dump_test.go.html#8522560">testing</a></span><span class="op" id="8528260">.</span><span class="ident" id="8528261">T</span><span class="op" id="8528262">)</span>&nbsp;<span class="op" id="8528264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528267">for</span>&nbsp;<span class="ident" id="8528271">i</span><span class="op" id="8528272">,</span>&nbsp;<span class="ident" id="8528274">tt</span>&nbsp;<span class="op" id="8528277">:=</span>&nbsp;<span class="keyword" id="8528280">range</span>&nbsp;<span class="ident" id="8528286"><a href="/net/http/httputil/dump_test.go.html#8527040">dumpResTests</a></span>&nbsp;<span class="op" id="8528299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528303">gotb</span><span class="op" id="8528307">,</span>&nbsp;<span class="ident" id="8528309">err</span>&nbsp;<span class="op" id="8528313">:=</span>&nbsp;<span class="ident" id="8528316"><a href="/net/http/httputil/dump.go.html#6254938">DumpResponse</a></span><span class="op" id="8528328">(</span><span class="ident" id="8528329"><a href="/net/http/httputil/dump_test.go.html#8528274">tt</a></span><span class="op" id="8528331">.</span><span class="ident" id="8528332">res</span><span class="op" id="8528335">,</span>&nbsp;<span class="ident" id="8528337"><a href="/net/http/httputil/dump_test.go.html#8528274">tt</a></span><span class="op" id="8528339">.</span><span class="ident" id="8528340">body</span><span class="op" id="8528344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528348">if</span>&nbsp;<span class="ident" id="8528351"><a href="/net/http/httputil/dump_test.go.html#8528309">err</a></span>&nbsp;<span class="op" id="8528355">!=</span>&nbsp;<span class="ident" id="8528358">nil</span>&nbsp;<span class="op" id="8528362">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528367"><a href="/net/http/httputil/dump_test.go.html#8528250">t</a></span><span class="op" id="8528368">.</span><span class="ident" id="8528369">Errorf</span><span class="op" id="8528375">(</span><span class="string" id="8528376">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="8528399">,</span>&nbsp;<span class="ident" id="8528401"><a href="/net/http/httputil/dump_test.go.html#8528271">i</a></span><span class="op" id="8528402">,</span>&nbsp;<span class="ident" id="8528404"><a href="/net/http/httputil/dump_test.go.html#8528309">err</a></span><span class="op" id="8528407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528412">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528427">got</span>&nbsp;<span class="op" id="8528431">:=</span>&nbsp;<span class="builtintype" id="8528434">string</span><span class="op" id="8528440">(</span><span class="ident" id="8528441"><a href="/net/http/httputil/dump_test.go.html#8528303">gotb</a></span><span class="op" id="8528445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528449"><a href="/net/http/httputil/dump_test.go.html#8528427">got</a></span>&nbsp;<span class="op" id="8528453">=</span>&nbsp;<span class="ident" id="8528455"><a href="/net/http/httputil/dump_test.go.html#8522549">strings</a></span><span class="op" id="8528462">.</span><span class="ident" id="8528463">TrimSpace</span><span class="op" id="8528472">(</span><span class="ident" id="8528473"><a href="/net/http/httputil/dump_test.go.html#8528427">got</a></span><span class="op" id="8528476">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528480"><a href="/net/http/httputil/dump_test.go.html#8528427">got</a></span>&nbsp;<span class="op" id="8528484">=</span>&nbsp;<span class="ident" id="8528486"><a href="/net/http/httputil/dump_test.go.html#8522549">strings</a></span><span class="op" id="8528493">.</span><span class="ident" id="8528494">Replace</span><span class="op" id="8528501">(</span><span class="ident" id="8528502"><a href="/net/http/httputil/dump_test.go.html#8528427">got</a></span><span class="op" id="8528505">,</span>&nbsp;<span class="string" id="8528507">&#34;\r&#34;</span><span class="op" id="8528511">,</span>&nbsp;<span class="string" id="8528513">&#34;&#34;</span><span class="op" id="8528515">,</span>&nbsp;<span class="op" id="8528517">-</span><span class="num" id="8528518">1</span><span class="op" id="8528519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8528524">if</span>&nbsp;<span class="ident" id="8528527"><a href="/net/http/httputil/dump_test.go.html#8528427">got</a></span>&nbsp;<span class="op" id="8528531">!=</span>&nbsp;<span class="ident" id="8528534"><a href="/net/http/httputil/dump_test.go.html#8528274">tt</a></span><span class="op" id="8528536">.</span><span class="ident" id="8528537">want</span>&nbsp;<span class="op" id="8528542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8528547"><a href="/net/http/httputil/dump_test.go.html#8528250">t</a></span><span class="op" id="8528548">.</span><span class="ident" id="8528549">Errorf</span><span class="op" id="8528555">(</span><span class="string" id="8528556">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="8528599">,</span>&nbsp;<span class="ident" id="8528601"><a href="/net/http/httputil/dump_test.go.html#8528271">i</a></span><span class="op" id="8528602">,</span>&nbsp;<span class="ident" id="8528604"><a href="/net/http/httputil/dump_test.go.html#8528427">got</a></span><span class="op" id="8528607">,</span>&nbsp;<span class="ident" id="8528609"><a href="/net/http/httputil/dump_test.go.html#8528274">tt</a></span><span class="op" id="8528611">.</span><span class="ident" id="8528612">want</span><span class="op" id="8528616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528620">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8528623">}</span><br>
<span class="lineno"></span><span class="op" id="8528625">}</span>
</div>
</body>
</html>
