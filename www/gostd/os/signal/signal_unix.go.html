<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6341246">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6341301">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6341355">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6341406">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6341484">package</span>&nbsp;<span class="ident" id="6341492">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6341500">import</span>&nbsp;<span class="op" id="6341507">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6341510">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6341516">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="6341526">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6341529">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="6341545">func</span>&nbsp;<span class="ident" id="6341550">signal_disable</span><span class="op" id="6341564">(</span><span class="builtintype" id="6341565">uint32</span><span class="op" id="6341571">)</span><br>
<span class="lineno"></span><span class="keyword" id="6341573">func</span>&nbsp;<span class="ident" id="6341578">signal_enable</span><span class="op" id="6341591">(</span><span class="builtintype" id="6341592">uint32</span><span class="op" id="6341598">)</span><br>
<span class="lineno"></span><span class="keyword" id="6341600">func</span>&nbsp;<span class="ident" id="6341605">signal_recv</span><span class="op" id="6341616">(</span><span class="op" id="6341617">)</span>&nbsp;<span class="builtintype" id="6341619">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6341627">func</span>&nbsp;<span class="ident" id="6341632">loop</span><span class="op" id="6341636">(</span><span class="op" id="6341637">)</span>&nbsp;<span class="op" id="6341639">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341642">for</span>&nbsp;<span class="op" id="6341646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341650">process</span><span class="op" id="6341657">(</span><span class="ident" id="6341658">syscall</span><span class="op" id="6341665">.</span><span class="ident" id="6341666">Signal</span><span class="op" id="6341672">(</span><span class="ident" id="6341673">signal_recv</span><span class="op" id="6341684">(</span><span class="op" id="6341685">)</span><span class="op" id="6341686">)</span><span class="op" id="6341687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341690">}</span><br>
<span class="lineno"></span><span class="op" id="6341692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6341695">func</span>&nbsp;<span class="ident" id="6341700">init</span><span class="op" id="6341704">(</span><span class="op" id="6341705">)</span>&nbsp;<span class="op" id="6341707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341710">signal_enable</span><span class="op" id="6341723">(</span><span class="num" id="6341724">0</span><span class="op" id="6341725">)</span>&nbsp;<span class="comment" id="6341727">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341755">go</span>&nbsp;<span class="ident" id="6341758">loop</span><span class="op" id="6341762">(</span><span class="op" id="6341763">)</span><br>
<span class="lineno"></span><span class="op" id="6341765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6341768">const</span>&nbsp;<span class="op" id="6341774">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341777">numSig</span>&nbsp;<span class="op" id="6341784">=</span>&nbsp;<span class="num" id="6341786">65</span>&nbsp;<span class="comment" id="6341789">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="6341815">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6341818">func</span>&nbsp;<span class="ident" id="6341823">signum</span><span class="op" id="6341829">(</span><span class="ident" id="6341830">sig</span>&nbsp;<span class="ident" id="6341834">os</span><span class="op" id="6341836">.</span><span class="ident" id="6341837">Signal</span><span class="op" id="6341843">)</span>&nbsp;<span class="builtintype" id="6341845">int</span>&nbsp;<span class="op" id="6341849">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341852">switch</span>&nbsp;<span class="ident" id="6341859">sig</span>&nbsp;<span class="op" id="6341863">:=</span>&nbsp;<span class="ident" id="6341866">sig</span><span class="op" id="6341869">.</span><span class="op" id="6341870">(</span><span class="keyword" id="6341871">type</span><span class="op" id="6341875">)</span>&nbsp;<span class="op" id="6341877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341880">case</span>&nbsp;<span class="ident" id="6341885">syscall</span><span class="op" id="6341892">.</span><span class="ident" id="6341893">Signal</span><span class="op" id="6341899">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6341903">i</span>&nbsp;<span class="op" id="6341905">:=</span>&nbsp;<span class="builtintype" id="6341908">int</span><span class="op" id="6341911">(</span><span class="ident" id="6341912">sig</span><span class="op" id="6341915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341919">if</span>&nbsp;<span class="ident" id="6341922">i</span>&nbsp;<span class="op" id="6341924">&lt;</span>&nbsp;<span class="num" id="6341926">0</span>&nbsp;<span class="op" id="6341928">||</span>&nbsp;<span class="ident" id="6341931">i</span>&nbsp;<span class="op" id="6341933">&gt;=</span>&nbsp;<span class="ident" id="6341936">numSig</span>&nbsp;<span class="op" id="6341943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341948">return</span>&nbsp;<span class="op" id="6341955">-</span><span class="num" id="6341956">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341964">return</span>&nbsp;<span class="ident" id="6341971">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341974">default</span><span class="op" id="6341981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6341985">return</span>&nbsp;<span class="op" id="6341992">-</span><span class="num" id="6341993">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6341996">}</span><br>
<span class="lineno">45</span><span class="op" id="6341998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6342001">func</span>&nbsp;<span class="ident" id="6342006">enableSignal</span><span class="op" id="6342018">(</span><span class="ident" id="6342019">sig</span>&nbsp;<span class="builtintype" id="6342023">int</span><span class="op" id="6342026">)</span>&nbsp;<span class="op" id="6342028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342031">signal_enable</span><span class="op" id="6342044">(</span><span class="builtintype" id="6342045">uint32</span><span class="op" id="6342051">(</span><span class="ident" id="6342052">sig</span><span class="op" id="6342055">)</span><span class="op" id="6342056">)</span><br>
<span class="lineno"></span><span class="op" id="6342058">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6342061">func</span>&nbsp;<span class="ident" id="6342066">disableSignal</span><span class="op" id="6342079">(</span><span class="ident" id="6342080">sig</span>&nbsp;<span class="builtintype" id="6342084">int</span><span class="op" id="6342087">)</span>&nbsp;<span class="op" id="6342089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6342092">signal_disable</span><span class="op" id="6342106">(</span><span class="builtintype" id="6342107">uint32</span><span class="op" id="6342113">(</span><span class="ident" id="6342114">sig</span><span class="op" id="6342117">)</span><span class="op" id="6342118">)</span><br>
<span class="lineno"></span><span class="op" id="6342120">}</span>
</div>
</body>
</html>
