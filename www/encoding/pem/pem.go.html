<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4087486">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4087541">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4087595">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4087646">//&nbsp;Package&nbsp;pem&nbsp;implements&nbsp;the&nbsp;PEM&nbsp;data&nbsp;encoding,&nbsp;which&nbsp;originated&nbsp;in&nbsp;Privacy</span><br>
<span class="lineno"></span><span class="comment" id="4087723">//&nbsp;Enhanced&nbsp;Mail.&nbsp;The&nbsp;most&nbsp;common&nbsp;use&nbsp;of&nbsp;PEM&nbsp;encoding&nbsp;today&nbsp;is&nbsp;in&nbsp;TLS&nbsp;keys&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4087802">//&nbsp;certificates.&nbsp;See&nbsp;RFC&nbsp;1421.</span><br>
<span class="lineno"></span><span class="keyword" id="4087833">package</span>&nbsp;<span class="ident" id="4087841">pem</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4087846">import</span>&nbsp;<span class="op" id="4087853">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4087856">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4087865">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4087884">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4087890">&#34;sort&#34;</span><br>
<span class="lineno">15</span><span class="op" id="4087897">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4087900">//&nbsp;A&nbsp;Block&nbsp;represents&nbsp;a&nbsp;PEM&nbsp;encoded&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="4087947">//</span><br>
<span class="lineno"></span><span class="comment" id="4087950">//&nbsp;The&nbsp;encoded&nbsp;form&nbsp;is:</span><br>
<span class="lineno">20</span><span class="comment" id="4087974">//&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;Type-----</span><br>
<span class="lineno"></span><span class="comment" id="4088001">//&nbsp;&nbsp;&nbsp;&nbsp;Headers</span><br>
<span class="lineno"></span><span class="comment" id="4088015">//&nbsp;&nbsp;&nbsp;&nbsp;base64-encoded&nbsp;Bytes</span><br>
<span class="lineno"></span><span class="comment" id="4088042">//&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;Type-----</span><br>
<span class="lineno"></span><span class="comment" id="4088067">//&nbsp;where&nbsp;Headers&nbsp;is&nbsp;a&nbsp;possibly&nbsp;empty&nbsp;sequence&nbsp;of&nbsp;Key:&nbsp;Value&nbsp;lines.</span><br>
<span class="lineno">25</span><span class="keyword" id="4088134">type</span>&nbsp;<span class="ident" id="4088139">Block</span>&nbsp;<span class="keyword" id="4088145">struct</span>&nbsp;<span class="op" id="4088152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088155">Type</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4088163">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4088181">//&nbsp;The&nbsp;type,&nbsp;taken&nbsp;from&nbsp;the&nbsp;preamble&nbsp;(i.e.&nbsp;&#34;RSA&nbsp;PRIVATE&nbsp;KEY&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088245">Headers</span>&nbsp;<span class="keyword" id="4088253">map</span><span class="op" id="4088256">[</span><span class="builtintype" id="4088257">string</span><span class="op" id="4088263">]</span><span class="builtintype" id="4088264">string</span>&nbsp;<span class="comment" id="4088271">//&nbsp;Optional&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088293">Bytes</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4088301">[</span><span class="op" id="4088302">]</span><span class="builtintype" id="4088303">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4088319">//&nbsp;The&nbsp;decoded&nbsp;bytes&nbsp;of&nbsp;the&nbsp;contents.&nbsp;Typically&nbsp;a&nbsp;DER&nbsp;encoded&nbsp;ASN.1&nbsp;structure.</span><br>
<span class="lineno"></span><span class="op" id="4088398">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="4088401">//&nbsp;getLine&nbsp;results&nbsp;the&nbsp;first&nbsp;\r\n&nbsp;or&nbsp;\n&nbsp;delineated&nbsp;line&nbsp;from&nbsp;the&nbsp;given&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="4088477">//&nbsp;array.&nbsp;The&nbsp;line&nbsp;does&nbsp;not&nbsp;include&nbsp;trailing&nbsp;whitespace&nbsp;or&nbsp;the&nbsp;trailing&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="4088553">//&nbsp;line&nbsp;bytes.&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;byte&nbsp;array&nbsp;(also&nbsp;not&nbsp;including&nbsp;the&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="4088633">//&nbsp;bytes)&nbsp;is&nbsp;also&nbsp;returned&nbsp;and&nbsp;this&nbsp;will&nbsp;always&nbsp;be&nbsp;smaller&nbsp;than&nbsp;the&nbsp;original</span><br>
<span class="lineno">35</span><span class="comment" id="4088710">//&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4088723">func</span>&nbsp;<span class="ident" id="4088728">getLine</span><span class="op" id="4088735">(</span><span class="ident" id="4088736">data</span>&nbsp;<span class="op" id="4088741">[</span><span class="op" id="4088742">]</span><span class="builtintype" id="4088743">byte</span><span class="op" id="4088747">)</span>&nbsp;<span class="op" id="4088749">(</span><span class="ident" id="4088750">line</span><span class="op" id="4088754">,</span>&nbsp;<span class="ident" id="4088756">rest</span>&nbsp;<span class="op" id="4088761">[</span><span class="op" id="4088762">]</span><span class="builtintype" id="4088763">byte</span><span class="op" id="4088767">)</span>&nbsp;<span class="op" id="4088769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088772">i</span>&nbsp;<span class="op" id="4088774">:=</span>&nbsp;<span class="ident" id="4088777"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4088782">.</span><span class="ident" id="4088783">Index</span><span class="op" id="4088788">(</span><span class="ident" id="4088789"><a href="/encoding/pem/pem.go.html#4088736">data</a></span><span class="op" id="4088793">,</span>&nbsp;<span class="op" id="4088795">[</span><span class="op" id="4088796">]</span><span class="builtintype" id="4088797">byte</span><span class="op" id="4088801">{</span><span class="string" id="4088802">&#39;\n&#39;</span><span class="op" id="4088806">}</span><span class="op" id="4088807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088810">var</span>&nbsp;<span class="ident" id="4088814">j</span>&nbsp;<span class="builtintype" id="4088816">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088821">if</span>&nbsp;<span class="ident" id="4088824"><a href="/encoding/pem/pem.go.html#4088772">i</a></span>&nbsp;<span class="op" id="4088826">&lt;</span>&nbsp;<span class="num" id="4088828">0</span>&nbsp;<span class="op" id="4088830">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088834"><a href="/encoding/pem/pem.go.html#4088772">i</a></span>&nbsp;<span class="op" id="4088836">=</span>&nbsp;<span class="builtinfunc" id="4088838">len</span><span class="op" id="4088841">(</span><span class="ident" id="4088842"><a href="/encoding/pem/pem.go.html#4088736">data</a></span><span class="op" id="4088846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088850"><a href="/encoding/pem/pem.go.html#4088814">j</a></span>&nbsp;<span class="op" id="4088852">=</span>&nbsp;<span class="ident" id="4088854"><a href="/encoding/pem/pem.go.html#4088772">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088857">}</span>&nbsp;<span class="keyword" id="4088859">else</span>&nbsp;<span class="op" id="4088864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088868"><a href="/encoding/pem/pem.go.html#4088814">j</a></span>&nbsp;<span class="op" id="4088870">=</span>&nbsp;<span class="ident" id="4088872"><a href="/encoding/pem/pem.go.html#4088772">i</a></span>&nbsp;<span class="op" id="4088874">+</span>&nbsp;<span class="num" id="4088876">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088880">if</span>&nbsp;<span class="ident" id="4088883"><a href="/encoding/pem/pem.go.html#4088772">i</a></span>&nbsp;<span class="op" id="4088885">&gt;</span>&nbsp;<span class="num" id="4088887">0</span>&nbsp;<span class="op" id="4088889">&amp;&amp;</span>&nbsp;<span class="ident" id="4088892"><a href="/encoding/pem/pem.go.html#4088736">data</a></span><span class="op" id="4088896">[</span><span class="ident" id="4088897"><a href="/encoding/pem/pem.go.html#4088772">i</a></span><span class="op" id="4088898">-</span><span class="num" id="4088899">1</span><span class="op" id="4088900">]</span>&nbsp;<span class="op" id="4088902">==</span>&nbsp;<span class="string" id="4088905">&#39;\r&#39;</span>&nbsp;<span class="op" id="4088910">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4088915"><a href="/encoding/pem/pem.go.html#4088772">i</a></span><span class="op" id="4088916">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4088924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4088927">return</span>&nbsp;<span class="ident" id="4088934"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4088939">.</span><span class="ident" id="4088940">TrimRight</span><span class="op" id="4088949">(</span><span class="ident" id="4088950"><a href="/encoding/pem/pem.go.html#4088736">data</a></span><span class="op" id="4088954">[</span><span class="num" id="4088955">0</span><span class="op" id="4088956">:</span><span class="ident" id="4088957"><a href="/encoding/pem/pem.go.html#4088772">i</a></span><span class="op" id="4088958">]</span><span class="op" id="4088959">,</span>&nbsp;<span class="string" id="4088961">&#34;&nbsp;\t&#34;</span><span class="op" id="4088966">)</span><span class="op" id="4088967">,</span>&nbsp;<span class="ident" id="4088969"><a href="/encoding/pem/pem.go.html#4088736">data</a></span><span class="op" id="4088973">[</span><span class="ident" id="4088974"><a href="/encoding/pem/pem.go.html#4088814">j</a></span><span class="op" id="4088975">:</span><span class="op" id="4088976">]</span><br>
<span class="lineno"></span><span class="op" id="4088978">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4088981">//&nbsp;removeWhitespace&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;its&nbsp;input&nbsp;with&nbsp;all&nbsp;spaces,&nbsp;tab&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4089054">//&nbsp;newline&nbsp;characters&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="4089085">func</span>&nbsp;<span class="ident" id="4089090">removeWhitespace</span><span class="op" id="4089106">(</span><span class="ident" id="4089107">data</span>&nbsp;<span class="op" id="4089112">[</span><span class="op" id="4089113">]</span><span class="builtintype" id="4089114">byte</span><span class="op" id="4089118">)</span>&nbsp;<span class="op" id="4089120">[</span><span class="op" id="4089121">]</span><span class="builtintype" id="4089122">byte</span>&nbsp;<span class="op" id="4089127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089130">result</span>&nbsp;<span class="op" id="4089137">:=</span>&nbsp;<span class="builtinfunc" id="4089140">make</span><span class="op" id="4089144">(</span><span class="op" id="4089145">[</span><span class="op" id="4089146">]</span><span class="builtintype" id="4089147">byte</span><span class="op" id="4089151">,</span>&nbsp;<span class="builtinfunc" id="4089153">len</span><span class="op" id="4089156">(</span><span class="ident" id="4089157"><a href="/encoding/pem/pem.go.html#4089107">data</a></span><span class="op" id="4089161">)</span><span class="op" id="4089162">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089165">n</span>&nbsp;<span class="op" id="4089167">:=</span>&nbsp;<span class="num" id="4089170">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089174">for</span>&nbsp;<span class="ident" id="4089178">_</span><span class="op" id="4089179">,</span>&nbsp;<span class="ident" id="4089181">b</span>&nbsp;<span class="op" id="4089183">:=</span>&nbsp;<span class="keyword" id="4089186">range</span>&nbsp;<span class="ident" id="4089192"><a href="/encoding/pem/pem.go.html#4089107">data</a></span>&nbsp;<span class="op" id="4089197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089201">if</span>&nbsp;<span class="ident" id="4089204"><a href="/encoding/pem/pem.go.html#4089181">b</a></span>&nbsp;<span class="op" id="4089206">==</span>&nbsp;<span class="string" id="4089209">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4089213">||</span>&nbsp;<span class="ident" id="4089216"><a href="/encoding/pem/pem.go.html#4089181">b</a></span>&nbsp;<span class="op" id="4089218">==</span>&nbsp;<span class="string" id="4089221">&#39;\t&#39;</span>&nbsp;<span class="op" id="4089226">||</span>&nbsp;<span class="ident" id="4089229"><a href="/encoding/pem/pem.go.html#4089181">b</a></span>&nbsp;<span class="op" id="4089231">==</span>&nbsp;<span class="string" id="4089234">&#39;\r&#39;</span>&nbsp;<span class="op" id="4089239">||</span>&nbsp;<span class="ident" id="4089242"><a href="/encoding/pem/pem.go.html#4089181">b</a></span>&nbsp;<span class="op" id="4089244">==</span>&nbsp;<span class="string" id="4089247">&#39;\n&#39;</span>&nbsp;<span class="op" id="4089252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089257">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089272"><a href="/encoding/pem/pem.go.html#4089130">result</a></span><span class="op" id="4089278">[</span><span class="ident" id="4089279"><a href="/encoding/pem/pem.go.html#4089165">n</a></span><span class="op" id="4089280">]</span>&nbsp;<span class="op" id="4089282">=</span>&nbsp;<span class="ident" id="4089284"><a href="/encoding/pem/pem.go.html#4089181">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089288"><a href="/encoding/pem/pem.go.html#4089165">n</a></span><span class="op" id="4089289">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089297">return</span>&nbsp;<span class="ident" id="4089304"><a href="/encoding/pem/pem.go.html#4089130">result</a></span><span class="op" id="4089310">[</span><span class="num" id="4089311">0</span><span class="op" id="4089312">:</span><span class="ident" id="4089313"><a href="/encoding/pem/pem.go.html#4089165">n</a></span><span class="op" id="4089314">]</span><br>
<span class="lineno"></span><span class="op" id="4089316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4089319">var</span>&nbsp;<span class="ident" id="4089323">pemStart</span>&nbsp;<span class="op" id="4089332">=</span>&nbsp;<span class="op" id="4089334">[</span><span class="op" id="4089335">]</span><span class="builtintype" id="4089336">byte</span><span class="op" id="4089340">(</span><span class="string" id="4089341">&#34;\n-----BEGIN&nbsp;&#34;</span><span class="op" id="4089356">)</span><br>
<span class="lineno"></span><span class="keyword" id="4089358">var</span>&nbsp;<span class="ident" id="4089362">pemEnd</span>&nbsp;<span class="op" id="4089369">=</span>&nbsp;<span class="op" id="4089371">[</span><span class="op" id="4089372">]</span><span class="builtintype" id="4089373">byte</span><span class="op" id="4089377">(</span><span class="string" id="4089378">&#34;\n-----END&nbsp;&#34;</span><span class="op" id="4089391">)</span><br>
<span class="lineno">70</span><span class="keyword" id="4089393">var</span>&nbsp;<span class="ident" id="4089397">pemEndOfLine</span>&nbsp;<span class="op" id="4089410">=</span>&nbsp;<span class="op" id="4089412">[</span><span class="op" id="4089413">]</span><span class="builtintype" id="4089414">byte</span><span class="op" id="4089418">(</span><span class="string" id="4089419">&#34;-----&#34;</span><span class="op" id="4089426">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4089429">//&nbsp;Decode&nbsp;will&nbsp;find&nbsp;the&nbsp;next&nbsp;PEM&nbsp;formatted&nbsp;block&nbsp;(certificate,&nbsp;private&nbsp;key</span><br>
<span class="lineno"></span><span class="comment" id="4089504">//&nbsp;etc)&nbsp;in&nbsp;the&nbsp;input.&nbsp;It&nbsp;returns&nbsp;that&nbsp;block&nbsp;and&nbsp;the&nbsp;remainder&nbsp;of&nbsp;the&nbsp;input.&nbsp;If</span><br>
<span class="lineno"></span><span class="comment" id="4089583">//&nbsp;no&nbsp;PEM&nbsp;data&nbsp;is&nbsp;found,&nbsp;p&nbsp;is&nbsp;nil&nbsp;and&nbsp;the&nbsp;whole&nbsp;of&nbsp;the&nbsp;input&nbsp;is&nbsp;returned&nbsp;in</span><br>
<span class="lineno">75</span><span class="comment" id="4089659">//&nbsp;rest.</span><br>
<span class="lineno"></span><span class="keyword" id="4089668">func</span>&nbsp;<span class="ident" id="4089673">Decode</span><span class="op" id="4089679">(</span><span class="ident" id="4089680">data</span>&nbsp;<span class="op" id="4089685">[</span><span class="op" id="4089686">]</span><span class="builtintype" id="4089687">byte</span><span class="op" id="4089691">)</span>&nbsp;<span class="op" id="4089693">(</span><span class="ident" id="4089694">p</span>&nbsp;<span class="op" id="4089696">*</span><span class="ident" id="4089697"><a href="/encoding/pem/pem.go.html#4088139">Block</a></span><span class="op" id="4089702">,</span>&nbsp;<span class="ident" id="4089704">rest</span>&nbsp;<span class="op" id="4089709">[</span><span class="op" id="4089710">]</span><span class="builtintype" id="4089711">byte</span><span class="op" id="4089715">)</span>&nbsp;<span class="op" id="4089717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4089720">//&nbsp;pemStart&nbsp;begins&nbsp;with&nbsp;a&nbsp;newline.&nbsp;However,&nbsp;at&nbsp;the&nbsp;very&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4089790">//&nbsp;the&nbsp;byte&nbsp;array,&nbsp;we&#39;ll&nbsp;accept&nbsp;the&nbsp;start&nbsp;string&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089852"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span>&nbsp;<span class="op" id="4089857">=</span>&nbsp;<span class="ident" id="4089859"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4089865">if</span>&nbsp;<span class="ident" id="4089868"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4089873">.</span><span class="ident" id="4089874">HasPrefix</span><span class="op" id="4089883">(</span><span class="ident" id="4089884"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4089888">,</span>&nbsp;<span class="ident" id="4089890"><a href="/encoding/pem/pem.go.html#4089323">pemStart</a></span><span class="op" id="4089898">[</span><span class="num" id="4089899">1</span><span class="op" id="4089900">:</span><span class="op" id="4089901">]</span><span class="op" id="4089902">)</span>&nbsp;<span class="op" id="4089904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4089908"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span>&nbsp;<span class="op" id="4089913">=</span>&nbsp;<span class="ident" id="4089915"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4089919">[</span><span class="builtinfunc" id="4089920">len</span><span class="op" id="4089923">(</span><span class="ident" id="4089924"><a href="/encoding/pem/pem.go.html#4089323">pemStart</a></span><span class="op" id="4089932">)</span><span class="op" id="4089933">-</span><span class="num" id="4089934">1</span>&nbsp;<span class="op" id="4089936">:</span>&nbsp;<span class="builtinfunc" id="4089938">len</span><span class="op" id="4089941">(</span><span class="ident" id="4089942"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4089946">)</span><span class="op" id="4089947">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4089950">}</span>&nbsp;<span class="keyword" id="4089952">else</span>&nbsp;<span class="keyword" id="4089957">if</span>&nbsp;<span class="ident" id="4089960">i</span>&nbsp;<span class="op" id="4089962">:=</span>&nbsp;<span class="ident" id="4089965"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4089970">.</span><span class="ident" id="4089971">Index</span><span class="op" id="4089976">(</span><span class="ident" id="4089977"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4089981">,</span>&nbsp;<span class="ident" id="4089983"><a href="/encoding/pem/pem.go.html#4089323">pemStart</a></span><span class="op" id="4089991">)</span><span class="op" id="4089992">;</span>&nbsp;<span class="ident" id="4089994"><a href="/encoding/pem/pem.go.html#4089960">i</a></span>&nbsp;<span class="op" id="4089996">&gt;=</span>&nbsp;<span class="num" id="4089999">0</span>&nbsp;<span class="op" id="4090001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090005"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span>&nbsp;<span class="op" id="4090010">=</span>&nbsp;<span class="ident" id="4090012"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090016">[</span><span class="ident" id="4090017"><a href="/encoding/pem/pem.go.html#4089960">i</a></span><span class="op" id="4090018">+</span><span class="builtinfunc" id="4090019">len</span><span class="op" id="4090022">(</span><span class="ident" id="4090023"><a href="/encoding/pem/pem.go.html#4089323">pemStart</a></span><span class="op" id="4090031">)</span>&nbsp;<span class="op" id="4090033">:</span>&nbsp;<span class="builtinfunc" id="4090035">len</span><span class="op" id="4090038">(</span><span class="ident" id="4090039"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4090043">)</span><span class="op" id="4090044">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090047">}</span>&nbsp;<span class="keyword" id="4090049">else</span>&nbsp;<span class="op" id="4090054">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090058">return</span>&nbsp;<span class="ident" id="4090065">nil</span><span class="op" id="4090068">,</span>&nbsp;<span class="ident" id="4090070"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090080">typeLine</span><span class="op" id="4090088">,</span>&nbsp;<span class="ident" id="4090090"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span>&nbsp;<span class="op" id="4090095">:=</span>&nbsp;<span class="ident" id="4090098"><a href="/encoding/pem/pem.go.html#4088728">getLine</a></span><span class="op" id="4090105">(</span><span class="ident" id="4090106"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090113">if</span>&nbsp;<span class="op" id="4090116">!</span><span class="ident" id="4090117"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4090122">.</span><span class="ident" id="4090123">HasSuffix</span><span class="op" id="4090132">(</span><span class="ident" id="4090133"><a href="/encoding/pem/pem.go.html#4090080">typeLine</a></span><span class="op" id="4090141">,</span>&nbsp;<span class="ident" id="4090143"><a href="/encoding/pem/pem.go.html#4089397">pemEndOfLine</a></span><span class="op" id="4090155">)</span>&nbsp;<span class="op" id="4090157">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090161">return</span>&nbsp;<span class="ident" id="4090168"><a href="/encoding/pem/pem.go.html#4091195">decodeError</a></span><span class="op" id="4090179">(</span><span class="ident" id="4090180"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4090184">,</span>&nbsp;<span class="ident" id="4090186"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090196"><a href="/encoding/pem/pem.go.html#4090080">typeLine</a></span>&nbsp;<span class="op" id="4090205">=</span>&nbsp;<span class="ident" id="4090207"><a href="/encoding/pem/pem.go.html#4090080">typeLine</a></span><span class="op" id="4090215">[</span><span class="num" id="4090216">0</span>&nbsp;<span class="op" id="4090218">:</span>&nbsp;<span class="builtinfunc" id="4090220">len</span><span class="op" id="4090223">(</span><span class="ident" id="4090224"><a href="/encoding/pem/pem.go.html#4090080">typeLine</a></span><span class="op" id="4090232">)</span><span class="op" id="4090233">-</span><span class="builtinfunc" id="4090234">len</span><span class="op" id="4090237">(</span><span class="ident" id="4090238"><a href="/encoding/pem/pem.go.html#4089397">pemEndOfLine</a></span><span class="op" id="4090250">)</span><span class="op" id="4090251">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090255"><a href="/encoding/pem/pem.go.html#4089694">p</a></span>&nbsp;<span class="op" id="4090257">=</span>&nbsp;<span class="op" id="4090259">&amp;</span><span class="ident" id="4090260"><a href="/encoding/pem/pem.go.html#4088139">Block</a></span><span class="op" id="4090265">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090269">Headers</span><span class="op" id="4090276">:</span>&nbsp;<span class="builtinfunc" id="4090278">make</span><span class="op" id="4090282">(</span><span class="keyword" id="4090283">map</span><span class="op" id="4090286">[</span><span class="builtintype" id="4090287">string</span><span class="op" id="4090293">]</span><span class="builtintype" id="4090294">string</span><span class="op" id="4090300">)</span><span class="op" id="4090301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090305">Type</span><span class="op" id="4090309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4090314">string</span><span class="op" id="4090320">(</span><span class="ident" id="4090321"><a href="/encoding/pem/pem.go.html#4090080">typeLine</a></span><span class="op" id="4090329">)</span><span class="op" id="4090330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090337">for</span>&nbsp;<span class="op" id="4090341">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4090345">//&nbsp;This&nbsp;loop&nbsp;terminates&nbsp;because&nbsp;getLine&#39;s&nbsp;second&nbsp;result&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4090406">//&nbsp;always&nbsp;smaller&nbsp;than&nbsp;its&nbsp;argument.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090445">if</span>&nbsp;<span class="builtinfunc" id="4090448">len</span><span class="op" id="4090451">(</span><span class="ident" id="4090452"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090456">)</span>&nbsp;<span class="op" id="4090458">==</span>&nbsp;<span class="num" id="4090461">0</span>&nbsp;<span class="op" id="4090463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090468">return</span>&nbsp;<span class="ident" id="4090475">nil</span><span class="op" id="4090478">,</span>&nbsp;<span class="ident" id="4090480"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090487">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090491">line</span><span class="op" id="4090495">,</span>&nbsp;<span class="ident" id="4090497">next</span>&nbsp;<span class="op" id="4090502">:=</span>&nbsp;<span class="ident" id="4090505"><a href="/encoding/pem/pem.go.html#4088728">getLine</a></span><span class="op" id="4090512">(</span><span class="ident" id="4090513"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090522">i</span>&nbsp;<span class="op" id="4090524">:=</span>&nbsp;<span class="ident" id="4090527"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4090532">.</span><span class="ident" id="4090533">Index</span><span class="op" id="4090538">(</span><span class="ident" id="4090539"><a href="/encoding/pem/pem.go.html#4090491">line</a></span><span class="op" id="4090543">,</span>&nbsp;<span class="op" id="4090545">[</span><span class="op" id="4090546">]</span><span class="builtintype" id="4090547">byte</span><span class="op" id="4090551">{</span><span class="string" id="4090552">&#39;:&#39;</span><span class="op" id="4090555">}</span><span class="op" id="4090556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090560">if</span>&nbsp;<span class="ident" id="4090563"><a href="/encoding/pem/pem.go.html#4090522">i</a></span>&nbsp;<span class="op" id="4090565">==</span>&nbsp;<span class="op" id="4090568">-</span><span class="num" id="4090569">1</span>&nbsp;<span class="op" id="4090571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090576">break</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4090589">//&nbsp;TODO(agl):&nbsp;need&nbsp;to&nbsp;cope&nbsp;with&nbsp;values&nbsp;that&nbsp;spread&nbsp;across&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090656">key</span><span class="op" id="4090659">,</span>&nbsp;<span class="ident" id="4090661">val</span>&nbsp;<span class="op" id="4090665">:=</span>&nbsp;<span class="ident" id="4090668"><a href="/encoding/pem/pem.go.html#4090491">line</a></span><span class="op" id="4090672">[</span><span class="num" id="4090673">0</span><span class="op" id="4090674">:</span><span class="ident" id="4090675"><a href="/encoding/pem/pem.go.html#4090522">i</a></span><span class="op" id="4090676">]</span><span class="op" id="4090677">,</span>&nbsp;<span class="ident" id="4090679"><a href="/encoding/pem/pem.go.html#4090491">line</a></span><span class="op" id="4090683">[</span><span class="ident" id="4090684"><a href="/encoding/pem/pem.go.html#4090522">i</a></span><span class="op" id="4090685">+</span><span class="num" id="4090686">1</span><span class="op" id="4090687">:</span><span class="op" id="4090688">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090692"><a href="/encoding/pem/pem.go.html#4090656">key</a></span>&nbsp;<span class="op" id="4090696">=</span>&nbsp;<span class="ident" id="4090698"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4090703">.</span><span class="ident" id="4090704">TrimSpace</span><span class="op" id="4090713">(</span><span class="ident" id="4090714"><a href="/encoding/pem/pem.go.html#4090656">key</a></span><span class="op" id="4090717">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090721"><a href="/encoding/pem/pem.go.html#4090661">val</a></span>&nbsp;<span class="op" id="4090725">=</span>&nbsp;<span class="ident" id="4090727"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4090732">.</span><span class="ident" id="4090733">TrimSpace</span><span class="op" id="4090742">(</span><span class="ident" id="4090743"><a href="/encoding/pem/pem.go.html#4090661">val</a></span><span class="op" id="4090746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090750"><a href="/encoding/pem/pem.go.html#4089694">p</a></span><span class="op" id="4090751">.</span><span class="ident" id="4090752">Headers</span><span class="op" id="4090759">[</span><span class="builtintype" id="4090760">string</span><span class="op" id="4090766">(</span><span class="ident" id="4090767"><a href="/encoding/pem/pem.go.html#4090656">key</a></span><span class="op" id="4090770">)</span><span class="op" id="4090771">]</span>&nbsp;<span class="op" id="4090773">=</span>&nbsp;<span class="builtintype" id="4090775">string</span><span class="op" id="4090781">(</span><span class="ident" id="4090782"><a href="/encoding/pem/pem.go.html#4090661">val</a></span><span class="op" id="4090785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090789"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span>&nbsp;<span class="op" id="4090794">=</span>&nbsp;<span class="ident" id="4090796"><a href="/encoding/pem/pem.go.html#4090497">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090806">i</span>&nbsp;<span class="op" id="4090808">:=</span>&nbsp;<span class="ident" id="4090811"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4090816">.</span><span class="ident" id="4090817">Index</span><span class="op" id="4090822">(</span><span class="ident" id="4090823"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090827">,</span>&nbsp;<span class="ident" id="4090829"><a href="/encoding/pem/pem.go.html#4089362">pemEnd</a></span><span class="op" id="4090835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090838">if</span>&nbsp;<span class="ident" id="4090841"><a href="/encoding/pem/pem.go.html#4090806">i</a></span>&nbsp;<span class="op" id="4090843">&lt;</span>&nbsp;<span class="num" id="4090845">0</span>&nbsp;<span class="op" id="4090847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090851">return</span>&nbsp;<span class="ident" id="4090858"><a href="/encoding/pem/pem.go.html#4091195">decodeError</a></span><span class="op" id="4090869">(</span><span class="ident" id="4090870"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4090874">,</span>&nbsp;<span class="ident" id="4090876"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090886">base64Data</span>&nbsp;<span class="op" id="4090897">:=</span>&nbsp;<span class="ident" id="4090900"><a href="/encoding/pem/pem.go.html#4089090">removeWhitespace</a></span><span class="op" id="4090916">(</span><span class="ident" id="4090917"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4090921">[</span><span class="num" id="4090922">0</span><span class="op" id="4090923">:</span><span class="ident" id="4090924"><a href="/encoding/pem/pem.go.html#4090806">i</a></span><span class="op" id="4090925">]</span><span class="op" id="4090926">)</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090930"><a href="/encoding/pem/pem.go.html#4089694">p</a></span><span class="op" id="4090931">.</span><span class="ident" id="4090932">Bytes</span>&nbsp;<span class="op" id="4090938">=</span>&nbsp;<span class="builtinfunc" id="4090940">make</span><span class="op" id="4090944">(</span><span class="op" id="4090945">[</span><span class="op" id="4090946">]</span><span class="builtintype" id="4090947">byte</span><span class="op" id="4090951">,</span>&nbsp;<span class="ident" id="4090953"><a href="/encoding/pem/pem.go.html#4087865">base64</a></span><span class="op" id="4090959">.</span><span class="ident" id="4090960">StdEncoding</span><span class="op" id="4090971">.</span><span class="ident" id="4090972">DecodedLen</span><span class="op" id="4090982">(</span><span class="builtinfunc" id="4090983">len</span><span class="op" id="4090986">(</span><span class="ident" id="4090987"><a href="/encoding/pem/pem.go.html#4090886">base64Data</a></span><span class="op" id="4090997">)</span><span class="op" id="4090998">)</span><span class="op" id="4090999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091002">n</span><span class="op" id="4091003">,</span>&nbsp;<span class="ident" id="4091005">err</span>&nbsp;<span class="op" id="4091009">:=</span>&nbsp;<span class="ident" id="4091012"><a href="/encoding/pem/pem.go.html#4087865">base64</a></span><span class="op" id="4091018">.</span><span class="ident" id="4091019">StdEncoding</span><span class="op" id="4091030">.</span><span class="ident" id="4091031">Decode</span><span class="op" id="4091037">(</span><span class="ident" id="4091038"><a href="/encoding/pem/pem.go.html#4089694">p</a></span><span class="op" id="4091039">.</span><span class="ident" id="4091040">Bytes</span><span class="op" id="4091045">,</span>&nbsp;<span class="ident" id="4091047"><a href="/encoding/pem/pem.go.html#4090886">base64Data</a></span><span class="op" id="4091057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091060">if</span>&nbsp;<span class="ident" id="4091063"><a href="/encoding/pem/pem.go.html#4091005">err</a></span>&nbsp;<span class="op" id="4091067">!=</span>&nbsp;<span class="ident" id="4091070">nil</span>&nbsp;<span class="op" id="4091074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091078">return</span>&nbsp;<span class="ident" id="4091085"><a href="/encoding/pem/pem.go.html#4091195">decodeError</a></span><span class="op" id="4091096">(</span><span class="ident" id="4091097"><a href="/encoding/pem/pem.go.html#4089680">data</a></span><span class="op" id="4091101">,</span>&nbsp;<span class="ident" id="4091103"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4091107">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091113"><a href="/encoding/pem/pem.go.html#4089694">p</a></span><span class="op" id="4091114">.</span><span class="ident" id="4091115">Bytes</span>&nbsp;<span class="op" id="4091121">=</span>&nbsp;<span class="ident" id="4091123"><a href="/encoding/pem/pem.go.html#4089694">p</a></span><span class="op" id="4091124">.</span><span class="ident" id="4091125">Bytes</span><span class="op" id="4091130">[</span><span class="num" id="4091131">0</span><span class="op" id="4091132">:</span><span class="ident" id="4091133"><a href="/encoding/pem/pem.go.html#4091002">n</a></span><span class="op" id="4091134">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091138">_</span><span class="op" id="4091139">,</span>&nbsp;<span class="ident" id="4091141"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span>&nbsp;<span class="op" id="4091146">=</span>&nbsp;<span class="ident" id="4091148"><a href="/encoding/pem/pem.go.html#4088728">getLine</a></span><span class="op" id="4091155">(</span><span class="ident" id="4091156"><a href="/encoding/pem/pem.go.html#4089704">rest</a></span><span class="op" id="4091160">[</span><span class="ident" id="4091161"><a href="/encoding/pem/pem.go.html#4090806">i</a></span><span class="op" id="4091162">+</span><span class="builtinfunc" id="4091163">len</span><span class="op" id="4091166">(</span><span class="ident" id="4091167"><a href="/encoding/pem/pem.go.html#4089362">pemEnd</a></span><span class="op" id="4091173">)</span><span class="op" id="4091174">:</span><span class="op" id="4091175">]</span><span class="op" id="4091176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091180">return</span><br>
<span class="lineno"></span><span class="op" id="4091187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4091190">func</span>&nbsp;<span class="ident" id="4091195">decodeError</span><span class="op" id="4091206">(</span><span class="ident" id="4091207">data</span><span class="op" id="4091211">,</span>&nbsp;<span class="ident" id="4091213">rest</span>&nbsp;<span class="op" id="4091218">[</span><span class="op" id="4091219">]</span><span class="builtintype" id="4091220">byte</span><span class="op" id="4091224">)</span>&nbsp;<span class="op" id="4091226">(</span><span class="op" id="4091227">*</span><span class="ident" id="4091228"><a href="/encoding/pem/pem.go.html#4088139">Block</a></span><span class="op" id="4091233">,</span>&nbsp;<span class="op" id="4091235">[</span><span class="op" id="4091236">]</span><span class="builtintype" id="4091237">byte</span><span class="op" id="4091241">)</span>&nbsp;<span class="op" id="4091243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091246">//&nbsp;If&nbsp;we&nbsp;get&nbsp;here&nbsp;then&nbsp;we&nbsp;have&nbsp;rejected&nbsp;a&nbsp;likely&nbsp;looking,&nbsp;but</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091309">//&nbsp;ultimately&nbsp;invalid&nbsp;PEM&nbsp;block.&nbsp;We&nbsp;need&nbsp;to&nbsp;start&nbsp;over&nbsp;from&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091376">//&nbsp;position.&nbsp;&nbsp;We&nbsp;have&nbsp;consumed&nbsp;the&nbsp;preamble&nbsp;line&nbsp;and&nbsp;will&nbsp;have&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091449">//&nbsp;any&nbsp;lines&nbsp;which&nbsp;could&nbsp;be&nbsp;header&nbsp;lines.&nbsp;However,&nbsp;a&nbsp;valid&nbsp;preamble</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091518">//&nbsp;line&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;header&nbsp;line,&nbsp;therefore&nbsp;we&nbsp;cannot&nbsp;have&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091589">//&nbsp;the&nbsp;preamble&nbsp;line&nbsp;for&nbsp;the&nbsp;any&nbsp;subsequent&nbsp;block.&nbsp;Thus,&nbsp;we&nbsp;will&nbsp;always</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091662">//&nbsp;find&nbsp;any&nbsp;valid&nbsp;block,&nbsp;no&nbsp;matter&nbsp;what&nbsp;bytes&nbsp;precede&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091721">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091725">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;the&nbsp;input&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091758">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091762">//&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;MALFORMED&nbsp;BLOCK-----</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091801">//&nbsp;&nbsp;&nbsp;&nbsp;junk&nbsp;that&nbsp;may&nbsp;look&nbsp;like&nbsp;header&nbsp;lines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091845">//&nbsp;&nbsp;&nbsp;or&nbsp;data&nbsp;lines,&nbsp;but&nbsp;no&nbsp;END&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091882">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091886">//&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;ACTUAL&nbsp;BLOCK-----</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091922">//&nbsp;&nbsp;&nbsp;&nbsp;realdata</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091938">//&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;ACTUAL&nbsp;BLOCK-----</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091972">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4091976">//&nbsp;we&#39;ve&nbsp;failed&nbsp;to&nbsp;parse&nbsp;using&nbsp;the&nbsp;first&nbsp;BEGIN&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092029">//&nbsp;and&nbsp;now&nbsp;will&nbsp;try&nbsp;again,&nbsp;using&nbsp;the&nbsp;second&nbsp;BEGIN&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092086">p</span><span class="op" id="4092087">,</span>&nbsp;<span class="ident" id="4092089"><a href="/encoding/pem/pem.go.html#4091213">rest</a></span>&nbsp;<span class="op" id="4092094">:=</span>&nbsp;<span class="ident" id="4092097"><a href="/encoding/pem/pem.go.html#4089673">Decode</a></span><span class="op" id="4092103">(</span><span class="ident" id="4092104"><a href="/encoding/pem/pem.go.html#4091213">rest</a></span><span class="op" id="4092108">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092111">if</span>&nbsp;<span class="ident" id="4092114"><a href="/encoding/pem/pem.go.html#4092086">p</a></span>&nbsp;<span class="op" id="4092116">==</span>&nbsp;<span class="ident" id="4092119">nil</span>&nbsp;<span class="op" id="4092123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092127"><a href="/encoding/pem/pem.go.html#4091213">rest</a></span>&nbsp;<span class="op" id="4092132">=</span>&nbsp;<span class="ident" id="4092134"><a href="/encoding/pem/pem.go.html#4091207">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092143">return</span>&nbsp;<span class="ident" id="4092150"><a href="/encoding/pem/pem.go.html#4092086">p</a></span><span class="op" id="4092151">,</span>&nbsp;<span class="ident" id="4092153"><a href="/encoding/pem/pem.go.html#4091213">rest</a></span><br>
<span class="lineno"></span><span class="op" id="4092158">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="4092161">const</span>&nbsp;<span class="ident" id="4092167">pemLineLength</span>&nbsp;<span class="op" id="4092181">=</span>&nbsp;<span class="num" id="4092183">64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4092187">type</span>&nbsp;<span class="ident" id="4092192">lineBreaker</span>&nbsp;<span class="keyword" id="4092204">struct</span>&nbsp;<span class="op" id="4092211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092214">line</span>&nbsp;<span class="op" id="4092219">[</span><span class="ident" id="4092220"><a href="/encoding/pem/pem.go.html#4092167">pemLineLength</a></span><span class="op" id="4092233">]</span><span class="builtintype" id="4092234">byte</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092240">used</span>&nbsp;<span class="builtintype" id="4092245">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092250">out</span>&nbsp;&nbsp;<span class="ident" id="4092255"><a href="/encoding/pem/pem.go.html#4087884">io</a></span><span class="op" id="4092257">.</span><span class="ident" id="4092258">Writer</span><br>
<span class="lineno"></span><span class="op" id="4092265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4092268">func</span>&nbsp;<span class="op" id="4092273">(</span><span class="ident" id="4092274">l</span>&nbsp;<span class="op" id="4092276">*</span><span class="ident" id="4092277"><a href="/encoding/pem/pem.go.html#4092192">lineBreaker</a></span><span class="op" id="4092288">)</span>&nbsp;<span class="ident" id="4092290">Write</span><span class="op" id="4092295">(</span><span class="ident" id="4092296">b</span>&nbsp;<span class="op" id="4092298">[</span><span class="op" id="4092299">]</span><span class="builtintype" id="4092300">byte</span><span class="op" id="4092304">)</span>&nbsp;<span class="op" id="4092306">(</span><span class="ident" id="4092307">n</span>&nbsp;<span class="builtintype" id="4092309">int</span><span class="op" id="4092312">,</span>&nbsp;<span class="ident" id="4092314">err</span>&nbsp;<span class="builtintype" id="4092318">error</span><span class="op" id="4092323">)</span>&nbsp;<span class="op" id="4092325">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092328">if</span>&nbsp;<span class="ident" id="4092331"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092332">.</span><span class="ident" id="4092333">used</span><span class="op" id="4092337">+</span><span class="builtinfunc" id="4092338">len</span><span class="op" id="4092341">(</span><span class="ident" id="4092342"><a href="/encoding/pem/pem.go.html#4092296">b</a></span><span class="op" id="4092343">)</span>&nbsp;<span class="op" id="4092345">&lt;</span>&nbsp;<span class="ident" id="4092347"><a href="/encoding/pem/pem.go.html#4092167">pemLineLength</a></span>&nbsp;<span class="op" id="4092361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4092365">copy</span><span class="op" id="4092369">(</span><span class="ident" id="4092370"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092371">.</span><span class="ident" id="4092372">line</span><span class="op" id="4092376">[</span><span class="ident" id="4092377"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092378">.</span><span class="ident" id="4092379">used</span><span class="op" id="4092383">:</span><span class="op" id="4092384">]</span><span class="op" id="4092385">,</span>&nbsp;<span class="ident" id="4092387"><a href="/encoding/pem/pem.go.html#4092296">b</a></span><span class="op" id="4092388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092392"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092393">.</span><span class="ident" id="4092394">used</span>&nbsp;<span class="op" id="4092399">+=</span>&nbsp;<span class="builtinfunc" id="4092402">len</span><span class="op" id="4092405">(</span><span class="ident" id="4092406"><a href="/encoding/pem/pem.go.html#4092296">b</a></span><span class="op" id="4092407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092411">return</span>&nbsp;<span class="builtinfunc" id="4092418">len</span><span class="op" id="4092421">(</span><span class="ident" id="4092422"><a href="/encoding/pem/pem.go.html#4092296">b</a></span><span class="op" id="4092423">)</span><span class="op" id="4092424">,</span>&nbsp;<span class="ident" id="4092426">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092431">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092435"><a href="/encoding/pem/pem.go.html#4092307">n</a></span><span class="op" id="4092436">,</span>&nbsp;<span class="ident" id="4092438"><a href="/encoding/pem/pem.go.html#4092314">err</a></span>&nbsp;<span class="op" id="4092442">=</span>&nbsp;<span class="ident" id="4092444"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092445">.</span><span class="ident" id="4092446">out</span><span class="op" id="4092449">.</span><span class="ident" id="4092450">Write</span><span class="op" id="4092455">(</span><span class="ident" id="4092456"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092457">.</span><span class="ident" id="4092458">line</span><span class="op" id="4092462">[</span><span class="num" id="4092463">0</span><span class="op" id="4092464">:</span><span class="ident" id="4092465"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092466">.</span><span class="ident" id="4092467">used</span><span class="op" id="4092471">]</span><span class="op" id="4092472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092475">if</span>&nbsp;<span class="ident" id="4092478"><a href="/encoding/pem/pem.go.html#4092314">err</a></span>&nbsp;<span class="op" id="4092482">!=</span>&nbsp;<span class="ident" id="4092485">nil</span>&nbsp;<span class="op" id="4092489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092493">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092501">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092504">excess</span>&nbsp;<span class="op" id="4092511">:=</span>&nbsp;<span class="ident" id="4092514"><a href="/encoding/pem/pem.go.html#4092167">pemLineLength</a></span>&nbsp;<span class="op" id="4092528">-</span>&nbsp;<span class="ident" id="4092530"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092531">.</span><span class="ident" id="4092532">used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092538"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092539">.</span><span class="ident" id="4092540">used</span>&nbsp;<span class="op" id="4092545">=</span>&nbsp;<span class="num" id="4092547">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092551"><a href="/encoding/pem/pem.go.html#4092307">n</a></span><span class="op" id="4092552">,</span>&nbsp;<span class="ident" id="4092554"><a href="/encoding/pem/pem.go.html#4092314">err</a></span>&nbsp;<span class="op" id="4092558">=</span>&nbsp;<span class="ident" id="4092560"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092561">.</span><span class="ident" id="4092562">out</span><span class="op" id="4092565">.</span><span class="ident" id="4092566">Write</span><span class="op" id="4092571">(</span><span class="ident" id="4092572"><a href="/encoding/pem/pem.go.html#4092296">b</a></span><span class="op" id="4092573">[</span><span class="num" id="4092574">0</span><span class="op" id="4092575">:</span><span class="ident" id="4092576"><a href="/encoding/pem/pem.go.html#4092504">excess</a></span><span class="op" id="4092582">]</span><span class="op" id="4092583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092586">if</span>&nbsp;<span class="ident" id="4092589"><a href="/encoding/pem/pem.go.html#4092314">err</a></span>&nbsp;<span class="op" id="4092593">!=</span>&nbsp;<span class="ident" id="4092596">nil</span>&nbsp;<span class="op" id="4092600">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092604">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092616"><a href="/encoding/pem/pem.go.html#4092307">n</a></span><span class="op" id="4092617">,</span>&nbsp;<span class="ident" id="4092619"><a href="/encoding/pem/pem.go.html#4092314">err</a></span>&nbsp;<span class="op" id="4092623">=</span>&nbsp;<span class="ident" id="4092625"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092626">.</span><span class="ident" id="4092627">out</span><span class="op" id="4092630">.</span><span class="ident" id="4092631">Write</span><span class="op" id="4092636">(</span><span class="op" id="4092637">[</span><span class="op" id="4092638">]</span><span class="builtintype" id="4092639">byte</span><span class="op" id="4092643">{</span><span class="string" id="4092644">&#39;\n&#39;</span><span class="op" id="4092648">}</span><span class="op" id="4092649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092652">if</span>&nbsp;<span class="ident" id="4092655"><a href="/encoding/pem/pem.go.html#4092314">err</a></span>&nbsp;<span class="op" id="4092659">!=</span>&nbsp;<span class="ident" id="4092662">nil</span>&nbsp;<span class="op" id="4092666">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092670">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092682">return</span>&nbsp;<span class="ident" id="4092689"><a href="/encoding/pem/pem.go.html#4092274">l</a></span><span class="op" id="4092690">.</span><span class="ident" id="4092691">Write</span><span class="op" id="4092696">(</span><span class="ident" id="4092697"><a href="/encoding/pem/pem.go.html#4092296">b</a></span><span class="op" id="4092698">[</span><span class="ident" id="4092699"><a href="/encoding/pem/pem.go.html#4092504">excess</a></span><span class="op" id="4092705">:</span><span class="op" id="4092706">]</span><span class="op" id="4092707">)</span><br>
<span class="lineno"></span><span class="op" id="4092709">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="4092712">func</span>&nbsp;<span class="op" id="4092717">(</span><span class="ident" id="4092718">l</span>&nbsp;<span class="op" id="4092720">*</span><span class="ident" id="4092721"><a href="/encoding/pem/pem.go.html#4092192">lineBreaker</a></span><span class="op" id="4092732">)</span>&nbsp;<span class="ident" id="4092734">Close</span><span class="op" id="4092739">(</span><span class="op" id="4092740">)</span>&nbsp;<span class="op" id="4092742">(</span><span class="ident" id="4092743">err</span>&nbsp;<span class="builtintype" id="4092747">error</span><span class="op" id="4092752">)</span>&nbsp;<span class="op" id="4092754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092757">if</span>&nbsp;<span class="ident" id="4092760"><a href="/encoding/pem/pem.go.html#4092718">l</a></span><span class="op" id="4092761">.</span><span class="ident" id="4092762">used</span>&nbsp;<span class="op" id="4092767">&gt;</span>&nbsp;<span class="num" id="4092769">0</span>&nbsp;<span class="op" id="4092771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092775">_</span><span class="op" id="4092776">,</span>&nbsp;<span class="ident" id="4092778"><a href="/encoding/pem/pem.go.html#4092743">err</a></span>&nbsp;<span class="op" id="4092782">=</span>&nbsp;<span class="ident" id="4092784"><a href="/encoding/pem/pem.go.html#4092718">l</a></span><span class="op" id="4092785">.</span><span class="ident" id="4092786">out</span><span class="op" id="4092789">.</span><span class="ident" id="4092790">Write</span><span class="op" id="4092795">(</span><span class="ident" id="4092796"><a href="/encoding/pem/pem.go.html#4092718">l</a></span><span class="op" id="4092797">.</span><span class="ident" id="4092798">line</span><span class="op" id="4092802">[</span><span class="num" id="4092803">0</span><span class="op" id="4092804">:</span><span class="ident" id="4092805"><a href="/encoding/pem/pem.go.html#4092718">l</a></span><span class="op" id="4092806">.</span><span class="ident" id="4092807">used</span><span class="op" id="4092811">]</span><span class="op" id="4092812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092816">if</span>&nbsp;<span class="ident" id="4092819"><a href="/encoding/pem/pem.go.html#4092743">err</a></span>&nbsp;<span class="op" id="4092823">!=</span>&nbsp;<span class="ident" id="4092826">nil</span>&nbsp;<span class="op" id="4092830">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092835">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092848">_</span><span class="op" id="4092849">,</span>&nbsp;<span class="ident" id="4092851"><a href="/encoding/pem/pem.go.html#4092743">err</a></span>&nbsp;<span class="op" id="4092855">=</span>&nbsp;<span class="ident" id="4092857"><a href="/encoding/pem/pem.go.html#4092718">l</a></span><span class="op" id="4092858">.</span><span class="ident" id="4092859">out</span><span class="op" id="4092862">.</span><span class="ident" id="4092863">Write</span><span class="op" id="4092868">(</span><span class="op" id="4092869">[</span><span class="op" id="4092870">]</span><span class="builtintype" id="4092871">byte</span><span class="op" id="4092875">{</span><span class="string" id="4092876">&#39;\n&#39;</span><span class="op" id="4092880">}</span><span class="op" id="4092881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092888">return</span><br>
<span class="lineno"></span><span class="op" id="4092895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4092898">func</span>&nbsp;<span class="ident" id="4092903">writeHeader</span><span class="op" id="4092914">(</span><span class="ident" id="4092915">out</span>&nbsp;<span class="ident" id="4092919"><a href="/encoding/pem/pem.go.html#4087884">io</a></span><span class="op" id="4092921">.</span><span class="ident" id="4092922">Writer</span><span class="op" id="4092928">,</span>&nbsp;<span class="ident" id="4092930">k</span><span class="op" id="4092931">,</span>&nbsp;<span class="ident" id="4092933">v</span>&nbsp;<span class="builtintype" id="4092935">string</span><span class="op" id="4092941">)</span>&nbsp;<span class="builtintype" id="4092943">error</span>&nbsp;<span class="op" id="4092949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092952">_</span><span class="op" id="4092953">,</span>&nbsp;<span class="ident" id="4092955">err</span>&nbsp;<span class="op" id="4092959">:=</span>&nbsp;<span class="ident" id="4092962"><a href="/encoding/pem/pem.go.html#4092915">out</a></span><span class="op" id="4092965">.</span><span class="ident" id="4092966">Write</span><span class="op" id="4092971">(</span><span class="op" id="4092972">[</span><span class="op" id="4092973">]</span><span class="builtintype" id="4092974">byte</span><span class="op" id="4092978">(</span><span class="ident" id="4092979"><a href="/encoding/pem/pem.go.html#4092930">k</a></span>&nbsp;<span class="op" id="4092981">+</span>&nbsp;<span class="string" id="4092983">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4092988">+</span>&nbsp;<span class="ident" id="4092990"><a href="/encoding/pem/pem.go.html#4092933">v</a></span>&nbsp;<span class="op" id="4092992">+</span>&nbsp;<span class="string" id="4092994">&#34;\n&#34;</span><span class="op" id="4092998">)</span><span class="op" id="4092999">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093002">return</span>&nbsp;<span class="ident" id="4093009"><a href="/encoding/pem/pem.go.html#4092955">err</a></span><br>
<span class="lineno"></span><span class="op" id="4093013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4093016">func</span>&nbsp;<span class="ident" id="4093021">Encode</span><span class="op" id="4093027">(</span><span class="ident" id="4093028">out</span>&nbsp;<span class="ident" id="4093032"><a href="/encoding/pem/pem.go.html#4087884">io</a></span><span class="op" id="4093034">.</span><span class="ident" id="4093035">Writer</span><span class="op" id="4093041">,</span>&nbsp;<span class="ident" id="4093043">b</span>&nbsp;<span class="op" id="4093045">*</span><span class="ident" id="4093046"><a href="/encoding/pem/pem.go.html#4088139">Block</a></span><span class="op" id="4093051">)</span>&nbsp;<span class="builtintype" id="4093053">error</span>&nbsp;<span class="op" id="4093059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093062">if</span>&nbsp;<span class="ident" id="4093065">_</span><span class="op" id="4093066">,</span>&nbsp;<span class="ident" id="4093068">err</span>&nbsp;<span class="op" id="4093072">:=</span>&nbsp;<span class="ident" id="4093075"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4093078">.</span><span class="ident" id="4093079">Write</span><span class="op" id="4093084">(</span><span class="ident" id="4093085"><a href="/encoding/pem/pem.go.html#4089323">pemStart</a></span><span class="op" id="4093093">[</span><span class="num" id="4093094">1</span><span class="op" id="4093095">:</span><span class="op" id="4093096">]</span><span class="op" id="4093097">)</span><span class="op" id="4093098">;</span>&nbsp;<span class="ident" id="4093100"><a href="/encoding/pem/pem.go.html#4093068">err</a></span>&nbsp;<span class="op" id="4093104">!=</span>&nbsp;<span class="ident" id="4093107">nil</span>&nbsp;<span class="op" id="4093111">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093115">return</span>&nbsp;<span class="ident" id="4093122"><a href="/encoding/pem/pem.go.html#4093068">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093130">if</span>&nbsp;<span class="ident" id="4093133">_</span><span class="op" id="4093134">,</span>&nbsp;<span class="ident" id="4093136">err</span>&nbsp;<span class="op" id="4093140">:=</span>&nbsp;<span class="ident" id="4093143"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4093146">.</span><span class="ident" id="4093147">Write</span><span class="op" id="4093152">(</span><span class="op" id="4093153">[</span><span class="op" id="4093154">]</span><span class="builtintype" id="4093155">byte</span><span class="op" id="4093159">(</span><span class="ident" id="4093160"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4093161">.</span><span class="ident" id="4093162">Type</span>&nbsp;<span class="op" id="4093167">+</span>&nbsp;<span class="string" id="4093169">&#34;-----\n&#34;</span><span class="op" id="4093178">)</span><span class="op" id="4093179">)</span><span class="op" id="4093180">;</span>&nbsp;<span class="ident" id="4093182"><a href="/encoding/pem/pem.go.html#4093136">err</a></span>&nbsp;<span class="op" id="4093186">!=</span>&nbsp;<span class="ident" id="4093189">nil</span>&nbsp;<span class="op" id="4093193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093197">return</span>&nbsp;<span class="ident" id="4093204"><a href="/encoding/pem/pem.go.html#4093136">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093209">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093213">if</span>&nbsp;<span class="builtinfunc" id="4093216">len</span><span class="op" id="4093219">(</span><span class="ident" id="4093220"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4093221">.</span><span class="ident" id="4093222">Headers</span><span class="op" id="4093229">)</span>&nbsp;<span class="op" id="4093231">&gt;</span>&nbsp;<span class="num" id="4093233">0</span>&nbsp;<span class="op" id="4093235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093239">const</span>&nbsp;<span class="ident" id="4093245">procType</span>&nbsp;<span class="op" id="4093254">=</span>&nbsp;<span class="string" id="4093256">&#34;Proc-Type&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093270">h</span>&nbsp;<span class="op" id="4093272">:=</span>&nbsp;<span class="builtinfunc" id="4093275">make</span><span class="op" id="4093279">(</span><span class="op" id="4093280">[</span><span class="op" id="4093281">]</span><span class="builtintype" id="4093282">string</span><span class="op" id="4093288">,</span>&nbsp;<span class="num" id="4093290">0</span><span class="op" id="4093291">,</span>&nbsp;<span class="builtinfunc" id="4093293">len</span><span class="op" id="4093296">(</span><span class="ident" id="4093297"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4093298">.</span><span class="ident" id="4093299">Headers</span><span class="op" id="4093306">)</span><span class="op" id="4093307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093311">hasProcType</span>&nbsp;<span class="op" id="4093323">:=</span>&nbsp;<span class="builtintype" id="4093326">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093334">for</span>&nbsp;<span class="ident" id="4093338">k</span>&nbsp;<span class="op" id="4093340">:=</span>&nbsp;<span class="keyword" id="4093343">range</span>&nbsp;<span class="ident" id="4093349"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4093350">.</span><span class="ident" id="4093351">Headers</span>&nbsp;<span class="op" id="4093359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093364">if</span>&nbsp;<span class="ident" id="4093367"><a href="/encoding/pem/pem.go.html#4093338">k</a></span>&nbsp;<span class="op" id="4093369">==</span>&nbsp;<span class="ident" id="4093372"><a href="/encoding/pem/pem.go.html#4093245">procType</a></span>&nbsp;<span class="op" id="4093381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093387"><a href="/encoding/pem/pem.go.html#4093311">hasProcType</a></span>&nbsp;<span class="op" id="4093399">=</span>&nbsp;<span class="builtintype" id="4093401">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093410">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093422">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093427"><a href="/encoding/pem/pem.go.html#4093270">h</a></span>&nbsp;<span class="op" id="4093429">=</span>&nbsp;<span class="builtinfunc" id="4093431">append</span><span class="op" id="4093437">(</span><span class="ident" id="4093438"><a href="/encoding/pem/pem.go.html#4093270">h</a></span><span class="op" id="4093439">,</span>&nbsp;<span class="ident" id="4093441"><a href="/encoding/pem/pem.go.html#4093338">k</a></span><span class="op" id="4093442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093450">//&nbsp;The&nbsp;Proc-Type&nbsp;header&nbsp;must&nbsp;be&nbsp;written&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093499">//&nbsp;See&nbsp;RFC&nbsp;1421,&nbsp;section&nbsp;4.6.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093534">if</span>&nbsp;<span class="ident" id="4093537"><a href="/encoding/pem/pem.go.html#4093311">hasProcType</a></span>&nbsp;<span class="op" id="4093549">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093554">if</span>&nbsp;<span class="ident" id="4093557">err</span>&nbsp;<span class="op" id="4093561">:=</span>&nbsp;<span class="ident" id="4093564"><a href="/encoding/pem/pem.go.html#4092903">writeHeader</a></span><span class="op" id="4093575">(</span><span class="ident" id="4093576"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4093579">,</span>&nbsp;<span class="ident" id="4093581"><a href="/encoding/pem/pem.go.html#4093245">procType</a></span><span class="op" id="4093589">,</span>&nbsp;<span class="ident" id="4093591"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4093592">.</span><span class="ident" id="4093593">Headers</span><span class="op" id="4093600">[</span><span class="ident" id="4093601"><a href="/encoding/pem/pem.go.html#4093245">procType</a></span><span class="op" id="4093609">]</span><span class="op" id="4093610">)</span><span class="op" id="4093611">;</span>&nbsp;<span class="ident" id="4093613"><a href="/encoding/pem/pem.go.html#4093557">err</a></span>&nbsp;<span class="op" id="4093617">!=</span>&nbsp;<span class="ident" id="4093620">nil</span>&nbsp;<span class="op" id="4093624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093630">return</span>&nbsp;<span class="ident" id="4093637"><a href="/encoding/pem/pem.go.html#4093557">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093652">//&nbsp;For&nbsp;consistency&nbsp;of&nbsp;output,&nbsp;write&nbsp;other&nbsp;headers&nbsp;sorted&nbsp;by&nbsp;key.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093719"><a href="/encoding/pem/pem.go.html#4087890">sort</a></span><span class="op" id="4093723">.</span><span class="ident" id="4093724">Strings</span><span class="op" id="4093731">(</span><span class="ident" id="4093732"><a href="/encoding/pem/pem.go.html#4093270">h</a></span><span class="op" id="4093733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093737">for</span>&nbsp;<span class="ident" id="4093741">_</span><span class="op" id="4093742">,</span>&nbsp;<span class="ident" id="4093744">k</span>&nbsp;<span class="op" id="4093746">:=</span>&nbsp;<span class="keyword" id="4093749">range</span>&nbsp;<span class="ident" id="4093755"><a href="/encoding/pem/pem.go.html#4093270">h</a></span>&nbsp;<span class="op" id="4093757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093762">if</span>&nbsp;<span class="ident" id="4093765">err</span>&nbsp;<span class="op" id="4093769">:=</span>&nbsp;<span class="ident" id="4093772"><a href="/encoding/pem/pem.go.html#4092903">writeHeader</a></span><span class="op" id="4093783">(</span><span class="ident" id="4093784"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4093787">,</span>&nbsp;<span class="ident" id="4093789"><a href="/encoding/pem/pem.go.html#4093744">k</a></span><span class="op" id="4093790">,</span>&nbsp;<span class="ident" id="4093792"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4093793">.</span><span class="ident" id="4093794">Headers</span><span class="op" id="4093801">[</span><span class="ident" id="4093802"><a href="/encoding/pem/pem.go.html#4093744">k</a></span><span class="op" id="4093803">]</span><span class="op" id="4093804">)</span><span class="op" id="4093805">;</span>&nbsp;<span class="ident" id="4093807"><a href="/encoding/pem/pem.go.html#4093765">err</a></span>&nbsp;<span class="op" id="4093811">!=</span>&nbsp;<span class="ident" id="4093814">nil</span>&nbsp;<span class="op" id="4093818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093824">return</span>&nbsp;<span class="ident" id="4093831"><a href="/encoding/pem/pem.go.html#4093765">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093838">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093846">if</span>&nbsp;<span class="ident" id="4093849">_</span><span class="op" id="4093850">,</span>&nbsp;<span class="ident" id="4093852">err</span>&nbsp;<span class="op" id="4093856">:=</span>&nbsp;<span class="ident" id="4093859"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4093862">.</span><span class="ident" id="4093863">Write</span><span class="op" id="4093868">(</span><span class="op" id="4093869">[</span><span class="op" id="4093870">]</span><span class="builtintype" id="4093871">byte</span><span class="op" id="4093875">{</span><span class="string" id="4093876">&#39;\n&#39;</span><span class="op" id="4093880">}</span><span class="op" id="4093881">)</span><span class="op" id="4093882">;</span>&nbsp;<span class="ident" id="4093884"><a href="/encoding/pem/pem.go.html#4093852">err</a></span>&nbsp;<span class="op" id="4093888">!=</span>&nbsp;<span class="ident" id="4093891">nil</span>&nbsp;<span class="op" id="4093895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093900">return</span>&nbsp;<span class="ident" id="4093907"><a href="/encoding/pem/pem.go.html#4093852">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093916">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093920">var</span>&nbsp;<span class="ident" id="4093924">breaker</span>&nbsp;<span class="ident" id="4093932"><a href="/encoding/pem/pem.go.html#4092192">lineBreaker</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093945"><a href="/encoding/pem/pem.go.html#4093924">breaker</a></span><span class="op" id="4093952">.</span><span class="ident" id="4093953">out</span>&nbsp;<span class="op" id="4093957">=</span>&nbsp;<span class="ident" id="4093959"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093965">b64</span>&nbsp;<span class="op" id="4093969">:=</span>&nbsp;<span class="ident" id="4093972"><a href="/encoding/pem/pem.go.html#4087865">base64</a></span><span class="op" id="4093978">.</span><span class="ident" id="4093979">NewEncoder</span><span class="op" id="4093989">(</span><span class="ident" id="4093990"><a href="/encoding/pem/pem.go.html#4087865">base64</a></span><span class="op" id="4093996">.</span><span class="ident" id="4093997">StdEncoding</span><span class="op" id="4094008">,</span>&nbsp;<span class="op" id="4094010">&amp;</span><span class="ident" id="4094011"><a href="/encoding/pem/pem.go.html#4093924">breaker</a></span><span class="op" id="4094018">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094021">if</span>&nbsp;<span class="ident" id="4094024">_</span><span class="op" id="4094025">,</span>&nbsp;<span class="ident" id="4094027">err</span>&nbsp;<span class="op" id="4094031">:=</span>&nbsp;<span class="ident" id="4094034"><a href="/encoding/pem/pem.go.html#4093965">b64</a></span><span class="op" id="4094037">.</span><span class="ident" id="4094038">Write</span><span class="op" id="4094043">(</span><span class="ident" id="4094044"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4094045">.</span><span class="ident" id="4094046">Bytes</span><span class="op" id="4094051">)</span><span class="op" id="4094052">;</span>&nbsp;<span class="ident" id="4094054"><a href="/encoding/pem/pem.go.html#4094027">err</a></span>&nbsp;<span class="op" id="4094058">!=</span>&nbsp;<span class="ident" id="4094061">nil</span>&nbsp;<span class="op" id="4094065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094069">return</span>&nbsp;<span class="ident" id="4094076"><a href="/encoding/pem/pem.go.html#4094027">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4094084"><a href="/encoding/pem/pem.go.html#4093965">b64</a></span><span class="op" id="4094087">.</span><span class="ident" id="4094088">Close</span><span class="op" id="4094093">(</span><span class="op" id="4094094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4094097"><a href="/encoding/pem/pem.go.html#4093924">breaker</a></span><span class="op" id="4094104">.</span><span class="ident" id="4094105">Close</span><span class="op" id="4094110">(</span><span class="op" id="4094111">)</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094115">if</span>&nbsp;<span class="ident" id="4094118">_</span><span class="op" id="4094119">,</span>&nbsp;<span class="ident" id="4094121">err</span>&nbsp;<span class="op" id="4094125">:=</span>&nbsp;<span class="ident" id="4094128"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4094131">.</span><span class="ident" id="4094132">Write</span><span class="op" id="4094137">(</span><span class="ident" id="4094138"><a href="/encoding/pem/pem.go.html#4089362">pemEnd</a></span><span class="op" id="4094144">[</span><span class="num" id="4094145">1</span><span class="op" id="4094146">:</span><span class="op" id="4094147">]</span><span class="op" id="4094148">)</span><span class="op" id="4094149">;</span>&nbsp;<span class="ident" id="4094151"><a href="/encoding/pem/pem.go.html#4094121">err</a></span>&nbsp;<span class="op" id="4094155">!=</span>&nbsp;<span class="ident" id="4094158">nil</span>&nbsp;<span class="op" id="4094162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094166">return</span>&nbsp;<span class="ident" id="4094173"><a href="/encoding/pem/pem.go.html#4094121">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4094181">_</span><span class="op" id="4094182">,</span>&nbsp;<span class="ident" id="4094184">err</span>&nbsp;<span class="op" id="4094188">:=</span>&nbsp;<span class="ident" id="4094191"><a href="/encoding/pem/pem.go.html#4093028">out</a></span><span class="op" id="4094194">.</span><span class="ident" id="4094195">Write</span><span class="op" id="4094200">(</span><span class="op" id="4094201">[</span><span class="op" id="4094202">]</span><span class="builtintype" id="4094203">byte</span><span class="op" id="4094207">(</span><span class="ident" id="4094208"><a href="/encoding/pem/pem.go.html#4093043">b</a></span><span class="op" id="4094209">.</span><span class="ident" id="4094210">Type</span>&nbsp;<span class="op" id="4094215">+</span>&nbsp;<span class="string" id="4094217">&#34;-----\n&#34;</span><span class="op" id="4094226">)</span><span class="op" id="4094227">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094230">return</span>&nbsp;<span class="ident" id="4094237"><a href="/encoding/pem/pem.go.html#4094184">err</a></span><br>
<span class="lineno"></span><span class="op" id="4094241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4094244">func</span>&nbsp;<span class="ident" id="4094249">EncodeToMemory</span><span class="op" id="4094263">(</span><span class="ident" id="4094264">b</span>&nbsp;<span class="op" id="4094266">*</span><span class="ident" id="4094267"><a href="/encoding/pem/pem.go.html#4088139">Block</a></span><span class="op" id="4094272">)</span>&nbsp;<span class="op" id="4094274">[</span><span class="op" id="4094275">]</span><span class="builtintype" id="4094276">byte</span>&nbsp;<span class="op" id="4094281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094284">var</span>&nbsp;<span class="ident" id="4094288">buf</span>&nbsp;<span class="ident" id="4094292"><a href="/encoding/pem/pem.go.html#4087856">bytes</a></span><span class="op" id="4094297">.</span><span class="ident" id="4094298">Buffer</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4094306"><a href="/encoding/pem/pem.go.html#4093021">Encode</a></span><span class="op" id="4094312">(</span><span class="op" id="4094313">&amp;</span><span class="ident" id="4094314"><a href="/encoding/pem/pem.go.html#4094288">buf</a></span><span class="op" id="4094317">,</span>&nbsp;<span class="ident" id="4094319"><a href="/encoding/pem/pem.go.html#4094264">b</a></span><span class="op" id="4094320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094323">return</span>&nbsp;<span class="ident" id="4094330"><a href="/encoding/pem/pem.go.html#4094288">buf</a></span><span class="op" id="4094333">.</span><span class="ident" id="4094334">Bytes</span><span class="op" id="4094339">(</span><span class="op" id="4094340">)</span><br>
<span class="lineno"></span><span class="op" id="4094342">}</span>
</div>
</body>
</html>
