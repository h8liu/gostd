<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5088873">package</span>&nbsp;<span class="ident" id="5088881">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5088887">import</span>&nbsp;<span class="op" id="5088894">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5088897">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5088906">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5088914">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5088926">&#34;lonnie.io/e8vm/arch8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5088950">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5088972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5088975">func</span>&nbsp;<span class="ident" id="5088980">nbitAlign</span><span class="op" id="5088989">(</span><span class="ident" id="5088990">nbit</span>&nbsp;<span class="builtintype" id="5088995">int</span><span class="op" id="5088998">)</span>&nbsp;<span class="builtintype" id="5089000">uint32</span>&nbsp;<span class="op" id="5089007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089010">if</span>&nbsp;<span class="ident" id="5089013">nbit</span>&nbsp;<span class="op" id="5089018">==</span>&nbsp;<span class="num" id="5089021">8</span>&nbsp;<span class="op" id="5089023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089027">return</span>&nbsp;<span class="num" id="5089034">0</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089037">}</span>&nbsp;<span class="keyword" id="5089039">else</span>&nbsp;<span class="keyword" id="5089044">if</span>&nbsp;<span class="ident" id="5089047">nbit</span>&nbsp;<span class="op" id="5089052">==</span>&nbsp;<span class="num" id="5089055">32</span>&nbsp;<span class="op" id="5089058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089062">return</span>&nbsp;<span class="num" id="5089069">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089072">}</span>&nbsp;<span class="keyword" id="5089074">else</span>&nbsp;<span class="op" id="5089079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5089083">panic</span><span class="op" id="5089088">(</span><span class="string" id="5089089">&#34;invalid&nbsp;nbit&#34;</span><span class="op" id="5089103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089106">}</span><br>
<span class="lineno">20</span><span class="op" id="5089108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5089111">const</span>&nbsp;<span class="op" id="5089117">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089120">modeSigned</span>&nbsp;<span class="op" id="5089131">=</span>&nbsp;<span class="num" id="5089133">0x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089138">modeWord</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5089149">=</span>&nbsp;<span class="num" id="5089151">0x2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089156">modeFloat</span>&nbsp;&nbsp;<span class="op" id="5089167">=</span>&nbsp;<span class="num" id="5089169">0x4</span><br>
<span class="lineno"></span><span class="op" id="5089173">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5089176">func</span>&nbsp;<span class="ident" id="5089181">parseDataNums</span><span class="op" id="5089194">(</span><span class="ident" id="5089195">p</span>&nbsp;<span class="op" id="5089197">*</span><span class="ident" id="5089198">parser</span><span class="op" id="5089204">,</span>&nbsp;<span class="ident" id="5089206">args</span>&nbsp;<span class="op" id="5089211">[</span><span class="op" id="5089212">]</span><span class="op" id="5089213">*</span><span class="ident" id="5089214">lex8</span><span class="op" id="5089218">.</span><span class="ident" id="5089219">Token</span><span class="op" id="5089224">,</span>&nbsp;<span class="ident" id="5089226">mode</span>&nbsp;<span class="builtintype" id="5089231">int</span><span class="op" id="5089234">)</span>&nbsp;<span class="op" id="5089236">(</span><span class="op" id="5089237">[</span><span class="op" id="5089238">]</span><span class="builtintype" id="5089239">byte</span><span class="op" id="5089243">,</span>&nbsp;<span class="builtintype" id="5089245">uint32</span><span class="op" id="5089251">)</span>&nbsp;<span class="op" id="5089253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089256">if</span>&nbsp;<span class="op" id="5089259">!</span><span class="ident" id="5089260">checkAllType</span><span class="op" id="5089272">(</span><span class="ident" id="5089273">p</span><span class="op" id="5089274">,</span>&nbsp;<span class="ident" id="5089276">args</span><span class="op" id="5089280">,</span>&nbsp;<span class="ident" id="5089282">Operand</span><span class="op" id="5089289">)</span>&nbsp;<span class="op" id="5089291">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089295">return</span>&nbsp;<span class="ident" id="5089302">nil</span><span class="op" id="5089305">,</span>&nbsp;<span class="num" id="5089307">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089314">var</span>&nbsp;<span class="ident" id="5089318">ui</span>&nbsp;<span class="builtintype" id="5089321">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089329">nbit</span>&nbsp;<span class="op" id="5089334">:=</span>&nbsp;<span class="num" id="5089337">8</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089340">if</span>&nbsp;<span class="ident" id="5089343">mode</span><span class="op" id="5089347">&amp;</span><span class="ident" id="5089348">modeWord</span>&nbsp;<span class="op" id="5089357">!=</span>&nbsp;<span class="num" id="5089360">0</span>&nbsp;<span class="op" id="5089362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089366">nbit</span>&nbsp;<span class="op" id="5089371">=</span>&nbsp;<span class="num" id="5089373">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089380">var</span>&nbsp;<span class="ident" id="5089384">e</span>&nbsp;<span class="builtintype" id="5089386">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089394">buf</span>&nbsp;<span class="op" id="5089398">:=</span>&nbsp;<span class="builtinfunc" id="5089401">new</span><span class="op" id="5089404">(</span><span class="ident" id="5089405">bytes</span><span class="op" id="5089410">.</span><span class="ident" id="5089411">Buffer</span><span class="op" id="5089417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089420">for</span>&nbsp;<span class="ident" id="5089424">_</span><span class="op" id="5089425">,</span>&nbsp;<span class="ident" id="5089427">arg</span>&nbsp;<span class="op" id="5089431">:=</span>&nbsp;<span class="keyword" id="5089434">range</span>&nbsp;<span class="ident" id="5089440">args</span>&nbsp;<span class="op" id="5089445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089449">if</span>&nbsp;<span class="ident" id="5089452">mode</span><span class="op" id="5089456">&amp;</span><span class="ident" id="5089457">modeFloat</span>&nbsp;<span class="op" id="5089467">!=</span>&nbsp;<span class="num" id="5089470">0</span>&nbsp;<span class="op" id="5089472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089477">var</span>&nbsp;<span class="ident" id="5089481">f</span>&nbsp;<span class="builtintype" id="5089483">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089494">f</span><span class="op" id="5089495">,</span>&nbsp;<span class="ident" id="5089497">e</span>&nbsp;<span class="op" id="5089499">=</span>&nbsp;<span class="ident" id="5089501">strconv</span><span class="op" id="5089508">.</span><span class="ident" id="5089509">ParseFloat</span><span class="op" id="5089519">(</span><span class="ident" id="5089520">arg</span><span class="op" id="5089523">.</span><span class="ident" id="5089524">Lit</span><span class="op" id="5089527">,</span>&nbsp;<span class="num" id="5089529">32</span><span class="op" id="5089531">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089536">ui</span>&nbsp;<span class="op" id="5089539">=</span>&nbsp;<span class="ident" id="5089541">math</span><span class="op" id="5089545">.</span><span class="ident" id="5089546">Float32bits</span><span class="op" id="5089557">(</span><span class="builtintype" id="5089558">float32</span><span class="op" id="5089565">(</span><span class="ident" id="5089566">f</span><span class="op" id="5089567">)</span><span class="op" id="5089568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089572">}</span>&nbsp;<span class="keyword" id="5089574">else</span>&nbsp;<span class="keyword" id="5089579">if</span>&nbsp;<span class="ident" id="5089582">mode</span><span class="op" id="5089586">&amp;</span><span class="ident" id="5089587">modeSigned</span>&nbsp;<span class="op" id="5089598">!=</span>&nbsp;<span class="num" id="5089601">0</span>&nbsp;<span class="op" id="5089603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089608">var</span>&nbsp;<span class="ident" id="5089612">i</span>&nbsp;<span class="ident" id="5089614">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089623">i</span><span class="op" id="5089624">,</span>&nbsp;<span class="ident" id="5089626">e</span>&nbsp;<span class="op" id="5089628">=</span>&nbsp;<span class="ident" id="5089630">strconv</span><span class="op" id="5089637">.</span><span class="ident" id="5089638">ParseInt</span><span class="op" id="5089646">(</span><span class="ident" id="5089647">arg</span><span class="op" id="5089650">.</span><span class="ident" id="5089651">Lit</span><span class="op" id="5089654">,</span>&nbsp;<span class="num" id="5089656">0</span><span class="op" id="5089657">,</span>&nbsp;<span class="ident" id="5089659">nbit</span><span class="op" id="5089663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089668">ui</span>&nbsp;<span class="op" id="5089671">=</span>&nbsp;<span class="builtintype" id="5089673">uint32</span><span class="op" id="5089679">(</span><span class="ident" id="5089680">i</span><span class="op" id="5089681">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089685">}</span>&nbsp;<span class="keyword" id="5089687">else</span>&nbsp;<span class="op" id="5089692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089697">var</span>&nbsp;<span class="ident" id="5089701">ui64</span>&nbsp;<span class="ident" id="5089706">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089716">ui64</span><span class="op" id="5089720">,</span>&nbsp;<span class="ident" id="5089722">e</span>&nbsp;<span class="op" id="5089724">=</span>&nbsp;<span class="ident" id="5089726">strconv</span><span class="op" id="5089733">.</span><span class="ident" id="5089734">ParseUint</span><span class="op" id="5089743">(</span><span class="ident" id="5089744">arg</span><span class="op" id="5089747">.</span><span class="ident" id="5089748">Lit</span><span class="op" id="5089751">,</span>&nbsp;<span class="num" id="5089753">0</span><span class="op" id="5089754">,</span>&nbsp;<span class="ident" id="5089756">nbit</span><span class="op" id="5089760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089765">ui</span>&nbsp;<span class="op" id="5089768">=</span>&nbsp;<span class="builtintype" id="5089770">uint32</span><span class="op" id="5089776">(</span><span class="ident" id="5089777">ui64</span><span class="op" id="5089781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089785">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089789">if</span>&nbsp;<span class="ident" id="5089792">e</span>&nbsp;<span class="op" id="5089794">!=</span>&nbsp;<span class="ident" id="5089797">nil</span>&nbsp;<span class="op" id="5089801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089806">p</span><span class="op" id="5089807">.</span><span class="ident" id="5089808">err</span><span class="op" id="5089811">(</span><span class="ident" id="5089812">arg</span><span class="op" id="5089815">.</span><span class="ident" id="5089816">Pos</span><span class="op" id="5089819">,</span>&nbsp;<span class="string" id="5089821">&#34;%s&#34;</span><span class="op" id="5089825">,</span>&nbsp;<span class="ident" id="5089827">e</span><span class="op" id="5089828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089833">return</span>&nbsp;<span class="ident" id="5089840">nil</span><span class="op" id="5089843">,</span>&nbsp;<span class="num" id="5089845">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089854">if</span>&nbsp;<span class="ident" id="5089857">nbit</span>&nbsp;<span class="op" id="5089862">==</span>&nbsp;<span class="num" id="5089865">8</span>&nbsp;<span class="op" id="5089867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089872">buf</span><span class="op" id="5089875">.</span><span class="ident" id="5089876">WriteByte</span><span class="op" id="5089885">(</span><span class="builtintype" id="5089886">byte</span><span class="op" id="5089890">(</span><span class="ident" id="5089891">ui</span><span class="op" id="5089893">)</span><span class="op" id="5089894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089898">}</span>&nbsp;<span class="keyword" id="5089900">else</span>&nbsp;<span class="keyword" id="5089905">if</span>&nbsp;<span class="ident" id="5089908">nbit</span>&nbsp;<span class="op" id="5089913">==</span>&nbsp;<span class="num" id="5089916">32</span>&nbsp;<span class="op" id="5089919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089924">var</span>&nbsp;<span class="ident" id="5089928">bs</span>&nbsp;<span class="op" id="5089931">[</span><span class="num" id="5089932">4</span><span class="op" id="5089933">]</span><span class="builtintype" id="5089934">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089942">arch8</span><span class="op" id="5089947">.</span><span class="ident" id="5089948">Endian</span><span class="op" id="5089954">.</span><span class="ident" id="5089955">PutUint32</span><span class="op" id="5089964">(</span><span class="ident" id="5089965">bs</span><span class="op" id="5089967">[</span><span class="op" id="5089968">:</span><span class="op" id="5089969">]</span><span class="op" id="5089970">,</span>&nbsp;<span class="ident" id="5089972">ui</span><span class="op" id="5089974">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089979">buf</span><span class="op" id="5089982">.</span><span class="ident" id="5089983">Write</span><span class="op" id="5089988">(</span><span class="ident" id="5089989">bs</span><span class="op" id="5089991">[</span><span class="op" id="5089992">:</span><span class="op" id="5089993">]</span><span class="op" id="5089994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5090001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5090005">return</span>&nbsp;<span class="ident" id="5090012">buf</span><span class="op" id="5090015">.</span><span class="ident" id="5090016">Bytes</span><span class="op" id="5090021">(</span><span class="op" id="5090022">)</span><span class="op" id="5090023">,</span>&nbsp;<span class="ident" id="5090025">nbitAlign</span><span class="op" id="5090034">(</span><span class="ident" id="5090035">nbit</span><span class="op" id="5090039">)</span><br>
<span class="lineno">70</span><span class="op" id="5090041">}</span>
</div>
</body>
</html>
