<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4794552">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4794607">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4794661">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4794712">package</span>&nbsp;<span class="ident" id="4794720">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4794726">import</span>&nbsp;<span class="op" id="4794733">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4794736">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4794746">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4794749">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4794822">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="4794890">type</span>&nbsp;<span class="ident" id="4794895">tagOptions</span>&nbsp;<span class="builtintype" id="4794906">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4794914">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4794977">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="4795005">func</span>&nbsp;<span class="ident" id="4795010">parseTag</span><span class="op" id="4795018">(</span><span class="ident" id="4795019">tag</span>&nbsp;<span class="builtintype" id="4795023">string</span><span class="op" id="4795029">)</span>&nbsp;<span class="op" id="4795031">(</span><span class="builtintype" id="4795032">string</span><span class="op" id="4795038">,</span>&nbsp;<span class="ident" id="4795040">tagOptions</span><span class="op" id="4795050">)</span>&nbsp;<span class="op" id="4795052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795055">if</span>&nbsp;<span class="ident" id="4795058">idx</span>&nbsp;<span class="op" id="4795062">:=</span>&nbsp;<span class="ident" id="4795065">strings</span><span class="op" id="4795072">.</span><span class="ident" id="4795073">Index</span><span class="op" id="4795078">(</span><span class="ident" id="4795079">tag</span><span class="op" id="4795082">,</span>&nbsp;<span class="string" id="4795084">&#34;,&#34;</span><span class="op" id="4795087">)</span><span class="op" id="4795088">;</span>&nbsp;<span class="ident" id="4795090">idx</span>&nbsp;<span class="op" id="4795094">!=</span>&nbsp;<span class="op" id="4795097">-</span><span class="num" id="4795098">1</span>&nbsp;<span class="op" id="4795100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795104">return</span>&nbsp;<span class="ident" id="4795111">tag</span><span class="op" id="4795114">[</span><span class="op" id="4795115">:</span><span class="ident" id="4795116">idx</span><span class="op" id="4795119">]</span><span class="op" id="4795120">,</span>&nbsp;<span class="ident" id="4795122">tagOptions</span><span class="op" id="4795132">(</span><span class="ident" id="4795133">tag</span><span class="op" id="4795136">[</span><span class="ident" id="4795137">idx</span><span class="op" id="4795140">+</span><span class="num" id="4795141">1</span><span class="op" id="4795142">:</span><span class="op" id="4795143">]</span><span class="op" id="4795144">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795150">return</span>&nbsp;<span class="ident" id="4795157">tag</span><span class="op" id="4795160">,</span>&nbsp;<span class="ident" id="4795162">tagOptions</span><span class="op" id="4795172">(</span><span class="string" id="4795173">&#34;&#34;</span><span class="op" id="4795175">)</span><br>
<span class="lineno"></span><span class="op" id="4795177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4795180">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="4795242">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4795311">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="4795341">func</span>&nbsp;<span class="op" id="4795346">(</span><span class="ident" id="4795347">o</span>&nbsp;<span class="ident" id="4795349">tagOptions</span><span class="op" id="4795359">)</span>&nbsp;<span class="ident" id="4795361">Contains</span><span class="op" id="4795369">(</span><span class="ident" id="4795370">optionName</span>&nbsp;<span class="builtintype" id="4795381">string</span><span class="op" id="4795387">)</span>&nbsp;<span class="builtintype" id="4795389">bool</span>&nbsp;<span class="op" id="4795394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795397">if</span>&nbsp;<span class="builtinfunc" id="4795400">len</span><span class="op" id="4795403">(</span><span class="ident" id="4795404">o</span><span class="op" id="4795405">)</span>&nbsp;<span class="op" id="4795407">==</span>&nbsp;<span class="num" id="4795410">0</span>&nbsp;<span class="op" id="4795412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795416">return</span>&nbsp;<span class="ident" id="4795423">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795433">s</span>&nbsp;<span class="op" id="4795435">:=</span>&nbsp;<span class="builtintype" id="4795438">string</span><span class="op" id="4795444">(</span><span class="ident" id="4795445">o</span><span class="op" id="4795446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795449">for</span>&nbsp;<span class="ident" id="4795453">s</span>&nbsp;<span class="op" id="4795455">!=</span>&nbsp;<span class="string" id="4795458">&#34;&#34;</span>&nbsp;<span class="op" id="4795461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795465">var</span>&nbsp;<span class="ident" id="4795469">next</span>&nbsp;<span class="builtintype" id="4795474">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795483">i</span>&nbsp;<span class="op" id="4795485">:=</span>&nbsp;<span class="ident" id="4795488">strings</span><span class="op" id="4795495">.</span><span class="ident" id="4795496">Index</span><span class="op" id="4795501">(</span><span class="ident" id="4795502">s</span><span class="op" id="4795503">,</span>&nbsp;<span class="string" id="4795505">&#34;,&#34;</span><span class="op" id="4795508">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795512">if</span>&nbsp;<span class="ident" id="4795515">i</span>&nbsp;<span class="op" id="4795517">&gt;=</span>&nbsp;<span class="num" id="4795520">0</span>&nbsp;<span class="op" id="4795522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795527">s</span><span class="op" id="4795528">,</span>&nbsp;<span class="ident" id="4795530">next</span>&nbsp;<span class="op" id="4795535">=</span>&nbsp;<span class="ident" id="4795537">s</span><span class="op" id="4795538">[</span><span class="op" id="4795539">:</span><span class="ident" id="4795540">i</span><span class="op" id="4795541">]</span><span class="op" id="4795542">,</span>&nbsp;<span class="ident" id="4795544">s</span><span class="op" id="4795545">[</span><span class="ident" id="4795546">i</span><span class="op" id="4795547">+</span><span class="num" id="4795548">1</span><span class="op" id="4795549">:</span><span class="op" id="4795550">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795558">if</span>&nbsp;<span class="ident" id="4795561">s</span>&nbsp;<span class="op" id="4795563">==</span>&nbsp;<span class="ident" id="4795566">optionName</span>&nbsp;<span class="op" id="4795577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795582">return</span>&nbsp;<span class="ident" id="4795589">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4795600">s</span>&nbsp;<span class="op" id="4795602">=</span>&nbsp;<span class="ident" id="4795604">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4795610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4795613">return</span>&nbsp;<span class="ident" id="4795620">false</span><br>
<span class="lineno"></span><span class="op" id="4795626">}</span>
</div>
</body>
</html>
