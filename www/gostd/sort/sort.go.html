<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2848123">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2848178">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2848232">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2848283">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2848355">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2848371">package</span>&nbsp;<span class="ident" id="2848379">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2848385">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2848457">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2848530">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2848595">type</span>&nbsp;<span class="ident" id="2848600">Interface</span>&nbsp;<span class="keyword" id="2848610">interface</span>&nbsp;<span class="op" id="2848620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848623">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848676">Len</span><span class="op" id="2848679">(</span><span class="op" id="2848680">)</span>&nbsp;<span class="builtintype" id="2848682">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848687">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848729">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848786">Less</span><span class="op" id="2848790">(</span><span class="ident" id="2848791">i</span><span class="op" id="2848792">,</span>&nbsp;<span class="ident" id="2848794">j</span>&nbsp;<span class="builtintype" id="2848796">int</span><span class="op" id="2848799">)</span>&nbsp;<span class="builtintype" id="2848801">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848807">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848857">Swap</span><span class="op" id="2848861">(</span><span class="ident" id="2848862">i</span><span class="op" id="2848863">,</span>&nbsp;<span class="ident" id="2848865">j</span>&nbsp;<span class="builtintype" id="2848867">int</span><span class="op" id="2848870">)</span><br>
<span class="lineno">20</span><span class="op" id="2848872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2848875">func</span>&nbsp;<span class="ident" id="2848880">min</span><span class="op" id="2848883">(</span><span class="ident" id="2848884">a</span><span class="op" id="2848885">,</span>&nbsp;<span class="ident" id="2848887">b</span>&nbsp;<span class="builtintype" id="2848889">int</span><span class="op" id="2848892">)</span>&nbsp;<span class="builtintype" id="2848894">int</span>&nbsp;<span class="op" id="2848898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848901">if</span>&nbsp;<span class="ident" id="2848904">a</span>&nbsp;<span class="op" id="2848906">&lt;</span>&nbsp;<span class="ident" id="2848908">b</span>&nbsp;<span class="op" id="2848910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848914">return</span>&nbsp;<span class="ident" id="2848921">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848927">return</span>&nbsp;<span class="ident" id="2848934">b</span><br>
<span class="lineno"></span><span class="op" id="2848936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2848939">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2848957">func</span>&nbsp;<span class="ident" id="2848962">insertionSort</span><span class="op" id="2848975">(</span><span class="ident" id="2848976">data</span>&nbsp;<span class="ident" id="2848981">Interface</span><span class="op" id="2848990">,</span>&nbsp;<span class="ident" id="2848992">a</span><span class="op" id="2848993">,</span>&nbsp;<span class="ident" id="2848995">b</span>&nbsp;<span class="builtintype" id="2848997">int</span><span class="op" id="2849000">)</span>&nbsp;<span class="op" id="2849002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849005">for</span>&nbsp;<span class="ident" id="2849009">i</span>&nbsp;<span class="op" id="2849011">:=</span>&nbsp;<span class="ident" id="2849014">a</span>&nbsp;<span class="op" id="2849016">+</span>&nbsp;<span class="num" id="2849018">1</span><span class="op" id="2849019">;</span>&nbsp;<span class="ident" id="2849021">i</span>&nbsp;<span class="op" id="2849023">&lt;</span>&nbsp;<span class="ident" id="2849025">b</span><span class="op" id="2849026">;</span>&nbsp;<span class="ident" id="2849028">i</span><span class="op" id="2849029">++</span>&nbsp;<span class="op" id="2849032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849036">for</span>&nbsp;<span class="ident" id="2849040">j</span>&nbsp;<span class="op" id="2849042">:=</span>&nbsp;<span class="ident" id="2849045">i</span><span class="op" id="2849046">;</span>&nbsp;<span class="ident" id="2849048">j</span>&nbsp;<span class="op" id="2849050">&gt;</span>&nbsp;<span class="ident" id="2849052">a</span>&nbsp;<span class="op" id="2849054">&amp;&amp;</span>&nbsp;<span class="ident" id="2849057">data</span><span class="op" id="2849061">.</span><span class="ident" id="2849062">Less</span><span class="op" id="2849066">(</span><span class="ident" id="2849067">j</span><span class="op" id="2849068">,</span>&nbsp;<span class="ident" id="2849070">j</span><span class="op" id="2849071">-</span><span class="num" id="2849072">1</span><span class="op" id="2849073">)</span><span class="op" id="2849074">;</span>&nbsp;<span class="ident" id="2849076">j</span><span class="op" id="2849077">--</span>&nbsp;<span class="op" id="2849080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849085">data</span><span class="op" id="2849089">.</span><span class="ident" id="2849090">Swap</span><span class="op" id="2849094">(</span><span class="ident" id="2849095">j</span><span class="op" id="2849096">,</span>&nbsp;<span class="ident" id="2849098">j</span><span class="op" id="2849099">-</span><span class="num" id="2849100">1</span><span class="op" id="2849101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849105">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849108">}</span><br>
<span class="lineno"></span><span class="op" id="2849110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2849113">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2849171">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2849241">func</span>&nbsp;<span class="ident" id="2849246">siftDown</span><span class="op" id="2849254">(</span><span class="ident" id="2849255">data</span>&nbsp;<span class="ident" id="2849260">Interface</span><span class="op" id="2849269">,</span>&nbsp;<span class="ident" id="2849271">lo</span><span class="op" id="2849273">,</span>&nbsp;<span class="ident" id="2849275">hi</span><span class="op" id="2849277">,</span>&nbsp;<span class="ident" id="2849279">first</span>&nbsp;<span class="builtintype" id="2849285">int</span><span class="op" id="2849288">)</span>&nbsp;<span class="op" id="2849290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849293">root</span>&nbsp;<span class="op" id="2849298">:=</span>&nbsp;<span class="ident" id="2849301">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849305">for</span>&nbsp;<span class="op" id="2849309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849313">child</span>&nbsp;<span class="op" id="2849319">:=</span>&nbsp;<span class="num" id="2849322">2</span><span class="op" id="2849323">*</span><span class="ident" id="2849324">root</span>&nbsp;<span class="op" id="2849329">+</span>&nbsp;<span class="num" id="2849331">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849335">if</span>&nbsp;<span class="ident" id="2849338">child</span>&nbsp;<span class="op" id="2849344">&gt;=</span>&nbsp;<span class="ident" id="2849347">hi</span>&nbsp;<span class="op" id="2849350">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849355">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849367">if</span>&nbsp;<span class="ident" id="2849370">child</span><span class="op" id="2849375">+</span><span class="num" id="2849376">1</span>&nbsp;<span class="op" id="2849378">&lt;</span>&nbsp;<span class="ident" id="2849380">hi</span>&nbsp;<span class="op" id="2849383">&amp;&amp;</span>&nbsp;<span class="ident" id="2849386">data</span><span class="op" id="2849390">.</span><span class="ident" id="2849391">Less</span><span class="op" id="2849395">(</span><span class="ident" id="2849396">first</span><span class="op" id="2849401">+</span><span class="ident" id="2849402">child</span><span class="op" id="2849407">,</span>&nbsp;<span class="ident" id="2849409">first</span><span class="op" id="2849414">+</span><span class="ident" id="2849415">child</span><span class="op" id="2849420">+</span><span class="num" id="2849421">1</span><span class="op" id="2849422">)</span>&nbsp;<span class="op" id="2849424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849429">child</span><span class="op" id="2849434">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849439">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849443">if</span>&nbsp;<span class="op" id="2849446">!</span><span class="ident" id="2849447">data</span><span class="op" id="2849451">.</span><span class="ident" id="2849452">Less</span><span class="op" id="2849456">(</span><span class="ident" id="2849457">first</span><span class="op" id="2849462">+</span><span class="ident" id="2849463">root</span><span class="op" id="2849467">,</span>&nbsp;<span class="ident" id="2849469">first</span><span class="op" id="2849474">+</span><span class="ident" id="2849475">child</span><span class="op" id="2849480">)</span>&nbsp;<span class="op" id="2849482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849487">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849500">data</span><span class="op" id="2849504">.</span><span class="ident" id="2849505">Swap</span><span class="op" id="2849509">(</span><span class="ident" id="2849510">first</span><span class="op" id="2849515">+</span><span class="ident" id="2849516">root</span><span class="op" id="2849520">,</span>&nbsp;<span class="ident" id="2849522">first</span><span class="op" id="2849527">+</span><span class="ident" id="2849528">child</span><span class="op" id="2849533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849537">root</span>&nbsp;<span class="op" id="2849542">=</span>&nbsp;<span class="ident" id="2849544">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849551">}</span><br>
<span class="lineno"></span><span class="op" id="2849553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2849556">func</span>&nbsp;<span class="ident" id="2849561">heapSort</span><span class="op" id="2849569">(</span><span class="ident" id="2849570">data</span>&nbsp;<span class="ident" id="2849575">Interface</span><span class="op" id="2849584">,</span>&nbsp;<span class="ident" id="2849586">a</span><span class="op" id="2849587">,</span>&nbsp;<span class="ident" id="2849589">b</span>&nbsp;<span class="builtintype" id="2849591">int</span><span class="op" id="2849594">)</span>&nbsp;<span class="op" id="2849596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849599">first</span>&nbsp;<span class="op" id="2849605">:=</span>&nbsp;<span class="ident" id="2849608">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849611">lo</span>&nbsp;<span class="op" id="2849614">:=</span>&nbsp;<span class="num" id="2849617">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849620">hi</span>&nbsp;<span class="op" id="2849623">:=</span>&nbsp;<span class="ident" id="2849626">b</span>&nbsp;<span class="op" id="2849628">-</span>&nbsp;<span class="ident" id="2849630">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849634">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849679">for</span>&nbsp;<span class="ident" id="2849683">i</span>&nbsp;<span class="op" id="2849685">:=</span>&nbsp;<span class="op" id="2849688">(</span><span class="ident" id="2849689">hi</span>&nbsp;<span class="op" id="2849692">-</span>&nbsp;<span class="num" id="2849694">1</span><span class="op" id="2849695">)</span>&nbsp;<span class="op" id="2849697">/</span>&nbsp;<span class="num" id="2849699">2</span><span class="op" id="2849700">;</span>&nbsp;<span class="ident" id="2849702">i</span>&nbsp;<span class="op" id="2849704">&gt;=</span>&nbsp;<span class="num" id="2849707">0</span><span class="op" id="2849708">;</span>&nbsp;<span class="ident" id="2849710">i</span><span class="op" id="2849711">--</span>&nbsp;<span class="op" id="2849714">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849718">siftDown</span><span class="op" id="2849726">(</span><span class="ident" id="2849727">data</span><span class="op" id="2849731">,</span>&nbsp;<span class="ident" id="2849733">i</span><span class="op" id="2849734">,</span>&nbsp;<span class="ident" id="2849736">hi</span><span class="op" id="2849738">,</span>&nbsp;<span class="ident" id="2849740">first</span><span class="op" id="2849745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849752">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849803">for</span>&nbsp;<span class="ident" id="2849807">i</span>&nbsp;<span class="op" id="2849809">:=</span>&nbsp;<span class="ident" id="2849812">hi</span>&nbsp;<span class="op" id="2849815">-</span>&nbsp;<span class="num" id="2849817">1</span><span class="op" id="2849818">;</span>&nbsp;<span class="ident" id="2849820">i</span>&nbsp;<span class="op" id="2849822">&gt;=</span>&nbsp;<span class="num" id="2849825">0</span><span class="op" id="2849826">;</span>&nbsp;<span class="ident" id="2849828">i</span><span class="op" id="2849829">--</span>&nbsp;<span class="op" id="2849832">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849836">data</span><span class="op" id="2849840">.</span><span class="ident" id="2849841">Swap</span><span class="op" id="2849845">(</span><span class="ident" id="2849846">first</span><span class="op" id="2849851">,</span>&nbsp;<span class="ident" id="2849853">first</span><span class="op" id="2849858">+</span><span class="ident" id="2849859">i</span><span class="op" id="2849860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849864">siftDown</span><span class="op" id="2849872">(</span><span class="ident" id="2849873">data</span><span class="op" id="2849877">,</span>&nbsp;<span class="ident" id="2849879">lo</span><span class="op" id="2849881">,</span>&nbsp;<span class="ident" id="2849883">i</span><span class="op" id="2849884">,</span>&nbsp;<span class="ident" id="2849886">first</span><span class="op" id="2849891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849894">}</span><br>
<span class="lineno"></span><span class="op" id="2849896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2849899">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2849944">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2850001">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2850095">func</span>&nbsp;<span class="ident" id="2850100">medianOfThree</span><span class="op" id="2850113">(</span><span class="ident" id="2850114">data</span>&nbsp;<span class="ident" id="2850119">Interface</span><span class="op" id="2850128">,</span>&nbsp;<span class="ident" id="2850130">a</span><span class="op" id="2850131">,</span>&nbsp;<span class="ident" id="2850133">b</span><span class="op" id="2850134">,</span>&nbsp;<span class="ident" id="2850136">c</span>&nbsp;<span class="builtintype" id="2850138">int</span><span class="op" id="2850141">)</span>&nbsp;<span class="op" id="2850143">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850146">m0</span>&nbsp;<span class="op" id="2850149">:=</span>&nbsp;<span class="ident" id="2850152">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850155">m1</span>&nbsp;<span class="op" id="2850158">:=</span>&nbsp;<span class="ident" id="2850161">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850164">m2</span>&nbsp;<span class="op" id="2850167">:=</span>&nbsp;<span class="ident" id="2850170">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850173">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850203">if</span>&nbsp;<span class="ident" id="2850206">data</span><span class="op" id="2850210">.</span><span class="ident" id="2850211">Less</span><span class="op" id="2850215">(</span><span class="ident" id="2850216">m1</span><span class="op" id="2850218">,</span>&nbsp;<span class="ident" id="2850220">m0</span><span class="op" id="2850222">)</span>&nbsp;<span class="op" id="2850224">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850228">data</span><span class="op" id="2850232">.</span><span class="ident" id="2850233">Swap</span><span class="op" id="2850237">(</span><span class="ident" id="2850238">m1</span><span class="op" id="2850240">,</span>&nbsp;<span class="ident" id="2850242">m0</span><span class="op" id="2850244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850250">if</span>&nbsp;<span class="ident" id="2850253">data</span><span class="op" id="2850257">.</span><span class="ident" id="2850258">Less</span><span class="op" id="2850262">(</span><span class="ident" id="2850263">m2</span><span class="op" id="2850265">,</span>&nbsp;<span class="ident" id="2850267">m1</span><span class="op" id="2850269">)</span>&nbsp;<span class="op" id="2850271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850275">data</span><span class="op" id="2850279">.</span><span class="ident" id="2850280">Swap</span><span class="op" id="2850284">(</span><span class="ident" id="2850285">m2</span><span class="op" id="2850287">,</span>&nbsp;<span class="ident" id="2850289">m1</span><span class="op" id="2850291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850294">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850297">if</span>&nbsp;<span class="ident" id="2850300">data</span><span class="op" id="2850304">.</span><span class="ident" id="2850305">Less</span><span class="op" id="2850309">(</span><span class="ident" id="2850310">m1</span><span class="op" id="2850312">,</span>&nbsp;<span class="ident" id="2850314">m0</span><span class="op" id="2850316">)</span>&nbsp;<span class="op" id="2850318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850322">data</span><span class="op" id="2850326">.</span><span class="ident" id="2850327">Swap</span><span class="op" id="2850331">(</span><span class="ident" id="2850332">m1</span><span class="op" id="2850334">,</span>&nbsp;<span class="ident" id="2850336">m0</span><span class="op" id="2850338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850344">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2850384">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2850387">func</span>&nbsp;<span class="ident" id="2850392">swapRange</span><span class="op" id="2850401">(</span><span class="ident" id="2850402">data</span>&nbsp;<span class="ident" id="2850407">Interface</span><span class="op" id="2850416">,</span>&nbsp;<span class="ident" id="2850418">a</span><span class="op" id="2850419">,</span>&nbsp;<span class="ident" id="2850421">b</span><span class="op" id="2850422">,</span>&nbsp;<span class="ident" id="2850424">n</span>&nbsp;<span class="builtintype" id="2850426">int</span><span class="op" id="2850429">)</span>&nbsp;<span class="op" id="2850431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850434">for</span>&nbsp;<span class="ident" id="2850438">i</span>&nbsp;<span class="op" id="2850440">:=</span>&nbsp;<span class="num" id="2850443">0</span><span class="op" id="2850444">;</span>&nbsp;<span class="ident" id="2850446">i</span>&nbsp;<span class="op" id="2850448">&lt;</span>&nbsp;<span class="ident" id="2850450">n</span><span class="op" id="2850451">;</span>&nbsp;<span class="ident" id="2850453">i</span><span class="op" id="2850454">++</span>&nbsp;<span class="op" id="2850457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850461">data</span><span class="op" id="2850465">.</span><span class="ident" id="2850466">Swap</span><span class="op" id="2850470">(</span><span class="ident" id="2850471">a</span><span class="op" id="2850472">+</span><span class="ident" id="2850473">i</span><span class="op" id="2850474">,</span>&nbsp;<span class="ident" id="2850476">b</span><span class="op" id="2850477">+</span><span class="ident" id="2850478">i</span><span class="op" id="2850479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850482">}</span><br>
<span class="lineno">100</span><span class="op" id="2850484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2850487">func</span>&nbsp;<span class="ident" id="2850492">doPivot</span><span class="op" id="2850499">(</span><span class="ident" id="2850500">data</span>&nbsp;<span class="ident" id="2850505">Interface</span><span class="op" id="2850514">,</span>&nbsp;<span class="ident" id="2850516">lo</span><span class="op" id="2850518">,</span>&nbsp;<span class="ident" id="2850520">hi</span>&nbsp;<span class="builtintype" id="2850523">int</span><span class="op" id="2850526">)</span>&nbsp;<span class="op" id="2850528">(</span><span class="ident" id="2850529">midlo</span><span class="op" id="2850534">,</span>&nbsp;<span class="ident" id="2850536">midhi</span>&nbsp;<span class="builtintype" id="2850542">int</span><span class="op" id="2850545">)</span>&nbsp;<span class="op" id="2850547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850550">m</span>&nbsp;<span class="op" id="2850552">:=</span>&nbsp;<span class="ident" id="2850555">lo</span>&nbsp;<span class="op" id="2850558">+</span>&nbsp;<span class="op" id="2850560">(</span><span class="ident" id="2850561">hi</span><span class="op" id="2850563">-</span><span class="ident" id="2850564">lo</span><span class="op" id="2850566">)</span><span class="op" id="2850567">/</span><span class="num" id="2850568">2</span>&nbsp;<span class="comment" id="2850570">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850619">if</span>&nbsp;<span class="ident" id="2850622">hi</span><span class="op" id="2850624">-</span><span class="ident" id="2850625">lo</span>&nbsp;<span class="op" id="2850628">&gt;</span>&nbsp;<span class="num" id="2850630">40</span>&nbsp;<span class="op" id="2850633">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850637">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850697">s</span>&nbsp;<span class="op" id="2850699">:=</span>&nbsp;<span class="op" id="2850702">(</span><span class="ident" id="2850703">hi</span>&nbsp;<span class="op" id="2850706">-</span>&nbsp;<span class="ident" id="2850708">lo</span><span class="op" id="2850710">)</span>&nbsp;<span class="op" id="2850712">/</span>&nbsp;<span class="num" id="2850714">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850718">medianOfThree</span><span class="op" id="2850731">(</span><span class="ident" id="2850732">data</span><span class="op" id="2850736">,</span>&nbsp;<span class="ident" id="2850738">lo</span><span class="op" id="2850740">,</span>&nbsp;<span class="ident" id="2850742">lo</span><span class="op" id="2850744">+</span><span class="ident" id="2850745">s</span><span class="op" id="2850746">,</span>&nbsp;<span class="ident" id="2850748">lo</span><span class="op" id="2850750">+</span><span class="num" id="2850751">2</span><span class="op" id="2850752">*</span><span class="ident" id="2850753">s</span><span class="op" id="2850754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850758">medianOfThree</span><span class="op" id="2850771">(</span><span class="ident" id="2850772">data</span><span class="op" id="2850776">,</span>&nbsp;<span class="ident" id="2850778">m</span><span class="op" id="2850779">,</span>&nbsp;<span class="ident" id="2850781">m</span><span class="op" id="2850782">-</span><span class="ident" id="2850783">s</span><span class="op" id="2850784">,</span>&nbsp;<span class="ident" id="2850786">m</span><span class="op" id="2850787">+</span><span class="ident" id="2850788">s</span><span class="op" id="2850789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850793">medianOfThree</span><span class="op" id="2850806">(</span><span class="ident" id="2850807">data</span><span class="op" id="2850811">,</span>&nbsp;<span class="ident" id="2850813">hi</span><span class="op" id="2850815">-</span><span class="num" id="2850816">1</span><span class="op" id="2850817">,</span>&nbsp;<span class="ident" id="2850819">hi</span><span class="op" id="2850821">-</span><span class="num" id="2850822">1</span><span class="op" id="2850823">-</span><span class="ident" id="2850824">s</span><span class="op" id="2850825">,</span>&nbsp;<span class="ident" id="2850827">hi</span><span class="op" id="2850829">-</span><span class="num" id="2850830">1</span><span class="op" id="2850831">-</span><span class="num" id="2850832">2</span><span class="op" id="2850833">*</span><span class="ident" id="2850834">s</span><span class="op" id="2850835">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850841">medianOfThree</span><span class="op" id="2850854">(</span><span class="ident" id="2850855">data</span><span class="op" id="2850859">,</span>&nbsp;<span class="ident" id="2850861">lo</span><span class="op" id="2850863">,</span>&nbsp;<span class="ident" id="2850865">m</span><span class="op" id="2850866">,</span>&nbsp;<span class="ident" id="2850868">hi</span><span class="op" id="2850870">-</span><span class="num" id="2850871">1</span><span class="op" id="2850872">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850876">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850896">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850941">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850971">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851000">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851035">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851064">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851094">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851098">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851150">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851184">pivot</span>&nbsp;<span class="op" id="2851190">:=</span>&nbsp;<span class="ident" id="2851193">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851197">a</span><span class="op" id="2851198">,</span>&nbsp;<span class="ident" id="2851200">b</span><span class="op" id="2851201">,</span>&nbsp;<span class="ident" id="2851203">c</span><span class="op" id="2851204">,</span>&nbsp;<span class="ident" id="2851206">d</span>&nbsp;<span class="op" id="2851208">:=</span>&nbsp;<span class="ident" id="2851211">lo</span><span class="op" id="2851213">+</span><span class="num" id="2851214">1</span><span class="op" id="2851215">,</span>&nbsp;<span class="ident" id="2851217">lo</span><span class="op" id="2851219">+</span><span class="num" id="2851220">1</span><span class="op" id="2851221">,</span>&nbsp;<span class="ident" id="2851223">hi</span><span class="op" id="2851225">,</span>&nbsp;<span class="ident" id="2851227">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851231">for</span>&nbsp;<span class="op" id="2851235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851239">for</span>&nbsp;<span class="ident" id="2851243">b</span>&nbsp;<span class="op" id="2851245">&lt;</span>&nbsp;<span class="ident" id="2851247">c</span>&nbsp;<span class="op" id="2851249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851254">if</span>&nbsp;<span class="ident" id="2851257">data</span><span class="op" id="2851261">.</span><span class="ident" id="2851262">Less</span><span class="op" id="2851266">(</span><span class="ident" id="2851267">b</span><span class="op" id="2851268">,</span>&nbsp;<span class="ident" id="2851270">pivot</span><span class="op" id="2851275">)</span>&nbsp;<span class="op" id="2851277">{</span>&nbsp;<span class="comment" id="2851279">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851302">b</span><span class="op" id="2851303">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851309">}</span>&nbsp;<span class="keyword" id="2851311">else</span>&nbsp;<span class="keyword" id="2851316">if</span>&nbsp;<span class="op" id="2851319">!</span><span class="ident" id="2851320">data</span><span class="op" id="2851324">.</span><span class="ident" id="2851325">Less</span><span class="op" id="2851329">(</span><span class="ident" id="2851330">pivot</span><span class="op" id="2851335">,</span>&nbsp;<span class="ident" id="2851337">b</span><span class="op" id="2851338">)</span>&nbsp;<span class="op" id="2851340">{</span>&nbsp;<span class="comment" id="2851342">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851365">data</span><span class="op" id="2851369">.</span><span class="ident" id="2851370">Swap</span><span class="op" id="2851374">(</span><span class="ident" id="2851375">a</span><span class="op" id="2851376">,</span>&nbsp;<span class="ident" id="2851378">b</span><span class="op" id="2851379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851385">a</span><span class="op" id="2851386">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851393">b</span><span class="op" id="2851394">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851400">}</span>&nbsp;<span class="keyword" id="2851402">else</span>&nbsp;<span class="op" id="2851407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851413">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851430">for</span>&nbsp;<span class="ident" id="2851434">b</span>&nbsp;<span class="op" id="2851436">&lt;</span>&nbsp;<span class="ident" id="2851438">c</span>&nbsp;<span class="op" id="2851440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851445">if</span>&nbsp;<span class="ident" id="2851448">data</span><span class="op" id="2851452">.</span><span class="ident" id="2851453">Less</span><span class="op" id="2851457">(</span><span class="ident" id="2851458">pivot</span><span class="op" id="2851463">,</span>&nbsp;<span class="ident" id="2851465">c</span><span class="op" id="2851466">-</span><span class="num" id="2851467">1</span><span class="op" id="2851468">)</span>&nbsp;<span class="op" id="2851470">{</span>&nbsp;<span class="comment" id="2851472">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851497">c</span><span class="op" id="2851498">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851504">}</span>&nbsp;<span class="keyword" id="2851506">else</span>&nbsp;<span class="keyword" id="2851511">if</span>&nbsp;<span class="op" id="2851514">!</span><span class="ident" id="2851515">data</span><span class="op" id="2851519">.</span><span class="ident" id="2851520">Less</span><span class="op" id="2851524">(</span><span class="ident" id="2851525">c</span><span class="op" id="2851526">-</span><span class="num" id="2851527">1</span><span class="op" id="2851528">,</span>&nbsp;<span class="ident" id="2851530">pivot</span><span class="op" id="2851535">)</span>&nbsp;<span class="op" id="2851537">{</span>&nbsp;<span class="comment" id="2851539">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851564">data</span><span class="op" id="2851568">.</span><span class="ident" id="2851569">Swap</span><span class="op" id="2851573">(</span><span class="ident" id="2851574">c</span><span class="op" id="2851575">-</span><span class="num" id="2851576">1</span><span class="op" id="2851577">,</span>&nbsp;<span class="ident" id="2851579">d</span><span class="op" id="2851580">-</span><span class="num" id="2851581">1</span><span class="op" id="2851582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851588">c</span><span class="op" id="2851589">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851596">d</span><span class="op" id="2851597">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851603">}</span>&nbsp;<span class="keyword" id="2851605">else</span>&nbsp;<span class="op" id="2851610">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851616">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851633">if</span>&nbsp;<span class="ident" id="2851636">b</span>&nbsp;<span class="op" id="2851638">&gt;=</span>&nbsp;<span class="ident" id="2851641">c</span>&nbsp;<span class="op" id="2851643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851648">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2851660">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851700">data</span><span class="op" id="2851704">.</span><span class="ident" id="2851705">Swap</span><span class="op" id="2851709">(</span><span class="ident" id="2851710">b</span><span class="op" id="2851711">,</span>&nbsp;<span class="ident" id="2851713">c</span><span class="op" id="2851714">-</span><span class="num" id="2851715">1</span><span class="op" id="2851716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851720">b</span><span class="op" id="2851721">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851726">c</span><span class="op" id="2851727">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851735">n</span>&nbsp;<span class="op" id="2851737">:=</span>&nbsp;<span class="ident" id="2851740">min</span><span class="op" id="2851743">(</span><span class="ident" id="2851744">b</span><span class="op" id="2851745">-</span><span class="ident" id="2851746">a</span><span class="op" id="2851747">,</span>&nbsp;<span class="ident" id="2851749">a</span><span class="op" id="2851750">-</span><span class="ident" id="2851751">lo</span><span class="op" id="2851753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851756">swapRange</span><span class="op" id="2851765">(</span><span class="ident" id="2851766">data</span><span class="op" id="2851770">,</span>&nbsp;<span class="ident" id="2851772">lo</span><span class="op" id="2851774">,</span>&nbsp;<span class="ident" id="2851776">b</span><span class="op" id="2851777">-</span><span class="ident" id="2851778">n</span><span class="op" id="2851779">,</span>&nbsp;<span class="ident" id="2851781">n</span><span class="op" id="2851782">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851786">n</span>&nbsp;<span class="op" id="2851788">=</span>&nbsp;<span class="ident" id="2851790">min</span><span class="op" id="2851793">(</span><span class="ident" id="2851794">hi</span><span class="op" id="2851796">-</span><span class="ident" id="2851797">d</span><span class="op" id="2851798">,</span>&nbsp;<span class="ident" id="2851800">d</span><span class="op" id="2851801">-</span><span class="ident" id="2851802">c</span><span class="op" id="2851803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851806">swapRange</span><span class="op" id="2851815">(</span><span class="ident" id="2851816">data</span><span class="op" id="2851820">,</span>&nbsp;<span class="ident" id="2851822">c</span><span class="op" id="2851823">,</span>&nbsp;<span class="ident" id="2851825">hi</span><span class="op" id="2851827">-</span><span class="ident" id="2851828">n</span><span class="op" id="2851829">,</span>&nbsp;<span class="ident" id="2851831">n</span><span class="op" id="2851832">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851836">return</span>&nbsp;<span class="ident" id="2851843">lo</span>&nbsp;<span class="op" id="2851846">+</span>&nbsp;<span class="ident" id="2851848">b</span>&nbsp;<span class="op" id="2851850">-</span>&nbsp;<span class="ident" id="2851852">a</span><span class="op" id="2851853">,</span>&nbsp;<span class="ident" id="2851855">hi</span>&nbsp;<span class="op" id="2851858">-</span>&nbsp;<span class="op" id="2851860">(</span><span class="ident" id="2851861">d</span>&nbsp;<span class="op" id="2851863">-</span>&nbsp;<span class="ident" id="2851865">c</span><span class="op" id="2851866">)</span><br>
<span class="lineno"></span><span class="op" id="2851868">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2851871">func</span>&nbsp;<span class="ident" id="2851876">quickSort</span><span class="op" id="2851885">(</span><span class="ident" id="2851886">data</span>&nbsp;<span class="ident" id="2851891">Interface</span><span class="op" id="2851900">,</span>&nbsp;<span class="ident" id="2851902">a</span><span class="op" id="2851903">,</span>&nbsp;<span class="ident" id="2851905">b</span><span class="op" id="2851906">,</span>&nbsp;<span class="ident" id="2851908">maxDepth</span>&nbsp;<span class="builtintype" id="2851917">int</span><span class="op" id="2851920">)</span>&nbsp;<span class="op" id="2851922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851925">for</span>&nbsp;<span class="ident" id="2851929">b</span><span class="op" id="2851930">-</span><span class="ident" id="2851931">a</span>&nbsp;<span class="op" id="2851933">&gt;</span>&nbsp;<span class="num" id="2851935">7</span>&nbsp;<span class="op" id="2851937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851941">if</span>&nbsp;<span class="ident" id="2851944">maxDepth</span>&nbsp;<span class="op" id="2851953">==</span>&nbsp;<span class="num" id="2851956">0</span>&nbsp;<span class="op" id="2851958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2851963">heapSort</span><span class="op" id="2851971">(</span><span class="ident" id="2851972">data</span><span class="op" id="2851976">,</span>&nbsp;<span class="ident" id="2851978">a</span><span class="op" id="2851979">,</span>&nbsp;<span class="ident" id="2851981">b</span><span class="op" id="2851982">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2851987">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2851996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852000">maxDepth</span><span class="op" id="2852008">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852013">mlo</span><span class="op" id="2852016">,</span>&nbsp;<span class="ident" id="2852018">mhi</span>&nbsp;<span class="op" id="2852022">:=</span>&nbsp;<span class="ident" id="2852025">doPivot</span><span class="op" id="2852032">(</span><span class="ident" id="2852033">data</span><span class="op" id="2852037">,</span>&nbsp;<span class="ident" id="2852039">a</span><span class="op" id="2852040">,</span>&nbsp;<span class="ident" id="2852042">b</span><span class="op" id="2852043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2852047">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2852107">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852146">if</span>&nbsp;<span class="ident" id="2852149">mlo</span><span class="op" id="2852152">-</span><span class="ident" id="2852153">a</span>&nbsp;<span class="op" id="2852155">&lt;</span>&nbsp;<span class="ident" id="2852157">b</span><span class="op" id="2852158">-</span><span class="ident" id="2852159">mhi</span>&nbsp;<span class="op" id="2852163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852168">quickSort</span><span class="op" id="2852177">(</span><span class="ident" id="2852178">data</span><span class="op" id="2852182">,</span>&nbsp;<span class="ident" id="2852184">a</span><span class="op" id="2852185">,</span>&nbsp;<span class="ident" id="2852187">mlo</span><span class="op" id="2852190">,</span>&nbsp;<span class="ident" id="2852192">maxDepth</span><span class="op" id="2852200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852205">a</span>&nbsp;<span class="op" id="2852207">=</span>&nbsp;<span class="ident" id="2852209">mhi</span>&nbsp;<span class="comment" id="2852213">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852248">}</span>&nbsp;<span class="keyword" id="2852250">else</span>&nbsp;<span class="op" id="2852255">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852260">quickSort</span><span class="op" id="2852269">(</span><span class="ident" id="2852270">data</span><span class="op" id="2852274">,</span>&nbsp;<span class="ident" id="2852276">mhi</span><span class="op" id="2852279">,</span>&nbsp;<span class="ident" id="2852281">b</span><span class="op" id="2852282">,</span>&nbsp;<span class="ident" id="2852284">maxDepth</span><span class="op" id="2852292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852297">b</span>&nbsp;<span class="op" id="2852299">=</span>&nbsp;<span class="ident" id="2852301">mlo</span>&nbsp;<span class="comment" id="2852305">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852346">if</span>&nbsp;<span class="ident" id="2852349">b</span><span class="op" id="2852350">-</span><span class="ident" id="2852351">a</span>&nbsp;<span class="op" id="2852353">&gt;</span>&nbsp;<span class="num" id="2852355">1</span>&nbsp;<span class="op" id="2852357">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852361">insertionSort</span><span class="op" id="2852374">(</span><span class="ident" id="2852375">data</span><span class="op" id="2852379">,</span>&nbsp;<span class="ident" id="2852381">a</span><span class="op" id="2852382">,</span>&nbsp;<span class="ident" id="2852384">b</span><span class="op" id="2852385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852388">}</span><br>
<span class="lineno"></span><span class="op" id="2852390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2852393">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2852413">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2852487">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2852556">func</span>&nbsp;<span class="ident" id="2852561">Sort</span><span class="op" id="2852565">(</span><span class="ident" id="2852566">data</span>&nbsp;<span class="ident" id="2852571">Interface</span><span class="op" id="2852580">)</span>&nbsp;<span class="op" id="2852582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2852585">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852648">n</span>&nbsp;<span class="op" id="2852650">:=</span>&nbsp;<span class="ident" id="2852653">data</span><span class="op" id="2852657">.</span><span class="ident" id="2852658">Len</span><span class="op" id="2852661">(</span><span class="op" id="2852662">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852665">maxDepth</span>&nbsp;<span class="op" id="2852674">:=</span>&nbsp;<span class="num" id="2852677">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2852680">for</span>&nbsp;<span class="ident" id="2852684">i</span>&nbsp;<span class="op" id="2852686">:=</span>&nbsp;<span class="ident" id="2852689">n</span><span class="op" id="2852690">;</span>&nbsp;<span class="ident" id="2852692">i</span>&nbsp;<span class="op" id="2852694">&gt;</span>&nbsp;<span class="num" id="2852696">0</span><span class="op" id="2852697">;</span>&nbsp;<span class="ident" id="2852699">i</span>&nbsp;<span class="op" id="2852701">&gt;&gt;=</span>&nbsp;<span class="num" id="2852705">1</span>&nbsp;<span class="op" id="2852707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852711">maxDepth</span><span class="op" id="2852719">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2852723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852726">maxDepth</span>&nbsp;<span class="op" id="2852735">*=</span>&nbsp;<span class="num" id="2852738">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852741">quickSort</span><span class="op" id="2852750">(</span><span class="ident" id="2852751">data</span><span class="op" id="2852755">,</span>&nbsp;<span class="num" id="2852757">0</span><span class="op" id="2852758">,</span>&nbsp;<span class="ident" id="2852760">n</span><span class="op" id="2852761">,</span>&nbsp;<span class="ident" id="2852763">maxDepth</span><span class="op" id="2852771">)</span><br>
<span class="lineno"></span><span class="op" id="2852773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2852776">type</span>&nbsp;<span class="ident" id="2852781">reverse</span>&nbsp;<span class="keyword" id="2852789">struct</span>&nbsp;<span class="op" id="2852796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2852799">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2852865">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2852903">Interface</span><br>
<span class="lineno"></span><span class="op" id="2852913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2852916">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2852991">func</span>&nbsp;<span class="op" id="2852996">(</span><span class="ident" id="2852997">r</span>&nbsp;<span class="ident" id="2852999">reverse</span><span class="op" id="2853006">)</span>&nbsp;<span class="ident" id="2853008">Less</span><span class="op" id="2853012">(</span><span class="ident" id="2853013">i</span><span class="op" id="2853014">,</span>&nbsp;<span class="ident" id="2853016">j</span>&nbsp;<span class="builtintype" id="2853018">int</span><span class="op" id="2853021">)</span>&nbsp;<span class="builtintype" id="2853023">bool</span>&nbsp;<span class="op" id="2853028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853031">return</span>&nbsp;<span class="ident" id="2853038">r</span><span class="op" id="2853039">.</span><span class="ident" id="2853040">Interface</span><span class="op" id="2853049">.</span><span class="ident" id="2853050">Less</span><span class="op" id="2853054">(</span><span class="ident" id="2853055">j</span><span class="op" id="2853056">,</span>&nbsp;<span class="ident" id="2853058">i</span><span class="op" id="2853059">)</span><br>
<span class="lineno"></span><span class="op" id="2853061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2853064">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2853111">func</span>&nbsp;<span class="ident" id="2853116">Reverse</span><span class="op" id="2853123">(</span><span class="ident" id="2853124">data</span>&nbsp;<span class="ident" id="2853129">Interface</span><span class="op" id="2853138">)</span>&nbsp;<span class="ident" id="2853140">Interface</span>&nbsp;<span class="op" id="2853150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853153">return</span>&nbsp;<span class="op" id="2853160">&amp;</span><span class="ident" id="2853161">reverse</span><span class="op" id="2853168">{</span><span class="ident" id="2853169">data</span><span class="op" id="2853173">}</span><br>
<span class="lineno"></span><span class="op" id="2853175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2853178">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2853222">func</span>&nbsp;<span class="ident" id="2853227">IsSorted</span><span class="op" id="2853235">(</span><span class="ident" id="2853236">data</span>&nbsp;<span class="ident" id="2853241">Interface</span><span class="op" id="2853250">)</span>&nbsp;<span class="builtintype" id="2853252">bool</span>&nbsp;<span class="op" id="2853257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2853260">n</span>&nbsp;<span class="op" id="2853262">:=</span>&nbsp;<span class="ident" id="2853265">data</span><span class="op" id="2853269">.</span><span class="ident" id="2853270">Len</span><span class="op" id="2853273">(</span><span class="op" id="2853274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853277">for</span>&nbsp;<span class="ident" id="2853281">i</span>&nbsp;<span class="op" id="2853283">:=</span>&nbsp;<span class="ident" id="2853286">n</span>&nbsp;<span class="op" id="2853288">-</span>&nbsp;<span class="num" id="2853290">1</span><span class="op" id="2853291">;</span>&nbsp;<span class="ident" id="2853293">i</span>&nbsp;<span class="op" id="2853295">&gt;</span>&nbsp;<span class="num" id="2853297">0</span><span class="op" id="2853298">;</span>&nbsp;<span class="ident" id="2853300">i</span><span class="op" id="2853301">--</span>&nbsp;<span class="op" id="2853304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853308">if</span>&nbsp;<span class="ident" id="2853311">data</span><span class="op" id="2853315">.</span><span class="ident" id="2853316">Less</span><span class="op" id="2853320">(</span><span class="ident" id="2853321">i</span><span class="op" id="2853322">,</span>&nbsp;<span class="ident" id="2853324">i</span><span class="op" id="2853325">-</span><span class="num" id="2853326">1</span><span class="op" id="2853327">)</span>&nbsp;<span class="op" id="2853329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853334">return</span>&nbsp;<span class="builtintype" id="2853341">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2853349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2853352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2853355">return</span>&nbsp;<span class="builtintype" id="2853362">true</span><br>
<span class="lineno"></span><span class="op" id="2853367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2853370">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2853409">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2853494">type</span>&nbsp;<span class="ident" id="2853499">IntSlice</span>&nbsp;<span class="op" id="2853508">[</span><span class="op" id="2853509">]</span><span class="builtintype" id="2853510">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2853515">func</span>&nbsp;<span class="op" id="2853520">(</span><span class="ident" id="2853521">p</span>&nbsp;<span class="ident" id="2853523">IntSlice</span><span class="op" id="2853531">)</span>&nbsp;<span class="ident" id="2853533">Len</span><span class="op" id="2853536">(</span><span class="op" id="2853537">)</span>&nbsp;<span class="builtintype" id="2853539">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2853553">{</span>&nbsp;<span class="keyword" id="2853555">return</span>&nbsp;<span class="builtinfunc" id="2853562">len</span><span class="op" id="2853565">(</span><span class="ident" id="2853566">p</span><span class="op" id="2853567">)</span>&nbsp;<span class="op" id="2853569">}</span><br>
<span class="lineno"></span><span class="keyword" id="2853571">func</span>&nbsp;<span class="op" id="2853576">(</span><span class="ident" id="2853577">p</span>&nbsp;<span class="ident" id="2853579">IntSlice</span><span class="op" id="2853587">)</span>&nbsp;<span class="ident" id="2853589">Less</span><span class="op" id="2853593">(</span><span class="ident" id="2853594">i</span><span class="op" id="2853595">,</span>&nbsp;<span class="ident" id="2853597">j</span>&nbsp;<span class="builtintype" id="2853599">int</span><span class="op" id="2853602">)</span>&nbsp;<span class="builtintype" id="2853604">bool</span>&nbsp;<span class="op" id="2853609">{</span>&nbsp;<span class="keyword" id="2853611">return</span>&nbsp;<span class="ident" id="2853618">p</span><span class="op" id="2853619">[</span><span class="ident" id="2853620">i</span><span class="op" id="2853621">]</span>&nbsp;<span class="op" id="2853623">&lt;</span>&nbsp;<span class="ident" id="2853625">p</span><span class="op" id="2853626">[</span><span class="ident" id="2853627">j</span><span class="op" id="2853628">]</span>&nbsp;<span class="op" id="2853630">}</span><br>
<span class="lineno"></span><span class="keyword" id="2853632">func</span>&nbsp;<span class="op" id="2853637">(</span><span class="ident" id="2853638">p</span>&nbsp;<span class="ident" id="2853640">IntSlice</span><span class="op" id="2853648">)</span>&nbsp;<span class="ident" id="2853650">Swap</span><span class="op" id="2853654">(</span><span class="ident" id="2853655">i</span><span class="op" id="2853656">,</span>&nbsp;<span class="ident" id="2853658">j</span>&nbsp;<span class="builtintype" id="2853660">int</span><span class="op" id="2853663">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2853670">{</span>&nbsp;<span class="ident" id="2853672">p</span><span class="op" id="2853673">[</span><span class="ident" id="2853674">i</span><span class="op" id="2853675">]</span><span class="op" id="2853676">,</span>&nbsp;<span class="ident" id="2853678">p</span><span class="op" id="2853679">[</span><span class="ident" id="2853680">j</span><span class="op" id="2853681">]</span>&nbsp;<span class="op" id="2853683">=</span>&nbsp;<span class="ident" id="2853685">p</span><span class="op" id="2853686">[</span><span class="ident" id="2853687">j</span><span class="op" id="2853688">]</span><span class="op" id="2853689">,</span>&nbsp;<span class="ident" id="2853691">p</span><span class="op" id="2853692">[</span><span class="ident" id="2853693">i</span><span class="op" id="2853694">]</span>&nbsp;<span class="op" id="2853696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2853699">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2853732">func</span>&nbsp;<span class="op" id="2853737">(</span><span class="ident" id="2853738">p</span>&nbsp;<span class="ident" id="2853740">IntSlice</span><span class="op" id="2853748">)</span>&nbsp;<span class="ident" id="2853750">Sort</span><span class="op" id="2853754">(</span><span class="op" id="2853755">)</span>&nbsp;<span class="op" id="2853757">{</span>&nbsp;<span class="ident" id="2853759">Sort</span><span class="op" id="2853763">(</span><span class="ident" id="2853764">p</span><span class="op" id="2853765">)</span>&nbsp;<span class="op" id="2853767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2853770">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2853863">type</span>&nbsp;<span class="ident" id="2853868">Float64Slice</span>&nbsp;<span class="op" id="2853881">[</span><span class="op" id="2853882">]</span><span class="builtintype" id="2853883">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2853892">func</span>&nbsp;<span class="op" id="2853897">(</span><span class="ident" id="2853898">p</span>&nbsp;<span class="ident" id="2853900">Float64Slice</span><span class="op" id="2853912">)</span>&nbsp;<span class="ident" id="2853914">Len</span><span class="op" id="2853917">(</span><span class="op" id="2853918">)</span>&nbsp;<span class="builtintype" id="2853920">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2853934">{</span>&nbsp;<span class="keyword" id="2853936">return</span>&nbsp;<span class="builtinfunc" id="2853943">len</span><span class="op" id="2853946">(</span><span class="ident" id="2853947">p</span><span class="op" id="2853948">)</span>&nbsp;<span class="op" id="2853950">}</span><br>
<span class="lineno"></span><span class="keyword" id="2853952">func</span>&nbsp;<span class="op" id="2853957">(</span><span class="ident" id="2853958">p</span>&nbsp;<span class="ident" id="2853960">Float64Slice</span><span class="op" id="2853972">)</span>&nbsp;<span class="ident" id="2853974">Less</span><span class="op" id="2853978">(</span><span class="ident" id="2853979">i</span><span class="op" id="2853980">,</span>&nbsp;<span class="ident" id="2853982">j</span>&nbsp;<span class="builtintype" id="2853984">int</span><span class="op" id="2853987">)</span>&nbsp;<span class="builtintype" id="2853989">bool</span>&nbsp;<span class="op" id="2853994">{</span>&nbsp;<span class="keyword" id="2853996">return</span>&nbsp;<span class="ident" id="2854003">p</span><span class="op" id="2854004">[</span><span class="ident" id="2854005">i</span><span class="op" id="2854006">]</span>&nbsp;<span class="op" id="2854008">&lt;</span>&nbsp;<span class="ident" id="2854010">p</span><span class="op" id="2854011">[</span><span class="ident" id="2854012">j</span><span class="op" id="2854013">]</span>&nbsp;<span class="op" id="2854015">||</span>&nbsp;<span class="ident" id="2854018">isNaN</span><span class="op" id="2854023">(</span><span class="ident" id="2854024">p</span><span class="op" id="2854025">[</span><span class="ident" id="2854026">i</span><span class="op" id="2854027">]</span><span class="op" id="2854028">)</span>&nbsp;<span class="op" id="2854030">&amp;&amp;</span>&nbsp;<span class="op" id="2854033">!</span><span class="ident" id="2854034">isNaN</span><span class="op" id="2854039">(</span><span class="ident" id="2854040">p</span><span class="op" id="2854041">[</span><span class="ident" id="2854042">j</span><span class="op" id="2854043">]</span><span class="op" id="2854044">)</span>&nbsp;<span class="op" id="2854046">}</span><br>
<span class="lineno"></span><span class="keyword" id="2854048">func</span>&nbsp;<span class="op" id="2854053">(</span><span class="ident" id="2854054">p</span>&nbsp;<span class="ident" id="2854056">Float64Slice</span><span class="op" id="2854068">)</span>&nbsp;<span class="ident" id="2854070">Swap</span><span class="op" id="2854074">(</span><span class="ident" id="2854075">i</span><span class="op" id="2854076">,</span>&nbsp;<span class="ident" id="2854078">j</span>&nbsp;<span class="builtintype" id="2854080">int</span><span class="op" id="2854083">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854090">{</span>&nbsp;<span class="ident" id="2854092">p</span><span class="op" id="2854093">[</span><span class="ident" id="2854094">i</span><span class="op" id="2854095">]</span><span class="op" id="2854096">,</span>&nbsp;<span class="ident" id="2854098">p</span><span class="op" id="2854099">[</span><span class="ident" id="2854100">j</span><span class="op" id="2854101">]</span>&nbsp;<span class="op" id="2854103">=</span>&nbsp;<span class="ident" id="2854105">p</span><span class="op" id="2854106">[</span><span class="ident" id="2854107">j</span><span class="op" id="2854108">]</span><span class="op" id="2854109">,</span>&nbsp;<span class="ident" id="2854111">p</span><span class="op" id="2854112">[</span><span class="ident" id="2854113">i</span><span class="op" id="2854114">]</span>&nbsp;<span class="op" id="2854116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854119">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2854195">func</span>&nbsp;<span class="ident" id="2854200">isNaN</span><span class="op" id="2854205">(</span><span class="ident" id="2854206">f</span>&nbsp;<span class="builtintype" id="2854208">float64</span><span class="op" id="2854215">)</span>&nbsp;<span class="builtintype" id="2854217">bool</span>&nbsp;<span class="op" id="2854222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2854225">return</span>&nbsp;<span class="ident" id="2854232">f</span>&nbsp;<span class="op" id="2854234">!=</span>&nbsp;<span class="ident" id="2854237">f</span><br>
<span class="lineno"></span><span class="op" id="2854239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854242">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2854275">func</span>&nbsp;<span class="op" id="2854280">(</span><span class="ident" id="2854281">p</span>&nbsp;<span class="ident" id="2854283">Float64Slice</span><span class="op" id="2854295">)</span>&nbsp;<span class="ident" id="2854297">Sort</span><span class="op" id="2854301">(</span><span class="op" id="2854302">)</span>&nbsp;<span class="op" id="2854304">{</span>&nbsp;<span class="ident" id="2854306">Sort</span><span class="op" id="2854310">(</span><span class="ident" id="2854311">p</span><span class="op" id="2854312">)</span>&nbsp;<span class="op" id="2854314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854317">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2854408">type</span>&nbsp;<span class="ident" id="2854413">StringSlice</span>&nbsp;<span class="op" id="2854425">[</span><span class="op" id="2854426">]</span><span class="builtintype" id="2854427">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2854435">func</span>&nbsp;<span class="op" id="2854440">(</span><span class="ident" id="2854441">p</span>&nbsp;<span class="ident" id="2854443">StringSlice</span><span class="op" id="2854454">)</span>&nbsp;<span class="ident" id="2854456">Len</span><span class="op" id="2854459">(</span><span class="op" id="2854460">)</span>&nbsp;<span class="builtintype" id="2854462">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854476">{</span>&nbsp;<span class="keyword" id="2854478">return</span>&nbsp;<span class="builtinfunc" id="2854485">len</span><span class="op" id="2854488">(</span><span class="ident" id="2854489">p</span><span class="op" id="2854490">)</span>&nbsp;<span class="op" id="2854492">}</span><br>
<span class="lineno"></span><span class="keyword" id="2854494">func</span>&nbsp;<span class="op" id="2854499">(</span><span class="ident" id="2854500">p</span>&nbsp;<span class="ident" id="2854502">StringSlice</span><span class="op" id="2854513">)</span>&nbsp;<span class="ident" id="2854515">Less</span><span class="op" id="2854519">(</span><span class="ident" id="2854520">i</span><span class="op" id="2854521">,</span>&nbsp;<span class="ident" id="2854523">j</span>&nbsp;<span class="builtintype" id="2854525">int</span><span class="op" id="2854528">)</span>&nbsp;<span class="builtintype" id="2854530">bool</span>&nbsp;<span class="op" id="2854535">{</span>&nbsp;<span class="keyword" id="2854537">return</span>&nbsp;<span class="ident" id="2854544">p</span><span class="op" id="2854545">[</span><span class="ident" id="2854546">i</span><span class="op" id="2854547">]</span>&nbsp;<span class="op" id="2854549">&lt;</span>&nbsp;<span class="ident" id="2854551">p</span><span class="op" id="2854552">[</span><span class="ident" id="2854553">j</span><span class="op" id="2854554">]</span>&nbsp;<span class="op" id="2854556">}</span><br>
<span class="lineno"></span><span class="keyword" id="2854558">func</span>&nbsp;<span class="op" id="2854563">(</span><span class="ident" id="2854564">p</span>&nbsp;<span class="ident" id="2854566">StringSlice</span><span class="op" id="2854577">)</span>&nbsp;<span class="ident" id="2854579">Swap</span><span class="op" id="2854583">(</span><span class="ident" id="2854584">i</span><span class="op" id="2854585">,</span>&nbsp;<span class="ident" id="2854587">j</span>&nbsp;<span class="builtintype" id="2854589">int</span><span class="op" id="2854592">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854599">{</span>&nbsp;<span class="ident" id="2854601">p</span><span class="op" id="2854602">[</span><span class="ident" id="2854603">i</span><span class="op" id="2854604">]</span><span class="op" id="2854605">,</span>&nbsp;<span class="ident" id="2854607">p</span><span class="op" id="2854608">[</span><span class="ident" id="2854609">j</span><span class="op" id="2854610">]</span>&nbsp;<span class="op" id="2854612">=</span>&nbsp;<span class="ident" id="2854614">p</span><span class="op" id="2854615">[</span><span class="ident" id="2854616">j</span><span class="op" id="2854617">]</span><span class="op" id="2854618">,</span>&nbsp;<span class="ident" id="2854620">p</span><span class="op" id="2854621">[</span><span class="ident" id="2854622">i</span><span class="op" id="2854623">]</span>&nbsp;<span class="op" id="2854625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854628">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2854661">func</span>&nbsp;<span class="op" id="2854666">(</span><span class="ident" id="2854667">p</span>&nbsp;<span class="ident" id="2854669">StringSlice</span><span class="op" id="2854680">)</span>&nbsp;<span class="ident" id="2854682">Sort</span><span class="op" id="2854686">(</span><span class="op" id="2854687">)</span>&nbsp;<span class="op" id="2854689">{</span>&nbsp;<span class="ident" id="2854691">Sort</span><span class="op" id="2854695">(</span><span class="ident" id="2854696">p</span><span class="op" id="2854697">)</span>&nbsp;<span class="op" id="2854699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854702">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854744">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2854795">func</span>&nbsp;<span class="ident" id="2854800">Ints</span><span class="op" id="2854804">(</span><span class="ident" id="2854805">a</span>&nbsp;<span class="op" id="2854807">[</span><span class="op" id="2854808">]</span><span class="builtintype" id="2854809">int</span><span class="op" id="2854812">)</span>&nbsp;<span class="op" id="2854814">{</span>&nbsp;<span class="ident" id="2854816">Sort</span><span class="op" id="2854820">(</span><span class="ident" id="2854821">IntSlice</span><span class="op" id="2854829">(</span><span class="ident" id="2854830">a</span><span class="op" id="2854831">)</span><span class="op" id="2854832">)</span>&nbsp;<span class="op" id="2854834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854837">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2854896">func</span>&nbsp;<span class="ident" id="2854901">Float64s</span><span class="op" id="2854909">(</span><span class="ident" id="2854910">a</span>&nbsp;<span class="op" id="2854912">[</span><span class="op" id="2854913">]</span><span class="builtintype" id="2854914">float64</span><span class="op" id="2854921">)</span>&nbsp;<span class="op" id="2854923">{</span>&nbsp;<span class="ident" id="2854925">Sort</span><span class="op" id="2854929">(</span><span class="ident" id="2854930">Float64Slice</span><span class="op" id="2854942">(</span><span class="ident" id="2854943">a</span><span class="op" id="2854944">)</span><span class="op" id="2854945">)</span>&nbsp;<span class="op" id="2854947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2854950">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2855007">func</span>&nbsp;<span class="ident" id="2855012">Strings</span><span class="op" id="2855019">(</span><span class="ident" id="2855020">a</span>&nbsp;<span class="op" id="2855022">[</span><span class="op" id="2855023">]</span><span class="builtintype" id="2855024">string</span><span class="op" id="2855030">)</span>&nbsp;<span class="op" id="2855032">{</span>&nbsp;<span class="ident" id="2855034">Sort</span><span class="op" id="2855038">(</span><span class="ident" id="2855039">StringSlice</span><span class="op" id="2855050">(</span><span class="ident" id="2855051">a</span><span class="op" id="2855052">)</span><span class="op" id="2855053">)</span>&nbsp;<span class="op" id="2855055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2855058">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2855136">func</span>&nbsp;<span class="ident" id="2855141">IntsAreSorted</span><span class="op" id="2855154">(</span><span class="ident" id="2855155">a</span>&nbsp;<span class="op" id="2855157">[</span><span class="op" id="2855158">]</span><span class="builtintype" id="2855159">int</span><span class="op" id="2855162">)</span>&nbsp;<span class="builtintype" id="2855164">bool</span>&nbsp;<span class="op" id="2855169">{</span>&nbsp;<span class="keyword" id="2855171">return</span>&nbsp;<span class="ident" id="2855178">IsSorted</span><span class="op" id="2855186">(</span><span class="ident" id="2855187">IntSlice</span><span class="op" id="2855195">(</span><span class="ident" id="2855196">a</span><span class="op" id="2855197">)</span><span class="op" id="2855198">)</span>&nbsp;<span class="op" id="2855200">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2855203">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2855289">func</span>&nbsp;<span class="ident" id="2855294">Float64sAreSorted</span><span class="op" id="2855311">(</span><span class="ident" id="2855312">a</span>&nbsp;<span class="op" id="2855314">[</span><span class="op" id="2855315">]</span><span class="builtintype" id="2855316">float64</span><span class="op" id="2855323">)</span>&nbsp;<span class="builtintype" id="2855325">bool</span>&nbsp;<span class="op" id="2855330">{</span>&nbsp;<span class="keyword" id="2855332">return</span>&nbsp;<span class="ident" id="2855339">IsSorted</span><span class="op" id="2855347">(</span><span class="ident" id="2855348">Float64Slice</span><span class="op" id="2855360">(</span><span class="ident" id="2855361">a</span><span class="op" id="2855362">)</span><span class="op" id="2855363">)</span>&nbsp;<span class="op" id="2855365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2855368">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2855452">func</span>&nbsp;<span class="ident" id="2855457">StringsAreSorted</span><span class="op" id="2855473">(</span><span class="ident" id="2855474">a</span>&nbsp;<span class="op" id="2855476">[</span><span class="op" id="2855477">]</span><span class="builtintype" id="2855478">string</span><span class="op" id="2855484">)</span>&nbsp;<span class="builtintype" id="2855486">bool</span>&nbsp;<span class="op" id="2855491">{</span>&nbsp;<span class="keyword" id="2855493">return</span>&nbsp;<span class="ident" id="2855500">IsSorted</span><span class="op" id="2855508">(</span><span class="ident" id="2855509">StringSlice</span><span class="op" id="2855520">(</span><span class="ident" id="2855521">a</span><span class="op" id="2855522">)</span><span class="op" id="2855523">)</span>&nbsp;<span class="op" id="2855525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2855528">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2855556">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2855632">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2855707">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2855770">//</span><br>
<span class="lineno"></span><span class="comment" id="2855773">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2855815">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2855887">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2855905">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2855959">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2856036">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2856108">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2856180">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2856235">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2856308">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2856359">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2856435">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2856509">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2856575">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2856652">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2856731">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2856809">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2856883">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2856931">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2857005">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2857054">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2857127">//</span><br>
<span class="lineno">315</span><span class="comment" id="2857130">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2857200">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2857256">func</span>&nbsp;<span class="ident" id="2857261">Stable</span><span class="op" id="2857267">(</span><span class="ident" id="2857268">data</span>&nbsp;<span class="ident" id="2857273">Interface</span><span class="op" id="2857282">)</span>&nbsp;<span class="op" id="2857284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857287">n</span>&nbsp;<span class="op" id="2857289">:=</span>&nbsp;<span class="ident" id="2857292">data</span><span class="op" id="2857296">.</span><span class="ident" id="2857297">Len</span><span class="op" id="2857300">(</span><span class="op" id="2857301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857304">blockSize</span>&nbsp;<span class="op" id="2857314">:=</span>&nbsp;<span class="num" id="2857317">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857321">a</span><span class="op" id="2857322">,</span>&nbsp;<span class="ident" id="2857324">b</span>&nbsp;<span class="op" id="2857326">:=</span>&nbsp;<span class="num" id="2857329">0</span><span class="op" id="2857330">,</span>&nbsp;<span class="ident" id="2857332">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857343">for</span>&nbsp;<span class="ident" id="2857347">b</span>&nbsp;<span class="op" id="2857349">&lt;=</span>&nbsp;<span class="ident" id="2857352">n</span>&nbsp;<span class="op" id="2857354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857358">insertionSort</span><span class="op" id="2857371">(</span><span class="ident" id="2857372">data</span><span class="op" id="2857376">,</span>&nbsp;<span class="ident" id="2857378">a</span><span class="op" id="2857379">,</span>&nbsp;<span class="ident" id="2857381">b</span><span class="op" id="2857382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857386">a</span>&nbsp;<span class="op" id="2857388">=</span>&nbsp;<span class="ident" id="2857390">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857394">b</span>&nbsp;<span class="op" id="2857396">+=</span>&nbsp;<span class="ident" id="2857399">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857413">insertionSort</span><span class="op" id="2857426">(</span><span class="ident" id="2857427">data</span><span class="op" id="2857431">,</span>&nbsp;<span class="ident" id="2857433">a</span><span class="op" id="2857434">,</span>&nbsp;<span class="ident" id="2857436">n</span><span class="op" id="2857437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857441">for</span>&nbsp;<span class="ident" id="2857445">blockSize</span>&nbsp;<span class="op" id="2857455">&lt;</span>&nbsp;<span class="ident" id="2857457">n</span>&nbsp;<span class="op" id="2857459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857463">a</span><span class="op" id="2857464">,</span>&nbsp;<span class="ident" id="2857466">b</span>&nbsp;<span class="op" id="2857468">=</span>&nbsp;<span class="num" id="2857470">0</span><span class="op" id="2857471">,</span>&nbsp;<span class="num" id="2857473">2</span><span class="op" id="2857474">*</span><span class="ident" id="2857475">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2857487">for</span>&nbsp;<span class="ident" id="2857491">b</span>&nbsp;<span class="op" id="2857493">&lt;=</span>&nbsp;<span class="ident" id="2857496">n</span>&nbsp;<span class="op" id="2857498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857503">symMerge</span><span class="op" id="2857511">(</span><span class="ident" id="2857512">data</span><span class="op" id="2857516">,</span>&nbsp;<span class="ident" id="2857518">a</span><span class="op" id="2857519">,</span>&nbsp;<span class="ident" id="2857521">a</span><span class="op" id="2857522">+</span><span class="ident" id="2857523">blockSize</span><span class="op" id="2857532">,</span>&nbsp;<span class="ident" id="2857534">b</span><span class="op" id="2857535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857540">a</span>&nbsp;<span class="op" id="2857542">=</span>&nbsp;<span class="ident" id="2857544">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857549">b</span>&nbsp;<span class="op" id="2857551">+=</span>&nbsp;<span class="num" id="2857554">2</span>&nbsp;<span class="op" id="2857556">*</span>&nbsp;<span class="ident" id="2857558">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857570">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857574">symMerge</span><span class="op" id="2857582">(</span><span class="ident" id="2857583">data</span><span class="op" id="2857587">,</span>&nbsp;<span class="ident" id="2857589">a</span><span class="op" id="2857590">,</span>&nbsp;<span class="ident" id="2857592">a</span><span class="op" id="2857593">+</span><span class="ident" id="2857594">blockSize</span><span class="op" id="2857603">,</span>&nbsp;<span class="ident" id="2857605">n</span><span class="op" id="2857606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2857610">blockSize</span>&nbsp;<span class="op" id="2857620">*=</span>&nbsp;<span class="num" id="2857623">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2857626">}</span><br>
<span class="lineno"></span><span class="op" id="2857628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2857631">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2857708">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2857785">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2857860">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2857935">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2857987">//</span><br>
<span class="lineno"></span><span class="comment" id="2857990">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2858031">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2858082">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2858143">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2858202">//</span><br>
<span class="lineno"></span><span class="comment" id="2858205">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2858280">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2858360">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2858437">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2858480">func</span>&nbsp;<span class="ident" id="2858485">symMerge</span><span class="op" id="2858493">(</span><span class="ident" id="2858494">data</span>&nbsp;<span class="ident" id="2858499">Interface</span><span class="op" id="2858508">,</span>&nbsp;<span class="ident" id="2858510">a</span><span class="op" id="2858511">,</span>&nbsp;<span class="ident" id="2858513">m</span><span class="op" id="2858514">,</span>&nbsp;<span class="ident" id="2858516">b</span>&nbsp;<span class="builtintype" id="2858518">int</span><span class="op" id="2858521">)</span>&nbsp;<span class="op" id="2858523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858526">if</span>&nbsp;<span class="ident" id="2858529">a</span>&nbsp;<span class="op" id="2858531">&gt;=</span>&nbsp;<span class="ident" id="2858534">m</span>&nbsp;<span class="op" id="2858536">||</span>&nbsp;<span class="ident" id="2858539">m</span>&nbsp;<span class="op" id="2858541">&gt;=</span>&nbsp;<span class="ident" id="2858544">b</span>&nbsp;<span class="op" id="2858546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858550">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858562">mid</span>&nbsp;<span class="op" id="2858566">:=</span>&nbsp;<span class="ident" id="2858569">a</span>&nbsp;<span class="op" id="2858571">+</span>&nbsp;<span class="op" id="2858573">(</span><span class="ident" id="2858574">b</span><span class="op" id="2858575">-</span><span class="ident" id="2858576">a</span><span class="op" id="2858577">)</span><span class="op" id="2858578">/</span><span class="num" id="2858579">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858582">n</span>&nbsp;<span class="op" id="2858584">:=</span>&nbsp;<span class="ident" id="2858587">mid</span>&nbsp;<span class="op" id="2858591">+</span>&nbsp;<span class="ident" id="2858593">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858596">start</span>&nbsp;<span class="op" id="2858602">:=</span>&nbsp;<span class="num" id="2858605">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858608">if</span>&nbsp;<span class="ident" id="2858611">m</span>&nbsp;<span class="op" id="2858613">&gt;</span>&nbsp;<span class="ident" id="2858615">mid</span>&nbsp;<span class="op" id="2858619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858623">start</span>&nbsp;<span class="op" id="2858629">=</span>&nbsp;<span class="ident" id="2858631">n</span>&nbsp;<span class="op" id="2858633">-</span>&nbsp;<span class="ident" id="2858635">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858639">r</span><span class="op" id="2858640">,</span>&nbsp;<span class="ident" id="2858642">p</span>&nbsp;<span class="op" id="2858644">:=</span>&nbsp;<span class="ident" id="2858647">mid</span><span class="op" id="2858650">,</span>&nbsp;<span class="ident" id="2858652">n</span><span class="op" id="2858653">-</span><span class="num" id="2858654">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858658">for</span>&nbsp;<span class="ident" id="2858662">start</span>&nbsp;<span class="op" id="2858668">&lt;</span>&nbsp;<span class="ident" id="2858670">r</span>&nbsp;<span class="op" id="2858672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858677">c</span>&nbsp;<span class="op" id="2858679">:=</span>&nbsp;<span class="ident" id="2858682">start</span>&nbsp;<span class="op" id="2858688">+</span>&nbsp;<span class="op" id="2858690">(</span><span class="ident" id="2858691">r</span><span class="op" id="2858692">-</span><span class="ident" id="2858693">start</span><span class="op" id="2858698">)</span><span class="op" id="2858699">/</span><span class="num" id="2858700">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858705">if</span>&nbsp;<span class="op" id="2858708">!</span><span class="ident" id="2858709">data</span><span class="op" id="2858713">.</span><span class="ident" id="2858714">Less</span><span class="op" id="2858718">(</span><span class="ident" id="2858719">p</span><span class="op" id="2858720">-</span><span class="ident" id="2858721">c</span><span class="op" id="2858722">,</span>&nbsp;<span class="ident" id="2858724">c</span><span class="op" id="2858725">)</span>&nbsp;<span class="op" id="2858727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858733">start</span>&nbsp;<span class="op" id="2858739">=</span>&nbsp;<span class="ident" id="2858741">c</span>&nbsp;<span class="op" id="2858743">+</span>&nbsp;<span class="num" id="2858745">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858750">}</span>&nbsp;<span class="keyword" id="2858752">else</span>&nbsp;<span class="op" id="2858757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858763">r</span>&nbsp;<span class="op" id="2858765">=</span>&nbsp;<span class="ident" id="2858767">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858779">}</span>&nbsp;<span class="keyword" id="2858781">else</span>&nbsp;<span class="op" id="2858786">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858790">start</span>&nbsp;<span class="op" id="2858796">=</span>&nbsp;<span class="ident" id="2858798">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858802">r</span><span class="op" id="2858803">,</span>&nbsp;<span class="ident" id="2858805">p</span>&nbsp;<span class="op" id="2858807">:=</span>&nbsp;<span class="ident" id="2858810">m</span><span class="op" id="2858811">,</span>&nbsp;<span class="ident" id="2858813">n</span><span class="op" id="2858814">-</span><span class="num" id="2858815">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858819">for</span>&nbsp;<span class="ident" id="2858823">start</span>&nbsp;<span class="op" id="2858829">&lt;</span>&nbsp;<span class="ident" id="2858831">r</span>&nbsp;<span class="op" id="2858833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858838">c</span>&nbsp;<span class="op" id="2858840">:=</span>&nbsp;<span class="ident" id="2858843">start</span>&nbsp;<span class="op" id="2858849">+</span>&nbsp;<span class="op" id="2858851">(</span><span class="ident" id="2858852">r</span><span class="op" id="2858853">-</span><span class="ident" id="2858854">start</span><span class="op" id="2858859">)</span><span class="op" id="2858860">/</span><span class="num" id="2858861">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2858866">if</span>&nbsp;<span class="op" id="2858869">!</span><span class="ident" id="2858870">data</span><span class="op" id="2858874">.</span><span class="ident" id="2858875">Less</span><span class="op" id="2858879">(</span><span class="ident" id="2858880">p</span><span class="op" id="2858881">-</span><span class="ident" id="2858882">c</span><span class="op" id="2858883">,</span>&nbsp;<span class="ident" id="2858885">c</span><span class="op" id="2858886">)</span>&nbsp;<span class="op" id="2858888">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858894">start</span>&nbsp;<span class="op" id="2858900">=</span>&nbsp;<span class="ident" id="2858902">c</span>&nbsp;<span class="op" id="2858904">+</span>&nbsp;<span class="num" id="2858906">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858911">}</span>&nbsp;<span class="keyword" id="2858913">else</span>&nbsp;<span class="op" id="2858918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858924">r</span>&nbsp;<span class="op" id="2858926">=</span>&nbsp;<span class="ident" id="2858928">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858937">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2858940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858943">end</span>&nbsp;<span class="op" id="2858947">:=</span>&nbsp;<span class="ident" id="2858950">n</span>&nbsp;<span class="op" id="2858952">-</span>&nbsp;<span class="ident" id="2858954">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858961">rotate</span><span class="op" id="2858967">(</span><span class="ident" id="2858968">data</span><span class="op" id="2858972">,</span>&nbsp;<span class="ident" id="2858974">start</span><span class="op" id="2858979">,</span>&nbsp;<span class="ident" id="2858981">m</span><span class="op" id="2858982">,</span>&nbsp;<span class="ident" id="2858984">end</span><span class="op" id="2858987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2858990">symMerge</span><span class="op" id="2858998">(</span><span class="ident" id="2858999">data</span><span class="op" id="2859003">,</span>&nbsp;<span class="ident" id="2859005">a</span><span class="op" id="2859006">,</span>&nbsp;<span class="ident" id="2859008">start</span><span class="op" id="2859013">,</span>&nbsp;<span class="ident" id="2859015">mid</span><span class="op" id="2859018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859021">symMerge</span><span class="op" id="2859029">(</span><span class="ident" id="2859030">data</span><span class="op" id="2859034">,</span>&nbsp;<span class="ident" id="2859036">mid</span><span class="op" id="2859039">,</span>&nbsp;<span class="ident" id="2859041">end</span><span class="op" id="2859044">,</span>&nbsp;<span class="ident" id="2859046">b</span><span class="op" id="2859047">)</span><br>
<span class="lineno">390</span><span class="op" id="2859049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2859052">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2859127">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2859182">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2859238">func</span>&nbsp;<span class="ident" id="2859243">rotate</span><span class="op" id="2859249">(</span><span class="ident" id="2859250">data</span>&nbsp;<span class="ident" id="2859255">Interface</span><span class="op" id="2859264">,</span>&nbsp;<span class="ident" id="2859266">a</span><span class="op" id="2859267">,</span>&nbsp;<span class="ident" id="2859269">m</span><span class="op" id="2859270">,</span>&nbsp;<span class="ident" id="2859272">b</span>&nbsp;<span class="builtintype" id="2859274">int</span><span class="op" id="2859277">)</span>&nbsp;<span class="op" id="2859279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859282">i</span>&nbsp;<span class="op" id="2859284">:=</span>&nbsp;<span class="ident" id="2859287">m</span>&nbsp;<span class="op" id="2859289">-</span>&nbsp;<span class="ident" id="2859291">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859294">if</span>&nbsp;<span class="ident" id="2859297">i</span>&nbsp;<span class="op" id="2859299">==</span>&nbsp;<span class="num" id="2859302">0</span>&nbsp;<span class="op" id="2859304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859308">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859316">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859319">j</span>&nbsp;<span class="op" id="2859321">:=</span>&nbsp;<span class="ident" id="2859324">b</span>&nbsp;<span class="op" id="2859326">-</span>&nbsp;<span class="ident" id="2859328">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859331">if</span>&nbsp;<span class="ident" id="2859334">j</span>&nbsp;<span class="op" id="2859336">==</span>&nbsp;<span class="num" id="2859339">0</span>&nbsp;<span class="op" id="2859341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859345">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859357">if</span>&nbsp;<span class="ident" id="2859360">i</span>&nbsp;<span class="op" id="2859362">==</span>&nbsp;<span class="ident" id="2859365">j</span>&nbsp;<span class="op" id="2859367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859371">swapRange</span><span class="op" id="2859380">(</span><span class="ident" id="2859381">data</span><span class="op" id="2859385">,</span>&nbsp;<span class="ident" id="2859387">a</span><span class="op" id="2859388">,</span>&nbsp;<span class="ident" id="2859390">m</span><span class="op" id="2859391">,</span>&nbsp;<span class="ident" id="2859393">i</span><span class="op" id="2859394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859398">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859410">p</span>&nbsp;<span class="op" id="2859412">:=</span>&nbsp;<span class="ident" id="2859415">a</span>&nbsp;<span class="op" id="2859417">+</span>&nbsp;<span class="ident" id="2859419">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859422">for</span>&nbsp;<span class="ident" id="2859426">i</span>&nbsp;<span class="op" id="2859428">!=</span>&nbsp;<span class="ident" id="2859431">j</span>&nbsp;<span class="op" id="2859433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2859437">if</span>&nbsp;<span class="ident" id="2859440">i</span>&nbsp;<span class="op" id="2859442">&gt;</span>&nbsp;<span class="ident" id="2859444">j</span>&nbsp;<span class="op" id="2859446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859451">swapRange</span><span class="op" id="2859460">(</span><span class="ident" id="2859461">data</span><span class="op" id="2859465">,</span>&nbsp;<span class="ident" id="2859467">p</span><span class="op" id="2859468">-</span><span class="ident" id="2859469">i</span><span class="op" id="2859470">,</span>&nbsp;<span class="ident" id="2859472">p</span><span class="op" id="2859473">,</span>&nbsp;<span class="ident" id="2859475">j</span><span class="op" id="2859476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859481">i</span>&nbsp;<span class="op" id="2859483">-=</span>&nbsp;<span class="ident" id="2859486">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859490">}</span>&nbsp;<span class="keyword" id="2859492">else</span>&nbsp;<span class="op" id="2859497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859502">swapRange</span><span class="op" id="2859511">(</span><span class="ident" id="2859512">data</span><span class="op" id="2859516">,</span>&nbsp;<span class="ident" id="2859518">p</span><span class="op" id="2859519">-</span><span class="ident" id="2859520">i</span><span class="op" id="2859521">,</span>&nbsp;<span class="ident" id="2859523">p</span><span class="op" id="2859524">+</span><span class="ident" id="2859525">j</span><span class="op" id="2859526">-</span><span class="ident" id="2859527">i</span><span class="op" id="2859528">,</span>&nbsp;<span class="ident" id="2859530">i</span><span class="op" id="2859531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859536">j</span>&nbsp;<span class="op" id="2859538">-=</span>&nbsp;<span class="ident" id="2859541">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2859548">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2859551">swapRange</span><span class="op" id="2859560">(</span><span class="ident" id="2859561">data</span><span class="op" id="2859565">,</span>&nbsp;<span class="ident" id="2859567">p</span><span class="op" id="2859568">-</span><span class="ident" id="2859569">i</span><span class="op" id="2859570">,</span>&nbsp;<span class="ident" id="2859572">p</span><span class="op" id="2859573">,</span>&nbsp;<span class="ident" id="2859575">i</span><span class="op" id="2859576">)</span><br>
<span class="lineno"></span><span class="op" id="2859578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2859581">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
