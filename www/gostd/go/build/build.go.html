<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html" class="current">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4912008">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4912064">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4912118">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4912169">package</span>&nbsp;<span class="ident" id="4912177">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4912184">import</span>&nbsp;<span class="op" id="4912191">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912194">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912203">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912213">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912220">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912230">&#34;go/doc&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912240">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912253">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912265">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912271">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912284">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912291">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912297">pathpkg</span>&nbsp;<span class="string" id="4912305">&#34;path&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912313">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912330">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912341">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912349">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912360">&#34;strings&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912371">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4912382">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4912397">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4912400">//&nbsp;A&nbsp;Context&nbsp;specifies&nbsp;the&nbsp;supporting&nbsp;context&nbsp;for&nbsp;a&nbsp;build.</span><br>
<span class="lineno">30</span><span class="keyword" id="4912459">type</span>&nbsp;<span class="ident" id="4912464">Context</span>&nbsp;<span class="keyword" id="4912472">struct</span>&nbsp;<span class="op" id="4912479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912482">GOARCH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4912494">string</span>&nbsp;<span class="comment" id="4912501">//&nbsp;target&nbsp;architecture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912525">GOOS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4912537">string</span>&nbsp;<span class="comment" id="4912544">//&nbsp;target&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912572">GOROOT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4912584">string</span>&nbsp;<span class="comment" id="4912591">//&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912603">GOPATH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4912615">string</span>&nbsp;<span class="comment" id="4912622">//&nbsp;Go&nbsp;path</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912634">CgoEnabled</span>&nbsp;&nbsp;<span class="builtintype" id="4912646">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4912653">//&nbsp;whether&nbsp;cgo&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912681">UseAllFiles</span>&nbsp;<span class="builtintype" id="4912693">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4912700">//&nbsp;use&nbsp;files&nbsp;regardless&nbsp;of&nbsp;+build&nbsp;lines,&nbsp;file&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4912753">Compiler</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4912765">string</span>&nbsp;<span class="comment" id="4912772">//&nbsp;compiler&nbsp;to&nbsp;assume&nbsp;when&nbsp;computing&nbsp;target&nbsp;paths</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4912824">//&nbsp;The&nbsp;build&nbsp;and&nbsp;release&nbsp;tags&nbsp;specify&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4912881">//&nbsp;that&nbsp;should&nbsp;be&nbsp;considered&nbsp;satisfied&nbsp;when&nbsp;processing&nbsp;+build&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4912951">//&nbsp;Clients&nbsp;creating&nbsp;a&nbsp;new&nbsp;context&nbsp;may&nbsp;customize&nbsp;BuildTags,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913017">//&nbsp;defaults&nbsp;to&nbsp;empty,&nbsp;but&nbsp;it&nbsp;is&nbsp;usually&nbsp;an&nbsp;error&nbsp;to&nbsp;customize&nbsp;ReleaseTags,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913093">//&nbsp;which&nbsp;defaults&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;releases&nbsp;the&nbsp;current&nbsp;release&nbsp;is&nbsp;compatible&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913179">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;BuildTags&nbsp;and&nbsp;ReleaseTags,&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913247">//&nbsp;consider&nbsp;the&nbsp;values&nbsp;of&nbsp;GOARCH&nbsp;and&nbsp;GOOS&nbsp;as&nbsp;satisfied&nbsp;tags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4913309">BuildTags</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4913321">[</span><span class="op" id="4913322">]</span><span class="builtintype" id="4913323">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4913331">ReleaseTags</span>&nbsp;<span class="op" id="4913343">[</span><span class="op" id="4913344">]</span><span class="builtintype" id="4913345">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913354">//&nbsp;The&nbsp;install&nbsp;suffix&nbsp;specifies&nbsp;a&nbsp;suffix&nbsp;to&nbsp;use&nbsp;in&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;installation</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913435">//&nbsp;directory.&nbsp;By&nbsp;default&nbsp;it&nbsp;is&nbsp;empty,&nbsp;but&nbsp;custom&nbsp;builds&nbsp;that&nbsp;need&nbsp;to&nbsp;keep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913510">//&nbsp;their&nbsp;outputs&nbsp;separate&nbsp;can&nbsp;set&nbsp;InstallSuffix&nbsp;to&nbsp;do&nbsp;so.&nbsp;For&nbsp;example,&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913587">//&nbsp;using&nbsp;the&nbsp;race&nbsp;detector,&nbsp;the&nbsp;go&nbsp;command&nbsp;uses&nbsp;InstallSuffix&nbsp;=&nbsp;&#34;race&#34;,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913663">//&nbsp;that&nbsp;on&nbsp;a&nbsp;Linux/386&nbsp;system,&nbsp;packages&nbsp;are&nbsp;written&nbsp;to&nbsp;a&nbsp;directory&nbsp;named</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913737">//&nbsp;&#34;linux_386_race&#34;&nbsp;instead&nbsp;of&nbsp;the&nbsp;usual&nbsp;&#34;linux_386&#34;.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4913792">InstallSuffix</span>&nbsp;<span class="builtintype" id="4913806">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913815">//&nbsp;By&nbsp;default,&nbsp;Import&nbsp;uses&nbsp;the&nbsp;operating&nbsp;system&#39;s&nbsp;file&nbsp;system&nbsp;calls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913884">//&nbsp;to&nbsp;read&nbsp;directories&nbsp;and&nbsp;files.&nbsp;&nbsp;To&nbsp;read&nbsp;from&nbsp;other&nbsp;sources,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4913948">//&nbsp;callers&nbsp;can&nbsp;set&nbsp;the&nbsp;following&nbsp;functions.&nbsp;&nbsp;They&nbsp;all&nbsp;have&nbsp;default</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914016">//&nbsp;behaviors&nbsp;that&nbsp;use&nbsp;the&nbsp;local&nbsp;file&nbsp;system,&nbsp;so&nbsp;clients&nbsp;need&nbsp;only&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914087">//&nbsp;the&nbsp;functions&nbsp;whose&nbsp;behaviors&nbsp;they&nbsp;wish&nbsp;to&nbsp;change.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914143">//&nbsp;JoinPath&nbsp;joins&nbsp;the&nbsp;sequence&nbsp;of&nbsp;path&nbsp;fragments&nbsp;into&nbsp;a&nbsp;single&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914213">//&nbsp;If&nbsp;JoinPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.Join.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4914264">JoinPath</span>&nbsp;<span class="keyword" id="4914273">func</span><span class="op" id="4914277">(</span><span class="ident" id="4914278">elem</span>&nbsp;<span class="op" id="4914283">...</span><span class="builtintype" id="4914286">string</span><span class="op" id="4914292">)</span>&nbsp;<span class="builtintype" id="4914294">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914303">//&nbsp;SplitPathList&nbsp;splits&nbsp;the&nbsp;path&nbsp;list&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;individual&nbsp;paths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914376">//&nbsp;If&nbsp;SplitPathList&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4914437">SplitPathList</span>&nbsp;<span class="keyword" id="4914451">func</span><span class="op" id="4914455">(</span><span class="ident" id="4914456">list</span>&nbsp;<span class="builtintype" id="4914461">string</span><span class="op" id="4914467">)</span>&nbsp;<span class="op" id="4914469">[</span><span class="op" id="4914470">]</span><span class="builtintype" id="4914471">string</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914480">//&nbsp;IsAbsPath&nbsp;reports&nbsp;whether&nbsp;path&nbsp;is&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914536">//&nbsp;If&nbsp;IsAbsPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4914589">IsAbsPath</span>&nbsp;<span class="keyword" id="4914599">func</span><span class="op" id="4914603">(</span><span class="ident" id="4914604">path</span>&nbsp;<span class="builtintype" id="4914609">string</span><span class="op" id="4914615">)</span>&nbsp;<span class="builtintype" id="4914617">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914624">//&nbsp;IsDir&nbsp;reports&nbsp;whether&nbsp;the&nbsp;path&nbsp;names&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914678">//&nbsp;If&nbsp;IsDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;calls&nbsp;os.Stat&nbsp;and&nbsp;uses&nbsp;the&nbsp;result&#39;s&nbsp;IsDir&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4914756">IsDir</span>&nbsp;<span class="keyword" id="4914762">func</span><span class="op" id="4914766">(</span><span class="ident" id="4914767">path</span>&nbsp;<span class="builtintype" id="4914772">string</span><span class="op" id="4914778">)</span>&nbsp;<span class="builtintype" id="4914780">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914787">//&nbsp;HasSubdir&nbsp;reports&nbsp;whether&nbsp;dir&nbsp;is&nbsp;a&nbsp;subdirectory&nbsp;of</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914842">//&nbsp;(perhaps&nbsp;multiple&nbsp;levels&nbsp;below)&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914884">//&nbsp;If&nbsp;so,&nbsp;HasSubdir&nbsp;sets&nbsp;rel&nbsp;to&nbsp;a&nbsp;slash-separated&nbsp;path&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4914945">//&nbsp;can&nbsp;be&nbsp;joined&nbsp;to&nbsp;root&nbsp;to&nbsp;produce&nbsp;a&nbsp;path&nbsp;equivalent&nbsp;to&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915008">//&nbsp;If&nbsp;HasSubdir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;an&nbsp;implementation&nbsp;built&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915072">//&nbsp;filepath.EvalSymlinks.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4915099">HasSubdir</span>&nbsp;<span class="keyword" id="4915109">func</span><span class="op" id="4915113">(</span><span class="ident" id="4915114">root</span><span class="op" id="4915118">,</span>&nbsp;<span class="ident" id="4915120">dir</span>&nbsp;<span class="builtintype" id="4915124">string</span><span class="op" id="4915130">)</span>&nbsp;<span class="op" id="4915132">(</span><span class="ident" id="4915133">rel</span>&nbsp;<span class="builtintype" id="4915137">string</span><span class="op" id="4915143">,</span>&nbsp;<span class="ident" id="4915145">ok</span>&nbsp;<span class="builtintype" id="4915148">bool</span><span class="op" id="4915152">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915156">//&nbsp;ReadDir&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;os.FileInfo,&nbsp;sorted&nbsp;by&nbsp;Name,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915216">//&nbsp;describing&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915267">//&nbsp;If&nbsp;ReadDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4915318">ReadDir</span>&nbsp;<span class="keyword" id="4915326">func</span><span class="op" id="4915330">(</span><span class="ident" id="4915331">dir</span>&nbsp;<span class="builtintype" id="4915335">string</span><span class="op" id="4915341">)</span>&nbsp;<span class="op" id="4915343">(</span><span class="ident" id="4915344">fi</span>&nbsp;<span class="op" id="4915347">[</span><span class="op" id="4915348">]</span><span class="ident" id="4915349">os</span><span class="op" id="4915351">.</span><span class="ident" id="4915352">FileInfo</span><span class="op" id="4915360">,</span>&nbsp;<span class="ident" id="4915362">err</span>&nbsp;<span class="builtintype" id="4915366">error</span><span class="op" id="4915371">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915375">//&nbsp;OpenFile&nbsp;opens&nbsp;a&nbsp;file&nbsp;(not&nbsp;a&nbsp;directory)&nbsp;for&nbsp;reading.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4915432">//&nbsp;If&nbsp;OpenFile&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;os.Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4915477">OpenFile</span>&nbsp;<span class="keyword" id="4915486">func</span><span class="op" id="4915490">(</span><span class="ident" id="4915491">path</span>&nbsp;<span class="builtintype" id="4915496">string</span><span class="op" id="4915502">)</span>&nbsp;<span class="op" id="4915504">(</span><span class="ident" id="4915505">r</span>&nbsp;<span class="ident" id="4915507">io</span><span class="op" id="4915509">.</span><span class="ident" id="4915510">ReadCloser</span><span class="op" id="4915520">,</span>&nbsp;<span class="ident" id="4915522">err</span>&nbsp;<span class="builtintype" id="4915526">error</span><span class="op" id="4915531">)</span><br>
<span class="lineno">95</span><span class="op" id="4915533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4915536">//&nbsp;joinPath&nbsp;calls&nbsp;ctxt.JoinPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.Join.</span><br>
<span class="lineno"></span><span class="keyword" id="4915604">func</span>&nbsp;<span class="op" id="4915609">(</span><span class="ident" id="4915610">ctxt</span>&nbsp;<span class="op" id="4915615">*</span><span class="ident" id="4915616">Context</span><span class="op" id="4915623">)</span>&nbsp;<span class="ident" id="4915625">joinPath</span><span class="op" id="4915633">(</span><span class="ident" id="4915634">elem</span>&nbsp;<span class="op" id="4915639">...</span><span class="builtintype" id="4915642">string</span><span class="op" id="4915648">)</span>&nbsp;<span class="builtintype" id="4915650">string</span>&nbsp;<span class="op" id="4915657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4915660">if</span>&nbsp;<span class="ident" id="4915663">f</span>&nbsp;<span class="op" id="4915665">:=</span>&nbsp;<span class="ident" id="4915668">ctxt</span><span class="op" id="4915672">.</span><span class="ident" id="4915673">JoinPath</span><span class="op" id="4915681">;</span>&nbsp;<span class="ident" id="4915683">f</span>&nbsp;<span class="op" id="4915685">!=</span>&nbsp;<span class="builtintype" id="4915688">nil</span>&nbsp;<span class="op" id="4915692">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4915696">return</span>&nbsp;<span class="ident" id="4915703">f</span><span class="op" id="4915704">(</span><span class="ident" id="4915705">elem</span><span class="op" id="4915709">...</span><span class="op" id="4915712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4915715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4915718">return</span>&nbsp;<span class="ident" id="4915725">filepath</span><span class="op" id="4915733">.</span><span class="ident" id="4915734">Join</span><span class="op" id="4915738">(</span><span class="ident" id="4915739">elem</span><span class="op" id="4915743">...</span><span class="op" id="4915746">)</span><br>
<span class="lineno"></span><span class="op" id="4915748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4915751">//&nbsp;splitPathList&nbsp;calls&nbsp;ctxt.SplitPathList&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span><span class="keyword" id="4915834">func</span>&nbsp;<span class="op" id="4915839">(</span><span class="ident" id="4915840">ctxt</span>&nbsp;<span class="op" id="4915845">*</span><span class="ident" id="4915846">Context</span><span class="op" id="4915853">)</span>&nbsp;<span class="ident" id="4915855">splitPathList</span><span class="op" id="4915868">(</span><span class="ident" id="4915869">s</span>&nbsp;<span class="builtintype" id="4915871">string</span><span class="op" id="4915877">)</span>&nbsp;<span class="op" id="4915879">[</span><span class="op" id="4915880">]</span><span class="builtintype" id="4915881">string</span>&nbsp;<span class="op" id="4915888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4915891">if</span>&nbsp;<span class="ident" id="4915894">f</span>&nbsp;<span class="op" id="4915896">:=</span>&nbsp;<span class="ident" id="4915899">ctxt</span><span class="op" id="4915903">.</span><span class="ident" id="4915904">SplitPathList</span><span class="op" id="4915917">;</span>&nbsp;<span class="ident" id="4915919">f</span>&nbsp;<span class="op" id="4915921">!=</span>&nbsp;<span class="builtintype" id="4915924">nil</span>&nbsp;<span class="op" id="4915928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4915932">return</span>&nbsp;<span class="ident" id="4915939">f</span><span class="op" id="4915940">(</span><span class="ident" id="4915941">s</span><span class="op" id="4915942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4915945">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4915948">return</span>&nbsp;<span class="ident" id="4915955">filepath</span><span class="op" id="4915963">.</span><span class="ident" id="4915964">SplitList</span><span class="op" id="4915973">(</span><span class="ident" id="4915974">s</span><span class="op" id="4915975">)</span><br>
<span class="lineno"></span><span class="op" id="4915977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4915980">//&nbsp;isAbsPath&nbsp;calls&nbsp;ctxt.IsAbsSPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span><span class="keyword" id="4916052">func</span>&nbsp;<span class="op" id="4916057">(</span><span class="ident" id="4916058">ctxt</span>&nbsp;<span class="op" id="4916063">*</span><span class="ident" id="4916064">Context</span><span class="op" id="4916071">)</span>&nbsp;<span class="ident" id="4916073">isAbsPath</span><span class="op" id="4916082">(</span><span class="ident" id="4916083">path</span>&nbsp;<span class="builtintype" id="4916088">string</span><span class="op" id="4916094">)</span>&nbsp;<span class="builtintype" id="4916096">bool</span>&nbsp;<span class="op" id="4916101">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916104">if</span>&nbsp;<span class="ident" id="4916107">f</span>&nbsp;<span class="op" id="4916109">:=</span>&nbsp;<span class="ident" id="4916112">ctxt</span><span class="op" id="4916116">.</span><span class="ident" id="4916117">IsAbsPath</span><span class="op" id="4916126">;</span>&nbsp;<span class="ident" id="4916128">f</span>&nbsp;<span class="op" id="4916130">!=</span>&nbsp;<span class="builtintype" id="4916133">nil</span>&nbsp;<span class="op" id="4916137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916141">return</span>&nbsp;<span class="ident" id="4916148">f</span><span class="op" id="4916149">(</span><span class="ident" id="4916150">path</span><span class="op" id="4916154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4916157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916160">return</span>&nbsp;<span class="ident" id="4916167">filepath</span><span class="op" id="4916175">.</span><span class="ident" id="4916176">IsAbs</span><span class="op" id="4916181">(</span><span class="ident" id="4916182">path</span><span class="op" id="4916186">)</span><br>
<span class="lineno"></span><span class="op" id="4916188">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="4916191">//&nbsp;isDir&nbsp;calls&nbsp;ctxt.IsDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses&nbsp;os.Stat.</span><br>
<span class="lineno"></span><span class="keyword" id="4916252">func</span>&nbsp;<span class="op" id="4916257">(</span><span class="ident" id="4916258">ctxt</span>&nbsp;<span class="op" id="4916263">*</span><span class="ident" id="4916264">Context</span><span class="op" id="4916271">)</span>&nbsp;<span class="ident" id="4916273">isDir</span><span class="op" id="4916278">(</span><span class="ident" id="4916279">path</span>&nbsp;<span class="builtintype" id="4916284">string</span><span class="op" id="4916290">)</span>&nbsp;<span class="builtintype" id="4916292">bool</span>&nbsp;<span class="op" id="4916297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916300">if</span>&nbsp;<span class="ident" id="4916303">f</span>&nbsp;<span class="op" id="4916305">:=</span>&nbsp;<span class="ident" id="4916308">ctxt</span><span class="op" id="4916312">.</span><span class="ident" id="4916313">IsDir</span><span class="op" id="4916318">;</span>&nbsp;<span class="ident" id="4916320">f</span>&nbsp;<span class="op" id="4916322">!=</span>&nbsp;<span class="builtintype" id="4916325">nil</span>&nbsp;<span class="op" id="4916329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916333">return</span>&nbsp;<span class="ident" id="4916340">f</span><span class="op" id="4916341">(</span><span class="ident" id="4916342">path</span><span class="op" id="4916346">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4916349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4916352">fi</span><span class="op" id="4916354">,</span>&nbsp;<span class="ident" id="4916356">err</span>&nbsp;<span class="op" id="4916360">:=</span>&nbsp;<span class="ident" id="4916363">os</span><span class="op" id="4916365">.</span><span class="ident" id="4916366">Stat</span><span class="op" id="4916370">(</span><span class="ident" id="4916371">path</span><span class="op" id="4916375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916378">return</span>&nbsp;<span class="ident" id="4916385">err</span>&nbsp;<span class="op" id="4916389">==</span>&nbsp;<span class="builtintype" id="4916392">nil</span>&nbsp;<span class="op" id="4916396">&amp;&amp;</span>&nbsp;<span class="ident" id="4916399">fi</span><span class="op" id="4916401">.</span><span class="ident" id="4916402">IsDir</span><span class="op" id="4916407">(</span><span class="op" id="4916408">)</span><br>
<span class="lineno"></span><span class="op" id="4916410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4916413">//&nbsp;hasSubdir&nbsp;calls&nbsp;ctxt.HasSubdir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses</span><br>
<span class="lineno"></span><span class="comment" id="4916473">//&nbsp;the&nbsp;local&nbsp;file&nbsp;system&nbsp;to&nbsp;answer&nbsp;the&nbsp;question.</span><br>
<span class="lineno"></span><span class="keyword" id="4916522">func</span>&nbsp;<span class="op" id="4916527">(</span><span class="ident" id="4916528">ctxt</span>&nbsp;<span class="op" id="4916533">*</span><span class="ident" id="4916534">Context</span><span class="op" id="4916541">)</span>&nbsp;<span class="ident" id="4916543">hasSubdir</span><span class="op" id="4916552">(</span><span class="ident" id="4916553">root</span><span class="op" id="4916557">,</span>&nbsp;<span class="ident" id="4916559">dir</span>&nbsp;<span class="builtintype" id="4916563">string</span><span class="op" id="4916569">)</span>&nbsp;<span class="op" id="4916571">(</span><span class="ident" id="4916572">rel</span>&nbsp;<span class="builtintype" id="4916576">string</span><span class="op" id="4916582">,</span>&nbsp;<span class="ident" id="4916584">ok</span>&nbsp;<span class="builtintype" id="4916587">bool</span><span class="op" id="4916591">)</span>&nbsp;<span class="op" id="4916593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916596">if</span>&nbsp;<span class="ident" id="4916599">f</span>&nbsp;<span class="op" id="4916601">:=</span>&nbsp;<span class="ident" id="4916604">ctxt</span><span class="op" id="4916608">.</span><span class="ident" id="4916609">HasSubdir</span><span class="op" id="4916618">;</span>&nbsp;<span class="ident" id="4916620">f</span>&nbsp;<span class="op" id="4916622">!=</span>&nbsp;<span class="builtintype" id="4916625">nil</span>&nbsp;<span class="op" id="4916629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916633">return</span>&nbsp;<span class="ident" id="4916640">f</span><span class="op" id="4916641">(</span><span class="ident" id="4916642">root</span><span class="op" id="4916646">,</span>&nbsp;<span class="ident" id="4916648">dir</span><span class="op" id="4916651">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4916654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4916658">//&nbsp;Try&nbsp;using&nbsp;paths&nbsp;we&nbsp;received.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916691">if</span>&nbsp;<span class="ident" id="4916694">rel</span><span class="op" id="4916697">,</span>&nbsp;<span class="ident" id="4916699">ok</span>&nbsp;<span class="op" id="4916702">=</span>&nbsp;<span class="ident" id="4916704">hasSubdir</span><span class="op" id="4916713">(</span><span class="ident" id="4916714">root</span><span class="op" id="4916718">,</span>&nbsp;<span class="ident" id="4916720">dir</span><span class="op" id="4916723">)</span><span class="op" id="4916724">;</span>&nbsp;<span class="ident" id="4916726">ok</span>&nbsp;<span class="op" id="4916729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916733">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4916741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4916745">//&nbsp;Try&nbsp;expanding&nbsp;symlinks&nbsp;and&nbsp;comparing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4916786">//&nbsp;expanded&nbsp;against&nbsp;unexpanded&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4916822">//&nbsp;expanded&nbsp;against&nbsp;expanded.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4916853">rootSym</span><span class="op" id="4916860">,</span>&nbsp;<span class="ident" id="4916862">_</span>&nbsp;<span class="op" id="4916864">:=</span>&nbsp;<span class="ident" id="4916867">filepath</span><span class="op" id="4916875">.</span><span class="ident" id="4916876">EvalSymlinks</span><span class="op" id="4916888">(</span><span class="ident" id="4916889">root</span><span class="op" id="4916893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4916896">dirSym</span><span class="op" id="4916902">,</span>&nbsp;<span class="ident" id="4916904">_</span>&nbsp;<span class="op" id="4916906">:=</span>&nbsp;<span class="ident" id="4916909">filepath</span><span class="op" id="4916917">.</span><span class="ident" id="4916918">EvalSymlinks</span><span class="op" id="4916930">(</span><span class="ident" id="4916931">dir</span><span class="op" id="4916934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916938">if</span>&nbsp;<span class="ident" id="4916941">rel</span><span class="op" id="4916944">,</span>&nbsp;<span class="ident" id="4916946">ok</span>&nbsp;<span class="op" id="4916949">=</span>&nbsp;<span class="ident" id="4916951">hasSubdir</span><span class="op" id="4916960">(</span><span class="ident" id="4916961">rootSym</span><span class="op" id="4916968">,</span>&nbsp;<span class="ident" id="4916970">dir</span><span class="op" id="4916973">)</span><span class="op" id="4916974">;</span>&nbsp;<span class="ident" id="4916976">ok</span>&nbsp;<span class="op" id="4916979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916983">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4916991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4916994">if</span>&nbsp;<span class="ident" id="4916997">rel</span><span class="op" id="4917000">,</span>&nbsp;<span class="ident" id="4917002">ok</span>&nbsp;<span class="op" id="4917005">=</span>&nbsp;<span class="ident" id="4917007">hasSubdir</span><span class="op" id="4917016">(</span><span class="ident" id="4917017">root</span><span class="op" id="4917021">,</span>&nbsp;<span class="ident" id="4917023">dirSym</span><span class="op" id="4917029">)</span><span class="op" id="4917030">;</span>&nbsp;<span class="ident" id="4917032">ok</span>&nbsp;<span class="op" id="4917035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917039">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4917047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917050">return</span>&nbsp;<span class="ident" id="4917057">hasSubdir</span><span class="op" id="4917066">(</span><span class="ident" id="4917067">rootSym</span><span class="op" id="4917074">,</span>&nbsp;<span class="ident" id="4917076">dirSym</span><span class="op" id="4917082">)</span><br>
<span class="lineno">155</span><span class="op" id="4917084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4917087">func</span>&nbsp;<span class="ident" id="4917092">hasSubdir</span><span class="op" id="4917101">(</span><span class="ident" id="4917102">root</span><span class="op" id="4917106">,</span>&nbsp;<span class="ident" id="4917108">dir</span>&nbsp;<span class="builtintype" id="4917112">string</span><span class="op" id="4917118">)</span>&nbsp;<span class="op" id="4917120">(</span><span class="ident" id="4917121">rel</span>&nbsp;<span class="builtintype" id="4917125">string</span><span class="op" id="4917131">,</span>&nbsp;<span class="ident" id="4917133">ok</span>&nbsp;<span class="builtintype" id="4917136">bool</span><span class="op" id="4917140">)</span>&nbsp;<span class="op" id="4917142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917145">const</span>&nbsp;<span class="ident" id="4917151">sep</span>&nbsp;<span class="op" id="4917155">=</span>&nbsp;<span class="builtintype" id="4917157">string</span><span class="op" id="4917163">(</span><span class="ident" id="4917164">filepath</span><span class="op" id="4917172">.</span><span class="ident" id="4917173">Separator</span><span class="op" id="4917182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4917185">root</span>&nbsp;<span class="op" id="4917190">=</span>&nbsp;<span class="ident" id="4917192">filepath</span><span class="op" id="4917200">.</span><span class="ident" id="4917201">Clean</span><span class="op" id="4917206">(</span><span class="ident" id="4917207">root</span><span class="op" id="4917211">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917214">if</span>&nbsp;<span class="op" id="4917217">!</span><span class="ident" id="4917218">strings</span><span class="op" id="4917225">.</span><span class="ident" id="4917226">HasSuffix</span><span class="op" id="4917235">(</span><span class="ident" id="4917236">root</span><span class="op" id="4917240">,</span>&nbsp;<span class="ident" id="4917242">sep</span><span class="op" id="4917245">)</span>&nbsp;<span class="op" id="4917247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4917251">root</span>&nbsp;<span class="op" id="4917256">+=</span>&nbsp;<span class="ident" id="4917259">sep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4917264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4917267">dir</span>&nbsp;<span class="op" id="4917271">=</span>&nbsp;<span class="ident" id="4917273">filepath</span><span class="op" id="4917281">.</span><span class="ident" id="4917282">Clean</span><span class="op" id="4917287">(</span><span class="ident" id="4917288">dir</span><span class="op" id="4917291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917294">if</span>&nbsp;<span class="op" id="4917297">!</span><span class="ident" id="4917298">strings</span><span class="op" id="4917305">.</span><span class="ident" id="4917306">HasPrefix</span><span class="op" id="4917315">(</span><span class="ident" id="4917316">dir</span><span class="op" id="4917319">,</span>&nbsp;<span class="ident" id="4917321">root</span><span class="op" id="4917325">)</span>&nbsp;<span class="op" id="4917327">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917331">return</span>&nbsp;<span class="string" id="4917338">&#34;&#34;</span><span class="op" id="4917340">,</span>&nbsp;<span class="builtintype" id="4917342">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4917349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917352">return</span>&nbsp;<span class="ident" id="4917359">filepath</span><span class="op" id="4917367">.</span><span class="ident" id="4917368">ToSlash</span><span class="op" id="4917375">(</span><span class="ident" id="4917376">dir</span><span class="op" id="4917379">[</span><span class="builtinfunc" id="4917380">len</span><span class="op" id="4917383">(</span><span class="ident" id="4917384">root</span><span class="op" id="4917388">)</span><span class="op" id="4917389">:</span><span class="op" id="4917390">]</span><span class="op" id="4917391">)</span><span class="op" id="4917392">,</span>&nbsp;<span class="builtintype" id="4917394">true</span><br>
<span class="lineno"></span><span class="op" id="4917399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="4917402">//&nbsp;readDir&nbsp;calls&nbsp;ctxt.ReadDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno"></span><span class="keyword" id="4917469">func</span>&nbsp;<span class="op" id="4917474">(</span><span class="ident" id="4917475">ctxt</span>&nbsp;<span class="op" id="4917480">*</span><span class="ident" id="4917481">Context</span><span class="op" id="4917488">)</span>&nbsp;<span class="ident" id="4917490">readDir</span><span class="op" id="4917497">(</span><span class="ident" id="4917498">path</span>&nbsp;<span class="builtintype" id="4917503">string</span><span class="op" id="4917509">)</span>&nbsp;<span class="op" id="4917511">(</span><span class="op" id="4917512">[</span><span class="op" id="4917513">]</span><span class="ident" id="4917514">os</span><span class="op" id="4917516">.</span><span class="ident" id="4917517">FileInfo</span><span class="op" id="4917525">,</span>&nbsp;<span class="builtintype" id="4917527">error</span><span class="op" id="4917532">)</span>&nbsp;<span class="op" id="4917534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917537">if</span>&nbsp;<span class="ident" id="4917540">f</span>&nbsp;<span class="op" id="4917542">:=</span>&nbsp;<span class="ident" id="4917545">ctxt</span><span class="op" id="4917549">.</span><span class="ident" id="4917550">ReadDir</span><span class="op" id="4917557">;</span>&nbsp;<span class="ident" id="4917559">f</span>&nbsp;<span class="op" id="4917561">!=</span>&nbsp;<span class="builtintype" id="4917564">nil</span>&nbsp;<span class="op" id="4917568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917572">return</span>&nbsp;<span class="ident" id="4917579">f</span><span class="op" id="4917580">(</span><span class="ident" id="4917581">path</span><span class="op" id="4917585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4917588">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917591">return</span>&nbsp;<span class="ident" id="4917598">ioutil</span><span class="op" id="4917604">.</span><span class="ident" id="4917605">ReadDir</span><span class="op" id="4917612">(</span><span class="ident" id="4917613">path</span><span class="op" id="4917617">)</span><br>
<span class="lineno"></span><span class="op" id="4917619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4917622">//&nbsp;openFile&nbsp;calls&nbsp;ctxt.OpenFile&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;os.Open.</span><br>
<span class="lineno"></span><span class="keyword" id="4917684">func</span>&nbsp;<span class="op" id="4917689">(</span><span class="ident" id="4917690">ctxt</span>&nbsp;<span class="op" id="4917695">*</span><span class="ident" id="4917696">Context</span><span class="op" id="4917703">)</span>&nbsp;<span class="ident" id="4917705">openFile</span><span class="op" id="4917713">(</span><span class="ident" id="4917714">path</span>&nbsp;<span class="builtintype" id="4917719">string</span><span class="op" id="4917725">)</span>&nbsp;<span class="op" id="4917727">(</span><span class="ident" id="4917728">io</span><span class="op" id="4917730">.</span><span class="ident" id="4917731">ReadCloser</span><span class="op" id="4917741">,</span>&nbsp;<span class="builtintype" id="4917743">error</span><span class="op" id="4917748">)</span>&nbsp;<span class="op" id="4917750">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917753">if</span>&nbsp;<span class="ident" id="4917756">fn</span>&nbsp;<span class="op" id="4917759">:=</span>&nbsp;<span class="ident" id="4917762">ctxt</span><span class="op" id="4917766">.</span><span class="ident" id="4917767">OpenFile</span><span class="op" id="4917775">;</span>&nbsp;<span class="ident" id="4917777">fn</span>&nbsp;<span class="op" id="4917780">!=</span>&nbsp;<span class="builtintype" id="4917783">nil</span>&nbsp;<span class="op" id="4917787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917791">return</span>&nbsp;<span class="ident" id="4917798">fn</span><span class="op" id="4917800">(</span><span class="ident" id="4917801">path</span><span class="op" id="4917805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4917808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4917812">f</span><span class="op" id="4917813">,</span>&nbsp;<span class="ident" id="4917815">err</span>&nbsp;<span class="op" id="4917819">:=</span>&nbsp;<span class="ident" id="4917822">os</span><span class="op" id="4917824">.</span><span class="ident" id="4917825">Open</span><span class="op" id="4917829">(</span><span class="ident" id="4917830">path</span><span class="op" id="4917834">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917837">if</span>&nbsp;<span class="ident" id="4917840">err</span>&nbsp;<span class="op" id="4917844">!=</span>&nbsp;<span class="builtintype" id="4917847">nil</span>&nbsp;<span class="op" id="4917851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917855">return</span>&nbsp;<span class="builtintype" id="4917862">nil</span><span class="op" id="4917865">,</span>&nbsp;<span class="ident" id="4917867">err</span>&nbsp;<span class="comment" id="4917871">//&nbsp;nil&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4917889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4917892">return</span>&nbsp;<span class="ident" id="4917899">f</span><span class="op" id="4917900">,</span>&nbsp;<span class="builtintype" id="4917902">nil</span><br>
<span class="lineno"></span><span class="op" id="4917906">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4917909">//&nbsp;isFile&nbsp;determines&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;file&nbsp;by&nbsp;trying&nbsp;to&nbsp;open&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="4917975">//&nbsp;It&nbsp;reuses&nbsp;openFile&nbsp;instead&nbsp;of&nbsp;adding&nbsp;another&nbsp;function&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4918039">//&nbsp;list&nbsp;in&nbsp;Context.</span><br>
<span class="lineno"></span><span class="keyword" id="4918059">func</span>&nbsp;<span class="op" id="4918064">(</span><span class="ident" id="4918065">ctxt</span>&nbsp;<span class="op" id="4918070">*</span><span class="ident" id="4918071">Context</span><span class="op" id="4918078">)</span>&nbsp;<span class="ident" id="4918080">isFile</span><span class="op" id="4918086">(</span><span class="ident" id="4918087">path</span>&nbsp;<span class="builtintype" id="4918092">string</span><span class="op" id="4918098">)</span>&nbsp;<span class="builtintype" id="4918100">bool</span>&nbsp;<span class="op" id="4918105">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4918108">f</span><span class="op" id="4918109">,</span>&nbsp;<span class="ident" id="4918111">err</span>&nbsp;<span class="op" id="4918115">:=</span>&nbsp;<span class="ident" id="4918118">ctxt</span><span class="op" id="4918122">.</span><span class="ident" id="4918123">openFile</span><span class="op" id="4918131">(</span><span class="ident" id="4918132">path</span><span class="op" id="4918136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918139">if</span>&nbsp;<span class="ident" id="4918142">err</span>&nbsp;<span class="op" id="4918146">!=</span>&nbsp;<span class="builtintype" id="4918149">nil</span>&nbsp;<span class="op" id="4918153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918157">return</span>&nbsp;<span class="builtintype" id="4918164">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4918171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4918174">f</span><span class="op" id="4918175">.</span><span class="ident" id="4918176">Close</span><span class="op" id="4918181">(</span><span class="op" id="4918182">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918185">return</span>&nbsp;<span class="builtintype" id="4918192">true</span><br>
<span class="lineno"></span><span class="op" id="4918197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4918200">//&nbsp;gopath&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;path&nbsp;directories.</span><br>
<span class="lineno"></span><span class="keyword" id="4918251">func</span>&nbsp;<span class="op" id="4918256">(</span><span class="ident" id="4918257">ctxt</span>&nbsp;<span class="op" id="4918262">*</span><span class="ident" id="4918263">Context</span><span class="op" id="4918270">)</span>&nbsp;<span class="ident" id="4918272">gopath</span><span class="op" id="4918278">(</span><span class="op" id="4918279">)</span>&nbsp;<span class="op" id="4918281">[</span><span class="op" id="4918282">]</span><span class="builtintype" id="4918283">string</span>&nbsp;<span class="op" id="4918290">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918293">var</span>&nbsp;<span class="ident" id="4918297">all</span>&nbsp;<span class="op" id="4918301">[</span><span class="op" id="4918302">]</span><span class="builtintype" id="4918303">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918311">for</span>&nbsp;<span class="ident" id="4918315">_</span><span class="op" id="4918316">,</span>&nbsp;<span class="ident" id="4918318">p</span>&nbsp;<span class="op" id="4918320">:=</span>&nbsp;<span class="keyword" id="4918323">range</span>&nbsp;<span class="ident" id="4918329">ctxt</span><span class="op" id="4918333">.</span><span class="ident" id="4918334">splitPathList</span><span class="op" id="4918347">(</span><span class="ident" id="4918348">ctxt</span><span class="op" id="4918352">.</span><span class="ident" id="4918353">GOPATH</span><span class="op" id="4918359">)</span>&nbsp;<span class="op" id="4918361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918365">if</span>&nbsp;<span class="ident" id="4918368">p</span>&nbsp;<span class="op" id="4918370">==</span>&nbsp;<span class="string" id="4918373">&#34;&#34;</span>&nbsp;<span class="op" id="4918376">||</span>&nbsp;<span class="ident" id="4918379">p</span>&nbsp;<span class="op" id="4918381">==</span>&nbsp;<span class="ident" id="4918384">ctxt</span><span class="op" id="4918388">.</span><span class="ident" id="4918389">GOROOT</span>&nbsp;<span class="op" id="4918396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918401">//&nbsp;Empty&nbsp;paths&nbsp;are&nbsp;uninteresting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918438">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;the&nbsp;GOROOT,&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918482">//&nbsp;People&nbsp;sometimes&nbsp;set&nbsp;GOPATH=$GOROOT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918525">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this&nbsp;common&nbsp;mistake.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918575">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4918586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4918590">if</span>&nbsp;<span class="ident" id="4918593">strings</span><span class="op" id="4918600">.</span><span class="ident" id="4918601">HasPrefix</span><span class="op" id="4918610">(</span><span class="ident" id="4918611">p</span><span class="op" id="4918612">,</span>&nbsp;<span class="string" id="4918614">&#34;~&#34;</span><span class="op" id="4918617">)</span>&nbsp;<span class="op" id="4918619">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918624">//&nbsp;Path&nbsp;segments&nbsp;starting&nbsp;with&nbsp;~&nbsp;on&nbsp;Unix&nbsp;are&nbsp;almost&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918686">//&nbsp;users&nbsp;who&nbsp;have&nbsp;incorrectly&nbsp;quoted&nbsp;~&nbsp;while&nbsp;setting&nbsp;GOPATH,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918750">//&nbsp;preventing&nbsp;it&nbsp;from&nbsp;expanding&nbsp;to&nbsp;$HOME.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918795">//&nbsp;The&nbsp;situation&nbsp;is&nbsp;made&nbsp;more&nbsp;confusing&nbsp;by&nbsp;the&nbsp;fact&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918855">//&nbsp;bash&nbsp;allows&nbsp;quoted&nbsp;~&nbsp;in&nbsp;$PATH&nbsp;(most&nbsp;shells&nbsp;do&nbsp;not).</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918913">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this,&nbsp;and&nbsp;do&nbsp;not&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4918980">//&nbsp;It&nbsp;does&nbsp;not&nbsp;exist,&nbsp;and&nbsp;printing&nbsp;errors&nbsp;about&nbsp;it&nbsp;confuses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4919043">//&nbsp;those&nbsp;users&nbsp;even&nbsp;more,&nbsp;because&nbsp;they&nbsp;think&nbsp;&#34;sure&nbsp;~&nbsp;exists!&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4919109">//&nbsp;The&nbsp;go&nbsp;command&nbsp;diagnoses&nbsp;this&nbsp;situation&nbsp;and&nbsp;prints&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4919168">//&nbsp;useful&nbsp;error.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4919188">//&nbsp;On&nbsp;Windows,&nbsp;~&nbsp;is&nbsp;used&nbsp;in&nbsp;short&nbsp;names,&nbsp;such&nbsp;as&nbsp;c:\progra~1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4919252">//&nbsp;for&nbsp;c:\program&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919280">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4919291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4919295">all</span>&nbsp;<span class="op" id="4919299">=</span>&nbsp;<span class="builtinfunc" id="4919301">append</span><span class="op" id="4919307">(</span><span class="ident" id="4919308">all</span><span class="op" id="4919311">,</span>&nbsp;<span class="ident" id="4919313">p</span><span class="op" id="4919314">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4919317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919320">return</span>&nbsp;<span class="ident" id="4919327">all</span><br>
<span class="lineno"></span><span class="op" id="4919331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4919334">//&nbsp;SrcDirs&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;package&nbsp;source&nbsp;root&nbsp;directories.</span><br>
<span class="lineno">235</span><span class="comment" id="4919396">//&nbsp;It&nbsp;draws&nbsp;from&nbsp;the&nbsp;current&nbsp;Go&nbsp;root&nbsp;and&nbsp;Go&nbsp;path&nbsp;but&nbsp;omits&nbsp;directories</span><br>
<span class="lineno"></span><span class="comment" id="4919467">//&nbsp;that&nbsp;do&nbsp;not&nbsp;exist.</span><br>
<span class="lineno"></span><span class="keyword" id="4919489">func</span>&nbsp;<span class="op" id="4919494">(</span><span class="ident" id="4919495">ctxt</span>&nbsp;<span class="op" id="4919500">*</span><span class="ident" id="4919501">Context</span><span class="op" id="4919508">)</span>&nbsp;<span class="ident" id="4919510">SrcDirs</span><span class="op" id="4919517">(</span><span class="op" id="4919518">)</span>&nbsp;<span class="op" id="4919520">[</span><span class="op" id="4919521">]</span><span class="builtintype" id="4919522">string</span>&nbsp;<span class="op" id="4919529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919532">var</span>&nbsp;<span class="ident" id="4919536">all</span>&nbsp;<span class="op" id="4919540">[</span><span class="op" id="4919541">]</span><span class="builtintype" id="4919542">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919550">if</span>&nbsp;<span class="ident" id="4919553">ctxt</span><span class="op" id="4919557">.</span><span class="ident" id="4919558">GOROOT</span>&nbsp;<span class="op" id="4919565">!=</span>&nbsp;<span class="string" id="4919568">&#34;&#34;</span>&nbsp;<span class="op" id="4919571">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4919575">dir</span>&nbsp;<span class="op" id="4919579">:=</span>&nbsp;<span class="ident" id="4919582">ctxt</span><span class="op" id="4919586">.</span><span class="ident" id="4919587">joinPath</span><span class="op" id="4919595">(</span><span class="ident" id="4919596">ctxt</span><span class="op" id="4919600">.</span><span class="ident" id="4919601">GOROOT</span><span class="op" id="4919607">,</span>&nbsp;<span class="string" id="4919609">&#34;src&#34;</span><span class="op" id="4919614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919618">if</span>&nbsp;<span class="ident" id="4919621">ctxt</span><span class="op" id="4919625">.</span><span class="ident" id="4919626">isDir</span><span class="op" id="4919631">(</span><span class="ident" id="4919632">dir</span><span class="op" id="4919635">)</span>&nbsp;<span class="op" id="4919637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4919642">all</span>&nbsp;<span class="op" id="4919646">=</span>&nbsp;<span class="builtinfunc" id="4919648">append</span><span class="op" id="4919654">(</span><span class="ident" id="4919655">all</span><span class="op" id="4919658">,</span>&nbsp;<span class="ident" id="4919660">dir</span><span class="op" id="4919663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4919667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4919670">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919673">for</span>&nbsp;<span class="ident" id="4919677">_</span><span class="op" id="4919678">,</span>&nbsp;<span class="ident" id="4919680">p</span>&nbsp;<span class="op" id="4919682">:=</span>&nbsp;<span class="keyword" id="4919685">range</span>&nbsp;<span class="ident" id="4919691">ctxt</span><span class="op" id="4919695">.</span><span class="ident" id="4919696">gopath</span><span class="op" id="4919702">(</span><span class="op" id="4919703">)</span>&nbsp;<span class="op" id="4919705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4919709">dir</span>&nbsp;<span class="op" id="4919713">:=</span>&nbsp;<span class="ident" id="4919716">ctxt</span><span class="op" id="4919720">.</span><span class="ident" id="4919721">joinPath</span><span class="op" id="4919729">(</span><span class="ident" id="4919730">p</span><span class="op" id="4919731">,</span>&nbsp;<span class="string" id="4919733">&#34;src&#34;</span><span class="op" id="4919738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919742">if</span>&nbsp;<span class="ident" id="4919745">ctxt</span><span class="op" id="4919749">.</span><span class="ident" id="4919750">isDir</span><span class="op" id="4919755">(</span><span class="ident" id="4919756">dir</span><span class="op" id="4919759">)</span>&nbsp;<span class="op" id="4919761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4919766">all</span>&nbsp;<span class="op" id="4919770">=</span>&nbsp;<span class="builtinfunc" id="4919772">append</span><span class="op" id="4919778">(</span><span class="ident" id="4919779">all</span><span class="op" id="4919782">,</span>&nbsp;<span class="ident" id="4919784">dir</span><span class="op" id="4919787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4919791">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4919794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4919797">return</span>&nbsp;<span class="ident" id="4919804">all</span><br>
<span class="lineno"></span><span class="op" id="4919808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4919811">//&nbsp;Default&nbsp;is&nbsp;the&nbsp;default&nbsp;Context&nbsp;for&nbsp;builds.</span><br>
<span class="lineno">255</span><span class="comment" id="4919857">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;GOARCH,&nbsp;GOOS,&nbsp;GOROOT,&nbsp;and&nbsp;GOPATH&nbsp;environment&nbsp;variables</span><br>
<span class="lineno"></span><span class="comment" id="4919927">//&nbsp;if&nbsp;set,&nbsp;or&nbsp;else&nbsp;the&nbsp;compiled&nbsp;code&#39;s&nbsp;GOARCH,&nbsp;GOOS,&nbsp;and&nbsp;GOROOT.</span><br>
<span class="lineno"></span><span class="keyword" id="4919992">var</span>&nbsp;<span class="ident" id="4919996">Default</span>&nbsp;<span class="ident" id="4920004">Context</span>&nbsp;<span class="op" id="4920012">=</span>&nbsp;<span class="ident" id="4920014">defaultContext</span><span class="op" id="4920028">(</span><span class="op" id="4920029">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4920032">var</span>&nbsp;<span class="ident" id="4920036">cgoEnabled</span>&nbsp;<span class="op" id="4920047">=</span>&nbsp;<span class="keyword" id="4920049">map</span><span class="op" id="4920052">[</span><span class="builtintype" id="4920053">string</span><span class="op" id="4920059">]</span><span class="builtintype" id="4920060">bool</span><span class="op" id="4920064">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920067">&#34;darwin/386&#34;</span><span class="op" id="4920079">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920086">true</span><span class="op" id="4920090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920093">&#34;darwin/amd64&#34;</span><span class="op" id="4920107">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920112">true</span><span class="op" id="4920116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920119">&#34;dragonfly/386&#34;</span><span class="op" id="4920134">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920138">true</span><span class="op" id="4920142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920145">&#34;dragonfly/amd64&#34;</span><span class="op" id="4920162">:</span>&nbsp;<span class="builtintype" id="4920164">true</span><span class="op" id="4920168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920171">&#34;freebsd/386&#34;</span><span class="op" id="4920184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920190">true</span><span class="op" id="4920194">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920197">&#34;freebsd/amd64&#34;</span><span class="op" id="4920212">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920216">true</span><span class="op" id="4920220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920223">&#34;freebsd/arm&#34;</span><span class="op" id="4920236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920242">true</span><span class="op" id="4920246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920249">&#34;linux/386&#34;</span><span class="op" id="4920260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920268">true</span><span class="op" id="4920272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920275">&#34;linux/amd64&#34;</span><span class="op" id="4920288">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920294">true</span><span class="op" id="4920298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920301">&#34;linux/arm&#34;</span><span class="op" id="4920312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920320">true</span><span class="op" id="4920324">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920327">&#34;android/386&#34;</span><span class="op" id="4920340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920346">true</span><span class="op" id="4920350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920353">&#34;android/amd64&#34;</span><span class="op" id="4920368">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920372">true</span><span class="op" id="4920376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920379">&#34;android/arm&#34;</span><span class="op" id="4920392">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920398">true</span><span class="op" id="4920402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920405">&#34;netbsd/386&#34;</span><span class="op" id="4920417">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920424">true</span><span class="op" id="4920428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920431">&#34;netbsd/amd64&#34;</span><span class="op" id="4920445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920450">true</span><span class="op" id="4920454">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920457">&#34;netbsd/arm&#34;</span><span class="op" id="4920469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920476">true</span><span class="op" id="4920480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920483">&#34;openbsd/386&#34;</span><span class="op" id="4920496">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920502">true</span><span class="op" id="4920506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920509">&#34;openbsd/amd64&#34;</span><span class="op" id="4920524">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920528">true</span><span class="op" id="4920532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920535">&#34;windows/386&#34;</span><span class="op" id="4920548">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920554">true</span><span class="op" id="4920558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4920561">&#34;windows/amd64&#34;</span><span class="op" id="4920576">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920580">true</span><span class="op" id="4920584">,</span><br>
<span class="lineno">280</span><span class="op" id="4920586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4920589">func</span>&nbsp;<span class="ident" id="4920594">defaultContext</span><span class="op" id="4920608">(</span><span class="op" id="4920609">)</span>&nbsp;<span class="ident" id="4920611">Context</span>&nbsp;<span class="op" id="4920619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4920622">var</span>&nbsp;<span class="ident" id="4920626">c</span>&nbsp;<span class="ident" id="4920628">Context</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4920638">c</span><span class="op" id="4920639">.</span><span class="ident" id="4920640">GOARCH</span>&nbsp;<span class="op" id="4920647">=</span>&nbsp;<span class="ident" id="4920649">envOr</span><span class="op" id="4920654">(</span><span class="string" id="4920655">&#34;GOARCH&#34;</span><span class="op" id="4920663">,</span>&nbsp;<span class="ident" id="4920665">runtime</span><span class="op" id="4920672">.</span><span class="ident" id="4920673">GOARCH</span><span class="op" id="4920679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4920682">c</span><span class="op" id="4920683">.</span><span class="ident" id="4920684">GOOS</span>&nbsp;<span class="op" id="4920689">=</span>&nbsp;<span class="ident" id="4920691">envOr</span><span class="op" id="4920696">(</span><span class="string" id="4920697">&#34;GOOS&#34;</span><span class="op" id="4920703">,</span>&nbsp;<span class="ident" id="4920705">runtime</span><span class="op" id="4920712">.</span><span class="ident" id="4920713">GOOS</span><span class="op" id="4920717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4920720">c</span><span class="op" id="4920721">.</span><span class="ident" id="4920722">GOROOT</span>&nbsp;<span class="op" id="4920729">=</span>&nbsp;<span class="ident" id="4920731">runtime</span><span class="op" id="4920738">.</span><span class="ident" id="4920739">GOROOT</span><span class="op" id="4920745">(</span><span class="op" id="4920746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4920749">c</span><span class="op" id="4920750">.</span><span class="ident" id="4920751">GOPATH</span>&nbsp;<span class="op" id="4920758">=</span>&nbsp;<span class="ident" id="4920760">envOr</span><span class="op" id="4920765">(</span><span class="string" id="4920766">&#34;GOPATH&#34;</span><span class="op" id="4920774">,</span>&nbsp;<span class="string" id="4920776">&#34;&#34;</span><span class="op" id="4920778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4920781">c</span><span class="op" id="4920782">.</span><span class="ident" id="4920783">Compiler</span>&nbsp;<span class="op" id="4920792">=</span>&nbsp;<span class="ident" id="4920794">runtime</span><span class="op" id="4920801">.</span><span class="ident" id="4920802">Compiler</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4920813">//&nbsp;Each&nbsp;major&nbsp;Go&nbsp;release&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.x&nbsp;series&nbsp;should&nbsp;add&nbsp;a&nbsp;tag&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4920883">//&nbsp;Old&nbsp;tags&nbsp;should&nbsp;not&nbsp;be&nbsp;removed.&nbsp;That&nbsp;is,&nbsp;the&nbsp;go1.x&nbsp;tag&nbsp;is&nbsp;present</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4920953">//&nbsp;in&nbsp;all&nbsp;releases&nbsp;&gt;=&nbsp;Go&nbsp;1.x.&nbsp;Code&nbsp;that&nbsp;requires&nbsp;Go&nbsp;1.x&nbsp;or&nbsp;later&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921026">//&nbsp;say&nbsp;&#34;+build&nbsp;go1.x&#34;,&nbsp;and&nbsp;code&nbsp;that&nbsp;should&nbsp;only&nbsp;be&nbsp;built&nbsp;before&nbsp;Go&nbsp;1.x</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921099">//&nbsp;(perhaps&nbsp;it&nbsp;is&nbsp;the&nbsp;stub&nbsp;to&nbsp;use&nbsp;in&nbsp;that&nbsp;case)&nbsp;should&nbsp;say&nbsp;&#34;+build&nbsp;!go1.x&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921176">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921180">//&nbsp;When&nbsp;we&nbsp;reach&nbsp;Go&nbsp;1.5&nbsp;the&nbsp;line&nbsp;will&nbsp;read</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921224">//&nbsp;&nbsp;&nbsp;&nbsp;c.ReleaseTags&nbsp;=&nbsp;[]string{&#34;go1.1&#34;,&nbsp;&#34;go1.2&#34;,&nbsp;&#34;go1.3&#34;,&nbsp;&#34;go1.4&#34;,&nbsp;&#34;go1.5&#34;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921298">//&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4921313">c</span><span class="op" id="4921314">.</span><span class="ident" id="4921315">ReleaseTags</span>&nbsp;<span class="op" id="4921327">=</span>&nbsp;<span class="op" id="4921329">[</span><span class="op" id="4921330">]</span><span class="builtintype" id="4921331">string</span><span class="op" id="4921337">{</span><span class="string" id="4921338">&#34;go1.1&#34;</span><span class="op" id="4921345">,</span>&nbsp;<span class="string" id="4921347">&#34;go1.2&#34;</span><span class="op" id="4921354">,</span>&nbsp;<span class="string" id="4921356">&#34;go1.3&#34;</span><span class="op" id="4921363">,</span>&nbsp;<span class="string" id="4921365">&#34;go1.4&#34;</span><span class="op" id="4921372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921376">switch</span>&nbsp;<span class="ident" id="4921383">os</span><span class="op" id="4921385">.</span><span class="ident" id="4921386">Getenv</span><span class="op" id="4921392">(</span><span class="string" id="4921393">&#34;CGO_ENABLED&#34;</span><span class="op" id="4921406">)</span>&nbsp;<span class="op" id="4921408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921411">case</span>&nbsp;<span class="string" id="4921416">&#34;1&#34;</span><span class="op" id="4921419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4921423">c</span><span class="op" id="4921424">.</span><span class="ident" id="4921425">CgoEnabled</span>&nbsp;<span class="op" id="4921436">=</span>&nbsp;<span class="builtintype" id="4921438">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921444">case</span>&nbsp;<span class="string" id="4921449">&#34;0&#34;</span><span class="op" id="4921452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4921456">c</span><span class="op" id="4921457">.</span><span class="ident" id="4921458">CgoEnabled</span>&nbsp;<span class="op" id="4921469">=</span>&nbsp;<span class="builtintype" id="4921471">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921478">default</span><span class="op" id="4921485">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921489">//&nbsp;cgo&nbsp;must&nbsp;be&nbsp;explicitly&nbsp;enabled&nbsp;for&nbsp;cross&nbsp;compilation&nbsp;builds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921554">if</span>&nbsp;<span class="ident" id="4921557">runtime</span><span class="op" id="4921564">.</span><span class="ident" id="4921565">GOARCH</span>&nbsp;<span class="op" id="4921572">==</span>&nbsp;<span class="ident" id="4921575">c</span><span class="op" id="4921576">.</span><span class="ident" id="4921577">GOARCH</span>&nbsp;<span class="op" id="4921584">&amp;&amp;</span>&nbsp;<span class="ident" id="4921587">runtime</span><span class="op" id="4921594">.</span><span class="ident" id="4921595">GOOS</span>&nbsp;<span class="op" id="4921600">==</span>&nbsp;<span class="ident" id="4921603">c</span><span class="op" id="4921604">.</span><span class="ident" id="4921605">GOOS</span>&nbsp;<span class="op" id="4921610">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4921615">c</span><span class="op" id="4921616">.</span><span class="ident" id="4921617">CgoEnabled</span>&nbsp;<span class="op" id="4921628">=</span>&nbsp;<span class="ident" id="4921630">cgoEnabled</span><span class="op" id="4921640">[</span><span class="ident" id="4921641">c</span><span class="op" id="4921642">.</span><span class="ident" id="4921643">GOOS</span><span class="op" id="4921647">+</span><span class="string" id="4921648">&#34;/&#34;</span><span class="op" id="4921651">+</span><span class="ident" id="4921652">c</span><span class="op" id="4921653">.</span><span class="ident" id="4921654">GOARCH</span><span class="op" id="4921660">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921665">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4921673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4921677">c</span><span class="op" id="4921678">.</span><span class="ident" id="4921679">CgoEnabled</span>&nbsp;<span class="op" id="4921690">=</span>&nbsp;<span class="builtintype" id="4921692">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4921699">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921703">return</span>&nbsp;<span class="ident" id="4921710">c</span><br>
<span class="lineno"></span><span class="op" id="4921712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4921715">func</span>&nbsp;<span class="ident" id="4921720">envOr</span><span class="op" id="4921725">(</span><span class="ident" id="4921726">name</span><span class="op" id="4921730">,</span>&nbsp;<span class="ident" id="4921732">def</span>&nbsp;<span class="builtintype" id="4921736">string</span><span class="op" id="4921742">)</span>&nbsp;<span class="builtintype" id="4921744">string</span>&nbsp;<span class="op" id="4921751">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4921754">s</span>&nbsp;<span class="op" id="4921756">:=</span>&nbsp;<span class="ident" id="4921759">os</span><span class="op" id="4921761">.</span><span class="ident" id="4921762">Getenv</span><span class="op" id="4921768">(</span><span class="ident" id="4921769">name</span><span class="op" id="4921773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921776">if</span>&nbsp;<span class="ident" id="4921779">s</span>&nbsp;<span class="op" id="4921781">==</span>&nbsp;<span class="string" id="4921784">&#34;&#34;</span>&nbsp;<span class="op" id="4921787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921791">return</span>&nbsp;<span class="ident" id="4921798">def</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4921803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4921806">return</span>&nbsp;<span class="ident" id="4921813">s</span><br>
<span class="lineno">325</span><span class="op" id="4921815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4921818">//&nbsp;An&nbsp;ImportMode&nbsp;controls&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;Import&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="4921879">type</span>&nbsp;<span class="ident" id="4921884">ImportMode</span>&nbsp;<span class="builtintype" id="4921895">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="4921901">const</span>&nbsp;<span class="op" id="4921907">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921910">//&nbsp;If&nbsp;FindOnly&nbsp;is&nbsp;set,&nbsp;Import&nbsp;stops&nbsp;after&nbsp;locating&nbsp;the&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4921976">//&nbsp;that&nbsp;should&nbsp;contain&nbsp;the&nbsp;sources&nbsp;for&nbsp;a&nbsp;package.&nbsp;&nbsp;It&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922040">//&nbsp;read&nbsp;any&nbsp;files&nbsp;in&nbsp;the&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922077">FindOnly</span>&nbsp;<span class="ident" id="4922086">ImportMode</span>&nbsp;<span class="op" id="4922097">=</span>&nbsp;<span class="num" id="4922099">1</span>&nbsp;<span class="op" id="4922101">&lt;&lt;</span>&nbsp;<span class="ident" id="4922104">iota</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922111">//&nbsp;If&nbsp;AllowBinary&nbsp;is&nbsp;set,&nbsp;Import&nbsp;can&nbsp;be&nbsp;satisfied&nbsp;by&nbsp;a&nbsp;compiled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922176">//&nbsp;package&nbsp;object&nbsp;without&nbsp;corresponding&nbsp;sources.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922226">AllowBinary</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922240">//&nbsp;If&nbsp;ImportComment&nbsp;is&nbsp;set,&nbsp;parse&nbsp;import&nbsp;comments&nbsp;on&nbsp;package&nbsp;statements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922314">//&nbsp;Import&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;finds&nbsp;a&nbsp;comment&nbsp;it&nbsp;cannot&nbsp;understand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922385">//&nbsp;or&nbsp;finds&nbsp;conflicting&nbsp;comments&nbsp;in&nbsp;multiple&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4922445">//&nbsp;See&nbsp;golang.org/s/go14customimport&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922505">ImportComment</span><br>
<span class="lineno">345</span><span class="op" id="4922519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4922522">//&nbsp;A&nbsp;Package&nbsp;describes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="4922582">type</span>&nbsp;<span class="ident" id="4922587">Package</span>&nbsp;<span class="keyword" id="4922595">struct</span>&nbsp;<span class="op" id="4922602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922605">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4922619">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922628">//&nbsp;directory&nbsp;containing&nbsp;package&nbsp;sources</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922669">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4922683">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922692">//&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922709">ImportComment</span>&nbsp;<span class="builtintype" id="4922723">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922732">//&nbsp;path&nbsp;in&nbsp;import&nbsp;comment&nbsp;on&nbsp;package&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922780">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4922794">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922803">//&nbsp;documentation&nbsp;synopsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922830">ImportPath</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4922844">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922853">//&nbsp;import&nbsp;path&nbsp;of&nbsp;package&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922896">Root</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4922910">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922919">//&nbsp;root&nbsp;of&nbsp;Go&nbsp;tree&nbsp;where&nbsp;this&nbsp;package&nbsp;lives</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4922964">SrcRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4922978">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4922987">//&nbsp;package&nbsp;source&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923037">PkgRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4923051">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4923060">//&nbsp;package&nbsp;install&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923111">BinDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4923125">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4923134">//&nbsp;command&nbsp;install&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923180">Goroot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4923194">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4923203">//&nbsp;package&nbsp;found&nbsp;in&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923232">PkgObj</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4923246">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4923255">//&nbsp;installed&nbsp;.a&nbsp;file</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923277">AllTags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923291">[</span><span class="op" id="4923292">]</span><span class="builtintype" id="4923293">string</span>&nbsp;<span class="comment" id="4923300">//&nbsp;tags&nbsp;that&nbsp;can&nbsp;influence&nbsp;file&nbsp;selection&nbsp;in&nbsp;this&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923361">ConflictDir</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4923375">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4923384">//&nbsp;this&nbsp;directory&nbsp;shadows&nbsp;Dir&nbsp;in&nbsp;$GOPATH</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4923427">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923444">GoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923459">[</span><span class="op" id="4923460">]</span><span class="builtintype" id="4923461">string</span>&nbsp;<span class="comment" id="4923468">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;(excluding&nbsp;CgoFiles,&nbsp;TestGoFiles,&nbsp;XTestGoFiles)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923537">CgoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923552">[</span><span class="op" id="4923553">]</span><span class="builtintype" id="4923554">string</span>&nbsp;<span class="comment" id="4923561">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;that&nbsp;import&nbsp;&#34;C&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923598">IgnoredGoFiles</span>&nbsp;<span class="op" id="4923613">[</span><span class="op" id="4923614">]</span><span class="builtintype" id="4923615">string</span>&nbsp;<span class="comment" id="4923622">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;ignored&nbsp;for&nbsp;this&nbsp;build</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923666">CFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923681">[</span><span class="op" id="4923682">]</span><span class="builtintype" id="4923683">string</span>&nbsp;<span class="comment" id="4923690">//&nbsp;.c&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923710">CXXFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923725">[</span><span class="op" id="4923726">]</span><span class="builtintype" id="4923727">string</span>&nbsp;<span class="comment" id="4923734">//&nbsp;.cc,&nbsp;.cpp&nbsp;and&nbsp;.cxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923770">MFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923785">[</span><span class="op" id="4923786">]</span><span class="builtintype" id="4923787">string</span>&nbsp;<span class="comment" id="4923794">//&nbsp;.m&nbsp;(Objective-C)&nbsp;source&nbsp;files</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923828">HFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923843">[</span><span class="op" id="4923844">]</span><span class="builtintype" id="4923845">string</span>&nbsp;<span class="comment" id="4923852">//&nbsp;.h,&nbsp;.hh,&nbsp;.hpp&nbsp;and&nbsp;.hxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923892">SFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923907">[</span><span class="op" id="4923908">]</span><span class="builtintype" id="4923909">string</span>&nbsp;<span class="comment" id="4923916">//&nbsp;.s&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923936">SwigFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4923951">[</span><span class="op" id="4923952">]</span><span class="builtintype" id="4923953">string</span>&nbsp;<span class="comment" id="4923960">//&nbsp;.swig&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4923976">SwigCXXFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4923991">[</span><span class="op" id="4923992">]</span><span class="builtintype" id="4923993">string</span>&nbsp;<span class="comment" id="4924000">//&nbsp;.swigcxx&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924019">SysoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4924034">[</span><span class="op" id="4924035">]</span><span class="builtintype" id="4924036">string</span>&nbsp;<span class="comment" id="4924043">//&nbsp;.syso&nbsp;system&nbsp;object&nbsp;files&nbsp;to&nbsp;add&nbsp;to&nbsp;archive</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924092">//&nbsp;Cgo&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924111">CgoCFLAGS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4924124">[</span><span class="op" id="4924125">]</span><span class="builtintype" id="4924126">string</span>&nbsp;<span class="comment" id="4924133">//&nbsp;Cgo&nbsp;CFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924159">CgoCPPFLAGS</span>&nbsp;&nbsp;<span class="op" id="4924172">[</span><span class="op" id="4924173">]</span><span class="builtintype" id="4924174">string</span>&nbsp;<span class="comment" id="4924181">//&nbsp;Cgo&nbsp;CPPFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924209">CgoCXXFLAGS</span>&nbsp;&nbsp;<span class="op" id="4924222">[</span><span class="op" id="4924223">]</span><span class="builtintype" id="4924224">string</span>&nbsp;<span class="comment" id="4924231">//&nbsp;Cgo&nbsp;CXXFLAGS&nbsp;directives</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924259">CgoLDFLAGS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4924272">[</span><span class="op" id="4924273">]</span><span class="builtintype" id="4924274">string</span>&nbsp;<span class="comment" id="4924281">//&nbsp;Cgo&nbsp;LDFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924308">CgoPkgConfig</span>&nbsp;<span class="op" id="4924321">[</span><span class="op" id="4924322">]</span><span class="builtintype" id="4924323">string</span>&nbsp;<span class="comment" id="4924330">//&nbsp;Cgo&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924361">//&nbsp;Dependency&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924388">Imports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4924398">[</span><span class="op" id="4924399">]</span><span class="builtintype" id="4924400">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924426">//&nbsp;imports&nbsp;from&nbsp;GoFiles,&nbsp;CgoFiles</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924461">ImportPos</span>&nbsp;<span class="keyword" id="4924471">map</span><span class="op" id="4924474">[</span><span class="builtintype" id="4924475">string</span><span class="op" id="4924481">]</span><span class="op" id="4924482">[</span><span class="op" id="4924483">]</span><span class="ident" id="4924484">token</span><span class="op" id="4924489">.</span><span class="ident" id="4924490">Position</span>&nbsp;<span class="comment" id="4924499">//&nbsp;line&nbsp;information&nbsp;for&nbsp;Imports</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924533">//&nbsp;Test&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924554">TestGoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4924569">[</span><span class="op" id="4924570">]</span><span class="builtintype" id="4924571">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924597">//&nbsp;_test.go&nbsp;files&nbsp;in&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924627">TestImports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4924642">[</span><span class="op" id="4924643">]</span><span class="builtintype" id="4924644">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924670">//&nbsp;imports&nbsp;from&nbsp;TestGoFiles</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924699">TestImportPos</span>&nbsp;&nbsp;<span class="keyword" id="4924714">map</span><span class="op" id="4924717">[</span><span class="builtintype" id="4924718">string</span><span class="op" id="4924724">]</span><span class="op" id="4924725">[</span><span class="op" id="4924726">]</span><span class="ident" id="4924727">token</span><span class="op" id="4924732">.</span><span class="ident" id="4924733">Position</span>&nbsp;<span class="comment" id="4924742">//&nbsp;line&nbsp;information&nbsp;for&nbsp;TestImports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924779">XTestGoFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4924794">[</span><span class="op" id="4924795">]</span><span class="builtintype" id="4924796">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924822">//&nbsp;_test.go&nbsp;files&nbsp;outside&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924857">XTestImports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4924872">[</span><span class="op" id="4924873">]</span><span class="builtintype" id="4924874">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4924900">//&nbsp;imports&nbsp;from&nbsp;XTestGoFiles</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4924930">XTestImportPos</span>&nbsp;<span class="keyword" id="4924945">map</span><span class="op" id="4924948">[</span><span class="builtintype" id="4924949">string</span><span class="op" id="4924955">]</span><span class="op" id="4924956">[</span><span class="op" id="4924957">]</span><span class="ident" id="4924958">token</span><span class="op" id="4924963">.</span><span class="ident" id="4924964">Position</span>&nbsp;<span class="comment" id="4924973">//&nbsp;line&nbsp;information&nbsp;for&nbsp;XTestImports</span><br>
<span class="lineno"></span><span class="op" id="4925010">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="comment" id="4925013">//&nbsp;IsCommand&nbsp;reports&nbsp;whether&nbsp;the&nbsp;package&nbsp;is&nbsp;considered&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4925070">//&nbsp;command&nbsp;to&nbsp;be&nbsp;installed&nbsp;(not&nbsp;just&nbsp;a&nbsp;library).</span><br>
<span class="lineno"></span><span class="comment" id="4925119">//&nbsp;Packages&nbsp;named&nbsp;&#34;main&#34;&nbsp;are&nbsp;treated&nbsp;as&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="4925169">func</span>&nbsp;<span class="op" id="4925174">(</span><span class="ident" id="4925175">p</span>&nbsp;<span class="op" id="4925177">*</span><span class="ident" id="4925178">Package</span><span class="op" id="4925185">)</span>&nbsp;<span class="ident" id="4925187">IsCommand</span><span class="op" id="4925196">(</span><span class="op" id="4925197">)</span>&nbsp;<span class="builtintype" id="4925199">bool</span>&nbsp;<span class="op" id="4925204">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4925207">return</span>&nbsp;<span class="ident" id="4925214">p</span><span class="op" id="4925215">.</span><span class="ident" id="4925216">Name</span>&nbsp;<span class="op" id="4925221">==</span>&nbsp;<span class="string" id="4925224">&#34;main&#34;</span><br>
<span class="lineno"></span><span class="op" id="4925231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4925234">//&nbsp;ImportDir&nbsp;is&nbsp;like&nbsp;Import&nbsp;but&nbsp;processes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4925300">//&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno">405</span><span class="keyword" id="4925324">func</span>&nbsp;<span class="op" id="4925329">(</span><span class="ident" id="4925330">ctxt</span>&nbsp;<span class="op" id="4925335">*</span><span class="ident" id="4925336">Context</span><span class="op" id="4925343">)</span>&nbsp;<span class="ident" id="4925345">ImportDir</span><span class="op" id="4925354">(</span><span class="ident" id="4925355">dir</span>&nbsp;<span class="builtintype" id="4925359">string</span><span class="op" id="4925365">,</span>&nbsp;<span class="ident" id="4925367">mode</span>&nbsp;<span class="ident" id="4925372">ImportMode</span><span class="op" id="4925382">)</span>&nbsp;<span class="op" id="4925384">(</span><span class="op" id="4925385">*</span><span class="ident" id="4925386">Package</span><span class="op" id="4925393">,</span>&nbsp;<span class="builtintype" id="4925395">error</span><span class="op" id="4925400">)</span>&nbsp;<span class="op" id="4925402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4925405">return</span>&nbsp;<span class="ident" id="4925412">ctxt</span><span class="op" id="4925416">.</span><span class="ident" id="4925417">Import</span><span class="op" id="4925423">(</span><span class="string" id="4925424">&#34;.&#34;</span><span class="op" id="4925427">,</span>&nbsp;<span class="ident" id="4925429">dir</span><span class="op" id="4925432">,</span>&nbsp;<span class="ident" id="4925434">mode</span><span class="op" id="4925438">)</span><br>
<span class="lineno"></span><span class="op" id="4925440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4925443">//&nbsp;NoGoError&nbsp;is&nbsp;the&nbsp;error&nbsp;used&nbsp;by&nbsp;Import&nbsp;to&nbsp;describe&nbsp;a&nbsp;directory</span><br>
<span class="lineno">410</span><span class="comment" id="4925508">//&nbsp;containing&nbsp;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files.&nbsp;(It&nbsp;may&nbsp;still&nbsp;contain</span><br>
<span class="lineno"></span><span class="comment" id="4925574">//&nbsp;test&nbsp;files,&nbsp;files&nbsp;hidden&nbsp;by&nbsp;build&nbsp;tags,&nbsp;and&nbsp;so&nbsp;on.)</span><br>
<span class="lineno"></span><span class="keyword" id="4925629">type</span>&nbsp;<span class="ident" id="4925634">NoGoError</span>&nbsp;<span class="keyword" id="4925644">struct</span>&nbsp;<span class="op" id="4925651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925654">Dir</span>&nbsp;<span class="builtintype" id="4925658">string</span><br>
<span class="lineno"></span><span class="op" id="4925665">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="keyword" id="4925668">func</span>&nbsp;<span class="op" id="4925673">(</span><span class="ident" id="4925674">e</span>&nbsp;<span class="op" id="4925676">*</span><span class="ident" id="4925677">NoGoError</span><span class="op" id="4925686">)</span>&nbsp;<span class="ident" id="4925688">Error</span><span class="op" id="4925693">(</span><span class="op" id="4925694">)</span>&nbsp;<span class="builtintype" id="4925696">string</span>&nbsp;<span class="op" id="4925703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4925706">return</span>&nbsp;<span class="string" id="4925713">&#34;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="4925748">+</span>&nbsp;<span class="ident" id="4925750">e</span><span class="op" id="4925751">.</span><span class="ident" id="4925752">Dir</span><br>
<span class="lineno"></span><span class="op" id="4925756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="4925759">//&nbsp;MultiplePackageError&nbsp;describes&nbsp;a&nbsp;directory&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="4925816">//&nbsp;multiple&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;for&nbsp;multiple&nbsp;packages.</span><br>
<span class="lineno"></span><span class="keyword" id="4925877">type</span>&nbsp;<span class="ident" id="4925882">MultiplePackageError</span>&nbsp;<span class="keyword" id="4925903">struct</span>&nbsp;<span class="op" id="4925910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925913">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4925922">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4925931">//&nbsp;directory&nbsp;containing&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4925962">Packages</span>&nbsp;<span class="op" id="4925971">[</span><span class="op" id="4925972">]</span><span class="builtintype" id="4925973">string</span>&nbsp;<span class="comment" id="4925980">//&nbsp;package&nbsp;names&nbsp;found</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926004">Files</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4926013">[</span><span class="op" id="4926014">]</span><span class="builtintype" id="4926015">string</span>&nbsp;<span class="comment" id="4926022">//&nbsp;corresponding&nbsp;files:&nbsp;Files[i]&nbsp;declares&nbsp;package&nbsp;Packages[i]</span><br>
<span class="lineno"></span><span class="op" id="4926084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4926087">func</span>&nbsp;<span class="op" id="4926092">(</span><span class="ident" id="4926093">e</span>&nbsp;<span class="op" id="4926095">*</span><span class="ident" id="4926096">MultiplePackageError</span><span class="op" id="4926116">)</span>&nbsp;<span class="ident" id="4926118">Error</span><span class="op" id="4926123">(</span><span class="op" id="4926124">)</span>&nbsp;<span class="builtintype" id="4926126">string</span>&nbsp;<span class="op" id="4926133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4926136">//&nbsp;Error&nbsp;string&nbsp;limited&nbsp;to&nbsp;two&nbsp;entries&nbsp;for&nbsp;compatibility.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4926195">return</span>&nbsp;<span class="ident" id="4926202">fmt</span><span class="op" id="4926205">.</span><span class="ident" id="4926206">Sprintf</span><span class="op" id="4926213">(</span><span class="string" id="4926214">&#34;found&nbsp;packages&nbsp;%s&nbsp;(%s)&nbsp;and&nbsp;%s&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="4926256">,</span>&nbsp;<span class="ident" id="4926258">e</span><span class="op" id="4926259">.</span><span class="ident" id="4926260">Packages</span><span class="op" id="4926268">[</span><span class="num" id="4926269">0</span><span class="op" id="4926270">]</span><span class="op" id="4926271">,</span>&nbsp;<span class="ident" id="4926273">e</span><span class="op" id="4926274">.</span><span class="ident" id="4926275">Files</span><span class="op" id="4926280">[</span><span class="num" id="4926281">0</span><span class="op" id="4926282">]</span><span class="op" id="4926283">,</span>&nbsp;<span class="ident" id="4926285">e</span><span class="op" id="4926286">.</span><span class="ident" id="4926287">Packages</span><span class="op" id="4926295">[</span><span class="num" id="4926296">1</span><span class="op" id="4926297">]</span><span class="op" id="4926298">,</span>&nbsp;<span class="ident" id="4926300">e</span><span class="op" id="4926301">.</span><span class="ident" id="4926302">Files</span><span class="op" id="4926307">[</span><span class="num" id="4926308">1</span><span class="op" id="4926309">]</span><span class="op" id="4926310">,</span>&nbsp;<span class="ident" id="4926312">e</span><span class="op" id="4926313">.</span><span class="ident" id="4926314">Dir</span><span class="op" id="4926317">)</span><br>
<span class="lineno"></span><span class="op" id="4926319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4926322">func</span>&nbsp;<span class="ident" id="4926327">nameExt</span><span class="op" id="4926334">(</span><span class="ident" id="4926335">name</span>&nbsp;<span class="builtintype" id="4926340">string</span><span class="op" id="4926346">)</span>&nbsp;<span class="builtintype" id="4926348">string</span>&nbsp;<span class="op" id="4926355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4926358">i</span>&nbsp;<span class="op" id="4926360">:=</span>&nbsp;<span class="ident" id="4926363">strings</span><span class="op" id="4926370">.</span><span class="ident" id="4926371">LastIndex</span><span class="op" id="4926380">(</span><span class="ident" id="4926381">name</span><span class="op" id="4926385">,</span>&nbsp;<span class="string" id="4926387">&#34;.&#34;</span><span class="op" id="4926390">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4926393">if</span>&nbsp;<span class="ident" id="4926396">i</span>&nbsp;<span class="op" id="4926398">&lt;</span>&nbsp;<span class="num" id="4926400">0</span>&nbsp;<span class="op" id="4926402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4926406">return</span>&nbsp;<span class="string" id="4926413">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4926417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4926420">return</span>&nbsp;<span class="ident" id="4926427">name</span><span class="op" id="4926431">[</span><span class="ident" id="4926432">i</span><span class="op" id="4926433">:</span><span class="op" id="4926434">]</span><br>
<span class="lineno"></span><span class="op" id="4926436">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="4926439">//&nbsp;Import&nbsp;returns&nbsp;details&nbsp;about&nbsp;the&nbsp;Go&nbsp;package&nbsp;named&nbsp;by&nbsp;the&nbsp;import&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="4926512">//&nbsp;interpreting&nbsp;local&nbsp;import&nbsp;paths&nbsp;relative&nbsp;to&nbsp;the&nbsp;srcDir&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="4926581">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;a&nbsp;local&nbsp;import&nbsp;path&nbsp;naming&nbsp;a&nbsp;package&nbsp;that&nbsp;can&nbsp;be&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="4926657">//&nbsp;using&nbsp;a&nbsp;standard&nbsp;import&nbsp;path,&nbsp;the&nbsp;returned&nbsp;package&nbsp;will&nbsp;set&nbsp;p.ImportPath</span><br>
<span class="lineno">445</span><span class="comment" id="4926733">//&nbsp;to&nbsp;that&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="4926750">//</span><br>
<span class="lineno"></span><span class="comment" id="4926753">//&nbsp;In&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;package,&nbsp;.go,&nbsp;.c,&nbsp;.h,&nbsp;and&nbsp;.s&nbsp;files&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="4926827">//&nbsp;considered&nbsp;part&nbsp;of&nbsp;the&nbsp;package&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span><span class="comment" id="4926873">//</span><br>
<span class="lineno">450</span><span class="comment" id="4926876">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;.go&nbsp;files&nbsp;in&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span><span class="comment" id="4926916">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;files&nbsp;starting&nbsp;with&nbsp;_&nbsp;or&nbsp;.&nbsp;(likely&nbsp;editor&nbsp;temporary&nbsp;files)</span><br>
<span class="lineno"></span><span class="comment" id="4926980">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;files&nbsp;with&nbsp;build&nbsp;constraints&nbsp;not&nbsp;satisfied&nbsp;by&nbsp;the&nbsp;context</span><br>
<span class="lineno"></span><span class="comment" id="4927043">//</span><br>
<span class="lineno"></span><span class="comment" id="4927046">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;Import&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;and&nbsp;a&nbsp;non-nil</span><br>
<span class="lineno">455</span><span class="comment" id="4927114">//&nbsp;*Package&nbsp;containing&nbsp;partial&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="4927158">//</span><br>
<span class="lineno"></span><span class="keyword" id="4927161">func</span>&nbsp;<span class="op" id="4927166">(</span><span class="ident" id="4927167">ctxt</span>&nbsp;<span class="op" id="4927172">*</span><span class="ident" id="4927173">Context</span><span class="op" id="4927180">)</span>&nbsp;<span class="ident" id="4927182">Import</span><span class="op" id="4927188">(</span><span class="ident" id="4927189">path</span>&nbsp;<span class="builtintype" id="4927194">string</span><span class="op" id="4927200">,</span>&nbsp;<span class="ident" id="4927202">srcDir</span>&nbsp;<span class="builtintype" id="4927209">string</span><span class="op" id="4927215">,</span>&nbsp;<span class="ident" id="4927217">mode</span>&nbsp;<span class="ident" id="4927222">ImportMode</span><span class="op" id="4927232">)</span>&nbsp;<span class="op" id="4927234">(</span><span class="op" id="4927235">*</span><span class="ident" id="4927236">Package</span><span class="op" id="4927243">,</span>&nbsp;<span class="builtintype" id="4927245">error</span><span class="op" id="4927250">)</span>&nbsp;<span class="op" id="4927252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927255">p</span>&nbsp;<span class="op" id="4927257">:=</span>&nbsp;<span class="op" id="4927260">&amp;</span><span class="ident" id="4927261">Package</span><span class="op" id="4927268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927272">ImportPath</span><span class="op" id="4927282">:</span>&nbsp;<span class="ident" id="4927284">path</span><span class="op" id="4927288">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927294">if</span>&nbsp;<span class="ident" id="4927297">path</span>&nbsp;<span class="op" id="4927302">==</span>&nbsp;<span class="string" id="4927305">&#34;&#34;</span>&nbsp;<span class="op" id="4927308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927312">return</span>&nbsp;<span class="ident" id="4927319">p</span><span class="op" id="4927320">,</span>&nbsp;<span class="ident" id="4927322">fmt</span><span class="op" id="4927325">.</span><span class="ident" id="4927326">Errorf</span><span class="op" id="4927332">(</span><span class="string" id="4927333">&#34;import&nbsp;%q:&nbsp;invalid&nbsp;import&nbsp;path&#34;</span><span class="op" id="4927365">,</span>&nbsp;<span class="ident" id="4927367">path</span><span class="op" id="4927371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927378">var</span>&nbsp;<span class="ident" id="4927382">pkga</span>&nbsp;<span class="builtintype" id="4927387">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927395">var</span>&nbsp;<span class="ident" id="4927399">pkgerr</span>&nbsp;<span class="builtintype" id="4927406">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927413">switch</span>&nbsp;<span class="ident" id="4927420">ctxt</span><span class="op" id="4927424">.</span><span class="ident" id="4927425">Compiler</span>&nbsp;<span class="op" id="4927434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927437">case</span>&nbsp;<span class="string" id="4927442">&#34;gccgo&#34;</span><span class="op" id="4927449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927453">dir</span><span class="op" id="4927456">,</span>&nbsp;<span class="ident" id="4927458">elem</span>&nbsp;<span class="op" id="4927463">:=</span>&nbsp;<span class="ident" id="4927466">pathpkg</span><span class="op" id="4927473">.</span><span class="ident" id="4927474">Split</span><span class="op" id="4927479">(</span><span class="ident" id="4927480">p</span><span class="op" id="4927481">.</span><span class="ident" id="4927482">ImportPath</span><span class="op" id="4927492">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927496">pkga</span>&nbsp;<span class="op" id="4927501">=</span>&nbsp;<span class="string" id="4927503">&#34;pkg/gccgo_&#34;</span>&nbsp;<span class="op" id="4927516">+</span>&nbsp;<span class="ident" id="4927518">ctxt</span><span class="op" id="4927522">.</span><span class="ident" id="4927523">GOOS</span>&nbsp;<span class="op" id="4927528">+</span>&nbsp;<span class="string" id="4927530">&#34;_&#34;</span>&nbsp;<span class="op" id="4927534">+</span>&nbsp;<span class="ident" id="4927536">ctxt</span><span class="op" id="4927540">.</span><span class="ident" id="4927541">GOARCH</span>&nbsp;<span class="op" id="4927548">+</span>&nbsp;<span class="string" id="4927550">&#34;/&#34;</span>&nbsp;<span class="op" id="4927554">+</span>&nbsp;<span class="ident" id="4927556">dir</span>&nbsp;<span class="op" id="4927560">+</span>&nbsp;<span class="string" id="4927562">&#34;lib&#34;</span>&nbsp;<span class="op" id="4927568">+</span>&nbsp;<span class="ident" id="4927570">elem</span>&nbsp;<span class="op" id="4927575">+</span>&nbsp;<span class="string" id="4927577">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927583">case</span>&nbsp;<span class="string" id="4927588">&#34;gc&#34;</span><span class="op" id="4927592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927596">suffix</span>&nbsp;<span class="op" id="4927603">:=</span>&nbsp;<span class="string" id="4927606">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927611">if</span>&nbsp;<span class="ident" id="4927614">ctxt</span><span class="op" id="4927618">.</span><span class="ident" id="4927619">InstallSuffix</span>&nbsp;<span class="op" id="4927633">!=</span>&nbsp;<span class="string" id="4927636">&#34;&#34;</span>&nbsp;<span class="op" id="4927639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927644">suffix</span>&nbsp;<span class="op" id="4927651">=</span>&nbsp;<span class="string" id="4927653">&#34;_&#34;</span>&nbsp;<span class="op" id="4927657">+</span>&nbsp;<span class="ident" id="4927659">ctxt</span><span class="op" id="4927663">.</span><span class="ident" id="4927664">InstallSuffix</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927684">pkga</span>&nbsp;<span class="op" id="4927689">=</span>&nbsp;<span class="string" id="4927691">&#34;pkg/&#34;</span>&nbsp;<span class="op" id="4927698">+</span>&nbsp;<span class="ident" id="4927700">ctxt</span><span class="op" id="4927704">.</span><span class="ident" id="4927705">GOOS</span>&nbsp;<span class="op" id="4927710">+</span>&nbsp;<span class="string" id="4927712">&#34;_&#34;</span>&nbsp;<span class="op" id="4927716">+</span>&nbsp;<span class="ident" id="4927718">ctxt</span><span class="op" id="4927722">.</span><span class="ident" id="4927723">GOARCH</span>&nbsp;<span class="op" id="4927730">+</span>&nbsp;<span class="ident" id="4927732">suffix</span>&nbsp;<span class="op" id="4927739">+</span>&nbsp;<span class="string" id="4927741">&#34;/&#34;</span>&nbsp;<span class="op" id="4927745">+</span>&nbsp;<span class="ident" id="4927747">p</span><span class="op" id="4927748">.</span><span class="ident" id="4927749">ImportPath</span>&nbsp;<span class="op" id="4927760">+</span>&nbsp;<span class="string" id="4927762">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927768">default</span><span class="op" id="4927775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4927779">//&nbsp;Save&nbsp;error&nbsp;for&nbsp;end&nbsp;of&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927816">pkgerr</span>&nbsp;<span class="op" id="4927823">=</span>&nbsp;<span class="ident" id="4927825">fmt</span><span class="op" id="4927828">.</span><span class="ident" id="4927829">Errorf</span><span class="op" id="4927835">(</span><span class="string" id="4927836">&#34;import&nbsp;%q:&nbsp;unknown&nbsp;compiler&nbsp;%q&#34;</span><span class="op" id="4927868">,</span>&nbsp;<span class="ident" id="4927870">path</span><span class="op" id="4927874">,</span>&nbsp;<span class="ident" id="4927876">ctxt</span><span class="op" id="4927880">.</span><span class="ident" id="4927881">Compiler</span><span class="op" id="4927889">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4927892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927896">binaryOnly</span>&nbsp;<span class="op" id="4927907">:=</span>&nbsp;<span class="builtintype" id="4927910">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927917">if</span>&nbsp;<span class="ident" id="4927920">IsLocalImport</span><span class="op" id="4927933">(</span><span class="ident" id="4927934">path</span><span class="op" id="4927938">)</span>&nbsp;<span class="op" id="4927940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4927944">pkga</span>&nbsp;<span class="op" id="4927949">=</span>&nbsp;<span class="string" id="4927951">&#34;&#34;</span>&nbsp;<span class="comment" id="4927954">//&nbsp;local&nbsp;imports&nbsp;have&nbsp;no&nbsp;installed&nbsp;path</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4927996">if</span>&nbsp;<span class="ident" id="4927999">srcDir</span>&nbsp;<span class="op" id="4928006">==</span>&nbsp;<span class="string" id="4928009">&#34;&#34;</span>&nbsp;<span class="op" id="4928012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928017">return</span>&nbsp;<span class="ident" id="4928024">p</span><span class="op" id="4928025">,</span>&nbsp;<span class="ident" id="4928027">fmt</span><span class="op" id="4928030">.</span><span class="ident" id="4928031">Errorf</span><span class="op" id="4928037">(</span><span class="string" id="4928038">&#34;import&nbsp;%q:&nbsp;import&nbsp;relative&nbsp;to&nbsp;unknown&nbsp;directory&#34;</span><span class="op" id="4928087">,</span>&nbsp;<span class="ident" id="4928089">path</span><span class="op" id="4928093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928101">if</span>&nbsp;<span class="op" id="4928104">!</span><span class="ident" id="4928105">ctxt</span><span class="op" id="4928109">.</span><span class="ident" id="4928110">isAbsPath</span><span class="op" id="4928119">(</span><span class="ident" id="4928120">path</span><span class="op" id="4928124">)</span>&nbsp;<span class="op" id="4928126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928131">p</span><span class="op" id="4928132">.</span><span class="ident" id="4928133">Dir</span>&nbsp;<span class="op" id="4928137">=</span>&nbsp;<span class="ident" id="4928139">ctxt</span><span class="op" id="4928143">.</span><span class="ident" id="4928144">joinPath</span><span class="op" id="4928152">(</span><span class="ident" id="4928153">srcDir</span><span class="op" id="4928159">,</span>&nbsp;<span class="ident" id="4928161">path</span><span class="op" id="4928165">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4928173">//&nbsp;Determine&nbsp;canonical&nbsp;import&nbsp;path,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928219">if</span>&nbsp;<span class="ident" id="4928222">ctxt</span><span class="op" id="4928226">.</span><span class="ident" id="4928227">GOROOT</span>&nbsp;<span class="op" id="4928234">!=</span>&nbsp;<span class="string" id="4928237">&#34;&#34;</span>&nbsp;<span class="op" id="4928240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928245">root</span>&nbsp;<span class="op" id="4928250">:=</span>&nbsp;<span class="ident" id="4928253">ctxt</span><span class="op" id="4928257">.</span><span class="ident" id="4928258">joinPath</span><span class="op" id="4928266">(</span><span class="ident" id="4928267">ctxt</span><span class="op" id="4928271">.</span><span class="ident" id="4928272">GOROOT</span><span class="op" id="4928278">,</span>&nbsp;<span class="string" id="4928280">&#34;src&#34;</span><span class="op" id="4928285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928290">if</span>&nbsp;<span class="ident" id="4928293">sub</span><span class="op" id="4928296">,</span>&nbsp;<span class="ident" id="4928298">ok</span>&nbsp;<span class="op" id="4928301">:=</span>&nbsp;<span class="ident" id="4928304">ctxt</span><span class="op" id="4928308">.</span><span class="ident" id="4928309">hasSubdir</span><span class="op" id="4928318">(</span><span class="ident" id="4928319">root</span><span class="op" id="4928323">,</span>&nbsp;<span class="ident" id="4928325">p</span><span class="op" id="4928326">.</span><span class="ident" id="4928327">Dir</span><span class="op" id="4928330">)</span><span class="op" id="4928331">;</span>&nbsp;<span class="ident" id="4928333">ok</span>&nbsp;<span class="op" id="4928336">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928342">p</span><span class="op" id="4928343">.</span><span class="ident" id="4928344">Goroot</span>&nbsp;<span class="op" id="4928351">=</span>&nbsp;<span class="builtintype" id="4928353">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928362">p</span><span class="op" id="4928363">.</span><span class="ident" id="4928364">ImportPath</span>&nbsp;<span class="op" id="4928375">=</span>&nbsp;<span class="ident" id="4928377">sub</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928385">p</span><span class="op" id="4928386">.</span><span class="ident" id="4928387">Root</span>&nbsp;<span class="op" id="4928392">=</span>&nbsp;<span class="ident" id="4928394">ctxt</span><span class="op" id="4928398">.</span><span class="ident" id="4928399">GOROOT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928410">goto</span>&nbsp;<span class="ident" id="4928415">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928424">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928432">all</span>&nbsp;<span class="op" id="4928436">:=</span>&nbsp;<span class="ident" id="4928439">ctxt</span><span class="op" id="4928443">.</span><span class="ident" id="4928444">gopath</span><span class="op" id="4928450">(</span><span class="op" id="4928451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928455">for</span>&nbsp;<span class="ident" id="4928459">i</span><span class="op" id="4928460">,</span>&nbsp;<span class="ident" id="4928462">root</span>&nbsp;<span class="op" id="4928467">:=</span>&nbsp;<span class="keyword" id="4928470">range</span>&nbsp;<span class="ident" id="4928476">all</span>&nbsp;<span class="op" id="4928480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928485">rootsrc</span>&nbsp;<span class="op" id="4928493">:=</span>&nbsp;<span class="ident" id="4928496">ctxt</span><span class="op" id="4928500">.</span><span class="ident" id="4928501">joinPath</span><span class="op" id="4928509">(</span><span class="ident" id="4928510">root</span><span class="op" id="4928514">,</span>&nbsp;<span class="string" id="4928516">&#34;src&#34;</span><span class="op" id="4928521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928526">if</span>&nbsp;<span class="ident" id="4928529">sub</span><span class="op" id="4928532">,</span>&nbsp;<span class="ident" id="4928534">ok</span>&nbsp;<span class="op" id="4928537">:=</span>&nbsp;<span class="ident" id="4928540">ctxt</span><span class="op" id="4928544">.</span><span class="ident" id="4928545">hasSubdir</span><span class="op" id="4928554">(</span><span class="ident" id="4928555">rootsrc</span><span class="op" id="4928562">,</span>&nbsp;<span class="ident" id="4928564">p</span><span class="op" id="4928565">.</span><span class="ident" id="4928566">Dir</span><span class="op" id="4928569">)</span><span class="op" id="4928570">;</span>&nbsp;<span class="ident" id="4928572">ok</span>&nbsp;<span class="op" id="4928575">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4928581">//&nbsp;We&nbsp;found&nbsp;a&nbsp;potential&nbsp;import&nbsp;path&nbsp;for&nbsp;dir,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4928630">//&nbsp;but&nbsp;check&nbsp;that&nbsp;using&nbsp;it&nbsp;wouldn&#39;t&nbsp;find&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4928685">//&nbsp;else&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928704">if</span>&nbsp;<span class="ident" id="4928707">ctxt</span><span class="op" id="4928711">.</span><span class="ident" id="4928712">GOROOT</span>&nbsp;<span class="op" id="4928719">!=</span>&nbsp;<span class="string" id="4928722">&#34;&#34;</span>&nbsp;<span class="op" id="4928725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928732">if</span>&nbsp;<span class="ident" id="4928735">dir</span>&nbsp;<span class="op" id="4928739">:=</span>&nbsp;<span class="ident" id="4928742">ctxt</span><span class="op" id="4928746">.</span><span class="ident" id="4928747">joinPath</span><span class="op" id="4928755">(</span><span class="ident" id="4928756">ctxt</span><span class="op" id="4928760">.</span><span class="ident" id="4928761">GOROOT</span><span class="op" id="4928767">,</span>&nbsp;<span class="string" id="4928769">&#34;src&#34;</span><span class="op" id="4928774">,</span>&nbsp;<span class="ident" id="4928776">sub</span><span class="op" id="4928779">)</span><span class="op" id="4928780">;</span>&nbsp;<span class="ident" id="4928782">ctxt</span><span class="op" id="4928786">.</span><span class="ident" id="4928787">isDir</span><span class="op" id="4928792">(</span><span class="ident" id="4928793">dir</span><span class="op" id="4928796">)</span>&nbsp;<span class="op" id="4928798">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928806">p</span><span class="op" id="4928807">.</span><span class="ident" id="4928808">ConflictDir</span>&nbsp;<span class="op" id="4928820">=</span>&nbsp;<span class="ident" id="4928822">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928832">goto</span>&nbsp;<span class="ident" id="4928837">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4928854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928860">for</span>&nbsp;<span class="ident" id="4928864">_</span><span class="op" id="4928865">,</span>&nbsp;<span class="ident" id="4928867">earlyRoot</span>&nbsp;<span class="op" id="4928877">:=</span>&nbsp;<span class="keyword" id="4928880">range</span>&nbsp;<span class="ident" id="4928886">all</span><span class="op" id="4928889">[</span><span class="op" id="4928890">:</span><span class="ident" id="4928891">i</span><span class="op" id="4928892">]</span>&nbsp;<span class="op" id="4928894">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928901">if</span>&nbsp;<span class="ident" id="4928904">dir</span>&nbsp;<span class="op" id="4928908">:=</span>&nbsp;<span class="ident" id="4928911">ctxt</span><span class="op" id="4928915">.</span><span class="ident" id="4928916">joinPath</span><span class="op" id="4928924">(</span><span class="ident" id="4928925">earlyRoot</span><span class="op" id="4928934">,</span>&nbsp;<span class="string" id="4928936">&#34;src&#34;</span><span class="op" id="4928941">,</span>&nbsp;<span class="ident" id="4928943">sub</span><span class="op" id="4928946">)</span><span class="op" id="4928947">;</span>&nbsp;<span class="ident" id="4928949">ctxt</span><span class="op" id="4928953">.</span><span class="ident" id="4928954">isDir</span><span class="op" id="4928959">(</span><span class="ident" id="4928960">dir</span><span class="op" id="4928963">)</span>&nbsp;<span class="op" id="4928965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4928973">p</span><span class="op" id="4928974">.</span><span class="ident" id="4928975">ConflictDir</span>&nbsp;<span class="op" id="4928987">=</span>&nbsp;<span class="ident" id="4928989">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4928999">goto</span>&nbsp;<span class="ident" id="4929004">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929021">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929028">//&nbsp;sub&nbsp;would&nbsp;not&nbsp;name&nbsp;some&nbsp;other&nbsp;directory&nbsp;instead&nbsp;of&nbsp;this&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929096">//&nbsp;Record&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929114">p</span><span class="op" id="4929115">.</span><span class="ident" id="4929116">ImportPath</span>&nbsp;<span class="op" id="4929127">=</span>&nbsp;<span class="ident" id="4929129">sub</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929137">p</span><span class="op" id="4929138">.</span><span class="ident" id="4929139">Root</span>&nbsp;<span class="op" id="4929144">=</span>&nbsp;<span class="ident" id="4929146">root</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929155">goto</span>&nbsp;<span class="ident" id="4929160">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929177">//&nbsp;It&#39;s&nbsp;okay&nbsp;that&nbsp;we&nbsp;didn&#39;t&nbsp;find&nbsp;a&nbsp;root&nbsp;containing&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929235">//&nbsp;Keep&nbsp;going&nbsp;with&nbsp;the&nbsp;information&nbsp;we&nbsp;have.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929280">}</span>&nbsp;<span class="keyword" id="4929282">else</span>&nbsp;<span class="op" id="4929287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929291">if</span>&nbsp;<span class="ident" id="4929294">strings</span><span class="op" id="4929301">.</span><span class="ident" id="4929302">HasPrefix</span><span class="op" id="4929311">(</span><span class="ident" id="4929312">path</span><span class="op" id="4929316">,</span>&nbsp;<span class="string" id="4929318">&#34;/&#34;</span><span class="op" id="4929321">)</span>&nbsp;<span class="op" id="4929323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929328">return</span>&nbsp;<span class="ident" id="4929335">p</span><span class="op" id="4929336">,</span>&nbsp;<span class="ident" id="4929338">fmt</span><span class="op" id="4929341">.</span><span class="ident" id="4929342">Errorf</span><span class="op" id="4929348">(</span><span class="string" id="4929349">&#34;import&nbsp;%q:&nbsp;cannot&nbsp;import&nbsp;absolute&nbsp;path&#34;</span><span class="op" id="4929389">,</span>&nbsp;<span class="ident" id="4929391">path</span><span class="op" id="4929395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929404">//&nbsp;tried&nbsp;records&nbsp;the&nbsp;location&nbsp;of&nbsp;unsuccessful&nbsp;package&nbsp;lookups</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929468">var</span>&nbsp;<span class="ident" id="4929472">tried</span>&nbsp;<span class="keyword" id="4929478">struct</span>&nbsp;<span class="op" id="4929485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929490">goroot</span>&nbsp;<span class="builtintype" id="4929497">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929507">gopath</span>&nbsp;<span class="op" id="4929514">[</span><span class="op" id="4929515">]</span><span class="builtintype" id="4929516">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929525">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4929530">//&nbsp;Determine&nbsp;directory&nbsp;from&nbsp;import&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929573">if</span>&nbsp;<span class="ident" id="4929576">ctxt</span><span class="op" id="4929580">.</span><span class="ident" id="4929581">GOROOT</span>&nbsp;<span class="op" id="4929588">!=</span>&nbsp;<span class="string" id="4929591">&#34;&#34;</span>&nbsp;<span class="op" id="4929594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929599">dir</span>&nbsp;<span class="op" id="4929603">:=</span>&nbsp;<span class="ident" id="4929606">ctxt</span><span class="op" id="4929610">.</span><span class="ident" id="4929611">joinPath</span><span class="op" id="4929619">(</span><span class="ident" id="4929620">ctxt</span><span class="op" id="4929624">.</span><span class="ident" id="4929625">GOROOT</span><span class="op" id="4929631">,</span>&nbsp;<span class="string" id="4929633">&#34;src&#34;</span><span class="op" id="4929638">,</span>&nbsp;<span class="ident" id="4929640">path</span><span class="op" id="4929644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929649">isDir</span>&nbsp;<span class="op" id="4929655">:=</span>&nbsp;<span class="ident" id="4929658">ctxt</span><span class="op" id="4929662">.</span><span class="ident" id="4929663">isDir</span><span class="op" id="4929668">(</span><span class="ident" id="4929669">dir</span><span class="op" id="4929672">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929677">binaryOnly</span>&nbsp;<span class="op" id="4929688">=</span>&nbsp;<span class="op" id="4929690">!</span><span class="ident" id="4929691">isDir</span>&nbsp;<span class="op" id="4929697">&amp;&amp;</span>&nbsp;<span class="ident" id="4929700">mode</span><span class="op" id="4929704">&amp;</span><span class="ident" id="4929705">AllowBinary</span>&nbsp;<span class="op" id="4929717">!=</span>&nbsp;<span class="num" id="4929720">0</span>&nbsp;<span class="op" id="4929722">&amp;&amp;</span>&nbsp;<span class="ident" id="4929725">pkga</span>&nbsp;<span class="op" id="4929730">!=</span>&nbsp;<span class="string" id="4929733">&#34;&#34;</span>&nbsp;<span class="op" id="4929736">&amp;&amp;</span>&nbsp;<span class="ident" id="4929739">ctxt</span><span class="op" id="4929743">.</span><span class="ident" id="4929744">isFile</span><span class="op" id="4929750">(</span><span class="ident" id="4929751">ctxt</span><span class="op" id="4929755">.</span><span class="ident" id="4929756">joinPath</span><span class="op" id="4929764">(</span><span class="ident" id="4929765">ctxt</span><span class="op" id="4929769">.</span><span class="ident" id="4929770">GOROOT</span><span class="op" id="4929776">,</span>&nbsp;<span class="ident" id="4929778">pkga</span><span class="op" id="4929782">)</span><span class="op" id="4929783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929788">if</span>&nbsp;<span class="ident" id="4929791">isDir</span>&nbsp;<span class="op" id="4929797">||</span>&nbsp;<span class="ident" id="4929800">binaryOnly</span>&nbsp;<span class="op" id="4929811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929817">p</span><span class="op" id="4929818">.</span><span class="ident" id="4929819">Dir</span>&nbsp;<span class="op" id="4929823">=</span>&nbsp;<span class="ident" id="4929825">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929833">p</span><span class="op" id="4929834">.</span><span class="ident" id="4929835">Goroot</span>&nbsp;<span class="op" id="4929842">=</span>&nbsp;<span class="builtintype" id="4929844">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929853">p</span><span class="op" id="4929854">.</span><span class="ident" id="4929855">Root</span>&nbsp;<span class="op" id="4929860">=</span>&nbsp;<span class="ident" id="4929862">ctxt</span><span class="op" id="4929866">.</span><span class="ident" id="4929867">GOROOT</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929878">goto</span>&nbsp;<span class="ident" id="4929883">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929897">tried</span><span class="op" id="4929902">.</span><span class="ident" id="4929903">goroot</span>&nbsp;<span class="op" id="4929910">=</span>&nbsp;<span class="ident" id="4929912">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4929918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4929922">for</span>&nbsp;<span class="ident" id="4929926">_</span><span class="op" id="4929927">,</span>&nbsp;<span class="ident" id="4929929">root</span>&nbsp;<span class="op" id="4929934">:=</span>&nbsp;<span class="keyword" id="4929937">range</span>&nbsp;<span class="ident" id="4929943">ctxt</span><span class="op" id="4929947">.</span><span class="ident" id="4929948">gopath</span><span class="op" id="4929954">(</span><span class="op" id="4929955">)</span>&nbsp;<span class="op" id="4929957">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4929962">dir</span>&nbsp;<span class="op" id="4929966">:=</span>&nbsp;<span class="ident" id="4929969">ctxt</span><span class="op" id="4929973">.</span><span class="ident" id="4929974">joinPath</span><span class="op" id="4929982">(</span><span class="ident" id="4929983">root</span><span class="op" id="4929987">,</span>&nbsp;<span class="string" id="4929989">&#34;src&#34;</span><span class="op" id="4929994">,</span>&nbsp;<span class="ident" id="4929996">path</span><span class="op" id="4930000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930005">isDir</span>&nbsp;<span class="op" id="4930011">:=</span>&nbsp;<span class="ident" id="4930014">ctxt</span><span class="op" id="4930018">.</span><span class="ident" id="4930019">isDir</span><span class="op" id="4930024">(</span><span class="ident" id="4930025">dir</span><span class="op" id="4930028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930033">binaryOnly</span>&nbsp;<span class="op" id="4930044">=</span>&nbsp;<span class="op" id="4930046">!</span><span class="ident" id="4930047">isDir</span>&nbsp;<span class="op" id="4930053">&amp;&amp;</span>&nbsp;<span class="ident" id="4930056">mode</span><span class="op" id="4930060">&amp;</span><span class="ident" id="4930061">AllowBinary</span>&nbsp;<span class="op" id="4930073">!=</span>&nbsp;<span class="num" id="4930076">0</span>&nbsp;<span class="op" id="4930078">&amp;&amp;</span>&nbsp;<span class="ident" id="4930081">pkga</span>&nbsp;<span class="op" id="4930086">!=</span>&nbsp;<span class="string" id="4930089">&#34;&#34;</span>&nbsp;<span class="op" id="4930092">&amp;&amp;</span>&nbsp;<span class="ident" id="4930095">ctxt</span><span class="op" id="4930099">.</span><span class="ident" id="4930100">isFile</span><span class="op" id="4930106">(</span><span class="ident" id="4930107">ctxt</span><span class="op" id="4930111">.</span><span class="ident" id="4930112">joinPath</span><span class="op" id="4930120">(</span><span class="ident" id="4930121">root</span><span class="op" id="4930125">,</span>&nbsp;<span class="ident" id="4930127">pkga</span><span class="op" id="4930131">)</span><span class="op" id="4930132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930137">if</span>&nbsp;<span class="ident" id="4930140">isDir</span>&nbsp;<span class="op" id="4930146">||</span>&nbsp;<span class="ident" id="4930149">binaryOnly</span>&nbsp;<span class="op" id="4930160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930166">p</span><span class="op" id="4930167">.</span><span class="ident" id="4930168">Dir</span>&nbsp;<span class="op" id="4930172">=</span>&nbsp;<span class="ident" id="4930174">dir</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930182">p</span><span class="op" id="4930183">.</span><span class="ident" id="4930184">Root</span>&nbsp;<span class="op" id="4930189">=</span>&nbsp;<span class="ident" id="4930191">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930200">goto</span>&nbsp;<span class="ident" id="4930205">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930219">tried</span><span class="op" id="4930224">.</span><span class="ident" id="4930225">gopath</span>&nbsp;<span class="op" id="4930232">=</span>&nbsp;<span class="builtinfunc" id="4930234">append</span><span class="op" id="4930240">(</span><span class="ident" id="4930241">tried</span><span class="op" id="4930246">.</span><span class="ident" id="4930247">gopath</span><span class="op" id="4930253">,</span>&nbsp;<span class="ident" id="4930255">dir</span><span class="op" id="4930258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930262">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4930267">//&nbsp;package&nbsp;was&nbsp;not&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930294">var</span>&nbsp;<span class="ident" id="4930298">paths</span>&nbsp;<span class="op" id="4930304">[</span><span class="op" id="4930305">]</span><span class="builtintype" id="4930306">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930315">if</span>&nbsp;<span class="ident" id="4930318">tried</span><span class="op" id="4930323">.</span><span class="ident" id="4930324">goroot</span>&nbsp;<span class="op" id="4930331">!=</span>&nbsp;<span class="string" id="4930334">&#34;&#34;</span>&nbsp;<span class="op" id="4930337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930342">paths</span>&nbsp;<span class="op" id="4930348">=</span>&nbsp;<span class="builtinfunc" id="4930350">append</span><span class="op" id="4930356">(</span><span class="ident" id="4930357">paths</span><span class="op" id="4930362">,</span>&nbsp;<span class="ident" id="4930364">fmt</span><span class="op" id="4930367">.</span><span class="ident" id="4930368">Sprintf</span><span class="op" id="4930375">(</span><span class="string" id="4930376">&#34;\t%s&nbsp;(from&nbsp;$GOROOT)&#34;</span><span class="op" id="4930397">,</span>&nbsp;<span class="ident" id="4930399">tried</span><span class="op" id="4930404">.</span><span class="ident" id="4930405">goroot</span><span class="op" id="4930411">)</span><span class="op" id="4930412">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930416">}</span>&nbsp;<span class="keyword" id="4930418">else</span>&nbsp;<span class="op" id="4930423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930428">paths</span>&nbsp;<span class="op" id="4930434">=</span>&nbsp;<span class="builtinfunc" id="4930436">append</span><span class="op" id="4930442">(</span><span class="ident" id="4930443">paths</span><span class="op" id="4930448">,</span>&nbsp;<span class="string" id="4930450">&#34;\t($GOROOT&nbsp;not&nbsp;set)&#34;</span><span class="op" id="4930471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930479">var</span>&nbsp;<span class="ident" id="4930483">i</span>&nbsp;<span class="builtintype" id="4930485">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930491">var</span>&nbsp;<span class="ident" id="4930495">format</span>&nbsp;<span class="op" id="4930502">=</span>&nbsp;<span class="string" id="4930504">&#34;\t%s&nbsp;(from&nbsp;$GOPATH)&#34;</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930528">for</span>&nbsp;<span class="op" id="4930532">;</span>&nbsp;<span class="ident" id="4930534">i</span>&nbsp;<span class="op" id="4930536">&lt;</span>&nbsp;<span class="builtinfunc" id="4930538">len</span><span class="op" id="4930541">(</span><span class="ident" id="4930542">tried</span><span class="op" id="4930547">.</span><span class="ident" id="4930548">gopath</span><span class="op" id="4930554">)</span><span class="op" id="4930555">;</span>&nbsp;<span class="ident" id="4930557">i</span><span class="op" id="4930558">++</span>&nbsp;<span class="op" id="4930561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930566">if</span>&nbsp;<span class="ident" id="4930569">i</span>&nbsp;<span class="op" id="4930571">&gt;</span>&nbsp;<span class="num" id="4930573">0</span>&nbsp;<span class="op" id="4930575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930581">format</span>&nbsp;<span class="op" id="4930588">=</span>&nbsp;<span class="string" id="4930590">&#34;\t%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930605">paths</span>&nbsp;<span class="op" id="4930611">=</span>&nbsp;<span class="builtinfunc" id="4930613">append</span><span class="op" id="4930619">(</span><span class="ident" id="4930620">paths</span><span class="op" id="4930625">,</span>&nbsp;<span class="ident" id="4930627">fmt</span><span class="op" id="4930630">.</span><span class="ident" id="4930631">Sprintf</span><span class="op" id="4930638">(</span><span class="ident" id="4930639">format</span><span class="op" id="4930645">,</span>&nbsp;<span class="ident" id="4930647">tried</span><span class="op" id="4930652">.</span><span class="ident" id="4930653">gopath</span><span class="op" id="4930659">[</span><span class="ident" id="4930660">i</span><span class="op" id="4930661">]</span><span class="op" id="4930662">)</span><span class="op" id="4930663">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930671">if</span>&nbsp;<span class="ident" id="4930674">i</span>&nbsp;<span class="op" id="4930676">==</span>&nbsp;<span class="num" id="4930679">0</span>&nbsp;<span class="op" id="4930681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930686">paths</span>&nbsp;<span class="op" id="4930692">=</span>&nbsp;<span class="builtinfunc" id="4930694">append</span><span class="op" id="4930700">(</span><span class="ident" id="4930701">paths</span><span class="op" id="4930706">,</span>&nbsp;<span class="string" id="4930708">&#34;\t($GOPATH&nbsp;not&nbsp;set)&#34;</span><span class="op" id="4930729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930737">return</span>&nbsp;<span class="ident" id="4930744">p</span><span class="op" id="4930745">,</span>&nbsp;<span class="ident" id="4930747">fmt</span><span class="op" id="4930750">.</span><span class="ident" id="4930751">Errorf</span><span class="op" id="4930757">(</span><span class="string" id="4930758">&#34;cannot&nbsp;find&nbsp;package&nbsp;%q&nbsp;in&nbsp;any&nbsp;of:\n%s&#34;</span><span class="op" id="4930797">,</span>&nbsp;<span class="ident" id="4930799">path</span><span class="op" id="4930803">,</span>&nbsp;<span class="ident" id="4930805">strings</span><span class="op" id="4930812">.</span><span class="ident" id="4930813">Join</span><span class="op" id="4930817">(</span><span class="ident" id="4930818">paths</span><span class="op" id="4930823">,</span>&nbsp;<span class="string" id="4930825">&#34;\n&#34;</span><span class="op" id="4930829">)</span><span class="op" id="4930830">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4930833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4930836">Found</span><span class="op" id="4930841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930844">if</span>&nbsp;<span class="ident" id="4930847">p</span><span class="op" id="4930848">.</span><span class="ident" id="4930849">Root</span>&nbsp;<span class="op" id="4930854">!=</span>&nbsp;<span class="string" id="4930857">&#34;&#34;</span>&nbsp;<span class="op" id="4930860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930864">p</span><span class="op" id="4930865">.</span><span class="ident" id="4930866">SrcRoot</span>&nbsp;<span class="op" id="4930874">=</span>&nbsp;<span class="ident" id="4930876">ctxt</span><span class="op" id="4930880">.</span><span class="ident" id="4930881">joinPath</span><span class="op" id="4930889">(</span><span class="ident" id="4930890">p</span><span class="op" id="4930891">.</span><span class="ident" id="4930892">Root</span><span class="op" id="4930896">,</span>&nbsp;<span class="string" id="4930898">&#34;src&#34;</span><span class="op" id="4930903">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930907">p</span><span class="op" id="4930908">.</span><span class="ident" id="4930909">PkgRoot</span>&nbsp;<span class="op" id="4930917">=</span>&nbsp;<span class="ident" id="4930919">ctxt</span><span class="op" id="4930923">.</span><span class="ident" id="4930924">joinPath</span><span class="op" id="4930932">(</span><span class="ident" id="4930933">p</span><span class="op" id="4930934">.</span><span class="ident" id="4930935">Root</span><span class="op" id="4930939">,</span>&nbsp;<span class="string" id="4930941">&#34;pkg&#34;</span><span class="op" id="4930946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4930950">p</span><span class="op" id="4930951">.</span><span class="ident" id="4930952">BinDir</span>&nbsp;<span class="op" id="4930959">=</span>&nbsp;<span class="ident" id="4930961">ctxt</span><span class="op" id="4930965">.</span><span class="ident" id="4930966">joinPath</span><span class="op" id="4930974">(</span><span class="ident" id="4930975">p</span><span class="op" id="4930976">.</span><span class="ident" id="4930977">Root</span><span class="op" id="4930981">,</span>&nbsp;<span class="string" id="4930983">&#34;bin&#34;</span><span class="op" id="4930988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4930992">if</span>&nbsp;<span class="ident" id="4930995">pkga</span>&nbsp;<span class="op" id="4931000">!=</span>&nbsp;<span class="string" id="4931003">&#34;&#34;</span>&nbsp;<span class="op" id="4931006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931011">p</span><span class="op" id="4931012">.</span><span class="ident" id="4931013">PkgObj</span>&nbsp;<span class="op" id="4931020">=</span>&nbsp;<span class="ident" id="4931022">ctxt</span><span class="op" id="4931026">.</span><span class="ident" id="4931027">joinPath</span><span class="op" id="4931035">(</span><span class="ident" id="4931036">p</span><span class="op" id="4931037">.</span><span class="ident" id="4931038">Root</span><span class="op" id="4931042">,</span>&nbsp;<span class="ident" id="4931044">pkga</span><span class="op" id="4931048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931052">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931059">if</span>&nbsp;<span class="ident" id="4931062">mode</span><span class="op" id="4931066">&amp;</span><span class="ident" id="4931067">FindOnly</span>&nbsp;<span class="op" id="4931076">!=</span>&nbsp;<span class="num" id="4931079">0</span>&nbsp;<span class="op" id="4931081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931085">return</span>&nbsp;<span class="ident" id="4931092">p</span><span class="op" id="4931093">,</span>&nbsp;<span class="ident" id="4931095">pkgerr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931103">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931106">if</span>&nbsp;<span class="ident" id="4931109">binaryOnly</span>&nbsp;<span class="op" id="4931120">&amp;&amp;</span>&nbsp;<span class="op" id="4931123">(</span><span class="ident" id="4931124">mode</span><span class="op" id="4931128">&amp;</span><span class="ident" id="4931129">AllowBinary</span><span class="op" id="4931140">)</span>&nbsp;<span class="op" id="4931142">!=</span>&nbsp;<span class="num" id="4931145">0</span>&nbsp;<span class="op" id="4931147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931151">return</span>&nbsp;<span class="ident" id="4931158">p</span><span class="op" id="4931159">,</span>&nbsp;<span class="ident" id="4931161">pkgerr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931173">dirs</span><span class="op" id="4931177">,</span>&nbsp;<span class="ident" id="4931179">err</span>&nbsp;<span class="op" id="4931183">:=</span>&nbsp;<span class="ident" id="4931186">ctxt</span><span class="op" id="4931190">.</span><span class="ident" id="4931191">readDir</span><span class="op" id="4931198">(</span><span class="ident" id="4931199">p</span><span class="op" id="4931200">.</span><span class="ident" id="4931201">Dir</span><span class="op" id="4931204">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931207">if</span>&nbsp;<span class="ident" id="4931210">err</span>&nbsp;<span class="op" id="4931214">!=</span>&nbsp;<span class="builtintype" id="4931217">nil</span>&nbsp;<span class="op" id="4931221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931225">return</span>&nbsp;<span class="ident" id="4931232">p</span><span class="op" id="4931233">,</span>&nbsp;<span class="ident" id="4931235">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931244">var</span>&nbsp;<span class="ident" id="4931248">Sfiles</span>&nbsp;<span class="op" id="4931255">[</span><span class="op" id="4931256">]</span><span class="builtintype" id="4931257">string</span>&nbsp;<span class="comment" id="4931264">//&nbsp;files&nbsp;with&nbsp;&#34;.S&#34;&nbsp;(capital&nbsp;S)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931296">var</span>&nbsp;<span class="ident" id="4931300">firstFile</span><span class="op" id="4931309">,</span>&nbsp;<span class="ident" id="4931311">firstCommentFile</span>&nbsp;<span class="builtintype" id="4931328">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931336">imported</span>&nbsp;<span class="op" id="4931345">:=</span>&nbsp;<span class="builtinfunc" id="4931348">make</span><span class="op" id="4931352">(</span><span class="keyword" id="4931353">map</span><span class="op" id="4931356">[</span><span class="builtintype" id="4931357">string</span><span class="op" id="4931363">]</span><span class="op" id="4931364">[</span><span class="op" id="4931365">]</span><span class="ident" id="4931366">token</span><span class="op" id="4931371">.</span><span class="ident" id="4931372">Position</span><span class="op" id="4931380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931383">testImported</span>&nbsp;<span class="op" id="4931396">:=</span>&nbsp;<span class="builtinfunc" id="4931399">make</span><span class="op" id="4931403">(</span><span class="keyword" id="4931404">map</span><span class="op" id="4931407">[</span><span class="builtintype" id="4931408">string</span><span class="op" id="4931414">]</span><span class="op" id="4931415">[</span><span class="op" id="4931416">]</span><span class="ident" id="4931417">token</span><span class="op" id="4931422">.</span><span class="ident" id="4931423">Position</span><span class="op" id="4931431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931434">xTestImported</span>&nbsp;<span class="op" id="4931448">:=</span>&nbsp;<span class="builtinfunc" id="4931451">make</span><span class="op" id="4931455">(</span><span class="keyword" id="4931456">map</span><span class="op" id="4931459">[</span><span class="builtintype" id="4931460">string</span><span class="op" id="4931466">]</span><span class="op" id="4931467">[</span><span class="op" id="4931468">]</span><span class="ident" id="4931469">token</span><span class="op" id="4931474">.</span><span class="ident" id="4931475">Position</span><span class="op" id="4931483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931486">allTags</span>&nbsp;<span class="op" id="4931494">:=</span>&nbsp;<span class="builtinfunc" id="4931497">make</span><span class="op" id="4931501">(</span><span class="keyword" id="4931502">map</span><span class="op" id="4931505">[</span><span class="builtintype" id="4931506">string</span><span class="op" id="4931512">]</span><span class="builtintype" id="4931513">bool</span><span class="op" id="4931517">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931520">fset</span>&nbsp;<span class="op" id="4931525">:=</span>&nbsp;<span class="ident" id="4931528">token</span><span class="op" id="4931533">.</span><span class="ident" id="4931534">NewFileSet</span><span class="op" id="4931544">(</span><span class="op" id="4931545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931548">for</span>&nbsp;<span class="ident" id="4931552">_</span><span class="op" id="4931553">,</span>&nbsp;<span class="ident" id="4931555">d</span>&nbsp;<span class="op" id="4931557">:=</span>&nbsp;<span class="keyword" id="4931560">range</span>&nbsp;<span class="ident" id="4931566">dirs</span>&nbsp;<span class="op" id="4931571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931575">if</span>&nbsp;<span class="ident" id="4931578">d</span><span class="op" id="4931579">.</span><span class="ident" id="4931580">IsDir</span><span class="op" id="4931585">(</span><span class="op" id="4931586">)</span>&nbsp;<span class="op" id="4931588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931593">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931604">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931609">name</span>&nbsp;<span class="op" id="4931614">:=</span>&nbsp;<span class="ident" id="4931617">d</span><span class="op" id="4931618">.</span><span class="ident" id="4931619">Name</span><span class="op" id="4931623">(</span><span class="op" id="4931624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931628">ext</span>&nbsp;<span class="op" id="4931632">:=</span>&nbsp;<span class="ident" id="4931635">nameExt</span><span class="op" id="4931642">(</span><span class="ident" id="4931643">name</span><span class="op" id="4931647">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931652">match</span><span class="op" id="4931657">,</span>&nbsp;<span class="ident" id="4931659">data</span><span class="op" id="4931663">,</span>&nbsp;<span class="ident" id="4931665">filename</span><span class="op" id="4931673">,</span>&nbsp;<span class="ident" id="4931675">err</span>&nbsp;<span class="op" id="4931679">:=</span>&nbsp;<span class="ident" id="4931682">ctxt</span><span class="op" id="4931686">.</span><span class="ident" id="4931687">matchFile</span><span class="op" id="4931696">(</span><span class="ident" id="4931697">p</span><span class="op" id="4931698">.</span><span class="ident" id="4931699">Dir</span><span class="op" id="4931702">,</span>&nbsp;<span class="ident" id="4931704">name</span><span class="op" id="4931708">,</span>&nbsp;<span class="builtintype" id="4931710">true</span><span class="op" id="4931714">,</span>&nbsp;<span class="ident" id="4931716">allTags</span><span class="op" id="4931723">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931727">if</span>&nbsp;<span class="ident" id="4931730">err</span>&nbsp;<span class="op" id="4931734">!=</span>&nbsp;<span class="builtintype" id="4931737">nil</span>&nbsp;<span class="op" id="4931741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931746">return</span>&nbsp;<span class="ident" id="4931753">p</span><span class="op" id="4931754">,</span>&nbsp;<span class="ident" id="4931756">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931766">if</span>&nbsp;<span class="op" id="4931769">!</span><span class="ident" id="4931770">match</span>&nbsp;<span class="op" id="4931776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931781">if</span>&nbsp;<span class="ident" id="4931784">ext</span>&nbsp;<span class="op" id="4931788">==</span>&nbsp;<span class="string" id="4931791">&#34;.go&#34;</span>&nbsp;<span class="op" id="4931797">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931803">p</span><span class="op" id="4931804">.</span><span class="ident" id="4931805">IgnoredGoFiles</span>&nbsp;<span class="op" id="4931820">=</span>&nbsp;<span class="builtinfunc" id="4931822">append</span><span class="op" id="4931828">(</span><span class="ident" id="4931829">p</span><span class="op" id="4931830">.</span><span class="ident" id="4931831">IgnoredGoFiles</span><span class="op" id="4931845">,</span>&nbsp;<span class="ident" id="4931847">name</span><span class="op" id="4931851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931861">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4931872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4931877">//&nbsp;Going&nbsp;to&nbsp;save&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;non-Go&nbsp;files,&nbsp;can&nbsp;stop&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931940">switch</span>&nbsp;<span class="ident" id="4931947">ext</span>&nbsp;<span class="op" id="4931951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4931955">case</span>&nbsp;<span class="string" id="4931960">&#34;.c&#34;</span><span class="op" id="4931964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4931969">p</span><span class="op" id="4931970">.</span><span class="ident" id="4931971">CFiles</span>&nbsp;<span class="op" id="4931978">=</span>&nbsp;<span class="builtinfunc" id="4931980">append</span><span class="op" id="4931986">(</span><span class="ident" id="4931987">p</span><span class="op" id="4931988">.</span><span class="ident" id="4931989">CFiles</span><span class="op" id="4931995">,</span>&nbsp;<span class="ident" id="4931997">name</span><span class="op" id="4932001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932006">continue</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932017">case</span>&nbsp;<span class="string" id="4932022">&#34;.cc&#34;</span><span class="op" id="4932027">,</span>&nbsp;<span class="string" id="4932029">&#34;.cpp&#34;</span><span class="op" id="4932035">,</span>&nbsp;<span class="string" id="4932037">&#34;.cxx&#34;</span><span class="op" id="4932043">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932048">p</span><span class="op" id="4932049">.</span><span class="ident" id="4932050">CXXFiles</span>&nbsp;<span class="op" id="4932059">=</span>&nbsp;<span class="builtinfunc" id="4932061">append</span><span class="op" id="4932067">(</span><span class="ident" id="4932068">p</span><span class="op" id="4932069">.</span><span class="ident" id="4932070">CXXFiles</span><span class="op" id="4932078">,</span>&nbsp;<span class="ident" id="4932080">name</span><span class="op" id="4932084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932089">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932100">case</span>&nbsp;<span class="string" id="4932105">&#34;.m&#34;</span><span class="op" id="4932109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932114">p</span><span class="op" id="4932115">.</span><span class="ident" id="4932116">MFiles</span>&nbsp;<span class="op" id="4932123">=</span>&nbsp;<span class="builtinfunc" id="4932125">append</span><span class="op" id="4932131">(</span><span class="ident" id="4932132">p</span><span class="op" id="4932133">.</span><span class="ident" id="4932134">MFiles</span><span class="op" id="4932140">,</span>&nbsp;<span class="ident" id="4932142">name</span><span class="op" id="4932146">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932151">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932162">case</span>&nbsp;<span class="string" id="4932167">&#34;.h&#34;</span><span class="op" id="4932171">,</span>&nbsp;<span class="string" id="4932173">&#34;.hh&#34;</span><span class="op" id="4932178">,</span>&nbsp;<span class="string" id="4932180">&#34;.hpp&#34;</span><span class="op" id="4932186">,</span>&nbsp;<span class="string" id="4932188">&#34;.hxx&#34;</span><span class="op" id="4932194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932199">p</span><span class="op" id="4932200">.</span><span class="ident" id="4932201">HFiles</span>&nbsp;<span class="op" id="4932208">=</span>&nbsp;<span class="builtinfunc" id="4932210">append</span><span class="op" id="4932216">(</span><span class="ident" id="4932217">p</span><span class="op" id="4932218">.</span><span class="ident" id="4932219">HFiles</span><span class="op" id="4932225">,</span>&nbsp;<span class="ident" id="4932227">name</span><span class="op" id="4932231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932236">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932247">case</span>&nbsp;<span class="string" id="4932252">&#34;.s&#34;</span><span class="op" id="4932256">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932261">p</span><span class="op" id="4932262">.</span><span class="ident" id="4932263">SFiles</span>&nbsp;<span class="op" id="4932270">=</span>&nbsp;<span class="builtinfunc" id="4932272">append</span><span class="op" id="4932278">(</span><span class="ident" id="4932279">p</span><span class="op" id="4932280">.</span><span class="ident" id="4932281">SFiles</span><span class="op" id="4932287">,</span>&nbsp;<span class="ident" id="4932289">name</span><span class="op" id="4932293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932298">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932309">case</span>&nbsp;<span class="string" id="4932314">&#34;.S&#34;</span><span class="op" id="4932318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932323">Sfiles</span>&nbsp;<span class="op" id="4932330">=</span>&nbsp;<span class="builtinfunc" id="4932332">append</span><span class="op" id="4932338">(</span><span class="ident" id="4932339">Sfiles</span><span class="op" id="4932345">,</span>&nbsp;<span class="ident" id="4932347">name</span><span class="op" id="4932351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932356">continue</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932367">case</span>&nbsp;<span class="string" id="4932372">&#34;.swig&#34;</span><span class="op" id="4932379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932384">p</span><span class="op" id="4932385">.</span><span class="ident" id="4932386">SwigFiles</span>&nbsp;<span class="op" id="4932396">=</span>&nbsp;<span class="builtinfunc" id="4932398">append</span><span class="op" id="4932404">(</span><span class="ident" id="4932405">p</span><span class="op" id="4932406">.</span><span class="ident" id="4932407">SwigFiles</span><span class="op" id="4932416">,</span>&nbsp;<span class="ident" id="4932418">name</span><span class="op" id="4932422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932427">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932438">case</span>&nbsp;<span class="string" id="4932443">&#34;.swigcxx&#34;</span><span class="op" id="4932453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932458">p</span><span class="op" id="4932459">.</span><span class="ident" id="4932460">SwigCXXFiles</span>&nbsp;<span class="op" id="4932473">=</span>&nbsp;<span class="builtinfunc" id="4932475">append</span><span class="op" id="4932481">(</span><span class="ident" id="4932482">p</span><span class="op" id="4932483">.</span><span class="ident" id="4932484">SwigCXXFiles</span><span class="op" id="4932496">,</span>&nbsp;<span class="ident" id="4932498">name</span><span class="op" id="4932502">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932507">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932518">case</span>&nbsp;<span class="string" id="4932523">&#34;.syso&#34;</span><span class="op" id="4932530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932535">//&nbsp;binary&nbsp;objects&nbsp;to&nbsp;add&nbsp;to&nbsp;package&nbsp;archive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932582">//&nbsp;Likely&nbsp;of&nbsp;the&nbsp;form&nbsp;foo_windows.syso,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4932629">//&nbsp;the&nbsp;name&nbsp;was&nbsp;vetted&nbsp;above&nbsp;with&nbsp;goodOSArchFile.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932682">p</span><span class="op" id="4932683">.</span><span class="ident" id="4932684">SysoFiles</span>&nbsp;<span class="op" id="4932694">=</span>&nbsp;<span class="builtinfunc" id="4932696">append</span><span class="op" id="4932702">(</span><span class="ident" id="4932703">p</span><span class="op" id="4932704">.</span><span class="ident" id="4932705">SysoFiles</span><span class="op" id="4932714">,</span>&nbsp;<span class="ident" id="4932716">name</span><span class="op" id="4932720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932725">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4932736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932741">pf</span><span class="op" id="4932743">,</span>&nbsp;<span class="ident" id="4932745">err</span>&nbsp;<span class="op" id="4932749">:=</span>&nbsp;<span class="ident" id="4932752">parser</span><span class="op" id="4932758">.</span><span class="ident" id="4932759">ParseFile</span><span class="op" id="4932768">(</span><span class="ident" id="4932769">fset</span><span class="op" id="4932773">,</span>&nbsp;<span class="ident" id="4932775">filename</span><span class="op" id="4932783">,</span>&nbsp;<span class="ident" id="4932785">data</span><span class="op" id="4932789">,</span>&nbsp;<span class="ident" id="4932791">parser</span><span class="op" id="4932797">.</span><span class="ident" id="4932798">ImportsOnly</span><span class="op" id="4932809">|</span><span class="ident" id="4932810">parser</span><span class="op" id="4932816">.</span><span class="ident" id="4932817">ParseComments</span><span class="op" id="4932830">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932834">if</span>&nbsp;<span class="ident" id="4932837">err</span>&nbsp;<span class="op" id="4932841">!=</span>&nbsp;<span class="builtintype" id="4932844">nil</span>&nbsp;<span class="op" id="4932848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932853">return</span>&nbsp;<span class="ident" id="4932860">p</span><span class="op" id="4932861">,</span>&nbsp;<span class="ident" id="4932863">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4932869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932874">pkg</span>&nbsp;<span class="op" id="4932878">:=</span>&nbsp;<span class="ident" id="4932881">pf</span><span class="op" id="4932883">.</span><span class="ident" id="4932884">Name</span><span class="op" id="4932888">.</span><span class="ident" id="4932889">Name</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932896">if</span>&nbsp;<span class="ident" id="4932899">pkg</span>&nbsp;<span class="op" id="4932903">==</span>&nbsp;<span class="string" id="4932906">&#34;documentation&#34;</span>&nbsp;<span class="op" id="4932922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932927">p</span><span class="op" id="4932928">.</span><span class="ident" id="4932929">IgnoredGoFiles</span>&nbsp;<span class="op" id="4932944">=</span>&nbsp;<span class="builtinfunc" id="4932946">append</span><span class="op" id="4932952">(</span><span class="ident" id="4932953">p</span><span class="op" id="4932954">.</span><span class="ident" id="4932955">IgnoredGoFiles</span><span class="op" id="4932969">,</span>&nbsp;<span class="ident" id="4932971">name</span><span class="op" id="4932975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4932980">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4932991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4932996">isTest</span>&nbsp;<span class="op" id="4933003">:=</span>&nbsp;<span class="ident" id="4933006">strings</span><span class="op" id="4933013">.</span><span class="ident" id="4933014">HasSuffix</span><span class="op" id="4933023">(</span><span class="ident" id="4933024">name</span><span class="op" id="4933028">,</span>&nbsp;<span class="string" id="4933030">&#34;_test.go&#34;</span><span class="op" id="4933040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933044">isXTest</span>&nbsp;<span class="op" id="4933052">:=</span>&nbsp;<span class="builtintype" id="4933055">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933063">if</span>&nbsp;<span class="ident" id="4933066">isTest</span>&nbsp;<span class="op" id="4933073">&amp;&amp;</span>&nbsp;<span class="ident" id="4933076">strings</span><span class="op" id="4933083">.</span><span class="ident" id="4933084">HasSuffix</span><span class="op" id="4933093">(</span><span class="ident" id="4933094">pkg</span><span class="op" id="4933097">,</span>&nbsp;<span class="string" id="4933099">&#34;_test&#34;</span><span class="op" id="4933106">)</span>&nbsp;<span class="op" id="4933108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933113">isXTest</span>&nbsp;<span class="op" id="4933121">=</span>&nbsp;<span class="builtintype" id="4933123">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933131">pkg</span>&nbsp;<span class="op" id="4933135">=</span>&nbsp;<span class="ident" id="4933137">pkg</span><span class="op" id="4933140">[</span><span class="op" id="4933141">:</span><span class="builtinfunc" id="4933142">len</span><span class="op" id="4933145">(</span><span class="ident" id="4933146">pkg</span><span class="op" id="4933149">)</span><span class="op" id="4933150">-</span><span class="builtinfunc" id="4933151">len</span><span class="op" id="4933154">(</span><span class="string" id="4933155">&#34;_test&#34;</span><span class="op" id="4933162">)</span><span class="op" id="4933163">]</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933172">if</span>&nbsp;<span class="ident" id="4933175">p</span><span class="op" id="4933176">.</span><span class="ident" id="4933177">Name</span>&nbsp;<span class="op" id="4933182">==</span>&nbsp;<span class="string" id="4933185">&#34;&#34;</span>&nbsp;<span class="op" id="4933188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933193">p</span><span class="op" id="4933194">.</span><span class="ident" id="4933195">Name</span>&nbsp;<span class="op" id="4933200">=</span>&nbsp;<span class="ident" id="4933202">pkg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933209">firstFile</span>&nbsp;<span class="op" id="4933219">=</span>&nbsp;<span class="ident" id="4933221">name</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933228">}</span>&nbsp;<span class="keyword" id="4933230">else</span>&nbsp;<span class="keyword" id="4933235">if</span>&nbsp;<span class="ident" id="4933238">pkg</span>&nbsp;<span class="op" id="4933242">!=</span>&nbsp;<span class="ident" id="4933245">p</span><span class="op" id="4933246">.</span><span class="ident" id="4933247">Name</span>&nbsp;<span class="op" id="4933252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933257">return</span>&nbsp;<span class="ident" id="4933264">p</span><span class="op" id="4933265">,</span>&nbsp;<span class="op" id="4933267">&amp;</span><span class="ident" id="4933268">MultiplePackageError</span><span class="op" id="4933288">{</span><span class="ident" id="4933289">p</span><span class="op" id="4933290">.</span><span class="ident" id="4933291">Dir</span><span class="op" id="4933294">,</span>&nbsp;<span class="op" id="4933296">[</span><span class="op" id="4933297">]</span><span class="builtintype" id="4933298">string</span><span class="op" id="4933304">{</span><span class="ident" id="4933305">firstFile</span><span class="op" id="4933314">,</span>&nbsp;<span class="ident" id="4933316">name</span><span class="op" id="4933320">}</span><span class="op" id="4933321">,</span>&nbsp;<span class="op" id="4933323">[</span><span class="op" id="4933324">]</span><span class="builtintype" id="4933325">string</span><span class="op" id="4933331">{</span><span class="ident" id="4933332">p</span><span class="op" id="4933333">.</span><span class="ident" id="4933334">Name</span><span class="op" id="4933338">,</span>&nbsp;<span class="ident" id="4933340">pkg</span><span class="op" id="4933343">}</span><span class="op" id="4933344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933352">if</span>&nbsp;<span class="ident" id="4933355">pf</span><span class="op" id="4933357">.</span><span class="ident" id="4933358">Doc</span>&nbsp;<span class="op" id="4933362">!=</span>&nbsp;<span class="builtintype" id="4933365">nil</span>&nbsp;<span class="op" id="4933369">&amp;&amp;</span>&nbsp;<span class="ident" id="4933372">p</span><span class="op" id="4933373">.</span><span class="ident" id="4933374">Doc</span>&nbsp;<span class="op" id="4933378">==</span>&nbsp;<span class="string" id="4933381">&#34;&#34;</span>&nbsp;<span class="op" id="4933384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933389">p</span><span class="op" id="4933390">.</span><span class="ident" id="4933391">Doc</span>&nbsp;<span class="op" id="4933395">=</span>&nbsp;<span class="ident" id="4933397">doc</span><span class="op" id="4933400">.</span><span class="ident" id="4933401">Synopsis</span><span class="op" id="4933409">(</span><span class="ident" id="4933410">pf</span><span class="op" id="4933412">.</span><span class="ident" id="4933413">Doc</span><span class="op" id="4933416">.</span><span class="ident" id="4933417">Text</span><span class="op" id="4933421">(</span><span class="op" id="4933422">)</span><span class="op" id="4933423">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933432">if</span>&nbsp;<span class="ident" id="4933435">mode</span><span class="op" id="4933439">&amp;</span><span class="ident" id="4933440">ImportComment</span>&nbsp;<span class="op" id="4933454">!=</span>&nbsp;<span class="num" id="4933457">0</span>&nbsp;<span class="op" id="4933459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933464">qcom</span><span class="op" id="4933468">,</span>&nbsp;<span class="ident" id="4933470">line</span>&nbsp;<span class="op" id="4933475">:=</span>&nbsp;<span class="ident" id="4933478">findImportComment</span><span class="op" id="4933495">(</span><span class="ident" id="4933496">data</span><span class="op" id="4933500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933505">if</span>&nbsp;<span class="ident" id="4933508">line</span>&nbsp;<span class="op" id="4933513">!=</span>&nbsp;<span class="num" id="4933516">0</span>&nbsp;<span class="op" id="4933518">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933524">com</span><span class="op" id="4933527">,</span>&nbsp;<span class="ident" id="4933529">err</span>&nbsp;<span class="op" id="4933533">:=</span>&nbsp;<span class="ident" id="4933536">strconv</span><span class="op" id="4933543">.</span><span class="ident" id="4933544">Unquote</span><span class="op" id="4933551">(</span><span class="ident" id="4933552">qcom</span><span class="op" id="4933556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933562">if</span>&nbsp;<span class="ident" id="4933565">err</span>&nbsp;<span class="op" id="4933569">!=</span>&nbsp;<span class="builtintype" id="4933572">nil</span>&nbsp;<span class="op" id="4933576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933583">return</span>&nbsp;<span class="ident" id="4933590">p</span><span class="op" id="4933591">,</span>&nbsp;<span class="ident" id="4933593">fmt</span><span class="op" id="4933596">.</span><span class="ident" id="4933597">Errorf</span><span class="op" id="4933603">(</span><span class="string" id="4933604">&#34;%s:%d:&nbsp;cannot&nbsp;parse&nbsp;import&nbsp;comment&#34;</span><span class="op" id="4933640">,</span>&nbsp;<span class="ident" id="4933642">filename</span><span class="op" id="4933650">,</span>&nbsp;<span class="ident" id="4933652">line</span><span class="op" id="4933656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933668">if</span>&nbsp;<span class="ident" id="4933671">p</span><span class="op" id="4933672">.</span><span class="ident" id="4933673">ImportComment</span>&nbsp;<span class="op" id="4933687">==</span>&nbsp;<span class="string" id="4933690">&#34;&#34;</span>&nbsp;<span class="op" id="4933693">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933700">p</span><span class="op" id="4933701">.</span><span class="ident" id="4933702">ImportComment</span>&nbsp;<span class="op" id="4933716">=</span>&nbsp;<span class="ident" id="4933718">com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933727">firstCommentFile</span>&nbsp;<span class="op" id="4933744">=</span>&nbsp;<span class="ident" id="4933746">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933755">}</span>&nbsp;<span class="keyword" id="4933757">else</span>&nbsp;<span class="keyword" id="4933762">if</span>&nbsp;<span class="ident" id="4933765">p</span><span class="op" id="4933766">.</span><span class="ident" id="4933767">ImportComment</span>&nbsp;<span class="op" id="4933781">!=</span>&nbsp;<span class="ident" id="4933784">com</span>&nbsp;<span class="op" id="4933788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4933795">return</span>&nbsp;<span class="ident" id="4933802">p</span><span class="op" id="4933803">,</span>&nbsp;<span class="ident" id="4933805">fmt</span><span class="op" id="4933808">.</span><span class="ident" id="4933809">Errorf</span><span class="op" id="4933815">(</span><span class="string" id="4933816">&#34;found&nbsp;import&nbsp;comments&nbsp;%q&nbsp;(%s)&nbsp;and&nbsp;%q&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="4933865">,</span>&nbsp;<span class="ident" id="4933867">p</span><span class="op" id="4933868">.</span><span class="ident" id="4933869">ImportComment</span><span class="op" id="4933882">,</span>&nbsp;<span class="ident" id="4933884">firstCommentFile</span><span class="op" id="4933900">,</span>&nbsp;<span class="ident" id="4933902">com</span><span class="op" id="4933905">,</span>&nbsp;<span class="ident" id="4933907">name</span><span class="op" id="4933911">,</span>&nbsp;<span class="ident" id="4933913">p</span><span class="op" id="4933914">.</span><span class="ident" id="4933915">Dir</span><span class="op" id="4933918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933924">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4933933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4933938">//&nbsp;Record&nbsp;imports&nbsp;and&nbsp;information&nbsp;about&nbsp;cgo.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4933985">isCgo</span>&nbsp;<span class="op" id="4933991">:=</span>&nbsp;<span class="builtintype" id="4933994">false</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934002">for</span>&nbsp;<span class="ident" id="4934006">_</span><span class="op" id="4934007">,</span>&nbsp;<span class="ident" id="4934009">decl</span>&nbsp;<span class="op" id="4934014">:=</span>&nbsp;<span class="keyword" id="4934017">range</span>&nbsp;<span class="ident" id="4934023">pf</span><span class="op" id="4934025">.</span><span class="ident" id="4934026">Decls</span>&nbsp;<span class="op" id="4934032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934037">d</span><span class="op" id="4934038">,</span>&nbsp;<span class="ident" id="4934040">ok</span>&nbsp;<span class="op" id="4934043">:=</span>&nbsp;<span class="ident" id="4934046">decl</span><span class="op" id="4934050">.</span><span class="op" id="4934051">(</span><span class="op" id="4934052">*</span><span class="ident" id="4934053">ast</span><span class="op" id="4934056">.</span><span class="ident" id="4934057">GenDecl</span><span class="op" id="4934064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934069">if</span>&nbsp;<span class="op" id="4934072">!</span><span class="ident" id="4934073">ok</span>&nbsp;<span class="op" id="4934076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934082">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934094">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934099">for</span>&nbsp;<span class="ident" id="4934103">_</span><span class="op" id="4934104">,</span>&nbsp;<span class="ident" id="4934106">dspec</span>&nbsp;<span class="op" id="4934112">:=</span>&nbsp;<span class="keyword" id="4934115">range</span>&nbsp;<span class="ident" id="4934121">d</span><span class="op" id="4934122">.</span><span class="ident" id="4934123">Specs</span>&nbsp;<span class="op" id="4934129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934135">spec</span><span class="op" id="4934139">,</span>&nbsp;<span class="ident" id="4934141">ok</span>&nbsp;<span class="op" id="4934144">:=</span>&nbsp;<span class="ident" id="4934147">dspec</span><span class="op" id="4934152">.</span><span class="op" id="4934153">(</span><span class="op" id="4934154">*</span><span class="ident" id="4934155">ast</span><span class="op" id="4934158">.</span><span class="ident" id="4934159">ImportSpec</span><span class="op" id="4934169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934175">if</span>&nbsp;<span class="op" id="4934178">!</span><span class="ident" id="4934179">ok</span>&nbsp;<span class="op" id="4934182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934189">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934202">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934208">quoted</span>&nbsp;<span class="op" id="4934215">:=</span>&nbsp;<span class="ident" id="4934218">spec</span><span class="op" id="4934222">.</span><span class="ident" id="4934223">Path</span><span class="op" id="4934227">.</span><span class="ident" id="4934228">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934238">path</span><span class="op" id="4934242">,</span>&nbsp;<span class="ident" id="4934244">err</span>&nbsp;<span class="op" id="4934248">:=</span>&nbsp;<span class="ident" id="4934251">strconv</span><span class="op" id="4934258">.</span><span class="ident" id="4934259">Unquote</span><span class="op" id="4934266">(</span><span class="ident" id="4934267">quoted</span><span class="op" id="4934273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934279">if</span>&nbsp;<span class="ident" id="4934282">err</span>&nbsp;<span class="op" id="4934286">!=</span>&nbsp;<span class="builtintype" id="4934289">nil</span>&nbsp;<span class="op" id="4934293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934300">log</span><span class="op" id="4934303">.</span><span class="ident" id="4934304">Panicf</span><span class="op" id="4934310">(</span><span class="string" id="4934311">&#34;%s:&nbsp;parser&nbsp;returned&nbsp;invalid&nbsp;quoted&nbsp;string:&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="4934360">,</span>&nbsp;<span class="ident" id="4934362">filename</span><span class="op" id="4934370">,</span>&nbsp;<span class="ident" id="4934372">quoted</span><span class="op" id="4934378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934384">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934390">if</span>&nbsp;<span class="ident" id="4934393">isXTest</span>&nbsp;<span class="op" id="4934401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934408">xTestImported</span><span class="op" id="4934421">[</span><span class="ident" id="4934422">path</span><span class="op" id="4934426">]</span>&nbsp;<span class="op" id="4934428">=</span>&nbsp;<span class="builtinfunc" id="4934430">append</span><span class="op" id="4934436">(</span><span class="ident" id="4934437">xTestImported</span><span class="op" id="4934450">[</span><span class="ident" id="4934451">path</span><span class="op" id="4934455">]</span><span class="op" id="4934456">,</span>&nbsp;<span class="ident" id="4934458">fset</span><span class="op" id="4934462">.</span><span class="ident" id="4934463">Position</span><span class="op" id="4934471">(</span><span class="ident" id="4934472">spec</span><span class="op" id="4934476">.</span><span class="ident" id="4934477">Pos</span><span class="op" id="4934480">(</span><span class="op" id="4934481">)</span><span class="op" id="4934482">)</span><span class="op" id="4934483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934489">}</span>&nbsp;<span class="keyword" id="4934491">else</span>&nbsp;<span class="keyword" id="4934496">if</span>&nbsp;<span class="ident" id="4934499">isTest</span>&nbsp;<span class="op" id="4934506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934513">testImported</span><span class="op" id="4934525">[</span><span class="ident" id="4934526">path</span><span class="op" id="4934530">]</span>&nbsp;<span class="op" id="4934532">=</span>&nbsp;<span class="builtinfunc" id="4934534">append</span><span class="op" id="4934540">(</span><span class="ident" id="4934541">testImported</span><span class="op" id="4934553">[</span><span class="ident" id="4934554">path</span><span class="op" id="4934558">]</span><span class="op" id="4934559">,</span>&nbsp;<span class="ident" id="4934561">fset</span><span class="op" id="4934565">.</span><span class="ident" id="4934566">Position</span><span class="op" id="4934574">(</span><span class="ident" id="4934575">spec</span><span class="op" id="4934579">.</span><span class="ident" id="4934580">Pos</span><span class="op" id="4934583">(</span><span class="op" id="4934584">)</span><span class="op" id="4934585">)</span><span class="op" id="4934586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934592">}</span>&nbsp;<span class="keyword" id="4934594">else</span>&nbsp;<span class="op" id="4934599">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934606">imported</span><span class="op" id="4934614">[</span><span class="ident" id="4934615">path</span><span class="op" id="4934619">]</span>&nbsp;<span class="op" id="4934621">=</span>&nbsp;<span class="builtinfunc" id="4934623">append</span><span class="op" id="4934629">(</span><span class="ident" id="4934630">imported</span><span class="op" id="4934638">[</span><span class="ident" id="4934639">path</span><span class="op" id="4934643">]</span><span class="op" id="4934644">,</span>&nbsp;<span class="ident" id="4934646">fset</span><span class="op" id="4934650">.</span><span class="ident" id="4934651">Position</span><span class="op" id="4934659">(</span><span class="ident" id="4934660">spec</span><span class="op" id="4934664">.</span><span class="ident" id="4934665">Pos</span><span class="op" id="4934668">(</span><span class="op" id="4934669">)</span><span class="op" id="4934670">)</span><span class="op" id="4934671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934683">if</span>&nbsp;<span class="ident" id="4934686">path</span>&nbsp;<span class="op" id="4934691">==</span>&nbsp;<span class="string" id="4934694">&#34;C&#34;</span>&nbsp;<span class="op" id="4934698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934705">if</span>&nbsp;<span class="ident" id="4934708">isTest</span>&nbsp;<span class="op" id="4934715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934723">return</span>&nbsp;<span class="ident" id="4934730">p</span><span class="op" id="4934731">,</span>&nbsp;<span class="ident" id="4934733">fmt</span><span class="op" id="4934736">.</span><span class="ident" id="4934737">Errorf</span><span class="op" id="4934743">(</span><span class="string" id="4934744">&#34;use&nbsp;of&nbsp;cgo&nbsp;in&nbsp;test&nbsp;%s&nbsp;not&nbsp;supported&#34;</span><span class="op" id="4934781">,</span>&nbsp;<span class="ident" id="4934783">filename</span><span class="op" id="4934791">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934805">cg</span>&nbsp;<span class="op" id="4934808">:=</span>&nbsp;<span class="ident" id="4934811">spec</span><span class="op" id="4934815">.</span><span class="ident" id="4934816">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934825">if</span>&nbsp;<span class="ident" id="4934828">cg</span>&nbsp;<span class="op" id="4934831">==</span>&nbsp;<span class="builtintype" id="4934834">nil</span>&nbsp;<span class="op" id="4934838">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4934841">len</span><span class="op" id="4934844">(</span><span class="ident" id="4934845">d</span><span class="op" id="4934846">.</span><span class="ident" id="4934847">Specs</span><span class="op" id="4934852">)</span>&nbsp;<span class="op" id="4934854">==</span>&nbsp;<span class="num" id="4934857">1</span>&nbsp;<span class="op" id="4934859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4934867">cg</span>&nbsp;<span class="op" id="4934870">=</span>&nbsp;<span class="ident" id="4934872">d</span><span class="op" id="4934873">.</span><span class="ident" id="4934874">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934883">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934890">if</span>&nbsp;<span class="ident" id="4934893">cg</span>&nbsp;<span class="op" id="4934896">!=</span>&nbsp;<span class="builtintype" id="4934899">nil</span>&nbsp;<span class="op" id="4934903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934911">if</span>&nbsp;<span class="ident" id="4934914">err</span>&nbsp;<span class="op" id="4934918">:=</span>&nbsp;<span class="ident" id="4934921">ctxt</span><span class="op" id="4934925">.</span><span class="ident" id="4934926">saveCgo</span><span class="op" id="4934933">(</span><span class="ident" id="4934934">filename</span><span class="op" id="4934942">,</span>&nbsp;<span class="ident" id="4934944">p</span><span class="op" id="4934945">,</span>&nbsp;<span class="ident" id="4934947">cg</span><span class="op" id="4934949">)</span><span class="op" id="4934950">;</span>&nbsp;<span class="ident" id="4934952">err</span>&nbsp;<span class="op" id="4934956">!=</span>&nbsp;<span class="builtintype" id="4934959">nil</span>&nbsp;<span class="op" id="4934963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4934972">return</span>&nbsp;<span class="ident" id="4934979">p</span><span class="op" id="4934980">,</span>&nbsp;<span class="ident" id="4934982">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4934999">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935006">isCgo</span>&nbsp;<span class="op" id="4935012">=</span>&nbsp;<span class="builtintype" id="4935014">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935036">if</span>&nbsp;<span class="ident" id="4935039">isCgo</span>&nbsp;<span class="op" id="4935045">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935050">allTags</span><span class="op" id="4935057">[</span><span class="string" id="4935058">&#34;cgo&#34;</span><span class="op" id="4935063">]</span>&nbsp;<span class="op" id="4935065">=</span>&nbsp;<span class="builtintype" id="4935067">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935075">if</span>&nbsp;<span class="ident" id="4935078">ctxt</span><span class="op" id="4935082">.</span><span class="ident" id="4935083">CgoEnabled</span>&nbsp;<span class="op" id="4935094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935100">p</span><span class="op" id="4935101">.</span><span class="ident" id="4935102">CgoFiles</span>&nbsp;<span class="op" id="4935111">=</span>&nbsp;<span class="builtinfunc" id="4935113">append</span><span class="op" id="4935119">(</span><span class="ident" id="4935120">p</span><span class="op" id="4935121">.</span><span class="ident" id="4935122">CgoFiles</span><span class="op" id="4935130">,</span>&nbsp;<span class="ident" id="4935132">name</span><span class="op" id="4935136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935141">}</span>&nbsp;<span class="keyword" id="4935143">else</span>&nbsp;<span class="op" id="4935148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935154">p</span><span class="op" id="4935155">.</span><span class="ident" id="4935156">IgnoredGoFiles</span>&nbsp;<span class="op" id="4935171">=</span>&nbsp;<span class="builtinfunc" id="4935173">append</span><span class="op" id="4935179">(</span><span class="ident" id="4935180">p</span><span class="op" id="4935181">.</span><span class="ident" id="4935182">IgnoredGoFiles</span><span class="op" id="4935196">,</span>&nbsp;<span class="ident" id="4935198">name</span><span class="op" id="4935202">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935211">}</span>&nbsp;<span class="keyword" id="4935213">else</span>&nbsp;<span class="keyword" id="4935218">if</span>&nbsp;<span class="ident" id="4935221">isXTest</span>&nbsp;<span class="op" id="4935229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935234">p</span><span class="op" id="4935235">.</span><span class="ident" id="4935236">XTestGoFiles</span>&nbsp;<span class="op" id="4935249">=</span>&nbsp;<span class="builtinfunc" id="4935251">append</span><span class="op" id="4935257">(</span><span class="ident" id="4935258">p</span><span class="op" id="4935259">.</span><span class="ident" id="4935260">XTestGoFiles</span><span class="op" id="4935272">,</span>&nbsp;<span class="ident" id="4935274">name</span><span class="op" id="4935278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935282">}</span>&nbsp;<span class="keyword" id="4935284">else</span>&nbsp;<span class="keyword" id="4935289">if</span>&nbsp;<span class="ident" id="4935292">isTest</span>&nbsp;<span class="op" id="4935299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935304">p</span><span class="op" id="4935305">.</span><span class="ident" id="4935306">TestGoFiles</span>&nbsp;<span class="op" id="4935318">=</span>&nbsp;<span class="builtinfunc" id="4935320">append</span><span class="op" id="4935326">(</span><span class="ident" id="4935327">p</span><span class="op" id="4935328">.</span><span class="ident" id="4935329">TestGoFiles</span><span class="op" id="4935340">,</span>&nbsp;<span class="ident" id="4935342">name</span><span class="op" id="4935346">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935350">}</span>&nbsp;<span class="keyword" id="4935352">else</span>&nbsp;<span class="op" id="4935357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935362">p</span><span class="op" id="4935363">.</span><span class="ident" id="4935364">GoFiles</span>&nbsp;<span class="op" id="4935372">=</span>&nbsp;<span class="builtinfunc" id="4935374">append</span><span class="op" id="4935380">(</span><span class="ident" id="4935381">p</span><span class="op" id="4935382">.</span><span class="ident" id="4935383">GoFiles</span><span class="op" id="4935390">,</span>&nbsp;<span class="ident" id="4935392">name</span><span class="op" id="4935396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935406">if</span>&nbsp;<span class="builtinfunc" id="4935409">len</span><span class="op" id="4935412">(</span><span class="ident" id="4935413">p</span><span class="op" id="4935414">.</span><span class="ident" id="4935415">GoFiles</span><span class="op" id="4935422">)</span><span class="op" id="4935423">+</span><span class="builtinfunc" id="4935424">len</span><span class="op" id="4935427">(</span><span class="ident" id="4935428">p</span><span class="op" id="4935429">.</span><span class="ident" id="4935430">CgoFiles</span><span class="op" id="4935438">)</span><span class="op" id="4935439">+</span><span class="builtinfunc" id="4935440">len</span><span class="op" id="4935443">(</span><span class="ident" id="4935444">p</span><span class="op" id="4935445">.</span><span class="ident" id="4935446">TestGoFiles</span><span class="op" id="4935457">)</span><span class="op" id="4935458">+</span><span class="builtinfunc" id="4935459">len</span><span class="op" id="4935462">(</span><span class="ident" id="4935463">p</span><span class="op" id="4935464">.</span><span class="ident" id="4935465">XTestGoFiles</span><span class="op" id="4935477">)</span>&nbsp;<span class="op" id="4935479">==</span>&nbsp;<span class="num" id="4935482">0</span>&nbsp;<span class="op" id="4935484">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935488">return</span>&nbsp;<span class="ident" id="4935495">p</span><span class="op" id="4935496">,</span>&nbsp;<span class="op" id="4935498">&amp;</span><span class="ident" id="4935499">NoGoError</span><span class="op" id="4935508">{</span><span class="ident" id="4935509">p</span><span class="op" id="4935510">.</span><span class="ident" id="4935511">Dir</span><span class="op" id="4935514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935521">for</span>&nbsp;<span class="ident" id="4935525">tag</span>&nbsp;<span class="op" id="4935529">:=</span>&nbsp;<span class="keyword" id="4935532">range</span>&nbsp;<span class="ident" id="4935538">allTags</span>&nbsp;<span class="op" id="4935546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935550">p</span><span class="op" id="4935551">.</span><span class="ident" id="4935552">AllTags</span>&nbsp;<span class="op" id="4935560">=</span>&nbsp;<span class="builtinfunc" id="4935562">append</span><span class="op" id="4935568">(</span><span class="ident" id="4935569">p</span><span class="op" id="4935570">.</span><span class="ident" id="4935571">AllTags</span><span class="op" id="4935578">,</span>&nbsp;<span class="ident" id="4935580">tag</span><span class="op" id="4935583">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4935586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935589">sort</span><span class="op" id="4935593">.</span><span class="ident" id="4935594">Strings</span><span class="op" id="4935601">(</span><span class="ident" id="4935602">p</span><span class="op" id="4935603">.</span><span class="ident" id="4935604">AllTags</span><span class="op" id="4935611">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935615">p</span><span class="op" id="4935616">.</span><span class="ident" id="4935617">Imports</span><span class="op" id="4935624">,</span>&nbsp;<span class="ident" id="4935626">p</span><span class="op" id="4935627">.</span><span class="ident" id="4935628">ImportPos</span>&nbsp;<span class="op" id="4935638">=</span>&nbsp;<span class="ident" id="4935640">cleanImports</span><span class="op" id="4935652">(</span><span class="ident" id="4935653">imported</span><span class="op" id="4935661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935664">p</span><span class="op" id="4935665">.</span><span class="ident" id="4935666">TestImports</span><span class="op" id="4935677">,</span>&nbsp;<span class="ident" id="4935679">p</span><span class="op" id="4935680">.</span><span class="ident" id="4935681">TestImportPos</span>&nbsp;<span class="op" id="4935695">=</span>&nbsp;<span class="ident" id="4935697">cleanImports</span><span class="op" id="4935709">(</span><span class="ident" id="4935710">testImported</span><span class="op" id="4935722">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935725">p</span><span class="op" id="4935726">.</span><span class="ident" id="4935727">XTestImports</span><span class="op" id="4935739">,</span>&nbsp;<span class="ident" id="4935741">p</span><span class="op" id="4935742">.</span><span class="ident" id="4935743">XTestImportPos</span>&nbsp;<span class="op" id="4935758">=</span>&nbsp;<span class="ident" id="4935760">cleanImports</span><span class="op" id="4935772">(</span><span class="ident" id="4935773">xTestImported</span><span class="op" id="4935786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935790">//&nbsp;add&nbsp;the&nbsp;.S&nbsp;files&nbsp;only&nbsp;if&nbsp;we&nbsp;are&nbsp;using&nbsp;cgo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935836">//&nbsp;(which&nbsp;means&nbsp;gcc&nbsp;will&nbsp;compile&nbsp;them).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4935877">//&nbsp;The&nbsp;standard&nbsp;assemblers&nbsp;expect&nbsp;.s&nbsp;files.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4935922">if</span>&nbsp;<span class="builtinfunc" id="4935925">len</span><span class="op" id="4935928">(</span><span class="ident" id="4935929">p</span><span class="op" id="4935930">.</span><span class="ident" id="4935931">CgoFiles</span><span class="op" id="4935939">)</span>&nbsp;<span class="op" id="4935941">&gt;</span>&nbsp;<span class="num" id="4935943">0</span>&nbsp;<span class="op" id="4935945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935949">p</span><span class="op" id="4935950">.</span><span class="ident" id="4935951">SFiles</span>&nbsp;<span class="op" id="4935958">=</span>&nbsp;<span class="builtinfunc" id="4935960">append</span><span class="op" id="4935966">(</span><span class="ident" id="4935967">p</span><span class="op" id="4935968">.</span><span class="ident" id="4935969">SFiles</span><span class="op" id="4935975">,</span>&nbsp;<span class="ident" id="4935977">Sfiles</span><span class="op" id="4935983">...</span><span class="op" id="4935986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4935990">sort</span><span class="op" id="4935994">.</span><span class="ident" id="4935995">Strings</span><span class="op" id="4936002">(</span><span class="ident" id="4936003">p</span><span class="op" id="4936004">.</span><span class="ident" id="4936005">SFiles</span><span class="op" id="4936011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936018">return</span>&nbsp;<span class="ident" id="4936025">p</span><span class="op" id="4936026">,</span>&nbsp;<span class="ident" id="4936028">pkgerr</span><br>
<span class="lineno"></span><span class="op" id="4936035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4936038">func</span>&nbsp;<span class="ident" id="4936043">findImportComment</span><span class="op" id="4936060">(</span><span class="ident" id="4936061">data</span>&nbsp;<span class="op" id="4936066">[</span><span class="op" id="4936067">]</span><span class="builtintype" id="4936068">byte</span><span class="op" id="4936072">)</span>&nbsp;<span class="op" id="4936074">(</span><span class="ident" id="4936075">s</span>&nbsp;<span class="builtintype" id="4936077">string</span><span class="op" id="4936083">,</span>&nbsp;<span class="ident" id="4936085">line</span>&nbsp;<span class="builtintype" id="4936090">int</span><span class="op" id="4936093">)</span>&nbsp;<span class="op" id="4936095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4936098">//&nbsp;expect&nbsp;keyword&nbsp;package</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936125">word</span><span class="op" id="4936129">,</span>&nbsp;<span class="ident" id="4936131">data</span>&nbsp;<span class="op" id="4936136">:=</span>&nbsp;<span class="ident" id="4936139">parseWord</span><span class="op" id="4936148">(</span><span class="ident" id="4936149">data</span><span class="op" id="4936153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936156">if</span>&nbsp;<span class="builtintype" id="4936159">string</span><span class="op" id="4936165">(</span><span class="ident" id="4936166">word</span><span class="op" id="4936170">)</span>&nbsp;<span class="op" id="4936172">!=</span>&nbsp;<span class="string" id="4936175">&#34;package&#34;</span>&nbsp;<span class="op" id="4936185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936189">return</span>&nbsp;<span class="string" id="4936196">&#34;&#34;</span><span class="op" id="4936198">,</span>&nbsp;<span class="num" id="4936200">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4936207">//&nbsp;expect&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936231">_</span><span class="op" id="4936232">,</span>&nbsp;<span class="ident" id="4936234">data</span>&nbsp;<span class="op" id="4936239">=</span>&nbsp;<span class="ident" id="4936241">parseWord</span><span class="op" id="4936250">(</span><span class="ident" id="4936251">data</span><span class="op" id="4936255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4936259">//&nbsp;now&nbsp;ready&nbsp;for&nbsp;import&nbsp;comment,&nbsp;a&nbsp;//&nbsp;or&nbsp;/*&nbsp;*/&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4936315">//&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;on&nbsp;the&nbsp;current&nbsp;line.</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936361">for</span>&nbsp;<span class="builtinfunc" id="4936365">len</span><span class="op" id="4936368">(</span><span class="ident" id="4936369">data</span><span class="op" id="4936373">)</span>&nbsp;<span class="op" id="4936375">&gt;</span>&nbsp;<span class="num" id="4936377">0</span>&nbsp;<span class="op" id="4936379">&amp;&amp;</span>&nbsp;<span class="op" id="4936382">(</span><span class="ident" id="4936383">data</span><span class="op" id="4936387">[</span><span class="num" id="4936388">0</span><span class="op" id="4936389">]</span>&nbsp;<span class="op" id="4936391">==</span>&nbsp;<span class="string" id="4936394">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4936398">||</span>&nbsp;<span class="ident" id="4936401">data</span><span class="op" id="4936405">[</span><span class="num" id="4936406">0</span><span class="op" id="4936407">]</span>&nbsp;<span class="op" id="4936409">==</span>&nbsp;<span class="string" id="4936412">&#39;\t&#39;</span>&nbsp;<span class="op" id="4936417">||</span>&nbsp;<span class="ident" id="4936420">data</span><span class="op" id="4936424">[</span><span class="num" id="4936425">0</span><span class="op" id="4936426">]</span>&nbsp;<span class="op" id="4936428">==</span>&nbsp;<span class="string" id="4936431">&#39;\r&#39;</span><span class="op" id="4936435">)</span>&nbsp;<span class="op" id="4936437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936441">data</span>&nbsp;<span class="op" id="4936446">=</span>&nbsp;<span class="ident" id="4936448">data</span><span class="op" id="4936452">[</span><span class="num" id="4936453">1</span><span class="op" id="4936454">:</span><span class="op" id="4936455">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936462">var</span>&nbsp;<span class="ident" id="4936466">comment</span>&nbsp;<span class="op" id="4936474">[</span><span class="op" id="4936475">]</span><span class="builtintype" id="4936476">byte</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936482">switch</span>&nbsp;<span class="op" id="4936489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936492">case</span>&nbsp;<span class="ident" id="4936497">bytes</span><span class="op" id="4936502">.</span><span class="ident" id="4936503">HasPrefix</span><span class="op" id="4936512">(</span><span class="ident" id="4936513">data</span><span class="op" id="4936517">,</span>&nbsp;<span class="ident" id="4936519">slashSlash</span><span class="op" id="4936529">)</span><span class="op" id="4936530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936534">i</span>&nbsp;<span class="op" id="4936536">:=</span>&nbsp;<span class="ident" id="4936539">bytes</span><span class="op" id="4936544">.</span><span class="ident" id="4936545">Index</span><span class="op" id="4936550">(</span><span class="ident" id="4936551">data</span><span class="op" id="4936555">,</span>&nbsp;<span class="ident" id="4936557">newline</span><span class="op" id="4936564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936568">if</span>&nbsp;<span class="ident" id="4936571">i</span>&nbsp;<span class="op" id="4936573">&lt;</span>&nbsp;<span class="num" id="4936575">0</span>&nbsp;<span class="op" id="4936577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936582">i</span>&nbsp;<span class="op" id="4936584">=</span>&nbsp;<span class="builtinfunc" id="4936586">len</span><span class="op" id="4936589">(</span><span class="ident" id="4936590">data</span><span class="op" id="4936594">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936602">comment</span>&nbsp;<span class="op" id="4936610">=</span>&nbsp;<span class="ident" id="4936612">data</span><span class="op" id="4936616">[</span><span class="num" id="4936617">2</span><span class="op" id="4936618">:</span><span class="ident" id="4936619">i</span><span class="op" id="4936620">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936623">case</span>&nbsp;<span class="ident" id="4936628">bytes</span><span class="op" id="4936633">.</span><span class="ident" id="4936634">HasPrefix</span><span class="op" id="4936643">(</span><span class="ident" id="4936644">data</span><span class="op" id="4936648">,</span>&nbsp;<span class="ident" id="4936650">slashStar</span><span class="op" id="4936659">)</span><span class="op" id="4936660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936664">data</span>&nbsp;<span class="op" id="4936669">=</span>&nbsp;<span class="ident" id="4936671">data</span><span class="op" id="4936675">[</span><span class="num" id="4936676">2</span><span class="op" id="4936677">:</span><span class="op" id="4936678">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936682">i</span>&nbsp;<span class="op" id="4936684">:=</span>&nbsp;<span class="ident" id="4936687">bytes</span><span class="op" id="4936692">.</span><span class="ident" id="4936693">Index</span><span class="op" id="4936698">(</span><span class="ident" id="4936699">data</span><span class="op" id="4936703">,</span>&nbsp;<span class="ident" id="4936705">starSlash</span><span class="op" id="4936714">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936718">if</span>&nbsp;<span class="ident" id="4936721">i</span>&nbsp;<span class="op" id="4936723">&lt;</span>&nbsp;<span class="num" id="4936725">0</span>&nbsp;<span class="op" id="4936727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4936732">//&nbsp;malformed&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936756">return</span>&nbsp;<span class="string" id="4936763">&#34;&#34;</span><span class="op" id="4936765">,</span>&nbsp;<span class="num" id="4936767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936775">comment</span>&nbsp;<span class="op" id="4936783">=</span>&nbsp;<span class="ident" id="4936785">data</span><span class="op" id="4936789">[</span><span class="op" id="4936790">:</span><span class="ident" id="4936791">i</span><span class="op" id="4936792">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936796">if</span>&nbsp;<span class="ident" id="4936799">bytes</span><span class="op" id="4936804">.</span><span class="ident" id="4936805">Contains</span><span class="op" id="4936813">(</span><span class="ident" id="4936814">comment</span><span class="op" id="4936821">,</span>&nbsp;<span class="ident" id="4936823">newline</span><span class="op" id="4936830">)</span>&nbsp;<span class="op" id="4936832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936837">return</span>&nbsp;<span class="string" id="4936844">&#34;&#34;</span><span class="op" id="4936846">,</span>&nbsp;<span class="num" id="4936848">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936858">comment</span>&nbsp;<span class="op" id="4936866">=</span>&nbsp;<span class="ident" id="4936868">bytes</span><span class="op" id="4936873">.</span><span class="ident" id="4936874">TrimSpace</span><span class="op" id="4936883">(</span><span class="ident" id="4936884">comment</span><span class="op" id="4936891">)</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4936895">//&nbsp;split&nbsp;comment&nbsp;into&nbsp;`import`,&nbsp;`&#34;pkg&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4936936">word</span><span class="op" id="4936940">,</span>&nbsp;<span class="ident" id="4936942">arg</span>&nbsp;<span class="op" id="4936946">:=</span>&nbsp;<span class="ident" id="4936949">parseWord</span><span class="op" id="4936958">(</span><span class="ident" id="4936959">comment</span><span class="op" id="4936966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4936969">if</span>&nbsp;<span class="builtintype" id="4936972">string</span><span class="op" id="4936978">(</span><span class="ident" id="4936979">word</span><span class="op" id="4936983">)</span>&nbsp;<span class="op" id="4936985">!=</span>&nbsp;<span class="string" id="4936988">&#34;import&#34;</span>&nbsp;<span class="op" id="4936997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937001">return</span>&nbsp;<span class="string" id="4937008">&#34;&#34;</span><span class="op" id="4937010">,</span>&nbsp;<span class="num" id="4937012">0</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937019">line</span>&nbsp;<span class="op" id="4937024">=</span>&nbsp;<span class="num" id="4937026">1</span>&nbsp;<span class="op" id="4937028">+</span>&nbsp;<span class="ident" id="4937030">bytes</span><span class="op" id="4937035">.</span><span class="ident" id="4937036">Count</span><span class="op" id="4937041">(</span><span class="ident" id="4937042">data</span><span class="op" id="4937046">[</span><span class="op" id="4937047">:</span><span class="builtinfunc" id="4937048">cap</span><span class="op" id="4937051">(</span><span class="ident" id="4937052">data</span><span class="op" id="4937056">)</span><span class="op" id="4937057">-</span><span class="builtinfunc" id="4937058">cap</span><span class="op" id="4937061">(</span><span class="ident" id="4937062">arg</span><span class="op" id="4937065">)</span><span class="op" id="4937066">]</span><span class="op" id="4937067">,</span>&nbsp;<span class="ident" id="4937069">newline</span><span class="op" id="4937076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937079">return</span>&nbsp;<span class="ident" id="4937086">strings</span><span class="op" id="4937093">.</span><span class="ident" id="4937094">TrimSpace</span><span class="op" id="4937103">(</span><span class="builtintype" id="4937104">string</span><span class="op" id="4937110">(</span><span class="ident" id="4937111">arg</span><span class="op" id="4937114">)</span><span class="op" id="4937115">)</span><span class="op" id="4937116">,</span>&nbsp;<span class="ident" id="4937118">line</span><br>
<span class="lineno"></span><span class="op" id="4937123">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="4937126">var</span>&nbsp;<span class="op" id="4937130">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937133">slashSlash</span>&nbsp;<span class="op" id="4937144">=</span>&nbsp;<span class="op" id="4937146">[</span><span class="op" id="4937147">]</span><span class="builtintype" id="4937148">byte</span><span class="op" id="4937152">(</span><span class="string" id="4937153">&#34;//&#34;</span><span class="op" id="4937157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937160">slashStar</span>&nbsp;&nbsp;<span class="op" id="4937171">=</span>&nbsp;<span class="op" id="4937173">[</span><span class="op" id="4937174">]</span><span class="builtintype" id="4937175">byte</span><span class="op" id="4937179">(</span><span class="string" id="4937180">&#34;/*&#34;</span><span class="op" id="4937184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937187">starSlash</span>&nbsp;&nbsp;<span class="op" id="4937198">=</span>&nbsp;<span class="op" id="4937200">[</span><span class="op" id="4937201">]</span><span class="builtintype" id="4937202">byte</span><span class="op" id="4937206">(</span><span class="string" id="4937207">&#34;*/&#34;</span><span class="op" id="4937211">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937214">newline</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937225">=</span>&nbsp;<span class="op" id="4937227">[</span><span class="op" id="4937228">]</span><span class="builtintype" id="4937229">byte</span><span class="op" id="4937233">(</span><span class="string" id="4937234">&#34;\n&#34;</span><span class="op" id="4937238">)</span><br>
<span class="lineno"></span><span class="op" id="4937240">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4937243">//&nbsp;skipSpaceOrComment&nbsp;returns&nbsp;data&nbsp;with&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="4937323">func</span>&nbsp;<span class="ident" id="4937328">skipSpaceOrComment</span><span class="op" id="4937346">(</span><span class="ident" id="4937347">data</span>&nbsp;<span class="op" id="4937352">[</span><span class="op" id="4937353">]</span><span class="builtintype" id="4937354">byte</span><span class="op" id="4937358">)</span>&nbsp;<span class="op" id="4937360">[</span><span class="op" id="4937361">]</span><span class="builtintype" id="4937362">byte</span>&nbsp;<span class="op" id="4937367">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937370">for</span>&nbsp;<span class="builtinfunc" id="4937374">len</span><span class="op" id="4937377">(</span><span class="ident" id="4937378">data</span><span class="op" id="4937382">)</span>&nbsp;<span class="op" id="4937384">&gt;</span>&nbsp;<span class="num" id="4937386">0</span>&nbsp;<span class="op" id="4937388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937392">switch</span>&nbsp;<span class="ident" id="4937399">data</span><span class="op" id="4937403">[</span><span class="num" id="4937404">0</span><span class="op" id="4937405">]</span>&nbsp;<span class="op" id="4937407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937411">case</span>&nbsp;<span class="string" id="4937416">&#39;&nbsp;&#39;</span><span class="op" id="4937419">,</span>&nbsp;<span class="string" id="4937421">&#39;\t&#39;</span><span class="op" id="4937425">,</span>&nbsp;<span class="string" id="4937427">&#39;\r&#39;</span><span class="op" id="4937431">,</span>&nbsp;<span class="string" id="4937433">&#39;\n&#39;</span><span class="op" id="4937437">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937442">data</span>&nbsp;<span class="op" id="4937447">=</span>&nbsp;<span class="ident" id="4937449">data</span><span class="op" id="4937453">[</span><span class="num" id="4937454">1</span><span class="op" id="4937455">:</span><span class="op" id="4937456">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937461">continue</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937472">case</span>&nbsp;<span class="string" id="4937477">&#39;/&#39;</span><span class="op" id="4937480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937485">if</span>&nbsp;<span class="ident" id="4937488">bytes</span><span class="op" id="4937493">.</span><span class="ident" id="4937494">HasPrefix</span><span class="op" id="4937503">(</span><span class="ident" id="4937504">data</span><span class="op" id="4937508">,</span>&nbsp;<span class="ident" id="4937510">slashSlash</span><span class="op" id="4937520">)</span>&nbsp;<span class="op" id="4937522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937528">i</span>&nbsp;<span class="op" id="4937530">:=</span>&nbsp;<span class="ident" id="4937533">bytes</span><span class="op" id="4937538">.</span><span class="ident" id="4937539">Index</span><span class="op" id="4937544">(</span><span class="ident" id="4937545">data</span><span class="op" id="4937549">,</span>&nbsp;<span class="ident" id="4937551">newline</span><span class="op" id="4937558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937564">if</span>&nbsp;<span class="ident" id="4937567">i</span>&nbsp;<span class="op" id="4937569">&lt;</span>&nbsp;<span class="num" id="4937571">0</span>&nbsp;<span class="op" id="4937573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937580">return</span>&nbsp;<span class="builtintype" id="4937587">nil</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937601">data</span>&nbsp;<span class="op" id="4937606">=</span>&nbsp;<span class="ident" id="4937608">data</span><span class="op" id="4937612">[</span><span class="ident" id="4937613">i</span><span class="op" id="4937614">+</span><span class="num" id="4937615">1</span><span class="op" id="4937616">:</span><span class="op" id="4937617">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937623">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937640">if</span>&nbsp;<span class="ident" id="4937643">bytes</span><span class="op" id="4937648">.</span><span class="ident" id="4937649">HasPrefix</span><span class="op" id="4937658">(</span><span class="ident" id="4937659">data</span><span class="op" id="4937663">,</span>&nbsp;<span class="ident" id="4937665">slashStar</span><span class="op" id="4937674">)</span>&nbsp;<span class="op" id="4937676">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937682">data</span>&nbsp;<span class="op" id="4937687">=</span>&nbsp;<span class="ident" id="4937689">data</span><span class="op" id="4937693">[</span><span class="num" id="4937694">2</span><span class="op" id="4937695">:</span><span class="op" id="4937696">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937702">i</span>&nbsp;<span class="op" id="4937704">:=</span>&nbsp;<span class="ident" id="4937707">bytes</span><span class="op" id="4937712">.</span><span class="ident" id="4937713">Index</span><span class="op" id="4937718">(</span><span class="ident" id="4937719">data</span><span class="op" id="4937723">,</span>&nbsp;<span class="ident" id="4937725">starSlash</span><span class="op" id="4937734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937740">if</span>&nbsp;<span class="ident" id="4937743">i</span>&nbsp;<span class="op" id="4937745">&lt;</span>&nbsp;<span class="num" id="4937747">0</span>&nbsp;<span class="op" id="4937749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937756">return</span>&nbsp;<span class="builtintype" id="4937763">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937771">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4937777">data</span>&nbsp;<span class="op" id="4937782">=</span>&nbsp;<span class="ident" id="4937784">data</span><span class="op" id="4937788">[</span><span class="ident" id="4937789">i</span><span class="op" id="4937790">+</span><span class="num" id="4937791">2</span><span class="op" id="4937792">:</span><span class="op" id="4937793">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937799">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937819">break</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4937829">return</span>&nbsp;<span class="ident" id="4937836">data</span><br>
<span class="lineno"></span><span class="op" id="4937841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4937844">//&nbsp;parseWord&nbsp;skips&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;in&nbsp;data</span><br>
<span class="lineno">880</span><span class="comment" id="4937902">//&nbsp;and&nbsp;then&nbsp;parses&nbsp;the&nbsp;beginning&nbsp;of&nbsp;data&nbsp;as&nbsp;an&nbsp;identifier&nbsp;or&nbsp;keyword,</span><br>
<span class="lineno"></span><span class="comment" id="4937972">//&nbsp;returning&nbsp;that&nbsp;word&nbsp;and&nbsp;what&nbsp;remains&nbsp;after&nbsp;the&nbsp;word.</span><br>
<span class="lineno"></span><span class="keyword" id="4938028">func</span>&nbsp;<span class="ident" id="4938033">parseWord</span><span class="op" id="4938042">(</span><span class="ident" id="4938043">data</span>&nbsp;<span class="op" id="4938048">[</span><span class="op" id="4938049">]</span><span class="builtintype" id="4938050">byte</span><span class="op" id="4938054">)</span>&nbsp;<span class="op" id="4938056">(</span><span class="ident" id="4938057">word</span><span class="op" id="4938061">,</span>&nbsp;<span class="ident" id="4938063">rest</span>&nbsp;<span class="op" id="4938068">[</span><span class="op" id="4938069">]</span><span class="builtintype" id="4938070">byte</span><span class="op" id="4938074">)</span>&nbsp;<span class="op" id="4938076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4938079">data</span>&nbsp;<span class="op" id="4938084">=</span>&nbsp;<span class="ident" id="4938086">skipSpaceOrComment</span><span class="op" id="4938104">(</span><span class="ident" id="4938105">data</span><span class="op" id="4938109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4938113">//&nbsp;Parse&nbsp;past&nbsp;leading&nbsp;word&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4938153">rest</span>&nbsp;<span class="op" id="4938158">=</span>&nbsp;<span class="ident" id="4938160">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938166">for</span>&nbsp;<span class="op" id="4938170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4938174">r</span><span class="op" id="4938175">,</span>&nbsp;<span class="ident" id="4938177">size</span>&nbsp;<span class="op" id="4938182">:=</span>&nbsp;<span class="ident" id="4938185">utf8</span><span class="op" id="4938189">.</span><span class="ident" id="4938190">DecodeRune</span><span class="op" id="4938200">(</span><span class="ident" id="4938201">rest</span><span class="op" id="4938205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938209">if</span>&nbsp;<span class="ident" id="4938212">unicode</span><span class="op" id="4938219">.</span><span class="ident" id="4938220">IsLetter</span><span class="op" id="4938228">(</span><span class="ident" id="4938229">r</span><span class="op" id="4938230">)</span>&nbsp;<span class="op" id="4938232">||</span>&nbsp;<span class="string" id="4938235">&#39;0&#39;</span>&nbsp;<span class="op" id="4938239">&lt;=</span>&nbsp;<span class="ident" id="4938242">r</span>&nbsp;<span class="op" id="4938244">&amp;&amp;</span>&nbsp;<span class="ident" id="4938247">r</span>&nbsp;<span class="op" id="4938249">&lt;=</span>&nbsp;<span class="string" id="4938252">&#39;9&#39;</span>&nbsp;<span class="op" id="4938256">||</span>&nbsp;<span class="ident" id="4938259">r</span>&nbsp;<span class="op" id="4938261">==</span>&nbsp;<span class="string" id="4938264">&#39;_&#39;</span>&nbsp;<span class="op" id="4938268">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4938273">rest</span>&nbsp;<span class="op" id="4938278">=</span>&nbsp;<span class="ident" id="4938280">rest</span><span class="op" id="4938284">[</span><span class="ident" id="4938285">size</span><span class="op" id="4938289">:</span><span class="op" id="4938290">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938295">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4938306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938310">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4938317">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4938321">word</span>&nbsp;<span class="op" id="4938326">=</span>&nbsp;<span class="ident" id="4938328">data</span><span class="op" id="4938332">[</span><span class="op" id="4938333">:</span><span class="builtinfunc" id="4938334">len</span><span class="op" id="4938337">(</span><span class="ident" id="4938338">data</span><span class="op" id="4938342">)</span><span class="op" id="4938343">-</span><span class="builtinfunc" id="4938344">len</span><span class="op" id="4938347">(</span><span class="ident" id="4938348">rest</span><span class="op" id="4938352">)</span><span class="op" id="4938353">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938356">if</span>&nbsp;<span class="builtinfunc" id="4938359">len</span><span class="op" id="4938362">(</span><span class="ident" id="4938363">word</span><span class="op" id="4938367">)</span>&nbsp;<span class="op" id="4938369">==</span>&nbsp;<span class="num" id="4938372">0</span>&nbsp;<span class="op" id="4938374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938378">return</span>&nbsp;<span class="builtintype" id="4938385">nil</span><span class="op" id="4938388">,</span>&nbsp;<span class="builtintype" id="4938390">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4938395">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938399">return</span>&nbsp;<span class="ident" id="4938406">word</span><span class="op" id="4938410">,</span>&nbsp;<span class="ident" id="4938412">rest</span><br>
<span class="lineno"></span><span class="op" id="4938417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4938420">//&nbsp;MatchFile&nbsp;reports&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno">905</span><span class="comment" id="4938501">//&nbsp;matches&nbsp;the&nbsp;context&nbsp;and&nbsp;would&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;Package&nbsp;created&nbsp;by&nbsp;ImportDir</span><br>
<span class="lineno"></span><span class="comment" id="4938580">//&nbsp;of&nbsp;that&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="4938602">//</span><br>
<span class="lineno"></span><span class="comment" id="4938605">//&nbsp;MatchFile&nbsp;considers&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;and&nbsp;may&nbsp;use&nbsp;ctxt.OpenFile&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4938678">//&nbsp;read&nbsp;some&nbsp;or&nbsp;all&nbsp;of&nbsp;the&nbsp;file&#39;s&nbsp;content.</span><br>
<span class="lineno">910</span><span class="keyword" id="4938721">func</span>&nbsp;<span class="op" id="4938726">(</span><span class="ident" id="4938727">ctxt</span>&nbsp;<span class="op" id="4938732">*</span><span class="ident" id="4938733">Context</span><span class="op" id="4938740">)</span>&nbsp;<span class="ident" id="4938742">MatchFile</span><span class="op" id="4938751">(</span><span class="ident" id="4938752">dir</span><span class="op" id="4938755">,</span>&nbsp;<span class="ident" id="4938757">name</span>&nbsp;<span class="builtintype" id="4938762">string</span><span class="op" id="4938768">)</span>&nbsp;<span class="op" id="4938770">(</span><span class="ident" id="4938771">match</span>&nbsp;<span class="builtintype" id="4938777">bool</span><span class="op" id="4938781">,</span>&nbsp;<span class="ident" id="4938783">err</span>&nbsp;<span class="builtintype" id="4938787">error</span><span class="op" id="4938792">)</span>&nbsp;<span class="op" id="4938794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4938797">match</span><span class="op" id="4938802">,</span>&nbsp;<span class="ident" id="4938804">_</span><span class="op" id="4938805">,</span>&nbsp;<span class="ident" id="4938807">_</span><span class="op" id="4938808">,</span>&nbsp;<span class="ident" id="4938810">err</span>&nbsp;<span class="op" id="4938814">=</span>&nbsp;<span class="ident" id="4938816">ctxt</span><span class="op" id="4938820">.</span><span class="ident" id="4938821">matchFile</span><span class="op" id="4938830">(</span><span class="ident" id="4938831">dir</span><span class="op" id="4938834">,</span>&nbsp;<span class="ident" id="4938836">name</span><span class="op" id="4938840">,</span>&nbsp;<span class="builtintype" id="4938842">false</span><span class="op" id="4938847">,</span>&nbsp;<span class="builtintype" id="4938849">nil</span><span class="op" id="4938852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4938855">return</span><br>
<span class="lineno"></span><span class="op" id="4938862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="comment" id="4938865">//&nbsp;matchFile&nbsp;determines&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="4938949">//&nbsp;should&nbsp;be&nbsp;included&nbsp;in&nbsp;the&nbsp;package&nbsp;being&nbsp;constructed.</span><br>
<span class="lineno"></span><span class="comment" id="4939005">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4939048">//&nbsp;If&nbsp;returnImports&nbsp;is&nbsp;true&nbsp;and&nbsp;name&nbsp;denotes&nbsp;a&nbsp;Go&nbsp;program,&nbsp;matchFile&nbsp;reads</span><br>
<span class="lineno"></span><span class="comment" id="4939123">//&nbsp;until&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;imports&nbsp;(and&nbsp;returns&nbsp;that&nbsp;data)&nbsp;even&nbsp;though&nbsp;it&nbsp;only</span><br>
<span class="lineno">920</span><span class="comment" id="4939199">//&nbsp;considers&nbsp;text&nbsp;until&nbsp;the&nbsp;first&nbsp;non-comment.</span><br>
<span class="lineno"></span><span class="comment" id="4939246">//&nbsp;If&nbsp;allTags&nbsp;is&nbsp;non-nil,&nbsp;matchFile&nbsp;records&nbsp;any&nbsp;encountered&nbsp;build&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="4939316">//&nbsp;by&nbsp;setting&nbsp;allTags[tag]&nbsp;=&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="4939351">func</span>&nbsp;<span class="op" id="4939356">(</span><span class="ident" id="4939357">ctxt</span>&nbsp;<span class="op" id="4939362">*</span><span class="ident" id="4939363">Context</span><span class="op" id="4939370">)</span>&nbsp;<span class="ident" id="4939372">matchFile</span><span class="op" id="4939381">(</span><span class="ident" id="4939382">dir</span><span class="op" id="4939385">,</span>&nbsp;<span class="ident" id="4939387">name</span>&nbsp;<span class="builtintype" id="4939392">string</span><span class="op" id="4939398">,</span>&nbsp;<span class="ident" id="4939400">returnImports</span>&nbsp;<span class="builtintype" id="4939414">bool</span><span class="op" id="4939418">,</span>&nbsp;<span class="ident" id="4939420">allTags</span>&nbsp;<span class="keyword" id="4939428">map</span><span class="op" id="4939431">[</span><span class="builtintype" id="4939432">string</span><span class="op" id="4939438">]</span><span class="builtintype" id="4939439">bool</span><span class="op" id="4939443">)</span>&nbsp;<span class="op" id="4939445">(</span><span class="ident" id="4939446">match</span>&nbsp;<span class="builtintype" id="4939452">bool</span><span class="op" id="4939456">,</span>&nbsp;<span class="ident" id="4939458">data</span>&nbsp;<span class="op" id="4939463">[</span><span class="op" id="4939464">]</span><span class="builtintype" id="4939465">byte</span><span class="op" id="4939469">,</span>&nbsp;<span class="ident" id="4939471">filename</span>&nbsp;<span class="builtintype" id="4939480">string</span><span class="op" id="4939486">,</span>&nbsp;<span class="ident" id="4939488">err</span>&nbsp;<span class="builtintype" id="4939492">error</span><span class="op" id="4939497">)</span>&nbsp;<span class="op" id="4939499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939502">if</span>&nbsp;<span class="ident" id="4939505">strings</span><span class="op" id="4939512">.</span><span class="ident" id="4939513">HasPrefix</span><span class="op" id="4939522">(</span><span class="ident" id="4939523">name</span><span class="op" id="4939527">,</span>&nbsp;<span class="string" id="4939529">&#34;_&#34;</span><span class="op" id="4939532">)</span>&nbsp;<span class="op" id="4939534">||</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4939539">strings</span><span class="op" id="4939546">.</span><span class="ident" id="4939547">HasPrefix</span><span class="op" id="4939556">(</span><span class="ident" id="4939557">name</span><span class="op" id="4939561">,</span>&nbsp;<span class="string" id="4939563">&#34;.&#34;</span><span class="op" id="4939566">)</span>&nbsp;<span class="op" id="4939568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939572">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4939580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4939584">i</span>&nbsp;<span class="op" id="4939586">:=</span>&nbsp;<span class="ident" id="4939589">strings</span><span class="op" id="4939596">.</span><span class="ident" id="4939597">LastIndex</span><span class="op" id="4939606">(</span><span class="ident" id="4939607">name</span><span class="op" id="4939611">,</span>&nbsp;<span class="string" id="4939613">&#34;.&#34;</span><span class="op" id="4939616">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939619">if</span>&nbsp;<span class="ident" id="4939622">i</span>&nbsp;<span class="op" id="4939624">&lt;</span>&nbsp;<span class="num" id="4939626">0</span>&nbsp;<span class="op" id="4939628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4939632">i</span>&nbsp;<span class="op" id="4939634">=</span>&nbsp;<span class="builtinfunc" id="4939636">len</span><span class="op" id="4939639">(</span><span class="ident" id="4939640">name</span><span class="op" id="4939644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4939647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4939650">ext</span>&nbsp;<span class="op" id="4939654">:=</span>&nbsp;<span class="ident" id="4939657">name</span><span class="op" id="4939661">[</span><span class="ident" id="4939662">i</span><span class="op" id="4939663">:</span><span class="op" id="4939664">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939668">if</span>&nbsp;<span class="op" id="4939671">!</span><span class="ident" id="4939672">ctxt</span><span class="op" id="4939676">.</span><span class="ident" id="4939677">goodOSArchFile</span><span class="op" id="4939691">(</span><span class="ident" id="4939692">name</span><span class="op" id="4939696">,</span>&nbsp;<span class="ident" id="4939698">allTags</span><span class="op" id="4939705">)</span>&nbsp;<span class="op" id="4939707">&amp;&amp;</span>&nbsp;<span class="op" id="4939710">!</span><span class="ident" id="4939711">ctxt</span><span class="op" id="4939715">.</span><span class="ident" id="4939716">UseAllFiles</span>&nbsp;<span class="op" id="4939728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939732">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4939740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939744">switch</span>&nbsp;<span class="ident" id="4939751">ext</span>&nbsp;<span class="op" id="4939755">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939758">case</span>&nbsp;<span class="string" id="4939763">&#34;.go&#34;</span><span class="op" id="4939768">,</span>&nbsp;<span class="string" id="4939770">&#34;.c&#34;</span><span class="op" id="4939774">,</span>&nbsp;<span class="string" id="4939776">&#34;.cc&#34;</span><span class="op" id="4939781">,</span>&nbsp;<span class="string" id="4939783">&#34;.cxx&#34;</span><span class="op" id="4939789">,</span>&nbsp;<span class="string" id="4939791">&#34;.cpp&#34;</span><span class="op" id="4939797">,</span>&nbsp;<span class="string" id="4939799">&#34;.m&#34;</span><span class="op" id="4939803">,</span>&nbsp;<span class="string" id="4939805">&#34;.s&#34;</span><span class="op" id="4939809">,</span>&nbsp;<span class="string" id="4939811">&#34;.h&#34;</span><span class="op" id="4939815">,</span>&nbsp;<span class="string" id="4939817">&#34;.hh&#34;</span><span class="op" id="4939822">,</span>&nbsp;<span class="string" id="4939824">&#34;.hpp&#34;</span><span class="op" id="4939830">,</span>&nbsp;<span class="string" id="4939832">&#34;.hxx&#34;</span><span class="op" id="4939838">,</span>&nbsp;<span class="string" id="4939840">&#34;.S&#34;</span><span class="op" id="4939844">,</span>&nbsp;<span class="string" id="4939846">&#34;.swig&#34;</span><span class="op" id="4939853">,</span>&nbsp;<span class="string" id="4939855">&#34;.swigcxx&#34;</span><span class="op" id="4939865">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4939869">//&nbsp;tentatively&nbsp;okay&nbsp;-&nbsp;read&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939910">case</span>&nbsp;<span class="string" id="4939915">&#34;.syso&#34;</span><span class="op" id="4939922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4939926">//&nbsp;binary,&nbsp;no&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4939950">match</span>&nbsp;<span class="op" id="4939956">=</span>&nbsp;<span class="builtintype" id="4939958">true</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939965">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939973">default</span><span class="op" id="4939980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4939984">//&nbsp;skip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4939994">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940002">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940006">filename</span>&nbsp;<span class="op" id="4940015">=</span>&nbsp;<span class="ident" id="4940017">ctxt</span><span class="op" id="4940021">.</span><span class="ident" id="4940022">joinPath</span><span class="op" id="4940030">(</span><span class="ident" id="4940031">dir</span><span class="op" id="4940034">,</span>&nbsp;<span class="ident" id="4940036">name</span><span class="op" id="4940040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940043">f</span><span class="op" id="4940044">,</span>&nbsp;<span class="ident" id="4940046">err</span>&nbsp;<span class="op" id="4940050">:=</span>&nbsp;<span class="ident" id="4940053">ctxt</span><span class="op" id="4940057">.</span><span class="ident" id="4940058">openFile</span><span class="op" id="4940066">(</span><span class="ident" id="4940067">filename</span><span class="op" id="4940075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940078">if</span>&nbsp;<span class="ident" id="4940081">err</span>&nbsp;<span class="op" id="4940085">!=</span>&nbsp;<span class="builtintype" id="4940088">nil</span>&nbsp;<span class="op" id="4940092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940096">return</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940108">if</span>&nbsp;<span class="ident" id="4940111">strings</span><span class="op" id="4940118">.</span><span class="ident" id="4940119">HasSuffix</span><span class="op" id="4940128">(</span><span class="ident" id="4940129">filename</span><span class="op" id="4940137">,</span>&nbsp;<span class="string" id="4940139">&#34;.go&#34;</span><span class="op" id="4940144">)</span>&nbsp;<span class="op" id="4940146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940150">data</span><span class="op" id="4940154">,</span>&nbsp;<span class="ident" id="4940156">err</span>&nbsp;<span class="op" id="4940160">=</span>&nbsp;<span class="ident" id="4940162">readImports</span><span class="op" id="4940173">(</span><span class="ident" id="4940174">f</span><span class="op" id="4940175">,</span>&nbsp;<span class="builtintype" id="4940177">false</span><span class="op" id="4940182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940185">}</span>&nbsp;<span class="keyword" id="4940187">else</span>&nbsp;<span class="op" id="4940192">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940196">data</span><span class="op" id="4940200">,</span>&nbsp;<span class="ident" id="4940202">err</span>&nbsp;<span class="op" id="4940206">=</span>&nbsp;<span class="ident" id="4940208">readComments</span><span class="op" id="4940220">(</span><span class="ident" id="4940221">f</span><span class="op" id="4940222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940228">f</span><span class="op" id="4940229">.</span><span class="ident" id="4940230">Close</span><span class="op" id="4940235">(</span><span class="op" id="4940236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940239">if</span>&nbsp;<span class="ident" id="4940242">err</span>&nbsp;<span class="op" id="4940246">!=</span>&nbsp;<span class="builtintype" id="4940249">nil</span>&nbsp;<span class="op" id="4940253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940257">err</span>&nbsp;<span class="op" id="4940261">=</span>&nbsp;<span class="ident" id="4940263">fmt</span><span class="op" id="4940266">.</span><span class="ident" id="4940267">Errorf</span><span class="op" id="4940273">(</span><span class="string" id="4940274">&#34;read&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="4940287">,</span>&nbsp;<span class="ident" id="4940289">filename</span><span class="op" id="4940297">,</span>&nbsp;<span class="ident" id="4940299">err</span><span class="op" id="4940302">)</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940306">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4940318">//&nbsp;Look&nbsp;for&nbsp;+build&nbsp;comments&nbsp;to&nbsp;accept&nbsp;or&nbsp;reject&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940377">if</span>&nbsp;<span class="op" id="4940380">!</span><span class="ident" id="4940381">ctxt</span><span class="op" id="4940385">.</span><span class="ident" id="4940386">shouldBuild</span><span class="op" id="4940397">(</span><span class="ident" id="4940398">data</span><span class="op" id="4940402">,</span>&nbsp;<span class="ident" id="4940404">allTags</span><span class="op" id="4940411">)</span>&nbsp;<span class="op" id="4940413">&amp;&amp;</span>&nbsp;<span class="op" id="4940416">!</span><span class="ident" id="4940417">ctxt</span><span class="op" id="4940421">.</span><span class="ident" id="4940422">UseAllFiles</span>&nbsp;<span class="op" id="4940434">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940438">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940450">match</span>&nbsp;<span class="op" id="4940456">=</span>&nbsp;<span class="builtintype" id="4940458">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940464">return</span><br>
<span class="lineno">975</span><span class="op" id="4940471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4940474">func</span>&nbsp;<span class="ident" id="4940479">cleanImports</span><span class="op" id="4940491">(</span><span class="ident" id="4940492">m</span>&nbsp;<span class="keyword" id="4940494">map</span><span class="op" id="4940497">[</span><span class="builtintype" id="4940498">string</span><span class="op" id="4940504">]</span><span class="op" id="4940505">[</span><span class="op" id="4940506">]</span><span class="ident" id="4940507">token</span><span class="op" id="4940512">.</span><span class="ident" id="4940513">Position</span><span class="op" id="4940521">)</span>&nbsp;<span class="op" id="4940523">(</span><span class="op" id="4940524">[</span><span class="op" id="4940525">]</span><span class="builtintype" id="4940526">string</span><span class="op" id="4940532">,</span>&nbsp;<span class="keyword" id="4940534">map</span><span class="op" id="4940537">[</span><span class="builtintype" id="4940538">string</span><span class="op" id="4940544">]</span><span class="op" id="4940545">[</span><span class="op" id="4940546">]</span><span class="ident" id="4940547">token</span><span class="op" id="4940552">.</span><span class="ident" id="4940553">Position</span><span class="op" id="4940561">)</span>&nbsp;<span class="op" id="4940563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940566">all</span>&nbsp;<span class="op" id="4940570">:=</span>&nbsp;<span class="builtinfunc" id="4940573">make</span><span class="op" id="4940577">(</span><span class="op" id="4940578">[</span><span class="op" id="4940579">]</span><span class="builtintype" id="4940580">string</span><span class="op" id="4940586">,</span>&nbsp;<span class="num" id="4940588">0</span><span class="op" id="4940589">,</span>&nbsp;<span class="builtinfunc" id="4940591">len</span><span class="op" id="4940594">(</span><span class="ident" id="4940595">m</span><span class="op" id="4940596">)</span><span class="op" id="4940597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940600">for</span>&nbsp;<span class="ident" id="4940604">path</span>&nbsp;<span class="op" id="4940609">:=</span>&nbsp;<span class="keyword" id="4940612">range</span>&nbsp;<span class="ident" id="4940618">m</span>&nbsp;<span class="op" id="4940620">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940624">all</span>&nbsp;<span class="op" id="4940628">=</span>&nbsp;<span class="builtinfunc" id="4940630">append</span><span class="op" id="4940636">(</span><span class="ident" id="4940637">all</span><span class="op" id="4940640">,</span>&nbsp;<span class="ident" id="4940642">path</span><span class="op" id="4940646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4940649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4940652">sort</span><span class="op" id="4940656">.</span><span class="ident" id="4940657">Strings</span><span class="op" id="4940664">(</span><span class="ident" id="4940665">all</span><span class="op" id="4940668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940671">return</span>&nbsp;<span class="ident" id="4940678">all</span><span class="op" id="4940681">,</span>&nbsp;<span class="ident" id="4940683">m</span><br>
<span class="lineno"></span><span class="op" id="4940685">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="4940688">//&nbsp;Import&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.Import.</span><br>
<span class="lineno"></span><span class="keyword" id="4940731">func</span>&nbsp;<span class="ident" id="4940736">Import</span><span class="op" id="4940742">(</span><span class="ident" id="4940743">path</span><span class="op" id="4940747">,</span>&nbsp;<span class="ident" id="4940749">srcDir</span>&nbsp;<span class="builtintype" id="4940756">string</span><span class="op" id="4940762">,</span>&nbsp;<span class="ident" id="4940764">mode</span>&nbsp;<span class="ident" id="4940769">ImportMode</span><span class="op" id="4940779">)</span>&nbsp;<span class="op" id="4940781">(</span><span class="op" id="4940782">*</span><span class="ident" id="4940783">Package</span><span class="op" id="4940790">,</span>&nbsp;<span class="builtintype" id="4940792">error</span><span class="op" id="4940797">)</span>&nbsp;<span class="op" id="4940799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940802">return</span>&nbsp;<span class="ident" id="4940809">Default</span><span class="op" id="4940816">.</span><span class="ident" id="4940817">Import</span><span class="op" id="4940823">(</span><span class="ident" id="4940824">path</span><span class="op" id="4940828">,</span>&nbsp;<span class="ident" id="4940830">srcDir</span><span class="op" id="4940836">,</span>&nbsp;<span class="ident" id="4940838">mode</span><span class="op" id="4940842">)</span><br>
<span class="lineno"></span><span class="op" id="4940844">}</span><br>
<span class="lineno">990</span><br>
<span class="lineno"></span><span class="comment" id="4940847">//&nbsp;ImportDir&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.ImportDir.</span><br>
<span class="lineno"></span><span class="keyword" id="4940896">func</span>&nbsp;<span class="ident" id="4940901">ImportDir</span><span class="op" id="4940910">(</span><span class="ident" id="4940911">dir</span>&nbsp;<span class="builtintype" id="4940915">string</span><span class="op" id="4940921">,</span>&nbsp;<span class="ident" id="4940923">mode</span>&nbsp;<span class="ident" id="4940928">ImportMode</span><span class="op" id="4940938">)</span>&nbsp;<span class="op" id="4940940">(</span><span class="op" id="4940941">*</span><span class="ident" id="4940942">Package</span><span class="op" id="4940949">,</span>&nbsp;<span class="builtintype" id="4940951">error</span><span class="op" id="4940956">)</span>&nbsp;<span class="op" id="4940958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4940961">return</span>&nbsp;<span class="ident" id="4940968">Default</span><span class="op" id="4940975">.</span><span class="ident" id="4940976">ImportDir</span><span class="op" id="4940985">(</span><span class="ident" id="4940986">dir</span><span class="op" id="4940989">,</span>&nbsp;<span class="ident" id="4940991">mode</span><span class="op" id="4940995">)</span><br>
<span class="lineno"></span><span class="op" id="4940997">}</span><br>
<span class="lineno">995</span><br>
<span class="lineno"></span><span class="keyword" id="4941000">var</span>&nbsp;<span class="ident" id="4941004">slashslash</span>&nbsp;<span class="op" id="4941015">=</span>&nbsp;<span class="op" id="4941017">[</span><span class="op" id="4941018">]</span><span class="builtintype" id="4941019">byte</span><span class="op" id="4941023">(</span><span class="string" id="4941024">&#34;//&#34;</span><span class="op" id="4941028">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4941031">//&nbsp;shouldBuild&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;use&nbsp;this&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="4941091">//&nbsp;The&nbsp;rule&nbsp;is&nbsp;that&nbsp;in&nbsp;the&nbsp;file&#39;s&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments</span><br>
<span class="lineno">1000</span><span class="comment" id="4941152">//&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="4941211">//&nbsp;(to&nbsp;avoid&nbsp;including&nbsp;a&nbsp;Go&nbsp;package&nbsp;clause&nbsp;doc&nbsp;comment),</span><br>
<span class="lineno"></span><span class="comment" id="4941268">//&nbsp;lines&nbsp;beginning&nbsp;with&nbsp;&#39;//&nbsp;+build&#39;&nbsp;are&nbsp;taken&nbsp;as&nbsp;build&nbsp;directives.</span><br>
<span class="lineno"></span><span class="comment" id="4941335">//</span><br>
<span class="lineno"></span><span class="comment" id="4941338">//&nbsp;The&nbsp;file&nbsp;is&nbsp;accepted&nbsp;only&nbsp;if&nbsp;each&nbsp;such&nbsp;line&nbsp;lists&nbsp;something</span><br>
<span class="lineno">1005</span><span class="comment" id="4941401">//&nbsp;matching&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="4941437">//</span><br>
<span class="lineno"></span><span class="comment" id="4941440">//&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;+build&nbsp;windows&nbsp;linux</span><br>
<span class="lineno"></span><span class="comment" id="4941467">//</span><br>
<span class="lineno"></span><span class="comment" id="4941470">//&nbsp;marks&nbsp;the&nbsp;file&nbsp;as&nbsp;applicable&nbsp;only&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Linux.</span><br>
<span class="lineno">1010</span><span class="comment" id="4941529">//</span><br>
<span class="lineno"></span><span class="keyword" id="4941532">func</span>&nbsp;<span class="op" id="4941537">(</span><span class="ident" id="4941538">ctxt</span>&nbsp;<span class="op" id="4941543">*</span><span class="ident" id="4941544">Context</span><span class="op" id="4941551">)</span>&nbsp;<span class="ident" id="4941553">shouldBuild</span><span class="op" id="4941564">(</span><span class="ident" id="4941565">content</span>&nbsp;<span class="op" id="4941573">[</span><span class="op" id="4941574">]</span><span class="builtintype" id="4941575">byte</span><span class="op" id="4941579">,</span>&nbsp;<span class="ident" id="4941581">allTags</span>&nbsp;<span class="keyword" id="4941589">map</span><span class="op" id="4941592">[</span><span class="builtintype" id="4941593">string</span><span class="op" id="4941599">]</span><span class="builtintype" id="4941600">bool</span><span class="op" id="4941604">)</span>&nbsp;<span class="builtintype" id="4941606">bool</span>&nbsp;<span class="op" id="4941611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4941614">//&nbsp;Pass&nbsp;1.&nbsp;Identify&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments&nbsp;and&nbsp;blank&nbsp;lines,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4941679">//&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941723">end</span>&nbsp;<span class="op" id="4941727">:=</span>&nbsp;<span class="num" id="4941730">0</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941733">p</span>&nbsp;<span class="op" id="4941735">:=</span>&nbsp;<span class="ident" id="4941738">content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4941747">for</span>&nbsp;<span class="builtinfunc" id="4941751">len</span><span class="op" id="4941754">(</span><span class="ident" id="4941755">p</span><span class="op" id="4941756">)</span>&nbsp;<span class="op" id="4941758">&gt;</span>&nbsp;<span class="num" id="4941760">0</span>&nbsp;<span class="op" id="4941762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941766">line</span>&nbsp;<span class="op" id="4941771">:=</span>&nbsp;<span class="ident" id="4941774">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4941778">if</span>&nbsp;<span class="ident" id="4941781">i</span>&nbsp;<span class="op" id="4941783">:=</span>&nbsp;<span class="ident" id="4941786">bytes</span><span class="op" id="4941791">.</span><span class="ident" id="4941792">IndexByte</span><span class="op" id="4941801">(</span><span class="ident" id="4941802">line</span><span class="op" id="4941806">,</span>&nbsp;<span class="string" id="4941808">&#39;\n&#39;</span><span class="op" id="4941812">)</span><span class="op" id="4941813">;</span>&nbsp;<span class="ident" id="4941815">i</span>&nbsp;<span class="op" id="4941817">&gt;=</span>&nbsp;<span class="num" id="4941820">0</span>&nbsp;<span class="op" id="4941822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941827">line</span><span class="op" id="4941831">,</span>&nbsp;<span class="ident" id="4941833">p</span>&nbsp;<span class="op" id="4941835">=</span>&nbsp;<span class="ident" id="4941837">line</span><span class="op" id="4941841">[</span><span class="op" id="4941842">:</span><span class="ident" id="4941843">i</span><span class="op" id="4941844">]</span><span class="op" id="4941845">,</span>&nbsp;<span class="ident" id="4941847">p</span><span class="op" id="4941848">[</span><span class="ident" id="4941849">i</span><span class="op" id="4941850">+</span><span class="num" id="4941851">1</span><span class="op" id="4941852">:</span><span class="op" id="4941853">]</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4941857">}</span>&nbsp;<span class="keyword" id="4941859">else</span>&nbsp;<span class="op" id="4941864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941869">p</span>&nbsp;<span class="op" id="4941871">=</span>&nbsp;<span class="ident" id="4941873">p</span><span class="op" id="4941874">[</span><span class="builtinfunc" id="4941875">len</span><span class="op" id="4941878">(</span><span class="ident" id="4941879">p</span><span class="op" id="4941880">)</span><span class="op" id="4941881">:</span><span class="op" id="4941882">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4941886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941890">line</span>&nbsp;<span class="op" id="4941895">=</span>&nbsp;<span class="ident" id="4941897">bytes</span><span class="op" id="4941902">.</span><span class="ident" id="4941903">TrimSpace</span><span class="op" id="4941912">(</span><span class="ident" id="4941913">line</span><span class="op" id="4941917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4941921">if</span>&nbsp;<span class="builtinfunc" id="4941924">len</span><span class="op" id="4941927">(</span><span class="ident" id="4941928">line</span><span class="op" id="4941932">)</span>&nbsp;<span class="op" id="4941934">==</span>&nbsp;<span class="num" id="4941937">0</span>&nbsp;<span class="op" id="4941939">{</span>&nbsp;<span class="comment" id="4941941">//&nbsp;Blank&nbsp;line</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4941958">end</span>&nbsp;<span class="op" id="4941962">=</span>&nbsp;<span class="builtinfunc" id="4941964">len</span><span class="op" id="4941967">(</span><span class="ident" id="4941968">content</span><span class="op" id="4941975">)</span>&nbsp;<span class="op" id="4941977">-</span>&nbsp;<span class="builtinfunc" id="4941979">len</span><span class="op" id="4941982">(</span><span class="ident" id="4941983">p</span><span class="op" id="4941984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4941989">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942004">if</span>&nbsp;<span class="op" id="4942007">!</span><span class="ident" id="4942008">bytes</span><span class="op" id="4942013">.</span><span class="ident" id="4942014">HasPrefix</span><span class="op" id="4942023">(</span><span class="ident" id="4942024">line</span><span class="op" id="4942028">,</span>&nbsp;<span class="ident" id="4942030">slashslash</span><span class="op" id="4942040">)</span>&nbsp;<span class="op" id="4942042">{</span>&nbsp;<span class="comment" id="4942044">//&nbsp;Not&nbsp;comment&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942067">break</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942081">content</span>&nbsp;<span class="op" id="4942089">=</span>&nbsp;<span class="ident" id="4942091">content</span><span class="op" id="4942098">[</span><span class="op" id="4942099">:</span><span class="ident" id="4942100">end</span><span class="op" id="4942103">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4942107">//&nbsp;Pass&nbsp;2.&nbsp;&nbsp;Process&nbsp;each&nbsp;line&nbsp;in&nbsp;the&nbsp;run.</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942150">p</span>&nbsp;<span class="op" id="4942152">=</span>&nbsp;<span class="ident" id="4942154">content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942163">allok</span>&nbsp;<span class="op" id="4942169">:=</span>&nbsp;<span class="builtintype" id="4942172">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942178">for</span>&nbsp;<span class="builtinfunc" id="4942182">len</span><span class="op" id="4942185">(</span><span class="ident" id="4942186">p</span><span class="op" id="4942187">)</span>&nbsp;<span class="op" id="4942189">&gt;</span>&nbsp;<span class="num" id="4942191">0</span>&nbsp;<span class="op" id="4942193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942197">line</span>&nbsp;<span class="op" id="4942202">:=</span>&nbsp;<span class="ident" id="4942205">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942209">if</span>&nbsp;<span class="ident" id="4942212">i</span>&nbsp;<span class="op" id="4942214">:=</span>&nbsp;<span class="ident" id="4942217">bytes</span><span class="op" id="4942222">.</span><span class="ident" id="4942223">IndexByte</span><span class="op" id="4942232">(</span><span class="ident" id="4942233">line</span><span class="op" id="4942237">,</span>&nbsp;<span class="string" id="4942239">&#39;\n&#39;</span><span class="op" id="4942243">)</span><span class="op" id="4942244">;</span>&nbsp;<span class="ident" id="4942246">i</span>&nbsp;<span class="op" id="4942248">&gt;=</span>&nbsp;<span class="num" id="4942251">0</span>&nbsp;<span class="op" id="4942253">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942258">line</span><span class="op" id="4942262">,</span>&nbsp;<span class="ident" id="4942264">p</span>&nbsp;<span class="op" id="4942266">=</span>&nbsp;<span class="ident" id="4942268">line</span><span class="op" id="4942272">[</span><span class="op" id="4942273">:</span><span class="ident" id="4942274">i</span><span class="op" id="4942275">]</span><span class="op" id="4942276">,</span>&nbsp;<span class="ident" id="4942278">p</span><span class="op" id="4942279">[</span><span class="ident" id="4942280">i</span><span class="op" id="4942281">+</span><span class="num" id="4942282">1</span><span class="op" id="4942283">:</span><span class="op" id="4942284">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942288">}</span>&nbsp;<span class="keyword" id="4942290">else</span>&nbsp;<span class="op" id="4942295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942300">p</span>&nbsp;<span class="op" id="4942302">=</span>&nbsp;<span class="ident" id="4942304">p</span><span class="op" id="4942305">[</span><span class="builtinfunc" id="4942306">len</span><span class="op" id="4942309">(</span><span class="ident" id="4942310">p</span><span class="op" id="4942311">)</span><span class="op" id="4942312">:</span><span class="op" id="4942313">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942321">line</span>&nbsp;<span class="op" id="4942326">=</span>&nbsp;<span class="ident" id="4942328">bytes</span><span class="op" id="4942333">.</span><span class="ident" id="4942334">TrimSpace</span><span class="op" id="4942343">(</span><span class="ident" id="4942344">line</span><span class="op" id="4942348">)</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942352">if</span>&nbsp;<span class="ident" id="4942355">bytes</span><span class="op" id="4942360">.</span><span class="ident" id="4942361">HasPrefix</span><span class="op" id="4942370">(</span><span class="ident" id="4942371">line</span><span class="op" id="4942375">,</span>&nbsp;<span class="ident" id="4942377">slashslash</span><span class="op" id="4942387">)</span>&nbsp;<span class="op" id="4942389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942394">line</span>&nbsp;<span class="op" id="4942399">=</span>&nbsp;<span class="ident" id="4942401">bytes</span><span class="op" id="4942406">.</span><span class="ident" id="4942407">TrimSpace</span><span class="op" id="4942416">(</span><span class="ident" id="4942417">line</span><span class="op" id="4942421">[</span><span class="builtinfunc" id="4942422">len</span><span class="op" id="4942425">(</span><span class="ident" id="4942426">slashslash</span><span class="op" id="4942436">)</span><span class="op" id="4942437">:</span><span class="op" id="4942438">]</span><span class="op" id="4942439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942444">if</span>&nbsp;<span class="builtinfunc" id="4942447">len</span><span class="op" id="4942450">(</span><span class="ident" id="4942451">line</span><span class="op" id="4942455">)</span>&nbsp;<span class="op" id="4942457">&gt;</span>&nbsp;<span class="num" id="4942459">0</span>&nbsp;<span class="op" id="4942461">&amp;&amp;</span>&nbsp;<span class="ident" id="4942464">line</span><span class="op" id="4942468">[</span><span class="num" id="4942469">0</span><span class="op" id="4942470">]</span>&nbsp;<span class="op" id="4942472">==</span>&nbsp;<span class="string" id="4942475">&#39;+&#39;</span>&nbsp;<span class="op" id="4942479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4942485">//&nbsp;Looks&nbsp;like&nbsp;a&nbsp;comment&nbsp;+line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942520">f</span>&nbsp;<span class="op" id="4942522">:=</span>&nbsp;<span class="ident" id="4942525">strings</span><span class="op" id="4942532">.</span><span class="ident" id="4942533">Fields</span><span class="op" id="4942539">(</span><span class="builtintype" id="4942540">string</span><span class="op" id="4942546">(</span><span class="ident" id="4942547">line</span><span class="op" id="4942551">)</span><span class="op" id="4942552">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942558">if</span>&nbsp;<span class="ident" id="4942561">f</span><span class="op" id="4942562">[</span><span class="num" id="4942563">0</span><span class="op" id="4942564">]</span>&nbsp;<span class="op" id="4942566">==</span>&nbsp;<span class="string" id="4942569">&#34;+build&#34;</span>&nbsp;<span class="op" id="4942578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942585">ok</span>&nbsp;<span class="op" id="4942588">:=</span>&nbsp;<span class="builtintype" id="4942591">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942602">for</span>&nbsp;<span class="ident" id="4942606">_</span><span class="op" id="4942607">,</span>&nbsp;<span class="ident" id="4942609">tok</span>&nbsp;<span class="op" id="4942613">:=</span>&nbsp;<span class="keyword" id="4942616">range</span>&nbsp;<span class="ident" id="4942622">f</span><span class="op" id="4942623">[</span><span class="num" id="4942624">1</span><span class="op" id="4942625">:</span><span class="op" id="4942626">]</span>&nbsp;<span class="op" id="4942628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942636">if</span>&nbsp;<span class="ident" id="4942639">ctxt</span><span class="op" id="4942643">.</span><span class="ident" id="4942644">match</span><span class="op" id="4942649">(</span><span class="ident" id="4942650">tok</span><span class="op" id="4942653">,</span>&nbsp;<span class="ident" id="4942655">allTags</span><span class="op" id="4942662">)</span>&nbsp;<span class="op" id="4942664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942673">ok</span>&nbsp;<span class="op" id="4942676">=</span>&nbsp;<span class="builtintype" id="4942678">true</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942703">if</span>&nbsp;<span class="op" id="4942706">!</span><span class="ident" id="4942707">ok</span>&nbsp;<span class="op" id="4942710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4942718">allok</span>&nbsp;<span class="op" id="4942724">=</span>&nbsp;<span class="builtintype" id="4942726">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942737">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4942755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4942759">return</span>&nbsp;<span class="ident" id="4942766">allok</span><br>
<span class="lineno"></span><span class="op" id="4942772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4942775">//&nbsp;saveCgo&nbsp;saves&nbsp;the&nbsp;information&nbsp;from&nbsp;the&nbsp;#cgo&nbsp;lines&nbsp;in&nbsp;the&nbsp;import&nbsp;&#34;C&#34;&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="4942855">//&nbsp;These&nbsp;lines&nbsp;set&nbsp;CFLAGS,&nbsp;CPPFLAGS,&nbsp;CXXFLAGS&nbsp;and&nbsp;LDFLAGS&nbsp;and&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno">1070</span><span class="comment" id="4942939">//&nbsp;that&nbsp;affect&nbsp;the&nbsp;way&nbsp;cgo&#39;s&nbsp;C&nbsp;code&nbsp;is&nbsp;built.</span><br>
<span class="lineno"></span><span class="comment" id="4942985">//</span><br>
<span class="lineno"></span><span class="comment" id="4942988">//&nbsp;TODO(rsc):&nbsp;This&nbsp;duplicates&nbsp;code&nbsp;in&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="comment" id="4943031">//&nbsp;Once&nbsp;the&nbsp;dust&nbsp;settles,&nbsp;remove&nbsp;this&nbsp;code&nbsp;from&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="keyword" id="4943084">func</span>&nbsp;<span class="op" id="4943089">(</span><span class="ident" id="4943090">ctxt</span>&nbsp;<span class="op" id="4943095">*</span><span class="ident" id="4943096">Context</span><span class="op" id="4943103">)</span>&nbsp;<span class="ident" id="4943105">saveCgo</span><span class="op" id="4943112">(</span><span class="ident" id="4943113">filename</span>&nbsp;<span class="builtintype" id="4943122">string</span><span class="op" id="4943128">,</span>&nbsp;<span class="ident" id="4943130">di</span>&nbsp;<span class="op" id="4943133">*</span><span class="ident" id="4943134">Package</span><span class="op" id="4943141">,</span>&nbsp;<span class="ident" id="4943143">cg</span>&nbsp;<span class="op" id="4943146">*</span><span class="ident" id="4943147">ast</span><span class="op" id="4943150">.</span><span class="ident" id="4943151">CommentGroup</span><span class="op" id="4943163">)</span>&nbsp;<span class="builtintype" id="4943165">error</span>&nbsp;<span class="op" id="4943171">{</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943174">text</span>&nbsp;<span class="op" id="4943179">:=</span>&nbsp;<span class="ident" id="4943182">cg</span><span class="op" id="4943184">.</span><span class="ident" id="4943185">Text</span><span class="op" id="4943189">(</span><span class="op" id="4943190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943193">for</span>&nbsp;<span class="ident" id="4943197">_</span><span class="op" id="4943198">,</span>&nbsp;<span class="ident" id="4943200">line</span>&nbsp;<span class="op" id="4943205">:=</span>&nbsp;<span class="keyword" id="4943208">range</span>&nbsp;<span class="ident" id="4943214">strings</span><span class="op" id="4943221">.</span><span class="ident" id="4943222">Split</span><span class="op" id="4943227">(</span><span class="ident" id="4943228">text</span><span class="op" id="4943232">,</span>&nbsp;<span class="string" id="4943234">&#34;\n&#34;</span><span class="op" id="4943238">)</span>&nbsp;<span class="op" id="4943240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943244">orig</span>&nbsp;<span class="op" id="4943249">:=</span>&nbsp;<span class="ident" id="4943252">line</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4943260">//&nbsp;Line&nbsp;is</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4943273">//&nbsp;&nbsp;&nbsp;&nbsp;#cgo&nbsp;[GOOS/GOARCH...]&nbsp;LDFLAGS:&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4943315">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943320">line</span>&nbsp;<span class="op" id="4943325">=</span>&nbsp;<span class="ident" id="4943327">strings</span><span class="op" id="4943334">.</span><span class="ident" id="4943335">TrimSpace</span><span class="op" id="4943344">(</span><span class="ident" id="4943345">line</span><span class="op" id="4943349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943353">if</span>&nbsp;<span class="builtinfunc" id="4943356">len</span><span class="op" id="4943359">(</span><span class="ident" id="4943360">line</span><span class="op" id="4943364">)</span>&nbsp;<span class="op" id="4943366">&lt;</span>&nbsp;<span class="num" id="4943368">5</span>&nbsp;<span class="op" id="4943370">||</span>&nbsp;<span class="ident" id="4943373">line</span><span class="op" id="4943377">[</span><span class="op" id="4943378">:</span><span class="num" id="4943379">4</span><span class="op" id="4943380">]</span>&nbsp;<span class="op" id="4943382">!=</span>&nbsp;<span class="string" id="4943385">&#34;#cgo&#34;</span>&nbsp;<span class="op" id="4943392">||</span>&nbsp;<span class="op" id="4943395">(</span><span class="ident" id="4943396">line</span><span class="op" id="4943400">[</span><span class="num" id="4943401">4</span><span class="op" id="4943402">]</span>&nbsp;<span class="op" id="4943404">!=</span>&nbsp;<span class="string" id="4943407">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4943411">&amp;&amp;</span>&nbsp;<span class="ident" id="4943414">line</span><span class="op" id="4943418">[</span><span class="num" id="4943419">4</span><span class="op" id="4943420">]</span>&nbsp;<span class="op" id="4943422">!=</span>&nbsp;<span class="string" id="4943425">&#39;\t&#39;</span><span class="op" id="4943429">)</span>&nbsp;<span class="op" id="4943431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943436">continue</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4943447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4943452">//&nbsp;Split&nbsp;at&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943473">line</span>&nbsp;<span class="op" id="4943478">=</span>&nbsp;<span class="ident" id="4943480">strings</span><span class="op" id="4943487">.</span><span class="ident" id="4943488">TrimSpace</span><span class="op" id="4943497">(</span><span class="ident" id="4943498">line</span><span class="op" id="4943502">[</span><span class="num" id="4943503">4</span><span class="op" id="4943504">:</span><span class="op" id="4943505">]</span><span class="op" id="4943506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943510">i</span>&nbsp;<span class="op" id="4943512">:=</span>&nbsp;<span class="ident" id="4943515">strings</span><span class="op" id="4943522">.</span><span class="ident" id="4943523">Index</span><span class="op" id="4943528">(</span><span class="ident" id="4943529">line</span><span class="op" id="4943533">,</span>&nbsp;<span class="string" id="4943535">&#34;:&#34;</span><span class="op" id="4943538">)</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943542">if</span>&nbsp;<span class="ident" id="4943545">i</span>&nbsp;<span class="op" id="4943547">&lt;</span>&nbsp;<span class="num" id="4943549">0</span>&nbsp;<span class="op" id="4943551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943556">return</span>&nbsp;<span class="ident" id="4943563">fmt</span><span class="op" id="4943566">.</span><span class="ident" id="4943567">Errorf</span><span class="op" id="4943573">(</span><span class="string" id="4943574">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="4943601">,</span>&nbsp;<span class="ident" id="4943603">filename</span><span class="op" id="4943611">,</span>&nbsp;<span class="ident" id="4943613">orig</span><span class="op" id="4943617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4943621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943625">line</span><span class="op" id="4943629">,</span>&nbsp;<span class="ident" id="4943631">argstr</span>&nbsp;<span class="op" id="4943638">:=</span>&nbsp;<span class="ident" id="4943641">line</span><span class="op" id="4943645">[</span><span class="op" id="4943646">:</span><span class="ident" id="4943647">i</span><span class="op" id="4943648">]</span><span class="op" id="4943649">,</span>&nbsp;<span class="ident" id="4943651">line</span><span class="op" id="4943655">[</span><span class="ident" id="4943656">i</span><span class="op" id="4943657">+</span><span class="num" id="4943658">1</span><span class="op" id="4943659">:</span><span class="op" id="4943660">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4943665">//&nbsp;Parse&nbsp;GOOS/GOARCH&nbsp;stuff.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943695">f</span>&nbsp;<span class="op" id="4943697">:=</span>&nbsp;<span class="ident" id="4943700">strings</span><span class="op" id="4943707">.</span><span class="ident" id="4943708">Fields</span><span class="op" id="4943714">(</span><span class="ident" id="4943715">line</span><span class="op" id="4943719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943723">if</span>&nbsp;<span class="builtinfunc" id="4943726">len</span><span class="op" id="4943729">(</span><span class="ident" id="4943730">f</span><span class="op" id="4943731">)</span>&nbsp;<span class="op" id="4943733">&lt;</span>&nbsp;<span class="num" id="4943735">1</span>&nbsp;<span class="op" id="4943737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943742">return</span>&nbsp;<span class="ident" id="4943749">fmt</span><span class="op" id="4943752">.</span><span class="ident" id="4943753">Errorf</span><span class="op" id="4943759">(</span><span class="string" id="4943760">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="4943787">,</span>&nbsp;<span class="ident" id="4943789">filename</span><span class="op" id="4943797">,</span>&nbsp;<span class="ident" id="4943799">orig</span><span class="op" id="4943803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4943807">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943812">cond</span><span class="op" id="4943816">,</span>&nbsp;<span class="ident" id="4943818">verb</span>&nbsp;<span class="op" id="4943823">:=</span>&nbsp;<span class="ident" id="4943826">f</span><span class="op" id="4943827">[</span><span class="op" id="4943828">:</span><span class="builtinfunc" id="4943829">len</span><span class="op" id="4943832">(</span><span class="ident" id="4943833">f</span><span class="op" id="4943834">)</span><span class="op" id="4943835">-</span><span class="num" id="4943836">1</span><span class="op" id="4943837">]</span><span class="op" id="4943838">,</span>&nbsp;<span class="ident" id="4943840">f</span><span class="op" id="4943841">[</span><span class="builtinfunc" id="4943842">len</span><span class="op" id="4943845">(</span><span class="ident" id="4943846">f</span><span class="op" id="4943847">)</span><span class="op" id="4943848">-</span><span class="num" id="4943849">1</span><span class="op" id="4943850">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943854">if</span>&nbsp;<span class="builtinfunc" id="4943857">len</span><span class="op" id="4943860">(</span><span class="ident" id="4943861">cond</span><span class="op" id="4943865">)</span>&nbsp;<span class="op" id="4943867">&gt;</span>&nbsp;<span class="num" id="4943869">0</span>&nbsp;<span class="op" id="4943871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943876">ok</span>&nbsp;<span class="op" id="4943879">:=</span>&nbsp;<span class="builtintype" id="4943882">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943891">for</span>&nbsp;<span class="ident" id="4943895">_</span><span class="op" id="4943896">,</span>&nbsp;<span class="ident" id="4943898">c</span>&nbsp;<span class="op" id="4943900">:=</span>&nbsp;<span class="keyword" id="4943903">range</span>&nbsp;<span class="ident" id="4943909">cond</span>&nbsp;<span class="op" id="4943914">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943920">if</span>&nbsp;<span class="ident" id="4943923">ctxt</span><span class="op" id="4943927">.</span><span class="ident" id="4943928">match</span><span class="op" id="4943933">(</span><span class="ident" id="4943934">c</span><span class="op" id="4943935">,</span>&nbsp;<span class="builtintype" id="4943937">nil</span><span class="op" id="4943940">)</span>&nbsp;<span class="op" id="4943942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4943949">ok</span>&nbsp;<span class="op" id="4943952">=</span>&nbsp;<span class="builtintype" id="4943954">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943964">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4943974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4943979">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943984">if</span>&nbsp;<span class="op" id="4943987">!</span><span class="ident" id="4943988">ok</span>&nbsp;<span class="op" id="4943991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4943997">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4944018">args</span><span class="op" id="4944022">,</span>&nbsp;<span class="ident" id="4944024">err</span>&nbsp;<span class="op" id="4944028">:=</span>&nbsp;<span class="ident" id="4944031">splitQuoted</span><span class="op" id="4944042">(</span><span class="ident" id="4944043">argstr</span><span class="op" id="4944049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944053">if</span>&nbsp;<span class="ident" id="4944056">err</span>&nbsp;<span class="op" id="4944060">!=</span>&nbsp;<span class="builtintype" id="4944063">nil</span>&nbsp;<span class="op" id="4944067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944072">return</span>&nbsp;<span class="ident" id="4944079">fmt</span><span class="op" id="4944082">.</span><span class="ident" id="4944083">Errorf</span><span class="op" id="4944089">(</span><span class="string" id="4944090">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="4944117">,</span>&nbsp;<span class="ident" id="4944119">filename</span><span class="op" id="4944127">,</span>&nbsp;<span class="ident" id="4944129">orig</span><span class="op" id="4944133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944141">for</span>&nbsp;<span class="ident" id="4944145">_</span><span class="op" id="4944146">,</span>&nbsp;<span class="ident" id="4944148">arg</span>&nbsp;<span class="op" id="4944152">:=</span>&nbsp;<span class="keyword" id="4944155">range</span>&nbsp;<span class="ident" id="4944161">args</span>&nbsp;<span class="op" id="4944166">{</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944171">if</span>&nbsp;<span class="op" id="4944174">!</span><span class="ident" id="4944175">safeCgoName</span><span class="op" id="4944186">(</span><span class="ident" id="4944187">arg</span><span class="op" id="4944190">)</span>&nbsp;<span class="op" id="4944192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944198">return</span>&nbsp;<span class="ident" id="4944205">fmt</span><span class="op" id="4944208">.</span><span class="ident" id="4944209">Errorf</span><span class="op" id="4944215">(</span><span class="string" id="4944216">&#34;%s:&nbsp;malformed&nbsp;#cgo&nbsp;argument:&nbsp;%s&#34;</span><span class="op" id="4944249">,</span>&nbsp;<span class="ident" id="4944251">filename</span><span class="op" id="4944259">,</span>&nbsp;<span class="ident" id="4944261">arg</span><span class="op" id="4944264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944278">switch</span>&nbsp;<span class="ident" id="4944285">verb</span>&nbsp;<span class="op" id="4944290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944294">case</span>&nbsp;<span class="string" id="4944299">&#34;CFLAGS&#34;</span><span class="op" id="4944307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4944312">di</span><span class="op" id="4944314">.</span><span class="ident" id="4944315">CgoCFLAGS</span>&nbsp;<span class="op" id="4944325">=</span>&nbsp;<span class="builtinfunc" id="4944327">append</span><span class="op" id="4944333">(</span><span class="ident" id="4944334">di</span><span class="op" id="4944336">.</span><span class="ident" id="4944337">CgoCFLAGS</span><span class="op" id="4944346">,</span>&nbsp;<span class="ident" id="4944348">args</span><span class="op" id="4944352">...</span><span class="op" id="4944355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944359">case</span>&nbsp;<span class="string" id="4944364">&#34;CPPFLAGS&#34;</span><span class="op" id="4944374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4944379">di</span><span class="op" id="4944381">.</span><span class="ident" id="4944382">CgoCPPFLAGS</span>&nbsp;<span class="op" id="4944394">=</span>&nbsp;<span class="builtinfunc" id="4944396">append</span><span class="op" id="4944402">(</span><span class="ident" id="4944403">di</span><span class="op" id="4944405">.</span><span class="ident" id="4944406">CgoCPPFLAGS</span><span class="op" id="4944417">,</span>&nbsp;<span class="ident" id="4944419">args</span><span class="op" id="4944423">...</span><span class="op" id="4944426">)</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944430">case</span>&nbsp;<span class="string" id="4944435">&#34;CXXFLAGS&#34;</span><span class="op" id="4944445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4944450">di</span><span class="op" id="4944452">.</span><span class="ident" id="4944453">CgoCXXFLAGS</span>&nbsp;<span class="op" id="4944465">=</span>&nbsp;<span class="builtinfunc" id="4944467">append</span><span class="op" id="4944473">(</span><span class="ident" id="4944474">di</span><span class="op" id="4944476">.</span><span class="ident" id="4944477">CgoCXXFLAGS</span><span class="op" id="4944488">,</span>&nbsp;<span class="ident" id="4944490">args</span><span class="op" id="4944494">...</span><span class="op" id="4944497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944501">case</span>&nbsp;<span class="string" id="4944506">&#34;LDFLAGS&#34;</span><span class="op" id="4944515">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4944520">di</span><span class="op" id="4944522">.</span><span class="ident" id="4944523">CgoLDFLAGS</span>&nbsp;<span class="op" id="4944534">=</span>&nbsp;<span class="builtinfunc" id="4944536">append</span><span class="op" id="4944542">(</span><span class="ident" id="4944543">di</span><span class="op" id="4944545">.</span><span class="ident" id="4944546">CgoLDFLAGS</span><span class="op" id="4944556">,</span>&nbsp;<span class="ident" id="4944558">args</span><span class="op" id="4944562">...</span><span class="op" id="4944565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944569">case</span>&nbsp;<span class="string" id="4944574">&#34;pkg-config&#34;</span><span class="op" id="4944586">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4944591">di</span><span class="op" id="4944593">.</span><span class="ident" id="4944594">CgoPkgConfig</span>&nbsp;<span class="op" id="4944607">=</span>&nbsp;<span class="builtinfunc" id="4944609">append</span><span class="op" id="4944615">(</span><span class="ident" id="4944616">di</span><span class="op" id="4944618">.</span><span class="ident" id="4944619">CgoPkgConfig</span><span class="op" id="4944631">,</span>&nbsp;<span class="ident" id="4944633">args</span><span class="op" id="4944637">...</span><span class="op" id="4944640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944644">default</span><span class="op" id="4944651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944656">return</span>&nbsp;<span class="ident" id="4944663">fmt</span><span class="op" id="4944666">.</span><span class="ident" id="4944667">Errorf</span><span class="op" id="4944673">(</span><span class="string" id="4944674">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;verb:&nbsp;%s&#34;</span><span class="op" id="4944701">,</span>&nbsp;<span class="ident" id="4944703">filename</span><span class="op" id="4944711">,</span>&nbsp;<span class="ident" id="4944713">orig</span><span class="op" id="4944717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4944724">}</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4944727">return</span>&nbsp;<span class="builtintype" id="4944734">nil</span><br>
<span class="lineno"></span><span class="op" id="4944738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4944741">//&nbsp;NOTE:&nbsp;$&nbsp;is&nbsp;not&nbsp;safe&nbsp;for&nbsp;the&nbsp;shell,&nbsp;but&nbsp;it&nbsp;is&nbsp;allowed&nbsp;here&nbsp;because&nbsp;of&nbsp;linker&nbsp;options&nbsp;like&nbsp;-Wl,$ORIGIN.</span><br>
<span class="lineno"></span><span class="comment" id="4944846">//&nbsp;We&nbsp;never&nbsp;pass&nbsp;these&nbsp;arguments&nbsp;to&nbsp;a&nbsp;shell&nbsp;(just&nbsp;to&nbsp;programs&nbsp;we&nbsp;construct&nbsp;argv&nbsp;for),&nbsp;so&nbsp;this&nbsp;should&nbsp;be&nbsp;okay.</span><br>
<span class="lineno">1145</span><span class="comment" id="4944956">//&nbsp;See&nbsp;golang.org/issue/6038.</span><br>
<span class="lineno"></span><span class="keyword" id="4944986">var</span>&nbsp;<span class="ident" id="4944990">safeBytes</span>&nbsp;<span class="op" id="4945000">=</span>&nbsp;<span class="op" id="4945002">[</span><span class="op" id="4945003">]</span><span class="builtintype" id="4945004">byte</span><span class="op" id="4945008">(</span><span class="string" id="4945009">&#34;+-.,/0123456789=ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz:$&#34;</span><span class="op" id="4945082">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4945085">func</span>&nbsp;<span class="ident" id="4945090">safeCgoName</span><span class="op" id="4945101">(</span><span class="ident" id="4945102">s</span>&nbsp;<span class="builtintype" id="4945104">string</span><span class="op" id="4945110">)</span>&nbsp;<span class="builtintype" id="4945112">bool</span>&nbsp;<span class="op" id="4945117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4945120">if</span>&nbsp;<span class="ident" id="4945123">s</span>&nbsp;<span class="op" id="4945125">==</span>&nbsp;<span class="string" id="4945128">&#34;&#34;</span>&nbsp;<span class="op" id="4945131">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4945135">return</span>&nbsp;<span class="builtintype" id="4945142">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4945149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4945152">for</span>&nbsp;<span class="ident" id="4945156">i</span>&nbsp;<span class="op" id="4945158">:=</span>&nbsp;<span class="num" id="4945161">0</span><span class="op" id="4945162">;</span>&nbsp;<span class="ident" id="4945164">i</span>&nbsp;<span class="op" id="4945166">&lt;</span>&nbsp;<span class="builtinfunc" id="4945168">len</span><span class="op" id="4945171">(</span><span class="ident" id="4945172">s</span><span class="op" id="4945173">)</span><span class="op" id="4945174">;</span>&nbsp;<span class="ident" id="4945176">i</span><span class="op" id="4945177">++</span>&nbsp;<span class="op" id="4945180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4945184">if</span>&nbsp;<span class="ident" id="4945187">c</span>&nbsp;<span class="op" id="4945189">:=</span>&nbsp;<span class="ident" id="4945192">s</span><span class="op" id="4945193">[</span><span class="ident" id="4945194">i</span><span class="op" id="4945195">]</span><span class="op" id="4945196">;</span>&nbsp;<span class="ident" id="4945198">c</span>&nbsp;<span class="op" id="4945200">&lt;</span>&nbsp;<span class="num" id="4945202">0x80</span>&nbsp;<span class="op" id="4945207">&amp;&amp;</span>&nbsp;<span class="ident" id="4945210">bytes</span><span class="op" id="4945215">.</span><span class="ident" id="4945216">IndexByte</span><span class="op" id="4945225">(</span><span class="ident" id="4945226">safeBytes</span><span class="op" id="4945235">,</span>&nbsp;<span class="ident" id="4945237">c</span><span class="op" id="4945238">)</span>&nbsp;<span class="op" id="4945240">&lt;</span>&nbsp;<span class="num" id="4945242">0</span>&nbsp;<span class="op" id="4945244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4945249">return</span>&nbsp;<span class="builtintype" id="4945256">false</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4945264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4945267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4945270">return</span>&nbsp;<span class="builtintype" id="4945277">true</span><br>
<span class="lineno"></span><span class="op" id="4945282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1160</span><span class="comment" id="4945285">//&nbsp;splitQuoted&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive</span><br>
<span class="lineno"></span><span class="comment" id="4945368">//&nbsp;white&nbsp;space&nbsp;characters&nbsp;while&nbsp;taking&nbsp;into&nbsp;account&nbsp;quotes&nbsp;and&nbsp;escaping,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4945445">//&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="comment" id="4945533">//&nbsp;Single&nbsp;quotes&nbsp;and&nbsp;double&nbsp;quotes&nbsp;are&nbsp;recognized&nbsp;to&nbsp;prevent&nbsp;splitting&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4945615">//&nbsp;quoted&nbsp;region,&nbsp;and&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;resulting&nbsp;substrings.&nbsp;If&nbsp;a&nbsp;quote&nbsp;in&nbsp;s</span><br>
<span class="lineno">1165</span><span class="comment" id="4945696">//&nbsp;isn&#39;t&nbsp;closed&nbsp;err&nbsp;will&nbsp;be&nbsp;set&nbsp;and&nbsp;r&nbsp;will&nbsp;have&nbsp;the&nbsp;unclosed&nbsp;argument&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4945773">//&nbsp;last&nbsp;element.&nbsp;&nbsp;The&nbsp;backslash&nbsp;is&nbsp;used&nbsp;for&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="4945827">//</span><br>
<span class="lineno"></span><span class="comment" id="4945830">//&nbsp;For&nbsp;example,&nbsp;the&nbsp;following&nbsp;string:</span><br>
<span class="lineno"></span><span class="comment" id="4945868">//</span><br>
<span class="lineno">1170</span><span class="comment" id="4945871">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;b:&#34;c&nbsp;d&#34;&nbsp;&#39;e&#39;&#39;f&#39;&nbsp;&nbsp;&#34;g\&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4945902">//</span><br>
<span class="lineno"></span><span class="comment" id="4945905">//&nbsp;Would&nbsp;be&nbsp;parsed&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="4945928">//</span><br>
<span class="lineno"></span><span class="comment" id="4945931">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]string{&#34;a&#34;,&nbsp;&#34;b:c&nbsp;d&#34;,&nbsp;&#34;ef&#34;,&nbsp;`g&#34;`}</span><br>
<span class="lineno">1175</span><span class="comment" id="4945973">//</span><br>
<span class="lineno"></span><span class="keyword" id="4945976">func</span>&nbsp;<span class="ident" id="4945981">splitQuoted</span><span class="op" id="4945992">(</span><span class="ident" id="4945993">s</span>&nbsp;<span class="builtintype" id="4945995">string</span><span class="op" id="4946001">)</span>&nbsp;<span class="op" id="4946003">(</span><span class="ident" id="4946004">r</span>&nbsp;<span class="op" id="4946006">[</span><span class="op" id="4946007">]</span><span class="builtintype" id="4946008">string</span><span class="op" id="4946014">,</span>&nbsp;<span class="ident" id="4946016">err</span>&nbsp;<span class="builtintype" id="4946020">error</span><span class="op" id="4946025">)</span>&nbsp;<span class="op" id="4946027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946030">var</span>&nbsp;<span class="ident" id="4946034">args</span>&nbsp;<span class="op" id="4946039">[</span><span class="op" id="4946040">]</span><span class="builtintype" id="4946041">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946049">arg</span>&nbsp;<span class="op" id="4946053">:=</span>&nbsp;<span class="builtinfunc" id="4946056">make</span><span class="op" id="4946060">(</span><span class="op" id="4946061">[</span><span class="op" id="4946062">]</span><span class="builtintype" id="4946063">rune</span><span class="op" id="4946067">,</span>&nbsp;<span class="builtinfunc" id="4946069">len</span><span class="op" id="4946072">(</span><span class="ident" id="4946073">s</span><span class="op" id="4946074">)</span><span class="op" id="4946075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946078">escaped</span>&nbsp;<span class="op" id="4946086">:=</span>&nbsp;<span class="builtintype" id="4946089">false</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946096">quoted</span>&nbsp;<span class="op" id="4946103">:=</span>&nbsp;<span class="builtintype" id="4946106">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946113">quote</span>&nbsp;<span class="op" id="4946119">:=</span>&nbsp;<span class="string" id="4946122">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946130">i</span>&nbsp;<span class="op" id="4946132">:=</span>&nbsp;<span class="num" id="4946135">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946138">for</span>&nbsp;<span class="ident" id="4946142">_</span><span class="op" id="4946143">,</span>&nbsp;<span class="builtintype" id="4946145">rune</span>&nbsp;<span class="op" id="4946150">:=</span>&nbsp;<span class="keyword" id="4946153">range</span>&nbsp;<span class="ident" id="4946159">s</span>&nbsp;<span class="op" id="4946161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946165">switch</span>&nbsp;<span class="op" id="4946172">{</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946176">case</span>&nbsp;<span class="ident" id="4946181">escaped</span><span class="op" id="4946188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946193">escaped</span>&nbsp;<span class="op" id="4946201">=</span>&nbsp;<span class="builtintype" id="4946203">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946211">case</span>&nbsp;<span class="builtintype" id="4946216">rune</span>&nbsp;<span class="op" id="4946221">==</span>&nbsp;<span class="string" id="4946224">&#39;\\&#39;</span><span class="op" id="4946228">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946233">escaped</span>&nbsp;<span class="op" id="4946241">=</span>&nbsp;<span class="builtintype" id="4946243">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946251">continue</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946262">case</span>&nbsp;<span class="ident" id="4946267">quote</span>&nbsp;<span class="op" id="4946273">!=</span>&nbsp;<span class="string" id="4946276">&#39;\x00&#39;</span><span class="op" id="4946282">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946287">if</span>&nbsp;<span class="builtintype" id="4946290">rune</span>&nbsp;<span class="op" id="4946295">==</span>&nbsp;<span class="ident" id="4946298">quote</span>&nbsp;<span class="op" id="4946304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946310">quote</span>&nbsp;<span class="op" id="4946316">=</span>&nbsp;<span class="string" id="4946318">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946329">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946341">}</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946345">case</span>&nbsp;<span class="builtintype" id="4946350">rune</span>&nbsp;<span class="op" id="4946355">==</span>&nbsp;<span class="string" id="4946358">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4946362">||</span>&nbsp;<span class="builtintype" id="4946365">rune</span>&nbsp;<span class="op" id="4946370">==</span>&nbsp;<span class="string" id="4946373">&#39;\&#39;&#39;</span><span class="op" id="4946377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946382">quoted</span>&nbsp;<span class="op" id="4946389">=</span>&nbsp;<span class="builtintype" id="4946391">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946399">quote</span>&nbsp;<span class="op" id="4946405">=</span>&nbsp;<span class="builtintype" id="4946407">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946415">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946426">case</span>&nbsp;<span class="ident" id="4946431">unicode</span><span class="op" id="4946438">.</span><span class="ident" id="4946439">IsSpace</span><span class="op" id="4946446">(</span><span class="builtintype" id="4946447">rune</span><span class="op" id="4946451">)</span><span class="op" id="4946452">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946457">if</span>&nbsp;<span class="ident" id="4946460">quoted</span>&nbsp;<span class="op" id="4946467">||</span>&nbsp;<span class="ident" id="4946470">i</span>&nbsp;<span class="op" id="4946472">&gt;</span>&nbsp;<span class="num" id="4946474">0</span>&nbsp;<span class="op" id="4946476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946482">quoted</span>&nbsp;<span class="op" id="4946489">=</span>&nbsp;<span class="builtintype" id="4946491">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946501">args</span>&nbsp;<span class="op" id="4946506">=</span>&nbsp;<span class="builtinfunc" id="4946508">append</span><span class="op" id="4946514">(</span><span class="ident" id="4946515">args</span><span class="op" id="4946519">,</span>&nbsp;<span class="builtintype" id="4946521">string</span><span class="op" id="4946527">(</span><span class="ident" id="4946528">arg</span><span class="op" id="4946531">[</span><span class="op" id="4946532">:</span><span class="ident" id="4946533">i</span><span class="op" id="4946534">]</span><span class="op" id="4946535">)</span><span class="op" id="4946536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946542">i</span>&nbsp;<span class="op" id="4946544">=</span>&nbsp;<span class="num" id="4946546">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946551">}</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946556">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946571">arg</span><span class="op" id="4946574">[</span><span class="ident" id="4946575">i</span><span class="op" id="4946576">]</span>&nbsp;<span class="op" id="4946578">=</span>&nbsp;<span class="builtintype" id="4946580">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946587">i</span><span class="op" id="4946588">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946592">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946595">if</span>&nbsp;<span class="ident" id="4946598">quoted</span>&nbsp;<span class="op" id="4946605">||</span>&nbsp;<span class="ident" id="4946608">i</span>&nbsp;<span class="op" id="4946610">&gt;</span>&nbsp;<span class="num" id="4946612">0</span>&nbsp;<span class="op" id="4946614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946618">args</span>&nbsp;<span class="op" id="4946623">=</span>&nbsp;<span class="builtinfunc" id="4946625">append</span><span class="op" id="4946631">(</span><span class="ident" id="4946632">args</span><span class="op" id="4946636">,</span>&nbsp;<span class="builtintype" id="4946638">string</span><span class="op" id="4946644">(</span><span class="ident" id="4946645">arg</span><span class="op" id="4946648">[</span><span class="op" id="4946649">:</span><span class="ident" id="4946650">i</span><span class="op" id="4946651">]</span><span class="op" id="4946652">)</span><span class="op" id="4946653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946659">if</span>&nbsp;<span class="ident" id="4946662">quote</span>&nbsp;<span class="op" id="4946668">!=</span>&nbsp;<span class="num" id="4946671">0</span>&nbsp;<span class="op" id="4946673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946677">err</span>&nbsp;<span class="op" id="4946681">=</span>&nbsp;<span class="ident" id="4946683">errors</span><span class="op" id="4946689">.</span><span class="ident" id="4946690">New</span><span class="op" id="4946693">(</span><span class="string" id="4946694">&#34;unclosed&nbsp;quote&#34;</span><span class="op" id="4946710">)</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946713">}</span>&nbsp;<span class="keyword" id="4946715">else</span>&nbsp;<span class="keyword" id="4946720">if</span>&nbsp;<span class="ident" id="4946723">escaped</span>&nbsp;<span class="op" id="4946731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4946735">err</span>&nbsp;<span class="op" id="4946739">=</span>&nbsp;<span class="ident" id="4946741">errors</span><span class="op" id="4946747">.</span><span class="ident" id="4946748">New</span><span class="op" id="4946751">(</span><span class="string" id="4946752">&#34;unfinished&nbsp;escaping&#34;</span><span class="op" id="4946773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4946776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4946779">return</span>&nbsp;<span class="ident" id="4946786">args</span><span class="op" id="4946790">,</span>&nbsp;<span class="ident" id="4946792">err</span><br>
<span class="lineno"></span><span class="op" id="4946796">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="4946799">//&nbsp;match&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;name&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno"></span><span class="comment" id="4946844">//</span><br>
<span class="lineno"></span><span class="comment" id="4946847">//&nbsp;&nbsp;&nbsp;&nbsp;$GOOS</span><br>
<span class="lineno"></span><span class="comment" id="4946856">//&nbsp;&nbsp;&nbsp;&nbsp;$GOARCH</span><br>
<span class="lineno">1225</span><span class="comment" id="4946867">//&nbsp;&nbsp;&nbsp;&nbsp;cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;enabled)</span><br>
<span class="lineno"></span><span class="comment" id="4946894">//&nbsp;&nbsp;&nbsp;&nbsp;!cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;disabled)</span><br>
<span class="lineno"></span><span class="comment" id="4946923">//&nbsp;&nbsp;&nbsp;&nbsp;ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="4946940">//&nbsp;&nbsp;&nbsp;&nbsp;!ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="4946958">//&nbsp;&nbsp;&nbsp;&nbsp;tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno">1230</span><span class="comment" id="4947022">//&nbsp;&nbsp;&nbsp;&nbsp;!tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;not&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno"></span><span class="comment" id="4947091">//&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;any&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="4947133">//</span><br>
<span class="lineno"></span><span class="keyword" id="4947136">func</span>&nbsp;<span class="op" id="4947141">(</span><span class="ident" id="4947142">ctxt</span>&nbsp;<span class="op" id="4947147">*</span><span class="ident" id="4947148">Context</span><span class="op" id="4947155">)</span>&nbsp;<span class="ident" id="4947157">match</span><span class="op" id="4947162">(</span><span class="ident" id="4947163">name</span>&nbsp;<span class="builtintype" id="4947168">string</span><span class="op" id="4947174">,</span>&nbsp;<span class="ident" id="4947176">allTags</span>&nbsp;<span class="keyword" id="4947184">map</span><span class="op" id="4947187">[</span><span class="builtintype" id="4947188">string</span><span class="op" id="4947194">]</span><span class="builtintype" id="4947195">bool</span><span class="op" id="4947199">)</span>&nbsp;<span class="builtintype" id="4947201">bool</span>&nbsp;<span class="op" id="4947206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947209">if</span>&nbsp;<span class="ident" id="4947212">name</span>&nbsp;<span class="op" id="4947217">==</span>&nbsp;<span class="string" id="4947220">&#34;&#34;</span>&nbsp;<span class="op" id="4947223">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947227">if</span>&nbsp;<span class="ident" id="4947230">allTags</span>&nbsp;<span class="op" id="4947238">!=</span>&nbsp;<span class="builtintype" id="4947241">nil</span>&nbsp;<span class="op" id="4947245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947250">allTags</span><span class="op" id="4947257">[</span><span class="ident" id="4947258">name</span><span class="op" id="4947262">]</span>&nbsp;<span class="op" id="4947264">=</span>&nbsp;<span class="builtintype" id="4947266">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947277">return</span>&nbsp;<span class="builtintype" id="4947284">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947291">}</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947294">if</span>&nbsp;<span class="ident" id="4947297">i</span>&nbsp;<span class="op" id="4947299">:=</span>&nbsp;<span class="ident" id="4947302">strings</span><span class="op" id="4947309">.</span><span class="ident" id="4947310">Index</span><span class="op" id="4947315">(</span><span class="ident" id="4947316">name</span><span class="op" id="4947320">,</span>&nbsp;<span class="string" id="4947322">&#34;,&#34;</span><span class="op" id="4947325">)</span><span class="op" id="4947326">;</span>&nbsp;<span class="ident" id="4947328">i</span>&nbsp;<span class="op" id="4947330">&gt;=</span>&nbsp;<span class="num" id="4947333">0</span>&nbsp;<span class="op" id="4947335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947339">//&nbsp;comma-separated&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947365">ok1</span>&nbsp;<span class="op" id="4947369">:=</span>&nbsp;<span class="ident" id="4947372">ctxt</span><span class="op" id="4947376">.</span><span class="ident" id="4947377">match</span><span class="op" id="4947382">(</span><span class="ident" id="4947383">name</span><span class="op" id="4947387">[</span><span class="op" id="4947388">:</span><span class="ident" id="4947389">i</span><span class="op" id="4947390">]</span><span class="op" id="4947391">,</span>&nbsp;<span class="ident" id="4947393">allTags</span><span class="op" id="4947400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947404">ok2</span>&nbsp;<span class="op" id="4947408">:=</span>&nbsp;<span class="ident" id="4947411">ctxt</span><span class="op" id="4947415">.</span><span class="ident" id="4947416">match</span><span class="op" id="4947421">(</span><span class="ident" id="4947422">name</span><span class="op" id="4947426">[</span><span class="ident" id="4947427">i</span><span class="op" id="4947428">+</span><span class="num" id="4947429">1</span><span class="op" id="4947430">:</span><span class="op" id="4947431">]</span><span class="op" id="4947432">,</span>&nbsp;<span class="ident" id="4947434">allTags</span><span class="op" id="4947441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947445">return</span>&nbsp;<span class="ident" id="4947452">ok1</span>&nbsp;<span class="op" id="4947456">&amp;&amp;</span>&nbsp;<span class="ident" id="4947459">ok2</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947467">if</span>&nbsp;<span class="ident" id="4947470">strings</span><span class="op" id="4947477">.</span><span class="ident" id="4947478">HasPrefix</span><span class="op" id="4947487">(</span><span class="ident" id="4947488">name</span><span class="op" id="4947492">,</span>&nbsp;<span class="string" id="4947494">&#34;!!&#34;</span><span class="op" id="4947498">)</span>&nbsp;<span class="op" id="4947500">{</span>&nbsp;<span class="comment" id="4947502">//&nbsp;bad&nbsp;syntax,&nbsp;reject&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947533">return</span>&nbsp;<span class="builtintype" id="4947540">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947550">if</span>&nbsp;<span class="ident" id="4947553">strings</span><span class="op" id="4947560">.</span><span class="ident" id="4947561">HasPrefix</span><span class="op" id="4947570">(</span><span class="ident" id="4947571">name</span><span class="op" id="4947575">,</span>&nbsp;<span class="string" id="4947577">&#34;!&#34;</span><span class="op" id="4947580">)</span>&nbsp;<span class="op" id="4947582">{</span>&nbsp;<span class="comment" id="4947584">//&nbsp;negation</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947598">return</span>&nbsp;<span class="builtinfunc" id="4947605">len</span><span class="op" id="4947608">(</span><span class="ident" id="4947609">name</span><span class="op" id="4947613">)</span>&nbsp;<span class="op" id="4947615">&gt;</span>&nbsp;<span class="num" id="4947617">1</span>&nbsp;<span class="op" id="4947619">&amp;&amp;</span>&nbsp;<span class="op" id="4947622">!</span><span class="ident" id="4947623">ctxt</span><span class="op" id="4947627">.</span><span class="ident" id="4947628">match</span><span class="op" id="4947633">(</span><span class="ident" id="4947634">name</span><span class="op" id="4947638">[</span><span class="num" id="4947639">1</span><span class="op" id="4947640">:</span><span class="op" id="4947641">]</span><span class="op" id="4947642">,</span>&nbsp;<span class="ident" id="4947644">allTags</span><span class="op" id="4947651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947658">if</span>&nbsp;<span class="ident" id="4947661">allTags</span>&nbsp;<span class="op" id="4947669">!=</span>&nbsp;<span class="builtintype" id="4947672">nil</span>&nbsp;<span class="op" id="4947676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947680">allTags</span><span class="op" id="4947687">[</span><span class="ident" id="4947688">name</span><span class="op" id="4947692">]</span>&nbsp;<span class="op" id="4947694">=</span>&nbsp;<span class="builtintype" id="4947696">true</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947706">//&nbsp;Tags&nbsp;must&nbsp;be&nbsp;letters,&nbsp;digits,&nbsp;underscores&nbsp;or&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947761">//&nbsp;Unlike&nbsp;in&nbsp;Go&nbsp;identifiers,&nbsp;all&nbsp;digits&nbsp;are&nbsp;fine&nbsp;(e.g.,&nbsp;&#34;386&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947826">for</span>&nbsp;<span class="ident" id="4947830">_</span><span class="op" id="4947831">,</span>&nbsp;<span class="ident" id="4947833">c</span>&nbsp;<span class="op" id="4947835">:=</span>&nbsp;<span class="keyword" id="4947838">range</span>&nbsp;<span class="ident" id="4947844">name</span>&nbsp;<span class="op" id="4947849">{</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947853">if</span>&nbsp;<span class="op" id="4947856">!</span><span class="ident" id="4947857">unicode</span><span class="op" id="4947864">.</span><span class="ident" id="4947865">IsLetter</span><span class="op" id="4947873">(</span><span class="ident" id="4947874">c</span><span class="op" id="4947875">)</span>&nbsp;<span class="op" id="4947877">&amp;&amp;</span>&nbsp;<span class="op" id="4947880">!</span><span class="ident" id="4947881">unicode</span><span class="op" id="4947888">.</span><span class="ident" id="4947889">IsDigit</span><span class="op" id="4947896">(</span><span class="ident" id="4947897">c</span><span class="op" id="4947898">)</span>&nbsp;<span class="op" id="4947900">&amp;&amp;</span>&nbsp;<span class="ident" id="4947903">c</span>&nbsp;<span class="op" id="4947905">!=</span>&nbsp;<span class="string" id="4947908">&#39;_&#39;</span>&nbsp;<span class="op" id="4947912">&amp;&amp;</span>&nbsp;<span class="ident" id="4947915">c</span>&nbsp;<span class="op" id="4947917">!=</span>&nbsp;<span class="string" id="4947920">&#39;.&#39;</span>&nbsp;<span class="op" id="4947924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947929">return</span>&nbsp;<span class="builtintype" id="4947936">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947951">//&nbsp;special&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947968">if</span>&nbsp;<span class="ident" id="4947971">ctxt</span><span class="op" id="4947975">.</span><span class="ident" id="4947976">CgoEnabled</span>&nbsp;<span class="op" id="4947987">&amp;&amp;</span>&nbsp;<span class="ident" id="4947990">name</span>&nbsp;<span class="op" id="4947995">==</span>&nbsp;<span class="string" id="4947998">&#34;cgo&#34;</span>&nbsp;<span class="op" id="4948004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948008">return</span>&nbsp;<span class="builtintype" id="4948015">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948024">if</span>&nbsp;<span class="ident" id="4948027">name</span>&nbsp;<span class="op" id="4948032">==</span>&nbsp;<span class="ident" id="4948035">ctxt</span><span class="op" id="4948039">.</span><span class="ident" id="4948040">GOOS</span>&nbsp;<span class="op" id="4948045">||</span>&nbsp;<span class="ident" id="4948048">name</span>&nbsp;<span class="op" id="4948053">==</span>&nbsp;<span class="ident" id="4948056">ctxt</span><span class="op" id="4948060">.</span><span class="ident" id="4948061">GOARCH</span>&nbsp;<span class="op" id="4948068">||</span>&nbsp;<span class="ident" id="4948071">name</span>&nbsp;<span class="op" id="4948076">==</span>&nbsp;<span class="ident" id="4948079">ctxt</span><span class="op" id="4948083">.</span><span class="ident" id="4948084">Compiler</span>&nbsp;<span class="op" id="4948093">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948097">return</span>&nbsp;<span class="builtintype" id="4948104">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948113">if</span>&nbsp;<span class="ident" id="4948116">ctxt</span><span class="op" id="4948120">.</span><span class="ident" id="4948121">GOOS</span>&nbsp;<span class="op" id="4948126">==</span>&nbsp;<span class="string" id="4948129">&#34;android&#34;</span>&nbsp;<span class="op" id="4948139">&amp;&amp;</span>&nbsp;<span class="ident" id="4948142">name</span>&nbsp;<span class="op" id="4948147">==</span>&nbsp;<span class="string" id="4948150">&#34;linux&#34;</span>&nbsp;<span class="op" id="4948158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948162">return</span>&nbsp;<span class="builtintype" id="4948169">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948175">}</span><br>
<span class="lineno">1275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4948179">//&nbsp;other&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948194">for</span>&nbsp;<span class="ident" id="4948198">_</span><span class="op" id="4948199">,</span>&nbsp;<span class="ident" id="4948201">tag</span>&nbsp;<span class="op" id="4948205">:=</span>&nbsp;<span class="keyword" id="4948208">range</span>&nbsp;<span class="ident" id="4948214">ctxt</span><span class="op" id="4948218">.</span><span class="ident" id="4948219">BuildTags</span>&nbsp;<span class="op" id="4948229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948233">if</span>&nbsp;<span class="ident" id="4948236">tag</span>&nbsp;<span class="op" id="4948240">==</span>&nbsp;<span class="ident" id="4948243">name</span>&nbsp;<span class="op" id="4948248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948253">return</span>&nbsp;<span class="builtintype" id="4948260">true</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948273">for</span>&nbsp;<span class="ident" id="4948277">_</span><span class="op" id="4948278">,</span>&nbsp;<span class="ident" id="4948280">tag</span>&nbsp;<span class="op" id="4948284">:=</span>&nbsp;<span class="keyword" id="4948287">range</span>&nbsp;<span class="ident" id="4948293">ctxt</span><span class="op" id="4948297">.</span><span class="ident" id="4948298">ReleaseTags</span>&nbsp;<span class="op" id="4948310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948314">if</span>&nbsp;<span class="ident" id="4948317">tag</span>&nbsp;<span class="op" id="4948321">==</span>&nbsp;<span class="ident" id="4948324">name</span>&nbsp;<span class="op" id="4948329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948334">return</span>&nbsp;<span class="builtintype" id="4948341">true</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948355">return</span>&nbsp;<span class="builtintype" id="4948362">false</span><br>
<span class="lineno"></span><span class="op" id="4948368">}</span><br>
<span class="lineno">1290</span><br>
<span class="lineno"></span><span class="comment" id="4948371">//&nbsp;goodOSArchFile&nbsp;returns&nbsp;false&nbsp;if&nbsp;the&nbsp;name&nbsp;contains&nbsp;a&nbsp;$GOOS&nbsp;or&nbsp;$GOARCH</span><br>
<span class="lineno"></span><span class="comment" id="4948443">//&nbsp;suffix&nbsp;which&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;current&nbsp;system.</span><br>
<span class="lineno"></span><span class="comment" id="4948494">//&nbsp;The&nbsp;recognized&nbsp;name&nbsp;formats&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="4948530">//</span><br>
<span class="lineno">1295</span><span class="comment" id="4948533">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS).*</span><br>
<span class="lineno"></span><span class="comment" id="4948555">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="4948579">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="4948611">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="4948638">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH)_test.*</span><br>
<span class="lineno">1300</span><span class="comment" id="4948667">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="4948704">//</span><br>
<span class="lineno"></span><span class="comment" id="4948707">//&nbsp;An&nbsp;exception:&nbsp;if&nbsp;GOOS=android,&nbsp;then&nbsp;files&nbsp;with&nbsp;GOOS=linux&nbsp;are&nbsp;also&nbsp;matched.</span><br>
<span class="lineno"></span><span class="keyword" id="4948786">func</span>&nbsp;<span class="op" id="4948791">(</span><span class="ident" id="4948792">ctxt</span>&nbsp;<span class="op" id="4948797">*</span><span class="ident" id="4948798">Context</span><span class="op" id="4948805">)</span>&nbsp;<span class="ident" id="4948807">goodOSArchFile</span><span class="op" id="4948821">(</span><span class="ident" id="4948822">name</span>&nbsp;<span class="builtintype" id="4948827">string</span><span class="op" id="4948833">,</span>&nbsp;<span class="ident" id="4948835">allTags</span>&nbsp;<span class="keyword" id="4948843">map</span><span class="op" id="4948846">[</span><span class="builtintype" id="4948847">string</span><span class="op" id="4948853">]</span><span class="builtintype" id="4948854">bool</span><span class="op" id="4948858">)</span>&nbsp;<span class="builtintype" id="4948860">bool</span>&nbsp;<span class="op" id="4948865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948868">if</span>&nbsp;<span class="ident" id="4948871">dot</span>&nbsp;<span class="op" id="4948875">:=</span>&nbsp;<span class="ident" id="4948878">strings</span><span class="op" id="4948885">.</span><span class="ident" id="4948886">Index</span><span class="op" id="4948891">(</span><span class="ident" id="4948892">name</span><span class="op" id="4948896">,</span>&nbsp;<span class="string" id="4948898">&#34;.&#34;</span><span class="op" id="4948901">)</span><span class="op" id="4948902">;</span>&nbsp;<span class="ident" id="4948904">dot</span>&nbsp;<span class="op" id="4948908">!=</span>&nbsp;<span class="op" id="4948911">-</span><span class="num" id="4948912">1</span>&nbsp;<span class="op" id="4948914">{</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948918">name</span>&nbsp;<span class="op" id="4948923">=</span>&nbsp;<span class="ident" id="4948925">name</span><span class="op" id="4948929">[</span><span class="op" id="4948930">:</span><span class="ident" id="4948931">dot</span><span class="op" id="4948934">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4948941">//&nbsp;Before&nbsp;Go&nbsp;1.4,&nbsp;a&nbsp;file&nbsp;called&nbsp;&#34;linux.go&#34;&nbsp;would&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;having&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949017">//&nbsp;build&nbsp;tag&nbsp;&#34;linux&#34;&nbsp;in&nbsp;that&nbsp;file.&nbsp;For&nbsp;Go&nbsp;1.4&nbsp;and&nbsp;beyond,&nbsp;we&nbsp;require&nbsp;this</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949092">//&nbsp;auto-tagging&nbsp;to&nbsp;apply&nbsp;only&nbsp;to&nbsp;files&nbsp;with&nbsp;a&nbsp;non-empty&nbsp;prefix,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949160">//&nbsp;&#34;foo_linux.go&#34;&nbsp;is&nbsp;tagged&nbsp;but&nbsp;&#34;linux.go&#34;&nbsp;is&nbsp;not.&nbsp;This&nbsp;allows&nbsp;new&nbsp;operating</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949238">//&nbsp;sytems,&nbsp;such&nbsp;as&nbsp;android,&nbsp;to&nbsp;arrive&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;code&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949313">//&nbsp;innocuous&nbsp;source&nbsp;code&nbsp;in&nbsp;&#34;android.go&#34;.&nbsp;The&nbsp;easiest&nbsp;fix:&nbsp;cut&nbsp;everything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949388">//&nbsp;in&nbsp;the&nbsp;name&nbsp;before&nbsp;the&nbsp;initial&nbsp;_.</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949426">i</span>&nbsp;<span class="op" id="4949428">:=</span>&nbsp;<span class="ident" id="4949431">strings</span><span class="op" id="4949438">.</span><span class="ident" id="4949439">Index</span><span class="op" id="4949444">(</span><span class="ident" id="4949445">name</span><span class="op" id="4949449">,</span>&nbsp;<span class="string" id="4949451">&#34;_&#34;</span><span class="op" id="4949454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949457">if</span>&nbsp;<span class="ident" id="4949460">i</span>&nbsp;<span class="op" id="4949462">&lt;</span>&nbsp;<span class="num" id="4949464">0</span>&nbsp;<span class="op" id="4949466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949470">return</span>&nbsp;<span class="builtintype" id="4949477">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949486">name</span>&nbsp;<span class="op" id="4949491">=</span>&nbsp;<span class="ident" id="4949493">name</span><span class="op" id="4949497">[</span><span class="ident" id="4949498">i</span><span class="op" id="4949499">:</span><span class="op" id="4949500">]</span>&nbsp;<span class="comment" id="4949502">//&nbsp;ignore&nbsp;everything&nbsp;before&nbsp;first&nbsp;_</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949540">l</span>&nbsp;<span class="op" id="4949542">:=</span>&nbsp;<span class="ident" id="4949545">strings</span><span class="op" id="4949552">.</span><span class="ident" id="4949553">Split</span><span class="op" id="4949558">(</span><span class="ident" id="4949559">name</span><span class="op" id="4949563">,</span>&nbsp;<span class="string" id="4949565">&#34;_&#34;</span><span class="op" id="4949568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949571">if</span>&nbsp;<span class="ident" id="4949574">n</span>&nbsp;<span class="op" id="4949576">:=</span>&nbsp;<span class="builtinfunc" id="4949579">len</span><span class="op" id="4949582">(</span><span class="ident" id="4949583">l</span><span class="op" id="4949584">)</span><span class="op" id="4949585">;</span>&nbsp;<span class="ident" id="4949587">n</span>&nbsp;<span class="op" id="4949589">&gt;</span>&nbsp;<span class="num" id="4949591">0</span>&nbsp;<span class="op" id="4949593">&amp;&amp;</span>&nbsp;<span class="ident" id="4949596">l</span><span class="op" id="4949597">[</span><span class="ident" id="4949598">n</span><span class="op" id="4949599">-</span><span class="num" id="4949600">1</span><span class="op" id="4949601">]</span>&nbsp;<span class="op" id="4949603">==</span>&nbsp;<span class="string" id="4949606">&#34;test&#34;</span>&nbsp;<span class="op" id="4949613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949617">l</span>&nbsp;<span class="op" id="4949619">=</span>&nbsp;<span class="ident" id="4949621">l</span><span class="op" id="4949622">[</span><span class="op" id="4949623">:</span><span class="ident" id="4949624">n</span><span class="op" id="4949625">-</span><span class="num" id="4949626">1</span><span class="op" id="4949627">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949630">}</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949633">n</span>&nbsp;<span class="op" id="4949635">:=</span>&nbsp;<span class="builtinfunc" id="4949638">len</span><span class="op" id="4949641">(</span><span class="ident" id="4949642">l</span><span class="op" id="4949643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949646">if</span>&nbsp;<span class="ident" id="4949649">n</span>&nbsp;<span class="op" id="4949651">&gt;=</span>&nbsp;<span class="num" id="4949654">2</span>&nbsp;<span class="op" id="4949656">&amp;&amp;</span>&nbsp;<span class="ident" id="4949659">knownOS</span><span class="op" id="4949666">[</span><span class="ident" id="4949667">l</span><span class="op" id="4949668">[</span><span class="ident" id="4949669">n</span><span class="op" id="4949670">-</span><span class="num" id="4949671">2</span><span class="op" id="4949672">]</span><span class="op" id="4949673">]</span>&nbsp;<span class="op" id="4949675">&amp;&amp;</span>&nbsp;<span class="ident" id="4949678">knownArch</span><span class="op" id="4949687">[</span><span class="ident" id="4949688">l</span><span class="op" id="4949689">[</span><span class="ident" id="4949690">n</span><span class="op" id="4949691">-</span><span class="num" id="4949692">1</span><span class="op" id="4949693">]</span><span class="op" id="4949694">]</span>&nbsp;<span class="op" id="4949696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949700">if</span>&nbsp;<span class="ident" id="4949703">allTags</span>&nbsp;<span class="op" id="4949711">!=</span>&nbsp;<span class="builtintype" id="4949714">nil</span>&nbsp;<span class="op" id="4949718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949723">allTags</span><span class="op" id="4949730">[</span><span class="ident" id="4949731">l</span><span class="op" id="4949732">[</span><span class="ident" id="4949733">n</span><span class="op" id="4949734">-</span><span class="num" id="4949735">2</span><span class="op" id="4949736">]</span><span class="op" id="4949737">]</span>&nbsp;<span class="op" id="4949739">=</span>&nbsp;<span class="builtintype" id="4949741">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949749">allTags</span><span class="op" id="4949756">[</span><span class="ident" id="4949757">l</span><span class="op" id="4949758">[</span><span class="ident" id="4949759">n</span><span class="op" id="4949760">-</span><span class="num" id="4949761">1</span><span class="op" id="4949762">]</span><span class="op" id="4949763">]</span>&nbsp;<span class="op" id="4949765">=</span>&nbsp;<span class="builtintype" id="4949767">true</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949778">if</span>&nbsp;<span class="ident" id="4949781">l</span><span class="op" id="4949782">[</span><span class="ident" id="4949783">n</span><span class="op" id="4949784">-</span><span class="num" id="4949785">1</span><span class="op" id="4949786">]</span>&nbsp;<span class="op" id="4949788">!=</span>&nbsp;<span class="ident" id="4949791">ctxt</span><span class="op" id="4949795">.</span><span class="ident" id="4949796">GOARCH</span>&nbsp;<span class="op" id="4949803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949808">return</span>&nbsp;<span class="builtintype" id="4949815">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949827">if</span>&nbsp;<span class="ident" id="4949830">ctxt</span><span class="op" id="4949834">.</span><span class="ident" id="4949835">GOOS</span>&nbsp;<span class="op" id="4949840">==</span>&nbsp;<span class="string" id="4949843">&#34;android&#34;</span>&nbsp;<span class="op" id="4949853">&amp;&amp;</span>&nbsp;<span class="ident" id="4949856">l</span><span class="op" id="4949857">[</span><span class="ident" id="4949858">n</span><span class="op" id="4949859">-</span><span class="num" id="4949860">2</span><span class="op" id="4949861">]</span>&nbsp;<span class="op" id="4949863">==</span>&nbsp;<span class="string" id="4949866">&#34;linux&#34;</span>&nbsp;<span class="op" id="4949874">{</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949879">return</span>&nbsp;<span class="builtintype" id="4949886">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949897">return</span>&nbsp;<span class="ident" id="4949904">l</span><span class="op" id="4949905">[</span><span class="ident" id="4949906">n</span><span class="op" id="4949907">-</span><span class="num" id="4949908">2</span><span class="op" id="4949909">]</span>&nbsp;<span class="op" id="4949911">==</span>&nbsp;<span class="ident" id="4949914">ctxt</span><span class="op" id="4949918">.</span><span class="ident" id="4949919">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949928">if</span>&nbsp;<span class="ident" id="4949931">n</span>&nbsp;<span class="op" id="4949933">&gt;=</span>&nbsp;<span class="num" id="4949936">1</span>&nbsp;<span class="op" id="4949938">&amp;&amp;</span>&nbsp;<span class="ident" id="4949941">knownOS</span><span class="op" id="4949948">[</span><span class="ident" id="4949949">l</span><span class="op" id="4949950">[</span><span class="ident" id="4949951">n</span><span class="op" id="4949952">-</span><span class="num" id="4949953">1</span><span class="op" id="4949954">]</span><span class="op" id="4949955">]</span>&nbsp;<span class="op" id="4949957">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949961">if</span>&nbsp;<span class="ident" id="4949964">allTags</span>&nbsp;<span class="op" id="4949972">!=</span>&nbsp;<span class="builtintype" id="4949975">nil</span>&nbsp;<span class="op" id="4949979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949984">allTags</span><span class="op" id="4949991">[</span><span class="ident" id="4949992">l</span><span class="op" id="4949993">[</span><span class="ident" id="4949994">n</span><span class="op" id="4949995">-</span><span class="num" id="4949996">1</span><span class="op" id="4949997">]</span><span class="op" id="4949998">]</span>&nbsp;<span class="op" id="4950000">=</span>&nbsp;<span class="builtintype" id="4950002">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950013">if</span>&nbsp;<span class="ident" id="4950016">ctxt</span><span class="op" id="4950020">.</span><span class="ident" id="4950021">GOOS</span>&nbsp;<span class="op" id="4950026">==</span>&nbsp;<span class="string" id="4950029">&#34;android&#34;</span>&nbsp;<span class="op" id="4950039">&amp;&amp;</span>&nbsp;<span class="ident" id="4950042">l</span><span class="op" id="4950043">[</span><span class="ident" id="4950044">n</span><span class="op" id="4950045">-</span><span class="num" id="4950046">1</span><span class="op" id="4950047">]</span>&nbsp;<span class="op" id="4950049">==</span>&nbsp;<span class="string" id="4950052">&#34;linux&#34;</span>&nbsp;<span class="op" id="4950060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950065">return</span>&nbsp;<span class="builtintype" id="4950072">true</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950083">return</span>&nbsp;<span class="ident" id="4950090">l</span><span class="op" id="4950091">[</span><span class="ident" id="4950092">n</span><span class="op" id="4950093">-</span><span class="num" id="4950094">1</span><span class="op" id="4950095">]</span>&nbsp;<span class="op" id="4950097">==</span>&nbsp;<span class="ident" id="4950100">ctxt</span><span class="op" id="4950104">.</span><span class="ident" id="4950105">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950114">if</span>&nbsp;<span class="ident" id="4950117">n</span>&nbsp;<span class="op" id="4950119">&gt;=</span>&nbsp;<span class="num" id="4950122">1</span>&nbsp;<span class="op" id="4950124">&amp;&amp;</span>&nbsp;<span class="ident" id="4950127">knownArch</span><span class="op" id="4950136">[</span><span class="ident" id="4950137">l</span><span class="op" id="4950138">[</span><span class="ident" id="4950139">n</span><span class="op" id="4950140">-</span><span class="num" id="4950141">1</span><span class="op" id="4950142">]</span><span class="op" id="4950143">]</span>&nbsp;<span class="op" id="4950145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950149">if</span>&nbsp;<span class="ident" id="4950152">allTags</span>&nbsp;<span class="op" id="4950160">!=</span>&nbsp;<span class="builtintype" id="4950163">nil</span>&nbsp;<span class="op" id="4950167">{</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950172">allTags</span><span class="op" id="4950179">[</span><span class="ident" id="4950180">l</span><span class="op" id="4950181">[</span><span class="ident" id="4950182">n</span><span class="op" id="4950183">-</span><span class="num" id="4950184">1</span><span class="op" id="4950185">]</span><span class="op" id="4950186">]</span>&nbsp;<span class="op" id="4950188">=</span>&nbsp;<span class="builtintype" id="4950190">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950201">return</span>&nbsp;<span class="ident" id="4950208">l</span><span class="op" id="4950209">[</span><span class="ident" id="4950210">n</span><span class="op" id="4950211">-</span><span class="num" id="4950212">1</span><span class="op" id="4950213">]</span>&nbsp;<span class="op" id="4950215">==</span>&nbsp;<span class="ident" id="4950218">ctxt</span><span class="op" id="4950222">.</span><span class="ident" id="4950223">GOARCH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950234">return</span>&nbsp;<span class="builtintype" id="4950241">true</span><br>
<span class="lineno">1355</span><span class="op" id="4950246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4950249">var</span>&nbsp;<span class="ident" id="4950253">knownOS</span>&nbsp;<span class="op" id="4950261">=</span>&nbsp;<span class="builtinfunc" id="4950263">make</span><span class="op" id="4950267">(</span><span class="keyword" id="4950268">map</span><span class="op" id="4950271">[</span><span class="builtintype" id="4950272">string</span><span class="op" id="4950278">]</span><span class="builtintype" id="4950279">bool</span><span class="op" id="4950283">)</span><br>
<span class="lineno"></span><span class="keyword" id="4950285">var</span>&nbsp;<span class="ident" id="4950289">knownArch</span>&nbsp;<span class="op" id="4950299">=</span>&nbsp;<span class="builtinfunc" id="4950301">make</span><span class="op" id="4950305">(</span><span class="keyword" id="4950306">map</span><span class="op" id="4950309">[</span><span class="builtintype" id="4950310">string</span><span class="op" id="4950316">]</span><span class="builtintype" id="4950317">bool</span><span class="op" id="4950321">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1360</span><span class="keyword" id="4950324">func</span>&nbsp;<span class="ident" id="4950329">init</span><span class="op" id="4950333">(</span><span class="op" id="4950334">)</span>&nbsp;<span class="op" id="4950336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950339">for</span>&nbsp;<span class="ident" id="4950343">_</span><span class="op" id="4950344">,</span>&nbsp;<span class="ident" id="4950346">v</span>&nbsp;<span class="op" id="4950348">:=</span>&nbsp;<span class="keyword" id="4950351">range</span>&nbsp;<span class="ident" id="4950357">strings</span><span class="op" id="4950364">.</span><span class="ident" id="4950365">Fields</span><span class="op" id="4950371">(</span><span class="ident" id="4950372">goosList</span><span class="op" id="4950380">)</span>&nbsp;<span class="op" id="4950382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950386">knownOS</span><span class="op" id="4950393">[</span><span class="ident" id="4950394">v</span><span class="op" id="4950395">]</span>&nbsp;<span class="op" id="4950397">=</span>&nbsp;<span class="builtintype" id="4950399">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950408">for</span>&nbsp;<span class="ident" id="4950412">_</span><span class="op" id="4950413">,</span>&nbsp;<span class="ident" id="4950415">v</span>&nbsp;<span class="op" id="4950417">:=</span>&nbsp;<span class="keyword" id="4950420">range</span>&nbsp;<span class="ident" id="4950426">strings</span><span class="op" id="4950433">.</span><span class="ident" id="4950434">Fields</span><span class="op" id="4950440">(</span><span class="ident" id="4950441">goarchList</span><span class="op" id="4950451">)</span>&nbsp;<span class="op" id="4950453">{</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950457">knownArch</span><span class="op" id="4950466">[</span><span class="ident" id="4950467">v</span><span class="op" id="4950468">]</span>&nbsp;<span class="op" id="4950470">=</span>&nbsp;<span class="builtintype" id="4950472">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950478">}</span><br>
<span class="lineno"></span><span class="op" id="4950480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4950483">//&nbsp;ToolDir&nbsp;is&nbsp;the&nbsp;directory&nbsp;containing&nbsp;build&nbsp;tools.</span><br>
<span class="lineno">1370</span><span class="keyword" id="4950535">var</span>&nbsp;<span class="ident" id="4950539">ToolDir</span>&nbsp;<span class="op" id="4950547">=</span>&nbsp;<span class="ident" id="4950549">filepath</span><span class="op" id="4950557">.</span><span class="ident" id="4950558">Join</span><span class="op" id="4950562">(</span><span class="ident" id="4950563">runtime</span><span class="op" id="4950570">.</span><span class="ident" id="4950571">GOROOT</span><span class="op" id="4950577">(</span><span class="op" id="4950578">)</span><span class="op" id="4950579">,</span>&nbsp;<span class="string" id="4950581">&#34;pkg/tool/&#34;</span><span class="op" id="4950592">+</span><span class="ident" id="4950593">runtime</span><span class="op" id="4950600">.</span><span class="ident" id="4950601">GOOS</span><span class="op" id="4950605">+</span><span class="string" id="4950606">&#34;_&#34;</span><span class="op" id="4950609">+</span><span class="ident" id="4950610">runtime</span><span class="op" id="4950617">.</span><span class="ident" id="4950618">GOARCH</span><span class="op" id="4950624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4950627">//&nbsp;IsLocalImport&nbsp;reports&nbsp;whether&nbsp;the&nbsp;import&nbsp;path&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4950679">//&nbsp;a&nbsp;local&nbsp;import&nbsp;path,&nbsp;like&nbsp;&#34;.&#34;,&nbsp;&#34;..&#34;,&nbsp;&#34;./foo&#34;,&nbsp;or&nbsp;&#34;../foo&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4950741">func</span>&nbsp;<span class="ident" id="4950746">IsLocalImport</span><span class="op" id="4950759">(</span><span class="ident" id="4950760">path</span>&nbsp;<span class="builtintype" id="4950765">string</span><span class="op" id="4950771">)</span>&nbsp;<span class="builtintype" id="4950773">bool</span>&nbsp;<span class="op" id="4950778">{</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950781">return</span>&nbsp;<span class="ident" id="4950788">path</span>&nbsp;<span class="op" id="4950793">==</span>&nbsp;<span class="string" id="4950796">&#34;.&#34;</span>&nbsp;<span class="op" id="4950800">||</span>&nbsp;<span class="ident" id="4950803">path</span>&nbsp;<span class="op" id="4950808">==</span>&nbsp;<span class="string" id="4950811">&#34;..&#34;</span>&nbsp;<span class="op" id="4950816">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950821">strings</span><span class="op" id="4950828">.</span><span class="ident" id="4950829">HasPrefix</span><span class="op" id="4950838">(</span><span class="ident" id="4950839">path</span><span class="op" id="4950843">,</span>&nbsp;<span class="string" id="4950845">&#34;./&#34;</span><span class="op" id="4950849">)</span>&nbsp;<span class="op" id="4950851">||</span>&nbsp;<span class="ident" id="4950854">strings</span><span class="op" id="4950861">.</span><span class="ident" id="4950862">HasPrefix</span><span class="op" id="4950871">(</span><span class="ident" id="4950872">path</span><span class="op" id="4950876">,</span>&nbsp;<span class="string" id="4950878">&#34;../&#34;</span><span class="op" id="4950883">)</span><br>
<span class="lineno"></span><span class="op" id="4950885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4950888">//&nbsp;ArchChar&nbsp;returns&nbsp;the&nbsp;architecture&nbsp;character&nbsp;for&nbsp;the&nbsp;given&nbsp;goarch.</span><br>
<span class="lineno">1380</span><span class="comment" id="4950957">//&nbsp;For&nbsp;example,&nbsp;ArchChar(&#34;amd64&#34;)&nbsp;returns&nbsp;&#34;6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4951004">func</span>&nbsp;<span class="ident" id="4951009">ArchChar</span><span class="op" id="4951017">(</span><span class="ident" id="4951018">goarch</span>&nbsp;<span class="builtintype" id="4951025">string</span><span class="op" id="4951031">)</span>&nbsp;<span class="op" id="4951033">(</span><span class="builtintype" id="4951034">string</span><span class="op" id="4951040">,</span>&nbsp;<span class="builtintype" id="4951042">error</span><span class="op" id="4951047">)</span>&nbsp;<span class="op" id="4951049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951052">switch</span>&nbsp;<span class="ident" id="4951059">goarch</span>&nbsp;<span class="op" id="4951066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951069">case</span>&nbsp;<span class="string" id="4951074">&#34;386&#34;</span><span class="op" id="4951079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951083">return</span>&nbsp;<span class="string" id="4951090">&#34;8&#34;</span><span class="op" id="4951093">,</span>&nbsp;<span class="builtintype" id="4951095">nil</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951100">case</span>&nbsp;<span class="string" id="4951105">&#34;amd64&#34;</span><span class="op" id="4951112">,</span>&nbsp;<span class="string" id="4951114">&#34;amd64p32&#34;</span><span class="op" id="4951124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951128">return</span>&nbsp;<span class="string" id="4951135">&#34;6&#34;</span><span class="op" id="4951138">,</span>&nbsp;<span class="builtintype" id="4951140">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951145">case</span>&nbsp;<span class="string" id="4951150">&#34;arm&#34;</span><span class="op" id="4951155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951159">return</span>&nbsp;<span class="string" id="4951166">&#34;5&#34;</span><span class="op" id="4951169">,</span>&nbsp;<span class="builtintype" id="4951171">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951176">}</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951179">return</span>&nbsp;<span class="string" id="4951186">&#34;&#34;</span><span class="op" id="4951188">,</span>&nbsp;<span class="ident" id="4951190">errors</span><span class="op" id="4951196">.</span><span class="ident" id="4951197">New</span><span class="op" id="4951200">(</span><span class="string" id="4951201">&#34;unsupported&nbsp;GOARCH&nbsp;&#34;</span>&nbsp;<span class="op" id="4951223">+</span>&nbsp;<span class="ident" id="4951225">goarch</span><span class="op" id="4951231">)</span><br>
<span class="lineno"></span><span class="op" id="4951233">}</span>
</div>
</body>
</html>
