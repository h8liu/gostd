<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html" class="current">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5285549">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5285604">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5285658">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5285709">package</span>&nbsp;<span class="ident" id="5285717">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5285723">import</span>&nbsp;<span class="op" id="5285730">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5285733">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5285742">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5285757">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5285760">const</span>&nbsp;<span class="op" id="5285766">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285769">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5285782">=</span>&nbsp;<span class="op" id="5285784">^</span><span class="builtintype" id="5285785">byte</span><span class="op" id="5285789">(</span><span class="num" id="5285790">0x20</span><span class="op" id="5285794">)</span>&nbsp;<span class="comment" id="5285796">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285830">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5285843">=</span>&nbsp;<span class="string" id="5285845">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285855">smallLongEss</span>&nbsp;<span class="op" id="5285868">=</span>&nbsp;<span class="string" id="5285870">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="5285879">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5285882">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="5285949">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="5286004">//</span><br>
<span class="lineno"></span><span class="comment" id="5286007">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="5286072">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="5286151">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="5286224">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="5286282">//</span><br>
<span class="lineno"></span><span class="comment" id="5286285">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="5286361">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="5286424">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="5286474">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="5286517">//</span><br>
<span class="lineno"></span><span class="comment" id="5286520">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5286587">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="5286656">func</span>&nbsp;<span class="ident" id="5286661">foldFunc</span><span class="op" id="5286669">(</span><span class="ident" id="5286670">s</span>&nbsp;<span class="op" id="5286672">[</span><span class="op" id="5286673">]</span><span class="builtintype" id="5286674">byte</span><span class="op" id="5286678">)</span>&nbsp;<span class="keyword" id="5286680">func</span><span class="op" id="5286684">(</span><span class="ident" id="5286685">s</span><span class="op" id="5286686">,</span>&nbsp;<span class="ident" id="5286688">t</span>&nbsp;<span class="op" id="5286690">[</span><span class="op" id="5286691">]</span><span class="builtintype" id="5286692">byte</span><span class="op" id="5286696">)</span>&nbsp;<span class="builtintype" id="5286698">bool</span>&nbsp;<span class="op" id="5286703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286706">nonLetter</span>&nbsp;<span class="op" id="5286716">:=</span>&nbsp;<span class="builtintype" id="5286719">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286726">special</span>&nbsp;<span class="op" id="5286734">:=</span>&nbsp;<span class="builtintype" id="5286737">false</span>&nbsp;<span class="comment" id="5286743">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286762">for</span>&nbsp;<span class="ident" id="5286766">_</span><span class="op" id="5286767">,</span>&nbsp;<span class="ident" id="5286769">b</span>&nbsp;<span class="op" id="5286771">:=</span>&nbsp;<span class="keyword" id="5286774">range</span>&nbsp;<span class="ident" id="5286780">s</span>&nbsp;<span class="op" id="5286782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286786">if</span>&nbsp;<span class="ident" id="5286789">b</span>&nbsp;<span class="op" id="5286791">&gt;=</span>&nbsp;<span class="ident" id="5286794">utf8</span><span class="op" id="5286798">.</span><span class="ident" id="5286799">RuneSelf</span>&nbsp;<span class="op" id="5286808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286813">return</span>&nbsp;<span class="ident" id="5286820">bytes</span><span class="op" id="5286825">.</span><span class="ident" id="5286826">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286838">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286842">upper</span>&nbsp;<span class="op" id="5286848">:=</span>&nbsp;<span class="ident" id="5286851">b</span>&nbsp;<span class="op" id="5286853">&amp;</span>&nbsp;<span class="ident" id="5286855">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5286866">if</span>&nbsp;<span class="ident" id="5286869">upper</span>&nbsp;<span class="op" id="5286875">&lt;</span>&nbsp;<span class="string" id="5286877">&#39;A&#39;</span>&nbsp;<span class="op" id="5286881">||</span>&nbsp;<span class="ident" id="5286884">upper</span>&nbsp;<span class="op" id="5286890">&gt;</span>&nbsp;<span class="string" id="5286892">&#39;Z&#39;</span>&nbsp;<span class="op" id="5286896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5286901">nonLetter</span>&nbsp;<span class="op" id="5286911">=</span>&nbsp;<span class="builtintype" id="5286913">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5286920">}</span>&nbsp;<span class="keyword" id="5286922">else</span>&nbsp;<span class="keyword" id="5286927">if</span>&nbsp;<span class="ident" id="5286930">upper</span>&nbsp;<span class="op" id="5286936">==</span>&nbsp;<span class="string" id="5286939">&#39;K&#39;</span>&nbsp;<span class="op" id="5286943">||</span>&nbsp;<span class="ident" id="5286946">upper</span>&nbsp;<span class="op" id="5286952">==</span>&nbsp;<span class="string" id="5286955">&#39;S&#39;</span>&nbsp;<span class="op" id="5286959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5286964">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287015">special</span>&nbsp;<span class="op" id="5287023">=</span>&nbsp;<span class="builtintype" id="5287025">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287038">if</span>&nbsp;<span class="ident" id="5287041">special</span>&nbsp;<span class="op" id="5287049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287053">return</span>&nbsp;<span class="ident" id="5287060">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287079">if</span>&nbsp;<span class="ident" id="5287082">nonLetter</span>&nbsp;<span class="op" id="5287092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287096">return</span>&nbsp;<span class="ident" id="5287103">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287122">return</span>&nbsp;<span class="ident" id="5287129">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="5287151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5287154">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5287221">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="5287292">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="5287357">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5287386">func</span>&nbsp;<span class="ident" id="5287391">equalFoldRight</span><span class="op" id="5287405">(</span><span class="ident" id="5287406">s</span><span class="op" id="5287407">,</span>&nbsp;<span class="ident" id="5287409">t</span>&nbsp;<span class="op" id="5287411">[</span><span class="op" id="5287412">]</span><span class="builtintype" id="5287413">byte</span><span class="op" id="5287417">)</span>&nbsp;<span class="builtintype" id="5287419">bool</span>&nbsp;<span class="op" id="5287424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287427">for</span>&nbsp;<span class="ident" id="5287431">_</span><span class="op" id="5287432">,</span>&nbsp;<span class="ident" id="5287434">sb</span>&nbsp;<span class="op" id="5287437">:=</span>&nbsp;<span class="keyword" id="5287440">range</span>&nbsp;<span class="ident" id="5287446">s</span>&nbsp;<span class="op" id="5287448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287452">if</span>&nbsp;<span class="builtinfunc" id="5287455">len</span><span class="op" id="5287458">(</span><span class="ident" id="5287459">t</span><span class="op" id="5287460">)</span>&nbsp;<span class="op" id="5287462">==</span>&nbsp;<span class="num" id="5287465">0</span>&nbsp;<span class="op" id="5287467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287472">return</span>&nbsp;<span class="builtintype" id="5287479">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287491">tb</span>&nbsp;<span class="op" id="5287494">:=</span>&nbsp;<span class="ident" id="5287497">t</span><span class="op" id="5287498">[</span><span class="num" id="5287499">0</span><span class="op" id="5287500">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287504">if</span>&nbsp;<span class="ident" id="5287507">tb</span>&nbsp;<span class="op" id="5287510">&lt;</span>&nbsp;<span class="ident" id="5287512">utf8</span><span class="op" id="5287516">.</span><span class="ident" id="5287517">RuneSelf</span>&nbsp;<span class="op" id="5287526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287531">if</span>&nbsp;<span class="ident" id="5287534">sb</span>&nbsp;<span class="op" id="5287537">!=</span>&nbsp;<span class="ident" id="5287540">tb</span>&nbsp;<span class="op" id="5287543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287549">sbUpper</span>&nbsp;<span class="op" id="5287557">:=</span>&nbsp;<span class="ident" id="5287560">sb</span>&nbsp;<span class="op" id="5287563">&amp;</span>&nbsp;<span class="ident" id="5287565">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287578">if</span>&nbsp;<span class="string" id="5287581">&#39;A&#39;</span>&nbsp;<span class="op" id="5287585">&lt;=</span>&nbsp;<span class="ident" id="5287588">sbUpper</span>&nbsp;<span class="op" id="5287596">&amp;&amp;</span>&nbsp;<span class="ident" id="5287599">sbUpper</span>&nbsp;<span class="op" id="5287607">&lt;=</span>&nbsp;<span class="string" id="5287610">&#39;Z&#39;</span>&nbsp;<span class="op" id="5287614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287621">if</span>&nbsp;<span class="ident" id="5287624">sbUpper</span>&nbsp;<span class="op" id="5287632">!=</span>&nbsp;<span class="ident" id="5287635">tb</span><span class="op" id="5287637">&amp;</span><span class="ident" id="5287638">caseMask</span>&nbsp;<span class="op" id="5287647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287655">return</span>&nbsp;<span class="builtintype" id="5287662">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287679">}</span>&nbsp;<span class="keyword" id="5287681">else</span>&nbsp;<span class="op" id="5287686">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287693">return</span>&nbsp;<span class="builtintype" id="5287700">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287720">t</span>&nbsp;<span class="op" id="5287722">=</span>&nbsp;<span class="ident" id="5287724">t</span><span class="op" id="5287725">[</span><span class="num" id="5287726">1</span><span class="op" id="5287727">:</span><span class="op" id="5287728">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287733">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5287748">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5287803">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5287850">tr</span><span class="op" id="5287852">,</span>&nbsp;<span class="ident" id="5287854">size</span>&nbsp;<span class="op" id="5287859">:=</span>&nbsp;<span class="ident" id="5287862">utf8</span><span class="op" id="5287866">.</span><span class="ident" id="5287867">DecodeRune</span><span class="op" id="5287877">(</span><span class="ident" id="5287878">t</span><span class="op" id="5287879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287883">switch</span>&nbsp;<span class="ident" id="5287890">sb</span>&nbsp;<span class="op" id="5287893">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287897">case</span>&nbsp;<span class="string" id="5287902">&#39;s&#39;</span><span class="op" id="5287905">,</span>&nbsp;<span class="string" id="5287907">&#39;S&#39;</span><span class="op" id="5287910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287915">if</span>&nbsp;<span class="ident" id="5287918">tr</span>&nbsp;<span class="op" id="5287921">!=</span>&nbsp;<span class="ident" id="5287924">smallLongEss</span>&nbsp;<span class="op" id="5287937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287943">return</span>&nbsp;<span class="builtintype" id="5287950">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5287959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287963">case</span>&nbsp;<span class="string" id="5287968">&#39;k&#39;</span><span class="op" id="5287971">,</span>&nbsp;<span class="string" id="5287973">&#39;K&#39;</span><span class="op" id="5287976">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5287981">if</span>&nbsp;<span class="ident" id="5287984">tr</span>&nbsp;<span class="op" id="5287987">!=</span>&nbsp;<span class="ident" id="5287990">kelvin</span>&nbsp;<span class="op" id="5287997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288003">return</span>&nbsp;<span class="builtintype" id="5288010">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288023">default</span><span class="op" id="5288030">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288035">return</span>&nbsp;<span class="builtintype" id="5288042">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5288054">t</span>&nbsp;<span class="op" id="5288056">=</span>&nbsp;<span class="ident" id="5288058">t</span><span class="op" id="5288059">[</span><span class="ident" id="5288060">size</span><span class="op" id="5288064">:</span><span class="op" id="5288065">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288072">if</span>&nbsp;<span class="builtinfunc" id="5288075">len</span><span class="op" id="5288078">(</span><span class="ident" id="5288079">t</span><span class="op" id="5288080">)</span>&nbsp;<span class="op" id="5288082">&gt;</span>&nbsp;<span class="num" id="5288084">0</span>&nbsp;<span class="op" id="5288086">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288090">return</span>&nbsp;<span class="builtintype" id="5288097">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288107">return</span>&nbsp;<span class="builtintype" id="5288114">true</span><br>
<span class="lineno"></span><span class="op" id="5288119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5288122">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5288192">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5288256">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="5288284">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5288313">func</span>&nbsp;<span class="ident" id="5288318">asciiEqualFold</span><span class="op" id="5288332">(</span><span class="ident" id="5288333">s</span><span class="op" id="5288334">,</span>&nbsp;<span class="ident" id="5288336">t</span>&nbsp;<span class="op" id="5288338">[</span><span class="op" id="5288339">]</span><span class="builtintype" id="5288340">byte</span><span class="op" id="5288344">)</span>&nbsp;<span class="builtintype" id="5288346">bool</span>&nbsp;<span class="op" id="5288351">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288354">if</span>&nbsp;<span class="builtinfunc" id="5288357">len</span><span class="op" id="5288360">(</span><span class="ident" id="5288361">s</span><span class="op" id="5288362">)</span>&nbsp;<span class="op" id="5288364">!=</span>&nbsp;<span class="builtinfunc" id="5288367">len</span><span class="op" id="5288370">(</span><span class="ident" id="5288371">t</span><span class="op" id="5288372">)</span>&nbsp;<span class="op" id="5288374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288378">return</span>&nbsp;<span class="builtintype" id="5288385">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288395">for</span>&nbsp;<span class="ident" id="5288399">i</span><span class="op" id="5288400">,</span>&nbsp;<span class="ident" id="5288402">sb</span>&nbsp;<span class="op" id="5288405">:=</span>&nbsp;<span class="keyword" id="5288408">range</span>&nbsp;<span class="ident" id="5288414">s</span>&nbsp;<span class="op" id="5288416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5288420">tb</span>&nbsp;<span class="op" id="5288423">:=</span>&nbsp;<span class="ident" id="5288426">t</span><span class="op" id="5288427">[</span><span class="ident" id="5288428">i</span><span class="op" id="5288429">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288433">if</span>&nbsp;<span class="ident" id="5288436">sb</span>&nbsp;<span class="op" id="5288439">==</span>&nbsp;<span class="ident" id="5288442">tb</span>&nbsp;<span class="op" id="5288445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288450">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288465">if</span>&nbsp;<span class="op" id="5288468">(</span><span class="string" id="5288469">&#39;a&#39;</span>&nbsp;<span class="op" id="5288473">&lt;=</span>&nbsp;<span class="ident" id="5288476">sb</span>&nbsp;<span class="op" id="5288479">&amp;&amp;</span>&nbsp;<span class="ident" id="5288482">sb</span>&nbsp;<span class="op" id="5288485">&lt;=</span>&nbsp;<span class="string" id="5288488">&#39;z&#39;</span><span class="op" id="5288491">)</span>&nbsp;<span class="op" id="5288493">||</span>&nbsp;<span class="op" id="5288496">(</span><span class="string" id="5288497">&#39;A&#39;</span>&nbsp;<span class="op" id="5288501">&lt;=</span>&nbsp;<span class="ident" id="5288504">sb</span>&nbsp;<span class="op" id="5288507">&amp;&amp;</span>&nbsp;<span class="ident" id="5288510">sb</span>&nbsp;<span class="op" id="5288513">&lt;=</span>&nbsp;<span class="string" id="5288516">&#39;Z&#39;</span><span class="op" id="5288519">)</span>&nbsp;<span class="op" id="5288521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288526">if</span>&nbsp;<span class="ident" id="5288529">sb</span><span class="op" id="5288531">&amp;</span><span class="ident" id="5288532">caseMask</span>&nbsp;<span class="op" id="5288541">!=</span>&nbsp;<span class="ident" id="5288544">tb</span><span class="op" id="5288546">&amp;</span><span class="ident" id="5288547">caseMask</span>&nbsp;<span class="op" id="5288556">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288562">return</span>&nbsp;<span class="builtintype" id="5288569">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288582">}</span>&nbsp;<span class="keyword" id="5288584">else</span>&nbsp;<span class="op" id="5288589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288594">return</span>&nbsp;<span class="builtintype" id="5288601">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288609">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288615">return</span>&nbsp;<span class="builtintype" id="5288622">true</span><br>
<span class="lineno"></span><span class="op" id="5288627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5288630">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="5288698">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="5288764">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5288806">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5288835">func</span>&nbsp;<span class="ident" id="5288840">simpleLetterEqualFold</span><span class="op" id="5288861">(</span><span class="ident" id="5288862">s</span><span class="op" id="5288863">,</span>&nbsp;<span class="ident" id="5288865">t</span>&nbsp;<span class="op" id="5288867">[</span><span class="op" id="5288868">]</span><span class="builtintype" id="5288869">byte</span><span class="op" id="5288873">)</span>&nbsp;<span class="builtintype" id="5288875">bool</span>&nbsp;<span class="op" id="5288880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288883">if</span>&nbsp;<span class="builtinfunc" id="5288886">len</span><span class="op" id="5288889">(</span><span class="ident" id="5288890">s</span><span class="op" id="5288891">)</span>&nbsp;<span class="op" id="5288893">!=</span>&nbsp;<span class="builtinfunc" id="5288896">len</span><span class="op" id="5288899">(</span><span class="ident" id="5288900">t</span><span class="op" id="5288901">)</span>&nbsp;<span class="op" id="5288903">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288907">return</span>&nbsp;<span class="builtintype" id="5288914">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288924">for</span>&nbsp;<span class="ident" id="5288928">i</span><span class="op" id="5288929">,</span>&nbsp;<span class="ident" id="5288931">b</span>&nbsp;<span class="op" id="5288933">:=</span>&nbsp;<span class="keyword" id="5288936">range</span>&nbsp;<span class="ident" id="5288942">s</span>&nbsp;<span class="op" id="5288944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288948">if</span>&nbsp;<span class="ident" id="5288951">b</span><span class="op" id="5288952">&amp;</span><span class="ident" id="5288953">caseMask</span>&nbsp;<span class="op" id="5288962">!=</span>&nbsp;<span class="ident" id="5288965">t</span><span class="op" id="5288966">[</span><span class="ident" id="5288967">i</span><span class="op" id="5288968">]</span><span class="op" id="5288969">&amp;</span><span class="ident" id="5288970">caseMask</span>&nbsp;<span class="op" id="5288979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5288984">return</span>&nbsp;<span class="builtintype" id="5288991">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5288999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5289002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5289005">return</span>&nbsp;<span class="builtintype" id="5289012">true</span><br>
<span class="lineno"></span><span class="op" id="5289017">}</span>
</div>
</body>
</html>
