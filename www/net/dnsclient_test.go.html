<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6789079">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6789134">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6789188">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6789239">package</span>&nbsp;<span class="ident" id="6789247">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6789252">import</span>&nbsp;<span class="op" id="6789259">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6789262">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6789275">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6789285">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6789288">func</span>&nbsp;<span class="ident" id="6789293">checkDistribution</span><span class="op" id="6789310">(</span><span class="ident" id="6789311">t</span>&nbsp;<span class="op" id="6789313">*</span><span class="ident" id="6789314"><a href="/net/dnsclient_test.go.html#6789275">testing</a></span><span class="op" id="6789321">.</span><span class="ident" id="6789322">T</span><span class="op" id="6789323">,</span>&nbsp;<span class="ident" id="6789325">data</span>&nbsp;<span class="op" id="6789330">[</span><span class="op" id="6789331">]</span><span class="op" id="6789332">*</span><span class="ident" id="6789333"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="6789336">,</span>&nbsp;<span class="ident" id="6789338">margin</span>&nbsp;<span class="builtintype" id="6789345">float64</span><span class="op" id="6789352">)</span>&nbsp;<span class="op" id="6789354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789357">sum</span>&nbsp;<span class="op" id="6789361">:=</span>&nbsp;<span class="num" id="6789364">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789367">for</span>&nbsp;<span class="ident" id="6789371">_</span><span class="op" id="6789372">,</span>&nbsp;<span class="ident" id="6789374">srv</span>&nbsp;<span class="op" id="6789378">:=</span>&nbsp;<span class="keyword" id="6789381">range</span>&nbsp;<span class="ident" id="6789387"><a href="/net/dnsclient_test.go.html#6789325">data</a></span>&nbsp;<span class="op" id="6789392">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789396"><a href="/net/dnsclient_test.go.html#6789357">sum</a></span>&nbsp;<span class="op" id="6789400">+=</span>&nbsp;<span class="builtintype" id="6789403">int</span><span class="op" id="6789406">(</span><span class="ident" id="6789407"><a href="/net/dnsclient_test.go.html#6789374">srv</a></span><span class="op" id="6789410">.</span><span class="ident" id="6789411">Weight</span><span class="op" id="6789417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789424">results</span>&nbsp;<span class="op" id="6789432">:=</span>&nbsp;<span class="builtinfunc" id="6789435">make</span><span class="op" id="6789439">(</span><span class="keyword" id="6789440">map</span><span class="op" id="6789443">[</span><span class="builtintype" id="6789444">string</span><span class="op" id="6789450">]</span><span class="builtintype" id="6789451">int</span><span class="op" id="6789454">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789458">count</span>&nbsp;<span class="op" id="6789464">:=</span>&nbsp;<span class="num" id="6789467">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789473">for</span>&nbsp;<span class="ident" id="6789477">j</span>&nbsp;<span class="op" id="6789479">:=</span>&nbsp;<span class="num" id="6789482">0</span><span class="op" id="6789483">;</span>&nbsp;<span class="ident" id="6789485"><a href="/net/dnsclient_test.go.html#6789477">j</a></span>&nbsp;<span class="op" id="6789487">&lt;</span>&nbsp;<span class="ident" id="6789489"><a href="/net/dnsclient_test.go.html#6789458">count</a></span><span class="op" id="6789494">;</span>&nbsp;<span class="ident" id="6789496"><a href="/net/dnsclient_test.go.html#6789477">j</a></span><span class="op" id="6789497">++</span>&nbsp;<span class="op" id="6789500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789504">d</span>&nbsp;<span class="op" id="6789506">:=</span>&nbsp;<span class="builtinfunc" id="6789509">make</span><span class="op" id="6789513">(</span><span class="op" id="6789514">[</span><span class="op" id="6789515">]</span><span class="op" id="6789516">*</span><span class="ident" id="6789517"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="6789520">,</span>&nbsp;<span class="builtinfunc" id="6789522">len</span><span class="op" id="6789525">(</span><span class="ident" id="6789526"><a href="/net/dnsclient_test.go.html#6789325">data</a></span><span class="op" id="6789530">)</span><span class="op" id="6789531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6789535">copy</span><span class="op" id="6789539">(</span><span class="ident" id="6789540"><a href="/net/dnsclient_test.go.html#6789504">d</a></span><span class="op" id="6789541">,</span>&nbsp;<span class="ident" id="6789543"><a href="/net/dnsclient_test.go.html#6789325">data</a></span><span class="op" id="6789547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789551"><a href="/net/dnsclient.go.html#2530972">byPriorityWeight</a></span><span class="op" id="6789567">(</span><span class="ident" id="6789568"><a href="/net/dnsclient_test.go.html#6789504">d</a></span><span class="op" id="6789569">)</span><span class="op" id="6789570">.</span><span class="ident" id="6789571">shuffleByWeight</span><span class="op" id="6789586">(</span><span class="op" id="6789587">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789591">key</span>&nbsp;<span class="op" id="6789595">:=</span>&nbsp;<span class="ident" id="6789598"><a href="/net/dnsclient_test.go.html#6789504">d</a></span><span class="op" id="6789599">[</span><span class="num" id="6789600">0</span><span class="op" id="6789601">]</span><span class="op" id="6789602">.</span><span class="ident" id="6789603">Target</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789612"><a href="/net/dnsclient_test.go.html#6789424">results</a></span><span class="op" id="6789619">[</span><span class="ident" id="6789620"><a href="/net/dnsclient_test.go.html#6789591">key</a></span><span class="op" id="6789623">]</span>&nbsp;<span class="op" id="6789625">=</span>&nbsp;<span class="ident" id="6789627"><a href="/net/dnsclient_test.go.html#6789424">results</a></span><span class="op" id="6789634">[</span><span class="ident" id="6789635"><a href="/net/dnsclient_test.go.html#6789591">key</a></span><span class="op" id="6789638">]</span>&nbsp;<span class="op" id="6789640">+</span>&nbsp;<span class="num" id="6789642">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789649">actual</span>&nbsp;<span class="op" id="6789656">:=</span>&nbsp;<span class="ident" id="6789659"><a href="/net/dnsclient_test.go.html#6789424">results</a></span><span class="op" id="6789666">[</span><span class="ident" id="6789667"><a href="/net/dnsclient_test.go.html#6789325">data</a></span><span class="op" id="6789671">[</span><span class="num" id="6789672">0</span><span class="op" id="6789673">]</span><span class="op" id="6789674">.</span><span class="ident" id="6789675">Target</span><span class="op" id="6789681">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789684">expected</span>&nbsp;<span class="op" id="6789693">:=</span>&nbsp;<span class="builtintype" id="6789696">float64</span><span class="op" id="6789703">(</span><span class="ident" id="6789704"><a href="/net/dnsclient_test.go.html#6789458">count</a></span><span class="op" id="6789709">)</span>&nbsp;<span class="op" id="6789711">*</span>&nbsp;<span class="builtintype" id="6789713">float64</span><span class="op" id="6789720">(</span><span class="ident" id="6789721"><a href="/net/dnsclient_test.go.html#6789325">data</a></span><span class="op" id="6789725">[</span><span class="num" id="6789726">0</span><span class="op" id="6789727">]</span><span class="op" id="6789728">.</span><span class="ident" id="6789729">Weight</span><span class="op" id="6789735">)</span>&nbsp;<span class="op" id="6789737">/</span>&nbsp;<span class="builtintype" id="6789739">float64</span><span class="op" id="6789746">(</span><span class="ident" id="6789747"><a href="/net/dnsclient_test.go.html#6789357">sum</a></span><span class="op" id="6789750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789753">diff</span>&nbsp;<span class="op" id="6789758">:=</span>&nbsp;<span class="builtintype" id="6789761">float64</span><span class="op" id="6789768">(</span><span class="ident" id="6789769"><a href="/net/dnsclient_test.go.html#6789649">actual</a></span><span class="op" id="6789775">)</span>&nbsp;<span class="op" id="6789777">-</span>&nbsp;<span class="ident" id="6789779"><a href="/net/dnsclient_test.go.html#6789684">expected</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789789"><a href="/net/dnsclient_test.go.html#6789311">t</a></span><span class="op" id="6789790">.</span><span class="ident" id="6789791">Logf</span><span class="op" id="6789795">(</span><span class="string" id="6789796">&#34;actual:&nbsp;%v&nbsp;diff:&nbsp;%v&nbsp;e:&nbsp;%v&nbsp;m:&nbsp;%v&#34;</span><span class="op" id="6789829">,</span>&nbsp;<span class="ident" id="6789831"><a href="/net/dnsclient_test.go.html#6789649">actual</a></span><span class="op" id="6789837">,</span>&nbsp;<span class="ident" id="6789839"><a href="/net/dnsclient_test.go.html#6789753">diff</a></span><span class="op" id="6789843">,</span>&nbsp;<span class="ident" id="6789845"><a href="/net/dnsclient_test.go.html#6789684">expected</a></span><span class="op" id="6789853">,</span>&nbsp;<span class="ident" id="6789855"><a href="/net/dnsclient_test.go.html#6789338">margin</a></span><span class="op" id="6789861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789864">if</span>&nbsp;<span class="ident" id="6789867"><a href="/net/dnsclient_test.go.html#6789753">diff</a></span>&nbsp;<span class="op" id="6789872">&lt;</span>&nbsp;<span class="num" id="6789874">0</span>&nbsp;<span class="op" id="6789876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789880"><a href="/net/dnsclient_test.go.html#6789753">diff</a></span>&nbsp;<span class="op" id="6789885">=</span>&nbsp;<span class="op" id="6789887">-</span><span class="ident" id="6789888"><a href="/net/dnsclient_test.go.html#6789753">diff</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6789897">if</span>&nbsp;<span class="ident" id="6789900"><a href="/net/dnsclient_test.go.html#6789753">diff</a></span>&nbsp;<span class="op" id="6789905">&gt;</span>&nbsp;<span class="op" id="6789907">(</span><span class="ident" id="6789908"><a href="/net/dnsclient_test.go.html#6789684">expected</a></span>&nbsp;<span class="op" id="6789917">*</span>&nbsp;<span class="ident" id="6789919"><a href="/net/dnsclient_test.go.html#6789338">margin</a></span><span class="op" id="6789925">)</span>&nbsp;<span class="op" id="6789927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789931"><a href="/net/dnsclient_test.go.html#6789311">t</a></span><span class="op" id="6789932">.</span><span class="ident" id="6789933">Errorf</span><span class="op" id="6789939">(</span><span class="string" id="6789940">&#34;missed&nbsp;target&nbsp;weight:&nbsp;expected&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="6789979">,</span>&nbsp;<span class="ident" id="6789981"><a href="/net/dnsclient_test.go.html#6789684">expected</a></span><span class="op" id="6789989">,</span>&nbsp;<span class="ident" id="6789991"><a href="/net/dnsclient_test.go.html#6789649">actual</a></span><span class="op" id="6789997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790000">}</span><br>
<span class="lineno"></span><span class="op" id="6790002">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="6790005">func</span>&nbsp;<span class="ident" id="6790010">testUniformity</span><span class="op" id="6790024">(</span><span class="ident" id="6790025">t</span>&nbsp;<span class="op" id="6790027">*</span><span class="ident" id="6790028"><a href="/net/dnsclient_test.go.html#6789275">testing</a></span><span class="op" id="6790035">.</span><span class="ident" id="6790036">T</span><span class="op" id="6790037">,</span>&nbsp;<span class="ident" id="6790039">size</span>&nbsp;<span class="builtintype" id="6790044">int</span><span class="op" id="6790047">,</span>&nbsp;<span class="ident" id="6790049">margin</span>&nbsp;<span class="builtintype" id="6790056">float64</span><span class="op" id="6790063">)</span>&nbsp;<span class="op" id="6790065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790068"><a href="/net/dnsclient_test.go.html#6789262">rand</a></span><span class="op" id="6790072">.</span><span class="ident" id="6790073">Seed</span><span class="op" id="6790077">(</span><span class="num" id="6790078">1</span><span class="op" id="6790079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790082">data</span>&nbsp;<span class="op" id="6790087">:=</span>&nbsp;<span class="builtinfunc" id="6790090">make</span><span class="op" id="6790094">(</span><span class="op" id="6790095">[</span><span class="op" id="6790096">]</span><span class="op" id="6790097">*</span><span class="ident" id="6790098"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="6790101">,</span>&nbsp;<span class="ident" id="6790103"><a href="/net/dnsclient_test.go.html#6790039">size</a></span><span class="op" id="6790107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6790110">for</span>&nbsp;<span class="ident" id="6790114">i</span>&nbsp;<span class="op" id="6790116">:=</span>&nbsp;<span class="num" id="6790119">0</span><span class="op" id="6790120">;</span>&nbsp;<span class="ident" id="6790122"><a href="/net/dnsclient_test.go.html#6790114">i</a></span>&nbsp;<span class="op" id="6790124">&lt;</span>&nbsp;<span class="ident" id="6790126"><a href="/net/dnsclient_test.go.html#6790039">size</a></span><span class="op" id="6790130">;</span>&nbsp;<span class="ident" id="6790132"><a href="/net/dnsclient_test.go.html#6790114">i</a></span><span class="op" id="6790133">++</span>&nbsp;<span class="op" id="6790136">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790140"><a href="/net/dnsclient_test.go.html#6790082">data</a></span><span class="op" id="6790144">[</span><span class="ident" id="6790145"><a href="/net/dnsclient_test.go.html#6790114">i</a></span><span class="op" id="6790146">]</span>&nbsp;<span class="op" id="6790148">=</span>&nbsp;<span class="op" id="6790150">&amp;</span><span class="ident" id="6790151"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="6790154">{</span><span class="ident" id="6790155">Target</span><span class="op" id="6790161">:</span>&nbsp;<span class="builtintype" id="6790163">string</span><span class="op" id="6790169">(</span><span class="string" id="6790170">&#39;a&#39;</span>&nbsp;<span class="op" id="6790174">+</span>&nbsp;<span class="ident" id="6790176"><a href="/net/dnsclient_test.go.html#6790114">i</a></span><span class="op" id="6790177">)</span><span class="op" id="6790178">,</span>&nbsp;<span class="ident" id="6790180">Weight</span><span class="op" id="6790186">:</span>&nbsp;<span class="num" id="6790188">1</span><span class="op" id="6790189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790195"><a href="/net/dnsclient_test.go.html#6789293">checkDistribution</a></span><span class="op" id="6790212">(</span><span class="ident" id="6790213"><a href="/net/dnsclient_test.go.html#6790025">t</a></span><span class="op" id="6790214">,</span>&nbsp;<span class="ident" id="6790216"><a href="/net/dnsclient_test.go.html#6790082">data</a></span><span class="op" id="6790220">,</span>&nbsp;<span class="ident" id="6790222"><a href="/net/dnsclient_test.go.html#6790049">margin</a></span><span class="op" id="6790228">)</span><br>
<span class="lineno"></span><span class="op" id="6790230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6790233">func</span>&nbsp;<span class="ident" id="6790238">TestUniformity</span><span class="op" id="6790252">(</span><span class="ident" id="6790253">t</span>&nbsp;<span class="op" id="6790255">*</span><span class="ident" id="6790256"><a href="/net/dnsclient_test.go.html#6789275">testing</a></span><span class="op" id="6790263">.</span><span class="ident" id="6790264">T</span><span class="op" id="6790265">)</span>&nbsp;<span class="op" id="6790267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790270"><a href="/net/dnsclient_test.go.html#6790010">testUniformity</a></span><span class="op" id="6790284">(</span><span class="ident" id="6790285"><a href="/net/dnsclient_test.go.html#6790253">t</a></span><span class="op" id="6790286">,</span>&nbsp;<span class="num" id="6790288">2</span><span class="op" id="6790289">,</span>&nbsp;<span class="num" id="6790291">0.05</span><span class="op" id="6790295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790298"><a href="/net/dnsclient_test.go.html#6790010">testUniformity</a></span><span class="op" id="6790312">(</span><span class="ident" id="6790313"><a href="/net/dnsclient_test.go.html#6790253">t</a></span><span class="op" id="6790314">,</span>&nbsp;<span class="num" id="6790316">3</span><span class="op" id="6790317">,</span>&nbsp;<span class="num" id="6790319">0.10</span><span class="op" id="6790323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790326"><a href="/net/dnsclient_test.go.html#6790010">testUniformity</a></span><span class="op" id="6790340">(</span><span class="ident" id="6790341"><a href="/net/dnsclient_test.go.html#6790253">t</a></span><span class="op" id="6790342">,</span>&nbsp;<span class="num" id="6790344">10</span><span class="op" id="6790346">,</span>&nbsp;<span class="num" id="6790348">0.20</span><span class="op" id="6790352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790355"><a href="/net/dnsclient_test.go.html#6790386">testWeighting</a></span><span class="op" id="6790368">(</span><span class="ident" id="6790369"><a href="/net/dnsclient_test.go.html#6790253">t</a></span><span class="op" id="6790370">,</span>&nbsp;<span class="num" id="6790372">0.05</span><span class="op" id="6790376">)</span><br>
<span class="lineno">55</span><span class="op" id="6790378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6790381">func</span>&nbsp;<span class="ident" id="6790386">testWeighting</span><span class="op" id="6790399">(</span><span class="ident" id="6790400">t</span>&nbsp;<span class="op" id="6790402">*</span><span class="ident" id="6790403"><a href="/net/dnsclient_test.go.html#6789275">testing</a></span><span class="op" id="6790410">.</span><span class="ident" id="6790411">T</span><span class="op" id="6790412">,</span>&nbsp;<span class="ident" id="6790414">margin</span>&nbsp;<span class="builtintype" id="6790421">float64</span><span class="op" id="6790428">)</span>&nbsp;<span class="op" id="6790430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790433"><a href="/net/dnsclient_test.go.html#6789262">rand</a></span><span class="op" id="6790437">.</span><span class="ident" id="6790438">Seed</span><span class="op" id="6790442">(</span><span class="num" id="6790443">1</span><span class="op" id="6790444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790447">data</span>&nbsp;<span class="op" id="6790452">:=</span>&nbsp;<span class="op" id="6790455">[</span><span class="op" id="6790456">]</span><span class="op" id="6790457">*</span><span class="ident" id="6790458"><a href="/net/dnsclient.go.html#2530811">SRV</a></span><span class="op" id="6790461">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790465">{</span><span class="ident" id="6790466">Target</span><span class="op" id="6790472">:</span>&nbsp;<span class="string" id="6790474">&#34;a&#34;</span><span class="op" id="6790477">,</span>&nbsp;<span class="ident" id="6790479">Weight</span><span class="op" id="6790485">:</span>&nbsp;<span class="num" id="6790487">60</span><span class="op" id="6790489">}</span><span class="op" id="6790490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790494">{</span><span class="ident" id="6790495">Target</span><span class="op" id="6790501">:</span>&nbsp;<span class="string" id="6790503">&#34;b&#34;</span><span class="op" id="6790506">,</span>&nbsp;<span class="ident" id="6790508">Weight</span><span class="op" id="6790514">:</span>&nbsp;<span class="num" id="6790516">30</span><span class="op" id="6790518">}</span><span class="op" id="6790519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790523">{</span><span class="ident" id="6790524">Target</span><span class="op" id="6790530">:</span>&nbsp;<span class="string" id="6790532">&#34;c&#34;</span><span class="op" id="6790535">,</span>&nbsp;<span class="ident" id="6790537">Weight</span><span class="op" id="6790543">:</span>&nbsp;<span class="num" id="6790545">10</span><span class="op" id="6790547">}</span><span class="op" id="6790548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6790551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790554"><a href="/net/dnsclient_test.go.html#6789293">checkDistribution</a></span><span class="op" id="6790571">(</span><span class="ident" id="6790572"><a href="/net/dnsclient_test.go.html#6790400">t</a></span><span class="op" id="6790573">,</span>&nbsp;<span class="ident" id="6790575"><a href="/net/dnsclient_test.go.html#6790447">data</a></span><span class="op" id="6790579">,</span>&nbsp;<span class="ident" id="6790581"><a href="/net/dnsclient_test.go.html#6790414">margin</a></span><span class="op" id="6790587">)</span><br>
<span class="lineno">65</span><span class="op" id="6790589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6790592">func</span>&nbsp;<span class="ident" id="6790597">TestWeighting</span><span class="op" id="6790610">(</span><span class="ident" id="6790611">t</span>&nbsp;<span class="op" id="6790613">*</span><span class="ident" id="6790614"><a href="/net/dnsclient_test.go.html#6789275">testing</a></span><span class="op" id="6790621">.</span><span class="ident" id="6790622">T</span><span class="op" id="6790623">)</span>&nbsp;<span class="op" id="6790625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6790628"><a href="/net/dnsclient_test.go.html#6790386">testWeighting</a></span><span class="op" id="6790641">(</span><span class="ident" id="6790642"><a href="/net/dnsclient_test.go.html#6790611">t</a></span><span class="op" id="6790643">,</span>&nbsp;<span class="num" id="6790645">0.05</span><span class="op" id="6790649">)</span><br>
<span class="lineno"></span><span class="op" id="6790651">}</span>
</div>
</body>
</html>
