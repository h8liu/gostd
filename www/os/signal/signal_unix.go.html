<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6268882">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6268937">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6268991">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6269042">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6269120">package</span>&nbsp;<span class="ident" id="6269128">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6269136">import</span>&nbsp;<span class="op" id="6269143">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6269146">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6269152">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="6269162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6269165">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="6269181">func</span>&nbsp;<span class="ident" id="6269186">signal_disable</span><span class="op" id="6269200">(</span><span class="builtintype" id="6269201">uint32</span><span class="op" id="6269207">)</span><br>
<span class="lineno"></span><span class="keyword" id="6269209">func</span>&nbsp;<span class="ident" id="6269214">signal_enable</span><span class="op" id="6269227">(</span><span class="builtintype" id="6269228">uint32</span><span class="op" id="6269234">)</span><br>
<span class="lineno"></span><span class="keyword" id="6269236">func</span>&nbsp;<span class="ident" id="6269241">signal_recv</span><span class="op" id="6269252">(</span><span class="op" id="6269253">)</span>&nbsp;<span class="builtintype" id="6269255">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6269263">func</span>&nbsp;<span class="ident" id="6269268">loop</span><span class="op" id="6269272">(</span><span class="op" id="6269273">)</span>&nbsp;<span class="op" id="6269275">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269278">for</span>&nbsp;<span class="op" id="6269282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269286">process</span><span class="op" id="6269293">(</span><span class="ident" id="6269294">syscall</span><span class="op" id="6269301">.</span><span class="ident" id="6269302">Signal</span><span class="op" id="6269308">(</span><span class="ident" id="6269309">signal_recv</span><span class="op" id="6269320">(</span><span class="op" id="6269321">)</span><span class="op" id="6269322">)</span><span class="op" id="6269323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269326">}</span><br>
<span class="lineno"></span><span class="op" id="6269328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6269331">func</span>&nbsp;<span class="ident" id="6269336">init</span><span class="op" id="6269340">(</span><span class="op" id="6269341">)</span>&nbsp;<span class="op" id="6269343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269346">signal_enable</span><span class="op" id="6269359">(</span><span class="num" id="6269360">0</span><span class="op" id="6269361">)</span>&nbsp;<span class="comment" id="6269363">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269391">go</span>&nbsp;<span class="ident" id="6269394">loop</span><span class="op" id="6269398">(</span><span class="op" id="6269399">)</span><br>
<span class="lineno"></span><span class="op" id="6269401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6269404">const</span>&nbsp;<span class="op" id="6269410">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269413">numSig</span>&nbsp;<span class="op" id="6269420">=</span>&nbsp;<span class="num" id="6269422">65</span>&nbsp;<span class="comment" id="6269425">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="6269451">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6269454">func</span>&nbsp;<span class="ident" id="6269459">signum</span><span class="op" id="6269465">(</span><span class="ident" id="6269466">sig</span>&nbsp;<span class="ident" id="6269470">os</span><span class="op" id="6269472">.</span><span class="ident" id="6269473">Signal</span><span class="op" id="6269479">)</span>&nbsp;<span class="builtintype" id="6269481">int</span>&nbsp;<span class="op" id="6269485">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269488">switch</span>&nbsp;<span class="ident" id="6269495">sig</span>&nbsp;<span class="op" id="6269499">:=</span>&nbsp;<span class="ident" id="6269502">sig</span><span class="op" id="6269505">.</span><span class="op" id="6269506">(</span><span class="keyword" id="6269507">type</span><span class="op" id="6269511">)</span>&nbsp;<span class="op" id="6269513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269516">case</span>&nbsp;<span class="ident" id="6269521">syscall</span><span class="op" id="6269528">.</span><span class="ident" id="6269529">Signal</span><span class="op" id="6269535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269539">i</span>&nbsp;<span class="op" id="6269541">:=</span>&nbsp;<span class="builtintype" id="6269544">int</span><span class="op" id="6269547">(</span><span class="ident" id="6269548">sig</span><span class="op" id="6269551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269555">if</span>&nbsp;<span class="ident" id="6269558">i</span>&nbsp;<span class="op" id="6269560">&lt;</span>&nbsp;<span class="num" id="6269562">0</span>&nbsp;<span class="op" id="6269564">||</span>&nbsp;<span class="ident" id="6269567">i</span>&nbsp;<span class="op" id="6269569">&gt;=</span>&nbsp;<span class="ident" id="6269572">numSig</span>&nbsp;<span class="op" id="6269579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269584">return</span>&nbsp;<span class="op" id="6269591">-</span><span class="num" id="6269592">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269600">return</span>&nbsp;<span class="ident" id="6269607">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269610">default</span><span class="op" id="6269617">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6269621">return</span>&nbsp;<span class="op" id="6269628">-</span><span class="num" id="6269629">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6269632">}</span><br>
<span class="lineno">45</span><span class="op" id="6269634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6269637">func</span>&nbsp;<span class="ident" id="6269642">enableSignal</span><span class="op" id="6269654">(</span><span class="ident" id="6269655">sig</span>&nbsp;<span class="builtintype" id="6269659">int</span><span class="op" id="6269662">)</span>&nbsp;<span class="op" id="6269664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269667">signal_enable</span><span class="op" id="6269680">(</span><span class="builtintype" id="6269681">uint32</span><span class="op" id="6269687">(</span><span class="ident" id="6269688">sig</span><span class="op" id="6269691">)</span><span class="op" id="6269692">)</span><br>
<span class="lineno"></span><span class="op" id="6269694">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6269697">func</span>&nbsp;<span class="ident" id="6269702">disableSignal</span><span class="op" id="6269715">(</span><span class="ident" id="6269716">sig</span>&nbsp;<span class="builtintype" id="6269720">int</span><span class="op" id="6269723">)</span>&nbsp;<span class="op" id="6269725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6269728">signal_disable</span><span class="op" id="6269742">(</span><span class="builtintype" id="6269743">uint32</span><span class="op" id="6269749">(</span><span class="ident" id="6269750">sig</span><span class="op" id="6269753">)</span><span class="op" id="6269754">)</span><br>
<span class="lineno"></span><span class="op" id="6269756">}</span>
</div>
</body>
</html>
