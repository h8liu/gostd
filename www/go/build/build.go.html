<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6425785">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6425841">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6425895">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6425946">package</span>&nbsp;<span class="ident" id="6425954">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6425961">import</span>&nbsp;<span class="op" id="6425968">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6425971">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6425980">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6425990">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6425997">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426007">&#34;go/doc&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426017">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426030">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426042">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426048">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426061">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426068">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426074">pathpkg</span>&nbsp;<span class="string" id="6426082">&#34;path&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426090">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426107">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426118">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426126">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426137">&#34;strings&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426148">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6426159">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6426174">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6426177">//&nbsp;A&nbsp;Context&nbsp;specifies&nbsp;the&nbsp;supporting&nbsp;context&nbsp;for&nbsp;a&nbsp;build.</span><br>
<span class="lineno">30</span><span class="keyword" id="6426236">type</span>&nbsp;<span class="ident" id="6426241">Context</span>&nbsp;<span class="keyword" id="6426249">struct</span>&nbsp;<span class="op" id="6426256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426259">GOARCH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6426271">string</span>&nbsp;<span class="comment" id="6426278">//&nbsp;target&nbsp;architecture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426302">GOOS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6426314">string</span>&nbsp;<span class="comment" id="6426321">//&nbsp;target&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426349">GOROOT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6426361">string</span>&nbsp;<span class="comment" id="6426368">//&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426380">GOPATH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6426392">string</span>&nbsp;<span class="comment" id="6426399">//&nbsp;Go&nbsp;path</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426411">CgoEnabled</span>&nbsp;&nbsp;<span class="builtintype" id="6426423">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6426430">//&nbsp;whether&nbsp;cgo&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426458">UseAllFiles</span>&nbsp;<span class="builtintype" id="6426470">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6426477">//&nbsp;use&nbsp;files&nbsp;regardless&nbsp;of&nbsp;+build&nbsp;lines,&nbsp;file&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6426530">Compiler</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6426542">string</span>&nbsp;<span class="comment" id="6426549">//&nbsp;compiler&nbsp;to&nbsp;assume&nbsp;when&nbsp;computing&nbsp;target&nbsp;paths</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426601">//&nbsp;The&nbsp;build&nbsp;and&nbsp;release&nbsp;tags&nbsp;specify&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426658">//&nbsp;that&nbsp;should&nbsp;be&nbsp;considered&nbsp;satisfied&nbsp;when&nbsp;processing&nbsp;+build&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426728">//&nbsp;Clients&nbsp;creating&nbsp;a&nbsp;new&nbsp;context&nbsp;may&nbsp;customize&nbsp;BuildTags,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426794">//&nbsp;defaults&nbsp;to&nbsp;empty,&nbsp;but&nbsp;it&nbsp;is&nbsp;usually&nbsp;an&nbsp;error&nbsp;to&nbsp;customize&nbsp;ReleaseTags,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426870">//&nbsp;which&nbsp;defaults&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;releases&nbsp;the&nbsp;current&nbsp;release&nbsp;is&nbsp;compatible&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6426956">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;BuildTags&nbsp;and&nbsp;ReleaseTags,&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427024">//&nbsp;consider&nbsp;the&nbsp;values&nbsp;of&nbsp;GOARCH&nbsp;and&nbsp;GOOS&nbsp;as&nbsp;satisfied&nbsp;tags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427086">BuildTags</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6427098">[</span><span class="op" id="6427099">]</span><span class="builtintype" id="6427100">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427108">ReleaseTags</span>&nbsp;<span class="op" id="6427120">[</span><span class="op" id="6427121">]</span><span class="builtintype" id="6427122">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427131">//&nbsp;The&nbsp;install&nbsp;suffix&nbsp;specifies&nbsp;a&nbsp;suffix&nbsp;to&nbsp;use&nbsp;in&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;installation</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427212">//&nbsp;directory.&nbsp;By&nbsp;default&nbsp;it&nbsp;is&nbsp;empty,&nbsp;but&nbsp;custom&nbsp;builds&nbsp;that&nbsp;need&nbsp;to&nbsp;keep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427287">//&nbsp;their&nbsp;outputs&nbsp;separate&nbsp;can&nbsp;set&nbsp;InstallSuffix&nbsp;to&nbsp;do&nbsp;so.&nbsp;For&nbsp;example,&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427364">//&nbsp;using&nbsp;the&nbsp;race&nbsp;detector,&nbsp;the&nbsp;go&nbsp;command&nbsp;uses&nbsp;InstallSuffix&nbsp;=&nbsp;&#34;race&#34;,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427440">//&nbsp;that&nbsp;on&nbsp;a&nbsp;Linux/386&nbsp;system,&nbsp;packages&nbsp;are&nbsp;written&nbsp;to&nbsp;a&nbsp;directory&nbsp;named</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427514">//&nbsp;&#34;linux_386_race&#34;&nbsp;instead&nbsp;of&nbsp;the&nbsp;usual&nbsp;&#34;linux_386&#34;.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6427569">InstallSuffix</span>&nbsp;<span class="builtintype" id="6427583">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427592">//&nbsp;By&nbsp;default,&nbsp;Import&nbsp;uses&nbsp;the&nbsp;operating&nbsp;system&#39;s&nbsp;file&nbsp;system&nbsp;calls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427661">//&nbsp;to&nbsp;read&nbsp;directories&nbsp;and&nbsp;files.&nbsp;&nbsp;To&nbsp;read&nbsp;from&nbsp;other&nbsp;sources,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427725">//&nbsp;callers&nbsp;can&nbsp;set&nbsp;the&nbsp;following&nbsp;functions.&nbsp;&nbsp;They&nbsp;all&nbsp;have&nbsp;default</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427793">//&nbsp;behaviors&nbsp;that&nbsp;use&nbsp;the&nbsp;local&nbsp;file&nbsp;system,&nbsp;so&nbsp;clients&nbsp;need&nbsp;only&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427864">//&nbsp;the&nbsp;functions&nbsp;whose&nbsp;behaviors&nbsp;they&nbsp;wish&nbsp;to&nbsp;change.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427920">//&nbsp;JoinPath&nbsp;joins&nbsp;the&nbsp;sequence&nbsp;of&nbsp;path&nbsp;fragments&nbsp;into&nbsp;a&nbsp;single&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6427990">//&nbsp;If&nbsp;JoinPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.Join.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428041">JoinPath</span>&nbsp;<span class="keyword" id="6428050">func</span><span class="op" id="6428054">(</span><span class="ident" id="6428055">elem</span>&nbsp;<span class="op" id="6428060">...</span><span class="builtintype" id="6428063">string</span><span class="op" id="6428069">)</span>&nbsp;<span class="builtintype" id="6428071">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428080">//&nbsp;SplitPathList&nbsp;splits&nbsp;the&nbsp;path&nbsp;list&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;individual&nbsp;paths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428153">//&nbsp;If&nbsp;SplitPathList&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428214">SplitPathList</span>&nbsp;<span class="keyword" id="6428228">func</span><span class="op" id="6428232">(</span><span class="ident" id="6428233">list</span>&nbsp;<span class="builtintype" id="6428238">string</span><span class="op" id="6428244">)</span>&nbsp;<span class="op" id="6428246">[</span><span class="op" id="6428247">]</span><span class="builtintype" id="6428248">string</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428257">//&nbsp;IsAbsPath&nbsp;reports&nbsp;whether&nbsp;path&nbsp;is&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428313">//&nbsp;If&nbsp;IsAbsPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428366">IsAbsPath</span>&nbsp;<span class="keyword" id="6428376">func</span><span class="op" id="6428380">(</span><span class="ident" id="6428381">path</span>&nbsp;<span class="builtintype" id="6428386">string</span><span class="op" id="6428392">)</span>&nbsp;<span class="builtintype" id="6428394">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428401">//&nbsp;IsDir&nbsp;reports&nbsp;whether&nbsp;the&nbsp;path&nbsp;names&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428455">//&nbsp;If&nbsp;IsDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;calls&nbsp;os.Stat&nbsp;and&nbsp;uses&nbsp;the&nbsp;result&#39;s&nbsp;IsDir&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428533">IsDir</span>&nbsp;<span class="keyword" id="6428539">func</span><span class="op" id="6428543">(</span><span class="ident" id="6428544">path</span>&nbsp;<span class="builtintype" id="6428549">string</span><span class="op" id="6428555">)</span>&nbsp;<span class="builtintype" id="6428557">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428564">//&nbsp;HasSubdir&nbsp;reports&nbsp;whether&nbsp;dir&nbsp;is&nbsp;a&nbsp;subdirectory&nbsp;of</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428619">//&nbsp;(perhaps&nbsp;multiple&nbsp;levels&nbsp;below)&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428661">//&nbsp;If&nbsp;so,&nbsp;HasSubdir&nbsp;sets&nbsp;rel&nbsp;to&nbsp;a&nbsp;slash-separated&nbsp;path&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428722">//&nbsp;can&nbsp;be&nbsp;joined&nbsp;to&nbsp;root&nbsp;to&nbsp;produce&nbsp;a&nbsp;path&nbsp;equivalent&nbsp;to&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428785">//&nbsp;If&nbsp;HasSubdir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;an&nbsp;implementation&nbsp;built&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428849">//&nbsp;filepath.EvalSymlinks.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6428876">HasSubdir</span>&nbsp;<span class="keyword" id="6428886">func</span><span class="op" id="6428890">(</span><span class="ident" id="6428891">root</span><span class="op" id="6428895">,</span>&nbsp;<span class="ident" id="6428897">dir</span>&nbsp;<span class="builtintype" id="6428901">string</span><span class="op" id="6428907">)</span>&nbsp;<span class="op" id="6428909">(</span><span class="ident" id="6428910">rel</span>&nbsp;<span class="builtintype" id="6428914">string</span><span class="op" id="6428920">,</span>&nbsp;<span class="ident" id="6428922">ok</span>&nbsp;<span class="builtintype" id="6428925">bool</span><span class="op" id="6428929">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428933">//&nbsp;ReadDir&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;os.FileInfo,&nbsp;sorted&nbsp;by&nbsp;Name,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6428993">//&nbsp;describing&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429044">//&nbsp;If&nbsp;ReadDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429095">ReadDir</span>&nbsp;<span class="keyword" id="6429103">func</span><span class="op" id="6429107">(</span><span class="ident" id="6429108">dir</span>&nbsp;<span class="builtintype" id="6429112">string</span><span class="op" id="6429118">)</span>&nbsp;<span class="op" id="6429120">(</span><span class="ident" id="6429121">fi</span>&nbsp;<span class="op" id="6429124">[</span><span class="op" id="6429125">]</span><span class="ident" id="6429126"><a href="/go/build/build.go.html#6426068">os</a></span><span class="op" id="6429128">.</span><span class="ident" id="6429129">FileInfo</span><span class="op" id="6429137">,</span>&nbsp;<span class="ident" id="6429139">err</span>&nbsp;<span class="builtintype" id="6429143">error</span><span class="op" id="6429148">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429152">//&nbsp;OpenFile&nbsp;opens&nbsp;a&nbsp;file&nbsp;(not&nbsp;a&nbsp;directory)&nbsp;for&nbsp;reading.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6429209">//&nbsp;If&nbsp;OpenFile&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;os.Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429254">OpenFile</span>&nbsp;<span class="keyword" id="6429263">func</span><span class="op" id="6429267">(</span><span class="ident" id="6429268">path</span>&nbsp;<span class="builtintype" id="6429273">string</span><span class="op" id="6429279">)</span>&nbsp;<span class="op" id="6429281">(</span><span class="ident" id="6429282">r</span>&nbsp;<span class="ident" id="6429284"><a href="/go/build/build.go.html#6426042">io</a></span><span class="op" id="6429286">.</span><span class="ident" id="6429287">ReadCloser</span><span class="op" id="6429297">,</span>&nbsp;<span class="ident" id="6429299">err</span>&nbsp;<span class="builtintype" id="6429303">error</span><span class="op" id="6429308">)</span><br>
<span class="lineno">95</span><span class="op" id="6429310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6429313">//&nbsp;joinPath&nbsp;calls&nbsp;ctxt.JoinPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.Join.</span><br>
<span class="lineno"></span><span class="keyword" id="6429381">func</span>&nbsp;<span class="op" id="6429386">(</span><span class="ident" id="6429387">ctxt</span>&nbsp;<span class="op" id="6429392">*</span><span class="ident" id="6429393"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6429400">)</span>&nbsp;<span class="ident" id="6429402">joinPath</span><span class="op" id="6429410">(</span><span class="ident" id="6429411">elem</span>&nbsp;<span class="op" id="6429416">...</span><span class="builtintype" id="6429419">string</span><span class="op" id="6429425">)</span>&nbsp;<span class="builtintype" id="6429427">string</span>&nbsp;<span class="op" id="6429434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429437">if</span>&nbsp;<span class="ident" id="6429440">f</span>&nbsp;<span class="op" id="6429442">:=</span>&nbsp;<span class="ident" id="6429445"><a href="/go/build/build.go.html#6429387">ctxt</a></span><span class="op" id="6429449">.</span><span class="ident" id="6429450">JoinPath</span><span class="op" id="6429458">;</span>&nbsp;<span class="ident" id="6429460"><a href="/go/build/build.go.html#6429440">f</a></span>&nbsp;<span class="op" id="6429462">!=</span>&nbsp;<span class="ident" id="6429465">nil</span>&nbsp;<span class="op" id="6429469">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429473">return</span>&nbsp;<span class="ident" id="6429480"><a href="/go/build/build.go.html#6429440">f</a></span><span class="op" id="6429481">(</span><span class="ident" id="6429482"><a href="/go/build/build.go.html#6429411">elem</a></span><span class="op" id="6429486">...</span><span class="op" id="6429489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6429492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429495">return</span>&nbsp;<span class="ident" id="6429502"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6429510">.</span><span class="ident" id="6429511">Join</span><span class="op" id="6429515">(</span><span class="ident" id="6429516"><a href="/go/build/build.go.html#6429411">elem</a></span><span class="op" id="6429520">...</span><span class="op" id="6429523">)</span><br>
<span class="lineno"></span><span class="op" id="6429525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="6429528">//&nbsp;splitPathList&nbsp;calls&nbsp;ctxt.SplitPathList&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span><span class="keyword" id="6429611">func</span>&nbsp;<span class="op" id="6429616">(</span><span class="ident" id="6429617">ctxt</span>&nbsp;<span class="op" id="6429622">*</span><span class="ident" id="6429623"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6429630">)</span>&nbsp;<span class="ident" id="6429632">splitPathList</span><span class="op" id="6429645">(</span><span class="ident" id="6429646">s</span>&nbsp;<span class="builtintype" id="6429648">string</span><span class="op" id="6429654">)</span>&nbsp;<span class="op" id="6429656">[</span><span class="op" id="6429657">]</span><span class="builtintype" id="6429658">string</span>&nbsp;<span class="op" id="6429665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429668">if</span>&nbsp;<span class="ident" id="6429671">f</span>&nbsp;<span class="op" id="6429673">:=</span>&nbsp;<span class="ident" id="6429676"><a href="/go/build/build.go.html#6429617">ctxt</a></span><span class="op" id="6429680">.</span><span class="ident" id="6429681">SplitPathList</span><span class="op" id="6429694">;</span>&nbsp;<span class="ident" id="6429696"><a href="/go/build/build.go.html#6429671">f</a></span>&nbsp;<span class="op" id="6429698">!=</span>&nbsp;<span class="ident" id="6429701">nil</span>&nbsp;<span class="op" id="6429705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429709">return</span>&nbsp;<span class="ident" id="6429716"><a href="/go/build/build.go.html#6429671">f</a></span><span class="op" id="6429717">(</span><span class="ident" id="6429718"><a href="/go/build/build.go.html#6429646">s</a></span><span class="op" id="6429719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6429722">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429725">return</span>&nbsp;<span class="ident" id="6429732"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6429740">.</span><span class="ident" id="6429741">SplitList</span><span class="op" id="6429750">(</span><span class="ident" id="6429751"><a href="/go/build/build.go.html#6429646">s</a></span><span class="op" id="6429752">)</span><br>
<span class="lineno"></span><span class="op" id="6429754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6429757">//&nbsp;isAbsPath&nbsp;calls&nbsp;ctxt.IsAbsSPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span><span class="keyword" id="6429829">func</span>&nbsp;<span class="op" id="6429834">(</span><span class="ident" id="6429835">ctxt</span>&nbsp;<span class="op" id="6429840">*</span><span class="ident" id="6429841"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6429848">)</span>&nbsp;<span class="ident" id="6429850">isAbsPath</span><span class="op" id="6429859">(</span><span class="ident" id="6429860">path</span>&nbsp;<span class="builtintype" id="6429865">string</span><span class="op" id="6429871">)</span>&nbsp;<span class="builtintype" id="6429873">bool</span>&nbsp;<span class="op" id="6429878">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429881">if</span>&nbsp;<span class="ident" id="6429884">f</span>&nbsp;<span class="op" id="6429886">:=</span>&nbsp;<span class="ident" id="6429889"><a href="/go/build/build.go.html#6429835">ctxt</a></span><span class="op" id="6429893">.</span><span class="ident" id="6429894">IsAbsPath</span><span class="op" id="6429903">;</span>&nbsp;<span class="ident" id="6429905"><a href="/go/build/build.go.html#6429884">f</a></span>&nbsp;<span class="op" id="6429907">!=</span>&nbsp;<span class="ident" id="6429910">nil</span>&nbsp;<span class="op" id="6429914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429918">return</span>&nbsp;<span class="ident" id="6429925"><a href="/go/build/build.go.html#6429884">f</a></span><span class="op" id="6429926">(</span><span class="ident" id="6429927"><a href="/go/build/build.go.html#6429860">path</a></span><span class="op" id="6429931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6429934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429937">return</span>&nbsp;<span class="ident" id="6429944"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6429952">.</span><span class="ident" id="6429953">IsAbs</span><span class="op" id="6429958">(</span><span class="ident" id="6429959"><a href="/go/build/build.go.html#6429860">path</a></span><span class="op" id="6429963">)</span><br>
<span class="lineno"></span><span class="op" id="6429965">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="6429968">//&nbsp;isDir&nbsp;calls&nbsp;ctxt.IsDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses&nbsp;os.Stat.</span><br>
<span class="lineno"></span><span class="keyword" id="6430029">func</span>&nbsp;<span class="op" id="6430034">(</span><span class="ident" id="6430035">ctxt</span>&nbsp;<span class="op" id="6430040">*</span><span class="ident" id="6430041"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6430048">)</span>&nbsp;<span class="ident" id="6430050">isDir</span><span class="op" id="6430055">(</span><span class="ident" id="6430056">path</span>&nbsp;<span class="builtintype" id="6430061">string</span><span class="op" id="6430067">)</span>&nbsp;<span class="builtintype" id="6430069">bool</span>&nbsp;<span class="op" id="6430074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430077">if</span>&nbsp;<span class="ident" id="6430080">f</span>&nbsp;<span class="op" id="6430082">:=</span>&nbsp;<span class="ident" id="6430085"><a href="/go/build/build.go.html#6430035">ctxt</a></span><span class="op" id="6430089">.</span><span class="ident" id="6430090">IsDir</span><span class="op" id="6430095">;</span>&nbsp;<span class="ident" id="6430097"><a href="/go/build/build.go.html#6430080">f</a></span>&nbsp;<span class="op" id="6430099">!=</span>&nbsp;<span class="ident" id="6430102">nil</span>&nbsp;<span class="op" id="6430106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430110">return</span>&nbsp;<span class="ident" id="6430117"><a href="/go/build/build.go.html#6430080">f</a></span><span class="op" id="6430118">(</span><span class="ident" id="6430119"><a href="/go/build/build.go.html#6430056">path</a></span><span class="op" id="6430123">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430129">fi</span><span class="op" id="6430131">,</span>&nbsp;<span class="ident" id="6430133">err</span>&nbsp;<span class="op" id="6430137">:=</span>&nbsp;<span class="ident" id="6430140"><a href="/go/build/build.go.html#6426068">os</a></span><span class="op" id="6430142">.</span><span class="ident" id="6430143">Stat</span><span class="op" id="6430147">(</span><span class="ident" id="6430148"><a href="/go/build/build.go.html#6430056">path</a></span><span class="op" id="6430152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430155">return</span>&nbsp;<span class="ident" id="6430162"><a href="/go/build/build.go.html#6430133">err</a></span>&nbsp;<span class="op" id="6430166">==</span>&nbsp;<span class="ident" id="6430169">nil</span>&nbsp;<span class="op" id="6430173">&amp;&amp;</span>&nbsp;<span class="ident" id="6430176"><a href="/go/build/build.go.html#6430129">fi</a></span><span class="op" id="6430178">.</span><span class="ident" id="6430179">IsDir</span><span class="op" id="6430184">(</span><span class="op" id="6430185">)</span><br>
<span class="lineno"></span><span class="op" id="6430187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="6430190">//&nbsp;hasSubdir&nbsp;calls&nbsp;ctxt.HasSubdir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses</span><br>
<span class="lineno"></span><span class="comment" id="6430250">//&nbsp;the&nbsp;local&nbsp;file&nbsp;system&nbsp;to&nbsp;answer&nbsp;the&nbsp;question.</span><br>
<span class="lineno"></span><span class="keyword" id="6430299">func</span>&nbsp;<span class="op" id="6430304">(</span><span class="ident" id="6430305">ctxt</span>&nbsp;<span class="op" id="6430310">*</span><span class="ident" id="6430311"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6430318">)</span>&nbsp;<span class="ident" id="6430320">hasSubdir</span><span class="op" id="6430329">(</span><span class="ident" id="6430330">root</span><span class="op" id="6430334">,</span>&nbsp;<span class="ident" id="6430336">dir</span>&nbsp;<span class="builtintype" id="6430340">string</span><span class="op" id="6430346">)</span>&nbsp;<span class="op" id="6430348">(</span><span class="ident" id="6430349">rel</span>&nbsp;<span class="builtintype" id="6430353">string</span><span class="op" id="6430359">,</span>&nbsp;<span class="ident" id="6430361">ok</span>&nbsp;<span class="builtintype" id="6430364">bool</span><span class="op" id="6430368">)</span>&nbsp;<span class="op" id="6430370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430373">if</span>&nbsp;<span class="ident" id="6430376">f</span>&nbsp;<span class="op" id="6430378">:=</span>&nbsp;<span class="ident" id="6430381"><a href="/go/build/build.go.html#6430305">ctxt</a></span><span class="op" id="6430385">.</span><span class="ident" id="6430386">HasSubdir</span><span class="op" id="6430395">;</span>&nbsp;<span class="ident" id="6430397"><a href="/go/build/build.go.html#6430376">f</a></span>&nbsp;<span class="op" id="6430399">!=</span>&nbsp;<span class="ident" id="6430402">nil</span>&nbsp;<span class="op" id="6430406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430410">return</span>&nbsp;<span class="ident" id="6430417"><a href="/go/build/build.go.html#6430376">f</a></span><span class="op" id="6430418">(</span><span class="ident" id="6430419"><a href="/go/build/build.go.html#6430330">root</a></span><span class="op" id="6430423">,</span>&nbsp;<span class="ident" id="6430425"><a href="/go/build/build.go.html#6430336">dir</a></span><span class="op" id="6430428">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430435">//&nbsp;Try&nbsp;using&nbsp;paths&nbsp;we&nbsp;received.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430468">if</span>&nbsp;<span class="ident" id="6430471"><a href="/go/build/build.go.html#6430349">rel</a></span><span class="op" id="6430474">,</span>&nbsp;<span class="ident" id="6430476"><a href="/go/build/build.go.html#6430361">ok</a></span>&nbsp;<span class="op" id="6430479">=</span>&nbsp;<span class="ident" id="6430481"><a href="/go/build/build.go.html#6430869">hasSubdir</a></span><span class="op" id="6430490">(</span><span class="ident" id="6430491"><a href="/go/build/build.go.html#6430330">root</a></span><span class="op" id="6430495">,</span>&nbsp;<span class="ident" id="6430497"><a href="/go/build/build.go.html#6430336">dir</a></span><span class="op" id="6430500">)</span><span class="op" id="6430501">;</span>&nbsp;<span class="ident" id="6430503"><a href="/go/build/build.go.html#6430361">ok</a></span>&nbsp;<span class="op" id="6430506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430510">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430522">//&nbsp;Try&nbsp;expanding&nbsp;symlinks&nbsp;and&nbsp;comparing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430563">//&nbsp;expanded&nbsp;against&nbsp;unexpanded&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430599">//&nbsp;expanded&nbsp;against&nbsp;expanded.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430630">rootSym</span><span class="op" id="6430637">,</span>&nbsp;<span class="ident" id="6430639">_</span>&nbsp;<span class="op" id="6430641">:=</span>&nbsp;<span class="ident" id="6430644"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6430652">.</span><span class="ident" id="6430653">EvalSymlinks</span><span class="op" id="6430665">(</span><span class="ident" id="6430666"><a href="/go/build/build.go.html#6430330">root</a></span><span class="op" id="6430670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430673">dirSym</span><span class="op" id="6430679">,</span>&nbsp;<span class="ident" id="6430681">_</span>&nbsp;<span class="op" id="6430683">:=</span>&nbsp;<span class="ident" id="6430686"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6430694">.</span><span class="ident" id="6430695">EvalSymlinks</span><span class="op" id="6430707">(</span><span class="ident" id="6430708"><a href="/go/build/build.go.html#6430336">dir</a></span><span class="op" id="6430711">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430715">if</span>&nbsp;<span class="ident" id="6430718"><a href="/go/build/build.go.html#6430349">rel</a></span><span class="op" id="6430721">,</span>&nbsp;<span class="ident" id="6430723"><a href="/go/build/build.go.html#6430361">ok</a></span>&nbsp;<span class="op" id="6430726">=</span>&nbsp;<span class="ident" id="6430728"><a href="/go/build/build.go.html#6430869">hasSubdir</a></span><span class="op" id="6430737">(</span><span class="ident" id="6430738"><a href="/go/build/build.go.html#6430630">rootSym</a></span><span class="op" id="6430745">,</span>&nbsp;<span class="ident" id="6430747"><a href="/go/build/build.go.html#6430336">dir</a></span><span class="op" id="6430750">)</span><span class="op" id="6430751">;</span>&nbsp;<span class="ident" id="6430753"><a href="/go/build/build.go.html#6430361">ok</a></span>&nbsp;<span class="op" id="6430756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430760">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430771">if</span>&nbsp;<span class="ident" id="6430774"><a href="/go/build/build.go.html#6430349">rel</a></span><span class="op" id="6430777">,</span>&nbsp;<span class="ident" id="6430779"><a href="/go/build/build.go.html#6430361">ok</a></span>&nbsp;<span class="op" id="6430782">=</span>&nbsp;<span class="ident" id="6430784"><a href="/go/build/build.go.html#6430869">hasSubdir</a></span><span class="op" id="6430793">(</span><span class="ident" id="6430794"><a href="/go/build/build.go.html#6430330">root</a></span><span class="op" id="6430798">,</span>&nbsp;<span class="ident" id="6430800"><a href="/go/build/build.go.html#6430673">dirSym</a></span><span class="op" id="6430806">)</span><span class="op" id="6430807">;</span>&nbsp;<span class="ident" id="6430809"><a href="/go/build/build.go.html#6430361">ok</a></span>&nbsp;<span class="op" id="6430812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430816">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430827">return</span>&nbsp;<span class="ident" id="6430834"><a href="/go/build/build.go.html#6430869">hasSubdir</a></span><span class="op" id="6430843">(</span><span class="ident" id="6430844"><a href="/go/build/build.go.html#6430630">rootSym</a></span><span class="op" id="6430851">,</span>&nbsp;<span class="ident" id="6430853"><a href="/go/build/build.go.html#6430673">dirSym</a></span><span class="op" id="6430859">)</span><br>
<span class="lineno">155</span><span class="op" id="6430861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6430864">func</span>&nbsp;<span class="ident" id="6430869">hasSubdir</span><span class="op" id="6430878">(</span><span class="ident" id="6430879">root</span><span class="op" id="6430883">,</span>&nbsp;<span class="ident" id="6430885">dir</span>&nbsp;<span class="builtintype" id="6430889">string</span><span class="op" id="6430895">)</span>&nbsp;<span class="op" id="6430897">(</span><span class="ident" id="6430898">rel</span>&nbsp;<span class="builtintype" id="6430902">string</span><span class="op" id="6430908">,</span>&nbsp;<span class="ident" id="6430910">ok</span>&nbsp;<span class="builtintype" id="6430913">bool</span><span class="op" id="6430917">)</span>&nbsp;<span class="op" id="6430919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430922">const</span>&nbsp;<span class="ident" id="6430928">sep</span>&nbsp;<span class="op" id="6430932">=</span>&nbsp;<span class="builtintype" id="6430934">string</span><span class="op" id="6430940">(</span><span class="ident" id="6430941"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6430949">.</span><span class="ident" id="6430950">Separator</span><span class="op" id="6430959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430962"><a href="/go/build/build.go.html#6430879">root</a></span>&nbsp;<span class="op" id="6430967">=</span>&nbsp;<span class="ident" id="6430969"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6430977">.</span><span class="ident" id="6430978">Clean</span><span class="op" id="6430983">(</span><span class="ident" id="6430984"><a href="/go/build/build.go.html#6430879">root</a></span><span class="op" id="6430988">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430991">if</span>&nbsp;<span class="op" id="6430994">!</span><span class="ident" id="6430995"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6431002">.</span><span class="ident" id="6431003">HasSuffix</span><span class="op" id="6431012">(</span><span class="ident" id="6431013"><a href="/go/build/build.go.html#6430879">root</a></span><span class="op" id="6431017">,</span>&nbsp;<span class="ident" id="6431019"><a href="/go/build/build.go.html#6430928">sep</a></span><span class="op" id="6431022">)</span>&nbsp;<span class="op" id="6431024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431028"><a href="/go/build/build.go.html#6430879">root</a></span>&nbsp;<span class="op" id="6431033">+=</span>&nbsp;<span class="ident" id="6431036"><a href="/go/build/build.go.html#6430928">sep</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431044"><a href="/go/build/build.go.html#6430885">dir</a></span>&nbsp;<span class="op" id="6431048">=</span>&nbsp;<span class="ident" id="6431050"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6431058">.</span><span class="ident" id="6431059">Clean</span><span class="op" id="6431064">(</span><span class="ident" id="6431065"><a href="/go/build/build.go.html#6430885">dir</a></span><span class="op" id="6431068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431071">if</span>&nbsp;<span class="op" id="6431074">!</span><span class="ident" id="6431075"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6431082">.</span><span class="ident" id="6431083">HasPrefix</span><span class="op" id="6431092">(</span><span class="ident" id="6431093"><a href="/go/build/build.go.html#6430885">dir</a></span><span class="op" id="6431096">,</span>&nbsp;<span class="ident" id="6431098"><a href="/go/build/build.go.html#6430879">root</a></span><span class="op" id="6431102">)</span>&nbsp;<span class="op" id="6431104">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431108">return</span>&nbsp;<span class="string" id="6431115">&#34;&#34;</span><span class="op" id="6431117">,</span>&nbsp;<span class="builtintype" id="6431119">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431129">return</span>&nbsp;<span class="ident" id="6431136"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6431144">.</span><span class="ident" id="6431145">ToSlash</span><span class="op" id="6431152">(</span><span class="ident" id="6431153"><a href="/go/build/build.go.html#6430885">dir</a></span><span class="op" id="6431156">[</span><span class="builtinfunc" id="6431157">len</span><span class="op" id="6431160">(</span><span class="ident" id="6431161"><a href="/go/build/build.go.html#6430879">root</a></span><span class="op" id="6431165">)</span><span class="op" id="6431166">:</span><span class="op" id="6431167">]</span><span class="op" id="6431168">)</span><span class="op" id="6431169">,</span>&nbsp;<span class="builtintype" id="6431171">true</span><br>
<span class="lineno"></span><span class="op" id="6431176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="6431179">//&nbsp;readDir&nbsp;calls&nbsp;ctxt.ReadDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno"></span><span class="keyword" id="6431246">func</span>&nbsp;<span class="op" id="6431251">(</span><span class="ident" id="6431252">ctxt</span>&nbsp;<span class="op" id="6431257">*</span><span class="ident" id="6431258"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6431265">)</span>&nbsp;<span class="ident" id="6431267">readDir</span><span class="op" id="6431274">(</span><span class="ident" id="6431275">path</span>&nbsp;<span class="builtintype" id="6431280">string</span><span class="op" id="6431286">)</span>&nbsp;<span class="op" id="6431288">(</span><span class="op" id="6431289">[</span><span class="op" id="6431290">]</span><span class="ident" id="6431291"><a href="/go/build/build.go.html#6426068">os</a></span><span class="op" id="6431293">.</span><span class="ident" id="6431294">FileInfo</span><span class="op" id="6431302">,</span>&nbsp;<span class="builtintype" id="6431304">error</span><span class="op" id="6431309">)</span>&nbsp;<span class="op" id="6431311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431314">if</span>&nbsp;<span class="ident" id="6431317">f</span>&nbsp;<span class="op" id="6431319">:=</span>&nbsp;<span class="ident" id="6431322"><a href="/go/build/build.go.html#6431252">ctxt</a></span><span class="op" id="6431326">.</span><span class="ident" id="6431327">ReadDir</span><span class="op" id="6431334">;</span>&nbsp;<span class="ident" id="6431336"><a href="/go/build/build.go.html#6431317">f</a></span>&nbsp;<span class="op" id="6431338">!=</span>&nbsp;<span class="ident" id="6431341">nil</span>&nbsp;<span class="op" id="6431345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431349">return</span>&nbsp;<span class="ident" id="6431356"><a href="/go/build/build.go.html#6431317">f</a></span><span class="op" id="6431357">(</span><span class="ident" id="6431358"><a href="/go/build/build.go.html#6431275">path</a></span><span class="op" id="6431362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431365">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431368">return</span>&nbsp;<span class="ident" id="6431375"><a href="/go/build/build.go.html#6426048">ioutil</a></span><span class="op" id="6431381">.</span><span class="ident" id="6431382">ReadDir</span><span class="op" id="6431389">(</span><span class="ident" id="6431390"><a href="/go/build/build.go.html#6431275">path</a></span><span class="op" id="6431394">)</span><br>
<span class="lineno"></span><span class="op" id="6431396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6431399">//&nbsp;openFile&nbsp;calls&nbsp;ctxt.OpenFile&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;os.Open.</span><br>
<span class="lineno"></span><span class="keyword" id="6431461">func</span>&nbsp;<span class="op" id="6431466">(</span><span class="ident" id="6431467">ctxt</span>&nbsp;<span class="op" id="6431472">*</span><span class="ident" id="6431473"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6431480">)</span>&nbsp;<span class="ident" id="6431482">openFile</span><span class="op" id="6431490">(</span><span class="ident" id="6431491">path</span>&nbsp;<span class="builtintype" id="6431496">string</span><span class="op" id="6431502">)</span>&nbsp;<span class="op" id="6431504">(</span><span class="ident" id="6431505"><a href="/go/build/build.go.html#6426042">io</a></span><span class="op" id="6431507">.</span><span class="ident" id="6431508">ReadCloser</span><span class="op" id="6431518">,</span>&nbsp;<span class="builtintype" id="6431520">error</span><span class="op" id="6431525">)</span>&nbsp;<span class="op" id="6431527">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431530">if</span>&nbsp;<span class="ident" id="6431533">fn</span>&nbsp;<span class="op" id="6431536">:=</span>&nbsp;<span class="ident" id="6431539"><a href="/go/build/build.go.html#6431467">ctxt</a></span><span class="op" id="6431543">.</span><span class="ident" id="6431544">OpenFile</span><span class="op" id="6431552">;</span>&nbsp;<span class="ident" id="6431554"><a href="/go/build/build.go.html#6431533">fn</a></span>&nbsp;<span class="op" id="6431557">!=</span>&nbsp;<span class="ident" id="6431560">nil</span>&nbsp;<span class="op" id="6431564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431568">return</span>&nbsp;<span class="ident" id="6431575"><a href="/go/build/build.go.html#6431533">fn</a></span><span class="op" id="6431577">(</span><span class="ident" id="6431578"><a href="/go/build/build.go.html#6431491">path</a></span><span class="op" id="6431582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431589">f</span><span class="op" id="6431590">,</span>&nbsp;<span class="ident" id="6431592">err</span>&nbsp;<span class="op" id="6431596">:=</span>&nbsp;<span class="ident" id="6431599"><a href="/go/build/build.go.html#6426068">os</a></span><span class="op" id="6431601">.</span><span class="ident" id="6431602">Open</span><span class="op" id="6431606">(</span><span class="ident" id="6431607"><a href="/go/build/build.go.html#6431491">path</a></span><span class="op" id="6431611">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431614">if</span>&nbsp;<span class="ident" id="6431617"><a href="/go/build/build.go.html#6431592">err</a></span>&nbsp;<span class="op" id="6431621">!=</span>&nbsp;<span class="ident" id="6431624">nil</span>&nbsp;<span class="op" id="6431628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431632">return</span>&nbsp;<span class="ident" id="6431639">nil</span><span class="op" id="6431642">,</span>&nbsp;<span class="ident" id="6431644"><a href="/go/build/build.go.html#6431592">err</a></span>&nbsp;<span class="comment" id="6431648">//&nbsp;nil&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431669">return</span>&nbsp;<span class="ident" id="6431676"><a href="/go/build/build.go.html#6431589">f</a></span><span class="op" id="6431677">,</span>&nbsp;<span class="ident" id="6431679">nil</span><br>
<span class="lineno"></span><span class="op" id="6431683">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="6431686">//&nbsp;isFile&nbsp;determines&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;file&nbsp;by&nbsp;trying&nbsp;to&nbsp;open&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6431752">//&nbsp;It&nbsp;reuses&nbsp;openFile&nbsp;instead&nbsp;of&nbsp;adding&nbsp;another&nbsp;function&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6431816">//&nbsp;list&nbsp;in&nbsp;Context.</span><br>
<span class="lineno"></span><span class="keyword" id="6431836">func</span>&nbsp;<span class="op" id="6431841">(</span><span class="ident" id="6431842">ctxt</span>&nbsp;<span class="op" id="6431847">*</span><span class="ident" id="6431848"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6431855">)</span>&nbsp;<span class="ident" id="6431857">isFile</span><span class="op" id="6431863">(</span><span class="ident" id="6431864">path</span>&nbsp;<span class="builtintype" id="6431869">string</span><span class="op" id="6431875">)</span>&nbsp;<span class="builtintype" id="6431877">bool</span>&nbsp;<span class="op" id="6431882">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431885">f</span><span class="op" id="6431886">,</span>&nbsp;<span class="ident" id="6431888">err</span>&nbsp;<span class="op" id="6431892">:=</span>&nbsp;<span class="ident" id="6431895"><a href="/go/build/build.go.html#6431842">ctxt</a></span><span class="op" id="6431899">.</span><span class="ident" id="6431900">openFile</span><span class="op" id="6431908">(</span><span class="ident" id="6431909"><a href="/go/build/build.go.html#6431864">path</a></span><span class="op" id="6431913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431916">if</span>&nbsp;<span class="ident" id="6431919"><a href="/go/build/build.go.html#6431888">err</a></span>&nbsp;<span class="op" id="6431923">!=</span>&nbsp;<span class="ident" id="6431926">nil</span>&nbsp;<span class="op" id="6431930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431934">return</span>&nbsp;<span class="builtintype" id="6431941">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431951"><a href="/go/build/build.go.html#6431885">f</a></span><span class="op" id="6431952">.</span><span class="ident" id="6431953">Close</span><span class="op" id="6431958">(</span><span class="op" id="6431959">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431962">return</span>&nbsp;<span class="builtintype" id="6431969">true</span><br>
<span class="lineno"></span><span class="op" id="6431974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6431977">//&nbsp;gopath&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;path&nbsp;directories.</span><br>
<span class="lineno"></span><span class="keyword" id="6432028">func</span>&nbsp;<span class="op" id="6432033">(</span><span class="ident" id="6432034">ctxt</span>&nbsp;<span class="op" id="6432039">*</span><span class="ident" id="6432040"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6432047">)</span>&nbsp;<span class="ident" id="6432049">gopath</span><span class="op" id="6432055">(</span><span class="op" id="6432056">)</span>&nbsp;<span class="op" id="6432058">[</span><span class="op" id="6432059">]</span><span class="builtintype" id="6432060">string</span>&nbsp;<span class="op" id="6432067">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432070">var</span>&nbsp;<span class="ident" id="6432074">all</span>&nbsp;<span class="op" id="6432078">[</span><span class="op" id="6432079">]</span><span class="builtintype" id="6432080">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432088">for</span>&nbsp;<span class="ident" id="6432092">_</span><span class="op" id="6432093">,</span>&nbsp;<span class="ident" id="6432095">p</span>&nbsp;<span class="op" id="6432097">:=</span>&nbsp;<span class="keyword" id="6432100">range</span>&nbsp;<span class="ident" id="6432106"><a href="/go/build/build.go.html#6432034">ctxt</a></span><span class="op" id="6432110">.</span><span class="ident" id="6432111">splitPathList</span><span class="op" id="6432124">(</span><span class="ident" id="6432125"><a href="/go/build/build.go.html#6432034">ctxt</a></span><span class="op" id="6432129">.</span><span class="ident" id="6432130">GOPATH</span><span class="op" id="6432136">)</span>&nbsp;<span class="op" id="6432138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432142">if</span>&nbsp;<span class="ident" id="6432145"><a href="/go/build/build.go.html#6432095">p</a></span>&nbsp;<span class="op" id="6432147">==</span>&nbsp;<span class="string" id="6432150">&#34;&#34;</span>&nbsp;<span class="op" id="6432153">||</span>&nbsp;<span class="ident" id="6432156"><a href="/go/build/build.go.html#6432095">p</a></span>&nbsp;<span class="op" id="6432158">==</span>&nbsp;<span class="ident" id="6432161"><a href="/go/build/build.go.html#6432034">ctxt</a></span><span class="op" id="6432165">.</span><span class="ident" id="6432166">GOROOT</span>&nbsp;<span class="op" id="6432173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432178">//&nbsp;Empty&nbsp;paths&nbsp;are&nbsp;uninteresting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432215">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;the&nbsp;GOROOT,&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432259">//&nbsp;People&nbsp;sometimes&nbsp;set&nbsp;GOPATH=$GOROOT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432302">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this&nbsp;common&nbsp;mistake.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432352">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6432363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6432367">if</span>&nbsp;<span class="ident" id="6432370"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6432377">.</span><span class="ident" id="6432378">HasPrefix</span><span class="op" id="6432387">(</span><span class="ident" id="6432388"><a href="/go/build/build.go.html#6432095">p</a></span><span class="op" id="6432389">,</span>&nbsp;<span class="string" id="6432391">&#34;~&#34;</span><span class="op" id="6432394">)</span>&nbsp;<span class="op" id="6432396">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432401">//&nbsp;Path&nbsp;segments&nbsp;starting&nbsp;with&nbsp;~&nbsp;on&nbsp;Unix&nbsp;are&nbsp;almost&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432463">//&nbsp;users&nbsp;who&nbsp;have&nbsp;incorrectly&nbsp;quoted&nbsp;~&nbsp;while&nbsp;setting&nbsp;GOPATH,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432527">//&nbsp;preventing&nbsp;it&nbsp;from&nbsp;expanding&nbsp;to&nbsp;$HOME.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432572">//&nbsp;The&nbsp;situation&nbsp;is&nbsp;made&nbsp;more&nbsp;confusing&nbsp;by&nbsp;the&nbsp;fact&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432632">//&nbsp;bash&nbsp;allows&nbsp;quoted&nbsp;~&nbsp;in&nbsp;$PATH&nbsp;(most&nbsp;shells&nbsp;do&nbsp;not).</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432690">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this,&nbsp;and&nbsp;do&nbsp;not&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432757">//&nbsp;It&nbsp;does&nbsp;not&nbsp;exist,&nbsp;and&nbsp;printing&nbsp;errors&nbsp;about&nbsp;it&nbsp;confuses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432820">//&nbsp;those&nbsp;users&nbsp;even&nbsp;more,&nbsp;because&nbsp;they&nbsp;think&nbsp;&#34;sure&nbsp;~&nbsp;exists!&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432886">//&nbsp;The&nbsp;go&nbsp;command&nbsp;diagnoses&nbsp;this&nbsp;situation&nbsp;and&nbsp;prints&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432945">//&nbsp;useful&nbsp;error.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6432965">//&nbsp;On&nbsp;Windows,&nbsp;~&nbsp;is&nbsp;used&nbsp;in&nbsp;short&nbsp;names,&nbsp;such&nbsp;as&nbsp;c:\progra~1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6433029">//&nbsp;for&nbsp;c:\program&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433057">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433072"><a href="/go/build/build.go.html#6432074">all</a></span>&nbsp;<span class="op" id="6433076">=</span>&nbsp;<span class="builtinfunc" id="6433078">append</span><span class="op" id="6433084">(</span><span class="ident" id="6433085"><a href="/go/build/build.go.html#6432074">all</a></span><span class="op" id="6433088">,</span>&nbsp;<span class="ident" id="6433090"><a href="/go/build/build.go.html#6432095">p</a></span><span class="op" id="6433091">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433097">return</span>&nbsp;<span class="ident" id="6433104"><a href="/go/build/build.go.html#6432074">all</a></span><br>
<span class="lineno"></span><span class="op" id="6433108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6433111">//&nbsp;SrcDirs&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;package&nbsp;source&nbsp;root&nbsp;directories.</span><br>
<span class="lineno">235</span><span class="comment" id="6433173">//&nbsp;It&nbsp;draws&nbsp;from&nbsp;the&nbsp;current&nbsp;Go&nbsp;root&nbsp;and&nbsp;Go&nbsp;path&nbsp;but&nbsp;omits&nbsp;directories</span><br>
<span class="lineno"></span><span class="comment" id="6433244">//&nbsp;that&nbsp;do&nbsp;not&nbsp;exist.</span><br>
<span class="lineno"></span><span class="keyword" id="6433266">func</span>&nbsp;<span class="op" id="6433271">(</span><span class="ident" id="6433272">ctxt</span>&nbsp;<span class="op" id="6433277">*</span><span class="ident" id="6433278"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6433285">)</span>&nbsp;<span class="ident" id="6433287">SrcDirs</span><span class="op" id="6433294">(</span><span class="op" id="6433295">)</span>&nbsp;<span class="op" id="6433297">[</span><span class="op" id="6433298">]</span><span class="builtintype" id="6433299">string</span>&nbsp;<span class="op" id="6433306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433309">var</span>&nbsp;<span class="ident" id="6433313">all</span>&nbsp;<span class="op" id="6433317">[</span><span class="op" id="6433318">]</span><span class="builtintype" id="6433319">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433327">if</span>&nbsp;<span class="ident" id="6433330"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433334">.</span><span class="ident" id="6433335">GOROOT</span>&nbsp;<span class="op" id="6433342">!=</span>&nbsp;<span class="string" id="6433345">&#34;&#34;</span>&nbsp;<span class="op" id="6433348">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433352">dir</span>&nbsp;<span class="op" id="6433356">:=</span>&nbsp;<span class="ident" id="6433359"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433363">.</span><span class="ident" id="6433364">joinPath</span><span class="op" id="6433372">(</span><span class="ident" id="6433373"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433377">.</span><span class="ident" id="6433378">GOROOT</span><span class="op" id="6433384">,</span>&nbsp;<span class="string" id="6433386">&#34;src&#34;</span><span class="op" id="6433391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433395">if</span>&nbsp;<span class="ident" id="6433398"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433402">.</span><span class="ident" id="6433403">isDir</span><span class="op" id="6433408">(</span><span class="ident" id="6433409"><a href="/go/build/build.go.html#6433352">dir</a></span><span class="op" id="6433412">)</span>&nbsp;<span class="op" id="6433414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433419"><a href="/go/build/build.go.html#6433313">all</a></span>&nbsp;<span class="op" id="6433423">=</span>&nbsp;<span class="builtinfunc" id="6433425">append</span><span class="op" id="6433431">(</span><span class="ident" id="6433432"><a href="/go/build/build.go.html#6433313">all</a></span><span class="op" id="6433435">,</span>&nbsp;<span class="ident" id="6433437"><a href="/go/build/build.go.html#6433352">dir</a></span><span class="op" id="6433440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433447">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433450">for</span>&nbsp;<span class="ident" id="6433454">_</span><span class="op" id="6433455">,</span>&nbsp;<span class="ident" id="6433457">p</span>&nbsp;<span class="op" id="6433459">:=</span>&nbsp;<span class="keyword" id="6433462">range</span>&nbsp;<span class="ident" id="6433468"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433472">.</span><span class="ident" id="6433473">gopath</span><span class="op" id="6433479">(</span><span class="op" id="6433480">)</span>&nbsp;<span class="op" id="6433482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433486">dir</span>&nbsp;<span class="op" id="6433490">:=</span>&nbsp;<span class="ident" id="6433493"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433497">.</span><span class="ident" id="6433498">joinPath</span><span class="op" id="6433506">(</span><span class="ident" id="6433507"><a href="/go/build/build.go.html#6433457">p</a></span><span class="op" id="6433508">,</span>&nbsp;<span class="string" id="6433510">&#34;src&#34;</span><span class="op" id="6433515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433519">if</span>&nbsp;<span class="ident" id="6433522"><a href="/go/build/build.go.html#6433272">ctxt</a></span><span class="op" id="6433526">.</span><span class="ident" id="6433527">isDir</span><span class="op" id="6433532">(</span><span class="ident" id="6433533"><a href="/go/build/build.go.html#6433486">dir</a></span><span class="op" id="6433536">)</span>&nbsp;<span class="op" id="6433538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6433543"><a href="/go/build/build.go.html#6433313">all</a></span>&nbsp;<span class="op" id="6433547">=</span>&nbsp;<span class="builtinfunc" id="6433549">append</span><span class="op" id="6433555">(</span><span class="ident" id="6433556"><a href="/go/build/build.go.html#6433313">all</a></span><span class="op" id="6433559">,</span>&nbsp;<span class="ident" id="6433561"><a href="/go/build/build.go.html#6433486">dir</a></span><span class="op" id="6433564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433568">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6433571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6433574">return</span>&nbsp;<span class="ident" id="6433581"><a href="/go/build/build.go.html#6433313">all</a></span><br>
<span class="lineno"></span><span class="op" id="6433585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6433588">//&nbsp;Default&nbsp;is&nbsp;the&nbsp;default&nbsp;Context&nbsp;for&nbsp;builds.</span><br>
<span class="lineno">255</span><span class="comment" id="6433634">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;GOARCH,&nbsp;GOOS,&nbsp;GOROOT,&nbsp;and&nbsp;GOPATH&nbsp;environment&nbsp;variables</span><br>
<span class="lineno"></span><span class="comment" id="6433704">//&nbsp;if&nbsp;set,&nbsp;or&nbsp;else&nbsp;the&nbsp;compiled&nbsp;code&#39;s&nbsp;GOARCH,&nbsp;GOOS,&nbsp;and&nbsp;GOROOT.</span><br>
<span class="lineno"></span><span class="keyword" id="6433769">var</span>&nbsp;<span class="ident" id="6433773">Default</span>&nbsp;<span class="ident" id="6433781"><a href="/go/build/build.go.html#6426241">Context</a></span>&nbsp;<span class="op" id="6433789">=</span>&nbsp;<span class="ident" id="6433791"><a href="/go/build/build.go.html#6434371">defaultContext</a></span><span class="op" id="6433805">(</span><span class="op" id="6433806">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6433809">var</span>&nbsp;<span class="ident" id="6433813">cgoEnabled</span>&nbsp;<span class="op" id="6433824">=</span>&nbsp;<span class="keyword" id="6433826">map</span><span class="op" id="6433829">[</span><span class="builtintype" id="6433830">string</span><span class="op" id="6433836">]</span><span class="builtintype" id="6433837">bool</span><span class="op" id="6433841">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6433844">&#34;darwin/386&#34;</span><span class="op" id="6433856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6433863">true</span><span class="op" id="6433867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6433870">&#34;darwin/amd64&#34;</span><span class="op" id="6433884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6433889">true</span><span class="op" id="6433893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6433896">&#34;dragonfly/386&#34;</span><span class="op" id="6433911">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6433915">true</span><span class="op" id="6433919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6433922">&#34;dragonfly/amd64&#34;</span><span class="op" id="6433939">:</span>&nbsp;<span class="builtintype" id="6433941">true</span><span class="op" id="6433945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6433948">&#34;freebsd/386&#34;</span><span class="op" id="6433961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6433967">true</span><span class="op" id="6433971">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6433974">&#34;freebsd/amd64&#34;</span><span class="op" id="6433989">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6433993">true</span><span class="op" id="6433997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434000">&#34;freebsd/arm&#34;</span><span class="op" id="6434013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434019">true</span><span class="op" id="6434023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434026">&#34;linux/386&#34;</span><span class="op" id="6434037">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434045">true</span><span class="op" id="6434049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434052">&#34;linux/amd64&#34;</span><span class="op" id="6434065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434071">true</span><span class="op" id="6434075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434078">&#34;linux/arm&#34;</span><span class="op" id="6434089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434097">true</span><span class="op" id="6434101">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434104">&#34;android/386&#34;</span><span class="op" id="6434117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434123">true</span><span class="op" id="6434127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434130">&#34;android/amd64&#34;</span><span class="op" id="6434145">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434149">true</span><span class="op" id="6434153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434156">&#34;android/arm&#34;</span><span class="op" id="6434169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434175">true</span><span class="op" id="6434179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434182">&#34;netbsd/386&#34;</span><span class="op" id="6434194">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434201">true</span><span class="op" id="6434205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434208">&#34;netbsd/amd64&#34;</span><span class="op" id="6434222">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434227">true</span><span class="op" id="6434231">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434234">&#34;netbsd/arm&#34;</span><span class="op" id="6434246">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434253">true</span><span class="op" id="6434257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434260">&#34;openbsd/386&#34;</span><span class="op" id="6434273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434279">true</span><span class="op" id="6434283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434286">&#34;openbsd/amd64&#34;</span><span class="op" id="6434301">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434305">true</span><span class="op" id="6434309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434312">&#34;windows/386&#34;</span><span class="op" id="6434325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434331">true</span><span class="op" id="6434335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6434338">&#34;windows/amd64&#34;</span><span class="op" id="6434353">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6434357">true</span><span class="op" id="6434361">,</span><br>
<span class="lineno">280</span><span class="op" id="6434363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6434366">func</span>&nbsp;<span class="ident" id="6434371">defaultContext</span><span class="op" id="6434385">(</span><span class="op" id="6434386">)</span>&nbsp;<span class="ident" id="6434388"><a href="/go/build/build.go.html#6426241">Context</a></span>&nbsp;<span class="op" id="6434396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6434399">var</span>&nbsp;<span class="ident" id="6434403">c</span>&nbsp;<span class="ident" id="6434405"><a href="/go/build/build.go.html#6426241">Context</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434415"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6434416">.</span><span class="ident" id="6434417">GOARCH</span>&nbsp;<span class="op" id="6434424">=</span>&nbsp;<span class="ident" id="6434426"><a href="/go/build/build.go.html#6435497">envOr</a></span><span class="op" id="6434431">(</span><span class="string" id="6434432">&#34;GOARCH&#34;</span><span class="op" id="6434440">,</span>&nbsp;<span class="ident" id="6434442"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6434449">.</span><span class="ident" id="6434450">GOARCH</span><span class="op" id="6434456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434459"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6434460">.</span><span class="ident" id="6434461">GOOS</span>&nbsp;<span class="op" id="6434466">=</span>&nbsp;<span class="ident" id="6434468"><a href="/go/build/build.go.html#6435497">envOr</a></span><span class="op" id="6434473">(</span><span class="string" id="6434474">&#34;GOOS&#34;</span><span class="op" id="6434480">,</span>&nbsp;<span class="ident" id="6434482"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6434489">.</span><span class="ident" id="6434490">GOOS</span><span class="op" id="6434494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434497"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6434498">.</span><span class="ident" id="6434499">GOROOT</span>&nbsp;<span class="op" id="6434506">=</span>&nbsp;<span class="ident" id="6434508"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6434515">.</span><span class="ident" id="6434516">GOROOT</span><span class="op" id="6434522">(</span><span class="op" id="6434523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434526"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6434527">.</span><span class="ident" id="6434528">GOPATH</span>&nbsp;<span class="op" id="6434535">=</span>&nbsp;<span class="ident" id="6434537"><a href="/go/build/build.go.html#6435497">envOr</a></span><span class="op" id="6434542">(</span><span class="string" id="6434543">&#34;GOPATH&#34;</span><span class="op" id="6434551">,</span>&nbsp;<span class="string" id="6434553">&#34;&#34;</span><span class="op" id="6434555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6434558"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6434559">.</span><span class="ident" id="6434560">Compiler</span>&nbsp;<span class="op" id="6434569">=</span>&nbsp;<span class="ident" id="6434571"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6434578">.</span><span class="ident" id="6434579">Compiler</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434590">//&nbsp;Each&nbsp;major&nbsp;Go&nbsp;release&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.x&nbsp;series&nbsp;should&nbsp;add&nbsp;a&nbsp;tag&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434660">//&nbsp;Old&nbsp;tags&nbsp;should&nbsp;not&nbsp;be&nbsp;removed.&nbsp;That&nbsp;is,&nbsp;the&nbsp;go1.x&nbsp;tag&nbsp;is&nbsp;present</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434730">//&nbsp;in&nbsp;all&nbsp;releases&nbsp;&gt;=&nbsp;Go&nbsp;1.x.&nbsp;Code&nbsp;that&nbsp;requires&nbsp;Go&nbsp;1.x&nbsp;or&nbsp;later&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434803">//&nbsp;say&nbsp;&#34;+build&nbsp;go1.x&#34;,&nbsp;and&nbsp;code&nbsp;that&nbsp;should&nbsp;only&nbsp;be&nbsp;built&nbsp;before&nbsp;Go&nbsp;1.x</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434876">//&nbsp;(perhaps&nbsp;it&nbsp;is&nbsp;the&nbsp;stub&nbsp;to&nbsp;use&nbsp;in&nbsp;that&nbsp;case)&nbsp;should&nbsp;say&nbsp;&#34;+build&nbsp;!go1.x&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434953">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6434957">//&nbsp;When&nbsp;we&nbsp;reach&nbsp;Go&nbsp;1.5&nbsp;the&nbsp;line&nbsp;will&nbsp;read</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435001">//&nbsp;&nbsp;&nbsp;&nbspc.ReleaseTags&nbsp;=&nbsp;[]string{&#34;go1.1&#34;,&nbsp;&#34;go1.2&#34;,&nbsp;&#34;go1.3&#34;,&nbsp;&#34;go1.4&#34;,&nbsp;&#34;go1.5&#34;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435075">//&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435090"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435091">.</span><span class="ident" id="6435092">ReleaseTags</span>&nbsp;<span class="op" id="6435104">=</span>&nbsp;<span class="op" id="6435106">[</span><span class="op" id="6435107">]</span><span class="builtintype" id="6435108">string</span><span class="op" id="6435114">{</span><span class="string" id="6435115">&#34;go1.1&#34;</span><span class="op" id="6435122">,</span>&nbsp;<span class="string" id="6435124">&#34;go1.2&#34;</span><span class="op" id="6435131">,</span>&nbsp;<span class="string" id="6435133">&#34;go1.3&#34;</span><span class="op" id="6435140">,</span>&nbsp;<span class="string" id="6435142">&#34;go1.4&#34;</span><span class="op" id="6435149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435153">switch</span>&nbsp;<span class="ident" id="6435160"><a href="/go/build/build.go.html#6426068">os</a></span><span class="op" id="6435162">.</span><span class="ident" id="6435163">Getenv</span><span class="op" id="6435169">(</span><span class="string" id="6435170">&#34;CGO_ENABLED&#34;</span><span class="op" id="6435183">)</span>&nbsp;<span class="op" id="6435185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435188">case</span>&nbsp;<span class="string" id="6435193">&#34;1&#34;</span><span class="op" id="6435196">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435200"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435201">.</span><span class="ident" id="6435202">CgoEnabled</span>&nbsp;<span class="op" id="6435213">=</span>&nbsp;<span class="builtintype" id="6435215">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435221">case</span>&nbsp;<span class="string" id="6435226">&#34;0&#34;</span><span class="op" id="6435229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435233"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435234">.</span><span class="ident" id="6435235">CgoEnabled</span>&nbsp;<span class="op" id="6435246">=</span>&nbsp;<span class="builtintype" id="6435248">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435255">default</span><span class="op" id="6435262">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435266">//&nbsp;cgo&nbsp;must&nbsp;be&nbsp;explicitly&nbsp;enabled&nbsp;for&nbsp;cross&nbsp;compilation&nbsp;builds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435331">if</span>&nbsp;<span class="ident" id="6435334"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6435341">.</span><span class="ident" id="6435342">GOARCH</span>&nbsp;<span class="op" id="6435349">==</span>&nbsp;<span class="ident" id="6435352"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435353">.</span><span class="ident" id="6435354">GOARCH</span>&nbsp;<span class="op" id="6435361">&amp;&amp;</span>&nbsp;<span class="ident" id="6435364"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6435371">.</span><span class="ident" id="6435372">GOOS</span>&nbsp;<span class="op" id="6435377">==</span>&nbsp;<span class="ident" id="6435380"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435381">.</span><span class="ident" id="6435382">GOOS</span>&nbsp;<span class="op" id="6435387">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435392"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435393">.</span><span class="ident" id="6435394">CgoEnabled</span>&nbsp;<span class="op" id="6435405">=</span>&nbsp;<span class="ident" id="6435407"><a href="/go/build/build.go.html#6433813">cgoEnabled</a></span><span class="op" id="6435417">[</span><span class="ident" id="6435418"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435419">.</span><span class="ident" id="6435420">GOOS</span><span class="op" id="6435424">+</span><span class="string" id="6435425">&#34;/&#34;</span><span class="op" id="6435428">+</span><span class="ident" id="6435429"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435430">.</span><span class="ident" id="6435431">GOARCH</span><span class="op" id="6435437">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435442">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6435450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435454"><a href="/go/build/build.go.html#6434403">c</a></span><span class="op" id="6435455">.</span><span class="ident" id="6435456">CgoEnabled</span>&nbsp;<span class="op" id="6435467">=</span>&nbsp;<span class="builtintype" id="6435469">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6435476">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435480">return</span>&nbsp;<span class="ident" id="6435487"><a href="/go/build/build.go.html#6434403">c</a></span><br>
<span class="lineno"></span><span class="op" id="6435489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6435492">func</span>&nbsp;<span class="ident" id="6435497">envOr</span><span class="op" id="6435502">(</span><span class="ident" id="6435503">name</span><span class="op" id="6435507">,</span>&nbsp;<span class="ident" id="6435509">def</span>&nbsp;<span class="builtintype" id="6435513">string</span><span class="op" id="6435519">)</span>&nbsp;<span class="builtintype" id="6435521">string</span>&nbsp;<span class="op" id="6435528">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435531">s</span>&nbsp;<span class="op" id="6435533">:=</span>&nbsp;<span class="ident" id="6435536"><a href="/go/build/build.go.html#6426068">os</a></span><span class="op" id="6435538">.</span><span class="ident" id="6435539">Getenv</span><span class="op" id="6435545">(</span><span class="ident" id="6435546"><a href="/go/build/build.go.html#6435503">name</a></span><span class="op" id="6435550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435553">if</span>&nbsp;<span class="ident" id="6435556"><a href="/go/build/build.go.html#6435531">s</a></span>&nbsp;<span class="op" id="6435558">==</span>&nbsp;<span class="string" id="6435561">&#34;&#34;</span>&nbsp;<span class="op" id="6435564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435568">return</span>&nbsp;<span class="ident" id="6435575"><a href="/go/build/build.go.html#6435509">def</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6435580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6435583">return</span>&nbsp;<span class="ident" id="6435590"><a href="/go/build/build.go.html#6435531">s</a></span><br>
<span class="lineno">325</span><span class="op" id="6435592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6435595">//&nbsp;An&nbsp;ImportMode&nbsp;controls&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;Import&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="6435656">type</span>&nbsp;<span class="ident" id="6435661">ImportMode</span>&nbsp;<span class="builtintype" id="6435672">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="6435678">const</span>&nbsp;<span class="op" id="6435684">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435687">//&nbsp;If&nbsp;FindOnly&nbsp;is&nbsp;set,&nbsp;Import&nbsp;stops&nbsp;after&nbsp;locating&nbsp;the&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435753">//&nbsp;that&nbsp;should&nbsp;contain&nbsp;the&nbsp;sources&nbsp;for&nbsp;a&nbsp;package.&nbsp;&nbsp;It&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435817">//&nbsp;read&nbsp;any&nbsp;files&nbsp;in&nbsp;the&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6435854">FindOnly</span>&nbsp;<span class="ident" id="6435863"><a href="/go/build/build.go.html#6435661">ImportMode</a></span>&nbsp;<span class="op" id="6435874">=</span>&nbsp;<span class="num" id="6435876">1</span>&nbsp;<span class="op" id="6435878">&lt;&lt;</span>&nbsp;<span class="ident" id="6435881">iota</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435888">//&nbsp;If&nbsp;AllowBinary&nbsp;is&nbsp;set,&nbsp;Import&nbsp;can&nbsp;be&nbsp;satisfied&nbsp;by&nbsp;a&nbsp;compiled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6435953">//&nbsp;package&nbsp;object&nbsp;without&nbsp;corresponding&nbsp;sources.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436003">AllowBinary</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6436017">//&nbsp;If&nbsp;ImportComment&nbsp;is&nbsp;set,&nbsp;parse&nbsp;import&nbsp;comments&nbsp;on&nbsp;package&nbsp;statements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6436091">//&nbsp;Import&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;finds&nbsp;a&nbsp;comment&nbsp;it&nbsp;cannot&nbsp;understand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6436162">//&nbsp;or&nbsp;finds&nbsp;conflicting&nbsp;comments&nbsp;in&nbsp;multiple&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6436222">//&nbsp;See&nbsp;golang.org/s/go14customimport&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436282">ImportComment</span><br>
<span class="lineno">345</span><span class="op" id="6436296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6436299">//&nbsp;A&nbsp;Package&nbsp;describes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="6436359">type</span>&nbsp;<span class="ident" id="6436364">Package</span>&nbsp;<span class="keyword" id="6436372">struct</span>&nbsp;<span class="op" id="6436379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436382">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436396">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436405">//&nbsp;directory&nbsp;containing&nbsp;package&nbsp;sources</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436446">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436460">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436469">//&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436486">ImportComment</span>&nbsp;<span class="builtintype" id="6436500">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436509">//&nbsp;path&nbsp;in&nbsp;import&nbsp;comment&nbsp;on&nbsp;package&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436557">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436571">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436580">//&nbsp;documentation&nbsp;synopsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436607">ImportPath</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436621">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436630">//&nbsp;import&nbsp;path&nbsp;of&nbsp;package&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436673">Root</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436687">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436696">//&nbsp;root&nbsp;of&nbsp;Go&nbsp;tree&nbsp;where&nbsp;this&nbsp;package&nbsp;lives</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436741">SrcRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436755">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436764">//&nbsp;package&nbsp;source&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436814">PkgRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436828">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436837">//&nbsp;package&nbsp;install&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436888">BinDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436902">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6436911">//&nbsp;command&nbsp;install&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436957">Goroot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6436971">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6436980">//&nbsp;package&nbsp;found&nbsp;in&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437009">PkgObj</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6437023">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6437032">//&nbsp;installed&nbsp;.a&nbsp;file</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437054">AllTags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437068">[</span><span class="op" id="6437069">]</span><span class="builtintype" id="6437070">string</span>&nbsp;<span class="comment" id="6437077">//&nbsp;tags&nbsp;that&nbsp;can&nbsp;influence&nbsp;file&nbsp;selection&nbsp;in&nbsp;this&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437138">ConflictDir</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6437152">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6437161">//&nbsp;this&nbsp;directory&nbsp;shadows&nbsp;Dir&nbsp;in&nbsp;$GOPATH</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6437204">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437221">GoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437236">[</span><span class="op" id="6437237">]</span><span class="builtintype" id="6437238">string</span>&nbsp;<span class="comment" id="6437245">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;(excluding&nbsp;CgoFiles,&nbsp;TestGoFiles,&nbsp;XTestGoFiles)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437314">CgoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437329">[</span><span class="op" id="6437330">]</span><span class="builtintype" id="6437331">string</span>&nbsp;<span class="comment" id="6437338">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;that&nbsp;import&nbsp;&#34;C&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437375">IgnoredGoFiles</span>&nbsp;<span class="op" id="6437390">[</span><span class="op" id="6437391">]</span><span class="builtintype" id="6437392">string</span>&nbsp;<span class="comment" id="6437399">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;ignored&nbsp;for&nbsp;this&nbsp;build</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437443">CFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437458">[</span><span class="op" id="6437459">]</span><span class="builtintype" id="6437460">string</span>&nbsp;<span class="comment" id="6437467">//&nbsp;.c&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437487">CXXFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437502">[</span><span class="op" id="6437503">]</span><span class="builtintype" id="6437504">string</span>&nbsp;<span class="comment" id="6437511">//&nbsp;.cc,&nbsp;.cpp&nbsp;and&nbsp;.cxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437547">MFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437562">[</span><span class="op" id="6437563">]</span><span class="builtintype" id="6437564">string</span>&nbsp;<span class="comment" id="6437571">//&nbsp;.m&nbsp;(Objective-C)&nbsp;source&nbsp;files</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437605">HFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437620">[</span><span class="op" id="6437621">]</span><span class="builtintype" id="6437622">string</span>&nbsp;<span class="comment" id="6437629">//&nbsp;.h,&nbsp;.hh,&nbsp;.hpp&nbsp;and&nbsp;.hxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437669">SFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437684">[</span><span class="op" id="6437685">]</span><span class="builtintype" id="6437686">string</span>&nbsp;<span class="comment" id="6437693">//&nbsp;.s&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437713">SwigFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437728">[</span><span class="op" id="6437729">]</span><span class="builtintype" id="6437730">string</span>&nbsp;<span class="comment" id="6437737">//&nbsp;.swig&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437753">SwigCXXFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6437768">[</span><span class="op" id="6437769">]</span><span class="builtintype" id="6437770">string</span>&nbsp;<span class="comment" id="6437777">//&nbsp;.swigcxx&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437796">SysoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437811">[</span><span class="op" id="6437812">]</span><span class="builtintype" id="6437813">string</span>&nbsp;<span class="comment" id="6437820">//&nbsp;.syso&nbsp;system&nbsp;object&nbsp;files&nbsp;to&nbsp;add&nbsp;to&nbsp;archive</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6437869">//&nbsp;Cgo&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437888">CgoCFLAGS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437901">[</span><span class="op" id="6437902">]</span><span class="builtintype" id="6437903">string</span>&nbsp;<span class="comment" id="6437910">//&nbsp;Cgo&nbsp;CFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437936">CgoCPPFLAGS</span>&nbsp;&nbsp;<span class="op" id="6437949">[</span><span class="op" id="6437950">]</span><span class="builtintype" id="6437951">string</span>&nbsp;<span class="comment" id="6437958">//&nbsp;Cgo&nbsp;CPPFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437986">CgoCXXFLAGS</span>&nbsp;&nbsp;<span class="op" id="6437999">[</span><span class="op" id="6438000">]</span><span class="builtintype" id="6438001">string</span>&nbsp;<span class="comment" id="6438008">//&nbsp;Cgo&nbsp;CXXFLAGS&nbsp;directives</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438036">CgoLDFLAGS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6438049">[</span><span class="op" id="6438050">]</span><span class="builtintype" id="6438051">string</span>&nbsp;<span class="comment" id="6438058">//&nbsp;Cgo&nbsp;LDFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438085">CgoPkgConfig</span>&nbsp;<span class="op" id="6438098">[</span><span class="op" id="6438099">]</span><span class="builtintype" id="6438100">string</span>&nbsp;<span class="comment" id="6438107">//&nbsp;Cgo&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6438138">//&nbsp;Dependency&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438165">Imports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6438175">[</span><span class="op" id="6438176">]</span><span class="builtintype" id="6438177">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6438203">//&nbsp;imports&nbsp;from&nbsp;GoFiles,&nbsp;CgoFiles</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438238">ImportPos</span>&nbsp;<span class="keyword" id="6438248">map</span><span class="op" id="6438251">[</span><span class="builtintype" id="6438252">string</span><span class="op" id="6438258">]</span><span class="op" id="6438259">[</span><span class="op" id="6438260">]</span><span class="ident" id="6438261"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6438266">.</span><span class="ident" id="6438267">Position</span>&nbsp;<span class="comment" id="6438276">//&nbsp;line&nbsp;information&nbsp;for&nbsp;Imports</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6438310">//&nbsp;Test&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438331">TestGoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438346">[</span><span class="op" id="6438347">]</span><span class="builtintype" id="6438348">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6438374">//&nbsp;_test.go&nbsp;files&nbsp;in&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438404">TestImports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438419">[</span><span class="op" id="6438420">]</span><span class="builtintype" id="6438421">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6438447">//&nbsp;imports&nbsp;from&nbsp;TestGoFiles</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438476">TestImportPos</span>&nbsp;&nbsp;<span class="keyword" id="6438491">map</span><span class="op" id="6438494">[</span><span class="builtintype" id="6438495">string</span><span class="op" id="6438501">]</span><span class="op" id="6438502">[</span><span class="op" id="6438503">]</span><span class="ident" id="6438504"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6438509">.</span><span class="ident" id="6438510">Position</span>&nbsp;<span class="comment" id="6438519">//&nbsp;line&nbsp;information&nbsp;for&nbsp;TestImports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438556">XTestGoFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6438571">[</span><span class="op" id="6438572">]</span><span class="builtintype" id="6438573">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6438599">//&nbsp;_test.go&nbsp;files&nbsp;outside&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438634">XTestImports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6438649">[</span><span class="op" id="6438650">]</span><span class="builtintype" id="6438651">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6438677">//&nbsp;imports&nbsp;from&nbsp;XTestGoFiles</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438707">XTestImportPos</span>&nbsp;<span class="keyword" id="6438722">map</span><span class="op" id="6438725">[</span><span class="builtintype" id="6438726">string</span><span class="op" id="6438732">]</span><span class="op" id="6438733">[</span><span class="op" id="6438734">]</span><span class="ident" id="6438735"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6438740">.</span><span class="ident" id="6438741">Position</span>&nbsp;<span class="comment" id="6438750">//&nbsp;line&nbsp;information&nbsp;for&nbsp;XTestImports</span><br>
<span class="lineno"></span><span class="op" id="6438787">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="comment" id="6438790">//&nbsp;IsCommand&nbsp;reports&nbsp;whether&nbsp;the&nbsp;package&nbsp;is&nbsp;considered&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6438847">//&nbsp;command&nbsp;to&nbsp;be&nbsp;installed&nbsp;(not&nbsp;just&nbsp;a&nbsp;library).</span><br>
<span class="lineno"></span><span class="comment" id="6438896">//&nbsp;Packages&nbsp;named&nbsp;&#34;main&#34;&nbsp;are&nbsp;treated&nbsp;as&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="6438946">func</span>&nbsp;<span class="op" id="6438951">(</span><span class="ident" id="6438952">p</span>&nbsp;<span class="op" id="6438954">*</span><span class="ident" id="6438955"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6438962">)</span>&nbsp;<span class="ident" id="6438964">IsCommand</span><span class="op" id="6438973">(</span><span class="op" id="6438974">)</span>&nbsp;<span class="builtintype" id="6438976">bool</span>&nbsp;<span class="op" id="6438981">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438984">return</span>&nbsp;<span class="ident" id="6438991"><a href="/go/build/build.go.html#6438952">p</a></span><span class="op" id="6438992">.</span><span class="ident" id="6438993">Name</span>&nbsp;<span class="op" id="6438998">==</span>&nbsp;<span class="string" id="6439001">&#34;main&#34;</span><br>
<span class="lineno"></span><span class="op" id="6439008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6439011">//&nbsp;ImportDir&nbsp;is&nbsp;like&nbsp;Import&nbsp;but&nbsp;processes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6439077">//&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno">405</span><span class="keyword" id="6439101">func</span>&nbsp;<span class="op" id="6439106">(</span><span class="ident" id="6439107">ctxt</span>&nbsp;<span class="op" id="6439112">*</span><span class="ident" id="6439113"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6439120">)</span>&nbsp;<span class="ident" id="6439122">ImportDir</span><span class="op" id="6439131">(</span><span class="ident" id="6439132">dir</span>&nbsp;<span class="builtintype" id="6439136">string</span><span class="op" id="6439142">,</span>&nbsp;<span class="ident" id="6439144">mode</span>&nbsp;<span class="ident" id="6439149"><a href="/go/build/build.go.html#6435661">ImportMode</a></span><span class="op" id="6439159">)</span>&nbsp;<span class="op" id="6439161">(</span><span class="op" id="6439162">*</span><span class="ident" id="6439163"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6439170">,</span>&nbsp;<span class="builtintype" id="6439172">error</span><span class="op" id="6439177">)</span>&nbsp;<span class="op" id="6439179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439182">return</span>&nbsp;<span class="ident" id="6439189"><a href="/go/build/build.go.html#6439107">ctxt</a></span><span class="op" id="6439193">.</span><span class="ident" id="6439194">Import</span><span class="op" id="6439200">(</span><span class="string" id="6439201">&#34;.&#34;</span><span class="op" id="6439204">,</span>&nbsp;<span class="ident" id="6439206"><a href="/go/build/build.go.html#6439132">dir</a></span><span class="op" id="6439209">,</span>&nbsp;<span class="ident" id="6439211"><a href="/go/build/build.go.html#6439144">mode</a></span><span class="op" id="6439215">)</span><br>
<span class="lineno"></span><span class="op" id="6439217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6439220">//&nbsp;NoGoError&nbsp;is&nbsp;the&nbsp;error&nbsp;used&nbsp;by&nbsp;Import&nbsp;to&nbsp;describe&nbsp;a&nbsp;directory</span><br>
<span class="lineno">410</span><span class="comment" id="6439285">//&nbsp;containing&nbsp;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files.&nbsp;(It&nbsp;may&nbsp;still&nbsp;contain</span><br>
<span class="lineno"></span><span class="comment" id="6439351">//&nbsp;test&nbsp;files,&nbsp;files&nbsp;hidden&nbsp;by&nbsp;build&nbsp;tags,&nbsp;and&nbsp;so&nbsp;on.)</span><br>
<span class="lineno"></span><span class="keyword" id="6439406">type</span>&nbsp;<span class="ident" id="6439411">NoGoError</span>&nbsp;<span class="keyword" id="6439421">struct</span>&nbsp;<span class="op" id="6439428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439431">Dir</span>&nbsp;<span class="builtintype" id="6439435">string</span><br>
<span class="lineno"></span><span class="op" id="6439442">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="keyword" id="6439445">func</span>&nbsp;<span class="op" id="6439450">(</span><span class="ident" id="6439451">e</span>&nbsp;<span class="op" id="6439453">*</span><span class="ident" id="6439454"><a href="/go/build/build.go.html#6439411">NoGoError</a></span><span class="op" id="6439463">)</span>&nbsp;<span class="ident" id="6439465">Error</span><span class="op" id="6439470">(</span><span class="op" id="6439471">)</span>&nbsp;<span class="builtintype" id="6439473">string</span>&nbsp;<span class="op" id="6439480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439483">return</span>&nbsp;<span class="string" id="6439490">&#34;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="6439525">+</span>&nbsp;<span class="ident" id="6439527"><a href="/go/build/build.go.html#6439451">e</a></span><span class="op" id="6439528">.</span><span class="ident" id="6439529">Dir</span><br>
<span class="lineno"></span><span class="op" id="6439533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="6439536">//&nbsp;MultiplePackageError&nbsp;describes&nbsp;a&nbsp;directory&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="6439593">//&nbsp;multiple&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;for&nbsp;multiple&nbsp;packages.</span><br>
<span class="lineno"></span><span class="keyword" id="6439654">type</span>&nbsp;<span class="ident" id="6439659">MultiplePackageError</span>&nbsp;<span class="keyword" id="6439680">struct</span>&nbsp;<span class="op" id="6439687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439690">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6439699">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6439708">//&nbsp;directory&nbsp;containing&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439739">Packages</span>&nbsp;<span class="op" id="6439748">[</span><span class="op" id="6439749">]</span><span class="builtintype" id="6439750">string</span>&nbsp;<span class="comment" id="6439757">//&nbsp;package&nbsp;names&nbsp;found</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439781">Files</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439790">[</span><span class="op" id="6439791">]</span><span class="builtintype" id="6439792">string</span>&nbsp;<span class="comment" id="6439799">//&nbsp;corresponding&nbsp;files:&nbsp;Files[i]&nbsp;declares&nbsp;package&nbsp;Packages[i]</span><br>
<span class="lineno"></span><span class="op" id="6439861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6439864">func</span>&nbsp;<span class="op" id="6439869">(</span><span class="ident" id="6439870">e</span>&nbsp;<span class="op" id="6439872">*</span><span class="ident" id="6439873"><a href="/go/build/build.go.html#6439659">MultiplePackageError</a></span><span class="op" id="6439893">)</span>&nbsp;<span class="ident" id="6439895">Error</span><span class="op" id="6439900">(</span><span class="op" id="6439901">)</span>&nbsp;<span class="builtintype" id="6439903">string</span>&nbsp;<span class="op" id="6439910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439913">//&nbsp;Error&nbsp;string&nbsp;limited&nbsp;to&nbsp;two&nbsp;entries&nbsp;for&nbsp;compatibility.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439972">return</span>&nbsp;<span class="ident" id="6439979"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6439982">.</span><span class="ident" id="6439983">Sprintf</span><span class="op" id="6439990">(</span><span class="string" id="6439991">&#34;found&nbsp;packages&nbsp;%s&nbsp;(%s)&nbsp;and&nbsp;%s&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="6440033">,</span>&nbsp;<span class="ident" id="6440035"><a href="/go/build/build.go.html#6439870">e</a></span><span class="op" id="6440036">.</span><span class="ident" id="6440037">Packages</span><span class="op" id="6440045">[</span><span class="num" id="6440046">0</span><span class="op" id="6440047">]</span><span class="op" id="6440048">,</span>&nbsp;<span class="ident" id="6440050"><a href="/go/build/build.go.html#6439870">e</a></span><span class="op" id="6440051">.</span><span class="ident" id="6440052">Files</span><span class="op" id="6440057">[</span><span class="num" id="6440058">0</span><span class="op" id="6440059">]</span><span class="op" id="6440060">,</span>&nbsp;<span class="ident" id="6440062"><a href="/go/build/build.go.html#6439870">e</a></span><span class="op" id="6440063">.</span><span class="ident" id="6440064">Packages</span><span class="op" id="6440072">[</span><span class="num" id="6440073">1</span><span class="op" id="6440074">]</span><span class="op" id="6440075">,</span>&nbsp;<span class="ident" id="6440077"><a href="/go/build/build.go.html#6439870">e</a></span><span class="op" id="6440078">.</span><span class="ident" id="6440079">Files</span><span class="op" id="6440084">[</span><span class="num" id="6440085">1</span><span class="op" id="6440086">]</span><span class="op" id="6440087">,</span>&nbsp;<span class="ident" id="6440089"><a href="/go/build/build.go.html#6439870">e</a></span><span class="op" id="6440090">.</span><span class="ident" id="6440091">Dir</span><span class="op" id="6440094">)</span><br>
<span class="lineno"></span><span class="op" id="6440096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6440099">func</span>&nbsp;<span class="ident" id="6440104">nameExt</span><span class="op" id="6440111">(</span><span class="ident" id="6440112">name</span>&nbsp;<span class="builtintype" id="6440117">string</span><span class="op" id="6440123">)</span>&nbsp;<span class="builtintype" id="6440125">string</span>&nbsp;<span class="op" id="6440132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440135">i</span>&nbsp;<span class="op" id="6440137">:=</span>&nbsp;<span class="ident" id="6440140"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6440147">.</span><span class="ident" id="6440148">LastIndex</span><span class="op" id="6440157">(</span><span class="ident" id="6440158"><a href="/go/build/build.go.html#6440112">name</a></span><span class="op" id="6440162">,</span>&nbsp;<span class="string" id="6440164">&#34;.&#34;</span><span class="op" id="6440167">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440170">if</span>&nbsp;<span class="ident" id="6440173"><a href="/go/build/build.go.html#6440135">i</a></span>&nbsp;<span class="op" id="6440175">&lt;</span>&nbsp;<span class="num" id="6440177">0</span>&nbsp;<span class="op" id="6440179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440183">return</span>&nbsp;<span class="string" id="6440190">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440197">return</span>&nbsp;<span class="ident" id="6440204"><a href="/go/build/build.go.html#6440112">name</a></span><span class="op" id="6440208">[</span><span class="ident" id="6440209"><a href="/go/build/build.go.html#6440135">i</a></span><span class="op" id="6440210">:</span><span class="op" id="6440211">]</span><br>
<span class="lineno"></span><span class="op" id="6440213">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6440216">//&nbsp;Import&nbsp;returns&nbsp;details&nbsp;about&nbsp;the&nbsp;Go&nbsp;package&nbsp;named&nbsp;by&nbsp;the&nbsp;import&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="6440289">//&nbsp;interpreting&nbsp;local&nbsp;import&nbsp;paths&nbsp;relative&nbsp;to&nbsp;the&nbsp;srcDir&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="6440358">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;a&nbsp;local&nbsp;import&nbsp;path&nbsp;naming&nbsp;a&nbsp;package&nbsp;that&nbsp;can&nbsp;be&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="6440434">//&nbsp;using&nbsp;a&nbsp;standard&nbsp;import&nbsp;path,&nbsp;the&nbsp;returned&nbsp;package&nbsp;will&nbsp;set&nbsp;p.ImportPath</span><br>
<span class="lineno">445</span><span class="comment" id="6440510">//&nbsp;to&nbsp;that&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="6440527">//</span><br>
<span class="lineno"></span><span class="comment" id="6440530">//&nbsp;In&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;package,&nbsp;.go,&nbsp;.c,&nbsp;.h,&nbsp;and&nbsp;.s&nbsp;files&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="6440604">//&nbsp;considered&nbsp;part&nbsp;of&nbsp;the&nbsp;package&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span><span class="comment" id="6440650">//</span><br>
<span class="lineno">450</span><span class="comment" id="6440653">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;.go&nbsp;files&nbsp;in&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span><span class="comment" id="6440693">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;files&nbsp;starting&nbsp;with&nbsp;_&nbsp;or&nbsp;.&nbsp;(likely&nbsp;editor&nbsp;temporary&nbsp;files)</span><br>
<span class="lineno"></span><span class="comment" id="6440757">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;files&nbsp;with&nbsp;build&nbsp;constraints&nbsp;not&nbsp;satisfied&nbsp;by&nbsp;the&nbsp;context</span><br>
<span class="lineno"></span><span class="comment" id="6440820">//</span><br>
<span class="lineno"></span><span class="comment" id="6440823">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;Import&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;and&nbsp;a&nbsp;non-nil</span><br>
<span class="lineno">455</span><span class="comment" id="6440891">//&nbsp;*Package&nbsp;containing&nbsp;partial&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="6440935">//</span><br>
<span class="lineno"></span><span class="keyword" id="6440938">func</span>&nbsp;<span class="op" id="6440943">(</span><span class="ident" id="6440944">ctxt</span>&nbsp;<span class="op" id="6440949">*</span><span class="ident" id="6440950"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6440957">)</span>&nbsp;<span class="ident" id="6440959">Import</span><span class="op" id="6440965">(</span><span class="ident" id="6440966">path</span>&nbsp;<span class="builtintype" id="6440971">string</span><span class="op" id="6440977">,</span>&nbsp;<span class="ident" id="6440979">srcDir</span>&nbsp;<span class="builtintype" id="6440986">string</span><span class="op" id="6440992">,</span>&nbsp;<span class="ident" id="6440994">mode</span>&nbsp;<span class="ident" id="6440999"><a href="/go/build/build.go.html#6435661">ImportMode</a></span><span class="op" id="6441009">)</span>&nbsp;<span class="op" id="6441011">(</span><span class="op" id="6441012">*</span><span class="ident" id="6441013"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6441020">,</span>&nbsp;<span class="builtintype" id="6441022">error</span><span class="op" id="6441027">)</span>&nbsp;<span class="op" id="6441029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441032">p</span>&nbsp;<span class="op" id="6441034">:=</span>&nbsp;<span class="op" id="6441037">&amp;</span><span class="ident" id="6441038"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6441045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441049">ImportPath</span><span class="op" id="6441059">:</span>&nbsp;<span class="ident" id="6441061"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441065">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441071">if</span>&nbsp;<span class="ident" id="6441074"><a href="/go/build/build.go.html#6440966">path</a></span>&nbsp;<span class="op" id="6441079">==</span>&nbsp;<span class="string" id="6441082">&#34;&#34;</span>&nbsp;<span class="op" id="6441085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441089">return</span>&nbsp;<span class="ident" id="6441096"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6441097">,</span>&nbsp;<span class="ident" id="6441099"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6441102">.</span><span class="ident" id="6441103">Errorf</span><span class="op" id="6441109">(</span><span class="string" id="6441110">&#34;import&nbsp;%q:&nbsp;invalid&nbsp;import&nbsp;path&#34;</span><span class="op" id="6441142">,</span>&nbsp;<span class="ident" id="6441144"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441155">var</span>&nbsp;<span class="ident" id="6441159">pkga</span>&nbsp;<span class="builtintype" id="6441164">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441172">var</span>&nbsp;<span class="ident" id="6441176">pkgerr</span>&nbsp;<span class="builtintype" id="6441183">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441190">switch</span>&nbsp;<span class="ident" id="6441197"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441201">.</span><span class="ident" id="6441202">Compiler</span>&nbsp;<span class="op" id="6441211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441214">case</span>&nbsp;<span class="string" id="6441219">&#34;gccgo&#34;</span><span class="op" id="6441226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441230">dir</span><span class="op" id="6441233">,</span>&nbsp;<span class="ident" id="6441235">elem</span>&nbsp;<span class="op" id="6441240">:=</span>&nbsp;<span class="ident" id="6441243"><a href="/go/build/build.go.html#6426074">pathpkg</a></span><span class="op" id="6441250">.</span><span class="ident" id="6441251">Split</span><span class="op" id="6441256">(</span><span class="ident" id="6441257"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6441258">.</span><span class="ident" id="6441259">ImportPath</span><span class="op" id="6441269">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441273"><a href="/go/build/build.go.html#6441159">pkga</a></span>&nbsp;<span class="op" id="6441278">=</span>&nbsp;<span class="string" id="6441280">&#34;pkg/gccgo_&#34;</span>&nbsp;<span class="op" id="6441293">+</span>&nbsp;<span class="ident" id="6441295"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441299">.</span><span class="ident" id="6441300">GOOS</span>&nbsp;<span class="op" id="6441305">+</span>&nbsp;<span class="string" id="6441307">&#34;_&#34;</span>&nbsp;<span class="op" id="6441311">+</span>&nbsp;<span class="ident" id="6441313"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441317">.</span><span class="ident" id="6441318">GOARCH</span>&nbsp;<span class="op" id="6441325">+</span>&nbsp;<span class="string" id="6441327">&#34;/&#34;</span>&nbsp;<span class="op" id="6441331">+</span>&nbsp;<span class="ident" id="6441333"><a href="/go/build/build.go.html#6441230">dir</a></span>&nbsp;<span class="op" id="6441337">+</span>&nbsp;<span class="string" id="6441339">&#34;lib&#34;</span>&nbsp;<span class="op" id="6441345">+</span>&nbsp;<span class="ident" id="6441347"><a href="/go/build/build.go.html#6441235">elem</a></span>&nbsp;<span class="op" id="6441352">+</span>&nbsp;<span class="string" id="6441354">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441360">case</span>&nbsp;<span class="string" id="6441365">&#34;gc&#34;</span><span class="op" id="6441369">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441373">suffix</span>&nbsp;<span class="op" id="6441380">:=</span>&nbsp;<span class="string" id="6441383">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441388">if</span>&nbsp;<span class="ident" id="6441391"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441395">.</span><span class="ident" id="6441396">InstallSuffix</span>&nbsp;<span class="op" id="6441410">!=</span>&nbsp;<span class="string" id="6441413">&#34;&#34;</span>&nbsp;<span class="op" id="6441416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441421"><a href="/go/build/build.go.html#6441373">suffix</a></span>&nbsp;<span class="op" id="6441428">=</span>&nbsp;<span class="string" id="6441430">&#34;_&#34;</span>&nbsp;<span class="op" id="6441434">+</span>&nbsp;<span class="ident" id="6441436"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441440">.</span><span class="ident" id="6441441">InstallSuffix</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441461"><a href="/go/build/build.go.html#6441159">pkga</a></span>&nbsp;<span class="op" id="6441466">=</span>&nbsp;<span class="string" id="6441468">&#34;pkg/&#34;</span>&nbsp;<span class="op" id="6441475">+</span>&nbsp;<span class="ident" id="6441477"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441481">.</span><span class="ident" id="6441482">GOOS</span>&nbsp;<span class="op" id="6441487">+</span>&nbsp;<span class="string" id="6441489">&#34;_&#34;</span>&nbsp;<span class="op" id="6441493">+</span>&nbsp;<span class="ident" id="6441495"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441499">.</span><span class="ident" id="6441500">GOARCH</span>&nbsp;<span class="op" id="6441507">+</span>&nbsp;<span class="ident" id="6441509"><a href="/go/build/build.go.html#6441373">suffix</a></span>&nbsp;<span class="op" id="6441516">+</span>&nbsp;<span class="string" id="6441518">&#34;/&#34;</span>&nbsp;<span class="op" id="6441522">+</span>&nbsp;<span class="ident" id="6441524"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6441525">.</span><span class="ident" id="6441526">ImportPath</span>&nbsp;<span class="op" id="6441537">+</span>&nbsp;<span class="string" id="6441539">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441545">default</span><span class="op" id="6441552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441556">//&nbsp;Save&nbsp;error&nbsp;for&nbsp;end&nbsp;of&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441593"><a href="/go/build/build.go.html#6441176">pkgerr</a></span>&nbsp;<span class="op" id="6441600">=</span>&nbsp;<span class="ident" id="6441602"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6441605">.</span><span class="ident" id="6441606">Errorf</span><span class="op" id="6441612">(</span><span class="string" id="6441613">&#34;import&nbsp;%q:&nbsp;unknown&nbsp;compiler&nbsp;%q&#34;</span><span class="op" id="6441645">,</span>&nbsp;<span class="ident" id="6441647"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441651">,</span>&nbsp;<span class="ident" id="6441653"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441657">.</span><span class="ident" id="6441658">Compiler</span><span class="op" id="6441666">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441673">binaryOnly</span>&nbsp;<span class="op" id="6441684">:=</span>&nbsp;<span class="builtintype" id="6441687">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441694">if</span>&nbsp;<span class="ident" id="6441697"><a href="/go/build/build.go.html#6464523">IsLocalImport</a></span><span class="op" id="6441710">(</span><span class="ident" id="6441711"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441715">)</span>&nbsp;<span class="op" id="6441717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441721"><a href="/go/build/build.go.html#6441159">pkga</a></span>&nbsp;<span class="op" id="6441726">=</span>&nbsp;<span class="string" id="6441728">&#34;&#34;</span>&nbsp;<span class="comment" id="6441731">//&nbsp;local&nbsp;imports&nbsp;have&nbsp;no&nbsp;installed&nbsp;path</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441773">if</span>&nbsp;<span class="ident" id="6441776"><a href="/go/build/build.go.html#6440979">srcDir</a></span>&nbsp;<span class="op" id="6441783">==</span>&nbsp;<span class="string" id="6441786">&#34;&#34;</span>&nbsp;<span class="op" id="6441789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441794">return</span>&nbsp;<span class="ident" id="6441801"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6441802">,</span>&nbsp;<span class="ident" id="6441804"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6441807">.</span><span class="ident" id="6441808">Errorf</span><span class="op" id="6441814">(</span><span class="string" id="6441815">&#34;import&nbsp;%q:&nbsp;import&nbsp;relative&nbsp;to&nbsp;unknown&nbsp;directory&#34;</span><span class="op" id="6441864">,</span>&nbsp;<span class="ident" id="6441866"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441878">if</span>&nbsp;<span class="op" id="6441881">!</span><span class="ident" id="6441882"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441886">.</span><span class="ident" id="6441887">isAbsPath</span><span class="op" id="6441896">(</span><span class="ident" id="6441897"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441901">)</span>&nbsp;<span class="op" id="6441903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441908"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6441909">.</span><span class="ident" id="6441910">Dir</span>&nbsp;<span class="op" id="6441914">=</span>&nbsp;<span class="ident" id="6441916"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6441920">.</span><span class="ident" id="6441921">joinPath</span><span class="op" id="6441929">(</span><span class="ident" id="6441930"><a href="/go/build/build.go.html#6440979">srcDir</a></span><span class="op" id="6441936">,</span>&nbsp;<span class="ident" id="6441938"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6441942">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441950">//&nbsp;Determine&nbsp;canonical&nbsp;import&nbsp;path,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441996">if</span>&nbsp;<span class="ident" id="6441999"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442003">.</span><span class="ident" id="6442004">GOROOT</span>&nbsp;<span class="op" id="6442011">!=</span>&nbsp;<span class="string" id="6442014">&#34;&#34;</span>&nbsp;<span class="op" id="6442017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442022">root</span>&nbsp;<span class="op" id="6442027">:=</span>&nbsp;<span class="ident" id="6442030"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442034">.</span><span class="ident" id="6442035">joinPath</span><span class="op" id="6442043">(</span><span class="ident" id="6442044"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442048">.</span><span class="ident" id="6442049">GOROOT</span><span class="op" id="6442055">,</span>&nbsp;<span class="string" id="6442057">&#34;src&#34;</span><span class="op" id="6442062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442067">if</span>&nbsp;<span class="ident" id="6442070">sub</span><span class="op" id="6442073">,</span>&nbsp;<span class="ident" id="6442075">ok</span>&nbsp;<span class="op" id="6442078">:=</span>&nbsp;<span class="ident" id="6442081"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442085">.</span><span class="ident" id="6442086">hasSubdir</span><span class="op" id="6442095">(</span><span class="ident" id="6442096"><a href="/go/build/build.go.html#6442022">root</a></span><span class="op" id="6442100">,</span>&nbsp;<span class="ident" id="6442102"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442103">.</span><span class="ident" id="6442104">Dir</span><span class="op" id="6442107">)</span><span class="op" id="6442108">;</span>&nbsp;<span class="ident" id="6442110"><a href="/go/build/build.go.html#6442075">ok</a></span>&nbsp;<span class="op" id="6442113">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442119"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442120">.</span><span class="ident" id="6442121">Goroot</span>&nbsp;<span class="op" id="6442128">=</span>&nbsp;<span class="builtintype" id="6442130">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442139"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442140">.</span><span class="ident" id="6442141">ImportPath</span>&nbsp;<span class="op" id="6442152">=</span>&nbsp;<span class="ident" id="6442154"><a href="/go/build/build.go.html#6442070">sub</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442162"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442163">.</span><span class="ident" id="6442164">Root</span>&nbsp;<span class="op" id="6442169">=</span>&nbsp;<span class="ident" id="6442171"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442175">.</span><span class="ident" id="6442176">GOROOT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442187">goto</span>&nbsp;<span class="ident" id="6442192">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442201">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442209">all</span>&nbsp;<span class="op" id="6442213">:=</span>&nbsp;<span class="ident" id="6442216"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442220">.</span><span class="ident" id="6442221">gopath</span><span class="op" id="6442227">(</span><span class="op" id="6442228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442232">for</span>&nbsp;<span class="ident" id="6442236">i</span><span class="op" id="6442237">,</span>&nbsp;<span class="ident" id="6442239">root</span>&nbsp;<span class="op" id="6442244">:=</span>&nbsp;<span class="keyword" id="6442247">range</span>&nbsp;<span class="ident" id="6442253"><a href="/go/build/build.go.html#6442209">all</a></span>&nbsp;<span class="op" id="6442257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442262">rootsrc</span>&nbsp;<span class="op" id="6442270">:=</span>&nbsp;<span class="ident" id="6442273"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442277">.</span><span class="ident" id="6442278">joinPath</span><span class="op" id="6442286">(</span><span class="ident" id="6442287"><a href="/go/build/build.go.html#6442239">root</a></span><span class="op" id="6442291">,</span>&nbsp;<span class="string" id="6442293">&#34;src&#34;</span><span class="op" id="6442298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442303">if</span>&nbsp;<span class="ident" id="6442306">sub</span><span class="op" id="6442309">,</span>&nbsp;<span class="ident" id="6442311">ok</span>&nbsp;<span class="op" id="6442314">:=</span>&nbsp;<span class="ident" id="6442317"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442321">.</span><span class="ident" id="6442322">hasSubdir</span><span class="op" id="6442331">(</span><span class="ident" id="6442332"><a href="/go/build/build.go.html#6442262">rootsrc</a></span><span class="op" id="6442339">,</span>&nbsp;<span class="ident" id="6442341"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442342">.</span><span class="ident" id="6442343">Dir</span><span class="op" id="6442346">)</span><span class="op" id="6442347">;</span>&nbsp;<span class="ident" id="6442349"><a href="/go/build/build.go.html#6442311">ok</a></span>&nbsp;<span class="op" id="6442352">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442358">//&nbsp;We&nbsp;found&nbsp;a&nbsp;potential&nbsp;import&nbsp;path&nbsp;for&nbsp;dir,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442407">//&nbsp;but&nbsp;check&nbsp;that&nbsp;using&nbsp;it&nbsp;wouldn&#39;t&nbsp;find&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442462">//&nbsp;else&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442481">if</span>&nbsp;<span class="ident" id="6442484"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442488">.</span><span class="ident" id="6442489">GOROOT</span>&nbsp;<span class="op" id="6442496">!=</span>&nbsp;<span class="string" id="6442499">&#34;&#34;</span>&nbsp;<span class="op" id="6442502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442509">if</span>&nbsp;<span class="ident" id="6442512">dir</span>&nbsp;<span class="op" id="6442516">:=</span>&nbsp;<span class="ident" id="6442519"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442523">.</span><span class="ident" id="6442524">joinPath</span><span class="op" id="6442532">(</span><span class="ident" id="6442533"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442537">.</span><span class="ident" id="6442538">GOROOT</span><span class="op" id="6442544">,</span>&nbsp;<span class="string" id="6442546">&#34;src&#34;</span><span class="op" id="6442551">,</span>&nbsp;<span class="ident" id="6442553"><a href="/go/build/build.go.html#6442306">sub</a></span><span class="op" id="6442556">)</span><span class="op" id="6442557">;</span>&nbsp;<span class="ident" id="6442559"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442563">.</span><span class="ident" id="6442564">isDir</span><span class="op" id="6442569">(</span><span class="ident" id="6442570"><a href="/go/build/build.go.html#6442512">dir</a></span><span class="op" id="6442573">)</span>&nbsp;<span class="op" id="6442575">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442583"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442584">.</span><span class="ident" id="6442585">ConflictDir</span>&nbsp;<span class="op" id="6442597">=</span>&nbsp;<span class="ident" id="6442599"><a href="/go/build/build.go.html#6442512">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442609">goto</span>&nbsp;<span class="ident" id="6442614">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442637">for</span>&nbsp;<span class="ident" id="6442641">_</span><span class="op" id="6442642">,</span>&nbsp;<span class="ident" id="6442644">earlyRoot</span>&nbsp;<span class="op" id="6442654">:=</span>&nbsp;<span class="keyword" id="6442657">range</span>&nbsp;<span class="ident" id="6442663"><a href="/go/build/build.go.html#6442209">all</a></span><span class="op" id="6442666">[</span><span class="op" id="6442667">:</span><span class="ident" id="6442668"><a href="/go/build/build.go.html#6442236">i</a></span><span class="op" id="6442669">]</span>&nbsp;<span class="op" id="6442671">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442678">if</span>&nbsp;<span class="ident" id="6442681">dir</span>&nbsp;<span class="op" id="6442685">:=</span>&nbsp;<span class="ident" id="6442688"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442692">.</span><span class="ident" id="6442693">joinPath</span><span class="op" id="6442701">(</span><span class="ident" id="6442702"><a href="/go/build/build.go.html#6442644">earlyRoot</a></span><span class="op" id="6442711">,</span>&nbsp;<span class="string" id="6442713">&#34;src&#34;</span><span class="op" id="6442718">,</span>&nbsp;<span class="ident" id="6442720"><a href="/go/build/build.go.html#6442306">sub</a></span><span class="op" id="6442723">)</span><span class="op" id="6442724">;</span>&nbsp;<span class="ident" id="6442726"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6442730">.</span><span class="ident" id="6442731">isDir</span><span class="op" id="6442736">(</span><span class="ident" id="6442737"><a href="/go/build/build.go.html#6442681">dir</a></span><span class="op" id="6442740">)</span>&nbsp;<span class="op" id="6442742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442750"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442751">.</span><span class="ident" id="6442752">ConflictDir</span>&nbsp;<span class="op" id="6442764">=</span>&nbsp;<span class="ident" id="6442766"><a href="/go/build/build.go.html#6442681">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442776">goto</span>&nbsp;<span class="ident" id="6442781">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442798">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442805">//&nbsp;sub&nbsp;would&nbsp;not&nbsp;name&nbsp;some&nbsp;other&nbsp;directory&nbsp;instead&nbsp;of&nbsp;this&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442873">//&nbsp;Record&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442891"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442892">.</span><span class="ident" id="6442893">ImportPath</span>&nbsp;<span class="op" id="6442904">=</span>&nbsp;<span class="ident" id="6442906"><a href="/go/build/build.go.html#6442306">sub</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442914"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6442915">.</span><span class="ident" id="6442916">Root</span>&nbsp;<span class="op" id="6442921">=</span>&nbsp;<span class="ident" id="6442923"><a href="/go/build/build.go.html#6442239">root</a></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442932">goto</span>&nbsp;<span class="ident" id="6442937">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442954">//&nbsp;It&#39;s&nbsp;okay&nbsp;that&nbsp;we&nbsp;didn&#39;t&nbsp;find&nbsp;a&nbsp;root&nbsp;containing&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6443012">//&nbsp;Keep&nbsp;going&nbsp;with&nbsp;the&nbsp;information&nbsp;we&nbsp;have.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443057">}</span>&nbsp;<span class="keyword" id="6443059">else</span>&nbsp;<span class="op" id="6443064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443068">if</span>&nbsp;<span class="ident" id="6443071"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6443078">.</span><span class="ident" id="6443079">HasPrefix</span><span class="op" id="6443088">(</span><span class="ident" id="6443089"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6443093">,</span>&nbsp;<span class="string" id="6443095">&#34;/&#34;</span><span class="op" id="6443098">)</span>&nbsp;<span class="op" id="6443100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443105">return</span>&nbsp;<span class="ident" id="6443112"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6443113">,</span>&nbsp;<span class="ident" id="6443115"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6443118">.</span><span class="ident" id="6443119">Errorf</span><span class="op" id="6443125">(</span><span class="string" id="6443126">&#34;import&nbsp;%q:&nbsp;cannot&nbsp;import&nbsp;absolute&nbsp;path&#34;</span><span class="op" id="6443166">,</span>&nbsp;<span class="ident" id="6443168"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6443172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6443181">//&nbsp;tried&nbsp;records&nbsp;the&nbsp;location&nbsp;of&nbsp;unsuccessful&nbsp;package&nbsp;lookups</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443245">var</span>&nbsp;<span class="ident" id="6443249">tried</span>&nbsp;<span class="keyword" id="6443255">struct</span>&nbsp;<span class="op" id="6443262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443267">goroot</span>&nbsp;<span class="builtintype" id="6443274">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443284">gopath</span>&nbsp;<span class="op" id="6443291">[</span><span class="op" id="6443292">]</span><span class="builtintype" id="6443293">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443302">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6443307">//&nbsp;Determine&nbsp;directory&nbsp;from&nbsp;import&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443350">if</span>&nbsp;<span class="ident" id="6443353"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443357">.</span><span class="ident" id="6443358">GOROOT</span>&nbsp;<span class="op" id="6443365">!=</span>&nbsp;<span class="string" id="6443368">&#34;&#34;</span>&nbsp;<span class="op" id="6443371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443376">dir</span>&nbsp;<span class="op" id="6443380">:=</span>&nbsp;<span class="ident" id="6443383"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443387">.</span><span class="ident" id="6443388">joinPath</span><span class="op" id="6443396">(</span><span class="ident" id="6443397"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443401">.</span><span class="ident" id="6443402">GOROOT</span><span class="op" id="6443408">,</span>&nbsp;<span class="string" id="6443410">&#34;src&#34;</span><span class="op" id="6443415">,</span>&nbsp;<span class="ident" id="6443417"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6443421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443426">isDir</span>&nbsp;<span class="op" id="6443432">:=</span>&nbsp;<span class="ident" id="6443435"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443439">.</span><span class="ident" id="6443440">isDir</span><span class="op" id="6443445">(</span><span class="ident" id="6443446"><a href="/go/build/build.go.html#6443376">dir</a></span><span class="op" id="6443449">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443454"><a href="/go/build/build.go.html#6441673">binaryOnly</a></span>&nbsp;<span class="op" id="6443465">=</span>&nbsp;<span class="op" id="6443467">!</span><span class="ident" id="6443468"><a href="/go/build/build.go.html#6443426">isDir</a></span>&nbsp;<span class="op" id="6443474">&amp;&amp;</span>&nbsp;<span class="ident" id="6443477"><a href="/go/build/build.go.html#6440994">mode</a></span><span class="op" id="6443481">&amp;</span><span class="ident" id="6443482"><a href="/go/build/build.go.html#6436003">AllowBinary</a></span>&nbsp;<span class="op" id="6443494">!=</span>&nbsp;<span class="num" id="6443497">0</span>&nbsp;<span class="op" id="6443499">&amp;&amp;</span>&nbsp;<span class="ident" id="6443502"><a href="/go/build/build.go.html#6441159">pkga</a></span>&nbsp;<span class="op" id="6443507">!=</span>&nbsp;<span class="string" id="6443510">&#34;&#34;</span>&nbsp;<span class="op" id="6443513">&amp;&amp;</span>&nbsp;<span class="ident" id="6443516"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443520">.</span><span class="ident" id="6443521">isFile</span><span class="op" id="6443527">(</span><span class="ident" id="6443528"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443532">.</span><span class="ident" id="6443533">joinPath</span><span class="op" id="6443541">(</span><span class="ident" id="6443542"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443546">.</span><span class="ident" id="6443547">GOROOT</span><span class="op" id="6443553">,</span>&nbsp;<span class="ident" id="6443555"><a href="/go/build/build.go.html#6441159">pkga</a></span><span class="op" id="6443559">)</span><span class="op" id="6443560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443565">if</span>&nbsp;<span class="ident" id="6443568"><a href="/go/build/build.go.html#6443426">isDir</a></span>&nbsp;<span class="op" id="6443574">||</span>&nbsp;<span class="ident" id="6443577"><a href="/go/build/build.go.html#6441673">binaryOnly</a></span>&nbsp;<span class="op" id="6443588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443594"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6443595">.</span><span class="ident" id="6443596">Dir</span>&nbsp;<span class="op" id="6443600">=</span>&nbsp;<span class="ident" id="6443602"><a href="/go/build/build.go.html#6443376">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443610"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6443611">.</span><span class="ident" id="6443612">Goroot</span>&nbsp;<span class="op" id="6443619">=</span>&nbsp;<span class="builtintype" id="6443621">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443630"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6443631">.</span><span class="ident" id="6443632">Root</span>&nbsp;<span class="op" id="6443637">=</span>&nbsp;<span class="ident" id="6443639"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443643">.</span><span class="ident" id="6443644">GOROOT</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443655">goto</span>&nbsp;<span class="ident" id="6443660">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443674"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6443679">.</span><span class="ident" id="6443680">goroot</span>&nbsp;<span class="op" id="6443687">=</span>&nbsp;<span class="ident" id="6443689"><a href="/go/build/build.go.html#6443376">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443699">for</span>&nbsp;<span class="ident" id="6443703">_</span><span class="op" id="6443704">,</span>&nbsp;<span class="ident" id="6443706">root</span>&nbsp;<span class="op" id="6443711">:=</span>&nbsp;<span class="keyword" id="6443714">range</span>&nbsp;<span class="ident" id="6443720"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443724">.</span><span class="ident" id="6443725">gopath</span><span class="op" id="6443731">(</span><span class="op" id="6443732">)</span>&nbsp;<span class="op" id="6443734">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443739">dir</span>&nbsp;<span class="op" id="6443743">:=</span>&nbsp;<span class="ident" id="6443746"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443750">.</span><span class="ident" id="6443751">joinPath</span><span class="op" id="6443759">(</span><span class="ident" id="6443760"><a href="/go/build/build.go.html#6443706">root</a></span><span class="op" id="6443764">,</span>&nbsp;<span class="string" id="6443766">&#34;src&#34;</span><span class="op" id="6443771">,</span>&nbsp;<span class="ident" id="6443773"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6443777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443782">isDir</span>&nbsp;<span class="op" id="6443788">:=</span>&nbsp;<span class="ident" id="6443791"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443795">.</span><span class="ident" id="6443796">isDir</span><span class="op" id="6443801">(</span><span class="ident" id="6443802"><a href="/go/build/build.go.html#6443739">dir</a></span><span class="op" id="6443805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443810"><a href="/go/build/build.go.html#6441673">binaryOnly</a></span>&nbsp;<span class="op" id="6443821">=</span>&nbsp;<span class="op" id="6443823">!</span><span class="ident" id="6443824"><a href="/go/build/build.go.html#6443782">isDir</a></span>&nbsp;<span class="op" id="6443830">&amp;&amp;</span>&nbsp;<span class="ident" id="6443833"><a href="/go/build/build.go.html#6440994">mode</a></span><span class="op" id="6443837">&amp;</span><span class="ident" id="6443838"><a href="/go/build/build.go.html#6436003">AllowBinary</a></span>&nbsp;<span class="op" id="6443850">!=</span>&nbsp;<span class="num" id="6443853">0</span>&nbsp;<span class="op" id="6443855">&amp;&amp;</span>&nbsp;<span class="ident" id="6443858"><a href="/go/build/build.go.html#6441159">pkga</a></span>&nbsp;<span class="op" id="6443863">!=</span>&nbsp;<span class="string" id="6443866">&#34;&#34;</span>&nbsp;<span class="op" id="6443869">&amp;&amp;</span>&nbsp;<span class="ident" id="6443872"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443876">.</span><span class="ident" id="6443877">isFile</span><span class="op" id="6443883">(</span><span class="ident" id="6443884"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6443888">.</span><span class="ident" id="6443889">joinPath</span><span class="op" id="6443897">(</span><span class="ident" id="6443898"><a href="/go/build/build.go.html#6443706">root</a></span><span class="op" id="6443902">,</span>&nbsp;<span class="ident" id="6443904"><a href="/go/build/build.go.html#6441159">pkga</a></span><span class="op" id="6443908">)</span><span class="op" id="6443909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443914">if</span>&nbsp;<span class="ident" id="6443917"><a href="/go/build/build.go.html#6443782">isDir</a></span>&nbsp;<span class="op" id="6443923">||</span>&nbsp;<span class="ident" id="6443926"><a href="/go/build/build.go.html#6441673">binaryOnly</a></span>&nbsp;<span class="op" id="6443937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443943"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6443944">.</span><span class="ident" id="6443945">Dir</span>&nbsp;<span class="op" id="6443949">=</span>&nbsp;<span class="ident" id="6443951"><a href="/go/build/build.go.html#6443739">dir</a></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443959"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6443960">.</span><span class="ident" id="6443961">Root</span>&nbsp;<span class="op" id="6443966">=</span>&nbsp;<span class="ident" id="6443968"><a href="/go/build/build.go.html#6443706">root</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443977">goto</span>&nbsp;<span class="ident" id="6443982">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443996"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6444001">.</span><span class="ident" id="6444002">gopath</span>&nbsp;<span class="op" id="6444009">=</span>&nbsp;<span class="builtinfunc" id="6444011">append</span><span class="op" id="6444017">(</span><span class="ident" id="6444018"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6444023">.</span><span class="ident" id="6444024">gopath</span><span class="op" id="6444030">,</span>&nbsp;<span class="ident" id="6444032"><a href="/go/build/build.go.html#6443739">dir</a></span><span class="op" id="6444035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444039">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444044">//&nbsp;package&nbsp;was&nbsp;not&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444071">var</span>&nbsp;<span class="ident" id="6444075">paths</span>&nbsp;<span class="op" id="6444081">[</span><span class="op" id="6444082">]</span><span class="builtintype" id="6444083">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444092">if</span>&nbsp;<span class="ident" id="6444095"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6444100">.</span><span class="ident" id="6444101">goroot</span>&nbsp;<span class="op" id="6444108">!=</span>&nbsp;<span class="string" id="6444111">&#34;&#34;</span>&nbsp;<span class="op" id="6444114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444119"><a href="/go/build/build.go.html#6444075">paths</a></span>&nbsp;<span class="op" id="6444125">=</span>&nbsp;<span class="builtinfunc" id="6444127">append</span><span class="op" id="6444133">(</span><span class="ident" id="6444134"><a href="/go/build/build.go.html#6444075">paths</a></span><span class="op" id="6444139">,</span>&nbsp;<span class="ident" id="6444141"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6444144">.</span><span class="ident" id="6444145">Sprintf</span><span class="op" id="6444152">(</span><span class="string" id="6444153">&#34;\t%s&nbsp;(from&nbsp;$GOROOT)&#34;</span><span class="op" id="6444174">,</span>&nbsp;<span class="ident" id="6444176"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6444181">.</span><span class="ident" id="6444182">goroot</span><span class="op" id="6444188">)</span><span class="op" id="6444189">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444193">}</span>&nbsp;<span class="keyword" id="6444195">else</span>&nbsp;<span class="op" id="6444200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444205"><a href="/go/build/build.go.html#6444075">paths</a></span>&nbsp;<span class="op" id="6444211">=</span>&nbsp;<span class="builtinfunc" id="6444213">append</span><span class="op" id="6444219">(</span><span class="ident" id="6444220"><a href="/go/build/build.go.html#6444075">paths</a></span><span class="op" id="6444225">,</span>&nbsp;<span class="string" id="6444227">&#34;\t($GOROOT&nbsp;not&nbsp;set)&#34;</span><span class="op" id="6444248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444256">var</span>&nbsp;<span class="ident" id="6444260">i</span>&nbsp;<span class="builtintype" id="6444262">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444268">var</span>&nbsp;<span class="ident" id="6444272">format</span>&nbsp;<span class="op" id="6444279">=</span>&nbsp;<span class="string" id="6444281">&#34;\t%s&nbsp;(from&nbsp;$GOPATH)&#34;</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444305">for</span>&nbsp;<span class="op" id="6444309">;</span>&nbsp;<span class="ident" id="6444311"><a href="/go/build/build.go.html#6444260">i</a></span>&nbsp;<span class="op" id="6444313">&lt;</span>&nbsp;<span class="builtinfunc" id="6444315">len</span><span class="op" id="6444318">(</span><span class="ident" id="6444319"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6444324">.</span><span class="ident" id="6444325">gopath</span><span class="op" id="6444331">)</span><span class="op" id="6444332">;</span>&nbsp;<span class="ident" id="6444334"><a href="/go/build/build.go.html#6444260">i</a></span><span class="op" id="6444335">++</span>&nbsp;<span class="op" id="6444338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444343">if</span>&nbsp;<span class="ident" id="6444346"><a href="/go/build/build.go.html#6444260">i</a></span>&nbsp;<span class="op" id="6444348">&gt;</span>&nbsp;<span class="num" id="6444350">0</span>&nbsp;<span class="op" id="6444352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444358"><a href="/go/build/build.go.html#6444272">format</a></span>&nbsp;<span class="op" id="6444365">=</span>&nbsp;<span class="string" id="6444367">&#34;\t%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444382"><a href="/go/build/build.go.html#6444075">paths</a></span>&nbsp;<span class="op" id="6444388">=</span>&nbsp;<span class="builtinfunc" id="6444390">append</span><span class="op" id="6444396">(</span><span class="ident" id="6444397"><a href="/go/build/build.go.html#6444075">paths</a></span><span class="op" id="6444402">,</span>&nbsp;<span class="ident" id="6444404"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6444407">.</span><span class="ident" id="6444408">Sprintf</span><span class="op" id="6444415">(</span><span class="ident" id="6444416"><a href="/go/build/build.go.html#6444272">format</a></span><span class="op" id="6444422">,</span>&nbsp;<span class="ident" id="6444424"><a href="/go/build/build.go.html#6443249">tried</a></span><span class="op" id="6444429">.</span><span class="ident" id="6444430">gopath</span><span class="op" id="6444436">[</span><span class="ident" id="6444437"><a href="/go/build/build.go.html#6444260">i</a></span><span class="op" id="6444438">]</span><span class="op" id="6444439">)</span><span class="op" id="6444440">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444448">if</span>&nbsp;<span class="ident" id="6444451"><a href="/go/build/build.go.html#6444260">i</a></span>&nbsp;<span class="op" id="6444453">==</span>&nbsp;<span class="num" id="6444456">0</span>&nbsp;<span class="op" id="6444458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444463"><a href="/go/build/build.go.html#6444075">paths</a></span>&nbsp;<span class="op" id="6444469">=</span>&nbsp;<span class="builtinfunc" id="6444471">append</span><span class="op" id="6444477">(</span><span class="ident" id="6444478"><a href="/go/build/build.go.html#6444075">paths</a></span><span class="op" id="6444483">,</span>&nbsp;<span class="string" id="6444485">&#34;\t($GOPATH&nbsp;not&nbsp;set)&#34;</span><span class="op" id="6444506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444514">return</span>&nbsp;<span class="ident" id="6444521"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444522">,</span>&nbsp;<span class="ident" id="6444524"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6444527">.</span><span class="ident" id="6444528">Errorf</span><span class="op" id="6444534">(</span><span class="string" id="6444535">&#34;cannot&nbsp;find&nbsp;package&nbsp;%q&nbsp;in&nbsp;any&nbsp;of:\n%s&#34;</span><span class="op" id="6444574">,</span>&nbsp;<span class="ident" id="6444576"><a href="/go/build/build.go.html#6440966">path</a></span><span class="op" id="6444580">,</span>&nbsp;<span class="ident" id="6444582"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6444589">.</span><span class="ident" id="6444590">Join</span><span class="op" id="6444594">(</span><span class="ident" id="6444595"><a href="/go/build/build.go.html#6444075">paths</a></span><span class="op" id="6444600">,</span>&nbsp;<span class="string" id="6444602">&#34;\n&#34;</span><span class="op" id="6444606">)</span><span class="op" id="6444607">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6444613">Found</span><span class="op" id="6444618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444621">if</span>&nbsp;<span class="ident" id="6444624"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444625">.</span><span class="ident" id="6444626">Root</span>&nbsp;<span class="op" id="6444631">!=</span>&nbsp;<span class="string" id="6444634">&#34;&#34;</span>&nbsp;<span class="op" id="6444637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444641"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444642">.</span><span class="ident" id="6444643">SrcRoot</span>&nbsp;<span class="op" id="6444651">=</span>&nbsp;<span class="ident" id="6444653"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6444657">.</span><span class="ident" id="6444658">joinPath</span><span class="op" id="6444666">(</span><span class="ident" id="6444667"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444668">.</span><span class="ident" id="6444669">Root</span><span class="op" id="6444673">,</span>&nbsp;<span class="string" id="6444675">&#34;src&#34;</span><span class="op" id="6444680">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444684"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444685">.</span><span class="ident" id="6444686">PkgRoot</span>&nbsp;<span class="op" id="6444694">=</span>&nbsp;<span class="ident" id="6444696"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6444700">.</span><span class="ident" id="6444701">joinPath</span><span class="op" id="6444709">(</span><span class="ident" id="6444710"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444711">.</span><span class="ident" id="6444712">Root</span><span class="op" id="6444716">,</span>&nbsp;<span class="string" id="6444718">&#34;pkg&#34;</span><span class="op" id="6444723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444727"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444728">.</span><span class="ident" id="6444729">BinDir</span>&nbsp;<span class="op" id="6444736">=</span>&nbsp;<span class="ident" id="6444738"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6444742">.</span><span class="ident" id="6444743">joinPath</span><span class="op" id="6444751">(</span><span class="ident" id="6444752"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444753">.</span><span class="ident" id="6444754">Root</span><span class="op" id="6444758">,</span>&nbsp;<span class="string" id="6444760">&#34;bin&#34;</span><span class="op" id="6444765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444769">if</span>&nbsp;<span class="ident" id="6444772"><a href="/go/build/build.go.html#6441159">pkga</a></span>&nbsp;<span class="op" id="6444777">!=</span>&nbsp;<span class="string" id="6444780">&#34;&#34;</span>&nbsp;<span class="op" id="6444783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444788"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444789">.</span><span class="ident" id="6444790">PkgObj</span>&nbsp;<span class="op" id="6444797">=</span>&nbsp;<span class="ident" id="6444799"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6444803">.</span><span class="ident" id="6444804">joinPath</span><span class="op" id="6444812">(</span><span class="ident" id="6444813"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444814">.</span><span class="ident" id="6444815">Root</span><span class="op" id="6444819">,</span>&nbsp;<span class="ident" id="6444821"><a href="/go/build/build.go.html#6441159">pkga</a></span><span class="op" id="6444825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444829">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444836">if</span>&nbsp;<span class="ident" id="6444839"><a href="/go/build/build.go.html#6440994">mode</a></span><span class="op" id="6444843">&amp;</span><span class="ident" id="6444844"><a href="/go/build/build.go.html#6435854">FindOnly</a></span>&nbsp;<span class="op" id="6444853">!=</span>&nbsp;<span class="num" id="6444856">0</span>&nbsp;<span class="op" id="6444858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444862">return</span>&nbsp;<span class="ident" id="6444869"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444870">,</span>&nbsp;<span class="ident" id="6444872"><a href="/go/build/build.go.html#6441176">pkgerr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444880">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444883">if</span>&nbsp;<span class="ident" id="6444886"><a href="/go/build/build.go.html#6441673">binaryOnly</a></span>&nbsp;<span class="op" id="6444897">&amp;&amp;</span>&nbsp;<span class="op" id="6444900">(</span><span class="ident" id="6444901"><a href="/go/build/build.go.html#6440994">mode</a></span><span class="op" id="6444905">&amp;</span><span class="ident" id="6444906"><a href="/go/build/build.go.html#6436003">AllowBinary</a></span><span class="op" id="6444917">)</span>&nbsp;<span class="op" id="6444919">!=</span>&nbsp;<span class="num" id="6444922">0</span>&nbsp;<span class="op" id="6444924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444928">return</span>&nbsp;<span class="ident" id="6444935"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444936">,</span>&nbsp;<span class="ident" id="6444938"><a href="/go/build/build.go.html#6441176">pkgerr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444950">dirs</span><span class="op" id="6444954">,</span>&nbsp;<span class="ident" id="6444956">err</span>&nbsp;<span class="op" id="6444960">:=</span>&nbsp;<span class="ident" id="6444963"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6444967">.</span><span class="ident" id="6444968">readDir</span><span class="op" id="6444975">(</span><span class="ident" id="6444976"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6444977">.</span><span class="ident" id="6444978">Dir</span><span class="op" id="6444981">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444984">if</span>&nbsp;<span class="ident" id="6444987"><a href="/go/build/build.go.html#6444956">err</a></span>&nbsp;<span class="op" id="6444991">!=</span>&nbsp;<span class="ident" id="6444994">nil</span>&nbsp;<span class="op" id="6444998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445002">return</span>&nbsp;<span class="ident" id="6445009"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445010">,</span>&nbsp;<span class="ident" id="6445012"><a href="/go/build/build.go.html#6444956">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445021">var</span>&nbsp;<span class="ident" id="6445025">Sfiles</span>&nbsp;<span class="op" id="6445032">[</span><span class="op" id="6445033">]</span><span class="builtintype" id="6445034">string</span>&nbsp;<span class="comment" id="6445041">//&nbsp;files&nbsp;with&nbsp;&#34;.S&#34;&nbsp;(capital&nbsp;S)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445073">var</span>&nbsp;<span class="ident" id="6445077">firstFile</span><span class="op" id="6445086">,</span>&nbsp;<span class="ident" id="6445088">firstCommentFile</span>&nbsp;<span class="builtintype" id="6445105">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445113">imported</span>&nbsp;<span class="op" id="6445122">:=</span>&nbsp;<span class="builtinfunc" id="6445125">make</span><span class="op" id="6445129">(</span><span class="keyword" id="6445130">map</span><span class="op" id="6445133">[</span><span class="builtintype" id="6445134">string</span><span class="op" id="6445140">]</span><span class="op" id="6445141">[</span><span class="op" id="6445142">]</span><span class="ident" id="6445143"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6445148">.</span><span class="ident" id="6445149">Position</span><span class="op" id="6445157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445160">testImported</span>&nbsp;<span class="op" id="6445173">:=</span>&nbsp;<span class="builtinfunc" id="6445176">make</span><span class="op" id="6445180">(</span><span class="keyword" id="6445181">map</span><span class="op" id="6445184">[</span><span class="builtintype" id="6445185">string</span><span class="op" id="6445191">]</span><span class="op" id="6445192">[</span><span class="op" id="6445193">]</span><span class="ident" id="6445194"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6445199">.</span><span class="ident" id="6445200">Position</span><span class="op" id="6445208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445211">xTestImported</span>&nbsp;<span class="op" id="6445225">:=</span>&nbsp;<span class="builtinfunc" id="6445228">make</span><span class="op" id="6445232">(</span><span class="keyword" id="6445233">map</span><span class="op" id="6445236">[</span><span class="builtintype" id="6445237">string</span><span class="op" id="6445243">]</span><span class="op" id="6445244">[</span><span class="op" id="6445245">]</span><span class="ident" id="6445246"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6445251">.</span><span class="ident" id="6445252">Position</span><span class="op" id="6445260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445263">allTags</span>&nbsp;<span class="op" id="6445271">:=</span>&nbsp;<span class="builtinfunc" id="6445274">make</span><span class="op" id="6445278">(</span><span class="keyword" id="6445279">map</span><span class="op" id="6445282">[</span><span class="builtintype" id="6445283">string</span><span class="op" id="6445289">]</span><span class="builtintype" id="6445290">bool</span><span class="op" id="6445294">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445297">fset</span>&nbsp;<span class="op" id="6445302">:=</span>&nbsp;<span class="ident" id="6445305"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6445310">.</span><span class="ident" id="6445311">NewFileSet</span><span class="op" id="6445321">(</span><span class="op" id="6445322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445325">for</span>&nbsp;<span class="ident" id="6445329">_</span><span class="op" id="6445330">,</span>&nbsp;<span class="ident" id="6445332">d</span>&nbsp;<span class="op" id="6445334">:=</span>&nbsp;<span class="keyword" id="6445337">range</span>&nbsp;<span class="ident" id="6445343"><a href="/go/build/build.go.html#6444950">dirs</a></span>&nbsp;<span class="op" id="6445348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445352">if</span>&nbsp;<span class="ident" id="6445355"><a href="/go/build/build.go.html#6445332">d</a></span><span class="op" id="6445356">.</span><span class="ident" id="6445357">IsDir</span><span class="op" id="6445362">(</span><span class="op" id="6445363">)</span>&nbsp;<span class="op" id="6445365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445370">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445381">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445386">name</span>&nbsp;<span class="op" id="6445391">:=</span>&nbsp;<span class="ident" id="6445394"><a href="/go/build/build.go.html#6445332">d</a></span><span class="op" id="6445395">.</span><span class="ident" id="6445396">Name</span><span class="op" id="6445400">(</span><span class="op" id="6445401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445405">ext</span>&nbsp;<span class="op" id="6445409">:=</span>&nbsp;<span class="ident" id="6445412"><a href="/go/build/build.go.html#6440104">nameExt</a></span><span class="op" id="6445419">(</span><span class="ident" id="6445420"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6445424">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445429">match</span><span class="op" id="6445434">,</span>&nbsp;<span class="ident" id="6445436">data</span><span class="op" id="6445440">,</span>&nbsp;<span class="ident" id="6445442">filename</span><span class="op" id="6445450">,</span>&nbsp;<span class="ident" id="6445452">err</span>&nbsp;<span class="op" id="6445456">:=</span>&nbsp;<span class="ident" id="6445459"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6445463">.</span><span class="ident" id="6445464">matchFile</span><span class="op" id="6445473">(</span><span class="ident" id="6445474"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445475">.</span><span class="ident" id="6445476">Dir</span><span class="op" id="6445479">,</span>&nbsp;<span class="ident" id="6445481"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6445485">,</span>&nbsp;<span class="builtintype" id="6445487">true</span><span class="op" id="6445491">,</span>&nbsp;<span class="ident" id="6445493"><a href="/go/build/build.go.html#6445263">allTags</a></span><span class="op" id="6445500">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445504">if</span>&nbsp;<span class="ident" id="6445507"><a href="/go/build/build.go.html#6445452">err</a></span>&nbsp;<span class="op" id="6445511">!=</span>&nbsp;<span class="ident" id="6445514">nil</span>&nbsp;<span class="op" id="6445518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445523">return</span>&nbsp;<span class="ident" id="6445530"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445531">,</span>&nbsp;<span class="ident" id="6445533"><a href="/go/build/build.go.html#6445452">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445543">if</span>&nbsp;<span class="op" id="6445546">!</span><span class="ident" id="6445547"><a href="/go/build/build.go.html#6445429">match</a></span>&nbsp;<span class="op" id="6445553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445558">if</span>&nbsp;<span class="ident" id="6445561"><a href="/go/build/build.go.html#6445405">ext</a></span>&nbsp;<span class="op" id="6445565">==</span>&nbsp;<span class="string" id="6445568">&#34;.go&#34;</span>&nbsp;<span class="op" id="6445574">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445580"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445581">.</span><span class="ident" id="6445582">IgnoredGoFiles</span>&nbsp;<span class="op" id="6445597">=</span>&nbsp;<span class="builtinfunc" id="6445599">append</span><span class="op" id="6445605">(</span><span class="ident" id="6445606"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445607">.</span><span class="ident" id="6445608">IgnoredGoFiles</span><span class="op" id="6445622">,</span>&nbsp;<span class="ident" id="6445624"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6445628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445638">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445654">//&nbsp;Going&nbsp;to&nbsp;save&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;non-Go&nbsp;files,&nbsp;can&nbsp;stop&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445717">switch</span>&nbsp;<span class="ident" id="6445724"><a href="/go/build/build.go.html#6445405">ext</a></span>&nbsp;<span class="op" id="6445728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445732">case</span>&nbsp;<span class="string" id="6445737">&#34;.c&#34;</span><span class="op" id="6445741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445746"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445747">.</span><span class="ident" id="6445748">CFiles</span>&nbsp;<span class="op" id="6445755">=</span>&nbsp;<span class="builtinfunc" id="6445757">append</span><span class="op" id="6445763">(</span><span class="ident" id="6445764"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445765">.</span><span class="ident" id="6445766">CFiles</span><span class="op" id="6445772">,</span>&nbsp;<span class="ident" id="6445774"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6445778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445783">continue</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445794">case</span>&nbsp;<span class="string" id="6445799">&#34;.cc&#34;</span><span class="op" id="6445804">,</span>&nbsp;<span class="string" id="6445806">&#34;.cpp&#34;</span><span class="op" id="6445812">,</span>&nbsp;<span class="string" id="6445814">&#34;.cxx&#34;</span><span class="op" id="6445820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445825"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445826">.</span><span class="ident" id="6445827">CXXFiles</span>&nbsp;<span class="op" id="6445836">=</span>&nbsp;<span class="builtinfunc" id="6445838">append</span><span class="op" id="6445844">(</span><span class="ident" id="6445845"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445846">.</span><span class="ident" id="6445847">CXXFiles</span><span class="op" id="6445855">,</span>&nbsp;<span class="ident" id="6445857"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6445861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445866">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445877">case</span>&nbsp;<span class="string" id="6445882">&#34;.m&#34;</span><span class="op" id="6445886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445891"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445892">.</span><span class="ident" id="6445893">MFiles</span>&nbsp;<span class="op" id="6445900">=</span>&nbsp;<span class="builtinfunc" id="6445902">append</span><span class="op" id="6445908">(</span><span class="ident" id="6445909"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445910">.</span><span class="ident" id="6445911">MFiles</span><span class="op" id="6445917">,</span>&nbsp;<span class="ident" id="6445919"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6445923">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445928">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445939">case</span>&nbsp;<span class="string" id="6445944">&#34;.h&#34;</span><span class="op" id="6445948">,</span>&nbsp;<span class="string" id="6445950">&#34;.hh&#34;</span><span class="op" id="6445955">,</span>&nbsp;<span class="string" id="6445957">&#34;.hpp&#34;</span><span class="op" id="6445963">,</span>&nbsp;<span class="string" id="6445965">&#34;.hxx&#34;</span><span class="op" id="6445971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445976"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445977">.</span><span class="ident" id="6445978">HFiles</span>&nbsp;<span class="op" id="6445985">=</span>&nbsp;<span class="builtinfunc" id="6445987">append</span><span class="op" id="6445993">(</span><span class="ident" id="6445994"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6445995">.</span><span class="ident" id="6445996">HFiles</span><span class="op" id="6446002">,</span>&nbsp;<span class="ident" id="6446004"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446013">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446024">case</span>&nbsp;<span class="string" id="6446029">&#34;.s&#34;</span><span class="op" id="6446033">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446038"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446039">.</span><span class="ident" id="6446040">SFiles</span>&nbsp;<span class="op" id="6446047">=</span>&nbsp;<span class="builtinfunc" id="6446049">append</span><span class="op" id="6446055">(</span><span class="ident" id="6446056"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446057">.</span><span class="ident" id="6446058">SFiles</span><span class="op" id="6446064">,</span>&nbsp;<span class="ident" id="6446066"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446075">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446086">case</span>&nbsp;<span class="string" id="6446091">&#34;.S&#34;</span><span class="op" id="6446095">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446100"><a href="/go/build/build.go.html#6445025">Sfiles</a></span>&nbsp;<span class="op" id="6446107">=</span>&nbsp;<span class="builtinfunc" id="6446109">append</span><span class="op" id="6446115">(</span><span class="ident" id="6446116"><a href="/go/build/build.go.html#6445025">Sfiles</a></span><span class="op" id="6446122">,</span>&nbsp;<span class="ident" id="6446124"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446133">continue</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446144">case</span>&nbsp;<span class="string" id="6446149">&#34;.swig&#34;</span><span class="op" id="6446156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446161"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446162">.</span><span class="ident" id="6446163">SwigFiles</span>&nbsp;<span class="op" id="6446173">=</span>&nbsp;<span class="builtinfunc" id="6446175">append</span><span class="op" id="6446181">(</span><span class="ident" id="6446182"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446183">.</span><span class="ident" id="6446184">SwigFiles</span><span class="op" id="6446193">,</span>&nbsp;<span class="ident" id="6446195"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446204">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446215">case</span>&nbsp;<span class="string" id="6446220">&#34;.swigcxx&#34;</span><span class="op" id="6446230">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446235"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446236">.</span><span class="ident" id="6446237">SwigCXXFiles</span>&nbsp;<span class="op" id="6446250">=</span>&nbsp;<span class="builtinfunc" id="6446252">append</span><span class="op" id="6446258">(</span><span class="ident" id="6446259"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446260">.</span><span class="ident" id="6446261">SwigCXXFiles</span><span class="op" id="6446273">,</span>&nbsp;<span class="ident" id="6446275"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446279">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446284">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446295">case</span>&nbsp;<span class="string" id="6446300">&#34;.syso&#34;</span><span class="op" id="6446307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6446312">//&nbsp;binary&nbsp;objects&nbsp;to&nbsp;add&nbsp;to&nbsp;package&nbsp;archive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6446359">//&nbsp;Likely&nbsp;of&nbsp;the&nbsp;form&nbsp;foo_windows.syso,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6446406">//&nbsp;the&nbsp;name&nbsp;was&nbsp;vetted&nbsp;above&nbsp;with&nbsp;goodOSArchFile.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446459"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446460">.</span><span class="ident" id="6446461">SysoFiles</span>&nbsp;<span class="op" id="6446471">=</span>&nbsp;<span class="builtinfunc" id="6446473">append</span><span class="op" id="6446479">(</span><span class="ident" id="6446480"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446481">.</span><span class="ident" id="6446482">SysoFiles</span><span class="op" id="6446491">,</span>&nbsp;<span class="ident" id="6446493"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446518">pf</span><span class="op" id="6446520">,</span>&nbsp;<span class="ident" id="6446522"><a href="/go/build/build.go.html#6445452">err</a></span>&nbsp;<span class="op" id="6446526">:=</span>&nbsp;<span class="ident" id="6446529"><a href="/go/build/build.go.html#6426017">parser</a></span><span class="op" id="6446535">.</span><span class="ident" id="6446536">ParseFile</span><span class="op" id="6446545">(</span><span class="ident" id="6446546"><a href="/go/build/build.go.html#6445297">fset</a></span><span class="op" id="6446550">,</span>&nbsp;<span class="ident" id="6446552"><a href="/go/build/build.go.html#6445442">filename</a></span><span class="op" id="6446560">,</span>&nbsp;<span class="ident" id="6446562"><a href="/go/build/build.go.html#6445436">data</a></span><span class="op" id="6446566">,</span>&nbsp;<span class="ident" id="6446568"><a href="/go/build/build.go.html#6426017">parser</a></span><span class="op" id="6446574">.</span><span class="ident" id="6446575">ImportsOnly</span><span class="op" id="6446586">|</span><span class="ident" id="6446587"><a href="/go/build/build.go.html#6426017">parser</a></span><span class="op" id="6446593">.</span><span class="ident" id="6446594">ParseComments</span><span class="op" id="6446607">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446611">if</span>&nbsp;<span class="ident" id="6446614"><a href="/go/build/build.go.html#6445452">err</a></span>&nbsp;<span class="op" id="6446618">!=</span>&nbsp;<span class="ident" id="6446621">nil</span>&nbsp;<span class="op" id="6446625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446630">return</span>&nbsp;<span class="ident" id="6446637"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446638">,</span>&nbsp;<span class="ident" id="6446640"><a href="/go/build/build.go.html#6445452">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446651">pkg</span>&nbsp;<span class="op" id="6446655">:=</span>&nbsp;<span class="ident" id="6446658"><a href="/go/build/build.go.html#6446518">pf</a></span><span class="op" id="6446660">.</span><span class="ident" id="6446661">Name</span><span class="op" id="6446665">.</span><span class="ident" id="6446666">Name</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446673">if</span>&nbsp;<span class="ident" id="6446676"><a href="/go/build/build.go.html#6446651">pkg</a></span>&nbsp;<span class="op" id="6446680">==</span>&nbsp;<span class="string" id="6446683">&#34;documentation&#34;</span>&nbsp;<span class="op" id="6446699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446704"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446705">.</span><span class="ident" id="6446706">IgnoredGoFiles</span>&nbsp;<span class="op" id="6446721">=</span>&nbsp;<span class="builtinfunc" id="6446723">append</span><span class="op" id="6446729">(</span><span class="ident" id="6446730"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446731">.</span><span class="ident" id="6446732">IgnoredGoFiles</span><span class="op" id="6446746">,</span>&nbsp;<span class="ident" id="6446748"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446757">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446773">isTest</span>&nbsp;<span class="op" id="6446780">:=</span>&nbsp;<span class="ident" id="6446783"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6446790">.</span><span class="ident" id="6446791">HasSuffix</span><span class="op" id="6446800">(</span><span class="ident" id="6446801"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6446805">,</span>&nbsp;<span class="string" id="6446807">&#34;_test.go&#34;</span><span class="op" id="6446817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446821">isXTest</span>&nbsp;<span class="op" id="6446829">:=</span>&nbsp;<span class="builtintype" id="6446832">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446840">if</span>&nbsp;<span class="ident" id="6446843"><a href="/go/build/build.go.html#6446773">isTest</a></span>&nbsp;<span class="op" id="6446850">&amp;&amp;</span>&nbsp;<span class="ident" id="6446853"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6446860">.</span><span class="ident" id="6446861">HasSuffix</span><span class="op" id="6446870">(</span><span class="ident" id="6446871"><a href="/go/build/build.go.html#6446651">pkg</a></span><span class="op" id="6446874">,</span>&nbsp;<span class="string" id="6446876">&#34;_test&#34;</span><span class="op" id="6446883">)</span>&nbsp;<span class="op" id="6446885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446890"><a href="/go/build/build.go.html#6446821">isXTest</a></span>&nbsp;<span class="op" id="6446898">=</span>&nbsp;<span class="builtintype" id="6446900">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446908"><a href="/go/build/build.go.html#6446651">pkg</a></span>&nbsp;<span class="op" id="6446912">=</span>&nbsp;<span class="ident" id="6446914"><a href="/go/build/build.go.html#6446651">pkg</a></span><span class="op" id="6446917">[</span><span class="op" id="6446918">:</span><span class="builtinfunc" id="6446919">len</span><span class="op" id="6446922">(</span><span class="ident" id="6446923"><a href="/go/build/build.go.html#6446651">pkg</a></span><span class="op" id="6446926">)</span><span class="op" id="6446927">-</span><span class="builtinfunc" id="6446928">len</span><span class="op" id="6446931">(</span><span class="string" id="6446932">&#34;_test&#34;</span><span class="op" id="6446939">)</span><span class="op" id="6446940">]</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446949">if</span>&nbsp;<span class="ident" id="6446952"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446953">.</span><span class="ident" id="6446954">Name</span>&nbsp;<span class="op" id="6446959">==</span>&nbsp;<span class="string" id="6446962">&#34;&#34;</span>&nbsp;<span class="op" id="6446965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446970"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6446971">.</span><span class="ident" id="6446972">Name</span>&nbsp;<span class="op" id="6446977">=</span>&nbsp;<span class="ident" id="6446979"><a href="/go/build/build.go.html#6446651">pkg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446986"><a href="/go/build/build.go.html#6445077">firstFile</a></span>&nbsp;<span class="op" id="6446996">=</span>&nbsp;<span class="ident" id="6446998"><a href="/go/build/build.go.html#6445386">name</a></span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447005">}</span>&nbsp;<span class="keyword" id="6447007">else</span>&nbsp;<span class="keyword" id="6447012">if</span>&nbsp;<span class="ident" id="6447015"><a href="/go/build/build.go.html#6446651">pkg</a></span>&nbsp;<span class="op" id="6447019">!=</span>&nbsp;<span class="ident" id="6447022"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447023">.</span><span class="ident" id="6447024">Name</span>&nbsp;<span class="op" id="6447029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447034">return</span>&nbsp;<span class="ident" id="6447041"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447042">,</span>&nbsp;<span class="op" id="6447044">&amp;</span><span class="ident" id="6447045"><a href="/go/build/build.go.html#6439659">MultiplePackageError</a></span><span class="op" id="6447065">{</span><span class="ident" id="6447066"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447067">.</span><span class="ident" id="6447068">Dir</span><span class="op" id="6447071">,</span>&nbsp;<span class="op" id="6447073">[</span><span class="op" id="6447074">]</span><span class="builtintype" id="6447075">string</span><span class="op" id="6447081">{</span><span class="ident" id="6447082"><a href="/go/build/build.go.html#6445077">firstFile</a></span><span class="op" id="6447091">,</span>&nbsp;<span class="ident" id="6447093"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6447097">}</span><span class="op" id="6447098">,</span>&nbsp;<span class="op" id="6447100">[</span><span class="op" id="6447101">]</span><span class="builtintype" id="6447102">string</span><span class="op" id="6447108">{</span><span class="ident" id="6447109"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447110">.</span><span class="ident" id="6447111">Name</span><span class="op" id="6447115">,</span>&nbsp;<span class="ident" id="6447117"><a href="/go/build/build.go.html#6446651">pkg</a></span><span class="op" id="6447120">}</span><span class="op" id="6447121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447129">if</span>&nbsp;<span class="ident" id="6447132"><a href="/go/build/build.go.html#6446518">pf</a></span><span class="op" id="6447134">.</span><span class="ident" id="6447135">Doc</span>&nbsp;<span class="op" id="6447139">!=</span>&nbsp;<span class="ident" id="6447142">nil</span>&nbsp;<span class="op" id="6447146">&amp;&amp;</span>&nbsp;<span class="ident" id="6447149"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447150">.</span><span class="ident" id="6447151">Doc</span>&nbsp;<span class="op" id="6447155">==</span>&nbsp;<span class="string" id="6447158">&#34;&#34;</span>&nbsp;<span class="op" id="6447161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447166"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447167">.</span><span class="ident" id="6447168">Doc</span>&nbsp;<span class="op" id="6447172">=</span>&nbsp;<span class="ident" id="6447174"><a href="/go/build/build.go.html#6426007">doc</a></span><span class="op" id="6447177">.</span><span class="ident" id="6447178">Synopsis</span><span class="op" id="6447186">(</span><span class="ident" id="6447187"><a href="/go/build/build.go.html#6446518">pf</a></span><span class="op" id="6447189">.</span><span class="ident" id="6447190">Doc</span><span class="op" id="6447193">.</span><span class="ident" id="6447194">Text</span><span class="op" id="6447198">(</span><span class="op" id="6447199">)</span><span class="op" id="6447200">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447209">if</span>&nbsp;<span class="ident" id="6447212"><a href="/go/build/build.go.html#6440994">mode</a></span><span class="op" id="6447216">&amp;</span><span class="ident" id="6447217"><a href="/go/build/build.go.html#6436282">ImportComment</a></span>&nbsp;<span class="op" id="6447231">!=</span>&nbsp;<span class="num" id="6447234">0</span>&nbsp;<span class="op" id="6447236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447241">qcom</span><span class="op" id="6447245">,</span>&nbsp;<span class="ident" id="6447247">line</span>&nbsp;<span class="op" id="6447252">:=</span>&nbsp;<span class="ident" id="6447255"><a href="/go/build/build.go.html#6449820">findImportComment</a></span><span class="op" id="6447272">(</span><span class="ident" id="6447273"><a href="/go/build/build.go.html#6445436">data</a></span><span class="op" id="6447277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447282">if</span>&nbsp;<span class="ident" id="6447285"><a href="/go/build/build.go.html#6447247">line</a></span>&nbsp;<span class="op" id="6447290">!=</span>&nbsp;<span class="num" id="6447293">0</span>&nbsp;<span class="op" id="6447295">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447301">com</span><span class="op" id="6447304">,</span>&nbsp;<span class="ident" id="6447306">err</span>&nbsp;<span class="op" id="6447310">:=</span>&nbsp;<span class="ident" id="6447313"><a href="/go/build/build.go.html#6426126">strconv</a></span><span class="op" id="6447320">.</span><span class="ident" id="6447321">Unquote</span><span class="op" id="6447328">(</span><span class="ident" id="6447329"><a href="/go/build/build.go.html#6447241">qcom</a></span><span class="op" id="6447333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447339">if</span>&nbsp;<span class="ident" id="6447342"><a href="/go/build/build.go.html#6447306">err</a></span>&nbsp;<span class="op" id="6447346">!=</span>&nbsp;<span class="ident" id="6447349">nil</span>&nbsp;<span class="op" id="6447353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447360">return</span>&nbsp;<span class="ident" id="6447367"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447368">,</span>&nbsp;<span class="ident" id="6447370"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6447373">.</span><span class="ident" id="6447374">Errorf</span><span class="op" id="6447380">(</span><span class="string" id="6447381">&#34;%s:%d:&nbsp;cannot&nbsp;parse&nbsp;import&nbsp;comment&#34;</span><span class="op" id="6447417">,</span>&nbsp;<span class="ident" id="6447419"><a href="/go/build/build.go.html#6445442">filename</a></span><span class="op" id="6447427">,</span>&nbsp;<span class="ident" id="6447429"><a href="/go/build/build.go.html#6447247">line</a></span><span class="op" id="6447433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447445">if</span>&nbsp;<span class="ident" id="6447448"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447449">.</span><span class="ident" id="6447450">ImportComment</span>&nbsp;<span class="op" id="6447464">==</span>&nbsp;<span class="string" id="6447467">&#34;&#34;</span>&nbsp;<span class="op" id="6447470">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447477"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447478">.</span><span class="ident" id="6447479">ImportComment</span>&nbsp;<span class="op" id="6447493">=</span>&nbsp;<span class="ident" id="6447495"><a href="/go/build/build.go.html#6447301">com</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447504"><a href="/go/build/build.go.html#6445088">firstCommentFile</a></span>&nbsp;<span class="op" id="6447521">=</span>&nbsp;<span class="ident" id="6447523"><a href="/go/build/build.go.html#6445386">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447532">}</span>&nbsp;<span class="keyword" id="6447534">else</span>&nbsp;<span class="keyword" id="6447539">if</span>&nbsp;<span class="ident" id="6447542"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447543">.</span><span class="ident" id="6447544">ImportComment</span>&nbsp;<span class="op" id="6447558">!=</span>&nbsp;<span class="ident" id="6447561"><a href="/go/build/build.go.html#6447301">com</a></span>&nbsp;<span class="op" id="6447565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447572">return</span>&nbsp;<span class="ident" id="6447579"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447580">,</span>&nbsp;<span class="ident" id="6447582"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6447585">.</span><span class="ident" id="6447586">Errorf</span><span class="op" id="6447592">(</span><span class="string" id="6447593">&#34;found&nbsp;import&nbsp;comments&nbsp;%q&nbsp;(%s)&nbsp;and&nbsp;%q&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="6447642">,</span>&nbsp;<span class="ident" id="6447644"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447645">.</span><span class="ident" id="6447646">ImportComment</span><span class="op" id="6447659">,</span>&nbsp;<span class="ident" id="6447661"><a href="/go/build/build.go.html#6445088">firstCommentFile</a></span><span class="op" id="6447677">,</span>&nbsp;<span class="ident" id="6447679"><a href="/go/build/build.go.html#6447301">com</a></span><span class="op" id="6447682">,</span>&nbsp;<span class="ident" id="6447684"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6447688">,</span>&nbsp;<span class="ident" id="6447690"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6447691">.</span><span class="ident" id="6447692">Dir</span><span class="op" id="6447695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447701">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6447715">//&nbsp;Record&nbsp;imports&nbsp;and&nbsp;information&nbsp;about&nbsp;cgo.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447762">isCgo</span>&nbsp;<span class="op" id="6447768">:=</span>&nbsp;<span class="builtintype" id="6447771">false</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447779">for</span>&nbsp;<span class="ident" id="6447783">_</span><span class="op" id="6447784">,</span>&nbsp;<span class="ident" id="6447786">decl</span>&nbsp;<span class="op" id="6447791">:=</span>&nbsp;<span class="keyword" id="6447794">range</span>&nbsp;<span class="ident" id="6447800"><a href="/go/build/build.go.html#6446518">pf</a></span><span class="op" id="6447802">.</span><span class="ident" id="6447803">Decls</span>&nbsp;<span class="op" id="6447809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447814">d</span><span class="op" id="6447815">,</span>&nbsp;<span class="ident" id="6447817">ok</span>&nbsp;<span class="op" id="6447820">:=</span>&nbsp;<span class="ident" id="6447823"><a href="/go/build/build.go.html#6447786">decl</a></span><span class="op" id="6447827">.</span><span class="op" id="6447828">(</span><span class="op" id="6447829">*</span><span class="ident" id="6447830"><a href="/go/build/build.go.html#6425997">ast</a></span><span class="op" id="6447833">.</span><span class="ident" id="6447834">GenDecl</span><span class="op" id="6447841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447846">if</span>&nbsp;<span class="op" id="6447849">!</span><span class="ident" id="6447850"><a href="/go/build/build.go.html#6447817">ok</a></span>&nbsp;<span class="op" id="6447853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447859">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447871">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447876">for</span>&nbsp;<span class="ident" id="6447880">_</span><span class="op" id="6447881">,</span>&nbsp;<span class="ident" id="6447883">dspec</span>&nbsp;<span class="op" id="6447889">:=</span>&nbsp;<span class="keyword" id="6447892">range</span>&nbsp;<span class="ident" id="6447898"><a href="/go/build/build.go.html#6447814">d</a></span><span class="op" id="6447899">.</span><span class="ident" id="6447900">Specs</span>&nbsp;<span class="op" id="6447906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447912">spec</span><span class="op" id="6447916">,</span>&nbsp;<span class="ident" id="6447918">ok</span>&nbsp;<span class="op" id="6447921">:=</span>&nbsp;<span class="ident" id="6447924"><a href="/go/build/build.go.html#6447883">dspec</a></span><span class="op" id="6447929">.</span><span class="op" id="6447930">(</span><span class="op" id="6447931">*</span><span class="ident" id="6447932"><a href="/go/build/build.go.html#6425997">ast</a></span><span class="op" id="6447935">.</span><span class="ident" id="6447936">ImportSpec</span><span class="op" id="6447946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447952">if</span>&nbsp;<span class="op" id="6447955">!</span><span class="ident" id="6447956"><a href="/go/build/build.go.html#6447918">ok</a></span>&nbsp;<span class="op" id="6447959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447966">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447979">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447985">quoted</span>&nbsp;<span class="op" id="6447992">:=</span>&nbsp;<span class="ident" id="6447995"><a href="/go/build/build.go.html#6447912">spec</a></span><span class="op" id="6447999">.</span><span class="ident" id="6448000">Path</span><span class="op" id="6448004">.</span><span class="ident" id="6448005">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448015">path</span><span class="op" id="6448019">,</span>&nbsp;<span class="ident" id="6448021">err</span>&nbsp;<span class="op" id="6448025">:=</span>&nbsp;<span class="ident" id="6448028"><a href="/go/build/build.go.html#6426126">strconv</a></span><span class="op" id="6448035">.</span><span class="ident" id="6448036">Unquote</span><span class="op" id="6448043">(</span><span class="ident" id="6448044"><a href="/go/build/build.go.html#6447985">quoted</a></span><span class="op" id="6448050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448056">if</span>&nbsp;<span class="ident" id="6448059"><a href="/go/build/build.go.html#6448021">err</a></span>&nbsp;<span class="op" id="6448063">!=</span>&nbsp;<span class="ident" id="6448066">nil</span>&nbsp;<span class="op" id="6448070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448077"><a href="/go/build/build.go.html#6426061">log</a></span><span class="op" id="6448080">.</span><span class="ident" id="6448081">Panicf</span><span class="op" id="6448087">(</span><span class="string" id="6448088">&#34;%s:&nbsp;parser&nbsp;returned&nbsp;invalid&nbsp;quoted&nbsp;string:&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="6448137">,</span>&nbsp;<span class="ident" id="6448139"><a href="/go/build/build.go.html#6445442">filename</a></span><span class="op" id="6448147">,</span>&nbsp;<span class="ident" id="6448149"><a href="/go/build/build.go.html#6447985">quoted</a></span><span class="op" id="6448155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448161">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448167">if</span>&nbsp;<span class="ident" id="6448170"><a href="/go/build/build.go.html#6446821">isXTest</a></span>&nbsp;<span class="op" id="6448178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448185"><a href="/go/build/build.go.html#6445211">xTestImported</a></span><span class="op" id="6448198">[</span><span class="ident" id="6448199"><a href="/go/build/build.go.html#6448015">path</a></span><span class="op" id="6448203">]</span>&nbsp;<span class="op" id="6448205">=</span>&nbsp;<span class="builtinfunc" id="6448207">append</span><span class="op" id="6448213">(</span><span class="ident" id="6448214"><a href="/go/build/build.go.html#6445211">xTestImported</a></span><span class="op" id="6448227">[</span><span class="ident" id="6448228"><a href="/go/build/build.go.html#6448015">path</a></span><span class="op" id="6448232">]</span><span class="op" id="6448233">,</span>&nbsp;<span class="ident" id="6448235"><a href="/go/build/build.go.html#6445297">fset</a></span><span class="op" id="6448239">.</span><span class="ident" id="6448240">Position</span><span class="op" id="6448248">(</span><span class="ident" id="6448249"><a href="/go/build/build.go.html#6447912">spec</a></span><span class="op" id="6448253">.</span><span class="ident" id="6448254">Pos</span><span class="op" id="6448257">(</span><span class="op" id="6448258">)</span><span class="op" id="6448259">)</span><span class="op" id="6448260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448266">}</span>&nbsp;<span class="keyword" id="6448268">else</span>&nbsp;<span class="keyword" id="6448273">if</span>&nbsp;<span class="ident" id="6448276"><a href="/go/build/build.go.html#6446773">isTest</a></span>&nbsp;<span class="op" id="6448283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448290"><a href="/go/build/build.go.html#6445160">testImported</a></span><span class="op" id="6448302">[</span><span class="ident" id="6448303"><a href="/go/build/build.go.html#6448015">path</a></span><span class="op" id="6448307">]</span>&nbsp;<span class="op" id="6448309">=</span>&nbsp;<span class="builtinfunc" id="6448311">append</span><span class="op" id="6448317">(</span><span class="ident" id="6448318"><a href="/go/build/build.go.html#6445160">testImported</a></span><span class="op" id="6448330">[</span><span class="ident" id="6448331"><a href="/go/build/build.go.html#6448015">path</a></span><span class="op" id="6448335">]</span><span class="op" id="6448336">,</span>&nbsp;<span class="ident" id="6448338"><a href="/go/build/build.go.html#6445297">fset</a></span><span class="op" id="6448342">.</span><span class="ident" id="6448343">Position</span><span class="op" id="6448351">(</span><span class="ident" id="6448352"><a href="/go/build/build.go.html#6447912">spec</a></span><span class="op" id="6448356">.</span><span class="ident" id="6448357">Pos</span><span class="op" id="6448360">(</span><span class="op" id="6448361">)</span><span class="op" id="6448362">)</span><span class="op" id="6448363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448369">}</span>&nbsp;<span class="keyword" id="6448371">else</span>&nbsp;<span class="op" id="6448376">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448383"><a href="/go/build/build.go.html#6445113">imported</a></span><span class="op" id="6448391">[</span><span class="ident" id="6448392"><a href="/go/build/build.go.html#6448015">path</a></span><span class="op" id="6448396">]</span>&nbsp;<span class="op" id="6448398">=</span>&nbsp;<span class="builtinfunc" id="6448400">append</span><span class="op" id="6448406">(</span><span class="ident" id="6448407"><a href="/go/build/build.go.html#6445113">imported</a></span><span class="op" id="6448415">[</span><span class="ident" id="6448416"><a href="/go/build/build.go.html#6448015">path</a></span><span class="op" id="6448420">]</span><span class="op" id="6448421">,</span>&nbsp;<span class="ident" id="6448423"><a href="/go/build/build.go.html#6445297">fset</a></span><span class="op" id="6448427">.</span><span class="ident" id="6448428">Position</span><span class="op" id="6448436">(</span><span class="ident" id="6448437"><a href="/go/build/build.go.html#6447912">spec</a></span><span class="op" id="6448441">.</span><span class="ident" id="6448442">Pos</span><span class="op" id="6448445">(</span><span class="op" id="6448446">)</span><span class="op" id="6448447">)</span><span class="op" id="6448448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448460">if</span>&nbsp;<span class="ident" id="6448463"><a href="/go/build/build.go.html#6448015">path</a></span>&nbsp;<span class="op" id="6448468">==</span>&nbsp;<span class="string" id="6448471">&#34;C&#34;</span>&nbsp;<span class="op" id="6448475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448482">if</span>&nbsp;<span class="ident" id="6448485"><a href="/go/build/build.go.html#6446773">isTest</a></span>&nbsp;<span class="op" id="6448492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448500">return</span>&nbsp;<span class="ident" id="6448507"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448508">,</span>&nbsp;<span class="ident" id="6448510"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6448513">.</span><span class="ident" id="6448514">Errorf</span><span class="op" id="6448520">(</span><span class="string" id="6448521">&#34;use&nbsp;of&nbsp;cgo&nbsp;in&nbsp;test&nbsp;%s&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6448558">,</span>&nbsp;<span class="ident" id="6448560"><a href="/go/build/build.go.html#6445442">filename</a></span><span class="op" id="6448568">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448582">cg</span>&nbsp;<span class="op" id="6448585">:=</span>&nbsp;<span class="ident" id="6448588"><a href="/go/build/build.go.html#6447912">spec</a></span><span class="op" id="6448592">.</span><span class="ident" id="6448593">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448602">if</span>&nbsp;<span class="ident" id="6448605"><a href="/go/build/build.go.html#6448582">cg</a></span>&nbsp;<span class="op" id="6448608">==</span>&nbsp;<span class="ident" id="6448611">nil</span>&nbsp;<span class="op" id="6448615">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6448618">len</span><span class="op" id="6448621">(</span><span class="ident" id="6448622"><a href="/go/build/build.go.html#6447814">d</a></span><span class="op" id="6448623">.</span><span class="ident" id="6448624">Specs</span><span class="op" id="6448629">)</span>&nbsp;<span class="op" id="6448631">==</span>&nbsp;<span class="num" id="6448634">1</span>&nbsp;<span class="op" id="6448636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448644"><a href="/go/build/build.go.html#6448582">cg</a></span>&nbsp;<span class="op" id="6448647">=</span>&nbsp;<span class="ident" id="6448649"><a href="/go/build/build.go.html#6447814">d</a></span><span class="op" id="6448650">.</span><span class="ident" id="6448651">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448660">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448667">if</span>&nbsp;<span class="ident" id="6448670"><a href="/go/build/build.go.html#6448582">cg</a></span>&nbsp;<span class="op" id="6448673">!=</span>&nbsp;<span class="ident" id="6448676">nil</span>&nbsp;<span class="op" id="6448680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448688">if</span>&nbsp;<span class="ident" id="6448691">err</span>&nbsp;<span class="op" id="6448695">:=</span>&nbsp;<span class="ident" id="6448698"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6448702">.</span><span class="ident" id="6448703">saveCgo</span><span class="op" id="6448710">(</span><span class="ident" id="6448711"><a href="/go/build/build.go.html#6445442">filename</a></span><span class="op" id="6448719">,</span>&nbsp;<span class="ident" id="6448721"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448722">,</span>&nbsp;<span class="ident" id="6448724"><a href="/go/build/build.go.html#6448582">cg</a></span><span class="op" id="6448726">)</span><span class="op" id="6448727">;</span>&nbsp;<span class="ident" id="6448729"><a href="/go/build/build.go.html#6448691">err</a></span>&nbsp;<span class="op" id="6448733">!=</span>&nbsp;<span class="ident" id="6448736">nil</span>&nbsp;<span class="op" id="6448740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448749">return</span>&nbsp;<span class="ident" id="6448756"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448757">,</span>&nbsp;<span class="ident" id="6448759"><a href="/go/build/build.go.html#6448691">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448776">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448783"><a href="/go/build/build.go.html#6447762">isCgo</a></span>&nbsp;<span class="op" id="6448789">=</span>&nbsp;<span class="builtintype" id="6448791">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448813">if</span>&nbsp;<span class="ident" id="6448816"><a href="/go/build/build.go.html#6447762">isCgo</a></span>&nbsp;<span class="op" id="6448822">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448827"><a href="/go/build/build.go.html#6445263">allTags</a></span><span class="op" id="6448834">[</span><span class="string" id="6448835">&#34;cgo&#34;</span><span class="op" id="6448840">]</span>&nbsp;<span class="op" id="6448842">=</span>&nbsp;<span class="builtintype" id="6448844">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448852">if</span>&nbsp;<span class="ident" id="6448855"><a href="/go/build/build.go.html#6440944">ctxt</a></span><span class="op" id="6448859">.</span><span class="ident" id="6448860">CgoEnabled</span>&nbsp;<span class="op" id="6448871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448877"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448878">.</span><span class="ident" id="6448879">CgoFiles</span>&nbsp;<span class="op" id="6448888">=</span>&nbsp;<span class="builtinfunc" id="6448890">append</span><span class="op" id="6448896">(</span><span class="ident" id="6448897"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448898">.</span><span class="ident" id="6448899">CgoFiles</span><span class="op" id="6448907">,</span>&nbsp;<span class="ident" id="6448909"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6448913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448918">}</span>&nbsp;<span class="keyword" id="6448920">else</span>&nbsp;<span class="op" id="6448925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448931"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448932">.</span><span class="ident" id="6448933">IgnoredGoFiles</span>&nbsp;<span class="op" id="6448948">=</span>&nbsp;<span class="builtinfunc" id="6448950">append</span><span class="op" id="6448956">(</span><span class="ident" id="6448957"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6448958">.</span><span class="ident" id="6448959">IgnoredGoFiles</span><span class="op" id="6448973">,</span>&nbsp;<span class="ident" id="6448975"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6448979">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448988">}</span>&nbsp;<span class="keyword" id="6448990">else</span>&nbsp;<span class="keyword" id="6448995">if</span>&nbsp;<span class="ident" id="6448998"><a href="/go/build/build.go.html#6446821">isXTest</a></span>&nbsp;<span class="op" id="6449006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449011"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449012">.</span><span class="ident" id="6449013">XTestGoFiles</span>&nbsp;<span class="op" id="6449026">=</span>&nbsp;<span class="builtinfunc" id="6449028">append</span><span class="op" id="6449034">(</span><span class="ident" id="6449035"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449036">.</span><span class="ident" id="6449037">XTestGoFiles</span><span class="op" id="6449049">,</span>&nbsp;<span class="ident" id="6449051"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6449055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449059">}</span>&nbsp;<span class="keyword" id="6449061">else</span>&nbsp;<span class="keyword" id="6449066">if</span>&nbsp;<span class="ident" id="6449069"><a href="/go/build/build.go.html#6446773">isTest</a></span>&nbsp;<span class="op" id="6449076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449081"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449082">.</span><span class="ident" id="6449083">TestGoFiles</span>&nbsp;<span class="op" id="6449095">=</span>&nbsp;<span class="builtinfunc" id="6449097">append</span><span class="op" id="6449103">(</span><span class="ident" id="6449104"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449105">.</span><span class="ident" id="6449106">TestGoFiles</span><span class="op" id="6449117">,</span>&nbsp;<span class="ident" id="6449119"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6449123">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449127">}</span>&nbsp;<span class="keyword" id="6449129">else</span>&nbsp;<span class="op" id="6449134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449139"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449140">.</span><span class="ident" id="6449141">GoFiles</span>&nbsp;<span class="op" id="6449149">=</span>&nbsp;<span class="builtinfunc" id="6449151">append</span><span class="op" id="6449157">(</span><span class="ident" id="6449158"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449159">.</span><span class="ident" id="6449160">GoFiles</span><span class="op" id="6449167">,</span>&nbsp;<span class="ident" id="6449169"><a href="/go/build/build.go.html#6445386">name</a></span><span class="op" id="6449173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449183">if</span>&nbsp;<span class="builtinfunc" id="6449186">len</span><span class="op" id="6449189">(</span><span class="ident" id="6449190"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449191">.</span><span class="ident" id="6449192">GoFiles</span><span class="op" id="6449199">)</span><span class="op" id="6449200">+</span><span class="builtinfunc" id="6449201">len</span><span class="op" id="6449204">(</span><span class="ident" id="6449205"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449206">.</span><span class="ident" id="6449207">CgoFiles</span><span class="op" id="6449215">)</span><span class="op" id="6449216">+</span><span class="builtinfunc" id="6449217">len</span><span class="op" id="6449220">(</span><span class="ident" id="6449221"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449222">.</span><span class="ident" id="6449223">TestGoFiles</span><span class="op" id="6449234">)</span><span class="op" id="6449235">+</span><span class="builtinfunc" id="6449236">len</span><span class="op" id="6449239">(</span><span class="ident" id="6449240"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449241">.</span><span class="ident" id="6449242">XTestGoFiles</span><span class="op" id="6449254">)</span>&nbsp;<span class="op" id="6449256">==</span>&nbsp;<span class="num" id="6449259">0</span>&nbsp;<span class="op" id="6449261">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449265">return</span>&nbsp;<span class="ident" id="6449272"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449273">,</span>&nbsp;<span class="op" id="6449275">&amp;</span><span class="ident" id="6449276"><a href="/go/build/build.go.html#6439411">NoGoError</a></span><span class="op" id="6449285">{</span><span class="ident" id="6449286"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449287">.</span><span class="ident" id="6449288">Dir</span><span class="op" id="6449291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449298">for</span>&nbsp;<span class="ident" id="6449302">tag</span>&nbsp;<span class="op" id="6449306">:=</span>&nbsp;<span class="keyword" id="6449309">range</span>&nbsp;<span class="ident" id="6449315"><a href="/go/build/build.go.html#6445263">allTags</a></span>&nbsp;<span class="op" id="6449323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449327"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449328">.</span><span class="ident" id="6449329">AllTags</span>&nbsp;<span class="op" id="6449337">=</span>&nbsp;<span class="builtinfunc" id="6449339">append</span><span class="op" id="6449345">(</span><span class="ident" id="6449346"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449347">.</span><span class="ident" id="6449348">AllTags</span><span class="op" id="6449355">,</span>&nbsp;<span class="ident" id="6449357"><a href="/go/build/build.go.html#6449302">tag</a></span><span class="op" id="6449360">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449366"><a href="/go/build/build.go.html#6426118">sort</a></span><span class="op" id="6449370">.</span><span class="ident" id="6449371">Strings</span><span class="op" id="6449378">(</span><span class="ident" id="6449379"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449380">.</span><span class="ident" id="6449381">AllTags</span><span class="op" id="6449388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449392"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449393">.</span><span class="ident" id="6449394">Imports</span><span class="op" id="6449401">,</span>&nbsp;<span class="ident" id="6449403"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449404">.</span><span class="ident" id="6449405">ImportPos</span>&nbsp;<span class="op" id="6449415">=</span>&nbsp;<span class="ident" id="6449417"><a href="/go/build/build.go.html#6454256">cleanImports</a></span><span class="op" id="6449429">(</span><span class="ident" id="6449430"><a href="/go/build/build.go.html#6445113">imported</a></span><span class="op" id="6449438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449441"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449442">.</span><span class="ident" id="6449443">TestImports</span><span class="op" id="6449454">,</span>&nbsp;<span class="ident" id="6449456"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449457">.</span><span class="ident" id="6449458">TestImportPos</span>&nbsp;<span class="op" id="6449472">=</span>&nbsp;<span class="ident" id="6449474"><a href="/go/build/build.go.html#6454256">cleanImports</a></span><span class="op" id="6449486">(</span><span class="ident" id="6449487"><a href="/go/build/build.go.html#6445160">testImported</a></span><span class="op" id="6449499">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449502"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449503">.</span><span class="ident" id="6449504">XTestImports</span><span class="op" id="6449516">,</span>&nbsp;<span class="ident" id="6449518"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449519">.</span><span class="ident" id="6449520">XTestImportPos</span>&nbsp;<span class="op" id="6449535">=</span>&nbsp;<span class="ident" id="6449537"><a href="/go/build/build.go.html#6454256">cleanImports</a></span><span class="op" id="6449549">(</span><span class="ident" id="6449550"><a href="/go/build/build.go.html#6445211">xTestImported</a></span><span class="op" id="6449563">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449567">//&nbsp;add&nbsp;the&nbsp;.S&nbsp;files&nbsp;only&nbsp;if&nbsp;we&nbsp;are&nbsp;using&nbsp;cgo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449613">//&nbsp;(which&nbsp;means&nbsp;gcc&nbsp;will&nbsp;compile&nbsp;them).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449654">//&nbsp;The&nbsp;standard&nbsp;assemblers&nbsp;expect&nbsp;.s&nbsp;files.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449699">if</span>&nbsp;<span class="builtinfunc" id="6449702">len</span><span class="op" id="6449705">(</span><span class="ident" id="6449706"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449707">.</span><span class="ident" id="6449708">CgoFiles</span><span class="op" id="6449716">)</span>&nbsp;<span class="op" id="6449718">&gt;</span>&nbsp;<span class="num" id="6449720">0</span>&nbsp;<span class="op" id="6449722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449726"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449727">.</span><span class="ident" id="6449728">SFiles</span>&nbsp;<span class="op" id="6449735">=</span>&nbsp;<span class="builtinfunc" id="6449737">append</span><span class="op" id="6449743">(</span><span class="ident" id="6449744"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449745">.</span><span class="ident" id="6449746">SFiles</span><span class="op" id="6449752">,</span>&nbsp;<span class="ident" id="6449754"><a href="/go/build/build.go.html#6445025">Sfiles</a></span><span class="op" id="6449760">...</span><span class="op" id="6449763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449767"><a href="/go/build/build.go.html#6426118">sort</a></span><span class="op" id="6449771">.</span><span class="ident" id="6449772">Strings</span><span class="op" id="6449779">(</span><span class="ident" id="6449780"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449781">.</span><span class="ident" id="6449782">SFiles</span><span class="op" id="6449788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449795">return</span>&nbsp;<span class="ident" id="6449802"><a href="/go/build/build.go.html#6441032">p</a></span><span class="op" id="6449803">,</span>&nbsp;<span class="ident" id="6449805"><a href="/go/build/build.go.html#6441176">pkgerr</a></span><br>
<span class="lineno"></span><span class="op" id="6449812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6449815">func</span>&nbsp;<span class="ident" id="6449820">findImportComment</span><span class="op" id="6449837">(</span><span class="ident" id="6449838">data</span>&nbsp;<span class="op" id="6449843">[</span><span class="op" id="6449844">]</span><span class="builtintype" id="6449845">byte</span><span class="op" id="6449849">)</span>&nbsp;<span class="op" id="6449851">(</span><span class="ident" id="6449852">s</span>&nbsp;<span class="builtintype" id="6449854">string</span><span class="op" id="6449860">,</span>&nbsp;<span class="ident" id="6449862">line</span>&nbsp;<span class="builtintype" id="6449867">int</span><span class="op" id="6449870">)</span>&nbsp;<span class="op" id="6449872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449875">//&nbsp;expect&nbsp;keyword&nbsp;package</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449902">word</span><span class="op" id="6449906">,</span>&nbsp;<span class="ident" id="6449908"><a href="/go/build/build.go.html#6449838">data</a></span>&nbsp;<span class="op" id="6449913">:=</span>&nbsp;<span class="ident" id="6449916"><a href="/go/build/build.go.html#6451810">parseWord</a></span><span class="op" id="6449925">(</span><span class="ident" id="6449926"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6449930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449933">if</span>&nbsp;<span class="builtintype" id="6449936">string</span><span class="op" id="6449942">(</span><span class="ident" id="6449943"><a href="/go/build/build.go.html#6449902">word</a></span><span class="op" id="6449947">)</span>&nbsp;<span class="op" id="6449949">!=</span>&nbsp;<span class="string" id="6449952">&#34;package&#34;</span>&nbsp;<span class="op" id="6449962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449966">return</span>&nbsp;<span class="string" id="6449973">&#34;&#34;</span><span class="op" id="6449975">,</span>&nbsp;<span class="num" id="6449977">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449984">//&nbsp;expect&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450008">_</span><span class="op" id="6450009">,</span>&nbsp;<span class="ident" id="6450011"><a href="/go/build/build.go.html#6449838">data</a></span>&nbsp;<span class="op" id="6450016">=</span>&nbsp;<span class="ident" id="6450018"><a href="/go/build/build.go.html#6451810">parseWord</a></span><span class="op" id="6450027">(</span><span class="ident" id="6450028"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450032">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6450036">//&nbsp;now&nbsp;ready&nbsp;for&nbsp;import&nbsp;comment,&nbsp;a&nbsp;//&nbsp;or&nbsp;/*&nbsp;*/&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6450092">//&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;on&nbsp;the&nbsp;current&nbsp;line.</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450138">for</span>&nbsp;<span class="builtinfunc" id="6450142">len</span><span class="op" id="6450145">(</span><span class="ident" id="6450146"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450150">)</span>&nbsp;<span class="op" id="6450152">&gt;</span>&nbsp;<span class="num" id="6450154">0</span>&nbsp;<span class="op" id="6450156">&amp;&amp;</span>&nbsp;<span class="op" id="6450159">(</span><span class="ident" id="6450160"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450164">[</span><span class="num" id="6450165">0</span><span class="op" id="6450166">]</span>&nbsp;<span class="op" id="6450168">==</span>&nbsp;<span class="string" id="6450171">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6450175">||</span>&nbsp;<span class="ident" id="6450178"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450182">[</span><span class="num" id="6450183">0</span><span class="op" id="6450184">]</span>&nbsp;<span class="op" id="6450186">==</span>&nbsp;<span class="string" id="6450189">&#39;\t&#39;</span>&nbsp;<span class="op" id="6450194">||</span>&nbsp;<span class="ident" id="6450197"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450201">[</span><span class="num" id="6450202">0</span><span class="op" id="6450203">]</span>&nbsp;<span class="op" id="6450205">==</span>&nbsp;<span class="string" id="6450208">&#39;\r&#39;</span><span class="op" id="6450212">)</span>&nbsp;<span class="op" id="6450214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450218"><a href="/go/build/build.go.html#6449838">data</a></span>&nbsp;<span class="op" id="6450223">=</span>&nbsp;<span class="ident" id="6450225"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450229">[</span><span class="num" id="6450230">1</span><span class="op" id="6450231">:</span><span class="op" id="6450232">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450239">var</span>&nbsp;<span class="ident" id="6450243">comment</span>&nbsp;<span class="op" id="6450251">[</span><span class="op" id="6450252">]</span><span class="builtintype" id="6450253">byte</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450259">switch</span>&nbsp;<span class="op" id="6450266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450269">case</span>&nbsp;<span class="ident" id="6450274"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450279">.</span><span class="ident" id="6450280">HasPrefix</span><span class="op" id="6450289">(</span><span class="ident" id="6450290"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450294">,</span>&nbsp;<span class="ident" id="6450296"><a href="/go/build/build.go.html#6450910">slashSlash</a></span><span class="op" id="6450306">)</span><span class="op" id="6450307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450311">i</span>&nbsp;<span class="op" id="6450313">:=</span>&nbsp;<span class="ident" id="6450316"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450321">.</span><span class="ident" id="6450322">Index</span><span class="op" id="6450327">(</span><span class="ident" id="6450328"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450332">,</span>&nbsp;<span class="ident" id="6450334"><a href="/go/build/build.go.html#6450991">newline</a></span><span class="op" id="6450341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450345">if</span>&nbsp;<span class="ident" id="6450348"><a href="/go/build/build.go.html#6450311">i</a></span>&nbsp;<span class="op" id="6450350">&lt;</span>&nbsp;<span class="num" id="6450352">0</span>&nbsp;<span class="op" id="6450354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450359"><a href="/go/build/build.go.html#6450311">i</a></span>&nbsp;<span class="op" id="6450361">=</span>&nbsp;<span class="builtinfunc" id="6450363">len</span><span class="op" id="6450366">(</span><span class="ident" id="6450367"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450371">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450379"><a href="/go/build/build.go.html#6450243">comment</a></span>&nbsp;<span class="op" id="6450387">=</span>&nbsp;<span class="ident" id="6450389"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450393">[</span><span class="num" id="6450394">2</span><span class="op" id="6450395">:</span><span class="ident" id="6450396"><a href="/go/build/build.go.html#6450311">i</a></span><span class="op" id="6450397">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450400">case</span>&nbsp;<span class="ident" id="6450405"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450410">.</span><span class="ident" id="6450411">HasPrefix</span><span class="op" id="6450420">(</span><span class="ident" id="6450421"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450425">,</span>&nbsp;<span class="ident" id="6450427"><a href="/go/build/build.go.html#6450937">slashStar</a></span><span class="op" id="6450436">)</span><span class="op" id="6450437">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450441"><a href="/go/build/build.go.html#6449838">data</a></span>&nbsp;<span class="op" id="6450446">=</span>&nbsp;<span class="ident" id="6450448"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450452">[</span><span class="num" id="6450453">2</span><span class="op" id="6450454">:</span><span class="op" id="6450455">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450459">i</span>&nbsp;<span class="op" id="6450461">:=</span>&nbsp;<span class="ident" id="6450464"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450469">.</span><span class="ident" id="6450470">Index</span><span class="op" id="6450475">(</span><span class="ident" id="6450476"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450480">,</span>&nbsp;<span class="ident" id="6450482"><a href="/go/build/build.go.html#6450964">starSlash</a></span><span class="op" id="6450491">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450495">if</span>&nbsp;<span class="ident" id="6450498"><a href="/go/build/build.go.html#6450459">i</a></span>&nbsp;<span class="op" id="6450500">&lt;</span>&nbsp;<span class="num" id="6450502">0</span>&nbsp;<span class="op" id="6450504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6450509">//&nbsp;malformed&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450533">return</span>&nbsp;<span class="string" id="6450540">&#34;&#34;</span><span class="op" id="6450542">,</span>&nbsp;<span class="num" id="6450544">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450552"><a href="/go/build/build.go.html#6450243">comment</a></span>&nbsp;<span class="op" id="6450560">=</span>&nbsp;<span class="ident" id="6450562"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450566">[</span><span class="op" id="6450567">:</span><span class="ident" id="6450568"><a href="/go/build/build.go.html#6450459">i</a></span><span class="op" id="6450569">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450573">if</span>&nbsp;<span class="ident" id="6450576"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450581">.</span><span class="ident" id="6450582">Contains</span><span class="op" id="6450590">(</span><span class="ident" id="6450591"><a href="/go/build/build.go.html#6450243">comment</a></span><span class="op" id="6450598">,</span>&nbsp;<span class="ident" id="6450600"><a href="/go/build/build.go.html#6450991">newline</a></span><span class="op" id="6450607">)</span>&nbsp;<span class="op" id="6450609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450614">return</span>&nbsp;<span class="string" id="6450621">&#34;&#34;</span><span class="op" id="6450623">,</span>&nbsp;<span class="num" id="6450625">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450635"><a href="/go/build/build.go.html#6450243">comment</a></span>&nbsp;<span class="op" id="6450643">=</span>&nbsp;<span class="ident" id="6450645"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450650">.</span><span class="ident" id="6450651">TrimSpace</span><span class="op" id="6450660">(</span><span class="ident" id="6450661"><a href="/go/build/build.go.html#6450243">comment</a></span><span class="op" id="6450668">)</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6450672">//&nbsp;split&nbsp;comment&nbsp;into&nbsp;`import`,&nbsp;`&#34;pkg&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450713"><a href="/go/build/build.go.html#6449902">word</a></span><span class="op" id="6450717">,</span>&nbsp;<span class="ident" id="6450719">arg</span>&nbsp;<span class="op" id="6450723">:=</span>&nbsp;<span class="ident" id="6450726"><a href="/go/build/build.go.html#6451810">parseWord</a></span><span class="op" id="6450735">(</span><span class="ident" id="6450736"><a href="/go/build/build.go.html#6450243">comment</a></span><span class="op" id="6450743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450746">if</span>&nbsp;<span class="builtintype" id="6450749">string</span><span class="op" id="6450755">(</span><span class="ident" id="6450756"><a href="/go/build/build.go.html#6449902">word</a></span><span class="op" id="6450760">)</span>&nbsp;<span class="op" id="6450762">!=</span>&nbsp;<span class="string" id="6450765">&#34;import&#34;</span>&nbsp;<span class="op" id="6450774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450778">return</span>&nbsp;<span class="string" id="6450785">&#34;&#34;</span><span class="op" id="6450787">,</span>&nbsp;<span class="num" id="6450789">0</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450796"><a href="/go/build/build.go.html#6449862">line</a></span>&nbsp;<span class="op" id="6450801">=</span>&nbsp;<span class="num" id="6450803">1</span>&nbsp;<span class="op" id="6450805">+</span>&nbsp;<span class="ident" id="6450807"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6450812">.</span><span class="ident" id="6450813">Count</span><span class="op" id="6450818">(</span><span class="ident" id="6450819"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450823">[</span><span class="op" id="6450824">:</span><span class="builtinfunc" id="6450825">cap</span><span class="op" id="6450828">(</span><span class="ident" id="6450829"><a href="/go/build/build.go.html#6449838">data</a></span><span class="op" id="6450833">)</span><span class="op" id="6450834">-</span><span class="builtinfunc" id="6450835">cap</span><span class="op" id="6450838">(</span><span class="ident" id="6450839"><a href="/go/build/build.go.html#6450719">arg</a></span><span class="op" id="6450842">)</span><span class="op" id="6450843">]</span><span class="op" id="6450844">,</span>&nbsp;<span class="ident" id="6450846"><a href="/go/build/build.go.html#6450991">newline</a></span><span class="op" id="6450853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450856">return</span>&nbsp;<span class="ident" id="6450863"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6450870">.</span><span class="ident" id="6450871">TrimSpace</span><span class="op" id="6450880">(</span><span class="builtintype" id="6450881">string</span><span class="op" id="6450887">(</span><span class="ident" id="6450888"><a href="/go/build/build.go.html#6450719">arg</a></span><span class="op" id="6450891">)</span><span class="op" id="6450892">)</span><span class="op" id="6450893">,</span>&nbsp;<span class="ident" id="6450895"><a href="/go/build/build.go.html#6449862">line</a></span><br>
<span class="lineno"></span><span class="op" id="6450900">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="6450903">var</span>&nbsp;<span class="op" id="6450907">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450910">slashSlash</span>&nbsp;<span class="op" id="6450921">=</span>&nbsp;<span class="op" id="6450923">[</span><span class="op" id="6450924">]</span><span class="builtintype" id="6450925">byte</span><span class="op" id="6450929">(</span><span class="string" id="6450930">&#34;//&#34;</span><span class="op" id="6450934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450937">slashStar</span>&nbsp;&nbsp;<span class="op" id="6450948">=</span>&nbsp;<span class="op" id="6450950">[</span><span class="op" id="6450951">]</span><span class="builtintype" id="6450952">byte</span><span class="op" id="6450956">(</span><span class="string" id="6450957">&#34;/*&#34;</span><span class="op" id="6450961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450964">starSlash</span>&nbsp;&nbsp;<span class="op" id="6450975">=</span>&nbsp;<span class="op" id="6450977">[</span><span class="op" id="6450978">]</span><span class="builtintype" id="6450979">byte</span><span class="op" id="6450983">(</span><span class="string" id="6450984">&#34;*/&#34;</span><span class="op" id="6450988">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450991">newline</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451002">=</span>&nbsp;<span class="op" id="6451004">[</span><span class="op" id="6451005">]</span><span class="builtintype" id="6451006">byte</span><span class="op" id="6451010">(</span><span class="string" id="6451011">&#34;\n&#34;</span><span class="op" id="6451015">)</span><br>
<span class="lineno"></span><span class="op" id="6451017">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6451020">//&nbsp;skipSpaceOrComment&nbsp;returns&nbsp;data&nbsp;with&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="6451100">func</span>&nbsp;<span class="ident" id="6451105">skipSpaceOrComment</span><span class="op" id="6451123">(</span><span class="ident" id="6451124">data</span>&nbsp;<span class="op" id="6451129">[</span><span class="op" id="6451130">]</span><span class="builtintype" id="6451131">byte</span><span class="op" id="6451135">)</span>&nbsp;<span class="op" id="6451137">[</span><span class="op" id="6451138">]</span><span class="builtintype" id="6451139">byte</span>&nbsp;<span class="op" id="6451144">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451147">for</span>&nbsp;<span class="builtinfunc" id="6451151">len</span><span class="op" id="6451154">(</span><span class="ident" id="6451155"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451159">)</span>&nbsp;<span class="op" id="6451161">&gt;</span>&nbsp;<span class="num" id="6451163">0</span>&nbsp;<span class="op" id="6451165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451169">switch</span>&nbsp;<span class="ident" id="6451176"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451180">[</span><span class="num" id="6451181">0</span><span class="op" id="6451182">]</span>&nbsp;<span class="op" id="6451184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451188">case</span>&nbsp;<span class="string" id="6451193">&#39;&nbsp;&#39;</span><span class="op" id="6451196">,</span>&nbsp;<span class="string" id="6451198">&#39;\t&#39;</span><span class="op" id="6451202">,</span>&nbsp;<span class="string" id="6451204">&#39;\r&#39;</span><span class="op" id="6451208">,</span>&nbsp;<span class="string" id="6451210">&#39;\n&#39;</span><span class="op" id="6451214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451219"><a href="/go/build/build.go.html#6451124">data</a></span>&nbsp;<span class="op" id="6451224">=</span>&nbsp;<span class="ident" id="6451226"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451230">[</span><span class="num" id="6451231">1</span><span class="op" id="6451232">:</span><span class="op" id="6451233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451238">continue</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451249">case</span>&nbsp;<span class="string" id="6451254">&#39;/&#39;</span><span class="op" id="6451257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451262">if</span>&nbsp;<span class="ident" id="6451265"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6451270">.</span><span class="ident" id="6451271">HasPrefix</span><span class="op" id="6451280">(</span><span class="ident" id="6451281"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451285">,</span>&nbsp;<span class="ident" id="6451287"><a href="/go/build/build.go.html#6450910">slashSlash</a></span><span class="op" id="6451297">)</span>&nbsp;<span class="op" id="6451299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451305">i</span>&nbsp;<span class="op" id="6451307">:=</span>&nbsp;<span class="ident" id="6451310"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6451315">.</span><span class="ident" id="6451316">Index</span><span class="op" id="6451321">(</span><span class="ident" id="6451322"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451326">,</span>&nbsp;<span class="ident" id="6451328"><a href="/go/build/build.go.html#6450991">newline</a></span><span class="op" id="6451335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451341">if</span>&nbsp;<span class="ident" id="6451344"><a href="/go/build/build.go.html#6451305">i</a></span>&nbsp;<span class="op" id="6451346">&lt;</span>&nbsp;<span class="num" id="6451348">0</span>&nbsp;<span class="op" id="6451350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451357">return</span>&nbsp;<span class="ident" id="6451364">nil</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451378"><a href="/go/build/build.go.html#6451124">data</a></span>&nbsp;<span class="op" id="6451383">=</span>&nbsp;<span class="ident" id="6451385"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451389">[</span><span class="ident" id="6451390"><a href="/go/build/build.go.html#6451305">i</a></span><span class="op" id="6451391">+</span><span class="num" id="6451392">1</span><span class="op" id="6451393">:</span><span class="op" id="6451394">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451400">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451417">if</span>&nbsp;<span class="ident" id="6451420"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6451425">.</span><span class="ident" id="6451426">HasPrefix</span><span class="op" id="6451435">(</span><span class="ident" id="6451436"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451440">,</span>&nbsp;<span class="ident" id="6451442"><a href="/go/build/build.go.html#6450937">slashStar</a></span><span class="op" id="6451451">)</span>&nbsp;<span class="op" id="6451453">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451459"><a href="/go/build/build.go.html#6451124">data</a></span>&nbsp;<span class="op" id="6451464">=</span>&nbsp;<span class="ident" id="6451466"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451470">[</span><span class="num" id="6451471">2</span><span class="op" id="6451472">:</span><span class="op" id="6451473">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451479">i</span>&nbsp;<span class="op" id="6451481">:=</span>&nbsp;<span class="ident" id="6451484"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6451489">.</span><span class="ident" id="6451490">Index</span><span class="op" id="6451495">(</span><span class="ident" id="6451496"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451500">,</span>&nbsp;<span class="ident" id="6451502"><a href="/go/build/build.go.html#6450964">starSlash</a></span><span class="op" id="6451511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451517">if</span>&nbsp;<span class="ident" id="6451520"><a href="/go/build/build.go.html#6451479">i</a></span>&nbsp;<span class="op" id="6451522">&lt;</span>&nbsp;<span class="num" id="6451524">0</span>&nbsp;<span class="op" id="6451526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451533">return</span>&nbsp;<span class="ident" id="6451540">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451548">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451554"><a href="/go/build/build.go.html#6451124">data</a></span>&nbsp;<span class="op" id="6451559">=</span>&nbsp;<span class="ident" id="6451561"><a href="/go/build/build.go.html#6451124">data</a></span><span class="op" id="6451565">[</span><span class="ident" id="6451566"><a href="/go/build/build.go.html#6451479">i</a></span><span class="op" id="6451567">+</span><span class="num" id="6451568">2</span><span class="op" id="6451569">:</span><span class="op" id="6451570">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451576">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451596">break</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451606">return</span>&nbsp;<span class="ident" id="6451613"><a href="/go/build/build.go.html#6451124">data</a></span><br>
<span class="lineno"></span><span class="op" id="6451618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6451621">//&nbsp;parseWord&nbsp;skips&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;in&nbsp;data</span><br>
<span class="lineno">880</span><span class="comment" id="6451679">//&nbsp;and&nbsp;then&nbsp;parses&nbsp;the&nbsp;beginning&nbsp;of&nbsp;data&nbsp;as&nbsp;an&nbsp;identifier&nbsp;or&nbsp;keyword,</span><br>
<span class="lineno"></span><span class="comment" id="6451749">//&nbsp;returning&nbsp;that&nbsp;word&nbsp;and&nbsp;what&nbsp;remains&nbsp;after&nbsp;the&nbsp;word.</span><br>
<span class="lineno"></span><span class="keyword" id="6451805">func</span>&nbsp;<span class="ident" id="6451810">parseWord</span><span class="op" id="6451819">(</span><span class="ident" id="6451820">data</span>&nbsp;<span class="op" id="6451825">[</span><span class="op" id="6451826">]</span><span class="builtintype" id="6451827">byte</span><span class="op" id="6451831">)</span>&nbsp;<span class="op" id="6451833">(</span><span class="ident" id="6451834">word</span><span class="op" id="6451838">,</span>&nbsp;<span class="ident" id="6451840">rest</span>&nbsp;<span class="op" id="6451845">[</span><span class="op" id="6451846">]</span><span class="builtintype" id="6451847">byte</span><span class="op" id="6451851">)</span>&nbsp;<span class="op" id="6451853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451856"><a href="/go/build/build.go.html#6451820">data</a></span>&nbsp;<span class="op" id="6451861">=</span>&nbsp;<span class="ident" id="6451863"><a href="/go/build/build.go.html#6451105">skipSpaceOrComment</a></span><span class="op" id="6451881">(</span><span class="ident" id="6451882"><a href="/go/build/build.go.html#6451820">data</a></span><span class="op" id="6451886">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451890">//&nbsp;Parse&nbsp;past&nbsp;leading&nbsp;word&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451930"><a href="/go/build/build.go.html#6451840">rest</a></span>&nbsp;<span class="op" id="6451935">=</span>&nbsp;<span class="ident" id="6451937"><a href="/go/build/build.go.html#6451820">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451943">for</span>&nbsp;<span class="op" id="6451947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451951">r</span><span class="op" id="6451952">,</span>&nbsp;<span class="ident" id="6451954">size</span>&nbsp;<span class="op" id="6451959">:=</span>&nbsp;<span class="ident" id="6451962"><a href="/go/build/build.go.html#6426159">utf8</a></span><span class="op" id="6451966">.</span><span class="ident" id="6451967">DecodeRune</span><span class="op" id="6451977">(</span><span class="ident" id="6451978"><a href="/go/build/build.go.html#6451840">rest</a></span><span class="op" id="6451982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451986">if</span>&nbsp;<span class="ident" id="6451989"><a href="/go/build/build.go.html#6426148">unicode</a></span><span class="op" id="6451996">.</span><span class="ident" id="6451997">IsLetter</span><span class="op" id="6452005">(</span><span class="ident" id="6452006"><a href="/go/build/build.go.html#6451951">r</a></span><span class="op" id="6452007">)</span>&nbsp;<span class="op" id="6452009">||</span>&nbsp;<span class="string" id="6452012">&#39;0&#39;</span>&nbsp;<span class="op" id="6452016">&lt;=</span>&nbsp;<span class="ident" id="6452019"><a href="/go/build/build.go.html#6451951">r</a></span>&nbsp;<span class="op" id="6452021">&amp;&amp;</span>&nbsp;<span class="ident" id="6452024"><a href="/go/build/build.go.html#6451951">r</a></span>&nbsp;<span class="op" id="6452026">&lt;=</span>&nbsp;<span class="string" id="6452029">&#39;9&#39;</span>&nbsp;<span class="op" id="6452033">||</span>&nbsp;<span class="ident" id="6452036"><a href="/go/build/build.go.html#6451951">r</a></span>&nbsp;<span class="op" id="6452038">==</span>&nbsp;<span class="string" id="6452041">&#39;_&#39;</span>&nbsp;<span class="op" id="6452045">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452050"><a href="/go/build/build.go.html#6451840">rest</a></span>&nbsp;<span class="op" id="6452055">=</span>&nbsp;<span class="ident" id="6452057"><a href="/go/build/build.go.html#6451840">rest</a></span><span class="op" id="6452061">[</span><span class="ident" id="6452062"><a href="/go/build/build.go.html#6451954">size</a></span><span class="op" id="6452066">:</span><span class="op" id="6452067">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452072">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452087">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452094">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452098"><a href="/go/build/build.go.html#6451834">word</a></span>&nbsp;<span class="op" id="6452103">=</span>&nbsp;<span class="ident" id="6452105"><a href="/go/build/build.go.html#6451820">data</a></span><span class="op" id="6452109">[</span><span class="op" id="6452110">:</span><span class="builtinfunc" id="6452111">len</span><span class="op" id="6452114">(</span><span class="ident" id="6452115"><a href="/go/build/build.go.html#6451820">data</a></span><span class="op" id="6452119">)</span><span class="op" id="6452120">-</span><span class="builtinfunc" id="6452121">len</span><span class="op" id="6452124">(</span><span class="ident" id="6452125"><a href="/go/build/build.go.html#6451840">rest</a></span><span class="op" id="6452129">)</span><span class="op" id="6452130">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452133">if</span>&nbsp;<span class="builtinfunc" id="6452136">len</span><span class="op" id="6452139">(</span><span class="ident" id="6452140"><a href="/go/build/build.go.html#6451834">word</a></span><span class="op" id="6452144">)</span>&nbsp;<span class="op" id="6452146">==</span>&nbsp;<span class="num" id="6452149">0</span>&nbsp;<span class="op" id="6452151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452155">return</span>&nbsp;<span class="ident" id="6452162">nil</span><span class="op" id="6452165">,</span>&nbsp;<span class="ident" id="6452167">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452172">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452176">return</span>&nbsp;<span class="ident" id="6452183"><a href="/go/build/build.go.html#6451834">word</a></span><span class="op" id="6452187">,</span>&nbsp;<span class="ident" id="6452189"><a href="/go/build/build.go.html#6451840">rest</a></span><br>
<span class="lineno"></span><span class="op" id="6452194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6452197">//&nbsp;MatchFile&nbsp;reports&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno">905</span><span class="comment" id="6452278">//&nbsp;matches&nbsp;the&nbsp;context&nbsp;and&nbsp;would&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;Package&nbsp;created&nbsp;by&nbsp;ImportDir</span><br>
<span class="lineno"></span><span class="comment" id="6452357">//&nbsp;of&nbsp;that&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="6452379">//</span><br>
<span class="lineno"></span><span class="comment" id="6452382">//&nbsp;MatchFile&nbsp;considers&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;and&nbsp;may&nbsp;use&nbsp;ctxt.OpenFile&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6452455">//&nbsp;read&nbsp;some&nbsp;or&nbsp;all&nbsp;of&nbsp;the&nbsp;file&#39;s&nbsp;content.</span><br>
<span class="lineno">910</span><span class="keyword" id="6452498">func</span>&nbsp;<span class="op" id="6452503">(</span><span class="ident" id="6452504">ctxt</span>&nbsp;<span class="op" id="6452509">*</span><span class="ident" id="6452510"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6452517">)</span>&nbsp;<span class="ident" id="6452519">MatchFile</span><span class="op" id="6452528">(</span><span class="ident" id="6452529">dir</span><span class="op" id="6452532">,</span>&nbsp;<span class="ident" id="6452534">name</span>&nbsp;<span class="builtintype" id="6452539">string</span><span class="op" id="6452545">)</span>&nbsp;<span class="op" id="6452547">(</span><span class="ident" id="6452548">match</span>&nbsp;<span class="builtintype" id="6452554">bool</span><span class="op" id="6452558">,</span>&nbsp;<span class="ident" id="6452560">err</span>&nbsp;<span class="builtintype" id="6452564">error</span><span class="op" id="6452569">)</span>&nbsp;<span class="op" id="6452571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452574"><a href="/go/build/build.go.html#6452548">match</a></span><span class="op" id="6452579">,</span>&nbsp;<span class="ident" id="6452581">_</span><span class="op" id="6452582">,</span>&nbsp;<span class="ident" id="6452584">_</span><span class="op" id="6452585">,</span>&nbsp;<span class="ident" id="6452587"><a href="/go/build/build.go.html#6452560">err</a></span>&nbsp;<span class="op" id="6452591">=</span>&nbsp;<span class="ident" id="6452593"><a href="/go/build/build.go.html#6452504">ctxt</a></span><span class="op" id="6452597">.</span><span class="ident" id="6452598">matchFile</span><span class="op" id="6452607">(</span><span class="ident" id="6452608"><a href="/go/build/build.go.html#6452529">dir</a></span><span class="op" id="6452611">,</span>&nbsp;<span class="ident" id="6452613"><a href="/go/build/build.go.html#6452534">name</a></span><span class="op" id="6452617">,</span>&nbsp;<span class="builtintype" id="6452619">false</span><span class="op" id="6452624">,</span>&nbsp;<span class="ident" id="6452626">nil</span><span class="op" id="6452629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452632">return</span><br>
<span class="lineno"></span><span class="op" id="6452639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="comment" id="6452642">//&nbsp;matchFile&nbsp;determines&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="6452726">//&nbsp;should&nbsp;be&nbsp;included&nbsp;in&nbsp;the&nbsp;package&nbsp;being&nbsp;constructed.</span><br>
<span class="lineno"></span><span class="comment" id="6452782">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6452825">//&nbsp;If&nbsp;returnImports&nbsp;is&nbsp;true&nbsp;and&nbsp;name&nbsp;denotes&nbsp;a&nbsp;Go&nbsp;program,&nbsp;matchFile&nbsp;reads</span><br>
<span class="lineno"></span><span class="comment" id="6452900">//&nbsp;until&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;imports&nbsp;(and&nbsp;returns&nbsp;that&nbsp;data)&nbsp;even&nbsp;though&nbsp;it&nbsp;only</span><br>
<span class="lineno">920</span><span class="comment" id="6452976">//&nbsp;considers&nbsp;text&nbsp;until&nbsp;the&nbsp;first&nbsp;non-comment.</span><br>
<span class="lineno"></span><span class="comment" id="6453023">//&nbsp;If&nbsp;allTags&nbsp;is&nbsp;non-nil,&nbsp;matchFile&nbsp;records&nbsp;any&nbsp;encountered&nbsp;build&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6453093">//&nbsp;by&nbsp;setting&nbsp;allTags[tag]&nbsp;=&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="6453128">func</span>&nbsp;<span class="op" id="6453133">(</span><span class="ident" id="6453134">ctxt</span>&nbsp;<span class="op" id="6453139">*</span><span class="ident" id="6453140"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6453147">)</span>&nbsp;<span class="ident" id="6453149">matchFile</span><span class="op" id="6453158">(</span><span class="ident" id="6453159">dir</span><span class="op" id="6453162">,</span>&nbsp;<span class="ident" id="6453164">name</span>&nbsp;<span class="builtintype" id="6453169">string</span><span class="op" id="6453175">,</span>&nbsp;<span class="ident" id="6453177">returnImports</span>&nbsp;<span class="builtintype" id="6453191">bool</span><span class="op" id="6453195">,</span>&nbsp;<span class="ident" id="6453197">allTags</span>&nbsp;<span class="keyword" id="6453205">map</span><span class="op" id="6453208">[</span><span class="builtintype" id="6453209">string</span><span class="op" id="6453215">]</span><span class="builtintype" id="6453216">bool</span><span class="op" id="6453220">)</span>&nbsp;<span class="op" id="6453222">(</span><span class="ident" id="6453223">match</span>&nbsp;<span class="builtintype" id="6453229">bool</span><span class="op" id="6453233">,</span>&nbsp;<span class="ident" id="6453235">data</span>&nbsp;<span class="op" id="6453240">[</span><span class="op" id="6453241">]</span><span class="builtintype" id="6453242">byte</span><span class="op" id="6453246">,</span>&nbsp;<span class="ident" id="6453248">filename</span>&nbsp;<span class="builtintype" id="6453257">string</span><span class="op" id="6453263">,</span>&nbsp;<span class="ident" id="6453265">err</span>&nbsp;<span class="builtintype" id="6453269">error</span><span class="op" id="6453274">)</span>&nbsp;<span class="op" id="6453276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453279">if</span>&nbsp;<span class="ident" id="6453282"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6453289">.</span><span class="ident" id="6453290">HasPrefix</span><span class="op" id="6453299">(</span><span class="ident" id="6453300"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453304">,</span>&nbsp;<span class="string" id="6453306">&#34;_&#34;</span><span class="op" id="6453309">)</span>&nbsp;<span class="op" id="6453311">||</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453316"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6453323">.</span><span class="ident" id="6453324">HasPrefix</span><span class="op" id="6453333">(</span><span class="ident" id="6453334"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453338">,</span>&nbsp;<span class="string" id="6453340">&#34;.&#34;</span><span class="op" id="6453343">)</span>&nbsp;<span class="op" id="6453345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453349">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453361">i</span>&nbsp;<span class="op" id="6453363">:=</span>&nbsp;<span class="ident" id="6453366"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6453373">.</span><span class="ident" id="6453374">LastIndex</span><span class="op" id="6453383">(</span><span class="ident" id="6453384"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453388">,</span>&nbsp;<span class="string" id="6453390">&#34;.&#34;</span><span class="op" id="6453393">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453396">if</span>&nbsp;<span class="ident" id="6453399"><a href="/go/build/build.go.html#6453361">i</a></span>&nbsp;<span class="op" id="6453401">&lt;</span>&nbsp;<span class="num" id="6453403">0</span>&nbsp;<span class="op" id="6453405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453409"><a href="/go/build/build.go.html#6453361">i</a></span>&nbsp;<span class="op" id="6453411">=</span>&nbsp;<span class="builtinfunc" id="6453413">len</span><span class="op" id="6453416">(</span><span class="ident" id="6453417"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453427">ext</span>&nbsp;<span class="op" id="6453431">:=</span>&nbsp;<span class="ident" id="6453434"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453438">[</span><span class="ident" id="6453439"><a href="/go/build/build.go.html#6453361">i</a></span><span class="op" id="6453440">:</span><span class="op" id="6453441">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453445">if</span>&nbsp;<span class="op" id="6453448">!</span><span class="ident" id="6453449"><a href="/go/build/build.go.html#6453134">ctxt</a></span><span class="op" id="6453453">.</span><span class="ident" id="6453454">goodOSArchFile</span><span class="op" id="6453468">(</span><span class="ident" id="6453469"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453473">,</span>&nbsp;<span class="ident" id="6453475"><a href="/go/build/build.go.html#6453197">allTags</a></span><span class="op" id="6453482">)</span>&nbsp;<span class="op" id="6453484">&amp;&amp;</span>&nbsp;<span class="op" id="6453487">!</span><span class="ident" id="6453488"><a href="/go/build/build.go.html#6453134">ctxt</a></span><span class="op" id="6453492">.</span><span class="ident" id="6453493">UseAllFiles</span>&nbsp;<span class="op" id="6453505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453509">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453521">switch</span>&nbsp;<span class="ident" id="6453528"><a href="/go/build/build.go.html#6453427">ext</a></span>&nbsp;<span class="op" id="6453532">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453535">case</span>&nbsp;<span class="string" id="6453540">&#34;.go&#34;</span><span class="op" id="6453545">,</span>&nbsp;<span class="string" id="6453547">&#34;.c&#34;</span><span class="op" id="6453551">,</span>&nbsp;<span class="string" id="6453553">&#34;.cc&#34;</span><span class="op" id="6453558">,</span>&nbsp;<span class="string" id="6453560">&#34;.cxx&#34;</span><span class="op" id="6453566">,</span>&nbsp;<span class="string" id="6453568">&#34;.cpp&#34;</span><span class="op" id="6453574">,</span>&nbsp;<span class="string" id="6453576">&#34;.m&#34;</span><span class="op" id="6453580">,</span>&nbsp;<span class="string" id="6453582">&#34;.s&#34;</span><span class="op" id="6453586">,</span>&nbsp;<span class="string" id="6453588">&#34;.h&#34;</span><span class="op" id="6453592">,</span>&nbsp;<span class="string" id="6453594">&#34;.hh&#34;</span><span class="op" id="6453599">,</span>&nbsp;<span class="string" id="6453601">&#34;.hpp&#34;</span><span class="op" id="6453607">,</span>&nbsp;<span class="string" id="6453609">&#34;.hxx&#34;</span><span class="op" id="6453615">,</span>&nbsp;<span class="string" id="6453617">&#34;.S&#34;</span><span class="op" id="6453621">,</span>&nbsp;<span class="string" id="6453623">&#34;.swig&#34;</span><span class="op" id="6453630">,</span>&nbsp;<span class="string" id="6453632">&#34;.swigcxx&#34;</span><span class="op" id="6453642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6453646">//&nbsp;tentatively&nbsp;okay&nbsp;-&nbsp;read&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453687">case</span>&nbsp;<span class="string" id="6453692">&#34;.syso&#34;</span><span class="op" id="6453699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6453703">//&nbsp;binary,&nbsp;no&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453727"><a href="/go/build/build.go.html#6453223">match</a></span>&nbsp;<span class="op" id="6453733">=</span>&nbsp;<span class="builtintype" id="6453735">true</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453742">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453750">default</span><span class="op" id="6453757">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6453761">//&nbsp;skip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453771">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453779">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453783"><a href="/go/build/build.go.html#6453248">filename</a></span>&nbsp;<span class="op" id="6453792">=</span>&nbsp;<span class="ident" id="6453794"><a href="/go/build/build.go.html#6453134">ctxt</a></span><span class="op" id="6453798">.</span><span class="ident" id="6453799">joinPath</span><span class="op" id="6453807">(</span><span class="ident" id="6453808"><a href="/go/build/build.go.html#6453159">dir</a></span><span class="op" id="6453811">,</span>&nbsp;<span class="ident" id="6453813"><a href="/go/build/build.go.html#6453164">name</a></span><span class="op" id="6453817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453820">f</span><span class="op" id="6453821">,</span>&nbsp;<span class="ident" id="6453823"><a href="/go/build/build.go.html#6453265">err</a></span>&nbsp;<span class="op" id="6453827">:=</span>&nbsp;<span class="ident" id="6453830"><a href="/go/build/build.go.html#6453134">ctxt</a></span><span class="op" id="6453834">.</span><span class="ident" id="6453835">openFile</span><span class="op" id="6453843">(</span><span class="ident" id="6453844"><a href="/go/build/build.go.html#6453248">filename</a></span><span class="op" id="6453852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453855">if</span>&nbsp;<span class="ident" id="6453858"><a href="/go/build/build.go.html#6453265">err</a></span>&nbsp;<span class="op" id="6453862">!=</span>&nbsp;<span class="ident" id="6453865">nil</span>&nbsp;<span class="op" id="6453869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453873">return</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6453885">if</span>&nbsp;<span class="ident" id="6453888"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6453895">.</span><span class="ident" id="6453896">HasSuffix</span><span class="op" id="6453905">(</span><span class="ident" id="6453906"><a href="/go/build/build.go.html#6453248">filename</a></span><span class="op" id="6453914">,</span>&nbsp;<span class="string" id="6453916">&#34;.go&#34;</span><span class="op" id="6453921">)</span>&nbsp;<span class="op" id="6453923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453927"><a href="/go/build/build.go.html#6453235">data</a></span><span class="op" id="6453931">,</span>&nbsp;<span class="ident" id="6453933"><a href="/go/build/build.go.html#6453265">err</a></span>&nbsp;<span class="op" id="6453937">=</span>&nbsp;<span class="ident" id="6453939"><a href="/go/build/read.go.html#6474625">readImports</a></span><span class="op" id="6453950">(</span><span class="ident" id="6453951"><a href="/go/build/build.go.html#6453820">f</a></span><span class="op" id="6453952">,</span>&nbsp;<span class="builtintype" id="6453954">false</span><span class="op" id="6453959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453962">}</span>&nbsp;<span class="keyword" id="6453964">else</span>&nbsp;<span class="op" id="6453969">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453973"><a href="/go/build/build.go.html#6453235">data</a></span><span class="op" id="6453977">,</span>&nbsp;<span class="ident" id="6453979"><a href="/go/build/build.go.html#6453265">err</a></span>&nbsp;<span class="op" id="6453983">=</span>&nbsp;<span class="ident" id="6453985"><a href="/go/build/read.go.html#6474212">readComments</a></span><span class="op" id="6453997">(</span><span class="ident" id="6453998"><a href="/go/build/build.go.html#6453820">f</a></span><span class="op" id="6453999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454005"><a href="/go/build/build.go.html#6453820">f</a></span><span class="op" id="6454006">.</span><span class="ident" id="6454007">Close</span><span class="op" id="6454012">(</span><span class="op" id="6454013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454016">if</span>&nbsp;<span class="ident" id="6454019"><a href="/go/build/build.go.html#6453265">err</a></span>&nbsp;<span class="op" id="6454023">!=</span>&nbsp;<span class="ident" id="6454026">nil</span>&nbsp;<span class="op" id="6454030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454034"><a href="/go/build/build.go.html#6453265">err</a></span>&nbsp;<span class="op" id="6454038">=</span>&nbsp;<span class="ident" id="6454040"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6454043">.</span><span class="ident" id="6454044">Errorf</span><span class="op" id="6454050">(</span><span class="string" id="6454051">&#34;read&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="6454064">,</span>&nbsp;<span class="ident" id="6454066"><a href="/go/build/build.go.html#6453248">filename</a></span><span class="op" id="6454074">,</span>&nbsp;<span class="ident" id="6454076"><a href="/go/build/build.go.html#6453265">err</a></span><span class="op" id="6454079">)</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454083">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6454095">//&nbsp;Look&nbsp;for&nbsp;+build&nbsp;comments&nbsp;to&nbsp;accept&nbsp;or&nbsp;reject&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454154">if</span>&nbsp;<span class="op" id="6454157">!</span><span class="ident" id="6454158"><a href="/go/build/build.go.html#6453134">ctxt</a></span><span class="op" id="6454162">.</span><span class="ident" id="6454163">shouldBuild</span><span class="op" id="6454174">(</span><span class="ident" id="6454175"><a href="/go/build/build.go.html#6453235">data</a></span><span class="op" id="6454179">,</span>&nbsp;<span class="ident" id="6454181"><a href="/go/build/build.go.html#6453197">allTags</a></span><span class="op" id="6454188">)</span>&nbsp;<span class="op" id="6454190">&amp;&amp;</span>&nbsp;<span class="op" id="6454193">!</span><span class="ident" id="6454194"><a href="/go/build/build.go.html#6453134">ctxt</a></span><span class="op" id="6454198">.</span><span class="ident" id="6454199">UseAllFiles</span>&nbsp;<span class="op" id="6454211">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454215">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454227"><a href="/go/build/build.go.html#6453223">match</a></span>&nbsp;<span class="op" id="6454233">=</span>&nbsp;<span class="builtintype" id="6454235">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454241">return</span><br>
<span class="lineno">975</span><span class="op" id="6454248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6454251">func</span>&nbsp;<span class="ident" id="6454256">cleanImports</span><span class="op" id="6454268">(</span><span class="ident" id="6454269">m</span>&nbsp;<span class="keyword" id="6454271">map</span><span class="op" id="6454274">[</span><span class="builtintype" id="6454275">string</span><span class="op" id="6454281">]</span><span class="op" id="6454282">[</span><span class="op" id="6454283">]</span><span class="ident" id="6454284"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6454289">.</span><span class="ident" id="6454290">Position</span><span class="op" id="6454298">)</span>&nbsp;<span class="op" id="6454300">(</span><span class="op" id="6454301">[</span><span class="op" id="6454302">]</span><span class="builtintype" id="6454303">string</span><span class="op" id="6454309">,</span>&nbsp;<span class="keyword" id="6454311">map</span><span class="op" id="6454314">[</span><span class="builtintype" id="6454315">string</span><span class="op" id="6454321">]</span><span class="op" id="6454322">[</span><span class="op" id="6454323">]</span><span class="ident" id="6454324"><a href="/go/build/build.go.html#6426030">token</a></span><span class="op" id="6454329">.</span><span class="ident" id="6454330">Position</span><span class="op" id="6454338">)</span>&nbsp;<span class="op" id="6454340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454343">all</span>&nbsp;<span class="op" id="6454347">:=</span>&nbsp;<span class="builtinfunc" id="6454350">make</span><span class="op" id="6454354">(</span><span class="op" id="6454355">[</span><span class="op" id="6454356">]</span><span class="builtintype" id="6454357">string</span><span class="op" id="6454363">,</span>&nbsp;<span class="num" id="6454365">0</span><span class="op" id="6454366">,</span>&nbsp;<span class="builtinfunc" id="6454368">len</span><span class="op" id="6454371">(</span><span class="ident" id="6454372"><a href="/go/build/build.go.html#6454269">m</a></span><span class="op" id="6454373">)</span><span class="op" id="6454374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454377">for</span>&nbsp;<span class="ident" id="6454381">path</span>&nbsp;<span class="op" id="6454386">:=</span>&nbsp;<span class="keyword" id="6454389">range</span>&nbsp;<span class="ident" id="6454395"><a href="/go/build/build.go.html#6454269">m</a></span>&nbsp;<span class="op" id="6454397">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454401"><a href="/go/build/build.go.html#6454343">all</a></span>&nbsp;<span class="op" id="6454405">=</span>&nbsp;<span class="builtinfunc" id="6454407">append</span><span class="op" id="6454413">(</span><span class="ident" id="6454414"><a href="/go/build/build.go.html#6454343">all</a></span><span class="op" id="6454417">,</span>&nbsp;<span class="ident" id="6454419"><a href="/go/build/build.go.html#6454381">path</a></span><span class="op" id="6454423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454429"><a href="/go/build/build.go.html#6426118">sort</a></span><span class="op" id="6454433">.</span><span class="ident" id="6454434">Strings</span><span class="op" id="6454441">(</span><span class="ident" id="6454442"><a href="/go/build/build.go.html#6454343">all</a></span><span class="op" id="6454445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454448">return</span>&nbsp;<span class="ident" id="6454455"><a href="/go/build/build.go.html#6454343">all</a></span><span class="op" id="6454458">,</span>&nbsp;<span class="ident" id="6454460"><a href="/go/build/build.go.html#6454269">m</a></span><br>
<span class="lineno"></span><span class="op" id="6454462">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="6454465">//&nbsp;Import&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.Import.</span><br>
<span class="lineno"></span><span class="keyword" id="6454508">func</span>&nbsp;<span class="ident" id="6454513">Import</span><span class="op" id="6454519">(</span><span class="ident" id="6454520">path</span><span class="op" id="6454524">,</span>&nbsp;<span class="ident" id="6454526">srcDir</span>&nbsp;<span class="builtintype" id="6454533">string</span><span class="op" id="6454539">,</span>&nbsp;<span class="ident" id="6454541">mode</span>&nbsp;<span class="ident" id="6454546"><a href="/go/build/build.go.html#6435661">ImportMode</a></span><span class="op" id="6454556">)</span>&nbsp;<span class="op" id="6454558">(</span><span class="op" id="6454559">*</span><span class="ident" id="6454560"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6454567">,</span>&nbsp;<span class="builtintype" id="6454569">error</span><span class="op" id="6454574">)</span>&nbsp;<span class="op" id="6454576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454579">return</span>&nbsp;<span class="ident" id="6454586"><a href="/go/build/build.go.html#6433773">Default</a></span><span class="op" id="6454593">.</span><span class="ident" id="6454594">Import</span><span class="op" id="6454600">(</span><span class="ident" id="6454601"><a href="/go/build/build.go.html#6454520">path</a></span><span class="op" id="6454605">,</span>&nbsp;<span class="ident" id="6454607"><a href="/go/build/build.go.html#6454526">srcDir</a></span><span class="op" id="6454613">,</span>&nbsp;<span class="ident" id="6454615"><a href="/go/build/build.go.html#6454541">mode</a></span><span class="op" id="6454619">)</span><br>
<span class="lineno"></span><span class="op" id="6454621">}</span><br>
<span class="lineno">990</span><br>
<span class="lineno"></span><span class="comment" id="6454624">//&nbsp;ImportDir&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.ImportDir.</span><br>
<span class="lineno"></span><span class="keyword" id="6454673">func</span>&nbsp;<span class="ident" id="6454678">ImportDir</span><span class="op" id="6454687">(</span><span class="ident" id="6454688">dir</span>&nbsp;<span class="builtintype" id="6454692">string</span><span class="op" id="6454698">,</span>&nbsp;<span class="ident" id="6454700">mode</span>&nbsp;<span class="ident" id="6454705"><a href="/go/build/build.go.html#6435661">ImportMode</a></span><span class="op" id="6454715">)</span>&nbsp;<span class="op" id="6454717">(</span><span class="op" id="6454718">*</span><span class="ident" id="6454719"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6454726">,</span>&nbsp;<span class="builtintype" id="6454728">error</span><span class="op" id="6454733">)</span>&nbsp;<span class="op" id="6454735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454738">return</span>&nbsp;<span class="ident" id="6454745"><a href="/go/build/build.go.html#6433773">Default</a></span><span class="op" id="6454752">.</span><span class="ident" id="6454753">ImportDir</span><span class="op" id="6454762">(</span><span class="ident" id="6454763"><a href="/go/build/build.go.html#6454688">dir</a></span><span class="op" id="6454766">,</span>&nbsp;<span class="ident" id="6454768"><a href="/go/build/build.go.html#6454700">mode</a></span><span class="op" id="6454772">)</span><br>
<span class="lineno"></span><span class="op" id="6454774">}</span><br>
<span class="lineno">995</span><br>
<span class="lineno"></span><span class="keyword" id="6454777">var</span>&nbsp;<span class="ident" id="6454781">slashslash</span>&nbsp;<span class="op" id="6454792">=</span>&nbsp;<span class="op" id="6454794">[</span><span class="op" id="6454795">]</span><span class="builtintype" id="6454796">byte</span><span class="op" id="6454800">(</span><span class="string" id="6454801">&#34;//&#34;</span><span class="op" id="6454805">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6454808">//&nbsp;shouldBuild&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;use&nbsp;this&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="6454868">//&nbsp;The&nbsp;rule&nbsp;is&nbsp;that&nbsp;in&nbsp;the&nbsp;file&#39;s&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments</span><br>
<span class="lineno">1000</span><span class="comment" id="6454929">//&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="6454988">//&nbsp;(to&nbsp;avoid&nbsp;including&nbsp;a&nbsp;Go&nbsp;package&nbsp;clause&nbsp;doc&nbsp;comment),</span><br>
<span class="lineno"></span><span class="comment" id="6455045">//&nbsp;lines&nbsp;beginning&nbsp;with&nbsp;&#39;//&nbsp;+build&#39;&nbsp;are&nbsp;taken&nbsp;as&nbsp;build&nbsp;directives.</span><br>
<span class="lineno"></span><span class="comment" id="6455112">//</span><br>
<span class="lineno"></span><span class="comment" id="6455115">//&nbsp;The&nbsp;file&nbsp;is&nbsp;accepted&nbsp;only&nbsp;if&nbsp;each&nbsp;such&nbsp;line&nbsp;lists&nbsp;something</span><br>
<span class="lineno">1005</span><span class="comment" id="6455178">//&nbsp;matching&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="6455214">//</span><br>
<span class="lineno"></span><span class="comment" id="6455217">//&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;+build&nbsp;windows&nbsp;linux</span><br>
<span class="lineno"></span><span class="comment" id="6455244">//</span><br>
<span class="lineno"></span><span class="comment" id="6455247">//&nbsp;marks&nbsp;the&nbsp;file&nbsp;as&nbsp;applicable&nbsp;only&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Linux.</span><br>
<span class="lineno">1010</span><span class="comment" id="6455306">//</span><br>
<span class="lineno"></span><span class="keyword" id="6455309">func</span>&nbsp;<span class="op" id="6455314">(</span><span class="ident" id="6455315">ctxt</span>&nbsp;<span class="op" id="6455320">*</span><span class="ident" id="6455321"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6455328">)</span>&nbsp;<span class="ident" id="6455330">shouldBuild</span><span class="op" id="6455341">(</span><span class="ident" id="6455342">content</span>&nbsp;<span class="op" id="6455350">[</span><span class="op" id="6455351">]</span><span class="builtintype" id="6455352">byte</span><span class="op" id="6455356">,</span>&nbsp;<span class="ident" id="6455358">allTags</span>&nbsp;<span class="keyword" id="6455366">map</span><span class="op" id="6455369">[</span><span class="builtintype" id="6455370">string</span><span class="op" id="6455376">]</span><span class="builtintype" id="6455377">bool</span><span class="op" id="6455381">)</span>&nbsp;<span class="builtintype" id="6455383">bool</span>&nbsp;<span class="op" id="6455388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455391">//&nbsp;Pass&nbsp;1.&nbsp;Identify&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments&nbsp;and&nbsp;blank&nbsp;lines,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455456">//&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455500">end</span>&nbsp;<span class="op" id="6455504">:=</span>&nbsp;<span class="num" id="6455507">0</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455510">p</span>&nbsp;<span class="op" id="6455512">:=</span>&nbsp;<span class="ident" id="6455515"><a href="/go/build/build.go.html#6455342">content</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455524">for</span>&nbsp;<span class="builtinfunc" id="6455528">len</span><span class="op" id="6455531">(</span><span class="ident" id="6455532"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6455533">)</span>&nbsp;<span class="op" id="6455535">&gt;</span>&nbsp;<span class="num" id="6455537">0</span>&nbsp;<span class="op" id="6455539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455543">line</span>&nbsp;<span class="op" id="6455548">:=</span>&nbsp;<span class="ident" id="6455551"><a href="/go/build/build.go.html#6455510">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455555">if</span>&nbsp;<span class="ident" id="6455558">i</span>&nbsp;<span class="op" id="6455560">:=</span>&nbsp;<span class="ident" id="6455563"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6455568">.</span><span class="ident" id="6455569">IndexByte</span><span class="op" id="6455578">(</span><span class="ident" id="6455579"><a href="/go/build/build.go.html#6455543">line</a></span><span class="op" id="6455583">,</span>&nbsp;<span class="string" id="6455585">&#39;\n&#39;</span><span class="op" id="6455589">)</span><span class="op" id="6455590">;</span>&nbsp;<span class="ident" id="6455592"><a href="/go/build/build.go.html#6455558">i</a></span>&nbsp;<span class="op" id="6455594">&gt;=</span>&nbsp;<span class="num" id="6455597">0</span>&nbsp;<span class="op" id="6455599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455604"><a href="/go/build/build.go.html#6455543">line</a></span><span class="op" id="6455608">,</span>&nbsp;<span class="ident" id="6455610"><a href="/go/build/build.go.html#6455510">p</a></span>&nbsp;<span class="op" id="6455612">=</span>&nbsp;<span class="ident" id="6455614"><a href="/go/build/build.go.html#6455543">line</a></span><span class="op" id="6455618">[</span><span class="op" id="6455619">:</span><span class="ident" id="6455620"><a href="/go/build/build.go.html#6455558">i</a></span><span class="op" id="6455621">]</span><span class="op" id="6455622">,</span>&nbsp;<span class="ident" id="6455624"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6455625">[</span><span class="ident" id="6455626"><a href="/go/build/build.go.html#6455558">i</a></span><span class="op" id="6455627">+</span><span class="num" id="6455628">1</span><span class="op" id="6455629">:</span><span class="op" id="6455630">]</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455634">}</span>&nbsp;<span class="keyword" id="6455636">else</span>&nbsp;<span class="op" id="6455641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455646"><a href="/go/build/build.go.html#6455510">p</a></span>&nbsp;<span class="op" id="6455648">=</span>&nbsp;<span class="ident" id="6455650"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6455651">[</span><span class="builtinfunc" id="6455652">len</span><span class="op" id="6455655">(</span><span class="ident" id="6455656"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6455657">)</span><span class="op" id="6455658">:</span><span class="op" id="6455659">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455667"><a href="/go/build/build.go.html#6455543">line</a></span>&nbsp;<span class="op" id="6455672">=</span>&nbsp;<span class="ident" id="6455674"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6455679">.</span><span class="ident" id="6455680">TrimSpace</span><span class="op" id="6455689">(</span><span class="ident" id="6455690"><a href="/go/build/build.go.html#6455543">line</a></span><span class="op" id="6455694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455698">if</span>&nbsp;<span class="builtinfunc" id="6455701">len</span><span class="op" id="6455704">(</span><span class="ident" id="6455705"><a href="/go/build/build.go.html#6455543">line</a></span><span class="op" id="6455709">)</span>&nbsp;<span class="op" id="6455711">==</span>&nbsp;<span class="num" id="6455714">0</span>&nbsp;<span class="op" id="6455716">{</span>&nbsp;<span class="comment" id="6455718">//&nbsp;Blank&nbsp;line</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455735"><a href="/go/build/build.go.html#6455500">end</a></span>&nbsp;<span class="op" id="6455739">=</span>&nbsp;<span class="builtinfunc" id="6455741">len</span><span class="op" id="6455744">(</span><span class="ident" id="6455745"><a href="/go/build/build.go.html#6455342">content</a></span><span class="op" id="6455752">)</span>&nbsp;<span class="op" id="6455754">-</span>&nbsp;<span class="builtinfunc" id="6455756">len</span><span class="op" id="6455759">(</span><span class="ident" id="6455760"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6455761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455766">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455781">if</span>&nbsp;<span class="op" id="6455784">!</span><span class="ident" id="6455785"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6455790">.</span><span class="ident" id="6455791">HasPrefix</span><span class="op" id="6455800">(</span><span class="ident" id="6455801"><a href="/go/build/build.go.html#6455543">line</a></span><span class="op" id="6455805">,</span>&nbsp;<span class="ident" id="6455807"><a href="/go/build/build.go.html#6454781">slashslash</a></span><span class="op" id="6455817">)</span>&nbsp;<span class="op" id="6455819">{</span>&nbsp;<span class="comment" id="6455821">//&nbsp;Not&nbsp;comment&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455844">break</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455858"><a href="/go/build/build.go.html#6455342">content</a></span>&nbsp;<span class="op" id="6455866">=</span>&nbsp;<span class="ident" id="6455868"><a href="/go/build/build.go.html#6455342">content</a></span><span class="op" id="6455875">[</span><span class="op" id="6455876">:</span><span class="ident" id="6455877"><a href="/go/build/build.go.html#6455500">end</a></span><span class="op" id="6455880">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455884">//&nbsp;Pass&nbsp;2.&nbsp;&nbsp;Process&nbsp;each&nbsp;line&nbsp;in&nbsp;the&nbsp;run.</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455927"><a href="/go/build/build.go.html#6455510">p</a></span>&nbsp;<span class="op" id="6455929">=</span>&nbsp;<span class="ident" id="6455931"><a href="/go/build/build.go.html#6455342">content</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455940">allok</span>&nbsp;<span class="op" id="6455946">:=</span>&nbsp;<span class="builtintype" id="6455949">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455955">for</span>&nbsp;<span class="builtinfunc" id="6455959">len</span><span class="op" id="6455962">(</span><span class="ident" id="6455963"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6455964">)</span>&nbsp;<span class="op" id="6455966">&gt;</span>&nbsp;<span class="num" id="6455968">0</span>&nbsp;<span class="op" id="6455970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455974">line</span>&nbsp;<span class="op" id="6455979">:=</span>&nbsp;<span class="ident" id="6455982"><a href="/go/build/build.go.html#6455510">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455986">if</span>&nbsp;<span class="ident" id="6455989">i</span>&nbsp;<span class="op" id="6455991">:=</span>&nbsp;<span class="ident" id="6455994"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6455999">.</span><span class="ident" id="6456000">IndexByte</span><span class="op" id="6456009">(</span><span class="ident" id="6456010"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456014">,</span>&nbsp;<span class="string" id="6456016">&#39;\n&#39;</span><span class="op" id="6456020">)</span><span class="op" id="6456021">;</span>&nbsp;<span class="ident" id="6456023"><a href="/go/build/build.go.html#6455989">i</a></span>&nbsp;<span class="op" id="6456025">&gt;=</span>&nbsp;<span class="num" id="6456028">0</span>&nbsp;<span class="op" id="6456030">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456035"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456039">,</span>&nbsp;<span class="ident" id="6456041"><a href="/go/build/build.go.html#6455510">p</a></span>&nbsp;<span class="op" id="6456043">=</span>&nbsp;<span class="ident" id="6456045"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456049">[</span><span class="op" id="6456050">:</span><span class="ident" id="6456051"><a href="/go/build/build.go.html#6455989">i</a></span><span class="op" id="6456052">]</span><span class="op" id="6456053">,</span>&nbsp;<span class="ident" id="6456055"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6456056">[</span><span class="ident" id="6456057"><a href="/go/build/build.go.html#6455989">i</a></span><span class="op" id="6456058">+</span><span class="num" id="6456059">1</span><span class="op" id="6456060">:</span><span class="op" id="6456061">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456065">}</span>&nbsp;<span class="keyword" id="6456067">else</span>&nbsp;<span class="op" id="6456072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456077"><a href="/go/build/build.go.html#6455510">p</a></span>&nbsp;<span class="op" id="6456079">=</span>&nbsp;<span class="ident" id="6456081"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6456082">[</span><span class="builtinfunc" id="6456083">len</span><span class="op" id="6456086">(</span><span class="ident" id="6456087"><a href="/go/build/build.go.html#6455510">p</a></span><span class="op" id="6456088">)</span><span class="op" id="6456089">:</span><span class="op" id="6456090">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456098"><a href="/go/build/build.go.html#6455974">line</a></span>&nbsp;<span class="op" id="6456103">=</span>&nbsp;<span class="ident" id="6456105"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6456110">.</span><span class="ident" id="6456111">TrimSpace</span><span class="op" id="6456120">(</span><span class="ident" id="6456121"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456125">)</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456129">if</span>&nbsp;<span class="ident" id="6456132"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6456137">.</span><span class="ident" id="6456138">HasPrefix</span><span class="op" id="6456147">(</span><span class="ident" id="6456148"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456152">,</span>&nbsp;<span class="ident" id="6456154"><a href="/go/build/build.go.html#6454781">slashslash</a></span><span class="op" id="6456164">)</span>&nbsp;<span class="op" id="6456166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456171"><a href="/go/build/build.go.html#6455974">line</a></span>&nbsp;<span class="op" id="6456176">=</span>&nbsp;<span class="ident" id="6456178"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6456183">.</span><span class="ident" id="6456184">TrimSpace</span><span class="op" id="6456193">(</span><span class="ident" id="6456194"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456198">[</span><span class="builtinfunc" id="6456199">len</span><span class="op" id="6456202">(</span><span class="ident" id="6456203"><a href="/go/build/build.go.html#6454781">slashslash</a></span><span class="op" id="6456213">)</span><span class="op" id="6456214">:</span><span class="op" id="6456215">]</span><span class="op" id="6456216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456221">if</span>&nbsp;<span class="builtinfunc" id="6456224">len</span><span class="op" id="6456227">(</span><span class="ident" id="6456228"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456232">)</span>&nbsp;<span class="op" id="6456234">&gt;</span>&nbsp;<span class="num" id="6456236">0</span>&nbsp;<span class="op" id="6456238">&amp;&amp;</span>&nbsp;<span class="ident" id="6456241"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456245">[</span><span class="num" id="6456246">0</span><span class="op" id="6456247">]</span>&nbsp;<span class="op" id="6456249">==</span>&nbsp;<span class="string" id="6456252">&#39;+&#39;</span>&nbsp;<span class="op" id="6456256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6456262">//&nbsp;Looks&nbsp;like&nbsp;a&nbsp;comment&nbsp;+line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456297">f</span>&nbsp;<span class="op" id="6456299">:=</span>&nbsp;<span class="ident" id="6456302"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6456309">.</span><span class="ident" id="6456310">Fields</span><span class="op" id="6456316">(</span><span class="builtintype" id="6456317">string</span><span class="op" id="6456323">(</span><span class="ident" id="6456324"><a href="/go/build/build.go.html#6455974">line</a></span><span class="op" id="6456328">)</span><span class="op" id="6456329">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456335">if</span>&nbsp;<span class="ident" id="6456338"><a href="/go/build/build.go.html#6456297">f</a></span><span class="op" id="6456339">[</span><span class="num" id="6456340">0</span><span class="op" id="6456341">]</span>&nbsp;<span class="op" id="6456343">==</span>&nbsp;<span class="string" id="6456346">&#34;+build&#34;</span>&nbsp;<span class="op" id="6456355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456362">ok</span>&nbsp;<span class="op" id="6456365">:=</span>&nbsp;<span class="builtintype" id="6456368">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456379">for</span>&nbsp;<span class="ident" id="6456383">_</span><span class="op" id="6456384">,</span>&nbsp;<span class="ident" id="6456386">tok</span>&nbsp;<span class="op" id="6456390">:=</span>&nbsp;<span class="keyword" id="6456393">range</span>&nbsp;<span class="ident" id="6456399"><a href="/go/build/build.go.html#6456297">f</a></span><span class="op" id="6456400">[</span><span class="num" id="6456401">1</span><span class="op" id="6456402">:</span><span class="op" id="6456403">]</span>&nbsp;<span class="op" id="6456405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456413">if</span>&nbsp;<span class="ident" id="6456416"><a href="/go/build/build.go.html#6455315">ctxt</a></span><span class="op" id="6456420">.</span><span class="ident" id="6456421">match</span><span class="op" id="6456426">(</span><span class="ident" id="6456427"><a href="/go/build/build.go.html#6456386">tok</a></span><span class="op" id="6456430">,</span>&nbsp;<span class="ident" id="6456432"><a href="/go/build/build.go.html#6455358">allTags</a></span><span class="op" id="6456439">)</span>&nbsp;<span class="op" id="6456441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456450"><a href="/go/build/build.go.html#6456362">ok</a></span>&nbsp;<span class="op" id="6456453">=</span>&nbsp;<span class="builtintype" id="6456455">true</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456480">if</span>&nbsp;<span class="op" id="6456483">!</span><span class="ident" id="6456484"><a href="/go/build/build.go.html#6456362">ok</a></span>&nbsp;<span class="op" id="6456487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456495"><a href="/go/build/build.go.html#6455940">allok</a></span>&nbsp;<span class="op" id="6456501">=</span>&nbsp;<span class="builtintype" id="6456503">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456514">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456536">return</span>&nbsp;<span class="ident" id="6456543"><a href="/go/build/build.go.html#6455940">allok</a></span><br>
<span class="lineno"></span><span class="op" id="6456549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6456552">//&nbsp;saveCgo&nbsp;saves&nbsp;the&nbsp;information&nbsp;from&nbsp;the&nbsp;#cgo&nbsp;lines&nbsp;in&nbsp;the&nbsp;import&nbsp;&#34;C&#34;&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="6456632">//&nbsp;These&nbsp;lines&nbsp;set&nbsp;CFLAGS,&nbsp;CPPFLAGS,&nbsp;CXXFLAGS&nbsp;and&nbsp;LDFLAGS&nbsp;and&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno">1070</span><span class="comment" id="6456716">//&nbsp;that&nbsp;affect&nbsp;the&nbsp;way&nbsp;cgo&#39;s&nbsp;C&nbsp;code&nbsp;is&nbsp;built.</span><br>
<span class="lineno"></span><span class="comment" id="6456762">//</span><br>
<span class="lineno"></span><span class="comment" id="6456765">//&nbsp;TODO(rsc):&nbsp;This&nbsp;duplicates&nbsp;code&nbsp;in&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="comment" id="6456808">//&nbsp;Once&nbsp;the&nbsp;dust&nbsp;settles,&nbsp;remove&nbsp;this&nbsp;code&nbsp;from&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="keyword" id="6456861">func</span>&nbsp;<span class="op" id="6456866">(</span><span class="ident" id="6456867">ctxt</span>&nbsp;<span class="op" id="6456872">*</span><span class="ident" id="6456873"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6456880">)</span>&nbsp;<span class="ident" id="6456882">saveCgo</span><span class="op" id="6456889">(</span><span class="ident" id="6456890">filename</span>&nbsp;<span class="builtintype" id="6456899">string</span><span class="op" id="6456905">,</span>&nbsp;<span class="ident" id="6456907">di</span>&nbsp;<span class="op" id="6456910">*</span><span class="ident" id="6456911"><a href="/go/build/build.go.html#6436364">Package</a></span><span class="op" id="6456918">,</span>&nbsp;<span class="ident" id="6456920">cg</span>&nbsp;<span class="op" id="6456923">*</span><span class="ident" id="6456924"><a href="/go/build/build.go.html#6425997">ast</a></span><span class="op" id="6456927">.</span><span class="ident" id="6456928">CommentGroup</span><span class="op" id="6456940">)</span>&nbsp;<span class="builtintype" id="6456942">error</span>&nbsp;<span class="op" id="6456948">{</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456951">text</span>&nbsp;<span class="op" id="6456956">:=</span>&nbsp;<span class="ident" id="6456959"><a href="/go/build/build.go.html#6456920">cg</a></span><span class="op" id="6456961">.</span><span class="ident" id="6456962">Text</span><span class="op" id="6456966">(</span><span class="op" id="6456967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456970">for</span>&nbsp;<span class="ident" id="6456974">_</span><span class="op" id="6456975">,</span>&nbsp;<span class="ident" id="6456977">line</span>&nbsp;<span class="op" id="6456982">:=</span>&nbsp;<span class="keyword" id="6456985">range</span>&nbsp;<span class="ident" id="6456991"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6456998">.</span><span class="ident" id="6456999">Split</span><span class="op" id="6457004">(</span><span class="ident" id="6457005"><a href="/go/build/build.go.html#6456951">text</a></span><span class="op" id="6457009">,</span>&nbsp;<span class="string" id="6457011">&#34;\n&#34;</span><span class="op" id="6457015">)</span>&nbsp;<span class="op" id="6457017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457021">orig</span>&nbsp;<span class="op" id="6457026">:=</span>&nbsp;<span class="ident" id="6457029"><a href="/go/build/build.go.html#6456977">line</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457037">//&nbsp;Line&nbsp;is</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457050">//&nbsp;&nbsp;&nbsp;&nbsp#cgo&nbsp;[GOOS/GOARCH...]&nbsp;LDFLAGS:&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457092">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457097"><a href="/go/build/build.go.html#6456977">line</a></span>&nbsp;<span class="op" id="6457102">=</span>&nbsp;<span class="ident" id="6457104"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6457111">.</span><span class="ident" id="6457112">TrimSpace</span><span class="op" id="6457121">(</span><span class="ident" id="6457122"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457130">if</span>&nbsp;<span class="builtinfunc" id="6457133">len</span><span class="op" id="6457136">(</span><span class="ident" id="6457137"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457141">)</span>&nbsp;<span class="op" id="6457143">&lt;</span>&nbsp;<span class="num" id="6457145">5</span>&nbsp;<span class="op" id="6457147">||</span>&nbsp;<span class="ident" id="6457150"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457154">[</span><span class="op" id="6457155">:</span><span class="num" id="6457156">4</span><span class="op" id="6457157">]</span>&nbsp;<span class="op" id="6457159">!=</span>&nbsp;<span class="string" id="6457162">&#34;#cgo&#34;</span>&nbsp;<span class="op" id="6457169">||</span>&nbsp;<span class="op" id="6457172">(</span><span class="ident" id="6457173"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457177">[</span><span class="num" id="6457178">4</span><span class="op" id="6457179">]</span>&nbsp;<span class="op" id="6457181">!=</span>&nbsp;<span class="string" id="6457184">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6457188">&amp;&amp;</span>&nbsp;<span class="ident" id="6457191"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457195">[</span><span class="num" id="6457196">4</span><span class="op" id="6457197">]</span>&nbsp;<span class="op" id="6457199">!=</span>&nbsp;<span class="string" id="6457202">&#39;\t&#39;</span><span class="op" id="6457206">)</span>&nbsp;<span class="op" id="6457208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457213">continue</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457229">//&nbsp;Split&nbsp;at&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457250"><a href="/go/build/build.go.html#6456977">line</a></span>&nbsp;<span class="op" id="6457255">=</span>&nbsp;<span class="ident" id="6457257"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6457264">.</span><span class="ident" id="6457265">TrimSpace</span><span class="op" id="6457274">(</span><span class="ident" id="6457275"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457279">[</span><span class="num" id="6457280">4</span><span class="op" id="6457281">:</span><span class="op" id="6457282">]</span><span class="op" id="6457283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457287">i</span>&nbsp;<span class="op" id="6457289">:=</span>&nbsp;<span class="ident" id="6457292"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6457299">.</span><span class="ident" id="6457300">Index</span><span class="op" id="6457305">(</span><span class="ident" id="6457306"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457310">,</span>&nbsp;<span class="string" id="6457312">&#34;:&#34;</span><span class="op" id="6457315">)</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457319">if</span>&nbsp;<span class="ident" id="6457322"><a href="/go/build/build.go.html#6457287">i</a></span>&nbsp;<span class="op" id="6457324">&lt;</span>&nbsp;<span class="num" id="6457326">0</span>&nbsp;<span class="op" id="6457328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457333">return</span>&nbsp;<span class="ident" id="6457340"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6457343">.</span><span class="ident" id="6457344">Errorf</span><span class="op" id="6457350">(</span><span class="string" id="6457351">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="6457378">,</span>&nbsp;<span class="ident" id="6457380"><a href="/go/build/build.go.html#6456890">filename</a></span><span class="op" id="6457388">,</span>&nbsp;<span class="ident" id="6457390"><a href="/go/build/build.go.html#6457021">orig</a></span><span class="op" id="6457394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457402">line</span><span class="op" id="6457406">,</span>&nbsp;<span class="ident" id="6457408">argstr</span>&nbsp;<span class="op" id="6457415">:=</span>&nbsp;<span class="ident" id="6457418"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457422">[</span><span class="op" id="6457423">:</span><span class="ident" id="6457424"><a href="/go/build/build.go.html#6457287">i</a></span><span class="op" id="6457425">]</span><span class="op" id="6457426">,</span>&nbsp;<span class="ident" id="6457428"><a href="/go/build/build.go.html#6456977">line</a></span><span class="op" id="6457432">[</span><span class="ident" id="6457433"><a href="/go/build/build.go.html#6457287">i</a></span><span class="op" id="6457434">+</span><span class="num" id="6457435">1</span><span class="op" id="6457436">:</span><span class="op" id="6457437">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457442">//&nbsp;Parse&nbsp;GOOS/GOARCH&nbsp;stuff.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457472">f</span>&nbsp;<span class="op" id="6457474">:=</span>&nbsp;<span class="ident" id="6457477"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6457484">.</span><span class="ident" id="6457485">Fields</span><span class="op" id="6457491">(</span><span class="ident" id="6457492"><a href="/go/build/build.go.html#6457402">line</a></span><span class="op" id="6457496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457500">if</span>&nbsp;<span class="builtinfunc" id="6457503">len</span><span class="op" id="6457506">(</span><span class="ident" id="6457507"><a href="/go/build/build.go.html#6457472">f</a></span><span class="op" id="6457508">)</span>&nbsp;<span class="op" id="6457510">&lt;</span>&nbsp;<span class="num" id="6457512">1</span>&nbsp;<span class="op" id="6457514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457519">return</span>&nbsp;<span class="ident" id="6457526"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6457529">.</span><span class="ident" id="6457530">Errorf</span><span class="op" id="6457536">(</span><span class="string" id="6457537">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="6457564">,</span>&nbsp;<span class="ident" id="6457566"><a href="/go/build/build.go.html#6456890">filename</a></span><span class="op" id="6457574">,</span>&nbsp;<span class="ident" id="6457576"><a href="/go/build/build.go.html#6457021">orig</a></span><span class="op" id="6457580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457584">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457589">cond</span><span class="op" id="6457593">,</span>&nbsp;<span class="ident" id="6457595">verb</span>&nbsp;<span class="op" id="6457600">:=</span>&nbsp;<span class="ident" id="6457603"><a href="/go/build/build.go.html#6457472">f</a></span><span class="op" id="6457604">[</span><span class="op" id="6457605">:</span><span class="builtinfunc" id="6457606">len</span><span class="op" id="6457609">(</span><span class="ident" id="6457610"><a href="/go/build/build.go.html#6457472">f</a></span><span class="op" id="6457611">)</span><span class="op" id="6457612">-</span><span class="num" id="6457613">1</span><span class="op" id="6457614">]</span><span class="op" id="6457615">,</span>&nbsp;<span class="ident" id="6457617"><a href="/go/build/build.go.html#6457472">f</a></span><span class="op" id="6457618">[</span><span class="builtinfunc" id="6457619">len</span><span class="op" id="6457622">(</span><span class="ident" id="6457623"><a href="/go/build/build.go.html#6457472">f</a></span><span class="op" id="6457624">)</span><span class="op" id="6457625">-</span><span class="num" id="6457626">1</span><span class="op" id="6457627">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457631">if</span>&nbsp;<span class="builtinfunc" id="6457634">len</span><span class="op" id="6457637">(</span><span class="ident" id="6457638"><a href="/go/build/build.go.html#6457589">cond</a></span><span class="op" id="6457642">)</span>&nbsp;<span class="op" id="6457644">&gt;</span>&nbsp;<span class="num" id="6457646">0</span>&nbsp;<span class="op" id="6457648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457653">ok</span>&nbsp;<span class="op" id="6457656">:=</span>&nbsp;<span class="builtintype" id="6457659">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457668">for</span>&nbsp;<span class="ident" id="6457672">_</span><span class="op" id="6457673">,</span>&nbsp;<span class="ident" id="6457675">c</span>&nbsp;<span class="op" id="6457677">:=</span>&nbsp;<span class="keyword" id="6457680">range</span>&nbsp;<span class="ident" id="6457686"><a href="/go/build/build.go.html#6457589">cond</a></span>&nbsp;<span class="op" id="6457691">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457697">if</span>&nbsp;<span class="ident" id="6457700"><a href="/go/build/build.go.html#6456867">ctxt</a></span><span class="op" id="6457704">.</span><span class="ident" id="6457705">match</span><span class="op" id="6457710">(</span><span class="ident" id="6457711"><a href="/go/build/build.go.html#6457675">c</a></span><span class="op" id="6457712">,</span>&nbsp;<span class="ident" id="6457714">nil</span><span class="op" id="6457717">)</span>&nbsp;<span class="op" id="6457719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457726"><a href="/go/build/build.go.html#6457653">ok</a></span>&nbsp;<span class="op" id="6457729">=</span>&nbsp;<span class="builtintype" id="6457731">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457741">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457756">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457761">if</span>&nbsp;<span class="op" id="6457764">!</span><span class="ident" id="6457765"><a href="/go/build/build.go.html#6457653">ok</a></span>&nbsp;<span class="op" id="6457768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457774">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457795">args</span><span class="op" id="6457799">,</span>&nbsp;<span class="ident" id="6457801">err</span>&nbsp;<span class="op" id="6457805">:=</span>&nbsp;<span class="ident" id="6457808"><a href="/go/build/build.go.html#6459758">splitQuoted</a></span><span class="op" id="6457819">(</span><span class="ident" id="6457820"><a href="/go/build/build.go.html#6457408">argstr</a></span><span class="op" id="6457826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457830">if</span>&nbsp;<span class="ident" id="6457833"><a href="/go/build/build.go.html#6457801">err</a></span>&nbsp;<span class="op" id="6457837">!=</span>&nbsp;<span class="ident" id="6457840">nil</span>&nbsp;<span class="op" id="6457844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457849">return</span>&nbsp;<span class="ident" id="6457856"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6457859">.</span><span class="ident" id="6457860">Errorf</span><span class="op" id="6457866">(</span><span class="string" id="6457867">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="6457894">,</span>&nbsp;<span class="ident" id="6457896"><a href="/go/build/build.go.html#6456890">filename</a></span><span class="op" id="6457904">,</span>&nbsp;<span class="ident" id="6457906"><a href="/go/build/build.go.html#6457021">orig</a></span><span class="op" id="6457910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457918">for</span>&nbsp;<span class="ident" id="6457922">_</span><span class="op" id="6457923">,</span>&nbsp;<span class="ident" id="6457925">arg</span>&nbsp;<span class="op" id="6457929">:=</span>&nbsp;<span class="keyword" id="6457932">range</span>&nbsp;<span class="ident" id="6457938"><a href="/go/build/build.go.html#6457795">args</a></span>&nbsp;<span class="op" id="6457943">{</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457948">if</span>&nbsp;<span class="op" id="6457951">!</span><span class="ident" id="6457952"><a href="/go/build/build.go.html#6458867">safeCgoName</a></span><span class="op" id="6457963">(</span><span class="ident" id="6457964"><a href="/go/build/build.go.html#6457925">arg</a></span><span class="op" id="6457967">)</span>&nbsp;<span class="op" id="6457969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457975">return</span>&nbsp;<span class="ident" id="6457982"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6457985">.</span><span class="ident" id="6457986">Errorf</span><span class="op" id="6457992">(</span><span class="string" id="6457993">&#34;%s:&nbsp;malformed&nbsp;#cgo&nbsp;argument:&nbsp;%s&#34;</span><span class="op" id="6458026">,</span>&nbsp;<span class="ident" id="6458028"><a href="/go/build/build.go.html#6456890">filename</a></span><span class="op" id="6458036">,</span>&nbsp;<span class="ident" id="6458038"><a href="/go/build/build.go.html#6457925">arg</a></span><span class="op" id="6458041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458055">switch</span>&nbsp;<span class="ident" id="6458062"><a href="/go/build/build.go.html#6457595">verb</a></span>&nbsp;<span class="op" id="6458067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458071">case</span>&nbsp;<span class="string" id="6458076">&#34;CFLAGS&#34;</span><span class="op" id="6458084">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458089"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458091">.</span><span class="ident" id="6458092">CgoCFLAGS</span>&nbsp;<span class="op" id="6458102">=</span>&nbsp;<span class="builtinfunc" id="6458104">append</span><span class="op" id="6458110">(</span><span class="ident" id="6458111"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458113">.</span><span class="ident" id="6458114">CgoCFLAGS</span><span class="op" id="6458123">,</span>&nbsp;<span class="ident" id="6458125"><a href="/go/build/build.go.html#6457795">args</a></span><span class="op" id="6458129">...</span><span class="op" id="6458132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458136">case</span>&nbsp;<span class="string" id="6458141">&#34;CPPFLAGS&#34;</span><span class="op" id="6458151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458156"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458158">.</span><span class="ident" id="6458159">CgoCPPFLAGS</span>&nbsp;<span class="op" id="6458171">=</span>&nbsp;<span class="builtinfunc" id="6458173">append</span><span class="op" id="6458179">(</span><span class="ident" id="6458180"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458182">.</span><span class="ident" id="6458183">CgoCPPFLAGS</span><span class="op" id="6458194">,</span>&nbsp;<span class="ident" id="6458196"><a href="/go/build/build.go.html#6457795">args</a></span><span class="op" id="6458200">...</span><span class="op" id="6458203">)</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458207">case</span>&nbsp;<span class="string" id="6458212">&#34;CXXFLAGS&#34;</span><span class="op" id="6458222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458227"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458229">.</span><span class="ident" id="6458230">CgoCXXFLAGS</span>&nbsp;<span class="op" id="6458242">=</span>&nbsp;<span class="builtinfunc" id="6458244">append</span><span class="op" id="6458250">(</span><span class="ident" id="6458251"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458253">.</span><span class="ident" id="6458254">CgoCXXFLAGS</span><span class="op" id="6458265">,</span>&nbsp;<span class="ident" id="6458267"><a href="/go/build/build.go.html#6457795">args</a></span><span class="op" id="6458271">...</span><span class="op" id="6458274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458278">case</span>&nbsp;<span class="string" id="6458283">&#34;LDFLAGS&#34;</span><span class="op" id="6458292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458297"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458299">.</span><span class="ident" id="6458300">CgoLDFLAGS</span>&nbsp;<span class="op" id="6458311">=</span>&nbsp;<span class="builtinfunc" id="6458313">append</span><span class="op" id="6458319">(</span><span class="ident" id="6458320"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458322">.</span><span class="ident" id="6458323">CgoLDFLAGS</span><span class="op" id="6458333">,</span>&nbsp;<span class="ident" id="6458335"><a href="/go/build/build.go.html#6457795">args</a></span><span class="op" id="6458339">...</span><span class="op" id="6458342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458346">case</span>&nbsp;<span class="string" id="6458351">&#34;pkg-config&#34;</span><span class="op" id="6458363">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458368"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458370">.</span><span class="ident" id="6458371">CgoPkgConfig</span>&nbsp;<span class="op" id="6458384">=</span>&nbsp;<span class="builtinfunc" id="6458386">append</span><span class="op" id="6458392">(</span><span class="ident" id="6458393"><a href="/go/build/build.go.html#6456907">di</a></span><span class="op" id="6458395">.</span><span class="ident" id="6458396">CgoPkgConfig</span><span class="op" id="6458408">,</span>&nbsp;<span class="ident" id="6458410"><a href="/go/build/build.go.html#6457795">args</a></span><span class="op" id="6458414">...</span><span class="op" id="6458417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458421">default</span><span class="op" id="6458428">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458433">return</span>&nbsp;<span class="ident" id="6458440"><a href="/go/build/build.go.html#6425990">fmt</a></span><span class="op" id="6458443">.</span><span class="ident" id="6458444">Errorf</span><span class="op" id="6458450">(</span><span class="string" id="6458451">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;verb:&nbsp;%s&#34;</span><span class="op" id="6458478">,</span>&nbsp;<span class="ident" id="6458480"><a href="/go/build/build.go.html#6456890">filename</a></span><span class="op" id="6458488">,</span>&nbsp;<span class="ident" id="6458490"><a href="/go/build/build.go.html#6457021">orig</a></span><span class="op" id="6458494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458501">}</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458504">return</span>&nbsp;<span class="ident" id="6458511">nil</span><br>
<span class="lineno"></span><span class="op" id="6458515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6458518">//&nbsp;NOTE:&nbsp;$&nbsp;is&nbsp;not&nbsp;safe&nbsp;for&nbsp;the&nbsp;shell,&nbsp;but&nbsp;it&nbsp;is&nbsp;allowed&nbsp;here&nbsp;because&nbsp;of&nbsp;linker&nbsp;options&nbsp;like&nbsp;-Wl,$ORIGIN.</span><br>
<span class="lineno"></span><span class="comment" id="6458623">//&nbsp;We&nbsp;never&nbsp;pass&nbsp;these&nbsp;arguments&nbsp;to&nbsp;a&nbsp;shell&nbsp;(just&nbsp;to&nbsp;programs&nbsp;we&nbsp;construct&nbsp;argv&nbsp;for),&nbsp;so&nbsp;this&nbsp;should&nbsp;be&nbsp;okay.</span><br>
<span class="lineno">1145</span><span class="comment" id="6458733">//&nbsp;See&nbsp;golang.org/issue/6038.</span><br>
<span class="lineno"></span><span class="keyword" id="6458763">var</span>&nbsp;<span class="ident" id="6458767">safeBytes</span>&nbsp;<span class="op" id="6458777">=</span>&nbsp;<span class="op" id="6458779">[</span><span class="op" id="6458780">]</span><span class="builtintype" id="6458781">byte</span><span class="op" id="6458785">(</span><span class="string" id="6458786">&#34;+-.,/0123456789=ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz:$&#34;</span><span class="op" id="6458859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6458862">func</span>&nbsp;<span class="ident" id="6458867">safeCgoName</span><span class="op" id="6458878">(</span><span class="ident" id="6458879">s</span>&nbsp;<span class="builtintype" id="6458881">string</span><span class="op" id="6458887">)</span>&nbsp;<span class="builtintype" id="6458889">bool</span>&nbsp;<span class="op" id="6458894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458897">if</span>&nbsp;<span class="ident" id="6458900"><a href="/go/build/build.go.html#6458879">s</a></span>&nbsp;<span class="op" id="6458902">==</span>&nbsp;<span class="string" id="6458905">&#34;&#34;</span>&nbsp;<span class="op" id="6458908">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458912">return</span>&nbsp;<span class="builtintype" id="6458919">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458929">for</span>&nbsp;<span class="ident" id="6458933">i</span>&nbsp;<span class="op" id="6458935">:=</span>&nbsp;<span class="num" id="6458938">0</span><span class="op" id="6458939">;</span>&nbsp;<span class="ident" id="6458941"><a href="/go/build/build.go.html#6458933">i</a></span>&nbsp;<span class="op" id="6458943">&lt;</span>&nbsp;<span class="builtinfunc" id="6458945">len</span><span class="op" id="6458948">(</span><span class="ident" id="6458949"><a href="/go/build/build.go.html#6458879">s</a></span><span class="op" id="6458950">)</span><span class="op" id="6458951">;</span>&nbsp;<span class="ident" id="6458953"><a href="/go/build/build.go.html#6458933">i</a></span><span class="op" id="6458954">++</span>&nbsp;<span class="op" id="6458957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458961">if</span>&nbsp;<span class="ident" id="6458964">c</span>&nbsp;<span class="op" id="6458966">:=</span>&nbsp;<span class="ident" id="6458969"><a href="/go/build/build.go.html#6458879">s</a></span><span class="op" id="6458970">[</span><span class="ident" id="6458971"><a href="/go/build/build.go.html#6458933">i</a></span><span class="op" id="6458972">]</span><span class="op" id="6458973">;</span>&nbsp;<span class="ident" id="6458975"><a href="/go/build/build.go.html#6458964">c</a></span>&nbsp;<span class="op" id="6458977">&lt;</span>&nbsp;<span class="num" id="6458979">0x80</span>&nbsp;<span class="op" id="6458984">&amp;&amp;</span>&nbsp;<span class="ident" id="6458987"><a href="/go/build/build.go.html#6425971">bytes</a></span><span class="op" id="6458992">.</span><span class="ident" id="6458993">IndexByte</span><span class="op" id="6459002">(</span><span class="ident" id="6459003"><a href="/go/build/build.go.html#6458767">safeBytes</a></span><span class="op" id="6459012">,</span>&nbsp;<span class="ident" id="6459014"><a href="/go/build/build.go.html#6458964">c</a></span><span class="op" id="6459015">)</span>&nbsp;<span class="op" id="6459017">&lt;</span>&nbsp;<span class="num" id="6459019">0</span>&nbsp;<span class="op" id="6459021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459026">return</span>&nbsp;<span class="builtintype" id="6459033">false</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459047">return</span>&nbsp;<span class="builtintype" id="6459054">true</span><br>
<span class="lineno"></span><span class="op" id="6459059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1160</span><span class="comment" id="6459062">//&nbsp;splitQuoted&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive</span><br>
<span class="lineno"></span><span class="comment" id="6459145">//&nbsp;white&nbsp;space&nbsp;characters&nbsp;while&nbsp;taking&nbsp;into&nbsp;account&nbsp;quotes&nbsp;and&nbsp;escaping,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6459222">//&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="comment" id="6459310">//&nbsp;Single&nbsp;quotes&nbsp;and&nbsp;double&nbsp;quotes&nbsp;are&nbsp;recognized&nbsp;to&nbsp;prevent&nbsp;splitting&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6459392">//&nbsp;quoted&nbsp;region,&nbsp;and&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;resulting&nbsp;substrings.&nbsp;If&nbsp;a&nbsp;quote&nbsp;in&nbsp;s</span><br>
<span class="lineno">1165</span><span class="comment" id="6459473">//&nbsp;isn&#39;t&nbsp;closed&nbsp;err&nbsp;will&nbsp;be&nbsp;set&nbsp;and&nbsp;r&nbsp;will&nbsp;have&nbsp;the&nbsp;unclosed&nbsp;argument&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6459550">//&nbsp;last&nbsp;element.&nbsp;&nbsp;The&nbsp;backslash&nbsp;is&nbsp;used&nbsp;for&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="6459604">//</span><br>
<span class="lineno"></span><span class="comment" id="6459607">//&nbsp;For&nbsp;example,&nbsp;the&nbsp;following&nbsp;string:</span><br>
<span class="lineno"></span><span class="comment" id="6459645">//</span><br>
<span class="lineno">1170</span><span class="comment" id="6459648">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;b:&#34;c&nbsp;d&#34;&nbsp;&#39;e&#39;&#39;f&#39;&nbsp;&nbsp;&#34;g\&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6459679">//</span><br>
<span class="lineno"></span><span class="comment" id="6459682">//&nbsp;Would&nbsp;be&nbsp;parsed&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="6459705">//</span><br>
<span class="lineno"></span><span class="comment" id="6459708">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]string{&#34;a&#34;,&nbsp;&#34;b:c&nbsp;d&#34;,&nbsp;&#34;ef&#34;,&nbsp;`g&#34;`}</span><br>
<span class="lineno">1175</span><span class="comment" id="6459750">//</span><br>
<span class="lineno"></span><span class="keyword" id="6459753">func</span>&nbsp;<span class="ident" id="6459758">splitQuoted</span><span class="op" id="6459769">(</span><span class="ident" id="6459770">s</span>&nbsp;<span class="builtintype" id="6459772">string</span><span class="op" id="6459778">)</span>&nbsp;<span class="op" id="6459780">(</span><span class="ident" id="6459781">r</span>&nbsp;<span class="op" id="6459783">[</span><span class="op" id="6459784">]</span><span class="builtintype" id="6459785">string</span><span class="op" id="6459791">,</span>&nbsp;<span class="ident" id="6459793">err</span>&nbsp;<span class="builtintype" id="6459797">error</span><span class="op" id="6459802">)</span>&nbsp;<span class="op" id="6459804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459807">var</span>&nbsp;<span class="ident" id="6459811">args</span>&nbsp;<span class="op" id="6459816">[</span><span class="op" id="6459817">]</span><span class="builtintype" id="6459818">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459826">arg</span>&nbsp;<span class="op" id="6459830">:=</span>&nbsp;<span class="builtinfunc" id="6459833">make</span><span class="op" id="6459837">(</span><span class="op" id="6459838">[</span><span class="op" id="6459839">]</span><span class="builtintype" id="6459840">rune</span><span class="op" id="6459844">,</span>&nbsp;<span class="builtinfunc" id="6459846">len</span><span class="op" id="6459849">(</span><span class="ident" id="6459850"><a href="/go/build/build.go.html#6459770">s</a></span><span class="op" id="6459851">)</span><span class="op" id="6459852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459855">escaped</span>&nbsp;<span class="op" id="6459863">:=</span>&nbsp;<span class="builtintype" id="6459866">false</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459873">quoted</span>&nbsp;<span class="op" id="6459880">:=</span>&nbsp;<span class="builtintype" id="6459883">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459890">quote</span>&nbsp;<span class="op" id="6459896">:=</span>&nbsp;<span class="string" id="6459899">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459907">i</span>&nbsp;<span class="op" id="6459909">:=</span>&nbsp;<span class="num" id="6459912">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459915">for</span>&nbsp;<span class="ident" id="6459919">_</span><span class="op" id="6459920">,</span>&nbsp;<span class="builtintype" id="6459922">rune</span>&nbsp;<span class="op" id="6459927">:=</span>&nbsp;<span class="keyword" id="6459930">range</span>&nbsp;<span class="ident" id="6459936"><a href="/go/build/build.go.html#6459770">s</a></span>&nbsp;<span class="op" id="6459938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459942">switch</span>&nbsp;<span class="op" id="6459949">{</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459953">case</span>&nbsp;<span class="ident" id="6459958"><a href="/go/build/build.go.html#6459855">escaped</a></span><span class="op" id="6459965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459970"><a href="/go/build/build.go.html#6459855">escaped</a></span>&nbsp;<span class="op" id="6459978">=</span>&nbsp;<span class="builtintype" id="6459980">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459988">case</span>&nbsp;<span class="builtintype" id="6459993"><a href="/go/build/build.go.html#6459922">rune</a></span>&nbsp;<span class="op" id="6459998">==</span>&nbsp;<span class="string" id="6460001">&#39;\\&#39;</span><span class="op" id="6460005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460010"><a href="/go/build/build.go.html#6459855">escaped</a></span>&nbsp;<span class="op" id="6460018">=</span>&nbsp;<span class="builtintype" id="6460020">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460028">continue</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460039">case</span>&nbsp;<span class="ident" id="6460044"><a href="/go/build/build.go.html#6459890">quote</a></span>&nbsp;<span class="op" id="6460050">!=</span>&nbsp;<span class="string" id="6460053">&#39;\x00&#39;</span><span class="op" id="6460059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460064">if</span>&nbsp;<span class="builtintype" id="6460067"><a href="/go/build/build.go.html#6459922">rune</a></span>&nbsp;<span class="op" id="6460072">==</span>&nbsp;<span class="ident" id="6460075"><a href="/go/build/build.go.html#6459890">quote</a></span>&nbsp;<span class="op" id="6460081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460087"><a href="/go/build/build.go.html#6459890">quote</a></span>&nbsp;<span class="op" id="6460093">=</span>&nbsp;<span class="string" id="6460095">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460106">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460118">}</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460122">case</span>&nbsp;<span class="builtintype" id="6460127"><a href="/go/build/build.go.html#6459922">rune</a></span>&nbsp;<span class="op" id="6460132">==</span>&nbsp;<span class="string" id="6460135">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6460139">||</span>&nbsp;<span class="builtintype" id="6460142"><a href="/go/build/build.go.html#6459922">rune</a></span>&nbsp;<span class="op" id="6460147">==</span>&nbsp;<span class="string" id="6460150">&#39;\&#39;&#39;</span><span class="op" id="6460154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460159"><a href="/go/build/build.go.html#6459873">quoted</a></span>&nbsp;<span class="op" id="6460166">=</span>&nbsp;<span class="builtintype" id="6460168">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460176"><a href="/go/build/build.go.html#6459890">quote</a></span>&nbsp;<span class="op" id="6460182">=</span>&nbsp;<span class="builtintype" id="6460184"><a href="/go/build/build.go.html#6459922">rune</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460192">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460203">case</span>&nbsp;<span class="ident" id="6460208"><a href="/go/build/build.go.html#6426148">unicode</a></span><span class="op" id="6460215">.</span><span class="ident" id="6460216">IsSpace</span><span class="op" id="6460223">(</span><span class="builtintype" id="6460224"><a href="/go/build/build.go.html#6459922">rune</a></span><span class="op" id="6460228">)</span><span class="op" id="6460229">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460234">if</span>&nbsp;<span class="ident" id="6460237"><a href="/go/build/build.go.html#6459873">quoted</a></span>&nbsp;<span class="op" id="6460244">||</span>&nbsp;<span class="ident" id="6460247"><a href="/go/build/build.go.html#6459907">i</a></span>&nbsp;<span class="op" id="6460249">&gt;</span>&nbsp;<span class="num" id="6460251">0</span>&nbsp;<span class="op" id="6460253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460259"><a href="/go/build/build.go.html#6459873">quoted</a></span>&nbsp;<span class="op" id="6460266">=</span>&nbsp;<span class="builtintype" id="6460268">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460278"><a href="/go/build/build.go.html#6459811">args</a></span>&nbsp;<span class="op" id="6460283">=</span>&nbsp;<span class="builtinfunc" id="6460285">append</span><span class="op" id="6460291">(</span><span class="ident" id="6460292"><a href="/go/build/build.go.html#6459811">args</a></span><span class="op" id="6460296">,</span>&nbsp;<span class="builtintype" id="6460298">string</span><span class="op" id="6460304">(</span><span class="ident" id="6460305"><a href="/go/build/build.go.html#6459826">arg</a></span><span class="op" id="6460308">[</span><span class="op" id="6460309">:</span><span class="ident" id="6460310"><a href="/go/build/build.go.html#6459907">i</a></span><span class="op" id="6460311">]</span><span class="op" id="6460312">)</span><span class="op" id="6460313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460319"><a href="/go/build/build.go.html#6459907">i</a></span>&nbsp;<span class="op" id="6460321">=</span>&nbsp;<span class="num" id="6460323">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460328">}</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460333">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460348"><a href="/go/build/build.go.html#6459826">arg</a></span><span class="op" id="6460351">[</span><span class="ident" id="6460352"><a href="/go/build/build.go.html#6459907">i</a></span><span class="op" id="6460353">]</span>&nbsp;<span class="op" id="6460355">=</span>&nbsp;<span class="builtintype" id="6460357"><a href="/go/build/build.go.html#6459922">rune</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460364"><a href="/go/build/build.go.html#6459907">i</a></span><span class="op" id="6460365">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460369">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460372">if</span>&nbsp;<span class="ident" id="6460375"><a href="/go/build/build.go.html#6459873">quoted</a></span>&nbsp;<span class="op" id="6460382">||</span>&nbsp;<span class="ident" id="6460385"><a href="/go/build/build.go.html#6459907">i</a></span>&nbsp;<span class="op" id="6460387">&gt;</span>&nbsp;<span class="num" id="6460389">0</span>&nbsp;<span class="op" id="6460391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460395"><a href="/go/build/build.go.html#6459811">args</a></span>&nbsp;<span class="op" id="6460400">=</span>&nbsp;<span class="builtinfunc" id="6460402">append</span><span class="op" id="6460408">(</span><span class="ident" id="6460409"><a href="/go/build/build.go.html#6459811">args</a></span><span class="op" id="6460413">,</span>&nbsp;<span class="builtintype" id="6460415">string</span><span class="op" id="6460421">(</span><span class="ident" id="6460422"><a href="/go/build/build.go.html#6459826">arg</a></span><span class="op" id="6460425">[</span><span class="op" id="6460426">:</span><span class="ident" id="6460427"><a href="/go/build/build.go.html#6459907">i</a></span><span class="op" id="6460428">]</span><span class="op" id="6460429">)</span><span class="op" id="6460430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460436">if</span>&nbsp;<span class="ident" id="6460439"><a href="/go/build/build.go.html#6459890">quote</a></span>&nbsp;<span class="op" id="6460445">!=</span>&nbsp;<span class="num" id="6460448">0</span>&nbsp;<span class="op" id="6460450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460454"><a href="/go/build/build.go.html#6459793">err</a></span>&nbsp;<span class="op" id="6460458">=</span>&nbsp;<span class="ident" id="6460460"><a href="/go/build/build.go.html#6425980">errors</a></span><span class="op" id="6460466">.</span><span class="ident" id="6460467">New</span><span class="op" id="6460470">(</span><span class="string" id="6460471">&#34;unclosed&nbsp;quote&#34;</span><span class="op" id="6460487">)</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460490">}</span>&nbsp;<span class="keyword" id="6460492">else</span>&nbsp;<span class="keyword" id="6460497">if</span>&nbsp;<span class="ident" id="6460500"><a href="/go/build/build.go.html#6459855">escaped</a></span>&nbsp;<span class="op" id="6460508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460512"><a href="/go/build/build.go.html#6459793">err</a></span>&nbsp;<span class="op" id="6460516">=</span>&nbsp;<span class="ident" id="6460518"><a href="/go/build/build.go.html#6425980">errors</a></span><span class="op" id="6460524">.</span><span class="ident" id="6460525">New</span><span class="op" id="6460528">(</span><span class="string" id="6460529">&#34;unfinished&nbsp;escaping&#34;</span><span class="op" id="6460550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460556">return</span>&nbsp;<span class="ident" id="6460563"><a href="/go/build/build.go.html#6459811">args</a></span><span class="op" id="6460567">,</span>&nbsp;<span class="ident" id="6460569"><a href="/go/build/build.go.html#6459793">err</a></span><br>
<span class="lineno"></span><span class="op" id="6460573">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="6460576">//&nbsp;match&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;name&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno"></span><span class="comment" id="6460621">//</span><br>
<span class="lineno"></span><span class="comment" id="6460624">//&nbsp;&nbsp;&nbsp;&nbsp$GOOS</span><br>
<span class="lineno"></span><span class="comment" id="6460633">//&nbsp;&nbsp;&nbsp;&nbsp$GOARCH</span><br>
<span class="lineno">1225</span><span class="comment" id="6460644">//&nbsp;&nbsp;&nbsp;&nbspcgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;enabled)</span><br>
<span class="lineno"></span><span class="comment" id="6460671">//&nbsp;&nbsp;&nbsp;&nbsp!cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;disabled)</span><br>
<span class="lineno"></span><span class="comment" id="6460700">//&nbsp;&nbsp;&nbsp;&nbspctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="6460717">//&nbsp;&nbsp;&nbsp;&nbsp!ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="6460735">//&nbsp;&nbsp;&nbsp;&nbsptag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno">1230</span><span class="comment" id="6460799">//&nbsp;&nbsp;&nbsp;&nbsp!tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;not&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno"></span><span class="comment" id="6460868">//&nbsp;&nbsp;&nbsp;&nbspa&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;any&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6460910">//</span><br>
<span class="lineno"></span><span class="keyword" id="6460913">func</span>&nbsp;<span class="op" id="6460918">(</span><span class="ident" id="6460919">ctxt</span>&nbsp;<span class="op" id="6460924">*</span><span class="ident" id="6460925"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6460932">)</span>&nbsp;<span class="ident" id="6460934">match</span><span class="op" id="6460939">(</span><span class="ident" id="6460940">name</span>&nbsp;<span class="builtintype" id="6460945">string</span><span class="op" id="6460951">,</span>&nbsp;<span class="ident" id="6460953">allTags</span>&nbsp;<span class="keyword" id="6460961">map</span><span class="op" id="6460964">[</span><span class="builtintype" id="6460965">string</span><span class="op" id="6460971">]</span><span class="builtintype" id="6460972">bool</span><span class="op" id="6460976">)</span>&nbsp;<span class="builtintype" id="6460978">bool</span>&nbsp;<span class="op" id="6460983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460986">if</span>&nbsp;<span class="ident" id="6460989"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6460994">==</span>&nbsp;<span class="string" id="6460997">&#34;&#34;</span>&nbsp;<span class="op" id="6461000">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461004">if</span>&nbsp;<span class="ident" id="6461007"><a href="/go/build/build.go.html#6460953">allTags</a></span>&nbsp;<span class="op" id="6461015">!=</span>&nbsp;<span class="ident" id="6461018">nil</span>&nbsp;<span class="op" id="6461022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461027"><a href="/go/build/build.go.html#6460953">allTags</a></span><span class="op" id="6461034">[</span><span class="ident" id="6461035"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461039">]</span>&nbsp;<span class="op" id="6461041">=</span>&nbsp;<span class="builtintype" id="6461043">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461054">return</span>&nbsp;<span class="builtintype" id="6461061">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461068">}</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461071">if</span>&nbsp;<span class="ident" id="6461074">i</span>&nbsp;<span class="op" id="6461076">:=</span>&nbsp;<span class="ident" id="6461079"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6461086">.</span><span class="ident" id="6461087">Index</span><span class="op" id="6461092">(</span><span class="ident" id="6461093"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461097">,</span>&nbsp;<span class="string" id="6461099">&#34;,&#34;</span><span class="op" id="6461102">)</span><span class="op" id="6461103">;</span>&nbsp;<span class="ident" id="6461105"><a href="/go/build/build.go.html#6461074">i</a></span>&nbsp;<span class="op" id="6461107">&gt;=</span>&nbsp;<span class="num" id="6461110">0</span>&nbsp;<span class="op" id="6461112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6461116">//&nbsp;comma-separated&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461142">ok1</span>&nbsp;<span class="op" id="6461146">:=</span>&nbsp;<span class="ident" id="6461149"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461153">.</span><span class="ident" id="6461154">match</span><span class="op" id="6461159">(</span><span class="ident" id="6461160"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461164">[</span><span class="op" id="6461165">:</span><span class="ident" id="6461166"><a href="/go/build/build.go.html#6461074">i</a></span><span class="op" id="6461167">]</span><span class="op" id="6461168">,</span>&nbsp;<span class="ident" id="6461170"><a href="/go/build/build.go.html#6460953">allTags</a></span><span class="op" id="6461177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461181">ok2</span>&nbsp;<span class="op" id="6461185">:=</span>&nbsp;<span class="ident" id="6461188"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461192">.</span><span class="ident" id="6461193">match</span><span class="op" id="6461198">(</span><span class="ident" id="6461199"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461203">[</span><span class="ident" id="6461204"><a href="/go/build/build.go.html#6461074">i</a></span><span class="op" id="6461205">+</span><span class="num" id="6461206">1</span><span class="op" id="6461207">:</span><span class="op" id="6461208">]</span><span class="op" id="6461209">,</span>&nbsp;<span class="ident" id="6461211"><a href="/go/build/build.go.html#6460953">allTags</a></span><span class="op" id="6461218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461222">return</span>&nbsp;<span class="ident" id="6461229"><a href="/go/build/build.go.html#6461142">ok1</a></span>&nbsp;<span class="op" id="6461233">&amp;&amp;</span>&nbsp;<span class="ident" id="6461236"><a href="/go/build/build.go.html#6461181">ok2</a></span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461244">if</span>&nbsp;<span class="ident" id="6461247"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6461254">.</span><span class="ident" id="6461255">HasPrefix</span><span class="op" id="6461264">(</span><span class="ident" id="6461265"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461269">,</span>&nbsp;<span class="string" id="6461271">&#34;!!&#34;</span><span class="op" id="6461275">)</span>&nbsp;<span class="op" id="6461277">{</span>&nbsp;<span class="comment" id="6461279">//&nbsp;bad&nbsp;syntax,&nbsp;reject&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461310">return</span>&nbsp;<span class="builtintype" id="6461317">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461327">if</span>&nbsp;<span class="ident" id="6461330"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6461337">.</span><span class="ident" id="6461338">HasPrefix</span><span class="op" id="6461347">(</span><span class="ident" id="6461348"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461352">,</span>&nbsp;<span class="string" id="6461354">&#34;!&#34;</span><span class="op" id="6461357">)</span>&nbsp;<span class="op" id="6461359">{</span>&nbsp;<span class="comment" id="6461361">//&nbsp;negation</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461375">return</span>&nbsp;<span class="builtinfunc" id="6461382">len</span><span class="op" id="6461385">(</span><span class="ident" id="6461386"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461390">)</span>&nbsp;<span class="op" id="6461392">&gt;</span>&nbsp;<span class="num" id="6461394">1</span>&nbsp;<span class="op" id="6461396">&amp;&amp;</span>&nbsp;<span class="op" id="6461399">!</span><span class="ident" id="6461400"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461404">.</span><span class="ident" id="6461405">match</span><span class="op" id="6461410">(</span><span class="ident" id="6461411"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461415">[</span><span class="num" id="6461416">1</span><span class="op" id="6461417">:</span><span class="op" id="6461418">]</span><span class="op" id="6461419">,</span>&nbsp;<span class="ident" id="6461421"><a href="/go/build/build.go.html#6460953">allTags</a></span><span class="op" id="6461428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461435">if</span>&nbsp;<span class="ident" id="6461438"><a href="/go/build/build.go.html#6460953">allTags</a></span>&nbsp;<span class="op" id="6461446">!=</span>&nbsp;<span class="ident" id="6461449">nil</span>&nbsp;<span class="op" id="6461453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461457"><a href="/go/build/build.go.html#6460953">allTags</a></span><span class="op" id="6461464">[</span><span class="ident" id="6461465"><a href="/go/build/build.go.html#6460940">name</a></span><span class="op" id="6461469">]</span>&nbsp;<span class="op" id="6461471">=</span>&nbsp;<span class="builtintype" id="6461473">true</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6461483">//&nbsp;Tags&nbsp;must&nbsp;be&nbsp;letters,&nbsp;digits,&nbsp;underscores&nbsp;or&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6461538">//&nbsp;Unlike&nbsp;in&nbsp;Go&nbsp;identifiers,&nbsp;all&nbsp;digits&nbsp;are&nbsp;fine&nbsp;(e.g.,&nbsp;&#34;386&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461603">for</span>&nbsp;<span class="ident" id="6461607">_</span><span class="op" id="6461608">,</span>&nbsp;<span class="ident" id="6461610">c</span>&nbsp;<span class="op" id="6461612">:=</span>&nbsp;<span class="keyword" id="6461615">range</span>&nbsp;<span class="ident" id="6461621"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6461626">{</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461630">if</span>&nbsp;<span class="op" id="6461633">!</span><span class="ident" id="6461634"><a href="/go/build/build.go.html#6426148">unicode</a></span><span class="op" id="6461641">.</span><span class="ident" id="6461642">IsLetter</span><span class="op" id="6461650">(</span><span class="ident" id="6461651"><a href="/go/build/build.go.html#6461610">c</a></span><span class="op" id="6461652">)</span>&nbsp;<span class="op" id="6461654">&amp;&amp;</span>&nbsp;<span class="op" id="6461657">!</span><span class="ident" id="6461658"><a href="/go/build/build.go.html#6426148">unicode</a></span><span class="op" id="6461665">.</span><span class="ident" id="6461666">IsDigit</span><span class="op" id="6461673">(</span><span class="ident" id="6461674"><a href="/go/build/build.go.html#6461610">c</a></span><span class="op" id="6461675">)</span>&nbsp;<span class="op" id="6461677">&amp;&amp;</span>&nbsp;<span class="ident" id="6461680"><a href="/go/build/build.go.html#6461610">c</a></span>&nbsp;<span class="op" id="6461682">!=</span>&nbsp;<span class="string" id="6461685">&#39;_&#39;</span>&nbsp;<span class="op" id="6461689">&amp;&amp;</span>&nbsp;<span class="ident" id="6461692"><a href="/go/build/build.go.html#6461610">c</a></span>&nbsp;<span class="op" id="6461694">!=</span>&nbsp;<span class="string" id="6461697">&#39;.&#39;</span>&nbsp;<span class="op" id="6461701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461706">return</span>&nbsp;<span class="builtintype" id="6461713">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6461728">//&nbsp;special&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461745">if</span>&nbsp;<span class="ident" id="6461748"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461752">.</span><span class="ident" id="6461753">CgoEnabled</span>&nbsp;<span class="op" id="6461764">&amp;&amp;</span>&nbsp;<span class="ident" id="6461767"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6461772">==</span>&nbsp;<span class="string" id="6461775">&#34;cgo&#34;</span>&nbsp;<span class="op" id="6461781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461785">return</span>&nbsp;<span class="builtintype" id="6461792">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461801">if</span>&nbsp;<span class="ident" id="6461804"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6461809">==</span>&nbsp;<span class="ident" id="6461812"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461816">.</span><span class="ident" id="6461817">GOOS</span>&nbsp;<span class="op" id="6461822">||</span>&nbsp;<span class="ident" id="6461825"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6461830">==</span>&nbsp;<span class="ident" id="6461833"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461837">.</span><span class="ident" id="6461838">GOARCH</span>&nbsp;<span class="op" id="6461845">||</span>&nbsp;<span class="ident" id="6461848"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6461853">==</span>&nbsp;<span class="ident" id="6461856"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461860">.</span><span class="ident" id="6461861">Compiler</span>&nbsp;<span class="op" id="6461870">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461874">return</span>&nbsp;<span class="builtintype" id="6461881">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461890">if</span>&nbsp;<span class="ident" id="6461893"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461897">.</span><span class="ident" id="6461898">GOOS</span>&nbsp;<span class="op" id="6461903">==</span>&nbsp;<span class="string" id="6461906">&#34;android&#34;</span>&nbsp;<span class="op" id="6461916">&amp;&amp;</span>&nbsp;<span class="ident" id="6461919"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6461924">==</span>&nbsp;<span class="string" id="6461927">&#34;linux&#34;</span>&nbsp;<span class="op" id="6461935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461939">return</span>&nbsp;<span class="builtintype" id="6461946">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461952">}</span><br>
<span class="lineno">1275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6461956">//&nbsp;other&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461971">for</span>&nbsp;<span class="ident" id="6461975">_</span><span class="op" id="6461976">,</span>&nbsp;<span class="ident" id="6461978">tag</span>&nbsp;<span class="op" id="6461982">:=</span>&nbsp;<span class="keyword" id="6461985">range</span>&nbsp;<span class="ident" id="6461991"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6461995">.</span><span class="ident" id="6461996">BuildTags</span>&nbsp;<span class="op" id="6462006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462010">if</span>&nbsp;<span class="ident" id="6462013"><a href="/go/build/build.go.html#6461978">tag</a></span>&nbsp;<span class="op" id="6462017">==</span>&nbsp;<span class="ident" id="6462020"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6462025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462030">return</span>&nbsp;<span class="builtintype" id="6462037">true</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462050">for</span>&nbsp;<span class="ident" id="6462054">_</span><span class="op" id="6462055">,</span>&nbsp;<span class="ident" id="6462057">tag</span>&nbsp;<span class="op" id="6462061">:=</span>&nbsp;<span class="keyword" id="6462064">range</span>&nbsp;<span class="ident" id="6462070"><a href="/go/build/build.go.html#6460919">ctxt</a></span><span class="op" id="6462074">.</span><span class="ident" id="6462075">ReleaseTags</span>&nbsp;<span class="op" id="6462087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462091">if</span>&nbsp;<span class="ident" id="6462094"><a href="/go/build/build.go.html#6462057">tag</a></span>&nbsp;<span class="op" id="6462098">==</span>&nbsp;<span class="ident" id="6462101"><a href="/go/build/build.go.html#6460940">name</a></span>&nbsp;<span class="op" id="6462106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462111">return</span>&nbsp;<span class="builtintype" id="6462118">true</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462132">return</span>&nbsp;<span class="builtintype" id="6462139">false</span><br>
<span class="lineno"></span><span class="op" id="6462145">}</span><br>
<span class="lineno">1290</span><br>
<span class="lineno"></span><span class="comment" id="6462148">//&nbsp;goodOSArchFile&nbsp;returns&nbsp;false&nbsp;if&nbsp;the&nbsp;name&nbsp;contains&nbsp;a&nbsp;$GOOS&nbsp;or&nbsp;$GOARCH</span><br>
<span class="lineno"></span><span class="comment" id="6462220">//&nbsp;suffix&nbsp;which&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;current&nbsp;system.</span><br>
<span class="lineno"></span><span class="comment" id="6462271">//&nbsp;The&nbsp;recognized&nbsp;name&nbsp;formats&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="6462307">//</span><br>
<span class="lineno">1295</span><span class="comment" id="6462310">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS).*</span><br>
<span class="lineno"></span><span class="comment" id="6462332">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="6462356">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="6462388">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="6462415">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH)_test.*</span><br>
<span class="lineno">1300</span><span class="comment" id="6462444">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="6462481">//</span><br>
<span class="lineno"></span><span class="comment" id="6462484">//&nbsp;An&nbsp;exception:&nbsp;if&nbsp;GOOS=android,&nbsp;then&nbsp;files&nbsp;with&nbsp;GOOS=linux&nbsp;are&nbsp;also&nbsp;matched.</span><br>
<span class="lineno"></span><span class="keyword" id="6462563">func</span>&nbsp;<span class="op" id="6462568">(</span><span class="ident" id="6462569">ctxt</span>&nbsp;<span class="op" id="6462574">*</span><span class="ident" id="6462575"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="6462582">)</span>&nbsp;<span class="ident" id="6462584">goodOSArchFile</span><span class="op" id="6462598">(</span><span class="ident" id="6462599">name</span>&nbsp;<span class="builtintype" id="6462604">string</span><span class="op" id="6462610">,</span>&nbsp;<span class="ident" id="6462612">allTags</span>&nbsp;<span class="keyword" id="6462620">map</span><span class="op" id="6462623">[</span><span class="builtintype" id="6462624">string</span><span class="op" id="6462630">]</span><span class="builtintype" id="6462631">bool</span><span class="op" id="6462635">)</span>&nbsp;<span class="builtintype" id="6462637">bool</span>&nbsp;<span class="op" id="6462642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462645">if</span>&nbsp;<span class="ident" id="6462648">dot</span>&nbsp;<span class="op" id="6462652">:=</span>&nbsp;<span class="ident" id="6462655"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6462662">.</span><span class="ident" id="6462663">Index</span><span class="op" id="6462668">(</span><span class="ident" id="6462669"><a href="/go/build/build.go.html#6462599">name</a></span><span class="op" id="6462673">,</span>&nbsp;<span class="string" id="6462675">&#34;.&#34;</span><span class="op" id="6462678">)</span><span class="op" id="6462679">;</span>&nbsp;<span class="ident" id="6462681"><a href="/go/build/build.go.html#6462648">dot</a></span>&nbsp;<span class="op" id="6462685">!=</span>&nbsp;<span class="op" id="6462688">-</span><span class="num" id="6462689">1</span>&nbsp;<span class="op" id="6462691">{</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462695"><a href="/go/build/build.go.html#6462599">name</a></span>&nbsp;<span class="op" id="6462700">=</span>&nbsp;<span class="ident" id="6462702"><a href="/go/build/build.go.html#6462599">name</a></span><span class="op" id="6462706">[</span><span class="op" id="6462707">:</span><span class="ident" id="6462708"><a href="/go/build/build.go.html#6462648">dot</a></span><span class="op" id="6462711">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6462718">//&nbsp;Before&nbsp;Go&nbsp;1.4,&nbsp;a&nbsp;file&nbsp;called&nbsp;&#34;linux.go&#34;&nbsp;would&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;having&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6462794">//&nbsp;build&nbsp;tag&nbsp;&#34;linux&#34;&nbsp;in&nbsp;that&nbsp;file.&nbsp;For&nbsp;Go&nbsp;1.4&nbsp;and&nbsp;beyond,&nbsp;we&nbsp;require&nbsp;this</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6462869">//&nbsp;auto-tagging&nbsp;to&nbsp;apply&nbsp;only&nbsp;to&nbsp;files&nbsp;with&nbsp;a&nbsp;non-empty&nbsp;prefix,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6462937">//&nbsp;&#34;foo_linux.go&#34;&nbsp;is&nbsp;tagged&nbsp;but&nbsp;&#34;linux.go&#34;&nbsp;is&nbsp;not.&nbsp;This&nbsp;allows&nbsp;new&nbsp;operating</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463015">//&nbsp;sytems,&nbsp;such&nbsp;as&nbsp;android,&nbsp;to&nbsp;arrive&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;code&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463090">//&nbsp;innocuous&nbsp;source&nbsp;code&nbsp;in&nbsp;&#34;android.go&#34;.&nbsp;The&nbsp;easiest&nbsp;fix:&nbsp;cut&nbsp;everything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463165">//&nbsp;in&nbsp;the&nbsp;name&nbsp;before&nbsp;the&nbsp;initial&nbsp;_.</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463203">i</span>&nbsp;<span class="op" id="6463205">:=</span>&nbsp;<span class="ident" id="6463208"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6463215">.</span><span class="ident" id="6463216">Index</span><span class="op" id="6463221">(</span><span class="ident" id="6463222"><a href="/go/build/build.go.html#6462599">name</a></span><span class="op" id="6463226">,</span>&nbsp;<span class="string" id="6463228">&#34;_&#34;</span><span class="op" id="6463231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463234">if</span>&nbsp;<span class="ident" id="6463237"><a href="/go/build/build.go.html#6463203">i</a></span>&nbsp;<span class="op" id="6463239">&lt;</span>&nbsp;<span class="num" id="6463241">0</span>&nbsp;<span class="op" id="6463243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463247">return</span>&nbsp;<span class="builtintype" id="6463254">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463263"><a href="/go/build/build.go.html#6462599">name</a></span>&nbsp;<span class="op" id="6463268">=</span>&nbsp;<span class="ident" id="6463270"><a href="/go/build/build.go.html#6462599">name</a></span><span class="op" id="6463274">[</span><span class="ident" id="6463275"><a href="/go/build/build.go.html#6463203">i</a></span><span class="op" id="6463276">:</span><span class="op" id="6463277">]</span>&nbsp;<span class="comment" id="6463279">//&nbsp;ignore&nbsp;everything&nbsp;before&nbsp;first&nbsp;_</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463317">l</span>&nbsp;<span class="op" id="6463319">:=</span>&nbsp;<span class="ident" id="6463322"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6463329">.</span><span class="ident" id="6463330">Split</span><span class="op" id="6463335">(</span><span class="ident" id="6463336"><a href="/go/build/build.go.html#6462599">name</a></span><span class="op" id="6463340">,</span>&nbsp;<span class="string" id="6463342">&#34;_&#34;</span><span class="op" id="6463345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463348">if</span>&nbsp;<span class="ident" id="6463351">n</span>&nbsp;<span class="op" id="6463353">:=</span>&nbsp;<span class="builtinfunc" id="6463356">len</span><span class="op" id="6463359">(</span><span class="ident" id="6463360"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463361">)</span><span class="op" id="6463362">;</span>&nbsp;<span class="ident" id="6463364"><a href="/go/build/build.go.html#6463351">n</a></span>&nbsp;<span class="op" id="6463366">&gt;</span>&nbsp;<span class="num" id="6463368">0</span>&nbsp;<span class="op" id="6463370">&amp;&amp;</span>&nbsp;<span class="ident" id="6463373"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463374">[</span><span class="ident" id="6463375"><a href="/go/build/build.go.html#6463351">n</a></span><span class="op" id="6463376">-</span><span class="num" id="6463377">1</span><span class="op" id="6463378">]</span>&nbsp;<span class="op" id="6463380">==</span>&nbsp;<span class="string" id="6463383">&#34;test&#34;</span>&nbsp;<span class="op" id="6463390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463394"><a href="/go/build/build.go.html#6463317">l</a></span>&nbsp;<span class="op" id="6463396">=</span>&nbsp;<span class="ident" id="6463398"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463399">[</span><span class="op" id="6463400">:</span><span class="ident" id="6463401"><a href="/go/build/build.go.html#6463351">n</a></span><span class="op" id="6463402">-</span><span class="num" id="6463403">1</span><span class="op" id="6463404">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463407">}</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463410">n</span>&nbsp;<span class="op" id="6463412">:=</span>&nbsp;<span class="builtinfunc" id="6463415">len</span><span class="op" id="6463418">(</span><span class="ident" id="6463419"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463423">if</span>&nbsp;<span class="ident" id="6463426"><a href="/go/build/build.go.html#6463410">n</a></span>&nbsp;<span class="op" id="6463428">&gt;=</span>&nbsp;<span class="num" id="6463431">2</span>&nbsp;<span class="op" id="6463433">&amp;&amp;</span>&nbsp;<span class="ident" id="6463436"><a href="/go/build/build.go.html#6464030">knownOS</a></span><span class="op" id="6463443">[</span><span class="ident" id="6463444"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463445">[</span><span class="ident" id="6463446"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463447">-</span><span class="num" id="6463448">2</span><span class="op" id="6463449">]</span><span class="op" id="6463450">]</span>&nbsp;<span class="op" id="6463452">&amp;&amp;</span>&nbsp;<span class="ident" id="6463455"><a href="/go/build/build.go.html#6464066">knownArch</a></span><span class="op" id="6463464">[</span><span class="ident" id="6463465"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463466">[</span><span class="ident" id="6463467"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463468">-</span><span class="num" id="6463469">1</span><span class="op" id="6463470">]</span><span class="op" id="6463471">]</span>&nbsp;<span class="op" id="6463473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463477">if</span>&nbsp;<span class="ident" id="6463480"><a href="/go/build/build.go.html#6462612">allTags</a></span>&nbsp;<span class="op" id="6463488">!=</span>&nbsp;<span class="ident" id="6463491">nil</span>&nbsp;<span class="op" id="6463495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463500"><a href="/go/build/build.go.html#6462612">allTags</a></span><span class="op" id="6463507">[</span><span class="ident" id="6463508"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463509">[</span><span class="ident" id="6463510"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463511">-</span><span class="num" id="6463512">2</span><span class="op" id="6463513">]</span><span class="op" id="6463514">]</span>&nbsp;<span class="op" id="6463516">=</span>&nbsp;<span class="builtintype" id="6463518">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463526"><a href="/go/build/build.go.html#6462612">allTags</a></span><span class="op" id="6463533">[</span><span class="ident" id="6463534"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463535">[</span><span class="ident" id="6463536"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463537">-</span><span class="num" id="6463538">1</span><span class="op" id="6463539">]</span><span class="op" id="6463540">]</span>&nbsp;<span class="op" id="6463542">=</span>&nbsp;<span class="builtintype" id="6463544">true</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463555">if</span>&nbsp;<span class="ident" id="6463558"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463559">[</span><span class="ident" id="6463560"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463561">-</span><span class="num" id="6463562">1</span><span class="op" id="6463563">]</span>&nbsp;<span class="op" id="6463565">!=</span>&nbsp;<span class="ident" id="6463568"><a href="/go/build/build.go.html#6462569">ctxt</a></span><span class="op" id="6463572">.</span><span class="ident" id="6463573">GOARCH</span>&nbsp;<span class="op" id="6463580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463585">return</span>&nbsp;<span class="builtintype" id="6463592">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463604">if</span>&nbsp;<span class="ident" id="6463607"><a href="/go/build/build.go.html#6462569">ctxt</a></span><span class="op" id="6463611">.</span><span class="ident" id="6463612">GOOS</span>&nbsp;<span class="op" id="6463617">==</span>&nbsp;<span class="string" id="6463620">&#34;android&#34;</span>&nbsp;<span class="op" id="6463630">&amp;&amp;</span>&nbsp;<span class="ident" id="6463633"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463634">[</span><span class="ident" id="6463635"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463636">-</span><span class="num" id="6463637">2</span><span class="op" id="6463638">]</span>&nbsp;<span class="op" id="6463640">==</span>&nbsp;<span class="string" id="6463643">&#34;linux&#34;</span>&nbsp;<span class="op" id="6463651">{</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463656">return</span>&nbsp;<span class="builtintype" id="6463663">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463674">return</span>&nbsp;<span class="ident" id="6463681"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463682">[</span><span class="ident" id="6463683"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463684">-</span><span class="num" id="6463685">2</span><span class="op" id="6463686">]</span>&nbsp;<span class="op" id="6463688">==</span>&nbsp;<span class="ident" id="6463691"><a href="/go/build/build.go.html#6462569">ctxt</a></span><span class="op" id="6463695">.</span><span class="ident" id="6463696">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463705">if</span>&nbsp;<span class="ident" id="6463708"><a href="/go/build/build.go.html#6463410">n</a></span>&nbsp;<span class="op" id="6463710">&gt;=</span>&nbsp;<span class="num" id="6463713">1</span>&nbsp;<span class="op" id="6463715">&amp;&amp;</span>&nbsp;<span class="ident" id="6463718"><a href="/go/build/build.go.html#6464030">knownOS</a></span><span class="op" id="6463725">[</span><span class="ident" id="6463726"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463727">[</span><span class="ident" id="6463728"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463729">-</span><span class="num" id="6463730">1</span><span class="op" id="6463731">]</span><span class="op" id="6463732">]</span>&nbsp;<span class="op" id="6463734">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463738">if</span>&nbsp;<span class="ident" id="6463741"><a href="/go/build/build.go.html#6462612">allTags</a></span>&nbsp;<span class="op" id="6463749">!=</span>&nbsp;<span class="ident" id="6463752">nil</span>&nbsp;<span class="op" id="6463756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463761"><a href="/go/build/build.go.html#6462612">allTags</a></span><span class="op" id="6463768">[</span><span class="ident" id="6463769"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463770">[</span><span class="ident" id="6463771"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463772">-</span><span class="num" id="6463773">1</span><span class="op" id="6463774">]</span><span class="op" id="6463775">]</span>&nbsp;<span class="op" id="6463777">=</span>&nbsp;<span class="builtintype" id="6463779">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463790">if</span>&nbsp;<span class="ident" id="6463793"><a href="/go/build/build.go.html#6462569">ctxt</a></span><span class="op" id="6463797">.</span><span class="ident" id="6463798">GOOS</span>&nbsp;<span class="op" id="6463803">==</span>&nbsp;<span class="string" id="6463806">&#34;android&#34;</span>&nbsp;<span class="op" id="6463816">&amp;&amp;</span>&nbsp;<span class="ident" id="6463819"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463820">[</span><span class="ident" id="6463821"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463822">-</span><span class="num" id="6463823">1</span><span class="op" id="6463824">]</span>&nbsp;<span class="op" id="6463826">==</span>&nbsp;<span class="string" id="6463829">&#34;linux&#34;</span>&nbsp;<span class="op" id="6463837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463842">return</span>&nbsp;<span class="builtintype" id="6463849">true</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463860">return</span>&nbsp;<span class="ident" id="6463867"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463868">[</span><span class="ident" id="6463869"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463870">-</span><span class="num" id="6463871">1</span><span class="op" id="6463872">]</span>&nbsp;<span class="op" id="6463874">==</span>&nbsp;<span class="ident" id="6463877"><a href="/go/build/build.go.html#6462569">ctxt</a></span><span class="op" id="6463881">.</span><span class="ident" id="6463882">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463891">if</span>&nbsp;<span class="ident" id="6463894"><a href="/go/build/build.go.html#6463410">n</a></span>&nbsp;<span class="op" id="6463896">&gt;=</span>&nbsp;<span class="num" id="6463899">1</span>&nbsp;<span class="op" id="6463901">&amp;&amp;</span>&nbsp;<span class="ident" id="6463904"><a href="/go/build/build.go.html#6464066">knownArch</a></span><span class="op" id="6463913">[</span><span class="ident" id="6463914"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463915">[</span><span class="ident" id="6463916"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463917">-</span><span class="num" id="6463918">1</span><span class="op" id="6463919">]</span><span class="op" id="6463920">]</span>&nbsp;<span class="op" id="6463922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463926">if</span>&nbsp;<span class="ident" id="6463929"><a href="/go/build/build.go.html#6462612">allTags</a></span>&nbsp;<span class="op" id="6463937">!=</span>&nbsp;<span class="ident" id="6463940">nil</span>&nbsp;<span class="op" id="6463944">{</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463949"><a href="/go/build/build.go.html#6462612">allTags</a></span><span class="op" id="6463956">[</span><span class="ident" id="6463957"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463958">[</span><span class="ident" id="6463959"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463960">-</span><span class="num" id="6463961">1</span><span class="op" id="6463962">]</span><span class="op" id="6463963">]</span>&nbsp;<span class="op" id="6463965">=</span>&nbsp;<span class="builtintype" id="6463967">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463978">return</span>&nbsp;<span class="ident" id="6463985"><a href="/go/build/build.go.html#6463317">l</a></span><span class="op" id="6463986">[</span><span class="ident" id="6463987"><a href="/go/build/build.go.html#6463410">n</a></span><span class="op" id="6463988">-</span><span class="num" id="6463989">1</span><span class="op" id="6463990">]</span>&nbsp;<span class="op" id="6463992">==</span>&nbsp;<span class="ident" id="6463995"><a href="/go/build/build.go.html#6462569">ctxt</a></span><span class="op" id="6463999">.</span><span class="ident" id="6464000">GOARCH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464011">return</span>&nbsp;<span class="builtintype" id="6464018">true</span><br>
<span class="lineno">1355</span><span class="op" id="6464023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6464026">var</span>&nbsp;<span class="ident" id="6464030">knownOS</span>&nbsp;<span class="op" id="6464038">=</span>&nbsp;<span class="builtinfunc" id="6464040">make</span><span class="op" id="6464044">(</span><span class="keyword" id="6464045">map</span><span class="op" id="6464048">[</span><span class="builtintype" id="6464049">string</span><span class="op" id="6464055">]</span><span class="builtintype" id="6464056">bool</span><span class="op" id="6464060">)</span><br>
<span class="lineno"></span><span class="keyword" id="6464062">var</span>&nbsp;<span class="ident" id="6464066">knownArch</span>&nbsp;<span class="op" id="6464076">=</span>&nbsp;<span class="builtinfunc" id="6464078">make</span><span class="op" id="6464082">(</span><span class="keyword" id="6464083">map</span><span class="op" id="6464086">[</span><span class="builtintype" id="6464087">string</span><span class="op" id="6464093">]</span><span class="builtintype" id="6464094">bool</span><span class="op" id="6464098">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1360</span><span class="keyword" id="6464101">func</span>&nbsp;<span class="ident" id="6464106">init</span><span class="op" id="6464110">(</span><span class="op" id="6464111">)</span>&nbsp;<span class="op" id="6464113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464116">for</span>&nbsp;<span class="ident" id="6464120">_</span><span class="op" id="6464121">,</span>&nbsp;<span class="ident" id="6464123">v</span>&nbsp;<span class="op" id="6464125">:=</span>&nbsp;<span class="keyword" id="6464128">range</span>&nbsp;<span class="ident" id="6464134"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6464141">.</span><span class="ident" id="6464142">Fields</span><span class="op" id="6464148">(</span><span class="ident" id="6464149"><a href="/go/build/syslist.go.html#6475718">goosList</a></span><span class="op" id="6464157">)</span>&nbsp;<span class="op" id="6464159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464163"><a href="/go/build/build.go.html#6464030">knownOS</a></span><span class="op" id="6464170">[</span><span class="ident" id="6464171"><a href="/go/build/build.go.html#6464123">v</a></span><span class="op" id="6464172">]</span>&nbsp;<span class="op" id="6464174">=</span>&nbsp;<span class="builtintype" id="6464176">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464185">for</span>&nbsp;<span class="ident" id="6464189">_</span><span class="op" id="6464190">,</span>&nbsp;<span class="ident" id="6464192">v</span>&nbsp;<span class="op" id="6464194">:=</span>&nbsp;<span class="keyword" id="6464197">range</span>&nbsp;<span class="ident" id="6464203"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6464210">.</span><span class="ident" id="6464211">Fields</span><span class="op" id="6464217">(</span><span class="ident" id="6464218"><a href="/go/build/syslist.go.html#6475819">goarchList</a></span><span class="op" id="6464228">)</span>&nbsp;<span class="op" id="6464230">{</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464234"><a href="/go/build/build.go.html#6464066">knownArch</a></span><span class="op" id="6464243">[</span><span class="ident" id="6464244"><a href="/go/build/build.go.html#6464192">v</a></span><span class="op" id="6464245">]</span>&nbsp;<span class="op" id="6464247">=</span>&nbsp;<span class="builtintype" id="6464249">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464255">}</span><br>
<span class="lineno"></span><span class="op" id="6464257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6464260">//&nbsp;ToolDir&nbsp;is&nbsp;the&nbsp;directory&nbsp;containing&nbsp;build&nbsp;tools.</span><br>
<span class="lineno">1370</span><span class="keyword" id="6464312">var</span>&nbsp;<span class="ident" id="6464316">ToolDir</span>&nbsp;<span class="op" id="6464324">=</span>&nbsp;<span class="ident" id="6464326"><a href="/go/build/build.go.html#6426090">filepath</a></span><span class="op" id="6464334">.</span><span class="ident" id="6464335">Join</span><span class="op" id="6464339">(</span><span class="ident" id="6464340"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6464347">.</span><span class="ident" id="6464348">GOROOT</span><span class="op" id="6464354">(</span><span class="op" id="6464355">)</span><span class="op" id="6464356">,</span>&nbsp;<span class="string" id="6464358">&#34;pkg/tool/&#34;</span><span class="op" id="6464369">+</span><span class="ident" id="6464370"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6464377">.</span><span class="ident" id="6464378">GOOS</span><span class="op" id="6464382">+</span><span class="string" id="6464383">&#34;_&#34;</span><span class="op" id="6464386">+</span><span class="ident" id="6464387"><a href="/go/build/build.go.html#6426107">runtime</a></span><span class="op" id="6464394">.</span><span class="ident" id="6464395">GOARCH</span><span class="op" id="6464401">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6464404">//&nbsp;IsLocalImport&nbsp;reports&nbsp;whether&nbsp;the&nbsp;import&nbsp;path&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6464456">//&nbsp;a&nbsp;local&nbsp;import&nbsp;path,&nbsp;like&nbsp;&#34;.&#34;,&nbsp;&#34;..&#34;,&nbsp;&#34;./foo&#34;,&nbsp;or&nbsp;&#34;../foo&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6464518">func</span>&nbsp;<span class="ident" id="6464523">IsLocalImport</span><span class="op" id="6464536">(</span><span class="ident" id="6464537">path</span>&nbsp;<span class="builtintype" id="6464542">string</span><span class="op" id="6464548">)</span>&nbsp;<span class="builtintype" id="6464550">bool</span>&nbsp;<span class="op" id="6464555">{</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464558">return</span>&nbsp;<span class="ident" id="6464565"><a href="/go/build/build.go.html#6464537">path</a></span>&nbsp;<span class="op" id="6464570">==</span>&nbsp;<span class="string" id="6464573">&#34;.&#34;</span>&nbsp;<span class="op" id="6464577">||</span>&nbsp;<span class="ident" id="6464580"><a href="/go/build/build.go.html#6464537">path</a></span>&nbsp;<span class="op" id="6464585">==</span>&nbsp;<span class="string" id="6464588">&#34;..&#34;</span>&nbsp;<span class="op" id="6464593">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464598"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6464605">.</span><span class="ident" id="6464606">HasPrefix</span><span class="op" id="6464615">(</span><span class="ident" id="6464616"><a href="/go/build/build.go.html#6464537">path</a></span><span class="op" id="6464620">,</span>&nbsp;<span class="string" id="6464622">&#34;./&#34;</span><span class="op" id="6464626">)</span>&nbsp;<span class="op" id="6464628">||</span>&nbsp;<span class="ident" id="6464631"><a href="/go/build/build.go.html#6426137">strings</a></span><span class="op" id="6464638">.</span><span class="ident" id="6464639">HasPrefix</span><span class="op" id="6464648">(</span><span class="ident" id="6464649"><a href="/go/build/build.go.html#6464537">path</a></span><span class="op" id="6464653">,</span>&nbsp;<span class="string" id="6464655">&#34;../&#34;</span><span class="op" id="6464660">)</span><br>
<span class="lineno"></span><span class="op" id="6464662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6464665">//&nbsp;ArchChar&nbsp;returns&nbsp;the&nbsp;architecture&nbsp;character&nbsp;for&nbsp;the&nbsp;given&nbsp;goarch.</span><br>
<span class="lineno">1380</span><span class="comment" id="6464734">//&nbsp;For&nbsp;example,&nbsp;ArchChar(&#34;amd64&#34;)&nbsp;returns&nbsp;&#34;6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6464781">func</span>&nbsp;<span class="ident" id="6464786">ArchChar</span><span class="op" id="6464794">(</span><span class="ident" id="6464795">goarch</span>&nbsp;<span class="builtintype" id="6464802">string</span><span class="op" id="6464808">)</span>&nbsp;<span class="op" id="6464810">(</span><span class="builtintype" id="6464811">string</span><span class="op" id="6464817">,</span>&nbsp;<span class="builtintype" id="6464819">error</span><span class="op" id="6464824">)</span>&nbsp;<span class="op" id="6464826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464829">switch</span>&nbsp;<span class="ident" id="6464836"><a href="/go/build/build.go.html#6464795">goarch</a></span>&nbsp;<span class="op" id="6464843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464846">case</span>&nbsp;<span class="string" id="6464851">&#34;386&#34;</span><span class="op" id="6464856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464860">return</span>&nbsp;<span class="string" id="6464867">&#34;8&#34;</span><span class="op" id="6464870">,</span>&nbsp;<span class="ident" id="6464872">nil</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464877">case</span>&nbsp;<span class="string" id="6464882">&#34;amd64&#34;</span><span class="op" id="6464889">,</span>&nbsp;<span class="string" id="6464891">&#34;amd64p32&#34;</span><span class="op" id="6464901">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464905">return</span>&nbsp;<span class="string" id="6464912">&#34;6&#34;</span><span class="op" id="6464915">,</span>&nbsp;<span class="ident" id="6464917">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464922">case</span>&nbsp;<span class="string" id="6464927">&#34;arm&#34;</span><span class="op" id="6464932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464936">return</span>&nbsp;<span class="string" id="6464943">&#34;5&#34;</span><span class="op" id="6464946">,</span>&nbsp;<span class="ident" id="6464948">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464953">}</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464956">return</span>&nbsp;<span class="string" id="6464963">&#34;&#34;</span><span class="op" id="6464965">,</span>&nbsp;<span class="ident" id="6464967"><a href="/go/build/build.go.html#6425980">errors</a></span><span class="op" id="6464973">.</span><span class="ident" id="6464974">New</span><span class="op" id="6464977">(</span><span class="string" id="6464978">&#34;unsupported&nbsp;GOARCH&nbsp;&#34;</span>&nbsp;<span class="op" id="6465000">+</span>&nbsp;<span class="ident" id="6465002"><a href="/go/build/build.go.html#6464795">goarch</a></span><span class="op" id="6465008">)</span><br>
<span class="lineno"></span><span class="op" id="6465010">}</span>
</div>
</body>
</html>
