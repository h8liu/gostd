<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6783502">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6783557">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6783611">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6783662">package</span>&nbsp;<span class="ident" id="6783670">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6783675">import</span>&nbsp;<span class="op" id="6783682">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783685">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783691">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783704">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783710">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783721">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6783731">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6783734">var</span>&nbsp;<span class="ident" id="6783738">filenames</span>&nbsp;<span class="op" id="6783748">=</span>&nbsp;<span class="op" id="6783750">[</span><span class="op" id="6783751">]</span><span class="builtintype" id="6783752">string</span><span class="op" id="6783758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783761">&#34;../testdata/e.txt&#34;</span><span class="op" id="6783780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6783783">&#34;../testdata/pi.txt&#34;</span><span class="op" id="6783803">,</span><br>
<span class="lineno"></span><span class="op" id="6783805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6783808">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6783886">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6783953">func</span>&nbsp;<span class="ident" id="6783958">testFile</span><span class="op" id="6783966">(</span><span class="ident" id="6783967">t</span>&nbsp;<span class="op" id="6783969">*</span><span class="ident" id="6783970">testing</span><span class="op" id="6783977">.</span><span class="ident" id="6783978">T</span><span class="op" id="6783979">,</span>&nbsp;<span class="ident" id="6783981">fn</span>&nbsp;<span class="builtintype" id="6783984">string</span><span class="op" id="6783990">,</span>&nbsp;<span class="ident" id="6783992">order</span>&nbsp;<span class="ident" id="6783998">Order</span><span class="op" id="6784003">,</span>&nbsp;<span class="ident" id="6784005">litWidth</span>&nbsp;<span class="builtintype" id="6784014">int</span><span class="op" id="6784017">)</span>&nbsp;<span class="op" id="6784019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6784022">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784059">golden</span><span class="op" id="6784065">,</span>&nbsp;<span class="ident" id="6784067">err</span>&nbsp;<span class="op" id="6784071">:=</span>&nbsp;<span class="ident" id="6784074">os</span><span class="op" id="6784076">.</span><span class="ident" id="6784077">Open</span><span class="op" id="6784081">(</span><span class="ident" id="6784082">fn</span><span class="op" id="6784084">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784087">if</span>&nbsp;<span class="ident" id="6784090">err</span>&nbsp;<span class="op" id="6784094">!=</span>&nbsp;<span class="builtintype" id="6784097">nil</span>&nbsp;<span class="op" id="6784101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784105">t</span><span class="op" id="6784106">.</span><span class="ident" id="6784107">Errorf</span><span class="op" id="6784113">(</span><span class="string" id="6784114">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6784145">,</span>&nbsp;<span class="ident" id="6784147">fn</span><span class="op" id="6784149">,</span>&nbsp;<span class="ident" id="6784151">order</span><span class="op" id="6784156">,</span>&nbsp;<span class="ident" id="6784158">litWidth</span><span class="op" id="6784166">,</span>&nbsp;<span class="ident" id="6784168">err</span><span class="op" id="6784171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784175">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784186">defer</span>&nbsp;<span class="ident" id="6784192">golden</span><span class="op" id="6784198">.</span><span class="ident" id="6784199">Close</span><span class="op" id="6784204">(</span><span class="op" id="6784205">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6784209">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784329">raw</span><span class="op" id="6784332">,</span>&nbsp;<span class="ident" id="6784334">err</span>&nbsp;<span class="op" id="6784338">:=</span>&nbsp;<span class="ident" id="6784341">os</span><span class="op" id="6784343">.</span><span class="ident" id="6784344">Open</span><span class="op" id="6784348">(</span><span class="ident" id="6784349">fn</span><span class="op" id="6784351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784354">if</span>&nbsp;<span class="ident" id="6784357">err</span>&nbsp;<span class="op" id="6784361">!=</span>&nbsp;<span class="builtintype" id="6784364">nil</span>&nbsp;<span class="op" id="6784368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784372">t</span><span class="op" id="6784373">.</span><span class="ident" id="6784374">Errorf</span><span class="op" id="6784380">(</span><span class="string" id="6784381">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6784412">,</span>&nbsp;<span class="ident" id="6784414">fn</span><span class="op" id="6784416">,</span>&nbsp;<span class="ident" id="6784418">order</span><span class="op" id="6784423">,</span>&nbsp;<span class="ident" id="6784425">litWidth</span><span class="op" id="6784433">,</span>&nbsp;<span class="ident" id="6784435">err</span><span class="op" id="6784438">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784442">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784454">piper</span><span class="op" id="6784459">,</span>&nbsp;<span class="ident" id="6784461">pipew</span>&nbsp;<span class="op" id="6784467">:=</span>&nbsp;<span class="ident" id="6784470">io</span><span class="op" id="6784472">.</span><span class="ident" id="6784473">Pipe</span><span class="op" id="6784477">(</span><span class="op" id="6784478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784481">defer</span>&nbsp;<span class="ident" id="6784487">piper</span><span class="op" id="6784492">.</span><span class="ident" id="6784493">Close</span><span class="op" id="6784498">(</span><span class="op" id="6784499">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784502">go</span>&nbsp;<span class="keyword" id="6784505">func</span><span class="op" id="6784509">(</span><span class="op" id="6784510">)</span>&nbsp;<span class="op" id="6784512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784516">defer</span>&nbsp;<span class="ident" id="6784522">raw</span><span class="op" id="6784525">.</span><span class="ident" id="6784526">Close</span><span class="op" id="6784531">(</span><span class="op" id="6784532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784536">defer</span>&nbsp;<span class="ident" id="6784542">pipew</span><span class="op" id="6784547">.</span><span class="ident" id="6784548">Close</span><span class="op" id="6784553">(</span><span class="op" id="6784554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784558">lzww</span>&nbsp;<span class="op" id="6784563">:=</span>&nbsp;<span class="ident" id="6784566">NewWriter</span><span class="op" id="6784575">(</span><span class="ident" id="6784576">pipew</span><span class="op" id="6784581">,</span>&nbsp;<span class="ident" id="6784583">order</span><span class="op" id="6784588">,</span>&nbsp;<span class="ident" id="6784590">litWidth</span><span class="op" id="6784598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784602">defer</span>&nbsp;<span class="ident" id="6784608">lzww</span><span class="op" id="6784612">.</span><span class="ident" id="6784613">Close</span><span class="op" id="6784618">(</span><span class="op" id="6784619">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784623">var</span>&nbsp;<span class="ident" id="6784627">b</span>&nbsp;<span class="op" id="6784629">[</span><span class="num" id="6784630">4096</span><span class="op" id="6784634">]</span><span class="builtintype" id="6784635">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784642">for</span>&nbsp;<span class="op" id="6784646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784651">n</span><span class="op" id="6784652">,</span>&nbsp;<span class="ident" id="6784654">err0</span>&nbsp;<span class="op" id="6784659">:=</span>&nbsp;<span class="ident" id="6784662">raw</span><span class="op" id="6784665">.</span><span class="ident" id="6784666">Read</span><span class="op" id="6784670">(</span><span class="ident" id="6784671">b</span><span class="op" id="6784672">[</span><span class="op" id="6784673">:</span><span class="op" id="6784674">]</span><span class="op" id="6784675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784680">if</span>&nbsp;<span class="ident" id="6784683">err0</span>&nbsp;<span class="op" id="6784688">!=</span>&nbsp;<span class="builtintype" id="6784691">nil</span>&nbsp;<span class="op" id="6784695">&amp;&amp;</span>&nbsp;<span class="ident" id="6784698">err0</span>&nbsp;<span class="op" id="6784703">!=</span>&nbsp;<span class="ident" id="6784706">io</span><span class="op" id="6784708">.</span><span class="ident" id="6784709">EOF</span>&nbsp;<span class="op" id="6784713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784719">t</span><span class="op" id="6784720">.</span><span class="ident" id="6784721">Errorf</span><span class="op" id="6784727">(</span><span class="string" id="6784728">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6784759">,</span>&nbsp;<span class="ident" id="6784761">fn</span><span class="op" id="6784763">,</span>&nbsp;<span class="ident" id="6784765">order</span><span class="op" id="6784770">,</span>&nbsp;<span class="ident" id="6784772">litWidth</span><span class="op" id="6784780">,</span>&nbsp;<span class="ident" id="6784782">err0</span><span class="op" id="6784786">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784792">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784807">_</span><span class="op" id="6784808">,</span>&nbsp;<span class="ident" id="6784810">err1</span>&nbsp;<span class="op" id="6784815">:=</span>&nbsp;<span class="ident" id="6784818">lzww</span><span class="op" id="6784822">.</span><span class="ident" id="6784823">Write</span><span class="op" id="6784828">(</span><span class="ident" id="6784829">b</span><span class="op" id="6784830">[</span><span class="op" id="6784831">:</span><span class="ident" id="6784832">n</span><span class="op" id="6784833">]</span><span class="op" id="6784834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784839">if</span>&nbsp;<span class="ident" id="6784842">err1</span>&nbsp;<span class="op" id="6784847">!=</span>&nbsp;<span class="builtintype" id="6784850">nil</span>&nbsp;<span class="op" id="6784854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784860">t</span><span class="op" id="6784861">.</span><span class="ident" id="6784862">Errorf</span><span class="op" id="6784868">(</span><span class="string" id="6784869">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6784900">,</span>&nbsp;<span class="ident" id="6784902">fn</span><span class="op" id="6784904">,</span>&nbsp;<span class="ident" id="6784906">order</span><span class="op" id="6784911">,</span>&nbsp;<span class="ident" id="6784913">litWidth</span><span class="op" id="6784921">,</span>&nbsp;<span class="ident" id="6784923">err1</span><span class="op" id="6784927">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784933">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784948">if</span>&nbsp;<span class="ident" id="6784951">err0</span>&nbsp;<span class="op" id="6784956">==</span>&nbsp;<span class="ident" id="6784959">io</span><span class="op" id="6784961">.</span><span class="ident" id="6784962">EOF</span>&nbsp;<span class="op" id="6784966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6784972">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784981">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6784988">}</span><span class="op" id="6784989">(</span><span class="op" id="6784990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6784993">lzwr</span>&nbsp;<span class="op" id="6784998">:=</span>&nbsp;<span class="ident" id="6785001">NewReader</span><span class="op" id="6785010">(</span><span class="ident" id="6785011">piper</span><span class="op" id="6785016">,</span>&nbsp;<span class="ident" id="6785018">order</span><span class="op" id="6785023">,</span>&nbsp;<span class="ident" id="6785025">litWidth</span><span class="op" id="6785033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785036">defer</span>&nbsp;<span class="ident" id="6785042">lzwr</span><span class="op" id="6785046">.</span><span class="ident" id="6785047">Close</span><span class="op" id="6785052">(</span><span class="op" id="6785053">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6785057">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785078">b0</span><span class="op" id="6785080">,</span>&nbsp;<span class="ident" id="6785082">err0</span>&nbsp;<span class="op" id="6785087">:=</span>&nbsp;<span class="ident" id="6785090">ioutil</span><span class="op" id="6785096">.</span><span class="ident" id="6785097">ReadAll</span><span class="op" id="6785104">(</span><span class="ident" id="6785105">golden</span><span class="op" id="6785111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785114">b1</span><span class="op" id="6785116">,</span>&nbsp;<span class="ident" id="6785118">err1</span>&nbsp;<span class="op" id="6785123">:=</span>&nbsp;<span class="ident" id="6785126">ioutil</span><span class="op" id="6785132">.</span><span class="ident" id="6785133">ReadAll</span><span class="op" id="6785140">(</span><span class="ident" id="6785141">lzwr</span><span class="op" id="6785145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785148">if</span>&nbsp;<span class="ident" id="6785151">err0</span>&nbsp;<span class="op" id="6785156">!=</span>&nbsp;<span class="builtintype" id="6785159">nil</span>&nbsp;<span class="op" id="6785163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785167">t</span><span class="op" id="6785168">.</span><span class="ident" id="6785169">Errorf</span><span class="op" id="6785175">(</span><span class="string" id="6785176">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6785207">,</span>&nbsp;<span class="ident" id="6785209">fn</span><span class="op" id="6785211">,</span>&nbsp;<span class="ident" id="6785213">order</span><span class="op" id="6785218">,</span>&nbsp;<span class="ident" id="6785220">litWidth</span><span class="op" id="6785228">,</span>&nbsp;<span class="ident" id="6785230">err0</span><span class="op" id="6785234">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785238">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785249">if</span>&nbsp;<span class="ident" id="6785252">err1</span>&nbsp;<span class="op" id="6785257">!=</span>&nbsp;<span class="builtintype" id="6785260">nil</span>&nbsp;<span class="op" id="6785264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785268">t</span><span class="op" id="6785269">.</span><span class="ident" id="6785270">Errorf</span><span class="op" id="6785276">(</span><span class="string" id="6785277">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="6785308">,</span>&nbsp;<span class="ident" id="6785310">fn</span><span class="op" id="6785312">,</span>&nbsp;<span class="ident" id="6785314">order</span><span class="op" id="6785319">,</span>&nbsp;<span class="ident" id="6785321">litWidth</span><span class="op" id="6785329">,</span>&nbsp;<span class="ident" id="6785331">err1</span><span class="op" id="6785335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785339">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785350">if</span>&nbsp;<span class="builtinfunc" id="6785353">len</span><span class="op" id="6785356">(</span><span class="ident" id="6785357">b1</span><span class="op" id="6785359">)</span>&nbsp;<span class="op" id="6785361">!=</span>&nbsp;<span class="builtinfunc" id="6785364">len</span><span class="op" id="6785367">(</span><span class="ident" id="6785368">b0</span><span class="op" id="6785370">)</span>&nbsp;<span class="op" id="6785372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785376">t</span><span class="op" id="6785377">.</span><span class="ident" id="6785378">Errorf</span><span class="op" id="6785384">(</span><span class="string" id="6785385">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="6785438">,</span>&nbsp;<span class="ident" id="6785440">fn</span><span class="op" id="6785442">,</span>&nbsp;<span class="ident" id="6785444">order</span><span class="op" id="6785449">,</span>&nbsp;<span class="ident" id="6785451">litWidth</span><span class="op" id="6785459">,</span>&nbsp;<span class="builtinfunc" id="6785461">len</span><span class="op" id="6785464">(</span><span class="ident" id="6785465">b1</span><span class="op" id="6785467">)</span><span class="op" id="6785468">,</span>&nbsp;<span class="builtinfunc" id="6785470">len</span><span class="op" id="6785473">(</span><span class="ident" id="6785474">b0</span><span class="op" id="6785476">)</span><span class="op" id="6785477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785481">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785489">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785492">for</span>&nbsp;<span class="ident" id="6785496">i</span>&nbsp;<span class="op" id="6785498">:=</span>&nbsp;<span class="num" id="6785501">0</span><span class="op" id="6785502">;</span>&nbsp;<span class="ident" id="6785504">i</span>&nbsp;<span class="op" id="6785506">&lt;</span>&nbsp;<span class="builtinfunc" id="6785508">len</span><span class="op" id="6785511">(</span><span class="ident" id="6785512">b0</span><span class="op" id="6785514">)</span><span class="op" id="6785515">;</span>&nbsp;<span class="ident" id="6785517">i</span><span class="op" id="6785518">++</span>&nbsp;<span class="op" id="6785521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785525">if</span>&nbsp;<span class="ident" id="6785528">b1</span><span class="op" id="6785530">[</span><span class="ident" id="6785531">i</span><span class="op" id="6785532">]</span>&nbsp;<span class="op" id="6785534">!=</span>&nbsp;<span class="ident" id="6785537">b0</span><span class="op" id="6785539">[</span><span class="ident" id="6785540">i</span><span class="op" id="6785541">]</span>&nbsp;<span class="op" id="6785543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785548">t</span><span class="op" id="6785549">.</span><span class="ident" id="6785550">Errorf</span><span class="op" id="6785556">(</span><span class="string" id="6785557">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="6785620">,</span>&nbsp;<span class="ident" id="6785622">fn</span><span class="op" id="6785624">,</span>&nbsp;<span class="ident" id="6785626">order</span><span class="op" id="6785631">,</span>&nbsp;<span class="ident" id="6785633">litWidth</span><span class="op" id="6785641">,</span>&nbsp;<span class="ident" id="6785643">i</span><span class="op" id="6785644">,</span>&nbsp;<span class="ident" id="6785646">b1</span><span class="op" id="6785648">[</span><span class="ident" id="6785649">i</span><span class="op" id="6785650">]</span><span class="op" id="6785651">,</span>&nbsp;<span class="ident" id="6785653">b0</span><span class="op" id="6785655">[</span><span class="ident" id="6785656">i</span><span class="op" id="6785657">]</span><span class="op" id="6785658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785663">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785672">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785675">}</span><br>
<span class="lineno"></span><span class="op" id="6785677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6785680">func</span>&nbsp;<span class="ident" id="6785685">TestWriter</span><span class="op" id="6785695">(</span><span class="ident" id="6785696">t</span>&nbsp;<span class="op" id="6785698">*</span><span class="ident" id="6785699">testing</span><span class="op" id="6785706">.</span><span class="ident" id="6785707">T</span><span class="op" id="6785708">)</span>&nbsp;<span class="op" id="6785710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785713">for</span>&nbsp;<span class="ident" id="6785717">_</span><span class="op" id="6785718">,</span>&nbsp;<span class="ident" id="6785720">filename</span>&nbsp;<span class="op" id="6785729">:=</span>&nbsp;<span class="keyword" id="6785732">range</span>&nbsp;<span class="ident" id="6785738">filenames</span>&nbsp;<span class="op" id="6785748">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785752">for</span>&nbsp;<span class="ident" id="6785756">_</span><span class="op" id="6785757">,</span>&nbsp;<span class="ident" id="6785759">order</span>&nbsp;<span class="op" id="6785765">:=</span>&nbsp;<span class="keyword" id="6785768">range</span>&nbsp;<span class="op" id="6785774">[</span><span class="op" id="6785775">...</span><span class="op" id="6785778">]</span><span class="ident" id="6785779">Order</span><span class="op" id="6785784">{</span><span class="ident" id="6785785">LSB</span><span class="op" id="6785788">,</span>&nbsp;<span class="ident" id="6785790">MSB</span><span class="op" id="6785793">}</span>&nbsp;<span class="op" id="6785795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6785800">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6785880">for</span>&nbsp;<span class="ident" id="6785884">_</span><span class="op" id="6785885">,</span>&nbsp;<span class="ident" id="6785887">litWidth</span>&nbsp;<span class="op" id="6785896">:=</span>&nbsp;<span class="keyword" id="6785899">range</span>&nbsp;<span class="op" id="6785905">[</span><span class="op" id="6785906">...</span><span class="op" id="6785909">]</span><span class="builtintype" id="6785910">int</span><span class="op" id="6785913">{</span><span class="num" id="6785914">6</span><span class="op" id="6785915">,</span>&nbsp;<span class="num" id="6785917">7</span><span class="op" id="6785918">,</span>&nbsp;<span class="num" id="6785920">8</span><span class="op" id="6785921">}</span>&nbsp;<span class="op" id="6785923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6785929">testFile</span><span class="op" id="6785937">(</span><span class="ident" id="6785938">t</span><span class="op" id="6785939">,</span>&nbsp;<span class="ident" id="6785941">filename</span><span class="op" id="6785949">,</span>&nbsp;<span class="ident" id="6785951">order</span><span class="op" id="6785956">,</span>&nbsp;<span class="ident" id="6785958">litWidth</span><span class="op" id="6785966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785971">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6785978">}</span><br>
<span class="lineno"></span><span class="op" id="6785980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6785983">func</span>&nbsp;<span class="ident" id="6785988">TestWriterReturnValues</span><span class="op" id="6786010">(</span><span class="ident" id="6786011">t</span>&nbsp;<span class="op" id="6786013">*</span><span class="ident" id="6786014">testing</span><span class="op" id="6786021">.</span><span class="ident" id="6786022">T</span><span class="op" id="6786023">)</span>&nbsp;<span class="op" id="6786025">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786028">w</span>&nbsp;<span class="op" id="6786030">:=</span>&nbsp;<span class="ident" id="6786033">NewWriter</span><span class="op" id="6786042">(</span><span class="ident" id="6786043">ioutil</span><span class="op" id="6786049">.</span><span class="ident" id="6786050">Discard</span><span class="op" id="6786057">,</span>&nbsp;<span class="ident" id="6786059">LSB</span><span class="op" id="6786062">,</span>&nbsp;<span class="num" id="6786064">8</span><span class="op" id="6786065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786068">n</span><span class="op" id="6786069">,</span>&nbsp;<span class="ident" id="6786071">err</span>&nbsp;<span class="op" id="6786075">:=</span>&nbsp;<span class="ident" id="6786078">w</span><span class="op" id="6786079">.</span><span class="ident" id="6786080">Write</span><span class="op" id="6786085">(</span><span class="op" id="6786086">[</span><span class="op" id="6786087">]</span><span class="builtintype" id="6786088">byte</span><span class="op" id="6786092">(</span><span class="string" id="6786093">&#34;asdf&#34;</span><span class="op" id="6786099">)</span><span class="op" id="6786100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786103">if</span>&nbsp;<span class="ident" id="6786106">n</span>&nbsp;<span class="op" id="6786108">!=</span>&nbsp;<span class="num" id="6786111">4</span>&nbsp;<span class="op" id="6786113">||</span>&nbsp;<span class="ident" id="6786116">err</span>&nbsp;<span class="op" id="6786120">!=</span>&nbsp;<span class="builtintype" id="6786123">nil</span>&nbsp;<span class="op" id="6786127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786131">t</span><span class="op" id="6786132">.</span><span class="ident" id="6786133">Errorf</span><span class="op" id="6786139">(</span><span class="string" id="6786140">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="6786165">,</span>&nbsp;<span class="ident" id="6786167">n</span><span class="op" id="6786168">,</span>&nbsp;<span class="ident" id="6786170">err</span><span class="op" id="6786173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786176">}</span><br>
<span class="lineno">105</span><span class="op" id="6786178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786181">func</span>&nbsp;<span class="ident" id="6786186">benchmarkEncoder</span><span class="op" id="6786202">(</span><span class="ident" id="6786203">b</span>&nbsp;<span class="op" id="6786205">*</span><span class="ident" id="6786206">testing</span><span class="op" id="6786213">.</span><span class="ident" id="6786214">B</span><span class="op" id="6786215">,</span>&nbsp;<span class="ident" id="6786217">n</span>&nbsp;<span class="builtintype" id="6786219">int</span><span class="op" id="6786222">)</span>&nbsp;<span class="op" id="6786224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786227">b</span><span class="op" id="6786228">.</span><span class="ident" id="6786229">StopTimer</span><span class="op" id="6786238">(</span><span class="op" id="6786239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786242">b</span><span class="op" id="6786243">.</span><span class="ident" id="6786244">SetBytes</span><span class="op" id="6786252">(</span><span class="ident" id="6786253">int64</span><span class="op" id="6786258">(</span><span class="ident" id="6786259">n</span><span class="op" id="6786260">)</span><span class="op" id="6786261">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786264">buf0</span><span class="op" id="6786268">,</span>&nbsp;<span class="ident" id="6786270">err</span>&nbsp;<span class="op" id="6786274">:=</span>&nbsp;<span class="ident" id="6786277">ioutil</span><span class="op" id="6786283">.</span><span class="ident" id="6786284">ReadFile</span><span class="op" id="6786292">(</span><span class="string" id="6786293">&#34;../testdata/e.txt&#34;</span><span class="op" id="6786312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786315">if</span>&nbsp;<span class="ident" id="6786318">err</span>&nbsp;<span class="op" id="6786322">!=</span>&nbsp;<span class="builtintype" id="6786325">nil</span>&nbsp;<span class="op" id="6786329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786333">b</span><span class="op" id="6786334">.</span><span class="ident" id="6786335">Fatal</span><span class="op" id="6786340">(</span><span class="ident" id="6786341">err</span><span class="op" id="6786344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786350">if</span>&nbsp;<span class="builtinfunc" id="6786353">len</span><span class="op" id="6786356">(</span><span class="ident" id="6786357">buf0</span><span class="op" id="6786361">)</span>&nbsp;<span class="op" id="6786363">==</span>&nbsp;<span class="num" id="6786366">0</span>&nbsp;<span class="op" id="6786368">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786372">b</span><span class="op" id="6786373">.</span><span class="ident" id="6786374">Fatalf</span><span class="op" id="6786380">(</span><span class="string" id="6786381">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="6786404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786410">buf1</span>&nbsp;<span class="op" id="6786415">:=</span>&nbsp;<span class="builtinfunc" id="6786418">make</span><span class="op" id="6786422">(</span><span class="op" id="6786423">[</span><span class="op" id="6786424">]</span><span class="builtintype" id="6786425">byte</span><span class="op" id="6786429">,</span>&nbsp;<span class="ident" id="6786431">n</span><span class="op" id="6786432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786435">for</span>&nbsp;<span class="ident" id="6786439">i</span>&nbsp;<span class="op" id="6786441">:=</span>&nbsp;<span class="num" id="6786444">0</span><span class="op" id="6786445">;</span>&nbsp;<span class="ident" id="6786447">i</span>&nbsp;<span class="op" id="6786449">&lt;</span>&nbsp;<span class="ident" id="6786451">n</span><span class="op" id="6786452">;</span>&nbsp;<span class="ident" id="6786454">i</span>&nbsp;<span class="op" id="6786456">+=</span>&nbsp;<span class="builtinfunc" id="6786459">len</span><span class="op" id="6786462">(</span><span class="ident" id="6786463">buf0</span><span class="op" id="6786467">)</span>&nbsp;<span class="op" id="6786469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786473">if</span>&nbsp;<span class="builtinfunc" id="6786476">len</span><span class="op" id="6786479">(</span><span class="ident" id="6786480">buf0</span><span class="op" id="6786484">)</span>&nbsp;<span class="op" id="6786486">&gt;</span>&nbsp;<span class="ident" id="6786488">n</span><span class="op" id="6786489">-</span><span class="ident" id="6786490">i</span>&nbsp;<span class="op" id="6786492">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786497">buf0</span>&nbsp;<span class="op" id="6786502">=</span>&nbsp;<span class="ident" id="6786504">buf0</span><span class="op" id="6786508">[</span><span class="op" id="6786509">:</span><span class="ident" id="6786510">n</span><span class="op" id="6786511">-</span><span class="ident" id="6786512">i</span><span class="op" id="6786513">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6786521">copy</span><span class="op" id="6786525">(</span><span class="ident" id="6786526">buf1</span><span class="op" id="6786530">[</span><span class="ident" id="6786531">i</span><span class="op" id="6786532">:</span><span class="op" id="6786533">]</span><span class="op" id="6786534">,</span>&nbsp;<span class="ident" id="6786536">buf0</span><span class="op" id="6786540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786546">buf0</span>&nbsp;<span class="op" id="6786551">=</span>&nbsp;<span class="builtintype" id="6786553">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786558">runtime</span><span class="op" id="6786565">.</span><span class="ident" id="6786566">GC</span><span class="op" id="6786568">(</span><span class="op" id="6786569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786572">b</span><span class="op" id="6786573">.</span><span class="ident" id="6786574">StartTimer</span><span class="op" id="6786584">(</span><span class="op" id="6786585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6786588">for</span>&nbsp;<span class="ident" id="6786592">i</span>&nbsp;<span class="op" id="6786594">:=</span>&nbsp;<span class="num" id="6786597">0</span><span class="op" id="6786598">;</span>&nbsp;<span class="ident" id="6786600">i</span>&nbsp;<span class="op" id="6786602">&lt;</span>&nbsp;<span class="ident" id="6786604">b</span><span class="op" id="6786605">.</span><span class="ident" id="6786606">N</span><span class="op" id="6786607">;</span>&nbsp;<span class="ident" id="6786609">i</span><span class="op" id="6786610">++</span>&nbsp;<span class="op" id="6786613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786617">w</span>&nbsp;<span class="op" id="6786619">:=</span>&nbsp;<span class="ident" id="6786622">NewWriter</span><span class="op" id="6786631">(</span><span class="ident" id="6786632">ioutil</span><span class="op" id="6786638">.</span><span class="ident" id="6786639">Discard</span><span class="op" id="6786646">,</span>&nbsp;<span class="ident" id="6786648">LSB</span><span class="op" id="6786651">,</span>&nbsp;<span class="num" id="6786653">8</span><span class="op" id="6786654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786658">w</span><span class="op" id="6786659">.</span><span class="ident" id="6786660">Write</span><span class="op" id="6786665">(</span><span class="ident" id="6786666">buf1</span><span class="op" id="6786670">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786674">w</span><span class="op" id="6786675">.</span><span class="ident" id="6786676">Close</span><span class="op" id="6786681">(</span><span class="op" id="6786682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6786685">}</span><br>
<span class="lineno"></span><span class="op" id="6786687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786690">func</span>&nbsp;<span class="ident" id="6786695">BenchmarkEncoder1e4</span><span class="op" id="6786714">(</span><span class="ident" id="6786715">b</span>&nbsp;<span class="op" id="6786717">*</span><span class="ident" id="6786718">testing</span><span class="op" id="6786725">.</span><span class="ident" id="6786726">B</span><span class="op" id="6786727">)</span>&nbsp;<span class="op" id="6786729">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786732">benchmarkEncoder</span><span class="op" id="6786748">(</span><span class="ident" id="6786749">b</span><span class="op" id="6786750">,</span>&nbsp;<span class="num" id="6786752">1e4</span><span class="op" id="6786755">)</span><br>
<span class="lineno"></span><span class="op" id="6786757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786760">func</span>&nbsp;<span class="ident" id="6786765">BenchmarkEncoder1e5</span><span class="op" id="6786784">(</span><span class="ident" id="6786785">b</span>&nbsp;<span class="op" id="6786787">*</span><span class="ident" id="6786788">testing</span><span class="op" id="6786795">.</span><span class="ident" id="6786796">B</span><span class="op" id="6786797">)</span>&nbsp;<span class="op" id="6786799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786802">benchmarkEncoder</span><span class="op" id="6786818">(</span><span class="ident" id="6786819">b</span><span class="op" id="6786820">,</span>&nbsp;<span class="num" id="6786822">1e5</span><span class="op" id="6786825">)</span><br>
<span class="lineno">140</span><span class="op" id="6786827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786830">func</span>&nbsp;<span class="ident" id="6786835">BenchmarkEncoder1e6</span><span class="op" id="6786854">(</span><span class="ident" id="6786855">b</span>&nbsp;<span class="op" id="6786857">*</span><span class="ident" id="6786858">testing</span><span class="op" id="6786865">.</span><span class="ident" id="6786866">B</span><span class="op" id="6786867">)</span>&nbsp;<span class="op" id="6786869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6786872">benchmarkEncoder</span><span class="op" id="6786888">(</span><span class="ident" id="6786889">b</span><span class="op" id="6786890">,</span>&nbsp;<span class="num" id="6786892">1e6</span><span class="op" id="6786895">)</span><br>
<span class="lineno"></span><span class="op" id="6786897">}</span>
</div>
</body>
</html>
