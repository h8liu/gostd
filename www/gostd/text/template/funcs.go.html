<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4844422">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4844477">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4844531">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4844582">package</span>&nbsp;<span class="ident" id="4844590">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4844600">import</span>&nbsp;<span class="op" id="4844607">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844610">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844619">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844629">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844636">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844642">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844653">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844664">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844675">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4844686">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4844701">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4844704">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="4844784">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4844865">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="4844937">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4845017">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4845048">type</span>&nbsp;<span class="ident" id="4845053">FuncMap</span>&nbsp;<span class="keyword" id="4845061">map</span><span class="op" id="4845064">[</span><span class="builtintype" id="4845065">string</span><span class="op" id="4845071">]</span><span class="keyword" id="4845072">interface</span><span class="op" id="4845081">{</span><span class="op" id="4845082">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4845085">var</span>&nbsp;<span class="ident" id="4845089">builtins</span>&nbsp;<span class="op" id="4845098">=</span>&nbsp;<span class="ident" id="4845100">FuncMap</span><span class="op" id="4845107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845110">&#34;and&#34;</span><span class="op" id="4845115">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845122">and</span><span class="op" id="4845125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845128">&#34;call&#34;</span><span class="op" id="4845134">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845140">call</span><span class="op" id="4845144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845147">&#34;html&#34;</span><span class="op" id="4845153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845159">HTMLEscaper</span><span class="op" id="4845170">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845173">&#34;index&#34;</span><span class="op" id="4845180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845185">index</span><span class="op" id="4845190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845193">&#34;js&#34;</span><span class="op" id="4845197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845205">JSEscaper</span><span class="op" id="4845214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845217">&#34;len&#34;</span><span class="op" id="4845222">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845229">length</span><span class="op" id="4845235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845238">&#34;not&#34;</span><span class="op" id="4845243">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845250">not</span><span class="op" id="4845253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845256">&#34;or&#34;</span><span class="op" id="4845260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845268">or</span><span class="op" id="4845270">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845273">&#34;print&#34;</span><span class="op" id="4845280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4845285">fmt</span><span class="op" id="4845288">.</span><span class="ident" id="4845289">Sprint</span><span class="op" id="4845295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845298">&#34;printf&#34;</span><span class="op" id="4845306">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4845310">fmt</span><span class="op" id="4845313">.</span><span class="ident" id="4845314">Sprintf</span><span class="op" id="4845321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845324">&#34;println&#34;</span><span class="op" id="4845333">:</span>&nbsp;&nbsp;<span class="ident" id="4845336">fmt</span><span class="op" id="4845339">.</span><span class="ident" id="4845340">Sprintln</span><span class="op" id="4845348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845351">&#34;urlquery&#34;</span><span class="op" id="4845361">:</span>&nbsp;<span class="ident" id="4845363">URLQueryEscaper</span><span class="op" id="4845378">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4845382">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845398">&#34;eq&#34;</span><span class="op" id="4845402">:</span>&nbsp;<span class="ident" id="4845404">eq</span><span class="op" id="4845406">,</span>&nbsp;<span class="comment" id="4845408">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845415">&#34;ge&#34;</span><span class="op" id="4845419">:</span>&nbsp;<span class="ident" id="4845421">ge</span><span class="op" id="4845423">,</span>&nbsp;<span class="comment" id="4845425">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845432">&#34;gt&#34;</span><span class="op" id="4845436">:</span>&nbsp;<span class="ident" id="4845438">gt</span><span class="op" id="4845440">,</span>&nbsp;<span class="comment" id="4845442">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845448">&#34;le&#34;</span><span class="op" id="4845452">:</span>&nbsp;<span class="ident" id="4845454">le</span><span class="op" id="4845456">,</span>&nbsp;<span class="comment" id="4845458">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845465">&#34;lt&#34;</span><span class="op" id="4845469">:</span>&nbsp;<span class="ident" id="4845471">lt</span><span class="op" id="4845473">,</span>&nbsp;<span class="comment" id="4845475">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4845481">&#34;ne&#34;</span><span class="op" id="4845485">:</span>&nbsp;<span class="ident" id="4845487">ne</span><span class="op" id="4845489">,</span>&nbsp;<span class="comment" id="4845491">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="4845497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4845500">var</span>&nbsp;<span class="ident" id="4845504">builtinFuncs</span>&nbsp;<span class="op" id="4845517">=</span>&nbsp;<span class="ident" id="4845519">createValueFuncs</span><span class="op" id="4845535">(</span><span class="ident" id="4845536">builtins</span><span class="op" id="4845544">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4845547">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="4845615">func</span>&nbsp;<span class="ident" id="4845620">createValueFuncs</span><span class="op" id="4845636">(</span><span class="ident" id="4845637">funcMap</span>&nbsp;<span class="ident" id="4845645">FuncMap</span><span class="op" id="4845652">)</span>&nbsp;<span class="keyword" id="4845654">map</span><span class="op" id="4845657">[</span><span class="builtintype" id="4845658">string</span><span class="op" id="4845664">]</span><span class="ident" id="4845665">reflect</span><span class="op" id="4845672">.</span><span class="ident" id="4845673">Value</span>&nbsp;<span class="op" id="4845679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4845682">m</span>&nbsp;<span class="op" id="4845684">:=</span>&nbsp;<span class="builtinfunc" id="4845687">make</span><span class="op" id="4845691">(</span><span class="keyword" id="4845692">map</span><span class="op" id="4845695">[</span><span class="builtintype" id="4845696">string</span><span class="op" id="4845702">]</span><span class="ident" id="4845703">reflect</span><span class="op" id="4845710">.</span><span class="ident" id="4845711">Value</span><span class="op" id="4845716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4845719">addValueFuncs</span><span class="op" id="4845732">(</span><span class="ident" id="4845733">m</span><span class="op" id="4845734">,</span>&nbsp;<span class="ident" id="4845736">funcMap</span><span class="op" id="4845743">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4845746">return</span>&nbsp;<span class="ident" id="4845753">m</span><br>
<span class="lineno"></span><span class="op" id="4845755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4845758">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="4845849">func</span>&nbsp;<span class="ident" id="4845854">addValueFuncs</span><span class="op" id="4845867">(</span><span class="ident" id="4845868">out</span>&nbsp;<span class="keyword" id="4845872">map</span><span class="op" id="4845875">[</span><span class="builtintype" id="4845876">string</span><span class="op" id="4845882">]</span><span class="ident" id="4845883">reflect</span><span class="op" id="4845890">.</span><span class="ident" id="4845891">Value</span><span class="op" id="4845896">,</span>&nbsp;<span class="ident" id="4845898">in</span>&nbsp;<span class="ident" id="4845901">FuncMap</span><span class="op" id="4845908">)</span>&nbsp;<span class="op" id="4845910">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4845913">for</span>&nbsp;<span class="ident" id="4845917">name</span><span class="op" id="4845921">,</span>&nbsp;<span class="ident" id="4845923">fn</span>&nbsp;<span class="op" id="4845926">:=</span>&nbsp;<span class="keyword" id="4845929">range</span>&nbsp;<span class="ident" id="4845935">in</span>&nbsp;<span class="op" id="4845938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4845942">v</span>&nbsp;<span class="op" id="4845944">:=</span>&nbsp;<span class="ident" id="4845947">reflect</span><span class="op" id="4845954">.</span><span class="ident" id="4845955">ValueOf</span><span class="op" id="4845962">(</span><span class="ident" id="4845963">fn</span><span class="op" id="4845965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4845969">if</span>&nbsp;<span class="ident" id="4845972">v</span><span class="op" id="4845973">.</span><span class="ident" id="4845974">Kind</span><span class="op" id="4845978">(</span><span class="op" id="4845979">)</span>&nbsp;<span class="op" id="4845981">!=</span>&nbsp;<span class="ident" id="4845984">reflect</span><span class="op" id="4845991">.</span><span class="ident" id="4845992">Func</span>&nbsp;<span class="op" id="4845997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4846002">panic</span><span class="op" id="4846007">(</span><span class="string" id="4846008">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="4846021">+</span>&nbsp;<span class="ident" id="4846023">name</span>&nbsp;<span class="op" id="4846028">+</span>&nbsp;<span class="string" id="4846030">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="4846047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846051">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846055">if</span>&nbsp;<span class="op" id="4846058">!</span><span class="ident" id="4846059">goodFunc</span><span class="op" id="4846067">(</span><span class="ident" id="4846068">v</span><span class="op" id="4846069">.</span><span class="ident" id="4846070">Type</span><span class="op" id="4846074">(</span><span class="op" id="4846075">)</span><span class="op" id="4846076">)</span>&nbsp;<span class="op" id="4846078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4846083">panic</span><span class="op" id="4846088">(</span><span class="ident" id="4846089">fmt</span><span class="op" id="4846092">.</span><span class="ident" id="4846093">Errorf</span><span class="op" id="4846099">(</span><span class="string" id="4846100">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="4846150">,</span>&nbsp;<span class="ident" id="4846152">name</span><span class="op" id="4846156">,</span>&nbsp;<span class="ident" id="4846158">v</span><span class="op" id="4846159">.</span><span class="ident" id="4846160">Type</span><span class="op" id="4846164">(</span><span class="op" id="4846165">)</span><span class="op" id="4846166">.</span><span class="ident" id="4846167">NumOut</span><span class="op" id="4846173">(</span><span class="op" id="4846174">)</span><span class="op" id="4846175">)</span><span class="op" id="4846176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4846184">out</span><span class="op" id="4846187">[</span><span class="ident" id="4846188">name</span><span class="op" id="4846192">]</span>&nbsp;<span class="op" id="4846194">=</span>&nbsp;<span class="ident" id="4846196">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846199">}</span><br>
<span class="lineno">70</span><span class="op" id="4846201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4846204">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="4846290">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="4846319">func</span>&nbsp;<span class="ident" id="4846324">addFuncs</span><span class="op" id="4846332">(</span><span class="ident" id="4846333">out</span><span class="op" id="4846336">,</span>&nbsp;<span class="ident" id="4846338">in</span>&nbsp;<span class="ident" id="4846341">FuncMap</span><span class="op" id="4846348">)</span>&nbsp;<span class="op" id="4846350">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846353">for</span>&nbsp;<span class="ident" id="4846357">name</span><span class="op" id="4846361">,</span>&nbsp;<span class="ident" id="4846363">fn</span>&nbsp;<span class="op" id="4846366">:=</span>&nbsp;<span class="keyword" id="4846369">range</span>&nbsp;<span class="ident" id="4846375">in</span>&nbsp;<span class="op" id="4846378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4846382">out</span><span class="op" id="4846385">[</span><span class="ident" id="4846386">name</span><span class="op" id="4846390">]</span>&nbsp;<span class="op" id="4846392">=</span>&nbsp;<span class="ident" id="4846394">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846398">}</span><br>
<span class="lineno"></span><span class="op" id="4846400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4846403">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4846482">func</span>&nbsp;<span class="ident" id="4846487">goodFunc</span><span class="op" id="4846495">(</span><span class="ident" id="4846496">typ</span>&nbsp;<span class="ident" id="4846500">reflect</span><span class="op" id="4846507">.</span><span class="ident" id="4846508">Type</span><span class="op" id="4846512">)</span>&nbsp;<span class="builtintype" id="4846514">bool</span>&nbsp;<span class="op" id="4846519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4846522">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846602">switch</span>&nbsp;<span class="op" id="4846609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846612">case</span>&nbsp;<span class="ident" id="4846617">typ</span><span class="op" id="4846620">.</span><span class="ident" id="4846621">NumOut</span><span class="op" id="4846627">(</span><span class="op" id="4846628">)</span>&nbsp;<span class="op" id="4846630">==</span>&nbsp;<span class="num" id="4846633">1</span><span class="op" id="4846634">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846638">return</span>&nbsp;<span class="builtintype" id="4846645">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846651">case</span>&nbsp;<span class="ident" id="4846656">typ</span><span class="op" id="4846659">.</span><span class="ident" id="4846660">NumOut</span><span class="op" id="4846666">(</span><span class="op" id="4846667">)</span>&nbsp;<span class="op" id="4846669">==</span>&nbsp;<span class="num" id="4846672">2</span>&nbsp;<span class="op" id="4846674">&amp;&amp;</span>&nbsp;<span class="ident" id="4846677">typ</span><span class="op" id="4846680">.</span><span class="ident" id="4846681">Out</span><span class="op" id="4846684">(</span><span class="num" id="4846685">1</span><span class="op" id="4846686">)</span>&nbsp;<span class="op" id="4846688">==</span>&nbsp;<span class="ident" id="4846691">errorType</span><span class="op" id="4846700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846704">return</span>&nbsp;<span class="builtintype" id="4846711">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846720">return</span>&nbsp;<span class="builtintype" id="4846727">false</span><br>
<span class="lineno">90</span><span class="op" id="4846733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4846736">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="4846806">func</span>&nbsp;<span class="ident" id="4846811">findFunction</span><span class="op" id="4846823">(</span><span class="ident" id="4846824">name</span>&nbsp;<span class="builtintype" id="4846829">string</span><span class="op" id="4846835">,</span>&nbsp;<span class="ident" id="4846837">tmpl</span>&nbsp;<span class="op" id="4846842">*</span><span class="ident" id="4846843">Template</span><span class="op" id="4846851">)</span>&nbsp;<span class="op" id="4846853">(</span><span class="ident" id="4846854">reflect</span><span class="op" id="4846861">.</span><span class="ident" id="4846862">Value</span><span class="op" id="4846867">,</span>&nbsp;<span class="builtintype" id="4846869">bool</span><span class="op" id="4846873">)</span>&nbsp;<span class="op" id="4846875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846878">if</span>&nbsp;<span class="ident" id="4846881">tmpl</span>&nbsp;<span class="op" id="4846886">!=</span>&nbsp;<span class="ident" id="4846889">nil</span>&nbsp;<span class="op" id="4846893">&amp;&amp;</span>&nbsp;<span class="ident" id="4846896">tmpl</span><span class="op" id="4846900">.</span><span class="ident" id="4846901">common</span>&nbsp;<span class="op" id="4846908">!=</span>&nbsp;<span class="ident" id="4846911">nil</span>&nbsp;<span class="op" id="4846915">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846919">if</span>&nbsp;<span class="ident" id="4846922">fn</span>&nbsp;<span class="op" id="4846925">:=</span>&nbsp;<span class="ident" id="4846928">tmpl</span><span class="op" id="4846932">.</span><span class="ident" id="4846933">execFuncs</span><span class="op" id="4846942">[</span><span class="ident" id="4846943">name</span><span class="op" id="4846947">]</span><span class="op" id="4846948">;</span>&nbsp;<span class="ident" id="4846950">fn</span><span class="op" id="4846952">.</span><span class="ident" id="4846953">IsValid</span><span class="op" id="4846960">(</span><span class="op" id="4846961">)</span>&nbsp;<span class="op" id="4846963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846968">return</span>&nbsp;<span class="ident" id="4846975">fn</span><span class="op" id="4846977">,</span>&nbsp;<span class="builtintype" id="4846979">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4846989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4846992">if</span>&nbsp;<span class="ident" id="4846995">fn</span>&nbsp;<span class="op" id="4846998">:=</span>&nbsp;<span class="ident" id="4847001">builtinFuncs</span><span class="op" id="4847013">[</span><span class="ident" id="4847014">name</span><span class="op" id="4847018">]</span><span class="op" id="4847019">;</span>&nbsp;<span class="ident" id="4847021">fn</span><span class="op" id="4847023">.</span><span class="ident" id="4847024">IsValid</span><span class="op" id="4847031">(</span><span class="op" id="4847032">)</span>&nbsp;<span class="op" id="4847034">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847038">return</span>&nbsp;<span class="ident" id="4847045">fn</span><span class="op" id="4847047">,</span>&nbsp;<span class="builtintype" id="4847049">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4847055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847058">return</span>&nbsp;<span class="ident" id="4847065">reflect</span><span class="op" id="4847072">.</span><span class="ident" id="4847073">Value</span><span class="op" id="4847078">{</span><span class="op" id="4847079">}</span><span class="op" id="4847080">,</span>&nbsp;<span class="builtintype" id="4847082">false</span><br>
<span class="lineno"></span><span class="op" id="4847088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4847091">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4847105">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="4847181">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4847252">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="4847300">func</span>&nbsp;<span class="ident" id="4847305">index</span><span class="op" id="4847310">(</span><span class="ident" id="4847311">item</span>&nbsp;<span class="keyword" id="4847316">interface</span><span class="op" id="4847325">{</span><span class="op" id="4847326">}</span><span class="op" id="4847327">,</span>&nbsp;<span class="ident" id="4847329">indices</span>&nbsp;<span class="op" id="4847337">...</span><span class="keyword" id="4847340">interface</span><span class="op" id="4847349">{</span><span class="op" id="4847350">}</span><span class="op" id="4847351">)</span>&nbsp;<span class="op" id="4847353">(</span><span class="keyword" id="4847354">interface</span><span class="op" id="4847363">{</span><span class="op" id="4847364">}</span><span class="op" id="4847365">,</span>&nbsp;<span class="builtintype" id="4847367">error</span><span class="op" id="4847372">)</span>&nbsp;<span class="op" id="4847374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4847377">v</span>&nbsp;<span class="op" id="4847379">:=</span>&nbsp;<span class="ident" id="4847382">reflect</span><span class="op" id="4847389">.</span><span class="ident" id="4847390">ValueOf</span><span class="op" id="4847397">(</span><span class="ident" id="4847398">item</span><span class="op" id="4847402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847405">for</span>&nbsp;<span class="ident" id="4847409">_</span><span class="op" id="4847410">,</span>&nbsp;<span class="ident" id="4847412">i</span>&nbsp;<span class="op" id="4847414">:=</span>&nbsp;<span class="keyword" id="4847417">range</span>&nbsp;<span class="ident" id="4847423">indices</span>&nbsp;<span class="op" id="4847431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4847435">index</span>&nbsp;<span class="op" id="4847441">:=</span>&nbsp;<span class="ident" id="4847444">reflect</span><span class="op" id="4847451">.</span><span class="ident" id="4847452">ValueOf</span><span class="op" id="4847459">(</span><span class="ident" id="4847460">i</span><span class="op" id="4847461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847465">var</span>&nbsp;<span class="ident" id="4847469">isNil</span>&nbsp;<span class="builtintype" id="4847475">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847482">if</span>&nbsp;<span class="ident" id="4847485">v</span><span class="op" id="4847486">,</span>&nbsp;<span class="ident" id="4847488">isNil</span>&nbsp;<span class="op" id="4847494">=</span>&nbsp;<span class="ident" id="4847496">indirect</span><span class="op" id="4847504">(</span><span class="ident" id="4847505">v</span><span class="op" id="4847506">)</span><span class="op" id="4847507">;</span>&nbsp;<span class="ident" id="4847509">isNil</span>&nbsp;<span class="op" id="4847515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847520">return</span>&nbsp;<span class="ident" id="4847527">nil</span><span class="op" id="4847530">,</span>&nbsp;<span class="ident" id="4847532">fmt</span><span class="op" id="4847535">.</span><span class="ident" id="4847536">Errorf</span><span class="op" id="4847542">(</span><span class="string" id="4847543">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4847565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4847569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847573">switch</span>&nbsp;<span class="ident" id="4847580">v</span><span class="op" id="4847581">.</span><span class="ident" id="4847582">Kind</span><span class="op" id="4847586">(</span><span class="op" id="4847587">)</span>&nbsp;<span class="op" id="4847589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847593">case</span>&nbsp;<span class="ident" id="4847598">reflect</span><span class="op" id="4847605">.</span><span class="ident" id="4847606">Array</span><span class="op" id="4847611">,</span>&nbsp;<span class="ident" id="4847613">reflect</span><span class="op" id="4847620">.</span><span class="ident" id="4847621">Slice</span><span class="op" id="4847626">,</span>&nbsp;<span class="ident" id="4847628">reflect</span><span class="op" id="4847635">.</span><span class="ident" id="4847636">String</span><span class="op" id="4847642">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847647">var</span>&nbsp;<span class="ident" id="4847651">x</span>&nbsp;<span class="ident" id="4847653">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847662">switch</span>&nbsp;<span class="ident" id="4847669">index</span><span class="op" id="4847674">.</span><span class="ident" id="4847675">Kind</span><span class="op" id="4847679">(</span><span class="op" id="4847680">)</span>&nbsp;<span class="op" id="4847682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847687">case</span>&nbsp;<span class="ident" id="4847692">reflect</span><span class="op" id="4847699">.</span><span class="ident" id="4847700">Int</span><span class="op" id="4847703">,</span>&nbsp;<span class="ident" id="4847705">reflect</span><span class="op" id="4847712">.</span><span class="ident" id="4847713">Int8</span><span class="op" id="4847717">,</span>&nbsp;<span class="ident" id="4847719">reflect</span><span class="op" id="4847726">.</span><span class="ident" id="4847727">Int16</span><span class="op" id="4847732">,</span>&nbsp;<span class="ident" id="4847734">reflect</span><span class="op" id="4847741">.</span><span class="ident" id="4847742">Int32</span><span class="op" id="4847747">,</span>&nbsp;<span class="ident" id="4847749">reflect</span><span class="op" id="4847756">.</span><span class="ident" id="4847757">Int64</span><span class="op" id="4847762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4847768">x</span>&nbsp;<span class="op" id="4847770">=</span>&nbsp;<span class="ident" id="4847772">index</span><span class="op" id="4847777">.</span><span class="ident" id="4847778">Int</span><span class="op" id="4847781">(</span><span class="op" id="4847782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847787">case</span>&nbsp;<span class="ident" id="4847792">reflect</span><span class="op" id="4847799">.</span><span class="ident" id="4847800">Uint</span><span class="op" id="4847804">,</span>&nbsp;<span class="ident" id="4847806">reflect</span><span class="op" id="4847813">.</span><span class="ident" id="4847814">Uint8</span><span class="op" id="4847819">,</span>&nbsp;<span class="ident" id="4847821">reflect</span><span class="op" id="4847828">.</span><span class="ident" id="4847829">Uint16</span><span class="op" id="4847835">,</span>&nbsp;<span class="ident" id="4847837">reflect</span><span class="op" id="4847844">.</span><span class="ident" id="4847845">Uint32</span><span class="op" id="4847851">,</span>&nbsp;<span class="ident" id="4847853">reflect</span><span class="op" id="4847860">.</span><span class="ident" id="4847861">Uint64</span><span class="op" id="4847867">,</span>&nbsp;<span class="ident" id="4847869">reflect</span><span class="op" id="4847876">.</span><span class="ident" id="4847877">Uintptr</span><span class="op" id="4847884">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4847890">x</span>&nbsp;<span class="op" id="4847892">=</span>&nbsp;<span class="ident" id="4847894">int64</span><span class="op" id="4847899">(</span><span class="ident" id="4847900">index</span><span class="op" id="4847905">.</span><span class="ident" id="4847906">Uint</span><span class="op" id="4847910">(</span><span class="op" id="4847911">)</span><span class="op" id="4847912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847917">default</span><span class="op" id="4847924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4847930">return</span>&nbsp;<span class="ident" id="4847937">nil</span><span class="op" id="4847940">,</span>&nbsp;<span class="ident" id="4847942">fmt</span><span class="op" id="4847945">.</span><span class="ident" id="4847946">Errorf</span><span class="op" id="4847952">(</span><span class="string" id="4847953">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4847992">,</span>&nbsp;<span class="ident" id="4847994">index</span><span class="op" id="4847999">.</span><span class="ident" id="4848000">Type</span><span class="op" id="4848004">(</span><span class="op" id="4848005">)</span><span class="op" id="4848006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848016">if</span>&nbsp;<span class="ident" id="4848019">x</span>&nbsp;<span class="op" id="4848021">&lt;</span>&nbsp;<span class="num" id="4848023">0</span>&nbsp;<span class="op" id="4848025">||</span>&nbsp;<span class="ident" id="4848028">x</span>&nbsp;<span class="op" id="4848030">&gt;=</span>&nbsp;<span class="ident" id="4848033">int64</span><span class="op" id="4848038">(</span><span class="ident" id="4848039">v</span><span class="op" id="4848040">.</span><span class="ident" id="4848041">Len</span><span class="op" id="4848044">(</span><span class="op" id="4848045">)</span><span class="op" id="4848046">)</span>&nbsp;<span class="op" id="4848048">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848054">return</span>&nbsp;<span class="ident" id="4848061">nil</span><span class="op" id="4848064">,</span>&nbsp;<span class="ident" id="4848066">fmt</span><span class="op" id="4848069">.</span><span class="ident" id="4848070">Errorf</span><span class="op" id="4848076">(</span><span class="string" id="4848077">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="4848101">,</span>&nbsp;<span class="ident" id="4848103">x</span><span class="op" id="4848104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4848114">v</span>&nbsp;<span class="op" id="4848116">=</span>&nbsp;<span class="ident" id="4848118">v</span><span class="op" id="4848119">.</span><span class="ident" id="4848120">Index</span><span class="op" id="4848125">(</span><span class="builtintype" id="4848126">int</span><span class="op" id="4848129">(</span><span class="ident" id="4848130">x</span><span class="op" id="4848131">)</span><span class="op" id="4848132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848136">case</span>&nbsp;<span class="ident" id="4848141">reflect</span><span class="op" id="4848148">.</span><span class="ident" id="4848149">Map</span><span class="op" id="4848152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848157">if</span>&nbsp;<span class="op" id="4848160">!</span><span class="ident" id="4848161">index</span><span class="op" id="4848166">.</span><span class="ident" id="4848167">IsValid</span><span class="op" id="4848174">(</span><span class="op" id="4848175">)</span>&nbsp;<span class="op" id="4848177">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4848183">index</span>&nbsp;<span class="op" id="4848189">=</span>&nbsp;<span class="ident" id="4848191">reflect</span><span class="op" id="4848198">.</span><span class="ident" id="4848199">Zero</span><span class="op" id="4848203">(</span><span class="ident" id="4848204">v</span><span class="op" id="4848205">.</span><span class="ident" id="4848206">Type</span><span class="op" id="4848210">(</span><span class="op" id="4848211">)</span><span class="op" id="4848212">.</span><span class="ident" id="4848213">Key</span><span class="op" id="4848216">(</span><span class="op" id="4848217">)</span><span class="op" id="4848218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848228">if</span>&nbsp;<span class="op" id="4848231">!</span><span class="ident" id="4848232">index</span><span class="op" id="4848237">.</span><span class="ident" id="4848238">Type</span><span class="op" id="4848242">(</span><span class="op" id="4848243">)</span><span class="op" id="4848244">.</span><span class="ident" id="4848245">AssignableTo</span><span class="op" id="4848257">(</span><span class="ident" id="4848258">v</span><span class="op" id="4848259">.</span><span class="ident" id="4848260">Type</span><span class="op" id="4848264">(</span><span class="op" id="4848265">)</span><span class="op" id="4848266">.</span><span class="ident" id="4848267">Key</span><span class="op" id="4848270">(</span><span class="op" id="4848271">)</span><span class="op" id="4848272">)</span>&nbsp;<span class="op" id="4848274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848280">return</span>&nbsp;<span class="ident" id="4848287">nil</span><span class="op" id="4848290">,</span>&nbsp;<span class="ident" id="4848292">fmt</span><span class="op" id="4848295">.</span><span class="ident" id="4848296">Errorf</span><span class="op" id="4848302">(</span><span class="string" id="4848303">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="4848332">,</span>&nbsp;<span class="ident" id="4848334">index</span><span class="op" id="4848339">.</span><span class="ident" id="4848340">Type</span><span class="op" id="4848344">(</span><span class="op" id="4848345">)</span><span class="op" id="4848346">,</span>&nbsp;<span class="ident" id="4848348">v</span><span class="op" id="4848349">.</span><span class="ident" id="4848350">Type</span><span class="op" id="4848354">(</span><span class="op" id="4848355">)</span><span class="op" id="4848356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848361">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848366">if</span>&nbsp;<span class="ident" id="4848369">x</span>&nbsp;<span class="op" id="4848371">:=</span>&nbsp;<span class="ident" id="4848374">v</span><span class="op" id="4848375">.</span><span class="ident" id="4848376">MapIndex</span><span class="op" id="4848384">(</span><span class="ident" id="4848385">index</span><span class="op" id="4848390">)</span><span class="op" id="4848391">;</span>&nbsp;<span class="ident" id="4848393">x</span><span class="op" id="4848394">.</span><span class="ident" id="4848395">IsValid</span><span class="op" id="4848402">(</span><span class="op" id="4848403">)</span>&nbsp;<span class="op" id="4848405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4848411">v</span>&nbsp;<span class="op" id="4848413">=</span>&nbsp;<span class="ident" id="4848415">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848420">}</span>&nbsp;<span class="keyword" id="4848422">else</span>&nbsp;<span class="op" id="4848427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4848433">v</span>&nbsp;<span class="op" id="4848435">=</span>&nbsp;<span class="ident" id="4848437">reflect</span><span class="op" id="4848444">.</span><span class="ident" id="4848445">Zero</span><span class="op" id="4848449">(</span><span class="ident" id="4848450">v</span><span class="op" id="4848451">.</span><span class="ident" id="4848452">Type</span><span class="op" id="4848456">(</span><span class="op" id="4848457">)</span><span class="op" id="4848458">.</span><span class="ident" id="4848459">Elem</span><span class="op" id="4848463">(</span><span class="op" id="4848464">)</span><span class="op" id="4848465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848470">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848474">default</span><span class="op" id="4848481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848486">return</span>&nbsp;<span class="ident" id="4848493">nil</span><span class="op" id="4848496">,</span>&nbsp;<span class="ident" id="4848498">fmt</span><span class="op" id="4848501">.</span><span class="ident" id="4848502">Errorf</span><span class="op" id="4848508">(</span><span class="string" id="4848509">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4848538">,</span>&nbsp;<span class="ident" id="4848540">v</span><span class="op" id="4848541">.</span><span class="ident" id="4848542">Type</span><span class="op" id="4848546">(</span><span class="op" id="4848547">)</span><span class="op" id="4848548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848558">return</span>&nbsp;<span class="ident" id="4848565">v</span><span class="op" id="4848566">.</span><span class="ident" id="4848567">Interface</span><span class="op" id="4848576">(</span><span class="op" id="4848577">)</span><span class="op" id="4848578">,</span>&nbsp;<span class="ident" id="4848580">nil</span><br>
<span class="lineno">150</span><span class="op" id="4848584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4848587">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4848598">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="4848683">func</span>&nbsp;<span class="ident" id="4848688">length</span><span class="op" id="4848694">(</span><span class="ident" id="4848695">item</span>&nbsp;<span class="keyword" id="4848700">interface</span><span class="op" id="4848709">{</span><span class="op" id="4848710">}</span><span class="op" id="4848711">)</span>&nbsp;<span class="op" id="4848713">(</span><span class="builtintype" id="4848714">int</span><span class="op" id="4848717">,</span>&nbsp;<span class="builtintype" id="4848719">error</span><span class="op" id="4848724">)</span>&nbsp;<span class="op" id="4848726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4848729">v</span><span class="op" id="4848730">,</span>&nbsp;<span class="ident" id="4848732">isNil</span>&nbsp;<span class="op" id="4848738">:=</span>&nbsp;<span class="ident" id="4848741">indirect</span><span class="op" id="4848749">(</span><span class="ident" id="4848750">reflect</span><span class="op" id="4848757">.</span><span class="ident" id="4848758">ValueOf</span><span class="op" id="4848765">(</span><span class="ident" id="4848766">item</span><span class="op" id="4848770">)</span><span class="op" id="4848771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848774">if</span>&nbsp;<span class="ident" id="4848777">isNil</span>&nbsp;<span class="op" id="4848783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848787">return</span>&nbsp;<span class="num" id="4848794">0</span><span class="op" id="4848795">,</span>&nbsp;<span class="ident" id="4848797">fmt</span><span class="op" id="4848800">.</span><span class="ident" id="4848801">Errorf</span><span class="op" id="4848807">(</span><span class="string" id="4848808">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4848828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848831">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848834">switch</span>&nbsp;<span class="ident" id="4848841">v</span><span class="op" id="4848842">.</span><span class="ident" id="4848843">Kind</span><span class="op" id="4848847">(</span><span class="op" id="4848848">)</span>&nbsp;<span class="op" id="4848850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848853">case</span>&nbsp;<span class="ident" id="4848858">reflect</span><span class="op" id="4848865">.</span><span class="ident" id="4848866">Array</span><span class="op" id="4848871">,</span>&nbsp;<span class="ident" id="4848873">reflect</span><span class="op" id="4848880">.</span><span class="ident" id="4848881">Chan</span><span class="op" id="4848885">,</span>&nbsp;<span class="ident" id="4848887">reflect</span><span class="op" id="4848894">.</span><span class="ident" id="4848895">Map</span><span class="op" id="4848898">,</span>&nbsp;<span class="ident" id="4848900">reflect</span><span class="op" id="4848907">.</span><span class="ident" id="4848908">Slice</span><span class="op" id="4848913">,</span>&nbsp;<span class="ident" id="4848915">reflect</span><span class="op" id="4848922">.</span><span class="ident" id="4848923">String</span><span class="op" id="4848929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848933">return</span>&nbsp;<span class="ident" id="4848940">v</span><span class="op" id="4848941">.</span><span class="ident" id="4848942">Len</span><span class="op" id="4848945">(</span><span class="op" id="4848946">)</span><span class="op" id="4848947">,</span>&nbsp;<span class="ident" id="4848949">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4848954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4848957">return</span>&nbsp;<span class="num" id="4848964">0</span><span class="op" id="4848965">,</span>&nbsp;<span class="ident" id="4848967">fmt</span><span class="op" id="4848970">.</span><span class="ident" id="4848971">Errorf</span><span class="op" id="4848977">(</span><span class="string" id="4848978">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4848994">,</span>&nbsp;<span class="ident" id="4848996">v</span><span class="op" id="4848997">.</span><span class="ident" id="4848998">Type</span><span class="op" id="4849002">(</span><span class="op" id="4849003">)</span><span class="op" id="4849004">)</span><br>
<span class="lineno">165</span><span class="op" id="4849006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4849009">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4849033">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="4849108">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4849193">func</span>&nbsp;<span class="ident" id="4849198">call</span><span class="op" id="4849202">(</span><span class="ident" id="4849203">fn</span>&nbsp;<span class="keyword" id="4849206">interface</span><span class="op" id="4849215">{</span><span class="op" id="4849216">}</span><span class="op" id="4849217">,</span>&nbsp;<span class="ident" id="4849219">args</span>&nbsp;<span class="op" id="4849224">...</span><span class="keyword" id="4849227">interface</span><span class="op" id="4849236">{</span><span class="op" id="4849237">}</span><span class="op" id="4849238">)</span>&nbsp;<span class="op" id="4849240">(</span><span class="keyword" id="4849241">interface</span><span class="op" id="4849250">{</span><span class="op" id="4849251">}</span><span class="op" id="4849252">,</span>&nbsp;<span class="builtintype" id="4849254">error</span><span class="op" id="4849259">)</span>&nbsp;<span class="op" id="4849261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4849264">v</span>&nbsp;<span class="op" id="4849266">:=</span>&nbsp;<span class="ident" id="4849269">reflect</span><span class="op" id="4849276">.</span><span class="ident" id="4849277">ValueOf</span><span class="op" id="4849284">(</span><span class="ident" id="4849285">fn</span><span class="op" id="4849287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4849290">typ</span>&nbsp;<span class="op" id="4849294">:=</span>&nbsp;<span class="ident" id="4849297">v</span><span class="op" id="4849298">.</span><span class="ident" id="4849299">Type</span><span class="op" id="4849303">(</span><span class="op" id="4849304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849307">if</span>&nbsp;<span class="ident" id="4849310">typ</span><span class="op" id="4849313">.</span><span class="ident" id="4849314">Kind</span><span class="op" id="4849318">(</span><span class="op" id="4849319">)</span>&nbsp;<span class="op" id="4849321">!=</span>&nbsp;<span class="ident" id="4849324">reflect</span><span class="op" id="4849331">.</span><span class="ident" id="4849332">Func</span>&nbsp;<span class="op" id="4849337">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849341">return</span>&nbsp;<span class="ident" id="4849348">nil</span><span class="op" id="4849351">,</span>&nbsp;<span class="ident" id="4849353">fmt</span><span class="op" id="4849356">.</span><span class="ident" id="4849357">Errorf</span><span class="op" id="4849363">(</span><span class="string" id="4849364">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4849389">,</span>&nbsp;<span class="ident" id="4849391">typ</span><span class="op" id="4849394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4849397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849400">if</span>&nbsp;<span class="op" id="4849403">!</span><span class="ident" id="4849404">goodFunc</span><span class="op" id="4849412">(</span><span class="ident" id="4849413">typ</span><span class="op" id="4849416">)</span>&nbsp;<span class="op" id="4849418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849422">return</span>&nbsp;<span class="ident" id="4849429">nil</span><span class="op" id="4849432">,</span>&nbsp;<span class="ident" id="4849434">fmt</span><span class="op" id="4849437">.</span><span class="ident" id="4849438">Errorf</span><span class="op" id="4849444">(</span><span class="string" id="4849445">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="4849493">,</span>&nbsp;<span class="ident" id="4849495">typ</span><span class="op" id="4849498">.</span><span class="ident" id="4849499">NumOut</span><span class="op" id="4849505">(</span><span class="op" id="4849506">)</span><span class="op" id="4849507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4849510">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4849513">numIn</span>&nbsp;<span class="op" id="4849519">:=</span>&nbsp;<span class="ident" id="4849522">typ</span><span class="op" id="4849525">.</span><span class="ident" id="4849526">NumIn</span><span class="op" id="4849531">(</span><span class="op" id="4849532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849535">var</span>&nbsp;<span class="ident" id="4849539">dddType</span>&nbsp;<span class="ident" id="4849547">reflect</span><span class="op" id="4849554">.</span><span class="ident" id="4849555">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849561">if</span>&nbsp;<span class="ident" id="4849564">typ</span><span class="op" id="4849567">.</span><span class="ident" id="4849568">IsVariadic</span><span class="op" id="4849578">(</span><span class="op" id="4849579">)</span>&nbsp;<span class="op" id="4849581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849585">if</span>&nbsp;<span class="builtinfunc" id="4849588">len</span><span class="op" id="4849591">(</span><span class="ident" id="4849592">args</span><span class="op" id="4849596">)</span>&nbsp;<span class="op" id="4849598">&lt;</span>&nbsp;<span class="ident" id="4849600">numIn</span><span class="op" id="4849605">-</span><span class="num" id="4849606">1</span>&nbsp;<span class="op" id="4849608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849613">return</span>&nbsp;<span class="ident" id="4849620">nil</span><span class="op" id="4849623">,</span>&nbsp;<span class="ident" id="4849625">fmt</span><span class="op" id="4849628">.</span><span class="ident" id="4849629">Errorf</span><span class="op" id="4849635">(</span><span class="string" id="4849636">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="4849683">,</span>&nbsp;<span class="builtinfunc" id="4849685">len</span><span class="op" id="4849688">(</span><span class="ident" id="4849689">args</span><span class="op" id="4849693">)</span><span class="op" id="4849694">,</span>&nbsp;<span class="ident" id="4849696">numIn</span><span class="op" id="4849701">-</span><span class="num" id="4849702">1</span><span class="op" id="4849703">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4849707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4849711">dddType</span>&nbsp;<span class="op" id="4849719">=</span>&nbsp;<span class="ident" id="4849721">typ</span><span class="op" id="4849724">.</span><span class="ident" id="4849725">In</span><span class="op" id="4849727">(</span><span class="ident" id="4849728">numIn</span>&nbsp;<span class="op" id="4849734">-</span>&nbsp;<span class="num" id="4849736">1</span><span class="op" id="4849737">)</span><span class="op" id="4849738">.</span><span class="ident" id="4849739">Elem</span><span class="op" id="4849743">(</span><span class="op" id="4849744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4849747">}</span>&nbsp;<span class="keyword" id="4849749">else</span>&nbsp;<span class="op" id="4849754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849758">if</span>&nbsp;<span class="builtinfunc" id="4849761">len</span><span class="op" id="4849764">(</span><span class="ident" id="4849765">args</span><span class="op" id="4849769">)</span>&nbsp;<span class="op" id="4849771">!=</span>&nbsp;<span class="ident" id="4849774">numIn</span>&nbsp;<span class="op" id="4849780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849785">return</span>&nbsp;<span class="ident" id="4849792">nil</span><span class="op" id="4849795">,</span>&nbsp;<span class="ident" id="4849797">fmt</span><span class="op" id="4849800">.</span><span class="ident" id="4849801">Errorf</span><span class="op" id="4849807">(</span><span class="string" id="4849808">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="4849846">,</span>&nbsp;<span class="builtinfunc" id="4849848">len</span><span class="op" id="4849851">(</span><span class="ident" id="4849852">args</span><span class="op" id="4849856">)</span><span class="op" id="4849857">,</span>&nbsp;<span class="ident" id="4849859">numIn</span><span class="op" id="4849864">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4849868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4849871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4849874">argv</span>&nbsp;<span class="op" id="4849879">:=</span>&nbsp;<span class="builtinfunc" id="4849882">make</span><span class="op" id="4849886">(</span><span class="op" id="4849887">[</span><span class="op" id="4849888">]</span><span class="ident" id="4849889">reflect</span><span class="op" id="4849896">.</span><span class="ident" id="4849897">Value</span><span class="op" id="4849902">,</span>&nbsp;<span class="builtinfunc" id="4849904">len</span><span class="op" id="4849907">(</span><span class="ident" id="4849908">args</span><span class="op" id="4849912">)</span><span class="op" id="4849913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4849916">for</span>&nbsp;<span class="ident" id="4849920">i</span><span class="op" id="4849921">,</span>&nbsp;<span class="ident" id="4849923">arg</span>&nbsp;<span class="op" id="4849927">:=</span>&nbsp;<span class="keyword" id="4849930">range</span>&nbsp;<span class="ident" id="4849936">args</span>&nbsp;<span class="op" id="4849941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4849945">value</span>&nbsp;<span class="op" id="4849951">:=</span>&nbsp;<span class="ident" id="4849954">reflect</span><span class="op" id="4849961">.</span><span class="ident" id="4849962">ValueOf</span><span class="op" id="4849969">(</span><span class="ident" id="4849970">arg</span><span class="op" id="4849973">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4849977">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850038">var</span>&nbsp;<span class="ident" id="4850042">argType</span>&nbsp;<span class="ident" id="4850050">reflect</span><span class="op" id="4850057">.</span><span class="ident" id="4850058">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850065">if</span>&nbsp;<span class="op" id="4850068">!</span><span class="ident" id="4850069">typ</span><span class="op" id="4850072">.</span><span class="ident" id="4850073">IsVariadic</span><span class="op" id="4850083">(</span><span class="op" id="4850084">)</span>&nbsp;<span class="op" id="4850086">||</span>&nbsp;<span class="ident" id="4850089">i</span>&nbsp;<span class="op" id="4850091">&lt;</span>&nbsp;<span class="ident" id="4850093">numIn</span><span class="op" id="4850098">-</span><span class="num" id="4850099">1</span>&nbsp;<span class="op" id="4850101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850106">argType</span>&nbsp;<span class="op" id="4850114">=</span>&nbsp;<span class="ident" id="4850116">typ</span><span class="op" id="4850119">.</span><span class="ident" id="4850120">In</span><span class="op" id="4850122">(</span><span class="ident" id="4850123">i</span><span class="op" id="4850124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850128">}</span>&nbsp;<span class="keyword" id="4850130">else</span>&nbsp;<span class="op" id="4850135">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850140">argType</span>&nbsp;<span class="op" id="4850148">=</span>&nbsp;<span class="ident" id="4850150">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850164">if</span>&nbsp;<span class="op" id="4850167">!</span><span class="ident" id="4850168">value</span><span class="op" id="4850173">.</span><span class="ident" id="4850174">IsValid</span><span class="op" id="4850181">(</span><span class="op" id="4850182">)</span>&nbsp;<span class="op" id="4850184">&amp;&amp;</span>&nbsp;<span class="ident" id="4850187">canBeNil</span><span class="op" id="4850195">(</span><span class="ident" id="4850196">argType</span><span class="op" id="4850203">)</span>&nbsp;<span class="op" id="4850205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850210">value</span>&nbsp;<span class="op" id="4850216">=</span>&nbsp;<span class="ident" id="4850218">reflect</span><span class="op" id="4850225">.</span><span class="ident" id="4850226">Zero</span><span class="op" id="4850230">(</span><span class="ident" id="4850231">argType</span><span class="op" id="4850238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850242">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850246">if</span>&nbsp;<span class="op" id="4850249">!</span><span class="ident" id="4850250">value</span><span class="op" id="4850255">.</span><span class="ident" id="4850256">Type</span><span class="op" id="4850260">(</span><span class="op" id="4850261">)</span><span class="op" id="4850262">.</span><span class="ident" id="4850263">AssignableTo</span><span class="op" id="4850275">(</span><span class="ident" id="4850276">argType</span><span class="op" id="4850283">)</span>&nbsp;<span class="op" id="4850285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850290">return</span>&nbsp;<span class="ident" id="4850297">nil</span><span class="op" id="4850300">,</span>&nbsp;<span class="ident" id="4850302">fmt</span><span class="op" id="4850305">.</span><span class="ident" id="4850306">Errorf</span><span class="op" id="4850312">(</span><span class="string" id="4850313">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="4850347">,</span>&nbsp;<span class="ident" id="4850349">i</span><span class="op" id="4850350">,</span>&nbsp;<span class="ident" id="4850352">value</span><span class="op" id="4850357">.</span><span class="ident" id="4850358">Type</span><span class="op" id="4850362">(</span><span class="op" id="4850363">)</span><span class="op" id="4850364">,</span>&nbsp;<span class="ident" id="4850366">argType</span><span class="op" id="4850373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850381">argv</span><span class="op" id="4850385">[</span><span class="ident" id="4850386">i</span><span class="op" id="4850387">]</span>&nbsp;<span class="op" id="4850389">=</span>&nbsp;<span class="ident" id="4850391">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850398">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850401">result</span>&nbsp;<span class="op" id="4850408">:=</span>&nbsp;<span class="ident" id="4850411">v</span><span class="op" id="4850412">.</span><span class="ident" id="4850413">Call</span><span class="op" id="4850417">(</span><span class="ident" id="4850418">argv</span><span class="op" id="4850422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850425">if</span>&nbsp;<span class="builtinfunc" id="4850428">len</span><span class="op" id="4850431">(</span><span class="ident" id="4850432">result</span><span class="op" id="4850438">)</span>&nbsp;<span class="op" id="4850440">==</span>&nbsp;<span class="num" id="4850443">2</span>&nbsp;<span class="op" id="4850445">&amp;&amp;</span>&nbsp;<span class="op" id="4850448">!</span><span class="ident" id="4850449">result</span><span class="op" id="4850455">[</span><span class="num" id="4850456">1</span><span class="op" id="4850457">]</span><span class="op" id="4850458">.</span><span class="ident" id="4850459">IsNil</span><span class="op" id="4850464">(</span><span class="op" id="4850465">)</span>&nbsp;<span class="op" id="4850467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850471">return</span>&nbsp;<span class="ident" id="4850478">result</span><span class="op" id="4850484">[</span><span class="num" id="4850485">0</span><span class="op" id="4850486">]</span><span class="op" id="4850487">.</span><span class="ident" id="4850488">Interface</span><span class="op" id="4850497">(</span><span class="op" id="4850498">)</span><span class="op" id="4850499">,</span>&nbsp;<span class="ident" id="4850501">result</span><span class="op" id="4850507">[</span><span class="num" id="4850508">1</span><span class="op" id="4850509">]</span><span class="op" id="4850510">.</span><span class="ident" id="4850511">Interface</span><span class="op" id="4850520">(</span><span class="op" id="4850521">)</span><span class="op" id="4850522">.</span><span class="op" id="4850523">(</span><span class="builtintype" id="4850524">error</span><span class="op" id="4850529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850535">return</span>&nbsp;<span class="ident" id="4850542">result</span><span class="op" id="4850548">[</span><span class="num" id="4850549">0</span><span class="op" id="4850550">]</span><span class="op" id="4850551">.</span><span class="ident" id="4850552">Interface</span><span class="op" id="4850561">(</span><span class="op" id="4850562">)</span><span class="op" id="4850563">,</span>&nbsp;<span class="ident" id="4850565">nil</span><br>
<span class="lineno">215</span><span class="op" id="4850569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4850572">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4850591">func</span>&nbsp;<span class="ident" id="4850596">truth</span><span class="op" id="4850601">(</span><span class="ident" id="4850602">a</span>&nbsp;<span class="keyword" id="4850604">interface</span><span class="op" id="4850613">{</span><span class="op" id="4850614">}</span><span class="op" id="4850615">)</span>&nbsp;<span class="builtintype" id="4850617">bool</span>&nbsp;<span class="op" id="4850622">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850625">t</span><span class="op" id="4850626">,</span>&nbsp;<span class="ident" id="4850628">_</span>&nbsp;<span class="op" id="4850630">:=</span>&nbsp;<span class="ident" id="4850633">isTrue</span><span class="op" id="4850639">(</span><span class="ident" id="4850640">reflect</span><span class="op" id="4850647">.</span><span class="ident" id="4850648">ValueOf</span><span class="op" id="4850655">(</span><span class="ident" id="4850656">a</span><span class="op" id="4850657">)</span><span class="op" id="4850658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850661">return</span>&nbsp;<span class="ident" id="4850668">t</span><br>
<span class="lineno"></span><span class="op" id="4850670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4850673">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="4850733">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4850798">func</span>&nbsp;<span class="ident" id="4850803">and</span><span class="op" id="4850806">(</span><span class="ident" id="4850807">arg0</span>&nbsp;<span class="keyword" id="4850812">interface</span><span class="op" id="4850821">{</span><span class="op" id="4850822">}</span><span class="op" id="4850823">,</span>&nbsp;<span class="ident" id="4850825">args</span>&nbsp;<span class="op" id="4850830">...</span><span class="keyword" id="4850833">interface</span><span class="op" id="4850842">{</span><span class="op" id="4850843">}</span><span class="op" id="4850844">)</span>&nbsp;<span class="keyword" id="4850846">interface</span><span class="op" id="4850855">{</span><span class="op" id="4850856">}</span>&nbsp;<span class="op" id="4850858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850861">if</span>&nbsp;<span class="op" id="4850864">!</span><span class="ident" id="4850865">truth</span><span class="op" id="4850870">(</span><span class="ident" id="4850871">arg0</span><span class="op" id="4850875">)</span>&nbsp;<span class="op" id="4850877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850881">return</span>&nbsp;<span class="ident" id="4850888">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850894">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850897">for</span>&nbsp;<span class="ident" id="4850901">i</span>&nbsp;<span class="op" id="4850903">:=</span>&nbsp;<span class="keyword" id="4850906">range</span>&nbsp;<span class="ident" id="4850912">args</span>&nbsp;<span class="op" id="4850917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4850921">arg0</span>&nbsp;<span class="op" id="4850926">=</span>&nbsp;<span class="ident" id="4850928">args</span><span class="op" id="4850932">[</span><span class="ident" id="4850933">i</span><span class="op" id="4850934">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850938">if</span>&nbsp;<span class="op" id="4850941">!</span><span class="ident" id="4850942">truth</span><span class="op" id="4850947">(</span><span class="ident" id="4850948">arg0</span><span class="op" id="4850952">)</span>&nbsp;<span class="op" id="4850954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850959">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850967">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4850970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4850973">return</span>&nbsp;<span class="ident" id="4850980">arg0</span><br>
<span class="lineno"></span><span class="op" id="4850985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4850988">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="4851046">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4851110">func</span>&nbsp;<span class="ident" id="4851115">or</span><span class="op" id="4851117">(</span><span class="ident" id="4851118">arg0</span>&nbsp;<span class="keyword" id="4851123">interface</span><span class="op" id="4851132">{</span><span class="op" id="4851133">}</span><span class="op" id="4851134">,</span>&nbsp;<span class="ident" id="4851136">args</span>&nbsp;<span class="op" id="4851141">...</span><span class="keyword" id="4851144">interface</span><span class="op" id="4851153">{</span><span class="op" id="4851154">}</span><span class="op" id="4851155">)</span>&nbsp;<span class="keyword" id="4851157">interface</span><span class="op" id="4851166">{</span><span class="op" id="4851167">}</span>&nbsp;<span class="op" id="4851169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851172">if</span>&nbsp;<span class="ident" id="4851175">truth</span><span class="op" id="4851180">(</span><span class="ident" id="4851181">arg0</span><span class="op" id="4851185">)</span>&nbsp;<span class="op" id="4851187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851191">return</span>&nbsp;<span class="ident" id="4851198">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4851204">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851207">for</span>&nbsp;<span class="ident" id="4851211">i</span>&nbsp;<span class="op" id="4851213">:=</span>&nbsp;<span class="keyword" id="4851216">range</span>&nbsp;<span class="ident" id="4851222">args</span>&nbsp;<span class="op" id="4851227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851231">arg0</span>&nbsp;<span class="op" id="4851236">=</span>&nbsp;<span class="ident" id="4851238">args</span><span class="op" id="4851242">[</span><span class="ident" id="4851243">i</span><span class="op" id="4851244">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851248">if</span>&nbsp;<span class="ident" id="4851251">truth</span><span class="op" id="4851256">(</span><span class="ident" id="4851257">arg0</span><span class="op" id="4851261">)</span>&nbsp;<span class="op" id="4851263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851268">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4851276">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4851279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851282">return</span>&nbsp;<span class="ident" id="4851289">arg0</span><br>
<span class="lineno"></span><span class="op" id="4851294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4851297">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="4851350">func</span>&nbsp;<span class="ident" id="4851355">not</span><span class="op" id="4851358">(</span><span class="ident" id="4851359">arg</span>&nbsp;<span class="keyword" id="4851363">interface</span><span class="op" id="4851372">{</span><span class="op" id="4851373">}</span><span class="op" id="4851374">)</span>&nbsp;<span class="op" id="4851376">(</span><span class="ident" id="4851377">truth</span>&nbsp;<span class="builtintype" id="4851383">bool</span><span class="op" id="4851387">)</span>&nbsp;<span class="op" id="4851389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851392">truth</span><span class="op" id="4851397">,</span>&nbsp;<span class="ident" id="4851399">_</span>&nbsp;<span class="op" id="4851401">=</span>&nbsp;<span class="ident" id="4851403">isTrue</span><span class="op" id="4851409">(</span><span class="ident" id="4851410">reflect</span><span class="op" id="4851417">.</span><span class="ident" id="4851418">ValueOf</span><span class="op" id="4851425">(</span><span class="ident" id="4851426">arg</span><span class="op" id="4851429">)</span><span class="op" id="4851430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851433">return</span>&nbsp;<span class="op" id="4851440">!</span><span class="ident" id="4851441">truth</span><br>
<span class="lineno"></span><span class="op" id="4851447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4851450">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4851466">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4851539">var</span>&nbsp;<span class="op" id="4851543">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851546">errBadComparisonType</span>&nbsp;<span class="op" id="4851567">=</span>&nbsp;<span class="ident" id="4851569">errors</span><span class="op" id="4851575">.</span><span class="ident" id="4851576">New</span><span class="op" id="4851579">(</span><span class="string" id="4851580">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4851609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851612">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4851633">=</span>&nbsp;<span class="ident" id="4851635">errors</span><span class="op" id="4851641">.</span><span class="ident" id="4851642">New</span><span class="op" id="4851645">(</span><span class="string" id="4851646">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4851681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851684">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4851705">=</span>&nbsp;<span class="ident" id="4851707">errors</span><span class="op" id="4851713">.</span><span class="ident" id="4851714">New</span><span class="op" id="4851717">(</span><span class="string" id="4851718">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4851751">)</span><br>
<span class="lineno"></span><span class="op" id="4851753">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="4851756">type</span>&nbsp;<span class="ident" id="4851761">kind</span>&nbsp;<span class="builtintype" id="4851766">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4851771">const</span>&nbsp;<span class="op" id="4851777">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851780">invalidKind</span>&nbsp;<span class="ident" id="4851792">kind</span>&nbsp;<span class="op" id="4851797">=</span>&nbsp;<span class="ident" id="4851799">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851805">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851815">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851828">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851837">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851848">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851861">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4851873">uintKind</span><br>
<span class="lineno"></span><span class="op" id="4851882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4851885">func</span>&nbsp;<span class="ident" id="4851890">basicKind</span><span class="op" id="4851899">(</span><span class="ident" id="4851900">v</span>&nbsp;<span class="ident" id="4851902">reflect</span><span class="op" id="4851909">.</span><span class="ident" id="4851910">Value</span><span class="op" id="4851915">)</span>&nbsp;<span class="op" id="4851917">(</span><span class="ident" id="4851918">kind</span><span class="op" id="4851922">,</span>&nbsp;<span class="builtintype" id="4851924">error</span><span class="op" id="4851929">)</span>&nbsp;<span class="op" id="4851931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851934">switch</span>&nbsp;<span class="ident" id="4851941">v</span><span class="op" id="4851942">.</span><span class="ident" id="4851943">Kind</span><span class="op" id="4851947">(</span><span class="op" id="4851948">)</span>&nbsp;<span class="op" id="4851950">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851953">case</span>&nbsp;<span class="ident" id="4851958">reflect</span><span class="op" id="4851965">.</span><span class="ident" id="4851966">Bool</span><span class="op" id="4851970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851974">return</span>&nbsp;<span class="ident" id="4851981">boolKind</span><span class="op" id="4851989">,</span>&nbsp;<span class="ident" id="4851991">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4851996">case</span>&nbsp;<span class="ident" id="4852001">reflect</span><span class="op" id="4852008">.</span><span class="ident" id="4852009">Int</span><span class="op" id="4852012">,</span>&nbsp;<span class="ident" id="4852014">reflect</span><span class="op" id="4852021">.</span><span class="ident" id="4852022">Int8</span><span class="op" id="4852026">,</span>&nbsp;<span class="ident" id="4852028">reflect</span><span class="op" id="4852035">.</span><span class="ident" id="4852036">Int16</span><span class="op" id="4852041">,</span>&nbsp;<span class="ident" id="4852043">reflect</span><span class="op" id="4852050">.</span><span class="ident" id="4852051">Int32</span><span class="op" id="4852056">,</span>&nbsp;<span class="ident" id="4852058">reflect</span><span class="op" id="4852065">.</span><span class="ident" id="4852066">Int64</span><span class="op" id="4852071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852075">return</span>&nbsp;<span class="ident" id="4852082">intKind</span><span class="op" id="4852089">,</span>&nbsp;<span class="ident" id="4852091">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852096">case</span>&nbsp;<span class="ident" id="4852101">reflect</span><span class="op" id="4852108">.</span><span class="ident" id="4852109">Uint</span><span class="op" id="4852113">,</span>&nbsp;<span class="ident" id="4852115">reflect</span><span class="op" id="4852122">.</span><span class="ident" id="4852123">Uint8</span><span class="op" id="4852128">,</span>&nbsp;<span class="ident" id="4852130">reflect</span><span class="op" id="4852137">.</span><span class="ident" id="4852138">Uint16</span><span class="op" id="4852144">,</span>&nbsp;<span class="ident" id="4852146">reflect</span><span class="op" id="4852153">.</span><span class="ident" id="4852154">Uint32</span><span class="op" id="4852160">,</span>&nbsp;<span class="ident" id="4852162">reflect</span><span class="op" id="4852169">.</span><span class="ident" id="4852170">Uint64</span><span class="op" id="4852176">,</span>&nbsp;<span class="ident" id="4852178">reflect</span><span class="op" id="4852185">.</span><span class="ident" id="4852186">Uintptr</span><span class="op" id="4852193">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852197">return</span>&nbsp;<span class="ident" id="4852204">uintKind</span><span class="op" id="4852212">,</span>&nbsp;<span class="ident" id="4852214">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852219">case</span>&nbsp;<span class="ident" id="4852224">reflect</span><span class="op" id="4852231">.</span><span class="ident" id="4852232">Float32</span><span class="op" id="4852239">,</span>&nbsp;<span class="ident" id="4852241">reflect</span><span class="op" id="4852248">.</span><span class="ident" id="4852249">Float64</span><span class="op" id="4852256">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852260">return</span>&nbsp;<span class="ident" id="4852267">floatKind</span><span class="op" id="4852276">,</span>&nbsp;<span class="ident" id="4852278">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852283">case</span>&nbsp;<span class="ident" id="4852288">reflect</span><span class="op" id="4852295">.</span><span class="ident" id="4852296">Complex64</span><span class="op" id="4852305">,</span>&nbsp;<span class="ident" id="4852307">reflect</span><span class="op" id="4852314">.</span><span class="ident" id="4852315">Complex128</span><span class="op" id="4852325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852329">return</span>&nbsp;<span class="ident" id="4852336">complexKind</span><span class="op" id="4852347">,</span>&nbsp;<span class="ident" id="4852349">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852354">case</span>&nbsp;<span class="ident" id="4852359">reflect</span><span class="op" id="4852366">.</span><span class="ident" id="4852367">String</span><span class="op" id="4852373">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852377">return</span>&nbsp;<span class="ident" id="4852384">stringKind</span><span class="op" id="4852394">,</span>&nbsp;<span class="ident" id="4852396">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4852401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852404">return</span>&nbsp;<span class="ident" id="4852411">invalidKind</span><span class="op" id="4852422">,</span>&nbsp;<span class="ident" id="4852424">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="4852445">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="4852448">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="4852503">func</span>&nbsp;<span class="ident" id="4852508">eq</span><span class="op" id="4852510">(</span><span class="ident" id="4852511">arg1</span>&nbsp;<span class="keyword" id="4852516">interface</span><span class="op" id="4852525">{</span><span class="op" id="4852526">}</span><span class="op" id="4852527">,</span>&nbsp;<span class="ident" id="4852529">arg2</span>&nbsp;<span class="op" id="4852534">...</span><span class="keyword" id="4852537">interface</span><span class="op" id="4852546">{</span><span class="op" id="4852547">}</span><span class="op" id="4852548">)</span>&nbsp;<span class="op" id="4852550">(</span><span class="builtintype" id="4852551">bool</span><span class="op" id="4852555">,</span>&nbsp;<span class="builtintype" id="4852557">error</span><span class="op" id="4852562">)</span>&nbsp;<span class="op" id="4852564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852567">v1</span>&nbsp;<span class="op" id="4852570">:=</span>&nbsp;<span class="ident" id="4852573">reflect</span><span class="op" id="4852580">.</span><span class="ident" id="4852581">ValueOf</span><span class="op" id="4852588">(</span><span class="ident" id="4852589">arg1</span><span class="op" id="4852593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852596">k1</span><span class="op" id="4852598">,</span>&nbsp;<span class="ident" id="4852600">err</span>&nbsp;<span class="op" id="4852604">:=</span>&nbsp;<span class="ident" id="4852607">basicKind</span><span class="op" id="4852616">(</span><span class="ident" id="4852617">v1</span><span class="op" id="4852619">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852622">if</span>&nbsp;<span class="ident" id="4852625">err</span>&nbsp;<span class="op" id="4852629">!=</span>&nbsp;<span class="ident" id="4852632">nil</span>&nbsp;<span class="op" id="4852636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852640">return</span>&nbsp;<span class="builtintype" id="4852647">false</span><span class="op" id="4852652">,</span>&nbsp;<span class="ident" id="4852654">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4852659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852662">if</span>&nbsp;<span class="builtinfunc" id="4852665">len</span><span class="op" id="4852668">(</span><span class="ident" id="4852669">arg2</span><span class="op" id="4852673">)</span>&nbsp;<span class="op" id="4852675">==</span>&nbsp;<span class="num" id="4852678">0</span>&nbsp;<span class="op" id="4852680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852684">return</span>&nbsp;<span class="builtintype" id="4852691">false</span><span class="op" id="4852696">,</span>&nbsp;<span class="ident" id="4852698">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4852715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852718">for</span>&nbsp;<span class="ident" id="4852722">_</span><span class="op" id="4852723">,</span>&nbsp;<span class="ident" id="4852725">arg</span>&nbsp;<span class="op" id="4852729">:=</span>&nbsp;<span class="keyword" id="4852732">range</span>&nbsp;<span class="ident" id="4852738">arg2</span>&nbsp;<span class="op" id="4852743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852747">v2</span>&nbsp;<span class="op" id="4852750">:=</span>&nbsp;<span class="ident" id="4852753">reflect</span><span class="op" id="4852760">.</span><span class="ident" id="4852761">ValueOf</span><span class="op" id="4852768">(</span><span class="ident" id="4852769">arg</span><span class="op" id="4852772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852776">k2</span><span class="op" id="4852778">,</span>&nbsp;<span class="ident" id="4852780">err</span>&nbsp;<span class="op" id="4852784">:=</span>&nbsp;<span class="ident" id="4852787">basicKind</span><span class="op" id="4852796">(</span><span class="ident" id="4852797">v2</span><span class="op" id="4852799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852803">if</span>&nbsp;<span class="ident" id="4852806">err</span>&nbsp;<span class="op" id="4852810">!=</span>&nbsp;<span class="ident" id="4852813">nil</span>&nbsp;<span class="op" id="4852817">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852822">return</span>&nbsp;<span class="builtintype" id="4852829">false</span><span class="op" id="4852834">,</span>&nbsp;<span class="ident" id="4852836">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4852842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852846">truth</span>&nbsp;<span class="op" id="4852852">:=</span>&nbsp;<span class="builtintype" id="4852855">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852863">if</span>&nbsp;<span class="ident" id="4852866">k1</span>&nbsp;<span class="op" id="4852869">!=</span>&nbsp;<span class="ident" id="4852872">k2</span>&nbsp;<span class="op" id="4852875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4852880">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852954">switch</span>&nbsp;<span class="op" id="4852961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852966">case</span>&nbsp;<span class="ident" id="4852971">k1</span>&nbsp;<span class="op" id="4852974">==</span>&nbsp;<span class="ident" id="4852977">intKind</span>&nbsp;<span class="op" id="4852985">&amp;&amp;</span>&nbsp;<span class="ident" id="4852988">k2</span>&nbsp;<span class="op" id="4852991">==</span>&nbsp;<span class="ident" id="4852994">uintKind</span><span class="op" id="4853002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853008">truth</span>&nbsp;<span class="op" id="4853014">=</span>&nbsp;<span class="ident" id="4853016">v1</span><span class="op" id="4853018">.</span><span class="ident" id="4853019">Int</span><span class="op" id="4853022">(</span><span class="op" id="4853023">)</span>&nbsp;<span class="op" id="4853025">&gt;=</span>&nbsp;<span class="num" id="4853028">0</span>&nbsp;<span class="op" id="4853030">&amp;&amp;</span>&nbsp;<span class="ident" id="4853033">uint64</span><span class="op" id="4853039">(</span><span class="ident" id="4853040">v1</span><span class="op" id="4853042">.</span><span class="ident" id="4853043">Int</span><span class="op" id="4853046">(</span><span class="op" id="4853047">)</span><span class="op" id="4853048">)</span>&nbsp;<span class="op" id="4853050">==</span>&nbsp;<span class="ident" id="4853053">v2</span><span class="op" id="4853055">.</span><span class="ident" id="4853056">Uint</span><span class="op" id="4853060">(</span><span class="op" id="4853061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853066">case</span>&nbsp;<span class="ident" id="4853071">k1</span>&nbsp;<span class="op" id="4853074">==</span>&nbsp;<span class="ident" id="4853077">uintKind</span>&nbsp;<span class="op" id="4853086">&amp;&amp;</span>&nbsp;<span class="ident" id="4853089">k2</span>&nbsp;<span class="op" id="4853092">==</span>&nbsp;<span class="ident" id="4853095">intKind</span><span class="op" id="4853102">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853108">truth</span>&nbsp;<span class="op" id="4853114">=</span>&nbsp;<span class="ident" id="4853116">v2</span><span class="op" id="4853118">.</span><span class="ident" id="4853119">Int</span><span class="op" id="4853122">(</span><span class="op" id="4853123">)</span>&nbsp;<span class="op" id="4853125">&gt;=</span>&nbsp;<span class="num" id="4853128">0</span>&nbsp;<span class="op" id="4853130">&amp;&amp;</span>&nbsp;<span class="ident" id="4853133">v1</span><span class="op" id="4853135">.</span><span class="ident" id="4853136">Uint</span><span class="op" id="4853140">(</span><span class="op" id="4853141">)</span>&nbsp;<span class="op" id="4853143">==</span>&nbsp;<span class="ident" id="4853146">uint64</span><span class="op" id="4853152">(</span><span class="ident" id="4853153">v2</span><span class="op" id="4853155">.</span><span class="ident" id="4853156">Int</span><span class="op" id="4853159">(</span><span class="op" id="4853160">)</span><span class="op" id="4853161">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853166">default</span><span class="op" id="4853173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853179">return</span>&nbsp;<span class="builtintype" id="4853186">false</span><span class="op" id="4853191">,</span>&nbsp;<span class="ident" id="4853193">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853217">}</span>&nbsp;<span class="keyword" id="4853219">else</span>&nbsp;<span class="op" id="4853224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853229">switch</span>&nbsp;<span class="ident" id="4853236">k1</span>&nbsp;<span class="op" id="4853239">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853244">case</span>&nbsp;<span class="ident" id="4853249">boolKind</span><span class="op" id="4853257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853263">truth</span>&nbsp;<span class="op" id="4853269">=</span>&nbsp;<span class="ident" id="4853271">v1</span><span class="op" id="4853273">.</span><span class="ident" id="4853274">Bool</span><span class="op" id="4853278">(</span><span class="op" id="4853279">)</span>&nbsp;<span class="op" id="4853281">==</span>&nbsp;<span class="ident" id="4853284">v2</span><span class="op" id="4853286">.</span><span class="ident" id="4853287">Bool</span><span class="op" id="4853291">(</span><span class="op" id="4853292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853297">case</span>&nbsp;<span class="ident" id="4853302">complexKind</span><span class="op" id="4853313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853319">truth</span>&nbsp;<span class="op" id="4853325">=</span>&nbsp;<span class="ident" id="4853327">v1</span><span class="op" id="4853329">.</span><span class="ident" id="4853330">Complex</span><span class="op" id="4853337">(</span><span class="op" id="4853338">)</span>&nbsp;<span class="op" id="4853340">==</span>&nbsp;<span class="ident" id="4853343">v2</span><span class="op" id="4853345">.</span><span class="ident" id="4853346">Complex</span><span class="op" id="4853353">(</span><span class="op" id="4853354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853359">case</span>&nbsp;<span class="ident" id="4853364">floatKind</span><span class="op" id="4853373">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853379">truth</span>&nbsp;<span class="op" id="4853385">=</span>&nbsp;<span class="ident" id="4853387">v1</span><span class="op" id="4853389">.</span><span class="ident" id="4853390">Float</span><span class="op" id="4853395">(</span><span class="op" id="4853396">)</span>&nbsp;<span class="op" id="4853398">==</span>&nbsp;<span class="ident" id="4853401">v2</span><span class="op" id="4853403">.</span><span class="ident" id="4853404">Float</span><span class="op" id="4853409">(</span><span class="op" id="4853410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853415">case</span>&nbsp;<span class="ident" id="4853420">intKind</span><span class="op" id="4853427">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853433">truth</span>&nbsp;<span class="op" id="4853439">=</span>&nbsp;<span class="ident" id="4853441">v1</span><span class="op" id="4853443">.</span><span class="ident" id="4853444">Int</span><span class="op" id="4853447">(</span><span class="op" id="4853448">)</span>&nbsp;<span class="op" id="4853450">==</span>&nbsp;<span class="ident" id="4853453">v2</span><span class="op" id="4853455">.</span><span class="ident" id="4853456">Int</span><span class="op" id="4853459">(</span><span class="op" id="4853460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853465">case</span>&nbsp;<span class="ident" id="4853470">stringKind</span><span class="op" id="4853480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853486">truth</span>&nbsp;<span class="op" id="4853492">=</span>&nbsp;<span class="ident" id="4853494">v1</span><span class="op" id="4853496">.</span><span class="ident" id="4853497">String</span><span class="op" id="4853503">(</span><span class="op" id="4853504">)</span>&nbsp;<span class="op" id="4853506">==</span>&nbsp;<span class="ident" id="4853509">v2</span><span class="op" id="4853511">.</span><span class="ident" id="4853512">String</span><span class="op" id="4853518">(</span><span class="op" id="4853519">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853524">case</span>&nbsp;<span class="ident" id="4853529">uintKind</span><span class="op" id="4853537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853543">truth</span>&nbsp;<span class="op" id="4853549">=</span>&nbsp;<span class="ident" id="4853551">v1</span><span class="op" id="4853553">.</span><span class="ident" id="4853554">Uint</span><span class="op" id="4853558">(</span><span class="op" id="4853559">)</span>&nbsp;<span class="op" id="4853561">==</span>&nbsp;<span class="ident" id="4853564">v2</span><span class="op" id="4853566">.</span><span class="ident" id="4853567">Uint</span><span class="op" id="4853571">(</span><span class="op" id="4853572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853577">default</span><span class="op" id="4853584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4853590">panic</span><span class="op" id="4853595">(</span><span class="string" id="4853596">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4853610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853615">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853623">if</span>&nbsp;<span class="ident" id="4853626">truth</span>&nbsp;<span class="op" id="4853632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853637">return</span>&nbsp;<span class="builtintype" id="4853644">true</span><span class="op" id="4853648">,</span>&nbsp;<span class="ident" id="4853650">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853659">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853662">return</span>&nbsp;<span class="builtintype" id="4853669">false</span><span class="op" id="4853674">,</span>&nbsp;<span class="ident" id="4853676">nil</span><br>
<span class="lineno"></span><span class="op" id="4853680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4853683">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4853722">func</span>&nbsp;<span class="ident" id="4853727">ne</span><span class="op" id="4853729">(</span><span class="ident" id="4853730">arg1</span><span class="op" id="4853734">,</span>&nbsp;<span class="ident" id="4853736">arg2</span>&nbsp;<span class="keyword" id="4853741">interface</span><span class="op" id="4853750">{</span><span class="op" id="4853751">}</span><span class="op" id="4853752">)</span>&nbsp;<span class="op" id="4853754">(</span><span class="builtintype" id="4853755">bool</span><span class="op" id="4853759">,</span>&nbsp;<span class="builtintype" id="4853761">error</span><span class="op" id="4853766">)</span>&nbsp;<span class="op" id="4853768">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4853771">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853800">equal</span><span class="op" id="4853805">,</span>&nbsp;<span class="ident" id="4853807">err</span>&nbsp;<span class="op" id="4853811">:=</span>&nbsp;<span class="ident" id="4853814">eq</span><span class="op" id="4853816">(</span><span class="ident" id="4853817">arg1</span><span class="op" id="4853821">,</span>&nbsp;<span class="ident" id="4853823">arg2</span><span class="op" id="4853827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853830">return</span>&nbsp;<span class="op" id="4853837">!</span><span class="ident" id="4853838">equal</span><span class="op" id="4853843">,</span>&nbsp;<span class="ident" id="4853845">err</span><br>
<span class="lineno"></span><span class="op" id="4853849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="4853852">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4853890">func</span>&nbsp;<span class="ident" id="4853895">lt</span><span class="op" id="4853897">(</span><span class="ident" id="4853898">arg1</span><span class="op" id="4853902">,</span>&nbsp;<span class="ident" id="4853904">arg2</span>&nbsp;<span class="keyword" id="4853909">interface</span><span class="op" id="4853918">{</span><span class="op" id="4853919">}</span><span class="op" id="4853920">)</span>&nbsp;<span class="op" id="4853922">(</span><span class="builtintype" id="4853923">bool</span><span class="op" id="4853927">,</span>&nbsp;<span class="builtintype" id="4853929">error</span><span class="op" id="4853934">)</span>&nbsp;<span class="op" id="4853936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853939">v1</span>&nbsp;<span class="op" id="4853942">:=</span>&nbsp;<span class="ident" id="4853945">reflect</span><span class="op" id="4853952">.</span><span class="ident" id="4853953">ValueOf</span><span class="op" id="4853960">(</span><span class="ident" id="4853961">arg1</span><span class="op" id="4853965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853968">k1</span><span class="op" id="4853970">,</span>&nbsp;<span class="ident" id="4853972">err</span>&nbsp;<span class="op" id="4853976">:=</span>&nbsp;<span class="ident" id="4853979">basicKind</span><span class="op" id="4853988">(</span><span class="ident" id="4853989">v1</span><span class="op" id="4853991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853994">if</span>&nbsp;<span class="ident" id="4853997">err</span>&nbsp;<span class="op" id="4854001">!=</span>&nbsp;<span class="ident" id="4854004">nil</span>&nbsp;<span class="op" id="4854008">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854012">return</span>&nbsp;<span class="builtintype" id="4854019">false</span><span class="op" id="4854024">,</span>&nbsp;<span class="ident" id="4854026">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4854031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854034">v2</span>&nbsp;<span class="op" id="4854037">:=</span>&nbsp;<span class="ident" id="4854040">reflect</span><span class="op" id="4854047">.</span><span class="ident" id="4854048">ValueOf</span><span class="op" id="4854055">(</span><span class="ident" id="4854056">arg2</span><span class="op" id="4854060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854063">k2</span><span class="op" id="4854065">,</span>&nbsp;<span class="ident" id="4854067">err</span>&nbsp;<span class="op" id="4854071">:=</span>&nbsp;<span class="ident" id="4854074">basicKind</span><span class="op" id="4854083">(</span><span class="ident" id="4854084">v2</span><span class="op" id="4854086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854089">if</span>&nbsp;<span class="ident" id="4854092">err</span>&nbsp;<span class="op" id="4854096">!=</span>&nbsp;<span class="ident" id="4854099">nil</span>&nbsp;<span class="op" id="4854103">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854107">return</span>&nbsp;<span class="builtintype" id="4854114">false</span><span class="op" id="4854119">,</span>&nbsp;<span class="ident" id="4854121">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4854126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854129">truth</span>&nbsp;<span class="op" id="4854135">:=</span>&nbsp;<span class="builtintype" id="4854138">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854145">if</span>&nbsp;<span class="ident" id="4854148">k1</span>&nbsp;<span class="op" id="4854151">!=</span>&nbsp;<span class="ident" id="4854154">k2</span>&nbsp;<span class="op" id="4854157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4854161">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854234">switch</span>&nbsp;<span class="op" id="4854241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854245">case</span>&nbsp;<span class="ident" id="4854250">k1</span>&nbsp;<span class="op" id="4854253">==</span>&nbsp;<span class="ident" id="4854256">intKind</span>&nbsp;<span class="op" id="4854264">&amp;&amp;</span>&nbsp;<span class="ident" id="4854267">k2</span>&nbsp;<span class="op" id="4854270">==</span>&nbsp;<span class="ident" id="4854273">uintKind</span><span class="op" id="4854281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854286">truth</span>&nbsp;<span class="op" id="4854292">=</span>&nbsp;<span class="ident" id="4854294">v1</span><span class="op" id="4854296">.</span><span class="ident" id="4854297">Int</span><span class="op" id="4854300">(</span><span class="op" id="4854301">)</span>&nbsp;<span class="op" id="4854303">&lt;</span>&nbsp;<span class="num" id="4854305">0</span>&nbsp;<span class="op" id="4854307">||</span>&nbsp;<span class="ident" id="4854310">uint64</span><span class="op" id="4854316">(</span><span class="ident" id="4854317">v1</span><span class="op" id="4854319">.</span><span class="ident" id="4854320">Int</span><span class="op" id="4854323">(</span><span class="op" id="4854324">)</span><span class="op" id="4854325">)</span>&nbsp;<span class="op" id="4854327">&lt;</span>&nbsp;<span class="ident" id="4854329">v2</span><span class="op" id="4854331">.</span><span class="ident" id="4854332">Uint</span><span class="op" id="4854336">(</span><span class="op" id="4854337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854341">case</span>&nbsp;<span class="ident" id="4854346">k1</span>&nbsp;<span class="op" id="4854349">==</span>&nbsp;<span class="ident" id="4854352">uintKind</span>&nbsp;<span class="op" id="4854361">&amp;&amp;</span>&nbsp;<span class="ident" id="4854364">k2</span>&nbsp;<span class="op" id="4854367">==</span>&nbsp;<span class="ident" id="4854370">intKind</span><span class="op" id="4854377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854382">truth</span>&nbsp;<span class="op" id="4854388">=</span>&nbsp;<span class="ident" id="4854390">v2</span><span class="op" id="4854392">.</span><span class="ident" id="4854393">Int</span><span class="op" id="4854396">(</span><span class="op" id="4854397">)</span>&nbsp;<span class="op" id="4854399">&gt;=</span>&nbsp;<span class="num" id="4854402">0</span>&nbsp;<span class="op" id="4854404">&amp;&amp;</span>&nbsp;<span class="ident" id="4854407">v1</span><span class="op" id="4854409">.</span><span class="ident" id="4854410">Uint</span><span class="op" id="4854414">(</span><span class="op" id="4854415">)</span>&nbsp;<span class="op" id="4854417">&lt;</span>&nbsp;<span class="ident" id="4854419">uint64</span><span class="op" id="4854425">(</span><span class="ident" id="4854426">v2</span><span class="op" id="4854428">.</span><span class="ident" id="4854429">Int</span><span class="op" id="4854432">(</span><span class="op" id="4854433">)</span><span class="op" id="4854434">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854438">default</span><span class="op" id="4854445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854450">return</span>&nbsp;<span class="builtintype" id="4854457">false</span><span class="op" id="4854462">,</span>&nbsp;<span class="ident" id="4854464">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4854483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4854486">}</span>&nbsp;<span class="keyword" id="4854488">else</span>&nbsp;<span class="op" id="4854493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854497">switch</span>&nbsp;<span class="ident" id="4854504">k1</span>&nbsp;<span class="op" id="4854507">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854511">case</span>&nbsp;<span class="ident" id="4854516">boolKind</span><span class="op" id="4854524">,</span>&nbsp;<span class="ident" id="4854526">complexKind</span><span class="op" id="4854537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854542">return</span>&nbsp;<span class="builtintype" id="4854549">false</span><span class="op" id="4854554">,</span>&nbsp;<span class="ident" id="4854556">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854579">case</span>&nbsp;<span class="ident" id="4854584">floatKind</span><span class="op" id="4854593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854598">truth</span>&nbsp;<span class="op" id="4854604">=</span>&nbsp;<span class="ident" id="4854606">v1</span><span class="op" id="4854608">.</span><span class="ident" id="4854609">Float</span><span class="op" id="4854614">(</span><span class="op" id="4854615">)</span>&nbsp;<span class="op" id="4854617">&lt;</span>&nbsp;<span class="ident" id="4854619">v2</span><span class="op" id="4854621">.</span><span class="ident" id="4854622">Float</span><span class="op" id="4854627">(</span><span class="op" id="4854628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854632">case</span>&nbsp;<span class="ident" id="4854637">intKind</span><span class="op" id="4854644">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854649">truth</span>&nbsp;<span class="op" id="4854655">=</span>&nbsp;<span class="ident" id="4854657">v1</span><span class="op" id="4854659">.</span><span class="ident" id="4854660">Int</span><span class="op" id="4854663">(</span><span class="op" id="4854664">)</span>&nbsp;<span class="op" id="4854666">&lt;</span>&nbsp;<span class="ident" id="4854668">v2</span><span class="op" id="4854670">.</span><span class="ident" id="4854671">Int</span><span class="op" id="4854674">(</span><span class="op" id="4854675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854679">case</span>&nbsp;<span class="ident" id="4854684">stringKind</span><span class="op" id="4854694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854699">truth</span>&nbsp;<span class="op" id="4854705">=</span>&nbsp;<span class="ident" id="4854707">v1</span><span class="op" id="4854709">.</span><span class="ident" id="4854710">String</span><span class="op" id="4854716">(</span><span class="op" id="4854717">)</span>&nbsp;<span class="op" id="4854719">&lt;</span>&nbsp;<span class="ident" id="4854721">v2</span><span class="op" id="4854723">.</span><span class="ident" id="4854724">String</span><span class="op" id="4854730">(</span><span class="op" id="4854731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854735">case</span>&nbsp;<span class="ident" id="4854740">uintKind</span><span class="op" id="4854748">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854753">truth</span>&nbsp;<span class="op" id="4854759">=</span>&nbsp;<span class="ident" id="4854761">v1</span><span class="op" id="4854763">.</span><span class="ident" id="4854764">Uint</span><span class="op" id="4854768">(</span><span class="op" id="4854769">)</span>&nbsp;<span class="op" id="4854771">&lt;</span>&nbsp;<span class="ident" id="4854773">v2</span><span class="op" id="4854775">.</span><span class="ident" id="4854776">Uint</span><span class="op" id="4854780">(</span><span class="op" id="4854781">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854785">default</span><span class="op" id="4854792">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4854797">panic</span><span class="op" id="4854802">(</span><span class="string" id="4854803">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4854817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4854821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4854824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854827">return</span>&nbsp;<span class="ident" id="4854834">truth</span><span class="op" id="4854839">,</span>&nbsp;<span class="ident" id="4854841">nil</span><br>
<span class="lineno">400</span><span class="op" id="4854845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4854848">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4854885">func</span>&nbsp;<span class="ident" id="4854890">le</span><span class="op" id="4854892">(</span><span class="ident" id="4854893">arg1</span><span class="op" id="4854897">,</span>&nbsp;<span class="ident" id="4854899">arg2</span>&nbsp;<span class="keyword" id="4854904">interface</span><span class="op" id="4854913">{</span><span class="op" id="4854914">}</span><span class="op" id="4854915">)</span>&nbsp;<span class="op" id="4854917">(</span><span class="builtintype" id="4854918">bool</span><span class="op" id="4854922">,</span>&nbsp;<span class="builtintype" id="4854924">error</span><span class="op" id="4854929">)</span>&nbsp;<span class="op" id="4854931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4854934">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4854953">lessThan</span><span class="op" id="4854961">,</span>&nbsp;<span class="ident" id="4854963">err</span>&nbsp;<span class="op" id="4854967">:=</span>&nbsp;<span class="ident" id="4854970">lt</span><span class="op" id="4854972">(</span><span class="ident" id="4854973">arg1</span><span class="op" id="4854977">,</span>&nbsp;<span class="ident" id="4854979">arg2</span><span class="op" id="4854983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4854986">if</span>&nbsp;<span class="ident" id="4854989">lessThan</span>&nbsp;<span class="op" id="4854998">||</span>&nbsp;<span class="ident" id="4855001">err</span>&nbsp;<span class="op" id="4855005">!=</span>&nbsp;<span class="ident" id="4855008">nil</span>&nbsp;<span class="op" id="4855012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855016">return</span>&nbsp;<span class="ident" id="4855023">lessThan</span><span class="op" id="4855031">,</span>&nbsp;<span class="ident" id="4855033">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4855038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855041">return</span>&nbsp;<span class="ident" id="4855048">eq</span><span class="op" id="4855050">(</span><span class="ident" id="4855051">arg1</span><span class="op" id="4855055">,</span>&nbsp;<span class="ident" id="4855057">arg2</span><span class="op" id="4855061">)</span><br>
<span class="lineno">410</span><span class="op" id="4855063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4855066">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4855104">func</span>&nbsp;<span class="ident" id="4855109">gt</span><span class="op" id="4855111">(</span><span class="ident" id="4855112">arg1</span><span class="op" id="4855116">,</span>&nbsp;<span class="ident" id="4855118">arg2</span>&nbsp;<span class="keyword" id="4855123">interface</span><span class="op" id="4855132">{</span><span class="op" id="4855133">}</span><span class="op" id="4855134">)</span>&nbsp;<span class="op" id="4855136">(</span><span class="builtintype" id="4855137">bool</span><span class="op" id="4855141">,</span>&nbsp;<span class="builtintype" id="4855143">error</span><span class="op" id="4855148">)</span>&nbsp;<span class="op" id="4855150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4855153">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855181">lessOrEqual</span><span class="op" id="4855192">,</span>&nbsp;<span class="ident" id="4855194">err</span>&nbsp;<span class="op" id="4855198">:=</span>&nbsp;<span class="ident" id="4855201">le</span><span class="op" id="4855203">(</span><span class="ident" id="4855204">arg1</span><span class="op" id="4855208">,</span>&nbsp;<span class="ident" id="4855210">arg2</span><span class="op" id="4855214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855217">if</span>&nbsp;<span class="ident" id="4855220">err</span>&nbsp;<span class="op" id="4855224">!=</span>&nbsp;<span class="ident" id="4855227">nil</span>&nbsp;<span class="op" id="4855231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855235">return</span>&nbsp;<span class="builtintype" id="4855242">false</span><span class="op" id="4855247">,</span>&nbsp;<span class="ident" id="4855249">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4855254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855257">return</span>&nbsp;<span class="op" id="4855264">!</span><span class="ident" id="4855265">lessOrEqual</span><span class="op" id="4855276">,</span>&nbsp;<span class="ident" id="4855278">nil</span><br>
<span class="lineno">420</span><span class="op" id="4855282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4855285">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4855324">func</span>&nbsp;<span class="ident" id="4855329">ge</span><span class="op" id="4855331">(</span><span class="ident" id="4855332">arg1</span><span class="op" id="4855336">,</span>&nbsp;<span class="ident" id="4855338">arg2</span>&nbsp;<span class="keyword" id="4855343">interface</span><span class="op" id="4855352">{</span><span class="op" id="4855353">}</span><span class="op" id="4855354">)</span>&nbsp;<span class="op" id="4855356">(</span><span class="builtintype" id="4855357">bool</span><span class="op" id="4855361">,</span>&nbsp;<span class="builtintype" id="4855363">error</span><span class="op" id="4855368">)</span>&nbsp;<span class="op" id="4855370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4855373">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855401">lessThan</span><span class="op" id="4855409">,</span>&nbsp;<span class="ident" id="4855411">err</span>&nbsp;<span class="op" id="4855415">:=</span>&nbsp;<span class="ident" id="4855418">lt</span><span class="op" id="4855420">(</span><span class="ident" id="4855421">arg1</span><span class="op" id="4855425">,</span>&nbsp;<span class="ident" id="4855427">arg2</span><span class="op" id="4855431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855434">if</span>&nbsp;<span class="ident" id="4855437">err</span>&nbsp;<span class="op" id="4855441">!=</span>&nbsp;<span class="ident" id="4855444">nil</span>&nbsp;<span class="op" id="4855448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855452">return</span>&nbsp;<span class="builtintype" id="4855459">false</span><span class="op" id="4855464">,</span>&nbsp;<span class="ident" id="4855466">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4855471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855474">return</span>&nbsp;<span class="op" id="4855481">!</span><span class="ident" id="4855482">lessThan</span><span class="op" id="4855490">,</span>&nbsp;<span class="ident" id="4855492">nil</span><br>
<span class="lineno">430</span><span class="op" id="4855496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4855499">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4855518">var</span>&nbsp;<span class="op" id="4855522">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855525">htmlQuot</span>&nbsp;<span class="op" id="4855534">=</span>&nbsp;<span class="op" id="4855536">[</span><span class="op" id="4855537">]</span><span class="builtintype" id="4855538">byte</span><span class="op" id="4855542">(</span><span class="string" id="4855543">&#34;&amp;#34;&#34;</span><span class="op" id="4855550">)</span>&nbsp;<span class="comment" id="4855552">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855578">htmlApos</span>&nbsp;<span class="op" id="4855587">=</span>&nbsp;<span class="op" id="4855589">[</span><span class="op" id="4855590">]</span><span class="builtintype" id="4855591">byte</span><span class="op" id="4855595">(</span><span class="string" id="4855596">&#34;&amp;#39;&#34;</span><span class="op" id="4855603">)</span>&nbsp;<span class="comment" id="4855605">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855668">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="4855677">=</span>&nbsp;<span class="op" id="4855679">[</span><span class="op" id="4855680">]</span><span class="builtintype" id="4855681">byte</span><span class="op" id="4855685">(</span><span class="string" id="4855686">&#34;&amp;amp;&#34;</span><span class="op" id="4855693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855696">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4855705">=</span>&nbsp;<span class="op" id="4855707">[</span><span class="op" id="4855708">]</span><span class="builtintype" id="4855709">byte</span><span class="op" id="4855713">(</span><span class="string" id="4855714">&#34;&amp;lt;&#34;</span><span class="op" id="4855720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855723">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4855732">=</span>&nbsp;<span class="op" id="4855734">[</span><span class="op" id="4855735">]</span><span class="builtintype" id="4855736">byte</span><span class="op" id="4855740">(</span><span class="string" id="4855741">&#34;&amp;gt;&#34;</span><span class="op" id="4855747">)</span><br>
<span class="lineno">440</span><span class="op" id="4855749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4855752">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4855832">func</span>&nbsp;<span class="ident" id="4855837">HTMLEscape</span><span class="op" id="4855847">(</span><span class="ident" id="4855848">w</span>&nbsp;<span class="ident" id="4855850">io</span><span class="op" id="4855852">.</span><span class="ident" id="4855853">Writer</span><span class="op" id="4855859">,</span>&nbsp;<span class="ident" id="4855861">b</span>&nbsp;<span class="op" id="4855863">[</span><span class="op" id="4855864">]</span><span class="builtintype" id="4855865">byte</span><span class="op" id="4855869">)</span>&nbsp;<span class="op" id="4855871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855874">last</span>&nbsp;<span class="op" id="4855879">:=</span>&nbsp;<span class="num" id="4855882">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855885">for</span>&nbsp;<span class="ident" id="4855889">i</span><span class="op" id="4855890">,</span>&nbsp;<span class="ident" id="4855892">c</span>&nbsp;<span class="op" id="4855894">:=</span>&nbsp;<span class="keyword" id="4855897">range</span>&nbsp;<span class="ident" id="4855903">b</span>&nbsp;<span class="op" id="4855905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855909">var</span>&nbsp;<span class="ident" id="4855913">html</span>&nbsp;<span class="op" id="4855918">[</span><span class="op" id="4855919">]</span><span class="builtintype" id="4855920">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855927">switch</span>&nbsp;<span class="ident" id="4855934">c</span>&nbsp;<span class="op" id="4855936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855940">case</span>&nbsp;<span class="string" id="4855945">&#39;&#34;&#39;</span><span class="op" id="4855948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855953">html</span>&nbsp;<span class="op" id="4855958">=</span>&nbsp;<span class="ident" id="4855960">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4855971">case</span>&nbsp;<span class="string" id="4855976">&#39;\&#39;&#39;</span><span class="op" id="4855980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4855985">html</span>&nbsp;<span class="op" id="4855990">=</span>&nbsp;<span class="ident" id="4855992">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856003">case</span>&nbsp;<span class="string" id="4856008">&#39;&amp;&#39;</span><span class="op" id="4856011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856016">html</span>&nbsp;<span class="op" id="4856021">=</span>&nbsp;<span class="ident" id="4856023">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856033">case</span>&nbsp;<span class="string" id="4856038">&#39;&lt;&#39;</span><span class="op" id="4856041">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856046">html</span>&nbsp;<span class="op" id="4856051">=</span>&nbsp;<span class="ident" id="4856053">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856062">case</span>&nbsp;<span class="string" id="4856067">&#39;&gt;&#39;</span><span class="op" id="4856070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856075">html</span>&nbsp;<span class="op" id="4856080">=</span>&nbsp;<span class="ident" id="4856082">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856091">default</span><span class="op" id="4856098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856103">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4856114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856118">w</span><span class="op" id="4856119">.</span><span class="ident" id="4856120">Write</span><span class="op" id="4856125">(</span><span class="ident" id="4856126">b</span><span class="op" id="4856127">[</span><span class="ident" id="4856128">last</span><span class="op" id="4856132">:</span><span class="ident" id="4856133">i</span><span class="op" id="4856134">]</span><span class="op" id="4856135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856139">w</span><span class="op" id="4856140">.</span><span class="ident" id="4856141">Write</span><span class="op" id="4856146">(</span><span class="ident" id="4856147">html</span><span class="op" id="4856151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856155">last</span>&nbsp;<span class="op" id="4856160">=</span>&nbsp;<span class="ident" id="4856162">i</span>&nbsp;<span class="op" id="4856164">+</span>&nbsp;<span class="num" id="4856166">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4856169">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856172">w</span><span class="op" id="4856173">.</span><span class="ident" id="4856174">Write</span><span class="op" id="4856179">(</span><span class="ident" id="4856180">b</span><span class="op" id="4856181">[</span><span class="ident" id="4856182">last</span><span class="op" id="4856186">:</span><span class="op" id="4856187">]</span><span class="op" id="4856188">)</span><br>
<span class="lineno"></span><span class="op" id="4856190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4856193">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4856275">func</span>&nbsp;<span class="ident" id="4856280">HTMLEscapeString</span><span class="op" id="4856296">(</span><span class="ident" id="4856297">s</span>&nbsp;<span class="builtintype" id="4856299">string</span><span class="op" id="4856305">)</span>&nbsp;<span class="builtintype" id="4856307">string</span>&nbsp;<span class="op" id="4856314">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4856317">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856349">if</span>&nbsp;<span class="ident" id="4856352">strings</span><span class="op" id="4856359">.</span><span class="ident" id="4856360">IndexAny</span><span class="op" id="4856368">(</span><span class="ident" id="4856369">s</span><span class="op" id="4856370">,</span>&nbsp;<span class="string" id="4856372">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="4856379">)</span>&nbsp;<span class="op" id="4856381">&lt;</span>&nbsp;<span class="num" id="4856383">0</span>&nbsp;<span class="op" id="4856385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856389">return</span>&nbsp;<span class="ident" id="4856396">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4856399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856402">var</span>&nbsp;<span class="ident" id="4856406">b</span>&nbsp;<span class="ident" id="4856408">bytes</span><span class="op" id="4856413">.</span><span class="ident" id="4856414">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856422">HTMLEscape</span><span class="op" id="4856432">(</span><span class="op" id="4856433">&amp;</span><span class="ident" id="4856434">b</span><span class="op" id="4856435">,</span>&nbsp;<span class="op" id="4856437">[</span><span class="op" id="4856438">]</span><span class="builtintype" id="4856439">byte</span><span class="op" id="4856443">(</span><span class="ident" id="4856444">s</span><span class="op" id="4856445">)</span><span class="op" id="4856446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856449">return</span>&nbsp;<span class="ident" id="4856456">b</span><span class="op" id="4856457">.</span><span class="ident" id="4856458">String</span><span class="op" id="4856464">(</span><span class="op" id="4856465">)</span><br>
<span class="lineno"></span><span class="op" id="4856467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4856470">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="4856536">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4856572">func</span>&nbsp;<span class="ident" id="4856577">HTMLEscaper</span><span class="op" id="4856588">(</span><span class="ident" id="4856589">args</span>&nbsp;<span class="op" id="4856594">...</span><span class="keyword" id="4856597">interface</span><span class="op" id="4856606">{</span><span class="op" id="4856607">}</span><span class="op" id="4856608">)</span>&nbsp;<span class="builtintype" id="4856610">string</span>&nbsp;<span class="op" id="4856617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4856620">return</span>&nbsp;<span class="ident" id="4856627">HTMLEscapeString</span><span class="op" id="4856643">(</span><span class="ident" id="4856644">evalArgs</span><span class="op" id="4856652">(</span><span class="ident" id="4856653">args</span><span class="op" id="4856657">)</span><span class="op" id="4856658">)</span><br>
<span class="lineno"></span><span class="op" id="4856660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="4856663">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4856688">var</span>&nbsp;<span class="op" id="4856692">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856695">jsLowUni</span>&nbsp;<span class="op" id="4856704">=</span>&nbsp;<span class="op" id="4856706">[</span><span class="op" id="4856707">]</span><span class="builtintype" id="4856708">byte</span><span class="op" id="4856712">(</span><span class="string" id="4856713">`\u00`</span><span class="op" id="4856719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856722">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4856731">=</span>&nbsp;<span class="op" id="4856733">[</span><span class="op" id="4856734">]</span><span class="builtintype" id="4856735">byte</span><span class="op" id="4856739">(</span><span class="string" id="4856740">&#34;0123456789ABCDEF&#34;</span><span class="op" id="4856758">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856762">jsBackslash</span>&nbsp;<span class="op" id="4856774">=</span>&nbsp;<span class="op" id="4856776">[</span><span class="op" id="4856777">]</span><span class="builtintype" id="4856778">byte</span><span class="op" id="4856782">(</span><span class="string" id="4856783">`\\`</span><span class="op" id="4856787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856790">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4856802">=</span>&nbsp;<span class="op" id="4856804">[</span><span class="op" id="4856805">]</span><span class="builtintype" id="4856806">byte</span><span class="op" id="4856810">(</span><span class="string" id="4856811">`\&#39;`</span><span class="op" id="4856815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856818">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4856830">=</span>&nbsp;<span class="op" id="4856832">[</span><span class="op" id="4856833">]</span><span class="builtintype" id="4856834">byte</span><span class="op" id="4856838">(</span><span class="string" id="4856839">`\&#34;`</span><span class="op" id="4856843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856846">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4856858">=</span>&nbsp;<span class="op" id="4856860">[</span><span class="op" id="4856861">]</span><span class="builtintype" id="4856862">byte</span><span class="op" id="4856866">(</span><span class="string" id="4856867">`\x3C`</span><span class="op" id="4856873">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4856876">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4856888">=</span>&nbsp;<span class="op" id="4856890">[</span><span class="op" id="4856891">]</span><span class="builtintype" id="4856892">byte</span><span class="op" id="4856896">(</span><span class="string" id="4856897">`\x3E`</span><span class="op" id="4856903">)</span><br>
<span class="lineno"></span><span class="op" id="4856905">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4856908">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4856992">func</span>&nbsp;<span class="ident" id="4856997">JSEscape</span><span class="op" id="4857005">(</span><span class="ident" id="4857006">w</span>&nbsp;<span class="ident" id="4857008">io</span><span class="op" id="4857010">.</span><span class="ident" id="4857011">Writer</span><span class="op" id="4857017">,</span>&nbsp;<span class="ident" id="4857019">b</span>&nbsp;<span class="op" id="4857021">[</span><span class="op" id="4857022">]</span><span class="builtintype" id="4857023">byte</span><span class="op" id="4857027">)</span>&nbsp;<span class="op" id="4857029">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857032">last</span>&nbsp;<span class="op" id="4857037">:=</span>&nbsp;<span class="num" id="4857040">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857043">for</span>&nbsp;<span class="ident" id="4857047">i</span>&nbsp;<span class="op" id="4857049">:=</span>&nbsp;<span class="num" id="4857052">0</span><span class="op" id="4857053">;</span>&nbsp;<span class="ident" id="4857055">i</span>&nbsp;<span class="op" id="4857057">&lt;</span>&nbsp;<span class="builtinfunc" id="4857059">len</span><span class="op" id="4857062">(</span><span class="ident" id="4857063">b</span><span class="op" id="4857064">)</span><span class="op" id="4857065">;</span>&nbsp;<span class="ident" id="4857067">i</span><span class="op" id="4857068">++</span>&nbsp;<span class="op" id="4857071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857075">c</span>&nbsp;<span class="op" id="4857077">:=</span>&nbsp;<span class="ident" id="4857080">b</span><span class="op" id="4857081">[</span><span class="ident" id="4857082">i</span><span class="op" id="4857083">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857088">if</span>&nbsp;<span class="op" id="4857091">!</span><span class="ident" id="4857092">jsIsSpecial</span><span class="op" id="4857103">(</span><span class="builtintype" id="4857104">rune</span><span class="op" id="4857108">(</span><span class="ident" id="4857109">c</span><span class="op" id="4857110">)</span><span class="op" id="4857111">)</span>&nbsp;<span class="op" id="4857113">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4857118">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857149">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857164">w</span><span class="op" id="4857165">.</span><span class="ident" id="4857166">Write</span><span class="op" id="4857171">(</span><span class="ident" id="4857172">b</span><span class="op" id="4857173">[</span><span class="ident" id="4857174">last</span><span class="op" id="4857178">:</span><span class="ident" id="4857179">i</span><span class="op" id="4857180">]</span><span class="op" id="4857181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857186">if</span>&nbsp;<span class="ident" id="4857189">c</span>&nbsp;<span class="op" id="4857191">&lt;</span>&nbsp;<span class="ident" id="4857193">utf8</span><span class="op" id="4857197">.</span><span class="ident" id="4857198">RuneSelf</span>&nbsp;<span class="op" id="4857207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4857212">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4857265">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857313">switch</span>&nbsp;<span class="ident" id="4857320">c</span>&nbsp;<span class="op" id="4857322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857327">case</span>&nbsp;<span class="string" id="4857332">&#39;\\&#39;</span><span class="op" id="4857336">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857342">w</span><span class="op" id="4857343">.</span><span class="ident" id="4857344">Write</span><span class="op" id="4857349">(</span><span class="ident" id="4857350">jsBackslash</span><span class="op" id="4857361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857366">case</span>&nbsp;<span class="string" id="4857371">&#39;\&#39;&#39;</span><span class="op" id="4857375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857381">w</span><span class="op" id="4857382">.</span><span class="ident" id="4857383">Write</span><span class="op" id="4857388">(</span><span class="ident" id="4857389">jsApos</span><span class="op" id="4857395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857400">case</span>&nbsp;<span class="string" id="4857405">&#39;&#34;&#39;</span><span class="op" id="4857408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857414">w</span><span class="op" id="4857415">.</span><span class="ident" id="4857416">Write</span><span class="op" id="4857421">(</span><span class="ident" id="4857422">jsQuot</span><span class="op" id="4857428">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857433">case</span>&nbsp;<span class="string" id="4857438">&#39;&lt;&#39;</span><span class="op" id="4857441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857447">w</span><span class="op" id="4857448">.</span><span class="ident" id="4857449">Write</span><span class="op" id="4857454">(</span><span class="ident" id="4857455">jsLt</span><span class="op" id="4857459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857464">case</span>&nbsp;<span class="string" id="4857469">&#39;&gt;&#39;</span><span class="op" id="4857472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857478">w</span><span class="op" id="4857479">.</span><span class="ident" id="4857480">Write</span><span class="op" id="4857485">(</span><span class="ident" id="4857486">jsGt</span><span class="op" id="4857490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857495">default</span><span class="op" id="4857502">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857508">w</span><span class="op" id="4857509">.</span><span class="ident" id="4857510">Write</span><span class="op" id="4857515">(</span><span class="ident" id="4857516">jsLowUni</span><span class="op" id="4857524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857530">t</span><span class="op" id="4857531">,</span>&nbsp;<span class="ident" id="4857533">b</span>&nbsp;<span class="op" id="4857535">:=</span>&nbsp;<span class="ident" id="4857538">c</span><span class="op" id="4857539">&gt;&gt;</span><span class="num" id="4857541">4</span><span class="op" id="4857542">,</span>&nbsp;<span class="ident" id="4857544">c</span><span class="op" id="4857545">&amp;</span><span class="num" id="4857546">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857555">w</span><span class="op" id="4857556">.</span><span class="ident" id="4857557">Write</span><span class="op" id="4857562">(</span><span class="ident" id="4857563">hex</span><span class="op" id="4857566">[</span><span class="ident" id="4857567">t</span>&nbsp;<span class="op" id="4857569">:</span>&nbsp;<span class="ident" id="4857571">t</span><span class="op" id="4857572">+</span><span class="num" id="4857573">1</span><span class="op" id="4857574">]</span><span class="op" id="4857575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857581">w</span><span class="op" id="4857582">.</span><span class="ident" id="4857583">Write</span><span class="op" id="4857588">(</span><span class="ident" id="4857589">hex</span><span class="op" id="4857592">[</span><span class="ident" id="4857593">b</span>&nbsp;<span class="op" id="4857595">:</span>&nbsp;<span class="ident" id="4857597">b</span><span class="op" id="4857598">+</span><span class="num" id="4857599">1</span><span class="op" id="4857600">]</span><span class="op" id="4857601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857606">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857610">}</span>&nbsp;<span class="keyword" id="4857612">else</span>&nbsp;<span class="op" id="4857617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4857622">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857642">r</span><span class="op" id="4857643">,</span>&nbsp;<span class="ident" id="4857645">size</span>&nbsp;<span class="op" id="4857650">:=</span>&nbsp;<span class="ident" id="4857653">utf8</span><span class="op" id="4857657">.</span><span class="ident" id="4857658">DecodeRune</span><span class="op" id="4857668">(</span><span class="ident" id="4857669">b</span><span class="op" id="4857670">[</span><span class="ident" id="4857671">i</span><span class="op" id="4857672">:</span><span class="op" id="4857673">]</span><span class="op" id="4857674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857679">if</span>&nbsp;<span class="ident" id="4857682">unicode</span><span class="op" id="4857689">.</span><span class="ident" id="4857690">IsPrint</span><span class="op" id="4857697">(</span><span class="ident" id="4857698">r</span><span class="op" id="4857699">)</span>&nbsp;<span class="op" id="4857701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857707">w</span><span class="op" id="4857708">.</span><span class="ident" id="4857709">Write</span><span class="op" id="4857714">(</span><span class="ident" id="4857715">b</span><span class="op" id="4857716">[</span><span class="ident" id="4857717">i</span>&nbsp;<span class="op" id="4857719">:</span>&nbsp;<span class="ident" id="4857721">i</span><span class="op" id="4857722">+</span><span class="ident" id="4857723">size</span><span class="op" id="4857727">]</span><span class="op" id="4857728">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857733">}</span>&nbsp;<span class="keyword" id="4857735">else</span>&nbsp;<span class="op" id="4857740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857746">fmt</span><span class="op" id="4857749">.</span><span class="ident" id="4857750">Fprintf</span><span class="op" id="4857757">(</span><span class="ident" id="4857758">w</span><span class="op" id="4857759">,</span>&nbsp;<span class="string" id="4857761">&#34;\\u%04X&#34;</span><span class="op" id="4857770">,</span>&nbsp;<span class="ident" id="4857772">r</span><span class="op" id="4857773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857783">i</span>&nbsp;<span class="op" id="4857785">+=</span>&nbsp;<span class="ident" id="4857788">size</span>&nbsp;<span class="op" id="4857793">-</span>&nbsp;<span class="num" id="4857795">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857799">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857803">last</span>&nbsp;<span class="op" id="4857808">=</span>&nbsp;<span class="ident" id="4857810">i</span>&nbsp;<span class="op" id="4857812">+</span>&nbsp;<span class="num" id="4857814">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4857817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4857820">w</span><span class="op" id="4857821">.</span><span class="ident" id="4857822">Write</span><span class="op" id="4857827">(</span><span class="ident" id="4857828">b</span><span class="op" id="4857829">[</span><span class="ident" id="4857830">last</span><span class="op" id="4857834">:</span><span class="op" id="4857835">]</span><span class="op" id="4857836">)</span><br>
<span class="lineno"></span><span class="op" id="4857838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="4857841">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4857927">func</span>&nbsp;<span class="ident" id="4857932">JSEscapeString</span><span class="op" id="4857946">(</span><span class="ident" id="4857947">s</span>&nbsp;<span class="builtintype" id="4857949">string</span><span class="op" id="4857955">)</span>&nbsp;<span class="builtintype" id="4857957">string</span>&nbsp;<span class="op" id="4857964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4857967">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4857999">if</span>&nbsp;<span class="ident" id="4858002">strings</span><span class="op" id="4858009">.</span><span class="ident" id="4858010">IndexFunc</span><span class="op" id="4858019">(</span><span class="ident" id="4858020">s</span><span class="op" id="4858021">,</span>&nbsp;<span class="ident" id="4858023">jsIsSpecial</span><span class="op" id="4858034">)</span>&nbsp;<span class="op" id="4858036">&lt;</span>&nbsp;<span class="num" id="4858038">0</span>&nbsp;<span class="op" id="4858040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858044">return</span>&nbsp;<span class="ident" id="4858051">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4858054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858057">var</span>&nbsp;<span class="ident" id="4858061">b</span>&nbsp;<span class="ident" id="4858063">bytes</span><span class="op" id="4858068">.</span><span class="ident" id="4858069">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4858077">JSEscape</span><span class="op" id="4858085">(</span><span class="op" id="4858086">&amp;</span><span class="ident" id="4858087">b</span><span class="op" id="4858088">,</span>&nbsp;<span class="op" id="4858090">[</span><span class="op" id="4858091">]</span><span class="builtintype" id="4858092">byte</span><span class="op" id="4858096">(</span><span class="ident" id="4858097">s</span><span class="op" id="4858098">)</span><span class="op" id="4858099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858102">return</span>&nbsp;<span class="ident" id="4858109">b</span><span class="op" id="4858110">.</span><span class="ident" id="4858111">String</span><span class="op" id="4858117">(</span><span class="op" id="4858118">)</span><br>
<span class="lineno"></span><span class="op" id="4858120">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="4858123">func</span>&nbsp;<span class="ident" id="4858128">jsIsSpecial</span><span class="op" id="4858139">(</span><span class="ident" id="4858140">r</span>&nbsp;<span class="builtintype" id="4858142">rune</span><span class="op" id="4858146">)</span>&nbsp;<span class="builtintype" id="4858148">bool</span>&nbsp;<span class="op" id="4858153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858156">switch</span>&nbsp;<span class="ident" id="4858163">r</span>&nbsp;<span class="op" id="4858165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858168">case</span>&nbsp;<span class="string" id="4858173">&#39;\\&#39;</span><span class="op" id="4858177">,</span>&nbsp;<span class="string" id="4858179">&#39;\&#39;&#39;</span><span class="op" id="4858183">,</span>&nbsp;<span class="string" id="4858185">&#39;&#34;&#39;</span><span class="op" id="4858188">,</span>&nbsp;<span class="string" id="4858190">&#39;&lt;&#39;</span><span class="op" id="4858193">,</span>&nbsp;<span class="string" id="4858195">&#39;&gt;&#39;</span><span class="op" id="4858198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858202">return</span>&nbsp;<span class="builtintype" id="4858209">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4858215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858218">return</span>&nbsp;<span class="ident" id="4858225">r</span>&nbsp;<span class="op" id="4858227">&lt;</span>&nbsp;<span class="string" id="4858229">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4858233">||</span>&nbsp;<span class="ident" id="4858236">utf8</span><span class="op" id="4858240">.</span><span class="ident" id="4858241">RuneSelf</span>&nbsp;<span class="op" id="4858250">&lt;=</span>&nbsp;<span class="ident" id="4858253">r</span><br>
<span class="lineno"></span><span class="op" id="4858255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4858258">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="4858328">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4858364">func</span>&nbsp;<span class="ident" id="4858369">JSEscaper</span><span class="op" id="4858378">(</span><span class="ident" id="4858379">args</span>&nbsp;<span class="op" id="4858384">...</span><span class="keyword" id="4858387">interface</span><span class="op" id="4858396">{</span><span class="op" id="4858397">}</span><span class="op" id="4858398">)</span>&nbsp;<span class="builtintype" id="4858400">string</span>&nbsp;<span class="op" id="4858407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858410">return</span>&nbsp;<span class="ident" id="4858417">JSEscapeString</span><span class="op" id="4858431">(</span><span class="ident" id="4858432">evalArgs</span><span class="op" id="4858440">(</span><span class="ident" id="4858441">args</span><span class="op" id="4858445">)</span><span class="op" id="4858446">)</span><br>
<span class="lineno"></span><span class="op" id="4858448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="4858451">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4858529">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="4858595">func</span>&nbsp;<span class="ident" id="4858600">URLQueryEscaper</span><span class="op" id="4858615">(</span><span class="ident" id="4858616">args</span>&nbsp;<span class="op" id="4858621">...</span><span class="keyword" id="4858624">interface</span><span class="op" id="4858633">{</span><span class="op" id="4858634">}</span><span class="op" id="4858635">)</span>&nbsp;<span class="builtintype" id="4858637">string</span>&nbsp;<span class="op" id="4858644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4858647">return</span>&nbsp;<span class="ident" id="4858654">url</span><span class="op" id="4858657">.</span><span class="ident" id="4858658">QueryEscape</span><span class="op" id="4858669">(</span><span class="ident" id="4858670">evalArgs</span><span class="op" id="4858678">(</span><span class="ident" id="4858679">args</span><span class="op" id="4858683">)</span><span class="op" id="4858684">)</span><br>
<span class="lineno"></span><span class="op" id="4858686">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="4858689">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4858776">//&nbsp;&nbsp;&nbsp;&nbspfmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="4858799">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="4858871">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="4858944">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="4858958">func</span>&nbsp;<span class="ident" id="4858963">evalArgs</span><span class="op" id="4858971">(</span><span class="ident" id="4858972">args</span>&nbsp;<span class="op" id="4858977">[</span><span class="op" id="4858978">]</span><span class="keyword" id="4858979">interface</span><span class="op" id="4858988">{</span><span class="op" id="4858989">}</span><span class="op" id="4858990">)</span>&nbsp;<span class="builtintype" id="4858992">string</span>&nbsp;<span class="op" id="4858999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4859002">ok</span>&nbsp;<span class="op" id="4859005">:=</span>&nbsp;<span class="builtintype" id="4859008">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4859015">var</span>&nbsp;<span class="ident" id="4859019">s</span>&nbsp;<span class="builtintype" id="4859021">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4859029">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4859067">if</span>&nbsp;<span class="builtinfunc" id="4859070">len</span><span class="op" id="4859073">(</span><span class="ident" id="4859074">args</span><span class="op" id="4859078">)</span>&nbsp;<span class="op" id="4859080">==</span>&nbsp;<span class="num" id="4859083">1</span>&nbsp;<span class="op" id="4859085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4859089">s</span><span class="op" id="4859090">,</span>&nbsp;<span class="ident" id="4859092">ok</span>&nbsp;<span class="op" id="4859095">=</span>&nbsp;<span class="ident" id="4859097">args</span><span class="op" id="4859101">[</span><span class="num" id="4859102">0</span><span class="op" id="4859103">]</span><span class="op" id="4859104">.</span><span class="op" id="4859105">(</span><span class="builtintype" id="4859106">string</span><span class="op" id="4859112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4859115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4859118">if</span>&nbsp;<span class="op" id="4859121">!</span><span class="ident" id="4859122">ok</span>&nbsp;<span class="op" id="4859125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4859129">for</span>&nbsp;<span class="ident" id="4859133">i</span><span class="op" id="4859134">,</span>&nbsp;<span class="ident" id="4859136">arg</span>&nbsp;<span class="op" id="4859140">:=</span>&nbsp;<span class="keyword" id="4859143">range</span>&nbsp;<span class="ident" id="4859149">args</span>&nbsp;<span class="op" id="4859154">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4859159">a</span><span class="op" id="4859160">,</span>&nbsp;<span class="ident" id="4859162">ok</span>&nbsp;<span class="op" id="4859165">:=</span>&nbsp;<span class="ident" id="4859168">printableValue</span><span class="op" id="4859182">(</span><span class="ident" id="4859183">reflect</span><span class="op" id="4859190">.</span><span class="ident" id="4859191">ValueOf</span><span class="op" id="4859198">(</span><span class="ident" id="4859199">arg</span><span class="op" id="4859202">)</span><span class="op" id="4859203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4859208">if</span>&nbsp;<span class="ident" id="4859211">ok</span>&nbsp;<span class="op" id="4859214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4859220">args</span><span class="op" id="4859224">[</span><span class="ident" id="4859225">i</span><span class="op" id="4859226">]</span>&nbsp;<span class="op" id="4859228">=</span>&nbsp;<span class="ident" id="4859230">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4859235">}</span>&nbsp;<span class="comment" id="4859237">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4859269">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4859273">s</span>&nbsp;<span class="op" id="4859275">=</span>&nbsp;<span class="ident" id="4859277">fmt</span><span class="op" id="4859280">.</span><span class="ident" id="4859281">Sprint</span><span class="op" id="4859287">(</span><span class="ident" id="4859288">args</span><span class="op" id="4859292">...</span><span class="op" id="4859295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4859298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4859301">return</span>&nbsp;<span class="ident" id="4859308">s</span><br>
<span class="lineno"></span><span class="op" id="4859310">}</span>
</div>
</body>
</html>
