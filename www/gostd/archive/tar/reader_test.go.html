<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8374772">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8374827">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8374881">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8374932">package</span>&nbsp;<span class="ident" id="8374940">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8374945">import</span>&nbsp;<span class="op" id="8374952">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8374955">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8374964">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8374978">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8374985">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8374991">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375004">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375010">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375021">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375032">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375043">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8375050">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="8375053">type</span>&nbsp;<span class="ident" id="8375058">untarTest</span>&nbsp;<span class="keyword" id="8375068">struct</span>&nbsp;<span class="op" id="8375075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375078">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8375086">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375094">headers</span>&nbsp;<span class="op" id="8375102">[</span><span class="op" id="8375103">]</span><span class="op" id="8375104">*</span><span class="ident" id="8375105">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375113">cksums</span>&nbsp;&nbsp;<span class="op" id="8375121">[</span><span class="op" id="8375122">]</span><span class="builtintype" id="8375123">string</span><br>
<span class="lineno"></span><span class="op" id="8375130">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8375133">var</span>&nbsp;<span class="ident" id="8375137">gnuTarTest</span>&nbsp;<span class="op" id="8375148">=</span>&nbsp;<span class="op" id="8375150">&amp;</span><span class="ident" id="8375151">untarTest</span><span class="op" id="8375160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375163">file</span><span class="op" id="8375167">:</span>&nbsp;<span class="string" id="8375169">&#34;testdata/gnu.tar&#34;</span><span class="op" id="8375187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375190">headers</span><span class="op" id="8375197">:</span>&nbsp;<span class="op" id="8375199">[</span><span class="op" id="8375200">]</span><span class="op" id="8375201">*</span><span class="ident" id="8375202">Header</span><span class="op" id="8375208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375212">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375217">Name</span><span class="op" id="8375221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375227">&#34;small.txt&#34;</span><span class="op" id="8375238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375243">Mode</span><span class="op" id="8375247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375253">0640</span><span class="op" id="8375257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375262">Uid</span><span class="op" id="8375265">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375272">73025</span><span class="op" id="8375277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375282">Gid</span><span class="op" id="8375285">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375292">5000</span><span class="op" id="8375296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375301">Size</span><span class="op" id="8375305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375311">5</span><span class="op" id="8375312">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375317">ModTime</span><span class="op" id="8375324">:</span>&nbsp;&nbsp;<span class="ident" id="8375327">time</span><span class="op" id="8375331">.</span><span class="ident" id="8375332">Unix</span><span class="op" id="8375336">(</span><span class="num" id="8375337">1244428340</span><span class="op" id="8375347">,</span>&nbsp;<span class="num" id="8375349">0</span><span class="op" id="8375350">)</span><span class="op" id="8375351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375356">Typeflag</span><span class="op" id="8375364">:</span>&nbsp;<span class="string" id="8375366">&#39;0&#39;</span><span class="op" id="8375369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375374">Uname</span><span class="op" id="8375379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375384">&#34;dsymonds&#34;</span><span class="op" id="8375394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375399">Gname</span><span class="op" id="8375404">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375409">&#34;eng&#34;</span><span class="op" id="8375414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375418">}</span><span class="op" id="8375419">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375428">Name</span><span class="op" id="8375432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375438">&#34;small2.txt&#34;</span><span class="op" id="8375450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375455">Mode</span><span class="op" id="8375459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375465">0640</span><span class="op" id="8375469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375474">Uid</span><span class="op" id="8375477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375484">73025</span><span class="op" id="8375489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375494">Gid</span><span class="op" id="8375497">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375504">5000</span><span class="op" id="8375508">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375513">Size</span><span class="op" id="8375517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375523">11</span><span class="op" id="8375525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375530">ModTime</span><span class="op" id="8375537">:</span>&nbsp;&nbsp;<span class="ident" id="8375540">time</span><span class="op" id="8375544">.</span><span class="ident" id="8375545">Unix</span><span class="op" id="8375549">(</span><span class="num" id="8375550">1244436044</span><span class="op" id="8375560">,</span>&nbsp;<span class="num" id="8375562">0</span><span class="op" id="8375563">)</span><span class="op" id="8375564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375569">Typeflag</span><span class="op" id="8375577">:</span>&nbsp;<span class="string" id="8375579">&#39;0&#39;</span><span class="op" id="8375582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375587">Uname</span><span class="op" id="8375592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375597">&#34;dsymonds&#34;</span><span class="op" id="8375607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375612">Gname</span><span class="op" id="8375617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375622">&#34;eng&#34;</span><span class="op" id="8375627">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375631">}</span><span class="op" id="8375632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375635">}</span><span class="op" id="8375636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375639">cksums</span><span class="op" id="8375645">:</span>&nbsp;<span class="op" id="8375647">[</span><span class="op" id="8375648">]</span><span class="builtintype" id="8375649">string</span><span class="op" id="8375655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375659">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="8375693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8375697">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="8375731">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375734">}</span><span class="op" id="8375735">,</span><br>
<span class="lineno"></span><span class="op" id="8375737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8375740">var</span>&nbsp;<span class="ident" id="8375744">sparseTarTest</span>&nbsp;<span class="op" id="8375758">=</span>&nbsp;<span class="op" id="8375760">&amp;</span><span class="ident" id="8375761">untarTest</span><span class="op" id="8375770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375773">file</span><span class="op" id="8375777">:</span>&nbsp;<span class="string" id="8375779">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="8375808">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375811">headers</span><span class="op" id="8375818">:</span>&nbsp;<span class="op" id="8375820">[</span><span class="op" id="8375821">]</span><span class="op" id="8375822">*</span><span class="ident" id="8375823">Header</span><span class="op" id="8375829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8375833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375838">Name</span><span class="op" id="8375842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8375848">&#34;sparse-gnu&#34;</span><span class="op" id="8375860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375865">Mode</span><span class="op" id="8375869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375875">420</span><span class="op" id="8375878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375883">Uid</span><span class="op" id="8375886">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375893">1000</span><span class="op" id="8375897">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375902">Gid</span><span class="op" id="8375905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375912">1000</span><span class="op" id="8375916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375921">Size</span><span class="op" id="8375925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8375931">200</span><span class="op" id="8375934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375939">ModTime</span><span class="op" id="8375946">:</span>&nbsp;&nbsp;<span class="ident" id="8375949">time</span><span class="op" id="8375953">.</span><span class="ident" id="8375954">Unix</span><span class="op" id="8375958">(</span><span class="num" id="8375959">1392395740</span><span class="op" id="8375969">,</span>&nbsp;<span class="num" id="8375971">0</span><span class="op" id="8375972">)</span><span class="op" id="8375973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375978">Typeflag</span><span class="op" id="8375986">:</span>&nbsp;<span class="num" id="8375988">0x53</span><span class="op" id="8375992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8375997">Linkname</span><span class="op" id="8376005">:</span>&nbsp;<span class="string" id="8376007">&#34;&#34;</span><span class="op" id="8376009">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376014">Uname</span><span class="op" id="8376019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376024">&#34;david&#34;</span><span class="op" id="8376031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376036">Gname</span><span class="op" id="8376041">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376046">&#34;david&#34;</span><span class="op" id="8376053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376058">Devmajor</span><span class="op" id="8376066">:</span>&nbsp;<span class="num" id="8376068">0</span><span class="op" id="8376069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376074">Devminor</span><span class="op" id="8376082">:</span>&nbsp;<span class="num" id="8376084">0</span><span class="op" id="8376085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376089">}</span><span class="op" id="8376090">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376099">Name</span><span class="op" id="8376103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376109">&#34;sparse-posix-0.0&#34;</span><span class="op" id="8376127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376132">Mode</span><span class="op" id="8376136">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376142">420</span><span class="op" id="8376145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376150">Uid</span><span class="op" id="8376153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376160">1000</span><span class="op" id="8376164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376169">Gid</span><span class="op" id="8376172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376179">1000</span><span class="op" id="8376183">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376188">Size</span><span class="op" id="8376192">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376198">200</span><span class="op" id="8376201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376206">ModTime</span><span class="op" id="8376213">:</span>&nbsp;&nbsp;<span class="ident" id="8376216">time</span><span class="op" id="8376220">.</span><span class="ident" id="8376221">Unix</span><span class="op" id="8376225">(</span><span class="num" id="8376226">1392342187</span><span class="op" id="8376236">,</span>&nbsp;<span class="num" id="8376238">0</span><span class="op" id="8376239">)</span><span class="op" id="8376240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376245">Typeflag</span><span class="op" id="8376253">:</span>&nbsp;<span class="num" id="8376255">0x30</span><span class="op" id="8376259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376264">Linkname</span><span class="op" id="8376272">:</span>&nbsp;<span class="string" id="8376274">&#34;&#34;</span><span class="op" id="8376276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376281">Uname</span><span class="op" id="8376286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376291">&#34;david&#34;</span><span class="op" id="8376298">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376303">Gname</span><span class="op" id="8376308">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376313">&#34;david&#34;</span><span class="op" id="8376320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376325">Devmajor</span><span class="op" id="8376333">:</span>&nbsp;<span class="num" id="8376335">0</span><span class="op" id="8376336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376341">Devminor</span><span class="op" id="8376349">:</span>&nbsp;<span class="num" id="8376351">0</span><span class="op" id="8376352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376356">}</span><span class="op" id="8376357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376361">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376366">Name</span><span class="op" id="8376370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376376">&#34;sparse-posix-0.1&#34;</span><span class="op" id="8376394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376399">Mode</span><span class="op" id="8376403">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376409">420</span><span class="op" id="8376412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376417">Uid</span><span class="op" id="8376420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376427">1000</span><span class="op" id="8376431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376436">Gid</span><span class="op" id="8376439">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376446">1000</span><span class="op" id="8376450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376455">Size</span><span class="op" id="8376459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376465">200</span><span class="op" id="8376468">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376473">ModTime</span><span class="op" id="8376480">:</span>&nbsp;&nbsp;<span class="ident" id="8376483">time</span><span class="op" id="8376487">.</span><span class="ident" id="8376488">Unix</span><span class="op" id="8376492">(</span><span class="num" id="8376493">1392340456</span><span class="op" id="8376503">,</span>&nbsp;<span class="num" id="8376505">0</span><span class="op" id="8376506">)</span><span class="op" id="8376507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376512">Typeflag</span><span class="op" id="8376520">:</span>&nbsp;<span class="num" id="8376522">0x30</span><span class="op" id="8376526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376531">Linkname</span><span class="op" id="8376539">:</span>&nbsp;<span class="string" id="8376541">&#34;&#34;</span><span class="op" id="8376543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376548">Uname</span><span class="op" id="8376553">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376558">&#34;david&#34;</span><span class="op" id="8376565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376570">Gname</span><span class="op" id="8376575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376580">&#34;david&#34;</span><span class="op" id="8376587">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376592">Devmajor</span><span class="op" id="8376600">:</span>&nbsp;<span class="num" id="8376602">0</span><span class="op" id="8376603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376608">Devminor</span><span class="op" id="8376616">:</span>&nbsp;<span class="num" id="8376618">0</span><span class="op" id="8376619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376623">}</span><span class="op" id="8376624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376633">Name</span><span class="op" id="8376637">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376643">&#34;sparse-posix-1.0&#34;</span><span class="op" id="8376661">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376666">Mode</span><span class="op" id="8376670">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376676">420</span><span class="op" id="8376679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376684">Uid</span><span class="op" id="8376687">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376694">1000</span><span class="op" id="8376698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376703">Gid</span><span class="op" id="8376706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376713">1000</span><span class="op" id="8376717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376722">Size</span><span class="op" id="8376726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376732">200</span><span class="op" id="8376735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376740">ModTime</span><span class="op" id="8376747">:</span>&nbsp;&nbsp;<span class="ident" id="8376750">time</span><span class="op" id="8376754">.</span><span class="ident" id="8376755">Unix</span><span class="op" id="8376759">(</span><span class="num" id="8376760">1392337404</span><span class="op" id="8376770">,</span>&nbsp;<span class="num" id="8376772">0</span><span class="op" id="8376773">)</span><span class="op" id="8376774">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376779">Typeflag</span><span class="op" id="8376787">:</span>&nbsp;<span class="num" id="8376789">0x30</span><span class="op" id="8376793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376798">Linkname</span><span class="op" id="8376806">:</span>&nbsp;<span class="string" id="8376808">&#34;&#34;</span><span class="op" id="8376810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376815">Uname</span><span class="op" id="8376820">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376825">&#34;david&#34;</span><span class="op" id="8376832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376837">Gname</span><span class="op" id="8376842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376847">&#34;david&#34;</span><span class="op" id="8376854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376859">Devmajor</span><span class="op" id="8376867">:</span>&nbsp;<span class="num" id="8376869">0</span><span class="op" id="8376870">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376875">Devminor</span><span class="op" id="8376883">:</span>&nbsp;<span class="num" id="8376885">0</span><span class="op" id="8376886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376890">}</span><span class="op" id="8376891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8376895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376900">Name</span><span class="op" id="8376904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8376910">&#34;end&#34;</span><span class="op" id="8376915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376920">Mode</span><span class="op" id="8376924">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376930">420</span><span class="op" id="8376933">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376938">Uid</span><span class="op" id="8376941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376948">1000</span><span class="op" id="8376952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376957">Gid</span><span class="op" id="8376960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376967">1000</span><span class="op" id="8376971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376976">Size</span><span class="op" id="8376980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8376986">4</span><span class="op" id="8376987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8376992">ModTime</span><span class="op" id="8376999">:</span>&nbsp;&nbsp;<span class="ident" id="8377002">time</span><span class="op" id="8377006">.</span><span class="ident" id="8377007">Unix</span><span class="op" id="8377011">(</span><span class="num" id="8377012">1392398319</span><span class="op" id="8377022">,</span>&nbsp;<span class="num" id="8377024">0</span><span class="op" id="8377025">)</span><span class="op" id="8377026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377031">Typeflag</span><span class="op" id="8377039">:</span>&nbsp;<span class="num" id="8377041">0x30</span><span class="op" id="8377045">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377050">Linkname</span><span class="op" id="8377058">:</span>&nbsp;<span class="string" id="8377060">&#34;&#34;</span><span class="op" id="8377062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377067">Uname</span><span class="op" id="8377072">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8377077">&#34;david&#34;</span><span class="op" id="8377084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377089">Gname</span><span class="op" id="8377094">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8377099">&#34;david&#34;</span><span class="op" id="8377106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377111">Devmajor</span><span class="op" id="8377119">:</span>&nbsp;<span class="num" id="8377121">0</span><span class="op" id="8377122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377127">Devminor</span><span class="op" id="8377135">:</span>&nbsp;<span class="num" id="8377137">0</span><span class="op" id="8377138">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377142">}</span><span class="op" id="8377143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377146">}</span><span class="op" id="8377147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377150">cksums</span><span class="op" id="8377156">:</span>&nbsp;<span class="op" id="8377158">[</span><span class="op" id="8377159">]</span><span class="builtintype" id="8377160">string</span><span class="op" id="8377166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8377170">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8377204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8377208">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8377242">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8377246">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8377280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8377284">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8377318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8377322">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="8377356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377359">}</span><span class="op" id="8377360">,</span><br>
<span class="lineno"></span><span class="op" id="8377362">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8377365">var</span>&nbsp;<span class="ident" id="8377369">untarTests</span>&nbsp;<span class="op" id="8377380">=</span>&nbsp;<span class="op" id="8377382">[</span><span class="op" id="8377383">]</span><span class="op" id="8377384">*</span><span class="ident" id="8377385">untarTest</span><span class="op" id="8377394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377397">gnuTarTest</span><span class="op" id="8377407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377410">sparseTarTest</span><span class="op" id="8377423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377426">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377430">file</span><span class="op" id="8377434">:</span>&nbsp;<span class="string" id="8377436">&#34;testdata/star.tar&#34;</span><span class="op" id="8377455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377459">headers</span><span class="op" id="8377466">:</span>&nbsp;<span class="op" id="8377468">[</span><span class="op" id="8377469">]</span><span class="op" id="8377470">*</span><span class="ident" id="8377471">Header</span><span class="op" id="8377477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377488">Name</span><span class="op" id="8377492">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8377500">&#34;small.txt&#34;</span><span class="op" id="8377511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377517">Mode</span><span class="op" id="8377521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377529">0640</span><span class="op" id="8377533">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377539">Uid</span><span class="op" id="8377542">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377551">73025</span><span class="op" id="8377556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377562">Gid</span><span class="op" id="8377565">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377574">5000</span><span class="op" id="8377578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377584">Size</span><span class="op" id="8377588">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377596">5</span><span class="op" id="8377597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377603">ModTime</span><span class="op" id="8377610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8377615">time</span><span class="op" id="8377619">.</span><span class="ident" id="8377620">Unix</span><span class="op" id="8377624">(</span><span class="num" id="8377625">1244592783</span><span class="op" id="8377635">,</span>&nbsp;<span class="num" id="8377637">0</span><span class="op" id="8377638">)</span><span class="op" id="8377639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377645">Typeflag</span><span class="op" id="8377653">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8377657">&#39;0&#39;</span><span class="op" id="8377660">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377666">Uname</span><span class="op" id="8377671">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8377678">&#34;dsymonds&#34;</span><span class="op" id="8377688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377694">Gname</span><span class="op" id="8377699">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8377706">&#34;eng&#34;</span><span class="op" id="8377711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377717">AccessTime</span><span class="op" id="8377727">:</span>&nbsp;<span class="ident" id="8377729">time</span><span class="op" id="8377733">.</span><span class="ident" id="8377734">Unix</span><span class="op" id="8377738">(</span><span class="num" id="8377739">1244592783</span><span class="op" id="8377749">,</span>&nbsp;<span class="num" id="8377751">0</span><span class="op" id="8377752">)</span><span class="op" id="8377753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377759">ChangeTime</span><span class="op" id="8377769">:</span>&nbsp;<span class="ident" id="8377771">time</span><span class="op" id="8377775">.</span><span class="ident" id="8377776">Unix</span><span class="op" id="8377780">(</span><span class="num" id="8377781">1244592783</span><span class="op" id="8377791">,</span>&nbsp;<span class="num" id="8377793">0</span><span class="op" id="8377794">)</span><span class="op" id="8377795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377800">}</span><span class="op" id="8377801">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8377806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377812">Name</span><span class="op" id="8377816">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8377824">&#34;small2.txt&#34;</span><span class="op" id="8377836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377842">Mode</span><span class="op" id="8377846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377854">0640</span><span class="op" id="8377858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377864">Uid</span><span class="op" id="8377867">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377876">73025</span><span class="op" id="8377881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377887">Gid</span><span class="op" id="8377890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377899">5000</span><span class="op" id="8377903">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377909">Size</span><span class="op" id="8377913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8377921">11</span><span class="op" id="8377923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377929">ModTime</span><span class="op" id="8377936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8377941">time</span><span class="op" id="8377945">.</span><span class="ident" id="8377946">Unix</span><span class="op" id="8377950">(</span><span class="num" id="8377951">1244592783</span><span class="op" id="8377961">,</span>&nbsp;<span class="num" id="8377963">0</span><span class="op" id="8377964">)</span><span class="op" id="8377965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377971">Typeflag</span><span class="op" id="8377979">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8377983">&#39;0&#39;</span><span class="op" id="8377986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8377992">Uname</span><span class="op" id="8377997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378004">&#34;dsymonds&#34;</span><span class="op" id="8378014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378020">Gname</span><span class="op" id="8378025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378032">&#34;eng&#34;</span><span class="op" id="8378037">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378043">AccessTime</span><span class="op" id="8378053">:</span>&nbsp;<span class="ident" id="8378055">time</span><span class="op" id="8378059">.</span><span class="ident" id="8378060">Unix</span><span class="op" id="8378064">(</span><span class="num" id="8378065">1244592783</span><span class="op" id="8378075">,</span>&nbsp;<span class="num" id="8378077">0</span><span class="op" id="8378078">)</span><span class="op" id="8378079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378085">ChangeTime</span><span class="op" id="8378095">:</span>&nbsp;<span class="ident" id="8378097">time</span><span class="op" id="8378101">.</span><span class="ident" id="8378102">Unix</span><span class="op" id="8378106">(</span><span class="num" id="8378107">1244592783</span><span class="op" id="8378117">,</span>&nbsp;<span class="num" id="8378119">0</span><span class="op" id="8378120">)</span><span class="op" id="8378121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378126">}</span><span class="op" id="8378127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378131">}</span><span class="op" id="8378132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378135">}</span><span class="op" id="8378136">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378143">file</span><span class="op" id="8378147">:</span>&nbsp;<span class="string" id="8378149">&#34;testdata/v7.tar&#34;</span><span class="op" id="8378166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378170">headers</span><span class="op" id="8378177">:</span>&nbsp;<span class="op" id="8378179">[</span><span class="op" id="8378180">]</span><span class="op" id="8378181">*</span><span class="ident" id="8378182">Header</span><span class="op" id="8378188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378199">Name</span><span class="op" id="8378203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378209">&#34;small.txt&#34;</span><span class="op" id="8378220">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378226">Mode</span><span class="op" id="8378230">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378236">0444</span><span class="op" id="8378240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378246">Uid</span><span class="op" id="8378249">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378256">73025</span><span class="op" id="8378261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378267">Gid</span><span class="op" id="8378270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378277">5000</span><span class="op" id="8378281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378287">Size</span><span class="op" id="8378291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378297">5</span><span class="op" id="8378298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378304">ModTime</span><span class="op" id="8378311">:</span>&nbsp;&nbsp;<span class="ident" id="8378314">time</span><span class="op" id="8378318">.</span><span class="ident" id="8378319">Unix</span><span class="op" id="8378323">(</span><span class="num" id="8378324">1244593104</span><span class="op" id="8378334">,</span>&nbsp;<span class="num" id="8378336">0</span><span class="op" id="8378337">)</span><span class="op" id="8378338">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378344">Typeflag</span><span class="op" id="8378352">:</span>&nbsp;<span class="string" id="8378354">&#39;\x00&#39;</span><span class="op" id="8378360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378365">}</span><span class="op" id="8378366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378377">Name</span><span class="op" id="8378381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378387">&#34;small2.txt&#34;</span><span class="op" id="8378399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378405">Mode</span><span class="op" id="8378409">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378415">0444</span><span class="op" id="8378419">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378425">Uid</span><span class="op" id="8378428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378435">73025</span><span class="op" id="8378440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378446">Gid</span><span class="op" id="8378449">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378456">5000</span><span class="op" id="8378460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378466">Size</span><span class="op" id="8378470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378476">11</span><span class="op" id="8378478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378484">ModTime</span><span class="op" id="8378491">:</span>&nbsp;&nbsp;<span class="ident" id="8378494">time</span><span class="op" id="8378498">.</span><span class="ident" id="8378499">Unix</span><span class="op" id="8378503">(</span><span class="num" id="8378504">1244593104</span><span class="op" id="8378514">,</span>&nbsp;<span class="num" id="8378516">0</span><span class="op" id="8378517">)</span><span class="op" id="8378518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378524">Typeflag</span><span class="op" id="8378532">:</span>&nbsp;<span class="string" id="8378534">&#39;\x00&#39;</span><span class="op" id="8378540">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378545">}</span><span class="op" id="8378546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378550">}</span><span class="op" id="8378551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378554">}</span><span class="op" id="8378555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378562">file</span><span class="op" id="8378566">:</span>&nbsp;<span class="string" id="8378568">&#34;testdata/pax.tar&#34;</span><span class="op" id="8378586">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378590">headers</span><span class="op" id="8378597">:</span>&nbsp;<span class="op" id="8378599">[</span><span class="op" id="8378600">]</span><span class="op" id="8378601">*</span><span class="ident" id="8378602">Header</span><span class="op" id="8378608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8378613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378619">Name</span><span class="op" id="8378623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378631">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="8378827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378833">Mode</span><span class="op" id="8378837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378845">0664</span><span class="op" id="8378849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378855">Uid</span><span class="op" id="8378858">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378867">1000</span><span class="op" id="8378871">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378877">Gid</span><span class="op" id="8378880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378889">1000</span><span class="op" id="8378893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378899">Uname</span><span class="op" id="8378904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378911">&#34;shane&#34;</span><span class="op" id="8378918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378924">Gname</span><span class="op" id="8378929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8378936">&#34;shane&#34;</span><span class="op" id="8378943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378949">Size</span><span class="op" id="8378953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8378961">7</span><span class="op" id="8378962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8378968">ModTime</span><span class="op" id="8378975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8378980">time</span><span class="op" id="8378984">.</span><span class="ident" id="8378985">Unix</span><span class="op" id="8378989">(</span><span class="num" id="8378990">1350244992</span><span class="op" id="8379000">,</span>&nbsp;<span class="num" id="8379002">23960108</span><span class="op" id="8379010">)</span><span class="op" id="8379011">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379017">ChangeTime</span><span class="op" id="8379027">:</span>&nbsp;<span class="ident" id="8379029">time</span><span class="op" id="8379033">.</span><span class="ident" id="8379034">Unix</span><span class="op" id="8379038">(</span><span class="num" id="8379039">1350244992</span><span class="op" id="8379049">,</span>&nbsp;<span class="num" id="8379051">23960108</span><span class="op" id="8379059">)</span><span class="op" id="8379060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379066">AccessTime</span><span class="op" id="8379076">:</span>&nbsp;<span class="ident" id="8379078">time</span><span class="op" id="8379082">.</span><span class="ident" id="8379083">Unix</span><span class="op" id="8379087">(</span><span class="num" id="8379088">1350244992</span><span class="op" id="8379098">,</span>&nbsp;<span class="num" id="8379100">23960108</span><span class="op" id="8379108">)</span><span class="op" id="8379109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379115">Typeflag</span><span class="op" id="8379123">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8379127">TypeReg</span><span class="op" id="8379134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379139">}</span><span class="op" id="8379140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379145">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379151">Name</span><span class="op" id="8379155">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8379163">&#34;a/b&#34;</span><span class="op" id="8379168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379174">Mode</span><span class="op" id="8379178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379186">0777</span><span class="op" id="8379190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379196">Uid</span><span class="op" id="8379199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379208">1000</span><span class="op" id="8379212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379218">Gid</span><span class="op" id="8379221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379230">1000</span><span class="op" id="8379234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379240">Uname</span><span class="op" id="8379245">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8379252">&#34;shane&#34;</span><span class="op" id="8379259">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379265">Gname</span><span class="op" id="8379270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8379277">&#34;shane&#34;</span><span class="op" id="8379284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379290">Size</span><span class="op" id="8379294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379302">0</span><span class="op" id="8379303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379309">ModTime</span><span class="op" id="8379316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8379321">time</span><span class="op" id="8379325">.</span><span class="ident" id="8379326">Unix</span><span class="op" id="8379330">(</span><span class="num" id="8379331">1350266320</span><span class="op" id="8379341">,</span>&nbsp;<span class="num" id="8379343">910238425</span><span class="op" id="8379352">)</span><span class="op" id="8379353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379359">ChangeTime</span><span class="op" id="8379369">:</span>&nbsp;<span class="ident" id="8379371">time</span><span class="op" id="8379375">.</span><span class="ident" id="8379376">Unix</span><span class="op" id="8379380">(</span><span class="num" id="8379381">1350266320</span><span class="op" id="8379391">,</span>&nbsp;<span class="num" id="8379393">910238425</span><span class="op" id="8379402">)</span><span class="op" id="8379403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379409">AccessTime</span><span class="op" id="8379419">:</span>&nbsp;<span class="ident" id="8379421">time</span><span class="op" id="8379425">.</span><span class="ident" id="8379426">Unix</span><span class="op" id="8379430">(</span><span class="num" id="8379431">1350266320</span><span class="op" id="8379441">,</span>&nbsp;<span class="num" id="8379443">910238425</span><span class="op" id="8379452">)</span><span class="op" id="8379453">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379459">Typeflag</span><span class="op" id="8379467">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8379471">TypeSymlink</span><span class="op" id="8379482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379488">Linkname</span><span class="op" id="8379496">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8379500">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="8379694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379699">}</span><span class="op" id="8379700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379704">}</span><span class="op" id="8379705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379708">}</span><span class="op" id="8379709">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379716">file</span><span class="op" id="8379720">:</span>&nbsp;<span class="string" id="8379722">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="8379744">,</span>&nbsp;<span class="comment" id="8379746">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379773">headers</span><span class="op" id="8379780">:</span>&nbsp;<span class="op" id="8379782">[</span><span class="op" id="8379783">]</span><span class="op" id="8379784">*</span><span class="ident" id="8379785">Header</span><span class="op" id="8379791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8379796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379802">Name</span><span class="op" id="8379806">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8379812">&#34;P1050238.JPG.log&#34;</span><span class="op" id="8379830">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379836">Mode</span><span class="op" id="8379840">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379846">0664</span><span class="op" id="8379850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379856">Uid</span><span class="op" id="8379859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379866">0</span><span class="op" id="8379867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379873">Gid</span><span class="op" id="8379876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379883">0</span><span class="op" id="8379884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379890">Size</span><span class="op" id="8379894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8379900">14</span><span class="op" id="8379902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379908">ModTime</span><span class="op" id="8379915">:</span>&nbsp;&nbsp;<span class="ident" id="8379918">time</span><span class="op" id="8379922">.</span><span class="ident" id="8379923">Unix</span><span class="op" id="8379927">(</span><span class="num" id="8379928">1365454838</span><span class="op" id="8379938">,</span>&nbsp;<span class="num" id="8379940">0</span><span class="op" id="8379941">)</span><span class="op" id="8379942">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379948">Typeflag</span><span class="op" id="8379956">:</span>&nbsp;<span class="ident" id="8379958">TypeReg</span><span class="op" id="8379965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379971">Linkname</span><span class="op" id="8379979">:</span>&nbsp;<span class="string" id="8379981">&#34;&#34;</span><span class="op" id="8379983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8379989">Uname</span><span class="op" id="8379994">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8379999">&#34;eyefi&#34;</span><span class="op" id="8380006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380012">Gname</span><span class="op" id="8380017">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380022">&#34;eyefi&#34;</span><span class="op" id="8380029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380035">Devmajor</span><span class="op" id="8380043">:</span>&nbsp;<span class="num" id="8380045">0</span><span class="op" id="8380046">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380052">Devminor</span><span class="op" id="8380060">:</span>&nbsp;<span class="num" id="8380062">0</span><span class="op" id="8380063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380068">}</span><span class="op" id="8380069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380073">}</span><span class="op" id="8380074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380077">}</span><span class="op" id="8380078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380081">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380085">file</span><span class="op" id="8380089">:</span>&nbsp;<span class="string" id="8380091">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="8380112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380116">headers</span><span class="op" id="8380123">:</span>&nbsp;<span class="op" id="8380125">[</span><span class="op" id="8380126">]</span><span class="op" id="8380127">*</span><span class="ident" id="8380128">Header</span><span class="op" id="8380134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380145">Name</span><span class="op" id="8380149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380157">&#34;small.txt&#34;</span><span class="op" id="8380168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380174">Mode</span><span class="op" id="8380178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380186">0644</span><span class="op" id="8380190">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380196">Uid</span><span class="op" id="8380199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380208">1000</span><span class="op" id="8380212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380218">Gid</span><span class="op" id="8380221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380230">10</span><span class="op" id="8380232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380238">Size</span><span class="op" id="8380242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380250">5</span><span class="op" id="8380251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380257">ModTime</span><span class="op" id="8380264">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8380269">time</span><span class="op" id="8380273">.</span><span class="ident" id="8380274">Unix</span><span class="op" id="8380278">(</span><span class="num" id="8380279">1386065770</span><span class="op" id="8380289">,</span>&nbsp;<span class="num" id="8380291">448252320</span><span class="op" id="8380300">)</span><span class="op" id="8380301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380307">Typeflag</span><span class="op" id="8380315">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8380319">&#39;0&#39;</span><span class="op" id="8380322">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380328">Uname</span><span class="op" id="8380333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380340">&#34;alex&#34;</span><span class="op" id="8380346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380352">Gname</span><span class="op" id="8380357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380364">&#34;wheel&#34;</span><span class="op" id="8380371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380377">AccessTime</span><span class="op" id="8380387">:</span>&nbsp;<span class="ident" id="8380389">time</span><span class="op" id="8380393">.</span><span class="ident" id="8380394">Unix</span><span class="op" id="8380398">(</span><span class="num" id="8380399">1389782991</span><span class="op" id="8380409">,</span>&nbsp;<span class="num" id="8380411">419875220</span><span class="op" id="8380420">)</span><span class="op" id="8380421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380427">ChangeTime</span><span class="op" id="8380437">:</span>&nbsp;<span class="ident" id="8380439">time</span><span class="op" id="8380443">.</span><span class="ident" id="8380444">Unix</span><span class="op" id="8380448">(</span><span class="num" id="8380449">1389782956</span><span class="op" id="8380459">,</span>&nbsp;<span class="num" id="8380461">794414986</span><span class="op" id="8380470">)</span><span class="op" id="8380471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380477">Xattrs</span><span class="op" id="8380483">:</span>&nbsp;<span class="keyword" id="8380485">map</span><span class="op" id="8380488">[</span><span class="builtintype" id="8380489">string</span><span class="op" id="8380495">]</span><span class="builtintype" id="8380496">string</span><span class="op" id="8380502">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8380509">&#34;user.key&#34;</span><span class="op" id="8380519">:</span>&nbsp;&nbsp;<span class="string" id="8380522">&#34;value&#34;</span><span class="op" id="8380529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8380536">&#34;user.key2&#34;</span><span class="op" id="8380547">:</span>&nbsp;<span class="string" id="8380549">&#34;value2&#34;</span><span class="op" id="8380557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8380564">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8380641">&#34;security.selinux&#34;</span><span class="op" id="8380659">:</span>&nbsp;<span class="string" id="8380661">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="8380701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380707">}</span><span class="op" id="8380708">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380713">}</span><span class="op" id="8380714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8380719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380725">Name</span><span class="op" id="8380729">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380737">&#34;small2.txt&#34;</span><span class="op" id="8380749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380755">Mode</span><span class="op" id="8380759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380767">0644</span><span class="op" id="8380771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380777">Uid</span><span class="op" id="8380780">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380789">1000</span><span class="op" id="8380793">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380799">Gid</span><span class="op" id="8380802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380811">10</span><span class="op" id="8380813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380819">Size</span><span class="op" id="8380823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8380831">11</span><span class="op" id="8380833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380839">ModTime</span><span class="op" id="8380846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8380851">time</span><span class="op" id="8380855">.</span><span class="ident" id="8380856">Unix</span><span class="op" id="8380860">(</span><span class="num" id="8380861">1386065770</span><span class="op" id="8380871">,</span>&nbsp;<span class="num" id="8380873">449252304</span><span class="op" id="8380882">)</span><span class="op" id="8380883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380889">Typeflag</span><span class="op" id="8380897">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8380901">&#39;0&#39;</span><span class="op" id="8380904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380910">Uname</span><span class="op" id="8380915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380922">&#34;alex&#34;</span><span class="op" id="8380928">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380934">Gname</span><span class="op" id="8380939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8380946">&#34;wheel&#34;</span><span class="op" id="8380953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8380959">AccessTime</span><span class="op" id="8380969">:</span>&nbsp;<span class="ident" id="8380971">time</span><span class="op" id="8380975">.</span><span class="ident" id="8380976">Unix</span><span class="op" id="8380980">(</span><span class="num" id="8380981">1389782991</span><span class="op" id="8380991">,</span>&nbsp;<span class="num" id="8380993">419875220</span><span class="op" id="8381002">)</span><span class="op" id="8381003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381009">ChangeTime</span><span class="op" id="8381019">:</span>&nbsp;<span class="ident" id="8381021">time</span><span class="op" id="8381025">.</span><span class="ident" id="8381026">Unix</span><span class="op" id="8381030">(</span><span class="num" id="8381031">1386065770</span><span class="op" id="8381041">,</span>&nbsp;<span class="num" id="8381043">449252304</span><span class="op" id="8381052">)</span><span class="op" id="8381053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381059">Xattrs</span><span class="op" id="8381065">:</span>&nbsp;<span class="keyword" id="8381067">map</span><span class="op" id="8381070">[</span><span class="builtintype" id="8381071">string</span><span class="op" id="8381077">]</span><span class="builtintype" id="8381078">string</span><span class="op" id="8381084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8381091">&#34;security.selinux&#34;</span><span class="op" id="8381109">:</span>&nbsp;<span class="string" id="8381111">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="8381151">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381157">}</span><span class="op" id="8381158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381163">}</span><span class="op" id="8381164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381168">}</span><span class="op" id="8381169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381172">}</span><span class="op" id="8381173">,</span><br>
<span class="lineno"></span><span class="op" id="8381175">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="8381178">func</span>&nbsp;<span class="ident" id="8381183">TestReader</span><span class="op" id="8381193">(</span><span class="ident" id="8381194">t</span>&nbsp;<span class="op" id="8381196">*</span><span class="ident" id="8381197">testing</span><span class="op" id="8381204">.</span><span class="ident" id="8381205">T</span><span class="op" id="8381206">)</span>&nbsp;<span class="op" id="8381208">{</span><br>
<span class="lineno"></span><span class="ident" id="8381210">testLoop</span><span class="op" id="8381218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381221">for</span>&nbsp;<span class="ident" id="8381225">i</span><span class="op" id="8381226">,</span>&nbsp;<span class="ident" id="8381228">test</span>&nbsp;<span class="op" id="8381233">:=</span>&nbsp;<span class="keyword" id="8381236">range</span>&nbsp;<span class="ident" id="8381242">untarTests</span>&nbsp;<span class="op" id="8381253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381257">f</span><span class="op" id="8381258">,</span>&nbsp;<span class="ident" id="8381260">err</span>&nbsp;<span class="op" id="8381264">:=</span>&nbsp;<span class="ident" id="8381267">os</span><span class="op" id="8381269">.</span><span class="ident" id="8381270">Open</span><span class="op" id="8381274">(</span><span class="ident" id="8381275">test</span><span class="op" id="8381279">.</span><span class="ident" id="8381280">file</span><span class="op" id="8381284">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381288">if</span>&nbsp;<span class="ident" id="8381291">err</span>&nbsp;<span class="op" id="8381295">!=</span>&nbsp;<span class="ident" id="8381298">nil</span>&nbsp;<span class="op" id="8381302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381307">t</span><span class="op" id="8381308">.</span><span class="ident" id="8381309">Errorf</span><span class="op" id="8381315">(</span><span class="string" id="8381316">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8381347">,</span>&nbsp;<span class="ident" id="8381349">i</span><span class="op" id="8381350">,</span>&nbsp;<span class="ident" id="8381352">err</span><span class="op" id="8381355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381360">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381375">defer</span>&nbsp;<span class="ident" id="8381381">f</span><span class="op" id="8381382">.</span><span class="ident" id="8381383">Close</span><span class="op" id="8381388">(</span><span class="op" id="8381389">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381393">tr</span>&nbsp;<span class="op" id="8381396">:=</span>&nbsp;<span class="ident" id="8381399">NewReader</span><span class="op" id="8381408">(</span><span class="ident" id="8381409">f</span><span class="op" id="8381410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381414">for</span>&nbsp;<span class="ident" id="8381418">j</span><span class="op" id="8381419">,</span>&nbsp;<span class="ident" id="8381421">header</span>&nbsp;<span class="op" id="8381428">:=</span>&nbsp;<span class="keyword" id="8381431">range</span>&nbsp;<span class="ident" id="8381437">test</span><span class="op" id="8381441">.</span><span class="ident" id="8381442">headers</span>&nbsp;<span class="op" id="8381450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381455">hdr</span><span class="op" id="8381458">,</span>&nbsp;<span class="ident" id="8381460">err</span>&nbsp;<span class="op" id="8381464">:=</span>&nbsp;<span class="ident" id="8381467">tr</span><span class="op" id="8381469">.</span><span class="ident" id="8381470">Next</span><span class="op" id="8381474">(</span><span class="op" id="8381475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381480">if</span>&nbsp;<span class="ident" id="8381483">err</span>&nbsp;<span class="op" id="8381487">!=</span>&nbsp;<span class="ident" id="8381490">nil</span>&nbsp;<span class="op" id="8381494">||</span>&nbsp;<span class="ident" id="8381497">hdr</span>&nbsp;<span class="op" id="8381501">==</span>&nbsp;<span class="ident" id="8381504">nil</span>&nbsp;<span class="op" id="8381508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381514">t</span><span class="op" id="8381515">.</span><span class="ident" id="8381516">Errorf</span><span class="op" id="8381522">(</span><span class="string" id="8381523">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="8381564">,</span>&nbsp;<span class="ident" id="8381566">i</span><span class="op" id="8381567">,</span>&nbsp;<span class="ident" id="8381569">j</span><span class="op" id="8381570">,</span>&nbsp;<span class="ident" id="8381572">err</span><span class="op" id="8381575">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381581">f</span><span class="op" id="8381582">.</span><span class="ident" id="8381583">Close</span><span class="op" id="8381588">(</span><span class="op" id="8381589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381595">continue</span>&nbsp;<span class="ident" id="8381604">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381621">if</span>&nbsp;<span class="op" id="8381624">!</span><span class="ident" id="8381625">reflect</span><span class="op" id="8381632">.</span><span class="ident" id="8381633">DeepEqual</span><span class="op" id="8381642">(</span><span class="op" id="8381643">*</span><span class="ident" id="8381644">hdr</span><span class="op" id="8381647">,</span>&nbsp;<span class="op" id="8381649">*</span><span class="ident" id="8381650">header</span><span class="op" id="8381656">)</span>&nbsp;<span class="op" id="8381658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381664">t</span><span class="op" id="8381665">.</span><span class="ident" id="8381666">Errorf</span><span class="op" id="8381672">(</span><span class="string" id="8381673">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8381731">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381738">i</span><span class="op" id="8381739">,</span>&nbsp;<span class="ident" id="8381741">j</span><span class="op" id="8381742">,</span>&nbsp;<span class="op" id="8381744">*</span><span class="ident" id="8381745">hdr</span><span class="op" id="8381748">,</span>&nbsp;<span class="op" id="8381750">*</span><span class="ident" id="8381751">header</span><span class="op" id="8381757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381770">hdr</span><span class="op" id="8381773">,</span>&nbsp;<span class="ident" id="8381775">err</span>&nbsp;<span class="op" id="8381779">:=</span>&nbsp;<span class="ident" id="8381782">tr</span><span class="op" id="8381784">.</span><span class="ident" id="8381785">Next</span><span class="op" id="8381789">(</span><span class="op" id="8381790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381794">if</span>&nbsp;<span class="ident" id="8381797">err</span>&nbsp;<span class="op" id="8381801">==</span>&nbsp;<span class="ident" id="8381804">io</span><span class="op" id="8381806">.</span><span class="ident" id="8381807">EOF</span>&nbsp;<span class="op" id="8381811">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381816">continue</span>&nbsp;<span class="ident" id="8381825">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8381840">if</span>&nbsp;<span class="ident" id="8381843">hdr</span>&nbsp;<span class="op" id="8381847">!=</span>&nbsp;<span class="ident" id="8381850">nil</span>&nbsp;<span class="op" id="8381854">||</span>&nbsp;<span class="ident" id="8381857">err</span>&nbsp;<span class="op" id="8381861">!=</span>&nbsp;<span class="ident" id="8381864">nil</span>&nbsp;<span class="op" id="8381868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381873">t</span><span class="op" id="8381874">.</span><span class="ident" id="8381875">Errorf</span><span class="op" id="8381881">(</span><span class="string" id="8381882">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="8381933">,</span>&nbsp;<span class="ident" id="8381935">i</span><span class="op" id="8381936">,</span>&nbsp;<span class="ident" id="8381938">hdr</span><span class="op" id="8381941">,</span>&nbsp;<span class="ident" id="8381943">err</span><span class="op" id="8381946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381950">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8381953">}</span><br>
<span class="lineno"></span><span class="op" id="8381955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8381958">func</span>&nbsp;<span class="ident" id="8381963">TestPartialRead</span><span class="op" id="8381978">(</span><span class="ident" id="8381979">t</span>&nbsp;<span class="op" id="8381981">*</span><span class="ident" id="8381982">testing</span><span class="op" id="8381989">.</span><span class="ident" id="8381990">T</span><span class="op" id="8381991">)</span>&nbsp;<span class="op" id="8381993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8381996">f</span><span class="op" id="8381997">,</span>&nbsp;<span class="ident" id="8381999">err</span>&nbsp;<span class="op" id="8382003">:=</span>&nbsp;<span class="ident" id="8382006">os</span><span class="op" id="8382008">.</span><span class="ident" id="8382009">Open</span><span class="op" id="8382013">(</span><span class="string" id="8382014">&#34;testdata/gnu.tar&#34;</span><span class="op" id="8382032">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382035">if</span>&nbsp;<span class="ident" id="8382038">err</span>&nbsp;<span class="op" id="8382042">!=</span>&nbsp;<span class="ident" id="8382045">nil</span>&nbsp;<span class="op" id="8382049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382053">t</span><span class="op" id="8382054">.</span><span class="ident" id="8382055">Fatalf</span><span class="op" id="8382061">(</span><span class="string" id="8382062">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8382084">,</span>&nbsp;<span class="ident" id="8382086">err</span><span class="op" id="8382089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382095">defer</span>&nbsp;<span class="ident" id="8382101">f</span><span class="op" id="8382102">.</span><span class="ident" id="8382103">Close</span><span class="op" id="8382108">(</span><span class="op" id="8382109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382113">tr</span>&nbsp;<span class="op" id="8382116">:=</span>&nbsp;<span class="ident" id="8382119">NewReader</span><span class="op" id="8382128">(</span><span class="ident" id="8382129">f</span><span class="op" id="8382130">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8382134">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382199">hdr</span><span class="op" id="8382202">,</span>&nbsp;<span class="ident" id="8382204">err</span>&nbsp;<span class="op" id="8382208">:=</span>&nbsp;<span class="ident" id="8382211">tr</span><span class="op" id="8382213">.</span><span class="ident" id="8382214">Next</span><span class="op" id="8382218">(</span><span class="op" id="8382219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382222">if</span>&nbsp;<span class="ident" id="8382225">err</span>&nbsp;<span class="op" id="8382229">!=</span>&nbsp;<span class="ident" id="8382232">nil</span>&nbsp;<span class="op" id="8382236">||</span>&nbsp;<span class="ident" id="8382239">hdr</span>&nbsp;<span class="op" id="8382243">==</span>&nbsp;<span class="ident" id="8382246">nil</span>&nbsp;<span class="op" id="8382250">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382254">t</span><span class="op" id="8382255">.</span><span class="ident" id="8382256">Fatalf</span><span class="op" id="8382262">(</span><span class="string" id="8382263">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="8382290">,</span>&nbsp;<span class="ident" id="8382292">err</span><span class="op" id="8382295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382301">buf</span>&nbsp;<span class="op" id="8382305">:=</span>&nbsp;<span class="builtinfunc" id="8382308">make</span><span class="op" id="8382312">(</span><span class="op" id="8382313">[</span><span class="op" id="8382314">]</span><span class="builtintype" id="8382315">byte</span><span class="op" id="8382319">,</span>&nbsp;<span class="num" id="8382321">4</span><span class="op" id="8382322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382325">if</span>&nbsp;<span class="ident" id="8382328">_</span><span class="op" id="8382329">,</span>&nbsp;<span class="ident" id="8382331">err</span>&nbsp;<span class="op" id="8382335">:=</span>&nbsp;<span class="ident" id="8382338">io</span><span class="op" id="8382340">.</span><span class="ident" id="8382341">ReadFull</span><span class="op" id="8382349">(</span><span class="ident" id="8382350">tr</span><span class="op" id="8382352">,</span>&nbsp;<span class="ident" id="8382354">buf</span><span class="op" id="8382357">)</span><span class="op" id="8382358">;</span>&nbsp;<span class="ident" id="8382360">err</span>&nbsp;<span class="op" id="8382364">!=</span>&nbsp;<span class="ident" id="8382367">nil</span>&nbsp;<span class="op" id="8382371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382375">t</span><span class="op" id="8382376">.</span><span class="ident" id="8382377">Fatalf</span><span class="op" id="8382383">(</span><span class="string" id="8382384">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8382406">,</span>&nbsp;<span class="ident" id="8382408">err</span><span class="op" id="8382411">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382417">if</span>&nbsp;<span class="ident" id="8382420">expected</span>&nbsp;<span class="op" id="8382429">:=</span>&nbsp;<span class="op" id="8382432">[</span><span class="op" id="8382433">]</span><span class="builtintype" id="8382434">byte</span><span class="op" id="8382438">(</span><span class="string" id="8382439">&#34;Kilt&#34;</span><span class="op" id="8382445">)</span><span class="op" id="8382446">;</span>&nbsp;<span class="op" id="8382448">!</span><span class="ident" id="8382449">bytes</span><span class="op" id="8382454">.</span><span class="ident" id="8382455">Equal</span><span class="op" id="8382460">(</span><span class="ident" id="8382461">buf</span><span class="op" id="8382464">,</span>&nbsp;<span class="ident" id="8382466">expected</span><span class="op" id="8382474">)</span>&nbsp;<span class="op" id="8382476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382480">t</span><span class="op" id="8382481">.</span><span class="ident" id="8382482">Errorf</span><span class="op" id="8382488">(</span><span class="string" id="8382489">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8382513">,</span>&nbsp;<span class="ident" id="8382515">buf</span><span class="op" id="8382518">,</span>&nbsp;<span class="ident" id="8382520">expected</span><span class="op" id="8382528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8382535">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382551">hdr</span><span class="op" id="8382554">,</span>&nbsp;<span class="ident" id="8382556">err</span>&nbsp;<span class="op" id="8382560">=</span>&nbsp;<span class="ident" id="8382562">tr</span><span class="op" id="8382564">.</span><span class="ident" id="8382565">Next</span><span class="op" id="8382569">(</span><span class="op" id="8382570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382573">if</span>&nbsp;<span class="ident" id="8382576">err</span>&nbsp;<span class="op" id="8382580">!=</span>&nbsp;<span class="ident" id="8382583">nil</span>&nbsp;<span class="op" id="8382587">||</span>&nbsp;<span class="ident" id="8382590">hdr</span>&nbsp;<span class="op" id="8382594">==</span>&nbsp;<span class="ident" id="8382597">nil</span>&nbsp;<span class="op" id="8382601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382605">t</span><span class="op" id="8382606">.</span><span class="ident" id="8382607">Fatalf</span><span class="op" id="8382613">(</span><span class="string" id="8382614">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="8382642">,</span>&nbsp;<span class="ident" id="8382644">err</span><span class="op" id="8382647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382650">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382653">buf</span>&nbsp;<span class="op" id="8382657">=</span>&nbsp;<span class="builtinfunc" id="8382659">make</span><span class="op" id="8382663">(</span><span class="op" id="8382664">[</span><span class="op" id="8382665">]</span><span class="builtintype" id="8382666">byte</span><span class="op" id="8382670">,</span>&nbsp;<span class="num" id="8382672">6</span><span class="op" id="8382673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382676">if</span>&nbsp;<span class="ident" id="8382679">_</span><span class="op" id="8382680">,</span>&nbsp;<span class="ident" id="8382682">err</span>&nbsp;<span class="op" id="8382686">:=</span>&nbsp;<span class="ident" id="8382689">io</span><span class="op" id="8382691">.</span><span class="ident" id="8382692">ReadFull</span><span class="op" id="8382700">(</span><span class="ident" id="8382701">tr</span><span class="op" id="8382703">,</span>&nbsp;<span class="ident" id="8382705">buf</span><span class="op" id="8382708">)</span><span class="op" id="8382709">;</span>&nbsp;<span class="ident" id="8382711">err</span>&nbsp;<span class="op" id="8382715">!=</span>&nbsp;<span class="ident" id="8382718">nil</span>&nbsp;<span class="op" id="8382722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382726">t</span><span class="op" id="8382727">.</span><span class="ident" id="8382728">Fatalf</span><span class="op" id="8382734">(</span><span class="string" id="8382735">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8382757">,</span>&nbsp;<span class="ident" id="8382759">err</span><span class="op" id="8382762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382768">if</span>&nbsp;<span class="ident" id="8382771">expected</span>&nbsp;<span class="op" id="8382780">:=</span>&nbsp;<span class="op" id="8382783">[</span><span class="op" id="8382784">]</span><span class="builtintype" id="8382785">byte</span><span class="op" id="8382789">(</span><span class="string" id="8382790">&#34;Google&#34;</span><span class="op" id="8382798">)</span><span class="op" id="8382799">;</span>&nbsp;<span class="op" id="8382801">!</span><span class="ident" id="8382802">bytes</span><span class="op" id="8382807">.</span><span class="ident" id="8382808">Equal</span><span class="op" id="8382813">(</span><span class="ident" id="8382814">buf</span><span class="op" id="8382817">,</span>&nbsp;<span class="ident" id="8382819">expected</span><span class="op" id="8382827">)</span>&nbsp;<span class="op" id="8382829">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382833">t</span><span class="op" id="8382834">.</span><span class="ident" id="8382835">Errorf</span><span class="op" id="8382841">(</span><span class="string" id="8382842">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8382866">,</span>&nbsp;<span class="ident" id="8382868">buf</span><span class="op" id="8382871">,</span>&nbsp;<span class="ident" id="8382873">expected</span><span class="op" id="8382881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8382884">}</span><br>
<span class="lineno"></span><span class="op" id="8382886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8382889">func</span>&nbsp;<span class="ident" id="8382894">TestIncrementalRead</span><span class="op" id="8382913">(</span><span class="ident" id="8382914">t</span>&nbsp;<span class="op" id="8382916">*</span><span class="ident" id="8382917">testing</span><span class="op" id="8382924">.</span><span class="ident" id="8382925">T</span><span class="op" id="8382926">)</span>&nbsp;<span class="op" id="8382928">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382931">test</span>&nbsp;<span class="op" id="8382936">:=</span>&nbsp;<span class="ident" id="8382939">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382951">f</span><span class="op" id="8382952">,</span>&nbsp;<span class="ident" id="8382954">err</span>&nbsp;<span class="op" id="8382958">:=</span>&nbsp;<span class="ident" id="8382961">os</span><span class="op" id="8382963">.</span><span class="ident" id="8382964">Open</span><span class="op" id="8382968">(</span><span class="ident" id="8382969">test</span><span class="op" id="8382973">.</span><span class="ident" id="8382974">file</span><span class="op" id="8382978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8382981">if</span>&nbsp;<span class="ident" id="8382984">err</span>&nbsp;<span class="op" id="8382988">!=</span>&nbsp;<span class="ident" id="8382991">nil</span>&nbsp;<span class="op" id="8382995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8382999">t</span><span class="op" id="8383000">.</span><span class="ident" id="8383001">Fatalf</span><span class="op" id="8383007">(</span><span class="string" id="8383008">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8383030">,</span>&nbsp;<span class="ident" id="8383032">err</span><span class="op" id="8383035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383038">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383041">defer</span>&nbsp;<span class="ident" id="8383047">f</span><span class="op" id="8383048">.</span><span class="ident" id="8383049">Close</span><span class="op" id="8383054">(</span><span class="op" id="8383055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383059">tr</span>&nbsp;<span class="op" id="8383062">:=</span>&nbsp;<span class="ident" id="8383065">NewReader</span><span class="op" id="8383074">(</span><span class="ident" id="8383075">f</span><span class="op" id="8383076">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383080">headers</span>&nbsp;<span class="op" id="8383088">:=</span>&nbsp;<span class="ident" id="8383091">test</span><span class="op" id="8383095">.</span><span class="ident" id="8383096">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383105">cksums</span>&nbsp;<span class="op" id="8383112">:=</span>&nbsp;<span class="ident" id="8383115">test</span><span class="op" id="8383119">.</span><span class="ident" id="8383120">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383128">nread</span>&nbsp;<span class="op" id="8383134">:=</span>&nbsp;<span class="num" id="8383137">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8383141">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383165">for</span>&nbsp;<span class="op" id="8383169">;</span>&nbsp;<span class="op" id="8383171">;</span>&nbsp;<span class="ident" id="8383173">nread</span><span class="op" id="8383178">++</span>&nbsp;<span class="op" id="8383181">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383185">hdr</span><span class="op" id="8383188">,</span>&nbsp;<span class="ident" id="8383190">err</span>&nbsp;<span class="op" id="8383194">:=</span>&nbsp;<span class="ident" id="8383197">tr</span><span class="op" id="8383199">.</span><span class="ident" id="8383200">Next</span><span class="op" id="8383204">(</span><span class="op" id="8383205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383209">if</span>&nbsp;<span class="ident" id="8383212">hdr</span>&nbsp;<span class="op" id="8383216">==</span>&nbsp;<span class="ident" id="8383219">nil</span>&nbsp;<span class="op" id="8383223">||</span>&nbsp;<span class="ident" id="8383226">err</span>&nbsp;<span class="op" id="8383230">==</span>&nbsp;<span class="ident" id="8383233">io</span><span class="op" id="8383235">.</span><span class="ident" id="8383236">EOF</span>&nbsp;<span class="op" id="8383240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383245">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8383258">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383280">if</span>&nbsp;<span class="op" id="8383283">!</span><span class="ident" id="8383284">reflect</span><span class="op" id="8383291">.</span><span class="ident" id="8383292">DeepEqual</span><span class="op" id="8383301">(</span><span class="op" id="8383302">*</span><span class="ident" id="8383303">hdr</span><span class="op" id="8383306">,</span>&nbsp;<span class="op" id="8383308">*</span><span class="ident" id="8383309">headers</span><span class="op" id="8383316">[</span><span class="ident" id="8383317">nread</span><span class="op" id="8383322">]</span><span class="op" id="8383323">)</span>&nbsp;<span class="op" id="8383325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383330">t</span><span class="op" id="8383331">.</span><span class="ident" id="8383332">Errorf</span><span class="op" id="8383338">(</span><span class="string" id="8383339">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8383378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383384">*</span><span class="ident" id="8383385">hdr</span><span class="op" id="8383388">,</span>&nbsp;<span class="ident" id="8383390">headers</span><span class="op" id="8383397">[</span><span class="ident" id="8383398">nread</span><span class="op" id="8383403">]</span><span class="op" id="8383404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383408">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8383413">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8383459">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383489">h</span>&nbsp;<span class="op" id="8383491">:=</span>&nbsp;<span class="ident" id="8383494">md5</span><span class="op" id="8383497">.</span><span class="ident" id="8383498">New</span><span class="op" id="8383501">(</span><span class="op" id="8383502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383506">rdbuf</span>&nbsp;<span class="op" id="8383512">:=</span>&nbsp;<span class="builtinfunc" id="8383515">make</span><span class="op" id="8383519">(</span><span class="op" id="8383520">[</span><span class="op" id="8383521">]</span><span class="builtintype" id="8383522">uint8</span><span class="op" id="8383527">,</span>&nbsp;<span class="num" id="8383529">8</span><span class="op" id="8383530">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383534">for</span>&nbsp;<span class="op" id="8383538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383543">nr</span><span class="op" id="8383545">,</span>&nbsp;<span class="ident" id="8383547">err</span>&nbsp;<span class="op" id="8383551">:=</span>&nbsp;<span class="ident" id="8383554">tr</span><span class="op" id="8383556">.</span><span class="ident" id="8383557">Read</span><span class="op" id="8383561">(</span><span class="ident" id="8383562">rdbuf</span><span class="op" id="8383567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383572">if</span>&nbsp;<span class="ident" id="8383575">err</span>&nbsp;<span class="op" id="8383579">==</span>&nbsp;<span class="ident" id="8383582">io</span><span class="op" id="8383584">.</span><span class="ident" id="8383585">EOF</span>&nbsp;<span class="op" id="8383589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383595">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383604">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383609">if</span>&nbsp;<span class="ident" id="8383612">err</span>&nbsp;<span class="op" id="8383616">!=</span>&nbsp;<span class="ident" id="8383619">nil</span>&nbsp;<span class="op" id="8383623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383629">t</span><span class="op" id="8383630">.</span><span class="ident" id="8383631">Errorf</span><span class="op" id="8383637">(</span><span class="string" id="8383638">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8383667">,</span>&nbsp;<span class="ident" id="8383669">err</span><span class="op" id="8383672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383678">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383692">h</span><span class="op" id="8383693">.</span><span class="ident" id="8383694">Write</span><span class="op" id="8383699">(</span><span class="ident" id="8383700">rdbuf</span><span class="op" id="8383705">[</span><span class="num" id="8383706">0</span><span class="op" id="8383707">:</span><span class="ident" id="8383708">nr</span><span class="op" id="8383710">]</span><span class="op" id="8383711">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8383719">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383740">have</span>&nbsp;<span class="op" id="8383745">:=</span>&nbsp;<span class="ident" id="8383748">fmt</span><span class="op" id="8383751">.</span><span class="ident" id="8383752">Sprintf</span><span class="op" id="8383759">(</span><span class="string" id="8383760">&#34;%x&#34;</span><span class="op" id="8383764">,</span>&nbsp;<span class="ident" id="8383766">h</span><span class="op" id="8383767">.</span><span class="ident" id="8383768">Sum</span><span class="op" id="8383771">(</span><span class="ident" id="8383772">nil</span><span class="op" id="8383775">)</span><span class="op" id="8383776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383780">want</span>&nbsp;<span class="op" id="8383785">:=</span>&nbsp;<span class="ident" id="8383788">cksums</span><span class="op" id="8383794">[</span><span class="ident" id="8383795">nread</span><span class="op" id="8383800">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383804">if</span>&nbsp;<span class="ident" id="8383807">want</span>&nbsp;<span class="op" id="8383812">!=</span>&nbsp;<span class="ident" id="8383815">have</span>&nbsp;<span class="op" id="8383820">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383825">t</span><span class="op" id="8383826">.</span><span class="ident" id="8383827">Errorf</span><span class="op" id="8383833">(</span><span class="string" id="8383834">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8383880">,</span>&nbsp;<span class="ident" id="8383882">hdr</span><span class="op" id="8383885">.</span><span class="ident" id="8383886">Name</span><span class="op" id="8383890">,</span>&nbsp;<span class="ident" id="8383892">have</span><span class="op" id="8383896">,</span>&nbsp;<span class="ident" id="8383898">want</span><span class="op" id="8383902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8383909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8383912">if</span>&nbsp;<span class="ident" id="8383915">nread</span>&nbsp;<span class="op" id="8383921">!=</span>&nbsp;<span class="builtinfunc" id="8383924">len</span><span class="op" id="8383927">(</span><span class="ident" id="8383928">headers</span><span class="op" id="8383935">)</span>&nbsp;<span class="op" id="8383937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8383941">t</span><span class="op" id="8383942">.</span><span class="ident" id="8383943">Errorf</span><span class="op" id="8383949">(</span><span class="string" id="8383950">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="8384006">,</span>&nbsp;<span class="builtinfunc" id="8384008">len</span><span class="op" id="8384011">(</span><span class="ident" id="8384012">headers</span><span class="op" id="8384019">)</span><span class="op" id="8384020">,</span>&nbsp;<span class="ident" id="8384022">nread</span><span class="op" id="8384027">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384030">}</span><br>
<span class="lineno"></span><span class="op" id="8384032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8384035">func</span>&nbsp;<span class="ident" id="8384040">TestNonSeekable</span><span class="op" id="8384055">(</span><span class="ident" id="8384056">t</span>&nbsp;<span class="op" id="8384058">*</span><span class="ident" id="8384059">testing</span><span class="op" id="8384066">.</span><span class="ident" id="8384067">T</span><span class="op" id="8384068">)</span>&nbsp;<span class="op" id="8384070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384073">test</span>&nbsp;<span class="op" id="8384078">:=</span>&nbsp;<span class="ident" id="8384081">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384093">f</span><span class="op" id="8384094">,</span>&nbsp;<span class="ident" id="8384096">err</span>&nbsp;<span class="op" id="8384100">:=</span>&nbsp;<span class="ident" id="8384103">os</span><span class="op" id="8384105">.</span><span class="ident" id="8384106">Open</span><span class="op" id="8384110">(</span><span class="ident" id="8384111">test</span><span class="op" id="8384115">.</span><span class="ident" id="8384116">file</span><span class="op" id="8384120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384123">if</span>&nbsp;<span class="ident" id="8384126">err</span>&nbsp;<span class="op" id="8384130">!=</span>&nbsp;<span class="ident" id="8384133">nil</span>&nbsp;<span class="op" id="8384137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384141">t</span><span class="op" id="8384142">.</span><span class="ident" id="8384143">Fatalf</span><span class="op" id="8384149">(</span><span class="string" id="8384150">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8384172">,</span>&nbsp;<span class="ident" id="8384174">err</span><span class="op" id="8384177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384183">defer</span>&nbsp;<span class="ident" id="8384189">f</span><span class="op" id="8384190">.</span><span class="ident" id="8384191">Close</span><span class="op" id="8384196">(</span><span class="op" id="8384197">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384201">type</span>&nbsp;<span class="ident" id="8384206">readerOnly</span>&nbsp;<span class="keyword" id="8384217">struct</span>&nbsp;<span class="op" id="8384224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384228">io</span><span class="op" id="8384230">.</span><span class="ident" id="8384231">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384242">tr</span>&nbsp;<span class="op" id="8384245">:=</span>&nbsp;<span class="ident" id="8384248">NewReader</span><span class="op" id="8384257">(</span><span class="ident" id="8384258">readerOnly</span><span class="op" id="8384268">{</span><span class="ident" id="8384269">f</span><span class="op" id="8384270">}</span><span class="op" id="8384271">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384274">nread</span>&nbsp;<span class="op" id="8384280">:=</span>&nbsp;<span class="num" id="8384283">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384287">for</span>&nbsp;<span class="op" id="8384291">;</span>&nbsp;<span class="op" id="8384293">;</span>&nbsp;<span class="ident" id="8384295">nread</span><span class="op" id="8384300">++</span>&nbsp;<span class="op" id="8384303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384307">_</span><span class="op" id="8384308">,</span>&nbsp;<span class="ident" id="8384310">err</span>&nbsp;<span class="op" id="8384314">:=</span>&nbsp;<span class="ident" id="8384317">tr</span><span class="op" id="8384319">.</span><span class="ident" id="8384320">Next</span><span class="op" id="8384324">(</span><span class="op" id="8384325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384329">if</span>&nbsp;<span class="ident" id="8384332">err</span>&nbsp;<span class="op" id="8384336">==</span>&nbsp;<span class="ident" id="8384339">io</span><span class="op" id="8384341">.</span><span class="ident" id="8384342">EOF</span>&nbsp;<span class="op" id="8384346">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384351">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384363">if</span>&nbsp;<span class="ident" id="8384366">err</span>&nbsp;<span class="op" id="8384370">!=</span>&nbsp;<span class="ident" id="8384373">nil</span>&nbsp;<span class="op" id="8384377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384382">t</span><span class="op" id="8384383">.</span><span class="ident" id="8384384">Fatalf</span><span class="op" id="8384390">(</span><span class="string" id="8384391">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8384413">,</span>&nbsp;<span class="ident" id="8384415">err</span><span class="op" id="8384418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384422">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384429">if</span>&nbsp;<span class="ident" id="8384432">nread</span>&nbsp;<span class="op" id="8384438">!=</span>&nbsp;<span class="builtinfunc" id="8384441">len</span><span class="op" id="8384444">(</span><span class="ident" id="8384445">test</span><span class="op" id="8384449">.</span><span class="ident" id="8384450">headers</span><span class="op" id="8384457">)</span>&nbsp;<span class="op" id="8384459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384463">t</span><span class="op" id="8384464">.</span><span class="ident" id="8384465">Errorf</span><span class="op" id="8384471">(</span><span class="string" id="8384472">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="8384528">,</span>&nbsp;<span class="builtinfunc" id="8384530">len</span><span class="op" id="8384533">(</span><span class="ident" id="8384534">test</span><span class="op" id="8384538">.</span><span class="ident" id="8384539">headers</span><span class="op" id="8384546">)</span><span class="op" id="8384547">,</span>&nbsp;<span class="ident" id="8384549">nread</span><span class="op" id="8384554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384557">}</span><br>
<span class="lineno">440</span><span class="op" id="8384559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8384562">func</span>&nbsp;<span class="ident" id="8384567">TestParsePAXHeader</span><span class="op" id="8384585">(</span><span class="ident" id="8384586">t</span>&nbsp;<span class="op" id="8384588">*</span><span class="ident" id="8384589">testing</span><span class="op" id="8384596">.</span><span class="ident" id="8384597">T</span><span class="op" id="8384598">)</span>&nbsp;<span class="op" id="8384600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384603">paxTests</span>&nbsp;<span class="op" id="8384612">:=</span>&nbsp;<span class="op" id="8384615">[</span><span class="op" id="8384616">]</span><span class="op" id="8384617">[</span><span class="num" id="8384618">3</span><span class="op" id="8384619">]</span><span class="builtintype" id="8384620">string</span><span class="op" id="8384626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384630">{</span><span class="string" id="8384631">&#34;a&#34;</span><span class="op" id="8384634">,</span>&nbsp;<span class="string" id="8384636">&#34;a=name&#34;</span><span class="op" id="8384644">,</span>&nbsp;<span class="string" id="8384646">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="8384659">}</span><span class="op" id="8384660">,</span>&nbsp;<span class="comment" id="8384662">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384715">{</span><span class="string" id="8384716">&#34;a&#34;</span><span class="op" id="8384719">,</span>&nbsp;<span class="string" id="8384721">&#34;a=name&#34;</span><span class="op" id="8384729">,</span>&nbsp;<span class="string" id="8384731">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="8384743">}</span><span class="op" id="8384744">,</span>&nbsp;&nbsp;<span class="comment" id="8384747">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8384799">{</span><span class="string" id="8384800">&#34;mtime&#34;</span><span class="op" id="8384807">,</span>&nbsp;<span class="string" id="8384809">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="8384837">,</span>&nbsp;<span class="string" id="8384839">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="8384872">}</span><span class="op" id="8384873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8384876">for</span>&nbsp;<span class="ident" id="8384880">_</span><span class="op" id="8384881">,</span>&nbsp;<span class="ident" id="8384883">test</span>&nbsp;<span class="op" id="8384888">:=</span>&nbsp;<span class="keyword" id="8384891">range</span>&nbsp;<span class="ident" id="8384897">paxTests</span>&nbsp;<span class="op" id="8384906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384910">key</span><span class="op" id="8384913">,</span>&nbsp;<span class="ident" id="8384915">expected</span><span class="op" id="8384923">,</span>&nbsp;<span class="ident" id="8384925">raw</span>&nbsp;<span class="op" id="8384929">:=</span>&nbsp;<span class="ident" id="8384932">test</span><span class="op" id="8384936">[</span><span class="num" id="8384937">0</span><span class="op" id="8384938">]</span><span class="op" id="8384939">,</span>&nbsp;<span class="ident" id="8384941">test</span><span class="op" id="8384945">[</span><span class="num" id="8384946">1</span><span class="op" id="8384947">]</span><span class="op" id="8384948">,</span>&nbsp;<span class="ident" id="8384950">test</span><span class="op" id="8384954">[</span><span class="num" id="8384955">2</span><span class="op" id="8384956">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8384960">reader</span>&nbsp;<span class="op" id="8384967">:=</span>&nbsp;<span class="ident" id="8384970">bytes</span><span class="op" id="8384975">.</span><span class="ident" id="8384976">NewReader</span><span class="op" id="8384985">(</span><span class="op" id="8384986">[</span><span class="op" id="8384987">]</span><span class="builtintype" id="8384988">byte</span><span class="op" id="8384992">(</span><span class="ident" id="8384993">raw</span><span class="op" id="8384996">)</span><span class="op" id="8384997">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385001">headers</span><span class="op" id="8385008">,</span>&nbsp;<span class="ident" id="8385010">err</span>&nbsp;<span class="op" id="8385014">:=</span>&nbsp;<span class="ident" id="8385017">parsePAX</span><span class="op" id="8385025">(</span><span class="ident" id="8385026">reader</span><span class="op" id="8385032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8385036">if</span>&nbsp;<span class="ident" id="8385039">err</span>&nbsp;<span class="op" id="8385043">!=</span>&nbsp;<span class="ident" id="8385046">nil</span>&nbsp;<span class="op" id="8385050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385055">t</span><span class="op" id="8385056">.</span><span class="ident" id="8385057">Errorf</span><span class="op" id="8385063">(</span><span class="string" id="8385064">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="8385112">,</span>&nbsp;<span class="ident" id="8385114">err</span><span class="op" id="8385117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8385122">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8385133">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8385137">if</span>&nbsp;<span class="ident" id="8385140">strings</span><span class="op" id="8385147">.</span><span class="ident" id="8385148">EqualFold</span><span class="op" id="8385157">(</span><span class="ident" id="8385158">headers</span><span class="op" id="8385165">[</span><span class="ident" id="8385166">key</span><span class="op" id="8385169">]</span><span class="op" id="8385170">,</span>&nbsp;<span class="ident" id="8385172">expected</span><span class="op" id="8385180">)</span>&nbsp;<span class="op" id="8385182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385187">t</span><span class="op" id="8385188">.</span><span class="ident" id="8385189">Errorf</span><span class="op" id="8385195">(</span><span class="string" id="8385196">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="8385248">,</span>&nbsp;<span class="ident" id="8385250">headers</span><span class="op" id="8385257">[</span><span class="ident" id="8385258">key</span><span class="op" id="8385261">]</span><span class="op" id="8385262">,</span>&nbsp;<span class="ident" id="8385264">expected</span><span class="op" id="8385272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8385277">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8385288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385292">trailer</span>&nbsp;<span class="op" id="8385300">:=</span>&nbsp;<span class="builtinfunc" id="8385303">make</span><span class="op" id="8385307">(</span><span class="op" id="8385308">[</span><span class="op" id="8385309">]</span><span class="builtintype" id="8385310">byte</span><span class="op" id="8385314">,</span>&nbsp;<span class="num" id="8385316">100</span><span class="op" id="8385319">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385323">n</span><span class="op" id="8385324">,</span>&nbsp;<span class="ident" id="8385326">err</span>&nbsp;<span class="op" id="8385330">:=</span>&nbsp;<span class="ident" id="8385333">reader</span><span class="op" id="8385339">.</span><span class="ident" id="8385340">Read</span><span class="op" id="8385344">(</span><span class="ident" id="8385345">trailer</span><span class="op" id="8385352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8385356">if</span>&nbsp;<span class="ident" id="8385359">err</span>&nbsp;<span class="op" id="8385363">!=</span>&nbsp;<span class="ident" id="8385366">io</span><span class="op" id="8385368">.</span><span class="ident" id="8385369">EOF</span>&nbsp;<span class="op" id="8385373">||</span>&nbsp;<span class="ident" id="8385376">n</span>&nbsp;<span class="op" id="8385378">!=</span>&nbsp;<span class="num" id="8385381">0</span>&nbsp;<span class="op" id="8385383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385388">t</span><span class="op" id="8385389">.</span><span class="ident" id="8385390">Error</span><span class="op" id="8385395">(</span><span class="string" id="8385396">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="8385420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8385424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8385427">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385430">badHeader</span>&nbsp;<span class="op" id="8385440">:=</span>&nbsp;<span class="ident" id="8385443">bytes</span><span class="op" id="8385448">.</span><span class="ident" id="8385449">NewReader</span><span class="op" id="8385458">(</span><span class="op" id="8385459">[</span><span class="op" id="8385460">]</span><span class="builtintype" id="8385461">byte</span><span class="op" id="8385465">(</span><span class="string" id="8385466">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="8385482">)</span><span class="op" id="8385483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8385486">if</span>&nbsp;<span class="ident" id="8385489">_</span><span class="op" id="8385490">,</span>&nbsp;<span class="ident" id="8385492">err</span>&nbsp;<span class="op" id="8385496">:=</span>&nbsp;<span class="ident" id="8385499">parsePAX</span><span class="op" id="8385507">(</span><span class="ident" id="8385508">badHeader</span><span class="op" id="8385517">)</span><span class="op" id="8385518">;</span>&nbsp;<span class="ident" id="8385520">err</span>&nbsp;<span class="op" id="8385524">!=</span>&nbsp;<span class="ident" id="8385527">ErrHeader</span>&nbsp;<span class="op" id="8385537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385541">t</span><span class="op" id="8385542">.</span><span class="ident" id="8385543">Fatal</span><span class="op" id="8385548">(</span><span class="string" id="8385549">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="8385593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8385596">}</span><br>
<span class="lineno"></span><span class="op" id="8385598">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="8385601">func</span>&nbsp;<span class="ident" id="8385606">TestParsePAXTime</span><span class="op" id="8385622">(</span><span class="ident" id="8385623">t</span>&nbsp;<span class="op" id="8385625">*</span><span class="ident" id="8385626">testing</span><span class="op" id="8385633">.</span><span class="ident" id="8385634">T</span><span class="op" id="8385635">)</span>&nbsp;<span class="op" id="8385637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8385640">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385671">timestamps</span>&nbsp;<span class="op" id="8385682">:=</span>&nbsp;<span class="keyword" id="8385685">map</span><span class="op" id="8385688">[</span><span class="builtintype" id="8385689">string</span><span class="op" id="8385695">]</span><span class="ident" id="8385696">time</span><span class="op" id="8385700">.</span><span class="ident" id="8385701">Time</span><span class="op" id="8385705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8385709">&#34;1350244992.023960108&#34;</span><span class="op" id="8385731">:</span>&nbsp;&nbsp;<span class="ident" id="8385734">time</span><span class="op" id="8385738">.</span><span class="ident" id="8385739">Unix</span><span class="op" id="8385743">(</span><span class="num" id="8385744">1350244992</span><span class="op" id="8385754">,</span>&nbsp;<span class="num" id="8385756">23960108</span><span class="op" id="8385764">)</span><span class="op" id="8385765">,</span>&nbsp;<span class="comment" id="8385767">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8385788">&#34;1350244992.02396010&#34;</span><span class="op" id="8385809">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8385813">time</span><span class="op" id="8385817">.</span><span class="ident" id="8385818">Unix</span><span class="op" id="8385822">(</span><span class="num" id="8385823">1350244992</span><span class="op" id="8385833">,</span>&nbsp;<span class="num" id="8385835">23960100</span><span class="op" id="8385843">)</span><span class="op" id="8385844">,</span>&nbsp;<span class="comment" id="8385846">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8385873">&#34;1350244992.0239601089&#34;</span><span class="op" id="8385896">:</span>&nbsp;<span class="ident" id="8385898">time</span><span class="op" id="8385902">.</span><span class="ident" id="8385903">Unix</span><span class="op" id="8385907">(</span><span class="num" id="8385908">1350244992</span><span class="op" id="8385918">,</span>&nbsp;<span class="num" id="8385920">23960108</span><span class="op" id="8385928">)</span><span class="op" id="8385929">,</span>&nbsp;<span class="comment" id="8385931">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8385959">&#34;1350244992&#34;</span><span class="op" id="8385971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8385984">time</span><span class="op" id="8385988">.</span><span class="ident" id="8385989">Unix</span><span class="op" id="8385993">(</span><span class="num" id="8385994">1350244992</span><span class="op" id="8386004">,</span>&nbsp;<span class="num" id="8386006">0</span><span class="op" id="8386007">)</span><span class="op" id="8386008">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8386017">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386044">for</span>&nbsp;<span class="ident" id="8386048">input</span><span class="op" id="8386053">,</span>&nbsp;<span class="ident" id="8386055">expected</span>&nbsp;<span class="op" id="8386064">:=</span>&nbsp;<span class="keyword" id="8386067">range</span>&nbsp;<span class="ident" id="8386073">timestamps</span>&nbsp;<span class="op" id="8386084">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386088">ts</span><span class="op" id="8386090">,</span>&nbsp;<span class="ident" id="8386092">err</span>&nbsp;<span class="op" id="8386096">:=</span>&nbsp;<span class="ident" id="8386099">parsePAXTime</span><span class="op" id="8386111">(</span><span class="ident" id="8386112">input</span><span class="op" id="8386117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386121">if</span>&nbsp;<span class="ident" id="8386124">err</span>&nbsp;<span class="op" id="8386128">!=</span>&nbsp;<span class="ident" id="8386131">nil</span>&nbsp;<span class="op" id="8386135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386140">t</span><span class="op" id="8386141">.</span><span class="ident" id="8386142">Fatal</span><span class="op" id="8386147">(</span><span class="ident" id="8386148">err</span><span class="op" id="8386151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386159">if</span>&nbsp;<span class="op" id="8386162">!</span><span class="ident" id="8386163">ts</span><span class="op" id="8386165">.</span><span class="ident" id="8386166">Equal</span><span class="op" id="8386171">(</span><span class="ident" id="8386172">expected</span><span class="op" id="8386180">)</span>&nbsp;<span class="op" id="8386182">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386187">t</span><span class="op" id="8386188">.</span><span class="ident" id="8386189">Fatalf</span><span class="op" id="8386195">(</span><span class="string" id="8386196">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="8386224">,</span>&nbsp;<span class="ident" id="8386226">ts</span><span class="op" id="8386228">,</span>&nbsp;<span class="ident" id="8386230">expected</span><span class="op" id="8386238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386245">}</span><br>
<span class="lineno"></span><span class="op" id="8386247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="8386250">func</span>&nbsp;<span class="ident" id="8386255">TestMergePAX</span><span class="op" id="8386267">(</span><span class="ident" id="8386268">t</span>&nbsp;<span class="op" id="8386270">*</span><span class="ident" id="8386271">testing</span><span class="op" id="8386278">.</span><span class="ident" id="8386279">T</span><span class="op" id="8386280">)</span>&nbsp;<span class="op" id="8386282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386285">hdr</span>&nbsp;<span class="op" id="8386289">:=</span>&nbsp;<span class="builtinfunc" id="8386292">new</span><span class="op" id="8386295">(</span><span class="ident" id="8386296">Header</span><span class="op" id="8386302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8386305">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386355">headers</span>&nbsp;<span class="op" id="8386363">:=</span>&nbsp;<span class="keyword" id="8386366">map</span><span class="op" id="8386369">[</span><span class="builtintype" id="8386370">string</span><span class="op" id="8386376">]</span><span class="builtintype" id="8386377">string</span><span class="op" id="8386383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8386387">&#34;path&#34;</span><span class="op" id="8386393">:</span>&nbsp;&nbsp;<span class="string" id="8386396">&#34;a/b/c&#34;</span><span class="op" id="8386403">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8386407">&#34;uid&#34;</span><span class="op" id="8386412">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8386416">&#34;1000&#34;</span><span class="op" id="8386422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8386426">&#34;mtime&#34;</span><span class="op" id="8386433">:</span>&nbsp;<span class="string" id="8386435">&#34;1350244992.023960108&#34;</span><span class="op" id="8386457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386463">err</span>&nbsp;<span class="op" id="8386467">:=</span>&nbsp;<span class="ident" id="8386470">mergePAX</span><span class="op" id="8386478">(</span><span class="ident" id="8386479">hdr</span><span class="op" id="8386482">,</span>&nbsp;<span class="ident" id="8386484">headers</span><span class="op" id="8386491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386494">if</span>&nbsp;<span class="ident" id="8386497">err</span>&nbsp;<span class="op" id="8386501">!=</span>&nbsp;<span class="ident" id="8386504">nil</span>&nbsp;<span class="op" id="8386508">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386512">t</span><span class="op" id="8386513">.</span><span class="ident" id="8386514">Fatal</span><span class="op" id="8386519">(</span><span class="ident" id="8386520">err</span><span class="op" id="8386523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386529">want</span>&nbsp;<span class="op" id="8386534">:=</span>&nbsp;<span class="op" id="8386537">&amp;</span><span class="ident" id="8386538">Header</span><span class="op" id="8386544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386548">Name</span><span class="op" id="8386552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8386557">&#34;a/b/c&#34;</span><span class="op" id="8386564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386568">Uid</span><span class="op" id="8386571">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8386577">1000</span><span class="op" id="8386581">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386585">ModTime</span><span class="op" id="8386592">:</span>&nbsp;<span class="ident" id="8386594">time</span><span class="op" id="8386598">.</span><span class="ident" id="8386599">Unix</span><span class="op" id="8386603">(</span><span class="num" id="8386604">1350244992</span><span class="op" id="8386614">,</span>&nbsp;<span class="num" id="8386616">23960108</span><span class="op" id="8386624">)</span><span class="op" id="8386625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386631">if</span>&nbsp;<span class="op" id="8386634">!</span><span class="ident" id="8386635">reflect</span><span class="op" id="8386642">.</span><span class="ident" id="8386643">DeepEqual</span><span class="op" id="8386652">(</span><span class="ident" id="8386653">hdr</span><span class="op" id="8386656">,</span>&nbsp;<span class="ident" id="8386658">want</span><span class="op" id="8386662">)</span>&nbsp;<span class="op" id="8386664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386668">t</span><span class="op" id="8386669">.</span><span class="ident" id="8386670">Errorf</span><span class="op" id="8386676">(</span><span class="string" id="8386677">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="8386713">,</span>&nbsp;<span class="ident" id="8386715">hdr</span><span class="op" id="8386718">,</span>&nbsp;<span class="ident" id="8386720">want</span><span class="op" id="8386724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386727">}</span><br>
<span class="lineno">510</span><span class="op" id="8386729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8386732">func</span>&nbsp;<span class="ident" id="8386737">TestSparseEndToEnd</span><span class="op" id="8386755">(</span><span class="ident" id="8386756">t</span>&nbsp;<span class="op" id="8386758">*</span><span class="ident" id="8386759">testing</span><span class="op" id="8386766">.</span><span class="ident" id="8386767">T</span><span class="op" id="8386768">)</span>&nbsp;<span class="op" id="8386770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386773">test</span>&nbsp;<span class="op" id="8386778">:=</span>&nbsp;<span class="ident" id="8386781">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386796">f</span><span class="op" id="8386797">,</span>&nbsp;<span class="ident" id="8386799">err</span>&nbsp;<span class="op" id="8386803">:=</span>&nbsp;<span class="ident" id="8386806">os</span><span class="op" id="8386808">.</span><span class="ident" id="8386809">Open</span><span class="op" id="8386813">(</span><span class="ident" id="8386814">test</span><span class="op" id="8386818">.</span><span class="ident" id="8386819">file</span><span class="op" id="8386823">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386826">if</span>&nbsp;<span class="ident" id="8386829">err</span>&nbsp;<span class="op" id="8386833">!=</span>&nbsp;<span class="ident" id="8386836">nil</span>&nbsp;<span class="op" id="8386840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386844">t</span><span class="op" id="8386845">.</span><span class="ident" id="8386846">Fatalf</span><span class="op" id="8386852">(</span><span class="string" id="8386853">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8386875">,</span>&nbsp;<span class="ident" id="8386877">err</span><span class="op" id="8386880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386886">defer</span>&nbsp;<span class="ident" id="8386892">f</span><span class="op" id="8386893">.</span><span class="ident" id="8386894">Close</span><span class="op" id="8386899">(</span><span class="op" id="8386900">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386904">tr</span>&nbsp;<span class="op" id="8386907">:=</span>&nbsp;<span class="ident" id="8386910">NewReader</span><span class="op" id="8386919">(</span><span class="ident" id="8386920">f</span><span class="op" id="8386921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386925">headers</span>&nbsp;<span class="op" id="8386933">:=</span>&nbsp;<span class="ident" id="8386936">test</span><span class="op" id="8386940">.</span><span class="ident" id="8386941">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386950">cksums</span>&nbsp;<span class="op" id="8386957">:=</span>&nbsp;<span class="ident" id="8386960">test</span><span class="op" id="8386964">.</span><span class="ident" id="8386965">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386973">nread</span>&nbsp;<span class="op" id="8386979">:=</span>&nbsp;<span class="num" id="8386982">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8386986">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387010">for</span>&nbsp;<span class="op" id="8387014">;</span>&nbsp;<span class="op" id="8387016">;</span>&nbsp;<span class="ident" id="8387018">nread</span><span class="op" id="8387023">++</span>&nbsp;<span class="op" id="8387026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387030">hdr</span><span class="op" id="8387033">,</span>&nbsp;<span class="ident" id="8387035">err</span>&nbsp;<span class="op" id="8387039">:=</span>&nbsp;<span class="ident" id="8387042">tr</span><span class="op" id="8387044">.</span><span class="ident" id="8387045">Next</span><span class="op" id="8387049">(</span><span class="op" id="8387050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387054">if</span>&nbsp;<span class="ident" id="8387057">hdr</span>&nbsp;<span class="op" id="8387061">==</span>&nbsp;<span class="ident" id="8387064">nil</span>&nbsp;<span class="op" id="8387068">||</span>&nbsp;<span class="ident" id="8387071">err</span>&nbsp;<span class="op" id="8387075">==</span>&nbsp;<span class="ident" id="8387078">io</span><span class="op" id="8387080">.</span><span class="ident" id="8387081">EOF</span>&nbsp;<span class="op" id="8387085">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387090">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387103">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387125">if</span>&nbsp;<span class="op" id="8387128">!</span><span class="ident" id="8387129">reflect</span><span class="op" id="8387136">.</span><span class="ident" id="8387137">DeepEqual</span><span class="op" id="8387146">(</span><span class="op" id="8387147">*</span><span class="ident" id="8387148">hdr</span><span class="op" id="8387151">,</span>&nbsp;<span class="op" id="8387153">*</span><span class="ident" id="8387154">headers</span><span class="op" id="8387161">[</span><span class="ident" id="8387162">nread</span><span class="op" id="8387167">]</span><span class="op" id="8387168">)</span>&nbsp;<span class="op" id="8387170">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387175">t</span><span class="op" id="8387176">.</span><span class="ident" id="8387177">Errorf</span><span class="op" id="8387183">(</span><span class="string" id="8387184">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8387223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387229">*</span><span class="ident" id="8387230">hdr</span><span class="op" id="8387233">,</span>&nbsp;<span class="ident" id="8387235">headers</span><span class="op" id="8387242">[</span><span class="ident" id="8387243">nread</span><span class="op" id="8387248">]</span><span class="op" id="8387249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387258">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387295">h</span>&nbsp;<span class="op" id="8387297">:=</span>&nbsp;<span class="ident" id="8387300">md5</span><span class="op" id="8387303">.</span><span class="ident" id="8387304">New</span><span class="op" id="8387307">(</span><span class="op" id="8387308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387312">_</span><span class="op" id="8387313">,</span>&nbsp;<span class="ident" id="8387315">err</span>&nbsp;<span class="op" id="8387319">=</span>&nbsp;<span class="ident" id="8387321">io</span><span class="op" id="8387323">.</span><span class="ident" id="8387324">Copy</span><span class="op" id="8387328">(</span><span class="ident" id="8387329">h</span><span class="op" id="8387330">,</span>&nbsp;<span class="ident" id="8387332">tr</span><span class="op" id="8387334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387338">if</span>&nbsp;<span class="ident" id="8387341">err</span>&nbsp;<span class="op" id="8387345">!=</span>&nbsp;<span class="ident" id="8387348">nil</span>&nbsp;<span class="op" id="8387352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387357">t</span><span class="op" id="8387358">.</span><span class="ident" id="8387359">Fatalf</span><span class="op" id="8387365">(</span><span class="string" id="8387366">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8387388">,</span>&nbsp;<span class="ident" id="8387390">err</span><span class="op" id="8387393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387397">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387402">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387423">have</span>&nbsp;<span class="op" id="8387428">:=</span>&nbsp;<span class="ident" id="8387431">fmt</span><span class="op" id="8387434">.</span><span class="ident" id="8387435">Sprintf</span><span class="op" id="8387442">(</span><span class="string" id="8387443">&#34;%x&#34;</span><span class="op" id="8387447">,</span>&nbsp;<span class="ident" id="8387449">h</span><span class="op" id="8387450">.</span><span class="ident" id="8387451">Sum</span><span class="op" id="8387454">(</span><span class="ident" id="8387455">nil</span><span class="op" id="8387458">)</span><span class="op" id="8387459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387463">want</span>&nbsp;<span class="op" id="8387468">:=</span>&nbsp;<span class="ident" id="8387471">cksums</span><span class="op" id="8387477">[</span><span class="ident" id="8387478">nread</span><span class="op" id="8387483">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387487">if</span>&nbsp;<span class="ident" id="8387490">want</span>&nbsp;<span class="op" id="8387495">!=</span>&nbsp;<span class="ident" id="8387498">have</span>&nbsp;<span class="op" id="8387503">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387508">t</span><span class="op" id="8387509">.</span><span class="ident" id="8387510">Errorf</span><span class="op" id="8387516">(</span><span class="string" id="8387517">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8387563">,</span>&nbsp;<span class="ident" id="8387565">hdr</span><span class="op" id="8387568">.</span><span class="ident" id="8387569">Name</span><span class="op" id="8387573">,</span>&nbsp;<span class="ident" id="8387575">have</span><span class="op" id="8387579">,</span>&nbsp;<span class="ident" id="8387581">want</span><span class="op" id="8387585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387595">if</span>&nbsp;<span class="ident" id="8387598">nread</span>&nbsp;<span class="op" id="8387604">!=</span>&nbsp;<span class="builtinfunc" id="8387607">len</span><span class="op" id="8387610">(</span><span class="ident" id="8387611">headers</span><span class="op" id="8387618">)</span>&nbsp;<span class="op" id="8387620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387624">t</span><span class="op" id="8387625">.</span><span class="ident" id="8387626">Errorf</span><span class="op" id="8387632">(</span><span class="string" id="8387633">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="8387689">,</span>&nbsp;<span class="builtinfunc" id="8387691">len</span><span class="op" id="8387694">(</span><span class="ident" id="8387695">headers</span><span class="op" id="8387702">)</span><span class="op" id="8387703">,</span>&nbsp;<span class="ident" id="8387705">nread</span><span class="op" id="8387710">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387713">}</span><br>
<span class="lineno"></span><span class="op" id="8387715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8387718">type</span>&nbsp;<span class="ident" id="8387723">sparseFileReadTest</span>&nbsp;<span class="keyword" id="8387742">struct</span>&nbsp;<span class="op" id="8387749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387752">sparseData</span>&nbsp;<span class="op" id="8387763">[</span><span class="op" id="8387764">]</span><span class="builtintype" id="8387765">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387771">sparseMap</span>&nbsp;&nbsp;<span class="op" id="8387782">[</span><span class="op" id="8387783">]</span><span class="ident" id="8387784">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387797">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8387808">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387815">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8387826">[</span><span class="op" id="8387827">]</span><span class="builtintype" id="8387828">byte</span><br>
<span class="lineno"></span><span class="op" id="8387833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="8387836">var</span>&nbsp;<span class="ident" id="8387840">sparseFileReadTests</span>&nbsp;<span class="op" id="8387860">=</span>&nbsp;<span class="op" id="8387862">[</span><span class="op" id="8387863">]</span><span class="ident" id="8387864">sparseFileReadTest</span><span class="op" id="8387882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387889">sparseData</span><span class="op" id="8387899">:</span>&nbsp;<span class="op" id="8387901">[</span><span class="op" id="8387902">]</span><span class="builtintype" id="8387903">byte</span><span class="op" id="8387907">(</span><span class="string" id="8387908">&#34;abcde&#34;</span><span class="op" id="8387915">)</span><span class="op" id="8387916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387920">sparseMap</span><span class="op" id="8387929">:</span>&nbsp;<span class="op" id="8387931">[</span><span class="op" id="8387932">]</span><span class="ident" id="8387933">sparseEntry</span><span class="op" id="8387944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387949">{</span><span class="ident" id="8387950">offset</span><span class="op" id="8387956">:</span>&nbsp;<span class="num" id="8387958">0</span><span class="op" id="8387959">,</span>&nbsp;<span class="ident" id="8387961">numBytes</span><span class="op" id="8387969">:</span>&nbsp;<span class="num" id="8387971">2</span><span class="op" id="8387972">}</span><span class="op" id="8387973">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387978">{</span><span class="ident" id="8387979">offset</span><span class="op" id="8387985">:</span>&nbsp;<span class="num" id="8387987">5</span><span class="op" id="8387988">,</span>&nbsp;<span class="ident" id="8387990">numBytes</span><span class="op" id="8387998">:</span>&nbsp;<span class="num" id="8388000">3</span><span class="op" id="8388001">}</span><span class="op" id="8388002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388006">}</span><span class="op" id="8388007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388011">realSize</span><span class="op" id="8388019">:</span>&nbsp;<span class="num" id="8388021">8</span><span class="op" id="8388022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388026">expected</span><span class="op" id="8388034">:</span>&nbsp;<span class="op" id="8388036">[</span><span class="op" id="8388037">]</span><span class="builtintype" id="8388038">byte</span><span class="op" id="8388042">(</span><span class="string" id="8388043">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="8388062">)</span><span class="op" id="8388063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388066">}</span><span class="op" id="8388067">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388074">sparseData</span><span class="op" id="8388084">:</span>&nbsp;<span class="op" id="8388086">[</span><span class="op" id="8388087">]</span><span class="builtintype" id="8388088">byte</span><span class="op" id="8388092">(</span><span class="string" id="8388093">&#34;abcde&#34;</span><span class="op" id="8388100">)</span><span class="op" id="8388101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388105">sparseMap</span><span class="op" id="8388114">:</span>&nbsp;<span class="op" id="8388116">[</span><span class="op" id="8388117">]</span><span class="ident" id="8388118">sparseEntry</span><span class="op" id="8388129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388134">{</span><span class="ident" id="8388135">offset</span><span class="op" id="8388141">:</span>&nbsp;<span class="num" id="8388143">0</span><span class="op" id="8388144">,</span>&nbsp;<span class="ident" id="8388146">numBytes</span><span class="op" id="8388154">:</span>&nbsp;<span class="num" id="8388156">2</span><span class="op" id="8388157">}</span><span class="op" id="8388158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388163">{</span><span class="ident" id="8388164">offset</span><span class="op" id="8388170">:</span>&nbsp;<span class="num" id="8388172">5</span><span class="op" id="8388173">,</span>&nbsp;<span class="ident" id="8388175">numBytes</span><span class="op" id="8388183">:</span>&nbsp;<span class="num" id="8388185">3</span><span class="op" id="8388186">}</span><span class="op" id="8388187">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388191">}</span><span class="op" id="8388192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388196">realSize</span><span class="op" id="8388204">:</span>&nbsp;<span class="num" id="8388206">10</span><span class="op" id="8388208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388212">expected</span><span class="op" id="8388220">:</span>&nbsp;<span class="op" id="8388222">[</span><span class="op" id="8388223">]</span><span class="builtintype" id="8388224">byte</span><span class="op" id="8388228">(</span><span class="string" id="8388229">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="8388256">)</span><span class="op" id="8388257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388260">}</span><span class="op" id="8388261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388264">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388268">sparseData</span><span class="op" id="8388278">:</span>&nbsp;<span class="op" id="8388280">[</span><span class="op" id="8388281">]</span><span class="builtintype" id="8388282">byte</span><span class="op" id="8388286">(</span><span class="string" id="8388287">&#34;abcde&#34;</span><span class="op" id="8388294">)</span><span class="op" id="8388295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388299">sparseMap</span><span class="op" id="8388308">:</span>&nbsp;<span class="op" id="8388310">[</span><span class="op" id="8388311">]</span><span class="ident" id="8388312">sparseEntry</span><span class="op" id="8388323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388328">{</span><span class="ident" id="8388329">offset</span><span class="op" id="8388335">:</span>&nbsp;<span class="num" id="8388337">1</span><span class="op" id="8388338">,</span>&nbsp;<span class="ident" id="8388340">numBytes</span><span class="op" id="8388348">:</span>&nbsp;<span class="num" id="8388350">3</span><span class="op" id="8388351">}</span><span class="op" id="8388352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388357">{</span><span class="ident" id="8388358">offset</span><span class="op" id="8388364">:</span>&nbsp;<span class="num" id="8388366">6</span><span class="op" id="8388367">,</span>&nbsp;<span class="ident" id="8388369">numBytes</span><span class="op" id="8388377">:</span>&nbsp;<span class="num" id="8388379">2</span><span class="op" id="8388380">}</span><span class="op" id="8388381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388385">}</span><span class="op" id="8388386">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388390">realSize</span><span class="op" id="8388398">:</span>&nbsp;<span class="num" id="8388400">8</span><span class="op" id="8388401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388405">expected</span><span class="op" id="8388413">:</span>&nbsp;<span class="op" id="8388415">[</span><span class="op" id="8388416">]</span><span class="builtintype" id="8388417">byte</span><span class="op" id="8388421">(</span><span class="string" id="8388422">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="8388441">)</span><span class="op" id="8388442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388445">}</span><span class="op" id="8388446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388453">sparseData</span><span class="op" id="8388463">:</span>&nbsp;<span class="op" id="8388465">[</span><span class="op" id="8388466">]</span><span class="builtintype" id="8388467">byte</span><span class="op" id="8388471">(</span><span class="string" id="8388472">&#34;abcde&#34;</span><span class="op" id="8388479">)</span><span class="op" id="8388480">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388484">sparseMap</span><span class="op" id="8388493">:</span>&nbsp;<span class="op" id="8388495">[</span><span class="op" id="8388496">]</span><span class="ident" id="8388497">sparseEntry</span><span class="op" id="8388508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388513">{</span><span class="ident" id="8388514">offset</span><span class="op" id="8388520">:</span>&nbsp;<span class="num" id="8388522">1</span><span class="op" id="8388523">,</span>&nbsp;<span class="ident" id="8388525">numBytes</span><span class="op" id="8388533">:</span>&nbsp;<span class="num" id="8388535">3</span><span class="op" id="8388536">}</span><span class="op" id="8388537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388542">{</span><span class="ident" id="8388543">offset</span><span class="op" id="8388549">:</span>&nbsp;<span class="num" id="8388551">6</span><span class="op" id="8388552">,</span>&nbsp;<span class="ident" id="8388554">numBytes</span><span class="op" id="8388562">:</span>&nbsp;<span class="num" id="8388564">2</span><span class="op" id="8388565">}</span><span class="op" id="8388566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388570">}</span><span class="op" id="8388571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388575">realSize</span><span class="op" id="8388583">:</span>&nbsp;<span class="num" id="8388585">10</span><span class="op" id="8388587">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388591">expected</span><span class="op" id="8388599">:</span>&nbsp;<span class="op" id="8388601">[</span><span class="op" id="8388602">]</span><span class="builtintype" id="8388603">byte</span><span class="op" id="8388607">(</span><span class="string" id="8388608">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="8388635">)</span><span class="op" id="8388636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388639">}</span><span class="op" id="8388640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388647">sparseData</span><span class="op" id="8388657">:</span>&nbsp;<span class="op" id="8388659">[</span><span class="op" id="8388660">]</span><span class="builtintype" id="8388661">byte</span><span class="op" id="8388665">(</span><span class="string" id="8388666">&#34;&#34;</span><span class="op" id="8388668">)</span><span class="op" id="8388669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388673">sparseMap</span><span class="op" id="8388682">:</span>&nbsp;&nbsp;<span class="ident" id="8388685">nil</span><span class="op" id="8388688">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388692">realSize</span><span class="op" id="8388700">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="8388704">2</span><span class="op" id="8388705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388709">expected</span><span class="op" id="8388717">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8388721">[</span><span class="op" id="8388722">]</span><span class="builtintype" id="8388723">byte</span><span class="op" id="8388727">(</span><span class="string" id="8388728">&#34;\x00\x00&#34;</span><span class="op" id="8388738">)</span><span class="op" id="8388739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8388742">}</span><span class="op" id="8388743">,</span><br>
<span class="lineno"></span><span class="op" id="8388745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="8388748">func</span>&nbsp;<span class="ident" id="8388753">TestSparseFileReader</span><span class="op" id="8388773">(</span><span class="ident" id="8388774">t</span>&nbsp;<span class="op" id="8388776">*</span><span class="ident" id="8388777">testing</span><span class="op" id="8388784">.</span><span class="ident" id="8388785">T</span><span class="op" id="8388786">)</span>&nbsp;<span class="op" id="8388788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8388791">for</span>&nbsp;<span class="ident" id="8388795">i</span><span class="op" id="8388796">,</span>&nbsp;<span class="ident" id="8388798">test</span>&nbsp;<span class="op" id="8388803">:=</span>&nbsp;<span class="keyword" id="8388806">range</span>&nbsp;<span class="ident" id="8388812">sparseFileReadTests</span>&nbsp;<span class="op" id="8388832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388836">r</span>&nbsp;<span class="op" id="8388838">:=</span>&nbsp;<span class="ident" id="8388841">bytes</span><span class="op" id="8388846">.</span><span class="ident" id="8388847">NewReader</span><span class="op" id="8388856">(</span><span class="ident" id="8388857">test</span><span class="op" id="8388861">.</span><span class="ident" id="8388862">sparseData</span><span class="op" id="8388872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388876">nb</span>&nbsp;<span class="op" id="8388879">:=</span>&nbsp;<span class="ident" id="8388882">int64</span><span class="op" id="8388887">(</span><span class="ident" id="8388888">r</span><span class="op" id="8388889">.</span><span class="ident" id="8388890">Len</span><span class="op" id="8388893">(</span><span class="op" id="8388894">)</span><span class="op" id="8388895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388899">sfr</span>&nbsp;<span class="op" id="8388903">:=</span>&nbsp;<span class="op" id="8388906">&amp;</span><span class="ident" id="8388907">sparseFileReader</span><span class="op" id="8388923">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388928">rfr</span><span class="op" id="8388931">:</span>&nbsp;<span class="op" id="8388933">&amp;</span><span class="ident" id="8388934">regFileReader</span><span class="op" id="8388947">{</span><span class="ident" id="8388948">r</span><span class="op" id="8388949">:</span>&nbsp;<span class="ident" id="8388951">r</span><span class="op" id="8388952">,</span>&nbsp;<span class="ident" id="8388954">nb</span><span class="op" id="8388956">:</span>&nbsp;<span class="ident" id="8388958">nb</span><span class="op" id="8388960">}</span><span class="op" id="8388961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388966">sp</span><span class="op" id="8388968">:</span>&nbsp;&nbsp;<span class="ident" id="8388971">test</span><span class="op" id="8388975">.</span><span class="ident" id="8388976">sparseMap</span><span class="op" id="8388985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8388990">pos</span><span class="op" id="8388993">:</span>&nbsp;<span class="num" id="8388995">0</span><span class="op" id="8388996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389001">tot</span><span class="op" id="8389004">:</span>&nbsp;<span class="ident" id="8389006">test</span><span class="op" id="8389010">.</span><span class="ident" id="8389011">realSize</span><span class="op" id="8389019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389023">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389027">if</span>&nbsp;<span class="ident" id="8389030">sfr</span><span class="op" id="8389033">.</span><span class="ident" id="8389034">numBytes</span><span class="op" id="8389042">(</span><span class="op" id="8389043">)</span>&nbsp;<span class="op" id="8389045">!=</span>&nbsp;<span class="ident" id="8389048">nb</span>&nbsp;<span class="op" id="8389051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389056">t</span><span class="op" id="8389057">.</span><span class="ident" id="8389058">Errorf</span><span class="op" id="8389064">(</span><span class="string" id="8389065">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8389120">,</span>&nbsp;<span class="ident" id="8389122">i</span><span class="op" id="8389123">,</span>&nbsp;<span class="ident" id="8389125">sfr</span><span class="op" id="8389128">.</span><span class="ident" id="8389129">numBytes</span><span class="op" id="8389137">(</span><span class="op" id="8389138">)</span><span class="op" id="8389139">,</span>&nbsp;<span class="ident" id="8389141">nb</span><span class="op" id="8389143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389151">buf</span><span class="op" id="8389154">,</span>&nbsp;<span class="ident" id="8389156">err</span>&nbsp;<span class="op" id="8389160">:=</span>&nbsp;<span class="ident" id="8389163">ioutil</span><span class="op" id="8389169">.</span><span class="ident" id="8389170">ReadAll</span><span class="op" id="8389177">(</span><span class="ident" id="8389178">sfr</span><span class="op" id="8389181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389185">if</span>&nbsp;<span class="ident" id="8389188">err</span>&nbsp;<span class="op" id="8389192">!=</span>&nbsp;<span class="ident" id="8389195">nil</span>&nbsp;<span class="op" id="8389199">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389204">t</span><span class="op" id="8389205">.</span><span class="ident" id="8389206">Errorf</span><span class="op" id="8389212">(</span><span class="string" id="8389213">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8389244">,</span>&nbsp;<span class="ident" id="8389246">i</span><span class="op" id="8389247">,</span>&nbsp;<span class="ident" id="8389249">err</span><span class="op" id="8389252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389260">if</span>&nbsp;<span class="ident" id="8389263">e</span>&nbsp;<span class="op" id="8389265">:=</span>&nbsp;<span class="ident" id="8389268">test</span><span class="op" id="8389272">.</span><span class="ident" id="8389273">expected</span><span class="op" id="8389281">;</span>&nbsp;<span class="op" id="8389283">!</span><span class="ident" id="8389284">bytes</span><span class="op" id="8389289">.</span><span class="ident" id="8389290">Equal</span><span class="op" id="8389295">(</span><span class="ident" id="8389296">buf</span><span class="op" id="8389299">,</span>&nbsp;<span class="ident" id="8389301">e</span><span class="op" id="8389302">)</span>&nbsp;<span class="op" id="8389304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389309">t</span><span class="op" id="8389310">.</span><span class="ident" id="8389311">Errorf</span><span class="op" id="8389317">(</span><span class="string" id="8389318">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8389351">,</span>&nbsp;<span class="ident" id="8389353">i</span><span class="op" id="8389354">,</span>&nbsp;<span class="ident" id="8389356">buf</span><span class="op" id="8389359">,</span>&nbsp;<span class="ident" id="8389361">e</span><span class="op" id="8389362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389366">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389370">if</span>&nbsp;<span class="ident" id="8389373">sfr</span><span class="op" id="8389376">.</span><span class="ident" id="8389377">numBytes</span><span class="op" id="8389385">(</span><span class="op" id="8389386">)</span>&nbsp;<span class="op" id="8389388">!=</span>&nbsp;<span class="num" id="8389391">0</span>&nbsp;<span class="op" id="8389393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389398">t</span><span class="op" id="8389399">.</span><span class="ident" id="8389400">Errorf</span><span class="op" id="8389406">(</span><span class="string" id="8389407">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="8389467">,</span>&nbsp;<span class="ident" id="8389469">i</span><span class="op" id="8389470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389477">}</span><br>
<span class="lineno"></span><span class="op" id="8389479">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="8389482">func</span>&nbsp;<span class="ident" id="8389487">TestSparseIncrementalRead</span><span class="op" id="8389512">(</span><span class="ident" id="8389513">t</span>&nbsp;<span class="op" id="8389515">*</span><span class="ident" id="8389516">testing</span><span class="op" id="8389523">.</span><span class="ident" id="8389524">T</span><span class="op" id="8389525">)</span>&nbsp;<span class="op" id="8389527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389530">sparseMap</span>&nbsp;<span class="op" id="8389540">:=</span>&nbsp;<span class="op" id="8389543">[</span><span class="op" id="8389544">]</span><span class="ident" id="8389545">sparseEntry</span><span class="op" id="8389556">{</span><span class="op" id="8389557">{</span><span class="num" id="8389558">10</span><span class="op" id="8389560">,</span>&nbsp;<span class="num" id="8389562">2</span><span class="op" id="8389563">}</span><span class="op" id="8389564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389567">sparseData</span>&nbsp;<span class="op" id="8389578">:=</span>&nbsp;<span class="op" id="8389581">[</span><span class="op" id="8389582">]</span><span class="builtintype" id="8389583">byte</span><span class="op" id="8389587">(</span><span class="string" id="8389588">&#34;Go&#34;</span><span class="op" id="8389592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389595">expected</span>&nbsp;<span class="op" id="8389604">:=</span>&nbsp;<span class="string" id="8389607">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389686">r</span>&nbsp;<span class="op" id="8389688">:=</span>&nbsp;<span class="ident" id="8389691">bytes</span><span class="op" id="8389696">.</span><span class="ident" id="8389697">NewReader</span><span class="op" id="8389706">(</span><span class="ident" id="8389707">sparseData</span><span class="op" id="8389717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389720">nb</span>&nbsp;<span class="op" id="8389723">:=</span>&nbsp;<span class="ident" id="8389726">int64</span><span class="op" id="8389731">(</span><span class="ident" id="8389732">r</span><span class="op" id="8389733">.</span><span class="ident" id="8389734">Len</span><span class="op" id="8389737">(</span><span class="op" id="8389738">)</span><span class="op" id="8389739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389742">sfr</span>&nbsp;<span class="op" id="8389746">:=</span>&nbsp;<span class="op" id="8389749">&amp;</span><span class="ident" id="8389750">sparseFileReader</span><span class="op" id="8389766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389770">rfr</span><span class="op" id="8389773">:</span>&nbsp;<span class="op" id="8389775">&amp;</span><span class="ident" id="8389776">regFileReader</span><span class="op" id="8389789">{</span><span class="ident" id="8389790">r</span><span class="op" id="8389791">:</span>&nbsp;<span class="ident" id="8389793">r</span><span class="op" id="8389794">,</span>&nbsp;<span class="ident" id="8389796">nb</span><span class="op" id="8389798">:</span>&nbsp;<span class="ident" id="8389800">nb</span><span class="op" id="8389802">}</span><span class="op" id="8389803">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389807">sp</span><span class="op" id="8389809">:</span>&nbsp;&nbsp;<span class="ident" id="8389812">sparseMap</span><span class="op" id="8389821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389825">pos</span><span class="op" id="8389828">:</span>&nbsp;<span class="num" id="8389830">0</span><span class="op" id="8389831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8389835">tot</span><span class="op" id="8389838">:</span>&nbsp;<span class="ident" id="8389840">int64</span><span class="op" id="8389845">(</span><span class="builtinfunc" id="8389846">len</span><span class="op" id="8389849">(</span><span class="ident" id="8389850">expected</span><span class="op" id="8389858">)</span><span class="op" id="8389859">)</span><span class="op" id="8389860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8389863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8389867">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8389936">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8389984">var</span>&nbsp;<span class="ident" id="8389988">outputBuf</span>&nbsp;<span class="ident" id="8389998">bytes</span><span class="op" id="8390003">.</span><span class="ident" id="8390004">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390012">buf</span>&nbsp;<span class="op" id="8390016">:=</span>&nbsp;<span class="builtinfunc" id="8390019">make</span><span class="op" id="8390023">(</span><span class="op" id="8390024">[</span><span class="op" id="8390025">]</span><span class="builtintype" id="8390026">byte</span><span class="op" id="8390030">,</span>&nbsp;<span class="num" id="8390032">6</span><span class="op" id="8390033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390036">for</span>&nbsp;<span class="op" id="8390040">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390044">n</span><span class="op" id="8390045">,</span>&nbsp;<span class="ident" id="8390047">err</span>&nbsp;<span class="op" id="8390051">:=</span>&nbsp;<span class="ident" id="8390054">sfr</span><span class="op" id="8390057">.</span><span class="ident" id="8390058">Read</span><span class="op" id="8390062">(</span><span class="ident" id="8390063">buf</span><span class="op" id="8390066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390070">if</span>&nbsp;<span class="ident" id="8390073">err</span>&nbsp;<span class="op" id="8390077">==</span>&nbsp;<span class="ident" id="8390080">io</span><span class="op" id="8390082">.</span><span class="ident" id="8390083">EOF</span>&nbsp;<span class="op" id="8390087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390092">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390104">if</span>&nbsp;<span class="ident" id="8390107">err</span>&nbsp;<span class="op" id="8390111">!=</span>&nbsp;<span class="ident" id="8390114">nil</span>&nbsp;<span class="op" id="8390118">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390123">t</span><span class="op" id="8390124">.</span><span class="ident" id="8390125">Errorf</span><span class="op" id="8390131">(</span><span class="string" id="8390132">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8390161">,</span>&nbsp;<span class="ident" id="8390163">err</span><span class="op" id="8390166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390174">if</span>&nbsp;<span class="ident" id="8390177">n</span>&nbsp;<span class="op" id="8390179">&gt;</span>&nbsp;<span class="num" id="8390181">0</span>&nbsp;<span class="op" id="8390183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390188">_</span><span class="op" id="8390189">,</span>&nbsp;<span class="ident" id="8390191">err</span>&nbsp;<span class="op" id="8390195">:=</span>&nbsp;<span class="ident" id="8390198">outputBuf</span><span class="op" id="8390207">.</span><span class="ident" id="8390208">Write</span><span class="op" id="8390213">(</span><span class="ident" id="8390214">buf</span><span class="op" id="8390217">[</span><span class="op" id="8390218">:</span><span class="ident" id="8390219">n</span><span class="op" id="8390220">]</span><span class="op" id="8390221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390226">if</span>&nbsp;<span class="ident" id="8390229">err</span>&nbsp;<span class="op" id="8390233">!=</span>&nbsp;<span class="ident" id="8390236">nil</span>&nbsp;<span class="op" id="8390240">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390246">t</span><span class="op" id="8390247">.</span><span class="ident" id="8390248">Errorf</span><span class="op" id="8390254">(</span><span class="string" id="8390255">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8390285">,</span>&nbsp;<span class="ident" id="8390287">err</span><span class="op" id="8390290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390305">got</span>&nbsp;<span class="op" id="8390309">:=</span>&nbsp;<span class="ident" id="8390312">outputBuf</span><span class="op" id="8390321">.</span><span class="ident" id="8390322">String</span><span class="op" id="8390328">(</span><span class="op" id="8390329">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390332">if</span>&nbsp;<span class="ident" id="8390335">got</span>&nbsp;<span class="op" id="8390339">!=</span>&nbsp;<span class="ident" id="8390342">expected</span>&nbsp;<span class="op" id="8390351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390355">t</span><span class="op" id="8390356">.</span><span class="ident" id="8390357">Errorf</span><span class="op" id="8390363">(</span><span class="string" id="8390364">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8390388">,</span>&nbsp;<span class="ident" id="8390390">got</span><span class="op" id="8390393">,</span>&nbsp;<span class="ident" id="8390395">expected</span><span class="op" id="8390403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390406">}</span><br>
<span class="lineno"></span><span class="op" id="8390408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8390411">func</span>&nbsp;<span class="ident" id="8390416">TestReadGNUSparseMap0x1</span><span class="op" id="8390439">(</span><span class="ident" id="8390440">t</span>&nbsp;<span class="op" id="8390442">*</span><span class="ident" id="8390443">testing</span><span class="op" id="8390450">.</span><span class="ident" id="8390451">T</span><span class="op" id="8390452">)</span>&nbsp;<span class="op" id="8390454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390457">headers</span>&nbsp;<span class="op" id="8390465">:=</span>&nbsp;<span class="keyword" id="8390468">map</span><span class="op" id="8390471">[</span><span class="builtintype" id="8390472">string</span><span class="op" id="8390478">]</span><span class="builtintype" id="8390479">string</span><span class="op" id="8390485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390489">paxGNUSparseNumBlocks</span><span class="op" id="8390510">:</span>&nbsp;<span class="string" id="8390512">&#34;4&#34;</span><span class="op" id="8390515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390519">paxGNUSparseMap</span><span class="op" id="8390534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8390542">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="8390562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390565">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390568">expected</span>&nbsp;<span class="op" id="8390577">:=</span>&nbsp;<span class="op" id="8390580">[</span><span class="op" id="8390581">]</span><span class="ident" id="8390582">sparseEntry</span><span class="op" id="8390593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390597">{</span><span class="ident" id="8390598">offset</span><span class="op" id="8390604">:</span>&nbsp;<span class="num" id="8390606">0</span><span class="op" id="8390607">,</span>&nbsp;<span class="ident" id="8390609">numBytes</span><span class="op" id="8390617">:</span>&nbsp;<span class="num" id="8390619">5</span><span class="op" id="8390620">}</span><span class="op" id="8390621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390625">{</span><span class="ident" id="8390626">offset</span><span class="op" id="8390632">:</span>&nbsp;<span class="num" id="8390634">10</span><span class="op" id="8390636">,</span>&nbsp;<span class="ident" id="8390638">numBytes</span><span class="op" id="8390646">:</span>&nbsp;<span class="num" id="8390648">5</span><span class="op" id="8390649">}</span><span class="op" id="8390650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390654">{</span><span class="ident" id="8390655">offset</span><span class="op" id="8390661">:</span>&nbsp;<span class="num" id="8390663">20</span><span class="op" id="8390665">,</span>&nbsp;<span class="ident" id="8390667">numBytes</span><span class="op" id="8390675">:</span>&nbsp;<span class="num" id="8390677">5</span><span class="op" id="8390678">}</span><span class="op" id="8390679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390683">{</span><span class="ident" id="8390684">offset</span><span class="op" id="8390690">:</span>&nbsp;<span class="num" id="8390692">30</span><span class="op" id="8390694">,</span>&nbsp;<span class="ident" id="8390696">numBytes</span><span class="op" id="8390704">:</span>&nbsp;<span class="num" id="8390706">5</span><span class="op" id="8390707">}</span><span class="op" id="8390708">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390715">sp</span><span class="op" id="8390717">,</span>&nbsp;<span class="ident" id="8390719">err</span>&nbsp;<span class="op" id="8390723">:=</span>&nbsp;<span class="ident" id="8390726">readGNUSparseMap0x1</span><span class="op" id="8390745">(</span><span class="ident" id="8390746">headers</span><span class="op" id="8390753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390756">if</span>&nbsp;<span class="ident" id="8390759">err</span>&nbsp;<span class="op" id="8390763">!=</span>&nbsp;<span class="ident" id="8390766">nil</span>&nbsp;<span class="op" id="8390770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390774">t</span><span class="op" id="8390775">.</span><span class="ident" id="8390776">Errorf</span><span class="op" id="8390782">(</span><span class="string" id="8390783">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8390805">,</span>&nbsp;<span class="ident" id="8390807">err</span><span class="op" id="8390810">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8390816">if</span>&nbsp;<span class="op" id="8390819">!</span><span class="ident" id="8390820">reflect</span><span class="op" id="8390827">.</span><span class="ident" id="8390828">DeepEqual</span><span class="op" id="8390837">(</span><span class="ident" id="8390838">sp</span><span class="op" id="8390840">,</span>&nbsp;<span class="ident" id="8390842">expected</span><span class="op" id="8390850">)</span>&nbsp;<span class="op" id="8390852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8390856">t</span><span class="op" id="8390857">.</span><span class="ident" id="8390858">Errorf</span><span class="op" id="8390864">(</span><span class="string" id="8390865">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8390906">,</span>&nbsp;<span class="ident" id="8390908">sp</span><span class="op" id="8390910">,</span>&nbsp;<span class="ident" id="8390912">expected</span><span class="op" id="8390920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8390923">}</span><br>
<span class="lineno"></span><span class="op" id="8390925">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="8390928">func</span>&nbsp;<span class="ident" id="8390933">TestReadGNUSparseMap1x0</span><span class="op" id="8390956">(</span><span class="ident" id="8390957">t</span>&nbsp;<span class="op" id="8390959">*</span><span class="ident" id="8390960">testing</span><span class="op" id="8390967">.</span><span class="ident" id="8390968">T</span><span class="op" id="8390969">)</span>&nbsp;<span class="op" id="8390971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8390974">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391058">numEntries</span>&nbsp;<span class="op" id="8391069">:=</span>&nbsp;<span class="num" id="8391072">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391077">expected</span>&nbsp;<span class="op" id="8391086">:=</span>&nbsp;<span class="builtinfunc" id="8391089">make</span><span class="op" id="8391093">(</span><span class="op" id="8391094">[</span><span class="op" id="8391095">]</span><span class="ident" id="8391096">sparseEntry</span><span class="op" id="8391107">,</span>&nbsp;<span class="num" id="8391109">0</span><span class="op" id="8391110">,</span>&nbsp;<span class="ident" id="8391112">numEntries</span><span class="op" id="8391122">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391125">sparseMap</span>&nbsp;<span class="op" id="8391135">:=</span>&nbsp;<span class="builtinfunc" id="8391138">new</span><span class="op" id="8391141">(</span><span class="ident" id="8391142">bytes</span><span class="op" id="8391147">.</span><span class="ident" id="8391148">Buffer</span><span class="op" id="8391154">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391158">fmt</span><span class="op" id="8391161">.</span><span class="ident" id="8391162">Fprintf</span><span class="op" id="8391169">(</span><span class="ident" id="8391170">sparseMap</span><span class="op" id="8391179">,</span>&nbsp;<span class="string" id="8391181">&#34;%d\n&#34;</span><span class="op" id="8391187">,</span>&nbsp;<span class="ident" id="8391189">numEntries</span><span class="op" id="8391199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8391202">for</span>&nbsp;<span class="ident" id="8391206">i</span>&nbsp;<span class="op" id="8391208">:=</span>&nbsp;<span class="num" id="8391211">0</span><span class="op" id="8391212">;</span>&nbsp;<span class="ident" id="8391214">i</span>&nbsp;<span class="op" id="8391216">&lt;</span>&nbsp;<span class="ident" id="8391218">numEntries</span><span class="op" id="8391228">;</span>&nbsp;<span class="ident" id="8391230">i</span><span class="op" id="8391231">++</span>&nbsp;<span class="op" id="8391234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391238">offset</span>&nbsp;<span class="op" id="8391245">:=</span>&nbsp;<span class="ident" id="8391248">int64</span><span class="op" id="8391253">(</span><span class="num" id="8391254">2048</span>&nbsp;<span class="op" id="8391259">*</span>&nbsp;<span class="ident" id="8391261">i</span><span class="op" id="8391262">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391266">numBytes</span>&nbsp;<span class="op" id="8391275">:=</span>&nbsp;<span class="ident" id="8391278">int64</span><span class="op" id="8391283">(</span><span class="num" id="8391284">1024</span><span class="op" id="8391288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391292">expected</span>&nbsp;<span class="op" id="8391301">=</span>&nbsp;<span class="builtinfunc" id="8391303">append</span><span class="op" id="8391309">(</span><span class="ident" id="8391310">expected</span><span class="op" id="8391318">,</span>&nbsp;<span class="ident" id="8391320">sparseEntry</span><span class="op" id="8391331">{</span><span class="ident" id="8391332">offset</span><span class="op" id="8391338">:</span>&nbsp;<span class="ident" id="8391340">offset</span><span class="op" id="8391346">,</span>&nbsp;<span class="ident" id="8391348">numBytes</span><span class="op" id="8391356">:</span>&nbsp;<span class="ident" id="8391358">numBytes</span><span class="op" id="8391366">}</span><span class="op" id="8391367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391371">fmt</span><span class="op" id="8391374">.</span><span class="ident" id="8391375">Fprintf</span><span class="op" id="8391382">(</span><span class="ident" id="8391383">sparseMap</span><span class="op" id="8391392">,</span>&nbsp;<span class="string" id="8391394">&#34;%d\n%d\n&#34;</span><span class="op" id="8391404">,</span>&nbsp;<span class="ident" id="8391406">offset</span><span class="op" id="8391412">,</span>&nbsp;<span class="ident" id="8391414">numBytes</span><span class="op" id="8391422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8391425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8391429">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391508">headerBlocks</span>&nbsp;<span class="op" id="8391521">:=</span>&nbsp;<span class="op" id="8391524">(</span><span class="ident" id="8391525">sparseMap</span><span class="op" id="8391534">.</span><span class="ident" id="8391535">Len</span><span class="op" id="8391538">(</span><span class="op" id="8391539">)</span>&nbsp;<span class="op" id="8391541">+</span>&nbsp;<span class="ident" id="8391543">blockSize</span>&nbsp;<span class="op" id="8391553">-</span>&nbsp;<span class="num" id="8391555">1</span><span class="op" id="8391556">)</span>&nbsp;<span class="op" id="8391558">/</span>&nbsp;<span class="ident" id="8391560">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391571">bufLen</span>&nbsp;<span class="op" id="8391578">:=</span>&nbsp;<span class="ident" id="8391581">blockSize</span>&nbsp;<span class="op" id="8391591">*</span>&nbsp;<span class="ident" id="8391593">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391607">buf</span>&nbsp;<span class="op" id="8391611">:=</span>&nbsp;<span class="builtinfunc" id="8391614">make</span><span class="op" id="8391618">(</span><span class="op" id="8391619">[</span><span class="op" id="8391620">]</span><span class="builtintype" id="8391621">byte</span><span class="op" id="8391625">,</span>&nbsp;<span class="ident" id="8391627">bufLen</span><span class="op" id="8391633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8391636">copy</span><span class="op" id="8391640">(</span><span class="ident" id="8391641">buf</span><span class="op" id="8391644">,</span>&nbsp;<span class="ident" id="8391646">sparseMap</span><span class="op" id="8391655">.</span><span class="ident" id="8391656">Bytes</span><span class="op" id="8391661">(</span><span class="op" id="8391662">)</span><span class="op" id="8391663">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8391667">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391708">r</span>&nbsp;<span class="op" id="8391710">:=</span>&nbsp;<span class="ident" id="8391713">bytes</span><span class="op" id="8391718">.</span><span class="ident" id="8391719">NewReader</span><span class="op" id="8391728">(</span><span class="ident" id="8391729">buf</span><span class="op" id="8391732">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8391736">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391760">sp</span><span class="op" id="8391762">,</span>&nbsp;<span class="ident" id="8391764">err</span>&nbsp;<span class="op" id="8391768">:=</span>&nbsp;<span class="ident" id="8391771">readGNUSparseMap1x0</span><span class="op" id="8391790">(</span><span class="ident" id="8391791">r</span><span class="op" id="8391792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8391795">if</span>&nbsp;<span class="ident" id="8391798">err</span>&nbsp;<span class="op" id="8391802">!=</span>&nbsp;<span class="ident" id="8391805">nil</span>&nbsp;<span class="op" id="8391809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391813">t</span><span class="op" id="8391814">.</span><span class="ident" id="8391815">Errorf</span><span class="op" id="8391821">(</span><span class="string" id="8391822">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8391844">,</span>&nbsp;<span class="ident" id="8391846">err</span><span class="op" id="8391849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8391852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8391855">if</span>&nbsp;<span class="op" id="8391858">!</span><span class="ident" id="8391859">reflect</span><span class="op" id="8391866">.</span><span class="ident" id="8391867">DeepEqual</span><span class="op" id="8391876">(</span><span class="ident" id="8391877">sp</span><span class="op" id="8391879">,</span>&nbsp;<span class="ident" id="8391881">expected</span><span class="op" id="8391889">)</span>&nbsp;<span class="op" id="8391891">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8391895">t</span><span class="op" id="8391896">.</span><span class="ident" id="8391897">Errorf</span><span class="op" id="8391903">(</span><span class="string" id="8391904">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8391945">,</span>&nbsp;<span class="ident" id="8391947">sp</span><span class="op" id="8391949">,</span>&nbsp;<span class="ident" id="8391951">expected</span><span class="op" id="8391959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8391962">}</span><br>
<span class="lineno"></span><span class="op" id="8391964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8391967">func</span>&nbsp;<span class="ident" id="8391972">TestUninitializedRead</span><span class="op" id="8391993">(</span><span class="ident" id="8391994">t</span>&nbsp;<span class="op" id="8391996">*</span><span class="ident" id="8391997">testing</span><span class="op" id="8392004">.</span><span class="ident" id="8392005">T</span><span class="op" id="8392006">)</span>&nbsp;<span class="op" id="8392008">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392011">test</span>&nbsp;<span class="op" id="8392016">:=</span>&nbsp;<span class="ident" id="8392019">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392031">f</span><span class="op" id="8392032">,</span>&nbsp;<span class="ident" id="8392034">err</span>&nbsp;<span class="op" id="8392038">:=</span>&nbsp;<span class="ident" id="8392041">os</span><span class="op" id="8392043">.</span><span class="ident" id="8392044">Open</span><span class="op" id="8392048">(</span><span class="ident" id="8392049">test</span><span class="op" id="8392053">.</span><span class="ident" id="8392054">file</span><span class="op" id="8392058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392061">if</span>&nbsp;<span class="ident" id="8392064">err</span>&nbsp;<span class="op" id="8392068">!=</span>&nbsp;<span class="ident" id="8392071">nil</span>&nbsp;<span class="op" id="8392075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392079">t</span><span class="op" id="8392080">.</span><span class="ident" id="8392081">Fatalf</span><span class="op" id="8392087">(</span><span class="string" id="8392088">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8392110">,</span>&nbsp;<span class="ident" id="8392112">err</span><span class="op" id="8392115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8392118">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392121">defer</span>&nbsp;<span class="ident" id="8392127">f</span><span class="op" id="8392128">.</span><span class="ident" id="8392129">Close</span><span class="op" id="8392134">(</span><span class="op" id="8392135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392139">tr</span>&nbsp;<span class="op" id="8392142">:=</span>&nbsp;<span class="ident" id="8392145">NewReader</span><span class="op" id="8392154">(</span><span class="ident" id="8392155">f</span><span class="op" id="8392156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392159">_</span><span class="op" id="8392160">,</span>&nbsp;<span class="ident" id="8392162">err</span>&nbsp;<span class="op" id="8392166">=</span>&nbsp;<span class="ident" id="8392168">tr</span><span class="op" id="8392170">.</span><span class="ident" id="8392171">Read</span><span class="op" id="8392175">(</span><span class="op" id="8392176">[</span><span class="op" id="8392177">]</span><span class="builtintype" id="8392178">byte</span><span class="op" id="8392182">{</span><span class="op" id="8392183">}</span><span class="op" id="8392184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8392187">if</span>&nbsp;<span class="ident" id="8392190">err</span>&nbsp;<span class="op" id="8392194">==</span>&nbsp;<span class="ident" id="8392197">nil</span>&nbsp;<span class="op" id="8392201">||</span>&nbsp;<span class="ident" id="8392204">err</span>&nbsp;<span class="op" id="8392208">!=</span>&nbsp;<span class="ident" id="8392211">io</span><span class="op" id="8392213">.</span><span class="ident" id="8392214">EOF</span>&nbsp;<span class="op" id="8392218">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8392222">t</span><span class="op" id="8392223">.</span><span class="ident" id="8392224">Errorf</span><span class="op" id="8392230">(</span><span class="string" id="8392231">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8392264">,</span>&nbsp;<span class="ident" id="8392266">err</span><span class="op" id="8392269">,</span>&nbsp;<span class="ident" id="8392271">io</span><span class="op" id="8392273">.</span><span class="ident" id="8392274">EOF</span><span class="op" id="8392277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8392280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="8392283">}</span>
</div>
</body>
</html>
