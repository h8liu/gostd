<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2667311">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2667367">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2667421">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2667472">package</span>&nbsp;<span class="ident" id="2667480">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2667485">import</span>&nbsp;<span class="op" id="2667492">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2667495">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2667505">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2667511">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="2667518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2667521">//&nbsp;Pipe&nbsp;creates&nbsp;a&nbsp;synchronous,&nbsp;in-memory,&nbsp;full&nbsp;duplex</span><br>
<span class="lineno"></span><span class="comment" id="2667575">//&nbsp;network&nbsp;connection;&nbsp;both&nbsp;ends&nbsp;implement&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">15</span><span class="comment" id="2667638">//&nbsp;Reads&nbsp;on&nbsp;one&nbsp;end&nbsp;are&nbsp;matched&nbsp;with&nbsp;writes&nbsp;on&nbsp;the&nbsp;other,</span><br>
<span class="lineno"></span><span class="comment" id="2667696">//&nbsp;copying&nbsp;data&nbsp;directly&nbsp;between&nbsp;the&nbsp;two;&nbsp;there&nbsp;is&nbsp;no&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="2667759">//&nbsp;buffering.</span><br>
<span class="lineno"></span><span class="keyword" id="2667773">func</span>&nbsp;<span class="ident" id="2667778">Pipe</span><span class="op" id="2667782">(</span><span class="op" id="2667783">)</span>&nbsp;<span class="op" id="2667785">(</span><span class="ident" id="2667786"><a href="/net/net.go.html#2652476">Conn</a></span><span class="op" id="2667790">,</span>&nbsp;<span class="ident" id="2667792"><a href="/net/net.go.html#2652476">Conn</a></span><span class="op" id="2667796">)</span>&nbsp;<span class="op" id="2667798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2667801">r1</span><span class="op" id="2667803">,</span>&nbsp;<span class="ident" id="2667805">w1</span>&nbsp;<span class="op" id="2667808">:=</span>&nbsp;<span class="ident" id="2667811"><a href="/net/pipe.go.html#2667505">io</a></span><span class="op" id="2667813">.</span><span class="ident" id="2667814">Pipe</span><span class="op" id="2667818">(</span><span class="op" id="2667819">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2667822">r2</span><span class="op" id="2667824">,</span>&nbsp;<span class="ident" id="2667826">w2</span>&nbsp;<span class="op" id="2667829">:=</span>&nbsp;<span class="ident" id="2667832"><a href="/net/pipe.go.html#2667505">io</a></span><span class="op" id="2667834">.</span><span class="ident" id="2667835">Pipe</span><span class="op" id="2667839">(</span><span class="op" id="2667840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667844">return</span>&nbsp;<span class="op" id="2667851">&amp;</span><span class="ident" id="2667852"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2667856">{</span><span class="ident" id="2667857"><a href="/net/pipe.go.html#2667801">r1</a></span><span class="op" id="2667859">,</span>&nbsp;<span class="ident" id="2667861"><a href="/net/pipe.go.html#2667826">w2</a></span><span class="op" id="2667863">}</span><span class="op" id="2667864">,</span>&nbsp;<span class="op" id="2667866">&amp;</span><span class="ident" id="2667867"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2667871">{</span><span class="ident" id="2667872"><a href="/net/pipe.go.html#2667822">r2</a></span><span class="op" id="2667874">,</span>&nbsp;<span class="ident" id="2667876"><a href="/net/pipe.go.html#2667805">w1</a></span><span class="op" id="2667878">}</span><br>
<span class="lineno"></span><span class="op" id="2667880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="2667883">type</span>&nbsp;<span class="ident" id="2667888">pipe</span>&nbsp;<span class="keyword" id="2667893">struct</span>&nbsp;<span class="op" id="2667900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2667903">*</span><span class="ident" id="2667904"><a href="/net/pipe.go.html#2667505">io</a></span><span class="op" id="2667906">.</span><span class="ident" id="2667907">PipeReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2667919">*</span><span class="ident" id="2667920"><a href="/net/pipe.go.html#2667505">io</a></span><span class="op" id="2667922">.</span><span class="ident" id="2667923">PipeWriter</span><br>
<span class="lineno"></span><span class="op" id="2667934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2667937">type</span>&nbsp;<span class="ident" id="2667942">pipeAddr</span>&nbsp;<span class="builtintype" id="2667951">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2667956">func</span>&nbsp;<span class="op" id="2667961">(</span><span class="ident" id="2667962"><a href="/net/pipe.go.html#2667942">pipeAddr</a></span><span class="op" id="2667970">)</span>&nbsp;<span class="ident" id="2667972">Network</span><span class="op" id="2667979">(</span><span class="op" id="2667980">)</span>&nbsp;<span class="builtintype" id="2667982">string</span>&nbsp;<span class="op" id="2667989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667992">return</span>&nbsp;<span class="string" id="2667999">&#34;pipe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2668006">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="2668009">func</span>&nbsp;<span class="op" id="2668014">(</span><span class="ident" id="2668015"><a href="/net/pipe.go.html#2667942">pipeAddr</a></span><span class="op" id="2668023">)</span>&nbsp;<span class="ident" id="2668025">String</span><span class="op" id="2668031">(</span><span class="op" id="2668032">)</span>&nbsp;<span class="builtintype" id="2668034">string</span>&nbsp;<span class="op" id="2668041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668044">return</span>&nbsp;<span class="string" id="2668051">&#34;pipe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2668058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="2668061">func</span>&nbsp;<span class="op" id="2668066">(</span><span class="ident" id="2668067">p</span>&nbsp;<span class="op" id="2668069">*</span><span class="ident" id="2668070"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2668074">)</span>&nbsp;<span class="ident" id="2668076">Close</span><span class="op" id="2668081">(</span><span class="op" id="2668082">)</span>&nbsp;<span class="builtintype" id="2668084">error</span>&nbsp;<span class="op" id="2668090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2668093">err</span>&nbsp;<span class="op" id="2668097">:=</span>&nbsp;<span class="ident" id="2668100"><a href="/net/pipe.go.html#2668067">p</a></span><span class="op" id="2668101">.</span><span class="ident" id="2668102">PipeReader</span><span class="op" id="2668112">.</span><span class="ident" id="2668113">Close</span><span class="op" id="2668118">(</span><span class="op" id="2668119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2668122">err1</span>&nbsp;<span class="op" id="2668127">:=</span>&nbsp;<span class="ident" id="2668130"><a href="/net/pipe.go.html#2668067">p</a></span><span class="op" id="2668131">.</span><span class="ident" id="2668132">PipeWriter</span><span class="op" id="2668142">.</span><span class="ident" id="2668143">Close</span><span class="op" id="2668148">(</span><span class="op" id="2668149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668152">if</span>&nbsp;<span class="ident" id="2668155"><a href="/net/pipe.go.html#2668093">err</a></span>&nbsp;<span class="op" id="2668159">==</span>&nbsp;<span class="ident" id="2668162">nil</span>&nbsp;<span class="op" id="2668166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2668170"><a href="/net/pipe.go.html#2668093">err</a></span>&nbsp;<span class="op" id="2668174">=</span>&nbsp;<span class="ident" id="2668176"><a href="/net/pipe.go.html#2668122">err1</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668185">return</span>&nbsp;<span class="ident" id="2668192"><a href="/net/pipe.go.html#2668093">err</a></span><br>
<span class="lineno"></span><span class="op" id="2668196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2668199">func</span>&nbsp;<span class="op" id="2668204">(</span><span class="ident" id="2668205">p</span>&nbsp;<span class="op" id="2668207">*</span><span class="ident" id="2668208"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2668212">)</span>&nbsp;<span class="ident" id="2668214">LocalAddr</span><span class="op" id="2668223">(</span><span class="op" id="2668224">)</span>&nbsp;<span class="ident" id="2668226"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2668231">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668234">return</span>&nbsp;<span class="ident" id="2668241"><a href="/net/pipe.go.html#2667942">pipeAddr</a></span><span class="op" id="2668249">(</span><span class="num" id="2668250">0</span><span class="op" id="2668251">)</span><br>
<span class="lineno"></span><span class="op" id="2668253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2668256">func</span>&nbsp;<span class="op" id="2668261">(</span><span class="ident" id="2668262">p</span>&nbsp;<span class="op" id="2668264">*</span><span class="ident" id="2668265"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2668269">)</span>&nbsp;<span class="ident" id="2668271">RemoteAddr</span><span class="op" id="2668281">(</span><span class="op" id="2668282">)</span>&nbsp;<span class="ident" id="2668284"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2668289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668292">return</span>&nbsp;<span class="ident" id="2668299"><a href="/net/pipe.go.html#2667942">pipeAddr</a></span><span class="op" id="2668307">(</span><span class="num" id="2668308">0</span><span class="op" id="2668309">)</span><br>
<span class="lineno">55</span><span class="op" id="2668311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2668314">func</span>&nbsp;<span class="op" id="2668319">(</span><span class="ident" id="2668320">p</span>&nbsp;<span class="op" id="2668322">*</span><span class="ident" id="2668323"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2668327">)</span>&nbsp;<span class="ident" id="2668329">SetDeadline</span><span class="op" id="2668340">(</span><span class="ident" id="2668341">t</span>&nbsp;<span class="ident" id="2668343"><a href="/net/pipe.go.html#2667511">time</a></span><span class="op" id="2668347">.</span><span class="ident" id="2668348">Time</span><span class="op" id="2668352">)</span>&nbsp;<span class="builtintype" id="2668354">error</span>&nbsp;<span class="op" id="2668360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668363">return</span>&nbsp;<span class="ident" id="2668370"><a href="/net/pipe.go.html#2667495">errors</a></span><span class="op" id="2668376">.</span><span class="ident" id="2668377">New</span><span class="op" id="2668380">(</span><span class="string" id="2668381">&#34;net.Pipe&nbsp;does&nbsp;not&nbsp;support&nbsp;deadlines&#34;</span><span class="op" id="2668418">)</span><br>
<span class="lineno"></span><span class="op" id="2668420">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2668423">func</span>&nbsp;<span class="op" id="2668428">(</span><span class="ident" id="2668429">p</span>&nbsp;<span class="op" id="2668431">*</span><span class="ident" id="2668432"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2668436">)</span>&nbsp;<span class="ident" id="2668438">SetReadDeadline</span><span class="op" id="2668453">(</span><span class="ident" id="2668454">t</span>&nbsp;<span class="ident" id="2668456"><a href="/net/pipe.go.html#2667511">time</a></span><span class="op" id="2668460">.</span><span class="ident" id="2668461">Time</span><span class="op" id="2668465">)</span>&nbsp;<span class="builtintype" id="2668467">error</span>&nbsp;<span class="op" id="2668473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668476">return</span>&nbsp;<span class="ident" id="2668483"><a href="/net/pipe.go.html#2667495">errors</a></span><span class="op" id="2668489">.</span><span class="ident" id="2668490">New</span><span class="op" id="2668493">(</span><span class="string" id="2668494">&#34;net.Pipe&nbsp;does&nbsp;not&nbsp;support&nbsp;deadlines&#34;</span><span class="op" id="2668531">)</span><br>
<span class="lineno"></span><span class="op" id="2668533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="2668536">func</span>&nbsp;<span class="op" id="2668541">(</span><span class="ident" id="2668542">p</span>&nbsp;<span class="op" id="2668544">*</span><span class="ident" id="2668545"><a href="/net/pipe.go.html#2667888">pipe</a></span><span class="op" id="2668549">)</span>&nbsp;<span class="ident" id="2668551">SetWriteDeadline</span><span class="op" id="2668567">(</span><span class="ident" id="2668568">t</span>&nbsp;<span class="ident" id="2668570"><a href="/net/pipe.go.html#2667511">time</a></span><span class="op" id="2668574">.</span><span class="ident" id="2668575">Time</span><span class="op" id="2668579">)</span>&nbsp;<span class="builtintype" id="2668581">error</span>&nbsp;<span class="op" id="2668587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668590">return</span>&nbsp;<span class="ident" id="2668597"><a href="/net/pipe.go.html#2667495">errors</a></span><span class="op" id="2668603">.</span><span class="ident" id="2668604">New</span><span class="op" id="2668607">(</span><span class="string" id="2668608">&#34;net.Pipe&nbsp;does&nbsp;not&nbsp;support&nbsp;deadlines&#34;</span><span class="op" id="2668645">)</span><br>
<span class="lineno"></span><span class="op" id="2668647">}</span>
</div>
</body>
</html>
