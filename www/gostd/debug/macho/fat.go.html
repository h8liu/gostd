<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5411667">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5411723">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5411777">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5411828">package</span>&nbsp;<span class="ident" id="5411836">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5411843">import</span>&nbsp;<span class="op" id="5411850">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5411853">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5411872">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5411879">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5411885">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5411890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5411893">//&nbsp;A&nbsp;FatFile&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;universal&nbsp;binary&nbsp;that&nbsp;contains&nbsp;at&nbsp;least&nbsp;one&nbsp;architecture.</span><br>
<span class="lineno">15</span><span class="keyword" id="5411976">type</span>&nbsp;<span class="ident" id="5411981">FatFile</span>&nbsp;<span class="keyword" id="5411989">struct</span>&nbsp;<span class="op" id="5411996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411999">Magic</span>&nbsp;&nbsp;<span class="builtintype" id="5412006">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412014">Arches</span>&nbsp;<span class="op" id="5412021">[</span><span class="op" id="5412022">]</span><span class="ident" id="5412023">FatArch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412032">closer</span>&nbsp;<span class="ident" id="5412039">io</span><span class="op" id="5412041">.</span><span class="ident" id="5412042">Closer</span><br>
<span class="lineno"></span><span class="op" id="5412049">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5412052">//&nbsp;A&nbsp;FatArchHeader&nbsp;represents&nbsp;a&nbsp;fat&nbsp;header&nbsp;for&nbsp;a&nbsp;specific&nbsp;image&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="keyword" id="5412130">type</span>&nbsp;<span class="ident" id="5412135">FatArchHeader</span>&nbsp;<span class="keyword" id="5412149">struct</span>&nbsp;<span class="op" id="5412156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412159">Cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412166">Cpu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412171">SubCpu</span>&nbsp;<span class="builtintype" id="5412178">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412186">Offset</span>&nbsp;<span class="builtintype" id="5412193">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412201">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5412208">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412216">Align</span>&nbsp;&nbsp;<span class="builtintype" id="5412223">uint32</span><br>
<span class="lineno"></span><span class="op" id="5412230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5412233">const</span>&nbsp;<span class="ident" id="5412239">fatArchHeaderSize</span>&nbsp;<span class="op" id="5412257">=</span>&nbsp;<span class="num" id="5412259">5</span>&nbsp;<span class="op" id="5412261">*</span>&nbsp;<span class="num" id="5412263">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5412266">//&nbsp;A&nbsp;FatArch&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;File&nbsp;inside&nbsp;a&nbsp;FatFile.</span><br>
<span class="lineno"></span><span class="keyword" id="5412314">type</span>&nbsp;<span class="ident" id="5412319">FatArch</span>&nbsp;<span class="keyword" id="5412327">struct</span>&nbsp;<span class="op" id="5412334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412337">FatArchHeader</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412352">*</span><span class="ident" id="5412353">File</span><br>
<span class="lineno"></span><span class="op" id="5412358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5412361">//&nbsp;ErrNotFat&nbsp;is&nbsp;returned&nbsp;from&nbsp;NewFatFile&nbsp;or&nbsp;OpenFat&nbsp;when&nbsp;the&nbsp;file&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5412436">//&nbsp;universal&nbsp;binary&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;thin&nbsp;binary,&nbsp;based&nbsp;on&nbsp;its&nbsp;magic&nbsp;number.</span><br>
<span class="lineno">40</span><span class="keyword" id="5412509">var</span>&nbsp;<span class="ident" id="5412513">ErrNotFat</span>&nbsp;<span class="op" id="5412523">=</span>&nbsp;<span class="op" id="5412525">&amp;</span><span class="ident" id="5412526">FormatError</span><span class="op" id="5412537">{</span><span class="num" id="5412538">0</span><span class="op" id="5412539">,</span>&nbsp;<span class="string" id="5412541">&#34;not&nbsp;a&nbsp;fat&nbsp;Mach-O&nbsp;file&#34;</span><span class="op" id="5412564">,</span>&nbsp;<span class="ident" id="5412566">nil</span><span class="op" id="5412569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5412572">//&nbsp;NewFatFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;FatFile&nbsp;for&nbsp;accessing&nbsp;all&nbsp;the&nbsp;Mach-O&nbsp;images&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5412649">//&nbsp;universal&nbsp;binary.&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5412726">//&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">45</span><span class="keyword" id="5412743">func</span>&nbsp;<span class="ident" id="5412748">NewFatFile</span><span class="op" id="5412758">(</span><span class="ident" id="5412759">r</span>&nbsp;<span class="ident" id="5412761">io</span><span class="op" id="5412763">.</span><span class="ident" id="5412764">ReaderAt</span><span class="op" id="5412772">)</span>&nbsp;<span class="op" id="5412774">(</span><span class="op" id="5412775">*</span><span class="ident" id="5412776">FatFile</span><span class="op" id="5412783">,</span>&nbsp;<span class="builtintype" id="5412785">error</span><span class="op" id="5412790">)</span>&nbsp;<span class="op" id="5412792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412795">var</span>&nbsp;<span class="ident" id="5412799">ff</span>&nbsp;<span class="ident" id="5412802">FatFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412811">sr</span>&nbsp;<span class="op" id="5412814">:=</span>&nbsp;<span class="ident" id="5412817">io</span><span class="op" id="5412819">.</span><span class="ident" id="5412820">NewSectionReader</span><span class="op" id="5412836">(</span><span class="ident" id="5412837">r</span><span class="op" id="5412838">,</span>&nbsp;<span class="num" id="5412840">0</span><span class="op" id="5412841">,</span>&nbsp;<span class="num" id="5412843">1</span><span class="op" id="5412844">&lt;&lt;</span><span class="num" id="5412846">63</span><span class="op" id="5412848">-</span><span class="num" id="5412849">1</span><span class="op" id="5412850">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5412854">//&nbsp;Read&nbsp;the&nbsp;fat_header&nbsp;struct,&nbsp;which&nbsp;is&nbsp;always&nbsp;in&nbsp;big&nbsp;endian.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5412917">//&nbsp;Start&nbsp;with&nbsp;the&nbsp;magic&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412950">err</span>&nbsp;<span class="op" id="5412954">:=</span>&nbsp;<span class="ident" id="5412957">binary</span><span class="op" id="5412963">.</span><span class="ident" id="5412964">Read</span><span class="op" id="5412968">(</span><span class="ident" id="5412969">sr</span><span class="op" id="5412971">,</span>&nbsp;<span class="ident" id="5412973">binary</span><span class="op" id="5412979">.</span><span class="ident" id="5412980">BigEndian</span><span class="op" id="5412989">,</span>&nbsp;<span class="op" id="5412991">&amp;</span><span class="ident" id="5412992">ff</span><span class="op" id="5412994">.</span><span class="ident" id="5412995">Magic</span><span class="op" id="5413000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413003">if</span>&nbsp;<span class="ident" id="5413006">err</span>&nbsp;<span class="op" id="5413010">!=</span>&nbsp;<span class="ident" id="5413013">nil</span>&nbsp;<span class="op" id="5413017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413021">return</span>&nbsp;<span class="ident" id="5413028">nil</span><span class="op" id="5413031">,</span>&nbsp;<span class="op" id="5413033">&amp;</span><span class="ident" id="5413034">FormatError</span><span class="op" id="5413045">{</span><span class="num" id="5413046">0</span><span class="op" id="5413047">,</span>&nbsp;<span class="string" id="5413049">&#34;error&nbsp;reading&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5413077">,</span>&nbsp;<span class="ident" id="5413079">nil</span><span class="op" id="5413082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413085">}</span>&nbsp;<span class="keyword" id="5413087">else</span>&nbsp;<span class="keyword" id="5413092">if</span>&nbsp;<span class="ident" id="5413095">ff</span><span class="op" id="5413097">.</span><span class="ident" id="5413098">Magic</span>&nbsp;<span class="op" id="5413104">!=</span>&nbsp;<span class="ident" id="5413107">MagicFat</span>&nbsp;<span class="op" id="5413116">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5413120">//&nbsp;See&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;Mach-O&nbsp;file&nbsp;via&nbsp;its&nbsp;magic&nbsp;number.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5413186">//&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;little&nbsp;endian&nbsp;first&nbsp;though.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413240">var</span>&nbsp;<span class="ident" id="5413244">buf</span>&nbsp;<span class="op" id="5413248">[</span><span class="num" id="5413249">4</span><span class="op" id="5413250">]</span><span class="builtintype" id="5413251">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413258">binary</span><span class="op" id="5413264">.</span><span class="ident" id="5413265">BigEndian</span><span class="op" id="5413274">.</span><span class="ident" id="5413275">PutUint32</span><span class="op" id="5413284">(</span><span class="ident" id="5413285">buf</span><span class="op" id="5413288">[</span><span class="op" id="5413289">:</span><span class="op" id="5413290">]</span><span class="op" id="5413291">,</span>&nbsp;<span class="ident" id="5413293">ff</span><span class="op" id="5413295">.</span><span class="ident" id="5413296">Magic</span><span class="op" id="5413301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413305">leMagic</span>&nbsp;<span class="op" id="5413313">:=</span>&nbsp;<span class="ident" id="5413316">binary</span><span class="op" id="5413322">.</span><span class="ident" id="5413323">LittleEndian</span><span class="op" id="5413335">.</span><span class="ident" id="5413336">Uint32</span><span class="op" id="5413342">(</span><span class="ident" id="5413343">buf</span><span class="op" id="5413346">[</span><span class="op" id="5413347">:</span><span class="op" id="5413348">]</span><span class="op" id="5413349">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413353">if</span>&nbsp;<span class="ident" id="5413356">leMagic</span>&nbsp;<span class="op" id="5413364">==</span>&nbsp;<span class="ident" id="5413367">Magic32</span>&nbsp;<span class="op" id="5413375">||</span>&nbsp;<span class="ident" id="5413378">leMagic</span>&nbsp;<span class="op" id="5413386">==</span>&nbsp;<span class="ident" id="5413389">Magic64</span>&nbsp;<span class="op" id="5413397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413402">return</span>&nbsp;<span class="ident" id="5413409">nil</span><span class="op" id="5413412">,</span>&nbsp;<span class="ident" id="5413414">ErrNotFat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413426">}</span>&nbsp;<span class="keyword" id="5413428">else</span>&nbsp;<span class="op" id="5413433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413438">return</span>&nbsp;<span class="ident" id="5413445">nil</span><span class="op" id="5413448">,</span>&nbsp;<span class="op" id="5413450">&amp;</span><span class="ident" id="5413451">FormatError</span><span class="op" id="5413462">{</span><span class="num" id="5413463">0</span><span class="op" id="5413464">,</span>&nbsp;<span class="string" id="5413466">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5413488">,</span>&nbsp;<span class="ident" id="5413490">nil</span><span class="op" id="5413493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413497">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413503">offset</span>&nbsp;<span class="op" id="5413510">:=</span>&nbsp;<span class="ident" id="5413513">int64</span><span class="op" id="5413518">(</span><span class="num" id="5413519">4</span><span class="op" id="5413520">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5413524">//&nbsp;Read&nbsp;the&nbsp;number&nbsp;of&nbsp;FatArchHeaders&nbsp;that&nbsp;come&nbsp;after&nbsp;the&nbsp;fat_header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413594">var</span>&nbsp;<span class="ident" id="5413598">narch</span>&nbsp;<span class="builtintype" id="5413604">uint32</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413612">err</span>&nbsp;<span class="op" id="5413616">=</span>&nbsp;<span class="ident" id="5413618">binary</span><span class="op" id="5413624">.</span><span class="ident" id="5413625">Read</span><span class="op" id="5413629">(</span><span class="ident" id="5413630">sr</span><span class="op" id="5413632">,</span>&nbsp;<span class="ident" id="5413634">binary</span><span class="op" id="5413640">.</span><span class="ident" id="5413641">BigEndian</span><span class="op" id="5413650">,</span>&nbsp;<span class="op" id="5413652">&amp;</span><span class="ident" id="5413653">narch</span><span class="op" id="5413658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413661">if</span>&nbsp;<span class="ident" id="5413664">err</span>&nbsp;<span class="op" id="5413668">!=</span>&nbsp;<span class="ident" id="5413671">nil</span>&nbsp;<span class="op" id="5413675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413679">return</span>&nbsp;<span class="ident" id="5413686">nil</span><span class="op" id="5413689">,</span>&nbsp;<span class="op" id="5413691">&amp;</span><span class="ident" id="5413692">FormatError</span><span class="op" id="5413703">{</span><span class="ident" id="5413704">offset</span><span class="op" id="5413710">,</span>&nbsp;<span class="string" id="5413712">&#34;invalid&nbsp;fat_header&#34;</span><span class="op" id="5413732">,</span>&nbsp;<span class="ident" id="5413734">nil</span><span class="op" id="5413737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413743">offset</span>&nbsp;<span class="op" id="5413750">+=</span>&nbsp;<span class="num" id="5413753">4</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413757">if</span>&nbsp;<span class="ident" id="5413760">narch</span>&nbsp;<span class="op" id="5413766">&lt;</span>&nbsp;<span class="num" id="5413768">1</span>&nbsp;<span class="op" id="5413770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413774">return</span>&nbsp;<span class="ident" id="5413781">nil</span><span class="op" id="5413784">,</span>&nbsp;<span class="op" id="5413786">&amp;</span><span class="ident" id="5413787">FormatError</span><span class="op" id="5413798">{</span><span class="ident" id="5413799">offset</span><span class="op" id="5413805">,</span>&nbsp;<span class="string" id="5413807">&#34;file&nbsp;contains&nbsp;no&nbsp;images&#34;</span><span class="op" id="5413832">,</span>&nbsp;<span class="ident" id="5413834">nil</span><span class="op" id="5413837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5413844">//&nbsp;Combine&nbsp;the&nbsp;Cpu&nbsp;and&nbsp;SubCpu&nbsp;(both&nbsp;uint32)&nbsp;into&nbsp;a&nbsp;uint64&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5413916">//&nbsp;there&nbsp;are&nbsp;not&nbsp;duplicate&nbsp;architectures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413959">seenArches</span>&nbsp;<span class="op" id="5413970">:=</span>&nbsp;<span class="builtinfunc" id="5413973">make</span><span class="op" id="5413977">(</span><span class="keyword" id="5413978">map</span><span class="op" id="5413981">[</span><span class="ident" id="5413982">uint64</span><span class="op" id="5413988">]</span><span class="builtintype" id="5413989">bool</span><span class="op" id="5413993">,</span>&nbsp;<span class="ident" id="5413995">narch</span><span class="op" id="5414000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5414003">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;all&nbsp;images&nbsp;are&nbsp;for&nbsp;the&nbsp;same&nbsp;MH_&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414060">var</span>&nbsp;<span class="ident" id="5414064">machoType</span>&nbsp;<span class="ident" id="5414074">Type</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5414081">//&nbsp;Following&nbsp;the&nbsp;fat_header&nbsp;comes&nbsp;narch&nbsp;fat_arch&nbsp;structs&nbsp;that&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5414150">//&nbsp;Mach-O&nbsp;images&nbsp;further&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414189">ff</span><span class="op" id="5414191">.</span><span class="ident" id="5414192">Arches</span>&nbsp;<span class="op" id="5414199">=</span>&nbsp;<span class="builtinfunc" id="5414201">make</span><span class="op" id="5414205">(</span><span class="op" id="5414206">[</span><span class="op" id="5414207">]</span><span class="ident" id="5414208">FatArch</span><span class="op" id="5414215">,</span>&nbsp;<span class="ident" id="5414217">narch</span><span class="op" id="5414222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414225">for</span>&nbsp;<span class="ident" id="5414229">i</span>&nbsp;<span class="op" id="5414231">:=</span>&nbsp;<span class="builtintype" id="5414234">uint32</span><span class="op" id="5414240">(</span><span class="num" id="5414241">0</span><span class="op" id="5414242">)</span><span class="op" id="5414243">;</span>&nbsp;<span class="ident" id="5414245">i</span>&nbsp;<span class="op" id="5414247">&lt;</span>&nbsp;<span class="ident" id="5414249">narch</span><span class="op" id="5414254">;</span>&nbsp;<span class="ident" id="5414256">i</span><span class="op" id="5414257">++</span>&nbsp;<span class="op" id="5414260">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414264">fa</span>&nbsp;<span class="op" id="5414267">:=</span>&nbsp;<span class="op" id="5414270">&amp;</span><span class="ident" id="5414271">ff</span><span class="op" id="5414273">.</span><span class="ident" id="5414274">Arches</span><span class="op" id="5414280">[</span><span class="ident" id="5414281">i</span><span class="op" id="5414282">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414286">err</span>&nbsp;<span class="op" id="5414290">=</span>&nbsp;<span class="ident" id="5414292">binary</span><span class="op" id="5414298">.</span><span class="ident" id="5414299">Read</span><span class="op" id="5414303">(</span><span class="ident" id="5414304">sr</span><span class="op" id="5414306">,</span>&nbsp;<span class="ident" id="5414308">binary</span><span class="op" id="5414314">.</span><span class="ident" id="5414315">BigEndian</span><span class="op" id="5414324">,</span>&nbsp;<span class="op" id="5414326">&amp;</span><span class="ident" id="5414327">fa</span><span class="op" id="5414329">.</span><span class="ident" id="5414330">FatArchHeader</span><span class="op" id="5414343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414347">if</span>&nbsp;<span class="ident" id="5414350">err</span>&nbsp;<span class="op" id="5414354">!=</span>&nbsp;<span class="ident" id="5414357">nil</span>&nbsp;<span class="op" id="5414361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414366">return</span>&nbsp;<span class="ident" id="5414373">nil</span><span class="op" id="5414376">,</span>&nbsp;<span class="op" id="5414378">&amp;</span><span class="ident" id="5414379">FormatError</span><span class="op" id="5414390">{</span><span class="ident" id="5414391">offset</span><span class="op" id="5414397">,</span>&nbsp;<span class="string" id="5414399">&#34;invalid&nbsp;fat_arch&nbsp;header&#34;</span><span class="op" id="5414424">,</span>&nbsp;<span class="ident" id="5414426">nil</span><span class="op" id="5414429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5414433">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414437">offset</span>&nbsp;<span class="op" id="5414444">+=</span>&nbsp;<span class="ident" id="5414447">fatArchHeaderSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414468">fr</span>&nbsp;<span class="op" id="5414471">:=</span>&nbsp;<span class="ident" id="5414474">io</span><span class="op" id="5414476">.</span><span class="ident" id="5414477">NewSectionReader</span><span class="op" id="5414493">(</span><span class="ident" id="5414494">r</span><span class="op" id="5414495">,</span>&nbsp;<span class="ident" id="5414497">int64</span><span class="op" id="5414502">(</span><span class="ident" id="5414503">fa</span><span class="op" id="5414505">.</span><span class="ident" id="5414506">Offset</span><span class="op" id="5414512">)</span><span class="op" id="5414513">,</span>&nbsp;<span class="ident" id="5414515">int64</span><span class="op" id="5414520">(</span><span class="ident" id="5414521">fa</span><span class="op" id="5414523">.</span><span class="ident" id="5414524">Size</span><span class="op" id="5414528">)</span><span class="op" id="5414529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414533">fa</span><span class="op" id="5414535">.</span><span class="ident" id="5414536">File</span><span class="op" id="5414540">,</span>&nbsp;<span class="ident" id="5414542">err</span>&nbsp;<span class="op" id="5414546">=</span>&nbsp;<span class="ident" id="5414548">NewFile</span><span class="op" id="5414555">(</span><span class="ident" id="5414556">fr</span><span class="op" id="5414558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414562">if</span>&nbsp;<span class="ident" id="5414565">err</span>&nbsp;<span class="op" id="5414569">!=</span>&nbsp;<span class="ident" id="5414572">nil</span>&nbsp;<span class="op" id="5414576">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414581">return</span>&nbsp;<span class="ident" id="5414588">nil</span><span class="op" id="5414591">,</span>&nbsp;<span class="ident" id="5414593">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5414599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5414604">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;architecture&nbsp;for&nbsp;this&nbsp;image&nbsp;is&nbsp;not&nbsp;duplicate.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414669">seenArch</span>&nbsp;<span class="op" id="5414678">:=</span>&nbsp;<span class="op" id="5414681">(</span><span class="ident" id="5414682">uint64</span><span class="op" id="5414688">(</span><span class="ident" id="5414689">fa</span><span class="op" id="5414691">.</span><span class="ident" id="5414692">Cpu</span><span class="op" id="5414695">)</span>&nbsp;<span class="op" id="5414697">&lt;&lt;</span>&nbsp;<span class="num" id="5414700">32</span><span class="op" id="5414702">)</span>&nbsp;<span class="op" id="5414704">|</span>&nbsp;<span class="ident" id="5414706">uint64</span><span class="op" id="5414712">(</span><span class="ident" id="5414713">fa</span><span class="op" id="5414715">.</span><span class="ident" id="5414716">SubCpu</span><span class="op" id="5414722">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414726">if</span>&nbsp;<span class="ident" id="5414729">o</span><span class="op" id="5414730">,</span>&nbsp;<span class="ident" id="5414732">k</span>&nbsp;<span class="op" id="5414734">:=</span>&nbsp;<span class="ident" id="5414737">seenArches</span><span class="op" id="5414747">[</span><span class="ident" id="5414748">seenArch</span><span class="op" id="5414756">]</span><span class="op" id="5414757">;</span>&nbsp;<span class="ident" id="5414759">o</span>&nbsp;<span class="op" id="5414761">||</span>&nbsp;<span class="ident" id="5414764">k</span>&nbsp;<span class="op" id="5414766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414771">return</span>&nbsp;<span class="ident" id="5414778">nil</span><span class="op" id="5414781">,</span>&nbsp;<span class="op" id="5414783">&amp;</span><span class="ident" id="5414784">FormatError</span><span class="op" id="5414795">{</span><span class="ident" id="5414796">offset</span><span class="op" id="5414802">,</span>&nbsp;<span class="ident" id="5414804">fmt</span><span class="op" id="5414807">.</span><span class="ident" id="5414808">Sprintf</span><span class="op" id="5414815">(</span><span class="string" id="5414816">&#34;duplicate&nbsp;architecture&nbsp;cpu=%v,&nbsp;subcpu=%#x&#34;</span><span class="op" id="5414859">,</span>&nbsp;<span class="ident" id="5414861">fa</span><span class="op" id="5414863">.</span><span class="ident" id="5414864">Cpu</span><span class="op" id="5414867">,</span>&nbsp;<span class="ident" id="5414869">fa</span><span class="op" id="5414871">.</span><span class="ident" id="5414872">SubCpu</span><span class="op" id="5414878">)</span><span class="op" id="5414879">,</span>&nbsp;<span class="ident" id="5414881">nil</span><span class="op" id="5414884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5414888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5414892">seenArches</span><span class="op" id="5414902">[</span><span class="ident" id="5414903">seenArch</span><span class="op" id="5414911">]</span>&nbsp;<span class="op" id="5414913">=</span>&nbsp;<span class="builtintype" id="5414915">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5414923">//&nbsp;Make&nbsp;sure&nbsp;the&nbsp;Mach-O&nbsp;type&nbsp;matches&nbsp;that&nbsp;of&nbsp;the&nbsp;first&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414987">if</span>&nbsp;<span class="ident" id="5414990">i</span>&nbsp;<span class="op" id="5414992">==</span>&nbsp;<span class="num" id="5414995">0</span>&nbsp;<span class="op" id="5414997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415002">machoType</span>&nbsp;<span class="op" id="5415012">=</span>&nbsp;<span class="ident" id="5415014">fa</span><span class="op" id="5415016">.</span><span class="ident" id="5415017">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415024">}</span>&nbsp;<span class="keyword" id="5415026">else</span>&nbsp;<span class="op" id="5415031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415036">if</span>&nbsp;<span class="ident" id="5415039">fa</span><span class="op" id="5415041">.</span><span class="ident" id="5415042">Type</span>&nbsp;<span class="op" id="5415047">!=</span>&nbsp;<span class="ident" id="5415050">machoType</span>&nbsp;<span class="op" id="5415060">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415066">return</span>&nbsp;<span class="ident" id="5415073">nil</span><span class="op" id="5415076">,</span>&nbsp;<span class="op" id="5415078">&amp;</span><span class="ident" id="5415079">FormatError</span><span class="op" id="5415090">{</span><span class="ident" id="5415091">offset</span><span class="op" id="5415097">,</span>&nbsp;<span class="ident" id="5415099">fmt</span><span class="op" id="5415102">.</span><span class="ident" id="5415103">Sprintf</span><span class="op" id="5415110">(</span><span class="string" id="5415111">&#34;Mach-O&nbsp;type&nbsp;for&nbsp;architecture&nbsp;#%d&nbsp;(type=%#x)&nbsp;does&nbsp;not&nbsp;match&nbsp;first&nbsp;(type=%#x)&#34;</span><span class="op" id="5415188">,</span>&nbsp;<span class="ident" id="5415190">i</span><span class="op" id="5415191">,</span>&nbsp;<span class="ident" id="5415193">fa</span><span class="op" id="5415195">.</span><span class="ident" id="5415196">Type</span><span class="op" id="5415200">,</span>&nbsp;<span class="ident" id="5415202">machoType</span><span class="op" id="5415211">)</span><span class="op" id="5415212">,</span>&nbsp;<span class="ident" id="5415214">nil</span><span class="op" id="5415217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415233">return</span>&nbsp;<span class="op" id="5415240">&amp;</span><span class="ident" id="5415241">ff</span><span class="op" id="5415243">,</span>&nbsp;<span class="ident" id="5415245">nil</span><br>
<span class="lineno"></span><span class="op" id="5415249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5415252">//&nbsp;OpenFat&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O</span><br>
<span class="lineno"></span><span class="comment" id="5415334">//&nbsp;universal&nbsp;binary.</span><br>
<span class="lineno">125</span><span class="keyword" id="5415355">func</span>&nbsp;<span class="ident" id="5415360">OpenFat</span><span class="op" id="5415367">(</span><span class="ident" id="5415368">name</span>&nbsp;<span class="builtintype" id="5415373">string</span><span class="op" id="5415379">)</span>&nbsp;<span class="op" id="5415381">(</span><span class="ident" id="5415382">ff</span>&nbsp;<span class="op" id="5415385">*</span><span class="ident" id="5415386">FatFile</span><span class="op" id="5415393">,</span>&nbsp;<span class="ident" id="5415395">err</span>&nbsp;<span class="builtintype" id="5415399">error</span><span class="op" id="5415404">)</span>&nbsp;<span class="op" id="5415406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415409">f</span><span class="op" id="5415410">,</span>&nbsp;<span class="ident" id="5415412">err</span>&nbsp;<span class="op" id="5415416">:=</span>&nbsp;<span class="ident" id="5415419">os</span><span class="op" id="5415421">.</span><span class="ident" id="5415422">Open</span><span class="op" id="5415426">(</span><span class="ident" id="5415427">name</span><span class="op" id="5415431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415434">if</span>&nbsp;<span class="ident" id="5415437">err</span>&nbsp;<span class="op" id="5415441">!=</span>&nbsp;<span class="ident" id="5415444">nil</span>&nbsp;<span class="op" id="5415448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415452">return</span>&nbsp;<span class="ident" id="5415459">nil</span><span class="op" id="5415462">,</span>&nbsp;<span class="ident" id="5415464">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415469">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415472">ff</span><span class="op" id="5415474">,</span>&nbsp;<span class="ident" id="5415476">err</span>&nbsp;<span class="op" id="5415480">=</span>&nbsp;<span class="ident" id="5415482">NewFatFile</span><span class="op" id="5415492">(</span><span class="ident" id="5415493">f</span><span class="op" id="5415494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415497">if</span>&nbsp;<span class="ident" id="5415500">err</span>&nbsp;<span class="op" id="5415504">!=</span>&nbsp;<span class="ident" id="5415507">nil</span>&nbsp;<span class="op" id="5415511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415515">f</span><span class="op" id="5415516">.</span><span class="ident" id="5415517">Close</span><span class="op" id="5415522">(</span><span class="op" id="5415523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415527">return</span>&nbsp;<span class="ident" id="5415534">nil</span><span class="op" id="5415537">,</span>&nbsp;<span class="ident" id="5415539">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415544">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415547">ff</span><span class="op" id="5415549">.</span><span class="ident" id="5415550">closer</span>&nbsp;<span class="op" id="5415557">=</span>&nbsp;<span class="ident" id="5415559">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415562">return</span><br>
<span class="lineno"></span><span class="op" id="5415569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5415572">func</span>&nbsp;<span class="op" id="5415577">(</span><span class="ident" id="5415578">ff</span>&nbsp;<span class="op" id="5415581">*</span><span class="ident" id="5415582">FatFile</span><span class="op" id="5415589">)</span>&nbsp;<span class="ident" id="5415591">Close</span><span class="op" id="5415596">(</span><span class="op" id="5415597">)</span>&nbsp;<span class="builtintype" id="5415599">error</span>&nbsp;<span class="op" id="5415605">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415608">var</span>&nbsp;<span class="ident" id="5415612">err</span>&nbsp;<span class="builtintype" id="5415616">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415623">if</span>&nbsp;<span class="ident" id="5415626">ff</span><span class="op" id="5415628">.</span><span class="ident" id="5415629">closer</span>&nbsp;<span class="op" id="5415636">!=</span>&nbsp;<span class="ident" id="5415639">nil</span>&nbsp;<span class="op" id="5415643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415647">err</span>&nbsp;<span class="op" id="5415651">=</span>&nbsp;<span class="ident" id="5415653">ff</span><span class="op" id="5415655">.</span><span class="ident" id="5415656">closer</span><span class="op" id="5415662">.</span><span class="ident" id="5415663">Close</span><span class="op" id="5415668">(</span><span class="op" id="5415669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415673">ff</span><span class="op" id="5415675">.</span><span class="ident" id="5415676">closer</span>&nbsp;<span class="op" id="5415683">=</span>&nbsp;<span class="ident" id="5415685">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415690">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415693">return</span>&nbsp;<span class="ident" id="5415700">err</span><br>
<span class="lineno"></span><span class="op" id="5415704">}</span>
</div>
</body>
</html>
