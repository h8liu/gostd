<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6202835">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6202891">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6202945">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6202996">package</span>&nbsp;<span class="ident" id="6203004">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6203011">import</span>&nbsp;<span class="op" id="6203018">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6203021">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6203030">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6203040">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6203045">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6203048">type</span>&nbsp;<span class="ident" id="6203053">importReader</span>&nbsp;<span class="keyword" id="6203066">struct</span>&nbsp;<span class="op" id="6203073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203076">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203081">*</span><span class="ident" id="6203082">bufio</span><span class="op" id="6203087">.</span><span class="ident" id="6203088">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203096">buf</span>&nbsp;&nbsp;<span class="op" id="6203101">[</span><span class="op" id="6203102">]</span><span class="builtintype" id="6203103">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203109">peek</span>&nbsp;<span class="builtintype" id="6203114">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203120">err</span>&nbsp;&nbsp;<span class="builtintype" id="6203125">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203132">eof</span>&nbsp;&nbsp;<span class="builtintype" id="6203137">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203143">nerr</span>&nbsp;<span class="builtintype" id="6203148">int</span><br>
<span class="lineno">20</span><span class="op" id="6203152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6203155">func</span>&nbsp;<span class="ident" id="6203160">isIdent</span><span class="op" id="6203167">(</span><span class="ident" id="6203168">c</span>&nbsp;<span class="builtintype" id="6203170">byte</span><span class="op" id="6203174">)</span>&nbsp;<span class="builtintype" id="6203176">bool</span>&nbsp;<span class="op" id="6203181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203184">return</span>&nbsp;<span class="string" id="6203191">&#39;A&#39;</span>&nbsp;<span class="op" id="6203195">&lt;=</span>&nbsp;<span class="ident" id="6203198">c</span>&nbsp;<span class="op" id="6203200">&amp;&amp;</span>&nbsp;<span class="ident" id="6203203">c</span>&nbsp;<span class="op" id="6203205">&lt;=</span>&nbsp;<span class="string" id="6203208">&#39;Z&#39;</span>&nbsp;<span class="op" id="6203212">||</span>&nbsp;<span class="string" id="6203215">&#39;a&#39;</span>&nbsp;<span class="op" id="6203219">&lt;=</span>&nbsp;<span class="ident" id="6203222">c</span>&nbsp;<span class="op" id="6203224">&amp;&amp;</span>&nbsp;<span class="ident" id="6203227">c</span>&nbsp;<span class="op" id="6203229">&lt;=</span>&nbsp;<span class="string" id="6203232">&#39;z&#39;</span>&nbsp;<span class="op" id="6203236">||</span>&nbsp;<span class="string" id="6203239">&#39;0&#39;</span>&nbsp;<span class="op" id="6203243">&lt;=</span>&nbsp;<span class="ident" id="6203246">c</span>&nbsp;<span class="op" id="6203248">&amp;&amp;</span>&nbsp;<span class="ident" id="6203251">c</span>&nbsp;<span class="op" id="6203253">&lt;=</span>&nbsp;<span class="string" id="6203256">&#39;9&#39;</span>&nbsp;<span class="op" id="6203260">||</span>&nbsp;<span class="ident" id="6203263">c</span>&nbsp;<span class="op" id="6203265">==</span>&nbsp;<span class="string" id="6203268">&#39;_&#39;</span>&nbsp;<span class="op" id="6203272">||</span>&nbsp;<span class="ident" id="6203275">c</span>&nbsp;<span class="op" id="6203277">&gt;=</span>&nbsp;<span class="num" id="6203280">0x80</span><br>
<span class="lineno"></span><span class="op" id="6203285">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6203288">var</span>&nbsp;<span class="op" id="6203292">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203295">errSyntax</span>&nbsp;<span class="op" id="6203305">=</span>&nbsp;<span class="ident" id="6203307">errors</span><span class="op" id="6203313">.</span><span class="ident" id="6203314">New</span><span class="op" id="6203317">(</span><span class="string" id="6203318">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6203332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203335">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203345">=</span>&nbsp;<span class="ident" id="6203347">errors</span><span class="op" id="6203353">.</span><span class="ident" id="6203354">New</span><span class="op" id="6203357">(</span><span class="string" id="6203358">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="6203383">)</span><br>
<span class="lineno"></span><span class="op" id="6203385">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="6203388">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="6203483">func</span>&nbsp;<span class="op" id="6203488">(</span><span class="ident" id="6203489">r</span>&nbsp;<span class="op" id="6203491">*</span><span class="ident" id="6203492">importReader</span><span class="op" id="6203504">)</span>&nbsp;<span class="ident" id="6203506">syntaxError</span><span class="op" id="6203517">(</span><span class="op" id="6203518">)</span>&nbsp;<span class="op" id="6203520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203523">if</span>&nbsp;<span class="ident" id="6203526">r</span><span class="op" id="6203527">.</span><span class="ident" id="6203528">err</span>&nbsp;<span class="op" id="6203532">==</span>&nbsp;<span class="ident" id="6203535">nil</span>&nbsp;<span class="op" id="6203539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203543">r</span><span class="op" id="6203544">.</span><span class="ident" id="6203545">err</span>&nbsp;<span class="op" id="6203549">=</span>&nbsp;<span class="ident" id="6203551">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203562">}</span><br>
<span class="lineno"></span><span class="op" id="6203564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6203567">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6203648">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="6203722">func</span>&nbsp;<span class="op" id="6203727">(</span><span class="ident" id="6203728">r</span>&nbsp;<span class="op" id="6203730">*</span><span class="ident" id="6203731">importReader</span><span class="op" id="6203743">)</span>&nbsp;<span class="ident" id="6203745">readByte</span><span class="op" id="6203753">(</span><span class="op" id="6203754">)</span>&nbsp;<span class="builtintype" id="6203756">byte</span>&nbsp;<span class="op" id="6203761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203764">c</span><span class="op" id="6203765">,</span>&nbsp;<span class="ident" id="6203767">err</span>&nbsp;<span class="op" id="6203771">:=</span>&nbsp;<span class="ident" id="6203774">r</span><span class="op" id="6203775">.</span><span class="ident" id="6203776">b</span><span class="op" id="6203777">.</span><span class="ident" id="6203778">ReadByte</span><span class="op" id="6203786">(</span><span class="op" id="6203787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203790">if</span>&nbsp;<span class="ident" id="6203793">err</span>&nbsp;<span class="op" id="6203797">==</span>&nbsp;<span class="ident" id="6203800">nil</span>&nbsp;<span class="op" id="6203804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203808">r</span><span class="op" id="6203809">.</span><span class="ident" id="6203810">buf</span>&nbsp;<span class="op" id="6203814">=</span>&nbsp;<span class="builtinfunc" id="6203816">append</span><span class="op" id="6203822">(</span><span class="ident" id="6203823">r</span><span class="op" id="6203824">.</span><span class="ident" id="6203825">buf</span><span class="op" id="6203828">,</span>&nbsp;<span class="ident" id="6203830">c</span><span class="op" id="6203831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203835">if</span>&nbsp;<span class="ident" id="6203838">c</span>&nbsp;<span class="op" id="6203840">==</span>&nbsp;<span class="num" id="6203843">0</span>&nbsp;<span class="op" id="6203845">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203850">err</span>&nbsp;<span class="op" id="6203854">=</span>&nbsp;<span class="ident" id="6203856">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203871">if</span>&nbsp;<span class="ident" id="6203874">err</span>&nbsp;<span class="op" id="6203878">!=</span>&nbsp;<span class="ident" id="6203881">nil</span>&nbsp;<span class="op" id="6203885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203889">if</span>&nbsp;<span class="ident" id="6203892">err</span>&nbsp;<span class="op" id="6203896">==</span>&nbsp;<span class="ident" id="6203899">io</span><span class="op" id="6203901">.</span><span class="ident" id="6203902">EOF</span>&nbsp;<span class="op" id="6203906">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203911">r</span><span class="op" id="6203912">.</span><span class="ident" id="6203913">eof</span>&nbsp;<span class="op" id="6203917">=</span>&nbsp;<span class="ident" id="6203919">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203926">}</span>&nbsp;<span class="keyword" id="6203928">else</span>&nbsp;<span class="keyword" id="6203933">if</span>&nbsp;<span class="ident" id="6203936">r</span><span class="op" id="6203937">.</span><span class="ident" id="6203938">err</span>&nbsp;<span class="op" id="6203942">==</span>&nbsp;<span class="ident" id="6203945">nil</span>&nbsp;<span class="op" id="6203949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203954">r</span><span class="op" id="6203955">.</span><span class="ident" id="6203956">err</span>&nbsp;<span class="op" id="6203960">=</span>&nbsp;<span class="ident" id="6203962">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203972">c</span>&nbsp;<span class="op" id="6203974">=</span>&nbsp;<span class="num" id="6203976">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203982">return</span>&nbsp;<span class="ident" id="6203989">c</span><br>
<span class="lineno"></span><span class="op" id="6203991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6203994">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="6204082">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="6204150">func</span>&nbsp;<span class="op" id="6204155">(</span><span class="ident" id="6204156">r</span>&nbsp;<span class="op" id="6204158">*</span><span class="ident" id="6204159">importReader</span><span class="op" id="6204171">)</span>&nbsp;<span class="ident" id="6204173">peekByte</span><span class="op" id="6204181">(</span><span class="ident" id="6204182">skipSpace</span>&nbsp;<span class="builtintype" id="6204192">bool</span><span class="op" id="6204196">)</span>&nbsp;<span class="builtintype" id="6204198">byte</span>&nbsp;<span class="op" id="6204203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204206">if</span>&nbsp;<span class="ident" id="6204209">r</span><span class="op" id="6204210">.</span><span class="ident" id="6204211">err</span>&nbsp;<span class="op" id="6204215">!=</span>&nbsp;<span class="ident" id="6204218">nil</span>&nbsp;<span class="op" id="6204222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204226">if</span>&nbsp;<span class="ident" id="6204229">r</span><span class="op" id="6204230">.</span><span class="ident" id="6204231">nerr</span><span class="op" id="6204235">++</span><span class="op" id="6204237">;</span>&nbsp;<span class="ident" id="6204239">r</span><span class="op" id="6204240">.</span><span class="ident" id="6204241">nerr</span>&nbsp;<span class="op" id="6204246">&gt;</span>&nbsp;<span class="num" id="6204248">10000</span>&nbsp;<span class="op" id="6204254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6204259">panic</span><span class="op" id="6204264">(</span><span class="string" id="6204265">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="6204298">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204306">return</span>&nbsp;<span class="num" id="6204313">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204320">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204356">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204434">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204472">c</span>&nbsp;<span class="op" id="6204474">:=</span>&nbsp;<span class="ident" id="6204477">r</span><span class="op" id="6204478">.</span><span class="ident" id="6204479">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204485">if</span>&nbsp;<span class="ident" id="6204488">c</span>&nbsp;<span class="op" id="6204490">==</span>&nbsp;<span class="num" id="6204493">0</span>&nbsp;<span class="op" id="6204495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204499">c</span>&nbsp;<span class="op" id="6204501">=</span>&nbsp;<span class="ident" id="6204503">r</span><span class="op" id="6204504">.</span><span class="ident" id="6204505">readByte</span><span class="op" id="6204513">(</span><span class="op" id="6204514">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204520">for</span>&nbsp;<span class="ident" id="6204524">r</span><span class="op" id="6204525">.</span><span class="ident" id="6204526">err</span>&nbsp;<span class="op" id="6204530">==</span>&nbsp;<span class="ident" id="6204533">nil</span>&nbsp;<span class="op" id="6204537">&amp;&amp;</span>&nbsp;<span class="op" id="6204540">!</span><span class="ident" id="6204541">r</span><span class="op" id="6204542">.</span><span class="ident" id="6204543">eof</span>&nbsp;<span class="op" id="6204547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204551">if</span>&nbsp;<span class="ident" id="6204554">skipSpace</span>&nbsp;<span class="op" id="6204564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204569">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204642">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204696">switch</span>&nbsp;<span class="ident" id="6204703">c</span>&nbsp;<span class="op" id="6204705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204710">case</span>&nbsp;<span class="string" id="6204715">&#39;&nbsp;&#39;</span><span class="op" id="6204718">,</span>&nbsp;<span class="string" id="6204720">&#39;\f&#39;</span><span class="op" id="6204724">,</span>&nbsp;<span class="string" id="6204726">&#39;\t&#39;</span><span class="op" id="6204730">,</span>&nbsp;<span class="string" id="6204732">&#39;\r&#39;</span><span class="op" id="6204736">,</span>&nbsp;<span class="string" id="6204738">&#39;\n&#39;</span><span class="op" id="6204742">,</span>&nbsp;<span class="string" id="6204744">&#39;;&#39;</span><span class="op" id="6204747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204753">c</span>&nbsp;<span class="op" id="6204755">=</span>&nbsp;<span class="ident" id="6204757">r</span><span class="op" id="6204758">.</span><span class="ident" id="6204759">readByte</span><span class="op" id="6204767">(</span><span class="op" id="6204768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204774">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204787">case</span>&nbsp;<span class="string" id="6204792">&#39;/&#39;</span><span class="op" id="6204795">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204801">c</span>&nbsp;<span class="op" id="6204803">=</span>&nbsp;<span class="ident" id="6204805">r</span><span class="op" id="6204806">.</span><span class="ident" id="6204807">readByte</span><span class="op" id="6204815">(</span><span class="op" id="6204816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204822">if</span>&nbsp;<span class="ident" id="6204825">c</span>&nbsp;<span class="op" id="6204827">==</span>&nbsp;<span class="string" id="6204830">&#39;/&#39;</span>&nbsp;<span class="op" id="6204834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204841">for</span>&nbsp;<span class="ident" id="6204845">c</span>&nbsp;<span class="op" id="6204847">!=</span>&nbsp;<span class="string" id="6204850">&#39;\n&#39;</span>&nbsp;<span class="op" id="6204855">&amp;&amp;</span>&nbsp;<span class="ident" id="6204858">r</span><span class="op" id="6204859">.</span><span class="ident" id="6204860">err</span>&nbsp;<span class="op" id="6204864">==</span>&nbsp;<span class="ident" id="6204867">nil</span>&nbsp;<span class="op" id="6204871">&amp;&amp;</span>&nbsp;<span class="op" id="6204874">!</span><span class="ident" id="6204875">r</span><span class="op" id="6204876">.</span><span class="ident" id="6204877">eof</span>&nbsp;<span class="op" id="6204881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204889">c</span>&nbsp;<span class="op" id="6204891">=</span>&nbsp;<span class="ident" id="6204893">r</span><span class="op" id="6204894">.</span><span class="ident" id="6204895">readByte</span><span class="op" id="6204903">(</span><span class="op" id="6204904">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204917">}</span>&nbsp;<span class="keyword" id="6204919">else</span>&nbsp;<span class="keyword" id="6204924">if</span>&nbsp;<span class="ident" id="6204927">c</span>&nbsp;<span class="op" id="6204929">==</span>&nbsp;<span class="string" id="6204932">&#39;*&#39;</span>&nbsp;<span class="op" id="6204936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204943">var</span>&nbsp;<span class="ident" id="6204947">c1</span>&nbsp;<span class="builtintype" id="6204950">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204960">for</span>&nbsp;<span class="op" id="6204964">(</span><span class="ident" id="6204965">c</span>&nbsp;<span class="op" id="6204967">!=</span>&nbsp;<span class="string" id="6204970">&#39;*&#39;</span>&nbsp;<span class="op" id="6204974">||</span>&nbsp;<span class="ident" id="6204977">c1</span>&nbsp;<span class="op" id="6204980">!=</span>&nbsp;<span class="string" id="6204983">&#39;/&#39;</span><span class="op" id="6204986">)</span>&nbsp;<span class="op" id="6204988">&amp;&amp;</span>&nbsp;<span class="ident" id="6204991">r</span><span class="op" id="6204992">.</span><span class="ident" id="6204993">err</span>&nbsp;<span class="op" id="6204997">==</span>&nbsp;<span class="ident" id="6205000">nil</span>&nbsp;<span class="op" id="6205004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205012">if</span>&nbsp;<span class="ident" id="6205015">r</span><span class="op" id="6205016">.</span><span class="ident" id="6205017">eof</span>&nbsp;<span class="op" id="6205021">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205030">r</span><span class="op" id="6205031">.</span><span class="ident" id="6205032">syntaxError</span><span class="op" id="6205043">(</span><span class="op" id="6205044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205060">c</span><span class="op" id="6205061">,</span>&nbsp;<span class="ident" id="6205063">c1</span>&nbsp;<span class="op" id="6205066">=</span>&nbsp;<span class="ident" id="6205068">c1</span><span class="op" id="6205070">,</span>&nbsp;<span class="ident" id="6205072">r</span><span class="op" id="6205073">.</span><span class="ident" id="6205074">readByte</span><span class="op" id="6205082">(</span><span class="op" id="6205083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205096">}</span>&nbsp;<span class="keyword" id="6205098">else</span>&nbsp;<span class="op" id="6205103">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205110">r</span><span class="op" id="6205111">.</span><span class="ident" id="6205112">syntaxError</span><span class="op" id="6205123">(</span><span class="op" id="6205124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205136">c</span>&nbsp;<span class="op" id="6205138">=</span>&nbsp;<span class="ident" id="6205140">r</span><span class="op" id="6205141">.</span><span class="ident" id="6205142">readByte</span><span class="op" id="6205150">(</span><span class="op" id="6205151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205157">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205169">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205177">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205187">r</span><span class="op" id="6205188">.</span><span class="ident" id="6205189">peek</span>&nbsp;<span class="op" id="6205194">=</span>&nbsp;<span class="ident" id="6205196">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205199">return</span>&nbsp;<span class="ident" id="6205206">r</span><span class="op" id="6205207">.</span><span class="ident" id="6205208">peek</span><br>
<span class="lineno">110</span><span class="op" id="6205213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6205216">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="6205284">func</span>&nbsp;<span class="op" id="6205289">(</span><span class="ident" id="6205290">r</span>&nbsp;<span class="op" id="6205292">*</span><span class="ident" id="6205293">importReader</span><span class="op" id="6205305">)</span>&nbsp;<span class="ident" id="6205307">nextByte</span><span class="op" id="6205315">(</span><span class="ident" id="6205316">skipSpace</span>&nbsp;<span class="builtintype" id="6205326">bool</span><span class="op" id="6205330">)</span>&nbsp;<span class="builtintype" id="6205332">byte</span>&nbsp;<span class="op" id="6205337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205340">c</span>&nbsp;<span class="op" id="6205342">:=</span>&nbsp;<span class="ident" id="6205345">r</span><span class="op" id="6205346">.</span><span class="ident" id="6205347">peekByte</span><span class="op" id="6205355">(</span><span class="ident" id="6205356">skipSpace</span><span class="op" id="6205365">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205368">r</span><span class="op" id="6205369">.</span><span class="ident" id="6205370">peek</span>&nbsp;<span class="op" id="6205375">=</span>&nbsp;<span class="num" id="6205377">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205380">return</span>&nbsp;<span class="ident" id="6205387">c</span><br>
<span class="lineno"></span><span class="op" id="6205389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6205392">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="6205447">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6205517">func</span>&nbsp;<span class="op" id="6205522">(</span><span class="ident" id="6205523">r</span>&nbsp;<span class="op" id="6205525">*</span><span class="ident" id="6205526">importReader</span><span class="op" id="6205538">)</span>&nbsp;<span class="ident" id="6205540">readKeyword</span><span class="op" id="6205551">(</span><span class="ident" id="6205552">kw</span>&nbsp;<span class="builtintype" id="6205555">string</span><span class="op" id="6205561">)</span>&nbsp;<span class="op" id="6205563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205566">r</span><span class="op" id="6205567">.</span><span class="ident" id="6205568">peekByte</span><span class="op" id="6205576">(</span><span class="ident" id="6205577">true</span><span class="op" id="6205581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205584">for</span>&nbsp;<span class="ident" id="6205588">i</span>&nbsp;<span class="op" id="6205590">:=</span>&nbsp;<span class="num" id="6205593">0</span><span class="op" id="6205594">;</span>&nbsp;<span class="ident" id="6205596">i</span>&nbsp;<span class="op" id="6205598">&lt;</span>&nbsp;<span class="builtinfunc" id="6205600">len</span><span class="op" id="6205603">(</span><span class="ident" id="6205604">kw</span><span class="op" id="6205606">)</span><span class="op" id="6205607">;</span>&nbsp;<span class="ident" id="6205609">i</span><span class="op" id="6205610">++</span>&nbsp;<span class="op" id="6205613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205617">if</span>&nbsp;<span class="ident" id="6205620">r</span><span class="op" id="6205621">.</span><span class="ident" id="6205622">nextByte</span><span class="op" id="6205630">(</span><span class="ident" id="6205631">false</span><span class="op" id="6205636">)</span>&nbsp;<span class="op" id="6205638">!=</span>&nbsp;<span class="ident" id="6205641">kw</span><span class="op" id="6205643">[</span><span class="ident" id="6205644">i</span><span class="op" id="6205645">]</span>&nbsp;<span class="op" id="6205647">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205652">r</span><span class="op" id="6205653">.</span><span class="ident" id="6205654">syntaxError</span><span class="op" id="6205665">(</span><span class="op" id="6205666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205671">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205686">if</span>&nbsp;<span class="ident" id="6205689">isIdent</span><span class="op" id="6205696">(</span><span class="ident" id="6205697">r</span><span class="op" id="6205698">.</span><span class="ident" id="6205699">peekByte</span><span class="op" id="6205707">(</span><span class="ident" id="6205708">false</span><span class="op" id="6205713">)</span><span class="op" id="6205714">)</span>&nbsp;<span class="op" id="6205716">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205720">r</span><span class="op" id="6205721">.</span><span class="ident" id="6205722">syntaxError</span><span class="op" id="6205733">(</span><span class="op" id="6205734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205737">}</span><br>
<span class="lineno"></span><span class="op" id="6205739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6205742">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="6205791">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6205861">func</span>&nbsp;<span class="op" id="6205866">(</span><span class="ident" id="6205867">r</span>&nbsp;<span class="op" id="6205869">*</span><span class="ident" id="6205870">importReader</span><span class="op" id="6205882">)</span>&nbsp;<span class="ident" id="6205884">readIdent</span><span class="op" id="6205893">(</span><span class="op" id="6205894">)</span>&nbsp;<span class="op" id="6205896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205899">c</span>&nbsp;<span class="op" id="6205901">:=</span>&nbsp;<span class="ident" id="6205904">r</span><span class="op" id="6205905">.</span><span class="ident" id="6205906">peekByte</span><span class="op" id="6205914">(</span><span class="ident" id="6205915">true</span><span class="op" id="6205919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205922">if</span>&nbsp;<span class="op" id="6205925">!</span><span class="ident" id="6205926">isIdent</span><span class="op" id="6205933">(</span><span class="ident" id="6205934">c</span><span class="op" id="6205935">)</span>&nbsp;<span class="op" id="6205937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205941">r</span><span class="op" id="6205942">.</span><span class="ident" id="6205943">syntaxError</span><span class="op" id="6205954">(</span><span class="op" id="6205955">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205959">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205970">for</span>&nbsp;<span class="ident" id="6205974">isIdent</span><span class="op" id="6205981">(</span><span class="ident" id="6205982">r</span><span class="op" id="6205983">.</span><span class="ident" id="6205984">peekByte</span><span class="op" id="6205992">(</span><span class="ident" id="6205993">false</span><span class="op" id="6205998">)</span><span class="op" id="6205999">)</span>&nbsp;<span class="op" id="6206001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206005">r</span><span class="op" id="6206006">.</span><span class="ident" id="6206007">peek</span>&nbsp;<span class="op" id="6206012">=</span>&nbsp;<span class="num" id="6206014">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206017">}</span><br>
<span class="lineno">145</span><span class="op" id="6206019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6206022">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="6206082">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6206153">func</span>&nbsp;<span class="op" id="6206158">(</span><span class="ident" id="6206159">r</span>&nbsp;<span class="op" id="6206161">*</span><span class="ident" id="6206162">importReader</span><span class="op" id="6206174">)</span>&nbsp;<span class="ident" id="6206176">readString</span><span class="op" id="6206186">(</span><span class="op" id="6206187">)</span>&nbsp;<span class="op" id="6206189">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206192">switch</span>&nbsp;<span class="ident" id="6206199">r</span><span class="op" id="6206200">.</span><span class="ident" id="6206201">nextByte</span><span class="op" id="6206209">(</span><span class="ident" id="6206210">true</span><span class="op" id="6206214">)</span>&nbsp;<span class="op" id="6206216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206219">case</span>&nbsp;<span class="string" id="6206224">&#39;`&#39;</span><span class="op" id="6206227">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206231">for</span>&nbsp;<span class="ident" id="6206235">r</span><span class="op" id="6206236">.</span><span class="ident" id="6206237">err</span>&nbsp;<span class="op" id="6206241">==</span>&nbsp;<span class="ident" id="6206244">nil</span>&nbsp;<span class="op" id="6206248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206253">if</span>&nbsp;<span class="ident" id="6206256">r</span><span class="op" id="6206257">.</span><span class="ident" id="6206258">nextByte</span><span class="op" id="6206266">(</span><span class="ident" id="6206267">false</span><span class="op" id="6206272">)</span>&nbsp;<span class="op" id="6206274">==</span>&nbsp;<span class="string" id="6206277">&#39;`&#39;</span>&nbsp;<span class="op" id="6206281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206287">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206301">if</span>&nbsp;<span class="ident" id="6206304">r</span><span class="op" id="6206305">.</span><span class="ident" id="6206306">eof</span>&nbsp;<span class="op" id="6206310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206316">r</span><span class="op" id="6206317">.</span><span class="ident" id="6206318">syntaxError</span><span class="op" id="6206329">(</span><span class="op" id="6206330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206339">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206342">case</span>&nbsp;<span class="string" id="6206347">&#39;&#34;&#39;</span><span class="op" id="6206350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206354">for</span>&nbsp;<span class="ident" id="6206358">r</span><span class="op" id="6206359">.</span><span class="ident" id="6206360">err</span>&nbsp;<span class="op" id="6206364">==</span>&nbsp;<span class="ident" id="6206367">nil</span>&nbsp;<span class="op" id="6206371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206376">c</span>&nbsp;<span class="op" id="6206378">:=</span>&nbsp;<span class="ident" id="6206381">r</span><span class="op" id="6206382">.</span><span class="ident" id="6206383">nextByte</span><span class="op" id="6206391">(</span><span class="ident" id="6206392">false</span><span class="op" id="6206397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206402">if</span>&nbsp;<span class="ident" id="6206405">c</span>&nbsp;<span class="op" id="6206407">==</span>&nbsp;<span class="string" id="6206410">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6206414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206420">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206434">if</span>&nbsp;<span class="ident" id="6206437">r</span><span class="op" id="6206438">.</span><span class="ident" id="6206439">eof</span>&nbsp;<span class="op" id="6206443">||</span>&nbsp;<span class="ident" id="6206446">c</span>&nbsp;<span class="op" id="6206448">==</span>&nbsp;<span class="string" id="6206451">&#39;\n&#39;</span>&nbsp;<span class="op" id="6206456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206462">r</span><span class="op" id="6206463">.</span><span class="ident" id="6206464">syntaxError</span><span class="op" id="6206475">(</span><span class="op" id="6206476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206486">if</span>&nbsp;<span class="ident" id="6206489">c</span>&nbsp;<span class="op" id="6206491">==</span>&nbsp;<span class="string" id="6206494">&#39;\\&#39;</span>&nbsp;<span class="op" id="6206499">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206505">r</span><span class="op" id="6206506">.</span><span class="ident" id="6206507">nextByte</span><span class="op" id="6206515">(</span><span class="ident" id="6206516">false</span><span class="op" id="6206521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206533">default</span><span class="op" id="6206540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206544">r</span><span class="op" id="6206545">.</span><span class="ident" id="6206546">syntaxError</span><span class="op" id="6206557">(</span><span class="op" id="6206558">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206561">}</span><br>
<span class="lineno"></span><span class="op" id="6206563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6206566">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="6206653">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="6206672">func</span>&nbsp;<span class="op" id="6206677">(</span><span class="ident" id="6206678">r</span>&nbsp;<span class="op" id="6206680">*</span><span class="ident" id="6206681">importReader</span><span class="op" id="6206693">)</span>&nbsp;<span class="ident" id="6206695">readImport</span><span class="op" id="6206705">(</span><span class="op" id="6206706">)</span>&nbsp;<span class="op" id="6206708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206711">c</span>&nbsp;<span class="op" id="6206713">:=</span>&nbsp;<span class="ident" id="6206716">r</span><span class="op" id="6206717">.</span><span class="ident" id="6206718">peekByte</span><span class="op" id="6206726">(</span><span class="ident" id="6206727">true</span><span class="op" id="6206731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206734">if</span>&nbsp;<span class="ident" id="6206737">c</span>&nbsp;<span class="op" id="6206739">==</span>&nbsp;<span class="string" id="6206742">&#39;.&#39;</span>&nbsp;<span class="op" id="6206746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206750">r</span><span class="op" id="6206751">.</span><span class="ident" id="6206752">peek</span>&nbsp;<span class="op" id="6206757">=</span>&nbsp;<span class="num" id="6206759">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206762">}</span>&nbsp;<span class="keyword" id="6206764">else</span>&nbsp;<span class="keyword" id="6206769">if</span>&nbsp;<span class="ident" id="6206772">isIdent</span><span class="op" id="6206779">(</span><span class="ident" id="6206780">c</span><span class="op" id="6206781">)</span>&nbsp;<span class="op" id="6206783">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206787">r</span><span class="op" id="6206788">.</span><span class="ident" id="6206789">readIdent</span><span class="op" id="6206798">(</span><span class="op" id="6206799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206805">r</span><span class="op" id="6206806">.</span><span class="ident" id="6206807">readString</span><span class="op" id="6206817">(</span><span class="op" id="6206818">)</span><br>
<span class="lineno"></span><span class="op" id="6206820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="6206823">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="6206901">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6206935">func</span>&nbsp;<span class="ident" id="6206940">readComments</span><span class="op" id="6206952">(</span><span class="ident" id="6206953">f</span>&nbsp;<span class="ident" id="6206955">io</span><span class="op" id="6206957">.</span><span class="ident" id="6206958">Reader</span><span class="op" id="6206964">)</span>&nbsp;<span class="op" id="6206966">(</span><span class="op" id="6206967">[</span><span class="op" id="6206968">]</span><span class="builtintype" id="6206969">byte</span><span class="op" id="6206973">,</span>&nbsp;<span class="builtintype" id="6206975">error</span><span class="op" id="6206980">)</span>&nbsp;<span class="op" id="6206982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206985">r</span>&nbsp;<span class="op" id="6206987">:=</span>&nbsp;<span class="op" id="6206990">&amp;</span><span class="ident" id="6206991">importReader</span><span class="op" id="6207003">{</span><span class="ident" id="6207004">b</span><span class="op" id="6207005">:</span>&nbsp;<span class="ident" id="6207007">bufio</span><span class="op" id="6207012">.</span><span class="ident" id="6207013">NewReader</span><span class="op" id="6207022">(</span><span class="ident" id="6207023">f</span><span class="op" id="6207024">)</span><span class="op" id="6207025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207028">r</span><span class="op" id="6207029">.</span><span class="ident" id="6207030">peekByte</span><span class="op" id="6207038">(</span><span class="ident" id="6207039">true</span><span class="op" id="6207043">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207046">if</span>&nbsp;<span class="ident" id="6207049">r</span><span class="op" id="6207050">.</span><span class="ident" id="6207051">err</span>&nbsp;<span class="op" id="6207055">==</span>&nbsp;<span class="ident" id="6207058">nil</span>&nbsp;<span class="op" id="6207062">&amp;&amp;</span>&nbsp;<span class="op" id="6207065">!</span><span class="ident" id="6207066">r</span><span class="op" id="6207067">.</span><span class="ident" id="6207068">eof</span>&nbsp;<span class="op" id="6207072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207076">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207147">r</span><span class="op" id="6207148">.</span><span class="ident" id="6207149">buf</span>&nbsp;<span class="op" id="6207153">=</span>&nbsp;<span class="ident" id="6207155">r</span><span class="op" id="6207156">.</span><span class="ident" id="6207157">buf</span><span class="op" id="6207160">[</span><span class="op" id="6207161">:</span><span class="builtinfunc" id="6207162">len</span><span class="op" id="6207165">(</span><span class="ident" id="6207166">r</span><span class="op" id="6207167">.</span><span class="ident" id="6207168">buf</span><span class="op" id="6207171">)</span><span class="op" id="6207172">-</span><span class="num" id="6207173">1</span><span class="op" id="6207174">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207180">return</span>&nbsp;<span class="ident" id="6207187">r</span><span class="op" id="6207188">.</span><span class="ident" id="6207189">buf</span><span class="op" id="6207192">,</span>&nbsp;<span class="ident" id="6207194">r</span><span class="op" id="6207195">.</span><span class="ident" id="6207196">err</span><br>
<span class="lineno">200</span><span class="op" id="6207200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6207203">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="6207284">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="6207348">func</span>&nbsp;<span class="ident" id="6207353">readImports</span><span class="op" id="6207364">(</span><span class="ident" id="6207365">f</span>&nbsp;<span class="ident" id="6207367">io</span><span class="op" id="6207369">.</span><span class="ident" id="6207370">Reader</span><span class="op" id="6207376">,</span>&nbsp;<span class="ident" id="6207378">reportSyntaxError</span>&nbsp;<span class="builtintype" id="6207396">bool</span><span class="op" id="6207400">)</span>&nbsp;<span class="op" id="6207402">(</span><span class="op" id="6207403">[</span><span class="op" id="6207404">]</span><span class="builtintype" id="6207405">byte</span><span class="op" id="6207409">,</span>&nbsp;<span class="builtintype" id="6207411">error</span><span class="op" id="6207416">)</span>&nbsp;<span class="op" id="6207418">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207421">r</span>&nbsp;<span class="op" id="6207423">:=</span>&nbsp;<span class="op" id="6207426">&amp;</span><span class="ident" id="6207427">importReader</span><span class="op" id="6207439">{</span><span class="ident" id="6207440">b</span><span class="op" id="6207441">:</span>&nbsp;<span class="ident" id="6207443">bufio</span><span class="op" id="6207448">.</span><span class="ident" id="6207449">NewReader</span><span class="op" id="6207458">(</span><span class="ident" id="6207459">f</span><span class="op" id="6207460">)</span><span class="op" id="6207461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207465">r</span><span class="op" id="6207466">.</span><span class="ident" id="6207467">readKeyword</span><span class="op" id="6207478">(</span><span class="string" id="6207479">&#34;package&#34;</span><span class="op" id="6207488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207491">r</span><span class="op" id="6207492">.</span><span class="ident" id="6207493">readIdent</span><span class="op" id="6207502">(</span><span class="op" id="6207503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207506">for</span>&nbsp;<span class="ident" id="6207510">r</span><span class="op" id="6207511">.</span><span class="ident" id="6207512">peekByte</span><span class="op" id="6207520">(</span><span class="ident" id="6207521">true</span><span class="op" id="6207525">)</span>&nbsp;<span class="op" id="6207527">==</span>&nbsp;<span class="string" id="6207530">&#39;i&#39;</span>&nbsp;<span class="op" id="6207534">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207538">r</span><span class="op" id="6207539">.</span><span class="ident" id="6207540">readKeyword</span><span class="op" id="6207551">(</span><span class="string" id="6207552">&#34;import&#34;</span><span class="op" id="6207560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207564">if</span>&nbsp;<span class="ident" id="6207567">r</span><span class="op" id="6207568">.</span><span class="ident" id="6207569">peekByte</span><span class="op" id="6207577">(</span><span class="ident" id="6207578">true</span><span class="op" id="6207582">)</span>&nbsp;<span class="op" id="6207584">==</span>&nbsp;<span class="string" id="6207587">&#39;(&#39;</span>&nbsp;<span class="op" id="6207591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207596">r</span><span class="op" id="6207597">.</span><span class="ident" id="6207598">nextByte</span><span class="op" id="6207606">(</span><span class="ident" id="6207607">false</span><span class="op" id="6207612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207617">for</span>&nbsp;<span class="ident" id="6207621">r</span><span class="op" id="6207622">.</span><span class="ident" id="6207623">peekByte</span><span class="op" id="6207631">(</span><span class="ident" id="6207632">true</span><span class="op" id="6207636">)</span>&nbsp;<span class="op" id="6207638">!=</span>&nbsp;<span class="string" id="6207641">&#39;)&#39;</span>&nbsp;<span class="op" id="6207645">&amp;&amp;</span>&nbsp;<span class="ident" id="6207648">r</span><span class="op" id="6207649">.</span><span class="ident" id="6207650">err</span>&nbsp;<span class="op" id="6207654">==</span>&nbsp;<span class="ident" id="6207657">nil</span>&nbsp;<span class="op" id="6207661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207667">r</span><span class="op" id="6207668">.</span><span class="ident" id="6207669">readImport</span><span class="op" id="6207679">(</span><span class="op" id="6207680">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207690">r</span><span class="op" id="6207691">.</span><span class="ident" id="6207692">nextByte</span><span class="op" id="6207700">(</span><span class="ident" id="6207701">false</span><span class="op" id="6207706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207710">}</span>&nbsp;<span class="keyword" id="6207712">else</span>&nbsp;<span class="op" id="6207717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207722">r</span><span class="op" id="6207723">.</span><span class="ident" id="6207724">readImport</span><span class="op" id="6207734">(</span><span class="op" id="6207735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207739">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207746">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207831">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207921">if</span>&nbsp;<span class="ident" id="6207924">r</span><span class="op" id="6207925">.</span><span class="ident" id="6207926">err</span>&nbsp;<span class="op" id="6207930">==</span>&nbsp;<span class="ident" id="6207933">nil</span>&nbsp;<span class="op" id="6207937">&amp;&amp;</span>&nbsp;<span class="op" id="6207940">!</span><span class="ident" id="6207941">r</span><span class="op" id="6207942">.</span><span class="ident" id="6207943">eof</span>&nbsp;<span class="op" id="6207947">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207951">return</span>&nbsp;<span class="ident" id="6207958">r</span><span class="op" id="6207959">.</span><span class="ident" id="6207960">buf</span><span class="op" id="6207963">[</span><span class="op" id="6207964">:</span><span class="builtinfunc" id="6207965">len</span><span class="op" id="6207968">(</span><span class="ident" id="6207969">r</span><span class="op" id="6207970">.</span><span class="ident" id="6207971">buf</span><span class="op" id="6207974">)</span><span class="op" id="6207975">-</span><span class="num" id="6207976">1</span><span class="op" id="6207977">]</span><span class="op" id="6207978">,</span>&nbsp;<span class="ident" id="6207980">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207989">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6208058">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208125">if</span>&nbsp;<span class="ident" id="6208128">r</span><span class="op" id="6208129">.</span><span class="ident" id="6208130">err</span>&nbsp;<span class="op" id="6208134">==</span>&nbsp;<span class="ident" id="6208137">errSyntax</span>&nbsp;<span class="op" id="6208147">&amp;&amp;</span>&nbsp;<span class="op" id="6208150">!</span><span class="ident" id="6208151">reportSyntaxError</span>&nbsp;<span class="op" id="6208169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208173">r</span><span class="op" id="6208174">.</span><span class="ident" id="6208175">err</span>&nbsp;<span class="op" id="6208179">=</span>&nbsp;<span class="ident" id="6208181">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208187">for</span>&nbsp;<span class="ident" id="6208191">r</span><span class="op" id="6208192">.</span><span class="ident" id="6208193">err</span>&nbsp;<span class="op" id="6208197">==</span>&nbsp;<span class="ident" id="6208200">nil</span>&nbsp;<span class="op" id="6208204">&amp;&amp;</span>&nbsp;<span class="op" id="6208207">!</span><span class="ident" id="6208208">r</span><span class="op" id="6208209">.</span><span class="ident" id="6208210">eof</span>&nbsp;<span class="op" id="6208214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208219">r</span><span class="op" id="6208220">.</span><span class="ident" id="6208221">readByte</span><span class="op" id="6208229">(</span><span class="op" id="6208230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208234">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208241">return</span>&nbsp;<span class="ident" id="6208248">r</span><span class="op" id="6208249">.</span><span class="ident" id="6208250">buf</span><span class="op" id="6208253">,</span>&nbsp;<span class="ident" id="6208255">r</span><span class="op" id="6208256">.</span><span class="ident" id="6208257">err</span><br>
<span class="lineno"></span><span class="op" id="6208261">}</span>
</div>
</body>
</html>
