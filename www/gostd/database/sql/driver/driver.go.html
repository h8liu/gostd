<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3259621">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3259676">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3259730">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3259781">//&nbsp;Package&nbsp;driver&nbsp;defines&nbsp;interfaces&nbsp;to&nbsp;be&nbsp;implemented&nbsp;by&nbsp;database</span><br>
<span class="lineno"></span><span class="comment" id="3259848">//&nbsp;drivers&nbsp;as&nbsp;used&nbsp;by&nbsp;package&nbsp;sql.</span><br>
<span class="lineno"></span><span class="comment" id="3259883">//</span><br>
<span class="lineno"></span><span class="comment" id="3259886">//&nbsp;Most&nbsp;code&nbsp;should&nbsp;use&nbsp;package&nbsp;sql.</span><br>
<span class="lineno"></span><span class="keyword" id="3259923">package</span>&nbsp;<span class="ident" id="3259931">driver</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3259939">import</span>&nbsp;<span class="string" id="3259946">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3259956">//&nbsp;Value&nbsp;is&nbsp;a&nbsp;value&nbsp;that&nbsp;drivers&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;handle.</span><br>
<span class="lineno"></span><span class="comment" id="3260013">//&nbsp;It&nbsp;is&nbsp;either&nbsp;nil&nbsp;or&nbsp;an&nbsp;instance&nbsp;of&nbsp;one&nbsp;of&nbsp;these&nbsp;types:</span><br>
<span class="lineno">15</span><span class="comment" id="3260071">//</span><br>
<span class="lineno"></span><span class="comment" id="3260074">//&nbsp;&nbsp;&nbsp;int64</span><br>
<span class="lineno"></span><span class="comment" id="3260085">//&nbsp;&nbsp;&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="3260098">//&nbsp;&nbsp;&nbsp;bool</span><br>
<span class="lineno"></span><span class="comment" id="3260108">//&nbsp;&nbsp;&nbsp;[]byte</span><br>
<span class="lineno">20</span><span class="comment" id="3260120">//&nbsp;&nbsp;&nbsp;string&nbsp;&nbsp;&nbsp;[*]&nbsp;everywhere&nbsp;except&nbsp;from&nbsp;Rows.Next.</span><br>
<span class="lineno"></span><span class="comment" id="3260172">//&nbsp;&nbsp;&nbsp;time.Time</span><br>
<span class="lineno"></span><span class="keyword" id="3260187">type</span>&nbsp;<span class="ident" id="3260192">Value</span>&nbsp;<span class="keyword" id="3260198">interface</span><span class="op" id="3260207">{</span><span class="op" id="3260208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3260211">//&nbsp;Driver&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;must&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;database</span><br>
<span class="lineno">25</span><span class="comment" id="3260277">//&nbsp;driver.</span><br>
<span class="lineno"></span><span class="keyword" id="3260288">type</span>&nbsp;<span class="ident" id="3260293">Driver</span>&nbsp;<span class="keyword" id="3260300">interface</span>&nbsp;<span class="op" id="3260310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260313">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;database.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260364">//&nbsp;The&nbsp;name&nbsp;is&nbsp;a&nbsp;string&nbsp;in&nbsp;a&nbsp;driver-specific&nbsp;format.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260418">//</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260422">//&nbsp;Open&nbsp;may&nbsp;return&nbsp;a&nbsp;cached&nbsp;connection&nbsp;(one&nbsp;previously</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260478">//&nbsp;closed),&nbsp;but&nbsp;doing&nbsp;so&nbsp;is&nbsp;unnecessary;&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260536">//&nbsp;maintains&nbsp;a&nbsp;pool&nbsp;of&nbsp;idle&nbsp;connections&nbsp;for&nbsp;efficient&nbsp;re-use.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260599">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260603">//&nbsp;The&nbsp;returned&nbsp;connection&nbsp;is&nbsp;only&nbsp;used&nbsp;by&nbsp;one&nbsp;goroutine&nbsp;at&nbsp;a</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260666">//&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260676">Open</span><span class="op" id="3260680">(</span><span class="ident" id="3260681">name</span>&nbsp;<span class="builtintype" id="3260686">string</span><span class="op" id="3260692">)</span>&nbsp;<span class="op" id="3260694">(</span><span class="ident" id="3260695">Conn</span><span class="op" id="3260699">,</span>&nbsp;<span class="builtintype" id="3260701">error</span><span class="op" id="3260706">)</span><br>
<span class="lineno"></span><span class="op" id="3260708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3260711">//&nbsp;ErrSkip&nbsp;may&nbsp;be&nbsp;returned&nbsp;by&nbsp;some&nbsp;optional&nbsp;interfaces&#39;&nbsp;methods&nbsp;to</span><br>
<span class="lineno">40</span><span class="comment" id="3260778">//&nbsp;indicate&nbsp;at&nbsp;runtime&nbsp;that&nbsp;the&nbsp;fast&nbsp;path&nbsp;is&nbsp;unavailable&nbsp;and&nbsp;the&nbsp;sql</span><br>
<span class="lineno"></span><span class="comment" id="3260847">//&nbsp;package&nbsp;should&nbsp;continue&nbsp;as&nbsp;if&nbsp;the&nbsp;optional&nbsp;interface&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3260911">//&nbsp;implemented.&nbsp;ErrSkip&nbsp;is&nbsp;only&nbsp;supported&nbsp;where&nbsp;explicitly</span><br>
<span class="lineno"></span><span class="comment" id="3260970">//&nbsp;documented.</span><br>
<span class="lineno"></span><span class="keyword" id="3260985">var</span>&nbsp;<span class="ident" id="3260989">ErrSkip</span>&nbsp;<span class="op" id="3260997">=</span>&nbsp;<span class="ident" id="3260999">errors</span><span class="op" id="3261005">.</span><span class="ident" id="3261006">New</span><span class="op" id="3261009">(</span><span class="string" id="3261010">&#34;driver:&nbsp;skip&nbsp;fast-path;&nbsp;continue&nbsp;as&nbsp;if&nbsp;unimplemented&#34;</span><span class="op" id="3261064">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="3261067">//&nbsp;ErrBadConn&nbsp;should&nbsp;be&nbsp;returned&nbsp;by&nbsp;a&nbsp;driver&nbsp;to&nbsp;signal&nbsp;to&nbsp;the&nbsp;sql</span><br>
<span class="lineno"></span><span class="comment" id="3261133">//&nbsp;package&nbsp;that&nbsp;a&nbsp;driver.Conn&nbsp;is&nbsp;in&nbsp;a&nbsp;bad&nbsp;state&nbsp;(such&nbsp;as&nbsp;the&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="3261201">//&nbsp;having&nbsp;earlier&nbsp;closed&nbsp;the&nbsp;connection)&nbsp;and&nbsp;the&nbsp;sql&nbsp;package&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="3261269">//&nbsp;retry&nbsp;on&nbsp;a&nbsp;new&nbsp;connection.</span><br>
<span class="lineno">50</span><span class="comment" id="3261299">//</span><br>
<span class="lineno"></span><span class="comment" id="3261302">//&nbsp;To&nbsp;prevent&nbsp;duplicate&nbsp;operations,&nbsp;ErrBadConn&nbsp;should&nbsp;NOT&nbsp;be&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="3261372">//&nbsp;if&nbsp;there&#39;s&nbsp;a&nbsp;possibility&nbsp;that&nbsp;the&nbsp;database&nbsp;server&nbsp;might&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="3261436">//&nbsp;performed&nbsp;the&nbsp;operation.&nbsp;Even&nbsp;if&nbsp;the&nbsp;server&nbsp;sends&nbsp;back&nbsp;an&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="3261504">//&nbsp;you&nbsp;shouldn&#39;t&nbsp;return&nbsp;ErrBadConn.</span><br>
<span class="lineno">55</span><span class="keyword" id="3261540">var</span>&nbsp;<span class="ident" id="3261544">ErrBadConn</span>&nbsp;<span class="op" id="3261555">=</span>&nbsp;<span class="ident" id="3261557">errors</span><span class="op" id="3261563">.</span><span class="ident" id="3261564">New</span><span class="op" id="3261567">(</span><span class="string" id="3261568">&#34;driver:&nbsp;bad&nbsp;connection&#34;</span><span class="op" id="3261592">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3261595">//&nbsp;Execer&nbsp;is&nbsp;an&nbsp;optional&nbsp;interface&nbsp;that&nbsp;may&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="comment" id="3261665">//</span><br>
<span class="lineno"></span><span class="comment" id="3261668">//&nbsp;If&nbsp;a&nbsp;Conn&nbsp;does&nbsp;not&nbsp;implement&nbsp;Execer,&nbsp;the&nbsp;sql&nbsp;package&#39;s&nbsp;DB.Exec&nbsp;will</span><br>
<span class="lineno">60</span><span class="comment" id="3261739">//&nbsp;first&nbsp;prepare&nbsp;a&nbsp;query,&nbsp;execute&nbsp;the&nbsp;statement,&nbsp;and&nbsp;then&nbsp;close&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3261807">//&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="3261821">//</span><br>
<span class="lineno"></span><span class="comment" id="3261824">//&nbsp;Exec&nbsp;may&nbsp;return&nbsp;ErrSkip.</span><br>
<span class="lineno"></span><span class="keyword" id="3261852">type</span>&nbsp;<span class="ident" id="3261857">Execer</span>&nbsp;<span class="keyword" id="3261864">interface</span>&nbsp;<span class="op" id="3261874">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261877">Exec</span><span class="op" id="3261881">(</span><span class="ident" id="3261882">query</span>&nbsp;<span class="builtintype" id="3261888">string</span><span class="op" id="3261894">,</span>&nbsp;<span class="ident" id="3261896">args</span>&nbsp;<span class="op" id="3261901">[</span><span class="op" id="3261902">]</span><span class="ident" id="3261903">Value</span><span class="op" id="3261908">)</span>&nbsp;<span class="op" id="3261910">(</span><span class="ident" id="3261911">Result</span><span class="op" id="3261917">,</span>&nbsp;<span class="builtintype" id="3261919">error</span><span class="op" id="3261924">)</span><br>
<span class="lineno"></span><span class="op" id="3261926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3261929">//&nbsp;Queryer&nbsp;is&nbsp;an&nbsp;optional&nbsp;interface&nbsp;that&nbsp;may&nbsp;be&nbsp;implemented&nbsp;by&nbsp;a&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="comment" id="3262000">//</span><br>
<span class="lineno">70</span><span class="comment" id="3262003">//&nbsp;If&nbsp;a&nbsp;Conn&nbsp;does&nbsp;not&nbsp;implement&nbsp;Queryer,&nbsp;the&nbsp;sql&nbsp;package&#39;s&nbsp;DB.Query&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="3262076">//&nbsp;first&nbsp;prepare&nbsp;a&nbsp;query,&nbsp;execute&nbsp;the&nbsp;statement,&nbsp;and&nbsp;then&nbsp;close&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3262144">//&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="3262158">//</span><br>
<span class="lineno"></span><span class="comment" id="3262161">//&nbsp;Query&nbsp;may&nbsp;return&nbsp;ErrSkip.</span><br>
<span class="lineno">75</span><span class="keyword" id="3262190">type</span>&nbsp;<span class="ident" id="3262195">Queryer</span>&nbsp;<span class="keyword" id="3262203">interface</span>&nbsp;<span class="op" id="3262213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262216">Query</span><span class="op" id="3262221">(</span><span class="ident" id="3262222">query</span>&nbsp;<span class="builtintype" id="3262228">string</span><span class="op" id="3262234">,</span>&nbsp;<span class="ident" id="3262236">args</span>&nbsp;<span class="op" id="3262241">[</span><span class="op" id="3262242">]</span><span class="ident" id="3262243">Value</span><span class="op" id="3262248">)</span>&nbsp;<span class="op" id="3262250">(</span><span class="ident" id="3262251">Rows</span><span class="op" id="3262255">,</span>&nbsp;<span class="builtintype" id="3262257">error</span><span class="op" id="3262262">)</span><br>
<span class="lineno"></span><span class="op" id="3262264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262267">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;database.&nbsp;It&nbsp;is&nbsp;not&nbsp;used&nbsp;concurrently</span><br>
<span class="lineno">80</span><span class="comment" id="3262334">//&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="3262361">//</span><br>
<span class="lineno"></span><span class="comment" id="3262364">//&nbsp;Conn&nbsp;is&nbsp;assumed&nbsp;to&nbsp;be&nbsp;stateful.</span><br>
<span class="lineno"></span><span class="keyword" id="3262399">type</span>&nbsp;<span class="ident" id="3262404">Conn</span>&nbsp;<span class="keyword" id="3262409">interface</span>&nbsp;<span class="op" id="3262419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262422">//&nbsp;Prepare&nbsp;returns&nbsp;a&nbsp;prepared&nbsp;statement,&nbsp;bound&nbsp;to&nbsp;this&nbsp;connection.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262490">Prepare</span><span class="op" id="3262497">(</span><span class="ident" id="3262498">query</span>&nbsp;<span class="builtintype" id="3262504">string</span><span class="op" id="3262510">)</span>&nbsp;<span class="op" id="3262512">(</span><span class="ident" id="3262513">Stmt</span><span class="op" id="3262517">,</span>&nbsp;<span class="builtintype" id="3262519">error</span><span class="op" id="3262524">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262528">//&nbsp;Close&nbsp;invalidates&nbsp;and&nbsp;potentially&nbsp;stops&nbsp;any&nbsp;current</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262584">//&nbsp;prepared&nbsp;statements&nbsp;and&nbsp;transactions,&nbsp;marking&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262639">//&nbsp;connection&nbsp;as&nbsp;no&nbsp;longer&nbsp;in&nbsp;use.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262675">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262679">//&nbsp;Because&nbsp;the&nbsp;sql&nbsp;package&nbsp;maintains&nbsp;a&nbsp;free&nbsp;pool&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262732">//&nbsp;connections&nbsp;and&nbsp;only&nbsp;calls&nbsp;Close&nbsp;when&nbsp;there&#39;s&nbsp;a&nbsp;surplus&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262795">//&nbsp;idle&nbsp;connections,&nbsp;it&nbsp;shouldn&#39;t&nbsp;be&nbsp;necessary&nbsp;for&nbsp;drivers&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262858">//&nbsp;do&nbsp;their&nbsp;own&nbsp;connection&nbsp;caching.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262895">Close</span><span class="op" id="3262900">(</span><span class="op" id="3262901">)</span>&nbsp;<span class="builtintype" id="3262903">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262911">//&nbsp;Begin&nbsp;starts&nbsp;and&nbsp;returns&nbsp;a&nbsp;new&nbsp;transaction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262959">Begin</span><span class="op" id="3262964">(</span><span class="op" id="3262965">)</span>&nbsp;<span class="op" id="3262967">(</span><span class="ident" id="3262968">Tx</span><span class="op" id="3262970">,</span>&nbsp;<span class="builtintype" id="3262972">error</span><span class="op" id="3262977">)</span><br>
<span class="lineno"></span><span class="op" id="3262979">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3262982">//&nbsp;Result&nbsp;is&nbsp;the&nbsp;result&nbsp;of&nbsp;a&nbsp;query&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="3263028">type</span>&nbsp;<span class="ident" id="3263033">Result</span>&nbsp;<span class="keyword" id="3263040">interface</span>&nbsp;<span class="op" id="3263050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263053">//&nbsp;LastInsertId&nbsp;returns&nbsp;the&nbsp;database&#39;s&nbsp;auto-generated&nbsp;ID</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263111">//&nbsp;after,&nbsp;for&nbsp;example,&nbsp;an&nbsp;INSERT&nbsp;into&nbsp;a&nbsp;table&nbsp;with&nbsp;primary</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263171">//&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263180">LastInsertId</span><span class="op" id="3263192">(</span><span class="op" id="3263193">)</span>&nbsp;<span class="op" id="3263195">(</span><span class="ident" id="3263196">int64</span><span class="op" id="3263201">,</span>&nbsp;<span class="builtintype" id="3263203">error</span><span class="op" id="3263208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263212">//&nbsp;RowsAffected&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;rows&nbsp;affected&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263272">//&nbsp;query.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263283">RowsAffected</span><span class="op" id="3263295">(</span><span class="op" id="3263296">)</span>&nbsp;<span class="op" id="3263298">(</span><span class="ident" id="3263299">int64</span><span class="op" id="3263304">,</span>&nbsp;<span class="builtintype" id="3263306">error</span><span class="op" id="3263311">)</span><br>
<span class="lineno"></span><span class="op" id="3263313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3263316">//&nbsp;Stmt&nbsp;is&nbsp;a&nbsp;prepared&nbsp;statement.&nbsp;It&nbsp;is&nbsp;bound&nbsp;to&nbsp;a&nbsp;Conn&nbsp;and&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3263379">//&nbsp;used&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;concurrently.</span><br>
<span class="lineno">115</span><span class="keyword" id="3263424">type</span>&nbsp;<span class="ident" id="3263429">Stmt</span>&nbsp;<span class="keyword" id="3263434">interface</span>&nbsp;<span class="op" id="3263444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263447">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;statement.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263479">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263483">//&nbsp;As&nbsp;of&nbsp;Go&nbsp;1.1,&nbsp;a&nbsp;Stmt&nbsp;will&nbsp;not&nbsp;be&nbsp;closed&nbsp;if&nbsp;it&#39;s&nbsp;in&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263542">//&nbsp;by&nbsp;any&nbsp;queries.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263562">Close</span><span class="op" id="3263567">(</span><span class="op" id="3263568">)</span>&nbsp;<span class="builtintype" id="3263570">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263578">//&nbsp;NumInput&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;placeholder&nbsp;parameters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263637">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263641">//&nbsp;If&nbsp;NumInput&nbsp;returns&nbsp;&gt;=&nbsp;0,&nbsp;the&nbsp;sql&nbsp;package&nbsp;will&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263705">//&nbsp;argument&nbsp;counts&nbsp;from&nbsp;callers&nbsp;and&nbsp;return&nbsp;errors&nbsp;to&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263770">//&nbsp;before&nbsp;the&nbsp;statement&#39;s&nbsp;Exec&nbsp;or&nbsp;Query&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263831">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263835">//&nbsp;NumInput&nbsp;may&nbsp;also&nbsp;return&nbsp;-1,&nbsp;if&nbsp;the&nbsp;driver&nbsp;doesn&#39;t&nbsp;know</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263895">//&nbsp;its&nbsp;number&nbsp;of&nbsp;placeholders.&nbsp;In&nbsp;that&nbsp;case,&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263957">//&nbsp;will&nbsp;not&nbsp;sanity&nbsp;check&nbsp;Exec&nbsp;or&nbsp;Query&nbsp;argument&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264014">NumInput</span><span class="op" id="3264022">(</span><span class="op" id="3264023">)</span>&nbsp;<span class="builtintype" id="3264025">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264031">//&nbsp;Exec&nbsp;executes&nbsp;a&nbsp;query&nbsp;that&nbsp;doesn&#39;t&nbsp;return&nbsp;rows,&nbsp;such</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264088">//&nbsp;as&nbsp;an&nbsp;INSERT&nbsp;or&nbsp;UPDATE.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264116">Exec</span><span class="op" id="3264120">(</span><span class="ident" id="3264121">args</span>&nbsp;<span class="op" id="3264126">[</span><span class="op" id="3264127">]</span><span class="ident" id="3264128">Value</span><span class="op" id="3264133">)</span>&nbsp;<span class="op" id="3264135">(</span><span class="ident" id="3264136">Result</span><span class="op" id="3264142">,</span>&nbsp;<span class="builtintype" id="3264144">error</span><span class="op" id="3264149">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264153">//&nbsp;Query&nbsp;executes&nbsp;a&nbsp;query&nbsp;that&nbsp;may&nbsp;return&nbsp;rows,&nbsp;such&nbsp;as&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264212">//&nbsp;SELECT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264224">Query</span><span class="op" id="3264229">(</span><span class="ident" id="3264230">args</span>&nbsp;<span class="op" id="3264235">[</span><span class="op" id="3264236">]</span><span class="ident" id="3264237">Value</span><span class="op" id="3264242">)</span>&nbsp;<span class="op" id="3264244">(</span><span class="ident" id="3264245">Rows</span><span class="op" id="3264249">,</span>&nbsp;<span class="builtintype" id="3264251">error</span><span class="op" id="3264256">)</span><br>
<span class="lineno">140</span><span class="op" id="3264258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264261">//&nbsp;ColumnConverter&nbsp;may&nbsp;be&nbsp;optionally&nbsp;implemented&nbsp;by&nbsp;Stmt&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3264325">//&nbsp;statement&nbsp;is&nbsp;aware&nbsp;of&nbsp;its&nbsp;own&nbsp;columns&#39;&nbsp;types&nbsp;and&nbsp;can&nbsp;convert&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3264394">//&nbsp;any&nbsp;type&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno">145</span><span class="keyword" id="3264425">type</span>&nbsp;<span class="ident" id="3264430">ColumnConverter</span>&nbsp;<span class="keyword" id="3264446">interface</span>&nbsp;<span class="op" id="3264456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264459">//&nbsp;ColumnConverter&nbsp;returns&nbsp;a&nbsp;ValueConverter&nbsp;for&nbsp;the&nbsp;provided</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264521">//&nbsp;column&nbsp;index.&nbsp;&nbsp;If&nbsp;the&nbsp;type&nbsp;of&nbsp;a&nbsp;specific&nbsp;column&nbsp;isn&#39;t&nbsp;known</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264585">//&nbsp;or&nbsp;shouldn&#39;t&nbsp;be&nbsp;handled&nbsp;specially,&nbsp;DefaultValueConverter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264646">//&nbsp;can&nbsp;be&nbsp;returned.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264667">ColumnConverter</span><span class="op" id="3264682">(</span><span class="ident" id="3264683">idx</span>&nbsp;<span class="builtintype" id="3264687">int</span><span class="op" id="3264690">)</span>&nbsp;<span class="ident" id="3264692">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="3264707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264710">//&nbsp;Rows&nbsp;is&nbsp;an&nbsp;iterator&nbsp;over&nbsp;an&nbsp;executed&nbsp;query&#39;s&nbsp;results.</span><br>
<span class="lineno"></span><span class="keyword" id="3264767">type</span>&nbsp;<span class="ident" id="3264772">Rows</span>&nbsp;<span class="keyword" id="3264777">interface</span>&nbsp;<span class="op" id="3264787">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264790">//&nbsp;Columns&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;columns.&nbsp;The&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264850">//&nbsp;columns&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;inferred&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264911">//&nbsp;slice.&nbsp;&nbsp;If&nbsp;a&nbsp;particular&nbsp;column&nbsp;name&nbsp;isn&#39;t&nbsp;known,&nbsp;an&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264973">//&nbsp;string&nbsp;should&nbsp;be&nbsp;returned&nbsp;for&nbsp;that&nbsp;entry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265019">Columns</span><span class="op" id="3265026">(</span><span class="op" id="3265027">)</span>&nbsp;<span class="op" id="3265029">[</span><span class="op" id="3265030">]</span><span class="builtintype" id="3265031">string</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265040">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;rows&nbsp;iterator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265076">Close</span><span class="op" id="3265081">(</span><span class="op" id="3265082">)</span>&nbsp;<span class="builtintype" id="3265084">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265092">//&nbsp;Next&nbsp;is&nbsp;called&nbsp;to&nbsp;populate&nbsp;the&nbsp;next&nbsp;row&nbsp;of&nbsp;data&nbsp;into</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265149">//&nbsp;the&nbsp;provided&nbsp;slice.&nbsp;The&nbsp;provided&nbsp;slice&nbsp;will&nbsp;be&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265209">//&nbsp;size&nbsp;as&nbsp;the&nbsp;Columns()&nbsp;are&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265245">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265249">//&nbsp;The&nbsp;dest&nbsp;slice&nbsp;may&nbsp;be&nbsp;populated&nbsp;only&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265295">//&nbsp;a&nbsp;driver&nbsp;Value&nbsp;type,&nbsp;but&nbsp;excluding&nbsp;string.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265342">//&nbsp;All&nbsp;string&nbsp;values&nbsp;must&nbsp;be&nbsp;converted&nbsp;to&nbsp;[]byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265393">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265397">//&nbsp;Next&nbsp;should&nbsp;return&nbsp;io.EOF&nbsp;when&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;rows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265456">Next</span><span class="op" id="3265460">(</span><span class="ident" id="3265461">dest</span>&nbsp;<span class="op" id="3265466">[</span><span class="op" id="3265467">]</span><span class="ident" id="3265468">Value</span><span class="op" id="3265473">)</span>&nbsp;<span class="builtintype" id="3265475">error</span><br>
<span class="lineno"></span><span class="op" id="3265481">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="3265484">//&nbsp;Tx&nbsp;is&nbsp;a&nbsp;transaction.</span><br>
<span class="lineno"></span><span class="keyword" id="3265508">type</span>&nbsp;<span class="ident" id="3265513">Tx</span>&nbsp;<span class="keyword" id="3265516">interface</span>&nbsp;<span class="op" id="3265526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265529">Commit</span><span class="op" id="3265535">(</span><span class="op" id="3265536">)</span>&nbsp;<span class="builtintype" id="3265538">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265545">Rollback</span><span class="op" id="3265553">(</span><span class="op" id="3265554">)</span>&nbsp;<span class="builtintype" id="3265556">error</span><br>
<span class="lineno">180</span><span class="op" id="3265562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3265565">//&nbsp;RowsAffected&nbsp;implements&nbsp;Result&nbsp;for&nbsp;an&nbsp;INSERT&nbsp;or&nbsp;UPDATE&nbsp;operation</span><br>
<span class="lineno"></span><span class="comment" id="3265633">//&nbsp;which&nbsp;mutates&nbsp;a&nbsp;number&nbsp;of&nbsp;rows.</span><br>
<span class="lineno"></span><span class="keyword" id="3265668">type</span>&nbsp;<span class="ident" id="3265673">RowsAffected</span>&nbsp;<span class="ident" id="3265686">int64</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="3265693">var</span>&nbsp;<span class="ident" id="3265697">_</span>&nbsp;<span class="ident" id="3265699">Result</span>&nbsp;<span class="op" id="3265706">=</span>&nbsp;<span class="ident" id="3265708">RowsAffected</span><span class="op" id="3265720">(</span><span class="num" id="3265721">0</span><span class="op" id="3265722">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3265725">func</span>&nbsp;<span class="op" id="3265730">(</span><span class="ident" id="3265731">RowsAffected</span><span class="op" id="3265743">)</span>&nbsp;<span class="ident" id="3265745">LastInsertId</span><span class="op" id="3265757">(</span><span class="op" id="3265758">)</span>&nbsp;<span class="op" id="3265760">(</span><span class="ident" id="3265761">int64</span><span class="op" id="3265766">,</span>&nbsp;<span class="builtintype" id="3265768">error</span><span class="op" id="3265773">)</span>&nbsp;<span class="op" id="3265775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265778">return</span>&nbsp;<span class="num" id="3265785">0</span><span class="op" id="3265786">,</span>&nbsp;<span class="ident" id="3265788">errors</span><span class="op" id="3265794">.</span><span class="ident" id="3265795">New</span><span class="op" id="3265798">(</span><span class="string" id="3265799">&#34;no&nbsp;LastInsertId&nbsp;available&#34;</span><span class="op" id="3265826">)</span><br>
<span class="lineno">190</span><span class="op" id="3265828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3265831">func</span>&nbsp;<span class="op" id="3265836">(</span><span class="ident" id="3265837">v</span>&nbsp;<span class="ident" id="3265839">RowsAffected</span><span class="op" id="3265851">)</span>&nbsp;<span class="ident" id="3265853">RowsAffected</span><span class="op" id="3265865">(</span><span class="op" id="3265866">)</span>&nbsp;<span class="op" id="3265868">(</span><span class="ident" id="3265869">int64</span><span class="op" id="3265874">,</span>&nbsp;<span class="builtintype" id="3265876">error</span><span class="op" id="3265881">)</span>&nbsp;<span class="op" id="3265883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265886">return</span>&nbsp;<span class="ident" id="3265893">int64</span><span class="op" id="3265898">(</span><span class="ident" id="3265899">v</span><span class="op" id="3265900">)</span><span class="op" id="3265901">,</span>&nbsp;<span class="ident" id="3265903">nil</span><br>
<span class="lineno"></span><span class="op" id="3265907">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3265910">//&nbsp;ResultNoRows&nbsp;is&nbsp;a&nbsp;pre-defined&nbsp;Result&nbsp;for&nbsp;drivers&nbsp;to&nbsp;return&nbsp;when&nbsp;a&nbsp;DDL</span><br>
<span class="lineno"></span><span class="comment" id="3265983">//&nbsp;command&nbsp;(such&nbsp;as&nbsp;a&nbsp;CREATE&nbsp;TABLE)&nbsp;succeeds.&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;for&nbsp;both</span><br>
<span class="lineno"></span><span class="comment" id="3266058">//&nbsp;LastInsertId&nbsp;and&nbsp;RowsAffected.</span><br>
<span class="lineno"></span><span class="keyword" id="3266092">var</span>&nbsp;<span class="ident" id="3266096">ResultNoRows</span>&nbsp;<span class="ident" id="3266109">noRows</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="3266117">type</span>&nbsp;<span class="ident" id="3266122">noRows</span>&nbsp;<span class="keyword" id="3266129">struct</span><span class="op" id="3266135">{</span><span class="op" id="3266136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3266139">var</span>&nbsp;<span class="ident" id="3266143">_</span>&nbsp;<span class="ident" id="3266145">Result</span>&nbsp;<span class="op" id="3266152">=</span>&nbsp;<span class="ident" id="3266154">noRows</span><span class="op" id="3266160">{</span><span class="op" id="3266161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="3266164">func</span>&nbsp;<span class="op" id="3266169">(</span><span class="ident" id="3266170">noRows</span><span class="op" id="3266176">)</span>&nbsp;<span class="ident" id="3266178">LastInsertId</span><span class="op" id="3266190">(</span><span class="op" id="3266191">)</span>&nbsp;<span class="op" id="3266193">(</span><span class="ident" id="3266194">int64</span><span class="op" id="3266199">,</span>&nbsp;<span class="builtintype" id="3266201">error</span><span class="op" id="3266206">)</span>&nbsp;<span class="op" id="3266208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266211">return</span>&nbsp;<span class="num" id="3266218">0</span><span class="op" id="3266219">,</span>&nbsp;<span class="ident" id="3266221">errors</span><span class="op" id="3266227">.</span><span class="ident" id="3266228">New</span><span class="op" id="3266231">(</span><span class="string" id="3266232">&#34;no&nbsp;LastInsertId&nbsp;available&nbsp;after&nbsp;DDL&nbsp;statement&#34;</span><span class="op" id="3266279">)</span><br>
<span class="lineno"></span><span class="op" id="3266281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3266284">func</span>&nbsp;<span class="op" id="3266289">(</span><span class="ident" id="3266290">noRows</span><span class="op" id="3266296">)</span>&nbsp;<span class="ident" id="3266298">RowsAffected</span><span class="op" id="3266310">(</span><span class="op" id="3266311">)</span>&nbsp;<span class="op" id="3266313">(</span><span class="ident" id="3266314">int64</span><span class="op" id="3266319">,</span>&nbsp;<span class="builtintype" id="3266321">error</span><span class="op" id="3266326">)</span>&nbsp;<span class="op" id="3266328">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266331">return</span>&nbsp;<span class="num" id="3266338">0</span><span class="op" id="3266339">,</span>&nbsp;<span class="ident" id="3266341">errors</span><span class="op" id="3266347">.</span><span class="ident" id="3266348">New</span><span class="op" id="3266351">(</span><span class="string" id="3266352">&#34;no&nbsp;RowsAffected&nbsp;available&nbsp;after&nbsp;DDL&nbsp;statement&#34;</span><span class="op" id="3266399">)</span><br>
<span class="lineno"></span><span class="op" id="3266401">}</span>
</div>
</body>
</html>
