<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html" class="current">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2898398">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2898453">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2898507">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2898558">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2898630">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2898646">package</span>&nbsp;<span class="ident" id="2898654">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2898660">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2898732">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2898805">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2898870">type</span>&nbsp;<span class="ident" id="2898875">Interface</span>&nbsp;<span class="keyword" id="2898885">interface</span>&nbsp;<span class="op" id="2898895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2898898">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2898951">Len</span><span class="op" id="2898954">(</span><span class="op" id="2898955">)</span>&nbsp;<span class="builtintype" id="2898957">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2898962">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2899004">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899061">Less</span><span class="op" id="2899065">(</span><span class="ident" id="2899066">i</span><span class="op" id="2899067">,</span>&nbsp;<span class="ident" id="2899069">j</span>&nbsp;<span class="builtintype" id="2899071">int</span><span class="op" id="2899074">)</span>&nbsp;<span class="builtintype" id="2899076">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2899082">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899132">Swap</span><span class="op" id="2899136">(</span><span class="ident" id="2899137">i</span><span class="op" id="2899138">,</span>&nbsp;<span class="ident" id="2899140">j</span>&nbsp;<span class="builtintype" id="2899142">int</span><span class="op" id="2899145">)</span><br>
<span class="lineno">20</span><span class="op" id="2899147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2899150">func</span>&nbsp;<span class="ident" id="2899155">min</span><span class="op" id="2899158">(</span><span class="ident" id="2899159">a</span><span class="op" id="2899160">,</span>&nbsp;<span class="ident" id="2899162">b</span>&nbsp;<span class="builtintype" id="2899164">int</span><span class="op" id="2899167">)</span>&nbsp;<span class="builtintype" id="2899169">int</span>&nbsp;<span class="op" id="2899173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899176">if</span>&nbsp;<span class="ident" id="2899179">a</span>&nbsp;<span class="op" id="2899181">&lt;</span>&nbsp;<span class="ident" id="2899183">b</span>&nbsp;<span class="op" id="2899185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899189">return</span>&nbsp;<span class="ident" id="2899196">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899202">return</span>&nbsp;<span class="ident" id="2899209">b</span><br>
<span class="lineno"></span><span class="op" id="2899211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2899214">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2899232">func</span>&nbsp;<span class="ident" id="2899237">insertionSort</span><span class="op" id="2899250">(</span><span class="ident" id="2899251">data</span>&nbsp;<span class="ident" id="2899256">Interface</span><span class="op" id="2899265">,</span>&nbsp;<span class="ident" id="2899267">a</span><span class="op" id="2899268">,</span>&nbsp;<span class="ident" id="2899270">b</span>&nbsp;<span class="builtintype" id="2899272">int</span><span class="op" id="2899275">)</span>&nbsp;<span class="op" id="2899277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899280">for</span>&nbsp;<span class="ident" id="2899284">i</span>&nbsp;<span class="op" id="2899286">:=</span>&nbsp;<span class="ident" id="2899289">a</span>&nbsp;<span class="op" id="2899291">+</span>&nbsp;<span class="num" id="2899293">1</span><span class="op" id="2899294">;</span>&nbsp;<span class="ident" id="2899296">i</span>&nbsp;<span class="op" id="2899298">&lt;</span>&nbsp;<span class="ident" id="2899300">b</span><span class="op" id="2899301">;</span>&nbsp;<span class="ident" id="2899303">i</span><span class="op" id="2899304">++</span>&nbsp;<span class="op" id="2899307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899311">for</span>&nbsp;<span class="ident" id="2899315">j</span>&nbsp;<span class="op" id="2899317">:=</span>&nbsp;<span class="ident" id="2899320">i</span><span class="op" id="2899321">;</span>&nbsp;<span class="ident" id="2899323">j</span>&nbsp;<span class="op" id="2899325">&gt;</span>&nbsp;<span class="ident" id="2899327">a</span>&nbsp;<span class="op" id="2899329">&amp;&amp;</span>&nbsp;<span class="ident" id="2899332">data</span><span class="op" id="2899336">.</span><span class="ident" id="2899337">Less</span><span class="op" id="2899341">(</span><span class="ident" id="2899342">j</span><span class="op" id="2899343">,</span>&nbsp;<span class="ident" id="2899345">j</span><span class="op" id="2899346">-</span><span class="num" id="2899347">1</span><span class="op" id="2899348">)</span><span class="op" id="2899349">;</span>&nbsp;<span class="ident" id="2899351">j</span><span class="op" id="2899352">--</span>&nbsp;<span class="op" id="2899355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899360">data</span><span class="op" id="2899364">.</span><span class="ident" id="2899365">Swap</span><span class="op" id="2899369">(</span><span class="ident" id="2899370">j</span><span class="op" id="2899371">,</span>&nbsp;<span class="ident" id="2899373">j</span><span class="op" id="2899374">-</span><span class="num" id="2899375">1</span><span class="op" id="2899376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899380">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899383">}</span><br>
<span class="lineno"></span><span class="op" id="2899385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2899388">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2899446">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2899516">func</span>&nbsp;<span class="ident" id="2899521">siftDown</span><span class="op" id="2899529">(</span><span class="ident" id="2899530">data</span>&nbsp;<span class="ident" id="2899535">Interface</span><span class="op" id="2899544">,</span>&nbsp;<span class="ident" id="2899546">lo</span><span class="op" id="2899548">,</span>&nbsp;<span class="ident" id="2899550">hi</span><span class="op" id="2899552">,</span>&nbsp;<span class="ident" id="2899554">first</span>&nbsp;<span class="builtintype" id="2899560">int</span><span class="op" id="2899563">)</span>&nbsp;<span class="op" id="2899565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899568">root</span>&nbsp;<span class="op" id="2899573">:=</span>&nbsp;<span class="ident" id="2899576">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899580">for</span>&nbsp;<span class="op" id="2899584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899588">child</span>&nbsp;<span class="op" id="2899594">:=</span>&nbsp;<span class="num" id="2899597">2</span><span class="op" id="2899598">*</span><span class="ident" id="2899599">root</span>&nbsp;<span class="op" id="2899604">+</span>&nbsp;<span class="num" id="2899606">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899610">if</span>&nbsp;<span class="ident" id="2899613">child</span>&nbsp;<span class="op" id="2899619">&gt;=</span>&nbsp;<span class="ident" id="2899622">hi</span>&nbsp;<span class="op" id="2899625">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899630">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899642">if</span>&nbsp;<span class="ident" id="2899645">child</span><span class="op" id="2899650">+</span><span class="num" id="2899651">1</span>&nbsp;<span class="op" id="2899653">&lt;</span>&nbsp;<span class="ident" id="2899655">hi</span>&nbsp;<span class="op" id="2899658">&amp;&amp;</span>&nbsp;<span class="ident" id="2899661">data</span><span class="op" id="2899665">.</span><span class="ident" id="2899666">Less</span><span class="op" id="2899670">(</span><span class="ident" id="2899671">first</span><span class="op" id="2899676">+</span><span class="ident" id="2899677">child</span><span class="op" id="2899682">,</span>&nbsp;<span class="ident" id="2899684">first</span><span class="op" id="2899689">+</span><span class="ident" id="2899690">child</span><span class="op" id="2899695">+</span><span class="num" id="2899696">1</span><span class="op" id="2899697">)</span>&nbsp;<span class="op" id="2899699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899704">child</span><span class="op" id="2899709">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899714">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899718">if</span>&nbsp;<span class="op" id="2899721">!</span><span class="ident" id="2899722">data</span><span class="op" id="2899726">.</span><span class="ident" id="2899727">Less</span><span class="op" id="2899731">(</span><span class="ident" id="2899732">first</span><span class="op" id="2899737">+</span><span class="ident" id="2899738">root</span><span class="op" id="2899742">,</span>&nbsp;<span class="ident" id="2899744">first</span><span class="op" id="2899749">+</span><span class="ident" id="2899750">child</span><span class="op" id="2899755">)</span>&nbsp;<span class="op" id="2899757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899762">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899775">data</span><span class="op" id="2899779">.</span><span class="ident" id="2899780">Swap</span><span class="op" id="2899784">(</span><span class="ident" id="2899785">first</span><span class="op" id="2899790">+</span><span class="ident" id="2899791">root</span><span class="op" id="2899795">,</span>&nbsp;<span class="ident" id="2899797">first</span><span class="op" id="2899802">+</span><span class="ident" id="2899803">child</span><span class="op" id="2899808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899812">root</span>&nbsp;<span class="op" id="2899817">=</span>&nbsp;<span class="ident" id="2899819">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2899826">}</span><br>
<span class="lineno"></span><span class="op" id="2899828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2899831">func</span>&nbsp;<span class="ident" id="2899836">heapSort</span><span class="op" id="2899844">(</span><span class="ident" id="2899845">data</span>&nbsp;<span class="ident" id="2899850">Interface</span><span class="op" id="2899859">,</span>&nbsp;<span class="ident" id="2899861">a</span><span class="op" id="2899862">,</span>&nbsp;<span class="ident" id="2899864">b</span>&nbsp;<span class="builtintype" id="2899866">int</span><span class="op" id="2899869">)</span>&nbsp;<span class="op" id="2899871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899874">first</span>&nbsp;<span class="op" id="2899880">:=</span>&nbsp;<span class="ident" id="2899883">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899886">lo</span>&nbsp;<span class="op" id="2899889">:=</span>&nbsp;<span class="num" id="2899892">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899895">hi</span>&nbsp;<span class="op" id="2899898">:=</span>&nbsp;<span class="ident" id="2899901">b</span>&nbsp;<span class="op" id="2899903">-</span>&nbsp;<span class="ident" id="2899905">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2899909">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2899954">for</span>&nbsp;<span class="ident" id="2899958">i</span>&nbsp;<span class="op" id="2899960">:=</span>&nbsp;<span class="op" id="2899963">(</span><span class="ident" id="2899964">hi</span>&nbsp;<span class="op" id="2899967">-</span>&nbsp;<span class="num" id="2899969">1</span><span class="op" id="2899970">)</span>&nbsp;<span class="op" id="2899972">/</span>&nbsp;<span class="num" id="2899974">2</span><span class="op" id="2899975">;</span>&nbsp;<span class="ident" id="2899977">i</span>&nbsp;<span class="op" id="2899979">&gt;=</span>&nbsp;<span class="num" id="2899982">0</span><span class="op" id="2899983">;</span>&nbsp;<span class="ident" id="2899985">i</span><span class="op" id="2899986">--</span>&nbsp;<span class="op" id="2899989">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2899993">siftDown</span><span class="op" id="2900001">(</span><span class="ident" id="2900002">data</span><span class="op" id="2900006">,</span>&nbsp;<span class="ident" id="2900008">i</span><span class="op" id="2900009">,</span>&nbsp;<span class="ident" id="2900011">hi</span><span class="op" id="2900013">,</span>&nbsp;<span class="ident" id="2900015">first</span><span class="op" id="2900020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900027">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900078">for</span>&nbsp;<span class="ident" id="2900082">i</span>&nbsp;<span class="op" id="2900084">:=</span>&nbsp;<span class="ident" id="2900087">hi</span>&nbsp;<span class="op" id="2900090">-</span>&nbsp;<span class="num" id="2900092">1</span><span class="op" id="2900093">;</span>&nbsp;<span class="ident" id="2900095">i</span>&nbsp;<span class="op" id="2900097">&gt;=</span>&nbsp;<span class="num" id="2900100">0</span><span class="op" id="2900101">;</span>&nbsp;<span class="ident" id="2900103">i</span><span class="op" id="2900104">--</span>&nbsp;<span class="op" id="2900107">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900111">data</span><span class="op" id="2900115">.</span><span class="ident" id="2900116">Swap</span><span class="op" id="2900120">(</span><span class="ident" id="2900121">first</span><span class="op" id="2900126">,</span>&nbsp;<span class="ident" id="2900128">first</span><span class="op" id="2900133">+</span><span class="ident" id="2900134">i</span><span class="op" id="2900135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900139">siftDown</span><span class="op" id="2900147">(</span><span class="ident" id="2900148">data</span><span class="op" id="2900152">,</span>&nbsp;<span class="ident" id="2900154">lo</span><span class="op" id="2900156">,</span>&nbsp;<span class="ident" id="2900158">i</span><span class="op" id="2900159">,</span>&nbsp;<span class="ident" id="2900161">first</span><span class="op" id="2900166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900169">}</span><br>
<span class="lineno"></span><span class="op" id="2900171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2900174">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2900219">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2900276">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2900370">func</span>&nbsp;<span class="ident" id="2900375">medianOfThree</span><span class="op" id="2900388">(</span><span class="ident" id="2900389">data</span>&nbsp;<span class="ident" id="2900394">Interface</span><span class="op" id="2900403">,</span>&nbsp;<span class="ident" id="2900405">a</span><span class="op" id="2900406">,</span>&nbsp;<span class="ident" id="2900408">b</span><span class="op" id="2900409">,</span>&nbsp;<span class="ident" id="2900411">c</span>&nbsp;<span class="builtintype" id="2900413">int</span><span class="op" id="2900416">)</span>&nbsp;<span class="op" id="2900418">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900421">m0</span>&nbsp;<span class="op" id="2900424">:=</span>&nbsp;<span class="ident" id="2900427">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900430">m1</span>&nbsp;<span class="op" id="2900433">:=</span>&nbsp;<span class="ident" id="2900436">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900439">m2</span>&nbsp;<span class="op" id="2900442">:=</span>&nbsp;<span class="ident" id="2900445">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900448">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900478">if</span>&nbsp;<span class="ident" id="2900481">data</span><span class="op" id="2900485">.</span><span class="ident" id="2900486">Less</span><span class="op" id="2900490">(</span><span class="ident" id="2900491">m1</span><span class="op" id="2900493">,</span>&nbsp;<span class="ident" id="2900495">m0</span><span class="op" id="2900497">)</span>&nbsp;<span class="op" id="2900499">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900503">data</span><span class="op" id="2900507">.</span><span class="ident" id="2900508">Swap</span><span class="op" id="2900512">(</span><span class="ident" id="2900513">m1</span><span class="op" id="2900515">,</span>&nbsp;<span class="ident" id="2900517">m0</span><span class="op" id="2900519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900525">if</span>&nbsp;<span class="ident" id="2900528">data</span><span class="op" id="2900532">.</span><span class="ident" id="2900533">Less</span><span class="op" id="2900537">(</span><span class="ident" id="2900538">m2</span><span class="op" id="2900540">,</span>&nbsp;<span class="ident" id="2900542">m1</span><span class="op" id="2900544">)</span>&nbsp;<span class="op" id="2900546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900550">data</span><span class="op" id="2900554">.</span><span class="ident" id="2900555">Swap</span><span class="op" id="2900559">(</span><span class="ident" id="2900560">m2</span><span class="op" id="2900562">,</span>&nbsp;<span class="ident" id="2900564">m1</span><span class="op" id="2900566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900569">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900572">if</span>&nbsp;<span class="ident" id="2900575">data</span><span class="op" id="2900579">.</span><span class="ident" id="2900580">Less</span><span class="op" id="2900584">(</span><span class="ident" id="2900585">m1</span><span class="op" id="2900587">,</span>&nbsp;<span class="ident" id="2900589">m0</span><span class="op" id="2900591">)</span>&nbsp;<span class="op" id="2900593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900597">data</span><span class="op" id="2900601">.</span><span class="ident" id="2900602">Swap</span><span class="op" id="2900606">(</span><span class="ident" id="2900607">m1</span><span class="op" id="2900609">,</span>&nbsp;<span class="ident" id="2900611">m0</span><span class="op" id="2900613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900619">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2900659">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2900662">func</span>&nbsp;<span class="ident" id="2900667">swapRange</span><span class="op" id="2900676">(</span><span class="ident" id="2900677">data</span>&nbsp;<span class="ident" id="2900682">Interface</span><span class="op" id="2900691">,</span>&nbsp;<span class="ident" id="2900693">a</span><span class="op" id="2900694">,</span>&nbsp;<span class="ident" id="2900696">b</span><span class="op" id="2900697">,</span>&nbsp;<span class="ident" id="2900699">n</span>&nbsp;<span class="builtintype" id="2900701">int</span><span class="op" id="2900704">)</span>&nbsp;<span class="op" id="2900706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900709">for</span>&nbsp;<span class="ident" id="2900713">i</span>&nbsp;<span class="op" id="2900715">:=</span>&nbsp;<span class="num" id="2900718">0</span><span class="op" id="2900719">;</span>&nbsp;<span class="ident" id="2900721">i</span>&nbsp;<span class="op" id="2900723">&lt;</span>&nbsp;<span class="ident" id="2900725">n</span><span class="op" id="2900726">;</span>&nbsp;<span class="ident" id="2900728">i</span><span class="op" id="2900729">++</span>&nbsp;<span class="op" id="2900732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900736">data</span><span class="op" id="2900740">.</span><span class="ident" id="2900741">Swap</span><span class="op" id="2900745">(</span><span class="ident" id="2900746">a</span><span class="op" id="2900747">+</span><span class="ident" id="2900748">i</span><span class="op" id="2900749">,</span>&nbsp;<span class="ident" id="2900751">b</span><span class="op" id="2900752">+</span><span class="ident" id="2900753">i</span><span class="op" id="2900754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2900757">}</span><br>
<span class="lineno">100</span><span class="op" id="2900759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2900762">func</span>&nbsp;<span class="ident" id="2900767">doPivot</span><span class="op" id="2900774">(</span><span class="ident" id="2900775">data</span>&nbsp;<span class="ident" id="2900780">Interface</span><span class="op" id="2900789">,</span>&nbsp;<span class="ident" id="2900791">lo</span><span class="op" id="2900793">,</span>&nbsp;<span class="ident" id="2900795">hi</span>&nbsp;<span class="builtintype" id="2900798">int</span><span class="op" id="2900801">)</span>&nbsp;<span class="op" id="2900803">(</span><span class="ident" id="2900804">midlo</span><span class="op" id="2900809">,</span>&nbsp;<span class="ident" id="2900811">midhi</span>&nbsp;<span class="builtintype" id="2900817">int</span><span class="op" id="2900820">)</span>&nbsp;<span class="op" id="2900822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900825">m</span>&nbsp;<span class="op" id="2900827">:=</span>&nbsp;<span class="ident" id="2900830">lo</span>&nbsp;<span class="op" id="2900833">+</span>&nbsp;<span class="op" id="2900835">(</span><span class="ident" id="2900836">hi</span><span class="op" id="2900838">-</span><span class="ident" id="2900839">lo</span><span class="op" id="2900841">)</span><span class="op" id="2900842">/</span><span class="num" id="2900843">2</span>&nbsp;<span class="comment" id="2900845">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2900894">if</span>&nbsp;<span class="ident" id="2900897">hi</span><span class="op" id="2900899">-</span><span class="ident" id="2900900">lo</span>&nbsp;<span class="op" id="2900903">&gt;</span>&nbsp;<span class="num" id="2900905">40</span>&nbsp;<span class="op" id="2900908">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2900912">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900972">s</span>&nbsp;<span class="op" id="2900974">:=</span>&nbsp;<span class="op" id="2900977">(</span><span class="ident" id="2900978">hi</span>&nbsp;<span class="op" id="2900981">-</span>&nbsp;<span class="ident" id="2900983">lo</span><span class="op" id="2900985">)</span>&nbsp;<span class="op" id="2900987">/</span>&nbsp;<span class="num" id="2900989">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2900993">medianOfThree</span><span class="op" id="2901006">(</span><span class="ident" id="2901007">data</span><span class="op" id="2901011">,</span>&nbsp;<span class="ident" id="2901013">lo</span><span class="op" id="2901015">,</span>&nbsp;<span class="ident" id="2901017">lo</span><span class="op" id="2901019">+</span><span class="ident" id="2901020">s</span><span class="op" id="2901021">,</span>&nbsp;<span class="ident" id="2901023">lo</span><span class="op" id="2901025">+</span><span class="num" id="2901026">2</span><span class="op" id="2901027">*</span><span class="ident" id="2901028">s</span><span class="op" id="2901029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901033">medianOfThree</span><span class="op" id="2901046">(</span><span class="ident" id="2901047">data</span><span class="op" id="2901051">,</span>&nbsp;<span class="ident" id="2901053">m</span><span class="op" id="2901054">,</span>&nbsp;<span class="ident" id="2901056">m</span><span class="op" id="2901057">-</span><span class="ident" id="2901058">s</span><span class="op" id="2901059">,</span>&nbsp;<span class="ident" id="2901061">m</span><span class="op" id="2901062">+</span><span class="ident" id="2901063">s</span><span class="op" id="2901064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901068">medianOfThree</span><span class="op" id="2901081">(</span><span class="ident" id="2901082">data</span><span class="op" id="2901086">,</span>&nbsp;<span class="ident" id="2901088">hi</span><span class="op" id="2901090">-</span><span class="num" id="2901091">1</span><span class="op" id="2901092">,</span>&nbsp;<span class="ident" id="2901094">hi</span><span class="op" id="2901096">-</span><span class="num" id="2901097">1</span><span class="op" id="2901098">-</span><span class="ident" id="2901099">s</span><span class="op" id="2901100">,</span>&nbsp;<span class="ident" id="2901102">hi</span><span class="op" id="2901104">-</span><span class="num" id="2901105">1</span><span class="op" id="2901106">-</span><span class="num" id="2901107">2</span><span class="op" id="2901108">*</span><span class="ident" id="2901109">s</span><span class="op" id="2901110">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901116">medianOfThree</span><span class="op" id="2901129">(</span><span class="ident" id="2901130">data</span><span class="op" id="2901134">,</span>&nbsp;<span class="ident" id="2901136">lo</span><span class="op" id="2901138">,</span>&nbsp;<span class="ident" id="2901140">m</span><span class="op" id="2901141">,</span>&nbsp;<span class="ident" id="2901143">hi</span><span class="op" id="2901145">-</span><span class="num" id="2901146">1</span><span class="op" id="2901147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901151">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901171">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901216">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901246">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901275">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901310">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901339">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901369">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901373">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901425">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901459">pivot</span>&nbsp;<span class="op" id="2901465">:=</span>&nbsp;<span class="ident" id="2901468">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901472">a</span><span class="op" id="2901473">,</span>&nbsp;<span class="ident" id="2901475">b</span><span class="op" id="2901476">,</span>&nbsp;<span class="ident" id="2901478">c</span><span class="op" id="2901479">,</span>&nbsp;<span class="ident" id="2901481">d</span>&nbsp;<span class="op" id="2901483">:=</span>&nbsp;<span class="ident" id="2901486">lo</span><span class="op" id="2901488">+</span><span class="num" id="2901489">1</span><span class="op" id="2901490">,</span>&nbsp;<span class="ident" id="2901492">lo</span><span class="op" id="2901494">+</span><span class="num" id="2901495">1</span><span class="op" id="2901496">,</span>&nbsp;<span class="ident" id="2901498">hi</span><span class="op" id="2901500">,</span>&nbsp;<span class="ident" id="2901502">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901506">for</span>&nbsp;<span class="op" id="2901510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901514">for</span>&nbsp;<span class="ident" id="2901518">b</span>&nbsp;<span class="op" id="2901520">&lt;</span>&nbsp;<span class="ident" id="2901522">c</span>&nbsp;<span class="op" id="2901524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901529">if</span>&nbsp;<span class="ident" id="2901532">data</span><span class="op" id="2901536">.</span><span class="ident" id="2901537">Less</span><span class="op" id="2901541">(</span><span class="ident" id="2901542">b</span><span class="op" id="2901543">,</span>&nbsp;<span class="ident" id="2901545">pivot</span><span class="op" id="2901550">)</span>&nbsp;<span class="op" id="2901552">{</span>&nbsp;<span class="comment" id="2901554">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901577">b</span><span class="op" id="2901578">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901584">}</span>&nbsp;<span class="keyword" id="2901586">else</span>&nbsp;<span class="keyword" id="2901591">if</span>&nbsp;<span class="op" id="2901594">!</span><span class="ident" id="2901595">data</span><span class="op" id="2901599">.</span><span class="ident" id="2901600">Less</span><span class="op" id="2901604">(</span><span class="ident" id="2901605">pivot</span><span class="op" id="2901610">,</span>&nbsp;<span class="ident" id="2901612">b</span><span class="op" id="2901613">)</span>&nbsp;<span class="op" id="2901615">{</span>&nbsp;<span class="comment" id="2901617">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901640">data</span><span class="op" id="2901644">.</span><span class="ident" id="2901645">Swap</span><span class="op" id="2901649">(</span><span class="ident" id="2901650">a</span><span class="op" id="2901651">,</span>&nbsp;<span class="ident" id="2901653">b</span><span class="op" id="2901654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901660">a</span><span class="op" id="2901661">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901668">b</span><span class="op" id="2901669">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901675">}</span>&nbsp;<span class="keyword" id="2901677">else</span>&nbsp;<span class="op" id="2901682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901688">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901705">for</span>&nbsp;<span class="ident" id="2901709">b</span>&nbsp;<span class="op" id="2901711">&lt;</span>&nbsp;<span class="ident" id="2901713">c</span>&nbsp;<span class="op" id="2901715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901720">if</span>&nbsp;<span class="ident" id="2901723">data</span><span class="op" id="2901727">.</span><span class="ident" id="2901728">Less</span><span class="op" id="2901732">(</span><span class="ident" id="2901733">pivot</span><span class="op" id="2901738">,</span>&nbsp;<span class="ident" id="2901740">c</span><span class="op" id="2901741">-</span><span class="num" id="2901742">1</span><span class="op" id="2901743">)</span>&nbsp;<span class="op" id="2901745">{</span>&nbsp;<span class="comment" id="2901747">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901772">c</span><span class="op" id="2901773">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901779">}</span>&nbsp;<span class="keyword" id="2901781">else</span>&nbsp;<span class="keyword" id="2901786">if</span>&nbsp;<span class="op" id="2901789">!</span><span class="ident" id="2901790">data</span><span class="op" id="2901794">.</span><span class="ident" id="2901795">Less</span><span class="op" id="2901799">(</span><span class="ident" id="2901800">c</span><span class="op" id="2901801">-</span><span class="num" id="2901802">1</span><span class="op" id="2901803">,</span>&nbsp;<span class="ident" id="2901805">pivot</span><span class="op" id="2901810">)</span>&nbsp;<span class="op" id="2901812">{</span>&nbsp;<span class="comment" id="2901814">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901839">data</span><span class="op" id="2901843">.</span><span class="ident" id="2901844">Swap</span><span class="op" id="2901848">(</span><span class="ident" id="2901849">c</span><span class="op" id="2901850">-</span><span class="num" id="2901851">1</span><span class="op" id="2901852">,</span>&nbsp;<span class="ident" id="2901854">d</span><span class="op" id="2901855">-</span><span class="num" id="2901856">1</span><span class="op" id="2901857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901863">c</span><span class="op" id="2901864">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901871">d</span><span class="op" id="2901872">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901878">}</span>&nbsp;<span class="keyword" id="2901880">else</span>&nbsp;<span class="op" id="2901885">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901891">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901908">if</span>&nbsp;<span class="ident" id="2901911">b</span>&nbsp;<span class="op" id="2901913">&gt;=</span>&nbsp;<span class="ident" id="2901916">c</span>&nbsp;<span class="op" id="2901918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2901923">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2901931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2901935">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901975">data</span><span class="op" id="2901979">.</span><span class="ident" id="2901980">Swap</span><span class="op" id="2901984">(</span><span class="ident" id="2901985">b</span><span class="op" id="2901986">,</span>&nbsp;<span class="ident" id="2901988">c</span><span class="op" id="2901989">-</span><span class="num" id="2901990">1</span><span class="op" id="2901991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2901995">b</span><span class="op" id="2901996">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902001">c</span><span class="op" id="2902002">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902010">n</span>&nbsp;<span class="op" id="2902012">:=</span>&nbsp;<span class="ident" id="2902015">min</span><span class="op" id="2902018">(</span><span class="ident" id="2902019">b</span><span class="op" id="2902020">-</span><span class="ident" id="2902021">a</span><span class="op" id="2902022">,</span>&nbsp;<span class="ident" id="2902024">a</span><span class="op" id="2902025">-</span><span class="ident" id="2902026">lo</span><span class="op" id="2902028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902031">swapRange</span><span class="op" id="2902040">(</span><span class="ident" id="2902041">data</span><span class="op" id="2902045">,</span>&nbsp;<span class="ident" id="2902047">lo</span><span class="op" id="2902049">,</span>&nbsp;<span class="ident" id="2902051">b</span><span class="op" id="2902052">-</span><span class="ident" id="2902053">n</span><span class="op" id="2902054">,</span>&nbsp;<span class="ident" id="2902056">n</span><span class="op" id="2902057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902061">n</span>&nbsp;<span class="op" id="2902063">=</span>&nbsp;<span class="ident" id="2902065">min</span><span class="op" id="2902068">(</span><span class="ident" id="2902069">hi</span><span class="op" id="2902071">-</span><span class="ident" id="2902072">d</span><span class="op" id="2902073">,</span>&nbsp;<span class="ident" id="2902075">d</span><span class="op" id="2902076">-</span><span class="ident" id="2902077">c</span><span class="op" id="2902078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902081">swapRange</span><span class="op" id="2902090">(</span><span class="ident" id="2902091">data</span><span class="op" id="2902095">,</span>&nbsp;<span class="ident" id="2902097">c</span><span class="op" id="2902098">,</span>&nbsp;<span class="ident" id="2902100">hi</span><span class="op" id="2902102">-</span><span class="ident" id="2902103">n</span><span class="op" id="2902104">,</span>&nbsp;<span class="ident" id="2902106">n</span><span class="op" id="2902107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902111">return</span>&nbsp;<span class="ident" id="2902118">lo</span>&nbsp;<span class="op" id="2902121">+</span>&nbsp;<span class="ident" id="2902123">b</span>&nbsp;<span class="op" id="2902125">-</span>&nbsp;<span class="ident" id="2902127">a</span><span class="op" id="2902128">,</span>&nbsp;<span class="ident" id="2902130">hi</span>&nbsp;<span class="op" id="2902133">-</span>&nbsp;<span class="op" id="2902135">(</span><span class="ident" id="2902136">d</span>&nbsp;<span class="op" id="2902138">-</span>&nbsp;<span class="ident" id="2902140">c</span><span class="op" id="2902141">)</span><br>
<span class="lineno"></span><span class="op" id="2902143">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2902146">func</span>&nbsp;<span class="ident" id="2902151">quickSort</span><span class="op" id="2902160">(</span><span class="ident" id="2902161">data</span>&nbsp;<span class="ident" id="2902166">Interface</span><span class="op" id="2902175">,</span>&nbsp;<span class="ident" id="2902177">a</span><span class="op" id="2902178">,</span>&nbsp;<span class="ident" id="2902180">b</span><span class="op" id="2902181">,</span>&nbsp;<span class="ident" id="2902183">maxDepth</span>&nbsp;<span class="builtintype" id="2902192">int</span><span class="op" id="2902195">)</span>&nbsp;<span class="op" id="2902197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902200">for</span>&nbsp;<span class="ident" id="2902204">b</span><span class="op" id="2902205">-</span><span class="ident" id="2902206">a</span>&nbsp;<span class="op" id="2902208">&gt;</span>&nbsp;<span class="num" id="2902210">7</span>&nbsp;<span class="op" id="2902212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902216">if</span>&nbsp;<span class="ident" id="2902219">maxDepth</span>&nbsp;<span class="op" id="2902228">==</span>&nbsp;<span class="num" id="2902231">0</span>&nbsp;<span class="op" id="2902233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902238">heapSort</span><span class="op" id="2902246">(</span><span class="ident" id="2902247">data</span><span class="op" id="2902251">,</span>&nbsp;<span class="ident" id="2902253">a</span><span class="op" id="2902254">,</span>&nbsp;<span class="ident" id="2902256">b</span><span class="op" id="2902257">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902262">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902275">maxDepth</span><span class="op" id="2902283">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902288">mlo</span><span class="op" id="2902291">,</span>&nbsp;<span class="ident" id="2902293">mhi</span>&nbsp;<span class="op" id="2902297">:=</span>&nbsp;<span class="ident" id="2902300">doPivot</span><span class="op" id="2902307">(</span><span class="ident" id="2902308">data</span><span class="op" id="2902312">,</span>&nbsp;<span class="ident" id="2902314">a</span><span class="op" id="2902315">,</span>&nbsp;<span class="ident" id="2902317">b</span><span class="op" id="2902318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902322">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902382">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902421">if</span>&nbsp;<span class="ident" id="2902424">mlo</span><span class="op" id="2902427">-</span><span class="ident" id="2902428">a</span>&nbsp;<span class="op" id="2902430">&lt;</span>&nbsp;<span class="ident" id="2902432">b</span><span class="op" id="2902433">-</span><span class="ident" id="2902434">mhi</span>&nbsp;<span class="op" id="2902438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902443">quickSort</span><span class="op" id="2902452">(</span><span class="ident" id="2902453">data</span><span class="op" id="2902457">,</span>&nbsp;<span class="ident" id="2902459">a</span><span class="op" id="2902460">,</span>&nbsp;<span class="ident" id="2902462">mlo</span><span class="op" id="2902465">,</span>&nbsp;<span class="ident" id="2902467">maxDepth</span><span class="op" id="2902475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902480">a</span>&nbsp;<span class="op" id="2902482">=</span>&nbsp;<span class="ident" id="2902484">mhi</span>&nbsp;<span class="comment" id="2902488">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902523">}</span>&nbsp;<span class="keyword" id="2902525">else</span>&nbsp;<span class="op" id="2902530">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902535">quickSort</span><span class="op" id="2902544">(</span><span class="ident" id="2902545">data</span><span class="op" id="2902549">,</span>&nbsp;<span class="ident" id="2902551">mhi</span><span class="op" id="2902554">,</span>&nbsp;<span class="ident" id="2902556">b</span><span class="op" id="2902557">,</span>&nbsp;<span class="ident" id="2902559">maxDepth</span><span class="op" id="2902567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902572">b</span>&nbsp;<span class="op" id="2902574">=</span>&nbsp;<span class="ident" id="2902576">mlo</span>&nbsp;<span class="comment" id="2902580">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902621">if</span>&nbsp;<span class="ident" id="2902624">b</span><span class="op" id="2902625">-</span><span class="ident" id="2902626">a</span>&nbsp;<span class="op" id="2902628">&gt;</span>&nbsp;<span class="num" id="2902630">1</span>&nbsp;<span class="op" id="2902632">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902636">insertionSort</span><span class="op" id="2902649">(</span><span class="ident" id="2902650">data</span><span class="op" id="2902654">,</span>&nbsp;<span class="ident" id="2902656">a</span><span class="op" id="2902657">,</span>&nbsp;<span class="ident" id="2902659">b</span><span class="op" id="2902660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902663">}</span><br>
<span class="lineno"></span><span class="op" id="2902665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902668">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2902688">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2902762">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2902831">func</span>&nbsp;<span class="ident" id="2902836">Sort</span><span class="op" id="2902840">(</span><span class="ident" id="2902841">data</span>&nbsp;<span class="ident" id="2902846">Interface</span><span class="op" id="2902855">)</span>&nbsp;<span class="op" id="2902857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2902860">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902923">n</span>&nbsp;<span class="op" id="2902925">:=</span>&nbsp;<span class="ident" id="2902928">data</span><span class="op" id="2902932">.</span><span class="ident" id="2902933">Len</span><span class="op" id="2902936">(</span><span class="op" id="2902937">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902940">maxDepth</span>&nbsp;<span class="op" id="2902949">:=</span>&nbsp;<span class="num" id="2902952">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2902955">for</span>&nbsp;<span class="ident" id="2902959">i</span>&nbsp;<span class="op" id="2902961">:=</span>&nbsp;<span class="ident" id="2902964">n</span><span class="op" id="2902965">;</span>&nbsp;<span class="ident" id="2902967">i</span>&nbsp;<span class="op" id="2902969">&gt;</span>&nbsp;<span class="num" id="2902971">0</span><span class="op" id="2902972">;</span>&nbsp;<span class="ident" id="2902974">i</span>&nbsp;<span class="op" id="2902976">&gt;&gt;=</span>&nbsp;<span class="num" id="2902980">1</span>&nbsp;<span class="op" id="2902982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2902986">maxDepth</span><span class="op" id="2902994">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2902998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903001">maxDepth</span>&nbsp;<span class="op" id="2903010">*=</span>&nbsp;<span class="num" id="2903013">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903016">quickSort</span><span class="op" id="2903025">(</span><span class="ident" id="2903026">data</span><span class="op" id="2903030">,</span>&nbsp;<span class="num" id="2903032">0</span><span class="op" id="2903033">,</span>&nbsp;<span class="ident" id="2903035">n</span><span class="op" id="2903036">,</span>&nbsp;<span class="ident" id="2903038">maxDepth</span><span class="op" id="2903046">)</span><br>
<span class="lineno"></span><span class="op" id="2903048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2903051">type</span>&nbsp;<span class="ident" id="2903056">reverse</span>&nbsp;<span class="keyword" id="2903064">struct</span>&nbsp;<span class="op" id="2903071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2903074">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2903140">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903178">Interface</span><br>
<span class="lineno"></span><span class="op" id="2903188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903191">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2903266">func</span>&nbsp;<span class="op" id="2903271">(</span><span class="ident" id="2903272">r</span>&nbsp;<span class="ident" id="2903274">reverse</span><span class="op" id="2903281">)</span>&nbsp;<span class="ident" id="2903283">Less</span><span class="op" id="2903287">(</span><span class="ident" id="2903288">i</span><span class="op" id="2903289">,</span>&nbsp;<span class="ident" id="2903291">j</span>&nbsp;<span class="builtintype" id="2903293">int</span><span class="op" id="2903296">)</span>&nbsp;<span class="builtintype" id="2903298">bool</span>&nbsp;<span class="op" id="2903303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903306">return</span>&nbsp;<span class="ident" id="2903313">r</span><span class="op" id="2903314">.</span><span class="ident" id="2903315">Interface</span><span class="op" id="2903324">.</span><span class="ident" id="2903325">Less</span><span class="op" id="2903329">(</span><span class="ident" id="2903330">j</span><span class="op" id="2903331">,</span>&nbsp;<span class="ident" id="2903333">i</span><span class="op" id="2903334">)</span><br>
<span class="lineno"></span><span class="op" id="2903336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903339">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2903386">func</span>&nbsp;<span class="ident" id="2903391">Reverse</span><span class="op" id="2903398">(</span><span class="ident" id="2903399">data</span>&nbsp;<span class="ident" id="2903404">Interface</span><span class="op" id="2903413">)</span>&nbsp;<span class="ident" id="2903415">Interface</span>&nbsp;<span class="op" id="2903425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903428">return</span>&nbsp;<span class="op" id="2903435">&amp;</span><span class="ident" id="2903436">reverse</span><span class="op" id="2903443">{</span><span class="ident" id="2903444">data</span><span class="op" id="2903448">}</span><br>
<span class="lineno"></span><span class="op" id="2903450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903453">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2903497">func</span>&nbsp;<span class="ident" id="2903502">IsSorted</span><span class="op" id="2903510">(</span><span class="ident" id="2903511">data</span>&nbsp;<span class="ident" id="2903516">Interface</span><span class="op" id="2903525">)</span>&nbsp;<span class="builtintype" id="2903527">bool</span>&nbsp;<span class="op" id="2903532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2903535">n</span>&nbsp;<span class="op" id="2903537">:=</span>&nbsp;<span class="ident" id="2903540">data</span><span class="op" id="2903544">.</span><span class="ident" id="2903545">Len</span><span class="op" id="2903548">(</span><span class="op" id="2903549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903552">for</span>&nbsp;<span class="ident" id="2903556">i</span>&nbsp;<span class="op" id="2903558">:=</span>&nbsp;<span class="ident" id="2903561">n</span>&nbsp;<span class="op" id="2903563">-</span>&nbsp;<span class="num" id="2903565">1</span><span class="op" id="2903566">;</span>&nbsp;<span class="ident" id="2903568">i</span>&nbsp;<span class="op" id="2903570">&gt;</span>&nbsp;<span class="num" id="2903572">0</span><span class="op" id="2903573">;</span>&nbsp;<span class="ident" id="2903575">i</span><span class="op" id="2903576">--</span>&nbsp;<span class="op" id="2903579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903583">if</span>&nbsp;<span class="ident" id="2903586">data</span><span class="op" id="2903590">.</span><span class="ident" id="2903591">Less</span><span class="op" id="2903595">(</span><span class="ident" id="2903596">i</span><span class="op" id="2903597">,</span>&nbsp;<span class="ident" id="2903599">i</span><span class="op" id="2903600">-</span><span class="num" id="2903601">1</span><span class="op" id="2903602">)</span>&nbsp;<span class="op" id="2903604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903609">return</span>&nbsp;<span class="builtintype" id="2903616">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2903627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2903630">return</span>&nbsp;<span class="builtintype" id="2903637">true</span><br>
<span class="lineno"></span><span class="op" id="2903642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2903645">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903684">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2903769">type</span>&nbsp;<span class="ident" id="2903774">IntSlice</span>&nbsp;<span class="op" id="2903783">[</span><span class="op" id="2903784">]</span><span class="builtintype" id="2903785">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2903790">func</span>&nbsp;<span class="op" id="2903795">(</span><span class="ident" id="2903796">p</span>&nbsp;<span class="ident" id="2903798">IntSlice</span><span class="op" id="2903806">)</span>&nbsp;<span class="ident" id="2903808">Len</span><span class="op" id="2903811">(</span><span class="op" id="2903812">)</span>&nbsp;<span class="builtintype" id="2903814">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903828">{</span>&nbsp;<span class="keyword" id="2903830">return</span>&nbsp;<span class="builtinfunc" id="2903837">len</span><span class="op" id="2903840">(</span><span class="ident" id="2903841">p</span><span class="op" id="2903842">)</span>&nbsp;<span class="op" id="2903844">}</span><br>
<span class="lineno"></span><span class="keyword" id="2903846">func</span>&nbsp;<span class="op" id="2903851">(</span><span class="ident" id="2903852">p</span>&nbsp;<span class="ident" id="2903854">IntSlice</span><span class="op" id="2903862">)</span>&nbsp;<span class="ident" id="2903864">Less</span><span class="op" id="2903868">(</span><span class="ident" id="2903869">i</span><span class="op" id="2903870">,</span>&nbsp;<span class="ident" id="2903872">j</span>&nbsp;<span class="builtintype" id="2903874">int</span><span class="op" id="2903877">)</span>&nbsp;<span class="builtintype" id="2903879">bool</span>&nbsp;<span class="op" id="2903884">{</span>&nbsp;<span class="keyword" id="2903886">return</span>&nbsp;<span class="ident" id="2903893">p</span><span class="op" id="2903894">[</span><span class="ident" id="2903895">i</span><span class="op" id="2903896">]</span>&nbsp;<span class="op" id="2903898">&lt;</span>&nbsp;<span class="ident" id="2903900">p</span><span class="op" id="2903901">[</span><span class="ident" id="2903902">j</span><span class="op" id="2903903">]</span>&nbsp;<span class="op" id="2903905">}</span><br>
<span class="lineno"></span><span class="keyword" id="2903907">func</span>&nbsp;<span class="op" id="2903912">(</span><span class="ident" id="2903913">p</span>&nbsp;<span class="ident" id="2903915">IntSlice</span><span class="op" id="2903923">)</span>&nbsp;<span class="ident" id="2903925">Swap</span><span class="op" id="2903929">(</span><span class="ident" id="2903930">i</span><span class="op" id="2903931">,</span>&nbsp;<span class="ident" id="2903933">j</span>&nbsp;<span class="builtintype" id="2903935">int</span><span class="op" id="2903938">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903945">{</span>&nbsp;<span class="ident" id="2903947">p</span><span class="op" id="2903948">[</span><span class="ident" id="2903949">i</span><span class="op" id="2903950">]</span><span class="op" id="2903951">,</span>&nbsp;<span class="ident" id="2903953">p</span><span class="op" id="2903954">[</span><span class="ident" id="2903955">j</span><span class="op" id="2903956">]</span>&nbsp;<span class="op" id="2903958">=</span>&nbsp;<span class="ident" id="2903960">p</span><span class="op" id="2903961">[</span><span class="ident" id="2903962">j</span><span class="op" id="2903963">]</span><span class="op" id="2903964">,</span>&nbsp;<span class="ident" id="2903966">p</span><span class="op" id="2903967">[</span><span class="ident" id="2903968">i</span><span class="op" id="2903969">]</span>&nbsp;<span class="op" id="2903971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903974">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2904007">func</span>&nbsp;<span class="op" id="2904012">(</span><span class="ident" id="2904013">p</span>&nbsp;<span class="ident" id="2904015">IntSlice</span><span class="op" id="2904023">)</span>&nbsp;<span class="ident" id="2904025">Sort</span><span class="op" id="2904029">(</span><span class="op" id="2904030">)</span>&nbsp;<span class="op" id="2904032">{</span>&nbsp;<span class="ident" id="2904034">Sort</span><span class="op" id="2904038">(</span><span class="ident" id="2904039">p</span><span class="op" id="2904040">)</span>&nbsp;<span class="op" id="2904042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904045">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2904138">type</span>&nbsp;<span class="ident" id="2904143">Float64Slice</span>&nbsp;<span class="op" id="2904156">[</span><span class="op" id="2904157">]</span><span class="builtintype" id="2904158">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2904167">func</span>&nbsp;<span class="op" id="2904172">(</span><span class="ident" id="2904173">p</span>&nbsp;<span class="ident" id="2904175">Float64Slice</span><span class="op" id="2904187">)</span>&nbsp;<span class="ident" id="2904189">Len</span><span class="op" id="2904192">(</span><span class="op" id="2904193">)</span>&nbsp;<span class="builtintype" id="2904195">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904209">{</span>&nbsp;<span class="keyword" id="2904211">return</span>&nbsp;<span class="builtinfunc" id="2904218">len</span><span class="op" id="2904221">(</span><span class="ident" id="2904222">p</span><span class="op" id="2904223">)</span>&nbsp;<span class="op" id="2904225">}</span><br>
<span class="lineno"></span><span class="keyword" id="2904227">func</span>&nbsp;<span class="op" id="2904232">(</span><span class="ident" id="2904233">p</span>&nbsp;<span class="ident" id="2904235">Float64Slice</span><span class="op" id="2904247">)</span>&nbsp;<span class="ident" id="2904249">Less</span><span class="op" id="2904253">(</span><span class="ident" id="2904254">i</span><span class="op" id="2904255">,</span>&nbsp;<span class="ident" id="2904257">j</span>&nbsp;<span class="builtintype" id="2904259">int</span><span class="op" id="2904262">)</span>&nbsp;<span class="builtintype" id="2904264">bool</span>&nbsp;<span class="op" id="2904269">{</span>&nbsp;<span class="keyword" id="2904271">return</span>&nbsp;<span class="ident" id="2904278">p</span><span class="op" id="2904279">[</span><span class="ident" id="2904280">i</span><span class="op" id="2904281">]</span>&nbsp;<span class="op" id="2904283">&lt;</span>&nbsp;<span class="ident" id="2904285">p</span><span class="op" id="2904286">[</span><span class="ident" id="2904287">j</span><span class="op" id="2904288">]</span>&nbsp;<span class="op" id="2904290">||</span>&nbsp;<span class="ident" id="2904293">isNaN</span><span class="op" id="2904298">(</span><span class="ident" id="2904299">p</span><span class="op" id="2904300">[</span><span class="ident" id="2904301">i</span><span class="op" id="2904302">]</span><span class="op" id="2904303">)</span>&nbsp;<span class="op" id="2904305">&amp;&amp;</span>&nbsp;<span class="op" id="2904308">!</span><span class="ident" id="2904309">isNaN</span><span class="op" id="2904314">(</span><span class="ident" id="2904315">p</span><span class="op" id="2904316">[</span><span class="ident" id="2904317">j</span><span class="op" id="2904318">]</span><span class="op" id="2904319">)</span>&nbsp;<span class="op" id="2904321">}</span><br>
<span class="lineno"></span><span class="keyword" id="2904323">func</span>&nbsp;<span class="op" id="2904328">(</span><span class="ident" id="2904329">p</span>&nbsp;<span class="ident" id="2904331">Float64Slice</span><span class="op" id="2904343">)</span>&nbsp;<span class="ident" id="2904345">Swap</span><span class="op" id="2904349">(</span><span class="ident" id="2904350">i</span><span class="op" id="2904351">,</span>&nbsp;<span class="ident" id="2904353">j</span>&nbsp;<span class="builtintype" id="2904355">int</span><span class="op" id="2904358">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904365">{</span>&nbsp;<span class="ident" id="2904367">p</span><span class="op" id="2904368">[</span><span class="ident" id="2904369">i</span><span class="op" id="2904370">]</span><span class="op" id="2904371">,</span>&nbsp;<span class="ident" id="2904373">p</span><span class="op" id="2904374">[</span><span class="ident" id="2904375">j</span><span class="op" id="2904376">]</span>&nbsp;<span class="op" id="2904378">=</span>&nbsp;<span class="ident" id="2904380">p</span><span class="op" id="2904381">[</span><span class="ident" id="2904382">j</span><span class="op" id="2904383">]</span><span class="op" id="2904384">,</span>&nbsp;<span class="ident" id="2904386">p</span><span class="op" id="2904387">[</span><span class="ident" id="2904388">i</span><span class="op" id="2904389">]</span>&nbsp;<span class="op" id="2904391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904394">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2904470">func</span>&nbsp;<span class="ident" id="2904475">isNaN</span><span class="op" id="2904480">(</span><span class="ident" id="2904481">f</span>&nbsp;<span class="builtintype" id="2904483">float64</span><span class="op" id="2904490">)</span>&nbsp;<span class="builtintype" id="2904492">bool</span>&nbsp;<span class="op" id="2904497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2904500">return</span>&nbsp;<span class="ident" id="2904507">f</span>&nbsp;<span class="op" id="2904509">!=</span>&nbsp;<span class="ident" id="2904512">f</span><br>
<span class="lineno"></span><span class="op" id="2904514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904517">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2904550">func</span>&nbsp;<span class="op" id="2904555">(</span><span class="ident" id="2904556">p</span>&nbsp;<span class="ident" id="2904558">Float64Slice</span><span class="op" id="2904570">)</span>&nbsp;<span class="ident" id="2904572">Sort</span><span class="op" id="2904576">(</span><span class="op" id="2904577">)</span>&nbsp;<span class="op" id="2904579">{</span>&nbsp;<span class="ident" id="2904581">Sort</span><span class="op" id="2904585">(</span><span class="ident" id="2904586">p</span><span class="op" id="2904587">)</span>&nbsp;<span class="op" id="2904589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904592">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2904683">type</span>&nbsp;<span class="ident" id="2904688">StringSlice</span>&nbsp;<span class="op" id="2904700">[</span><span class="op" id="2904701">]</span><span class="builtintype" id="2904702">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2904710">func</span>&nbsp;<span class="op" id="2904715">(</span><span class="ident" id="2904716">p</span>&nbsp;<span class="ident" id="2904718">StringSlice</span><span class="op" id="2904729">)</span>&nbsp;<span class="ident" id="2904731">Len</span><span class="op" id="2904734">(</span><span class="op" id="2904735">)</span>&nbsp;<span class="builtintype" id="2904737">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904751">{</span>&nbsp;<span class="keyword" id="2904753">return</span>&nbsp;<span class="builtinfunc" id="2904760">len</span><span class="op" id="2904763">(</span><span class="ident" id="2904764">p</span><span class="op" id="2904765">)</span>&nbsp;<span class="op" id="2904767">}</span><br>
<span class="lineno"></span><span class="keyword" id="2904769">func</span>&nbsp;<span class="op" id="2904774">(</span><span class="ident" id="2904775">p</span>&nbsp;<span class="ident" id="2904777">StringSlice</span><span class="op" id="2904788">)</span>&nbsp;<span class="ident" id="2904790">Less</span><span class="op" id="2904794">(</span><span class="ident" id="2904795">i</span><span class="op" id="2904796">,</span>&nbsp;<span class="ident" id="2904798">j</span>&nbsp;<span class="builtintype" id="2904800">int</span><span class="op" id="2904803">)</span>&nbsp;<span class="builtintype" id="2904805">bool</span>&nbsp;<span class="op" id="2904810">{</span>&nbsp;<span class="keyword" id="2904812">return</span>&nbsp;<span class="ident" id="2904819">p</span><span class="op" id="2904820">[</span><span class="ident" id="2904821">i</span><span class="op" id="2904822">]</span>&nbsp;<span class="op" id="2904824">&lt;</span>&nbsp;<span class="ident" id="2904826">p</span><span class="op" id="2904827">[</span><span class="ident" id="2904828">j</span><span class="op" id="2904829">]</span>&nbsp;<span class="op" id="2904831">}</span><br>
<span class="lineno"></span><span class="keyword" id="2904833">func</span>&nbsp;<span class="op" id="2904838">(</span><span class="ident" id="2904839">p</span>&nbsp;<span class="ident" id="2904841">StringSlice</span><span class="op" id="2904852">)</span>&nbsp;<span class="ident" id="2904854">Swap</span><span class="op" id="2904858">(</span><span class="ident" id="2904859">i</span><span class="op" id="2904860">,</span>&nbsp;<span class="ident" id="2904862">j</span>&nbsp;<span class="builtintype" id="2904864">int</span><span class="op" id="2904867">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904874">{</span>&nbsp;<span class="ident" id="2904876">p</span><span class="op" id="2904877">[</span><span class="ident" id="2904878">i</span><span class="op" id="2904879">]</span><span class="op" id="2904880">,</span>&nbsp;<span class="ident" id="2904882">p</span><span class="op" id="2904883">[</span><span class="ident" id="2904884">j</span><span class="op" id="2904885">]</span>&nbsp;<span class="op" id="2904887">=</span>&nbsp;<span class="ident" id="2904889">p</span><span class="op" id="2904890">[</span><span class="ident" id="2904891">j</span><span class="op" id="2904892">]</span><span class="op" id="2904893">,</span>&nbsp;<span class="ident" id="2904895">p</span><span class="op" id="2904896">[</span><span class="ident" id="2904897">i</span><span class="op" id="2904898">]</span>&nbsp;<span class="op" id="2904900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904903">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2904936">func</span>&nbsp;<span class="op" id="2904941">(</span><span class="ident" id="2904942">p</span>&nbsp;<span class="ident" id="2904944">StringSlice</span><span class="op" id="2904955">)</span>&nbsp;<span class="ident" id="2904957">Sort</span><span class="op" id="2904961">(</span><span class="op" id="2904962">)</span>&nbsp;<span class="op" id="2904964">{</span>&nbsp;<span class="ident" id="2904966">Sort</span><span class="op" id="2904970">(</span><span class="ident" id="2904971">p</span><span class="op" id="2904972">)</span>&nbsp;<span class="op" id="2904974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2904977">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905019">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2905070">func</span>&nbsp;<span class="ident" id="2905075">Ints</span><span class="op" id="2905079">(</span><span class="ident" id="2905080">a</span>&nbsp;<span class="op" id="2905082">[</span><span class="op" id="2905083">]</span><span class="builtintype" id="2905084">int</span><span class="op" id="2905087">)</span>&nbsp;<span class="op" id="2905089">{</span>&nbsp;<span class="ident" id="2905091">Sort</span><span class="op" id="2905095">(</span><span class="ident" id="2905096">IntSlice</span><span class="op" id="2905104">(</span><span class="ident" id="2905105">a</span><span class="op" id="2905106">)</span><span class="op" id="2905107">)</span>&nbsp;<span class="op" id="2905109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905112">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2905171">func</span>&nbsp;<span class="ident" id="2905176">Float64s</span><span class="op" id="2905184">(</span><span class="ident" id="2905185">a</span>&nbsp;<span class="op" id="2905187">[</span><span class="op" id="2905188">]</span><span class="builtintype" id="2905189">float64</span><span class="op" id="2905196">)</span>&nbsp;<span class="op" id="2905198">{</span>&nbsp;<span class="ident" id="2905200">Sort</span><span class="op" id="2905204">(</span><span class="ident" id="2905205">Float64Slice</span><span class="op" id="2905217">(</span><span class="ident" id="2905218">a</span><span class="op" id="2905219">)</span><span class="op" id="2905220">)</span>&nbsp;<span class="op" id="2905222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2905225">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2905282">func</span>&nbsp;<span class="ident" id="2905287">Strings</span><span class="op" id="2905294">(</span><span class="ident" id="2905295">a</span>&nbsp;<span class="op" id="2905297">[</span><span class="op" id="2905298">]</span><span class="builtintype" id="2905299">string</span><span class="op" id="2905305">)</span>&nbsp;<span class="op" id="2905307">{</span>&nbsp;<span class="ident" id="2905309">Sort</span><span class="op" id="2905313">(</span><span class="ident" id="2905314">StringSlice</span><span class="op" id="2905325">(</span><span class="ident" id="2905326">a</span><span class="op" id="2905327">)</span><span class="op" id="2905328">)</span>&nbsp;<span class="op" id="2905330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905333">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2905411">func</span>&nbsp;<span class="ident" id="2905416">IntsAreSorted</span><span class="op" id="2905429">(</span><span class="ident" id="2905430">a</span>&nbsp;<span class="op" id="2905432">[</span><span class="op" id="2905433">]</span><span class="builtintype" id="2905434">int</span><span class="op" id="2905437">)</span>&nbsp;<span class="builtintype" id="2905439">bool</span>&nbsp;<span class="op" id="2905444">{</span>&nbsp;<span class="keyword" id="2905446">return</span>&nbsp;<span class="ident" id="2905453">IsSorted</span><span class="op" id="2905461">(</span><span class="ident" id="2905462">IntSlice</span><span class="op" id="2905470">(</span><span class="ident" id="2905471">a</span><span class="op" id="2905472">)</span><span class="op" id="2905473">)</span>&nbsp;<span class="op" id="2905475">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2905478">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2905564">func</span>&nbsp;<span class="ident" id="2905569">Float64sAreSorted</span><span class="op" id="2905586">(</span><span class="ident" id="2905587">a</span>&nbsp;<span class="op" id="2905589">[</span><span class="op" id="2905590">]</span><span class="builtintype" id="2905591">float64</span><span class="op" id="2905598">)</span>&nbsp;<span class="builtintype" id="2905600">bool</span>&nbsp;<span class="op" id="2905605">{</span>&nbsp;<span class="keyword" id="2905607">return</span>&nbsp;<span class="ident" id="2905614">IsSorted</span><span class="op" id="2905622">(</span><span class="ident" id="2905623">Float64Slice</span><span class="op" id="2905635">(</span><span class="ident" id="2905636">a</span><span class="op" id="2905637">)</span><span class="op" id="2905638">)</span>&nbsp;<span class="op" id="2905640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905643">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2905727">func</span>&nbsp;<span class="ident" id="2905732">StringsAreSorted</span><span class="op" id="2905748">(</span><span class="ident" id="2905749">a</span>&nbsp;<span class="op" id="2905751">[</span><span class="op" id="2905752">]</span><span class="builtintype" id="2905753">string</span><span class="op" id="2905759">)</span>&nbsp;<span class="builtintype" id="2905761">bool</span>&nbsp;<span class="op" id="2905766">{</span>&nbsp;<span class="keyword" id="2905768">return</span>&nbsp;<span class="ident" id="2905775">IsSorted</span><span class="op" id="2905783">(</span><span class="ident" id="2905784">StringSlice</span><span class="op" id="2905795">(</span><span class="ident" id="2905796">a</span><span class="op" id="2905797">)</span><span class="op" id="2905798">)</span>&nbsp;<span class="op" id="2905800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905803">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2905831">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2905907">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2905982">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2906045">//</span><br>
<span class="lineno"></span><span class="comment" id="2906048">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2906090">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2906162">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2906180">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2906234">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2906311">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2906383">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2906455">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2906510">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2906583">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2906634">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2906710">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2906784">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2906850">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2906927">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2907006">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2907084">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2907158">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2907206">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2907280">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907329">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2907402">//</span><br>
<span class="lineno">315</span><span class="comment" id="2907405">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2907475">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2907531">func</span>&nbsp;<span class="ident" id="2907536">Stable</span><span class="op" id="2907542">(</span><span class="ident" id="2907543">data</span>&nbsp;<span class="ident" id="2907548">Interface</span><span class="op" id="2907557">)</span>&nbsp;<span class="op" id="2907559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907562">n</span>&nbsp;<span class="op" id="2907564">:=</span>&nbsp;<span class="ident" id="2907567">data</span><span class="op" id="2907571">.</span><span class="ident" id="2907572">Len</span><span class="op" id="2907575">(</span><span class="op" id="2907576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907579">blockSize</span>&nbsp;<span class="op" id="2907589">:=</span>&nbsp;<span class="num" id="2907592">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907596">a</span><span class="op" id="2907597">,</span>&nbsp;<span class="ident" id="2907599">b</span>&nbsp;<span class="op" id="2907601">:=</span>&nbsp;<span class="num" id="2907604">0</span><span class="op" id="2907605">,</span>&nbsp;<span class="ident" id="2907607">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907618">for</span>&nbsp;<span class="ident" id="2907622">b</span>&nbsp;<span class="op" id="2907624">&lt;=</span>&nbsp;<span class="ident" id="2907627">n</span>&nbsp;<span class="op" id="2907629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907633">insertionSort</span><span class="op" id="2907646">(</span><span class="ident" id="2907647">data</span><span class="op" id="2907651">,</span>&nbsp;<span class="ident" id="2907653">a</span><span class="op" id="2907654">,</span>&nbsp;<span class="ident" id="2907656">b</span><span class="op" id="2907657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907661">a</span>&nbsp;<span class="op" id="2907663">=</span>&nbsp;<span class="ident" id="2907665">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907669">b</span>&nbsp;<span class="op" id="2907671">+=</span>&nbsp;<span class="ident" id="2907674">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907688">insertionSort</span><span class="op" id="2907701">(</span><span class="ident" id="2907702">data</span><span class="op" id="2907706">,</span>&nbsp;<span class="ident" id="2907708">a</span><span class="op" id="2907709">,</span>&nbsp;<span class="ident" id="2907711">n</span><span class="op" id="2907712">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907716">for</span>&nbsp;<span class="ident" id="2907720">blockSize</span>&nbsp;<span class="op" id="2907730">&lt;</span>&nbsp;<span class="ident" id="2907732">n</span>&nbsp;<span class="op" id="2907734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907738">a</span><span class="op" id="2907739">,</span>&nbsp;<span class="ident" id="2907741">b</span>&nbsp;<span class="op" id="2907743">=</span>&nbsp;<span class="num" id="2907745">0</span><span class="op" id="2907746">,</span>&nbsp;<span class="num" id="2907748">2</span><span class="op" id="2907749">*</span><span class="ident" id="2907750">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2907762">for</span>&nbsp;<span class="ident" id="2907766">b</span>&nbsp;<span class="op" id="2907768">&lt;=</span>&nbsp;<span class="ident" id="2907771">n</span>&nbsp;<span class="op" id="2907773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907778">symMerge</span><span class="op" id="2907786">(</span><span class="ident" id="2907787">data</span><span class="op" id="2907791">,</span>&nbsp;<span class="ident" id="2907793">a</span><span class="op" id="2907794">,</span>&nbsp;<span class="ident" id="2907796">a</span><span class="op" id="2907797">+</span><span class="ident" id="2907798">blockSize</span><span class="op" id="2907807">,</span>&nbsp;<span class="ident" id="2907809">b</span><span class="op" id="2907810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907815">a</span>&nbsp;<span class="op" id="2907817">=</span>&nbsp;<span class="ident" id="2907819">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907824">b</span>&nbsp;<span class="op" id="2907826">+=</span>&nbsp;<span class="num" id="2907829">2</span>&nbsp;<span class="op" id="2907831">*</span>&nbsp;<span class="ident" id="2907833">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907845">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907849">symMerge</span><span class="op" id="2907857">(</span><span class="ident" id="2907858">data</span><span class="op" id="2907862">,</span>&nbsp;<span class="ident" id="2907864">a</span><span class="op" id="2907865">,</span>&nbsp;<span class="ident" id="2907867">a</span><span class="op" id="2907868">+</span><span class="ident" id="2907869">blockSize</span><span class="op" id="2907878">,</span>&nbsp;<span class="ident" id="2907880">n</span><span class="op" id="2907881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2907885">blockSize</span>&nbsp;<span class="op" id="2907895">*=</span>&nbsp;<span class="num" id="2907898">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2907901">}</span><br>
<span class="lineno"></span><span class="op" id="2907903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2907906">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2907983">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2908060">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2908135">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2908210">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2908262">//</span><br>
<span class="lineno"></span><span class="comment" id="2908265">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2908306">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2908357">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2908418">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2908477">//</span><br>
<span class="lineno"></span><span class="comment" id="2908480">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2908555">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2908635">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2908712">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2908755">func</span>&nbsp;<span class="ident" id="2908760">symMerge</span><span class="op" id="2908768">(</span><span class="ident" id="2908769">data</span>&nbsp;<span class="ident" id="2908774">Interface</span><span class="op" id="2908783">,</span>&nbsp;<span class="ident" id="2908785">a</span><span class="op" id="2908786">,</span>&nbsp;<span class="ident" id="2908788">m</span><span class="op" id="2908789">,</span>&nbsp;<span class="ident" id="2908791">b</span>&nbsp;<span class="builtintype" id="2908793">int</span><span class="op" id="2908796">)</span>&nbsp;<span class="op" id="2908798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908801">if</span>&nbsp;<span class="ident" id="2908804">a</span>&nbsp;<span class="op" id="2908806">&gt;=</span>&nbsp;<span class="ident" id="2908809">m</span>&nbsp;<span class="op" id="2908811">||</span>&nbsp;<span class="ident" id="2908814">m</span>&nbsp;<span class="op" id="2908816">&gt;=</span>&nbsp;<span class="ident" id="2908819">b</span>&nbsp;<span class="op" id="2908821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908825">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2908833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908837">mid</span>&nbsp;<span class="op" id="2908841">:=</span>&nbsp;<span class="ident" id="2908844">a</span>&nbsp;<span class="op" id="2908846">+</span>&nbsp;<span class="op" id="2908848">(</span><span class="ident" id="2908849">b</span><span class="op" id="2908850">-</span><span class="ident" id="2908851">a</span><span class="op" id="2908852">)</span><span class="op" id="2908853">/</span><span class="num" id="2908854">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908857">n</span>&nbsp;<span class="op" id="2908859">:=</span>&nbsp;<span class="ident" id="2908862">mid</span>&nbsp;<span class="op" id="2908866">+</span>&nbsp;<span class="ident" id="2908868">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908871">start</span>&nbsp;<span class="op" id="2908877">:=</span>&nbsp;<span class="num" id="2908880">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908883">if</span>&nbsp;<span class="ident" id="2908886">m</span>&nbsp;<span class="op" id="2908888">&gt;</span>&nbsp;<span class="ident" id="2908890">mid</span>&nbsp;<span class="op" id="2908894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908898">start</span>&nbsp;<span class="op" id="2908904">=</span>&nbsp;<span class="ident" id="2908906">n</span>&nbsp;<span class="op" id="2908908">-</span>&nbsp;<span class="ident" id="2908910">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908914">r</span><span class="op" id="2908915">,</span>&nbsp;<span class="ident" id="2908917">p</span>&nbsp;<span class="op" id="2908919">:=</span>&nbsp;<span class="ident" id="2908922">mid</span><span class="op" id="2908925">,</span>&nbsp;<span class="ident" id="2908927">n</span><span class="op" id="2908928">-</span><span class="num" id="2908929">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908933">for</span>&nbsp;<span class="ident" id="2908937">start</span>&nbsp;<span class="op" id="2908943">&lt;</span>&nbsp;<span class="ident" id="2908945">r</span>&nbsp;<span class="op" id="2908947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2908952">c</span>&nbsp;<span class="op" id="2908954">:=</span>&nbsp;<span class="ident" id="2908957">start</span>&nbsp;<span class="op" id="2908963">+</span>&nbsp;<span class="op" id="2908965">(</span><span class="ident" id="2908966">r</span><span class="op" id="2908967">-</span><span class="ident" id="2908968">start</span><span class="op" id="2908973">)</span><span class="op" id="2908974">/</span><span class="num" id="2908975">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2908980">if</span>&nbsp;<span class="op" id="2908983">!</span><span class="ident" id="2908984">data</span><span class="op" id="2908988">.</span><span class="ident" id="2908989">Less</span><span class="op" id="2908993">(</span><span class="ident" id="2908994">p</span><span class="op" id="2908995">-</span><span class="ident" id="2908996">c</span><span class="op" id="2908997">,</span>&nbsp;<span class="ident" id="2908999">c</span><span class="op" id="2909000">)</span>&nbsp;<span class="op" id="2909002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909008">start</span>&nbsp;<span class="op" id="2909014">=</span>&nbsp;<span class="ident" id="2909016">c</span>&nbsp;<span class="op" id="2909018">+</span>&nbsp;<span class="num" id="2909020">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909025">}</span>&nbsp;<span class="keyword" id="2909027">else</span>&nbsp;<span class="op" id="2909032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909038">r</span>&nbsp;<span class="op" id="2909040">=</span>&nbsp;<span class="ident" id="2909042">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909054">}</span>&nbsp;<span class="keyword" id="2909056">else</span>&nbsp;<span class="op" id="2909061">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909065">start</span>&nbsp;<span class="op" id="2909071">=</span>&nbsp;<span class="ident" id="2909073">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909077">r</span><span class="op" id="2909078">,</span>&nbsp;<span class="ident" id="2909080">p</span>&nbsp;<span class="op" id="2909082">:=</span>&nbsp;<span class="ident" id="2909085">m</span><span class="op" id="2909086">,</span>&nbsp;<span class="ident" id="2909088">n</span><span class="op" id="2909089">-</span><span class="num" id="2909090">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909094">for</span>&nbsp;<span class="ident" id="2909098">start</span>&nbsp;<span class="op" id="2909104">&lt;</span>&nbsp;<span class="ident" id="2909106">r</span>&nbsp;<span class="op" id="2909108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909113">c</span>&nbsp;<span class="op" id="2909115">:=</span>&nbsp;<span class="ident" id="2909118">start</span>&nbsp;<span class="op" id="2909124">+</span>&nbsp;<span class="op" id="2909126">(</span><span class="ident" id="2909127">r</span><span class="op" id="2909128">-</span><span class="ident" id="2909129">start</span><span class="op" id="2909134">)</span><span class="op" id="2909135">/</span><span class="num" id="2909136">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909141">if</span>&nbsp;<span class="op" id="2909144">!</span><span class="ident" id="2909145">data</span><span class="op" id="2909149">.</span><span class="ident" id="2909150">Less</span><span class="op" id="2909154">(</span><span class="ident" id="2909155">p</span><span class="op" id="2909156">-</span><span class="ident" id="2909157">c</span><span class="op" id="2909158">,</span>&nbsp;<span class="ident" id="2909160">c</span><span class="op" id="2909161">)</span>&nbsp;<span class="op" id="2909163">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909169">start</span>&nbsp;<span class="op" id="2909175">=</span>&nbsp;<span class="ident" id="2909177">c</span>&nbsp;<span class="op" id="2909179">+</span>&nbsp;<span class="num" id="2909181">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909186">}</span>&nbsp;<span class="keyword" id="2909188">else</span>&nbsp;<span class="op" id="2909193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909199">r</span>&nbsp;<span class="op" id="2909201">=</span>&nbsp;<span class="ident" id="2909203">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909212">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909218">end</span>&nbsp;<span class="op" id="2909222">:=</span>&nbsp;<span class="ident" id="2909225">n</span>&nbsp;<span class="op" id="2909227">-</span>&nbsp;<span class="ident" id="2909229">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909236">rotate</span><span class="op" id="2909242">(</span><span class="ident" id="2909243">data</span><span class="op" id="2909247">,</span>&nbsp;<span class="ident" id="2909249">start</span><span class="op" id="2909254">,</span>&nbsp;<span class="ident" id="2909256">m</span><span class="op" id="2909257">,</span>&nbsp;<span class="ident" id="2909259">end</span><span class="op" id="2909262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909265">symMerge</span><span class="op" id="2909273">(</span><span class="ident" id="2909274">data</span><span class="op" id="2909278">,</span>&nbsp;<span class="ident" id="2909280">a</span><span class="op" id="2909281">,</span>&nbsp;<span class="ident" id="2909283">start</span><span class="op" id="2909288">,</span>&nbsp;<span class="ident" id="2909290">mid</span><span class="op" id="2909293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909296">symMerge</span><span class="op" id="2909304">(</span><span class="ident" id="2909305">data</span><span class="op" id="2909309">,</span>&nbsp;<span class="ident" id="2909311">mid</span><span class="op" id="2909314">,</span>&nbsp;<span class="ident" id="2909316">end</span><span class="op" id="2909319">,</span>&nbsp;<span class="ident" id="2909321">b</span><span class="op" id="2909322">)</span><br>
<span class="lineno">390</span><span class="op" id="2909324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909327">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2909402">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2909457">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2909513">func</span>&nbsp;<span class="ident" id="2909518">rotate</span><span class="op" id="2909524">(</span><span class="ident" id="2909525">data</span>&nbsp;<span class="ident" id="2909530">Interface</span><span class="op" id="2909539">,</span>&nbsp;<span class="ident" id="2909541">a</span><span class="op" id="2909542">,</span>&nbsp;<span class="ident" id="2909544">m</span><span class="op" id="2909545">,</span>&nbsp;<span class="ident" id="2909547">b</span>&nbsp;<span class="builtintype" id="2909549">int</span><span class="op" id="2909552">)</span>&nbsp;<span class="op" id="2909554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909557">i</span>&nbsp;<span class="op" id="2909559">:=</span>&nbsp;<span class="ident" id="2909562">m</span>&nbsp;<span class="op" id="2909564">-</span>&nbsp;<span class="ident" id="2909566">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909569">if</span>&nbsp;<span class="ident" id="2909572">i</span>&nbsp;<span class="op" id="2909574">==</span>&nbsp;<span class="num" id="2909577">0</span>&nbsp;<span class="op" id="2909579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909583">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909591">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909594">j</span>&nbsp;<span class="op" id="2909596">:=</span>&nbsp;<span class="ident" id="2909599">b</span>&nbsp;<span class="op" id="2909601">-</span>&nbsp;<span class="ident" id="2909603">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909606">if</span>&nbsp;<span class="ident" id="2909609">j</span>&nbsp;<span class="op" id="2909611">==</span>&nbsp;<span class="num" id="2909614">0</span>&nbsp;<span class="op" id="2909616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909620">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909632">if</span>&nbsp;<span class="ident" id="2909635">i</span>&nbsp;<span class="op" id="2909637">==</span>&nbsp;<span class="ident" id="2909640">j</span>&nbsp;<span class="op" id="2909642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909646">swapRange</span><span class="op" id="2909655">(</span><span class="ident" id="2909656">data</span><span class="op" id="2909660">,</span>&nbsp;<span class="ident" id="2909662">a</span><span class="op" id="2909663">,</span>&nbsp;<span class="ident" id="2909665">m</span><span class="op" id="2909666">,</span>&nbsp;<span class="ident" id="2909668">i</span><span class="op" id="2909669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909673">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909685">p</span>&nbsp;<span class="op" id="2909687">:=</span>&nbsp;<span class="ident" id="2909690">a</span>&nbsp;<span class="op" id="2909692">+</span>&nbsp;<span class="ident" id="2909694">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909697">for</span>&nbsp;<span class="ident" id="2909701">i</span>&nbsp;<span class="op" id="2909703">!=</span>&nbsp;<span class="ident" id="2909706">j</span>&nbsp;<span class="op" id="2909708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2909712">if</span>&nbsp;<span class="ident" id="2909715">i</span>&nbsp;<span class="op" id="2909717">&gt;</span>&nbsp;<span class="ident" id="2909719">j</span>&nbsp;<span class="op" id="2909721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909726">swapRange</span><span class="op" id="2909735">(</span><span class="ident" id="2909736">data</span><span class="op" id="2909740">,</span>&nbsp;<span class="ident" id="2909742">p</span><span class="op" id="2909743">-</span><span class="ident" id="2909744">i</span><span class="op" id="2909745">,</span>&nbsp;<span class="ident" id="2909747">p</span><span class="op" id="2909748">,</span>&nbsp;<span class="ident" id="2909750">j</span><span class="op" id="2909751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909756">i</span>&nbsp;<span class="op" id="2909758">-=</span>&nbsp;<span class="ident" id="2909761">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909765">}</span>&nbsp;<span class="keyword" id="2909767">else</span>&nbsp;<span class="op" id="2909772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909777">swapRange</span><span class="op" id="2909786">(</span><span class="ident" id="2909787">data</span><span class="op" id="2909791">,</span>&nbsp;<span class="ident" id="2909793">p</span><span class="op" id="2909794">-</span><span class="ident" id="2909795">i</span><span class="op" id="2909796">,</span>&nbsp;<span class="ident" id="2909798">p</span><span class="op" id="2909799">+</span><span class="ident" id="2909800">j</span><span class="op" id="2909801">-</span><span class="ident" id="2909802">i</span><span class="op" id="2909803">,</span>&nbsp;<span class="ident" id="2909805">i</span><span class="op" id="2909806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909811">j</span>&nbsp;<span class="op" id="2909813">-=</span>&nbsp;<span class="ident" id="2909816">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2909823">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2909826">swapRange</span><span class="op" id="2909835">(</span><span class="ident" id="2909836">data</span><span class="op" id="2909840">,</span>&nbsp;<span class="ident" id="2909842">p</span><span class="op" id="2909843">-</span><span class="ident" id="2909844">i</span><span class="op" id="2909845">,</span>&nbsp;<span class="ident" id="2909847">p</span><span class="op" id="2909848">,</span>&nbsp;<span class="ident" id="2909850">i</span><span class="op" id="2909851">)</span><br>
<span class="lineno"></span><span class="op" id="2909853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909856">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
