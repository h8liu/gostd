<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6755296">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6755351">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6755405">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6755456">package</span>&nbsp;<span class="ident" id="6755464">zlib</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6755470">import</span>&nbsp;<span class="op" id="6755477">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755480">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755489">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755496">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755502">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755515">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755521">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6755531">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6755534">var</span>&nbsp;<span class="ident" id="6755538">filenames</span>&nbsp;<span class="op" id="6755548">=</span>&nbsp;<span class="op" id="6755550">[</span><span class="op" id="6755551">]</span><span class="builtintype" id="6755552">string</span><span class="op" id="6755558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755561">&#34;../testdata/e.txt&#34;</span><span class="op" id="6755580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755583">&#34;../testdata/pi.txt&#34;</span><span class="op" id="6755603">,</span><br>
<span class="lineno"></span><span class="op" id="6755605">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6755608">var</span>&nbsp;<span class="ident" id="6755612">data</span>&nbsp;<span class="op" id="6755617">=</span>&nbsp;<span class="op" id="6755619">[</span><span class="op" id="6755620">]</span><span class="builtintype" id="6755621">string</span><span class="op" id="6755627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6755630">&#34;test&nbsp;a&nbsp;reasonable&nbsp;sized&nbsp;string&nbsp;that&nbsp;can&nbsp;be&nbsp;compressed&#34;</span><span class="op" id="6755685">,</span><br>
<span class="lineno"></span><span class="op" id="6755687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6755690">//&nbsp;Tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;at&nbsp;the&nbsp;given&nbsp;compression&nbsp;level&nbsp;and&nbsp;dictionary</span><br>
<span class="lineno"></span><span class="comment" id="6755800">//&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6755849">func</span>&nbsp;<span class="ident" id="6755854">testFileLevelDict</span><span class="op" id="6755871">(</span><span class="ident" id="6755872">t</span>&nbsp;<span class="op" id="6755874">*</span><span class="ident" id="6755875"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6755882">.</span><span class="ident" id="6755883">T</span><span class="op" id="6755884">,</span>&nbsp;<span class="ident" id="6755886">fn</span>&nbsp;<span class="builtintype" id="6755889">string</span><span class="op" id="6755895">,</span>&nbsp;<span class="ident" id="6755897">level</span>&nbsp;<span class="builtintype" id="6755903">int</span><span class="op" id="6755906">,</span>&nbsp;<span class="ident" id="6755908">d</span>&nbsp;<span class="builtintype" id="6755910">string</span><span class="op" id="6755916">)</span>&nbsp;<span class="op" id="6755918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6755921">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755958">golden</span><span class="op" id="6755964">,</span>&nbsp;<span class="ident" id="6755966">err</span>&nbsp;<span class="op" id="6755970">:=</span>&nbsp;<span class="ident" id="6755973"><a href="/compress/zlib/writer_test.go.html#6755515">os</a></span><span class="op" id="6755975">.</span><span class="ident" id="6755976">Open</span><span class="op" id="6755980">(</span><span class="ident" id="6755981"><a href="/compress/zlib/writer_test.go.html#6755886">fn</a></span><span class="op" id="6755983">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755986">if</span>&nbsp;<span class="ident" id="6755989"><a href="/compress/zlib/writer_test.go.html#6755966">err</a></span>&nbsp;<span class="op" id="6755993">!=</span>&nbsp;<span class="ident" id="6755996">nil</span>&nbsp;<span class="op" id="6756000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756004"><a href="/compress/zlib/writer_test.go.html#6755872">t</a></span><span class="op" id="6756005">.</span><span class="ident" id="6756006">Errorf</span><span class="op" id="6756012">(</span><span class="string" id="6756013">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;%v&#34;</span><span class="op" id="6756041">,</span>&nbsp;<span class="ident" id="6756043"><a href="/compress/zlib/writer_test.go.html#6755886">fn</a></span><span class="op" id="6756045">,</span>&nbsp;<span class="ident" id="6756047"><a href="/compress/zlib/writer_test.go.html#6755897">level</a></span><span class="op" id="6756052">,</span>&nbsp;<span class="ident" id="6756054"><a href="/compress/zlib/writer_test.go.html#6755908">d</a></span><span class="op" id="6756055">,</span>&nbsp;<span class="ident" id="6756057"><a href="/compress/zlib/writer_test.go.html#6755966">err</a></span><span class="op" id="6756060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756064">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756075">defer</span>&nbsp;<span class="ident" id="6756081"><a href="/compress/zlib/writer_test.go.html#6755958">golden</a></span><span class="op" id="6756087">.</span><span class="ident" id="6756088">Close</span><span class="op" id="6756093">(</span><span class="op" id="6756094">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756097">b0</span><span class="op" id="6756099">,</span>&nbsp;<span class="ident" id="6756101">err0</span>&nbsp;<span class="op" id="6756106">:=</span>&nbsp;<span class="ident" id="6756109"><a href="/compress/zlib/writer_test.go.html#6755502">ioutil</a></span><span class="op" id="6756115">.</span><span class="ident" id="6756116">ReadAll</span><span class="op" id="6756123">(</span><span class="ident" id="6756124"><a href="/compress/zlib/writer_test.go.html#6755958">golden</a></span><span class="op" id="6756130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756133">if</span>&nbsp;<span class="ident" id="6756136"><a href="/compress/zlib/writer_test.go.html#6756101">err0</a></span>&nbsp;<span class="op" id="6756141">!=</span>&nbsp;<span class="ident" id="6756144">nil</span>&nbsp;<span class="op" id="6756148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756152"><a href="/compress/zlib/writer_test.go.html#6755872">t</a></span><span class="op" id="6756153">.</span><span class="ident" id="6756154">Errorf</span><span class="op" id="6756160">(</span><span class="string" id="6756161">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;%v&#34;</span><span class="op" id="6756189">,</span>&nbsp;<span class="ident" id="6756191"><a href="/compress/zlib/writer_test.go.html#6755886">fn</a></span><span class="op" id="6756193">,</span>&nbsp;<span class="ident" id="6756195"><a href="/compress/zlib/writer_test.go.html#6755897">level</a></span><span class="op" id="6756200">,</span>&nbsp;<span class="ident" id="6756202"><a href="/compress/zlib/writer_test.go.html#6755908">d</a></span><span class="op" id="6756203">,</span>&nbsp;<span class="ident" id="6756205"><a href="/compress/zlib/writer_test.go.html#6756101">err0</a></span><span class="op" id="6756209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756213">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756221">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756224"><a href="/compress/zlib/writer_test.go.html#6756267">testLevelDict</a></span><span class="op" id="6756237">(</span><span class="ident" id="6756238"><a href="/compress/zlib/writer_test.go.html#6755872">t</a></span><span class="op" id="6756239">,</span>&nbsp;<span class="ident" id="6756241"><a href="/compress/zlib/writer_test.go.html#6755886">fn</a></span><span class="op" id="6756243">,</span>&nbsp;<span class="ident" id="6756245"><a href="/compress/zlib/writer_test.go.html#6756097">b0</a></span><span class="op" id="6756247">,</span>&nbsp;<span class="ident" id="6756249"><a href="/compress/zlib/writer_test.go.html#6755897">level</a></span><span class="op" id="6756254">,</span>&nbsp;<span class="ident" id="6756256"><a href="/compress/zlib/writer_test.go.html#6755908">d</a></span><span class="op" id="6756257">)</span><br>
<span class="lineno"></span><span class="op" id="6756259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6756262">func</span>&nbsp;<span class="ident" id="6756267">testLevelDict</span><span class="op" id="6756280">(</span><span class="ident" id="6756281">t</span>&nbsp;<span class="op" id="6756283">*</span><span class="ident" id="6756284"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6756291">.</span><span class="ident" id="6756292">T</span><span class="op" id="6756293">,</span>&nbsp;<span class="ident" id="6756295">fn</span>&nbsp;<span class="builtintype" id="6756298">string</span><span class="op" id="6756304">,</span>&nbsp;<span class="ident" id="6756306">b0</span>&nbsp;<span class="op" id="6756309">[</span><span class="op" id="6756310">]</span><span class="builtintype" id="6756311">byte</span><span class="op" id="6756315">,</span>&nbsp;<span class="ident" id="6756317">level</span>&nbsp;<span class="builtintype" id="6756323">int</span><span class="op" id="6756326">,</span>&nbsp;<span class="ident" id="6756328">d</span>&nbsp;<span class="builtintype" id="6756330">string</span><span class="op" id="6756336">)</span>&nbsp;<span class="op" id="6756338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6756341">//&nbsp;Make&nbsp;dictionary,&nbsp;if&nbsp;given.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756372">var</span>&nbsp;<span class="ident" id="6756376">dict</span>&nbsp;<span class="op" id="6756381">[</span><span class="op" id="6756382">]</span><span class="builtintype" id="6756383">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756389">if</span>&nbsp;<span class="ident" id="6756392"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span>&nbsp;<span class="op" id="6756394">!=</span>&nbsp;<span class="string" id="6756397">&#34;&#34;</span>&nbsp;<span class="op" id="6756400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756404"><a href="/compress/zlib/writer_test.go.html#6756376">dict</a></span>&nbsp;<span class="op" id="6756409">=</span>&nbsp;<span class="op" id="6756411">[</span><span class="op" id="6756412">]</span><span class="builtintype" id="6756413">byte</span><span class="op" id="6756417">(</span><span class="ident" id="6756418"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6756419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6756426">//&nbsp;Push&nbsp;data&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756523">piper</span><span class="op" id="6756528">,</span>&nbsp;<span class="ident" id="6756530">pipew</span>&nbsp;<span class="op" id="6756536">:=</span>&nbsp;<span class="ident" id="6756539"><a href="/compress/zlib/writer_test.go.html#6755496">io</a></span><span class="op" id="6756541">.</span><span class="ident" id="6756542">Pipe</span><span class="op" id="6756546">(</span><span class="op" id="6756547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756550">defer</span>&nbsp;<span class="ident" id="6756556"><a href="/compress/zlib/writer_test.go.html#6756523">piper</a></span><span class="op" id="6756561">.</span><span class="ident" id="6756562">Close</span><span class="op" id="6756567">(</span><span class="op" id="6756568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756571">go</span>&nbsp;<span class="keyword" id="6756574">func</span><span class="op" id="6756578">(</span><span class="op" id="6756579">)</span>&nbsp;<span class="op" id="6756581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756585">defer</span>&nbsp;<span class="ident" id="6756591"><a href="/compress/zlib/writer_test.go.html#6756530">pipew</a></span><span class="op" id="6756596">.</span><span class="ident" id="6756597">Close</span><span class="op" id="6756602">(</span><span class="op" id="6756603">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756607">zlibw</span><span class="op" id="6756612">,</span>&nbsp;<span class="ident" id="6756614">err</span>&nbsp;<span class="op" id="6756618">:=</span>&nbsp;<span class="ident" id="6756621"><a href="/compress/zlib/writer.go.html#5616884">NewWriterLevelDict</a></span><span class="op" id="6756639">(</span><span class="ident" id="6756640"><a href="/compress/zlib/writer_test.go.html#6756530">pipew</a></span><span class="op" id="6756645">,</span>&nbsp;<span class="ident" id="6756647"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6756652">,</span>&nbsp;<span class="ident" id="6756654"><a href="/compress/zlib/writer_test.go.html#6756376">dict</a></span><span class="op" id="6756658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756662">if</span>&nbsp;<span class="ident" id="6756665"><a href="/compress/zlib/writer_test.go.html#6756614">err</a></span>&nbsp;<span class="op" id="6756669">!=</span>&nbsp;<span class="ident" id="6756672">nil</span>&nbsp;<span class="op" id="6756676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756681"><a href="/compress/zlib/writer_test.go.html#6756281">t</a></span><span class="op" id="6756682">.</span><span class="ident" id="6756683">Errorf</span><span class="op" id="6756689">(</span><span class="string" id="6756690">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;%v&#34;</span><span class="op" id="6756718">,</span>&nbsp;<span class="ident" id="6756720"><a href="/compress/zlib/writer_test.go.html#6756295">fn</a></span><span class="op" id="6756722">,</span>&nbsp;<span class="ident" id="6756724"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6756729">,</span>&nbsp;<span class="ident" id="6756731"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6756732">,</span>&nbsp;<span class="ident" id="6756734"><a href="/compress/zlib/writer_test.go.html#6756614">err</a></span><span class="op" id="6756737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756742">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756751">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756755">defer</span>&nbsp;<span class="ident" id="6756761"><a href="/compress/zlib/writer_test.go.html#6756607">zlibw</a></span><span class="op" id="6756766">.</span><span class="ident" id="6756767">Close</span><span class="op" id="6756772">(</span><span class="op" id="6756773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756777">_</span><span class="op" id="6756778">,</span>&nbsp;<span class="ident" id="6756780"><a href="/compress/zlib/writer_test.go.html#6756614">err</a></span>&nbsp;<span class="op" id="6756784">=</span>&nbsp;<span class="ident" id="6756786"><a href="/compress/zlib/writer_test.go.html#6756607">zlibw</a></span><span class="op" id="6756791">.</span><span class="ident" id="6756792">Write</span><span class="op" id="6756797">(</span><span class="ident" id="6756798"><a href="/compress/zlib/writer_test.go.html#6756306">b0</a></span><span class="op" id="6756800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756804">if</span>&nbsp;<span class="ident" id="6756807"><a href="/compress/zlib/writer_test.go.html#6756614">err</a></span>&nbsp;<span class="op" id="6756811">!=</span>&nbsp;<span class="ident" id="6756814">nil</span>&nbsp;<span class="op" id="6756818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756823"><a href="/compress/zlib/writer_test.go.html#6756281">t</a></span><span class="op" id="6756824">.</span><span class="ident" id="6756825">Errorf</span><span class="op" id="6756831">(</span><span class="string" id="6756832">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;%v&#34;</span><span class="op" id="6756860">,</span>&nbsp;<span class="ident" id="6756862"><a href="/compress/zlib/writer_test.go.html#6756295">fn</a></span><span class="op" id="6756864">,</span>&nbsp;<span class="ident" id="6756866"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6756871">,</span>&nbsp;<span class="ident" id="6756873"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6756874">,</span>&nbsp;<span class="ident" id="6756876"><a href="/compress/zlib/writer_test.go.html#6756614">err</a></span><span class="op" id="6756879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756884">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756896">}</span><span class="op" id="6756897">(</span><span class="op" id="6756898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756901">zlibr</span><span class="op" id="6756906">,</span>&nbsp;<span class="ident" id="6756908">err</span>&nbsp;<span class="op" id="6756912">:=</span>&nbsp;<span class="ident" id="6756915"><a href="/compress/zlib/reader.go.html#5613091">NewReaderDict</a></span><span class="op" id="6756928">(</span><span class="ident" id="6756929"><a href="/compress/zlib/writer_test.go.html#6756523">piper</a></span><span class="op" id="6756934">,</span>&nbsp;<span class="ident" id="6756936"><a href="/compress/zlib/writer_test.go.html#6756376">dict</a></span><span class="op" id="6756940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756943">if</span>&nbsp;<span class="ident" id="6756946"><a href="/compress/zlib/writer_test.go.html#6756908">err</a></span>&nbsp;<span class="op" id="6756950">!=</span>&nbsp;<span class="ident" id="6756953">nil</span>&nbsp;<span class="op" id="6756957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756961"><a href="/compress/zlib/writer_test.go.html#6756281">t</a></span><span class="op" id="6756962">.</span><span class="ident" id="6756963">Errorf</span><span class="op" id="6756969">(</span><span class="string" id="6756970">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;%v&#34;</span><span class="op" id="6756998">,</span>&nbsp;<span class="ident" id="6757000"><a href="/compress/zlib/writer_test.go.html#6756295">fn</a></span><span class="op" id="6757002">,</span>&nbsp;<span class="ident" id="6757004"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6757009">,</span>&nbsp;<span class="ident" id="6757011"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6757012">,</span>&nbsp;<span class="ident" id="6757014"><a href="/compress/zlib/writer_test.go.html#6756908">err</a></span><span class="op" id="6757017">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757021">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757032">defer</span>&nbsp;<span class="ident" id="6757038"><a href="/compress/zlib/writer_test.go.html#6756901">zlibr</a></span><span class="op" id="6757043">.</span><span class="ident" id="6757044">Close</span><span class="op" id="6757049">(</span><span class="op" id="6757050">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6757054">//&nbsp;Compare&nbsp;the&nbsp;decompressed&nbsp;data.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757089">b1</span><span class="op" id="6757091">,</span>&nbsp;<span class="ident" id="6757093">err1</span>&nbsp;<span class="op" id="6757098">:=</span>&nbsp;<span class="ident" id="6757101"><a href="/compress/zlib/writer_test.go.html#6755502">ioutil</a></span><span class="op" id="6757107">.</span><span class="ident" id="6757108">ReadAll</span><span class="op" id="6757115">(</span><span class="ident" id="6757116"><a href="/compress/zlib/writer_test.go.html#6756901">zlibr</a></span><span class="op" id="6757121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757124">if</span>&nbsp;<span class="ident" id="6757127"><a href="/compress/zlib/writer_test.go.html#6757093">err1</a></span>&nbsp;<span class="op" id="6757132">!=</span>&nbsp;<span class="ident" id="6757135">nil</span>&nbsp;<span class="op" id="6757139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757143"><a href="/compress/zlib/writer_test.go.html#6756281">t</a></span><span class="op" id="6757144">.</span><span class="ident" id="6757145">Errorf</span><span class="op" id="6757151">(</span><span class="string" id="6757152">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;%v&#34;</span><span class="op" id="6757180">,</span>&nbsp;<span class="ident" id="6757182"><a href="/compress/zlib/writer_test.go.html#6756295">fn</a></span><span class="op" id="6757184">,</span>&nbsp;<span class="ident" id="6757186"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6757191">,</span>&nbsp;<span class="ident" id="6757193"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6757194">,</span>&nbsp;<span class="ident" id="6757196"><a href="/compress/zlib/writer_test.go.html#6757093">err1</a></span><span class="op" id="6757200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757204">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757212">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757215">if</span>&nbsp;<span class="builtinfunc" id="6757218">len</span><span class="op" id="6757221">(</span><span class="ident" id="6757222"><a href="/compress/zlib/writer_test.go.html#6756306">b0</a></span><span class="op" id="6757224">)</span>&nbsp;<span class="op" id="6757226">!=</span>&nbsp;<span class="builtinfunc" id="6757229">len</span><span class="op" id="6757232">(</span><span class="ident" id="6757233"><a href="/compress/zlib/writer_test.go.html#6757089">b1</a></span><span class="op" id="6757235">)</span>&nbsp;<span class="op" id="6757237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757241"><a href="/compress/zlib/writer_test.go.html#6756281">t</a></span><span class="op" id="6757242">.</span><span class="ident" id="6757243">Errorf</span><span class="op" id="6757249">(</span><span class="string" id="6757250">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;versus&nbsp;%d&#34;</span><span class="op" id="6757304">,</span>&nbsp;<span class="ident" id="6757306"><a href="/compress/zlib/writer_test.go.html#6756295">fn</a></span><span class="op" id="6757308">,</span>&nbsp;<span class="ident" id="6757310"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6757315">,</span>&nbsp;<span class="ident" id="6757317"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6757318">,</span>&nbsp;<span class="builtinfunc" id="6757320">len</span><span class="op" id="6757323">(</span><span class="ident" id="6757324"><a href="/compress/zlib/writer_test.go.html#6756306">b0</a></span><span class="op" id="6757326">)</span><span class="op" id="6757327">,</span>&nbsp;<span class="builtinfunc" id="6757329">len</span><span class="op" id="6757332">(</span><span class="ident" id="6757333"><a href="/compress/zlib/writer_test.go.html#6757089">b1</a></span><span class="op" id="6757335">)</span><span class="op" id="6757336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757340">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757351">for</span>&nbsp;<span class="ident" id="6757355">i</span>&nbsp;<span class="op" id="6757357">:=</span>&nbsp;<span class="num" id="6757360">0</span><span class="op" id="6757361">;</span>&nbsp;<span class="ident" id="6757363"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span>&nbsp;<span class="op" id="6757365">&lt;</span>&nbsp;<span class="builtinfunc" id="6757367">len</span><span class="op" id="6757370">(</span><span class="ident" id="6757371"><a href="/compress/zlib/writer_test.go.html#6756306">b0</a></span><span class="op" id="6757373">)</span><span class="op" id="6757374">;</span>&nbsp;<span class="ident" id="6757376"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span><span class="op" id="6757377">++</span>&nbsp;<span class="op" id="6757380">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757384">if</span>&nbsp;<span class="ident" id="6757387"><a href="/compress/zlib/writer_test.go.html#6756306">b0</a></span><span class="op" id="6757389">[</span><span class="ident" id="6757390"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span><span class="op" id="6757391">]</span>&nbsp;<span class="op" id="6757393">!=</span>&nbsp;<span class="ident" id="6757396"><a href="/compress/zlib/writer_test.go.html#6757089">b1</a></span><span class="op" id="6757398">[</span><span class="ident" id="6757399"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span><span class="op" id="6757400">]</span>&nbsp;<span class="op" id="6757402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757407"><a href="/compress/zlib/writer_test.go.html#6756281">t</a></span><span class="op" id="6757408">.</span><span class="ident" id="6757409">Errorf</span><span class="op" id="6757415">(</span><span class="string" id="6757416">&#34;%s&nbsp;(level=%d,&nbsp;dict=%q):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;versus&nbsp;0x%02x\n&#34;</span><span class="op" id="6757480">,</span>&nbsp;<span class="ident" id="6757482"><a href="/compress/zlib/writer_test.go.html#6756295">fn</a></span><span class="op" id="6757484">,</span>&nbsp;<span class="ident" id="6757486"><a href="/compress/zlib/writer_test.go.html#6756317">level</a></span><span class="op" id="6757491">,</span>&nbsp;<span class="ident" id="6757493"><a href="/compress/zlib/writer_test.go.html#6756328">d</a></span><span class="op" id="6757494">,</span>&nbsp;<span class="ident" id="6757496"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span><span class="op" id="6757497">,</span>&nbsp;<span class="ident" id="6757499"><a href="/compress/zlib/writer_test.go.html#6756306">b0</a></span><span class="op" id="6757501">[</span><span class="ident" id="6757502"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span><span class="op" id="6757503">]</span><span class="op" id="6757504">,</span>&nbsp;<span class="ident" id="6757506"><a href="/compress/zlib/writer_test.go.html#6757089">b1</a></span><span class="op" id="6757508">[</span><span class="ident" id="6757509"><a href="/compress/zlib/writer_test.go.html#6757355">i</a></span><span class="op" id="6757510">]</span><span class="op" id="6757511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757516">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757528">}</span><br>
<span class="lineno">90</span><span class="op" id="6757530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757533">func</span>&nbsp;<span class="ident" id="6757538">testFileLevelDictReset</span><span class="op" id="6757560">(</span><span class="ident" id="6757561">t</span>&nbsp;<span class="op" id="6757563">*</span><span class="ident" id="6757564"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6757571">.</span><span class="ident" id="6757572">T</span><span class="op" id="6757573">,</span>&nbsp;<span class="ident" id="6757575">fn</span>&nbsp;<span class="builtintype" id="6757578">string</span><span class="op" id="6757584">,</span>&nbsp;<span class="ident" id="6757586">level</span>&nbsp;<span class="builtintype" id="6757592">int</span><span class="op" id="6757595">,</span>&nbsp;<span class="ident" id="6757597">dict</span>&nbsp;<span class="op" id="6757602">[</span><span class="op" id="6757603">]</span><span class="builtintype" id="6757604">byte</span><span class="op" id="6757608">)</span>&nbsp;<span class="op" id="6757610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757613">var</span>&nbsp;<span class="ident" id="6757617">b0</span>&nbsp;<span class="op" id="6757620">[</span><span class="op" id="6757621">]</span><span class="builtintype" id="6757622">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757628">var</span>&nbsp;<span class="ident" id="6757632">err</span>&nbsp;<span class="builtintype" id="6757636">error</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757643">if</span>&nbsp;<span class="ident" id="6757646"><a href="/compress/zlib/writer_test.go.html#6757575">fn</a></span>&nbsp;<span class="op" id="6757649">!=</span>&nbsp;<span class="string" id="6757652">&#34;&#34;</span>&nbsp;<span class="op" id="6757655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757659"><a href="/compress/zlib/writer_test.go.html#6757617">b0</a></span><span class="op" id="6757661">,</span>&nbsp;<span class="ident" id="6757663"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6757667">=</span>&nbsp;<span class="ident" id="6757669"><a href="/compress/zlib/writer_test.go.html#6755502">ioutil</a></span><span class="op" id="6757675">.</span><span class="ident" id="6757676">ReadFile</span><span class="op" id="6757684">(</span><span class="ident" id="6757685"><a href="/compress/zlib/writer_test.go.html#6757575">fn</a></span><span class="op" id="6757687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757691">if</span>&nbsp;<span class="ident" id="6757694"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6757698">!=</span>&nbsp;<span class="ident" id="6757701">nil</span>&nbsp;<span class="op" id="6757705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757710"><a href="/compress/zlib/writer_test.go.html#6757561">t</a></span><span class="op" id="6757711">.</span><span class="ident" id="6757712">Errorf</span><span class="op" id="6757718">(</span><span class="string" id="6757719">&#34;%s&nbsp;(level=%d):&nbsp;%v&#34;</span><span class="op" id="6757738">,</span>&nbsp;<span class="ident" id="6757740"><a href="/compress/zlib/writer_test.go.html#6757575">fn</a></span><span class="op" id="6757742">,</span>&nbsp;<span class="ident" id="6757744"><a href="/compress/zlib/writer_test.go.html#6757586">level</a></span><span class="op" id="6757749">,</span>&nbsp;<span class="ident" id="6757751"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span><span class="op" id="6757754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757759">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6757775">//&nbsp;Compress&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757794">buf</span>&nbsp;<span class="op" id="6757798">:=</span>&nbsp;<span class="builtinfunc" id="6757801">new</span><span class="op" id="6757804">(</span><span class="ident" id="6757805"><a href="/compress/zlib/writer_test.go.html#6755480">bytes</a></span><span class="op" id="6757810">.</span><span class="ident" id="6757811">Buffer</span><span class="op" id="6757817">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757820">var</span>&nbsp;<span class="ident" id="6757824">zlibw</span>&nbsp;<span class="op" id="6757830">*</span><span class="ident" id="6757831"><a href="/compress/zlib/writer.go.html#5615719">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757839">if</span>&nbsp;<span class="ident" id="6757842"><a href="/compress/zlib/writer_test.go.html#6757597">dict</a></span>&nbsp;<span class="op" id="6757847">==</span>&nbsp;<span class="ident" id="6757850">nil</span>&nbsp;<span class="op" id="6757854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757858"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6757863">,</span>&nbsp;<span class="ident" id="6757865"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6757869">=</span>&nbsp;<span class="ident" id="6757871"><a href="/compress/zlib/writer.go.html#5616575">NewWriterLevel</a></span><span class="op" id="6757885">(</span><span class="ident" id="6757886"><a href="/compress/zlib/writer_test.go.html#6757794">buf</a></span><span class="op" id="6757889">,</span>&nbsp;<span class="ident" id="6757891"><a href="/compress/zlib/writer_test.go.html#6757586">level</a></span><span class="op" id="6757896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757899">}</span>&nbsp;<span class="keyword" id="6757901">else</span>&nbsp;<span class="op" id="6757906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757910"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6757915">,</span>&nbsp;<span class="ident" id="6757917"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6757921">=</span>&nbsp;<span class="ident" id="6757923"><a href="/compress/zlib/writer.go.html#5616884">NewWriterLevelDict</a></span><span class="op" id="6757941">(</span><span class="ident" id="6757942"><a href="/compress/zlib/writer_test.go.html#6757794">buf</a></span><span class="op" id="6757945">,</span>&nbsp;<span class="ident" id="6757947"><a href="/compress/zlib/writer_test.go.html#6757586">level</a></span><span class="op" id="6757952">,</span>&nbsp;<span class="ident" id="6757954"><a href="/compress/zlib/writer_test.go.html#6757597">dict</a></span><span class="op" id="6757958">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757964">if</span>&nbsp;<span class="ident" id="6757967"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6757971">==</span>&nbsp;<span class="ident" id="6757974">nil</span>&nbsp;<span class="op" id="6757978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757982">_</span><span class="op" id="6757983">,</span>&nbsp;<span class="ident" id="6757985"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6757989">=</span>&nbsp;<span class="ident" id="6757991"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6757996">.</span><span class="ident" id="6757997">Write</span><span class="op" id="6758002">(</span><span class="ident" id="6758003"><a href="/compress/zlib/writer_test.go.html#6757617">b0</a></span><span class="op" id="6758005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758011">if</span>&nbsp;<span class="ident" id="6758014"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758018">==</span>&nbsp;<span class="ident" id="6758021">nil</span>&nbsp;<span class="op" id="6758025">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758029"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758033">=</span>&nbsp;<span class="ident" id="6758035"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6758040">.</span><span class="ident" id="6758041">Close</span><span class="op" id="6758046">(</span><span class="op" id="6758047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758053">if</span>&nbsp;<span class="ident" id="6758056"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758060">!=</span>&nbsp;<span class="ident" id="6758063">nil</span>&nbsp;<span class="op" id="6758067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758071"><a href="/compress/zlib/writer_test.go.html#6757561">t</a></span><span class="op" id="6758072">.</span><span class="ident" id="6758073">Errorf</span><span class="op" id="6758079">(</span><span class="string" id="6758080">&#34;%s&nbsp;(level=%d):&nbsp;%v&#34;</span><span class="op" id="6758099">,</span>&nbsp;<span class="ident" id="6758101"><a href="/compress/zlib/writer_test.go.html#6757575">fn</a></span><span class="op" id="6758103">,</span>&nbsp;<span class="ident" id="6758105"><a href="/compress/zlib/writer_test.go.html#6757586">level</a></span><span class="op" id="6758110">,</span>&nbsp;<span class="ident" id="6758112"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span><span class="op" id="6758115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758119">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758130">out</span>&nbsp;<span class="op" id="6758134">:=</span>&nbsp;<span class="ident" id="6758137"><a href="/compress/zlib/writer_test.go.html#6757794">buf</a></span><span class="op" id="6758140">.</span><span class="ident" id="6758141">String</span><span class="op" id="6758147">(</span><span class="op" id="6758148">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6758152">//&nbsp;Reset&nbsp;and&nbsp;compress&nbsp;again.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758182">buf2</span>&nbsp;<span class="op" id="6758187">:=</span>&nbsp;<span class="builtinfunc" id="6758190">new</span><span class="op" id="6758193">(</span><span class="ident" id="6758194"><a href="/compress/zlib/writer_test.go.html#6755480">bytes</a></span><span class="op" id="6758199">.</span><span class="ident" id="6758200">Buffer</span><span class="op" id="6758206">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758209"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6758214">.</span><span class="ident" id="6758215">Reset</span><span class="op" id="6758220">(</span><span class="ident" id="6758221"><a href="/compress/zlib/writer_test.go.html#6758182">buf2</a></span><span class="op" id="6758225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758228">_</span><span class="op" id="6758229">,</span>&nbsp;<span class="ident" id="6758231"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758235">=</span>&nbsp;<span class="ident" id="6758237"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6758242">.</span><span class="ident" id="6758243">Write</span><span class="op" id="6758248">(</span><span class="ident" id="6758249"><a href="/compress/zlib/writer_test.go.html#6757617">b0</a></span><span class="op" id="6758251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758254">if</span>&nbsp;<span class="ident" id="6758257"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758261">==</span>&nbsp;<span class="ident" id="6758264">nil</span>&nbsp;<span class="op" id="6758268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758272"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758276">=</span>&nbsp;<span class="ident" id="6758278"><a href="/compress/zlib/writer_test.go.html#6757824">zlibw</a></span><span class="op" id="6758283">.</span><span class="ident" id="6758284">Close</span><span class="op" id="6758289">(</span><span class="op" id="6758290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758293">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758296">if</span>&nbsp;<span class="ident" id="6758299"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span>&nbsp;<span class="op" id="6758303">!=</span>&nbsp;<span class="ident" id="6758306">nil</span>&nbsp;<span class="op" id="6758310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758314"><a href="/compress/zlib/writer_test.go.html#6757561">t</a></span><span class="op" id="6758315">.</span><span class="ident" id="6758316">Errorf</span><span class="op" id="6758322">(</span><span class="string" id="6758323">&#34;%s&nbsp;(level=%d):&nbsp;%v&#34;</span><span class="op" id="6758342">,</span>&nbsp;<span class="ident" id="6758344"><a href="/compress/zlib/writer_test.go.html#6757575">fn</a></span><span class="op" id="6758346">,</span>&nbsp;<span class="ident" id="6758348"><a href="/compress/zlib/writer_test.go.html#6757586">level</a></span><span class="op" id="6758353">,</span>&nbsp;<span class="ident" id="6758355"><a href="/compress/zlib/writer_test.go.html#6757632">err</a></span><span class="op" id="6758358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758362">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758373">out2</span>&nbsp;<span class="op" id="6758378">:=</span>&nbsp;<span class="ident" id="6758381"><a href="/compress/zlib/writer_test.go.html#6758182">buf2</a></span><span class="op" id="6758385">.</span><span class="ident" id="6758386">String</span><span class="op" id="6758392">(</span><span class="op" id="6758393">)</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758397">if</span>&nbsp;<span class="ident" id="6758400"><a href="/compress/zlib/writer_test.go.html#6758373">out2</a></span>&nbsp;<span class="op" id="6758405">!=</span>&nbsp;<span class="ident" id="6758408"><a href="/compress/zlib/writer_test.go.html#6758130">out</a></span>&nbsp;<span class="op" id="6758412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758416"><a href="/compress/zlib/writer_test.go.html#6757561">t</a></span><span class="op" id="6758417">.</span><span class="ident" id="6758418">Errorf</span><span class="op" id="6758424">(</span><span class="string" id="6758425">&#34;%s&nbsp;(level=%d):&nbsp;different&nbsp;output&nbsp;after&nbsp;reset&nbsp;(got&nbsp;%d&nbsp;bytes,&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="6758497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758502"><a href="/compress/zlib/writer_test.go.html#6757575">fn</a></span><span class="op" id="6758504">,</span>&nbsp;<span class="ident" id="6758506"><a href="/compress/zlib/writer_test.go.html#6757586">level</a></span><span class="op" id="6758511">,</span>&nbsp;<span class="builtinfunc" id="6758513">len</span><span class="op" id="6758516">(</span><span class="ident" id="6758517"><a href="/compress/zlib/writer_test.go.html#6758373">out2</a></span><span class="op" id="6758521">)</span><span class="op" id="6758522">,</span>&nbsp;<span class="builtinfunc" id="6758524">len</span><span class="op" id="6758527">(</span><span class="ident" id="6758528"><a href="/compress/zlib/writer_test.go.html#6758130">out</a></span><span class="op" id="6758531">)</span><span class="op" id="6758532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758535">}</span><br>
<span class="lineno">140</span><span class="op" id="6758537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6758540">func</span>&nbsp;<span class="ident" id="6758545">TestWriter</span><span class="op" id="6758555">(</span><span class="ident" id="6758556">t</span>&nbsp;<span class="op" id="6758558">*</span><span class="ident" id="6758559"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6758566">.</span><span class="ident" id="6758567">T</span><span class="op" id="6758568">)</span>&nbsp;<span class="op" id="6758570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758573">for</span>&nbsp;<span class="ident" id="6758577">i</span><span class="op" id="6758578">,</span>&nbsp;<span class="ident" id="6758580">s</span>&nbsp;<span class="op" id="6758582">:=</span>&nbsp;<span class="keyword" id="6758585">range</span>&nbsp;<span class="ident" id="6758591"><a href="/compress/zlib/writer_test.go.html#6755612">data</a></span>&nbsp;<span class="op" id="6758596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758600">b</span>&nbsp;<span class="op" id="6758602">:=</span>&nbsp;<span class="op" id="6758605">[</span><span class="op" id="6758606">]</span><span class="builtintype" id="6758607">byte</span><span class="op" id="6758611">(</span><span class="ident" id="6758612"><a href="/compress/zlib/writer_test.go.html#6758580">s</a></span><span class="op" id="6758613">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758617">tag</span>&nbsp;<span class="op" id="6758621">:=</span>&nbsp;<span class="ident" id="6758624"><a href="/compress/zlib/writer_test.go.html#6755489">fmt</a></span><span class="op" id="6758627">.</span><span class="ident" id="6758628">Sprintf</span><span class="op" id="6758635">(</span><span class="string" id="6758636">&#34;#%d&#34;</span><span class="op" id="6758641">,</span>&nbsp;<span class="ident" id="6758643"><a href="/compress/zlib/writer_test.go.html#6758577">i</a></span><span class="op" id="6758644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758648"><a href="/compress/zlib/writer_test.go.html#6756267">testLevelDict</a></span><span class="op" id="6758661">(</span><span class="ident" id="6758662"><a href="/compress/zlib/writer_test.go.html#6758556">t</a></span><span class="op" id="6758663">,</span>&nbsp;<span class="ident" id="6758665"><a href="/compress/zlib/writer_test.go.html#6758617">tag</a></span><span class="op" id="6758668">,</span>&nbsp;<span class="ident" id="6758670"><a href="/compress/zlib/writer_test.go.html#6758600">b</a></span><span class="op" id="6758671">,</span>&nbsp;<span class="ident" id="6758673"><a href="/compress/zlib/writer.go.html#5615540">DefaultCompression</a></span><span class="op" id="6758691">,</span>&nbsp;<span class="string" id="6758693">&#34;&#34;</span><span class="op" id="6758695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758699"><a href="/compress/zlib/writer_test.go.html#6756267">testLevelDict</a></span><span class="op" id="6758712">(</span><span class="ident" id="6758713"><a href="/compress/zlib/writer_test.go.html#6758556">t</a></span><span class="op" id="6758714">,</span>&nbsp;<span class="ident" id="6758716"><a href="/compress/zlib/writer_test.go.html#6758617">tag</a></span><span class="op" id="6758719">,</span>&nbsp;<span class="ident" id="6758721"><a href="/compress/zlib/writer_test.go.html#6758600">b</a></span><span class="op" id="6758722">,</span>&nbsp;<span class="ident" id="6758724"><a href="/compress/zlib/writer.go.html#5615416">NoCompression</a></span><span class="op" id="6758737">,</span>&nbsp;<span class="string" id="6758739">&#34;&#34;</span><span class="op" id="6758741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758745">for</span>&nbsp;<span class="ident" id="6758749">level</span>&nbsp;<span class="op" id="6758755">:=</span>&nbsp;<span class="ident" id="6758758"><a href="/compress/zlib/writer.go.html#5615458">BestSpeed</a></span><span class="op" id="6758767">;</span>&nbsp;<span class="ident" id="6758769"><a href="/compress/zlib/writer_test.go.html#6758749">level</a></span>&nbsp;<span class="op" id="6758775">&lt;=</span>&nbsp;<span class="ident" id="6758778"><a href="/compress/zlib/writer.go.html#5615496">BestCompression</a></span><span class="op" id="6758793">;</span>&nbsp;<span class="ident" id="6758795"><a href="/compress/zlib/writer_test.go.html#6758749">level</a></span><span class="op" id="6758800">++</span>&nbsp;<span class="op" id="6758803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758808"><a href="/compress/zlib/writer_test.go.html#6756267">testLevelDict</a></span><span class="op" id="6758821">(</span><span class="ident" id="6758822"><a href="/compress/zlib/writer_test.go.html#6758556">t</a></span><span class="op" id="6758823">,</span>&nbsp;<span class="ident" id="6758825"><a href="/compress/zlib/writer_test.go.html#6758617">tag</a></span><span class="op" id="6758828">,</span>&nbsp;<span class="ident" id="6758830"><a href="/compress/zlib/writer_test.go.html#6758600">b</a></span><span class="op" id="6758831">,</span>&nbsp;<span class="ident" id="6758833"><a href="/compress/zlib/writer_test.go.html#6758749">level</a></span><span class="op" id="6758838">,</span>&nbsp;<span class="string" id="6758840">&#34;&#34;</span><span class="op" id="6758842">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758849">}</span><br>
<span class="lineno"></span><span class="op" id="6758851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6758854">func</span>&nbsp;<span class="ident" id="6758859">TestWriterBig</span><span class="op" id="6758872">(</span><span class="ident" id="6758873">t</span>&nbsp;<span class="op" id="6758875">*</span><span class="ident" id="6758876"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6758883">.</span><span class="ident" id="6758884">T</span><span class="op" id="6758885">)</span>&nbsp;<span class="op" id="6758887">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758890">for</span>&nbsp;<span class="ident" id="6758894">_</span><span class="op" id="6758895">,</span>&nbsp;<span class="ident" id="6758897">fn</span>&nbsp;<span class="op" id="6758900">:=</span>&nbsp;<span class="keyword" id="6758903">range</span>&nbsp;<span class="ident" id="6758909"><a href="/compress/zlib/writer_test.go.html#6755538">filenames</a></span>&nbsp;<span class="op" id="6758919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758923"><a href="/compress/zlib/writer_test.go.html#6755854">testFileLevelDict</a></span><span class="op" id="6758940">(</span><span class="ident" id="6758941"><a href="/compress/zlib/writer_test.go.html#6758873">t</a></span><span class="op" id="6758942">,</span>&nbsp;<span class="ident" id="6758944"><a href="/compress/zlib/writer_test.go.html#6758897">fn</a></span><span class="op" id="6758946">,</span>&nbsp;<span class="ident" id="6758948"><a href="/compress/zlib/writer.go.html#5615540">DefaultCompression</a></span><span class="op" id="6758966">,</span>&nbsp;<span class="string" id="6758968">&#34;&#34;</span><span class="op" id="6758970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758974"><a href="/compress/zlib/writer_test.go.html#6755854">testFileLevelDict</a></span><span class="op" id="6758991">(</span><span class="ident" id="6758992"><a href="/compress/zlib/writer_test.go.html#6758873">t</a></span><span class="op" id="6758993">,</span>&nbsp;<span class="ident" id="6758995"><a href="/compress/zlib/writer_test.go.html#6758897">fn</a></span><span class="op" id="6758997">,</span>&nbsp;<span class="ident" id="6758999"><a href="/compress/zlib/writer.go.html#5615416">NoCompression</a></span><span class="op" id="6759012">,</span>&nbsp;<span class="string" id="6759014">&#34;&#34;</span><span class="op" id="6759016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759020">for</span>&nbsp;<span class="ident" id="6759024">level</span>&nbsp;<span class="op" id="6759030">:=</span>&nbsp;<span class="ident" id="6759033"><a href="/compress/zlib/writer.go.html#5615458">BestSpeed</a></span><span class="op" id="6759042">;</span>&nbsp;<span class="ident" id="6759044"><a href="/compress/zlib/writer_test.go.html#6759024">level</a></span>&nbsp;<span class="op" id="6759050">&lt;=</span>&nbsp;<span class="ident" id="6759053"><a href="/compress/zlib/writer.go.html#5615496">BestCompression</a></span><span class="op" id="6759068">;</span>&nbsp;<span class="ident" id="6759070"><a href="/compress/zlib/writer_test.go.html#6759024">level</a></span><span class="op" id="6759075">++</span>&nbsp;<span class="op" id="6759078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759083"><a href="/compress/zlib/writer_test.go.html#6755854">testFileLevelDict</a></span><span class="op" id="6759100">(</span><span class="ident" id="6759101"><a href="/compress/zlib/writer_test.go.html#6758873">t</a></span><span class="op" id="6759102">,</span>&nbsp;<span class="ident" id="6759104"><a href="/compress/zlib/writer_test.go.html#6758897">fn</a></span><span class="op" id="6759106">,</span>&nbsp;<span class="ident" id="6759108"><a href="/compress/zlib/writer_test.go.html#6759024">level</a></span><span class="op" id="6759113">,</span>&nbsp;<span class="string" id="6759115">&#34;&#34;</span><span class="op" id="6759117">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759124">}</span><br>
<span class="lineno"></span><span class="op" id="6759126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6759129">func</span>&nbsp;<span class="ident" id="6759134">TestWriterDict</span><span class="op" id="6759148">(</span><span class="ident" id="6759149">t</span>&nbsp;<span class="op" id="6759151">*</span><span class="ident" id="6759152"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6759159">.</span><span class="ident" id="6759160">T</span><span class="op" id="6759161">)</span>&nbsp;<span class="op" id="6759163">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759166">const</span>&nbsp;<span class="ident" id="6759172">dictionary</span>&nbsp;<span class="op" id="6759183">=</span>&nbsp;<span class="string" id="6759185">&#34;0123456789.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759200">for</span>&nbsp;<span class="ident" id="6759204">_</span><span class="op" id="6759205">,</span>&nbsp;<span class="ident" id="6759207">fn</span>&nbsp;<span class="op" id="6759210">:=</span>&nbsp;<span class="keyword" id="6759213">range</span>&nbsp;<span class="ident" id="6759219"><a href="/compress/zlib/writer_test.go.html#6755538">filenames</a></span>&nbsp;<span class="op" id="6759229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759233"><a href="/compress/zlib/writer_test.go.html#6755854">testFileLevelDict</a></span><span class="op" id="6759250">(</span><span class="ident" id="6759251"><a href="/compress/zlib/writer_test.go.html#6759149">t</a></span><span class="op" id="6759252">,</span>&nbsp;<span class="ident" id="6759254"><a href="/compress/zlib/writer_test.go.html#6759207">fn</a></span><span class="op" id="6759256">,</span>&nbsp;<span class="ident" id="6759258"><a href="/compress/zlib/writer.go.html#5615540">DefaultCompression</a></span><span class="op" id="6759276">,</span>&nbsp;<span class="ident" id="6759278"><a href="/compress/zlib/writer_test.go.html#6759172">dictionary</a></span><span class="op" id="6759288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759292"><a href="/compress/zlib/writer_test.go.html#6755854">testFileLevelDict</a></span><span class="op" id="6759309">(</span><span class="ident" id="6759310"><a href="/compress/zlib/writer_test.go.html#6759149">t</a></span><span class="op" id="6759311">,</span>&nbsp;<span class="ident" id="6759313"><a href="/compress/zlib/writer_test.go.html#6759207">fn</a></span><span class="op" id="6759315">,</span>&nbsp;<span class="ident" id="6759317"><a href="/compress/zlib/writer.go.html#5615416">NoCompression</a></span><span class="op" id="6759330">,</span>&nbsp;<span class="ident" id="6759332"><a href="/compress/zlib/writer_test.go.html#6759172">dictionary</a></span><span class="op" id="6759342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759346">for</span>&nbsp;<span class="ident" id="6759350">level</span>&nbsp;<span class="op" id="6759356">:=</span>&nbsp;<span class="ident" id="6759359"><a href="/compress/zlib/writer.go.html#5615458">BestSpeed</a></span><span class="op" id="6759368">;</span>&nbsp;<span class="ident" id="6759370"><a href="/compress/zlib/writer_test.go.html#6759350">level</a></span>&nbsp;<span class="op" id="6759376">&lt;=</span>&nbsp;<span class="ident" id="6759379"><a href="/compress/zlib/writer.go.html#5615496">BestCompression</a></span><span class="op" id="6759394">;</span>&nbsp;<span class="ident" id="6759396"><a href="/compress/zlib/writer_test.go.html#6759350">level</a></span><span class="op" id="6759401">++</span>&nbsp;<span class="op" id="6759404">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759409"><a href="/compress/zlib/writer_test.go.html#6755854">testFileLevelDict</a></span><span class="op" id="6759426">(</span><span class="ident" id="6759427"><a href="/compress/zlib/writer_test.go.html#6759149">t</a></span><span class="op" id="6759428">,</span>&nbsp;<span class="ident" id="6759430"><a href="/compress/zlib/writer_test.go.html#6759207">fn</a></span><span class="op" id="6759432">,</span>&nbsp;<span class="ident" id="6759434"><a href="/compress/zlib/writer_test.go.html#6759350">level</a></span><span class="op" id="6759439">,</span>&nbsp;<span class="ident" id="6759441"><a href="/compress/zlib/writer_test.go.html#6759172">dictionary</a></span><span class="op" id="6759451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759458">}</span><br>
<span class="lineno"></span><span class="op" id="6759460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="6759463">func</span>&nbsp;<span class="ident" id="6759468">TestWriterReset</span><span class="op" id="6759483">(</span><span class="ident" id="6759484">t</span>&nbsp;<span class="op" id="6759486">*</span><span class="ident" id="6759487"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6759494">.</span><span class="ident" id="6759495">T</span><span class="op" id="6759496">)</span>&nbsp;<span class="op" id="6759498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759501">const</span>&nbsp;<span class="ident" id="6759507">dictionary</span>&nbsp;<span class="op" id="6759518">=</span>&nbsp;<span class="string" id="6759520">&#34;0123456789.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759535">for</span>&nbsp;<span class="ident" id="6759539">_</span><span class="op" id="6759540">,</span>&nbsp;<span class="ident" id="6759542">fn</span>&nbsp;<span class="op" id="6759545">:=</span>&nbsp;<span class="keyword" id="6759548">range</span>&nbsp;<span class="ident" id="6759554"><a href="/compress/zlib/writer_test.go.html#6755538">filenames</a></span>&nbsp;<span class="op" id="6759564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759568"><a href="/compress/zlib/writer_test.go.html#6757538">testFileLevelDictReset</a></span><span class="op" id="6759590">(</span><span class="ident" id="6759591"><a href="/compress/zlib/writer_test.go.html#6759484">t</a></span><span class="op" id="6759592">,</span>&nbsp;<span class="ident" id="6759594"><a href="/compress/zlib/writer_test.go.html#6759542">fn</a></span><span class="op" id="6759596">,</span>&nbsp;<span class="ident" id="6759598"><a href="/compress/zlib/writer.go.html#5615416">NoCompression</a></span><span class="op" id="6759611">,</span>&nbsp;<span class="ident" id="6759613">nil</span><span class="op" id="6759616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759620"><a href="/compress/zlib/writer_test.go.html#6757538">testFileLevelDictReset</a></span><span class="op" id="6759642">(</span><span class="ident" id="6759643"><a href="/compress/zlib/writer_test.go.html#6759484">t</a></span><span class="op" id="6759644">,</span>&nbsp;<span class="ident" id="6759646"><a href="/compress/zlib/writer_test.go.html#6759542">fn</a></span><span class="op" id="6759648">,</span>&nbsp;<span class="ident" id="6759650"><a href="/compress/zlib/writer.go.html#5615540">DefaultCompression</a></span><span class="op" id="6759668">,</span>&nbsp;<span class="ident" id="6759670">nil</span><span class="op" id="6759673">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759677"><a href="/compress/zlib/writer_test.go.html#6757538">testFileLevelDictReset</a></span><span class="op" id="6759699">(</span><span class="ident" id="6759700"><a href="/compress/zlib/writer_test.go.html#6759484">t</a></span><span class="op" id="6759701">,</span>&nbsp;<span class="ident" id="6759703"><a href="/compress/zlib/writer_test.go.html#6759542">fn</a></span><span class="op" id="6759705">,</span>&nbsp;<span class="ident" id="6759707"><a href="/compress/zlib/writer.go.html#5615416">NoCompression</a></span><span class="op" id="6759720">,</span>&nbsp;<span class="op" id="6759722">[</span><span class="op" id="6759723">]</span><span class="builtintype" id="6759724">byte</span><span class="op" id="6759728">(</span><span class="ident" id="6759729"><a href="/compress/zlib/writer_test.go.html#6759507">dictionary</a></span><span class="op" id="6759739">)</span><span class="op" id="6759740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759744"><a href="/compress/zlib/writer_test.go.html#6757538">testFileLevelDictReset</a></span><span class="op" id="6759766">(</span><span class="ident" id="6759767"><a href="/compress/zlib/writer_test.go.html#6759484">t</a></span><span class="op" id="6759768">,</span>&nbsp;<span class="ident" id="6759770"><a href="/compress/zlib/writer_test.go.html#6759542">fn</a></span><span class="op" id="6759772">,</span>&nbsp;<span class="ident" id="6759774"><a href="/compress/zlib/writer.go.html#5615540">DefaultCompression</a></span><span class="op" id="6759792">,</span>&nbsp;<span class="op" id="6759794">[</span><span class="op" id="6759795">]</span><span class="builtintype" id="6759796">byte</span><span class="op" id="6759800">(</span><span class="ident" id="6759801"><a href="/compress/zlib/writer_test.go.html#6759507">dictionary</a></span><span class="op" id="6759811">)</span><span class="op" id="6759812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759816">if</span>&nbsp;<span class="op" id="6759819">!</span><span class="ident" id="6759820"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6759827">.</span><span class="ident" id="6759828">Short</span><span class="op" id="6759833">(</span><span class="op" id="6759834">)</span>&nbsp;<span class="op" id="6759836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759841">for</span>&nbsp;<span class="ident" id="6759845">level</span>&nbsp;<span class="op" id="6759851">:=</span>&nbsp;<span class="ident" id="6759854"><a href="/compress/zlib/writer.go.html#5615458">BestSpeed</a></span><span class="op" id="6759863">;</span>&nbsp;<span class="ident" id="6759865"><a href="/compress/zlib/writer_test.go.html#6759845">level</a></span>&nbsp;<span class="op" id="6759871">&lt;=</span>&nbsp;<span class="ident" id="6759874"><a href="/compress/zlib/writer.go.html#5615496">BestCompression</a></span><span class="op" id="6759889">;</span>&nbsp;<span class="ident" id="6759891"><a href="/compress/zlib/writer_test.go.html#6759845">level</a></span><span class="op" id="6759896">++</span>&nbsp;<span class="op" id="6759899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759905"><a href="/compress/zlib/writer_test.go.html#6757538">testFileLevelDictReset</a></span><span class="op" id="6759927">(</span><span class="ident" id="6759928"><a href="/compress/zlib/writer_test.go.html#6759484">t</a></span><span class="op" id="6759929">,</span>&nbsp;<span class="ident" id="6759931"><a href="/compress/zlib/writer_test.go.html#6759542">fn</a></span><span class="op" id="6759933">,</span>&nbsp;<span class="ident" id="6759935"><a href="/compress/zlib/writer_test.go.html#6759845">level</a></span><span class="op" id="6759940">,</span>&nbsp;<span class="ident" id="6759942">nil</span><span class="op" id="6759945">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759957">}</span><br>
<span class="lineno"></span><span class="op" id="6759959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="6759962">func</span>&nbsp;<span class="ident" id="6759967">TestWriterDictIsUsed</span><span class="op" id="6759987">(</span><span class="ident" id="6759988">t</span>&nbsp;<span class="op" id="6759990">*</span><span class="ident" id="6759991"><a href="/compress/zlib/writer_test.go.html#6755521">testing</a></span><span class="op" id="6759998">.</span><span class="ident" id="6759999">T</span><span class="op" id="6760000">)</span>&nbsp;<span class="op" id="6760002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6760005">var</span>&nbsp;<span class="ident" id="6760009">input</span>&nbsp;<span class="op" id="6760015">=</span>&nbsp;<span class="op" id="6760017">[</span><span class="op" id="6760018">]</span><span class="builtintype" id="6760019">byte</span><span class="op" id="6760023">(</span><span class="string" id="6760024">&#34;Lorem&nbsp;ipsum&nbsp;dolor&nbsp;sit&nbsp;amet,&nbsp;consectetur&nbsp;adipisicing&nbsp;elit,&nbsp;sed&nbsp;do&nbsp;eiusmod&nbsp;tempor&nbsp;incididunt&nbsp;ut&nbsp;labore&nbsp;et&nbsp;dolore&nbsp;magna&nbsp;aliqua.&#34;</span><span class="op" id="6760150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6760153">var</span>&nbsp;<span class="ident" id="6760157">buf</span>&nbsp;<span class="ident" id="6760161"><a href="/compress/zlib/writer_test.go.html#6755480">bytes</a></span><span class="op" id="6760166">.</span><span class="ident" id="6760167">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6760175">compressor</span><span class="op" id="6760185">,</span>&nbsp;<span class="ident" id="6760187">err</span>&nbsp;<span class="op" id="6760191">:=</span>&nbsp;<span class="ident" id="6760194"><a href="/compress/zlib/writer.go.html#5616884">NewWriterLevelDict</a></span><span class="op" id="6760212">(</span><span class="op" id="6760213">&amp;</span><span class="ident" id="6760214"><a href="/compress/zlib/writer_test.go.html#6760157">buf</a></span><span class="op" id="6760217">,</span>&nbsp;<span class="ident" id="6760219"><a href="/compress/zlib/writer.go.html#5615496">BestCompression</a></span><span class="op" id="6760234">,</span>&nbsp;<span class="ident" id="6760236"><a href="/compress/zlib/writer_test.go.html#6760009">input</a></span><span class="op" id="6760241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6760244">if</span>&nbsp;<span class="ident" id="6760247"><a href="/compress/zlib/writer_test.go.html#6760187">err</a></span>&nbsp;<span class="op" id="6760251">!=</span>&nbsp;<span class="ident" id="6760254">nil</span>&nbsp;<span class="op" id="6760258">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6760262"><a href="/compress/zlib/writer_test.go.html#6759988">t</a></span><span class="op" id="6760263">.</span><span class="ident" id="6760264">Errorf</span><span class="op" id="6760270">(</span><span class="string" id="6760271">&#34;error&nbsp;in&nbsp;NewWriterLevelDict:&nbsp;%s&#34;</span><span class="op" id="6760304">,</span>&nbsp;<span class="ident" id="6760306"><a href="/compress/zlib/writer_test.go.html#6760187">err</a></span><span class="op" id="6760309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6760313">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6760321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6760324"><a href="/compress/zlib/writer_test.go.html#6760175">compressor</a></span><span class="op" id="6760334">.</span><span class="ident" id="6760335">Write</span><span class="op" id="6760340">(</span><span class="ident" id="6760341"><a href="/compress/zlib/writer_test.go.html#6760009">input</a></span><span class="op" id="6760346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6760349"><a href="/compress/zlib/writer_test.go.html#6760175">compressor</a></span><span class="op" id="6760359">.</span><span class="ident" id="6760360">Close</span><span class="op" id="6760365">(</span><span class="op" id="6760366">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6760369">const</span>&nbsp;<span class="ident" id="6760375">expectedMaxSize</span>&nbsp;<span class="op" id="6760391">=</span>&nbsp;<span class="num" id="6760393">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6760397">output</span>&nbsp;<span class="op" id="6760404">:=</span>&nbsp;<span class="ident" id="6760407"><a href="/compress/zlib/writer_test.go.html#6760157">buf</a></span><span class="op" id="6760410">.</span><span class="ident" id="6760411">Bytes</span><span class="op" id="6760416">(</span><span class="op" id="6760417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6760420">if</span>&nbsp;<span class="builtinfunc" id="6760423">len</span><span class="op" id="6760426">(</span><span class="ident" id="6760427"><a href="/compress/zlib/writer_test.go.html#6760397">output</a></span><span class="op" id="6760433">)</span>&nbsp;<span class="op" id="6760435">&gt;</span>&nbsp;<span class="ident" id="6760437"><a href="/compress/zlib/writer_test.go.html#6760375">expectedMaxSize</a></span>&nbsp;<span class="op" id="6760453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6760457"><a href="/compress/zlib/writer_test.go.html#6759988">t</a></span><span class="op" id="6760458">.</span><span class="ident" id="6760459">Errorf</span><span class="op" id="6760465">(</span><span class="string" id="6760466">&#34;result&nbsp;too&nbsp;large&nbsp;(got&nbsp;%d,&nbsp;want&nbsp;&lt;=&nbsp;%d&nbsp;bytes).&nbsp;Is&nbsp;the&nbsp;dictionary&nbsp;being&nbsp;used?&#34;</span><span class="op" id="6760542">,</span>&nbsp;<span class="builtinfunc" id="6760544">len</span><span class="op" id="6760547">(</span><span class="ident" id="6760548"><a href="/compress/zlib/writer_test.go.html#6760397">output</a></span><span class="op" id="6760554">)</span><span class="op" id="6760555">,</span>&nbsp;<span class="ident" id="6760557"><a href="/compress/zlib/writer_test.go.html#6760375">expectedMaxSize</a></span><span class="op" id="6760572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6760575">}</span><br>
<span class="lineno">205</span><span class="op" id="6760577">}</span>
</div>
</body>
</html>
