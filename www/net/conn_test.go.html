<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6766717">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6766773">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6766827">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6766878">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6766957">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6766966">package</span>&nbsp;<span class="ident" id="6766974">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6766979">import</span>&nbsp;<span class="op" id="6766986">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6766989">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6766995">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6767006">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6767017">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6767024">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6767027">var</span>&nbsp;<span class="ident" id="6767031">connTests</span>&nbsp;<span class="op" id="6767041">=</span>&nbsp;<span class="op" id="6767043">[</span><span class="op" id="6767044">]</span><span class="keyword" id="6767045">struct</span>&nbsp;<span class="op" id="6767052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767055">net</span>&nbsp;&nbsp;<span class="builtintype" id="6767060">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767068">addr</span>&nbsp;<span class="builtintype" id="6767073">string</span><br>
<span class="lineno">20</span><span class="op" id="6767080">}</span><span class="op" id="6767081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767084">{</span><span class="string" id="6767085">&#34;tcp&#34;</span><span class="op" id="6767090">,</span>&nbsp;<span class="string" id="6767092">&#34;127.0.0.1:0&#34;</span><span class="op" id="6767105">}</span><span class="op" id="6767106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767109">{</span><span class="string" id="6767110">&#34;unix&#34;</span><span class="op" id="6767116">,</span>&nbsp;<span class="ident" id="6767118"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6767130">(</span><span class="op" id="6767131">)</span><span class="op" id="6767132">}</span><span class="op" id="6767133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767136">{</span><span class="string" id="6767137">&#34;unixpacket&#34;</span><span class="op" id="6767149">,</span>&nbsp;<span class="ident" id="6767151"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6767163">(</span><span class="op" id="6767164">)</span><span class="op" id="6767165">}</span><span class="op" id="6767166">,</span><br>
<span class="lineno"></span><span class="op" id="6767168">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6767171">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="6767237">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="6767300">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="6767348">const</span>&nbsp;<span class="ident" id="6767354">someTimeout</span>&nbsp;<span class="op" id="6767366">=</span>&nbsp;<span class="num" id="6767368">10</span>&nbsp;<span class="op" id="6767371">*</span>&nbsp;<span class="ident" id="6767373"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6767377">.</span><span class="ident" id="6767378">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6767386">func</span>&nbsp;<span class="ident" id="6767391">TestConnAndListener</span><span class="op" id="6767410">(</span><span class="ident" id="6767411">t</span>&nbsp;<span class="op" id="6767413">*</span><span class="ident" id="6767414"><a href="/net/conn_test.go.html#6767006">testing</a></span><span class="op" id="6767421">.</span><span class="ident" id="6767422">T</span><span class="op" id="6767423">)</span>&nbsp;<span class="op" id="6767425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767428">for</span>&nbsp;<span class="ident" id="6767432">_</span><span class="op" id="6767433">,</span>&nbsp;<span class="ident" id="6767435">tt</span>&nbsp;<span class="op" id="6767438">:=</span>&nbsp;<span class="keyword" id="6767441">range</span>&nbsp;<span class="ident" id="6767447"><a href="/net/conn_test.go.html#6767031">connTests</a></span>&nbsp;<span class="op" id="6767457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767461">switch</span>&nbsp;<span class="ident" id="6767468"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6767470">.</span><span class="ident" id="6767471">net</span>&nbsp;<span class="op" id="6767475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767479">case</span>&nbsp;<span class="string" id="6767484">&#34;unix&#34;</span><span class="op" id="6767490">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767495">switch</span>&nbsp;<span class="ident" id="6767502"><a href="/net/conn_test.go.html#6766995">runtime</a></span><span class="op" id="6767509">.</span><span class="ident" id="6767510">GOOS</span>&nbsp;<span class="op" id="6767515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767520">case</span>&nbsp;<span class="string" id="6767525">&#34;nacl&#34;</span><span class="op" id="6767531">,</span>&nbsp;<span class="string" id="6767533">&#34;plan9&#34;</span><span class="op" id="6767540">,</span>&nbsp;<span class="string" id="6767542">&#34;windows&#34;</span><span class="op" id="6767551">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767557">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767573">case</span>&nbsp;<span class="string" id="6767578">&#34;unixpacket&#34;</span><span class="op" id="6767590">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767595">switch</span>&nbsp;<span class="ident" id="6767602"><a href="/net/conn_test.go.html#6766995">runtime</a></span><span class="op" id="6767609">.</span><span class="ident" id="6767610">GOOS</span>&nbsp;<span class="op" id="6767615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767620">case</span>&nbsp;<span class="string" id="6767625">&#34;android&#34;</span><span class="op" id="6767634">,</span>&nbsp;<span class="string" id="6767636">&#34;darwin&#34;</span><span class="op" id="6767644">,</span>&nbsp;<span class="string" id="6767646">&#34;nacl&#34;</span><span class="op" id="6767652">,</span>&nbsp;<span class="string" id="6767654">&#34;openbsd&#34;</span><span class="op" id="6767663">,</span>&nbsp;<span class="string" id="6767665">&#34;plan9&#34;</span><span class="op" id="6767672">,</span>&nbsp;<span class="string" id="6767674">&#34;windows&#34;</span><span class="op" id="6767683">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767689">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767701">case</span>&nbsp;<span class="string" id="6767706">&#34;freebsd&#34;</span><span class="op" id="6767715">:</span>&nbsp;<span class="comment" id="6767717">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767761">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767782">ln</span><span class="op" id="6767784">,</span>&nbsp;<span class="ident" id="6767786">err</span>&nbsp;<span class="op" id="6767790">:=</span>&nbsp;<span class="ident" id="6767793"><a href="/net/dial.go.html#2525176">Listen</a></span><span class="op" id="6767799">(</span><span class="ident" id="6767800"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6767802">.</span><span class="ident" id="6767803">net</span><span class="op" id="6767806">,</span>&nbsp;<span class="ident" id="6767808"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6767810">.</span><span class="ident" id="6767811">addr</span><span class="op" id="6767815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767819">if</span>&nbsp;<span class="ident" id="6767822"><a href="/net/conn_test.go.html#6767786">err</a></span>&nbsp;<span class="op" id="6767826">!=</span>&nbsp;<span class="ident" id="6767829">nil</span>&nbsp;<span class="op" id="6767833">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767838"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6767839">.</span><span class="ident" id="6767840">Fatalf</span><span class="op" id="6767846">(</span><span class="string" id="6767847">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6767866">,</span>&nbsp;<span class="ident" id="6767868"><a href="/net/conn_test.go.html#6767786">err</a></span><span class="op" id="6767871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6767875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767879">defer</span>&nbsp;<span class="keyword" id="6767885">func</span><span class="op" id="6767889">(</span><span class="ident" id="6767890">ln</span>&nbsp;<span class="ident" id="6767893"><a href="/net/net.go.html#2658762">Listener</a></span><span class="op" id="6767901">,</span>&nbsp;<span class="ident" id="6767903">net</span><span class="op" id="6767906">,</span>&nbsp;<span class="ident" id="6767908">addr</span>&nbsp;<span class="builtintype" id="6767913">string</span><span class="op" id="6767919">)</span>&nbsp;<span class="op" id="6767921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767926"><a href="/net/conn_test.go.html#6767890">ln</a></span><span class="op" id="6767928">.</span><span class="ident" id="6767929">Close</span><span class="op" id="6767934">(</span><span class="op" id="6767935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767940">switch</span>&nbsp;<span class="ident" id="6767947"><a href="/net/conn_test.go.html#6767903">net</a></span>&nbsp;<span class="op" id="6767951">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6767956">case</span>&nbsp;<span class="string" id="6767961">&#34;unix&#34;</span><span class="op" id="6767967">,</span>&nbsp;<span class="string" id="6767969">&#34;unixpacket&#34;</span><span class="op" id="6767981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6767987"><a href="/net/conn_test.go.html#6766989">os</a></span><span class="op" id="6767989">.</span><span class="ident" id="6767990">Remove</span><span class="op" id="6767996">(</span><span class="ident" id="6767997"><a href="/net/conn_test.go.html#6767908">addr</a></span><span class="op" id="6768001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768010">}</span><span class="op" id="6768011">(</span><span class="ident" id="6768012"><a href="/net/conn_test.go.html#6767782">ln</a></span><span class="op" id="6768014">,</span>&nbsp;<span class="ident" id="6768016"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768018">.</span><span class="ident" id="6768019">net</span><span class="op" id="6768022">,</span>&nbsp;<span class="ident" id="6768024"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768026">.</span><span class="ident" id="6768027">addr</span><span class="op" id="6768031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768035">if</span>&nbsp;<span class="ident" id="6768038"><a href="/net/conn_test.go.html#6767782">ln</a></span><span class="op" id="6768040">.</span><span class="ident" id="6768041">Addr</span><span class="op" id="6768045">(</span><span class="op" id="6768046">)</span><span class="op" id="6768047">.</span><span class="ident" id="6768048">Network</span><span class="op" id="6768055">(</span><span class="op" id="6768056">)</span>&nbsp;<span class="op" id="6768058">!=</span>&nbsp;<span class="ident" id="6768061"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768063">.</span><span class="ident" id="6768064">net</span>&nbsp;<span class="op" id="6768068">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768073"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6768074">.</span><span class="ident" id="6768075">Fatalf</span><span class="op" id="6768081">(</span><span class="string" id="6768082">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6768103">,</span>&nbsp;<span class="ident" id="6768105"><a href="/net/conn_test.go.html#6767782">ln</a></span><span class="op" id="6768107">.</span><span class="ident" id="6768108">Addr</span><span class="op" id="6768112">(</span><span class="op" id="6768113">)</span><span class="op" id="6768114">.</span><span class="ident" id="6768115">Network</span><span class="op" id="6768122">(</span><span class="op" id="6768123">)</span><span class="op" id="6768124">,</span>&nbsp;<span class="ident" id="6768126"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768128">.</span><span class="ident" id="6768129">net</span><span class="op" id="6768132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768141">done</span>&nbsp;<span class="op" id="6768146">:=</span>&nbsp;<span class="builtinfunc" id="6768149">make</span><span class="op" id="6768153">(</span><span class="keyword" id="6768154">chan</span>&nbsp;<span class="builtintype" id="6768159">int</span><span class="op" id="6768162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768166">go</span>&nbsp;<span class="ident" id="6768169"><a href="/net/conn_test.go.html#6768889">transponder</a></span><span class="op" id="6768180">(</span><span class="ident" id="6768181"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6768182">,</span>&nbsp;<span class="ident" id="6768184"><a href="/net/conn_test.go.html#6767782">ln</a></span><span class="op" id="6768186">,</span>&nbsp;<span class="ident" id="6768188"><a href="/net/conn_test.go.html#6768141">done</a></span><span class="op" id="6768192">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768197">c</span><span class="op" id="6768198">,</span>&nbsp;<span class="ident" id="6768200"><a href="/net/conn_test.go.html#6767786">err</a></span>&nbsp;<span class="op" id="6768204">:=</span>&nbsp;<span class="ident" id="6768207"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6768211">(</span><span class="ident" id="6768212"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768214">.</span><span class="ident" id="6768215">net</span><span class="op" id="6768218">,</span>&nbsp;<span class="ident" id="6768220"><a href="/net/conn_test.go.html#6767782">ln</a></span><span class="op" id="6768222">.</span><span class="ident" id="6768223">Addr</span><span class="op" id="6768227">(</span><span class="op" id="6768228">)</span><span class="op" id="6768229">.</span><span class="ident" id="6768230">String</span><span class="op" id="6768236">(</span><span class="op" id="6768237">)</span><span class="op" id="6768238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768242">if</span>&nbsp;<span class="ident" id="6768245"><a href="/net/conn_test.go.html#6767786">err</a></span>&nbsp;<span class="op" id="6768249">!=</span>&nbsp;<span class="ident" id="6768252">nil</span>&nbsp;<span class="op" id="6768256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768261"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6768262">.</span><span class="ident" id="6768263">Fatalf</span><span class="op" id="6768269">(</span><span class="string" id="6768270">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6768287">,</span>&nbsp;<span class="ident" id="6768289"><a href="/net/conn_test.go.html#6767786">err</a></span><span class="op" id="6768292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768296">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768300">defer</span>&nbsp;<span class="ident" id="6768306"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768307">.</span><span class="ident" id="6768308">Close</span><span class="op" id="6768313">(</span><span class="op" id="6768314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768318">if</span>&nbsp;<span class="ident" id="6768321"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768322">.</span><span class="ident" id="6768323">LocalAddr</span><span class="op" id="6768332">(</span><span class="op" id="6768333">)</span><span class="op" id="6768334">.</span><span class="ident" id="6768335">Network</span><span class="op" id="6768342">(</span><span class="op" id="6768343">)</span>&nbsp;<span class="op" id="6768345">!=</span>&nbsp;<span class="ident" id="6768348"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768350">.</span><span class="ident" id="6768351">net</span>&nbsp;<span class="op" id="6768355">||</span>&nbsp;<span class="ident" id="6768358"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768359">.</span><span class="ident" id="6768360">LocalAddr</span><span class="op" id="6768369">(</span><span class="op" id="6768370">)</span><span class="op" id="6768371">.</span><span class="ident" id="6768372">Network</span><span class="op" id="6768379">(</span><span class="op" id="6768380">)</span>&nbsp;<span class="op" id="6768382">!=</span>&nbsp;<span class="ident" id="6768385"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768387">.</span><span class="ident" id="6768388">net</span>&nbsp;<span class="op" id="6768392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768397"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6768398">.</span><span class="ident" id="6768399">Fatalf</span><span class="op" id="6768405">(</span><span class="string" id="6768406">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6768435">,</span>&nbsp;<span class="ident" id="6768437"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768438">.</span><span class="ident" id="6768439">LocalAddr</span><span class="op" id="6768448">(</span><span class="op" id="6768449">)</span><span class="op" id="6768450">.</span><span class="ident" id="6768451">Network</span><span class="op" id="6768458">(</span><span class="op" id="6768459">)</span><span class="op" id="6768460">,</span>&nbsp;<span class="ident" id="6768462"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768463">.</span><span class="ident" id="6768464">RemoteAddr</span><span class="op" id="6768474">(</span><span class="op" id="6768475">)</span><span class="op" id="6768476">.</span><span class="ident" id="6768477">Network</span><span class="op" id="6768484">(</span><span class="op" id="6768485">)</span><span class="op" id="6768486">,</span>&nbsp;<span class="ident" id="6768488"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768490">.</span><span class="ident" id="6768491">net</span><span class="op" id="6768494">,</span>&nbsp;<span class="ident" id="6768496"><a href="/net/conn_test.go.html#6767435">tt</a></span><span class="op" id="6768498">.</span><span class="ident" id="6768499">net</span><span class="op" id="6768502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768510"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768511">.</span><span class="ident" id="6768512">SetDeadline</span><span class="op" id="6768523">(</span><span class="ident" id="6768524"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6768528">.</span><span class="ident" id="6768529">Now</span><span class="op" id="6768532">(</span><span class="op" id="6768533">)</span><span class="op" id="6768534">.</span><span class="ident" id="6768535">Add</span><span class="op" id="6768538">(</span><span class="ident" id="6768539"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6768550">)</span><span class="op" id="6768551">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768555"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768556">.</span><span class="ident" id="6768557">SetReadDeadline</span><span class="op" id="6768572">(</span><span class="ident" id="6768573"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6768577">.</span><span class="ident" id="6768578">Now</span><span class="op" id="6768581">(</span><span class="op" id="6768582">)</span><span class="op" id="6768583">.</span><span class="ident" id="6768584">Add</span><span class="op" id="6768587">(</span><span class="ident" id="6768588"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6768599">)</span><span class="op" id="6768600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768604"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768605">.</span><span class="ident" id="6768606">SetWriteDeadline</span><span class="op" id="6768622">(</span><span class="ident" id="6768623"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6768627">.</span><span class="ident" id="6768628">Now</span><span class="op" id="6768631">(</span><span class="op" id="6768632">)</span><span class="op" id="6768633">.</span><span class="ident" id="6768634">Add</span><span class="op" id="6768637">(</span><span class="ident" id="6768638"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6768649">)</span><span class="op" id="6768650">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768655">if</span>&nbsp;<span class="ident" id="6768658">_</span><span class="op" id="6768659">,</span>&nbsp;<span class="ident" id="6768661">err</span>&nbsp;<span class="op" id="6768665">:=</span>&nbsp;<span class="ident" id="6768668"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768669">.</span><span class="ident" id="6768670">Write</span><span class="op" id="6768675">(</span><span class="op" id="6768676">[</span><span class="op" id="6768677">]</span><span class="builtintype" id="6768678">byte</span><span class="op" id="6768682">(</span><span class="string" id="6768683">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="6768694">)</span><span class="op" id="6768695">)</span><span class="op" id="6768696">;</span>&nbsp;<span class="ident" id="6768698"><a href="/net/conn_test.go.html#6768661">err</a></span>&nbsp;<span class="op" id="6768702">!=</span>&nbsp;<span class="ident" id="6768705">nil</span>&nbsp;<span class="op" id="6768709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768714"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6768715">.</span><span class="ident" id="6768716">Fatalf</span><span class="op" id="6768722">(</span><span class="string" id="6768723">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6768746">,</span>&nbsp;<span class="ident" id="6768748"><a href="/net/conn_test.go.html#6768661">err</a></span><span class="op" id="6768751">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768759">rb</span>&nbsp;<span class="op" id="6768762">:=</span>&nbsp;<span class="builtinfunc" id="6768765">make</span><span class="op" id="6768769">(</span><span class="op" id="6768770">[</span><span class="op" id="6768771">]</span><span class="builtintype" id="6768772">byte</span><span class="op" id="6768776">,</span>&nbsp;<span class="num" id="6768778">128</span><span class="op" id="6768781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768785">if</span>&nbsp;<span class="ident" id="6768788">_</span><span class="op" id="6768789">,</span>&nbsp;<span class="ident" id="6768791">err</span>&nbsp;<span class="op" id="6768795">:=</span>&nbsp;<span class="ident" id="6768798"><a href="/net/conn_test.go.html#6768197">c</a></span><span class="op" id="6768799">.</span><span class="ident" id="6768800">Read</span><span class="op" id="6768804">(</span><span class="ident" id="6768805"><a href="/net/conn_test.go.html#6768759">rb</a></span><span class="op" id="6768807">)</span><span class="op" id="6768808">;</span>&nbsp;<span class="ident" id="6768810"><a href="/net/conn_test.go.html#6768791">err</a></span>&nbsp;<span class="op" id="6768814">!=</span>&nbsp;<span class="ident" id="6768817">nil</span>&nbsp;<span class="op" id="6768821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6768826"><a href="/net/conn_test.go.html#6767411">t</a></span><span class="op" id="6768827">.</span><span class="ident" id="6768828">Fatalf</span><span class="op" id="6768834">(</span><span class="string" id="6768835">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6768857">,</span>&nbsp;<span class="ident" id="6768859"><a href="/net/conn_test.go.html#6768791">err</a></span><span class="op" id="6768862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768866">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768871">&lt;-</span><span class="ident" id="6768873"><a href="/net/conn_test.go.html#6768141">done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6768879">}</span><br>
<span class="lineno"></span><span class="op" id="6768881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6768884">func</span>&nbsp;<span class="ident" id="6768889">transponder</span><span class="op" id="6768900">(</span><span class="ident" id="6768901">t</span>&nbsp;<span class="op" id="6768903">*</span><span class="ident" id="6768904"><a href="/net/conn_test.go.html#6767006">testing</a></span><span class="op" id="6768911">.</span><span class="ident" id="6768912">T</span><span class="op" id="6768913">,</span>&nbsp;<span class="ident" id="6768915">ln</span>&nbsp;<span class="ident" id="6768918"><a href="/net/net.go.html#2658762">Listener</a></span><span class="op" id="6768926">,</span>&nbsp;<span class="ident" id="6768928">done</span>&nbsp;<span class="keyword" id="6768933">chan</span><span class="op" id="6768937">&lt;-</span>&nbsp;<span class="builtintype" id="6768940">int</span><span class="op" id="6768943">)</span>&nbsp;<span class="op" id="6768945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768948">defer</span>&nbsp;<span class="keyword" id="6768954">func</span><span class="op" id="6768958">(</span><span class="op" id="6768959">)</span>&nbsp;<span class="op" id="6768961">{</span>&nbsp;<span class="ident" id="6768963"><a href="/net/conn_test.go.html#6768928">done</a></span>&nbsp;<span class="op" id="6768968">&lt;-</span>&nbsp;<span class="num" id="6768971">1</span>&nbsp;<span class="op" id="6768973">}</span><span class="op" id="6768974">(</span><span class="op" id="6768975">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6768979">switch</span>&nbsp;<span class="ident" id="6768986">ln</span>&nbsp;<span class="op" id="6768989">:=</span>&nbsp;<span class="ident" id="6768992"><a href="/net/conn_test.go.html#6768915">ln</a></span><span class="op" id="6768994">.</span><span class="op" id="6768995">(</span><span class="keyword" id="6768996">type</span><span class="op" id="6769000">)</span>&nbsp;<span class="op" id="6769002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769005">case</span>&nbsp;<span class="op" id="6769010">*</span><span class="ident" id="6769011"><a href="/net/tcpsock_posix.go.html#2699965">TCPListener</a></span><span class="op" id="6769022">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769026"><a href="/net/conn_test.go.html#6768986">ln</a></span><span class="op" id="6769028">.</span><span class="ident" id="6769029">SetDeadline</span><span class="op" id="6769040">(</span><span class="ident" id="6769041"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6769045">.</span><span class="ident" id="6769046">Now</span><span class="op" id="6769049">(</span><span class="op" id="6769050">)</span><span class="op" id="6769051">.</span><span class="ident" id="6769052">Add</span><span class="op" id="6769055">(</span><span class="ident" id="6769056"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6769067">)</span><span class="op" id="6769068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769071">case</span>&nbsp;<span class="op" id="6769076">*</span><span class="ident" id="6769077"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="6769089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769093"><a href="/net/conn_test.go.html#6768986">ln</a></span><span class="op" id="6769095">.</span><span class="ident" id="6769096">SetDeadline</span><span class="op" id="6769107">(</span><span class="ident" id="6769108"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6769112">.</span><span class="ident" id="6769113">Now</span><span class="op" id="6769116">(</span><span class="op" id="6769117">)</span><span class="op" id="6769118">.</span><span class="ident" id="6769119">Add</span><span class="op" id="6769122">(</span><span class="ident" id="6769123"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6769134">)</span><span class="op" id="6769135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769141">c</span><span class="op" id="6769142">,</span>&nbsp;<span class="ident" id="6769144">err</span>&nbsp;<span class="op" id="6769148">:=</span>&nbsp;<span class="ident" id="6769151"><a href="/net/conn_test.go.html#6768915">ln</a></span><span class="op" id="6769153">.</span><span class="ident" id="6769154">Accept</span><span class="op" id="6769160">(</span><span class="op" id="6769161">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769164">if</span>&nbsp;<span class="ident" id="6769167"><a href="/net/conn_test.go.html#6769144">err</a></span>&nbsp;<span class="op" id="6769171">!=</span>&nbsp;<span class="ident" id="6769174">nil</span>&nbsp;<span class="op" id="6769178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769182"><a href="/net/conn_test.go.html#6768901">t</a></span><span class="op" id="6769183">.</span><span class="ident" id="6769184">Errorf</span><span class="op" id="6769190">(</span><span class="string" id="6769191">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6769219">,</span>&nbsp;<span class="ident" id="6769221"><a href="/net/conn_test.go.html#6769144">err</a></span><span class="op" id="6769224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769228">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769239">defer</span>&nbsp;<span class="ident" id="6769245"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769246">.</span><span class="ident" id="6769247">Close</span><span class="op" id="6769252">(</span><span class="op" id="6769253">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769256">network</span>&nbsp;<span class="op" id="6769264">:=</span>&nbsp;<span class="ident" id="6769267"><a href="/net/conn_test.go.html#6768915">ln</a></span><span class="op" id="6769269">.</span><span class="ident" id="6769270">Addr</span><span class="op" id="6769274">(</span><span class="op" id="6769275">)</span><span class="op" id="6769276">.</span><span class="ident" id="6769277">Network</span><span class="op" id="6769284">(</span><span class="op" id="6769285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769288">if</span>&nbsp;<span class="ident" id="6769291"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769292">.</span><span class="ident" id="6769293">LocalAddr</span><span class="op" id="6769302">(</span><span class="op" id="6769303">)</span><span class="op" id="6769304">.</span><span class="ident" id="6769305">Network</span><span class="op" id="6769312">(</span><span class="op" id="6769313">)</span>&nbsp;<span class="op" id="6769315">!=</span>&nbsp;<span class="ident" id="6769318"><a href="/net/conn_test.go.html#6769256">network</a></span>&nbsp;<span class="op" id="6769326">||</span>&nbsp;<span class="ident" id="6769329"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769330">.</span><span class="ident" id="6769331">LocalAddr</span><span class="op" id="6769340">(</span><span class="op" id="6769341">)</span><span class="op" id="6769342">.</span><span class="ident" id="6769343">Network</span><span class="op" id="6769350">(</span><span class="op" id="6769351">)</span>&nbsp;<span class="op" id="6769353">!=</span>&nbsp;<span class="ident" id="6769356"><a href="/net/conn_test.go.html#6769256">network</a></span>&nbsp;<span class="op" id="6769364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769368"><a href="/net/conn_test.go.html#6768901">t</a></span><span class="op" id="6769369">.</span><span class="ident" id="6769370">Errorf</span><span class="op" id="6769376">(</span><span class="string" id="6769377">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6769406">,</span>&nbsp;<span class="ident" id="6769408"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769409">.</span><span class="ident" id="6769410">LocalAddr</span><span class="op" id="6769419">(</span><span class="op" id="6769420">)</span><span class="op" id="6769421">.</span><span class="ident" id="6769422">Network</span><span class="op" id="6769429">(</span><span class="op" id="6769430">)</span><span class="op" id="6769431">,</span>&nbsp;<span class="ident" id="6769433"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769434">.</span><span class="ident" id="6769435">RemoteAddr</span><span class="op" id="6769445">(</span><span class="op" id="6769446">)</span><span class="op" id="6769447">.</span><span class="ident" id="6769448">Network</span><span class="op" id="6769455">(</span><span class="op" id="6769456">)</span><span class="op" id="6769457">,</span>&nbsp;<span class="ident" id="6769459"><a href="/net/conn_test.go.html#6769256">network</a></span><span class="op" id="6769466">,</span>&nbsp;<span class="ident" id="6769468"><a href="/net/conn_test.go.html#6769256">network</a></span><span class="op" id="6769475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769487">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769490"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769491">.</span><span class="ident" id="6769492">SetDeadline</span><span class="op" id="6769503">(</span><span class="ident" id="6769504"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6769508">.</span><span class="ident" id="6769509">Now</span><span class="op" id="6769512">(</span><span class="op" id="6769513">)</span><span class="op" id="6769514">.</span><span class="ident" id="6769515">Add</span><span class="op" id="6769518">(</span><span class="ident" id="6769519"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6769530">)</span><span class="op" id="6769531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769534"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769535">.</span><span class="ident" id="6769536">SetReadDeadline</span><span class="op" id="6769551">(</span><span class="ident" id="6769552"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6769556">.</span><span class="ident" id="6769557">Now</span><span class="op" id="6769560">(</span><span class="op" id="6769561">)</span><span class="op" id="6769562">.</span><span class="ident" id="6769563">Add</span><span class="op" id="6769566">(</span><span class="ident" id="6769567"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6769578">)</span><span class="op" id="6769579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769582"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769583">.</span><span class="ident" id="6769584">SetWriteDeadline</span><span class="op" id="6769600">(</span><span class="ident" id="6769601"><a href="/net/conn_test.go.html#6767017">time</a></span><span class="op" id="6769605">.</span><span class="ident" id="6769606">Now</span><span class="op" id="6769609">(</span><span class="op" id="6769610">)</span><span class="op" id="6769611">.</span><span class="ident" id="6769612">Add</span><span class="op" id="6769615">(</span><span class="ident" id="6769616"><a href="/net/conn_test.go.html#6767354">someTimeout</a></span><span class="op" id="6769627">)</span><span class="op" id="6769628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769632">b</span>&nbsp;<span class="op" id="6769634">:=</span>&nbsp;<span class="builtinfunc" id="6769637">make</span><span class="op" id="6769641">(</span><span class="op" id="6769642">[</span><span class="op" id="6769643">]</span><span class="builtintype" id="6769644">byte</span><span class="op" id="6769648">,</span>&nbsp;<span class="num" id="6769650">128</span><span class="op" id="6769653">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769656">n</span><span class="op" id="6769657">,</span>&nbsp;<span class="ident" id="6769659"><a href="/net/conn_test.go.html#6769144">err</a></span>&nbsp;<span class="op" id="6769663">:=</span>&nbsp;<span class="ident" id="6769666"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769667">.</span><span class="ident" id="6769668">Read</span><span class="op" id="6769672">(</span><span class="ident" id="6769673"><a href="/net/conn_test.go.html#6769632">b</a></span><span class="op" id="6769674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769677">if</span>&nbsp;<span class="ident" id="6769680"><a href="/net/conn_test.go.html#6769144">err</a></span>&nbsp;<span class="op" id="6769684">!=</span>&nbsp;<span class="ident" id="6769687">nil</span>&nbsp;<span class="op" id="6769691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769695"><a href="/net/conn_test.go.html#6768901">t</a></span><span class="op" id="6769696">.</span><span class="ident" id="6769697">Errorf</span><span class="op" id="6769703">(</span><span class="string" id="6769704">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6769726">,</span>&nbsp;<span class="ident" id="6769728"><a href="/net/conn_test.go.html#6769144">err</a></span><span class="op" id="6769731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769735">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769743">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769746">if</span>&nbsp;<span class="ident" id="6769749">_</span><span class="op" id="6769750">,</span>&nbsp;<span class="ident" id="6769752">err</span>&nbsp;<span class="op" id="6769756">:=</span>&nbsp;<span class="ident" id="6769759"><a href="/net/conn_test.go.html#6769141">c</a></span><span class="op" id="6769760">.</span><span class="ident" id="6769761">Write</span><span class="op" id="6769766">(</span><span class="ident" id="6769767"><a href="/net/conn_test.go.html#6769632">b</a></span><span class="op" id="6769768">[</span><span class="op" id="6769769">:</span><span class="ident" id="6769770"><a href="/net/conn_test.go.html#6769656">n</a></span><span class="op" id="6769771">]</span><span class="op" id="6769772">)</span><span class="op" id="6769773">;</span>&nbsp;<span class="ident" id="6769775"><a href="/net/conn_test.go.html#6769752">err</a></span>&nbsp;<span class="op" id="6769779">!=</span>&nbsp;<span class="ident" id="6769782">nil</span>&nbsp;<span class="op" id="6769786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769790"><a href="/net/conn_test.go.html#6768901">t</a></span><span class="op" id="6769791">.</span><span class="ident" id="6769792">Errorf</span><span class="op" id="6769798">(</span><span class="string" id="6769799">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6769822">,</span>&nbsp;<span class="ident" id="6769824"><a href="/net/conn_test.go.html#6769752">err</a></span><span class="op" id="6769827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6769831">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769839">}</span><br>
<span class="lineno"></span><span class="op" id="6769841">}</span>
</div>
</body>
</html>
