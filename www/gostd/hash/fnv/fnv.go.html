<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html" class="current">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5940683">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5940738">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5940792">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5940843">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="5940920">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="5940980">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="5940987">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="5941065">package</span>&nbsp;<span class="ident" id="5941073">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5941078">import</span>&nbsp;<span class="op" id="5941085">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5941088">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="5941095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5941098">type</span>&nbsp;<span class="op" id="5941103">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941106">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="5941113">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941121">sum32a</span>&nbsp;<span class="builtintype" id="5941128">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941136">sum64</span>&nbsp;&nbsp;<span class="ident" id="5941143">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941151">sum64a</span>&nbsp;<span class="ident" id="5941158">uint64</span><br>
<span class="lineno">20</span><span class="op" id="5941165">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5941168">const</span>&nbsp;<span class="op" id="5941174">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941177">offset32</span>&nbsp;<span class="op" id="5941186">=</span>&nbsp;<span class="num" id="5941188">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941200">offset64</span>&nbsp;<span class="op" id="5941209">=</span>&nbsp;<span class="num" id="5941211">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941233">prime32</span>&nbsp;&nbsp;<span class="op" id="5941242">=</span>&nbsp;<span class="num" id="5941244">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5941254">prime64</span>&nbsp;&nbsp;<span class="op" id="5941263">=</span>&nbsp;<span class="num" id="5941265">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="5941279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5941282">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="5941329">func</span>&nbsp;<span class="ident" id="5941334">New32</span><span class="op" id="5941339">(</span><span class="op" id="5941340">)</span>&nbsp;<span class="ident" id="5941342">hash</span><span class="op" id="5941346">.</span><span class="ident" id="5941347">Hash32</span>&nbsp;<span class="op" id="5941354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941357">var</span>&nbsp;<span class="ident" id="5941361">s</span>&nbsp;<span class="ident" id="5941363">sum32</span>&nbsp;<span class="op" id="5941369">=</span>&nbsp;<span class="ident" id="5941371">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941381">return</span>&nbsp;<span class="op" id="5941388">&amp;</span><span class="ident" id="5941389">s</span><br>
<span class="lineno"></span><span class="op" id="5941391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5941394">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5941443">func</span>&nbsp;<span class="ident" id="5941448">New32a</span><span class="op" id="5941454">(</span><span class="op" id="5941455">)</span>&nbsp;<span class="ident" id="5941457">hash</span><span class="op" id="5941461">.</span><span class="ident" id="5941462">Hash32</span>&nbsp;<span class="op" id="5941469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941472">var</span>&nbsp;<span class="ident" id="5941476">s</span>&nbsp;<span class="ident" id="5941478">sum32a</span>&nbsp;<span class="op" id="5941485">=</span>&nbsp;<span class="ident" id="5941487">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941497">return</span>&nbsp;<span class="op" id="5941504">&amp;</span><span class="ident" id="5941505">s</span><br>
<span class="lineno"></span><span class="op" id="5941507">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="5941510">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5941557">func</span>&nbsp;<span class="ident" id="5941562">New64</span><span class="op" id="5941567">(</span><span class="op" id="5941568">)</span>&nbsp;<span class="ident" id="5941570">hash</span><span class="op" id="5941574">.</span><span class="ident" id="5941575">Hash64</span>&nbsp;<span class="op" id="5941582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941585">var</span>&nbsp;<span class="ident" id="5941589">s</span>&nbsp;<span class="ident" id="5941591">sum64</span>&nbsp;<span class="op" id="5941597">=</span>&nbsp;<span class="ident" id="5941599">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941609">return</span>&nbsp;<span class="op" id="5941616">&amp;</span><span class="ident" id="5941617">s</span><br>
<span class="lineno">45</span><span class="op" id="5941619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5941622">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5941671">func</span>&nbsp;<span class="ident" id="5941676">New64a</span><span class="op" id="5941682">(</span><span class="op" id="5941683">)</span>&nbsp;<span class="ident" id="5941685">hash</span><span class="op" id="5941689">.</span><span class="ident" id="5941690">Hash64</span>&nbsp;<span class="op" id="5941697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941700">var</span>&nbsp;<span class="ident" id="5941704">s</span>&nbsp;<span class="ident" id="5941706">sum64a</span>&nbsp;<span class="op" id="5941713">=</span>&nbsp;<span class="ident" id="5941715">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5941725">return</span>&nbsp;<span class="op" id="5941732">&amp;</span><span class="ident" id="5941733">s</span><br>
<span class="lineno"></span><span class="op" id="5941735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5941738">func</span>&nbsp;<span class="op" id="5941743">(</span><span class="ident" id="5941744">s</span>&nbsp;<span class="op" id="5941746">*</span><span class="ident" id="5941747">sum32</span><span class="op" id="5941752">)</span>&nbsp;<span class="ident" id="5941754">Reset</span><span class="op" id="5941759">(</span><span class="op" id="5941760">)</span>&nbsp;&nbsp;<span class="op" id="5941763">{</span>&nbsp;<span class="op" id="5941765">*</span><span class="ident" id="5941766">s</span>&nbsp;<span class="op" id="5941768">=</span>&nbsp;<span class="ident" id="5941770">offset32</span>&nbsp;<span class="op" id="5941779">}</span><br>
<span class="lineno"></span><span class="keyword" id="5941781">func</span>&nbsp;<span class="op" id="5941786">(</span><span class="ident" id="5941787">s</span>&nbsp;<span class="op" id="5941789">*</span><span class="ident" id="5941790">sum32a</span><span class="op" id="5941796">)</span>&nbsp;<span class="ident" id="5941798">Reset</span><span class="op" id="5941803">(</span><span class="op" id="5941804">)</span>&nbsp;<span class="op" id="5941806">{</span>&nbsp;<span class="op" id="5941808">*</span><span class="ident" id="5941809">s</span>&nbsp;<span class="op" id="5941811">=</span>&nbsp;<span class="ident" id="5941813">offset32</span>&nbsp;<span class="op" id="5941822">}</span><br>
<span class="lineno">55</span><span class="keyword" id="5941824">func</span>&nbsp;<span class="op" id="5941829">(</span><span class="ident" id="5941830">s</span>&nbsp;<span class="op" id="5941832">*</span><span class="ident" id="5941833">sum64</span><span class="op" id="5941838">)</span>&nbsp;<span class="ident" id="5941840">Reset</span><span class="op" id="5941845">(</span><span class="op" id="5941846">)</span>&nbsp;&nbsp;<span class="op" id="5941849">{</span>&nbsp;<span class="op" id="5941851">*</span><span class="ident" id="5941852">s</span>&nbsp;<span class="op" id="5941854">=</span>&nbsp;<span class="ident" id="5941856">offset64</span>&nbsp;<span class="op" id="5941865">}</span><br>
<span class="lineno"></span><span class="keyword" id="5941867">func</span>&nbsp;<span class="op" id="5941872">(</span><span class="ident" id="5941873">s</span>&nbsp;<span class="op" id="5941875">*</span><span class="ident" id="5941876">sum64a</span><span class="op" id="5941882">)</span>&nbsp;<span class="ident" id="5941884">Reset</span><span class="op" id="5941889">(</span><span class="op" id="5941890">)</span>&nbsp;<span class="op" id="5941892">{</span>&nbsp;<span class="op" id="5941894">*</span><span class="ident" id="5941895">s</span>&nbsp;<span class="op" id="5941897">=</span>&nbsp;<span class="ident" id="5941899">offset64</span>&nbsp;<span class="op" id="5941908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5941911">func</span>&nbsp;<span class="op" id="5941916">(</span><span class="ident" id="5941917">s</span>&nbsp;<span class="op" id="5941919">*</span><span class="ident" id="5941920">sum32</span><span class="op" id="5941925">)</span>&nbsp;<span class="ident" id="5941927">Sum32</span><span class="op" id="5941932">(</span><span class="op" id="5941933">)</span>&nbsp;<span class="builtintype" id="5941935">uint32</span>&nbsp;&nbsp;<span class="op" id="5941943">{</span>&nbsp;<span class="keyword" id="5941945">return</span>&nbsp;<span class="builtintype" id="5941952">uint32</span><span class="op" id="5941958">(</span><span class="op" id="5941959">*</span><span class="ident" id="5941960">s</span><span class="op" id="5941961">)</span>&nbsp;<span class="op" id="5941963">}</span><br>
<span class="lineno"></span><span class="keyword" id="5941965">func</span>&nbsp;<span class="op" id="5941970">(</span><span class="ident" id="5941971">s</span>&nbsp;<span class="op" id="5941973">*</span><span class="ident" id="5941974">sum32a</span><span class="op" id="5941980">)</span>&nbsp;<span class="ident" id="5941982">Sum32</span><span class="op" id="5941987">(</span><span class="op" id="5941988">)</span>&nbsp;<span class="builtintype" id="5941990">uint32</span>&nbsp;<span class="op" id="5941997">{</span>&nbsp;<span class="keyword" id="5941999">return</span>&nbsp;<span class="builtintype" id="5942006">uint32</span><span class="op" id="5942012">(</span><span class="op" id="5942013">*</span><span class="ident" id="5942014">s</span><span class="op" id="5942015">)</span>&nbsp;<span class="op" id="5942017">}</span><br>
<span class="lineno">60</span><span class="keyword" id="5942019">func</span>&nbsp;<span class="op" id="5942024">(</span><span class="ident" id="5942025">s</span>&nbsp;<span class="op" id="5942027">*</span><span class="ident" id="5942028">sum64</span><span class="op" id="5942033">)</span>&nbsp;<span class="ident" id="5942035">Sum64</span><span class="op" id="5942040">(</span><span class="op" id="5942041">)</span>&nbsp;<span class="ident" id="5942043">uint64</span>&nbsp;&nbsp;<span class="op" id="5942051">{</span>&nbsp;<span class="keyword" id="5942053">return</span>&nbsp;<span class="ident" id="5942060">uint64</span><span class="op" id="5942066">(</span><span class="op" id="5942067">*</span><span class="ident" id="5942068">s</span><span class="op" id="5942069">)</span>&nbsp;<span class="op" id="5942071">}</span><br>
<span class="lineno"></span><span class="keyword" id="5942073">func</span>&nbsp;<span class="op" id="5942078">(</span><span class="ident" id="5942079">s</span>&nbsp;<span class="op" id="5942081">*</span><span class="ident" id="5942082">sum64a</span><span class="op" id="5942088">)</span>&nbsp;<span class="ident" id="5942090">Sum64</span><span class="op" id="5942095">(</span><span class="op" id="5942096">)</span>&nbsp;<span class="ident" id="5942098">uint64</span>&nbsp;<span class="op" id="5942105">{</span>&nbsp;<span class="keyword" id="5942107">return</span>&nbsp;<span class="ident" id="5942114">uint64</span><span class="op" id="5942120">(</span><span class="op" id="5942121">*</span><span class="ident" id="5942122">s</span><span class="op" id="5942123">)</span>&nbsp;<span class="op" id="5942125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942128">func</span>&nbsp;<span class="op" id="5942133">(</span><span class="ident" id="5942134">s</span>&nbsp;<span class="op" id="5942136">*</span><span class="ident" id="5942137">sum32</span><span class="op" id="5942142">)</span>&nbsp;<span class="ident" id="5942144">Write</span><span class="op" id="5942149">(</span><span class="ident" id="5942150">data</span>&nbsp;<span class="op" id="5942155">[</span><span class="op" id="5942156">]</span><span class="builtintype" id="5942157">byte</span><span class="op" id="5942161">)</span>&nbsp;<span class="op" id="5942163">(</span><span class="builtintype" id="5942164">int</span><span class="op" id="5942167">,</span>&nbsp;<span class="builtintype" id="5942169">error</span><span class="op" id="5942174">)</span>&nbsp;<span class="op" id="5942176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942179">hash</span>&nbsp;<span class="op" id="5942184">:=</span>&nbsp;<span class="op" id="5942187">*</span><span class="ident" id="5942188">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942191">for</span>&nbsp;<span class="ident" id="5942195">_</span><span class="op" id="5942196">,</span>&nbsp;<span class="ident" id="5942198">c</span>&nbsp;<span class="op" id="5942200">:=</span>&nbsp;<span class="keyword" id="5942203">range</span>&nbsp;<span class="ident" id="5942209">data</span>&nbsp;<span class="op" id="5942214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942218">hash</span>&nbsp;<span class="op" id="5942223">*=</span>&nbsp;<span class="ident" id="5942226">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942236">hash</span>&nbsp;<span class="op" id="5942241">^=</span>&nbsp;<span class="ident" id="5942244">sum32</span><span class="op" id="5942249">(</span><span class="ident" id="5942250">c</span><span class="op" id="5942251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942257">*</span><span class="ident" id="5942258">s</span>&nbsp;<span class="op" id="5942260">=</span>&nbsp;<span class="ident" id="5942262">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942268">return</span>&nbsp;<span class="builtinfunc" id="5942275">len</span><span class="op" id="5942278">(</span><span class="ident" id="5942279">data</span><span class="op" id="5942283">)</span><span class="op" id="5942284">,</span>&nbsp;<span class="ident" id="5942286">nil</span><br>
<span class="lineno"></span><span class="op" id="5942290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942293">func</span>&nbsp;<span class="op" id="5942298">(</span><span class="ident" id="5942299">s</span>&nbsp;<span class="op" id="5942301">*</span><span class="ident" id="5942302">sum32a</span><span class="op" id="5942308">)</span>&nbsp;<span class="ident" id="5942310">Write</span><span class="op" id="5942315">(</span><span class="ident" id="5942316">data</span>&nbsp;<span class="op" id="5942321">[</span><span class="op" id="5942322">]</span><span class="builtintype" id="5942323">byte</span><span class="op" id="5942327">)</span>&nbsp;<span class="op" id="5942329">(</span><span class="builtintype" id="5942330">int</span><span class="op" id="5942333">,</span>&nbsp;<span class="builtintype" id="5942335">error</span><span class="op" id="5942340">)</span>&nbsp;<span class="op" id="5942342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942345">hash</span>&nbsp;<span class="op" id="5942350">:=</span>&nbsp;<span class="op" id="5942353">*</span><span class="ident" id="5942354">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942357">for</span>&nbsp;<span class="ident" id="5942361">_</span><span class="op" id="5942362">,</span>&nbsp;<span class="ident" id="5942364">c</span>&nbsp;<span class="op" id="5942366">:=</span>&nbsp;<span class="keyword" id="5942369">range</span>&nbsp;<span class="ident" id="5942375">data</span>&nbsp;<span class="op" id="5942380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942384">hash</span>&nbsp;<span class="op" id="5942389">^=</span>&nbsp;<span class="ident" id="5942392">sum32a</span><span class="op" id="5942398">(</span><span class="ident" id="5942399">c</span><span class="op" id="5942400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942404">hash</span>&nbsp;<span class="op" id="5942409">*=</span>&nbsp;<span class="ident" id="5942412">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942424">*</span><span class="ident" id="5942425">s</span>&nbsp;<span class="op" id="5942427">=</span>&nbsp;<span class="ident" id="5942429">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942435">return</span>&nbsp;<span class="builtinfunc" id="5942442">len</span><span class="op" id="5942445">(</span><span class="ident" id="5942446">data</span><span class="op" id="5942450">)</span><span class="op" id="5942451">,</span>&nbsp;<span class="ident" id="5942453">nil</span><br>
<span class="lineno"></span><span class="op" id="5942457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942460">func</span>&nbsp;<span class="op" id="5942465">(</span><span class="ident" id="5942466">s</span>&nbsp;<span class="op" id="5942468">*</span><span class="ident" id="5942469">sum64</span><span class="op" id="5942474">)</span>&nbsp;<span class="ident" id="5942476">Write</span><span class="op" id="5942481">(</span><span class="ident" id="5942482">data</span>&nbsp;<span class="op" id="5942487">[</span><span class="op" id="5942488">]</span><span class="builtintype" id="5942489">byte</span><span class="op" id="5942493">)</span>&nbsp;<span class="op" id="5942495">(</span><span class="builtintype" id="5942496">int</span><span class="op" id="5942499">,</span>&nbsp;<span class="builtintype" id="5942501">error</span><span class="op" id="5942506">)</span>&nbsp;<span class="op" id="5942508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942511">hash</span>&nbsp;<span class="op" id="5942516">:=</span>&nbsp;<span class="op" id="5942519">*</span><span class="ident" id="5942520">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942523">for</span>&nbsp;<span class="ident" id="5942527">_</span><span class="op" id="5942528">,</span>&nbsp;<span class="ident" id="5942530">c</span>&nbsp;<span class="op" id="5942532">:=</span>&nbsp;<span class="keyword" id="5942535">range</span>&nbsp;<span class="ident" id="5942541">data</span>&nbsp;<span class="op" id="5942546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942550">hash</span>&nbsp;<span class="op" id="5942555">*=</span>&nbsp;<span class="ident" id="5942558">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942568">hash</span>&nbsp;<span class="op" id="5942573">^=</span>&nbsp;<span class="ident" id="5942576">sum64</span><span class="op" id="5942581">(</span><span class="ident" id="5942582">c</span><span class="op" id="5942583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942589">*</span><span class="ident" id="5942590">s</span>&nbsp;<span class="op" id="5942592">=</span>&nbsp;<span class="ident" id="5942594">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942600">return</span>&nbsp;<span class="builtinfunc" id="5942607">len</span><span class="op" id="5942610">(</span><span class="ident" id="5942611">data</span><span class="op" id="5942615">)</span><span class="op" id="5942616">,</span>&nbsp;<span class="ident" id="5942618">nil</span><br>
<span class="lineno"></span><span class="op" id="5942622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942625">func</span>&nbsp;<span class="op" id="5942630">(</span><span class="ident" id="5942631">s</span>&nbsp;<span class="op" id="5942633">*</span><span class="ident" id="5942634">sum64a</span><span class="op" id="5942640">)</span>&nbsp;<span class="ident" id="5942642">Write</span><span class="op" id="5942647">(</span><span class="ident" id="5942648">data</span>&nbsp;<span class="op" id="5942653">[</span><span class="op" id="5942654">]</span><span class="builtintype" id="5942655">byte</span><span class="op" id="5942659">)</span>&nbsp;<span class="op" id="5942661">(</span><span class="builtintype" id="5942662">int</span><span class="op" id="5942665">,</span>&nbsp;<span class="builtintype" id="5942667">error</span><span class="op" id="5942672">)</span>&nbsp;<span class="op" id="5942674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942677">hash</span>&nbsp;<span class="op" id="5942682">:=</span>&nbsp;<span class="op" id="5942685">*</span><span class="ident" id="5942686">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942689">for</span>&nbsp;<span class="ident" id="5942693">_</span><span class="op" id="5942694">,</span>&nbsp;<span class="ident" id="5942696">c</span>&nbsp;<span class="op" id="5942698">:=</span>&nbsp;<span class="keyword" id="5942701">range</span>&nbsp;<span class="ident" id="5942707">data</span>&nbsp;<span class="op" id="5942712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942716">hash</span>&nbsp;<span class="op" id="5942721">^=</span>&nbsp;<span class="ident" id="5942724">sum64a</span><span class="op" id="5942730">(</span><span class="ident" id="5942731">c</span><span class="op" id="5942732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5942736">hash</span>&nbsp;<span class="op" id="5942741">*=</span>&nbsp;<span class="ident" id="5942744">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5942756">*</span><span class="ident" id="5942757">s</span>&nbsp;<span class="op" id="5942759">=</span>&nbsp;<span class="ident" id="5942761">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5942767">return</span>&nbsp;<span class="builtinfunc" id="5942774">len</span><span class="op" id="5942777">(</span><span class="ident" id="5942778">data</span><span class="op" id="5942782">)</span><span class="op" id="5942783">,</span>&nbsp;<span class="ident" id="5942785">nil</span><br>
<span class="lineno"></span><span class="op" id="5942789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942792">func</span>&nbsp;<span class="op" id="5942797">(</span><span class="ident" id="5942798">s</span>&nbsp;<span class="op" id="5942800">*</span><span class="ident" id="5942801">sum32</span><span class="op" id="5942806">)</span>&nbsp;<span class="ident" id="5942808">Size</span><span class="op" id="5942812">(</span><span class="op" id="5942813">)</span>&nbsp;<span class="builtintype" id="5942815">int</span>&nbsp;&nbsp;<span class="op" id="5942820">{</span>&nbsp;<span class="keyword" id="5942822">return</span>&nbsp;<span class="num" id="5942829">4</span>&nbsp;<span class="op" id="5942831">}</span><br>
<span class="lineno"></span><span class="keyword" id="5942833">func</span>&nbsp;<span class="op" id="5942838">(</span><span class="ident" id="5942839">s</span>&nbsp;<span class="op" id="5942841">*</span><span class="ident" id="5942842">sum32a</span><span class="op" id="5942848">)</span>&nbsp;<span class="ident" id="5942850">Size</span><span class="op" id="5942854">(</span><span class="op" id="5942855">)</span>&nbsp;<span class="builtintype" id="5942857">int</span>&nbsp;<span class="op" id="5942861">{</span>&nbsp;<span class="keyword" id="5942863">return</span>&nbsp;<span class="num" id="5942870">4</span>&nbsp;<span class="op" id="5942872">}</span><br>
<span class="lineno">105</span><span class="keyword" id="5942874">func</span>&nbsp;<span class="op" id="5942879">(</span><span class="ident" id="5942880">s</span>&nbsp;<span class="op" id="5942882">*</span><span class="ident" id="5942883">sum64</span><span class="op" id="5942888">)</span>&nbsp;<span class="ident" id="5942890">Size</span><span class="op" id="5942894">(</span><span class="op" id="5942895">)</span>&nbsp;<span class="builtintype" id="5942897">int</span>&nbsp;&nbsp;<span class="op" id="5942902">{</span>&nbsp;<span class="keyword" id="5942904">return</span>&nbsp;<span class="num" id="5942911">8</span>&nbsp;<span class="op" id="5942913">}</span><br>
<span class="lineno"></span><span class="keyword" id="5942915">func</span>&nbsp;<span class="op" id="5942920">(</span><span class="ident" id="5942921">s</span>&nbsp;<span class="op" id="5942923">*</span><span class="ident" id="5942924">sum64a</span><span class="op" id="5942930">)</span>&nbsp;<span class="ident" id="5942932">Size</span><span class="op" id="5942936">(</span><span class="op" id="5942937">)</span>&nbsp;<span class="builtintype" id="5942939">int</span>&nbsp;<span class="op" id="5942943">{</span>&nbsp;<span class="keyword" id="5942945">return</span>&nbsp;<span class="num" id="5942952">8</span>&nbsp;<span class="op" id="5942954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942957">func</span>&nbsp;<span class="op" id="5942962">(</span><span class="ident" id="5942963">s</span>&nbsp;<span class="op" id="5942965">*</span><span class="ident" id="5942966">sum32</span><span class="op" id="5942971">)</span>&nbsp;<span class="ident" id="5942973">BlockSize</span><span class="op" id="5942982">(</span><span class="op" id="5942983">)</span>&nbsp;<span class="builtintype" id="5942985">int</span>&nbsp;&nbsp;<span class="op" id="5942990">{</span>&nbsp;<span class="keyword" id="5942992">return</span>&nbsp;<span class="num" id="5942999">1</span>&nbsp;<span class="op" id="5943001">}</span><br>
<span class="lineno"></span><span class="keyword" id="5943003">func</span>&nbsp;<span class="op" id="5943008">(</span><span class="ident" id="5943009">s</span>&nbsp;<span class="op" id="5943011">*</span><span class="ident" id="5943012">sum32a</span><span class="op" id="5943018">)</span>&nbsp;<span class="ident" id="5943020">BlockSize</span><span class="op" id="5943029">(</span><span class="op" id="5943030">)</span>&nbsp;<span class="builtintype" id="5943032">int</span>&nbsp;<span class="op" id="5943036">{</span>&nbsp;<span class="keyword" id="5943038">return</span>&nbsp;<span class="num" id="5943045">1</span>&nbsp;<span class="op" id="5943047">}</span><br>
<span class="lineno">110</span><span class="keyword" id="5943049">func</span>&nbsp;<span class="op" id="5943054">(</span><span class="ident" id="5943055">s</span>&nbsp;<span class="op" id="5943057">*</span><span class="ident" id="5943058">sum64</span><span class="op" id="5943063">)</span>&nbsp;<span class="ident" id="5943065">BlockSize</span><span class="op" id="5943074">(</span><span class="op" id="5943075">)</span>&nbsp;<span class="builtintype" id="5943077">int</span>&nbsp;&nbsp;<span class="op" id="5943082">{</span>&nbsp;<span class="keyword" id="5943084">return</span>&nbsp;<span class="num" id="5943091">1</span>&nbsp;<span class="op" id="5943093">}</span><br>
<span class="lineno"></span><span class="keyword" id="5943095">func</span>&nbsp;<span class="op" id="5943100">(</span><span class="ident" id="5943101">s</span>&nbsp;<span class="op" id="5943103">*</span><span class="ident" id="5943104">sum64a</span><span class="op" id="5943110">)</span>&nbsp;<span class="ident" id="5943112">BlockSize</span><span class="op" id="5943121">(</span><span class="op" id="5943122">)</span>&nbsp;<span class="builtintype" id="5943124">int</span>&nbsp;<span class="op" id="5943128">{</span>&nbsp;<span class="keyword" id="5943130">return</span>&nbsp;<span class="num" id="5943137">1</span>&nbsp;<span class="op" id="5943139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5943142">func</span>&nbsp;<span class="op" id="5943147">(</span><span class="ident" id="5943148">s</span>&nbsp;<span class="op" id="5943150">*</span><span class="ident" id="5943151">sum32</span><span class="op" id="5943156">)</span>&nbsp;<span class="ident" id="5943158">Sum</span><span class="op" id="5943161">(</span><span class="ident" id="5943162">in</span>&nbsp;<span class="op" id="5943165">[</span><span class="op" id="5943166">]</span><span class="builtintype" id="5943167">byte</span><span class="op" id="5943171">)</span>&nbsp;<span class="op" id="5943173">[</span><span class="op" id="5943174">]</span><span class="builtintype" id="5943175">byte</span>&nbsp;<span class="op" id="5943180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5943183">v</span>&nbsp;<span class="op" id="5943185">:=</span>&nbsp;<span class="builtintype" id="5943188">uint32</span><span class="op" id="5943194">(</span><span class="op" id="5943195">*</span><span class="ident" id="5943196">s</span><span class="op" id="5943197">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943200">return</span>&nbsp;<span class="builtinfunc" id="5943207">append</span><span class="op" id="5943213">(</span><span class="ident" id="5943214">in</span><span class="op" id="5943216">,</span>&nbsp;<span class="builtintype" id="5943218">byte</span><span class="op" id="5943222">(</span><span class="ident" id="5943223">v</span><span class="op" id="5943224">&gt;&gt;</span><span class="num" id="5943226">24</span><span class="op" id="5943228">)</span><span class="op" id="5943229">,</span>&nbsp;<span class="builtintype" id="5943231">byte</span><span class="op" id="5943235">(</span><span class="ident" id="5943236">v</span><span class="op" id="5943237">&gt;&gt;</span><span class="num" id="5943239">16</span><span class="op" id="5943241">)</span><span class="op" id="5943242">,</span>&nbsp;<span class="builtintype" id="5943244">byte</span><span class="op" id="5943248">(</span><span class="ident" id="5943249">v</span><span class="op" id="5943250">&gt;&gt;</span><span class="num" id="5943252">8</span><span class="op" id="5943253">)</span><span class="op" id="5943254">,</span>&nbsp;<span class="builtintype" id="5943256">byte</span><span class="op" id="5943260">(</span><span class="ident" id="5943261">v</span><span class="op" id="5943262">)</span><span class="op" id="5943263">)</span><br>
<span class="lineno"></span><span class="op" id="5943265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5943268">func</span>&nbsp;<span class="op" id="5943273">(</span><span class="ident" id="5943274">s</span>&nbsp;<span class="op" id="5943276">*</span><span class="ident" id="5943277">sum32a</span><span class="op" id="5943283">)</span>&nbsp;<span class="ident" id="5943285">Sum</span><span class="op" id="5943288">(</span><span class="ident" id="5943289">in</span>&nbsp;<span class="op" id="5943292">[</span><span class="op" id="5943293">]</span><span class="builtintype" id="5943294">byte</span><span class="op" id="5943298">)</span>&nbsp;<span class="op" id="5943300">[</span><span class="op" id="5943301">]</span><span class="builtintype" id="5943302">byte</span>&nbsp;<span class="op" id="5943307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5943310">v</span>&nbsp;<span class="op" id="5943312">:=</span>&nbsp;<span class="builtintype" id="5943315">uint32</span><span class="op" id="5943321">(</span><span class="op" id="5943322">*</span><span class="ident" id="5943323">s</span><span class="op" id="5943324">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943327">return</span>&nbsp;<span class="builtinfunc" id="5943334">append</span><span class="op" id="5943340">(</span><span class="ident" id="5943341">in</span><span class="op" id="5943343">,</span>&nbsp;<span class="builtintype" id="5943345">byte</span><span class="op" id="5943349">(</span><span class="ident" id="5943350">v</span><span class="op" id="5943351">&gt;&gt;</span><span class="num" id="5943353">24</span><span class="op" id="5943355">)</span><span class="op" id="5943356">,</span>&nbsp;<span class="builtintype" id="5943358">byte</span><span class="op" id="5943362">(</span><span class="ident" id="5943363">v</span><span class="op" id="5943364">&gt;&gt;</span><span class="num" id="5943366">16</span><span class="op" id="5943368">)</span><span class="op" id="5943369">,</span>&nbsp;<span class="builtintype" id="5943371">byte</span><span class="op" id="5943375">(</span><span class="ident" id="5943376">v</span><span class="op" id="5943377">&gt;&gt;</span><span class="num" id="5943379">8</span><span class="op" id="5943380">)</span><span class="op" id="5943381">,</span>&nbsp;<span class="builtintype" id="5943383">byte</span><span class="op" id="5943387">(</span><span class="ident" id="5943388">v</span><span class="op" id="5943389">)</span><span class="op" id="5943390">)</span><br>
<span class="lineno"></span><span class="op" id="5943392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5943395">func</span>&nbsp;<span class="op" id="5943400">(</span><span class="ident" id="5943401">s</span>&nbsp;<span class="op" id="5943403">*</span><span class="ident" id="5943404">sum64</span><span class="op" id="5943409">)</span>&nbsp;<span class="ident" id="5943411">Sum</span><span class="op" id="5943414">(</span><span class="ident" id="5943415">in</span>&nbsp;<span class="op" id="5943418">[</span><span class="op" id="5943419">]</span><span class="builtintype" id="5943420">byte</span><span class="op" id="5943424">)</span>&nbsp;<span class="op" id="5943426">[</span><span class="op" id="5943427">]</span><span class="builtintype" id="5943428">byte</span>&nbsp;<span class="op" id="5943433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5943436">v</span>&nbsp;<span class="op" id="5943438">:=</span>&nbsp;<span class="ident" id="5943441">uint64</span><span class="op" id="5943447">(</span><span class="op" id="5943448">*</span><span class="ident" id="5943449">s</span><span class="op" id="5943450">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943453">return</span>&nbsp;<span class="builtinfunc" id="5943460">append</span><span class="op" id="5943466">(</span><span class="ident" id="5943467">in</span><span class="op" id="5943469">,</span>&nbsp;<span class="builtintype" id="5943471">byte</span><span class="op" id="5943475">(</span><span class="ident" id="5943476">v</span><span class="op" id="5943477">&gt;&gt;</span><span class="num" id="5943479">56</span><span class="op" id="5943481">)</span><span class="op" id="5943482">,</span>&nbsp;<span class="builtintype" id="5943484">byte</span><span class="op" id="5943488">(</span><span class="ident" id="5943489">v</span><span class="op" id="5943490">&gt;&gt;</span><span class="num" id="5943492">48</span><span class="op" id="5943494">)</span><span class="op" id="5943495">,</span>&nbsp;<span class="builtintype" id="5943497">byte</span><span class="op" id="5943501">(</span><span class="ident" id="5943502">v</span><span class="op" id="5943503">&gt;&gt;</span><span class="num" id="5943505">40</span><span class="op" id="5943507">)</span><span class="op" id="5943508">,</span>&nbsp;<span class="builtintype" id="5943510">byte</span><span class="op" id="5943514">(</span><span class="ident" id="5943515">v</span><span class="op" id="5943516">&gt;&gt;</span><span class="num" id="5943518">32</span><span class="op" id="5943520">)</span><span class="op" id="5943521">,</span>&nbsp;<span class="builtintype" id="5943523">byte</span><span class="op" id="5943527">(</span><span class="ident" id="5943528">v</span><span class="op" id="5943529">&gt;&gt;</span><span class="num" id="5943531">24</span><span class="op" id="5943533">)</span><span class="op" id="5943534">,</span>&nbsp;<span class="builtintype" id="5943536">byte</span><span class="op" id="5943540">(</span><span class="ident" id="5943541">v</span><span class="op" id="5943542">&gt;&gt;</span><span class="num" id="5943544">16</span><span class="op" id="5943546">)</span><span class="op" id="5943547">,</span>&nbsp;<span class="builtintype" id="5943549">byte</span><span class="op" id="5943553">(</span><span class="ident" id="5943554">v</span><span class="op" id="5943555">&gt;&gt;</span><span class="num" id="5943557">8</span><span class="op" id="5943558">)</span><span class="op" id="5943559">,</span>&nbsp;<span class="builtintype" id="5943561">byte</span><span class="op" id="5943565">(</span><span class="ident" id="5943566">v</span><span class="op" id="5943567">)</span><span class="op" id="5943568">)</span><br>
<span class="lineno"></span><span class="op" id="5943570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5943573">func</span>&nbsp;<span class="op" id="5943578">(</span><span class="ident" id="5943579">s</span>&nbsp;<span class="op" id="5943581">*</span><span class="ident" id="5943582">sum64a</span><span class="op" id="5943588">)</span>&nbsp;<span class="ident" id="5943590">Sum</span><span class="op" id="5943593">(</span><span class="ident" id="5943594">in</span>&nbsp;<span class="op" id="5943597">[</span><span class="op" id="5943598">]</span><span class="builtintype" id="5943599">byte</span><span class="op" id="5943603">)</span>&nbsp;<span class="op" id="5943605">[</span><span class="op" id="5943606">]</span><span class="builtintype" id="5943607">byte</span>&nbsp;<span class="op" id="5943612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5943615">v</span>&nbsp;<span class="op" id="5943617">:=</span>&nbsp;<span class="ident" id="5943620">uint64</span><span class="op" id="5943626">(</span><span class="op" id="5943627">*</span><span class="ident" id="5943628">s</span><span class="op" id="5943629">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5943632">return</span>&nbsp;<span class="builtinfunc" id="5943639">append</span><span class="op" id="5943645">(</span><span class="ident" id="5943646">in</span><span class="op" id="5943648">,</span>&nbsp;<span class="builtintype" id="5943650">byte</span><span class="op" id="5943654">(</span><span class="ident" id="5943655">v</span><span class="op" id="5943656">&gt;&gt;</span><span class="num" id="5943658">56</span><span class="op" id="5943660">)</span><span class="op" id="5943661">,</span>&nbsp;<span class="builtintype" id="5943663">byte</span><span class="op" id="5943667">(</span><span class="ident" id="5943668">v</span><span class="op" id="5943669">&gt;&gt;</span><span class="num" id="5943671">48</span><span class="op" id="5943673">)</span><span class="op" id="5943674">,</span>&nbsp;<span class="builtintype" id="5943676">byte</span><span class="op" id="5943680">(</span><span class="ident" id="5943681">v</span><span class="op" id="5943682">&gt;&gt;</span><span class="num" id="5943684">40</span><span class="op" id="5943686">)</span><span class="op" id="5943687">,</span>&nbsp;<span class="builtintype" id="5943689">byte</span><span class="op" id="5943693">(</span><span class="ident" id="5943694">v</span><span class="op" id="5943695">&gt;&gt;</span><span class="num" id="5943697">32</span><span class="op" id="5943699">)</span><span class="op" id="5943700">,</span>&nbsp;<span class="builtintype" id="5943702">byte</span><span class="op" id="5943706">(</span><span class="ident" id="5943707">v</span><span class="op" id="5943708">&gt;&gt;</span><span class="num" id="5943710">24</span><span class="op" id="5943712">)</span><span class="op" id="5943713">,</span>&nbsp;<span class="builtintype" id="5943715">byte</span><span class="op" id="5943719">(</span><span class="ident" id="5943720">v</span><span class="op" id="5943721">&gt;&gt;</span><span class="num" id="5943723">16</span><span class="op" id="5943725">)</span><span class="op" id="5943726">,</span>&nbsp;<span class="builtintype" id="5943728">byte</span><span class="op" id="5943732">(</span><span class="ident" id="5943733">v</span><span class="op" id="5943734">&gt;&gt;</span><span class="num" id="5943736">8</span><span class="op" id="5943737">)</span><span class="op" id="5943738">,</span>&nbsp;<span class="builtintype" id="5943740">byte</span><span class="op" id="5943744">(</span><span class="ident" id="5943745">v</span><span class="op" id="5943746">)</span><span class="op" id="5943747">)</span><br>
<span class="lineno"></span><span class="op" id="5943749">}</span>
</div>
</body>
</html>
