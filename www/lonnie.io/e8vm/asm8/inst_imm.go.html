<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5810158">package</span>&nbsp;<span class="ident" id="5810166">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5810172">import</span>&nbsp;<span class="op" id="5810179">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810182">&#34;strconv&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810194">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5810216">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5810219">var</span>&nbsp;<span class="op" id="5810223">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5810226">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810253">opImsMap</span>&nbsp;<span class="op" id="5810262">=</span>&nbsp;<span class="keyword" id="5810264">map</span><span class="op" id="5810267">[</span><span class="builtintype" id="5810268">string</span><span class="op" id="5810274">]</span><span class="builtintype" id="5810275">uint32</span><span class="op" id="5810281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810285">&#34;addi&#34;</span><span class="op" id="5810291">:</span>&nbsp;<span class="num" id="5810293">1</span><span class="op" id="5810294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810298">&#34;slti&#34;</span><span class="op" id="5810304">:</span>&nbsp;<span class="num" id="5810306">2</span><span class="op" id="5810307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810310">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810314">opMemMap</span>&nbsp;<span class="op" id="5810323">=</span>&nbsp;<span class="keyword" id="5810325">map</span><span class="op" id="5810328">[</span><span class="builtintype" id="5810329">string</span><span class="op" id="5810335">]</span><span class="builtintype" id="5810336">uint32</span><span class="op" id="5810342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810346">&#34;lw&#34;</span><span class="op" id="5810350">:</span>&nbsp;&nbsp;<span class="num" id="5810353">6</span><span class="op" id="5810354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810358">&#34;lb&#34;</span><span class="op" id="5810362">:</span>&nbsp;&nbsp;<span class="num" id="5810365">7</span><span class="op" id="5810366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810370">&#34;lbu&#34;</span><span class="op" id="5810375">:</span>&nbsp;<span class="num" id="5810377">8</span><span class="op" id="5810378">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810382">&#34;sw&#34;</span><span class="op" id="5810386">:</span>&nbsp;&nbsp;<span class="num" id="5810389">9</span><span class="op" id="5810390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810394">&#34;sb&#34;</span><span class="op" id="5810398">:</span>&nbsp;&nbsp;<span class="num" id="5810401">10</span><span class="op" id="5810403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5810410">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810439">opImuMap</span>&nbsp;<span class="op" id="5810448">=</span>&nbsp;<span class="keyword" id="5810450">map</span><span class="op" id="5810453">[</span><span class="builtintype" id="5810454">string</span><span class="op" id="5810460">]</span><span class="builtintype" id="5810461">uint32</span><span class="op" id="5810467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810471">&#34;andi&#34;</span><span class="op" id="5810477">:</span>&nbsp;<span class="num" id="5810479">3</span><span class="op" id="5810480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810484">&#34;ori&#34;</span><span class="op" id="5810489">:</span>&nbsp;&nbsp;<span class="num" id="5810492">4</span><span class="op" id="5810493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5810500">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810535">opImmMap</span>&nbsp;<span class="op" id="5810544">=</span>&nbsp;<span class="keyword" id="5810546">map</span><span class="op" id="5810549">[</span><span class="builtintype" id="5810550">string</span><span class="op" id="5810556">]</span><span class="builtintype" id="5810557">uint32</span><span class="op" id="5810563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810567">&#34;lui&#34;</span><span class="op" id="5810572">:</span>&nbsp;<span class="num" id="5810574">5</span><span class="op" id="5810575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810578">}</span><br>
<span class="lineno"></span><span class="op" id="5810580">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5810583">//&nbsp;parseImu&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5810631">func</span>&nbsp;<span class="ident" id="5810636">parseImu</span><span class="op" id="5810644">(</span><span class="ident" id="5810645">p</span>&nbsp;<span class="op" id="5810647">*</span><span class="ident" id="5810648">parser</span><span class="op" id="5810654">,</span>&nbsp;<span class="ident" id="5810656">op</span>&nbsp;<span class="op" id="5810659">*</span><span class="ident" id="5810660">lex8</span><span class="op" id="5810664">.</span><span class="ident" id="5810665">Token</span><span class="op" id="5810670">)</span>&nbsp;<span class="builtintype" id="5810672">uint32</span>&nbsp;<span class="op" id="5810679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810682">ret</span><span class="op" id="5810685">,</span>&nbsp;<span class="ident" id="5810687">e</span>&nbsp;<span class="op" id="5810689">:=</span>&nbsp;<span class="ident" id="5810692">strconv</span><span class="op" id="5810699">.</span><span class="ident" id="5810700">ParseUint</span><span class="op" id="5810709">(</span><span class="ident" id="5810710">op</span><span class="op" id="5810712">.</span><span class="ident" id="5810713">Lit</span><span class="op" id="5810716">,</span>&nbsp;<span class="num" id="5810718">0</span><span class="op" id="5810719">,</span>&nbsp;<span class="num" id="5810721">32</span><span class="op" id="5810723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810726">if</span>&nbsp;<span class="ident" id="5810729">e</span>&nbsp;<span class="op" id="5810731">!=</span>&nbsp;<span class="ident" id="5810734">nil</span>&nbsp;<span class="op" id="5810738">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810742">p</span><span class="op" id="5810743">.</span><span class="ident" id="5810744">err</span><span class="op" id="5810747">(</span><span class="ident" id="5810748">op</span><span class="op" id="5810750">.</span><span class="ident" id="5810751">Pos</span><span class="op" id="5810754">,</span>&nbsp;<span class="string" id="5810756">&#34;invalid&nbsp;unsigned&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5810791">,</span>&nbsp;<span class="ident" id="5810793">op</span><span class="op" id="5810795">.</span><span class="ident" id="5810796">Lit</span><span class="op" id="5810799">,</span>&nbsp;<span class="ident" id="5810801">e</span><span class="op" id="5810802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810806">return</span>&nbsp;<span class="num" id="5810813">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810820">if</span>&nbsp;<span class="op" id="5810823">(</span><span class="ident" id="5810824">ret</span>&nbsp;<span class="op" id="5810828">&amp;</span>&nbsp;<span class="num" id="5810830">0xffff</span><span class="op" id="5810836">)</span>&nbsp;<span class="op" id="5810838">!=</span>&nbsp;<span class="ident" id="5810841">ret</span>&nbsp;<span class="op" id="5810845">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810849">p</span><span class="op" id="5810850">.</span><span class="ident" id="5810851">err</span><span class="op" id="5810854">(</span><span class="ident" id="5810855">op</span><span class="op" id="5810857">.</span><span class="ident" id="5810858">Pos</span><span class="op" id="5810861">,</span>&nbsp;<span class="string" id="5810863">&#34;immediate&nbsp;too&nbsp;large:&nbsp;%s&#34;</span><span class="op" id="5810888">,</span>&nbsp;<span class="ident" id="5810890">op</span><span class="op" id="5810892">.</span><span class="ident" id="5810893">Lit</span><span class="op" id="5810896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810900">return</span>&nbsp;<span class="num" id="5810907">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810914">return</span>&nbsp;<span class="builtintype" id="5810921">uint32</span><span class="op" id="5810927">(</span><span class="ident" id="5810928">ret</span><span class="op" id="5810931">)</span><br>
<span class="lineno">50</span><span class="op" id="5810933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5810936">//&nbsp;parseIms&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5810984">func</span>&nbsp;<span class="ident" id="5810989">parseIms</span><span class="op" id="5810997">(</span><span class="ident" id="5810998">p</span>&nbsp;<span class="op" id="5811000">*</span><span class="ident" id="5811001">parser</span><span class="op" id="5811007">,</span>&nbsp;<span class="ident" id="5811009">op</span>&nbsp;<span class="op" id="5811012">*</span><span class="ident" id="5811013">lex8</span><span class="op" id="5811017">.</span><span class="ident" id="5811018">Token</span><span class="op" id="5811023">)</span>&nbsp;<span class="builtintype" id="5811025">uint32</span>&nbsp;<span class="op" id="5811032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811035">ret</span><span class="op" id="5811038">,</span>&nbsp;<span class="ident" id="5811040">e</span>&nbsp;<span class="op" id="5811042">:=</span>&nbsp;<span class="ident" id="5811045">strconv</span><span class="op" id="5811052">.</span><span class="ident" id="5811053">ParseInt</span><span class="op" id="5811061">(</span><span class="ident" id="5811062">op</span><span class="op" id="5811064">.</span><span class="ident" id="5811065">Lit</span><span class="op" id="5811068">,</span>&nbsp;<span class="num" id="5811070">0</span><span class="op" id="5811071">,</span>&nbsp;<span class="num" id="5811073">32</span><span class="op" id="5811075">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811078">if</span>&nbsp;<span class="ident" id="5811081">e</span>&nbsp;<span class="op" id="5811083">!=</span>&nbsp;<span class="ident" id="5811086">nil</span>&nbsp;<span class="op" id="5811090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811094">p</span><span class="op" id="5811095">.</span><span class="ident" id="5811096">err</span><span class="op" id="5811099">(</span><span class="ident" id="5811100">op</span><span class="op" id="5811102">.</span><span class="ident" id="5811103">Pos</span><span class="op" id="5811106">,</span>&nbsp;<span class="string" id="5811108">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5811141">,</span>&nbsp;<span class="ident" id="5811143">op</span><span class="op" id="5811145">.</span><span class="ident" id="5811146">Lit</span><span class="op" id="5811149">,</span>&nbsp;<span class="ident" id="5811151">e</span><span class="op" id="5811152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811156">return</span>&nbsp;<span class="num" id="5811163">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5811166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811170">if</span>&nbsp;<span class="ident" id="5811173">ret</span>&nbsp;<span class="op" id="5811177">&gt;</span>&nbsp;<span class="num" id="5811179">0x7fff</span>&nbsp;<span class="op" id="5811186">||</span>&nbsp;<span class="ident" id="5811189">ret</span>&nbsp;<span class="op" id="5811193">&lt;</span>&nbsp;<span class="op" id="5811195">-</span><span class="num" id="5811196">0x8000</span>&nbsp;<span class="op" id="5811203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811207">p</span><span class="op" id="5811208">.</span><span class="ident" id="5811209">err</span><span class="op" id="5811212">(</span><span class="ident" id="5811213">op</span><span class="op" id="5811215">.</span><span class="ident" id="5811216">Pos</span><span class="op" id="5811219">,</span>&nbsp;<span class="string" id="5811221">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="5811256">,</span>&nbsp;<span class="ident" id="5811258">op</span><span class="op" id="5811260">.</span><span class="ident" id="5811261">Lit</span><span class="op" id="5811264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811268">return</span>&nbsp;<span class="num" id="5811275">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5811278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811282">return</span>&nbsp;<span class="builtintype" id="5811289">uint32</span><span class="op" id="5811295">(</span><span class="ident" id="5811296">ret</span><span class="op" id="5811299">)</span>&nbsp;<span class="op" id="5811301">&amp;</span>&nbsp;<span class="num" id="5811303">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5811310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5811313">//&nbsp;parseImm&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5811361">func</span>&nbsp;<span class="ident" id="5811366">parseImm</span><span class="op" id="5811374">(</span><span class="ident" id="5811375">p</span>&nbsp;<span class="op" id="5811377">*</span><span class="ident" id="5811378">parser</span><span class="op" id="5811384">,</span>&nbsp;<span class="ident" id="5811386">op</span>&nbsp;<span class="op" id="5811389">*</span><span class="ident" id="5811390">lex8</span><span class="op" id="5811394">.</span><span class="ident" id="5811395">Token</span><span class="op" id="5811400">)</span>&nbsp;<span class="builtintype" id="5811402">uint32</span>&nbsp;<span class="op" id="5811409">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811412">ret</span><span class="op" id="5811415">,</span>&nbsp;<span class="ident" id="5811417">e</span>&nbsp;<span class="op" id="5811419">:=</span>&nbsp;<span class="ident" id="5811422">strconv</span><span class="op" id="5811429">.</span><span class="ident" id="5811430">ParseInt</span><span class="op" id="5811438">(</span><span class="ident" id="5811439">op</span><span class="op" id="5811441">.</span><span class="ident" id="5811442">Lit</span><span class="op" id="5811445">,</span>&nbsp;<span class="num" id="5811447">0</span><span class="op" id="5811448">,</span>&nbsp;<span class="num" id="5811450">32</span><span class="op" id="5811452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811455">if</span>&nbsp;<span class="ident" id="5811458">e</span>&nbsp;<span class="op" id="5811460">!=</span>&nbsp;<span class="ident" id="5811463">nil</span>&nbsp;<span class="op" id="5811467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811471">p</span><span class="op" id="5811472">.</span><span class="ident" id="5811473">err</span><span class="op" id="5811476">(</span><span class="ident" id="5811477">op</span><span class="op" id="5811479">.</span><span class="ident" id="5811480">Pos</span><span class="op" id="5811483">,</span>&nbsp;<span class="string" id="5811485">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5811518">,</span>&nbsp;<span class="ident" id="5811520">op</span><span class="op" id="5811522">.</span><span class="ident" id="5811523">Lit</span><span class="op" id="5811526">,</span>&nbsp;<span class="ident" id="5811528">e</span><span class="op" id="5811529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811533">return</span>&nbsp;<span class="num" id="5811540">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5811543">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811547">if</span>&nbsp;<span class="ident" id="5811550">ret</span>&nbsp;<span class="op" id="5811554">&gt;</span>&nbsp;<span class="num" id="5811556">0xffff</span>&nbsp;<span class="op" id="5811563">||</span>&nbsp;<span class="ident" id="5811566">ret</span>&nbsp;<span class="op" id="5811570">&lt;</span>&nbsp;<span class="op" id="5811572">-</span><span class="num" id="5811573">0x8000</span>&nbsp;<span class="op" id="5811580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811584">p</span><span class="op" id="5811585">.</span><span class="ident" id="5811586">err</span><span class="op" id="5811589">(</span><span class="ident" id="5811590">op</span><span class="op" id="5811592">.</span><span class="ident" id="5811593">Pos</span><span class="op" id="5811596">,</span>&nbsp;<span class="string" id="5811598">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="5811633">,</span>&nbsp;<span class="ident" id="5811635">op</span><span class="op" id="5811637">.</span><span class="ident" id="5811638">Lit</span><span class="op" id="5811641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811645">return</span>&nbsp;<span class="num" id="5811652">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5811655">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811659">return</span>&nbsp;<span class="builtintype" id="5811666">uint32</span><span class="op" id="5811672">(</span><span class="ident" id="5811673">ret</span><span class="op" id="5811676">)</span>&nbsp;<span class="op" id="5811678">&amp;</span>&nbsp;<span class="num" id="5811680">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5811687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5811690">func</span>&nbsp;<span class="ident" id="5811695">makeInstImm</span><span class="op" id="5811706">(</span><span class="ident" id="5811707">op</span><span class="op" id="5811709">,</span>&nbsp;<span class="ident" id="5811711">d</span><span class="op" id="5811712">,</span>&nbsp;<span class="ident" id="5811714">s</span><span class="op" id="5811715">,</span>&nbsp;<span class="ident" id="5811717">im</span>&nbsp;<span class="builtintype" id="5811720">uint32</span><span class="op" id="5811726">)</span>&nbsp;<span class="op" id="5811728">*</span><span class="ident" id="5811729">inst</span>&nbsp;<span class="op" id="5811734">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811737">ret</span>&nbsp;<span class="op" id="5811741">:=</span>&nbsp;<span class="builtintype" id="5811744">uint32</span><span class="op" id="5811750">(</span><span class="num" id="5811751">0</span><span class="op" id="5811752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811755">ret</span>&nbsp;<span class="op" id="5811759">|=</span>&nbsp;<span class="op" id="5811762">(</span><span class="ident" id="5811763">op</span>&nbsp;<span class="op" id="5811766">&amp;</span>&nbsp;<span class="num" id="5811768">0xff</span><span class="op" id="5811772">)</span>&nbsp;<span class="op" id="5811774">&lt;&lt;</span>&nbsp;<span class="num" id="5811777">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811781">ret</span>&nbsp;<span class="op" id="5811785">|=</span>&nbsp;<span class="op" id="5811788">(</span><span class="ident" id="5811789">d</span>&nbsp;<span class="op" id="5811791">&amp;</span>&nbsp;<span class="num" id="5811793">0x7</span><span class="op" id="5811796">)</span>&nbsp;<span class="op" id="5811798">&lt;&lt;</span>&nbsp;<span class="num" id="5811801">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811805">ret</span>&nbsp;<span class="op" id="5811809">|=</span>&nbsp;<span class="op" id="5811812">(</span><span class="ident" id="5811813">s</span>&nbsp;<span class="op" id="5811815">&amp;</span>&nbsp;<span class="num" id="5811817">0x7</span><span class="op" id="5811820">)</span>&nbsp;<span class="op" id="5811822">&lt;&lt;</span>&nbsp;<span class="num" id="5811825">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811829">ret</span>&nbsp;<span class="op" id="5811833">|=</span>&nbsp;<span class="op" id="5811836">(</span><span class="ident" id="5811837">im</span>&nbsp;<span class="op" id="5811840">&amp;</span>&nbsp;<span class="num" id="5811842">0xffff</span><span class="op" id="5811848">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811852">return</span>&nbsp;<span class="op" id="5811859">&amp;</span><span class="ident" id="5811860">inst</span><span class="op" id="5811864">{</span><span class="ident" id="5811865">inst</span><span class="op" id="5811869">:</span>&nbsp;<span class="ident" id="5811871">ret</span><span class="op" id="5811874">}</span><br>
<span class="lineno"></span><span class="op" id="5811876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5811879">func</span>&nbsp;<span class="ident" id="5811884">parseInstImm</span><span class="op" id="5811896">(</span><span class="ident" id="5811897">p</span>&nbsp;<span class="op" id="5811899">*</span><span class="ident" id="5811900">parser</span><span class="op" id="5811906">,</span>&nbsp;<span class="ident" id="5811908">ops</span>&nbsp;<span class="op" id="5811912">[</span><span class="op" id="5811913">]</span><span class="op" id="5811914">*</span><span class="ident" id="5811915">lex8</span><span class="op" id="5811919">.</span><span class="ident" id="5811920">Token</span><span class="op" id="5811925">)</span>&nbsp;<span class="op" id="5811927">(</span><span class="op" id="5811928">*</span><span class="ident" id="5811929">inst</span><span class="op" id="5811933">,</span>&nbsp;<span class="builtintype" id="5811935">bool</span><span class="op" id="5811939">)</span>&nbsp;<span class="op" id="5811941">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811944">op0</span>&nbsp;<span class="op" id="5811948">:=</span>&nbsp;<span class="ident" id="5811951">ops</span><span class="op" id="5811954">[</span><span class="num" id="5811955">0</span><span class="op" id="5811956">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811959">opName</span>&nbsp;<span class="op" id="5811966">:=</span>&nbsp;<span class="ident" id="5811969">op0</span><span class="op" id="5811972">.</span><span class="ident" id="5811973">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811978">args</span>&nbsp;<span class="op" id="5811983">:=</span>&nbsp;<span class="ident" id="5811986">ops</span><span class="op" id="5811989">[</span><span class="num" id="5811990">1</span><span class="op" id="5811991">:</span><span class="op" id="5811992">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811996">var</span>&nbsp;<span class="op" id="5812000">(</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812004">op</span><span class="op" id="5812006">,</span>&nbsp;<span class="ident" id="5812008">d</span><span class="op" id="5812009">,</span>&nbsp;<span class="ident" id="5812011">s</span><span class="op" id="5812012">,</span>&nbsp;<span class="ident" id="5812014">im</span>&nbsp;<span class="builtintype" id="5812017">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812026">pack</span><span class="op" id="5812030">,</span>&nbsp;<span class="ident" id="5812032">sym</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5812039">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812048">fill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5812061">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812067">symTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5812080">*</span><span class="ident" id="5812081">lex8</span><span class="op" id="5812085">.</span><span class="ident" id="5812086">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812093">)</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812097">argCount</span>&nbsp;<span class="op" id="5812106">:=</span>&nbsp;<span class="keyword" id="5812109">func</span><span class="op" id="5812113">(</span><span class="ident" id="5812114">n</span>&nbsp;<span class="builtintype" id="5812116">int</span><span class="op" id="5812119">)</span>&nbsp;<span class="builtintype" id="5812121">bool</span>&nbsp;<span class="op" id="5812126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812130">if</span>&nbsp;<span class="op" id="5812133">!</span><span class="ident" id="5812134">argCount</span><span class="op" id="5812142">(</span><span class="ident" id="5812143">p</span><span class="op" id="5812144">,</span>&nbsp;<span class="ident" id="5812146">ops</span><span class="op" id="5812149">,</span>&nbsp;<span class="ident" id="5812151">n</span><span class="op" id="5812152">)</span>&nbsp;<span class="op" id="5812154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812159">return</span>&nbsp;<span class="ident" id="5812166">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812174">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812178">if</span>&nbsp;<span class="ident" id="5812181">n</span>&nbsp;<span class="op" id="5812183">&gt;=</span>&nbsp;<span class="num" id="5812186">1</span>&nbsp;<span class="op" id="5812188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812193">d</span>&nbsp;<span class="op" id="5812195">=</span>&nbsp;<span class="ident" id="5812197">parseReg</span><span class="op" id="5812205">(</span><span class="ident" id="5812206">p</span><span class="op" id="5812207">,</span>&nbsp;<span class="ident" id="5812209">args</span><span class="op" id="5812213">[</span><span class="num" id="5812214">0</span><span class="op" id="5812215">]</span><span class="op" id="5812216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812224">return</span>&nbsp;<span class="ident" id="5812231">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812237">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812241">parseSym</span>&nbsp;<span class="op" id="5812250">:=</span>&nbsp;<span class="keyword" id="5812253">func</span><span class="op" id="5812257">(</span><span class="ident" id="5812258">t</span>&nbsp;<span class="op" id="5812260">*</span><span class="ident" id="5812261">lex8</span><span class="op" id="5812265">.</span><span class="ident" id="5812266">Token</span><span class="op" id="5812271">,</span>&nbsp;<span class="ident" id="5812273">f</span>&nbsp;<span class="keyword" id="5812275">func</span><span class="op" id="5812279">(</span><span class="op" id="5812280">*</span><span class="ident" id="5812281">parser</span><span class="op" id="5812287">,</span>&nbsp;<span class="op" id="5812289">*</span><span class="ident" id="5812290">lex8</span><span class="op" id="5812294">.</span><span class="ident" id="5812295">Token</span><span class="op" id="5812300">)</span>&nbsp;<span class="builtintype" id="5812302">uint32</span><span class="op" id="5812308">)</span>&nbsp;<span class="op" id="5812310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812314">if</span>&nbsp;<span class="ident" id="5812317">isSymbol</span><span class="op" id="5812325">(</span><span class="ident" id="5812326">t</span><span class="op" id="5812327">.</span><span class="ident" id="5812328">Lit</span><span class="op" id="5812331">)</span>&nbsp;<span class="op" id="5812333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812338">pack</span><span class="op" id="5812342">,</span>&nbsp;<span class="ident" id="5812344">sym</span>&nbsp;<span class="op" id="5812348">=</span>&nbsp;<span class="ident" id="5812350">parseSym</span><span class="op" id="5812358">(</span><span class="ident" id="5812359">p</span><span class="op" id="5812360">,</span>&nbsp;<span class="ident" id="5812362">t</span><span class="op" id="5812363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812368">fill</span>&nbsp;<span class="op" id="5812373">=</span>&nbsp;<span class="ident" id="5812375">fillLow</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812386">symTok</span>&nbsp;<span class="op" id="5812393">=</span>&nbsp;<span class="ident" id="5812395">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812399">}</span>&nbsp;<span class="keyword" id="5812401">else</span>&nbsp;<span class="op" id="5812406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812411">im</span>&nbsp;<span class="op" id="5812414">=</span>&nbsp;<span class="ident" id="5812416">f</span><span class="op" id="5812417">(</span><span class="ident" id="5812418">p</span><span class="op" id="5812419">,</span>&nbsp;<span class="ident" id="5812421">t</span><span class="op" id="5812422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812429">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812433">var</span>&nbsp;<span class="ident" id="5812437">found</span>&nbsp;<span class="builtintype" id="5812443">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812449">if</span>&nbsp;<span class="ident" id="5812452">op</span><span class="op" id="5812454">,</span>&nbsp;<span class="ident" id="5812456">found</span>&nbsp;<span class="op" id="5812462">=</span>&nbsp;<span class="ident" id="5812464">opImsMap</span><span class="op" id="5812472">[</span><span class="ident" id="5812473">opName</span><span class="op" id="5812479">]</span><span class="op" id="5812480">;</span>&nbsp;<span class="ident" id="5812482">found</span>&nbsp;<span class="op" id="5812488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812492">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812520">if</span>&nbsp;<span class="ident" id="5812523">argCount</span><span class="op" id="5812531">(</span><span class="num" id="5812532">3</span><span class="op" id="5812533">)</span>&nbsp;<span class="op" id="5812535">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812540">s</span>&nbsp;<span class="op" id="5812542">=</span>&nbsp;<span class="ident" id="5812544">parseReg</span><span class="op" id="5812552">(</span><span class="ident" id="5812553">p</span><span class="op" id="5812554">,</span>&nbsp;<span class="ident" id="5812556">args</span><span class="op" id="5812560">[</span><span class="num" id="5812561">1</span><span class="op" id="5812562">]</span><span class="op" id="5812563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812568">parseSym</span><span class="op" id="5812576">(</span><span class="ident" id="5812577">args</span><span class="op" id="5812581">[</span><span class="num" id="5812582">2</span><span class="op" id="5812583">]</span><span class="op" id="5812584">,</span>&nbsp;<span class="ident" id="5812586">parseIms</span><span class="op" id="5812594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812601">}</span>&nbsp;<span class="keyword" id="5812603">else</span>&nbsp;<span class="keyword" id="5812608">if</span>&nbsp;<span class="ident" id="5812611">op</span><span class="op" id="5812613">,</span>&nbsp;<span class="ident" id="5812615">found</span>&nbsp;<span class="op" id="5812621">=</span>&nbsp;<span class="ident" id="5812623">opMemMap</span><span class="op" id="5812631">[</span><span class="ident" id="5812632">opName</span><span class="op" id="5812638">]</span><span class="op" id="5812639">;</span>&nbsp;<span class="ident" id="5812641">found</span>&nbsp;<span class="op" id="5812647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812651">if</span>&nbsp;<span class="builtinfunc" id="5812654">len</span><span class="op" id="5812657">(</span><span class="ident" id="5812658">args</span><span class="op" id="5812662">)</span>&nbsp;<span class="op" id="5812664">==</span>&nbsp;<span class="num" id="5812667">2</span>&nbsp;<span class="op" id="5812669">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812674">//&nbsp;mem&nbsp;op&nbsp;can&nbsp;omit&nbsp;the&nbsp;offset&nbsp;if&nbsp;it&nbsp;is&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812718">d</span>&nbsp;<span class="op" id="5812720">=</span>&nbsp;<span class="ident" id="5812722">parseReg</span><span class="op" id="5812730">(</span><span class="ident" id="5812731">p</span><span class="op" id="5812732">,</span>&nbsp;<span class="ident" id="5812734">args</span><span class="op" id="5812738">[</span><span class="num" id="5812739">0</span><span class="op" id="5812740">]</span><span class="op" id="5812741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812746">s</span>&nbsp;<span class="op" id="5812748">=</span>&nbsp;<span class="ident" id="5812750">parseReg</span><span class="op" id="5812758">(</span><span class="ident" id="5812759">p</span><span class="op" id="5812760">,</span>&nbsp;<span class="ident" id="5812762">args</span><span class="op" id="5812766">[</span><span class="num" id="5812767">1</span><span class="op" id="5812768">]</span><span class="op" id="5812769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812773">}</span>&nbsp;<span class="keyword" id="5812775">else</span>&nbsp;<span class="keyword" id="5812780">if</span>&nbsp;<span class="ident" id="5812783">argCount</span><span class="op" id="5812791">(</span><span class="num" id="5812792">3</span><span class="op" id="5812793">)</span>&nbsp;<span class="op" id="5812795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812800">s</span>&nbsp;<span class="op" id="5812802">=</span>&nbsp;<span class="ident" id="5812804">parseReg</span><span class="op" id="5812812">(</span><span class="ident" id="5812813">p</span><span class="op" id="5812814">,</span>&nbsp;<span class="ident" id="5812816">args</span><span class="op" id="5812820">[</span><span class="num" id="5812821">1</span><span class="op" id="5812822">]</span><span class="op" id="5812823">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812828">parseSym</span><span class="op" id="5812836">(</span><span class="ident" id="5812837">args</span><span class="op" id="5812841">[</span><span class="num" id="5812842">2</span><span class="op" id="5812843">]</span><span class="op" id="5812844">,</span>&nbsp;<span class="ident" id="5812846">parseIms</span><span class="op" id="5812854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812861">}</span>&nbsp;<span class="keyword" id="5812863">else</span>&nbsp;<span class="keyword" id="5812868">if</span>&nbsp;<span class="ident" id="5812871">op</span><span class="op" id="5812873">,</span>&nbsp;<span class="ident" id="5812875">found</span>&nbsp;<span class="op" id="5812881">=</span>&nbsp;<span class="ident" id="5812883">opImuMap</span><span class="op" id="5812891">[</span><span class="ident" id="5812892">opName</span><span class="op" id="5812898">]</span><span class="op" id="5812899">;</span>&nbsp;<span class="ident" id="5812901">found</span>&nbsp;<span class="op" id="5812907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812911">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812941">if</span>&nbsp;<span class="ident" id="5812944">argCount</span><span class="op" id="5812952">(</span><span class="num" id="5812953">3</span><span class="op" id="5812954">)</span>&nbsp;<span class="op" id="5812956">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812961">s</span>&nbsp;<span class="op" id="5812963">=</span>&nbsp;<span class="ident" id="5812965">parseReg</span><span class="op" id="5812973">(</span><span class="ident" id="5812974">p</span><span class="op" id="5812975">,</span>&nbsp;<span class="ident" id="5812977">args</span><span class="op" id="5812981">[</span><span class="num" id="5812982">1</span><span class="op" id="5812983">]</span><span class="op" id="5812984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812989">parseSym</span><span class="op" id="5812997">(</span><span class="ident" id="5812998">args</span><span class="op" id="5813002">[</span><span class="num" id="5813003">2</span><span class="op" id="5813004">]</span><span class="op" id="5813005">,</span>&nbsp;<span class="ident" id="5813007">parseImu</span><span class="op" id="5813015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5813019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5813022">}</span>&nbsp;<span class="keyword" id="5813024">else</span>&nbsp;<span class="keyword" id="5813029">if</span>&nbsp;<span class="ident" id="5813032">op</span><span class="op" id="5813034">,</span>&nbsp;<span class="ident" id="5813036">found</span>&nbsp;<span class="op" id="5813042">=</span>&nbsp;<span class="ident" id="5813044">opImmMap</span><span class="op" id="5813052">[</span><span class="ident" id="5813053">opName</span><span class="op" id="5813059">]</span><span class="op" id="5813060">;</span>&nbsp;<span class="ident" id="5813062">found</span>&nbsp;<span class="op" id="5813068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5813072">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5813108">if</span>&nbsp;<span class="ident" id="5813111">argCount</span><span class="op" id="5813119">(</span><span class="num" id="5813120">2</span><span class="op" id="5813121">)</span>&nbsp;<span class="op" id="5813123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813128">parseSym</span><span class="op" id="5813136">(</span><span class="ident" id="5813137">args</span><span class="op" id="5813141">[</span><span class="num" id="5813142">1</span><span class="op" id="5813143">]</span><span class="op" id="5813144">,</span>&nbsp;<span class="ident" id="5813146">parseImm</span><span class="op" id="5813154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5813158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5813162">if</span>&nbsp;<span class="ident" id="5813165">opName</span>&nbsp;<span class="op" id="5813172">==</span>&nbsp;<span class="string" id="5813175">&#34;lui&#34;</span>&nbsp;<span class="op" id="5813181">&amp;&amp;</span>&nbsp;<span class="ident" id="5813184">fill</span>&nbsp;<span class="op" id="5813189">==</span>&nbsp;<span class="ident" id="5813192">fillLow</span>&nbsp;<span class="op" id="5813200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813205">fill</span>&nbsp;<span class="op" id="5813210">=</span>&nbsp;<span class="ident" id="5813212">fillHigh</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5813223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5813226">}</span>&nbsp;<span class="keyword" id="5813228">else</span>&nbsp;<span class="op" id="5813233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5813237">return</span>&nbsp;<span class="ident" id="5813244">nil</span><span class="op" id="5813247">,</span>&nbsp;<span class="ident" id="5813249">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5813256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813260">ret</span>&nbsp;<span class="op" id="5813264">:=</span>&nbsp;<span class="ident" id="5813267">makeInstImm</span><span class="op" id="5813278">(</span><span class="ident" id="5813279">op</span><span class="op" id="5813281">,</span>&nbsp;<span class="ident" id="5813283">d</span><span class="op" id="5813284">,</span>&nbsp;<span class="ident" id="5813286">s</span><span class="op" id="5813287">,</span>&nbsp;<span class="ident" id="5813289">im</span><span class="op" id="5813291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813294">ret</span><span class="op" id="5813297">.</span><span class="ident" id="5813298">pack</span>&nbsp;<span class="op" id="5813303">=</span>&nbsp;<span class="ident" id="5813305">pack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813311">ret</span><span class="op" id="5813314">.</span><span class="ident" id="5813315">symbol</span>&nbsp;<span class="op" id="5813322">=</span>&nbsp;<span class="ident" id="5813324">sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813329">ret</span><span class="op" id="5813332">.</span><span class="ident" id="5813333">fill</span>&nbsp;<span class="op" id="5813338">=</span>&nbsp;<span class="ident" id="5813340">fill</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813346">ret</span><span class="op" id="5813349">.</span><span class="ident" id="5813350">symTok</span>&nbsp;<span class="op" id="5813357">=</span>&nbsp;<span class="ident" id="5813359">symTok</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5813368">return</span>&nbsp;<span class="ident" id="5813375">ret</span><span class="op" id="5813378">,</span>&nbsp;<span class="ident" id="5813380">true</span><br>
<span class="lineno"></span><span class="op" id="5813385">}</span>
</div>
</body>
</html>
