<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8264067">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8264122">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8264176">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8264227">package</span>&nbsp;<span class="ident" id="8264235">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8264245">import</span>&nbsp;<span class="op" id="8264252">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264255">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264264">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264271">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264277">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264290">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264302">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264313">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264324">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264335">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8264345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8264348">type</span>&nbsp;<span class="ident" id="8264353">dumpTest</span>&nbsp;<span class="keyword" id="8264362">struct</span>&nbsp;<span class="op" id="8264369">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264372">Req</span>&nbsp;&nbsp;<span class="ident" id="8264377"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8264381">.</span><span class="ident" id="8264382">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264391">Body</span>&nbsp;<span class="keyword" id="8264396">interface</span><span class="op" id="8264405">{</span><span class="op" id="8264406">}</span>&nbsp;<span class="comment" id="8264408">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264474">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8264486">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264494">WantDumpOut</span>&nbsp;<span class="builtintype" id="8264506">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264514">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8264526">bool</span>&nbsp;<span class="comment" id="8264531">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="8264579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8264582">var</span>&nbsp;<span class="ident" id="8264586">dumpTests</span>&nbsp;<span class="op" id="8264596">=</span>&nbsp;<span class="op" id="8264598">[</span><span class="op" id="8264599">]</span><span class="ident" id="8264600"><a href="/net/http/httputil/dump_test.go.html#8264353">dumpTest</a></span><span class="op" id="8264608">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8264612">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264668">Req</span><span class="op" id="8264671">:</span>&nbsp;<span class="ident" id="8264673"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8264677">.</span><span class="ident" id="8264678">Request</span><span class="op" id="8264685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264690">Method</span><span class="op" id="8264696">:</span>&nbsp;<span class="string" id="8264698">&#34;GET&#34;</span><span class="op" id="8264703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264708">URL</span><span class="op" id="8264711">:</span>&nbsp;<span class="op" id="8264713">&amp;</span><span class="ident" id="8264714"><a href="/net/http/httputil/dump_test.go.html#8264302">url</a></span><span class="op" id="8264717">.</span><span class="ident" id="8264718">URL</span><span class="op" id="8264721">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264727">Scheme</span><span class="op" id="8264733">:</span>&nbsp;<span class="string" id="8264735">&#34;http&#34;</span><span class="op" id="8264741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264747">Host</span><span class="op" id="8264751">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8264755">&#34;www.google.com&#34;</span><span class="op" id="8264771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264777">Path</span><span class="op" id="8264781">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8264785">&#34;/search&#34;</span><span class="op" id="8264794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264799">}</span><span class="op" id="8264800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264805">ProtoMajor</span><span class="op" id="8264815">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8264823">1</span><span class="op" id="8264824">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264829">ProtoMinor</span><span class="op" id="8264839">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8264847">1</span><span class="op" id="8264848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264853">TransferEncoding</span><span class="op" id="8264869">:</span>&nbsp;<span class="op" id="8264871">[</span><span class="op" id="8264872">]</span><span class="builtintype" id="8264873">string</span><span class="op" id="8264879">{</span><span class="string" id="8264880">&#34;chunked&#34;</span><span class="op" id="8264889">}</span><span class="op" id="8264890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8264894">}</span><span class="op" id="8264895">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264900">Body</span><span class="op" id="8264904">:</span>&nbsp;<span class="op" id="8264906">[</span><span class="op" id="8264907">]</span><span class="builtintype" id="8264908">byte</span><span class="op" id="8264912">(</span><span class="string" id="8264913">&#34;abcdef&#34;</span><span class="op" id="8264921">)</span><span class="op" id="8264922">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8264927">WantDump</span><span class="op" id="8264935">:</span>&nbsp;<span class="string" id="8264937">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8264964">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8264969">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="8264996">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265001">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8265038">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265043"><a href="/net/http/httputil/dump_test.go.html#8268348">chunk</a></span><span class="op" id="8265048">(</span><span class="string" id="8265049">&#34;abcdef&#34;</span><span class="op" id="8265057">)</span>&nbsp;<span class="op" id="8265059">+</span>&nbsp;<span class="ident" id="8265061"><a href="/net/http/httputil/dump_test.go.html#8268348">chunk</a></span><span class="op" id="8265066">(</span><span class="string" id="8265067">&#34;&#34;</span><span class="op" id="8265069">)</span><span class="op" id="8265070">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265073">}</span><span class="op" id="8265074">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8265078">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8265161">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265195">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265199">Req</span><span class="op" id="8265202">:</span>&nbsp;<span class="ident" id="8265204"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8265208">.</span><span class="ident" id="8265209">Request</span><span class="op" id="8265216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265221">Method</span><span class="op" id="8265227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8265233">&#34;GET&#34;</span><span class="op" id="8265238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265243">URL</span><span class="op" id="8265246">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8265255"><a href="/net/http/httputil/dump_test.go.html#8268428">mustParseURL</a></span><span class="op" id="8265267">(</span><span class="string" id="8265268">&#34;/foo&#34;</span><span class="op" id="8265274">)</span><span class="op" id="8265275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265280">ProtoMajor</span><span class="op" id="8265290">:</span>&nbsp;<span class="num" id="8265292">1</span><span class="op" id="8265293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265298">ProtoMinor</span><span class="op" id="8265308">:</span>&nbsp;<span class="num" id="8265310">0</span><span class="op" id="8265311">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265316">Header</span><span class="op" id="8265322">:</span>&nbsp;<span class="ident" id="8265324"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8265328">.</span><span class="ident" id="8265329">Header</span><span class="op" id="8265335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265341">&#34;X-Foo&#34;</span><span class="op" id="8265348">:</span>&nbsp;<span class="op" id="8265350">[</span><span class="op" id="8265351">]</span><span class="builtintype" id="8265352">string</span><span class="op" id="8265358">{</span><span class="string" id="8265359">&#34;X-Bar&#34;</span><span class="op" id="8265366">}</span><span class="op" id="8265367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265372">}</span><span class="op" id="8265373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265377">}</span><span class="op" id="8265378">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265383">WantDump</span><span class="op" id="8265391">:</span>&nbsp;<span class="string" id="8265393">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="8265417">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265422">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="8265444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265447">}</span><span class="op" id="8265448">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265452">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265456">Req</span><span class="op" id="8265459">:</span>&nbsp;<span class="op" id="8265461">*</span><span class="ident" id="8265462"><a href="/net/http/httputil/dump_test.go.html#8268581">mustNewRequest</a></span><span class="op" id="8265476">(</span><span class="string" id="8265477">&#34;GET&#34;</span><span class="op" id="8265482">,</span>&nbsp;<span class="string" id="8265484">&#34;http://example.com/foo&#34;</span><span class="op" id="8265508">,</span>&nbsp;<span class="ident" id="8265510">nil</span><span class="op" id="8265513">)</span><span class="op" id="8265514">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265519">WantDumpOut</span><span class="op" id="8265530">:</span>&nbsp;<span class="string" id="8265532">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8265556">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265561">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="8265585">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265590">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8265628">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265633">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="8265664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265667">}</span><span class="op" id="8265668">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8265672">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8265736">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8265793">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8265807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265811">Req</span><span class="op" id="8265814">:</span>&nbsp;<span class="op" id="8265816">*</span><span class="ident" id="8265817"><a href="/net/http/httputil/dump_test.go.html#8268581">mustNewRequest</a></span><span class="op" id="8265831">(</span><span class="string" id="8265832">&#34;GET&#34;</span><span class="op" id="8265837">,</span>&nbsp;<span class="string" id="8265839">&#34;https://example.com/foo&#34;</span><span class="op" id="8265864">,</span>&nbsp;<span class="ident" id="8265866">nil</span><span class="op" id="8265869">)</span><span class="op" id="8265870">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8265875">WantDumpOut</span><span class="op" id="8265886">:</span>&nbsp;<span class="string" id="8265888">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8265912">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265917">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="8265941">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265946">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8265984">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8265989">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="8266020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266023">}</span><span class="op" id="8266024">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8266028">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266086">Req</span><span class="op" id="8266089">:</span>&nbsp;<span class="ident" id="8266091"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8266095">.</span><span class="ident" id="8266096">Request</span><span class="op" id="8266103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266108">Method</span><span class="op" id="8266114">:</span>&nbsp;<span class="string" id="8266116">&#34;POST&#34;</span><span class="op" id="8266122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266127">URL</span><span class="op" id="8266130">:</span>&nbsp;<span class="op" id="8266132">&amp;</span><span class="ident" id="8266133"><a href="/net/http/httputil/dump_test.go.html#8264302">url</a></span><span class="op" id="8266136">.</span><span class="ident" id="8266137">URL</span><span class="op" id="8266140">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266146">Scheme</span><span class="op" id="8266152">:</span>&nbsp;<span class="string" id="8266154">&#34;http&#34;</span><span class="op" id="8266160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266166">Host</span><span class="op" id="8266170">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8266174">&#34;post.tld&#34;</span><span class="op" id="8266184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266190">Path</span><span class="op" id="8266194">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8266198">&#34;/&#34;</span><span class="op" id="8266201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266206">}</span><span class="op" id="8266207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266212">ContentLength</span><span class="op" id="8266225">:</span>&nbsp;<span class="num" id="8266227">6</span><span class="op" id="8266228">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266233">ProtoMajor</span><span class="op" id="8266243">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8266248">1</span><span class="op" id="8266249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266254">ProtoMinor</span><span class="op" id="8266264">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8266269">1</span><span class="op" id="8266270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266274">}</span><span class="op" id="8266275">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266280">Body</span><span class="op" id="8266284">:</span>&nbsp;<span class="op" id="8266286">[</span><span class="op" id="8266287">]</span><span class="builtintype" id="8266288">byte</span><span class="op" id="8266292">(</span><span class="string" id="8266293">&#34;abcdef&#34;</span><span class="op" id="8266301">)</span><span class="op" id="8266302">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266307">WantDumpOut</span><span class="op" id="8266318">:</span>&nbsp;<span class="string" id="8266320">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8266342">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266347">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="8266368">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266373">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8266411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266416">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="8266440">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266445">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="8266476">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266481">NoBody</span><span class="op" id="8266487">:</span>&nbsp;<span class="builtintype" id="8266489">true</span><span class="op" id="8266493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266496">}</span><span class="op" id="8266497">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8266501">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266556">Req</span><span class="op" id="8266559">:</span>&nbsp;<span class="ident" id="8266561"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8266565">.</span><span class="ident" id="8266566">Request</span><span class="op" id="8266573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266578">Method</span><span class="op" id="8266584">:</span>&nbsp;<span class="string" id="8266586">&#34;POST&#34;</span><span class="op" id="8266592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266597">URL</span><span class="op" id="8266600">:</span>&nbsp;<span class="op" id="8266602">&amp;</span><span class="ident" id="8266603"><a href="/net/http/httputil/dump_test.go.html#8264302">url</a></span><span class="op" id="8266606">.</span><span class="ident" id="8266607">URL</span><span class="op" id="8266610">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266616">Scheme</span><span class="op" id="8266622">:</span>&nbsp;<span class="string" id="8266624">&#34;http&#34;</span><span class="op" id="8266630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266636">Host</span><span class="op" id="8266640">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8266644">&#34;post.tld&#34;</span><span class="op" id="8266654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266660">Path</span><span class="op" id="8266664">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8266668">&#34;/&#34;</span><span class="op" id="8266671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266676">}</span><span class="op" id="8266677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266682">ContentLength</span><span class="op" id="8266695">:</span>&nbsp;<span class="num" id="8266697">8193</span><span class="op" id="8266701">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266706">ProtoMajor</span><span class="op" id="8266716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8266721">1</span><span class="op" id="8266722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266727">ProtoMinor</span><span class="op" id="8266737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8266742">1</span><span class="op" id="8266743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266747">}</span><span class="op" id="8266748">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266753">Body</span><span class="op" id="8266757">:</span>&nbsp;<span class="ident" id="8266759"><a href="/net/http/httputil/dump_test.go.html#8264255">bytes</a></span><span class="op" id="8266764">.</span><span class="ident" id="8266765">Repeat</span><span class="op" id="8266771">(</span><span class="op" id="8266772">[</span><span class="op" id="8266773">]</span><span class="builtintype" id="8266774">byte</span><span class="op" id="8266778">(</span><span class="string" id="8266779">&#34;a&#34;</span><span class="op" id="8266782">)</span><span class="op" id="8266783">,</span>&nbsp;<span class="num" id="8266785">8193</span><span class="op" id="8266789">)</span><span class="op" id="8266790">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266795">WantDumpOut</span><span class="op" id="8266806">:</span>&nbsp;<span class="string" id="8266808">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8266830">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266835">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="8266856">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266861">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="8266899">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266904">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="8266931">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8266936">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8266968">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266973"><a href="/net/http/httputil/dump_test.go.html#8264324">strings</a></span><span class="op" id="8266980">.</span><span class="ident" id="8266981">Repeat</span><span class="op" id="8266987">(</span><span class="string" id="8266988">&#34;a&#34;</span><span class="op" id="8266991">,</span>&nbsp;<span class="num" id="8266993">8193</span><span class="op" id="8266997">)</span><span class="op" id="8266998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267001">}</span><span class="op" id="8267002">,</span><br>
<span class="lineno"></span><span class="op" id="8267004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8267007">func</span>&nbsp;<span class="ident" id="8267012">TestDumpRequest</span><span class="op" id="8267027">(</span><span class="ident" id="8267028">t</span>&nbsp;<span class="op" id="8267030">*</span><span class="ident" id="8267031"><a href="/net/http/httputil/dump_test.go.html#8264335">testing</a></span><span class="op" id="8267038">.</span><span class="ident" id="8267039">T</span><span class="op" id="8267040">)</span>&nbsp;<span class="op" id="8267042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267045">numg0</span>&nbsp;<span class="op" id="8267051">:=</span>&nbsp;<span class="ident" id="8267054"><a href="/net/http/httputil/dump_test.go.html#8264313">runtime</a></span><span class="op" id="8267061">.</span><span class="ident" id="8267062">NumGoroutine</span><span class="op" id="8267074">(</span><span class="op" id="8267075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267078">for</span>&nbsp;<span class="ident" id="8267082">i</span><span class="op" id="8267083">,</span>&nbsp;<span class="ident" id="8267085">tt</span>&nbsp;<span class="op" id="8267088">:=</span>&nbsp;<span class="keyword" id="8267091">range</span>&nbsp;<span class="ident" id="8267097"><a href="/net/http/httputil/dump_test.go.html#8264586">dumpTests</a></span>&nbsp;<span class="op" id="8267107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267111">setBody</span>&nbsp;<span class="op" id="8267119">:=</span>&nbsp;<span class="keyword" id="8267122">func</span><span class="op" id="8267126">(</span><span class="op" id="8267127">)</span>&nbsp;<span class="op" id="8267129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267134">if</span>&nbsp;<span class="ident" id="8267137"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267139">.</span><span class="ident" id="8267140">Body</span>&nbsp;<span class="op" id="8267145">==</span>&nbsp;<span class="ident" id="8267148">nil</span>&nbsp;<span class="op" id="8267152">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267158">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267173">switch</span>&nbsp;<span class="ident" id="8267180">b</span>&nbsp;<span class="op" id="8267182">:=</span>&nbsp;<span class="ident" id="8267185"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267187">.</span><span class="ident" id="8267188">Body</span><span class="op" id="8267192">.</span><span class="op" id="8267193">(</span><span class="keyword" id="8267194">type</span><span class="op" id="8267198">)</span>&nbsp;<span class="op" id="8267200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267205">case</span>&nbsp;<span class="op" id="8267210">[</span><span class="op" id="8267211">]</span><span class="builtintype" id="8267212">byte</span><span class="op" id="8267216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267222"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267224">.</span><span class="ident" id="8267225">Req</span><span class="op" id="8267228">.</span><span class="ident" id="8267229">Body</span>&nbsp;<span class="op" id="8267234">=</span>&nbsp;<span class="ident" id="8267236"><a href="/net/http/httputil/dump_test.go.html#8264277">ioutil</a></span><span class="op" id="8267242">.</span><span class="ident" id="8267243">NopCloser</span><span class="op" id="8267252">(</span><span class="ident" id="8267253"><a href="/net/http/httputil/dump_test.go.html#8264255">bytes</a></span><span class="op" id="8267258">.</span><span class="ident" id="8267259">NewReader</span><span class="op" id="8267268">(</span><span class="ident" id="8267269"><a href="/net/http/httputil/dump_test.go.html#8267180">b</a></span><span class="op" id="8267270">)</span><span class="op" id="8267271">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267276">case</span>&nbsp;<span class="keyword" id="8267281">func</span><span class="op" id="8267285">(</span><span class="op" id="8267286">)</span>&nbsp;<span class="ident" id="8267288"><a href="/net/http/httputil/dump_test.go.html#8264271">io</a></span><span class="op" id="8267290">.</span><span class="ident" id="8267291">ReadCloser</span><span class="op" id="8267301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267307"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267309">.</span><span class="ident" id="8267310">Req</span><span class="op" id="8267313">.</span><span class="ident" id="8267314">Body</span>&nbsp;<span class="op" id="8267319">=</span>&nbsp;<span class="ident" id="8267321"><a href="/net/http/httputil/dump_test.go.html#8267180">b</a></span><span class="op" id="8267322">(</span><span class="op" id="8267323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267328">default</span><span class="op" id="8267335">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267341"><a href="/net/http/httputil/dump_test.go.html#8267028">t</a></span><span class="op" id="8267342">.</span><span class="ident" id="8267343">Fatalf</span><span class="op" id="8267349">(</span><span class="string" id="8267350">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="8267383">,</span>&nbsp;<span class="ident" id="8267385"><a href="/net/http/httputil/dump_test.go.html#8267082">i</a></span><span class="op" id="8267386">,</span>&nbsp;<span class="ident" id="8267388"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267390">.</span><span class="ident" id="8267391">Body</span><span class="op" id="8267395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267400">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267408"><a href="/net/http/httputil/dump_test.go.html#8267111">setBody</a></span><span class="op" id="8267415">(</span><span class="op" id="8267416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267420">if</span>&nbsp;<span class="ident" id="8267423"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267425">.</span><span class="ident" id="8267426">Req</span><span class="op" id="8267429">.</span><span class="ident" id="8267430">Header</span>&nbsp;<span class="op" id="8267437">==</span>&nbsp;<span class="ident" id="8267440">nil</span>&nbsp;<span class="op" id="8267444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267449"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267451">.</span><span class="ident" id="8267452">Req</span><span class="op" id="8267455">.</span><span class="ident" id="8267456">Header</span>&nbsp;<span class="op" id="8267463">=</span>&nbsp;<span class="builtinfunc" id="8267465">make</span><span class="op" id="8267469">(</span><span class="ident" id="8267470"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8267474">.</span><span class="ident" id="8267475">Header</span><span class="op" id="8267481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267485">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267490">if</span>&nbsp;<span class="ident" id="8267493"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267495">.</span><span class="ident" id="8267496">WantDump</span>&nbsp;<span class="op" id="8267505">!=</span>&nbsp;<span class="string" id="8267508">&#34;&#34;</span>&nbsp;<span class="op" id="8267511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267516"><a href="/net/http/httputil/dump_test.go.html#8267111">setBody</a></span><span class="op" id="8267523">(</span><span class="op" id="8267524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267529">dump</span><span class="op" id="8267533">,</span>&nbsp;<span class="ident" id="8267535">err</span>&nbsp;<span class="op" id="8267539">:=</span>&nbsp;<span class="ident" id="8267542"><a href="/net/http/httputil/dump.go.html#5522169">DumpRequest</a></span><span class="op" id="8267553">(</span><span class="op" id="8267554">&amp;</span><span class="ident" id="8267555"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267557">.</span><span class="ident" id="8267558">Req</span><span class="op" id="8267561">,</span>&nbsp;<span class="op" id="8267563">!</span><span class="ident" id="8267564"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267566">.</span><span class="ident" id="8267567">NoBody</span><span class="op" id="8267573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267578">if</span>&nbsp;<span class="ident" id="8267581"><a href="/net/http/httputil/dump_test.go.html#8267535">err</a></span>&nbsp;<span class="op" id="8267585">!=</span>&nbsp;<span class="ident" id="8267588">nil</span>&nbsp;<span class="op" id="8267592">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267598"><a href="/net/http/httputil/dump_test.go.html#8267028">t</a></span><span class="op" id="8267599">.</span><span class="ident" id="8267600">Errorf</span><span class="op" id="8267606">(</span><span class="string" id="8267607">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="8267628">,</span>&nbsp;<span class="ident" id="8267630"><a href="/net/http/httputil/dump_test.go.html#8267082">i</a></span><span class="op" id="8267631">,</span>&nbsp;<span class="ident" id="8267633"><a href="/net/http/httputil/dump_test.go.html#8267535">err</a></span><span class="op" id="8267636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267642">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267659">if</span>&nbsp;<span class="builtintype" id="8267662">string</span><span class="op" id="8267668">(</span><span class="ident" id="8267669"><a href="/net/http/httputil/dump_test.go.html#8267529">dump</a></span><span class="op" id="8267673">)</span>&nbsp;<span class="op" id="8267675">!=</span>&nbsp;<span class="ident" id="8267678"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267680">.</span><span class="ident" id="8267681">WantDump</span>&nbsp;<span class="op" id="8267690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267696"><a href="/net/http/httputil/dump_test.go.html#8267028">t</a></span><span class="op" id="8267697">.</span><span class="ident" id="8267698">Errorf</span><span class="op" id="8267704">(</span><span class="string" id="8267705">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="8267749">,</span>&nbsp;<span class="ident" id="8267751"><a href="/net/http/httputil/dump_test.go.html#8267082">i</a></span><span class="op" id="8267752">,</span>&nbsp;<span class="ident" id="8267754"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267756">.</span><span class="ident" id="8267757">WantDump</span><span class="op" id="8267765">,</span>&nbsp;<span class="builtintype" id="8267767">string</span><span class="op" id="8267773">(</span><span class="ident" id="8267774"><a href="/net/http/httputil/dump_test.go.html#8267529">dump</a></span><span class="op" id="8267778">)</span><span class="op" id="8267779">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267785">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267806">if</span>&nbsp;<span class="ident" id="8267809"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267811">.</span><span class="ident" id="8267812">WantDumpOut</span>&nbsp;<span class="op" id="8267824">!=</span>&nbsp;<span class="string" id="8267827">&#34;&#34;</span>&nbsp;<span class="op" id="8267830">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267835"><a href="/net/http/httputil/dump_test.go.html#8267111">setBody</a></span><span class="op" id="8267842">(</span><span class="op" id="8267843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267848">dump</span><span class="op" id="8267852">,</span>&nbsp;<span class="ident" id="8267854">err</span>&nbsp;<span class="op" id="8267858">:=</span>&nbsp;<span class="ident" id="8267861"><a href="/net/http/httputil/dump.go.html#5518626">DumpRequestOut</a></span><span class="op" id="8267875">(</span><span class="op" id="8267876">&amp;</span><span class="ident" id="8267877"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267879">.</span><span class="ident" id="8267880">Req</span><span class="op" id="8267883">,</span>&nbsp;<span class="op" id="8267885">!</span><span class="ident" id="8267886"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8267888">.</span><span class="ident" id="8267889">NoBody</span><span class="op" id="8267895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267900">if</span>&nbsp;<span class="ident" id="8267903"><a href="/net/http/httputil/dump_test.go.html#8267854">err</a></span>&nbsp;<span class="op" id="8267907">!=</span>&nbsp;<span class="ident" id="8267910">nil</span>&nbsp;<span class="op" id="8267914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267920"><a href="/net/http/httputil/dump_test.go.html#8267028">t</a></span><span class="op" id="8267921">.</span><span class="ident" id="8267922">Errorf</span><span class="op" id="8267928">(</span><span class="string" id="8267929">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="8267953">,</span>&nbsp;<span class="ident" id="8267955"><a href="/net/http/httputil/dump_test.go.html#8267082">i</a></span><span class="op" id="8267956">,</span>&nbsp;<span class="ident" id="8267958"><a href="/net/http/httputil/dump_test.go.html#8267854">err</a></span><span class="op" id="8267961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267967">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267984">if</span>&nbsp;<span class="builtintype" id="8267987">string</span><span class="op" id="8267993">(</span><span class="ident" id="8267994"><a href="/net/http/httputil/dump_test.go.html#8267848">dump</a></span><span class="op" id="8267998">)</span>&nbsp;<span class="op" id="8268000">!=</span>&nbsp;<span class="ident" id="8268003"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8268005">.</span><span class="ident" id="8268006">WantDumpOut</span>&nbsp;<span class="op" id="8268018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268024"><a href="/net/http/httputil/dump_test.go.html#8267028">t</a></span><span class="op" id="8268025">.</span><span class="ident" id="8268026">Errorf</span><span class="op" id="8268032">(</span><span class="string" id="8268033">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="8268080">,</span>&nbsp;<span class="ident" id="8268082"><a href="/net/http/httputil/dump_test.go.html#8267082">i</a></span><span class="op" id="8268083">,</span>&nbsp;<span class="ident" id="8268085"><a href="/net/http/httputil/dump_test.go.html#8267085">tt</a></span><span class="op" id="8268087">.</span><span class="ident" id="8268088">WantDumpOut</span><span class="op" id="8268099">,</span>&nbsp;<span class="builtintype" id="8268101">string</span><span class="op" id="8268107">(</span><span class="ident" id="8268108"><a href="/net/http/httputil/dump_test.go.html#8267848">dump</a></span><span class="op" id="8268112">)</span><span class="op" id="8268113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268119">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268131">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268141">if</span>&nbsp;<span class="ident" id="8268144">dg</span>&nbsp;<span class="op" id="8268147">:=</span>&nbsp;<span class="ident" id="8268150"><a href="/net/http/httputil/dump_test.go.html#8264313">runtime</a></span><span class="op" id="8268157">.</span><span class="ident" id="8268158">NumGoroutine</span><span class="op" id="8268170">(</span><span class="op" id="8268171">)</span>&nbsp;<span class="op" id="8268173">-</span>&nbsp;<span class="ident" id="8268175"><a href="/net/http/httputil/dump_test.go.html#8267045">numg0</a></span><span class="op" id="8268180">;</span>&nbsp;<span class="ident" id="8268182"><a href="/net/http/httputil/dump_test.go.html#8268144">dg</a></span>&nbsp;<span class="op" id="8268185">&gt;</span>&nbsp;<span class="num" id="8268187">4</span>&nbsp;<span class="op" id="8268189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268193">buf</span>&nbsp;<span class="op" id="8268197">:=</span>&nbsp;<span class="builtinfunc" id="8268200">make</span><span class="op" id="8268204">(</span><span class="op" id="8268205">[</span><span class="op" id="8268206">]</span><span class="builtintype" id="8268207">byte</span><span class="op" id="8268211">,</span>&nbsp;<span class="num" id="8268213">4096</span><span class="op" id="8268217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268221"><a href="/net/http/httputil/dump_test.go.html#8268193">buf</a></span>&nbsp;<span class="op" id="8268225">=</span>&nbsp;<span class="ident" id="8268227"><a href="/net/http/httputil/dump_test.go.html#8268193">buf</a></span><span class="op" id="8268230">[</span><span class="op" id="8268231">:</span><span class="ident" id="8268232"><a href="/net/http/httputil/dump_test.go.html#8264313">runtime</a></span><span class="op" id="8268239">.</span><span class="ident" id="8268240">Stack</span><span class="op" id="8268245">(</span><span class="ident" id="8268246"><a href="/net/http/httputil/dump_test.go.html#8268193">buf</a></span><span class="op" id="8268249">,</span>&nbsp;<span class="builtintype" id="8268251">true</span><span class="op" id="8268255">)</span><span class="op" id="8268256">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268260"><a href="/net/http/httputil/dump_test.go.html#8267028">t</a></span><span class="op" id="8268261">.</span><span class="ident" id="8268262">Errorf</span><span class="op" id="8268268">(</span><span class="string" id="8268269">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="8268326">,</span>&nbsp;<span class="ident" id="8268328"><a href="/net/http/httputil/dump_test.go.html#8268144">dg</a></span><span class="op" id="8268330">,</span>&nbsp;<span class="ident" id="8268332"><a href="/net/http/httputil/dump_test.go.html#8268193">buf</a></span><span class="op" id="8268335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268338">}</span><br>
<span class="lineno"></span><span class="op" id="8268340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268343">func</span>&nbsp;<span class="ident" id="8268348">chunk</span><span class="op" id="8268353">(</span><span class="ident" id="8268354">s</span>&nbsp;<span class="builtintype" id="8268356">string</span><span class="op" id="8268362">)</span>&nbsp;<span class="builtintype" id="8268364">string</span>&nbsp;<span class="op" id="8268371">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268374">return</span>&nbsp;<span class="ident" id="8268381"><a href="/net/http/httputil/dump_test.go.html#8264264">fmt</a></span><span class="op" id="8268384">.</span><span class="ident" id="8268385">Sprintf</span><span class="op" id="8268392">(</span><span class="string" id="8268393">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="8268407">,</span>&nbsp;<span class="builtinfunc" id="8268409">len</span><span class="op" id="8268412">(</span><span class="ident" id="8268413"><a href="/net/http/httputil/dump_test.go.html#8268354">s</a></span><span class="op" id="8268414">)</span><span class="op" id="8268415">,</span>&nbsp;<span class="ident" id="8268417"><a href="/net/http/httputil/dump_test.go.html#8268354">s</a></span><span class="op" id="8268418">)</span><br>
<span class="lineno"></span><span class="op" id="8268420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268423">func</span>&nbsp;<span class="ident" id="8268428">mustParseURL</span><span class="op" id="8268440">(</span><span class="ident" id="8268441">s</span>&nbsp;<span class="builtintype" id="8268443">string</span><span class="op" id="8268449">)</span>&nbsp;<span class="op" id="8268451">*</span><span class="ident" id="8268452"><a href="/net/http/httputil/dump_test.go.html#8264302">url</a></span><span class="op" id="8268455">.</span><span class="ident" id="8268456">URL</span>&nbsp;<span class="op" id="8268460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268463">u</span><span class="op" id="8268464">,</span>&nbsp;<span class="ident" id="8268466">err</span>&nbsp;<span class="op" id="8268470">:=</span>&nbsp;<span class="ident" id="8268473"><a href="/net/http/httputil/dump_test.go.html#8264302">url</a></span><span class="op" id="8268476">.</span><span class="ident" id="8268477">Parse</span><span class="op" id="8268482">(</span><span class="ident" id="8268483"><a href="/net/http/httputil/dump_test.go.html#8268441">s</a></span><span class="op" id="8268484">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268487">if</span>&nbsp;<span class="ident" id="8268490"><a href="/net/http/httputil/dump_test.go.html#8268466">err</a></span>&nbsp;<span class="op" id="8268494">!=</span>&nbsp;<span class="ident" id="8268497">nil</span>&nbsp;<span class="op" id="8268501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8268505">panic</span><span class="op" id="8268510">(</span><span class="ident" id="8268511"><a href="/net/http/httputil/dump_test.go.html#8264264">fmt</a></span><span class="op" id="8268514">.</span><span class="ident" id="8268515">Sprintf</span><span class="op" id="8268522">(</span><span class="string" id="8268523">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="8268549">,</span>&nbsp;<span class="ident" id="8268551"><a href="/net/http/httputil/dump_test.go.html#8268441">s</a></span><span class="op" id="8268552">,</span>&nbsp;<span class="ident" id="8268554"><a href="/net/http/httputil/dump_test.go.html#8268466">err</a></span><span class="op" id="8268557">)</span><span class="op" id="8268558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268564">return</span>&nbsp;<span class="ident" id="8268571"><a href="/net/http/httputil/dump_test.go.html#8268463">u</a></span><br>
<span class="lineno"></span><span class="op" id="8268573">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8268576">func</span>&nbsp;<span class="ident" id="8268581">mustNewRequest</span><span class="op" id="8268595">(</span><span class="ident" id="8268596">method</span><span class="op" id="8268602">,</span>&nbsp;<span class="ident" id="8268604">url</span>&nbsp;<span class="builtintype" id="8268608">string</span><span class="op" id="8268614">,</span>&nbsp;<span class="ident" id="8268616">body</span>&nbsp;<span class="ident" id="8268621"><a href="/net/http/httputil/dump_test.go.html#8264271">io</a></span><span class="op" id="8268623">.</span><span class="ident" id="8268624">Reader</span><span class="op" id="8268630">)</span>&nbsp;<span class="op" id="8268632">*</span><span class="ident" id="8268633"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8268637">.</span><span class="ident" id="8268638">Request</span>&nbsp;<span class="op" id="8268646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268649">req</span><span class="op" id="8268652">,</span>&nbsp;<span class="ident" id="8268654">err</span>&nbsp;<span class="op" id="8268658">:=</span>&nbsp;<span class="ident" id="8268661"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8268665">.</span><span class="ident" id="8268666">NewRequest</span><span class="op" id="8268676">(</span><span class="ident" id="8268677"><a href="/net/http/httputil/dump_test.go.html#8268596">method</a></span><span class="op" id="8268683">,</span>&nbsp;<span class="ident" id="8268685"><a href="/net/http/httputil/dump_test.go.html#8268604">url</a></span><span class="op" id="8268688">,</span>&nbsp;<span class="ident" id="8268690"><a href="/net/http/httputil/dump_test.go.html#8268616">body</a></span><span class="op" id="8268694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268697">if</span>&nbsp;<span class="ident" id="8268700"><a href="/net/http/httputil/dump_test.go.html#8268654">err</a></span>&nbsp;<span class="op" id="8268704">!=</span>&nbsp;<span class="ident" id="8268707">nil</span>&nbsp;<span class="op" id="8268711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8268715">panic</span><span class="op" id="8268720">(</span><span class="ident" id="8268721"><a href="/net/http/httputil/dump_test.go.html#8264264">fmt</a></span><span class="op" id="8268724">.</span><span class="ident" id="8268725">Sprintf</span><span class="op" id="8268732">(</span><span class="string" id="8268733">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="8268766">,</span>&nbsp;<span class="ident" id="8268768"><a href="/net/http/httputil/dump_test.go.html#8268596">method</a></span><span class="op" id="8268774">,</span>&nbsp;<span class="ident" id="8268776"><a href="/net/http/httputil/dump_test.go.html#8268604">url</a></span><span class="op" id="8268779">,</span>&nbsp;<span class="ident" id="8268781"><a href="/net/http/httputil/dump_test.go.html#8268616">body</a></span><span class="op" id="8268785">,</span>&nbsp;<span class="ident" id="8268787"><a href="/net/http/httputil/dump_test.go.html#8268654">err</a></span><span class="op" id="8268790">)</span><span class="op" id="8268791">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8268797">return</span>&nbsp;<span class="ident" id="8268804"><a href="/net/http/httputil/dump_test.go.html#8268649">req</a></span><br>
<span class="lineno"></span><span class="op" id="8268808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268811">var</span>&nbsp;<span class="ident" id="8268815">dumpResTests</span>&nbsp;<span class="op" id="8268828">=</span>&nbsp;<span class="op" id="8268830">[</span><span class="op" id="8268831">]</span><span class="keyword" id="8268832">struct</span>&nbsp;<span class="op" id="8268839">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268842">res</span>&nbsp;&nbsp;<span class="op" id="8268847">*</span><span class="ident" id="8268848"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8268852">.</span><span class="ident" id="8268853">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268863">body</span>&nbsp;<span class="builtintype" id="8268868">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268874">want</span>&nbsp;<span class="builtintype" id="8268879">string</span><br>
<span class="lineno"></span><span class="op" id="8268886">}</span><span class="op" id="8268887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8268890">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268894">res</span><span class="op" id="8268897">:</span>&nbsp;<span class="op" id="8268899">&amp;</span><span class="ident" id="8268900"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8268904">.</span><span class="ident" id="8268905">Response</span><span class="op" id="8268913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268918">Status</span><span class="op" id="8268924">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268933">&#34;200&nbsp;OK&#34;</span><span class="op" id="8268941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268946">StatusCode</span><span class="op" id="8268956">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8268961">200</span><span class="op" id="8268964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268969">Proto</span><span class="op" id="8268974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268984">&#34;HTTP/1.1&#34;</span><span class="op" id="8268994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8268999">ProtoMajor</span><span class="op" id="8269009">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269014">1</span><span class="op" id="8269015">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269020">ProtoMinor</span><span class="op" id="8269030">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269035">1</span><span class="op" id="8269036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269041">ContentLength</span><span class="op" id="8269054">:</span>&nbsp;<span class="num" id="8269056">50</span><span class="op" id="8269058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269063">Header</span><span class="op" id="8269069">:</span>&nbsp;<span class="ident" id="8269071"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8269075">.</span><span class="ident" id="8269076">Header</span><span class="op" id="8269082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8269088">&#34;Foo&#34;</span><span class="op" id="8269093">:</span>&nbsp;<span class="op" id="8269095">[</span><span class="op" id="8269096">]</span><span class="builtintype" id="8269097">string</span><span class="op" id="8269103">{</span><span class="string" id="8269104">&#34;Bar&#34;</span><span class="op" id="8269109">}</span><span class="op" id="8269110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269115">}</span><span class="op" id="8269116">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269121">Body</span><span class="op" id="8269125">:</span>&nbsp;<span class="ident" id="8269127"><a href="/net/http/httputil/dump_test.go.html#8264277">ioutil</a></span><span class="op" id="8269133">.</span><span class="ident" id="8269134">NopCloser</span><span class="op" id="8269143">(</span><span class="ident" id="8269144"><a href="/net/http/httputil/dump_test.go.html#8264324">strings</a></span><span class="op" id="8269151">.</span><span class="ident" id="8269152">NewReader</span><span class="op" id="8269161">(</span><span class="string" id="8269162">&#34;foo&#34;</span><span class="op" id="8269167">)</span><span class="op" id="8269168">)</span><span class="op" id="8269169">,</span>&nbsp;<span class="comment" id="8269171">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269194">}</span><span class="op" id="8269195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269199">body</span><span class="op" id="8269203">:</span>&nbsp;<span class="builtintype" id="8269205">false</span><span class="op" id="8269210">,</span>&nbsp;<span class="comment" id="8269212">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269254">want</span><span class="op" id="8269258">:</span>&nbsp;<span class="string" id="8269260">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="8269305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269308">}</span><span class="op" id="8269309">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269317">res</span><span class="op" id="8269320">:</span>&nbsp;<span class="op" id="8269322">&amp;</span><span class="ident" id="8269323"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8269327">.</span><span class="ident" id="8269328">Response</span><span class="op" id="8269336">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269341">Status</span><span class="op" id="8269347">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269356">&#34;200&nbsp;OK&#34;</span><span class="op" id="8269364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269369">StatusCode</span><span class="op" id="8269379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269384">200</span><span class="op" id="8269387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269392">Proto</span><span class="op" id="8269397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269407">&#34;HTTP/1.1&#34;</span><span class="op" id="8269417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269422">ProtoMajor</span><span class="op" id="8269432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269437">1</span><span class="op" id="8269438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269443">ProtoMinor</span><span class="op" id="8269453">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269458">1</span><span class="op" id="8269459">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269464">ContentLength</span><span class="op" id="8269477">:</span>&nbsp;<span class="num" id="8269479">3</span><span class="op" id="8269480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269485">Body</span><span class="op" id="8269489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269500"><a href="/net/http/httputil/dump_test.go.html#8264277">ioutil</a></span><span class="op" id="8269506">.</span><span class="ident" id="8269507">NopCloser</span><span class="op" id="8269516">(</span><span class="ident" id="8269517"><a href="/net/http/httputil/dump_test.go.html#8264324">strings</a></span><span class="op" id="8269524">.</span><span class="ident" id="8269525">NewReader</span><span class="op" id="8269534">(</span><span class="string" id="8269535">&#34;foo&#34;</span><span class="op" id="8269540">)</span><span class="op" id="8269541">)</span><span class="op" id="8269542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269546">}</span><span class="op" id="8269547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269551">body</span><span class="op" id="8269555">:</span>&nbsp;<span class="builtintype" id="8269557">true</span><span class="op" id="8269561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269565">want</span><span class="op" id="8269569">:</span>&nbsp;<span class="string" id="8269571">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="8269611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269614">}</span><span class="op" id="8269615">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269623">res</span><span class="op" id="8269626">:</span>&nbsp;<span class="op" id="8269628">&amp;</span><span class="ident" id="8269629"><a href="/net/http/httputil/dump_test.go.html#8264290">http</a></span><span class="op" id="8269633">.</span><span class="ident" id="8269634">Response</span><span class="op" id="8269642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269647">Status</span><span class="op" id="8269653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269665">&#34;200&nbsp;OK&#34;</span><span class="op" id="8269673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269678">StatusCode</span><span class="op" id="8269688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269696">200</span><span class="op" id="8269699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269704">Proto</span><span class="op" id="8269709">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269722">&#34;HTTP/1.1&#34;</span><span class="op" id="8269732">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269737">ProtoMajor</span><span class="op" id="8269747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269755">1</span><span class="op" id="8269756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269761">ProtoMinor</span><span class="op" id="8269771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269779">1</span><span class="op" id="8269780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269785">ContentLength</span><span class="op" id="8269798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269803">-</span><span class="num" id="8269804">1</span><span class="op" id="8269805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269810">Body</span><span class="op" id="8269814">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269828"><a href="/net/http/httputil/dump_test.go.html#8264277">ioutil</a></span><span class="op" id="8269834">.</span><span class="ident" id="8269835">NopCloser</span><span class="op" id="8269844">(</span><span class="ident" id="8269845"><a href="/net/http/httputil/dump_test.go.html#8264324">strings</a></span><span class="op" id="8269852">.</span><span class="ident" id="8269853">NewReader</span><span class="op" id="8269862">(</span><span class="string" id="8269863">&#34;foo&#34;</span><span class="op" id="8269868">)</span><span class="op" id="8269869">)</span><span class="op" id="8269870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269875">TransferEncoding</span><span class="op" id="8269891">:</span>&nbsp;<span class="op" id="8269893">[</span><span class="op" id="8269894">]</span><span class="builtintype" id="8269895">string</span><span class="op" id="8269901">{</span><span class="string" id="8269902">&#34;chunked&#34;</span><span class="op" id="8269911">}</span><span class="op" id="8269912">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269916">}</span><span class="op" id="8269917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269921">body</span><span class="op" id="8269925">:</span>&nbsp;<span class="builtintype" id="8269927">true</span><span class="op" id="8269931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8269935">want</span><span class="op" id="8269939">:</span>&nbsp;<span class="string" id="8269941">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="8269994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8269997">}</span><span class="op" id="8269998">,</span><br>
<span class="lineno"></span><span class="op" id="8270000">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="8270003">func</span>&nbsp;<span class="ident" id="8270008">TestDumpResponse</span><span class="op" id="8270024">(</span><span class="ident" id="8270025">t</span>&nbsp;<span class="op" id="8270027">*</span><span class="ident" id="8270028"><a href="/net/http/httputil/dump_test.go.html#8264335">testing</a></span><span class="op" id="8270035">.</span><span class="ident" id="8270036">T</span><span class="op" id="8270037">)</span>&nbsp;<span class="op" id="8270039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270042">for</span>&nbsp;<span class="ident" id="8270046">i</span><span class="op" id="8270047">,</span>&nbsp;<span class="ident" id="8270049">tt</span>&nbsp;<span class="op" id="8270052">:=</span>&nbsp;<span class="keyword" id="8270055">range</span>&nbsp;<span class="ident" id="8270061"><a href="/net/http/httputil/dump_test.go.html#8268815">dumpResTests</a></span>&nbsp;<span class="op" id="8270074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270078">gotb</span><span class="op" id="8270082">,</span>&nbsp;<span class="ident" id="8270084">err</span>&nbsp;<span class="op" id="8270088">:=</span>&nbsp;<span class="ident" id="8270091"><a href="/net/http/httputil/dump.go.html#5524080">DumpResponse</a></span><span class="op" id="8270103">(</span><span class="ident" id="8270104"><a href="/net/http/httputil/dump_test.go.html#8270049">tt</a></span><span class="op" id="8270106">.</span><span class="ident" id="8270107">res</span><span class="op" id="8270110">,</span>&nbsp;<span class="ident" id="8270112"><a href="/net/http/httputil/dump_test.go.html#8270049">tt</a></span><span class="op" id="8270114">.</span><span class="ident" id="8270115">body</span><span class="op" id="8270119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270123">if</span>&nbsp;<span class="ident" id="8270126"><a href="/net/http/httputil/dump_test.go.html#8270084">err</a></span>&nbsp;<span class="op" id="8270130">!=</span>&nbsp;<span class="ident" id="8270133">nil</span>&nbsp;<span class="op" id="8270137">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270142"><a href="/net/http/httputil/dump_test.go.html#8270025">t</a></span><span class="op" id="8270143">.</span><span class="ident" id="8270144">Errorf</span><span class="op" id="8270150">(</span><span class="string" id="8270151">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="8270174">,</span>&nbsp;<span class="ident" id="8270176"><a href="/net/http/httputil/dump_test.go.html#8270046">i</a></span><span class="op" id="8270177">,</span>&nbsp;<span class="ident" id="8270179"><a href="/net/http/httputil/dump_test.go.html#8270084">err</a></span><span class="op" id="8270182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270187">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270202">got</span>&nbsp;<span class="op" id="8270206">:=</span>&nbsp;<span class="builtintype" id="8270209">string</span><span class="op" id="8270215">(</span><span class="ident" id="8270216"><a href="/net/http/httputil/dump_test.go.html#8270078">gotb</a></span><span class="op" id="8270220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270224"><a href="/net/http/httputil/dump_test.go.html#8270202">got</a></span>&nbsp;<span class="op" id="8270228">=</span>&nbsp;<span class="ident" id="8270230"><a href="/net/http/httputil/dump_test.go.html#8264324">strings</a></span><span class="op" id="8270237">.</span><span class="ident" id="8270238">TrimSpace</span><span class="op" id="8270247">(</span><span class="ident" id="8270248"><a href="/net/http/httputil/dump_test.go.html#8270202">got</a></span><span class="op" id="8270251">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270255"><a href="/net/http/httputil/dump_test.go.html#8270202">got</a></span>&nbsp;<span class="op" id="8270259">=</span>&nbsp;<span class="ident" id="8270261"><a href="/net/http/httputil/dump_test.go.html#8264324">strings</a></span><span class="op" id="8270268">.</span><span class="ident" id="8270269">Replace</span><span class="op" id="8270276">(</span><span class="ident" id="8270277"><a href="/net/http/httputil/dump_test.go.html#8270202">got</a></span><span class="op" id="8270280">,</span>&nbsp;<span class="string" id="8270282">&#34;\r&#34;</span><span class="op" id="8270286">,</span>&nbsp;<span class="string" id="8270288">&#34;&#34;</span><span class="op" id="8270290">,</span>&nbsp;<span class="op" id="8270292">-</span><span class="num" id="8270293">1</span><span class="op" id="8270294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8270299">if</span>&nbsp;<span class="ident" id="8270302"><a href="/net/http/httputil/dump_test.go.html#8270202">got</a></span>&nbsp;<span class="op" id="8270306">!=</span>&nbsp;<span class="ident" id="8270309"><a href="/net/http/httputil/dump_test.go.html#8270049">tt</a></span><span class="op" id="8270311">.</span><span class="ident" id="8270312">want</span>&nbsp;<span class="op" id="8270317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8270322"><a href="/net/http/httputil/dump_test.go.html#8270025">t</a></span><span class="op" id="8270323">.</span><span class="ident" id="8270324">Errorf</span><span class="op" id="8270330">(</span><span class="string" id="8270331">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="8270374">,</span>&nbsp;<span class="ident" id="8270376"><a href="/net/http/httputil/dump_test.go.html#8270046">i</a></span><span class="op" id="8270377">,</span>&nbsp;<span class="ident" id="8270379"><a href="/net/http/httputil/dump_test.go.html#8270202">got</a></span><span class="op" id="8270382">,</span>&nbsp;<span class="ident" id="8270384"><a href="/net/http/httputil/dump_test.go.html#8270049">tt</a></span><span class="op" id="8270386">.</span><span class="ident" id="8270387">want</span><span class="op" id="8270391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270395">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8270398">}</span><br>
<span class="lineno"></span><span class="op" id="8270400">}</span>
</div>
</body>
</html>
