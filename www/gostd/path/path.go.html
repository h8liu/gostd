<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3707923">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3707978">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3708032">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3708083">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="3708160">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3708170">package</span>&nbsp;<span class="ident" id="3708178">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3708184">import</span>&nbsp;<span class="op" id="3708191">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3708194">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3708204">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3708207">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3708257">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="3708315">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3708381">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3708438">type</span>&nbsp;<span class="ident" id="3708443">lazybuf</span>&nbsp;<span class="keyword" id="3708451">struct</span>&nbsp;<span class="op" id="3708458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708461">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3708465">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708473">buf</span>&nbsp;<span class="op" id="3708477">[</span><span class="op" id="3708478">]</span><span class="builtintype" id="3708479">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708485">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3708489">int</span><br>
<span class="lineno"></span><span class="op" id="3708493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3708496">func</span>&nbsp;<span class="op" id="3708501">(</span><span class="ident" id="3708502">b</span>&nbsp;<span class="op" id="3708504">*</span><span class="ident" id="3708505">lazybuf</span><span class="op" id="3708512">)</span>&nbsp;<span class="ident" id="3708514">index</span><span class="op" id="3708519">(</span><span class="ident" id="3708520">i</span>&nbsp;<span class="builtintype" id="3708522">int</span><span class="op" id="3708525">)</span>&nbsp;<span class="builtintype" id="3708527">byte</span>&nbsp;<span class="op" id="3708532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708535">if</span>&nbsp;<span class="ident" id="3708538">b</span><span class="op" id="3708539">.</span><span class="ident" id="3708540">buf</span>&nbsp;<span class="op" id="3708544">!=</span>&nbsp;<span class="builtintype" id="3708547">nil</span>&nbsp;<span class="op" id="3708551">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708555">return</span>&nbsp;<span class="ident" id="3708562">b</span><span class="op" id="3708563">.</span><span class="ident" id="3708564">buf</span><span class="op" id="3708567">[</span><span class="ident" id="3708568">i</span><span class="op" id="3708569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3708572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708575">return</span>&nbsp;<span class="ident" id="3708582">b</span><span class="op" id="3708583">.</span><span class="ident" id="3708584">s</span><span class="op" id="3708585">[</span><span class="ident" id="3708586">i</span><span class="op" id="3708587">]</span><br>
<span class="lineno"></span><span class="op" id="3708589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3708592">func</span>&nbsp;<span class="op" id="3708597">(</span><span class="ident" id="3708598">b</span>&nbsp;<span class="op" id="3708600">*</span><span class="ident" id="3708601">lazybuf</span><span class="op" id="3708608">)</span>&nbsp;<span class="builtinfunc" id="3708610">append</span><span class="op" id="3708616">(</span><span class="ident" id="3708617">c</span>&nbsp;<span class="builtintype" id="3708619">byte</span><span class="op" id="3708623">)</span>&nbsp;<span class="op" id="3708625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708628">if</span>&nbsp;<span class="ident" id="3708631">b</span><span class="op" id="3708632">.</span><span class="ident" id="3708633">buf</span>&nbsp;<span class="op" id="3708637">==</span>&nbsp;<span class="builtintype" id="3708640">nil</span>&nbsp;<span class="op" id="3708644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708648">if</span>&nbsp;<span class="ident" id="3708651">b</span><span class="op" id="3708652">.</span><span class="ident" id="3708653">w</span>&nbsp;<span class="op" id="3708655">&lt;</span>&nbsp;<span class="builtinfunc" id="3708657">len</span><span class="op" id="3708660">(</span><span class="ident" id="3708661">b</span><span class="op" id="3708662">.</span><span class="ident" id="3708663">s</span><span class="op" id="3708664">)</span>&nbsp;<span class="op" id="3708666">&amp;&amp;</span>&nbsp;<span class="ident" id="3708669">b</span><span class="op" id="3708670">.</span><span class="ident" id="3708671">s</span><span class="op" id="3708672">[</span><span class="ident" id="3708673">b</span><span class="op" id="3708674">.</span><span class="ident" id="3708675">w</span><span class="op" id="3708676">]</span>&nbsp;<span class="op" id="3708678">==</span>&nbsp;<span class="ident" id="3708681">c</span>&nbsp;<span class="op" id="3708683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708688">b</span><span class="op" id="3708689">.</span><span class="ident" id="3708690">w</span><span class="op" id="3708691">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708697">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3708706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708710">b</span><span class="op" id="3708711">.</span><span class="ident" id="3708712">buf</span>&nbsp;<span class="op" id="3708716">=</span>&nbsp;<span class="builtinfunc" id="3708718">make</span><span class="op" id="3708722">(</span><span class="op" id="3708723">[</span><span class="op" id="3708724">]</span><span class="builtintype" id="3708725">byte</span><span class="op" id="3708729">,</span>&nbsp;<span class="builtinfunc" id="3708731">len</span><span class="op" id="3708734">(</span><span class="ident" id="3708735">b</span><span class="op" id="3708736">.</span><span class="ident" id="3708737">s</span><span class="op" id="3708738">)</span><span class="op" id="3708739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3708743">copy</span><span class="op" id="3708747">(</span><span class="ident" id="3708748">b</span><span class="op" id="3708749">.</span><span class="ident" id="3708750">buf</span><span class="op" id="3708753">,</span>&nbsp;<span class="ident" id="3708755">b</span><span class="op" id="3708756">.</span><span class="ident" id="3708757">s</span><span class="op" id="3708758">[</span><span class="op" id="3708759">:</span><span class="ident" id="3708760">b</span><span class="op" id="3708761">.</span><span class="ident" id="3708762">w</span><span class="op" id="3708763">]</span><span class="op" id="3708764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3708767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708770">b</span><span class="op" id="3708771">.</span><span class="ident" id="3708772">buf</span><span class="op" id="3708775">[</span><span class="ident" id="3708776">b</span><span class="op" id="3708777">.</span><span class="ident" id="3708778">w</span><span class="op" id="3708779">]</span>&nbsp;<span class="op" id="3708781">=</span>&nbsp;<span class="ident" id="3708783">c</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3708786">b</span><span class="op" id="3708787">.</span><span class="ident" id="3708788">w</span><span class="op" id="3708789">++</span><br>
<span class="lineno"></span><span class="op" id="3708792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3708795">func</span>&nbsp;<span class="op" id="3708800">(</span><span class="ident" id="3708801">b</span>&nbsp;<span class="op" id="3708803">*</span><span class="ident" id="3708804">lazybuf</span><span class="op" id="3708811">)</span>&nbsp;<span class="builtintype" id="3708813">string</span><span class="op" id="3708819">(</span><span class="op" id="3708820">)</span>&nbsp;<span class="builtintype" id="3708822">string</span>&nbsp;<span class="op" id="3708829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708832">if</span>&nbsp;<span class="ident" id="3708835">b</span><span class="op" id="3708836">.</span><span class="ident" id="3708837">buf</span>&nbsp;<span class="op" id="3708841">==</span>&nbsp;<span class="builtintype" id="3708844">nil</span>&nbsp;<span class="op" id="3708848">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708852">return</span>&nbsp;<span class="ident" id="3708859">b</span><span class="op" id="3708860">.</span><span class="ident" id="3708861">s</span><span class="op" id="3708862">[</span><span class="op" id="3708863">:</span><span class="ident" id="3708864">b</span><span class="op" id="3708865">.</span><span class="ident" id="3708866">w</span><span class="op" id="3708867">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3708870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3708873">return</span>&nbsp;<span class="builtintype" id="3708880">string</span><span class="op" id="3708886">(</span><span class="ident" id="3708887">b</span><span class="op" id="3708888">.</span><span class="ident" id="3708889">buf</span><span class="op" id="3708892">[</span><span class="op" id="3708893">:</span><span class="ident" id="3708894">b</span><span class="op" id="3708895">.</span><span class="ident" id="3708896">w</span><span class="op" id="3708897">]</span><span class="op" id="3708898">)</span><br>
<span class="lineno"></span><span class="op" id="3708900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3708903">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3708962">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3709027">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3709083">//</span><br>
<span class="lineno"></span><span class="comment" id="3709086">//&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="3709138">//&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3709204">//&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3709275">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3709329">//&nbsp;&nbsp;&nbsp;&nbsp;4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3709383">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="3709447">//</span><br>
<span class="lineno"></span><span class="comment" id="3709450">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3709515">//</span><br>
<span class="lineno"></span><span class="comment" id="3709518">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3709577">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="3709604">//</span><br>
<span class="lineno"></span><span class="comment" id="3709607">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3709663">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3709691">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3709743">func</span>&nbsp;<span class="ident" id="3709748">Clean</span><span class="op" id="3709753">(</span><span class="ident" id="3709754">path</span>&nbsp;<span class="builtintype" id="3709759">string</span><span class="op" id="3709765">)</span>&nbsp;<span class="builtintype" id="3709767">string</span>&nbsp;<span class="op" id="3709774">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3709777">if</span>&nbsp;<span class="ident" id="3709780">path</span>&nbsp;<span class="op" id="3709785">==</span>&nbsp;<span class="string" id="3709788">&#34;&#34;</span>&nbsp;<span class="op" id="3709791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3709795">return</span>&nbsp;<span class="string" id="3709802">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3709807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3709811">rooted</span>&nbsp;<span class="op" id="3709818">:=</span>&nbsp;<span class="ident" id="3709821">path</span><span class="op" id="3709825">[</span><span class="num" id="3709826">0</span><span class="op" id="3709827">]</span>&nbsp;<span class="op" id="3709829">==</span>&nbsp;<span class="string" id="3709832">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3709837">n</span>&nbsp;<span class="op" id="3709839">:=</span>&nbsp;<span class="builtinfunc" id="3709842">len</span><span class="op" id="3709845">(</span><span class="ident" id="3709846">path</span><span class="op" id="3709850">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3709854">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3709870">//&nbsp;&nbsp;&nbsp;&nbsp;reading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3709929">//&nbsp;&nbsp;&nbsp;&nbsp;writing&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3709983">//&nbsp;&nbsp;&nbsp;&nbsp;dotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710045">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710110">out</span>&nbsp;<span class="op" id="3710114">:=</span>&nbsp;<span class="ident" id="3710117">lazybuf</span><span class="op" id="3710124">{</span><span class="ident" id="3710125">s</span><span class="op" id="3710126">:</span>&nbsp;<span class="ident" id="3710128">path</span><span class="op" id="3710132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710135">r</span><span class="op" id="3710136">,</span>&nbsp;<span class="ident" id="3710138">dotdot</span>&nbsp;<span class="op" id="3710145">:=</span>&nbsp;<span class="num" id="3710148">0</span><span class="op" id="3710149">,</span>&nbsp;<span class="num" id="3710151">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710154">if</span>&nbsp;<span class="ident" id="3710157">rooted</span>&nbsp;<span class="op" id="3710164">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710168">out</span><span class="op" id="3710171">.</span><span class="builtinfunc" id="3710172">append</span><span class="op" id="3710178">(</span><span class="string" id="3710179">&#39;/&#39;</span><span class="op" id="3710182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710186">r</span><span class="op" id="3710187">,</span>&nbsp;<span class="ident" id="3710189">dotdot</span>&nbsp;<span class="op" id="3710196">=</span>&nbsp;<span class="num" id="3710198">1</span><span class="op" id="3710199">,</span>&nbsp;<span class="num" id="3710201">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3710204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710208">for</span>&nbsp;<span class="ident" id="3710212">r</span>&nbsp;<span class="op" id="3710214">&lt;</span>&nbsp;<span class="ident" id="3710216">n</span>&nbsp;<span class="op" id="3710218">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710222">switch</span>&nbsp;<span class="op" id="3710229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710233">case</span>&nbsp;<span class="ident" id="3710238">path</span><span class="op" id="3710242">[</span><span class="ident" id="3710243">r</span><span class="op" id="3710244">]</span>&nbsp;<span class="op" id="3710246">==</span>&nbsp;<span class="string" id="3710249">&#39;/&#39;</span><span class="op" id="3710252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710257">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710282">r</span><span class="op" id="3710283">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710288">case</span>&nbsp;<span class="ident" id="3710293">path</span><span class="op" id="3710297">[</span><span class="ident" id="3710298">r</span><span class="op" id="3710299">]</span>&nbsp;<span class="op" id="3710301">==</span>&nbsp;<span class="string" id="3710304">&#39;.&#39;</span>&nbsp;<span class="op" id="3710308">&amp;&amp;</span>&nbsp;<span class="op" id="3710311">(</span><span class="ident" id="3710312">r</span><span class="op" id="3710313">+</span><span class="num" id="3710314">1</span>&nbsp;<span class="op" id="3710316">==</span>&nbsp;<span class="ident" id="3710319">n</span>&nbsp;<span class="op" id="3710321">||</span>&nbsp;<span class="ident" id="3710324">path</span><span class="op" id="3710328">[</span><span class="ident" id="3710329">r</span><span class="op" id="3710330">+</span><span class="num" id="3710331">1</span><span class="op" id="3710332">]</span>&nbsp;<span class="op" id="3710334">==</span>&nbsp;<span class="string" id="3710337">&#39;/&#39;</span><span class="op" id="3710340">)</span><span class="op" id="3710341">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710346">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710362">r</span><span class="op" id="3710363">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710368">case</span>&nbsp;<span class="ident" id="3710373">path</span><span class="op" id="3710377">[</span><span class="ident" id="3710378">r</span><span class="op" id="3710379">]</span>&nbsp;<span class="op" id="3710381">==</span>&nbsp;<span class="string" id="3710384">&#39;.&#39;</span>&nbsp;<span class="op" id="3710388">&amp;&amp;</span>&nbsp;<span class="ident" id="3710391">path</span><span class="op" id="3710395">[</span><span class="ident" id="3710396">r</span><span class="op" id="3710397">+</span><span class="num" id="3710398">1</span><span class="op" id="3710399">]</span>&nbsp;<span class="op" id="3710401">==</span>&nbsp;<span class="string" id="3710404">&#39;.&#39;</span>&nbsp;<span class="op" id="3710408">&amp;&amp;</span>&nbsp;<span class="op" id="3710411">(</span><span class="ident" id="3710412">r</span><span class="op" id="3710413">+</span><span class="num" id="3710414">2</span>&nbsp;<span class="op" id="3710416">==</span>&nbsp;<span class="ident" id="3710419">n</span>&nbsp;<span class="op" id="3710421">||</span>&nbsp;<span class="ident" id="3710424">path</span><span class="op" id="3710428">[</span><span class="ident" id="3710429">r</span><span class="op" id="3710430">+</span><span class="num" id="3710431">2</span><span class="op" id="3710432">]</span>&nbsp;<span class="op" id="3710434">==</span>&nbsp;<span class="string" id="3710437">&#39;/&#39;</span><span class="op" id="3710440">)</span><span class="op" id="3710441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710446">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710481">r</span>&nbsp;<span class="op" id="3710483">+=</span>&nbsp;<span class="num" id="3710486">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710491">switch</span>&nbsp;<span class="op" id="3710498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710503">case</span>&nbsp;<span class="ident" id="3710508">out</span><span class="op" id="3710511">.</span><span class="ident" id="3710512">w</span>&nbsp;<span class="op" id="3710514">&gt;</span>&nbsp;<span class="ident" id="3710516">dotdot</span><span class="op" id="3710522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710528">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710549">out</span><span class="op" id="3710552">.</span><span class="ident" id="3710553">w</span><span class="op" id="3710554">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710561">for</span>&nbsp;<span class="ident" id="3710565">out</span><span class="op" id="3710568">.</span><span class="ident" id="3710569">w</span>&nbsp;<span class="op" id="3710571">&gt;</span>&nbsp;<span class="ident" id="3710573">dotdot</span>&nbsp;<span class="op" id="3710580">&amp;&amp;</span>&nbsp;<span class="ident" id="3710583">out</span><span class="op" id="3710586">.</span><span class="ident" id="3710587">index</span><span class="op" id="3710592">(</span><span class="ident" id="3710593">out</span><span class="op" id="3710596">.</span><span class="ident" id="3710597">w</span><span class="op" id="3710598">)</span>&nbsp;<span class="op" id="3710600">!=</span>&nbsp;<span class="string" id="3710603">&#39;/&#39;</span>&nbsp;<span class="op" id="3710607">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710614">out</span><span class="op" id="3710617">.</span><span class="ident" id="3710618">w</span><span class="op" id="3710619">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3710626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710631">case</span>&nbsp;<span class="op" id="3710636">!</span><span class="ident" id="3710637">rooted</span><span class="op" id="3710643">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710649">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710712">if</span>&nbsp;<span class="ident" id="3710715">out</span><span class="op" id="3710718">.</span><span class="ident" id="3710719">w</span>&nbsp;<span class="op" id="3710721">&gt;</span>&nbsp;<span class="num" id="3710723">0</span>&nbsp;<span class="op" id="3710725">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710732">out</span><span class="op" id="3710735">.</span><span class="builtinfunc" id="3710736">append</span><span class="op" id="3710742">(</span><span class="string" id="3710743">&#39;/&#39;</span><span class="op" id="3710746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3710752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710758">out</span><span class="op" id="3710761">.</span><span class="builtinfunc" id="3710762">append</span><span class="op" id="3710768">(</span><span class="string" id="3710769">&#39;.&#39;</span><span class="op" id="3710772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710778">out</span><span class="op" id="3710781">.</span><span class="builtinfunc" id="3710782">append</span><span class="op" id="3710788">(</span><span class="string" id="3710789">&#39;.&#39;</span><span class="op" id="3710792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710798">dotdot</span>&nbsp;<span class="op" id="3710805">=</span>&nbsp;<span class="ident" id="3710807">out</span><span class="op" id="3710810">.</span><span class="ident" id="3710811">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3710816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710820">default</span><span class="op" id="3710827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710832">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710857">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710883">if</span>&nbsp;<span class="ident" id="3710886">rooted</span>&nbsp;<span class="op" id="3710893">&amp;&amp;</span>&nbsp;<span class="ident" id="3710896">out</span><span class="op" id="3710899">.</span><span class="ident" id="3710900">w</span>&nbsp;<span class="op" id="3710902">!=</span>&nbsp;<span class="num" id="3710905">1</span>&nbsp;<span class="op" id="3710907">||</span>&nbsp;<span class="op" id="3710910">!</span><span class="ident" id="3710911">rooted</span>&nbsp;<span class="op" id="3710918">&amp;&amp;</span>&nbsp;<span class="ident" id="3710921">out</span><span class="op" id="3710924">.</span><span class="ident" id="3710925">w</span>&nbsp;<span class="op" id="3710927">!=</span>&nbsp;<span class="num" id="3710930">0</span>&nbsp;<span class="op" id="3710932">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3710938">out</span><span class="op" id="3710941">.</span><span class="builtinfunc" id="3710942">append</span><span class="op" id="3710948">(</span><span class="string" id="3710949">&#39;/&#39;</span><span class="op" id="3710952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3710957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3710962">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3710981">for</span>&nbsp;<span class="op" id="3710985">;</span>&nbsp;<span class="ident" id="3710987">r</span>&nbsp;<span class="op" id="3710989">&lt;</span>&nbsp;<span class="ident" id="3710991">n</span>&nbsp;<span class="op" id="3710993">&amp;&amp;</span>&nbsp;<span class="ident" id="3710996">path</span><span class="op" id="3711000">[</span><span class="ident" id="3711001">r</span><span class="op" id="3711002">]</span>&nbsp;<span class="op" id="3711004">!=</span>&nbsp;<span class="string" id="3711007">&#39;/&#39;</span><span class="op" id="3711010">;</span>&nbsp;<span class="ident" id="3711012">r</span><span class="op" id="3711013">++</span>&nbsp;<span class="op" id="3711016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3711022">out</span><span class="op" id="3711025">.</span><span class="builtinfunc" id="3711026">append</span><span class="op" id="3711032">(</span><span class="ident" id="3711033">path</span><span class="op" id="3711037">[</span><span class="ident" id="3711038">r</span><span class="op" id="3711039">]</span><span class="op" id="3711040">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3711045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3711049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3711052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3711056">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711087">if</span>&nbsp;<span class="ident" id="3711090">out</span><span class="op" id="3711093">.</span><span class="ident" id="3711094">w</span>&nbsp;<span class="op" id="3711096">==</span>&nbsp;<span class="num" id="3711099">0</span>&nbsp;<span class="op" id="3711101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711105">return</span>&nbsp;<span class="string" id="3711112">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3711117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711121">return</span>&nbsp;<span class="ident" id="3711128">out</span><span class="op" id="3711131">.</span><span class="builtintype" id="3711132">string</span><span class="op" id="3711138">(</span><span class="op" id="3711139">)</span><br>
<span class="lineno">135</span><span class="op" id="3711141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3711144">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="3711204">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3711263">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3711324">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3711345">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3711408">func</span>&nbsp;<span class="ident" id="3711413">Split</span><span class="op" id="3711418">(</span><span class="ident" id="3711419">path</span>&nbsp;<span class="builtintype" id="3711424">string</span><span class="op" id="3711430">)</span>&nbsp;<span class="op" id="3711432">(</span><span class="ident" id="3711433">dir</span><span class="op" id="3711436">,</span>&nbsp;<span class="ident" id="3711438">file</span>&nbsp;<span class="builtintype" id="3711443">string</span><span class="op" id="3711449">)</span>&nbsp;<span class="op" id="3711451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3711454">i</span>&nbsp;<span class="op" id="3711456">:=</span>&nbsp;<span class="ident" id="3711459">strings</span><span class="op" id="3711466">.</span><span class="ident" id="3711467">LastIndex</span><span class="op" id="3711476">(</span><span class="ident" id="3711477">path</span><span class="op" id="3711481">,</span>&nbsp;<span class="string" id="3711483">&#34;/&#34;</span><span class="op" id="3711486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711489">return</span>&nbsp;<span class="ident" id="3711496">path</span><span class="op" id="3711500">[</span><span class="op" id="3711501">:</span><span class="ident" id="3711502">i</span><span class="op" id="3711503">+</span><span class="num" id="3711504">1</span><span class="op" id="3711505">]</span><span class="op" id="3711506">,</span>&nbsp;<span class="ident" id="3711508">path</span><span class="op" id="3711512">[</span><span class="ident" id="3711513">i</span><span class="op" id="3711514">+</span><span class="num" id="3711515">1</span><span class="op" id="3711516">:</span><span class="op" id="3711517">]</span><br>
<span class="lineno">145</span><span class="op" id="3711519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3711522">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3711593">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="3711665">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="3711699">func</span>&nbsp;<span class="ident" id="3711704">Join</span><span class="op" id="3711708">(</span><span class="ident" id="3711709">elem</span>&nbsp;<span class="op" id="3711714">...</span><span class="builtintype" id="3711717">string</span><span class="op" id="3711723">)</span>&nbsp;<span class="builtintype" id="3711725">string</span>&nbsp;<span class="op" id="3711732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711735">for</span>&nbsp;<span class="ident" id="3711739">i</span><span class="op" id="3711740">,</span>&nbsp;<span class="ident" id="3711742">e</span>&nbsp;<span class="op" id="3711744">:=</span>&nbsp;<span class="keyword" id="3711747">range</span>&nbsp;<span class="ident" id="3711753">elem</span>&nbsp;<span class="op" id="3711758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711762">if</span>&nbsp;<span class="ident" id="3711765">e</span>&nbsp;<span class="op" id="3711767">!=</span>&nbsp;<span class="string" id="3711770">&#34;&#34;</span>&nbsp;<span class="op" id="3711773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711778">return</span>&nbsp;<span class="ident" id="3711785">Clean</span><span class="op" id="3711790">(</span><span class="ident" id="3711791">strings</span><span class="op" id="3711798">.</span><span class="ident" id="3711799">Join</span><span class="op" id="3711803">(</span><span class="ident" id="3711804">elem</span><span class="op" id="3711808">[</span><span class="ident" id="3711809">i</span><span class="op" id="3711810">:</span><span class="op" id="3711811">]</span><span class="op" id="3711812">,</span>&nbsp;<span class="string" id="3711814">&#34;/&#34;</span><span class="op" id="3711817">)</span><span class="op" id="3711818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3711822">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3711825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3711828">return</span>&nbsp;<span class="string" id="3711835">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3711838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3711841">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="3711894">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="3711952">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="3712001">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3712036">func</span>&nbsp;<span class="ident" id="3712041">Ext</span><span class="op" id="3712044">(</span><span class="ident" id="3712045">path</span>&nbsp;<span class="builtintype" id="3712050">string</span><span class="op" id="3712056">)</span>&nbsp;<span class="builtintype" id="3712058">string</span>&nbsp;<span class="op" id="3712065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712068">for</span>&nbsp;<span class="ident" id="3712072">i</span>&nbsp;<span class="op" id="3712074">:=</span>&nbsp;<span class="builtinfunc" id="3712077">len</span><span class="op" id="3712080">(</span><span class="ident" id="3712081">path</span><span class="op" id="3712085">)</span>&nbsp;<span class="op" id="3712087">-</span>&nbsp;<span class="num" id="3712089">1</span><span class="op" id="3712090">;</span>&nbsp;<span class="ident" id="3712092">i</span>&nbsp;<span class="op" id="3712094">&gt;=</span>&nbsp;<span class="num" id="3712097">0</span>&nbsp;<span class="op" id="3712099">&amp;&amp;</span>&nbsp;<span class="ident" id="3712102">path</span><span class="op" id="3712106">[</span><span class="ident" id="3712107">i</span><span class="op" id="3712108">]</span>&nbsp;<span class="op" id="3712110">!=</span>&nbsp;<span class="string" id="3712113">&#39;/&#39;</span><span class="op" id="3712116">;</span>&nbsp;<span class="ident" id="3712118">i</span><span class="op" id="3712119">--</span>&nbsp;<span class="op" id="3712122">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712126">if</span>&nbsp;<span class="ident" id="3712129">path</span><span class="op" id="3712133">[</span><span class="ident" id="3712134">i</span><span class="op" id="3712135">]</span>&nbsp;<span class="op" id="3712137">==</span>&nbsp;<span class="string" id="3712140">&#39;.&#39;</span>&nbsp;<span class="op" id="3712144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712149">return</span>&nbsp;<span class="ident" id="3712156">path</span><span class="op" id="3712160">[</span><span class="ident" id="3712161">i</span><span class="op" id="3712162">:</span><span class="op" id="3712163">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3712167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3712170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712173">return</span>&nbsp;<span class="string" id="3712180">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="3712183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3712186">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3712228">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="3712296">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="3712339">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3712402">func</span>&nbsp;<span class="ident" id="3712407">Base</span><span class="op" id="3712411">(</span><span class="ident" id="3712412">path</span>&nbsp;<span class="builtintype" id="3712417">string</span><span class="op" id="3712423">)</span>&nbsp;<span class="builtintype" id="3712425">string</span>&nbsp;<span class="op" id="3712432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712435">if</span>&nbsp;<span class="ident" id="3712438">path</span>&nbsp;<span class="op" id="3712443">==</span>&nbsp;<span class="string" id="3712446">&#34;&#34;</span>&nbsp;<span class="op" id="3712449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712453">return</span>&nbsp;<span class="string" id="3712460">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3712465">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3712468">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712496">for</span>&nbsp;<span class="builtinfunc" id="3712500">len</span><span class="op" id="3712503">(</span><span class="ident" id="3712504">path</span><span class="op" id="3712508">)</span>&nbsp;<span class="op" id="3712510">&gt;</span>&nbsp;<span class="num" id="3712512">0</span>&nbsp;<span class="op" id="3712514">&amp;&amp;</span>&nbsp;<span class="ident" id="3712517">path</span><span class="op" id="3712521">[</span><span class="builtinfunc" id="3712522">len</span><span class="op" id="3712525">(</span><span class="ident" id="3712526">path</span><span class="op" id="3712530">)</span><span class="op" id="3712531">-</span><span class="num" id="3712532">1</span><span class="op" id="3712533">]</span>&nbsp;<span class="op" id="3712535">==</span>&nbsp;<span class="string" id="3712538">&#39;/&#39;</span>&nbsp;<span class="op" id="3712542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3712546">path</span>&nbsp;<span class="op" id="3712551">=</span>&nbsp;<span class="ident" id="3712553">path</span><span class="op" id="3712557">[</span><span class="num" id="3712558">0</span>&nbsp;<span class="op" id="3712560">:</span>&nbsp;<span class="builtinfunc" id="3712562">len</span><span class="op" id="3712565">(</span><span class="ident" id="3712566">path</span><span class="op" id="3712570">)</span><span class="op" id="3712571">-</span><span class="num" id="3712572">1</span><span class="op" id="3712573">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3712576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3712579">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712605">if</span>&nbsp;<span class="ident" id="3712608">i</span>&nbsp;<span class="op" id="3712610">:=</span>&nbsp;<span class="ident" id="3712613">strings</span><span class="op" id="3712620">.</span><span class="ident" id="3712621">LastIndex</span><span class="op" id="3712630">(</span><span class="ident" id="3712631">path</span><span class="op" id="3712635">,</span>&nbsp;<span class="string" id="3712637">&#34;/&#34;</span><span class="op" id="3712640">)</span><span class="op" id="3712641">;</span>&nbsp;<span class="ident" id="3712643">i</span>&nbsp;<span class="op" id="3712645">&gt;=</span>&nbsp;<span class="num" id="3712648">0</span>&nbsp;<span class="op" id="3712650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3712654">path</span>&nbsp;<span class="op" id="3712659">=</span>&nbsp;<span class="ident" id="3712661">path</span><span class="op" id="3712665">[</span><span class="ident" id="3712666">i</span><span class="op" id="3712667">+</span><span class="num" id="3712668">1</span><span class="op" id="3712669">:</span><span class="op" id="3712670">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3712673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3712676">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712715">if</span>&nbsp;<span class="ident" id="3712718">path</span>&nbsp;<span class="op" id="3712723">==</span>&nbsp;<span class="string" id="3712726">&#34;&#34;</span>&nbsp;<span class="op" id="3712729">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712733">return</span>&nbsp;<span class="string" id="3712740">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3712745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712748">return</span>&nbsp;<span class="ident" id="3712755">path</span><br>
<span class="lineno"></span><span class="op" id="3712760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3712763">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3712810">func</span>&nbsp;<span class="ident" id="3712815">IsAbs</span><span class="op" id="3712820">(</span><span class="ident" id="3712821">path</span>&nbsp;<span class="builtintype" id="3712826">string</span><span class="op" id="3712832">)</span>&nbsp;<span class="builtintype" id="3712834">bool</span>&nbsp;<span class="op" id="3712839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3712842">return</span>&nbsp;<span class="builtinfunc" id="3712849">len</span><span class="op" id="3712852">(</span><span class="ident" id="3712853">path</span><span class="op" id="3712857">)</span>&nbsp;<span class="op" id="3712859">&gt;</span>&nbsp;<span class="num" id="3712861">0</span>&nbsp;<span class="op" id="3712863">&amp;&amp;</span>&nbsp;<span class="ident" id="3712866">path</span><span class="op" id="3712870">[</span><span class="num" id="3712871">0</span><span class="op" id="3712872">]</span>&nbsp;<span class="op" id="3712874">==</span>&nbsp;<span class="string" id="3712877">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="3712881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="3712884">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3712965">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3713047">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3713071">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3713113">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="3713190">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3713272">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="3713282">func</span>&nbsp;<span class="ident" id="3713287">Dir</span><span class="op" id="3713290">(</span><span class="ident" id="3713291">path</span>&nbsp;<span class="builtintype" id="3713296">string</span><span class="op" id="3713302">)</span>&nbsp;<span class="builtintype" id="3713304">string</span>&nbsp;<span class="op" id="3713311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3713314">dir</span><span class="op" id="3713317">,</span>&nbsp;<span class="ident" id="3713319">_</span>&nbsp;<span class="op" id="3713321">:=</span>&nbsp;<span class="ident" id="3713324">Split</span><span class="op" id="3713329">(</span><span class="ident" id="3713330">path</span><span class="op" id="3713334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3713337">return</span>&nbsp;<span class="ident" id="3713344">Clean</span><span class="op" id="3713349">(</span><span class="ident" id="3713350">dir</span><span class="op" id="3713353">)</span><br>
<span class="lineno">210</span><span class="op" id="3713355">}</span>
</div>
</body>
</html>
