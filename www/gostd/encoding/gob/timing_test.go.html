<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8097293">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8097348">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8097402">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8097453">package</span>&nbsp;<span class="ident" id="8097461">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8097466">import</span>&nbsp;<span class="op" id="8097473">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8097476">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8097485">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8097491">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8097497">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8097508">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8097518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8097521">type</span>&nbsp;<span class="ident" id="8097526">Bench</span>&nbsp;<span class="keyword" id="8097532">struct</span>&nbsp;<span class="op" id="8097539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097542">A</span>&nbsp;<span class="builtintype" id="8097544">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097549">B</span>&nbsp;<span class="builtintype" id="8097551">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097560">C</span>&nbsp;<span class="builtintype" id="8097562">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097570">D</span>&nbsp;<span class="op" id="8097572">[</span><span class="op" id="8097573">]</span><span class="builtintype" id="8097574">byte</span><br>
<span class="lineno">20</span><span class="op" id="8097579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8097582">func</span>&nbsp;<span class="ident" id="8097587">benchmarkEndToEnd</span><span class="op" id="8097604">(</span><span class="ident" id="8097605">b</span>&nbsp;<span class="op" id="8097607">*</span><span class="ident" id="8097608">testing</span><span class="op" id="8097615">.</span><span class="ident" id="8097616">B</span><span class="op" id="8097617">,</span>&nbsp;<span class="ident" id="8097619">ctor</span>&nbsp;<span class="keyword" id="8097624">func</span><span class="op" id="8097628">(</span><span class="op" id="8097629">)</span>&nbsp;<span class="keyword" id="8097631">interface</span><span class="op" id="8097640">{</span><span class="op" id="8097641">}</span><span class="op" id="8097642">,</span>&nbsp;<span class="ident" id="8097644">pipe</span>&nbsp;<span class="keyword" id="8097649">func</span><span class="op" id="8097653">(</span><span class="op" id="8097654">)</span>&nbsp;<span class="op" id="8097656">(</span><span class="ident" id="8097657">r</span>&nbsp;<span class="ident" id="8097659">io</span><span class="op" id="8097661">.</span><span class="ident" id="8097662">Reader</span><span class="op" id="8097668">,</span>&nbsp;<span class="ident" id="8097670">w</span>&nbsp;<span class="ident" id="8097672">io</span><span class="op" id="8097674">.</span><span class="ident" id="8097675">Writer</span><span class="op" id="8097681">,</span>&nbsp;<span class="ident" id="8097683">err</span>&nbsp;<span class="builtintype" id="8097687">error</span><span class="op" id="8097692">)</span><span class="op" id="8097693">)</span>&nbsp;<span class="op" id="8097695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097698">b</span><span class="op" id="8097699">.</span><span class="ident" id="8097700">RunParallel</span><span class="op" id="8097711">(</span><span class="keyword" id="8097712">func</span><span class="op" id="8097716">(</span><span class="ident" id="8097717">pb</span>&nbsp;<span class="op" id="8097720">*</span><span class="ident" id="8097721">testing</span><span class="op" id="8097728">.</span><span class="ident" id="8097729">PB</span><span class="op" id="8097731">)</span>&nbsp;<span class="op" id="8097733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097737">r</span><span class="op" id="8097738">,</span>&nbsp;<span class="ident" id="8097740">w</span><span class="op" id="8097741">,</span>&nbsp;<span class="ident" id="8097743">err</span>&nbsp;<span class="op" id="8097747">:=</span>&nbsp;<span class="ident" id="8097750">pipe</span><span class="op" id="8097754">(</span><span class="op" id="8097755">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097759">if</span>&nbsp;<span class="ident" id="8097762">err</span>&nbsp;<span class="op" id="8097766">!=</span>&nbsp;<span class="ident" id="8097769">nil</span>&nbsp;<span class="op" id="8097773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097778">b</span><span class="op" id="8097779">.</span><span class="ident" id="8097780">Fatal</span><span class="op" id="8097785">(</span><span class="string" id="8097786">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="8097803">,</span>&nbsp;<span class="ident" id="8097805">err</span><span class="op" id="8097808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097816">v</span>&nbsp;<span class="op" id="8097818">:=</span>&nbsp;<span class="ident" id="8097821">ctor</span><span class="op" id="8097825">(</span><span class="op" id="8097826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097830">enc</span>&nbsp;<span class="op" id="8097834">:=</span>&nbsp;<span class="ident" id="8097837">NewEncoder</span><span class="op" id="8097847">(</span><span class="ident" id="8097848">w</span><span class="op" id="8097849">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097853">dec</span>&nbsp;<span class="op" id="8097857">:=</span>&nbsp;<span class="ident" id="8097860">NewDecoder</span><span class="op" id="8097870">(</span><span class="ident" id="8097871">r</span><span class="op" id="8097872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097876">for</span>&nbsp;<span class="ident" id="8097880">pb</span><span class="op" id="8097882">.</span><span class="ident" id="8097883">Next</span><span class="op" id="8097887">(</span><span class="op" id="8097888">)</span>&nbsp;<span class="op" id="8097890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097895">if</span>&nbsp;<span class="ident" id="8097898">err</span>&nbsp;<span class="op" id="8097902">:=</span>&nbsp;<span class="ident" id="8097905">enc</span><span class="op" id="8097908">.</span><span class="ident" id="8097909">Encode</span><span class="op" id="8097915">(</span><span class="ident" id="8097916">v</span><span class="op" id="8097917">)</span><span class="op" id="8097918">;</span>&nbsp;<span class="ident" id="8097920">err</span>&nbsp;<span class="op" id="8097924">!=</span>&nbsp;<span class="ident" id="8097927">nil</span>&nbsp;<span class="op" id="8097931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097937">b</span><span class="op" id="8097938">.</span><span class="ident" id="8097939">Fatal</span><span class="op" id="8097944">(</span><span class="string" id="8097945">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8097960">,</span>&nbsp;<span class="ident" id="8097962">err</span><span class="op" id="8097965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097970">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097975">if</span>&nbsp;<span class="ident" id="8097978">err</span>&nbsp;<span class="op" id="8097982">:=</span>&nbsp;<span class="ident" id="8097985">dec</span><span class="op" id="8097988">.</span><span class="ident" id="8097989">Decode</span><span class="op" id="8097995">(</span><span class="ident" id="8097996">v</span><span class="op" id="8097997">)</span><span class="op" id="8097998">;</span>&nbsp;<span class="ident" id="8098000">err</span>&nbsp;<span class="op" id="8098004">!=</span>&nbsp;<span class="ident" id="8098007">nil</span>&nbsp;<span class="op" id="8098011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098017">b</span><span class="op" id="8098018">.</span><span class="ident" id="8098019">Fatal</span><span class="op" id="8098024">(</span><span class="string" id="8098025">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8098040">,</span>&nbsp;<span class="ident" id="8098042">err</span><span class="op" id="8098045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098057">}</span><span class="op" id="8098058">)</span><br>
<span class="lineno">40</span><span class="op" id="8098060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8098063">func</span>&nbsp;<span class="ident" id="8098068">BenchmarkEndToEndPipe</span><span class="op" id="8098089">(</span><span class="ident" id="8098090">b</span>&nbsp;<span class="op" id="8098092">*</span><span class="ident" id="8098093">testing</span><span class="op" id="8098100">.</span><span class="ident" id="8098101">B</span><span class="op" id="8098102">)</span>&nbsp;<span class="op" id="8098104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098107">benchmarkEndToEnd</span><span class="op" id="8098124">(</span><span class="ident" id="8098125">b</span><span class="op" id="8098126">,</span>&nbsp;<span class="keyword" id="8098128">func</span><span class="op" id="8098132">(</span><span class="op" id="8098133">)</span>&nbsp;<span class="keyword" id="8098135">interface</span><span class="op" id="8098144">{</span><span class="op" id="8098145">}</span>&nbsp;<span class="op" id="8098147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098151">return</span>&nbsp;<span class="op" id="8098158">&amp;</span><span class="ident" id="8098159">Bench</span><span class="op" id="8098164">{</span><span class="num" id="8098165">7</span><span class="op" id="8098166">,</span>&nbsp;<span class="num" id="8098168">3.2</span><span class="op" id="8098171">,</span>&nbsp;<span class="string" id="8098173">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8098190">,</span>&nbsp;<span class="ident" id="8098192">bytes</span><span class="op" id="8098197">.</span><span class="ident" id="8098198">Repeat</span><span class="op" id="8098204">(</span><span class="op" id="8098205">[</span><span class="op" id="8098206">]</span><span class="builtintype" id="8098207">byte</span><span class="op" id="8098211">(</span><span class="string" id="8098212">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8098230">)</span><span class="op" id="8098231">,</span>&nbsp;<span class="num" id="8098233">100</span><span class="op" id="8098236">)</span><span class="op" id="8098237">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098240">}</span><span class="op" id="8098241">,</span>&nbsp;<span class="keyword" id="8098243">func</span><span class="op" id="8098247">(</span><span class="op" id="8098248">)</span>&nbsp;<span class="op" id="8098250">(</span><span class="ident" id="8098251">r</span>&nbsp;<span class="ident" id="8098253">io</span><span class="op" id="8098255">.</span><span class="ident" id="8098256">Reader</span><span class="op" id="8098262">,</span>&nbsp;<span class="ident" id="8098264">w</span>&nbsp;<span class="ident" id="8098266">io</span><span class="op" id="8098268">.</span><span class="ident" id="8098269">Writer</span><span class="op" id="8098275">,</span>&nbsp;<span class="ident" id="8098277">err</span>&nbsp;<span class="builtintype" id="8098281">error</span><span class="op" id="8098286">)</span>&nbsp;<span class="op" id="8098288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098292">r</span><span class="op" id="8098293">,</span>&nbsp;<span class="ident" id="8098295">w</span><span class="op" id="8098296">,</span>&nbsp;<span class="ident" id="8098298">err</span>&nbsp;<span class="op" id="8098302">=</span>&nbsp;<span class="ident" id="8098304">os</span><span class="op" id="8098306">.</span><span class="ident" id="8098307">Pipe</span><span class="op" id="8098311">(</span><span class="op" id="8098312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098316">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098324">}</span><span class="op" id="8098325">)</span><br>
<span class="lineno"></span><span class="op" id="8098327">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8098330">func</span>&nbsp;<span class="ident" id="8098335">BenchmarkEndToEndByteBuffer</span><span class="op" id="8098362">(</span><span class="ident" id="8098363">b</span>&nbsp;<span class="op" id="8098365">*</span><span class="ident" id="8098366">testing</span><span class="op" id="8098373">.</span><span class="ident" id="8098374">B</span><span class="op" id="8098375">)</span>&nbsp;<span class="op" id="8098377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098380">benchmarkEndToEnd</span><span class="op" id="8098397">(</span><span class="ident" id="8098398">b</span><span class="op" id="8098399">,</span>&nbsp;<span class="keyword" id="8098401">func</span><span class="op" id="8098405">(</span><span class="op" id="8098406">)</span>&nbsp;<span class="keyword" id="8098408">interface</span><span class="op" id="8098417">{</span><span class="op" id="8098418">}</span>&nbsp;<span class="op" id="8098420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098424">return</span>&nbsp;<span class="op" id="8098431">&amp;</span><span class="ident" id="8098432">Bench</span><span class="op" id="8098437">{</span><span class="num" id="8098438">7</span><span class="op" id="8098439">,</span>&nbsp;<span class="num" id="8098441">3.2</span><span class="op" id="8098444">,</span>&nbsp;<span class="string" id="8098446">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8098463">,</span>&nbsp;<span class="ident" id="8098465">bytes</span><span class="op" id="8098470">.</span><span class="ident" id="8098471">Repeat</span><span class="op" id="8098477">(</span><span class="op" id="8098478">[</span><span class="op" id="8098479">]</span><span class="builtintype" id="8098480">byte</span><span class="op" id="8098484">(</span><span class="string" id="8098485">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8098503">)</span><span class="op" id="8098504">,</span>&nbsp;<span class="num" id="8098506">100</span><span class="op" id="8098509">)</span><span class="op" id="8098510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098513">}</span><span class="op" id="8098514">,</span>&nbsp;<span class="keyword" id="8098516">func</span><span class="op" id="8098520">(</span><span class="op" id="8098521">)</span>&nbsp;<span class="op" id="8098523">(</span><span class="ident" id="8098524">r</span>&nbsp;<span class="ident" id="8098526">io</span><span class="op" id="8098528">.</span><span class="ident" id="8098529">Reader</span><span class="op" id="8098535">,</span>&nbsp;<span class="ident" id="8098537">w</span>&nbsp;<span class="ident" id="8098539">io</span><span class="op" id="8098541">.</span><span class="ident" id="8098542">Writer</span><span class="op" id="8098548">,</span>&nbsp;<span class="ident" id="8098550">err</span>&nbsp;<span class="builtintype" id="8098554">error</span><span class="op" id="8098559">)</span>&nbsp;<span class="op" id="8098561">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098565">var</span>&nbsp;<span class="ident" id="8098569">buf</span>&nbsp;<span class="ident" id="8098573">bytes</span><span class="op" id="8098578">.</span><span class="ident" id="8098579">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098588">return</span>&nbsp;<span class="op" id="8098595">&amp;</span><span class="ident" id="8098596">buf</span><span class="op" id="8098599">,</span>&nbsp;<span class="op" id="8098601">&amp;</span><span class="ident" id="8098602">buf</span><span class="op" id="8098605">,</span>&nbsp;<span class="ident" id="8098607">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098612">}</span><span class="op" id="8098613">)</span><br>
<span class="lineno"></span><span class="op" id="8098615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8098618">func</span>&nbsp;<span class="ident" id="8098623">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="8098655">(</span><span class="ident" id="8098656">b</span>&nbsp;<span class="op" id="8098658">*</span><span class="ident" id="8098659">testing</span><span class="op" id="8098666">.</span><span class="ident" id="8098667">B</span><span class="op" id="8098668">)</span>&nbsp;<span class="op" id="8098670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098673">benchmarkEndToEnd</span><span class="op" id="8098690">(</span><span class="ident" id="8098691">b</span><span class="op" id="8098692">,</span>&nbsp;<span class="keyword" id="8098694">func</span><span class="op" id="8098698">(</span><span class="op" id="8098699">)</span>&nbsp;<span class="keyword" id="8098701">interface</span><span class="op" id="8098710">{</span><span class="op" id="8098711">}</span>&nbsp;<span class="op" id="8098713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098717">v</span>&nbsp;<span class="op" id="8098719">:=</span>&nbsp;<span class="op" id="8098722">&amp;</span><span class="ident" id="8098723">Bench</span><span class="op" id="8098728">{</span><span class="num" id="8098729">7</span><span class="op" id="8098730">,</span>&nbsp;<span class="num" id="8098732">3.2</span><span class="op" id="8098735">,</span>&nbsp;<span class="string" id="8098737">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8098754">,</span>&nbsp;<span class="ident" id="8098756">nil</span><span class="op" id="8098759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098763">Register</span><span class="op" id="8098771">(</span><span class="ident" id="8098772">v</span><span class="op" id="8098773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098777">arr</span>&nbsp;<span class="op" id="8098781">:=</span>&nbsp;<span class="builtinfunc" id="8098784">make</span><span class="op" id="8098788">(</span><span class="op" id="8098789">[</span><span class="op" id="8098790">]</span><span class="keyword" id="8098791">interface</span><span class="op" id="8098800">{</span><span class="op" id="8098801">}</span><span class="op" id="8098802">,</span>&nbsp;<span class="num" id="8098804">100</span><span class="op" id="8098807">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098811">for</span>&nbsp;<span class="ident" id="8098815">i</span>&nbsp;<span class="op" id="8098817">:=</span>&nbsp;<span class="keyword" id="8098820">range</span>&nbsp;<span class="ident" id="8098826">arr</span>&nbsp;<span class="op" id="8098830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098835">arr</span><span class="op" id="8098838">[</span><span class="ident" id="8098839">i</span><span class="op" id="8098840">]</span>&nbsp;<span class="op" id="8098842">=</span>&nbsp;<span class="ident" id="8098844">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098852">return</span>&nbsp;<span class="op" id="8098859">&amp;</span><span class="ident" id="8098860">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098865">}</span><span class="op" id="8098866">,</span>&nbsp;<span class="keyword" id="8098868">func</span><span class="op" id="8098872">(</span><span class="op" id="8098873">)</span>&nbsp;<span class="op" id="8098875">(</span><span class="ident" id="8098876">r</span>&nbsp;<span class="ident" id="8098878">io</span><span class="op" id="8098880">.</span><span class="ident" id="8098881">Reader</span><span class="op" id="8098887">,</span>&nbsp;<span class="ident" id="8098889">w</span>&nbsp;<span class="ident" id="8098891">io</span><span class="op" id="8098893">.</span><span class="ident" id="8098894">Writer</span><span class="op" id="8098900">,</span>&nbsp;<span class="ident" id="8098902">err</span>&nbsp;<span class="builtintype" id="8098906">error</span><span class="op" id="8098911">)</span>&nbsp;<span class="op" id="8098913">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098917">var</span>&nbsp;<span class="ident" id="8098921">buf</span>&nbsp;<span class="ident" id="8098925">bytes</span><span class="op" id="8098930">.</span><span class="ident" id="8098931">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098940">return</span>&nbsp;<span class="op" id="8098947">&amp;</span><span class="ident" id="8098948">buf</span><span class="op" id="8098951">,</span>&nbsp;<span class="op" id="8098953">&amp;</span><span class="ident" id="8098954">buf</span><span class="op" id="8098957">,</span>&nbsp;<span class="ident" id="8098959">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098964">}</span><span class="op" id="8098965">)</span><br>
<span class="lineno"></span><span class="op" id="8098967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8098970">func</span>&nbsp;<span class="ident" id="8098975">TestCountEncodeMallocs</span><span class="op" id="8098997">(</span><span class="ident" id="8098998">t</span>&nbsp;<span class="op" id="8099000">*</span><span class="ident" id="8099001">testing</span><span class="op" id="8099008">.</span><span class="ident" id="8099009">T</span><span class="op" id="8099010">)</span>&nbsp;<span class="op" id="8099012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099015">if</span>&nbsp;<span class="ident" id="8099018">testing</span><span class="op" id="8099025">.</span><span class="ident" id="8099026">Short</span><span class="op" id="8099031">(</span><span class="op" id="8099032">)</span>&nbsp;<span class="op" id="8099034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099038">t</span><span class="op" id="8099039">.</span><span class="ident" id="8099040">Skip</span><span class="op" id="8099044">(</span><span class="string" id="8099045">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8099082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099088">if</span>&nbsp;<span class="ident" id="8099091">runtime</span><span class="op" id="8099098">.</span><span class="ident" id="8099099">GOMAXPROCS</span><span class="op" id="8099109">(</span><span class="num" id="8099110">0</span><span class="op" id="8099111">)</span>&nbsp;<span class="op" id="8099113">&gt;</span>&nbsp;<span class="num" id="8099115">1</span>&nbsp;<span class="op" id="8099117">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099121">t</span><span class="op" id="8099122">.</span><span class="ident" id="8099123">Skip</span><span class="op" id="8099127">(</span><span class="string" id="8099128">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8099152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099159">const</span>&nbsp;<span class="ident" id="8099165">N</span>&nbsp;<span class="op" id="8099167">=</span>&nbsp;<span class="num" id="8099169">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099176">var</span>&nbsp;<span class="ident" id="8099180">buf</span>&nbsp;<span class="ident" id="8099184">bytes</span><span class="op" id="8099189">.</span><span class="ident" id="8099190">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099198">enc</span>&nbsp;<span class="op" id="8099202">:=</span>&nbsp;<span class="ident" id="8099205">NewEncoder</span><span class="op" id="8099215">(</span><span class="op" id="8099216">&amp;</span><span class="ident" id="8099217">buf</span><span class="op" id="8099220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099223">bench</span>&nbsp;<span class="op" id="8099229">:=</span>&nbsp;<span class="op" id="8099232">&amp;</span><span class="ident" id="8099233">Bench</span><span class="op" id="8099238">{</span><span class="num" id="8099239">7</span><span class="op" id="8099240">,</span>&nbsp;<span class="num" id="8099242">3.2</span><span class="op" id="8099245">,</span>&nbsp;<span class="string" id="8099247">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8099264">,</span>&nbsp;<span class="op" id="8099266">[</span><span class="op" id="8099267">]</span><span class="builtintype" id="8099268">byte</span><span class="op" id="8099272">(</span><span class="string" id="8099273">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8099291">)</span><span class="op" id="8099292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099296">allocs</span>&nbsp;<span class="op" id="8099303">:=</span>&nbsp;<span class="ident" id="8099306">testing</span><span class="op" id="8099313">.</span><span class="ident" id="8099314">AllocsPerRun</span><span class="op" id="8099326">(</span><span class="ident" id="8099327">N</span><span class="op" id="8099328">,</span>&nbsp;<span class="keyword" id="8099330">func</span><span class="op" id="8099334">(</span><span class="op" id="8099335">)</span>&nbsp;<span class="op" id="8099337">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099341">err</span>&nbsp;<span class="op" id="8099345">:=</span>&nbsp;<span class="ident" id="8099348">enc</span><span class="op" id="8099351">.</span><span class="ident" id="8099352">Encode</span><span class="op" id="8099358">(</span><span class="ident" id="8099359">bench</span><span class="op" id="8099364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099368">if</span>&nbsp;<span class="ident" id="8099371">err</span>&nbsp;<span class="op" id="8099375">!=</span>&nbsp;<span class="ident" id="8099378">nil</span>&nbsp;<span class="op" id="8099382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099387">t</span><span class="op" id="8099388">.</span><span class="ident" id="8099389">Fatal</span><span class="op" id="8099394">(</span><span class="string" id="8099395">&#34;encode:&#34;</span><span class="op" id="8099404">,</span>&nbsp;<span class="ident" id="8099406">err</span><span class="op" id="8099409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099416">}</span><span class="op" id="8099417">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099420">if</span>&nbsp;<span class="ident" id="8099423">allocs</span>&nbsp;<span class="op" id="8099430">!=</span>&nbsp;<span class="num" id="8099433">0</span>&nbsp;<span class="op" id="8099435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099439">t</span><span class="op" id="8099440">.</span><span class="ident" id="8099441">Fatalf</span><span class="op" id="8099447">(</span><span class="string" id="8099448">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="8099498">,</span>&nbsp;<span class="ident" id="8099500">allocs</span><span class="op" id="8099506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099509">}</span><br>
<span class="lineno"></span><span class="op" id="8099511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="8099514">func</span>&nbsp;<span class="ident" id="8099519">TestCountDecodeMallocs</span><span class="op" id="8099541">(</span><span class="ident" id="8099542">t</span>&nbsp;<span class="op" id="8099544">*</span><span class="ident" id="8099545">testing</span><span class="op" id="8099552">.</span><span class="ident" id="8099553">T</span><span class="op" id="8099554">)</span>&nbsp;<span class="op" id="8099556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099559">if</span>&nbsp;<span class="ident" id="8099562">testing</span><span class="op" id="8099569">.</span><span class="ident" id="8099570">Short</span><span class="op" id="8099575">(</span><span class="op" id="8099576">)</span>&nbsp;<span class="op" id="8099578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099582">t</span><span class="op" id="8099583">.</span><span class="ident" id="8099584">Skip</span><span class="op" id="8099588">(</span><span class="string" id="8099589">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8099626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099632">if</span>&nbsp;<span class="ident" id="8099635">runtime</span><span class="op" id="8099642">.</span><span class="ident" id="8099643">GOMAXPROCS</span><span class="op" id="8099653">(</span><span class="num" id="8099654">0</span><span class="op" id="8099655">)</span>&nbsp;<span class="op" id="8099657">&gt;</span>&nbsp;<span class="num" id="8099659">1</span>&nbsp;<span class="op" id="8099661">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099665">t</span><span class="op" id="8099666">.</span><span class="ident" id="8099667">Skip</span><span class="op" id="8099671">(</span><span class="string" id="8099672">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8099696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099703">const</span>&nbsp;<span class="ident" id="8099709">N</span>&nbsp;<span class="op" id="8099711">=</span>&nbsp;<span class="num" id="8099713">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099720">var</span>&nbsp;<span class="ident" id="8099724">buf</span>&nbsp;<span class="ident" id="8099728">bytes</span><span class="op" id="8099733">.</span><span class="ident" id="8099734">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099742">enc</span>&nbsp;<span class="op" id="8099746">:=</span>&nbsp;<span class="ident" id="8099749">NewEncoder</span><span class="op" id="8099759">(</span><span class="op" id="8099760">&amp;</span><span class="ident" id="8099761">buf</span><span class="op" id="8099764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099767">bench</span>&nbsp;<span class="op" id="8099773">:=</span>&nbsp;<span class="op" id="8099776">&amp;</span><span class="ident" id="8099777">Bench</span><span class="op" id="8099782">{</span><span class="num" id="8099783">7</span><span class="op" id="8099784">,</span>&nbsp;<span class="num" id="8099786">3.2</span><span class="op" id="8099789">,</span>&nbsp;<span class="string" id="8099791">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8099808">,</span>&nbsp;<span class="op" id="8099810">[</span><span class="op" id="8099811">]</span><span class="builtintype" id="8099812">byte</span><span class="op" id="8099816">(</span><span class="string" id="8099817">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8099835">)</span><span class="op" id="8099836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099840">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099882">testing</span><span class="op" id="8099889">.</span><span class="ident" id="8099890">AllocsPerRun</span><span class="op" id="8099902">(</span><span class="ident" id="8099903">N</span><span class="op" id="8099904">,</span>&nbsp;<span class="keyword" id="8099906">func</span><span class="op" id="8099910">(</span><span class="op" id="8099911">)</span>&nbsp;<span class="op" id="8099913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099917">err</span>&nbsp;<span class="op" id="8099921">:=</span>&nbsp;<span class="ident" id="8099924">enc</span><span class="op" id="8099927">.</span><span class="ident" id="8099928">Encode</span><span class="op" id="8099934">(</span><span class="ident" id="8099935">bench</span><span class="op" id="8099940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099944">if</span>&nbsp;<span class="ident" id="8099947">err</span>&nbsp;<span class="op" id="8099951">!=</span>&nbsp;<span class="ident" id="8099954">nil</span>&nbsp;<span class="op" id="8099958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099963">t</span><span class="op" id="8099964">.</span><span class="ident" id="8099965">Fatal</span><span class="op" id="8099970">(</span><span class="string" id="8099971">&#34;encode:&#34;</span><span class="op" id="8099980">,</span>&nbsp;<span class="ident" id="8099982">err</span><span class="op" id="8099985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099989">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099992">}</span><span class="op" id="8099993">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099997">dec</span>&nbsp;<span class="op" id="8100001">:=</span>&nbsp;<span class="ident" id="8100004">NewDecoder</span><span class="op" id="8100014">(</span><span class="op" id="8100015">&amp;</span><span class="ident" id="8100016">buf</span><span class="op" id="8100019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100022">allocs</span>&nbsp;<span class="op" id="8100029">:=</span>&nbsp;<span class="ident" id="8100032">testing</span><span class="op" id="8100039">.</span><span class="ident" id="8100040">AllocsPerRun</span><span class="op" id="8100052">(</span><span class="ident" id="8100053">N</span><span class="op" id="8100054">,</span>&nbsp;<span class="keyword" id="8100056">func</span><span class="op" id="8100060">(</span><span class="op" id="8100061">)</span>&nbsp;<span class="op" id="8100063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100067">*</span><span class="ident" id="8100068">bench</span>&nbsp;<span class="op" id="8100074">=</span>&nbsp;<span class="ident" id="8100076">Bench</span><span class="op" id="8100081">{</span><span class="op" id="8100082">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100086">err</span>&nbsp;<span class="op" id="8100090">:=</span>&nbsp;<span class="ident" id="8100093">dec</span><span class="op" id="8100096">.</span><span class="ident" id="8100097">Decode</span><span class="op" id="8100103">(</span><span class="op" id="8100104">&amp;</span><span class="ident" id="8100105">bench</span><span class="op" id="8100110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100114">if</span>&nbsp;<span class="ident" id="8100117">err</span>&nbsp;<span class="op" id="8100121">!=</span>&nbsp;<span class="ident" id="8100124">nil</span>&nbsp;<span class="op" id="8100128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100133">t</span><span class="op" id="8100134">.</span><span class="ident" id="8100135">Fatal</span><span class="op" id="8100140">(</span><span class="string" id="8100141">&#34;decode:&#34;</span><span class="op" id="8100150">,</span>&nbsp;<span class="ident" id="8100152">err</span><span class="op" id="8100155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100162">}</span><span class="op" id="8100163">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100166">if</span>&nbsp;<span class="ident" id="8100169">allocs</span>&nbsp;<span class="op" id="8100176">!=</span>&nbsp;<span class="num" id="8100179">4</span>&nbsp;<span class="op" id="8100181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100185">t</span><span class="op" id="8100186">.</span><span class="ident" id="8100187">Fatalf</span><span class="op" id="8100193">(</span><span class="string" id="8100194">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="8100244">,</span>&nbsp;<span class="ident" id="8100246">allocs</span><span class="op" id="8100252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100255">}</span><br>
<span class="lineno"></span><span class="op" id="8100257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8100260">func</span>&nbsp;<span class="ident" id="8100265">BenchmarkEncodeComplex128Slice</span><span class="op" id="8100295">(</span><span class="ident" id="8100296">b</span>&nbsp;<span class="op" id="8100298">*</span><span class="ident" id="8100299">testing</span><span class="op" id="8100306">.</span><span class="ident" id="8100307">B</span><span class="op" id="8100308">)</span>&nbsp;<span class="op" id="8100310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100313">var</span>&nbsp;<span class="ident" id="8100317">buf</span>&nbsp;<span class="ident" id="8100321">bytes</span><span class="op" id="8100326">.</span><span class="ident" id="8100327">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100335">enc</span>&nbsp;<span class="op" id="8100339">:=</span>&nbsp;<span class="ident" id="8100342">NewEncoder</span><span class="op" id="8100352">(</span><span class="op" id="8100353">&amp;</span><span class="ident" id="8100354">buf</span><span class="op" id="8100357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100360">a</span>&nbsp;<span class="op" id="8100362">:=</span>&nbsp;<span class="builtinfunc" id="8100365">make</span><span class="op" id="8100369">(</span><span class="op" id="8100370">[</span><span class="op" id="8100371">]</span><span class="builtintype" id="8100372">complex128</span><span class="op" id="8100382">,</span>&nbsp;<span class="num" id="8100384">1000</span><span class="op" id="8100388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100391">for</span>&nbsp;<span class="ident" id="8100395">i</span>&nbsp;<span class="op" id="8100397">:=</span>&nbsp;<span class="keyword" id="8100400">range</span>&nbsp;<span class="ident" id="8100406">a</span>&nbsp;<span class="op" id="8100408">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100412">a</span><span class="op" id="8100413">[</span><span class="ident" id="8100414">i</span><span class="op" id="8100415">]</span>&nbsp;<span class="op" id="8100417">=</span>&nbsp;<span class="num" id="8100419">1.2</span>&nbsp;<span class="op" id="8100423">+</span>&nbsp;<span class="num" id="8100425">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100434">b</span><span class="op" id="8100435">.</span><span class="ident" id="8100436">ResetTimer</span><span class="op" id="8100446">(</span><span class="op" id="8100447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100450">for</span>&nbsp;<span class="ident" id="8100454">i</span>&nbsp;<span class="op" id="8100456">:=</span>&nbsp;<span class="num" id="8100459">0</span><span class="op" id="8100460">;</span>&nbsp;<span class="ident" id="8100462">i</span>&nbsp;<span class="op" id="8100464">&lt;</span>&nbsp;<span class="ident" id="8100466">b</span><span class="op" id="8100467">.</span><span class="ident" id="8100468">N</span><span class="op" id="8100469">;</span>&nbsp;<span class="ident" id="8100471">i</span><span class="op" id="8100472">++</span>&nbsp;<span class="op" id="8100475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100479">buf</span><span class="op" id="8100482">.</span><span class="ident" id="8100483">Reset</span><span class="op" id="8100488">(</span><span class="op" id="8100489">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100493">err</span>&nbsp;<span class="op" id="8100497">:=</span>&nbsp;<span class="ident" id="8100500">enc</span><span class="op" id="8100503">.</span><span class="ident" id="8100504">Encode</span><span class="op" id="8100510">(</span><span class="ident" id="8100511">a</span><span class="op" id="8100512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100516">if</span>&nbsp;<span class="ident" id="8100519">err</span>&nbsp;<span class="op" id="8100523">!=</span>&nbsp;<span class="ident" id="8100526">nil</span>&nbsp;<span class="op" id="8100530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100535">b</span><span class="op" id="8100536">.</span><span class="ident" id="8100537">Fatal</span><span class="op" id="8100542">(</span><span class="ident" id="8100543">err</span><span class="op" id="8100546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100553">}</span><br>
<span class="lineno">150</span><span class="op" id="8100555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8100558">func</span>&nbsp;<span class="ident" id="8100563">BenchmarkEncodeFloat64Slice</span><span class="op" id="8100590">(</span><span class="ident" id="8100591">b</span>&nbsp;<span class="op" id="8100593">*</span><span class="ident" id="8100594">testing</span><span class="op" id="8100601">.</span><span class="ident" id="8100602">B</span><span class="op" id="8100603">)</span>&nbsp;<span class="op" id="8100605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100608">var</span>&nbsp;<span class="ident" id="8100612">buf</span>&nbsp;<span class="ident" id="8100616">bytes</span><span class="op" id="8100621">.</span><span class="ident" id="8100622">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100630">enc</span>&nbsp;<span class="op" id="8100634">:=</span>&nbsp;<span class="ident" id="8100637">NewEncoder</span><span class="op" id="8100647">(</span><span class="op" id="8100648">&amp;</span><span class="ident" id="8100649">buf</span><span class="op" id="8100652">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100655">a</span>&nbsp;<span class="op" id="8100657">:=</span>&nbsp;<span class="builtinfunc" id="8100660">make</span><span class="op" id="8100664">(</span><span class="op" id="8100665">[</span><span class="op" id="8100666">]</span><span class="builtintype" id="8100667">float64</span><span class="op" id="8100674">,</span>&nbsp;<span class="num" id="8100676">1000</span><span class="op" id="8100680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100683">for</span>&nbsp;<span class="ident" id="8100687">i</span>&nbsp;<span class="op" id="8100689">:=</span>&nbsp;<span class="keyword" id="8100692">range</span>&nbsp;<span class="ident" id="8100698">a</span>&nbsp;<span class="op" id="8100700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100704">a</span><span class="op" id="8100705">[</span><span class="ident" id="8100706">i</span><span class="op" id="8100707">]</span>&nbsp;<span class="op" id="8100709">=</span>&nbsp;<span class="num" id="8100711">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100722">b</span><span class="op" id="8100723">.</span><span class="ident" id="8100724">ResetTimer</span><span class="op" id="8100734">(</span><span class="op" id="8100735">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100738">for</span>&nbsp;<span class="ident" id="8100742">i</span>&nbsp;<span class="op" id="8100744">:=</span>&nbsp;<span class="num" id="8100747">0</span><span class="op" id="8100748">;</span>&nbsp;<span class="ident" id="8100750">i</span>&nbsp;<span class="op" id="8100752">&lt;</span>&nbsp;<span class="ident" id="8100754">b</span><span class="op" id="8100755">.</span><span class="ident" id="8100756">N</span><span class="op" id="8100757">;</span>&nbsp;<span class="ident" id="8100759">i</span><span class="op" id="8100760">++</span>&nbsp;<span class="op" id="8100763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100767">buf</span><span class="op" id="8100770">.</span><span class="ident" id="8100771">Reset</span><span class="op" id="8100776">(</span><span class="op" id="8100777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100781">err</span>&nbsp;<span class="op" id="8100785">:=</span>&nbsp;<span class="ident" id="8100788">enc</span><span class="op" id="8100791">.</span><span class="ident" id="8100792">Encode</span><span class="op" id="8100798">(</span><span class="ident" id="8100799">a</span><span class="op" id="8100800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100804">if</span>&nbsp;<span class="ident" id="8100807">err</span>&nbsp;<span class="op" id="8100811">!=</span>&nbsp;<span class="ident" id="8100814">nil</span>&nbsp;<span class="op" id="8100818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100823">b</span><span class="op" id="8100824">.</span><span class="ident" id="8100825">Fatal</span><span class="op" id="8100830">(</span><span class="ident" id="8100831">err</span><span class="op" id="8100834">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100841">}</span><br>
<span class="lineno"></span><span class="op" id="8100843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8100846">func</span>&nbsp;<span class="ident" id="8100851">BenchmarkEncodeInt32Slice</span><span class="op" id="8100876">(</span><span class="ident" id="8100877">b</span>&nbsp;<span class="op" id="8100879">*</span><span class="ident" id="8100880">testing</span><span class="op" id="8100887">.</span><span class="ident" id="8100888">B</span><span class="op" id="8100889">)</span>&nbsp;<span class="op" id="8100891">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100894">var</span>&nbsp;<span class="ident" id="8100898">buf</span>&nbsp;<span class="ident" id="8100902">bytes</span><span class="op" id="8100907">.</span><span class="ident" id="8100908">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100916">enc</span>&nbsp;<span class="op" id="8100920">:=</span>&nbsp;<span class="ident" id="8100923">NewEncoder</span><span class="op" id="8100933">(</span><span class="op" id="8100934">&amp;</span><span class="ident" id="8100935">buf</span><span class="op" id="8100938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100941">a</span>&nbsp;<span class="op" id="8100943">:=</span>&nbsp;<span class="builtinfunc" id="8100946">make</span><span class="op" id="8100950">(</span><span class="op" id="8100951">[</span><span class="op" id="8100952">]</span><span class="builtintype" id="8100953">int32</span><span class="op" id="8100958">,</span>&nbsp;<span class="num" id="8100960">1000</span><span class="op" id="8100964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100967">for</span>&nbsp;<span class="ident" id="8100971">i</span>&nbsp;<span class="op" id="8100973">:=</span>&nbsp;<span class="keyword" id="8100976">range</span>&nbsp;<span class="ident" id="8100982">a</span>&nbsp;<span class="op" id="8100984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100988">a</span><span class="op" id="8100989">[</span><span class="ident" id="8100990">i</span><span class="op" id="8100991">]</span>&nbsp;<span class="op" id="8100993">=</span>&nbsp;<span class="num" id="8100995">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101004">b</span><span class="op" id="8101005">.</span><span class="ident" id="8101006">ResetTimer</span><span class="op" id="8101016">(</span><span class="op" id="8101017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101020">for</span>&nbsp;<span class="ident" id="8101024">i</span>&nbsp;<span class="op" id="8101026">:=</span>&nbsp;<span class="num" id="8101029">0</span><span class="op" id="8101030">;</span>&nbsp;<span class="ident" id="8101032">i</span>&nbsp;<span class="op" id="8101034">&lt;</span>&nbsp;<span class="ident" id="8101036">b</span><span class="op" id="8101037">.</span><span class="ident" id="8101038">N</span><span class="op" id="8101039">;</span>&nbsp;<span class="ident" id="8101041">i</span><span class="op" id="8101042">++</span>&nbsp;<span class="op" id="8101045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101049">buf</span><span class="op" id="8101052">.</span><span class="ident" id="8101053">Reset</span><span class="op" id="8101058">(</span><span class="op" id="8101059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101063">err</span>&nbsp;<span class="op" id="8101067">:=</span>&nbsp;<span class="ident" id="8101070">enc</span><span class="op" id="8101073">.</span><span class="ident" id="8101074">Encode</span><span class="op" id="8101080">(</span><span class="ident" id="8101081">a</span><span class="op" id="8101082">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101086">if</span>&nbsp;<span class="ident" id="8101089">err</span>&nbsp;<span class="op" id="8101093">!=</span>&nbsp;<span class="ident" id="8101096">nil</span>&nbsp;<span class="op" id="8101100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101105">b</span><span class="op" id="8101106">.</span><span class="ident" id="8101107">Fatal</span><span class="op" id="8101112">(</span><span class="ident" id="8101113">err</span><span class="op" id="8101116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101123">}</span><br>
<span class="lineno"></span><span class="op" id="8101125">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8101128">func</span>&nbsp;<span class="ident" id="8101133">BenchmarkEncodeStringSlice</span><span class="op" id="8101159">(</span><span class="ident" id="8101160">b</span>&nbsp;<span class="op" id="8101162">*</span><span class="ident" id="8101163">testing</span><span class="op" id="8101170">.</span><span class="ident" id="8101171">B</span><span class="op" id="8101172">)</span>&nbsp;<span class="op" id="8101174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101177">var</span>&nbsp;<span class="ident" id="8101181">buf</span>&nbsp;<span class="ident" id="8101185">bytes</span><span class="op" id="8101190">.</span><span class="ident" id="8101191">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101199">enc</span>&nbsp;<span class="op" id="8101203">:=</span>&nbsp;<span class="ident" id="8101206">NewEncoder</span><span class="op" id="8101216">(</span><span class="op" id="8101217">&amp;</span><span class="ident" id="8101218">buf</span><span class="op" id="8101221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101224">a</span>&nbsp;<span class="op" id="8101226">:=</span>&nbsp;<span class="builtinfunc" id="8101229">make</span><span class="op" id="8101233">(</span><span class="op" id="8101234">[</span><span class="op" id="8101235">]</span><span class="builtintype" id="8101236">string</span><span class="op" id="8101242">,</span>&nbsp;<span class="num" id="8101244">1000</span><span class="op" id="8101248">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101251">for</span>&nbsp;<span class="ident" id="8101255">i</span>&nbsp;<span class="op" id="8101257">:=</span>&nbsp;<span class="keyword" id="8101260">range</span>&nbsp;<span class="ident" id="8101266">a</span>&nbsp;<span class="op" id="8101268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101272">a</span><span class="op" id="8101273">[</span><span class="ident" id="8101274">i</span><span class="op" id="8101275">]</span>&nbsp;<span class="op" id="8101277">=</span>&nbsp;<span class="string" id="8101279">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101301">b</span><span class="op" id="8101302">.</span><span class="ident" id="8101303">ResetTimer</span><span class="op" id="8101313">(</span><span class="op" id="8101314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101317">for</span>&nbsp;<span class="ident" id="8101321">i</span>&nbsp;<span class="op" id="8101323">:=</span>&nbsp;<span class="num" id="8101326">0</span><span class="op" id="8101327">;</span>&nbsp;<span class="ident" id="8101329">i</span>&nbsp;<span class="op" id="8101331">&lt;</span>&nbsp;<span class="ident" id="8101333">b</span><span class="op" id="8101334">.</span><span class="ident" id="8101335">N</span><span class="op" id="8101336">;</span>&nbsp;<span class="ident" id="8101338">i</span><span class="op" id="8101339">++</span>&nbsp;<span class="op" id="8101342">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101346">buf</span><span class="op" id="8101349">.</span><span class="ident" id="8101350">Reset</span><span class="op" id="8101355">(</span><span class="op" id="8101356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101360">err</span>&nbsp;<span class="op" id="8101364">:=</span>&nbsp;<span class="ident" id="8101367">enc</span><span class="op" id="8101370">.</span><span class="ident" id="8101371">Encode</span><span class="op" id="8101377">(</span><span class="ident" id="8101378">a</span><span class="op" id="8101379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101383">if</span>&nbsp;<span class="ident" id="8101386">err</span>&nbsp;<span class="op" id="8101390">!=</span>&nbsp;<span class="ident" id="8101393">nil</span>&nbsp;<span class="op" id="8101397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101402">b</span><span class="op" id="8101403">.</span><span class="ident" id="8101404">Fatal</span><span class="op" id="8101409">(</span><span class="ident" id="8101410">err</span><span class="op" id="8101413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101417">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101420">}</span><br>
<span class="lineno"></span><span class="op" id="8101422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8101425">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="8101471">type</span>&nbsp;<span class="ident" id="8101476">benchmarkBuf</span>&nbsp;<span class="keyword" id="8101489">struct</span>&nbsp;<span class="op" id="8101496">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101499">offset</span>&nbsp;<span class="builtintype" id="8101506">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101511">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8101518">[</span><span class="op" id="8101519">]</span><span class="builtintype" id="8101520">byte</span><br>
<span class="lineno"></span><span class="op" id="8101525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8101528">func</span>&nbsp;<span class="op" id="8101533">(</span><span class="ident" id="8101534">b</span>&nbsp;<span class="op" id="8101536">*</span><span class="ident" id="8101537">benchmarkBuf</span><span class="op" id="8101549">)</span>&nbsp;<span class="ident" id="8101551">Read</span><span class="op" id="8101555">(</span><span class="ident" id="8101556">p</span>&nbsp;<span class="op" id="8101558">[</span><span class="op" id="8101559">]</span><span class="builtintype" id="8101560">byte</span><span class="op" id="8101564">)</span>&nbsp;<span class="op" id="8101566">(</span><span class="ident" id="8101567">n</span>&nbsp;<span class="builtintype" id="8101569">int</span><span class="op" id="8101572">,</span>&nbsp;<span class="ident" id="8101574">err</span>&nbsp;<span class="builtintype" id="8101578">error</span><span class="op" id="8101583">)</span>&nbsp;<span class="op" id="8101585">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101588">n</span>&nbsp;<span class="op" id="8101590">=</span>&nbsp;<span class="builtinfunc" id="8101592">copy</span><span class="op" id="8101596">(</span><span class="ident" id="8101597">p</span><span class="op" id="8101598">,</span>&nbsp;<span class="ident" id="8101600">b</span><span class="op" id="8101601">.</span><span class="ident" id="8101602">data</span><span class="op" id="8101606">[</span><span class="ident" id="8101607">b</span><span class="op" id="8101608">.</span><span class="ident" id="8101609">offset</span><span class="op" id="8101615">:</span><span class="op" id="8101616">]</span><span class="op" id="8101617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101620">if</span>&nbsp;<span class="ident" id="8101623">n</span>&nbsp;<span class="op" id="8101625">==</span>&nbsp;<span class="num" id="8101628">0</span>&nbsp;<span class="op" id="8101630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101634">return</span>&nbsp;<span class="num" id="8101641">0</span><span class="op" id="8101642">,</span>&nbsp;<span class="ident" id="8101644">io</span><span class="op" id="8101646">.</span><span class="ident" id="8101647">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101655">b</span><span class="op" id="8101656">.</span><span class="ident" id="8101657">offset</span>&nbsp;<span class="op" id="8101664">+=</span>&nbsp;<span class="ident" id="8101667">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101670">return</span><br>
<span class="lineno"></span><span class="op" id="8101677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8101680">func</span>&nbsp;<span class="op" id="8101685">(</span><span class="ident" id="8101686">b</span>&nbsp;<span class="op" id="8101688">*</span><span class="ident" id="8101689">benchmarkBuf</span><span class="op" id="8101701">)</span>&nbsp;<span class="ident" id="8101703">ReadByte</span><span class="op" id="8101711">(</span><span class="op" id="8101712">)</span>&nbsp;<span class="op" id="8101714">(</span><span class="ident" id="8101715">c</span>&nbsp;<span class="builtintype" id="8101717">byte</span><span class="op" id="8101721">,</span>&nbsp;<span class="ident" id="8101723">err</span>&nbsp;<span class="builtintype" id="8101727">error</span><span class="op" id="8101732">)</span>&nbsp;<span class="op" id="8101734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101737">if</span>&nbsp;<span class="ident" id="8101740">b</span><span class="op" id="8101741">.</span><span class="ident" id="8101742">offset</span>&nbsp;<span class="op" id="8101749">&gt;=</span>&nbsp;<span class="builtinfunc" id="8101752">len</span><span class="op" id="8101755">(</span><span class="ident" id="8101756">b</span><span class="op" id="8101757">.</span><span class="ident" id="8101758">data</span><span class="op" id="8101762">)</span>&nbsp;<span class="op" id="8101764">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101768">return</span>&nbsp;<span class="num" id="8101775">0</span><span class="op" id="8101776">,</span>&nbsp;<span class="ident" id="8101778">io</span><span class="op" id="8101780">.</span><span class="ident" id="8101781">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8101786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101789">c</span>&nbsp;<span class="op" id="8101791">=</span>&nbsp;<span class="ident" id="8101793">b</span><span class="op" id="8101794">.</span><span class="ident" id="8101795">data</span><span class="op" id="8101799">[</span><span class="ident" id="8101800">b</span><span class="op" id="8101801">.</span><span class="ident" id="8101802">offset</span><span class="op" id="8101808">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101811">b</span><span class="op" id="8101812">.</span><span class="ident" id="8101813">offset</span><span class="op" id="8101819">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101823">return</span><br>
<span class="lineno">225</span><span class="op" id="8101830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8101833">func</span>&nbsp;<span class="op" id="8101838">(</span><span class="ident" id="8101839">b</span>&nbsp;<span class="op" id="8101841">*</span><span class="ident" id="8101842">benchmarkBuf</span><span class="op" id="8101854">)</span>&nbsp;<span class="ident" id="8101856">reset</span><span class="op" id="8101861">(</span><span class="op" id="8101862">)</span>&nbsp;<span class="op" id="8101864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101867">b</span><span class="op" id="8101868">.</span><span class="ident" id="8101869">offset</span>&nbsp;<span class="op" id="8101876">=</span>&nbsp;<span class="num" id="8101878">0</span><br>
<span class="lineno"></span><span class="op" id="8101880">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8101883">func</span>&nbsp;<span class="ident" id="8101888">BenchmarkDecodeComplex128Slice</span><span class="op" id="8101918">(</span><span class="ident" id="8101919">b</span>&nbsp;<span class="op" id="8101921">*</span><span class="ident" id="8101922">testing</span><span class="op" id="8101929">.</span><span class="ident" id="8101930">B</span><span class="op" id="8101931">)</span>&nbsp;<span class="op" id="8101933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8101936">var</span>&nbsp;<span class="ident" id="8101940">buf</span>&nbsp;<span class="ident" id="8101944">bytes</span><span class="op" id="8101949">.</span><span class="ident" id="8101950">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101958">enc</span>&nbsp;<span class="op" id="8101962">:=</span>&nbsp;<span class="ident" id="8101965">NewEncoder</span><span class="op" id="8101975">(</span><span class="op" id="8101976">&amp;</span><span class="ident" id="8101977">buf</span><span class="op" id="8101980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8101983">a</span>&nbsp;<span class="op" id="8101985">:=</span>&nbsp;<span class="builtinfunc" id="8101988">make</span><span class="op" id="8101992">(</span><span class="op" id="8101993">[</span><span class="op" id="8101994">]</span><span class="builtintype" id="8101995">complex128</span><span class="op" id="8102005">,</span>&nbsp;<span class="num" id="8102007">1000</span><span class="op" id="8102011">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102014">for</span>&nbsp;<span class="ident" id="8102018">i</span>&nbsp;<span class="op" id="8102020">:=</span>&nbsp;<span class="keyword" id="8102023">range</span>&nbsp;<span class="ident" id="8102029">a</span>&nbsp;<span class="op" id="8102031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102035">a</span><span class="op" id="8102036">[</span><span class="ident" id="8102037">i</span><span class="op" id="8102038">]</span>&nbsp;<span class="op" id="8102040">=</span>&nbsp;<span class="num" id="8102042">1.2</span>&nbsp;<span class="op" id="8102046">+</span>&nbsp;<span class="num" id="8102048">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102057">err</span>&nbsp;<span class="op" id="8102061">:=</span>&nbsp;<span class="ident" id="8102064">enc</span><span class="op" id="8102067">.</span><span class="ident" id="8102068">Encode</span><span class="op" id="8102074">(</span><span class="ident" id="8102075">a</span><span class="op" id="8102076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102079">if</span>&nbsp;<span class="ident" id="8102082">err</span>&nbsp;<span class="op" id="8102086">!=</span>&nbsp;<span class="ident" id="8102089">nil</span>&nbsp;<span class="op" id="8102093">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102097">b</span><span class="op" id="8102098">.</span><span class="ident" id="8102099">Fatal</span><span class="op" id="8102104">(</span><span class="ident" id="8102105">err</span><span class="op" id="8102108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102114">x</span>&nbsp;<span class="op" id="8102116">:=</span>&nbsp;<span class="builtinfunc" id="8102119">make</span><span class="op" id="8102123">(</span><span class="op" id="8102124">[</span><span class="op" id="8102125">]</span><span class="builtintype" id="8102126">complex128</span><span class="op" id="8102136">,</span>&nbsp;<span class="num" id="8102138">1000</span><span class="op" id="8102142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102145">bbuf</span>&nbsp;<span class="op" id="8102150">:=</span>&nbsp;<span class="ident" id="8102153">benchmarkBuf</span><span class="op" id="8102165">{</span><span class="ident" id="8102166">data</span><span class="op" id="8102170">:</span>&nbsp;<span class="ident" id="8102172">buf</span><span class="op" id="8102175">.</span><span class="ident" id="8102176">Bytes</span><span class="op" id="8102181">(</span><span class="op" id="8102182">)</span><span class="op" id="8102183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102186">b</span><span class="op" id="8102187">.</span><span class="ident" id="8102188">ResetTimer</span><span class="op" id="8102198">(</span><span class="op" id="8102199">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102202">for</span>&nbsp;<span class="ident" id="8102206">i</span>&nbsp;<span class="op" id="8102208">:=</span>&nbsp;<span class="num" id="8102211">0</span><span class="op" id="8102212">;</span>&nbsp;<span class="ident" id="8102214">i</span>&nbsp;<span class="op" id="8102216">&lt;</span>&nbsp;<span class="ident" id="8102218">b</span><span class="op" id="8102219">.</span><span class="ident" id="8102220">N</span><span class="op" id="8102221">;</span>&nbsp;<span class="ident" id="8102223">i</span><span class="op" id="8102224">++</span>&nbsp;<span class="op" id="8102227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102231">bbuf</span><span class="op" id="8102235">.</span><span class="ident" id="8102236">reset</span><span class="op" id="8102241">(</span><span class="op" id="8102242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102246">dec</span>&nbsp;<span class="op" id="8102250">:=</span>&nbsp;<span class="ident" id="8102253">NewDecoder</span><span class="op" id="8102263">(</span><span class="op" id="8102264">&amp;</span><span class="ident" id="8102265">bbuf</span><span class="op" id="8102269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102273">err</span>&nbsp;<span class="op" id="8102277">:=</span>&nbsp;<span class="ident" id="8102280">dec</span><span class="op" id="8102283">.</span><span class="ident" id="8102284">Decode</span><span class="op" id="8102290">(</span><span class="op" id="8102291">&amp;</span><span class="ident" id="8102292">x</span><span class="op" id="8102293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102297">if</span>&nbsp;<span class="ident" id="8102300">err</span>&nbsp;<span class="op" id="8102304">!=</span>&nbsp;<span class="ident" id="8102307">nil</span>&nbsp;<span class="op" id="8102311">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102316">b</span><span class="op" id="8102317">.</span><span class="ident" id="8102318">Fatal</span><span class="op" id="8102323">(</span><span class="ident" id="8102324">i</span><span class="op" id="8102325">,</span>&nbsp;<span class="ident" id="8102327">err</span><span class="op" id="8102330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102337">}</span><br>
<span class="lineno"></span><span class="op" id="8102339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8102342">func</span>&nbsp;<span class="ident" id="8102347">BenchmarkDecodeFloat64Slice</span><span class="op" id="8102374">(</span><span class="ident" id="8102375">b</span>&nbsp;<span class="op" id="8102377">*</span><span class="ident" id="8102378">testing</span><span class="op" id="8102385">.</span><span class="ident" id="8102386">B</span><span class="op" id="8102387">)</span>&nbsp;<span class="op" id="8102389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102392">var</span>&nbsp;<span class="ident" id="8102396">buf</span>&nbsp;<span class="ident" id="8102400">bytes</span><span class="op" id="8102405">.</span><span class="ident" id="8102406">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102414">enc</span>&nbsp;<span class="op" id="8102418">:=</span>&nbsp;<span class="ident" id="8102421">NewEncoder</span><span class="op" id="8102431">(</span><span class="op" id="8102432">&amp;</span><span class="ident" id="8102433">buf</span><span class="op" id="8102436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102439">a</span>&nbsp;<span class="op" id="8102441">:=</span>&nbsp;<span class="builtinfunc" id="8102444">make</span><span class="op" id="8102448">(</span><span class="op" id="8102449">[</span><span class="op" id="8102450">]</span><span class="builtintype" id="8102451">float64</span><span class="op" id="8102458">,</span>&nbsp;<span class="num" id="8102460">1000</span><span class="op" id="8102464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102467">for</span>&nbsp;<span class="ident" id="8102471">i</span>&nbsp;<span class="op" id="8102473">:=</span>&nbsp;<span class="keyword" id="8102476">range</span>&nbsp;<span class="ident" id="8102482">a</span>&nbsp;<span class="op" id="8102484">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102488">a</span><span class="op" id="8102489">[</span><span class="ident" id="8102490">i</span><span class="op" id="8102491">]</span>&nbsp;<span class="op" id="8102493">=</span>&nbsp;<span class="num" id="8102495">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102506">err</span>&nbsp;<span class="op" id="8102510">:=</span>&nbsp;<span class="ident" id="8102513">enc</span><span class="op" id="8102516">.</span><span class="ident" id="8102517">Encode</span><span class="op" id="8102523">(</span><span class="ident" id="8102524">a</span><span class="op" id="8102525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102528">if</span>&nbsp;<span class="ident" id="8102531">err</span>&nbsp;<span class="op" id="8102535">!=</span>&nbsp;<span class="ident" id="8102538">nil</span>&nbsp;<span class="op" id="8102542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102546">b</span><span class="op" id="8102547">.</span><span class="ident" id="8102548">Fatal</span><span class="op" id="8102553">(</span><span class="ident" id="8102554">err</span><span class="op" id="8102557">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102563">x</span>&nbsp;<span class="op" id="8102565">:=</span>&nbsp;<span class="builtinfunc" id="8102568">make</span><span class="op" id="8102572">(</span><span class="op" id="8102573">[</span><span class="op" id="8102574">]</span><span class="builtintype" id="8102575">float64</span><span class="op" id="8102582">,</span>&nbsp;<span class="num" id="8102584">1000</span><span class="op" id="8102588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102591">bbuf</span>&nbsp;<span class="op" id="8102596">:=</span>&nbsp;<span class="ident" id="8102599">benchmarkBuf</span><span class="op" id="8102611">{</span><span class="ident" id="8102612">data</span><span class="op" id="8102616">:</span>&nbsp;<span class="ident" id="8102618">buf</span><span class="op" id="8102621">.</span><span class="ident" id="8102622">Bytes</span><span class="op" id="8102627">(</span><span class="op" id="8102628">)</span><span class="op" id="8102629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102632">b</span><span class="op" id="8102633">.</span><span class="ident" id="8102634">ResetTimer</span><span class="op" id="8102644">(</span><span class="op" id="8102645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102648">for</span>&nbsp;<span class="ident" id="8102652">i</span>&nbsp;<span class="op" id="8102654">:=</span>&nbsp;<span class="num" id="8102657">0</span><span class="op" id="8102658">;</span>&nbsp;<span class="ident" id="8102660">i</span>&nbsp;<span class="op" id="8102662">&lt;</span>&nbsp;<span class="ident" id="8102664">b</span><span class="op" id="8102665">.</span><span class="ident" id="8102666">N</span><span class="op" id="8102667">;</span>&nbsp;<span class="ident" id="8102669">i</span><span class="op" id="8102670">++</span>&nbsp;<span class="op" id="8102673">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102677">bbuf</span><span class="op" id="8102681">.</span><span class="ident" id="8102682">reset</span><span class="op" id="8102687">(</span><span class="op" id="8102688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102692">dec</span>&nbsp;<span class="op" id="8102696">:=</span>&nbsp;<span class="ident" id="8102699">NewDecoder</span><span class="op" id="8102709">(</span><span class="op" id="8102710">&amp;</span><span class="ident" id="8102711">bbuf</span><span class="op" id="8102715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102719">err</span>&nbsp;<span class="op" id="8102723">:=</span>&nbsp;<span class="ident" id="8102726">dec</span><span class="op" id="8102729">.</span><span class="ident" id="8102730">Decode</span><span class="op" id="8102736">(</span><span class="op" id="8102737">&amp;</span><span class="ident" id="8102738">x</span><span class="op" id="8102739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102743">if</span>&nbsp;<span class="ident" id="8102746">err</span>&nbsp;<span class="op" id="8102750">!=</span>&nbsp;<span class="ident" id="8102753">nil</span>&nbsp;<span class="op" id="8102757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102762">b</span><span class="op" id="8102763">.</span><span class="ident" id="8102764">Fatal</span><span class="op" id="8102769">(</span><span class="ident" id="8102770">i</span><span class="op" id="8102771">,</span>&nbsp;<span class="ident" id="8102773">err</span><span class="op" id="8102776">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102783">}</span><br>
<span class="lineno"></span><span class="op" id="8102785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8102788">func</span>&nbsp;<span class="ident" id="8102793">BenchmarkDecodeInt32Slice</span><span class="op" id="8102818">(</span><span class="ident" id="8102819">b</span>&nbsp;<span class="op" id="8102821">*</span><span class="ident" id="8102822">testing</span><span class="op" id="8102829">.</span><span class="ident" id="8102830">B</span><span class="op" id="8102831">)</span>&nbsp;<span class="op" id="8102833">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102836">var</span>&nbsp;<span class="ident" id="8102840">buf</span>&nbsp;<span class="ident" id="8102844">bytes</span><span class="op" id="8102849">.</span><span class="ident" id="8102850">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102858">enc</span>&nbsp;<span class="op" id="8102862">:=</span>&nbsp;<span class="ident" id="8102865">NewEncoder</span><span class="op" id="8102875">(</span><span class="op" id="8102876">&amp;</span><span class="ident" id="8102877">buf</span><span class="op" id="8102880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102883">a</span>&nbsp;<span class="op" id="8102885">:=</span>&nbsp;<span class="builtinfunc" id="8102888">make</span><span class="op" id="8102892">(</span><span class="op" id="8102893">[</span><span class="op" id="8102894">]</span><span class="builtintype" id="8102895">int32</span><span class="op" id="8102900">,</span>&nbsp;<span class="num" id="8102902">1000</span><span class="op" id="8102906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102909">for</span>&nbsp;<span class="ident" id="8102913">i</span>&nbsp;<span class="op" id="8102915">:=</span>&nbsp;<span class="keyword" id="8102918">range</span>&nbsp;<span class="ident" id="8102924">a</span>&nbsp;<span class="op" id="8102926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102930">a</span><span class="op" id="8102931">[</span><span class="ident" id="8102932">i</span><span class="op" id="8102933">]</span>&nbsp;<span class="op" id="8102935">=</span>&nbsp;<span class="num" id="8102937">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8102943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102946">err</span>&nbsp;<span class="op" id="8102950">:=</span>&nbsp;<span class="ident" id="8102953">enc</span><span class="op" id="8102956">.</span><span class="ident" id="8102957">Encode</span><span class="op" id="8102963">(</span><span class="ident" id="8102964">a</span><span class="op" id="8102965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8102968">if</span>&nbsp;<span class="ident" id="8102971">err</span>&nbsp;<span class="op" id="8102975">!=</span>&nbsp;<span class="ident" id="8102978">nil</span>&nbsp;<span class="op" id="8102982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8102986">b</span><span class="op" id="8102987">.</span><span class="ident" id="8102988">Fatal</span><span class="op" id="8102993">(</span><span class="ident" id="8102994">err</span><span class="op" id="8102997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103000">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103003">x</span>&nbsp;<span class="op" id="8103005">:=</span>&nbsp;<span class="builtinfunc" id="8103008">make</span><span class="op" id="8103012">(</span><span class="op" id="8103013">[</span><span class="op" id="8103014">]</span><span class="builtintype" id="8103015">int32</span><span class="op" id="8103020">,</span>&nbsp;<span class="num" id="8103022">1000</span><span class="op" id="8103026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103029">bbuf</span>&nbsp;<span class="op" id="8103034">:=</span>&nbsp;<span class="ident" id="8103037">benchmarkBuf</span><span class="op" id="8103049">{</span><span class="ident" id="8103050">data</span><span class="op" id="8103054">:</span>&nbsp;<span class="ident" id="8103056">buf</span><span class="op" id="8103059">.</span><span class="ident" id="8103060">Bytes</span><span class="op" id="8103065">(</span><span class="op" id="8103066">)</span><span class="op" id="8103067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103070">b</span><span class="op" id="8103071">.</span><span class="ident" id="8103072">ResetTimer</span><span class="op" id="8103082">(</span><span class="op" id="8103083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103086">for</span>&nbsp;<span class="ident" id="8103090">i</span>&nbsp;<span class="op" id="8103092">:=</span>&nbsp;<span class="num" id="8103095">0</span><span class="op" id="8103096">;</span>&nbsp;<span class="ident" id="8103098">i</span>&nbsp;<span class="op" id="8103100">&lt;</span>&nbsp;<span class="ident" id="8103102">b</span><span class="op" id="8103103">.</span><span class="ident" id="8103104">N</span><span class="op" id="8103105">;</span>&nbsp;<span class="ident" id="8103107">i</span><span class="op" id="8103108">++</span>&nbsp;<span class="op" id="8103111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103115">bbuf</span><span class="op" id="8103119">.</span><span class="ident" id="8103120">reset</span><span class="op" id="8103125">(</span><span class="op" id="8103126">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103130">dec</span>&nbsp;<span class="op" id="8103134">:=</span>&nbsp;<span class="ident" id="8103137">NewDecoder</span><span class="op" id="8103147">(</span><span class="op" id="8103148">&amp;</span><span class="ident" id="8103149">bbuf</span><span class="op" id="8103153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103157">err</span>&nbsp;<span class="op" id="8103161">:=</span>&nbsp;<span class="ident" id="8103164">dec</span><span class="op" id="8103167">.</span><span class="ident" id="8103168">Decode</span><span class="op" id="8103174">(</span><span class="op" id="8103175">&amp;</span><span class="ident" id="8103176">x</span><span class="op" id="8103177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103181">if</span>&nbsp;<span class="ident" id="8103184">err</span>&nbsp;<span class="op" id="8103188">!=</span>&nbsp;<span class="ident" id="8103191">nil</span>&nbsp;<span class="op" id="8103195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103200">b</span><span class="op" id="8103201">.</span><span class="ident" id="8103202">Fatal</span><span class="op" id="8103207">(</span><span class="ident" id="8103208">i</span><span class="op" id="8103209">,</span>&nbsp;<span class="ident" id="8103211">err</span><span class="op" id="8103214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103218">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103221">}</span><br>
<span class="lineno"></span><span class="op" id="8103223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8103226">func</span>&nbsp;<span class="ident" id="8103231">BenchmarkDecodeStringSlice</span><span class="op" id="8103257">(</span><span class="ident" id="8103258">b</span>&nbsp;<span class="op" id="8103260">*</span><span class="ident" id="8103261">testing</span><span class="op" id="8103268">.</span><span class="ident" id="8103269">B</span><span class="op" id="8103270">)</span>&nbsp;<span class="op" id="8103272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103275">var</span>&nbsp;<span class="ident" id="8103279">buf</span>&nbsp;<span class="ident" id="8103283">bytes</span><span class="op" id="8103288">.</span><span class="ident" id="8103289">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103297">enc</span>&nbsp;<span class="op" id="8103301">:=</span>&nbsp;<span class="ident" id="8103304">NewEncoder</span><span class="op" id="8103314">(</span><span class="op" id="8103315">&amp;</span><span class="ident" id="8103316">buf</span><span class="op" id="8103319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103322">a</span>&nbsp;<span class="op" id="8103324">:=</span>&nbsp;<span class="builtinfunc" id="8103327">make</span><span class="op" id="8103331">(</span><span class="op" id="8103332">[</span><span class="op" id="8103333">]</span><span class="builtintype" id="8103334">string</span><span class="op" id="8103340">,</span>&nbsp;<span class="num" id="8103342">1000</span><span class="op" id="8103346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103349">for</span>&nbsp;<span class="ident" id="8103353">i</span>&nbsp;<span class="op" id="8103355">:=</span>&nbsp;<span class="keyword" id="8103358">range</span>&nbsp;<span class="ident" id="8103364">a</span>&nbsp;<span class="op" id="8103366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103370">a</span><span class="op" id="8103371">[</span><span class="ident" id="8103372">i</span><span class="op" id="8103373">]</span>&nbsp;<span class="op" id="8103375">=</span>&nbsp;<span class="string" id="8103377">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103396">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103399">err</span>&nbsp;<span class="op" id="8103403">:=</span>&nbsp;<span class="ident" id="8103406">enc</span><span class="op" id="8103409">.</span><span class="ident" id="8103410">Encode</span><span class="op" id="8103416">(</span><span class="ident" id="8103417">a</span><span class="op" id="8103418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103421">if</span>&nbsp;<span class="ident" id="8103424">err</span>&nbsp;<span class="op" id="8103428">!=</span>&nbsp;<span class="ident" id="8103431">nil</span>&nbsp;<span class="op" id="8103435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103439">b</span><span class="op" id="8103440">.</span><span class="ident" id="8103441">Fatal</span><span class="op" id="8103446">(</span><span class="ident" id="8103447">err</span><span class="op" id="8103450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103456">x</span>&nbsp;<span class="op" id="8103458">:=</span>&nbsp;<span class="builtinfunc" id="8103461">make</span><span class="op" id="8103465">(</span><span class="op" id="8103466">[</span><span class="op" id="8103467">]</span><span class="builtintype" id="8103468">string</span><span class="op" id="8103474">,</span>&nbsp;<span class="num" id="8103476">1000</span><span class="op" id="8103480">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103483">bbuf</span>&nbsp;<span class="op" id="8103488">:=</span>&nbsp;<span class="ident" id="8103491">benchmarkBuf</span><span class="op" id="8103503">{</span><span class="ident" id="8103504">data</span><span class="op" id="8103508">:</span>&nbsp;<span class="ident" id="8103510">buf</span><span class="op" id="8103513">.</span><span class="ident" id="8103514">Bytes</span><span class="op" id="8103519">(</span><span class="op" id="8103520">)</span><span class="op" id="8103521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103524">b</span><span class="op" id="8103525">.</span><span class="ident" id="8103526">ResetTimer</span><span class="op" id="8103536">(</span><span class="op" id="8103537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103540">for</span>&nbsp;<span class="ident" id="8103544">i</span>&nbsp;<span class="op" id="8103546">:=</span>&nbsp;<span class="num" id="8103549">0</span><span class="op" id="8103550">;</span>&nbsp;<span class="ident" id="8103552">i</span>&nbsp;<span class="op" id="8103554">&lt;</span>&nbsp;<span class="ident" id="8103556">b</span><span class="op" id="8103557">.</span><span class="ident" id="8103558">N</span><span class="op" id="8103559">;</span>&nbsp;<span class="ident" id="8103561">i</span><span class="op" id="8103562">++</span>&nbsp;<span class="op" id="8103565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103569">bbuf</span><span class="op" id="8103573">.</span><span class="ident" id="8103574">reset</span><span class="op" id="8103579">(</span><span class="op" id="8103580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103584">dec</span>&nbsp;<span class="op" id="8103588">:=</span>&nbsp;<span class="ident" id="8103591">NewDecoder</span><span class="op" id="8103601">(</span><span class="op" id="8103602">&amp;</span><span class="ident" id="8103603">bbuf</span><span class="op" id="8103607">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103611">err</span>&nbsp;<span class="op" id="8103615">:=</span>&nbsp;<span class="ident" id="8103618">dec</span><span class="op" id="8103621">.</span><span class="ident" id="8103622">Decode</span><span class="op" id="8103628">(</span><span class="op" id="8103629">&amp;</span><span class="ident" id="8103630">x</span><span class="op" id="8103631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8103635">if</span>&nbsp;<span class="ident" id="8103638">err</span>&nbsp;<span class="op" id="8103642">!=</span>&nbsp;<span class="ident" id="8103645">nil</span>&nbsp;<span class="op" id="8103649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8103654">b</span><span class="op" id="8103655">.</span><span class="ident" id="8103656">Fatal</span><span class="op" id="8103661">(</span><span class="ident" id="8103662">i</span><span class="op" id="8103663">,</span>&nbsp;<span class="ident" id="8103665">err</span><span class="op" id="8103668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8103675">}</span><br>
<span class="lineno">325</span><span class="op" id="8103677">}</span>
</div>
</body>
</html>
