<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8477567">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8477622">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8477676">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8477727">package</span>&nbsp;<span class="ident" id="8477735">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477740">import</span>&nbsp;<span class="op" id="8477747">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8477750">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8477759">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8477769">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8477779">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477782">var</span>&nbsp;<span class="ident" id="8477786">writeTests</span>&nbsp;<span class="op" id="8477797">=</span>&nbsp;<span class="op" id="8477799">[</span><span class="op" id="8477800">]</span><span class="keyword" id="8477801">struct</span>&nbsp;<span class="op" id="8477808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8477811">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8477819">[</span><span class="op" id="8477820">]</span><span class="op" id="8477821">[</span><span class="op" id="8477822">]</span><span class="builtintype" id="8477823">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8477831">Output</span>&nbsp;&nbsp;<span class="builtintype" id="8477839">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8477847">UseCRLF</span>&nbsp;<span class="builtintype" id="8477855">bool</span><br>
<span class="lineno"></span><span class="op" id="8477860">}</span><span class="op" id="8477861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8477864">{</span><span class="ident" id="8477865">Input</span><span class="op" id="8477870">:</span>&nbsp;<span class="op" id="8477872">[</span><span class="op" id="8477873">]</span><span class="op" id="8477874">[</span><span class="op" id="8477875">]</span><span class="builtintype" id="8477876">string</span><span class="op" id="8477882">{</span><span class="op" id="8477883">{</span><span class="string" id="8477884">&#34;abc&#34;</span><span class="op" id="8477889">}</span><span class="op" id="8477890">}</span><span class="op" id="8477891">,</span>&nbsp;<span class="ident" id="8477893">Output</span><span class="op" id="8477899">:</span>&nbsp;<span class="string" id="8477901">&#34;abc\n&#34;</span><span class="op" id="8477908">}</span><span class="op" id="8477909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8477912">{</span><span class="ident" id="8477913">Input</span><span class="op" id="8477918">:</span>&nbsp;<span class="op" id="8477920">[</span><span class="op" id="8477921">]</span><span class="op" id="8477922">[</span><span class="op" id="8477923">]</span><span class="builtintype" id="8477924">string</span><span class="op" id="8477930">{</span><span class="op" id="8477931">{</span><span class="string" id="8477932">&#34;abc&#34;</span><span class="op" id="8477937">}</span><span class="op" id="8477938">}</span><span class="op" id="8477939">,</span>&nbsp;<span class="ident" id="8477941">Output</span><span class="op" id="8477947">:</span>&nbsp;<span class="string" id="8477949">&#34;abc\r\n&#34;</span><span class="op" id="8477958">,</span>&nbsp;<span class="ident" id="8477960">UseCRLF</span><span class="op" id="8477967">:</span>&nbsp;<span class="builtintype" id="8477969">true</span><span class="op" id="8477973">}</span><span class="op" id="8477974">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8477977">{</span><span class="ident" id="8477978">Input</span><span class="op" id="8477983">:</span>&nbsp;<span class="op" id="8477985">[</span><span class="op" id="8477986">]</span><span class="op" id="8477987">[</span><span class="op" id="8477988">]</span><span class="builtintype" id="8477989">string</span><span class="op" id="8477995">{</span><span class="op" id="8477996">{</span><span class="string" id="8477997">`&#34;abc&#34;`</span><span class="op" id="8478004">}</span><span class="op" id="8478005">}</span><span class="op" id="8478006">,</span>&nbsp;<span class="ident" id="8478008">Output</span><span class="op" id="8478014">:</span>&nbsp;<span class="string" id="8478016">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8478028">+</span>&nbsp;<span class="string" id="8478030">&#34;\n&#34;</span><span class="op" id="8478034">}</span><span class="op" id="8478035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478038">{</span><span class="ident" id="8478039">Input</span><span class="op" id="8478044">:</span>&nbsp;<span class="op" id="8478046">[</span><span class="op" id="8478047">]</span><span class="op" id="8478048">[</span><span class="op" id="8478049">]</span><span class="builtintype" id="8478050">string</span><span class="op" id="8478056">{</span><span class="op" id="8478057">{</span><span class="string" id="8478058">`a&#34;b`</span><span class="op" id="8478063">}</span><span class="op" id="8478064">}</span><span class="op" id="8478065">,</span>&nbsp;<span class="ident" id="8478067">Output</span><span class="op" id="8478073">:</span>&nbsp;<span class="string" id="8478075">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="8478084">+</span>&nbsp;<span class="string" id="8478086">&#34;\n&#34;</span><span class="op" id="8478090">}</span><span class="op" id="8478091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478094">{</span><span class="ident" id="8478095">Input</span><span class="op" id="8478100">:</span>&nbsp;<span class="op" id="8478102">[</span><span class="op" id="8478103">]</span><span class="op" id="8478104">[</span><span class="op" id="8478105">]</span><span class="builtintype" id="8478106">string</span><span class="op" id="8478112">{</span><span class="op" id="8478113">{</span><span class="string" id="8478114">`&#34;a&#34;b&#34;`</span><span class="op" id="8478121">}</span><span class="op" id="8478122">}</span><span class="op" id="8478123">,</span>&nbsp;<span class="ident" id="8478125">Output</span><span class="op" id="8478131">:</span>&nbsp;<span class="string" id="8478133">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8478146">+</span>&nbsp;<span class="string" id="8478148">&#34;\n&#34;</span><span class="op" id="8478152">}</span><span class="op" id="8478153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478156">{</span><span class="ident" id="8478157">Input</span><span class="op" id="8478162">:</span>&nbsp;<span class="op" id="8478164">[</span><span class="op" id="8478165">]</span><span class="op" id="8478166">[</span><span class="op" id="8478167">]</span><span class="builtintype" id="8478168">string</span><span class="op" id="8478174">{</span><span class="op" id="8478175">{</span><span class="string" id="8478176">&#34;&nbsp;abc&#34;</span><span class="op" id="8478182">}</span><span class="op" id="8478183">}</span><span class="op" id="8478184">,</span>&nbsp;<span class="ident" id="8478186">Output</span><span class="op" id="8478192">:</span>&nbsp;<span class="string" id="8478194">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="8478203">+</span>&nbsp;<span class="string" id="8478205">&#34;\n&#34;</span><span class="op" id="8478209">}</span><span class="op" id="8478210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478213">{</span><span class="ident" id="8478214">Input</span><span class="op" id="8478219">:</span>&nbsp;<span class="op" id="8478221">[</span><span class="op" id="8478222">]</span><span class="op" id="8478223">[</span><span class="op" id="8478224">]</span><span class="builtintype" id="8478225">string</span><span class="op" id="8478231">{</span><span class="op" id="8478232">{</span><span class="string" id="8478233">&#34;abc,def&#34;</span><span class="op" id="8478242">}</span><span class="op" id="8478243">}</span><span class="op" id="8478244">,</span>&nbsp;<span class="ident" id="8478246">Output</span><span class="op" id="8478252">:</span>&nbsp;<span class="string" id="8478254">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="8478266">+</span>&nbsp;<span class="string" id="8478268">&#34;\n&#34;</span><span class="op" id="8478272">}</span><span class="op" id="8478273">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478276">{</span><span class="ident" id="8478277">Input</span><span class="op" id="8478282">:</span>&nbsp;<span class="op" id="8478284">[</span><span class="op" id="8478285">]</span><span class="op" id="8478286">[</span><span class="op" id="8478287">]</span><span class="builtintype" id="8478288">string</span><span class="op" id="8478294">{</span><span class="op" id="8478295">{</span><span class="string" id="8478296">&#34;abc&#34;</span><span class="op" id="8478301">,</span>&nbsp;<span class="string" id="8478303">&#34;def&#34;</span><span class="op" id="8478308">}</span><span class="op" id="8478309">}</span><span class="op" id="8478310">,</span>&nbsp;<span class="ident" id="8478312">Output</span><span class="op" id="8478318">:</span>&nbsp;<span class="string" id="8478320">&#34;abc,def\n&#34;</span><span class="op" id="8478331">}</span><span class="op" id="8478332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478335">{</span><span class="ident" id="8478336">Input</span><span class="op" id="8478341">:</span>&nbsp;<span class="op" id="8478343">[</span><span class="op" id="8478344">]</span><span class="op" id="8478345">[</span><span class="op" id="8478346">]</span><span class="builtintype" id="8478347">string</span><span class="op" id="8478353">{</span><span class="op" id="8478354">{</span><span class="string" id="8478355">&#34;abc&#34;</span><span class="op" id="8478360">}</span><span class="op" id="8478361">,</span>&nbsp;<span class="op" id="8478363">{</span><span class="string" id="8478364">&#34;def&#34;</span><span class="op" id="8478369">}</span><span class="op" id="8478370">}</span><span class="op" id="8478371">,</span>&nbsp;<span class="ident" id="8478373">Output</span><span class="op" id="8478379">:</span>&nbsp;<span class="string" id="8478381">&#34;abc\ndef\n&#34;</span><span class="op" id="8478393">}</span><span class="op" id="8478394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478397">{</span><span class="ident" id="8478398">Input</span><span class="op" id="8478403">:</span>&nbsp;<span class="op" id="8478405">[</span><span class="op" id="8478406">]</span><span class="op" id="8478407">[</span><span class="op" id="8478408">]</span><span class="builtintype" id="8478409">string</span><span class="op" id="8478415">{</span><span class="op" id="8478416">{</span><span class="string" id="8478417">&#34;abc\ndef&#34;</span><span class="op" id="8478427">}</span><span class="op" id="8478428">}</span><span class="op" id="8478429">,</span>&nbsp;<span class="ident" id="8478431">Output</span><span class="op" id="8478437">:</span>&nbsp;<span class="string" id="8478439">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="8478455">}</span><span class="op" id="8478456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478459">{</span><span class="ident" id="8478460">Input</span><span class="op" id="8478465">:</span>&nbsp;<span class="op" id="8478467">[</span><span class="op" id="8478468">]</span><span class="op" id="8478469">[</span><span class="op" id="8478470">]</span><span class="builtintype" id="8478471">string</span><span class="op" id="8478477">{</span><span class="op" id="8478478">{</span><span class="string" id="8478479">&#34;abc\ndef&#34;</span><span class="op" id="8478489">}</span><span class="op" id="8478490">}</span><span class="op" id="8478491">,</span>&nbsp;<span class="ident" id="8478493">Output</span><span class="op" id="8478499">:</span>&nbsp;<span class="string" id="8478501">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="8478521">,</span>&nbsp;<span class="ident" id="8478523">UseCRLF</span><span class="op" id="8478530">:</span>&nbsp;<span class="builtintype" id="8478532">true</span><span class="op" id="8478536">}</span><span class="op" id="8478537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478540">{</span><span class="ident" id="8478541">Input</span><span class="op" id="8478546">:</span>&nbsp;<span class="op" id="8478548">[</span><span class="op" id="8478549">]</span><span class="op" id="8478550">[</span><span class="op" id="8478551">]</span><span class="builtintype" id="8478552">string</span><span class="op" id="8478558">{</span><span class="op" id="8478559">{</span><span class="string" id="8478560">&#34;abc\rdef&#34;</span><span class="op" id="8478570">}</span><span class="op" id="8478571">}</span><span class="op" id="8478572">,</span>&nbsp;<span class="ident" id="8478574">Output</span><span class="op" id="8478580">:</span>&nbsp;<span class="string" id="8478582">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="8478598">,</span>&nbsp;<span class="ident" id="8478600">UseCRLF</span><span class="op" id="8478607">:</span>&nbsp;<span class="builtintype" id="8478609">true</span><span class="op" id="8478613">}</span><span class="op" id="8478614">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478617">{</span><span class="ident" id="8478618">Input</span><span class="op" id="8478623">:</span>&nbsp;<span class="op" id="8478625">[</span><span class="op" id="8478626">]</span><span class="op" id="8478627">[</span><span class="op" id="8478628">]</span><span class="builtintype" id="8478629">string</span><span class="op" id="8478635">{</span><span class="op" id="8478636">{</span><span class="string" id="8478637">&#34;abc\rdef&#34;</span><span class="op" id="8478647">}</span><span class="op" id="8478648">}</span><span class="op" id="8478649">,</span>&nbsp;<span class="ident" id="8478651">Output</span><span class="op" id="8478657">:</span>&nbsp;<span class="string" id="8478659">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="8478675">,</span>&nbsp;<span class="ident" id="8478677">UseCRLF</span><span class="op" id="8478684">:</span>&nbsp;<span class="builtintype" id="8478686">false</span><span class="op" id="8478691">}</span><span class="op" id="8478692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478695">{</span><span class="ident" id="8478696">Input</span><span class="op" id="8478701">:</span>&nbsp;<span class="op" id="8478703">[</span><span class="op" id="8478704">]</span><span class="op" id="8478705">[</span><span class="op" id="8478706">]</span><span class="builtintype" id="8478707">string</span><span class="op" id="8478713">{</span><span class="op" id="8478714">{</span><span class="string" id="8478715">&#34;&#34;</span><span class="op" id="8478717">}</span><span class="op" id="8478718">}</span><span class="op" id="8478719">,</span>&nbsp;<span class="ident" id="8478721">Output</span><span class="op" id="8478727">:</span>&nbsp;<span class="string" id="8478729">&#34;\n&#34;</span><span class="op" id="8478733">}</span><span class="op" id="8478734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478737">{</span><span class="ident" id="8478738">Input</span><span class="op" id="8478743">:</span>&nbsp;<span class="op" id="8478745">[</span><span class="op" id="8478746">]</span><span class="op" id="8478747">[</span><span class="op" id="8478748">]</span><span class="builtintype" id="8478749">string</span><span class="op" id="8478755">{</span><span class="op" id="8478756">{</span><span class="string" id="8478757">&#34;&#34;</span><span class="op" id="8478759">,</span>&nbsp;<span class="string" id="8478761">&#34;&#34;</span><span class="op" id="8478763">}</span><span class="op" id="8478764">}</span><span class="op" id="8478765">,</span>&nbsp;<span class="ident" id="8478767">Output</span><span class="op" id="8478773">:</span>&nbsp;<span class="string" id="8478775">&#34;,\n&#34;</span><span class="op" id="8478780">}</span><span class="op" id="8478781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478784">{</span><span class="ident" id="8478785">Input</span><span class="op" id="8478790">:</span>&nbsp;<span class="op" id="8478792">[</span><span class="op" id="8478793">]</span><span class="op" id="8478794">[</span><span class="op" id="8478795">]</span><span class="builtintype" id="8478796">string</span><span class="op" id="8478802">{</span><span class="op" id="8478803">{</span><span class="string" id="8478804">&#34;&#34;</span><span class="op" id="8478806">,</span>&nbsp;<span class="string" id="8478808">&#34;&#34;</span><span class="op" id="8478810">,</span>&nbsp;<span class="string" id="8478812">&#34;&#34;</span><span class="op" id="8478814">}</span><span class="op" id="8478815">}</span><span class="op" id="8478816">,</span>&nbsp;<span class="ident" id="8478818">Output</span><span class="op" id="8478824">:</span>&nbsp;<span class="string" id="8478826">&#34;,,\n&#34;</span><span class="op" id="8478832">}</span><span class="op" id="8478833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478836">{</span><span class="ident" id="8478837">Input</span><span class="op" id="8478842">:</span>&nbsp;<span class="op" id="8478844">[</span><span class="op" id="8478845">]</span><span class="op" id="8478846">[</span><span class="op" id="8478847">]</span><span class="builtintype" id="8478848">string</span><span class="op" id="8478854">{</span><span class="op" id="8478855">{</span><span class="string" id="8478856">&#34;&#34;</span><span class="op" id="8478858">,</span>&nbsp;<span class="string" id="8478860">&#34;&#34;</span><span class="op" id="8478862">,</span>&nbsp;<span class="string" id="8478864">&#34;a&#34;</span><span class="op" id="8478867">}</span><span class="op" id="8478868">}</span><span class="op" id="8478869">,</span>&nbsp;<span class="ident" id="8478871">Output</span><span class="op" id="8478877">:</span>&nbsp;<span class="string" id="8478879">&#34;,,a\n&#34;</span><span class="op" id="8478886">}</span><span class="op" id="8478887">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478890">{</span><span class="ident" id="8478891">Input</span><span class="op" id="8478896">:</span>&nbsp;<span class="op" id="8478898">[</span><span class="op" id="8478899">]</span><span class="op" id="8478900">[</span><span class="op" id="8478901">]</span><span class="builtintype" id="8478902">string</span><span class="op" id="8478908">{</span><span class="op" id="8478909">{</span><span class="string" id="8478910">&#34;&#34;</span><span class="op" id="8478912">,</span>&nbsp;<span class="string" id="8478914">&#34;a&#34;</span><span class="op" id="8478917">,</span>&nbsp;<span class="string" id="8478919">&#34;&#34;</span><span class="op" id="8478921">}</span><span class="op" id="8478922">}</span><span class="op" id="8478923">,</span>&nbsp;<span class="ident" id="8478925">Output</span><span class="op" id="8478931">:</span>&nbsp;<span class="string" id="8478933">&#34;,a,\n&#34;</span><span class="op" id="8478940">}</span><span class="op" id="8478941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8478944">{</span><span class="ident" id="8478945">Input</span><span class="op" id="8478950">:</span>&nbsp;<span class="op" id="8478952">[</span><span class="op" id="8478953">]</span><span class="op" id="8478954">[</span><span class="op" id="8478955">]</span><span class="builtintype" id="8478956">string</span><span class="op" id="8478962">{</span><span class="op" id="8478963">{</span><span class="string" id="8478964">&#34;&#34;</span><span class="op" id="8478966">,</span>&nbsp;<span class="string" id="8478968">&#34;a&#34;</span><span class="op" id="8478971">,</span>&nbsp;<span class="string" id="8478973">&#34;a&#34;</span><span class="op" id="8478976">}</span><span class="op" id="8478977">}</span><span class="op" id="8478978">,</span>&nbsp;<span class="ident" id="8478980">Output</span><span class="op" id="8478986">:</span>&nbsp;<span class="string" id="8478988">&#34;,a,a\n&#34;</span><span class="op" id="8478996">}</span><span class="op" id="8478997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479000">{</span><span class="ident" id="8479001">Input</span><span class="op" id="8479006">:</span>&nbsp;<span class="op" id="8479008">[</span><span class="op" id="8479009">]</span><span class="op" id="8479010">[</span><span class="op" id="8479011">]</span><span class="builtintype" id="8479012">string</span><span class="op" id="8479018">{</span><span class="op" id="8479019">{</span><span class="string" id="8479020">&#34;a&#34;</span><span class="op" id="8479023">,</span>&nbsp;<span class="string" id="8479025">&#34;&#34;</span><span class="op" id="8479027">,</span>&nbsp;<span class="string" id="8479029">&#34;&#34;</span><span class="op" id="8479031">}</span><span class="op" id="8479032">}</span><span class="op" id="8479033">,</span>&nbsp;<span class="ident" id="8479035">Output</span><span class="op" id="8479041">:</span>&nbsp;<span class="string" id="8479043">&#34;a,,\n&#34;</span><span class="op" id="8479050">}</span><span class="op" id="8479051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479054">{</span><span class="ident" id="8479055">Input</span><span class="op" id="8479060">:</span>&nbsp;<span class="op" id="8479062">[</span><span class="op" id="8479063">]</span><span class="op" id="8479064">[</span><span class="op" id="8479065">]</span><span class="builtintype" id="8479066">string</span><span class="op" id="8479072">{</span><span class="op" id="8479073">{</span><span class="string" id="8479074">&#34;a&#34;</span><span class="op" id="8479077">,</span>&nbsp;<span class="string" id="8479079">&#34;&#34;</span><span class="op" id="8479081">,</span>&nbsp;<span class="string" id="8479083">&#34;a&#34;</span><span class="op" id="8479086">}</span><span class="op" id="8479087">}</span><span class="op" id="8479088">,</span>&nbsp;<span class="ident" id="8479090">Output</span><span class="op" id="8479096">:</span>&nbsp;<span class="string" id="8479098">&#34;a,,a\n&#34;</span><span class="op" id="8479106">}</span><span class="op" id="8479107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479110">{</span><span class="ident" id="8479111">Input</span><span class="op" id="8479116">:</span>&nbsp;<span class="op" id="8479118">[</span><span class="op" id="8479119">]</span><span class="op" id="8479120">[</span><span class="op" id="8479121">]</span><span class="builtintype" id="8479122">string</span><span class="op" id="8479128">{</span><span class="op" id="8479129">{</span><span class="string" id="8479130">&#34;a&#34;</span><span class="op" id="8479133">,</span>&nbsp;<span class="string" id="8479135">&#34;a&#34;</span><span class="op" id="8479138">,</span>&nbsp;<span class="string" id="8479140">&#34;&#34;</span><span class="op" id="8479142">}</span><span class="op" id="8479143">}</span><span class="op" id="8479144">,</span>&nbsp;<span class="ident" id="8479146">Output</span><span class="op" id="8479152">:</span>&nbsp;<span class="string" id="8479154">&#34;a,a,\n&#34;</span><span class="op" id="8479162">}</span><span class="op" id="8479163">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479166">{</span><span class="ident" id="8479167">Input</span><span class="op" id="8479172">:</span>&nbsp;<span class="op" id="8479174">[</span><span class="op" id="8479175">]</span><span class="op" id="8479176">[</span><span class="op" id="8479177">]</span><span class="builtintype" id="8479178">string</span><span class="op" id="8479184">{</span><span class="op" id="8479185">{</span><span class="string" id="8479186">&#34;a&#34;</span><span class="op" id="8479189">,</span>&nbsp;<span class="string" id="8479191">&#34;a&#34;</span><span class="op" id="8479194">,</span>&nbsp;<span class="string" id="8479196">&#34;a&#34;</span><span class="op" id="8479199">}</span><span class="op" id="8479200">}</span><span class="op" id="8479201">,</span>&nbsp;<span class="ident" id="8479203">Output</span><span class="op" id="8479209">:</span>&nbsp;<span class="string" id="8479211">&#34;a,a,a\n&#34;</span><span class="op" id="8479220">}</span><span class="op" id="8479221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479224">{</span><span class="ident" id="8479225">Input</span><span class="op" id="8479230">:</span>&nbsp;<span class="op" id="8479232">[</span><span class="op" id="8479233">]</span><span class="op" id="8479234">[</span><span class="op" id="8479235">]</span><span class="builtintype" id="8479236">string</span><span class="op" id="8479242">{</span><span class="op" id="8479243">{</span><span class="string" id="8479244">`\.`</span><span class="op" id="8479248">}</span><span class="op" id="8479249">}</span><span class="op" id="8479250">,</span>&nbsp;<span class="ident" id="8479252">Output</span><span class="op" id="8479258">:</span>&nbsp;<span class="string" id="8479260">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="8479271">}</span><span class="op" id="8479272">,</span><br>
<span class="lineno"></span><span class="op" id="8479274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8479277">func</span>&nbsp;<span class="ident" id="8479282">TestWrite</span><span class="op" id="8479291">(</span><span class="ident" id="8479292">t</span>&nbsp;<span class="op" id="8479294">*</span><span class="ident" id="8479295">testing</span><span class="op" id="8479302">.</span><span class="ident" id="8479303">T</span><span class="op" id="8479304">)</span>&nbsp;<span class="op" id="8479306">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8479309">for</span>&nbsp;<span class="ident" id="8479313">n</span><span class="op" id="8479314">,</span>&nbsp;<span class="ident" id="8479316">tt</span>&nbsp;<span class="op" id="8479319">:=</span>&nbsp;<span class="keyword" id="8479322">range</span>&nbsp;<span class="ident" id="8479328">writeTests</span>&nbsp;<span class="op" id="8479339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479343">b</span>&nbsp;<span class="op" id="8479345">:=</span>&nbsp;<span class="op" id="8479348">&amp;</span><span class="ident" id="8479349">bytes</span><span class="op" id="8479354">.</span><span class="ident" id="8479355">Buffer</span><span class="op" id="8479361">{</span><span class="op" id="8479362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479366">f</span>&nbsp;<span class="op" id="8479368">:=</span>&nbsp;<span class="ident" id="8479371">NewWriter</span><span class="op" id="8479380">(</span><span class="ident" id="8479381">b</span><span class="op" id="8479382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479386">f</span><span class="op" id="8479387">.</span><span class="ident" id="8479388">UseCRLF</span>&nbsp;<span class="op" id="8479396">=</span>&nbsp;<span class="ident" id="8479398">tt</span><span class="op" id="8479400">.</span><span class="ident" id="8479401">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479411">err</span>&nbsp;<span class="op" id="8479415">:=</span>&nbsp;<span class="ident" id="8479418">f</span><span class="op" id="8479419">.</span><span class="ident" id="8479420">WriteAll</span><span class="op" id="8479428">(</span><span class="ident" id="8479429">tt</span><span class="op" id="8479431">.</span><span class="ident" id="8479432">Input</span><span class="op" id="8479437">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8479441">if</span>&nbsp;<span class="ident" id="8479444">err</span>&nbsp;<span class="op" id="8479448">!=</span>&nbsp;<span class="builtintype" id="8479451">nil</span>&nbsp;<span class="op" id="8479455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479460">t</span><span class="op" id="8479461">.</span><span class="ident" id="8479462">Errorf</span><span class="op" id="8479468">(</span><span class="string" id="8479469">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8479493">,</span>&nbsp;<span class="ident" id="8479495">err</span><span class="op" id="8479498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479506">out</span>&nbsp;<span class="op" id="8479510">:=</span>&nbsp;<span class="ident" id="8479513">b</span><span class="op" id="8479514">.</span><span class="ident" id="8479515">String</span><span class="op" id="8479521">(</span><span class="op" id="8479522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8479526">if</span>&nbsp;<span class="ident" id="8479529">out</span>&nbsp;<span class="op" id="8479533">!=</span>&nbsp;<span class="ident" id="8479536">tt</span><span class="op" id="8479538">.</span><span class="ident" id="8479539">Output</span>&nbsp;<span class="op" id="8479546">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479551">t</span><span class="op" id="8479552">.</span><span class="ident" id="8479553">Errorf</span><span class="op" id="8479559">(</span><span class="string" id="8479560">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8479581">,</span>&nbsp;<span class="ident" id="8479583">n</span><span class="op" id="8479584">,</span>&nbsp;<span class="ident" id="8479586">out</span><span class="op" id="8479589">,</span>&nbsp;<span class="ident" id="8479591">tt</span><span class="op" id="8479593">.</span><span class="ident" id="8479594">Output</span><span class="op" id="8479600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479607">}</span><br>
<span class="lineno"></span><span class="op" id="8479609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8479612">type</span>&nbsp;<span class="ident" id="8479617">errorWriter</span>&nbsp;<span class="keyword" id="8479629">struct</span><span class="op" id="8479635">{</span><span class="op" id="8479636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8479639">func</span>&nbsp;<span class="op" id="8479644">(</span><span class="ident" id="8479645">e</span>&nbsp;<span class="ident" id="8479647">errorWriter</span><span class="op" id="8479658">)</span>&nbsp;<span class="ident" id="8479660">Write</span><span class="op" id="8479665">(</span><span class="ident" id="8479666">b</span>&nbsp;<span class="op" id="8479668">[</span><span class="op" id="8479669">]</span><span class="builtintype" id="8479670">byte</span><span class="op" id="8479674">)</span>&nbsp;<span class="op" id="8479676">(</span><span class="builtintype" id="8479677">int</span><span class="op" id="8479680">,</span>&nbsp;<span class="builtintype" id="8479682">error</span><span class="op" id="8479687">)</span>&nbsp;<span class="op" id="8479689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8479692">return</span>&nbsp;<span class="num" id="8479699">0</span><span class="op" id="8479700">,</span>&nbsp;<span class="ident" id="8479702">errors</span><span class="op" id="8479708">.</span><span class="ident" id="8479709">New</span><span class="op" id="8479712">(</span><span class="string" id="8479713">&#34;Test&#34;</span><span class="op" id="8479719">)</span><br>
<span class="lineno"></span><span class="op" id="8479721">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8479724">func</span>&nbsp;<span class="ident" id="8479729">TestError</span><span class="op" id="8479738">(</span><span class="ident" id="8479739">t</span>&nbsp;<span class="op" id="8479741">*</span><span class="ident" id="8479742">testing</span><span class="op" id="8479749">.</span><span class="ident" id="8479750">T</span><span class="op" id="8479751">)</span>&nbsp;<span class="op" id="8479753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479756">b</span>&nbsp;<span class="op" id="8479758">:=</span>&nbsp;<span class="op" id="8479761">&amp;</span><span class="ident" id="8479762">bytes</span><span class="op" id="8479767">.</span><span class="ident" id="8479768">Buffer</span><span class="op" id="8479774">{</span><span class="op" id="8479775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479778">f</span>&nbsp;<span class="op" id="8479780">:=</span>&nbsp;<span class="ident" id="8479783">NewWriter</span><span class="op" id="8479792">(</span><span class="ident" id="8479793">b</span><span class="op" id="8479794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479797">f</span><span class="op" id="8479798">.</span><span class="ident" id="8479799">Write</span><span class="op" id="8479804">(</span><span class="op" id="8479805">[</span><span class="op" id="8479806">]</span><span class="builtintype" id="8479807">string</span><span class="op" id="8479813">{</span><span class="string" id="8479814">&#34;abc&#34;</span><span class="op" id="8479819">}</span><span class="op" id="8479820">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479823">f</span><span class="op" id="8479824">.</span><span class="ident" id="8479825">Flush</span><span class="op" id="8479830">(</span><span class="op" id="8479831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479834">err</span>&nbsp;<span class="op" id="8479838">:=</span>&nbsp;<span class="ident" id="8479841">f</span><span class="op" id="8479842">.</span><span class="ident" id="8479843">Error</span><span class="op" id="8479848">(</span><span class="op" id="8479849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8479853">if</span>&nbsp;<span class="ident" id="8479856">err</span>&nbsp;<span class="op" id="8479860">!=</span>&nbsp;<span class="builtintype" id="8479863">nil</span>&nbsp;<span class="op" id="8479867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479871">t</span><span class="op" id="8479872">.</span><span class="ident" id="8479873">Errorf</span><span class="op" id="8479879">(</span><span class="string" id="8479880">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8479904">,</span>&nbsp;<span class="ident" id="8479906">err</span><span class="op" id="8479909">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8479912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479916">f</span>&nbsp;<span class="op" id="8479918">=</span>&nbsp;<span class="ident" id="8479920">NewWriter</span><span class="op" id="8479929">(</span><span class="ident" id="8479930">errorWriter</span><span class="op" id="8479941">{</span><span class="op" id="8479942">}</span><span class="op" id="8479943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479946">f</span><span class="op" id="8479947">.</span><span class="ident" id="8479948">Write</span><span class="op" id="8479953">(</span><span class="op" id="8479954">[</span><span class="op" id="8479955">]</span><span class="builtintype" id="8479956">string</span><span class="op" id="8479962">{</span><span class="string" id="8479963">&#34;abc&#34;</span><span class="op" id="8479968">}</span><span class="op" id="8479969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479972">f</span><span class="op" id="8479973">.</span><span class="ident" id="8479974">Flush</span><span class="op" id="8479979">(</span><span class="op" id="8479980">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8479983">err</span>&nbsp;<span class="op" id="8479987">=</span>&nbsp;<span class="ident" id="8479989">f</span><span class="op" id="8479990">.</span><span class="ident" id="8479991">Error</span><span class="op" id="8479996">(</span><span class="op" id="8479997">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8480001">if</span>&nbsp;<span class="ident" id="8480004">err</span>&nbsp;<span class="op" id="8480008">==</span>&nbsp;<span class="builtintype" id="8480011">nil</span>&nbsp;<span class="op" id="8480015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8480019">t</span><span class="op" id="8480020">.</span><span class="ident" id="8480021">Error</span><span class="op" id="8480026">(</span><span class="string" id="8480027">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="8480052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8480055">}</span><br>
<span class="lineno">85</span><span class="op" id="8480057">}</span>
</div>
</body>
</html>
