<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html" class="current">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3091795">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3091850">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3091904">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3091955">package</span>&nbsp;<span class="ident" id="3091963">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3091968">import</span>&nbsp;<span class="op" id="3091975">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3091978">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3091991">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3091998">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092001">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3092044">type</span>&nbsp;<span class="ident" id="3092049">DNSError</span>&nbsp;<span class="keyword" id="3092058">struct</span>&nbsp;<span class="op" id="3092065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092068">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3092078">string</span>&nbsp;<span class="comment" id="3092085">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092114">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3092124">string</span>&nbsp;<span class="comment" id="3092131">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092151">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3092161">string</span>&nbsp;<span class="comment" id="3092168">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092184">IsTimeout</span>&nbsp;<span class="builtintype" id="3092194">bool</span><br>
<span class="lineno"></span><span class="op" id="3092199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="3092202">func</span>&nbsp;<span class="op" id="3092207">(</span><span class="ident" id="3092208">e</span>&nbsp;<span class="op" id="3092210">*</span><span class="ident" id="3092211">DNSError</span><span class="op" id="3092219">)</span>&nbsp;<span class="ident" id="3092221">Error</span><span class="op" id="3092226">(</span><span class="op" id="3092227">)</span>&nbsp;<span class="builtintype" id="3092229">string</span>&nbsp;<span class="op" id="3092236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092239">if</span>&nbsp;<span class="ident" id="3092242">e</span>&nbsp;<span class="op" id="3092244">==</span>&nbsp;<span class="ident" id="3092247">nil</span>&nbsp;<span class="op" id="3092251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092255">return</span>&nbsp;<span class="string" id="3092262">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092274">s</span>&nbsp;<span class="op" id="3092276">:=</span>&nbsp;<span class="string" id="3092279">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="3092289">+</span>&nbsp;<span class="ident" id="3092291">e</span><span class="op" id="3092292">.</span><span class="ident" id="3092293">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092299">if</span>&nbsp;<span class="ident" id="3092302">e</span><span class="op" id="3092303">.</span><span class="ident" id="3092304">Server</span>&nbsp;<span class="op" id="3092311">!=</span>&nbsp;<span class="string" id="3092314">&#34;&#34;</span>&nbsp;<span class="op" id="3092317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092321">s</span>&nbsp;<span class="op" id="3092323">+=</span>&nbsp;<span class="string" id="3092326">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="3092333">+</span>&nbsp;<span class="ident" id="3092335">e</span><span class="op" id="3092336">.</span><span class="ident" id="3092337">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092348">s</span>&nbsp;<span class="op" id="3092350">+=</span>&nbsp;<span class="string" id="3092353">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3092358">+</span>&nbsp;<span class="ident" id="3092360">e</span><span class="op" id="3092361">.</span><span class="ident" id="3092362">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092367">return</span>&nbsp;<span class="ident" id="3092374">s</span><br>
<span class="lineno">30</span><span class="op" id="3092376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3092379">func</span>&nbsp;<span class="op" id="3092384">(</span><span class="ident" id="3092385">e</span>&nbsp;<span class="op" id="3092387">*</span><span class="ident" id="3092388">DNSError</span><span class="op" id="3092396">)</span>&nbsp;<span class="ident" id="3092398">Timeout</span><span class="op" id="3092405">(</span><span class="op" id="3092406">)</span>&nbsp;<span class="builtintype" id="3092408">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3092415">{</span>&nbsp;<span class="keyword" id="3092417">return</span>&nbsp;<span class="ident" id="3092424">e</span><span class="op" id="3092425">.</span><span class="ident" id="3092426">IsTimeout</span>&nbsp;<span class="op" id="3092436">}</span><br>
<span class="lineno"></span><span class="keyword" id="3092438">func</span>&nbsp;<span class="op" id="3092443">(</span><span class="ident" id="3092444">e</span>&nbsp;<span class="op" id="3092446">*</span><span class="ident" id="3092447">DNSError</span><span class="op" id="3092455">)</span>&nbsp;<span class="ident" id="3092457">Temporary</span><span class="op" id="3092466">(</span><span class="op" id="3092467">)</span>&nbsp;<span class="builtintype" id="3092469">bool</span>&nbsp;<span class="op" id="3092474">{</span>&nbsp;<span class="keyword" id="3092476">return</span>&nbsp;<span class="ident" id="3092483">e</span><span class="op" id="3092484">.</span><span class="ident" id="3092485">IsTimeout</span>&nbsp;<span class="op" id="3092495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="3092498">const</span>&nbsp;<span class="ident" id="3092504">noSuchHost</span>&nbsp;<span class="op" id="3092515">=</span>&nbsp;<span class="string" id="3092517">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092533">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3092606">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="3092684">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="3092712">func</span>&nbsp;<span class="ident" id="3092717">reverseaddr</span><span class="op" id="3092728">(</span><span class="ident" id="3092729">addr</span>&nbsp;<span class="builtintype" id="3092734">string</span><span class="op" id="3092740">)</span>&nbsp;<span class="op" id="3092742">(</span><span class="ident" id="3092743">arpa</span>&nbsp;<span class="builtintype" id="3092748">string</span><span class="op" id="3092754">,</span>&nbsp;<span class="ident" id="3092756">err</span>&nbsp;<span class="builtintype" id="3092760">error</span><span class="op" id="3092765">)</span>&nbsp;<span class="op" id="3092767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092770">ip</span>&nbsp;<span class="op" id="3092773">:=</span>&nbsp;<span class="ident" id="3092776">ParseIP</span><span class="op" id="3092783">(</span><span class="ident" id="3092784">addr</span><span class="op" id="3092788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092791">if</span>&nbsp;<span class="ident" id="3092794">ip</span>&nbsp;<span class="op" id="3092797">==</span>&nbsp;<span class="ident" id="3092800">nil</span>&nbsp;<span class="op" id="3092804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092808">return</span>&nbsp;<span class="string" id="3092815">&#34;&#34;</span><span class="op" id="3092817">,</span>&nbsp;<span class="op" id="3092819">&amp;</span><span class="ident" id="3092820">DNSError</span><span class="op" id="3092828">{</span><span class="ident" id="3092829">Err</span><span class="op" id="3092832">:</span>&nbsp;<span class="string" id="3092834">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="3092856">,</span>&nbsp;<span class="ident" id="3092858">Name</span><span class="op" id="3092862">:</span>&nbsp;<span class="ident" id="3092864">addr</span><span class="op" id="3092868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092871">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092874">if</span>&nbsp;<span class="ident" id="3092877">ip</span><span class="op" id="3092879">.</span><span class="ident" id="3092880">To4</span><span class="op" id="3092883">(</span><span class="op" id="3092884">)</span>&nbsp;<span class="op" id="3092886">!=</span>&nbsp;<span class="ident" id="3092889">nil</span>&nbsp;<span class="op" id="3092893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092897">return</span>&nbsp;<span class="ident" id="3092904">itoa</span><span class="op" id="3092908">(</span><span class="builtintype" id="3092909">int</span><span class="op" id="3092912">(</span><span class="ident" id="3092913">ip</span><span class="op" id="3092915">[</span><span class="num" id="3092916">15</span><span class="op" id="3092918">]</span><span class="op" id="3092919">)</span><span class="op" id="3092920">)</span>&nbsp;<span class="op" id="3092922">+</span>&nbsp;<span class="string" id="3092924">&#34;.&#34;</span>&nbsp;<span class="op" id="3092928">+</span>&nbsp;<span class="ident" id="3092930">itoa</span><span class="op" id="3092934">(</span><span class="builtintype" id="3092935">int</span><span class="op" id="3092938">(</span><span class="ident" id="3092939">ip</span><span class="op" id="3092941">[</span><span class="num" id="3092942">14</span><span class="op" id="3092944">]</span><span class="op" id="3092945">)</span><span class="op" id="3092946">)</span>&nbsp;<span class="op" id="3092948">+</span>&nbsp;<span class="string" id="3092950">&#34;.&#34;</span>&nbsp;<span class="op" id="3092954">+</span>&nbsp;<span class="ident" id="3092956">itoa</span><span class="op" id="3092960">(</span><span class="builtintype" id="3092961">int</span><span class="op" id="3092964">(</span><span class="ident" id="3092965">ip</span><span class="op" id="3092967">[</span><span class="num" id="3092968">13</span><span class="op" id="3092970">]</span><span class="op" id="3092971">)</span><span class="op" id="3092972">)</span>&nbsp;<span class="op" id="3092974">+</span>&nbsp;<span class="string" id="3092976">&#34;.&#34;</span>&nbsp;<span class="op" id="3092980">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092985">itoa</span><span class="op" id="3092989">(</span><span class="builtintype" id="3092990">int</span><span class="op" id="3092993">(</span><span class="ident" id="3092994">ip</span><span class="op" id="3092996">[</span><span class="num" id="3092997">12</span><span class="op" id="3092999">]</span><span class="op" id="3093000">)</span><span class="op" id="3093001">)</span>&nbsp;<span class="op" id="3093003">+</span>&nbsp;<span class="string" id="3093005">&#34;.in-addr.arpa.&#34;</span><span class="op" id="3093021">,</span>&nbsp;<span class="ident" id="3093023">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093031">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093048">buf</span>&nbsp;<span class="op" id="3093052">:=</span>&nbsp;<span class="builtinfunc" id="3093055">make</span><span class="op" id="3093059">(</span><span class="op" id="3093060">[</span><span class="op" id="3093061">]</span><span class="builtintype" id="3093062">byte</span><span class="op" id="3093066">,</span>&nbsp;<span class="num" id="3093068">0</span><span class="op" id="3093069">,</span>&nbsp;<span class="builtinfunc" id="3093071">len</span><span class="op" id="3093074">(</span><span class="ident" id="3093075">ip</span><span class="op" id="3093077">)</span><span class="op" id="3093078">*</span><span class="num" id="3093079">4</span><span class="op" id="3093080">+</span><span class="builtinfunc" id="3093081">len</span><span class="op" id="3093084">(</span><span class="string" id="3093085">&#34;ip6.arpa.&#34;</span><span class="op" id="3093096">)</span><span class="op" id="3093097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093100">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093138">for</span>&nbsp;<span class="ident" id="3093142">i</span>&nbsp;<span class="op" id="3093144">:=</span>&nbsp;<span class="builtinfunc" id="3093147">len</span><span class="op" id="3093150">(</span><span class="ident" id="3093151">ip</span><span class="op" id="3093153">)</span>&nbsp;<span class="op" id="3093155">-</span>&nbsp;<span class="num" id="3093157">1</span><span class="op" id="3093158">;</span>&nbsp;<span class="ident" id="3093160">i</span>&nbsp;<span class="op" id="3093162">&gt;=</span>&nbsp;<span class="num" id="3093165">0</span><span class="op" id="3093166">;</span>&nbsp;<span class="ident" id="3093168">i</span><span class="op" id="3093169">--</span>&nbsp;<span class="op" id="3093172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093176">v</span>&nbsp;<span class="op" id="3093178">:=</span>&nbsp;<span class="ident" id="3093181">ip</span><span class="op" id="3093183">[</span><span class="ident" id="3093184">i</span><span class="op" id="3093185">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093189">buf</span>&nbsp;<span class="op" id="3093193">=</span>&nbsp;<span class="builtinfunc" id="3093195">append</span><span class="op" id="3093201">(</span><span class="ident" id="3093202">buf</span><span class="op" id="3093205">,</span>&nbsp;<span class="ident" id="3093207">hexDigit</span><span class="op" id="3093215">[</span><span class="ident" id="3093216">v</span><span class="op" id="3093217">&amp;</span><span class="num" id="3093218">0xF</span><span class="op" id="3093221">]</span><span class="op" id="3093222">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093226">buf</span>&nbsp;<span class="op" id="3093230">=</span>&nbsp;<span class="builtinfunc" id="3093232">append</span><span class="op" id="3093238">(</span><span class="ident" id="3093239">buf</span><span class="op" id="3093242">,</span>&nbsp;<span class="string" id="3093244">&#39;.&#39;</span><span class="op" id="3093247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093251">buf</span>&nbsp;<span class="op" id="3093255">=</span>&nbsp;<span class="builtinfunc" id="3093257">append</span><span class="op" id="3093263">(</span><span class="ident" id="3093264">buf</span><span class="op" id="3093267">,</span>&nbsp;<span class="ident" id="3093269">hexDigit</span><span class="op" id="3093277">[</span><span class="ident" id="3093278">v</span><span class="op" id="3093279">&gt;&gt;</span><span class="num" id="3093281">4</span><span class="op" id="3093282">]</span><span class="op" id="3093283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093287">buf</span>&nbsp;<span class="op" id="3093291">=</span>&nbsp;<span class="builtinfunc" id="3093293">append</span><span class="op" id="3093299">(</span><span class="ident" id="3093300">buf</span><span class="op" id="3093303">,</span>&nbsp;<span class="string" id="3093305">&#39;.&#39;</span><span class="op" id="3093308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093314">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093378">buf</span>&nbsp;<span class="op" id="3093382">=</span>&nbsp;<span class="builtinfunc" id="3093384">append</span><span class="op" id="3093390">(</span><span class="ident" id="3093391">buf</span><span class="op" id="3093394">,</span>&nbsp;<span class="string" id="3093396">&#34;ip6.arpa.&#34;</span><span class="op" id="3093407">...</span><span class="op" id="3093410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093413">return</span>&nbsp;<span class="builtintype" id="3093420">string</span><span class="op" id="3093426">(</span><span class="ident" id="3093427">buf</span><span class="op" id="3093430">)</span><span class="op" id="3093431">,</span>&nbsp;<span class="ident" id="3093433">nil</span><br>
<span class="lineno"></span><span class="op" id="3093437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3093440">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="3093480">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3093523">func</span>&nbsp;<span class="ident" id="3093528">answer</span><span class="op" id="3093534">(</span><span class="ident" id="3093535">name</span><span class="op" id="3093539">,</span>&nbsp;<span class="ident" id="3093541">server</span>&nbsp;<span class="builtintype" id="3093548">string</span><span class="op" id="3093554">,</span>&nbsp;<span class="ident" id="3093556">dns</span>&nbsp;<span class="op" id="3093560">*</span><span class="ident" id="3093561">dnsMsg</span><span class="op" id="3093567">,</span>&nbsp;<span class="ident" id="3093569">qtype</span>&nbsp;<span class="builtintype" id="3093575">uint16</span><span class="op" id="3093581">)</span>&nbsp;<span class="op" id="3093583">(</span><span class="ident" id="3093584">cname</span>&nbsp;<span class="builtintype" id="3093590">string</span><span class="op" id="3093596">,</span>&nbsp;<span class="ident" id="3093598">addrs</span>&nbsp;<span class="op" id="3093604">[</span><span class="op" id="3093605">]</span><span class="ident" id="3093606">dnsRR</span><span class="op" id="3093611">,</span>&nbsp;<span class="ident" id="3093613">err</span>&nbsp;<span class="builtintype" id="3093617">error</span><span class="op" id="3093622">)</span>&nbsp;<span class="op" id="3093624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093627">addrs</span>&nbsp;<span class="op" id="3093633">=</span>&nbsp;<span class="builtinfunc" id="3093635">make</span><span class="op" id="3093639">(</span><span class="op" id="3093640">[</span><span class="op" id="3093641">]</span><span class="ident" id="3093642">dnsRR</span><span class="op" id="3093647">,</span>&nbsp;<span class="num" id="3093649">0</span><span class="op" id="3093650">,</span>&nbsp;<span class="builtinfunc" id="3093652">len</span><span class="op" id="3093655">(</span><span class="ident" id="3093656">dns</span><span class="op" id="3093659">.</span><span class="ident" id="3093660">answer</span><span class="op" id="3093666">)</span><span class="op" id="3093667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093671">if</span>&nbsp;<span class="ident" id="3093674">dns</span><span class="op" id="3093677">.</span><span class="ident" id="3093678">rcode</span>&nbsp;<span class="op" id="3093684">==</span>&nbsp;<span class="ident" id="3093687">dnsRcodeNameError</span>&nbsp;<span class="op" id="3093705">&amp;&amp;</span>&nbsp;<span class="ident" id="3093708">dns</span><span class="op" id="3093711">.</span><span class="ident" id="3093712">recursion_available</span>&nbsp;<span class="op" id="3093732">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093736">return</span>&nbsp;<span class="string" id="3093743">&#34;&#34;</span><span class="op" id="3093745">,</span>&nbsp;<span class="ident" id="3093747">nil</span><span class="op" id="3093750">,</span>&nbsp;<span class="op" id="3093752">&amp;</span><span class="ident" id="3093753">DNSError</span><span class="op" id="3093761">{</span><span class="ident" id="3093762">Err</span><span class="op" id="3093765">:</span>&nbsp;<span class="ident" id="3093767">noSuchHost</span><span class="op" id="3093777">,</span>&nbsp;<span class="ident" id="3093779">Name</span><span class="op" id="3093783">:</span>&nbsp;<span class="ident" id="3093785">name</span><span class="op" id="3093789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093795">if</span>&nbsp;<span class="ident" id="3093798">dns</span><span class="op" id="3093801">.</span><span class="ident" id="3093802">rcode</span>&nbsp;<span class="op" id="3093808">!=</span>&nbsp;<span class="ident" id="3093811">dnsRcodeSuccess</span>&nbsp;<span class="op" id="3093827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093831">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093871">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093917">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3093962">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094003">return</span>&nbsp;<span class="string" id="3094010">&#34;&#34;</span><span class="op" id="3094012">,</span>&nbsp;<span class="ident" id="3094014">nil</span><span class="op" id="3094017">,</span>&nbsp;<span class="op" id="3094019">&amp;</span><span class="ident" id="3094020">DNSError</span><span class="op" id="3094028">{</span><span class="ident" id="3094029">Err</span><span class="op" id="3094032">:</span>&nbsp;<span class="string" id="3094034">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="3094054">,</span>&nbsp;<span class="ident" id="3094056">Name</span><span class="op" id="3094060">:</span>&nbsp;<span class="ident" id="3094062">name</span><span class="op" id="3094066">,</span>&nbsp;<span class="ident" id="3094068">Server</span><span class="op" id="3094074">:</span>&nbsp;<span class="ident" id="3094076">server</span><span class="op" id="3094082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094089">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094112">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094173">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094219">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094274">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="3094321">Cname</span><span class="op" id="3094326">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094329">for</span>&nbsp;<span class="ident" id="3094333">cnameloop</span>&nbsp;<span class="op" id="3094343">:=</span>&nbsp;<span class="num" id="3094346">0</span><span class="op" id="3094347">;</span>&nbsp;<span class="ident" id="3094349">cnameloop</span>&nbsp;<span class="op" id="3094359">&lt;</span>&nbsp;<span class="num" id="3094361">10</span><span class="op" id="3094363">;</span>&nbsp;<span class="ident" id="3094365">cnameloop</span><span class="op" id="3094374">++</span>&nbsp;<span class="op" id="3094377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094381">addrs</span>&nbsp;<span class="op" id="3094387">=</span>&nbsp;<span class="ident" id="3094389">addrs</span><span class="op" id="3094394">[</span><span class="num" id="3094395">0</span><span class="op" id="3094396">:</span><span class="num" id="3094397">0</span><span class="op" id="3094398">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094402">for</span>&nbsp;<span class="ident" id="3094406">_</span><span class="op" id="3094407">,</span>&nbsp;<span class="ident" id="3094409">rr</span>&nbsp;<span class="op" id="3094412">:=</span>&nbsp;<span class="keyword" id="3094415">range</span>&nbsp;<span class="ident" id="3094421">dns</span><span class="op" id="3094424">.</span><span class="ident" id="3094425">answer</span>&nbsp;<span class="op" id="3094432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094437">if</span>&nbsp;<span class="ident" id="3094440">_</span><span class="op" id="3094441">,</span>&nbsp;<span class="ident" id="3094443">justHeader</span>&nbsp;<span class="op" id="3094454">:=</span>&nbsp;<span class="ident" id="3094457">rr</span><span class="op" id="3094459">.</span><span class="op" id="3094460">(</span><span class="op" id="3094461">*</span><span class="ident" id="3094462">dnsRR_Header</span><span class="op" id="3094474">)</span><span class="op" id="3094475">;</span>&nbsp;<span class="ident" id="3094477">justHeader</span>&nbsp;<span class="op" id="3094488">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094494">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094532">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094574">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094609">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094640">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094657">h</span>&nbsp;<span class="op" id="3094659">:=</span>&nbsp;<span class="ident" id="3094662">rr</span><span class="op" id="3094664">.</span><span class="ident" id="3094665">Header</span><span class="op" id="3094671">(</span><span class="op" id="3094672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094677">if</span>&nbsp;<span class="ident" id="3094680">h</span><span class="op" id="3094681">.</span><span class="ident" id="3094682">Class</span>&nbsp;<span class="op" id="3094688">==</span>&nbsp;<span class="ident" id="3094691">dnsClassINET</span>&nbsp;<span class="op" id="3094704">&amp;&amp;</span>&nbsp;<span class="ident" id="3094707">h</span><span class="op" id="3094708">.</span><span class="ident" id="3094709">Name</span>&nbsp;<span class="op" id="3094714">==</span>&nbsp;<span class="ident" id="3094717">name</span>&nbsp;<span class="op" id="3094722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094728">switch</span>&nbsp;<span class="ident" id="3094735">h</span><span class="op" id="3094736">.</span><span class="ident" id="3094737">Rrtype</span>&nbsp;<span class="op" id="3094744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094750">case</span>&nbsp;<span class="ident" id="3094755">qtype</span><span class="op" id="3094760">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094767">addrs</span>&nbsp;<span class="op" id="3094773">=</span>&nbsp;<span class="builtinfunc" id="3094775">append</span><span class="op" id="3094781">(</span><span class="ident" id="3094782">addrs</span><span class="op" id="3094787">,</span>&nbsp;<span class="ident" id="3094789">rr</span><span class="op" id="3094791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094797">case</span>&nbsp;<span class="ident" id="3094802">dnsTypeCNAME</span><span class="op" id="3094814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3094821">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3094847">name</span>&nbsp;<span class="op" id="3094852">=</span>&nbsp;<span class="ident" id="3094854">rr</span><span class="op" id="3094856">.</span><span class="op" id="3094857">(</span><span class="op" id="3094858">*</span><span class="ident" id="3094859">dnsRR_CNAME</span><span class="op" id="3094870">)</span><span class="op" id="3094871">.</span><span class="ident" id="3094872">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094883">continue</span>&nbsp;<span class="ident" id="3094892">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3094911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094915">if</span>&nbsp;<span class="builtinfunc" id="3094918">len</span><span class="op" id="3094921">(</span><span class="ident" id="3094922">addrs</span><span class="op" id="3094927">)</span>&nbsp;<span class="op" id="3094929">==</span>&nbsp;<span class="num" id="3094932">0</span>&nbsp;<span class="op" id="3094934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3094939">return</span>&nbsp;<span class="string" id="3094946">&#34;&#34;</span><span class="op" id="3094948">,</span>&nbsp;<span class="ident" id="3094950">nil</span><span class="op" id="3094953">,</span>&nbsp;<span class="op" id="3094955">&amp;</span><span class="ident" id="3094956">DNSError</span><span class="op" id="3094964">{</span><span class="ident" id="3094965">Err</span><span class="op" id="3094968">:</span>&nbsp;<span class="ident" id="3094970">noSuchHost</span><span class="op" id="3094980">,</span>&nbsp;<span class="ident" id="3094982">Name</span><span class="op" id="3094986">:</span>&nbsp;<span class="ident" id="3094988">name</span><span class="op" id="3094992">,</span>&nbsp;<span class="ident" id="3094994">Server</span><span class="op" id="3095000">:</span>&nbsp;<span class="ident" id="3095002">server</span><span class="op" id="3095008">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095016">return</span>&nbsp;<span class="ident" id="3095023">name</span><span class="op" id="3095027">,</span>&nbsp;<span class="ident" id="3095029">addrs</span><span class="op" id="3095034">,</span>&nbsp;<span class="ident" id="3095036">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095045">return</span>&nbsp;<span class="string" id="3095052">&#34;&#34;</span><span class="op" id="3095054">,</span>&nbsp;<span class="ident" id="3095056">nil</span><span class="op" id="3095059">,</span>&nbsp;<span class="op" id="3095061">&amp;</span><span class="ident" id="3095062">DNSError</span><span class="op" id="3095070">{</span><span class="ident" id="3095071">Err</span><span class="op" id="3095074">:</span>&nbsp;<span class="string" id="3095076">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="3095096">,</span>&nbsp;<span class="ident" id="3095098">Name</span><span class="op" id="3095102">:</span>&nbsp;<span class="ident" id="3095104">name</span><span class="op" id="3095108">,</span>&nbsp;<span class="ident" id="3095110">Server</span><span class="op" id="3095116">:</span>&nbsp;<span class="ident" id="3095118">server</span><span class="op" id="3095124">}</span><br>
<span class="lineno">115</span><span class="op" id="3095126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3095129">func</span>&nbsp;<span class="ident" id="3095134">isDomainName</span><span class="op" id="3095146">(</span><span class="ident" id="3095147">s</span>&nbsp;<span class="builtintype" id="3095149">string</span><span class="op" id="3095155">)</span>&nbsp;<span class="builtintype" id="3095157">bool</span>&nbsp;<span class="op" id="3095162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095165">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095193">if</span>&nbsp;<span class="builtinfunc" id="3095196">len</span><span class="op" id="3095199">(</span><span class="ident" id="3095200">s</span><span class="op" id="3095201">)</span>&nbsp;<span class="op" id="3095203">==</span>&nbsp;<span class="num" id="3095206">0</span>&nbsp;<span class="op" id="3095208">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095212">return</span>&nbsp;<span class="builtintype" id="3095219">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095229">if</span>&nbsp;<span class="builtinfunc" id="3095232">len</span><span class="op" id="3095235">(</span><span class="ident" id="3095236">s</span><span class="op" id="3095237">)</span>&nbsp;<span class="op" id="3095239">&gt;</span>&nbsp;<span class="num" id="3095241">255</span>&nbsp;<span class="op" id="3095245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095249">return</span>&nbsp;<span class="builtintype" id="3095256">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095263">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095267">last</span>&nbsp;<span class="op" id="3095272">:=</span>&nbsp;<span class="builtintype" id="3095275">byte</span><span class="op" id="3095279">(</span><span class="string" id="3095280">&#39;.&#39;</span><span class="op" id="3095283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095286">ok</span>&nbsp;<span class="op" id="3095289">:=</span>&nbsp;<span class="builtintype" id="3095292">false</span>&nbsp;<span class="comment" id="3095298">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095331">partlen</span>&nbsp;<span class="op" id="3095339">:=</span>&nbsp;<span class="num" id="3095342">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095345">for</span>&nbsp;<span class="ident" id="3095349">i</span>&nbsp;<span class="op" id="3095351">:=</span>&nbsp;<span class="num" id="3095354">0</span><span class="op" id="3095355">;</span>&nbsp;<span class="ident" id="3095357">i</span>&nbsp;<span class="op" id="3095359">&lt;</span>&nbsp;<span class="builtinfunc" id="3095361">len</span><span class="op" id="3095364">(</span><span class="ident" id="3095365">s</span><span class="op" id="3095366">)</span><span class="op" id="3095367">;</span>&nbsp;<span class="ident" id="3095369">i</span><span class="op" id="3095370">++</span>&nbsp;<span class="op" id="3095373">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095377">c</span>&nbsp;<span class="op" id="3095379">:=</span>&nbsp;<span class="ident" id="3095382">s</span><span class="op" id="3095383">[</span><span class="ident" id="3095384">i</span><span class="op" id="3095385">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095389">switch</span>&nbsp;<span class="op" id="3095396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095400">default</span><span class="op" id="3095407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095412">return</span>&nbsp;<span class="builtintype" id="3095419">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095427">case</span>&nbsp;<span class="string" id="3095432">&#39;a&#39;</span>&nbsp;<span class="op" id="3095436">&lt;=</span>&nbsp;<span class="ident" id="3095439">c</span>&nbsp;<span class="op" id="3095441">&amp;&amp;</span>&nbsp;<span class="ident" id="3095444">c</span>&nbsp;<span class="op" id="3095446">&lt;=</span>&nbsp;<span class="string" id="3095449">&#39;z&#39;</span>&nbsp;<span class="op" id="3095453">||</span>&nbsp;<span class="string" id="3095456">&#39;A&#39;</span>&nbsp;<span class="op" id="3095460">&lt;=</span>&nbsp;<span class="ident" id="3095463">c</span>&nbsp;<span class="op" id="3095465">&amp;&amp;</span>&nbsp;<span class="ident" id="3095468">c</span>&nbsp;<span class="op" id="3095470">&lt;=</span>&nbsp;<span class="string" id="3095473">&#39;Z&#39;</span>&nbsp;<span class="op" id="3095477">||</span>&nbsp;<span class="ident" id="3095480">c</span>&nbsp;<span class="op" id="3095482">==</span>&nbsp;<span class="string" id="3095485">&#39;_&#39;</span><span class="op" id="3095488">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095493">ok</span>&nbsp;<span class="op" id="3095496">=</span>&nbsp;<span class="builtintype" id="3095498">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095506">partlen</span><span class="op" id="3095513">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095518">case</span>&nbsp;<span class="string" id="3095523">&#39;0&#39;</span>&nbsp;<span class="op" id="3095527">&lt;=</span>&nbsp;<span class="ident" id="3095530">c</span>&nbsp;<span class="op" id="3095532">&amp;&amp;</span>&nbsp;<span class="ident" id="3095535">c</span>&nbsp;<span class="op" id="3095537">&lt;=</span>&nbsp;<span class="string" id="3095540">&#39;9&#39;</span><span class="op" id="3095543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095548">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095559">partlen</span><span class="op" id="3095566">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095571">case</span>&nbsp;<span class="ident" id="3095576">c</span>&nbsp;<span class="op" id="3095578">==</span>&nbsp;<span class="string" id="3095581">&#39;-&#39;</span><span class="op" id="3095584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095589">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095627">if</span>&nbsp;<span class="ident" id="3095630">last</span>&nbsp;<span class="op" id="3095635">==</span>&nbsp;<span class="string" id="3095638">&#39;.&#39;</span>&nbsp;<span class="op" id="3095642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095648">return</span>&nbsp;<span class="builtintype" id="3095655">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095664">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095669">partlen</span><span class="op" id="3095676">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095681">case</span>&nbsp;<span class="ident" id="3095686">c</span>&nbsp;<span class="op" id="3095688">==</span>&nbsp;<span class="string" id="3095691">&#39;.&#39;</span><span class="op" id="3095694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3095699">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095742">if</span>&nbsp;<span class="ident" id="3095745">last</span>&nbsp;<span class="op" id="3095750">==</span>&nbsp;<span class="string" id="3095753">&#39;.&#39;</span>&nbsp;<span class="op" id="3095757">||</span>&nbsp;<span class="ident" id="3095760">last</span>&nbsp;<span class="op" id="3095765">==</span>&nbsp;<span class="string" id="3095768">&#39;-&#39;</span>&nbsp;<span class="op" id="3095772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095778">return</span>&nbsp;<span class="builtintype" id="3095785">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095799">if</span>&nbsp;<span class="ident" id="3095802">partlen</span>&nbsp;<span class="op" id="3095810">&gt;</span>&nbsp;<span class="num" id="3095812">63</span>&nbsp;<span class="op" id="3095815">||</span>&nbsp;<span class="ident" id="3095818">partlen</span>&nbsp;<span class="op" id="3095826">==</span>&nbsp;<span class="num" id="3095829">0</span>&nbsp;<span class="op" id="3095831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095837">return</span>&nbsp;<span class="builtintype" id="3095844">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095858">partlen</span>&nbsp;<span class="op" id="3095866">=</span>&nbsp;<span class="num" id="3095868">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3095876">last</span>&nbsp;<span class="op" id="3095881">=</span>&nbsp;<span class="ident" id="3095883">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095889">if</span>&nbsp;<span class="ident" id="3095892">last</span>&nbsp;<span class="op" id="3095897">==</span>&nbsp;<span class="string" id="3095900">&#39;-&#39;</span>&nbsp;<span class="op" id="3095904">||</span>&nbsp;<span class="ident" id="3095907">partlen</span>&nbsp;<span class="op" id="3095915">&gt;</span>&nbsp;<span class="num" id="3095917">63</span>&nbsp;<span class="op" id="3095920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095924">return</span>&nbsp;<span class="builtintype" id="3095931">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3095938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3095942">return</span>&nbsp;<span class="ident" id="3095949">ok</span><br>
<span class="lineno"></span><span class="op" id="3095952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3095955">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3096001">type</span>&nbsp;<span class="ident" id="3096006">SRV</span>&nbsp;<span class="keyword" id="3096010">struct</span>&nbsp;<span class="op" id="3096017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096020">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3096029">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096037">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3096046">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096054">Priority</span>&nbsp;<span class="builtintype" id="3096063">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096071">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3096080">uint16</span><br>
<span class="lineno"></span><span class="op" id="3096087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3096090">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="3096162">type</span>&nbsp;<span class="ident" id="3096167">byPriorityWeight</span>&nbsp;<span class="op" id="3096184">[</span><span class="op" id="3096185">]</span><span class="op" id="3096186">*</span><span class="ident" id="3096187">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3096192">func</span>&nbsp;<span class="op" id="3096197">(</span><span class="ident" id="3096198">s</span>&nbsp;<span class="ident" id="3096200">byPriorityWeight</span><span class="op" id="3096216">)</span>&nbsp;<span class="ident" id="3096218">Len</span><span class="op" id="3096221">(</span><span class="op" id="3096222">)</span>&nbsp;<span class="builtintype" id="3096224">int</span>&nbsp;<span class="op" id="3096228">{</span>&nbsp;<span class="keyword" id="3096230">return</span>&nbsp;<span class="builtinfunc" id="3096237">len</span><span class="op" id="3096240">(</span><span class="ident" id="3096241">s</span><span class="op" id="3096242">)</span>&nbsp;<span class="op" id="3096244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3096247">func</span>&nbsp;<span class="op" id="3096252">(</span><span class="ident" id="3096253">s</span>&nbsp;<span class="ident" id="3096255">byPriorityWeight</span><span class="op" id="3096271">)</span>&nbsp;<span class="ident" id="3096273">Swap</span><span class="op" id="3096277">(</span><span class="ident" id="3096278">i</span><span class="op" id="3096279">,</span>&nbsp;<span class="ident" id="3096281">j</span>&nbsp;<span class="builtintype" id="3096283">int</span><span class="op" id="3096286">)</span>&nbsp;<span class="op" id="3096288">{</span>&nbsp;<span class="ident" id="3096290">s</span><span class="op" id="3096291">[</span><span class="ident" id="3096292">i</span><span class="op" id="3096293">]</span><span class="op" id="3096294">,</span>&nbsp;<span class="ident" id="3096296">s</span><span class="op" id="3096297">[</span><span class="ident" id="3096298">j</span><span class="op" id="3096299">]</span>&nbsp;<span class="op" id="3096301">=</span>&nbsp;<span class="ident" id="3096303">s</span><span class="op" id="3096304">[</span><span class="ident" id="3096305">j</span><span class="op" id="3096306">]</span><span class="op" id="3096307">,</span>&nbsp;<span class="ident" id="3096309">s</span><span class="op" id="3096310">[</span><span class="ident" id="3096311">i</span><span class="op" id="3096312">]</span>&nbsp;<span class="op" id="3096314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="3096317">func</span>&nbsp;<span class="op" id="3096322">(</span><span class="ident" id="3096323">s</span>&nbsp;<span class="ident" id="3096325">byPriorityWeight</span><span class="op" id="3096341">)</span>&nbsp;<span class="ident" id="3096343">Less</span><span class="op" id="3096347">(</span><span class="ident" id="3096348">i</span><span class="op" id="3096349">,</span>&nbsp;<span class="ident" id="3096351">j</span>&nbsp;<span class="builtintype" id="3096353">int</span><span class="op" id="3096356">)</span>&nbsp;<span class="builtintype" id="3096358">bool</span>&nbsp;<span class="op" id="3096363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096366">return</span>&nbsp;<span class="ident" id="3096373">s</span><span class="op" id="3096374">[</span><span class="ident" id="3096375">i</span><span class="op" id="3096376">]</span><span class="op" id="3096377">.</span><span class="ident" id="3096378">Priority</span>&nbsp;<span class="op" id="3096387">&lt;</span>&nbsp;<span class="ident" id="3096389">s</span><span class="op" id="3096390">[</span><span class="ident" id="3096391">j</span><span class="op" id="3096392">]</span><span class="op" id="3096393">.</span><span class="ident" id="3096394">Priority</span>&nbsp;<span class="op" id="3096403">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096408">(</span><span class="ident" id="3096409">s</span><span class="op" id="3096410">[</span><span class="ident" id="3096411">i</span><span class="op" id="3096412">]</span><span class="op" id="3096413">.</span><span class="ident" id="3096414">Priority</span>&nbsp;<span class="op" id="3096423">==</span>&nbsp;<span class="ident" id="3096426">s</span><span class="op" id="3096427">[</span><span class="ident" id="3096428">j</span><span class="op" id="3096429">]</span><span class="op" id="3096430">.</span><span class="ident" id="3096431">Priority</span>&nbsp;<span class="op" id="3096440">&amp;&amp;</span>&nbsp;<span class="ident" id="3096443">s</span><span class="op" id="3096444">[</span><span class="ident" id="3096445">i</span><span class="op" id="3096446">]</span><span class="op" id="3096447">.</span><span class="ident" id="3096448">Weight</span>&nbsp;<span class="op" id="3096455">&lt;</span>&nbsp;<span class="ident" id="3096457">s</span><span class="op" id="3096458">[</span><span class="ident" id="3096459">j</span><span class="op" id="3096460">]</span><span class="op" id="3096461">.</span><span class="ident" id="3096462">Weight</span><span class="op" id="3096468">)</span><br>
<span class="lineno"></span><span class="op" id="3096470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="3096473">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="3096543">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="3096569">func</span>&nbsp;<span class="op" id="3096574">(</span><span class="ident" id="3096575">addrs</span>&nbsp;<span class="ident" id="3096581">byPriorityWeight</span><span class="op" id="3096597">)</span>&nbsp;<span class="ident" id="3096599">shuffleByWeight</span><span class="op" id="3096614">(</span><span class="op" id="3096615">)</span>&nbsp;<span class="op" id="3096617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096620">sum</span>&nbsp;<span class="op" id="3096624">:=</span>&nbsp;<span class="num" id="3096627">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096630">for</span>&nbsp;<span class="ident" id="3096634">_</span><span class="op" id="3096635">,</span>&nbsp;<span class="ident" id="3096637">addr</span>&nbsp;<span class="op" id="3096642">:=</span>&nbsp;<span class="keyword" id="3096645">range</span>&nbsp;<span class="ident" id="3096651">addrs</span>&nbsp;<span class="op" id="3096657">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096661">sum</span>&nbsp;<span class="op" id="3096665">+=</span>&nbsp;<span class="builtintype" id="3096668">int</span><span class="op" id="3096671">(</span><span class="ident" id="3096672">addr</span><span class="op" id="3096676">.</span><span class="ident" id="3096677">Weight</span><span class="op" id="3096683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096689">for</span>&nbsp;<span class="ident" id="3096693">sum</span>&nbsp;<span class="op" id="3096697">&gt;</span>&nbsp;<span class="num" id="3096699">0</span>&nbsp;<span class="op" id="3096701">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3096704">len</span><span class="op" id="3096707">(</span><span class="ident" id="3096708">addrs</span><span class="op" id="3096713">)</span>&nbsp;<span class="op" id="3096715">&gt;</span>&nbsp;<span class="num" id="3096717">1</span>&nbsp;<span class="op" id="3096719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096723">s</span>&nbsp;<span class="op" id="3096725">:=</span>&nbsp;<span class="num" id="3096728">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096732">n</span>&nbsp;<span class="op" id="3096734">:=</span>&nbsp;<span class="ident" id="3096737">rand</span><span class="op" id="3096741">.</span><span class="ident" id="3096742">Intn</span><span class="op" id="3096746">(</span><span class="ident" id="3096747">sum</span><span class="op" id="3096750">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096754">for</span>&nbsp;<span class="ident" id="3096758">i</span>&nbsp;<span class="op" id="3096760">:=</span>&nbsp;<span class="keyword" id="3096763">range</span>&nbsp;<span class="ident" id="3096769">addrs</span>&nbsp;<span class="op" id="3096775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096780">s</span>&nbsp;<span class="op" id="3096782">+=</span>&nbsp;<span class="builtintype" id="3096785">int</span><span class="op" id="3096788">(</span><span class="ident" id="3096789">addrs</span><span class="op" id="3096794">[</span><span class="ident" id="3096795">i</span><span class="op" id="3096796">]</span><span class="op" id="3096797">.</span><span class="ident" id="3096798">Weight</span><span class="op" id="3096804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096809">if</span>&nbsp;<span class="ident" id="3096812">s</span>&nbsp;<span class="op" id="3096814">&gt;</span>&nbsp;<span class="ident" id="3096816">n</span>&nbsp;<span class="op" id="3096818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096824">if</span>&nbsp;<span class="ident" id="3096827">i</span>&nbsp;<span class="op" id="3096829">&gt;</span>&nbsp;<span class="num" id="3096831">0</span>&nbsp;<span class="op" id="3096833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096840">addrs</span><span class="op" id="3096845">[</span><span class="num" id="3096846">0</span><span class="op" id="3096847">]</span><span class="op" id="3096848">,</span>&nbsp;<span class="ident" id="3096850">addrs</span><span class="op" id="3096855">[</span><span class="ident" id="3096856">i</span><span class="op" id="3096857">]</span>&nbsp;<span class="op" id="3096859">=</span>&nbsp;<span class="ident" id="3096861">addrs</span><span class="op" id="3096866">[</span><span class="ident" id="3096867">i</span><span class="op" id="3096868">]</span><span class="op" id="3096869">,</span>&nbsp;<span class="ident" id="3096871">addrs</span><span class="op" id="3096876">[</span><span class="num" id="3096877">0</span><span class="op" id="3096878">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3096890">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096907">sum</span>&nbsp;<span class="op" id="3096911">-=</span>&nbsp;<span class="builtintype" id="3096914">int</span><span class="op" id="3096917">(</span><span class="ident" id="3096918">addrs</span><span class="op" id="3096923">[</span><span class="num" id="3096924">0</span><span class="op" id="3096925">]</span><span class="op" id="3096926">.</span><span class="ident" id="3096927">Weight</span><span class="op" id="3096933">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3096937">addrs</span>&nbsp;<span class="op" id="3096943">=</span>&nbsp;<span class="ident" id="3096945">addrs</span><span class="op" id="3096950">[</span><span class="num" id="3096951">1</span><span class="op" id="3096952">:</span><span class="op" id="3096953">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3096956">}</span><br>
<span class="lineno"></span><span class="op" id="3096958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3096961">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="3097016">func</span>&nbsp;<span class="op" id="3097021">(</span><span class="ident" id="3097022">addrs</span>&nbsp;<span class="ident" id="3097028">byPriorityWeight</span><span class="op" id="3097044">)</span>&nbsp;<span class="ident" id="3097046">sort</span><span class="op" id="3097050">(</span><span class="op" id="3097051">)</span>&nbsp;<span class="op" id="3097053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097056">sort</span><span class="op" id="3097060">.</span><span class="ident" id="3097061">Sort</span><span class="op" id="3097065">(</span><span class="ident" id="3097066">addrs</span><span class="op" id="3097071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097074">i</span>&nbsp;<span class="op" id="3097076">:=</span>&nbsp;<span class="num" id="3097079">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097082">for</span>&nbsp;<span class="ident" id="3097086">j</span>&nbsp;<span class="op" id="3097088">:=</span>&nbsp;<span class="num" id="3097091">1</span><span class="op" id="3097092">;</span>&nbsp;<span class="ident" id="3097094">j</span>&nbsp;<span class="op" id="3097096">&lt;</span>&nbsp;<span class="builtinfunc" id="3097098">len</span><span class="op" id="3097101">(</span><span class="ident" id="3097102">addrs</span><span class="op" id="3097107">)</span><span class="op" id="3097108">;</span>&nbsp;<span class="ident" id="3097110">j</span><span class="op" id="3097111">++</span>&nbsp;<span class="op" id="3097114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097118">if</span>&nbsp;<span class="ident" id="3097121">addrs</span><span class="op" id="3097126">[</span><span class="ident" id="3097127">i</span><span class="op" id="3097128">]</span><span class="op" id="3097129">.</span><span class="ident" id="3097130">Priority</span>&nbsp;<span class="op" id="3097139">!=</span>&nbsp;<span class="ident" id="3097142">addrs</span><span class="op" id="3097147">[</span><span class="ident" id="3097148">j</span><span class="op" id="3097149">]</span><span class="op" id="3097150">.</span><span class="ident" id="3097151">Priority</span>&nbsp;<span class="op" id="3097160">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097165">addrs</span><span class="op" id="3097170">[</span><span class="ident" id="3097171">i</span><span class="op" id="3097172">:</span><span class="ident" id="3097173">j</span><span class="op" id="3097174">]</span><span class="op" id="3097175">.</span><span class="ident" id="3097176">shuffleByWeight</span><span class="op" id="3097191">(</span><span class="op" id="3097192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097197">i</span>&nbsp;<span class="op" id="3097199">=</span>&nbsp;<span class="ident" id="3097201">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097211">addrs</span><span class="op" id="3097216">[</span><span class="ident" id="3097217">i</span><span class="op" id="3097218">:</span><span class="op" id="3097219">]</span><span class="op" id="3097220">.</span><span class="ident" id="3097221">shuffleByWeight</span><span class="op" id="3097236">(</span><span class="op" id="3097237">)</span><br>
<span class="lineno">220</span><span class="op" id="3097239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3097242">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3097286">type</span>&nbsp;<span class="ident" id="3097291">MX</span>&nbsp;<span class="keyword" id="3097294">struct</span>&nbsp;<span class="op" id="3097301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097304">Host</span>&nbsp;<span class="builtintype" id="3097309">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097317">Pref</span>&nbsp;<span class="builtintype" id="3097322">uint16</span><br>
<span class="lineno"></span><span class="op" id="3097329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3097332">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="3097401">type</span>&nbsp;<span class="ident" id="3097406">byPref</span>&nbsp;<span class="op" id="3097413">[</span><span class="op" id="3097414">]</span><span class="op" id="3097415">*</span><span class="ident" id="3097416">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="3097420">func</span>&nbsp;<span class="op" id="3097425">(</span><span class="ident" id="3097426">s</span>&nbsp;<span class="ident" id="3097428">byPref</span><span class="op" id="3097434">)</span>&nbsp;<span class="ident" id="3097436">Len</span><span class="op" id="3097439">(</span><span class="op" id="3097440">)</span>&nbsp;<span class="builtintype" id="3097442">int</span>&nbsp;<span class="op" id="3097446">{</span>&nbsp;<span class="keyword" id="3097448">return</span>&nbsp;<span class="builtinfunc" id="3097455">len</span><span class="op" id="3097458">(</span><span class="ident" id="3097459">s</span><span class="op" id="3097460">)</span>&nbsp;<span class="op" id="3097462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3097465">func</span>&nbsp;<span class="op" id="3097470">(</span><span class="ident" id="3097471">s</span>&nbsp;<span class="ident" id="3097473">byPref</span><span class="op" id="3097479">)</span>&nbsp;<span class="ident" id="3097481">Less</span><span class="op" id="3097485">(</span><span class="ident" id="3097486">i</span><span class="op" id="3097487">,</span>&nbsp;<span class="ident" id="3097489">j</span>&nbsp;<span class="builtintype" id="3097491">int</span><span class="op" id="3097494">)</span>&nbsp;<span class="builtintype" id="3097496">bool</span>&nbsp;<span class="op" id="3097501">{</span>&nbsp;<span class="keyword" id="3097503">return</span>&nbsp;<span class="ident" id="3097510">s</span><span class="op" id="3097511">[</span><span class="ident" id="3097512">i</span><span class="op" id="3097513">]</span><span class="op" id="3097514">.</span><span class="ident" id="3097515">Pref</span>&nbsp;<span class="op" id="3097520">&lt;</span>&nbsp;<span class="ident" id="3097522">s</span><span class="op" id="3097523">[</span><span class="ident" id="3097524">j</span><span class="op" id="3097525">]</span><span class="op" id="3097526">.</span><span class="ident" id="3097527">Pref</span>&nbsp;<span class="op" id="3097532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3097535">func</span>&nbsp;<span class="op" id="3097540">(</span><span class="ident" id="3097541">s</span>&nbsp;<span class="ident" id="3097543">byPref</span><span class="op" id="3097549">)</span>&nbsp;<span class="ident" id="3097551">Swap</span><span class="op" id="3097555">(</span><span class="ident" id="3097556">i</span><span class="op" id="3097557">,</span>&nbsp;<span class="ident" id="3097559">j</span>&nbsp;<span class="builtintype" id="3097561">int</span><span class="op" id="3097564">)</span>&nbsp;<span class="op" id="3097566">{</span>&nbsp;<span class="ident" id="3097568">s</span><span class="op" id="3097569">[</span><span class="ident" id="3097570">i</span><span class="op" id="3097571">]</span><span class="op" id="3097572">,</span>&nbsp;<span class="ident" id="3097574">s</span><span class="op" id="3097575">[</span><span class="ident" id="3097576">j</span><span class="op" id="3097577">]</span>&nbsp;<span class="op" id="3097579">=</span>&nbsp;<span class="ident" id="3097581">s</span><span class="op" id="3097582">[</span><span class="ident" id="3097583">j</span><span class="op" id="3097584">]</span><span class="op" id="3097585">,</span>&nbsp;<span class="ident" id="3097587">s</span><span class="op" id="3097588">[</span><span class="ident" id="3097589">i</span><span class="op" id="3097590">]</span>&nbsp;<span class="op" id="3097592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3097595">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="3097649">func</span>&nbsp;<span class="op" id="3097654">(</span><span class="ident" id="3097655">s</span>&nbsp;<span class="ident" id="3097657">byPref</span><span class="op" id="3097663">)</span>&nbsp;<span class="ident" id="3097665">sort</span><span class="op" id="3097669">(</span><span class="op" id="3097670">)</span>&nbsp;<span class="op" id="3097672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3097675">for</span>&nbsp;<span class="ident" id="3097679">i</span>&nbsp;<span class="op" id="3097681">:=</span>&nbsp;<span class="keyword" id="3097684">range</span>&nbsp;<span class="ident" id="3097690">s</span>&nbsp;<span class="op" id="3097692">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097696">j</span>&nbsp;<span class="op" id="3097698">:=</span>&nbsp;<span class="ident" id="3097701">rand</span><span class="op" id="3097705">.</span><span class="ident" id="3097706">Intn</span><span class="op" id="3097710">(</span><span class="ident" id="3097711">i</span>&nbsp;<span class="op" id="3097713">+</span>&nbsp;<span class="num" id="3097715">1</span><span class="op" id="3097716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097720">s</span><span class="op" id="3097721">[</span><span class="ident" id="3097722">i</span><span class="op" id="3097723">]</span><span class="op" id="3097724">,</span>&nbsp;<span class="ident" id="3097726">s</span><span class="op" id="3097727">[</span><span class="ident" id="3097728">j</span><span class="op" id="3097729">]</span>&nbsp;<span class="op" id="3097731">=</span>&nbsp;<span class="ident" id="3097733">s</span><span class="op" id="3097734">[</span><span class="ident" id="3097735">j</span><span class="op" id="3097736">]</span><span class="op" id="3097737">,</span>&nbsp;<span class="ident" id="3097739">s</span><span class="op" id="3097740">[</span><span class="ident" id="3097741">i</span><span class="op" id="3097742">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3097745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097748">sort</span><span class="op" id="3097752">.</span><span class="ident" id="3097753">Sort</span><span class="op" id="3097757">(</span><span class="ident" id="3097758">s</span><span class="op" id="3097759">)</span><br>
<span class="lineno"></span><span class="op" id="3097761">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="3097764">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3097808">type</span>&nbsp;<span class="ident" id="3097813">NS</span>&nbsp;<span class="keyword" id="3097816">struct</span>&nbsp;<span class="op" id="3097823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3097826">Host</span>&nbsp;<span class="builtintype" id="3097831">string</span><br>
<span class="lineno"></span><span class="op" id="3097838">}</span>
</div>
</body>
</html>
