<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5321652">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5321708">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5321762">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5321813">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5321872">package</span>&nbsp;<span class="ident" id="5321880">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5321887">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5321939">import</span>&nbsp;<span class="op" id="5321946">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5321949">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5321958">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5321973">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5321992">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5321999">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5322005">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5322010">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5322013">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="5322055">type</span>&nbsp;<span class="ident" id="5322060">File</span>&nbsp;<span class="keyword" id="5322065">struct</span>&nbsp;<span class="op" id="5322072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322075">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322087">ByteOrder</span>&nbsp;<span class="ident" id="5322097">binary</span><span class="op" id="5322103">.</span><span class="ident" id="5322104">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322115">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5322125">[</span><span class="op" id="5322126">]</span><span class="ident" id="5322127">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322133">Sections</span>&nbsp;&nbsp;<span class="op" id="5322143">[</span><span class="op" id="5322144">]</span><span class="op" id="5322145">*</span><span class="ident" id="5322146">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322156">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5322165">*</span><span class="ident" id="5322166">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322174">Dysymtab</span>&nbsp;<span class="op" id="5322183">*</span><span class="ident" id="5322184">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322195">closer</span>&nbsp;<span class="ident" id="5322202">io</span><span class="op" id="5322204">.</span><span class="ident" id="5322205">Closer</span><br>
<span class="lineno">30</span><span class="op" id="5322212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5322215">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5322261">type</span>&nbsp;<span class="ident" id="5322266">Load</span>&nbsp;<span class="keyword" id="5322271">interface</span>&nbsp;<span class="op" id="5322281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322284">Raw</span><span class="op" id="5322287">(</span><span class="op" id="5322288">)</span>&nbsp;<span class="op" id="5322290">[</span><span class="op" id="5322291">]</span><span class="builtintype" id="5322292">byte</span><br>
<span class="lineno">35</span><span class="op" id="5322297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5322300">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5322368">type</span>&nbsp;<span class="ident" id="5322373">LoadBytes</span>&nbsp;<span class="op" id="5322383">[</span><span class="op" id="5322384">]</span><span class="builtintype" id="5322385">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="5322391">func</span>&nbsp;<span class="op" id="5322396">(</span><span class="ident" id="5322397">b</span>&nbsp;<span class="ident" id="5322399">LoadBytes</span><span class="op" id="5322408">)</span>&nbsp;<span class="ident" id="5322410">Raw</span><span class="op" id="5322413">(</span><span class="op" id="5322414">)</span>&nbsp;<span class="op" id="5322416">[</span><span class="op" id="5322417">]</span><span class="builtintype" id="5322418">byte</span>&nbsp;<span class="op" id="5322423">{</span>&nbsp;<span class="keyword" id="5322425">return</span>&nbsp;<span class="ident" id="5322432">b</span>&nbsp;<span class="op" id="5322434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5322437">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5322522">type</span>&nbsp;<span class="ident" id="5322527">SegmentHeader</span>&nbsp;<span class="keyword" id="5322541">struct</span>&nbsp;<span class="op" id="5322548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322551">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5322559">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322568">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5322576">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322584">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5322592">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322600">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5322608">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322616">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5322624">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322632">Offset</span>&nbsp;&nbsp;<span class="ident" id="5322640">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322648">Filesz</span>&nbsp;&nbsp;<span class="ident" id="5322656">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322664">Maxprot</span>&nbsp;<span class="builtintype" id="5322672">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322680">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5322688">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322696">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5322704">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322712">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5322720">uint32</span><br>
<span class="lineno">55</span><span class="op" id="5322727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5322730">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5322802">type</span>&nbsp;<span class="ident" id="5322807">Segment</span>&nbsp;<span class="keyword" id="5322815">struct</span>&nbsp;<span class="op" id="5322822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322825">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5322836">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5322852">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5322890">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5322930">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5322965">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323013">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323063">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323087">io</span><span class="op" id="5323089">.</span><span class="ident" id="5323090">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323100">sr</span>&nbsp;<span class="op" id="5323103">*</span><span class="ident" id="5323104">io</span><span class="op" id="5323106">.</span><span class="ident" id="5323107">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="5323121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5323124">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5323179">func</span>&nbsp;<span class="op" id="5323184">(</span><span class="ident" id="5323185">s</span>&nbsp;<span class="op" id="5323187">*</span><span class="ident" id="5323188">Segment</span><span class="op" id="5323195">)</span>&nbsp;<span class="ident" id="5323197">Data</span><span class="op" id="5323201">(</span><span class="op" id="5323202">)</span>&nbsp;<span class="op" id="5323204">(</span><span class="op" id="5323205">[</span><span class="op" id="5323206">]</span><span class="builtintype" id="5323207">byte</span><span class="op" id="5323211">,</span>&nbsp;<span class="builtintype" id="5323213">error</span><span class="op" id="5323218">)</span>&nbsp;<span class="op" id="5323220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323223">dat</span>&nbsp;<span class="op" id="5323227">:=</span>&nbsp;<span class="builtinfunc" id="5323230">make</span><span class="op" id="5323234">(</span><span class="op" id="5323235">[</span><span class="op" id="5323236">]</span><span class="builtintype" id="5323237">byte</span><span class="op" id="5323241">,</span>&nbsp;<span class="ident" id="5323243">s</span><span class="op" id="5323244">.</span><span class="ident" id="5323245">sr</span><span class="op" id="5323247">.</span><span class="ident" id="5323248">Size</span><span class="op" id="5323252">(</span><span class="op" id="5323253">)</span><span class="op" id="5323254">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323257">n</span><span class="op" id="5323258">,</span>&nbsp;<span class="ident" id="5323260">err</span>&nbsp;<span class="op" id="5323264">:=</span>&nbsp;<span class="ident" id="5323267">s</span><span class="op" id="5323268">.</span><span class="ident" id="5323269">sr</span><span class="op" id="5323271">.</span><span class="ident" id="5323272">ReadAt</span><span class="op" id="5323278">(</span><span class="ident" id="5323279">dat</span><span class="op" id="5323282">,</span>&nbsp;<span class="num" id="5323284">0</span><span class="op" id="5323285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5323288">if</span>&nbsp;<span class="ident" id="5323291">n</span>&nbsp;<span class="op" id="5323293">==</span>&nbsp;<span class="builtinfunc" id="5323296">len</span><span class="op" id="5323299">(</span><span class="ident" id="5323300">dat</span><span class="op" id="5323303">)</span>&nbsp;<span class="op" id="5323305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323309">err</span>&nbsp;<span class="op" id="5323313">=</span>&nbsp;<span class="ident" id="5323315">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5323320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5323323">return</span>&nbsp;<span class="ident" id="5323330">dat</span><span class="op" id="5323333">[</span><span class="num" id="5323334">0</span><span class="op" id="5323335">:</span><span class="ident" id="5323336">n</span><span class="op" id="5323337">]</span><span class="op" id="5323338">,</span>&nbsp;<span class="ident" id="5323340">err</span><br>
<span class="lineno">80</span><span class="op" id="5323344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5323347">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5323401">func</span>&nbsp;<span class="op" id="5323406">(</span><span class="ident" id="5323407">s</span>&nbsp;<span class="op" id="5323409">*</span><span class="ident" id="5323410">Segment</span><span class="op" id="5323417">)</span>&nbsp;<span class="ident" id="5323419">Open</span><span class="op" id="5323423">(</span><span class="op" id="5323424">)</span>&nbsp;<span class="ident" id="5323426">io</span><span class="op" id="5323428">.</span><span class="ident" id="5323429">ReadSeeker</span>&nbsp;<span class="op" id="5323440">{</span>&nbsp;<span class="keyword" id="5323442">return</span>&nbsp;<span class="ident" id="5323449">io</span><span class="op" id="5323451">.</span><span class="ident" id="5323452">NewSectionReader</span><span class="op" id="5323468">(</span><span class="ident" id="5323469">s</span><span class="op" id="5323470">.</span><span class="ident" id="5323471">sr</span><span class="op" id="5323473">,</span>&nbsp;<span class="num" id="5323475">0</span><span class="op" id="5323476">,</span>&nbsp;<span class="num" id="5323478">1</span><span class="op" id="5323479">&lt;&lt;</span><span class="num" id="5323481">63</span><span class="op" id="5323483">-</span><span class="num" id="5323484">1</span><span class="op" id="5323485">)</span>&nbsp;<span class="op" id="5323487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="5323490">type</span>&nbsp;<span class="ident" id="5323495">SectionHeader</span>&nbsp;<span class="keyword" id="5323509">struct</span>&nbsp;<span class="op" id="5323516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323519">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5323526">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323534">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5323541">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323549">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5323556">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323564">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5323571">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323579">Offset</span>&nbsp;<span class="builtintype" id="5323586">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323594">Align</span>&nbsp;&nbsp;<span class="builtintype" id="5323601">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323609">Reloff</span>&nbsp;<span class="builtintype" id="5323616">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323624">Nreloc</span>&nbsp;<span class="builtintype" id="5323631">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323639">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="5323646">uint32</span><br>
<span class="lineno">95</span><span class="op" id="5323653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5323656">type</span>&nbsp;<span class="ident" id="5323661">Section</span>&nbsp;<span class="keyword" id="5323669">struct</span>&nbsp;<span class="op" id="5323676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323679">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323695">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323733">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323773">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323808">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323856">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5323906">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323930">io</span><span class="op" id="5323932">.</span><span class="ident" id="5323933">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5323943">sr</span>&nbsp;<span class="op" id="5323946">*</span><span class="ident" id="5323947">io</span><span class="op" id="5323949">.</span><span class="ident" id="5323950">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5323964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5323967">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5324029">func</span>&nbsp;<span class="op" id="5324034">(</span><span class="ident" id="5324035">s</span>&nbsp;<span class="op" id="5324037">*</span><span class="ident" id="5324038">Section</span><span class="op" id="5324045">)</span>&nbsp;<span class="ident" id="5324047">Data</span><span class="op" id="5324051">(</span><span class="op" id="5324052">)</span>&nbsp;<span class="op" id="5324054">(</span><span class="op" id="5324055">[</span><span class="op" id="5324056">]</span><span class="builtintype" id="5324057">byte</span><span class="op" id="5324061">,</span>&nbsp;<span class="builtintype" id="5324063">error</span><span class="op" id="5324068">)</span>&nbsp;<span class="op" id="5324070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324073">dat</span>&nbsp;<span class="op" id="5324077">:=</span>&nbsp;<span class="builtinfunc" id="5324080">make</span><span class="op" id="5324084">(</span><span class="op" id="5324085">[</span><span class="op" id="5324086">]</span><span class="builtintype" id="5324087">byte</span><span class="op" id="5324091">,</span>&nbsp;<span class="ident" id="5324093">s</span><span class="op" id="5324094">.</span><span class="ident" id="5324095">sr</span><span class="op" id="5324097">.</span><span class="ident" id="5324098">Size</span><span class="op" id="5324102">(</span><span class="op" id="5324103">)</span><span class="op" id="5324104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324107">n</span><span class="op" id="5324108">,</span>&nbsp;<span class="ident" id="5324110">err</span>&nbsp;<span class="op" id="5324114">:=</span>&nbsp;<span class="ident" id="5324117">s</span><span class="op" id="5324118">.</span><span class="ident" id="5324119">sr</span><span class="op" id="5324121">.</span><span class="ident" id="5324122">ReadAt</span><span class="op" id="5324128">(</span><span class="ident" id="5324129">dat</span><span class="op" id="5324132">,</span>&nbsp;<span class="num" id="5324134">0</span><span class="op" id="5324135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324138">if</span>&nbsp;<span class="ident" id="5324141">n</span>&nbsp;<span class="op" id="5324143">==</span>&nbsp;<span class="builtinfunc" id="5324146">len</span><span class="op" id="5324149">(</span><span class="ident" id="5324150">dat</span><span class="op" id="5324153">)</span>&nbsp;<span class="op" id="5324155">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324159">err</span>&nbsp;<span class="op" id="5324163">=</span>&nbsp;<span class="ident" id="5324165">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5324170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5324173">return</span>&nbsp;<span class="ident" id="5324180">dat</span><span class="op" id="5324183">[</span><span class="num" id="5324184">0</span><span class="op" id="5324185">:</span><span class="ident" id="5324186">n</span><span class="op" id="5324187">]</span><span class="op" id="5324188">,</span>&nbsp;<span class="ident" id="5324190">err</span><br>
<span class="lineno"></span><span class="op" id="5324194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5324197">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5324258">func</span>&nbsp;<span class="op" id="5324263">(</span><span class="ident" id="5324264">s</span>&nbsp;<span class="op" id="5324266">*</span><span class="ident" id="5324267">Section</span><span class="op" id="5324274">)</span>&nbsp;<span class="ident" id="5324276">Open</span><span class="op" id="5324280">(</span><span class="op" id="5324281">)</span>&nbsp;<span class="ident" id="5324283">io</span><span class="op" id="5324285">.</span><span class="ident" id="5324286">ReadSeeker</span>&nbsp;<span class="op" id="5324297">{</span>&nbsp;<span class="keyword" id="5324299">return</span>&nbsp;<span class="ident" id="5324306">io</span><span class="op" id="5324308">.</span><span class="ident" id="5324309">NewSectionReader</span><span class="op" id="5324325">(</span><span class="ident" id="5324326">s</span><span class="op" id="5324327">.</span><span class="ident" id="5324328">sr</span><span class="op" id="5324330">,</span>&nbsp;<span class="num" id="5324332">0</span><span class="op" id="5324333">,</span>&nbsp;<span class="num" id="5324335">1</span><span class="op" id="5324336">&lt;&lt;</span><span class="num" id="5324338">63</span><span class="op" id="5324340">-</span><span class="num" id="5324341">1</span><span class="op" id="5324342">)</span>&nbsp;<span class="op" id="5324344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5324347">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5324408">type</span>&nbsp;<span class="ident" id="5324413">Dylib</span>&nbsp;<span class="keyword" id="5324419">struct</span>&nbsp;<span class="op" id="5324426">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324429">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324440">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5324455">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324463">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5324478">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324486">CurrentVersion</span>&nbsp;<span class="builtintype" id="5324501">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324509">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="5324524">uint32</span><br>
<span class="lineno">130</span><span class="op" id="5324531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5324534">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5324588">type</span>&nbsp;<span class="ident" id="5324593">Symtab</span>&nbsp;<span class="keyword" id="5324600">struct</span>&nbsp;<span class="op" id="5324607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324610">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324621">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324632">Syms</span>&nbsp;<span class="op" id="5324637">[</span><span class="op" id="5324638">]</span><span class="ident" id="5324639">Symbol</span><br>
<span class="lineno"></span><span class="op" id="5324646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5324649">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="5324713">type</span>&nbsp;<span class="ident" id="5324718">Dysymtab</span>&nbsp;<span class="keyword" id="5324727">struct</span>&nbsp;<span class="op" id="5324734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324737">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324748">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324761">IndirectSyms</span>&nbsp;<span class="op" id="5324774">[</span><span class="op" id="5324775">]</span><span class="builtintype" id="5324776">uint32</span>&nbsp;<span class="comment" id="5324783">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="5324811">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="5324814">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="5324839">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5324902">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5324953">type</span>&nbsp;<span class="ident" id="5324958">FormatError</span>&nbsp;<span class="keyword" id="5324970">struct</span>&nbsp;<span class="op" id="5324977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324980">off</span>&nbsp;<span class="ident" id="5324984">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5324991">msg</span>&nbsp;<span class="builtintype" id="5324995">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325003">val</span>&nbsp;<span class="keyword" id="5325007">interface</span><span class="op" id="5325016">{</span><span class="op" id="5325017">}</span><br>
<span class="lineno"></span><span class="op" id="5325019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5325022">func</span>&nbsp;<span class="op" id="5325027">(</span><span class="ident" id="5325028">e</span>&nbsp;<span class="op" id="5325030">*</span><span class="ident" id="5325031">FormatError</span><span class="op" id="5325042">)</span>&nbsp;<span class="ident" id="5325044">Error</span><span class="op" id="5325049">(</span><span class="op" id="5325050">)</span>&nbsp;<span class="builtintype" id="5325052">string</span>&nbsp;<span class="op" id="5325059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325062">msg</span>&nbsp;<span class="op" id="5325066">:=</span>&nbsp;<span class="ident" id="5325069">e</span><span class="op" id="5325070">.</span><span class="ident" id="5325071">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325076">if</span>&nbsp;<span class="ident" id="5325079">e</span><span class="op" id="5325080">.</span><span class="ident" id="5325081">val</span>&nbsp;<span class="op" id="5325085">!=</span>&nbsp;<span class="ident" id="5325088">nil</span>&nbsp;<span class="op" id="5325092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325096">msg</span>&nbsp;<span class="op" id="5325100">+=</span>&nbsp;<span class="ident" id="5325103">fmt</span><span class="op" id="5325106">.</span><span class="ident" id="5325107">Sprintf</span><span class="op" id="5325114">(</span><span class="string" id="5325115">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="5325122">,</span>&nbsp;<span class="ident" id="5325124">e</span><span class="op" id="5325125">.</span><span class="ident" id="5325126">val</span><span class="op" id="5325129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325135">msg</span>&nbsp;<span class="op" id="5325139">+=</span>&nbsp;<span class="ident" id="5325142">fmt</span><span class="op" id="5325145">.</span><span class="ident" id="5325146">Sprintf</span><span class="op" id="5325153">(</span><span class="string" id="5325154">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="5325178">,</span>&nbsp;<span class="ident" id="5325180">e</span><span class="op" id="5325181">.</span><span class="ident" id="5325182">off</span><span class="op" id="5325185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325188">return</span>&nbsp;<span class="ident" id="5325195">msg</span><br>
<span class="lineno">165</span><span class="op" id="5325199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5325202">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="5325289">func</span>&nbsp;<span class="ident" id="5325294">Open</span><span class="op" id="5325298">(</span><span class="ident" id="5325299">name</span>&nbsp;<span class="builtintype" id="5325304">string</span><span class="op" id="5325310">)</span>&nbsp;<span class="op" id="5325312">(</span><span class="op" id="5325313">*</span><span class="ident" id="5325314">File</span><span class="op" id="5325318">,</span>&nbsp;<span class="builtintype" id="5325320">error</span><span class="op" id="5325325">)</span>&nbsp;<span class="op" id="5325327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325330">f</span><span class="op" id="5325331">,</span>&nbsp;<span class="ident" id="5325333">err</span>&nbsp;<span class="op" id="5325337">:=</span>&nbsp;<span class="ident" id="5325340">os</span><span class="op" id="5325342">.</span><span class="ident" id="5325343">Open</span><span class="op" id="5325347">(</span><span class="ident" id="5325348">name</span><span class="op" id="5325352">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325355">if</span>&nbsp;<span class="ident" id="5325358">err</span>&nbsp;<span class="op" id="5325362">!=</span>&nbsp;<span class="ident" id="5325365">nil</span>&nbsp;<span class="op" id="5325369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325373">return</span>&nbsp;<span class="ident" id="5325380">nil</span><span class="op" id="5325383">,</span>&nbsp;<span class="ident" id="5325385">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325393">ff</span><span class="op" id="5325395">,</span>&nbsp;<span class="ident" id="5325397">err</span>&nbsp;<span class="op" id="5325401">:=</span>&nbsp;<span class="ident" id="5325404">NewFile</span><span class="op" id="5325411">(</span><span class="ident" id="5325412">f</span><span class="op" id="5325413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325416">if</span>&nbsp;<span class="ident" id="5325419">err</span>&nbsp;<span class="op" id="5325423">!=</span>&nbsp;<span class="ident" id="5325426">nil</span>&nbsp;<span class="op" id="5325430">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325434">f</span><span class="op" id="5325435">.</span><span class="ident" id="5325436">Close</span><span class="op" id="5325441">(</span><span class="op" id="5325442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325446">return</span>&nbsp;<span class="ident" id="5325453">nil</span><span class="op" id="5325456">,</span>&nbsp;<span class="ident" id="5325458">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325466">ff</span><span class="op" id="5325468">.</span><span class="ident" id="5325469">closer</span>&nbsp;<span class="op" id="5325476">=</span>&nbsp;<span class="ident" id="5325478">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325481">return</span>&nbsp;<span class="ident" id="5325488">ff</span><span class="op" id="5325490">,</span>&nbsp;<span class="ident" id="5325492">nil</span><br>
<span class="lineno">180</span><span class="op" id="5325496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5325499">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="5325525">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="5325592">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="5325616">func</span>&nbsp;<span class="op" id="5325621">(</span><span class="ident" id="5325622">f</span>&nbsp;<span class="op" id="5325624">*</span><span class="ident" id="5325625">File</span><span class="op" id="5325629">)</span>&nbsp;<span class="ident" id="5325631">Close</span><span class="op" id="5325636">(</span><span class="op" id="5325637">)</span>&nbsp;<span class="builtintype" id="5325639">error</span>&nbsp;<span class="op" id="5325645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325648">var</span>&nbsp;<span class="ident" id="5325652">err</span>&nbsp;<span class="builtintype" id="5325656">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325663">if</span>&nbsp;<span class="ident" id="5325666">f</span><span class="op" id="5325667">.</span><span class="ident" id="5325668">closer</span>&nbsp;<span class="op" id="5325675">!=</span>&nbsp;<span class="ident" id="5325678">nil</span>&nbsp;<span class="op" id="5325682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325686">err</span>&nbsp;<span class="op" id="5325690">=</span>&nbsp;<span class="ident" id="5325692">f</span><span class="op" id="5325693">.</span><span class="ident" id="5325694">closer</span><span class="op" id="5325700">.</span><span class="ident" id="5325701">Close</span><span class="op" id="5325706">(</span><span class="op" id="5325707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325711">f</span><span class="op" id="5325712">.</span><span class="ident" id="5325713">closer</span>&nbsp;<span class="op" id="5325720">=</span>&nbsp;<span class="ident" id="5325722">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5325727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5325730">return</span>&nbsp;<span class="ident" id="5325737">err</span><br>
<span class="lineno"></span><span class="op" id="5325741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5325744">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="5325829">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="5325902">func</span>&nbsp;<span class="ident" id="5325907">NewFile</span><span class="op" id="5325914">(</span><span class="ident" id="5325915">r</span>&nbsp;<span class="ident" id="5325917">io</span><span class="op" id="5325919">.</span><span class="ident" id="5325920">ReaderAt</span><span class="op" id="5325928">)</span>&nbsp;<span class="op" id="5325930">(</span><span class="op" id="5325931">*</span><span class="ident" id="5325932">File</span><span class="op" id="5325936">,</span>&nbsp;<span class="builtintype" id="5325938">error</span><span class="op" id="5325943">)</span>&nbsp;<span class="op" id="5325945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325948">f</span>&nbsp;<span class="op" id="5325950">:=</span>&nbsp;<span class="builtinfunc" id="5325953">new</span><span class="op" id="5325956">(</span><span class="ident" id="5325957">File</span><span class="op" id="5325961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5325964">sr</span>&nbsp;<span class="op" id="5325967">:=</span>&nbsp;<span class="ident" id="5325970">io</span><span class="op" id="5325972">.</span><span class="ident" id="5325973">NewSectionReader</span><span class="op" id="5325989">(</span><span class="ident" id="5325990">r</span><span class="op" id="5325991">,</span>&nbsp;<span class="num" id="5325993">0</span><span class="op" id="5325994">,</span>&nbsp;<span class="num" id="5325996">1</span><span class="op" id="5325997">&lt;&lt;</span><span class="num" id="5325999">63</span><span class="op" id="5326001">-</span><span class="num" id="5326002">1</span><span class="op" id="5326003">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326007">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326069">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326124">var</span>&nbsp;<span class="ident" id="5326128">ident</span>&nbsp;<span class="op" id="5326134">[</span><span class="num" id="5326135">4</span><span class="op" id="5326136">]</span><span class="builtintype" id="5326137">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326143">if</span>&nbsp;<span class="ident" id="5326146">_</span><span class="op" id="5326147">,</span>&nbsp;<span class="ident" id="5326149">err</span>&nbsp;<span class="op" id="5326153">:=</span>&nbsp;<span class="ident" id="5326156">r</span><span class="op" id="5326157">.</span><span class="ident" id="5326158">ReadAt</span><span class="op" id="5326164">(</span><span class="ident" id="5326165">ident</span><span class="op" id="5326170">[</span><span class="num" id="5326171">0</span><span class="op" id="5326172">:</span><span class="op" id="5326173">]</span><span class="op" id="5326174">,</span>&nbsp;<span class="num" id="5326176">0</span><span class="op" id="5326177">)</span><span class="op" id="5326178">;</span>&nbsp;<span class="ident" id="5326180">err</span>&nbsp;<span class="op" id="5326184">!=</span>&nbsp;<span class="ident" id="5326187">nil</span>&nbsp;<span class="op" id="5326191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326195">return</span>&nbsp;<span class="ident" id="5326202">nil</span><span class="op" id="5326205">,</span>&nbsp;<span class="ident" id="5326207">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326215">be</span>&nbsp;<span class="op" id="5326218">:=</span>&nbsp;<span class="ident" id="5326221">binary</span><span class="op" id="5326227">.</span><span class="ident" id="5326228">BigEndian</span><span class="op" id="5326237">.</span><span class="ident" id="5326238">Uint32</span><span class="op" id="5326244">(</span><span class="ident" id="5326245">ident</span><span class="op" id="5326250">[</span><span class="num" id="5326251">0</span><span class="op" id="5326252">:</span><span class="op" id="5326253">]</span><span class="op" id="5326254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326257">le</span>&nbsp;<span class="op" id="5326260">:=</span>&nbsp;<span class="ident" id="5326263">binary</span><span class="op" id="5326269">.</span><span class="ident" id="5326270">LittleEndian</span><span class="op" id="5326282">.</span><span class="ident" id="5326283">Uint32</span><span class="op" id="5326289">(</span><span class="ident" id="5326290">ident</span><span class="op" id="5326295">[</span><span class="num" id="5326296">0</span><span class="op" id="5326297">:</span><span class="op" id="5326298">]</span><span class="op" id="5326299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326302">switch</span>&nbsp;<span class="ident" id="5326309">Magic32</span>&nbsp;<span class="op" id="5326317">&amp;^</span>&nbsp;<span class="num" id="5326320">1</span>&nbsp;<span class="op" id="5326322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326325">case</span>&nbsp;<span class="ident" id="5326330">be</span>&nbsp;<span class="op" id="5326333">&amp;^</span>&nbsp;<span class="num" id="5326336">1</span><span class="op" id="5326337">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326341">f</span><span class="op" id="5326342">.</span><span class="ident" id="5326343">ByteOrder</span>&nbsp;<span class="op" id="5326353">=</span>&nbsp;<span class="ident" id="5326355">binary</span><span class="op" id="5326361">.</span><span class="ident" id="5326362">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326374">f</span><span class="op" id="5326375">.</span><span class="ident" id="5326376">Magic</span>&nbsp;<span class="op" id="5326382">=</span>&nbsp;<span class="ident" id="5326384">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326388">case</span>&nbsp;<span class="ident" id="5326393">le</span>&nbsp;<span class="op" id="5326396">&amp;^</span>&nbsp;<span class="num" id="5326399">1</span><span class="op" id="5326400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326404">f</span><span class="op" id="5326405">.</span><span class="ident" id="5326406">ByteOrder</span>&nbsp;<span class="op" id="5326416">=</span>&nbsp;<span class="ident" id="5326418">binary</span><span class="op" id="5326424">.</span><span class="ident" id="5326425">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326440">f</span><span class="op" id="5326441">.</span><span class="ident" id="5326442">Magic</span>&nbsp;<span class="op" id="5326448">=</span>&nbsp;<span class="ident" id="5326450">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326454">default</span><span class="op" id="5326461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326465">return</span>&nbsp;<span class="ident" id="5326472">nil</span><span class="op" id="5326475">,</span>&nbsp;<span class="op" id="5326477">&amp;</span><span class="ident" id="5326478">FormatError</span><span class="op" id="5326489">{</span><span class="num" id="5326490">0</span><span class="op" id="5326491">,</span>&nbsp;<span class="string" id="5326493">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="5326515">,</span>&nbsp;<span class="ident" id="5326517">nil</span><span class="op" id="5326520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326527">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326556">if</span>&nbsp;<span class="ident" id="5326559">err</span>&nbsp;<span class="op" id="5326563">:=</span>&nbsp;<span class="ident" id="5326566">binary</span><span class="op" id="5326572">.</span><span class="ident" id="5326573">Read</span><span class="op" id="5326577">(</span><span class="ident" id="5326578">sr</span><span class="op" id="5326580">,</span>&nbsp;<span class="ident" id="5326582">f</span><span class="op" id="5326583">.</span><span class="ident" id="5326584">ByteOrder</span><span class="op" id="5326593">,</span>&nbsp;<span class="op" id="5326595">&amp;</span><span class="ident" id="5326596">f</span><span class="op" id="5326597">.</span><span class="ident" id="5326598">FileHeader</span><span class="op" id="5326608">)</span><span class="op" id="5326609">;</span>&nbsp;<span class="ident" id="5326611">err</span>&nbsp;<span class="op" id="5326615">!=</span>&nbsp;<span class="ident" id="5326618">nil</span>&nbsp;<span class="op" id="5326622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326626">return</span>&nbsp;<span class="ident" id="5326633">nil</span><span class="op" id="5326636">,</span>&nbsp;<span class="ident" id="5326638">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326647">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326671">offset</span>&nbsp;<span class="op" id="5326678">:=</span>&nbsp;<span class="ident" id="5326681">int64</span><span class="op" id="5326686">(</span><span class="ident" id="5326687">fileHeaderSize32</span><span class="op" id="5326703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326706">if</span>&nbsp;<span class="ident" id="5326709">f</span><span class="op" id="5326710">.</span><span class="ident" id="5326711">Magic</span>&nbsp;<span class="op" id="5326717">==</span>&nbsp;<span class="ident" id="5326720">Magic64</span>&nbsp;<span class="op" id="5326728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326732">offset</span>&nbsp;<span class="op" id="5326739">=</span>&nbsp;<span class="ident" id="5326741">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326762">dat</span>&nbsp;<span class="op" id="5326766">:=</span>&nbsp;<span class="builtinfunc" id="5326769">make</span><span class="op" id="5326773">(</span><span class="op" id="5326774">[</span><span class="op" id="5326775">]</span><span class="builtintype" id="5326776">byte</span><span class="op" id="5326780">,</span>&nbsp;<span class="ident" id="5326782">f</span><span class="op" id="5326783">.</span><span class="ident" id="5326784">Cmdsz</span><span class="op" id="5326789">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326792">if</span>&nbsp;<span class="ident" id="5326795">_</span><span class="op" id="5326796">,</span>&nbsp;<span class="ident" id="5326798">err</span>&nbsp;<span class="op" id="5326802">:=</span>&nbsp;<span class="ident" id="5326805">r</span><span class="op" id="5326806">.</span><span class="ident" id="5326807">ReadAt</span><span class="op" id="5326813">(</span><span class="ident" id="5326814">dat</span><span class="op" id="5326817">,</span>&nbsp;<span class="ident" id="5326819">offset</span><span class="op" id="5326825">)</span><span class="op" id="5326826">;</span>&nbsp;<span class="ident" id="5326828">err</span>&nbsp;<span class="op" id="5326832">!=</span>&nbsp;<span class="ident" id="5326835">nil</span>&nbsp;<span class="op" id="5326839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326843">return</span>&nbsp;<span class="ident" id="5326850">nil</span><span class="op" id="5326853">,</span>&nbsp;<span class="ident" id="5326855">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5326860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326863">f</span><span class="op" id="5326864">.</span><span class="ident" id="5326865">Loads</span>&nbsp;<span class="op" id="5326871">=</span>&nbsp;<span class="builtinfunc" id="5326873">make</span><span class="op" id="5326877">(</span><span class="op" id="5326878">[</span><span class="op" id="5326879">]</span><span class="ident" id="5326880">Load</span><span class="op" id="5326884">,</span>&nbsp;<span class="ident" id="5326886">f</span><span class="op" id="5326887">.</span><span class="ident" id="5326888">Ncmd</span><span class="op" id="5326892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5326895">bo</span>&nbsp;<span class="op" id="5326898">:=</span>&nbsp;<span class="ident" id="5326901">f</span><span class="op" id="5326902">.</span><span class="ident" id="5326903">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5326914">for</span>&nbsp;<span class="ident" id="5326918">i</span>&nbsp;<span class="op" id="5326920">:=</span>&nbsp;<span class="keyword" id="5326923">range</span>&nbsp;<span class="ident" id="5326929">f</span><span class="op" id="5326930">.</span><span class="ident" id="5326931">Loads</span>&nbsp;<span class="op" id="5326937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5326941">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327003">if</span>&nbsp;<span class="builtinfunc" id="5327006">len</span><span class="op" id="5327009">(</span><span class="ident" id="5327010">dat</span><span class="op" id="5327013">)</span>&nbsp;<span class="op" id="5327015">&lt;</span>&nbsp;<span class="num" id="5327017">8</span>&nbsp;<span class="op" id="5327019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327024">return</span>&nbsp;<span class="ident" id="5327031">nil</span><span class="op" id="5327034">,</span>&nbsp;<span class="op" id="5327036">&amp;</span><span class="ident" id="5327037">FormatError</span><span class="op" id="5327048">{</span><span class="ident" id="5327049">offset</span><span class="op" id="5327055">,</span>&nbsp;<span class="string" id="5327057">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="5327082">,</span>&nbsp;<span class="ident" id="5327084">nil</span><span class="op" id="5327087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327091">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327095">cmd</span><span class="op" id="5327098">,</span>&nbsp;<span class="ident" id="5327100">siz</span>&nbsp;<span class="op" id="5327104">:=</span>&nbsp;<span class="ident" id="5327107">LoadCmd</span><span class="op" id="5327114">(</span><span class="ident" id="5327115">bo</span><span class="op" id="5327117">.</span><span class="ident" id="5327118">Uint32</span><span class="op" id="5327124">(</span><span class="ident" id="5327125">dat</span><span class="op" id="5327128">[</span><span class="num" id="5327129">0</span><span class="op" id="5327130">:</span><span class="num" id="5327131">4</span><span class="op" id="5327132">]</span><span class="op" id="5327133">)</span><span class="op" id="5327134">)</span><span class="op" id="5327135">,</span>&nbsp;<span class="ident" id="5327137">bo</span><span class="op" id="5327139">.</span><span class="ident" id="5327140">Uint32</span><span class="op" id="5327146">(</span><span class="ident" id="5327147">dat</span><span class="op" id="5327150">[</span><span class="num" id="5327151">4</span><span class="op" id="5327152">:</span><span class="num" id="5327153">8</span><span class="op" id="5327154">]</span><span class="op" id="5327155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327159">if</span>&nbsp;<span class="ident" id="5327162">siz</span>&nbsp;<span class="op" id="5327166">&lt;</span>&nbsp;<span class="num" id="5327168">8</span>&nbsp;<span class="op" id="5327170">||</span>&nbsp;<span class="ident" id="5327173">siz</span>&nbsp;<span class="op" id="5327177">&gt;</span>&nbsp;<span class="builtintype" id="5327179">uint32</span><span class="op" id="5327185">(</span><span class="builtinfunc" id="5327186">len</span><span class="op" id="5327189">(</span><span class="ident" id="5327190">dat</span><span class="op" id="5327193">)</span><span class="op" id="5327194">)</span>&nbsp;<span class="op" id="5327196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327201">return</span>&nbsp;<span class="ident" id="5327208">nil</span><span class="op" id="5327211">,</span>&nbsp;<span class="op" id="5327213">&amp;</span><span class="ident" id="5327214">FormatError</span><span class="op" id="5327225">{</span><span class="ident" id="5327226">offset</span><span class="op" id="5327232">,</span>&nbsp;<span class="string" id="5327234">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="5327262">,</span>&nbsp;<span class="ident" id="5327264">nil</span><span class="op" id="5327267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327275">var</span>&nbsp;<span class="ident" id="5327279">cmddat</span>&nbsp;<span class="op" id="5327286">[</span><span class="op" id="5327287">]</span><span class="builtintype" id="5327288">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327295">cmddat</span><span class="op" id="5327301">,</span>&nbsp;<span class="ident" id="5327303">dat</span>&nbsp;<span class="op" id="5327307">=</span>&nbsp;<span class="ident" id="5327309">dat</span><span class="op" id="5327312">[</span><span class="num" id="5327313">0</span><span class="op" id="5327314">:</span><span class="ident" id="5327315">siz</span><span class="op" id="5327318">]</span><span class="op" id="5327319">,</span>&nbsp;<span class="ident" id="5327321">dat</span><span class="op" id="5327324">[</span><span class="ident" id="5327325">siz</span><span class="op" id="5327328">:</span><span class="op" id="5327329">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327333">offset</span>&nbsp;<span class="op" id="5327340">+=</span>&nbsp;<span class="ident" id="5327343">int64</span><span class="op" id="5327348">(</span><span class="ident" id="5327349">siz</span><span class="op" id="5327352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327356">var</span>&nbsp;<span class="ident" id="5327360">s</span>&nbsp;<span class="op" id="5327362">*</span><span class="ident" id="5327363">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327373">switch</span>&nbsp;<span class="ident" id="5327380">cmd</span>&nbsp;<span class="op" id="5327384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327388">default</span><span class="op" id="5327395">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327400">f</span><span class="op" id="5327401">.</span><span class="ident" id="5327402">Loads</span><span class="op" id="5327407">[</span><span class="ident" id="5327408">i</span><span class="op" id="5327409">]</span>&nbsp;<span class="op" id="5327411">=</span>&nbsp;<span class="ident" id="5327413">LoadBytes</span><span class="op" id="5327422">(</span><span class="ident" id="5327423">cmddat</span><span class="op" id="5327429">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327434">case</span>&nbsp;<span class="ident" id="5327439">LoadCmdDylib</span><span class="op" id="5327451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327456">var</span>&nbsp;<span class="ident" id="5327460">hdr</span>&nbsp;<span class="ident" id="5327464">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327476">b</span>&nbsp;<span class="op" id="5327478">:=</span>&nbsp;<span class="ident" id="5327481">bytes</span><span class="op" id="5327486">.</span><span class="ident" id="5327487">NewReader</span><span class="op" id="5327496">(</span><span class="ident" id="5327497">cmddat</span><span class="op" id="5327503">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327508">if</span>&nbsp;<span class="ident" id="5327511">err</span>&nbsp;<span class="op" id="5327515">:=</span>&nbsp;<span class="ident" id="5327518">binary</span><span class="op" id="5327524">.</span><span class="ident" id="5327525">Read</span><span class="op" id="5327529">(</span><span class="ident" id="5327530">b</span><span class="op" id="5327531">,</span>&nbsp;<span class="ident" id="5327533">bo</span><span class="op" id="5327535">,</span>&nbsp;<span class="op" id="5327537">&amp;</span><span class="ident" id="5327538">hdr</span><span class="op" id="5327541">)</span><span class="op" id="5327542">;</span>&nbsp;<span class="ident" id="5327544">err</span>&nbsp;<span class="op" id="5327548">!=</span>&nbsp;<span class="ident" id="5327551">nil</span>&nbsp;<span class="op" id="5327555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327561">return</span>&nbsp;<span class="ident" id="5327568">nil</span><span class="op" id="5327571">,</span>&nbsp;<span class="ident" id="5327573">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327585">l</span>&nbsp;<span class="op" id="5327587">:=</span>&nbsp;<span class="builtinfunc" id="5327590">new</span><span class="op" id="5327593">(</span><span class="ident" id="5327594">Dylib</span><span class="op" id="5327599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327604">if</span>&nbsp;<span class="ident" id="5327607">hdr</span><span class="op" id="5327610">.</span><span class="ident" id="5327611">Name</span>&nbsp;<span class="op" id="5327616">&gt;=</span>&nbsp;<span class="builtintype" id="5327619">uint32</span><span class="op" id="5327625">(</span><span class="builtinfunc" id="5327626">len</span><span class="op" id="5327629">(</span><span class="ident" id="5327630">cmddat</span><span class="op" id="5327636">)</span><span class="op" id="5327637">)</span>&nbsp;<span class="op" id="5327639">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327645">return</span>&nbsp;<span class="ident" id="5327652">nil</span><span class="op" id="5327655">,</span>&nbsp;<span class="op" id="5327657">&amp;</span><span class="ident" id="5327658">FormatError</span><span class="op" id="5327669">{</span><span class="ident" id="5327670">offset</span><span class="op" id="5327676">,</span>&nbsp;<span class="string" id="5327678">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="5327719">,</span>&nbsp;<span class="ident" id="5327721">hdr</span><span class="op" id="5327724">.</span><span class="ident" id="5327725">Name</span><span class="op" id="5327729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5327734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327739">l</span><span class="op" id="5327740">.</span><span class="ident" id="5327741">Name</span>&nbsp;<span class="op" id="5327746">=</span>&nbsp;<span class="ident" id="5327748">cstring</span><span class="op" id="5327755">(</span><span class="ident" id="5327756">cmddat</span><span class="op" id="5327762">[</span><span class="ident" id="5327763">hdr</span><span class="op" id="5327766">.</span><span class="ident" id="5327767">Name</span><span class="op" id="5327771">:</span><span class="op" id="5327772">]</span><span class="op" id="5327773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327778">l</span><span class="op" id="5327779">.</span><span class="ident" id="5327780">Time</span>&nbsp;<span class="op" id="5327785">=</span>&nbsp;<span class="ident" id="5327787">hdr</span><span class="op" id="5327790">.</span><span class="ident" id="5327791">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327799">l</span><span class="op" id="5327800">.</span><span class="ident" id="5327801">CurrentVersion</span>&nbsp;<span class="op" id="5327816">=</span>&nbsp;<span class="ident" id="5327818">hdr</span><span class="op" id="5327821">.</span><span class="ident" id="5327822">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327840">l</span><span class="op" id="5327841">.</span><span class="ident" id="5327842">CompatVersion</span>&nbsp;<span class="op" id="5327856">=</span>&nbsp;<span class="ident" id="5327858">hdr</span><span class="op" id="5327861">.</span><span class="ident" id="5327862">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327879">l</span><span class="op" id="5327880">.</span><span class="ident" id="5327881">LoadBytes</span>&nbsp;<span class="op" id="5327891">=</span>&nbsp;<span class="ident" id="5327893">LoadBytes</span><span class="op" id="5327902">(</span><span class="ident" id="5327903">cmddat</span><span class="op" id="5327909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327914">f</span><span class="op" id="5327915">.</span><span class="ident" id="5327916">Loads</span><span class="op" id="5327921">[</span><span class="ident" id="5327922">i</span><span class="op" id="5327923">]</span>&nbsp;<span class="op" id="5327925">=</span>&nbsp;<span class="ident" id="5327927">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327932">case</span>&nbsp;<span class="ident" id="5327937">LoadCmdSymtab</span><span class="op" id="5327950">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5327955">var</span>&nbsp;<span class="ident" id="5327959">hdr</span>&nbsp;<span class="ident" id="5327963">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5327976">b</span>&nbsp;<span class="op" id="5327978">:=</span>&nbsp;<span class="ident" id="5327981">bytes</span><span class="op" id="5327986">.</span><span class="ident" id="5327987">NewReader</span><span class="op" id="5327996">(</span><span class="ident" id="5327997">cmddat</span><span class="op" id="5328003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328008">if</span>&nbsp;<span class="ident" id="5328011">err</span>&nbsp;<span class="op" id="5328015">:=</span>&nbsp;<span class="ident" id="5328018">binary</span><span class="op" id="5328024">.</span><span class="ident" id="5328025">Read</span><span class="op" id="5328029">(</span><span class="ident" id="5328030">b</span><span class="op" id="5328031">,</span>&nbsp;<span class="ident" id="5328033">bo</span><span class="op" id="5328035">,</span>&nbsp;<span class="op" id="5328037">&amp;</span><span class="ident" id="5328038">hdr</span><span class="op" id="5328041">)</span><span class="op" id="5328042">;</span>&nbsp;<span class="ident" id="5328044">err</span>&nbsp;<span class="op" id="5328048">!=</span>&nbsp;<span class="ident" id="5328051">nil</span>&nbsp;<span class="op" id="5328055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328061">return</span>&nbsp;<span class="ident" id="5328068">nil</span><span class="op" id="5328071">,</span>&nbsp;<span class="ident" id="5328073">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328080">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328085">strtab</span>&nbsp;<span class="op" id="5328092">:=</span>&nbsp;<span class="builtinfunc" id="5328095">make</span><span class="op" id="5328099">(</span><span class="op" id="5328100">[</span><span class="op" id="5328101">]</span><span class="builtintype" id="5328102">byte</span><span class="op" id="5328106">,</span>&nbsp;<span class="ident" id="5328108">hdr</span><span class="op" id="5328111">.</span><span class="ident" id="5328112">Strsize</span><span class="op" id="5328119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328124">if</span>&nbsp;<span class="ident" id="5328127">_</span><span class="op" id="5328128">,</span>&nbsp;<span class="ident" id="5328130">err</span>&nbsp;<span class="op" id="5328134">:=</span>&nbsp;<span class="ident" id="5328137">r</span><span class="op" id="5328138">.</span><span class="ident" id="5328139">ReadAt</span><span class="op" id="5328145">(</span><span class="ident" id="5328146">strtab</span><span class="op" id="5328152">,</span>&nbsp;<span class="ident" id="5328154">int64</span><span class="op" id="5328159">(</span><span class="ident" id="5328160">hdr</span><span class="op" id="5328163">.</span><span class="ident" id="5328164">Stroff</span><span class="op" id="5328170">)</span><span class="op" id="5328171">)</span><span class="op" id="5328172">;</span>&nbsp;<span class="ident" id="5328174">err</span>&nbsp;<span class="op" id="5328178">!=</span>&nbsp;<span class="ident" id="5328181">nil</span>&nbsp;<span class="op" id="5328185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328191">return</span>&nbsp;<span class="ident" id="5328198">nil</span><span class="op" id="5328201">,</span>&nbsp;<span class="ident" id="5328203">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328215">var</span>&nbsp;<span class="ident" id="5328219">symsz</span>&nbsp;<span class="builtintype" id="5328225">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328232">if</span>&nbsp;<span class="ident" id="5328235">f</span><span class="op" id="5328236">.</span><span class="ident" id="5328237">Magic</span>&nbsp;<span class="op" id="5328243">==</span>&nbsp;<span class="ident" id="5328246">Magic64</span>&nbsp;<span class="op" id="5328254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328260">symsz</span>&nbsp;<span class="op" id="5328266">=</span>&nbsp;<span class="num" id="5328268">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328274">}</span>&nbsp;<span class="keyword" id="5328276">else</span>&nbsp;<span class="op" id="5328281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328287">symsz</span>&nbsp;<span class="op" id="5328293">=</span>&nbsp;<span class="num" id="5328295">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328301">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328306">symdat</span>&nbsp;<span class="op" id="5328313">:=</span>&nbsp;<span class="builtinfunc" id="5328316">make</span><span class="op" id="5328320">(</span><span class="op" id="5328321">[</span><span class="op" id="5328322">]</span><span class="builtintype" id="5328323">byte</span><span class="op" id="5328327">,</span>&nbsp;<span class="builtintype" id="5328329">int</span><span class="op" id="5328332">(</span><span class="ident" id="5328333">hdr</span><span class="op" id="5328336">.</span><span class="ident" id="5328337">Nsyms</span><span class="op" id="5328342">)</span><span class="op" id="5328343">*</span><span class="ident" id="5328344">symsz</span><span class="op" id="5328349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328354">if</span>&nbsp;<span class="ident" id="5328357">_</span><span class="op" id="5328358">,</span>&nbsp;<span class="ident" id="5328360">err</span>&nbsp;<span class="op" id="5328364">:=</span>&nbsp;<span class="ident" id="5328367">r</span><span class="op" id="5328368">.</span><span class="ident" id="5328369">ReadAt</span><span class="op" id="5328375">(</span><span class="ident" id="5328376">symdat</span><span class="op" id="5328382">,</span>&nbsp;<span class="ident" id="5328384">int64</span><span class="op" id="5328389">(</span><span class="ident" id="5328390">hdr</span><span class="op" id="5328393">.</span><span class="ident" id="5328394">Symoff</span><span class="op" id="5328400">)</span><span class="op" id="5328401">)</span><span class="op" id="5328402">;</span>&nbsp;<span class="ident" id="5328404">err</span>&nbsp;<span class="op" id="5328408">!=</span>&nbsp;<span class="ident" id="5328411">nil</span>&nbsp;<span class="op" id="5328415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328421">return</span>&nbsp;<span class="ident" id="5328428">nil</span><span class="op" id="5328431">,</span>&nbsp;<span class="ident" id="5328433">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328445">st</span><span class="op" id="5328447">,</span>&nbsp;<span class="ident" id="5328449">err</span>&nbsp;<span class="op" id="5328453">:=</span>&nbsp;<span class="ident" id="5328456">f</span><span class="op" id="5328457">.</span><span class="ident" id="5328458">parseSymtab</span><span class="op" id="5328469">(</span><span class="ident" id="5328470">symdat</span><span class="op" id="5328476">,</span>&nbsp;<span class="ident" id="5328478">strtab</span><span class="op" id="5328484">,</span>&nbsp;<span class="ident" id="5328486">cmddat</span><span class="op" id="5328492">,</span>&nbsp;<span class="op" id="5328494">&amp;</span><span class="ident" id="5328495">hdr</span><span class="op" id="5328498">,</span>&nbsp;<span class="ident" id="5328500">offset</span><span class="op" id="5328506">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328511">if</span>&nbsp;<span class="ident" id="5328514">err</span>&nbsp;<span class="op" id="5328518">!=</span>&nbsp;<span class="ident" id="5328521">nil</span>&nbsp;<span class="op" id="5328525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328531">return</span>&nbsp;<span class="ident" id="5328538">nil</span><span class="op" id="5328541">,</span>&nbsp;<span class="ident" id="5328543">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328555">f</span><span class="op" id="5328556">.</span><span class="ident" id="5328557">Loads</span><span class="op" id="5328562">[</span><span class="ident" id="5328563">i</span><span class="op" id="5328564">]</span>&nbsp;<span class="op" id="5328566">=</span>&nbsp;<span class="ident" id="5328568">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328574">f</span><span class="op" id="5328575">.</span><span class="ident" id="5328576">Symtab</span>&nbsp;<span class="op" id="5328583">=</span>&nbsp;<span class="ident" id="5328585">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328591">case</span>&nbsp;<span class="ident" id="5328596">LoadCmdDysymtab</span><span class="op" id="5328611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328616">var</span>&nbsp;<span class="ident" id="5328620">hdr</span>&nbsp;<span class="ident" id="5328624">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328639">b</span>&nbsp;<span class="op" id="5328641">:=</span>&nbsp;<span class="ident" id="5328644">bytes</span><span class="op" id="5328649">.</span><span class="ident" id="5328650">NewReader</span><span class="op" id="5328659">(</span><span class="ident" id="5328660">cmddat</span><span class="op" id="5328666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328671">if</span>&nbsp;<span class="ident" id="5328674">err</span>&nbsp;<span class="op" id="5328678">:=</span>&nbsp;<span class="ident" id="5328681">binary</span><span class="op" id="5328687">.</span><span class="ident" id="5328688">Read</span><span class="op" id="5328692">(</span><span class="ident" id="5328693">b</span><span class="op" id="5328694">,</span>&nbsp;<span class="ident" id="5328696">bo</span><span class="op" id="5328698">,</span>&nbsp;<span class="op" id="5328700">&amp;</span><span class="ident" id="5328701">hdr</span><span class="op" id="5328704">)</span><span class="op" id="5328705">;</span>&nbsp;<span class="ident" id="5328707">err</span>&nbsp;<span class="op" id="5328711">!=</span>&nbsp;<span class="ident" id="5328714">nil</span>&nbsp;<span class="op" id="5328718">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328724">return</span>&nbsp;<span class="ident" id="5328731">nil</span><span class="op" id="5328734">,</span>&nbsp;<span class="ident" id="5328736">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328748">dat</span>&nbsp;<span class="op" id="5328752">:=</span>&nbsp;<span class="builtinfunc" id="5328755">make</span><span class="op" id="5328759">(</span><span class="op" id="5328760">[</span><span class="op" id="5328761">]</span><span class="builtintype" id="5328762">byte</span><span class="op" id="5328766">,</span>&nbsp;<span class="ident" id="5328768">hdr</span><span class="op" id="5328771">.</span><span class="ident" id="5328772">Nindirectsyms</span><span class="op" id="5328785">*</span><span class="num" id="5328786">4</span><span class="op" id="5328787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328792">if</span>&nbsp;<span class="ident" id="5328795">_</span><span class="op" id="5328796">,</span>&nbsp;<span class="ident" id="5328798">err</span>&nbsp;<span class="op" id="5328802">:=</span>&nbsp;<span class="ident" id="5328805">r</span><span class="op" id="5328806">.</span><span class="ident" id="5328807">ReadAt</span><span class="op" id="5328813">(</span><span class="ident" id="5328814">dat</span><span class="op" id="5328817">,</span>&nbsp;<span class="ident" id="5328819">int64</span><span class="op" id="5328824">(</span><span class="ident" id="5328825">hdr</span><span class="op" id="5328828">.</span><span class="ident" id="5328829">Indirectsymoff</span><span class="op" id="5328843">)</span><span class="op" id="5328844">)</span><span class="op" id="5328845">;</span>&nbsp;<span class="ident" id="5328847">err</span>&nbsp;<span class="op" id="5328851">!=</span>&nbsp;<span class="ident" id="5328854">nil</span>&nbsp;<span class="op" id="5328858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328864">return</span>&nbsp;<span class="ident" id="5328871">nil</span><span class="op" id="5328874">,</span>&nbsp;<span class="ident" id="5328876">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5328883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5328888">x</span>&nbsp;<span class="op" id="5328890">:=</span>&nbsp;<span class="builtinfunc" id="5328893">make</span><span class="op" id="5328897">(</span><span class="op" id="5328898">[</span><span class="op" id="5328899">]</span><span class="builtintype" id="5328900">uint32</span><span class="op" id="5328906">,</span>&nbsp;<span class="ident" id="5328908">hdr</span><span class="op" id="5328911">.</span><span class="ident" id="5328912">Nindirectsyms</span><span class="op" id="5328925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328930">if</span>&nbsp;<span class="ident" id="5328933">err</span>&nbsp;<span class="op" id="5328937">:=</span>&nbsp;<span class="ident" id="5328940">binary</span><span class="op" id="5328946">.</span><span class="ident" id="5328947">Read</span><span class="op" id="5328951">(</span><span class="ident" id="5328952">bytes</span><span class="op" id="5328957">.</span><span class="ident" id="5328958">NewReader</span><span class="op" id="5328967">(</span><span class="ident" id="5328968">dat</span><span class="op" id="5328971">)</span><span class="op" id="5328972">,</span>&nbsp;<span class="ident" id="5328974">bo</span><span class="op" id="5328976">,</span>&nbsp;<span class="ident" id="5328978">x</span><span class="op" id="5328979">)</span><span class="op" id="5328980">;</span>&nbsp;<span class="ident" id="5328982">err</span>&nbsp;<span class="op" id="5328986">!=</span>&nbsp;<span class="ident" id="5328989">nil</span>&nbsp;<span class="op" id="5328993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5328999">return</span>&nbsp;<span class="ident" id="5329006">nil</span><span class="op" id="5329009">,</span>&nbsp;<span class="ident" id="5329011">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329018">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329023">st</span>&nbsp;<span class="op" id="5329026">:=</span>&nbsp;<span class="builtinfunc" id="5329029">new</span><span class="op" id="5329032">(</span><span class="ident" id="5329033">Dysymtab</span><span class="op" id="5329041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329046">st</span><span class="op" id="5329048">.</span><span class="ident" id="5329049">LoadBytes</span>&nbsp;<span class="op" id="5329059">=</span>&nbsp;<span class="ident" id="5329061">LoadBytes</span><span class="op" id="5329070">(</span><span class="ident" id="5329071">cmddat</span><span class="op" id="5329077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329082">st</span><span class="op" id="5329084">.</span><span class="ident" id="5329085">DysymtabCmd</span>&nbsp;<span class="op" id="5329097">=</span>&nbsp;<span class="ident" id="5329099">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329106">st</span><span class="op" id="5329108">.</span><span class="ident" id="5329109">IndirectSyms</span>&nbsp;<span class="op" id="5329122">=</span>&nbsp;<span class="ident" id="5329124">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329129">f</span><span class="op" id="5329130">.</span><span class="ident" id="5329131">Loads</span><span class="op" id="5329136">[</span><span class="ident" id="5329137">i</span><span class="op" id="5329138">]</span>&nbsp;<span class="op" id="5329140">=</span>&nbsp;<span class="ident" id="5329142">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329148">f</span><span class="op" id="5329149">.</span><span class="ident" id="5329150">Dysymtab</span>&nbsp;<span class="op" id="5329159">=</span>&nbsp;<span class="ident" id="5329161">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329167">case</span>&nbsp;<span class="ident" id="5329172">LoadCmdSegment</span><span class="op" id="5329186">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329191">var</span>&nbsp;<span class="ident" id="5329195">seg32</span>&nbsp;<span class="ident" id="5329201">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329214">b</span>&nbsp;<span class="op" id="5329216">:=</span>&nbsp;<span class="ident" id="5329219">bytes</span><span class="op" id="5329224">.</span><span class="ident" id="5329225">NewReader</span><span class="op" id="5329234">(</span><span class="ident" id="5329235">cmddat</span><span class="op" id="5329241">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329246">if</span>&nbsp;<span class="ident" id="5329249">err</span>&nbsp;<span class="op" id="5329253">:=</span>&nbsp;<span class="ident" id="5329256">binary</span><span class="op" id="5329262">.</span><span class="ident" id="5329263">Read</span><span class="op" id="5329267">(</span><span class="ident" id="5329268">b</span><span class="op" id="5329269">,</span>&nbsp;<span class="ident" id="5329271">bo</span><span class="op" id="5329273">,</span>&nbsp;<span class="op" id="5329275">&amp;</span><span class="ident" id="5329276">seg32</span><span class="op" id="5329281">)</span><span class="op" id="5329282">;</span>&nbsp;<span class="ident" id="5329284">err</span>&nbsp;<span class="op" id="5329288">!=</span>&nbsp;<span class="ident" id="5329291">nil</span>&nbsp;<span class="op" id="5329295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329301">return</span>&nbsp;<span class="ident" id="5329308">nil</span><span class="op" id="5329311">,</span>&nbsp;<span class="ident" id="5329313">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329325">s</span>&nbsp;<span class="op" id="5329327">=</span>&nbsp;<span class="builtinfunc" id="5329329">new</span><span class="op" id="5329332">(</span><span class="ident" id="5329333">Segment</span><span class="op" id="5329340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329345">s</span><span class="op" id="5329346">.</span><span class="ident" id="5329347">LoadBytes</span>&nbsp;<span class="op" id="5329357">=</span>&nbsp;<span class="ident" id="5329359">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329369">s</span><span class="op" id="5329370">.</span><span class="ident" id="5329371">Cmd</span>&nbsp;<span class="op" id="5329375">=</span>&nbsp;<span class="ident" id="5329377">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329384">s</span><span class="op" id="5329385">.</span><span class="ident" id="5329386">Len</span>&nbsp;<span class="op" id="5329390">=</span>&nbsp;<span class="ident" id="5329392">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329399">s</span><span class="op" id="5329400">.</span><span class="ident" id="5329401">Name</span>&nbsp;<span class="op" id="5329406">=</span>&nbsp;<span class="ident" id="5329408">cstring</span><span class="op" id="5329415">(</span><span class="ident" id="5329416">seg32</span><span class="op" id="5329421">.</span><span class="ident" id="5329422">Name</span><span class="op" id="5329426">[</span><span class="num" id="5329427">0</span><span class="op" id="5329428">:</span><span class="op" id="5329429">]</span><span class="op" id="5329430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329435">s</span><span class="op" id="5329436">.</span><span class="ident" id="5329437">Addr</span>&nbsp;<span class="op" id="5329442">=</span>&nbsp;<span class="ident" id="5329444">uint64</span><span class="op" id="5329450">(</span><span class="ident" id="5329451">seg32</span><span class="op" id="5329456">.</span><span class="ident" id="5329457">Addr</span><span class="op" id="5329461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329466">s</span><span class="op" id="5329467">.</span><span class="ident" id="5329468">Memsz</span>&nbsp;<span class="op" id="5329474">=</span>&nbsp;<span class="ident" id="5329476">uint64</span><span class="op" id="5329482">(</span><span class="ident" id="5329483">seg32</span><span class="op" id="5329488">.</span><span class="ident" id="5329489">Memsz</span><span class="op" id="5329494">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329499">s</span><span class="op" id="5329500">.</span><span class="ident" id="5329501">Offset</span>&nbsp;<span class="op" id="5329508">=</span>&nbsp;<span class="ident" id="5329510">uint64</span><span class="op" id="5329516">(</span><span class="ident" id="5329517">seg32</span><span class="op" id="5329522">.</span><span class="ident" id="5329523">Offset</span><span class="op" id="5329529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329534">s</span><span class="op" id="5329535">.</span><span class="ident" id="5329536">Filesz</span>&nbsp;<span class="op" id="5329543">=</span>&nbsp;<span class="ident" id="5329545">uint64</span><span class="op" id="5329551">(</span><span class="ident" id="5329552">seg32</span><span class="op" id="5329557">.</span><span class="ident" id="5329558">Filesz</span><span class="op" id="5329564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329569">s</span><span class="op" id="5329570">.</span><span class="ident" id="5329571">Maxprot</span>&nbsp;<span class="op" id="5329579">=</span>&nbsp;<span class="ident" id="5329581">seg32</span><span class="op" id="5329586">.</span><span class="ident" id="5329587">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329598">s</span><span class="op" id="5329599">.</span><span class="ident" id="5329600">Prot</span>&nbsp;<span class="op" id="5329605">=</span>&nbsp;<span class="ident" id="5329607">seg32</span><span class="op" id="5329612">.</span><span class="ident" id="5329613">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329621">s</span><span class="op" id="5329622">.</span><span class="ident" id="5329623">Nsect</span>&nbsp;<span class="op" id="5329629">=</span>&nbsp;<span class="ident" id="5329631">seg32</span><span class="op" id="5329636">.</span><span class="ident" id="5329637">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329646">s</span><span class="op" id="5329647">.</span><span class="ident" id="5329648">Flag</span>&nbsp;<span class="op" id="5329653">=</span>&nbsp;<span class="ident" id="5329655">seg32</span><span class="op" id="5329660">.</span><span class="ident" id="5329661">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329669">f</span><span class="op" id="5329670">.</span><span class="ident" id="5329671">Loads</span><span class="op" id="5329676">[</span><span class="ident" id="5329677">i</span><span class="op" id="5329678">]</span>&nbsp;<span class="op" id="5329680">=</span>&nbsp;<span class="ident" id="5329682">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329687">for</span>&nbsp;<span class="ident" id="5329691">i</span>&nbsp;<span class="op" id="5329693">:=</span>&nbsp;<span class="num" id="5329696">0</span><span class="op" id="5329697">;</span>&nbsp;<span class="ident" id="5329699">i</span>&nbsp;<span class="op" id="5329701">&lt;</span>&nbsp;<span class="builtintype" id="5329703">int</span><span class="op" id="5329706">(</span><span class="ident" id="5329707">s</span><span class="op" id="5329708">.</span><span class="ident" id="5329709">Nsect</span><span class="op" id="5329714">)</span><span class="op" id="5329715">;</span>&nbsp;<span class="ident" id="5329717">i</span><span class="op" id="5329718">++</span>&nbsp;<span class="op" id="5329721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329727">var</span>&nbsp;<span class="ident" id="5329731">sh32</span>&nbsp;<span class="ident" id="5329736">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329750">if</span>&nbsp;<span class="ident" id="5329753">err</span>&nbsp;<span class="op" id="5329757">:=</span>&nbsp;<span class="ident" id="5329760">binary</span><span class="op" id="5329766">.</span><span class="ident" id="5329767">Read</span><span class="op" id="5329771">(</span><span class="ident" id="5329772">b</span><span class="op" id="5329773">,</span>&nbsp;<span class="ident" id="5329775">bo</span><span class="op" id="5329777">,</span>&nbsp;<span class="op" id="5329779">&amp;</span><span class="ident" id="5329780">sh32</span><span class="op" id="5329784">)</span><span class="op" id="5329785">;</span>&nbsp;<span class="ident" id="5329787">err</span>&nbsp;<span class="op" id="5329791">!=</span>&nbsp;<span class="ident" id="5329794">nil</span>&nbsp;<span class="op" id="5329798">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5329805">return</span>&nbsp;<span class="ident" id="5329812">nil</span><span class="op" id="5329815">,</span>&nbsp;<span class="ident" id="5329817">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5329825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329831">sh</span>&nbsp;<span class="op" id="5329834">:=</span>&nbsp;<span class="builtinfunc" id="5329837">new</span><span class="op" id="5329840">(</span><span class="ident" id="5329841">Section</span><span class="op" id="5329848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329854">sh</span><span class="op" id="5329856">.</span><span class="ident" id="5329857">Name</span>&nbsp;<span class="op" id="5329862">=</span>&nbsp;<span class="ident" id="5329864">cstring</span><span class="op" id="5329871">(</span><span class="ident" id="5329872">sh32</span><span class="op" id="5329876">.</span><span class="ident" id="5329877">Name</span><span class="op" id="5329881">[</span><span class="num" id="5329882">0</span><span class="op" id="5329883">:</span><span class="op" id="5329884">]</span><span class="op" id="5329885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329891">sh</span><span class="op" id="5329893">.</span><span class="ident" id="5329894">Seg</span>&nbsp;<span class="op" id="5329898">=</span>&nbsp;<span class="ident" id="5329900">cstring</span><span class="op" id="5329907">(</span><span class="ident" id="5329908">sh32</span><span class="op" id="5329912">.</span><span class="ident" id="5329913">Seg</span><span class="op" id="5329916">[</span><span class="num" id="5329917">0</span><span class="op" id="5329918">:</span><span class="op" id="5329919">]</span><span class="op" id="5329920">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329926">sh</span><span class="op" id="5329928">.</span><span class="ident" id="5329929">Addr</span>&nbsp;<span class="op" id="5329934">=</span>&nbsp;<span class="ident" id="5329936">uint64</span><span class="op" id="5329942">(</span><span class="ident" id="5329943">sh32</span><span class="op" id="5329947">.</span><span class="ident" id="5329948">Addr</span><span class="op" id="5329952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329958">sh</span><span class="op" id="5329960">.</span><span class="ident" id="5329961">Size</span>&nbsp;<span class="op" id="5329966">=</span>&nbsp;<span class="ident" id="5329968">uint64</span><span class="op" id="5329974">(</span><span class="ident" id="5329975">sh32</span><span class="op" id="5329979">.</span><span class="ident" id="5329980">Size</span><span class="op" id="5329984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5329990">sh</span><span class="op" id="5329992">.</span><span class="ident" id="5329993">Offset</span>&nbsp;<span class="op" id="5330000">=</span>&nbsp;<span class="ident" id="5330002">sh32</span><span class="op" id="5330006">.</span><span class="ident" id="5330007">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330018">sh</span><span class="op" id="5330020">.</span><span class="ident" id="5330021">Align</span>&nbsp;<span class="op" id="5330027">=</span>&nbsp;<span class="ident" id="5330029">sh32</span><span class="op" id="5330033">.</span><span class="ident" id="5330034">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330044">sh</span><span class="op" id="5330046">.</span><span class="ident" id="5330047">Reloff</span>&nbsp;<span class="op" id="5330054">=</span>&nbsp;<span class="ident" id="5330056">sh32</span><span class="op" id="5330060">.</span><span class="ident" id="5330061">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330072">sh</span><span class="op" id="5330074">.</span><span class="ident" id="5330075">Nreloc</span>&nbsp;<span class="op" id="5330082">=</span>&nbsp;<span class="ident" id="5330084">sh32</span><span class="op" id="5330088">.</span><span class="ident" id="5330089">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330100">sh</span><span class="op" id="5330102">.</span><span class="ident" id="5330103">Flags</span>&nbsp;<span class="op" id="5330109">=</span>&nbsp;<span class="ident" id="5330111">sh32</span><span class="op" id="5330115">.</span><span class="ident" id="5330116">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330126">f</span><span class="op" id="5330127">.</span><span class="ident" id="5330128">pushSection</span><span class="op" id="5330139">(</span><span class="ident" id="5330140">sh</span><span class="op" id="5330142">,</span>&nbsp;<span class="ident" id="5330144">r</span><span class="op" id="5330145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330155">case</span>&nbsp;<span class="ident" id="5330160">LoadCmdSegment64</span><span class="op" id="5330176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330181">var</span>&nbsp;<span class="ident" id="5330185">seg64</span>&nbsp;<span class="ident" id="5330191">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330204">b</span>&nbsp;<span class="op" id="5330206">:=</span>&nbsp;<span class="ident" id="5330209">bytes</span><span class="op" id="5330214">.</span><span class="ident" id="5330215">NewReader</span><span class="op" id="5330224">(</span><span class="ident" id="5330225">cmddat</span><span class="op" id="5330231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330236">if</span>&nbsp;<span class="ident" id="5330239">err</span>&nbsp;<span class="op" id="5330243">:=</span>&nbsp;<span class="ident" id="5330246">binary</span><span class="op" id="5330252">.</span><span class="ident" id="5330253">Read</span><span class="op" id="5330257">(</span><span class="ident" id="5330258">b</span><span class="op" id="5330259">,</span>&nbsp;<span class="ident" id="5330261">bo</span><span class="op" id="5330263">,</span>&nbsp;<span class="op" id="5330265">&amp;</span><span class="ident" id="5330266">seg64</span><span class="op" id="5330271">)</span><span class="op" id="5330272">;</span>&nbsp;<span class="ident" id="5330274">err</span>&nbsp;<span class="op" id="5330278">!=</span>&nbsp;<span class="ident" id="5330281">nil</span>&nbsp;<span class="op" id="5330285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330291">return</span>&nbsp;<span class="ident" id="5330298">nil</span><span class="op" id="5330301">,</span>&nbsp;<span class="ident" id="5330303">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330315">s</span>&nbsp;<span class="op" id="5330317">=</span>&nbsp;<span class="builtinfunc" id="5330319">new</span><span class="op" id="5330322">(</span><span class="ident" id="5330323">Segment</span><span class="op" id="5330330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330335">s</span><span class="op" id="5330336">.</span><span class="ident" id="5330337">LoadBytes</span>&nbsp;<span class="op" id="5330347">=</span>&nbsp;<span class="ident" id="5330349">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330359">s</span><span class="op" id="5330360">.</span><span class="ident" id="5330361">Cmd</span>&nbsp;<span class="op" id="5330365">=</span>&nbsp;<span class="ident" id="5330367">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330374">s</span><span class="op" id="5330375">.</span><span class="ident" id="5330376">Len</span>&nbsp;<span class="op" id="5330380">=</span>&nbsp;<span class="ident" id="5330382">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330389">s</span><span class="op" id="5330390">.</span><span class="ident" id="5330391">Name</span>&nbsp;<span class="op" id="5330396">=</span>&nbsp;<span class="ident" id="5330398">cstring</span><span class="op" id="5330405">(</span><span class="ident" id="5330406">seg64</span><span class="op" id="5330411">.</span><span class="ident" id="5330412">Name</span><span class="op" id="5330416">[</span><span class="num" id="5330417">0</span><span class="op" id="5330418">:</span><span class="op" id="5330419">]</span><span class="op" id="5330420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330425">s</span><span class="op" id="5330426">.</span><span class="ident" id="5330427">Addr</span>&nbsp;<span class="op" id="5330432">=</span>&nbsp;<span class="ident" id="5330434">seg64</span><span class="op" id="5330439">.</span><span class="ident" id="5330440">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330448">s</span><span class="op" id="5330449">.</span><span class="ident" id="5330450">Memsz</span>&nbsp;<span class="op" id="5330456">=</span>&nbsp;<span class="ident" id="5330458">seg64</span><span class="op" id="5330463">.</span><span class="ident" id="5330464">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330473">s</span><span class="op" id="5330474">.</span><span class="ident" id="5330475">Offset</span>&nbsp;<span class="op" id="5330482">=</span>&nbsp;<span class="ident" id="5330484">seg64</span><span class="op" id="5330489">.</span><span class="ident" id="5330490">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330500">s</span><span class="op" id="5330501">.</span><span class="ident" id="5330502">Filesz</span>&nbsp;<span class="op" id="5330509">=</span>&nbsp;<span class="ident" id="5330511">seg64</span><span class="op" id="5330516">.</span><span class="ident" id="5330517">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330527">s</span><span class="op" id="5330528">.</span><span class="ident" id="5330529">Maxprot</span>&nbsp;<span class="op" id="5330537">=</span>&nbsp;<span class="ident" id="5330539">seg64</span><span class="op" id="5330544">.</span><span class="ident" id="5330545">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330556">s</span><span class="op" id="5330557">.</span><span class="ident" id="5330558">Prot</span>&nbsp;<span class="op" id="5330563">=</span>&nbsp;<span class="ident" id="5330565">seg64</span><span class="op" id="5330570">.</span><span class="ident" id="5330571">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330579">s</span><span class="op" id="5330580">.</span><span class="ident" id="5330581">Nsect</span>&nbsp;<span class="op" id="5330587">=</span>&nbsp;<span class="ident" id="5330589">seg64</span><span class="op" id="5330594">.</span><span class="ident" id="5330595">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330604">s</span><span class="op" id="5330605">.</span><span class="ident" id="5330606">Flag</span>&nbsp;<span class="op" id="5330611">=</span>&nbsp;<span class="ident" id="5330613">seg64</span><span class="op" id="5330618">.</span><span class="ident" id="5330619">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330627">f</span><span class="op" id="5330628">.</span><span class="ident" id="5330629">Loads</span><span class="op" id="5330634">[</span><span class="ident" id="5330635">i</span><span class="op" id="5330636">]</span>&nbsp;<span class="op" id="5330638">=</span>&nbsp;<span class="ident" id="5330640">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330645">for</span>&nbsp;<span class="ident" id="5330649">i</span>&nbsp;<span class="op" id="5330651">:=</span>&nbsp;<span class="num" id="5330654">0</span><span class="op" id="5330655">;</span>&nbsp;<span class="ident" id="5330657">i</span>&nbsp;<span class="op" id="5330659">&lt;</span>&nbsp;<span class="builtintype" id="5330661">int</span><span class="op" id="5330664">(</span><span class="ident" id="5330665">s</span><span class="op" id="5330666">.</span><span class="ident" id="5330667">Nsect</span><span class="op" id="5330672">)</span><span class="op" id="5330673">;</span>&nbsp;<span class="ident" id="5330675">i</span><span class="op" id="5330676">++</span>&nbsp;<span class="op" id="5330679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330685">var</span>&nbsp;<span class="ident" id="5330689">sh64</span>&nbsp;<span class="ident" id="5330694">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330708">if</span>&nbsp;<span class="ident" id="5330711">err</span>&nbsp;<span class="op" id="5330715">:=</span>&nbsp;<span class="ident" id="5330718">binary</span><span class="op" id="5330724">.</span><span class="ident" id="5330725">Read</span><span class="op" id="5330729">(</span><span class="ident" id="5330730">b</span><span class="op" id="5330731">,</span>&nbsp;<span class="ident" id="5330733">bo</span><span class="op" id="5330735">,</span>&nbsp;<span class="op" id="5330737">&amp;</span><span class="ident" id="5330738">sh64</span><span class="op" id="5330742">)</span><span class="op" id="5330743">;</span>&nbsp;<span class="ident" id="5330745">err</span>&nbsp;<span class="op" id="5330749">!=</span>&nbsp;<span class="ident" id="5330752">nil</span>&nbsp;<span class="op" id="5330756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5330763">return</span>&nbsp;<span class="ident" id="5330770">nil</span><span class="op" id="5330773">,</span>&nbsp;<span class="ident" id="5330775">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5330783">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330789">sh</span>&nbsp;<span class="op" id="5330792">:=</span>&nbsp;<span class="builtinfunc" id="5330795">new</span><span class="op" id="5330798">(</span><span class="ident" id="5330799">Section</span><span class="op" id="5330806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330812">sh</span><span class="op" id="5330814">.</span><span class="ident" id="5330815">Name</span>&nbsp;<span class="op" id="5330820">=</span>&nbsp;<span class="ident" id="5330822">cstring</span><span class="op" id="5330829">(</span><span class="ident" id="5330830">sh64</span><span class="op" id="5330834">.</span><span class="ident" id="5330835">Name</span><span class="op" id="5330839">[</span><span class="num" id="5330840">0</span><span class="op" id="5330841">:</span><span class="op" id="5330842">]</span><span class="op" id="5330843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330849">sh</span><span class="op" id="5330851">.</span><span class="ident" id="5330852">Seg</span>&nbsp;<span class="op" id="5330856">=</span>&nbsp;<span class="ident" id="5330858">cstring</span><span class="op" id="5330865">(</span><span class="ident" id="5330866">sh64</span><span class="op" id="5330870">.</span><span class="ident" id="5330871">Seg</span><span class="op" id="5330874">[</span><span class="num" id="5330875">0</span><span class="op" id="5330876">:</span><span class="op" id="5330877">]</span><span class="op" id="5330878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330884">sh</span><span class="op" id="5330886">.</span><span class="ident" id="5330887">Addr</span>&nbsp;<span class="op" id="5330892">=</span>&nbsp;<span class="ident" id="5330894">sh64</span><span class="op" id="5330898">.</span><span class="ident" id="5330899">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330908">sh</span><span class="op" id="5330910">.</span><span class="ident" id="5330911">Size</span>&nbsp;<span class="op" id="5330916">=</span>&nbsp;<span class="ident" id="5330918">sh64</span><span class="op" id="5330922">.</span><span class="ident" id="5330923">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330932">sh</span><span class="op" id="5330934">.</span><span class="ident" id="5330935">Offset</span>&nbsp;<span class="op" id="5330942">=</span>&nbsp;<span class="ident" id="5330944">sh64</span><span class="op" id="5330948">.</span><span class="ident" id="5330949">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330960">sh</span><span class="op" id="5330962">.</span><span class="ident" id="5330963">Align</span>&nbsp;<span class="op" id="5330969">=</span>&nbsp;<span class="ident" id="5330971">sh64</span><span class="op" id="5330975">.</span><span class="ident" id="5330976">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5330986">sh</span><span class="op" id="5330988">.</span><span class="ident" id="5330989">Reloff</span>&nbsp;<span class="op" id="5330996">=</span>&nbsp;<span class="ident" id="5330998">sh64</span><span class="op" id="5331002">.</span><span class="ident" id="5331003">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331014">sh</span><span class="op" id="5331016">.</span><span class="ident" id="5331017">Nreloc</span>&nbsp;<span class="op" id="5331024">=</span>&nbsp;<span class="ident" id="5331026">sh64</span><span class="op" id="5331030">.</span><span class="ident" id="5331031">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331042">sh</span><span class="op" id="5331044">.</span><span class="ident" id="5331045">Flags</span>&nbsp;<span class="op" id="5331051">=</span>&nbsp;<span class="ident" id="5331053">sh64</span><span class="op" id="5331057">.</span><span class="ident" id="5331058">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331068">f</span><span class="op" id="5331069">.</span><span class="ident" id="5331070">pushSection</span><span class="op" id="5331081">(</span><span class="ident" id="5331082">sh</span><span class="op" id="5331084">,</span>&nbsp;<span class="ident" id="5331086">r</span><span class="op" id="5331087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331100">if</span>&nbsp;<span class="ident" id="5331103">s</span>&nbsp;<span class="op" id="5331105">!=</span>&nbsp;<span class="ident" id="5331108">nil</span>&nbsp;<span class="op" id="5331112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331117">s</span><span class="op" id="5331118">.</span><span class="ident" id="5331119">sr</span>&nbsp;<span class="op" id="5331122">=</span>&nbsp;<span class="ident" id="5331124">io</span><span class="op" id="5331126">.</span><span class="ident" id="5331127">NewSectionReader</span><span class="op" id="5331143">(</span><span class="ident" id="5331144">r</span><span class="op" id="5331145">,</span>&nbsp;<span class="ident" id="5331147">int64</span><span class="op" id="5331152">(</span><span class="ident" id="5331153">s</span><span class="op" id="5331154">.</span><span class="ident" id="5331155">Offset</span><span class="op" id="5331161">)</span><span class="op" id="5331162">,</span>&nbsp;<span class="ident" id="5331164">int64</span><span class="op" id="5331169">(</span><span class="ident" id="5331170">s</span><span class="op" id="5331171">.</span><span class="ident" id="5331172">Filesz</span><span class="op" id="5331178">)</span><span class="op" id="5331179">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331184">s</span><span class="op" id="5331185">.</span><span class="ident" id="5331186">ReaderAt</span>&nbsp;<span class="op" id="5331195">=</span>&nbsp;<span class="ident" id="5331197">s</span><span class="op" id="5331198">.</span><span class="ident" id="5331199">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331210">return</span>&nbsp;<span class="ident" id="5331217">f</span><span class="op" id="5331218">,</span>&nbsp;<span class="ident" id="5331220">nil</span><br>
<span class="lineno"></span><span class="op" id="5331224">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="5331227">func</span>&nbsp;<span class="op" id="5331232">(</span><span class="ident" id="5331233">f</span>&nbsp;<span class="op" id="5331235">*</span><span class="ident" id="5331236">File</span><span class="op" id="5331240">)</span>&nbsp;<span class="ident" id="5331242">parseSymtab</span><span class="op" id="5331253">(</span><span class="ident" id="5331254">symdat</span><span class="op" id="5331260">,</span>&nbsp;<span class="ident" id="5331262">strtab</span><span class="op" id="5331268">,</span>&nbsp;<span class="ident" id="5331270">cmddat</span>&nbsp;<span class="op" id="5331277">[</span><span class="op" id="5331278">]</span><span class="builtintype" id="5331279">byte</span><span class="op" id="5331283">,</span>&nbsp;<span class="ident" id="5331285">hdr</span>&nbsp;<span class="op" id="5331289">*</span><span class="ident" id="5331290">SymtabCmd</span><span class="op" id="5331299">,</span>&nbsp;<span class="ident" id="5331301">offset</span>&nbsp;<span class="ident" id="5331308">int64</span><span class="op" id="5331313">)</span>&nbsp;<span class="op" id="5331315">(</span><span class="op" id="5331316">*</span><span class="ident" id="5331317">Symtab</span><span class="op" id="5331323">,</span>&nbsp;<span class="builtintype" id="5331325">error</span><span class="op" id="5331330">)</span>&nbsp;<span class="op" id="5331332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331335">bo</span>&nbsp;<span class="op" id="5331338">:=</span>&nbsp;<span class="ident" id="5331341">f</span><span class="op" id="5331342">.</span><span class="ident" id="5331343">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331354">symtab</span>&nbsp;<span class="op" id="5331361">:=</span>&nbsp;<span class="builtinfunc" id="5331364">make</span><span class="op" id="5331368">(</span><span class="op" id="5331369">[</span><span class="op" id="5331370">]</span><span class="ident" id="5331371">Symbol</span><span class="op" id="5331377">,</span>&nbsp;<span class="ident" id="5331379">hdr</span><span class="op" id="5331382">.</span><span class="ident" id="5331383">Nsyms</span><span class="op" id="5331388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331391">b</span>&nbsp;<span class="op" id="5331393">:=</span>&nbsp;<span class="ident" id="5331396">bytes</span><span class="op" id="5331401">.</span><span class="ident" id="5331402">NewReader</span><span class="op" id="5331411">(</span><span class="ident" id="5331412">symdat</span><span class="op" id="5331418">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331421">for</span>&nbsp;<span class="ident" id="5331425">i</span>&nbsp;<span class="op" id="5331427">:=</span>&nbsp;<span class="keyword" id="5331430">range</span>&nbsp;<span class="ident" id="5331436">symtab</span>&nbsp;<span class="op" id="5331443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331447">var</span>&nbsp;<span class="ident" id="5331451">n</span>&nbsp;<span class="ident" id="5331453">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331463">if</span>&nbsp;<span class="ident" id="5331466">f</span><span class="op" id="5331467">.</span><span class="ident" id="5331468">Magic</span>&nbsp;<span class="op" id="5331474">==</span>&nbsp;<span class="ident" id="5331477">Magic64</span>&nbsp;<span class="op" id="5331485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331490">if</span>&nbsp;<span class="ident" id="5331493">err</span>&nbsp;<span class="op" id="5331497">:=</span>&nbsp;<span class="ident" id="5331500">binary</span><span class="op" id="5331506">.</span><span class="ident" id="5331507">Read</span><span class="op" id="5331511">(</span><span class="ident" id="5331512">b</span><span class="op" id="5331513">,</span>&nbsp;<span class="ident" id="5331515">bo</span><span class="op" id="5331517">,</span>&nbsp;<span class="op" id="5331519">&amp;</span><span class="ident" id="5331520">n</span><span class="op" id="5331521">)</span><span class="op" id="5331522">;</span>&nbsp;<span class="ident" id="5331524">err</span>&nbsp;<span class="op" id="5331528">!=</span>&nbsp;<span class="ident" id="5331531">nil</span>&nbsp;<span class="op" id="5331535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331541">return</span>&nbsp;<span class="ident" id="5331548">nil</span><span class="op" id="5331551">,</span>&nbsp;<span class="ident" id="5331553">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331564">}</span>&nbsp;<span class="keyword" id="5331566">else</span>&nbsp;<span class="op" id="5331571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331576">var</span>&nbsp;<span class="ident" id="5331580">n32</span>&nbsp;<span class="ident" id="5331584">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331595">if</span>&nbsp;<span class="ident" id="5331598">err</span>&nbsp;<span class="op" id="5331602">:=</span>&nbsp;<span class="ident" id="5331605">binary</span><span class="op" id="5331611">.</span><span class="ident" id="5331612">Read</span><span class="op" id="5331616">(</span><span class="ident" id="5331617">b</span><span class="op" id="5331618">,</span>&nbsp;<span class="ident" id="5331620">bo</span><span class="op" id="5331622">,</span>&nbsp;<span class="op" id="5331624">&amp;</span><span class="ident" id="5331625">n32</span><span class="op" id="5331628">)</span><span class="op" id="5331629">;</span>&nbsp;<span class="ident" id="5331631">err</span>&nbsp;<span class="op" id="5331635">!=</span>&nbsp;<span class="ident" id="5331638">nil</span>&nbsp;<span class="op" id="5331642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331648">return</span>&nbsp;<span class="ident" id="5331655">nil</span><span class="op" id="5331658">,</span>&nbsp;<span class="ident" id="5331660">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331672">n</span><span class="op" id="5331673">.</span><span class="ident" id="5331674">Name</span>&nbsp;<span class="op" id="5331679">=</span>&nbsp;<span class="ident" id="5331681">n32</span><span class="op" id="5331684">.</span><span class="ident" id="5331685">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331693">n</span><span class="op" id="5331694">.</span><span class="ident" id="5331695">Type</span>&nbsp;<span class="op" id="5331700">=</span>&nbsp;<span class="ident" id="5331702">n32</span><span class="op" id="5331705">.</span><span class="ident" id="5331706">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331714">n</span><span class="op" id="5331715">.</span><span class="ident" id="5331716">Sect</span>&nbsp;<span class="op" id="5331721">=</span>&nbsp;<span class="ident" id="5331723">n32</span><span class="op" id="5331726">.</span><span class="ident" id="5331727">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331735">n</span><span class="op" id="5331736">.</span><span class="ident" id="5331737">Desc</span>&nbsp;<span class="op" id="5331742">=</span>&nbsp;<span class="ident" id="5331744">n32</span><span class="op" id="5331747">.</span><span class="ident" id="5331748">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331756">n</span><span class="op" id="5331757">.</span><span class="ident" id="5331758">Value</span>&nbsp;<span class="op" id="5331764">=</span>&nbsp;<span class="ident" id="5331766">uint64</span><span class="op" id="5331772">(</span><span class="ident" id="5331773">n32</span><span class="op" id="5331776">.</span><span class="ident" id="5331777">Value</span><span class="op" id="5331782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331790">sym</span>&nbsp;<span class="op" id="5331794">:=</span>&nbsp;<span class="op" id="5331797">&amp;</span><span class="ident" id="5331798">symtab</span><span class="op" id="5331804">[</span><span class="ident" id="5331805">i</span><span class="op" id="5331806">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331810">if</span>&nbsp;<span class="ident" id="5331813">n</span><span class="op" id="5331814">.</span><span class="ident" id="5331815">Name</span>&nbsp;<span class="op" id="5331820">&gt;=</span>&nbsp;<span class="builtintype" id="5331823">uint32</span><span class="op" id="5331829">(</span><span class="builtinfunc" id="5331830">len</span><span class="op" id="5331833">(</span><span class="ident" id="5331834">strtab</span><span class="op" id="5331840">)</span><span class="op" id="5331841">)</span>&nbsp;<span class="op" id="5331843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331848">return</span>&nbsp;<span class="ident" id="5331855">nil</span><span class="op" id="5331858">,</span>&nbsp;<span class="op" id="5331860">&amp;</span><span class="ident" id="5331861">FormatError</span><span class="op" id="5331872">{</span><span class="ident" id="5331873">offset</span><span class="op" id="5331879">,</span>&nbsp;<span class="string" id="5331881">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="5331911">,</span>&nbsp;<span class="ident" id="5331913">n</span><span class="op" id="5331914">.</span><span class="ident" id="5331915">Name</span><span class="op" id="5331919">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331927">sym</span><span class="op" id="5331930">.</span><span class="ident" id="5331931">Name</span>&nbsp;<span class="op" id="5331936">=</span>&nbsp;<span class="ident" id="5331938">cstring</span><span class="op" id="5331945">(</span><span class="ident" id="5331946">strtab</span><span class="op" id="5331952">[</span><span class="ident" id="5331953">n</span><span class="op" id="5331954">.</span><span class="ident" id="5331955">Name</span><span class="op" id="5331959">:</span><span class="op" id="5331960">]</span><span class="op" id="5331961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331965">sym</span><span class="op" id="5331968">.</span><span class="ident" id="5331969">Type</span>&nbsp;<span class="op" id="5331974">=</span>&nbsp;<span class="ident" id="5331976">n</span><span class="op" id="5331977">.</span><span class="ident" id="5331978">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331985">sym</span><span class="op" id="5331988">.</span><span class="ident" id="5331989">Sect</span>&nbsp;<span class="op" id="5331994">=</span>&nbsp;<span class="ident" id="5331996">n</span><span class="op" id="5331997">.</span><span class="ident" id="5331998">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332005">sym</span><span class="op" id="5332008">.</span><span class="ident" id="5332009">Desc</span>&nbsp;<span class="op" id="5332014">=</span>&nbsp;<span class="ident" id="5332016">n</span><span class="op" id="5332017">.</span><span class="ident" id="5332018">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332025">sym</span><span class="op" id="5332028">.</span><span class="ident" id="5332029">Value</span>&nbsp;<span class="op" id="5332035">=</span>&nbsp;<span class="ident" id="5332037">n</span><span class="op" id="5332038">.</span><span class="ident" id="5332039">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332049">st</span>&nbsp;<span class="op" id="5332052">:=</span>&nbsp;<span class="builtinfunc" id="5332055">new</span><span class="op" id="5332058">(</span><span class="ident" id="5332059">Symtab</span><span class="op" id="5332065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332068">st</span><span class="op" id="5332070">.</span><span class="ident" id="5332071">LoadBytes</span>&nbsp;<span class="op" id="5332081">=</span>&nbsp;<span class="ident" id="5332083">LoadBytes</span><span class="op" id="5332092">(</span><span class="ident" id="5332093">cmddat</span><span class="op" id="5332099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332102">st</span><span class="op" id="5332104">.</span><span class="ident" id="5332105">Syms</span>&nbsp;<span class="op" id="5332110">=</span>&nbsp;<span class="ident" id="5332112">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332120">return</span>&nbsp;<span class="ident" id="5332127">st</span><span class="op" id="5332129">,</span>&nbsp;<span class="ident" id="5332131">nil</span><br>
<span class="lineno"></span><span class="op" id="5332135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5332138">func</span>&nbsp;<span class="op" id="5332143">(</span><span class="ident" id="5332144">f</span>&nbsp;<span class="op" id="5332146">*</span><span class="ident" id="5332147">File</span><span class="op" id="5332151">)</span>&nbsp;<span class="ident" id="5332153">pushSection</span><span class="op" id="5332164">(</span><span class="ident" id="5332165">sh</span>&nbsp;<span class="op" id="5332168">*</span><span class="ident" id="5332169">Section</span><span class="op" id="5332176">,</span>&nbsp;<span class="ident" id="5332178">r</span>&nbsp;<span class="ident" id="5332180">io</span><span class="op" id="5332182">.</span><span class="ident" id="5332183">ReaderAt</span><span class="op" id="5332191">)</span>&nbsp;<span class="op" id="5332193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332196">f</span><span class="op" id="5332197">.</span><span class="ident" id="5332198">Sections</span>&nbsp;<span class="op" id="5332207">=</span>&nbsp;<span class="builtinfunc" id="5332209">append</span><span class="op" id="5332215">(</span><span class="ident" id="5332216">f</span><span class="op" id="5332217">.</span><span class="ident" id="5332218">Sections</span><span class="op" id="5332226">,</span>&nbsp;<span class="ident" id="5332228">sh</span><span class="op" id="5332230">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332233">sh</span><span class="op" id="5332235">.</span><span class="ident" id="5332236">sr</span>&nbsp;<span class="op" id="5332239">=</span>&nbsp;<span class="ident" id="5332241">io</span><span class="op" id="5332243">.</span><span class="ident" id="5332244">NewSectionReader</span><span class="op" id="5332260">(</span><span class="ident" id="5332261">r</span><span class="op" id="5332262">,</span>&nbsp;<span class="ident" id="5332264">int64</span><span class="op" id="5332269">(</span><span class="ident" id="5332270">sh</span><span class="op" id="5332272">.</span><span class="ident" id="5332273">Offset</span><span class="op" id="5332279">)</span><span class="op" id="5332280">,</span>&nbsp;<span class="ident" id="5332282">int64</span><span class="op" id="5332287">(</span><span class="ident" id="5332288">sh</span><span class="op" id="5332290">.</span><span class="ident" id="5332291">Size</span><span class="op" id="5332295">)</span><span class="op" id="5332296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332299">sh</span><span class="op" id="5332301">.</span><span class="ident" id="5332302">ReaderAt</span>&nbsp;<span class="op" id="5332311">=</span>&nbsp;<span class="ident" id="5332313">sh</span><span class="op" id="5332315">.</span><span class="ident" id="5332316">sr</span><br>
<span class="lineno"></span><span class="op" id="5332319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5332322">func</span>&nbsp;<span class="ident" id="5332327">cstring</span><span class="op" id="5332334">(</span><span class="ident" id="5332335">b</span>&nbsp;<span class="op" id="5332337">[</span><span class="op" id="5332338">]</span><span class="builtintype" id="5332339">byte</span><span class="op" id="5332343">)</span>&nbsp;<span class="builtintype" id="5332345">string</span>&nbsp;<span class="op" id="5332352">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332355">var</span>&nbsp;<span class="ident" id="5332359">i</span>&nbsp;<span class="builtintype" id="5332361">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332366">for</span>&nbsp;<span class="ident" id="5332370">i</span>&nbsp;<span class="op" id="5332372">=</span>&nbsp;<span class="num" id="5332374">0</span><span class="op" id="5332375">;</span>&nbsp;<span class="ident" id="5332377">i</span>&nbsp;<span class="op" id="5332379">&lt;</span>&nbsp;<span class="builtinfunc" id="5332381">len</span><span class="op" id="5332384">(</span><span class="ident" id="5332385">b</span><span class="op" id="5332386">)</span>&nbsp;<span class="op" id="5332388">&amp;&amp;</span>&nbsp;<span class="ident" id="5332391">b</span><span class="op" id="5332392">[</span><span class="ident" id="5332393">i</span><span class="op" id="5332394">]</span>&nbsp;<span class="op" id="5332396">!=</span>&nbsp;<span class="num" id="5332399">0</span><span class="op" id="5332400">;</span>&nbsp;<span class="ident" id="5332402">i</span><span class="op" id="5332403">++</span>&nbsp;<span class="op" id="5332406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332412">return</span>&nbsp;<span class="builtintype" id="5332419">string</span><span class="op" id="5332425">(</span><span class="ident" id="5332426">b</span><span class="op" id="5332427">[</span><span class="num" id="5332428">0</span><span class="op" id="5332429">:</span><span class="ident" id="5332430">i</span><span class="op" id="5332431">]</span><span class="op" id="5332432">)</span><br>
<span class="lineno"></span><span class="op" id="5332434">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="5332437">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5332529">func</span>&nbsp;<span class="op" id="5332534">(</span><span class="ident" id="5332535">f</span>&nbsp;<span class="op" id="5332537">*</span><span class="ident" id="5332538">File</span><span class="op" id="5332542">)</span>&nbsp;<span class="ident" id="5332544">Segment</span><span class="op" id="5332551">(</span><span class="ident" id="5332552">name</span>&nbsp;<span class="builtintype" id="5332557">string</span><span class="op" id="5332563">)</span>&nbsp;<span class="op" id="5332565">*</span><span class="ident" id="5332566">Segment</span>&nbsp;<span class="op" id="5332574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332577">for</span>&nbsp;<span class="ident" id="5332581">_</span><span class="op" id="5332582">,</span>&nbsp;<span class="ident" id="5332584">l</span>&nbsp;<span class="op" id="5332586">:=</span>&nbsp;<span class="keyword" id="5332589">range</span>&nbsp;<span class="ident" id="5332595">f</span><span class="op" id="5332596">.</span><span class="ident" id="5332597">Loads</span>&nbsp;<span class="op" id="5332603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332607">if</span>&nbsp;<span class="ident" id="5332610">s</span><span class="op" id="5332611">,</span>&nbsp;<span class="ident" id="5332613">ok</span>&nbsp;<span class="op" id="5332616">:=</span>&nbsp;<span class="ident" id="5332619">l</span><span class="op" id="5332620">.</span><span class="op" id="5332621">(</span><span class="op" id="5332622">*</span><span class="ident" id="5332623">Segment</span><span class="op" id="5332630">)</span><span class="op" id="5332631">;</span>&nbsp;<span class="ident" id="5332633">ok</span>&nbsp;<span class="op" id="5332636">&amp;&amp;</span>&nbsp;<span class="ident" id="5332639">s</span><span class="op" id="5332640">.</span><span class="ident" id="5332641">Name</span>&nbsp;<span class="op" id="5332646">==</span>&nbsp;<span class="ident" id="5332649">name</span>&nbsp;<span class="op" id="5332654">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332659">return</span>&nbsp;<span class="ident" id="5332666">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332676">return</span>&nbsp;<span class="ident" id="5332683">nil</span><br>
<span class="lineno"></span><span class="op" id="5332687">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="5332690">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5332766">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="5332785">func</span>&nbsp;<span class="op" id="5332790">(</span><span class="ident" id="5332791">f</span>&nbsp;<span class="op" id="5332793">*</span><span class="ident" id="5332794">File</span><span class="op" id="5332798">)</span>&nbsp;<span class="ident" id="5332800">Section</span><span class="op" id="5332807">(</span><span class="ident" id="5332808">name</span>&nbsp;<span class="builtintype" id="5332813">string</span><span class="op" id="5332819">)</span>&nbsp;<span class="op" id="5332821">*</span><span class="ident" id="5332822">Section</span>&nbsp;<span class="op" id="5332830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332833">for</span>&nbsp;<span class="ident" id="5332837">_</span><span class="op" id="5332838">,</span>&nbsp;<span class="ident" id="5332840">s</span>&nbsp;<span class="op" id="5332842">:=</span>&nbsp;<span class="keyword" id="5332845">range</span>&nbsp;<span class="ident" id="5332851">f</span><span class="op" id="5332852">.</span><span class="ident" id="5332853">Sections</span>&nbsp;<span class="op" id="5332862">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332866">if</span>&nbsp;<span class="ident" id="5332869">s</span><span class="op" id="5332870">.</span><span class="ident" id="5332871">Name</span>&nbsp;<span class="op" id="5332876">==</span>&nbsp;<span class="ident" id="5332879">name</span>&nbsp;<span class="op" id="5332884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332889">return</span>&nbsp;<span class="ident" id="5332896">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332906">return</span>&nbsp;<span class="ident" id="5332913">nil</span><br>
<span class="lineno">470</span><span class="op" id="5332917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5332920">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5332986">func</span>&nbsp;<span class="op" id="5332991">(</span><span class="ident" id="5332992">f</span>&nbsp;<span class="op" id="5332994">*</span><span class="ident" id="5332995">File</span><span class="op" id="5332999">)</span>&nbsp;<span class="ident" id="5333001">DWARF</span><span class="op" id="5333006">(</span><span class="op" id="5333007">)</span>&nbsp;<span class="op" id="5333009">(</span><span class="op" id="5333010">*</span><span class="ident" id="5333011">dwarf</span><span class="op" id="5333016">.</span><span class="ident" id="5333017">Data</span><span class="op" id="5333021">,</span>&nbsp;<span class="builtintype" id="5333023">error</span><span class="op" id="5333028">)</span>&nbsp;<span class="op" id="5333030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333033">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333084">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5333139">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333198">var</span>&nbsp;<span class="ident" id="5333202">names</span>&nbsp;<span class="op" id="5333208">=</span>&nbsp;<span class="op" id="5333210">[</span><span class="op" id="5333211">...</span><span class="op" id="5333214">]</span><span class="builtintype" id="5333215">string</span><span class="op" id="5333221">{</span><span class="string" id="5333222">&#34;abbrev&#34;</span><span class="op" id="5333230">,</span>&nbsp;<span class="string" id="5333232">&#34;info&#34;</span><span class="op" id="5333238">,</span>&nbsp;<span class="string" id="5333240">&#34;str&#34;</span><span class="op" id="5333245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333248">var</span>&nbsp;<span class="ident" id="5333252">dat</span>&nbsp;<span class="op" id="5333256">[</span><span class="builtinfunc" id="5333257">len</span><span class="op" id="5333260">(</span><span class="ident" id="5333261">names</span><span class="op" id="5333266">)</span><span class="op" id="5333267">]</span><span class="op" id="5333268">[</span><span class="op" id="5333269">]</span><span class="builtintype" id="5333270">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333276">for</span>&nbsp;<span class="ident" id="5333280">i</span><span class="op" id="5333281">,</span>&nbsp;<span class="ident" id="5333283">name</span>&nbsp;<span class="op" id="5333288">:=</span>&nbsp;<span class="keyword" id="5333291">range</span>&nbsp;<span class="ident" id="5333297">names</span>&nbsp;<span class="op" id="5333303">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333307">name</span>&nbsp;<span class="op" id="5333312">=</span>&nbsp;<span class="string" id="5333314">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="5333325">+</span>&nbsp;<span class="ident" id="5333327">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333334">s</span>&nbsp;<span class="op" id="5333336">:=</span>&nbsp;<span class="ident" id="5333339">f</span><span class="op" id="5333340">.</span><span class="ident" id="5333341">Section</span><span class="op" id="5333348">(</span><span class="ident" id="5333349">name</span><span class="op" id="5333353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333357">if</span>&nbsp;<span class="ident" id="5333360">s</span>&nbsp;<span class="op" id="5333362">==</span>&nbsp;<span class="ident" id="5333365">nil</span>&nbsp;<span class="op" id="5333369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333374">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333385">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333389">b</span><span class="op" id="5333390">,</span>&nbsp;<span class="ident" id="5333392">err</span>&nbsp;<span class="op" id="5333396">:=</span>&nbsp;<span class="ident" id="5333399">s</span><span class="op" id="5333400">.</span><span class="ident" id="5333401">Data</span><span class="op" id="5333405">(</span><span class="op" id="5333406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333410">if</span>&nbsp;<span class="ident" id="5333413">err</span>&nbsp;<span class="op" id="5333417">!=</span>&nbsp;<span class="ident" id="5333420">nil</span>&nbsp;<span class="op" id="5333424">&amp;&amp;</span>&nbsp;<span class="ident" id="5333427">uint64</span><span class="op" id="5333433">(</span><span class="builtinfunc" id="5333434">len</span><span class="op" id="5333437">(</span><span class="ident" id="5333438">b</span><span class="op" id="5333439">)</span><span class="op" id="5333440">)</span>&nbsp;<span class="op" id="5333442">&lt;</span>&nbsp;<span class="ident" id="5333444">s</span><span class="op" id="5333445">.</span><span class="ident" id="5333446">Size</span>&nbsp;<span class="op" id="5333451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333456">return</span>&nbsp;<span class="ident" id="5333463">nil</span><span class="op" id="5333466">,</span>&nbsp;<span class="ident" id="5333468">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333478">dat</span><span class="op" id="5333481">[</span><span class="ident" id="5333482">i</span><span class="op" id="5333483">]</span>&nbsp;<span class="op" id="5333485">=</span>&nbsp;<span class="ident" id="5333487">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333494">abbrev</span><span class="op" id="5333500">,</span>&nbsp;<span class="ident" id="5333502">info</span><span class="op" id="5333506">,</span>&nbsp;<span class="ident" id="5333508">str</span>&nbsp;<span class="op" id="5333512">:=</span>&nbsp;<span class="ident" id="5333515">dat</span><span class="op" id="5333518">[</span><span class="num" id="5333519">0</span><span class="op" id="5333520">]</span><span class="op" id="5333521">,</span>&nbsp;<span class="ident" id="5333523">dat</span><span class="op" id="5333526">[</span><span class="num" id="5333527">1</span><span class="op" id="5333528">]</span><span class="op" id="5333529">,</span>&nbsp;<span class="ident" id="5333531">dat</span><span class="op" id="5333534">[</span><span class="num" id="5333535">2</span><span class="op" id="5333536">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333539">return</span>&nbsp;<span class="ident" id="5333546">dwarf</span><span class="op" id="5333551">.</span><span class="ident" id="5333552">New</span><span class="op" id="5333555">(</span><span class="ident" id="5333556">abbrev</span><span class="op" id="5333562">,</span>&nbsp;<span class="ident" id="5333564">nil</span><span class="op" id="5333567">,</span>&nbsp;<span class="ident" id="5333569">nil</span><span class="op" id="5333572">,</span>&nbsp;<span class="ident" id="5333574">info</span><span class="op" id="5333578">,</span>&nbsp;<span class="ident" id="5333580">nil</span><span class="op" id="5333583">,</span>&nbsp;<span class="ident" id="5333585">nil</span><span class="op" id="5333588">,</span>&nbsp;<span class="ident" id="5333590">nil</span><span class="op" id="5333593">,</span>&nbsp;<span class="ident" id="5333595">str</span><span class="op" id="5333598">)</span><br>
<span class="lineno"></span><span class="op" id="5333600">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="5333603">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="5333655">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5333710">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="5333764">func</span>&nbsp;<span class="op" id="5333769">(</span><span class="ident" id="5333770">f</span>&nbsp;<span class="op" id="5333772">*</span><span class="ident" id="5333773">File</span><span class="op" id="5333777">)</span>&nbsp;<span class="ident" id="5333779">ImportedSymbols</span><span class="op" id="5333794">(</span><span class="op" id="5333795">)</span>&nbsp;<span class="op" id="5333797">(</span><span class="op" id="5333798">[</span><span class="op" id="5333799">]</span><span class="builtintype" id="5333800">string</span><span class="op" id="5333806">,</span>&nbsp;<span class="builtintype" id="5333808">error</span><span class="op" id="5333813">)</span>&nbsp;<span class="op" id="5333815">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333818">if</span>&nbsp;<span class="ident" id="5333821">f</span><span class="op" id="5333822">.</span><span class="ident" id="5333823">Dysymtab</span>&nbsp;<span class="op" id="5333832">==</span>&nbsp;<span class="ident" id="5333835">nil</span>&nbsp;<span class="op" id="5333839">||</span>&nbsp;<span class="ident" id="5333842">f</span><span class="op" id="5333843">.</span><span class="ident" id="5333844">Symtab</span>&nbsp;<span class="op" id="5333851">==</span>&nbsp;<span class="ident" id="5333854">nil</span>&nbsp;<span class="op" id="5333858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333862">return</span>&nbsp;<span class="ident" id="5333869">nil</span><span class="op" id="5333872">,</span>&nbsp;<span class="op" id="5333874">&amp;</span><span class="ident" id="5333875">FormatError</span><span class="op" id="5333886">{</span><span class="num" id="5333887">0</span><span class="op" id="5333888">,</span>&nbsp;<span class="string" id="5333890">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="5333912">,</span>&nbsp;<span class="ident" id="5333914">nil</span><span class="op" id="5333917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333924">st</span>&nbsp;<span class="op" id="5333927">:=</span>&nbsp;<span class="ident" id="5333930">f</span><span class="op" id="5333931">.</span><span class="ident" id="5333932">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333940">dt</span>&nbsp;<span class="op" id="5333943">:=</span>&nbsp;<span class="ident" id="5333946">f</span><span class="op" id="5333947">.</span><span class="ident" id="5333948">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333958">var</span>&nbsp;<span class="ident" id="5333962">all</span>&nbsp;<span class="op" id="5333966">[</span><span class="op" id="5333967">]</span><span class="builtintype" id="5333968">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333976">for</span>&nbsp;<span class="ident" id="5333980">_</span><span class="op" id="5333981">,</span>&nbsp;<span class="ident" id="5333983">s</span>&nbsp;<span class="op" id="5333985">:=</span>&nbsp;<span class="keyword" id="5333988">range</span>&nbsp;<span class="ident" id="5333994">st</span><span class="op" id="5333996">.</span><span class="ident" id="5333997">Syms</span><span class="op" id="5334001">[</span><span class="ident" id="5334002">dt</span><span class="op" id="5334004">.</span><span class="ident" id="5334005">Iundefsym</span>&nbsp;<span class="op" id="5334015">:</span>&nbsp;<span class="ident" id="5334017">dt</span><span class="op" id="5334019">.</span><span class="ident" id="5334020">Iundefsym</span><span class="op" id="5334029">+</span><span class="ident" id="5334030">dt</span><span class="op" id="5334032">.</span><span class="ident" id="5334033">Nundefsym</span><span class="op" id="5334042">]</span>&nbsp;<span class="op" id="5334044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334048">all</span>&nbsp;<span class="op" id="5334052">=</span>&nbsp;<span class="builtinfunc" id="5334054">append</span><span class="op" id="5334060">(</span><span class="ident" id="5334061">all</span><span class="op" id="5334064">,</span>&nbsp;<span class="ident" id="5334066">s</span><span class="op" id="5334067">.</span><span class="ident" id="5334068">Name</span><span class="op" id="5334072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334075">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334078">return</span>&nbsp;<span class="ident" id="5334085">all</span><span class="op" id="5334088">,</span>&nbsp;<span class="ident" id="5334090">nil</span><br>
<span class="lineno"></span><span class="op" id="5334094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5334097">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="5334153">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="5334208">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="5334256">func</span>&nbsp;<span class="op" id="5334261">(</span><span class="ident" id="5334262">f</span>&nbsp;<span class="op" id="5334264">*</span><span class="ident" id="5334265">File</span><span class="op" id="5334269">)</span>&nbsp;<span class="ident" id="5334271">ImportedLibraries</span><span class="op" id="5334288">(</span><span class="op" id="5334289">)</span>&nbsp;<span class="op" id="5334291">(</span><span class="op" id="5334292">[</span><span class="op" id="5334293">]</span><span class="builtintype" id="5334294">string</span><span class="op" id="5334300">,</span>&nbsp;<span class="builtintype" id="5334302">error</span><span class="op" id="5334307">)</span>&nbsp;<span class="op" id="5334309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334312">var</span>&nbsp;<span class="ident" id="5334316">all</span>&nbsp;<span class="op" id="5334320">[</span><span class="op" id="5334321">]</span><span class="builtintype" id="5334322">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334330">for</span>&nbsp;<span class="ident" id="5334334">_</span><span class="op" id="5334335">,</span>&nbsp;<span class="ident" id="5334337">l</span>&nbsp;<span class="op" id="5334339">:=</span>&nbsp;<span class="keyword" id="5334342">range</span>&nbsp;<span class="ident" id="5334348">f</span><span class="op" id="5334349">.</span><span class="ident" id="5334350">Loads</span>&nbsp;<span class="op" id="5334356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334360">if</span>&nbsp;<span class="ident" id="5334363">lib</span><span class="op" id="5334366">,</span>&nbsp;<span class="ident" id="5334368">ok</span>&nbsp;<span class="op" id="5334371">:=</span>&nbsp;<span class="ident" id="5334374">l</span><span class="op" id="5334375">.</span><span class="op" id="5334376">(</span><span class="op" id="5334377">*</span><span class="ident" id="5334378">Dylib</span><span class="op" id="5334383">)</span><span class="op" id="5334384">;</span>&nbsp;<span class="ident" id="5334386">ok</span>&nbsp;<span class="op" id="5334389">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334394">all</span>&nbsp;<span class="op" id="5334398">=</span>&nbsp;<span class="builtinfunc" id="5334400">append</span><span class="op" id="5334406">(</span><span class="ident" id="5334407">all</span><span class="op" id="5334410">,</span>&nbsp;<span class="ident" id="5334412">lib</span><span class="op" id="5334415">.</span><span class="ident" id="5334416">Name</span><span class="op" id="5334420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334430">return</span>&nbsp;<span class="ident" id="5334437">all</span><span class="op" id="5334440">,</span>&nbsp;<span class="ident" id="5334442">nil</span><br>
<span class="lineno"></span><span class="op" id="5334446">}</span>
</div>
</body>
</html>
