<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7419428">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7419484">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7419538">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7419589">package</span>&nbsp;<span class="ident" id="7419597">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7419603">import</span>&nbsp;<span class="op" id="7419610">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419613">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419622">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419633">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419644">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7419651">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7419654">var</span>&nbsp;<span class="ident" id="7419658">headerWriteTests</span>&nbsp;<span class="op" id="7419675">=</span>&nbsp;<span class="op" id="7419677">[</span><span class="op" id="7419678">]</span><span class="keyword" id="7419679">struct</span>&nbsp;<span class="op" id="7419686">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7419689">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7419698"><a href="/net/http/header.go.html#3781581">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7419706">exclude</span>&nbsp;&nbsp;<span class="keyword" id="7419715">map</span><span class="op" id="7419718">[</span><span class="builtintype" id="7419719">string</span><span class="op" id="7419725">]</span><span class="builtintype" id="7419726">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7419732">expected</span>&nbsp;<span class="builtintype" id="7419741">string</span><br>
<span class="lineno"></span><span class="op" id="7419748">}</span><span class="op" id="7419749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7419752">{</span><span class="ident" id="7419753"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7419759">{</span><span class="op" id="7419760">}</span><span class="op" id="7419761">,</span>&nbsp;<span class="ident" id="7419763">nil</span><span class="op" id="7419766">,</span>&nbsp;<span class="string" id="7419768">&#34;&#34;</span><span class="op" id="7419770">}</span><span class="op" id="7419771">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7419774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7419778"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7419784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419789">&#34;Content-Type&#34;</span><span class="op" id="7419803">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7419807">{</span><span class="string" id="7419808">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="7419834">}</span><span class="op" id="7419835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419840">&#34;Content-Length&#34;</span><span class="op" id="7419856">:</span>&nbsp;<span class="op" id="7419858">{</span><span class="string" id="7419859">&#34;0&#34;</span><span class="op" id="7419862">}</span><span class="op" id="7419863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7419867">}</span><span class="op" id="7419868">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7419872">nil</span><span class="op" id="7419875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419879">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="7419944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7419947">}</span><span class="op" id="7419948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7419951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7419955"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7419961">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7419966">&#34;Content-Length&#34;</span><span class="op" id="7419982">:</span>&nbsp;<span class="op" id="7419984">{</span><span class="string" id="7419985">&#34;0&#34;</span><span class="op" id="7419988">,</span>&nbsp;<span class="string" id="7419990">&#34;1&#34;</span><span class="op" id="7419993">,</span>&nbsp;<span class="string" id="7419995">&#34;2&#34;</span><span class="op" id="7419998">}</span><span class="op" id="7419999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420003">}</span><span class="op" id="7420004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420008">nil</span><span class="op" id="7420011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420015">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="7420080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420083">}</span><span class="op" id="7420084">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420091"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7420097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420102">&#34;Expires&#34;</span><span class="op" id="7420111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7420122">{</span><span class="string" id="7420123">&#34;-1&#34;</span><span class="op" id="7420127">}</span><span class="op" id="7420128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420133">&#34;Content-Length&#34;</span><span class="op" id="7420149">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7420153">{</span><span class="string" id="7420154">&#34;0&#34;</span><span class="op" id="7420157">}</span><span class="op" id="7420158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420163">&#34;Content-Encoding&#34;</span><span class="op" id="7420181">:</span>&nbsp;<span class="op" id="7420183">{</span><span class="string" id="7420184">&#34;gzip&#34;</span><span class="op" id="7420190">}</span><span class="op" id="7420191">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420195">}</span><span class="op" id="7420196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7420200">map</span><span class="op" id="7420203">[</span><span class="builtintype" id="7420204">string</span><span class="op" id="7420210">]</span><span class="builtintype" id="7420211">bool</span><span class="op" id="7420215">{</span><span class="string" id="7420216">&#34;Content-Length&#34;</span><span class="op" id="7420232">:</span>&nbsp;<span class="ident" id="7420234">true</span><span class="op" id="7420238">}</span><span class="op" id="7420239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420243">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7420286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420289">}</span><span class="op" id="7420290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420293">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420297"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7420303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420308">&#34;Expires&#34;</span><span class="op" id="7420317">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7420328">{</span><span class="string" id="7420329">&#34;-1&#34;</span><span class="op" id="7420333">}</span><span class="op" id="7420334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420339">&#34;Content-Length&#34;</span><span class="op" id="7420355">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7420359">{</span><span class="string" id="7420360">&#34;0&#34;</span><span class="op" id="7420363">,</span>&nbsp;<span class="string" id="7420365">&#34;1&#34;</span><span class="op" id="7420368">,</span>&nbsp;<span class="string" id="7420370">&#34;2&#34;</span><span class="op" id="7420373">}</span><span class="op" id="7420374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420379">&#34;Content-Encoding&#34;</span><span class="op" id="7420397">:</span>&nbsp;<span class="op" id="7420399">{</span><span class="string" id="7420400">&#34;gzip&#34;</span><span class="op" id="7420406">}</span><span class="op" id="7420407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420411">}</span><span class="op" id="7420412">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7420416">map</span><span class="op" id="7420419">[</span><span class="builtintype" id="7420420">string</span><span class="op" id="7420426">]</span><span class="builtintype" id="7420427">bool</span><span class="op" id="7420431">{</span><span class="string" id="7420432">&#34;Content-Length&#34;</span><span class="op" id="7420448">:</span>&nbsp;<span class="ident" id="7420450">true</span><span class="op" id="7420454">}</span><span class="op" id="7420455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420459">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="7420502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420505">}</span><span class="op" id="7420506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420513"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7420519">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420524">&#34;Expires&#34;</span><span class="op" id="7420533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7420544">{</span><span class="string" id="7420545">&#34;-1&#34;</span><span class="op" id="7420549">}</span><span class="op" id="7420550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420555">&#34;Content-Length&#34;</span><span class="op" id="7420571">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7420575">{</span><span class="string" id="7420576">&#34;0&#34;</span><span class="op" id="7420579">}</span><span class="op" id="7420580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420585">&#34;Content-Encoding&#34;</span><span class="op" id="7420603">:</span>&nbsp;<span class="op" id="7420605">{</span><span class="string" id="7420606">&#34;gzip&#34;</span><span class="op" id="7420612">}</span><span class="op" id="7420613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420617">}</span><span class="op" id="7420618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7420622">map</span><span class="op" id="7420625">[</span><span class="builtintype" id="7420626">string</span><span class="op" id="7420632">]</span><span class="builtintype" id="7420633">bool</span><span class="op" id="7420637">{</span><span class="string" id="7420638">&#34;Content-Length&#34;</span><span class="op" id="7420654">:</span>&nbsp;<span class="ident" id="7420656">true</span><span class="op" id="7420660">,</span>&nbsp;<span class="string" id="7420662">&#34;Expires&#34;</span><span class="op" id="7420671">:</span>&nbsp;<span class="ident" id="7420673">true</span><span class="op" id="7420677">,</span>&nbsp;<span class="string" id="7420679">&#34;Content-Encoding&#34;</span><span class="op" id="7420697">:</span>&nbsp;<span class="ident" id="7420699">true</span><span class="op" id="7420703">}</span><span class="op" id="7420704">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420708">&#34;&#34;</span><span class="op" id="7420710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420713">}</span><span class="op" id="7420714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420721"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7420727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420732">&#34;Nil&#34;</span><span class="op" id="7420737">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7420748">nil</span><span class="op" id="7420751">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420756">&#34;Empty&#34;</span><span class="op" id="7420763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7420772">{</span><span class="op" id="7420773">}</span><span class="op" id="7420774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420779">&#34;Blank&#34;</span><span class="op" id="7420786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7420795">{</span><span class="string" id="7420796">&#34;&#34;</span><span class="op" id="7420798">}</span><span class="op" id="7420799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420804">&#34;Double-Blank&#34;</span><span class="op" id="7420818">:</span>&nbsp;<span class="op" id="7420820">{</span><span class="string" id="7420821">&#34;&#34;</span><span class="op" id="7420823">,</span>&nbsp;<span class="string" id="7420825">&#34;&#34;</span><span class="op" id="7420827">}</span><span class="op" id="7420828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420832">}</span><span class="op" id="7420833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420837">nil</span><span class="op" id="7420840">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420844">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="7420893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420896">}</span><span class="op" id="7420897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7420900">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7420970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7420974"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7420980">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7420985">&#34;k1&#34;</span><span class="op" id="7420989">:</span>&nbsp;<span class="op" id="7420991">{</span><span class="string" id="7420992">&#34;1a&#34;</span><span class="op" id="7420996">,</span>&nbsp;<span class="string" id="7420998">&#34;1b&#34;</span><span class="op" id="7421002">}</span><span class="op" id="7421003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421008">&#34;k2&#34;</span><span class="op" id="7421012">:</span>&nbsp;<span class="op" id="7421014">{</span><span class="string" id="7421015">&#34;2a&#34;</span><span class="op" id="7421019">,</span>&nbsp;<span class="string" id="7421021">&#34;2b&#34;</span><span class="op" id="7421025">}</span><span class="op" id="7421026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421031">&#34;k3&#34;</span><span class="op" id="7421035">:</span>&nbsp;<span class="op" id="7421037">{</span><span class="string" id="7421038">&#34;3a&#34;</span><span class="op" id="7421042">,</span>&nbsp;<span class="string" id="7421044">&#34;3b&#34;</span><span class="op" id="7421048">}</span><span class="op" id="7421049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421054">&#34;k4&#34;</span><span class="op" id="7421058">:</span>&nbsp;<span class="op" id="7421060">{</span><span class="string" id="7421061">&#34;4a&#34;</span><span class="op" id="7421065">,</span>&nbsp;<span class="string" id="7421067">&#34;4b&#34;</span><span class="op" id="7421071">}</span><span class="op" id="7421072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421077">&#34;k5&#34;</span><span class="op" id="7421081">:</span>&nbsp;<span class="op" id="7421083">{</span><span class="string" id="7421084">&#34;5a&#34;</span><span class="op" id="7421088">,</span>&nbsp;<span class="string" id="7421090">&#34;5b&#34;</span><span class="op" id="7421094">}</span><span class="op" id="7421095">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421100">&#34;k6&#34;</span><span class="op" id="7421104">:</span>&nbsp;<span class="op" id="7421106">{</span><span class="string" id="7421107">&#34;6a&#34;</span><span class="op" id="7421111">,</span>&nbsp;<span class="string" id="7421113">&#34;6b&#34;</span><span class="op" id="7421117">}</span><span class="op" id="7421118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421123">&#34;k7&#34;</span><span class="op" id="7421127">:</span>&nbsp;<span class="op" id="7421129">{</span><span class="string" id="7421130">&#34;7a&#34;</span><span class="op" id="7421134">,</span>&nbsp;<span class="string" id="7421136">&#34;7b&#34;</span><span class="op" id="7421140">}</span><span class="op" id="7421141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421146">&#34;k8&#34;</span><span class="op" id="7421150">:</span>&nbsp;<span class="op" id="7421152">{</span><span class="string" id="7421153">&#34;8a&#34;</span><span class="op" id="7421157">,</span>&nbsp;<span class="string" id="7421159">&#34;8b&#34;</span><span class="op" id="7421163">}</span><span class="op" id="7421164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421169">&#34;k9&#34;</span><span class="op" id="7421173">:</span>&nbsp;<span class="op" id="7421175">{</span><span class="string" id="7421176">&#34;9a&#34;</span><span class="op" id="7421180">,</span>&nbsp;<span class="string" id="7421182">&#34;9b&#34;</span><span class="op" id="7421186">}</span><span class="op" id="7421187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421191">}</span><span class="op" id="7421192">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7421196">map</span><span class="op" id="7421199">[</span><span class="builtintype" id="7421200">string</span><span class="op" id="7421206">]</span><span class="builtintype" id="7421207">bool</span><span class="op" id="7421211">{</span><span class="string" id="7421212">&#34;k5&#34;</span><span class="op" id="7421216">:</span>&nbsp;<span class="ident" id="7421218">true</span><span class="op" id="7421222">}</span><span class="op" id="7421223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421227">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="7421290">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421295">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="7421338">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7421343">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="7421405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421408">}</span><span class="op" id="7421409">,</span><br>
<span class="lineno">90</span><span class="op" id="7421411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7421414">func</span>&nbsp;<span class="ident" id="7421419">TestHeaderWrite</span><span class="op" id="7421434">(</span><span class="ident" id="7421435">t</span>&nbsp;<span class="op" id="7421437">*</span><span class="ident" id="7421438"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7421445">.</span><span class="ident" id="7421446">T</span><span class="op" id="7421447">)</span>&nbsp;<span class="op" id="7421449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7421452">var</span>&nbsp;<span class="ident" id="7421456">buf</span>&nbsp;<span class="ident" id="7421460"><a href="/net/http/header_test.go.html#7419613">bytes</a></span><span class="op" id="7421465">.</span><span class="ident" id="7421466">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7421474">for</span>&nbsp;<span class="ident" id="7421478">i</span><span class="op" id="7421479">,</span>&nbsp;<span class="ident" id="7421481">test</span>&nbsp;<span class="op" id="7421486">:=</span>&nbsp;<span class="keyword" id="7421489">range</span>&nbsp;<span class="ident" id="7421495"><a href="/net/http/header_test.go.html#7419658">headerWriteTests</a></span>&nbsp;<span class="op" id="7421512">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7421516"><a href="/net/http/header_test.go.html#7421481">test</a></span><span class="op" id="7421520">.</span><span class="ident" id="7421521">h</span><span class="op" id="7421522">.</span><span class="ident" id="7421523">WriteSubset</span><span class="op" id="7421534">(</span><span class="op" id="7421535">&amp;</span><span class="ident" id="7421536"><a href="/net/http/header_test.go.html#7421456">buf</a></span><span class="op" id="7421539">,</span>&nbsp;<span class="ident" id="7421541"><a href="/net/http/header_test.go.html#7421481">test</a></span><span class="op" id="7421545">.</span><span class="ident" id="7421546">exclude</span><span class="op" id="7421553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7421557">if</span>&nbsp;<span class="ident" id="7421560"><a href="/net/http/header_test.go.html#7421456">buf</a></span><span class="op" id="7421563">.</span><span class="ident" id="7421564">String</span><span class="op" id="7421570">(</span><span class="op" id="7421571">)</span>&nbsp;<span class="op" id="7421573">!=</span>&nbsp;<span class="ident" id="7421576"><a href="/net/http/header_test.go.html#7421481">test</a></span><span class="op" id="7421580">.</span><span class="ident" id="7421581">expected</span>&nbsp;<span class="op" id="7421590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7421595"><a href="/net/http/header_test.go.html#7421435">t</a></span><span class="op" id="7421596">.</span><span class="ident" id="7421597">Errorf</span><span class="op" id="7421603">(</span><span class="string" id="7421604">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7421630">,</span>&nbsp;<span class="ident" id="7421632"><a href="/net/http/header_test.go.html#7421478">i</a></span><span class="op" id="7421633">,</span>&nbsp;<span class="ident" id="7421635"><a href="/net/http/header_test.go.html#7421456">buf</a></span><span class="op" id="7421638">.</span><span class="ident" id="7421639">String</span><span class="op" id="7421645">(</span><span class="op" id="7421646">)</span><span class="op" id="7421647">,</span>&nbsp;<span class="ident" id="7421649"><a href="/net/http/header_test.go.html#7421481">test</a></span><span class="op" id="7421653">.</span><span class="ident" id="7421654">expected</span><span class="op" id="7421662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7421670"><a href="/net/http/header_test.go.html#7421456">buf</a></span><span class="op" id="7421673">.</span><span class="ident" id="7421674">Reset</span><span class="op" id="7421679">(</span><span class="op" id="7421680">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421683">}</span><br>
<span class="lineno"></span><span class="op" id="7421685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7421688">var</span>&nbsp;<span class="ident" id="7421692">parseTimeTests</span>&nbsp;<span class="op" id="7421707">=</span>&nbsp;<span class="op" id="7421709">[</span><span class="op" id="7421710">]</span><span class="keyword" id="7421711">struct</span>&nbsp;<span class="op" id="7421718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7421721">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7421725"><a href="/net/http/header.go.html#3781581">Header</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7421733">err</span>&nbsp;<span class="builtintype" id="7421737">bool</span><br>
<span class="lineno"></span><span class="op" id="7421742">}</span><span class="op" id="7421743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421746">{</span><span class="ident" id="7421747"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7421753">{</span><span class="string" id="7421754">&#34;Date&#34;</span><span class="op" id="7421760">:</span>&nbsp;<span class="op" id="7421762">{</span><span class="string" id="7421763">&#34;&#34;</span><span class="op" id="7421765">}</span><span class="op" id="7421766">}</span><span class="op" id="7421767">,</span>&nbsp;<span class="ident" id="7421769">true</span><span class="op" id="7421773">}</span><span class="op" id="7421774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421777">{</span><span class="ident" id="7421778"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7421784">{</span><span class="string" id="7421785">&#34;Date&#34;</span><span class="op" id="7421791">:</span>&nbsp;<span class="op" id="7421793">{</span><span class="string" id="7421794">&#34;invalid&#34;</span><span class="op" id="7421803">}</span><span class="op" id="7421804">}</span><span class="op" id="7421805">,</span>&nbsp;<span class="ident" id="7421807">true</span><span class="op" id="7421811">}</span><span class="op" id="7421812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421815">{</span><span class="ident" id="7421816"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7421822">{</span><span class="string" id="7421823">&#34;Date&#34;</span><span class="op" id="7421829">:</span>&nbsp;<span class="op" id="7421831">{</span><span class="string" id="7421832">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="7421859">}</span><span class="op" id="7421860">}</span><span class="op" id="7421861">,</span>&nbsp;<span class="ident" id="7421863">true</span><span class="op" id="7421867">}</span><span class="op" id="7421868">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421871">{</span><span class="ident" id="7421872"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7421878">{</span><span class="string" id="7421879">&#34;Date&#34;</span><span class="op" id="7421885">:</span>&nbsp;<span class="op" id="7421887">{</span><span class="string" id="7421888">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7421919">}</span><span class="op" id="7421920">}</span><span class="op" id="7421921">,</span>&nbsp;<span class="ident" id="7421923">false</span><span class="op" id="7421928">}</span><span class="op" id="7421929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421932">{</span><span class="ident" id="7421933"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7421939">{</span><span class="string" id="7421940">&#34;Date&#34;</span><span class="op" id="7421946">:</span>&nbsp;<span class="op" id="7421948">{</span><span class="string" id="7421949">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="7421981">}</span><span class="op" id="7421982">}</span><span class="op" id="7421983">,</span>&nbsp;<span class="ident" id="7421985">false</span><span class="op" id="7421990">}</span><span class="op" id="7421991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7421994">{</span><span class="ident" id="7421995"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7422001">{</span><span class="string" id="7422002">&#34;Date&#34;</span><span class="op" id="7422008">:</span>&nbsp;<span class="op" id="7422010">{</span><span class="string" id="7422011">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="7422037">}</span><span class="op" id="7422038">}</span><span class="op" id="7422039">,</span>&nbsp;<span class="ident" id="7422041">false</span><span class="op" id="7422046">}</span><span class="op" id="7422047">,</span><br>
<span class="lineno"></span><span class="op" id="7422049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="7422052">func</span>&nbsp;<span class="ident" id="7422057">TestParseTime</span><span class="op" id="7422070">(</span><span class="ident" id="7422071">t</span>&nbsp;<span class="op" id="7422073">*</span><span class="ident" id="7422074"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7422081">.</span><span class="ident" id="7422082">T</span><span class="op" id="7422083">)</span>&nbsp;<span class="op" id="7422085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422088">expect</span>&nbsp;<span class="op" id="7422095">:=</span>&nbsp;<span class="ident" id="7422098"><a href="/net/http/header_test.go.html#7419644">time</a></span><span class="op" id="7422102">.</span><span class="ident" id="7422103">Date</span><span class="op" id="7422107">(</span><span class="num" id="7422108">1994</span><span class="op" id="7422112">,</span>&nbsp;<span class="num" id="7422114">11</span><span class="op" id="7422116">,</span>&nbsp;<span class="num" id="7422118">6</span><span class="op" id="7422119">,</span>&nbsp;<span class="num" id="7422121">8</span><span class="op" id="7422122">,</span>&nbsp;<span class="num" id="7422124">49</span><span class="op" id="7422126">,</span>&nbsp;<span class="num" id="7422128">37</span><span class="op" id="7422130">,</span>&nbsp;<span class="num" id="7422132">0</span><span class="op" id="7422133">,</span>&nbsp;<span class="ident" id="7422135"><a href="/net/http/header_test.go.html#7419644">time</a></span><span class="op" id="7422139">.</span><span class="ident" id="7422140">UTC</span><span class="op" id="7422143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422146">for</span>&nbsp;<span class="ident" id="7422150">i</span><span class="op" id="7422151">,</span>&nbsp;<span class="ident" id="7422153">test</span>&nbsp;<span class="op" id="7422158">:=</span>&nbsp;<span class="keyword" id="7422161">range</span>&nbsp;<span class="ident" id="7422167"><a href="/net/http/header_test.go.html#7421692">parseTimeTests</a></span>&nbsp;<span class="op" id="7422182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422186">d</span><span class="op" id="7422187">,</span>&nbsp;<span class="ident" id="7422189">err</span>&nbsp;<span class="op" id="7422193">:=</span>&nbsp;<span class="ident" id="7422196"><a href="/net/http/header.go.html#3783139">ParseTime</a></span><span class="op" id="7422205">(</span><span class="ident" id="7422206"><a href="/net/http/header_test.go.html#7422153">test</a></span><span class="op" id="7422210">.</span><span class="ident" id="7422211">h</span><span class="op" id="7422212">.</span><span class="ident" id="7422213">Get</span><span class="op" id="7422216">(</span><span class="string" id="7422217">&#34;Date&#34;</span><span class="op" id="7422223">)</span><span class="op" id="7422224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422228">if</span>&nbsp;<span class="ident" id="7422231"><a href="/net/http/header_test.go.html#7422189">err</a></span>&nbsp;<span class="op" id="7422235">!=</span>&nbsp;<span class="ident" id="7422238">nil</span>&nbsp;<span class="op" id="7422242">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422247">if</span>&nbsp;<span class="op" id="7422250">!</span><span class="ident" id="7422251"><a href="/net/http/header_test.go.html#7422153">test</a></span><span class="op" id="7422255">.</span><span class="ident" id="7422256">err</span>&nbsp;<span class="op" id="7422260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422266"><a href="/net/http/header_test.go.html#7422071">t</a></span><span class="op" id="7422267">.</span><span class="ident" id="7422268">Errorf</span><span class="op" id="7422274">(</span><span class="string" id="7422275">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="7422295">,</span>&nbsp;<span class="ident" id="7422297"><a href="/net/http/header_test.go.html#7422150">i</a></span><span class="op" id="7422298">,</span>&nbsp;<span class="ident" id="7422300"><a href="/net/http/header_test.go.html#7422189">err</a></span><span class="op" id="7422303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422313">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422324">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422328">if</span>&nbsp;<span class="ident" id="7422331"><a href="/net/http/header_test.go.html#7422153">test</a></span><span class="op" id="7422335">.</span><span class="ident" id="7422336">err</span>&nbsp;<span class="op" id="7422340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422345"><a href="/net/http/header_test.go.html#7422071">t</a></span><span class="op" id="7422346">.</span><span class="ident" id="7422347">Errorf</span><span class="op" id="7422353">(</span><span class="string" id="7422354">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="7422374">,</span>&nbsp;<span class="ident" id="7422376"><a href="/net/http/header_test.go.html#7422150">i</a></span><span class="op" id="7422377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422382">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7422397">if</span>&nbsp;<span class="op" id="7422400">!</span><span class="ident" id="7422401"><a href="/net/http/header_test.go.html#7422088">expect</a></span><span class="op" id="7422407">.</span><span class="ident" id="7422408">Equal</span><span class="op" id="7422413">(</span><span class="ident" id="7422414"><a href="/net/http/header_test.go.html#7422186">d</a></span><span class="op" id="7422415">)</span>&nbsp;<span class="op" id="7422417">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422422"><a href="/net/http/header_test.go.html#7422071">t</a></span><span class="op" id="7422423">.</span><span class="ident" id="7422424">Errorf</span><span class="op" id="7422430">(</span><span class="string" id="7422431">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7422457">,</span>&nbsp;<span class="ident" id="7422459"><a href="/net/http/header_test.go.html#7422150">i</a></span><span class="op" id="7422460">,</span>&nbsp;<span class="ident" id="7422462"><a href="/net/http/header_test.go.html#7422186">d</a></span><span class="op" id="7422463">,</span>&nbsp;<span class="ident" id="7422465"><a href="/net/http/header_test.go.html#7422088">expect</a></span><span class="op" id="7422471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422478">}</span><br>
<span class="lineno"></span><span class="op" id="7422480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7422483">type</span>&nbsp;<span class="ident" id="7422488">hasTokenTest</span>&nbsp;<span class="keyword" id="7422501">struct</span>&nbsp;<span class="op" id="7422508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422511">header</span>&nbsp;<span class="builtintype" id="7422518">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422526">token</span>&nbsp;&nbsp;<span class="builtintype" id="7422533">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7422541">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7422548">bool</span><br>
<span class="lineno"></span><span class="op" id="7422553">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7422556">var</span>&nbsp;<span class="ident" id="7422560">hasTokenTests</span>&nbsp;<span class="op" id="7422574">=</span>&nbsp;<span class="op" id="7422576">[</span><span class="op" id="7422577">]</span><span class="ident" id="7422578"><a href="/net/http/header_test.go.html#7422488">hasTokenTest</a></span><span class="op" id="7422590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422593">{</span><span class="string" id="7422594">&#34;&#34;</span><span class="op" id="7422596">,</span>&nbsp;<span class="string" id="7422598">&#34;&#34;</span><span class="op" id="7422600">,</span>&nbsp;<span class="ident" id="7422602">false</span><span class="op" id="7422607">}</span><span class="op" id="7422608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422611">{</span><span class="string" id="7422612">&#34;&#34;</span><span class="op" id="7422614">,</span>&nbsp;<span class="string" id="7422616">&#34;foo&#34;</span><span class="op" id="7422621">,</span>&nbsp;<span class="ident" id="7422623">false</span><span class="op" id="7422628">}</span><span class="op" id="7422629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422632">{</span><span class="string" id="7422633">&#34;foo&#34;</span><span class="op" id="7422638">,</span>&nbsp;<span class="string" id="7422640">&#34;foo&#34;</span><span class="op" id="7422645">,</span>&nbsp;<span class="ident" id="7422647">true</span><span class="op" id="7422651">}</span><span class="op" id="7422652">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422655">{</span><span class="string" id="7422656">&#34;foo&nbsp;&#34;</span><span class="op" id="7422662">,</span>&nbsp;<span class="string" id="7422664">&#34;foo&#34;</span><span class="op" id="7422669">,</span>&nbsp;<span class="ident" id="7422671">true</span><span class="op" id="7422675">}</span><span class="op" id="7422676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422679">{</span><span class="string" id="7422680">&#34;&nbsp;foo&#34;</span><span class="op" id="7422686">,</span>&nbsp;<span class="string" id="7422688">&#34;foo&#34;</span><span class="op" id="7422693">,</span>&nbsp;<span class="ident" id="7422695">true</span><span class="op" id="7422699">}</span><span class="op" id="7422700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422703">{</span><span class="string" id="7422704">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="7422711">,</span>&nbsp;<span class="string" id="7422713">&#34;foo&#34;</span><span class="op" id="7422718">,</span>&nbsp;<span class="ident" id="7422720">true</span><span class="op" id="7422724">}</span><span class="op" id="7422725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422728">{</span><span class="string" id="7422729">&#34;foo,bar&#34;</span><span class="op" id="7422738">,</span>&nbsp;<span class="string" id="7422740">&#34;foo&#34;</span><span class="op" id="7422745">,</span>&nbsp;<span class="ident" id="7422747">true</span><span class="op" id="7422751">}</span><span class="op" id="7422752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422755">{</span><span class="string" id="7422756">&#34;bar,foo&#34;</span><span class="op" id="7422765">,</span>&nbsp;<span class="string" id="7422767">&#34;foo&#34;</span><span class="op" id="7422772">,</span>&nbsp;<span class="ident" id="7422774">true</span><span class="op" id="7422778">}</span><span class="op" id="7422779">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422782">{</span><span class="string" id="7422783">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="7422793">,</span>&nbsp;<span class="string" id="7422795">&#34;foo&#34;</span><span class="op" id="7422800">,</span>&nbsp;<span class="ident" id="7422802">true</span><span class="op" id="7422806">}</span><span class="op" id="7422807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422810">{</span><span class="string" id="7422811">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7422825">,</span>&nbsp;<span class="string" id="7422827">&#34;foo&#34;</span><span class="op" id="7422832">,</span>&nbsp;<span class="ident" id="7422834">true</span><span class="op" id="7422838">}</span><span class="op" id="7422839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422842">{</span><span class="string" id="7422843">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="7422857">,</span>&nbsp;<span class="string" id="7422859">&#34;foo&#34;</span><span class="op" id="7422864">,</span>&nbsp;<span class="ident" id="7422866">true</span><span class="op" id="7422870">}</span><span class="op" id="7422871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422874">{</span><span class="string" id="7422875">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="7422889">,</span>&nbsp;<span class="string" id="7422891">&#34;foo&#34;</span><span class="op" id="7422896">,</span>&nbsp;<span class="ident" id="7422898">true</span><span class="op" id="7422902">}</span><span class="op" id="7422903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422906">{</span><span class="string" id="7422907">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="7422922">,</span>&nbsp;<span class="string" id="7422924">&#34;foo&#34;</span><span class="op" id="7422929">,</span>&nbsp;<span class="ident" id="7422931">true</span><span class="op" id="7422935">}</span><span class="op" id="7422936">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422939">{</span><span class="string" id="7422940">&#34;FOO&#34;</span><span class="op" id="7422945">,</span>&nbsp;<span class="string" id="7422947">&#34;foo&#34;</span><span class="op" id="7422952">,</span>&nbsp;<span class="ident" id="7422954">true</span><span class="op" id="7422958">}</span><span class="op" id="7422959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422962">{</span><span class="string" id="7422963">&#34;FOO&nbsp;&#34;</span><span class="op" id="7422969">,</span>&nbsp;<span class="string" id="7422971">&#34;foo&#34;</span><span class="op" id="7422976">,</span>&nbsp;<span class="ident" id="7422978">true</span><span class="op" id="7422982">}</span><span class="op" id="7422983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7422986">{</span><span class="string" id="7422987">&#34;&nbsp;FOO&#34;</span><span class="op" id="7422993">,</span>&nbsp;<span class="string" id="7422995">&#34;foo&#34;</span><span class="op" id="7423000">,</span>&nbsp;<span class="ident" id="7423002">true</span><span class="op" id="7423006">}</span><span class="op" id="7423007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423010">{</span><span class="string" id="7423011">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="7423018">,</span>&nbsp;<span class="string" id="7423020">&#34;foo&#34;</span><span class="op" id="7423025">,</span>&nbsp;<span class="ident" id="7423027">true</span><span class="op" id="7423031">}</span><span class="op" id="7423032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423035">{</span><span class="string" id="7423036">&#34;FOO,BAR&#34;</span><span class="op" id="7423045">,</span>&nbsp;<span class="string" id="7423047">&#34;foo&#34;</span><span class="op" id="7423052">,</span>&nbsp;<span class="ident" id="7423054">true</span><span class="op" id="7423058">}</span><span class="op" id="7423059">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423062">{</span><span class="string" id="7423063">&#34;BAR,FOO&#34;</span><span class="op" id="7423072">,</span>&nbsp;<span class="string" id="7423074">&#34;foo&#34;</span><span class="op" id="7423079">,</span>&nbsp;<span class="ident" id="7423081">true</span><span class="op" id="7423085">}</span><span class="op" id="7423086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423089">{</span><span class="string" id="7423090">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="7423100">,</span>&nbsp;<span class="string" id="7423102">&#34;foo&#34;</span><span class="op" id="7423107">,</span>&nbsp;<span class="ident" id="7423109">true</span><span class="op" id="7423113">}</span><span class="op" id="7423114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423117">{</span><span class="string" id="7423118">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="7423132">,</span>&nbsp;<span class="string" id="7423134">&#34;foo&#34;</span><span class="op" id="7423139">,</span>&nbsp;<span class="ident" id="7423141">true</span><span class="op" id="7423145">}</span><span class="op" id="7423146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423149">{</span><span class="string" id="7423150">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="7423164">,</span>&nbsp;<span class="string" id="7423166">&#34;foo&#34;</span><span class="op" id="7423171">,</span>&nbsp;<span class="ident" id="7423173">true</span><span class="op" id="7423177">}</span><span class="op" id="7423178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423181">{</span><span class="string" id="7423182">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="7423196">,</span>&nbsp;<span class="string" id="7423198">&#34;foo&#34;</span><span class="op" id="7423203">,</span>&nbsp;<span class="ident" id="7423205">true</span><span class="op" id="7423209">}</span><span class="op" id="7423210">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423213">{</span><span class="string" id="7423214">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="7423229">,</span>&nbsp;<span class="string" id="7423231">&#34;foo&#34;</span><span class="op" id="7423236">,</span>&nbsp;<span class="ident" id="7423238">true</span><span class="op" id="7423242">}</span><span class="op" id="7423243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423246">{</span><span class="string" id="7423247">&#34;foobar&#34;</span><span class="op" id="7423255">,</span>&nbsp;<span class="string" id="7423257">&#34;foo&#34;</span><span class="op" id="7423262">,</span>&nbsp;<span class="ident" id="7423264">false</span><span class="op" id="7423269">}</span><span class="op" id="7423270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423273">{</span><span class="string" id="7423274">&#34;barfoo&nbsp;&#34;</span><span class="op" id="7423283">,</span>&nbsp;<span class="string" id="7423285">&#34;foo&#34;</span><span class="op" id="7423290">,</span>&nbsp;<span class="ident" id="7423292">false</span><span class="op" id="7423297">}</span><span class="op" id="7423298">,</span><br>
<span class="lineno"></span><span class="op" id="7423300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7423303">func</span>&nbsp;<span class="ident" id="7423308">TestHasToken</span><span class="op" id="7423320">(</span><span class="ident" id="7423321">t</span>&nbsp;<span class="op" id="7423323">*</span><span class="ident" id="7423324"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7423331">.</span><span class="ident" id="7423332">T</span><span class="op" id="7423333">)</span>&nbsp;<span class="op" id="7423335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7423338">for</span>&nbsp;<span class="ident" id="7423342">_</span><span class="op" id="7423343">,</span>&nbsp;<span class="ident" id="7423345">tt</span>&nbsp;<span class="op" id="7423348">:=</span>&nbsp;<span class="keyword" id="7423351">range</span>&nbsp;<span class="ident" id="7423357"><a href="/net/http/header_test.go.html#7422560">hasTokenTests</a></span>&nbsp;<span class="op" id="7423371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7423375">if</span>&nbsp;<span class="ident" id="7423378"><a href="/net/http/header.go.html#3785956">hasToken</a></span><span class="op" id="7423386">(</span><span class="ident" id="7423387"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423389">.</span><span class="ident" id="7423390">header</span><span class="op" id="7423396">,</span>&nbsp;<span class="ident" id="7423398"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423400">.</span><span class="ident" id="7423401">token</span><span class="op" id="7423406">)</span>&nbsp;<span class="op" id="7423408">!=</span>&nbsp;<span class="ident" id="7423411"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423413">.</span><span class="ident" id="7423414">want</span>&nbsp;<span class="op" id="7423419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7423424"><a href="/net/http/header_test.go.html#7423321">t</a></span><span class="op" id="7423425">.</span><span class="ident" id="7423426">Errorf</span><span class="op" id="7423432">(</span><span class="string" id="7423433">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7423465">,</span>&nbsp;<span class="ident" id="7423467"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423469">.</span><span class="ident" id="7423470">header</span><span class="op" id="7423476">,</span>&nbsp;<span class="ident" id="7423478"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423480">.</span><span class="ident" id="7423481">token</span><span class="op" id="7423486">,</span>&nbsp;<span class="op" id="7423488">!</span><span class="ident" id="7423489"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423491">.</span><span class="ident" id="7423492">want</span><span class="op" id="7423496">,</span>&nbsp;<span class="ident" id="7423498"><a href="/net/http/header_test.go.html#7423345">tt</a></span><span class="op" id="7423500">.</span><span class="ident" id="7423501">want</span><span class="op" id="7423505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423509">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423512">}</span><br>
<span class="lineno"></span><span class="op" id="7423514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7423517">var</span>&nbsp;<span class="ident" id="7423521">testHeader</span>&nbsp;<span class="op" id="7423532">=</span>&nbsp;<span class="ident" id="7423534"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7423540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7423543">&#34;Content-Length&#34;</span><span class="op" id="7423559">:</span>&nbsp;<span class="op" id="7423561">{</span><span class="string" id="7423562">&#34;123&#34;</span><span class="op" id="7423567">}</span><span class="op" id="7423568">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7423571">&#34;Content-Type&#34;</span><span class="op" id="7423585">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7423589">{</span><span class="string" id="7423590">&#34;text/plain&#34;</span><span class="op" id="7423602">}</span><span class="op" id="7423603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7423606">&#34;Date&#34;</span><span class="op" id="7423612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7423624">{</span><span class="string" id="7423625">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="7423651">}</span><span class="op" id="7423652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7423655">&#34;Server&#34;</span><span class="op" id="7423663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7423673">{</span><span class="ident" id="7423674"><a href="/net/http/export_test.go.html#7417361">DefaultUserAgent</a></span><span class="op" id="7423690">}</span><span class="op" id="7423691">,</span><br>
<span class="lineno"></span><span class="op" id="7423693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="7423696">var</span>&nbsp;<span class="ident" id="7423700">buf</span>&nbsp;<span class="ident" id="7423704"><a href="/net/http/header_test.go.html#7419613">bytes</a></span><span class="op" id="7423709">.</span><span class="ident" id="7423710">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7423718">func</span>&nbsp;<span class="ident" id="7423723">BenchmarkHeaderWriteSubset</span><span class="op" id="7423749">(</span><span class="ident" id="7423750">b</span>&nbsp;<span class="op" id="7423752">*</span><span class="ident" id="7423753"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7423760">.</span><span class="ident" id="7423761">B</span><span class="op" id="7423762">)</span>&nbsp;<span class="op" id="7423764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7423767"><a href="/net/http/header_test.go.html#7423750">b</a></span><span class="op" id="7423768">.</span><span class="ident" id="7423769">ReportAllocs</span><span class="op" id="7423781">(</span><span class="op" id="7423782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7423785">for</span>&nbsp;<span class="ident" id="7423789">i</span>&nbsp;<span class="op" id="7423791">:=</span>&nbsp;<span class="num" id="7423794">0</span><span class="op" id="7423795">;</span>&nbsp;<span class="ident" id="7423797"><a href="/net/http/header_test.go.html#7423789">i</a></span>&nbsp;<span class="op" id="7423799">&lt;</span>&nbsp;<span class="ident" id="7423801"><a href="/net/http/header_test.go.html#7423750">b</a></span><span class="op" id="7423802">.</span><span class="ident" id="7423803">N</span><span class="op" id="7423804">;</span>&nbsp;<span class="ident" id="7423806"><a href="/net/http/header_test.go.html#7423789">i</a></span><span class="op" id="7423807">++</span>&nbsp;<span class="op" id="7423810">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7423814"><a href="/net/http/header_test.go.html#7423700">buf</a></span><span class="op" id="7423817">.</span><span class="ident" id="7423818">Reset</span><span class="op" id="7423823">(</span><span class="op" id="7423824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7423828"><a href="/net/http/header_test.go.html#7423521">testHeader</a></span><span class="op" id="7423838">.</span><span class="ident" id="7423839">WriteSubset</span><span class="op" id="7423850">(</span><span class="op" id="7423851">&amp;</span><span class="ident" id="7423852"><a href="/net/http/header_test.go.html#7423700">buf</a></span><span class="op" id="7423855">,</span>&nbsp;<span class="ident" id="7423857">nil</span><span class="op" id="7423860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423863">}</span><br>
<span class="lineno"></span><span class="op" id="7423865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7423868">func</span>&nbsp;<span class="ident" id="7423873">TestHeaderWriteSubsetAllocs</span><span class="op" id="7423900">(</span><span class="ident" id="7423901">t</span>&nbsp;<span class="op" id="7423903">*</span><span class="ident" id="7423904"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7423911">.</span><span class="ident" id="7423912">T</span><span class="op" id="7423913">)</span>&nbsp;<span class="op" id="7423915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7423918">if</span>&nbsp;<span class="ident" id="7423921"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7423928">.</span><span class="ident" id="7423929">Short</span><span class="op" id="7423934">(</span><span class="op" id="7423935">)</span>&nbsp;<span class="op" id="7423937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7423941"><a href="/net/http/header_test.go.html#7423901">t</a></span><span class="op" id="7423942">.</span><span class="ident" id="7423943">Skip</span><span class="op" id="7423947">(</span><span class="string" id="7423948">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7423983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7423986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7423989">if</span>&nbsp;<span class="ident" id="7423992"><a href="/net/http/header.go.html#3781475">raceEnabled</a></span>&nbsp;<span class="op" id="7424004">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7424008"><a href="/net/http/header_test.go.html#7423901">t</a></span><span class="op" id="7424009">.</span><span class="ident" id="7424010">Skip</span><span class="op" id="7424014">(</span><span class="string" id="7424015">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="7424050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7424053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7424056">if</span>&nbsp;<span class="ident" id="7424059"><a href="/net/http/header_test.go.html#7419622">runtime</a></span><span class="op" id="7424066">.</span><span class="ident" id="7424067">GOMAXPROCS</span><span class="op" id="7424077">(</span><span class="num" id="7424078">0</span><span class="op" id="7424079">)</span>&nbsp;<span class="op" id="7424081">&gt;</span>&nbsp;<span class="num" id="7424083">1</span>&nbsp;<span class="op" id="7424085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7424089"><a href="/net/http/header_test.go.html#7423901">t</a></span><span class="op" id="7424090">.</span><span class="ident" id="7424091">Skip</span><span class="op" id="7424095">(</span><span class="string" id="7424096">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7424120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7424123">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7424126">n</span>&nbsp;<span class="op" id="7424128">:=</span>&nbsp;<span class="ident" id="7424131"><a href="/net/http/header_test.go.html#7419633">testing</a></span><span class="op" id="7424138">.</span><span class="ident" id="7424139">AllocsPerRun</span><span class="op" id="7424151">(</span><span class="num" id="7424152">100</span><span class="op" id="7424155">,</span>&nbsp;<span class="keyword" id="7424157">func</span><span class="op" id="7424161">(</span><span class="op" id="7424162">)</span>&nbsp;<span class="op" id="7424164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7424168"><a href="/net/http/header_test.go.html#7423700">buf</a></span><span class="op" id="7424171">.</span><span class="ident" id="7424172">Reset</span><span class="op" id="7424177">(</span><span class="op" id="7424178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7424182"><a href="/net/http/header_test.go.html#7423521">testHeader</a></span><span class="op" id="7424192">.</span><span class="ident" id="7424193">WriteSubset</span><span class="op" id="7424204">(</span><span class="op" id="7424205">&amp;</span><span class="ident" id="7424206"><a href="/net/http/header_test.go.html#7423700">buf</a></span><span class="op" id="7424209">,</span>&nbsp;<span class="ident" id="7424211">nil</span><span class="op" id="7424214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7424217">}</span><span class="op" id="7424218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7424221">if</span>&nbsp;<span class="ident" id="7424224"><a href="/net/http/header_test.go.html#7424126">n</a></span>&nbsp;<span class="op" id="7424226">&gt;</span>&nbsp;<span class="num" id="7424228">0</span>&nbsp;<span class="op" id="7424230">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7424234"><a href="/net/http/header_test.go.html#7423901">t</a></span><span class="op" id="7424235">.</span><span class="ident" id="7424236">Errorf</span><span class="op" id="7424242">(</span><span class="string" id="7424243">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7424264">,</span>&nbsp;<span class="ident" id="7424266"><a href="/net/http/header_test.go.html#7424126">n</a></span><span class="op" id="7424267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7424270">}</span><br>
<span class="lineno"></span><span class="op" id="7424272">}</span>
</div>
</body>
</html>
