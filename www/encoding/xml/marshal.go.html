<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4911358">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4911413">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4911467">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4911518">package</span>&nbsp;<span class="ident" id="4911526">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4911531">import</span>&nbsp;<span class="op" id="4911538">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911541">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911550">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911559">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911571">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911578">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911584">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911595">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4911606">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4911616">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4911619">const</span>&nbsp;<span class="op" id="4911625">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911628">//&nbsp;A&nbsp;generic&nbsp;XML&nbsp;header&nbsp;suitable&nbsp;for&nbsp;use&nbsp;with&nbsp;the&nbsp;output&nbsp;of&nbsp;Marshal.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911698">//&nbsp;This&nbsp;is&nbsp;not&nbsp;automatically&nbsp;added&nbsp;to&nbsp;any&nbsp;output&nbsp;of&nbsp;this&nbsp;package,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4911765">//&nbsp;it&nbsp;is&nbsp;provided&nbsp;as&nbsp;a&nbsp;convenience.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4911802">Header</span>&nbsp;<span class="op" id="4911809">=</span>&nbsp;<span class="string" id="4911811">`&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;UTF-8&#34;?&gt;`</span>&nbsp;<span class="op" id="4911852">+</span>&nbsp;<span class="string" id="4911854">&#34;\n&#34;</span><br>
<span class="lineno"></span><span class="op" id="4911859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4911862">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="4911904">//</span><br>
<span class="lineno"></span><span class="comment" id="4911907">//&nbsp;Marshal&nbsp;handles&nbsp;an&nbsp;array&nbsp;or&nbsp;slice&nbsp;by&nbsp;marshalling&nbsp;each&nbsp;of&nbsp;the&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="4911981">//&nbsp;Marshal&nbsp;handles&nbsp;a&nbsp;pointer&nbsp;by&nbsp;marshalling&nbsp;the&nbsp;value&nbsp;it&nbsp;points&nbsp;at&nbsp;or,&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4912059">//&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;by&nbsp;writing&nbsp;nothing.&nbsp;&nbsp;Marshal&nbsp;handles&nbsp;an&nbsp;interface&nbsp;value&nbsp;by</span><br>
<span class="lineno">30</span><span class="comment" id="4912137">//&nbsp;marshalling&nbsp;the&nbsp;value&nbsp;it&nbsp;contains&nbsp;or,&nbsp;if&nbsp;the&nbsp;interface&nbsp;value&nbsp;is&nbsp;nil,&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4912212">//&nbsp;writing&nbsp;nothing.&nbsp;&nbsp;Marshal&nbsp;handles&nbsp;all&nbsp;other&nbsp;data&nbsp;by&nbsp;writing&nbsp;one&nbsp;or&nbsp;more&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="4912291">//&nbsp;elements&nbsp;containing&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="4912324">//</span><br>
<span class="lineno"></span><span class="comment" id="4912327">//&nbsp;The&nbsp;name&nbsp;for&nbsp;the&nbsp;XML&nbsp;elements&nbsp;is&nbsp;taken&nbsp;from,&nbsp;in&nbsp;order&nbsp;of&nbsp;preference:</span><br>
<span class="lineno">35</span><span class="comment" id="4912399">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;tag&nbsp;on&nbsp;the&nbsp;XMLName&nbsp;field,&nbsp;if&nbsp;the&nbsp;data&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="4912462">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;of&nbsp;type&nbsp;xml.Name</span><br>
<span class="lineno"></span><span class="comment" id="4912519">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;tag&nbsp;of&nbsp;the&nbsp;struct&nbsp;field&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4912580">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;struct&nbsp;field&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4912642">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;marshalled&nbsp;type</span><br>
<span class="lineno">40</span><span class="comment" id="4912683">//</span><br>
<span class="lineno"></span><span class="comment" id="4912686">//&nbsp;The&nbsp;XML&nbsp;element&nbsp;for&nbsp;a&nbsp;struct&nbsp;contains&nbsp;marshalled&nbsp;elements&nbsp;for&nbsp;each&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4912763">//&nbsp;exported&nbsp;fields&nbsp;of&nbsp;the&nbsp;struct,&nbsp;with&nbsp;these&nbsp;exceptions:</span><br>
<span class="lineno"></span><span class="comment" id="4912820">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;XMLName&nbsp;field,&nbsp;described&nbsp;above,&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="4912877">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno">45</span><span class="comment" id="4912919">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;name,attr&#34;&nbsp;becomes&nbsp;an&nbsp;attribute&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="4912983">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="4913027">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,attr&#34;&nbsp;becomes&nbsp;an&nbsp;attribute&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4913091">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;name&nbsp;in&nbsp;the&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="4913131">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,chardata&#34;&nbsp;is&nbsp;written&nbsp;as&nbsp;character&nbsp;data,</span><br>
<span class="lineno">50</span><span class="comment" id="4913199">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;as&nbsp;an&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="4913231">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,innerxml&#34;&nbsp;is&nbsp;written&nbsp;verbatim,&nbsp;not&nbsp;subject</span><br>
<span class="lineno"></span><span class="comment" id="4913302">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;usual&nbsp;marshalling&nbsp;procedure.</span><br>
<span class="lineno"></span><span class="comment" id="4913347">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,comment&#34;&nbsp;is&nbsp;written&nbsp;as&nbsp;an&nbsp;XML&nbsp;comment,&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="4913418">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject&nbsp;to&nbsp;the&nbsp;usual&nbsp;marshalling&nbsp;procedure.&nbsp;It&nbsp;must&nbsp;not&nbsp;contain</span><br>
<span class="lineno">55</span><span class="comment" id="4913491">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;&#34;--&#34;&nbsp;string&nbsp;within&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="4913527">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;a&nbsp;tag&nbsp;including&nbsp;the&nbsp;&#34;omitempty&#34;&nbsp;option&nbsp;is&nbsp;omitted</span><br>
<span class="lineno"></span><span class="comment" id="4913599">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;the&nbsp;field&nbsp;value&nbsp;is&nbsp;empty.&nbsp;The&nbsp;empty&nbsp;values&nbsp;are&nbsp;false,&nbsp;0,&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="4913672">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil&nbsp;pointer&nbsp;or&nbsp;interface&nbsp;value,&nbsp;and&nbsp;any&nbsp;array,&nbsp;slice,&nbsp;map,&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4913743">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;of&nbsp;length&nbsp;zero.</span><br>
<span class="lineno">60</span><span class="comment" id="4913775">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;an&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="4913845">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="4913891">//</span><br>
<span class="lineno"></span><span class="comment" id="4913894">//&nbsp;If&nbsp;a&nbsp;field&nbsp;uses&nbsp;a&nbsp;tag&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;then&nbsp;the&nbsp;element&nbsp;c&nbsp;will&nbsp;be&nbsp;nested&nbsp;inside</span><br>
<span class="lineno"></span><span class="comment" id="4913969">//&nbsp;parent&nbsp;elements&nbsp;a&nbsp;and&nbsp;b.&nbsp;&nbsp;Fields&nbsp;that&nbsp;appear&nbsp;next&nbsp;to&nbsp;each&nbsp;other&nbsp;that&nbsp;name</span><br>
<span class="lineno">65</span><span class="comment" id="4914046">//&nbsp;the&nbsp;same&nbsp;parent&nbsp;will&nbsp;be&nbsp;enclosed&nbsp;in&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="4914102">//</span><br>
<span class="lineno"></span><span class="comment" id="4914105">//&nbsp;See&nbsp;MarshalIndent&nbsp;for&nbsp;an&nbsp;example.</span><br>
<span class="lineno"></span><span class="comment" id="4914142">//</span><br>
<span class="lineno"></span><span class="comment" id="4914145">//&nbsp;Marshal&nbsp;will&nbsp;return&nbsp;an&nbsp;error&nbsp;if&nbsp;asked&nbsp;to&nbsp;marshal&nbsp;a&nbsp;channel,&nbsp;function,&nbsp;or&nbsp;map.</span><br>
<span class="lineno">70</span><span class="keyword" id="4914226">func</span>&nbsp;<span class="ident" id="4914231">Marshal</span><span class="op" id="4914238">(</span><span class="ident" id="4914239">v</span>&nbsp;<span class="keyword" id="4914241">interface</span><span class="op" id="4914250">{</span><span class="op" id="4914251">}</span><span class="op" id="4914252">)</span>&nbsp;<span class="op" id="4914254">(</span><span class="op" id="4914255">[</span><span class="op" id="4914256">]</span><span class="builtintype" id="4914257">byte</span><span class="op" id="4914261">,</span>&nbsp;<span class="builtintype" id="4914263">error</span><span class="op" id="4914268">)</span>&nbsp;<span class="op" id="4914270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914273">var</span>&nbsp;<span class="ident" id="4914277">b</span>&nbsp;<span class="ident" id="4914279"><a href="/encoding/xml/marshal.go.html#4911550">bytes</a></span><span class="op" id="4914284">.</span><span class="ident" id="4914285">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914293">if</span>&nbsp;<span class="ident" id="4914296">err</span>&nbsp;<span class="op" id="4914300">:=</span>&nbsp;<span class="ident" id="4914303"><a href="/encoding/xml/marshal.go.html#4916463">NewEncoder</a></span><span class="op" id="4914313">(</span><span class="op" id="4914314">&amp;</span><span class="ident" id="4914315"><a href="/encoding/xml/marshal.go.html#4914277">b</a></span><span class="op" id="4914316">)</span><span class="op" id="4914317">.</span><span class="ident" id="4914318">Encode</span><span class="op" id="4914324">(</span><span class="ident" id="4914325"><a href="/encoding/xml/marshal.go.html#4914239">v</a></span><span class="op" id="4914326">)</span><span class="op" id="4914327">;</span>&nbsp;<span class="ident" id="4914329"><a href="/encoding/xml/marshal.go.html#4914296">err</a></span>&nbsp;<span class="op" id="4914333">!=</span>&nbsp;<span class="ident" id="4914336">nil</span>&nbsp;<span class="op" id="4914340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914344">return</span>&nbsp;<span class="ident" id="4914351">nil</span><span class="op" id="4914354">,</span>&nbsp;<span class="ident" id="4914356"><a href="/encoding/xml/marshal.go.html#4914296">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4914361">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4914364">return</span>&nbsp;<span class="ident" id="4914371"><a href="/encoding/xml/marshal.go.html#4914277">b</a></span><span class="op" id="4914372">.</span><span class="ident" id="4914373">Bytes</span><span class="op" id="4914378">(</span><span class="op" id="4914379">)</span><span class="op" id="4914380">,</span>&nbsp;<span class="ident" id="4914382">nil</span><br>
<span class="lineno"></span><span class="op" id="4914386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4914389">//&nbsp;Marshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;marshal</span><br>
<span class="lineno"></span><span class="comment" id="4914459">//&nbsp;themselves&nbsp;into&nbsp;valid&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno">80</span><span class="comment" id="4914498">//</span><br>
<span class="lineno"></span><span class="comment" id="4914501">//&nbsp;MarshalXML&nbsp;encodes&nbsp;the&nbsp;receiver&nbsp;as&nbsp;zero&nbsp;or&nbsp;more&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="4914566">//&nbsp;By&nbsp;convention,&nbsp;arrays&nbsp;or&nbsp;slices&nbsp;are&nbsp;typically&nbsp;encoded&nbsp;as&nbsp;a&nbsp;sequence</span><br>
<span class="lineno"></span><span class="comment" id="4914637">//&nbsp;of&nbsp;elements,&nbsp;one&nbsp;per&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="4914668">//&nbsp;Using&nbsp;start&nbsp;as&nbsp;the&nbsp;element&nbsp;tag&nbsp;is&nbsp;not&nbsp;required,&nbsp;but&nbsp;doing&nbsp;so</span><br>
<span class="lineno">85</span><span class="comment" id="4914732">//&nbsp;will&nbsp;enable&nbsp;Unmarshal&nbsp;to&nbsp;match&nbsp;the&nbsp;XML&nbsp;elements&nbsp;to&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="4914798">//&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4914815">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;construct&nbsp;a&nbsp;separate</span><br>
<span class="lineno"></span><span class="comment" id="4914880">//&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;desired&nbsp;XML&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="4914945">//&nbsp;to&nbsp;encode&nbsp;it&nbsp;using&nbsp;e.EncodeElement.</span><br>
<span class="lineno">90</span><span class="comment" id="4914984">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;e.EncodeToken</span><br>
<span class="lineno"></span><span class="comment" id="4915053">//&nbsp;to&nbsp;generate&nbsp;the&nbsp;XML&nbsp;output&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="4915104">//&nbsp;The&nbsp;sequence&nbsp;of&nbsp;encoded&nbsp;tokens&nbsp;must&nbsp;make&nbsp;up&nbsp;zero&nbsp;or&nbsp;more&nbsp;valid</span><br>
<span class="lineno"></span><span class="comment" id="4915170">//&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="4915187">type</span>&nbsp;<span class="ident" id="4915192">Marshaler</span>&nbsp;<span class="keyword" id="4915202">interface</span>&nbsp;<span class="op" id="4915212">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4915215">MarshalXML</span><span class="op" id="4915225">(</span><span class="ident" id="4915226">e</span>&nbsp;<span class="op" id="4915228">*</span><span class="ident" id="4915229"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4915236">,</span>&nbsp;<span class="ident" id="4915238">start</span>&nbsp;<span class="ident" id="4915244"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4915256">)</span>&nbsp;<span class="builtintype" id="4915258">error</span><br>
<span class="lineno"></span><span class="op" id="4915264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4915267">//&nbsp;MarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;marshal</span><br>
<span class="lineno"></span><span class="comment" id="4915341">//&nbsp;themselves&nbsp;into&nbsp;valid&nbsp;XML&nbsp;attributes.</span><br>
<span class="lineno">100</span><span class="comment" id="4915382">//</span><br>
<span class="lineno"></span><span class="comment" id="4915385">//&nbsp;MarshalXMLAttr&nbsp;returns&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;with&nbsp;the&nbsp;encoded&nbsp;value&nbsp;of&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="4915468">//&nbsp;Using&nbsp;name&nbsp;as&nbsp;the&nbsp;attribute&nbsp;name&nbsp;is&nbsp;not&nbsp;required,&nbsp;but&nbsp;doing&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="4915534">//&nbsp;will&nbsp;enable&nbsp;Unmarshal&nbsp;to&nbsp;match&nbsp;the&nbsp;attribute&nbsp;to&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="4915597">//&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">105</span><span class="comment" id="4915614">//&nbsp;If&nbsp;MarshalXMLAttr&nbsp;returns&nbsp;the&nbsp;zero&nbsp;attribute&nbsp;Attr{},&nbsp;no&nbsp;attribute</span><br>
<span class="lineno"></span><span class="comment" id="4915683">//&nbsp;will&nbsp;be&nbsp;generated&nbsp;in&nbsp;the&nbsp;output.</span><br>
<span class="lineno"></span><span class="comment" id="4915719">//&nbsp;MarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4915777">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="4915812">type</span>&nbsp;<span class="ident" id="4915817">MarshalerAttr</span>&nbsp;<span class="keyword" id="4915831">interface</span>&nbsp;<span class="op" id="4915841">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4915844">MarshalXMLAttr</span><span class="op" id="4915858">(</span><span class="ident" id="4915859">name</span>&nbsp;<span class="ident" id="4915864"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4915868">)</span>&nbsp;<span class="op" id="4915870">(</span><span class="ident" id="4915871"><a href="/encoding/xml/xml.go.html#4968971">Attr</a></span><span class="op" id="4915875">,</span>&nbsp;<span class="builtintype" id="4915877">error</span><span class="op" id="4915882">)</span><br>
<span class="lineno"></span><span class="op" id="4915884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4915887">//&nbsp;MarshalIndent&nbsp;works&nbsp;like&nbsp;Marshal,&nbsp;but&nbsp;each&nbsp;XML&nbsp;element&nbsp;begins&nbsp;on&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="4915961">//&nbsp;indented&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;prefix&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno">115</span><span class="comment" id="4916033">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;nesting&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="4916085">func</span>&nbsp;<span class="ident" id="4916090">MarshalIndent</span><span class="op" id="4916103">(</span><span class="ident" id="4916104">v</span>&nbsp;<span class="keyword" id="4916106">interface</span><span class="op" id="4916115">{</span><span class="op" id="4916116">}</span><span class="op" id="4916117">,</span>&nbsp;<span class="ident" id="4916119">prefix</span><span class="op" id="4916125">,</span>&nbsp;<span class="ident" id="4916127">indent</span>&nbsp;<span class="builtintype" id="4916134">string</span><span class="op" id="4916140">)</span>&nbsp;<span class="op" id="4916142">(</span><span class="op" id="4916143">[</span><span class="op" id="4916144">]</span><span class="builtintype" id="4916145">byte</span><span class="op" id="4916149">,</span>&nbsp;<span class="builtintype" id="4916151">error</span><span class="op" id="4916156">)</span>&nbsp;<span class="op" id="4916158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4916161">var</span>&nbsp;<span class="ident" id="4916165">b</span>&nbsp;<span class="ident" id="4916167"><a href="/encoding/xml/marshal.go.html#4911550">bytes</a></span><span class="op" id="4916172">.</span><span class="ident" id="4916173">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916181">enc</span>&nbsp;<span class="op" id="4916185">:=</span>&nbsp;<span class="ident" id="4916188"><a href="/encoding/xml/marshal.go.html#4916463">NewEncoder</a></span><span class="op" id="4916198">(</span><span class="op" id="4916199">&amp;</span><span class="ident" id="4916200"><a href="/encoding/xml/marshal.go.html#4916165">b</a></span><span class="op" id="4916201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916204"><a href="/encoding/xml/marshal.go.html#4916181">enc</a></span><span class="op" id="4916207">.</span><span class="ident" id="4916208">Indent</span><span class="op" id="4916214">(</span><span class="ident" id="4916215"><a href="/encoding/xml/marshal.go.html#4916119">prefix</a></span><span class="op" id="4916221">,</span>&nbsp;<span class="ident" id="4916223"><a href="/encoding/xml/marshal.go.html#4916127">indent</a></span><span class="op" id="4916229">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4916232">if</span>&nbsp;<span class="ident" id="4916235">err</span>&nbsp;<span class="op" id="4916239">:=</span>&nbsp;<span class="ident" id="4916242"><a href="/encoding/xml/marshal.go.html#4916181">enc</a></span><span class="op" id="4916245">.</span><span class="ident" id="4916246">Encode</span><span class="op" id="4916252">(</span><span class="ident" id="4916253"><a href="/encoding/xml/marshal.go.html#4916104">v</a></span><span class="op" id="4916254">)</span><span class="op" id="4916255">;</span>&nbsp;<span class="ident" id="4916257"><a href="/encoding/xml/marshal.go.html#4916235">err</a></span>&nbsp;<span class="op" id="4916261">!=</span>&nbsp;<span class="ident" id="4916264">nil</span>&nbsp;<span class="op" id="4916268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4916272">return</span>&nbsp;<span class="ident" id="4916279">nil</span><span class="op" id="4916282">,</span>&nbsp;<span class="ident" id="4916284"><a href="/encoding/xml/marshal.go.html#4916235">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4916289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4916292">return</span>&nbsp;<span class="ident" id="4916299"><a href="/encoding/xml/marshal.go.html#4916165">b</a></span><span class="op" id="4916300">.</span><span class="ident" id="4916301">Bytes</span><span class="op" id="4916306">(</span><span class="op" id="4916307">)</span><span class="op" id="4916308">,</span>&nbsp;<span class="ident" id="4916310">nil</span><br>
<span class="lineno"></span><span class="op" id="4916314">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4916317">//&nbsp;An&nbsp;Encoder&nbsp;writes&nbsp;XML&nbsp;data&nbsp;to&nbsp;an&nbsp;output&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="4916368">type</span>&nbsp;<span class="ident" id="4916373">Encoder</span>&nbsp;<span class="keyword" id="4916381">struct</span>&nbsp;<span class="op" id="4916388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916391">p</span>&nbsp;<span class="ident" id="4916393"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><br>
<span class="lineno"></span><span class="op" id="4916401">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="4916404">//&nbsp;NewEncoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;encoder&nbsp;that&nbsp;writes&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="4916458">func</span>&nbsp;<span class="ident" id="4916463">NewEncoder</span><span class="op" id="4916473">(</span><span class="ident" id="4916474">w</span>&nbsp;<span class="ident" id="4916476"><a href="/encoding/xml/marshal.go.html#4911578">io</a></span><span class="op" id="4916478">.</span><span class="ident" id="4916479">Writer</span><span class="op" id="4916485">)</span>&nbsp;<span class="op" id="4916487">*</span><span class="ident" id="4916488"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span>&nbsp;<span class="op" id="4916496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916499">e</span>&nbsp;<span class="op" id="4916501">:=</span>&nbsp;<span class="op" id="4916504">&amp;</span><span class="ident" id="4916505"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4916512">{</span><span class="ident" id="4916513"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4916520">{</span><span class="ident" id="4916521">Writer</span><span class="op" id="4916527">:</span>&nbsp;<span class="ident" id="4916529"><a href="/encoding/xml/marshal.go.html#4911541">bufio</a></span><span class="op" id="4916534">.</span><span class="ident" id="4916535">NewWriter</span><span class="op" id="4916544">(</span><span class="ident" id="4916545"><a href="/encoding/xml/marshal.go.html#4916474">w</a></span><span class="op" id="4916546">)</span><span class="op" id="4916547">}</span><span class="op" id="4916548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916551"><a href="/encoding/xml/marshal.go.html#4916499">e</a></span><span class="op" id="4916552">.</span><span class="ident" id="4916553">p</span><span class="op" id="4916554">.</span><span class="ident" id="4916555">encoder</span>&nbsp;<span class="op" id="4916563">=</span>&nbsp;<span class="ident" id="4916565"><a href="/encoding/xml/marshal.go.html#4916499">e</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4916568">return</span>&nbsp;<span class="ident" id="4916575"><a href="/encoding/xml/marshal.go.html#4916499">e</a></span><br>
<span class="lineno"></span><span class="op" id="4916577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4916580">//&nbsp;Indent&nbsp;sets&nbsp;the&nbsp;encoder&nbsp;to&nbsp;generate&nbsp;XML&nbsp;in&nbsp;which&nbsp;each&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="4916645">//&nbsp;begins&nbsp;on&nbsp;a&nbsp;new&nbsp;indented&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;prefix&nbsp;and&nbsp;is&nbsp;followed&nbsp;by</span><br>
<span class="lineno">140</span><span class="comment" id="4916721">//&nbsp;one&nbsp;or&nbsp;more&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;nesting&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="4916785">func</span>&nbsp;<span class="op" id="4916790">(</span><span class="ident" id="4916791">enc</span>&nbsp;<span class="op" id="4916795">*</span><span class="ident" id="4916796"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4916803">)</span>&nbsp;<span class="ident" id="4916805">Indent</span><span class="op" id="4916811">(</span><span class="ident" id="4916812">prefix</span><span class="op" id="4916818">,</span>&nbsp;<span class="ident" id="4916820">indent</span>&nbsp;<span class="builtintype" id="4916827">string</span><span class="op" id="4916833">)</span>&nbsp;<span class="op" id="4916835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916838"><a href="/encoding/xml/marshal.go.html#4916791">enc</a></span><span class="op" id="4916841">.</span><span class="ident" id="4916842">p</span><span class="op" id="4916843">.</span><span class="ident" id="4916844">prefix</span>&nbsp;<span class="op" id="4916851">=</span>&nbsp;<span class="ident" id="4916853"><a href="/encoding/xml/marshal.go.html#4916812">prefix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4916861"><a href="/encoding/xml/marshal.go.html#4916791">enc</a></span><span class="op" id="4916864">.</span><span class="ident" id="4916865">p</span><span class="op" id="4916866">.</span><span class="ident" id="4916867">indent</span>&nbsp;<span class="op" id="4916874">=</span>&nbsp;<span class="ident" id="4916876"><a href="/encoding/xml/marshal.go.html#4916820">indent</a></span><br>
<span class="lineno"></span><span class="op" id="4916883">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="4916886">//&nbsp;Encode&nbsp;writes&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v&nbsp;to&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="4916940">//</span><br>
<span class="lineno"></span><span class="comment" id="4916943">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Marshal&nbsp;for&nbsp;details&nbsp;about&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="4917013">//&nbsp;of&nbsp;Go&nbsp;values&nbsp;to&nbsp;XML.</span><br>
<span class="lineno">150</span><span class="comment" id="4917037">//</span><br>
<span class="lineno"></span><span class="comment" id="4917040">//&nbsp;Encode&nbsp;calls&nbsp;Flush&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="4917080">func</span>&nbsp;<span class="op" id="4917085">(</span><span class="ident" id="4917086">enc</span>&nbsp;<span class="op" id="4917090">*</span><span class="ident" id="4917091"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4917098">)</span>&nbsp;<span class="ident" id="4917100">Encode</span><span class="op" id="4917106">(</span><span class="ident" id="4917107">v</span>&nbsp;<span class="keyword" id="4917109">interface</span><span class="op" id="4917118">{</span><span class="op" id="4917119">}</span><span class="op" id="4917120">)</span>&nbsp;<span class="builtintype" id="4917122">error</span>&nbsp;<span class="op" id="4917128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4917131">err</span>&nbsp;<span class="op" id="4917135">:=</span>&nbsp;<span class="ident" id="4917138"><a href="/encoding/xml/marshal.go.html#4917086">enc</a></span><span class="op" id="4917141">.</span><span class="ident" id="4917142">p</span><span class="op" id="4917143">.</span><span class="ident" id="4917144">marshalValue</span><span class="op" id="4917156">(</span><span class="ident" id="4917157"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4917164">.</span><span class="ident" id="4917165">ValueOf</span><span class="op" id="4917172">(</span><span class="ident" id="4917173"><a href="/encoding/xml/marshal.go.html#4917107">v</a></span><span class="op" id="4917174">)</span><span class="op" id="4917175">,</span>&nbsp;<span class="ident" id="4917177">nil</span><span class="op" id="4917180">,</span>&nbsp;<span class="ident" id="4917182">nil</span><span class="op" id="4917185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4917188">if</span>&nbsp;<span class="ident" id="4917191"><a href="/encoding/xml/marshal.go.html#4917131">err</a></span>&nbsp;<span class="op" id="4917195">!=</span>&nbsp;<span class="ident" id="4917198">nil</span>&nbsp;<span class="op" id="4917202">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4917206">return</span>&nbsp;<span class="ident" id="4917213"><a href="/encoding/xml/marshal.go.html#4917131">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4917218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4917221">return</span>&nbsp;<span class="ident" id="4917228"><a href="/encoding/xml/marshal.go.html#4917086">enc</a></span><span class="op" id="4917231">.</span><span class="ident" id="4917232">p</span><span class="op" id="4917233">.</span><span class="ident" id="4917234">Flush</span><span class="op" id="4917239">(</span><span class="op" id="4917240">)</span><br>
<span class="lineno"></span><span class="op" id="4917242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="4917245">//&nbsp;EncodeElement&nbsp;writes&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v&nbsp;to&nbsp;the&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="4917306">//&nbsp;using&nbsp;start&nbsp;as&nbsp;the&nbsp;outermost&nbsp;tag&nbsp;in&nbsp;the&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="4917359">//</span><br>
<span class="lineno"></span><span class="comment" id="4917362">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Marshal&nbsp;for&nbsp;details&nbsp;about&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="4917432">//&nbsp;of&nbsp;Go&nbsp;values&nbsp;to&nbsp;XML.</span><br>
<span class="lineno">165</span><span class="comment" id="4917456">//</span><br>
<span class="lineno"></span><span class="comment" id="4917459">//&nbsp;EncodeElement&nbsp;calls&nbsp;Flush&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="4917506">func</span>&nbsp;<span class="op" id="4917511">(</span><span class="ident" id="4917512">enc</span>&nbsp;<span class="op" id="4917516">*</span><span class="ident" id="4917517"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4917524">)</span>&nbsp;<span class="ident" id="4917526">EncodeElement</span><span class="op" id="4917539">(</span><span class="ident" id="4917540">v</span>&nbsp;<span class="keyword" id="4917542">interface</span><span class="op" id="4917551">{</span><span class="op" id="4917552">}</span><span class="op" id="4917553">,</span>&nbsp;<span class="ident" id="4917555">start</span>&nbsp;<span class="ident" id="4917561"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4917573">)</span>&nbsp;<span class="builtintype" id="4917575">error</span>&nbsp;<span class="op" id="4917581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4917584">err</span>&nbsp;<span class="op" id="4917588">:=</span>&nbsp;<span class="ident" id="4917591"><a href="/encoding/xml/marshal.go.html#4917512">enc</a></span><span class="op" id="4917594">.</span><span class="ident" id="4917595">p</span><span class="op" id="4917596">.</span><span class="ident" id="4917597">marshalValue</span><span class="op" id="4917609">(</span><span class="ident" id="4917610"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4917617">.</span><span class="ident" id="4917618">ValueOf</span><span class="op" id="4917625">(</span><span class="ident" id="4917626"><a href="/encoding/xml/marshal.go.html#4917540">v</a></span><span class="op" id="4917627">)</span><span class="op" id="4917628">,</span>&nbsp;<span class="ident" id="4917630">nil</span><span class="op" id="4917633">,</span>&nbsp;<span class="op" id="4917635">&amp;</span><span class="ident" id="4917636"><a href="/encoding/xml/marshal.go.html#4917555">start</a></span><span class="op" id="4917641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4917644">if</span>&nbsp;<span class="ident" id="4917647"><a href="/encoding/xml/marshal.go.html#4917584">err</a></span>&nbsp;<span class="op" id="4917651">!=</span>&nbsp;<span class="ident" id="4917654">nil</span>&nbsp;<span class="op" id="4917658">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4917662">return</span>&nbsp;<span class="ident" id="4917669"><a href="/encoding/xml/marshal.go.html#4917584">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4917674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4917677">return</span>&nbsp;<span class="ident" id="4917684"><a href="/encoding/xml/marshal.go.html#4917512">enc</a></span><span class="op" id="4917687">.</span><span class="ident" id="4917688">p</span><span class="op" id="4917689">.</span><span class="ident" id="4917690">Flush</span><span class="op" id="4917695">(</span><span class="op" id="4917696">)</span><br>
<span class="lineno"></span><span class="op" id="4917698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="4917701">var</span>&nbsp;<span class="op" id="4917705">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4917708">endComment</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4917721">=</span>&nbsp;<span class="op" id="4917723">[</span><span class="op" id="4917724">]</span><span class="builtintype" id="4917725">byte</span><span class="op" id="4917729">(</span><span class="string" id="4917730">&#34;--&gt;&#34;</span><span class="op" id="4917735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4917738">endProcInst</span>&nbsp;&nbsp;<span class="op" id="4917751">=</span>&nbsp;<span class="op" id="4917753">[</span><span class="op" id="4917754">]</span><span class="builtintype" id="4917755">byte</span><span class="op" id="4917759">(</span><span class="string" id="4917760">&#34;?&gt;&#34;</span><span class="op" id="4917764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4917767">endDirective</span>&nbsp;<span class="op" id="4917780">=</span>&nbsp;<span class="op" id="4917782">[</span><span class="op" id="4917783">]</span><span class="builtintype" id="4917784">byte</span><span class="op" id="4917788">(</span><span class="string" id="4917789">&#34;&gt;&#34;</span><span class="op" id="4917792">)</span><br>
<span class="lineno"></span><span class="op" id="4917794">)</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="4917797">//&nbsp;EncodeToken&nbsp;writes&nbsp;the&nbsp;given&nbsp;XML&nbsp;token&nbsp;to&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="4917854">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;StartElement&nbsp;and&nbsp;EndElement&nbsp;tokens&nbsp;are&nbsp;not&nbsp;properly&nbsp;matched.</span><br>
<span class="lineno"></span><span class="comment" id="4917941">//</span><br>
<span class="lineno"></span><span class="comment" id="4917944">//&nbsp;EncodeToken&nbsp;does&nbsp;not&nbsp;call&nbsp;Flush,&nbsp;because&nbsp;usually&nbsp;it&nbsp;is&nbsp;part&nbsp;of&nbsp;a&nbsp;larger&nbsp;operation</span><br>
<span class="lineno">185</span><span class="comment" id="4918029">//&nbsp;such&nbsp;as&nbsp;Encode&nbsp;or&nbsp;EncodeElement&nbsp;(or&nbsp;a&nbsp;custom&nbsp;Marshaler&#39;s&nbsp;MarshalXML&nbsp;invoked</span><br>
<span class="lineno"></span><span class="comment" id="4918108">//&nbsp;during&nbsp;those),&nbsp;and&nbsp;those&nbsp;will&nbsp;call&nbsp;Flush&nbsp;when&nbsp;finished.</span><br>
<span class="lineno"></span><span class="comment" id="4918167">//&nbsp;Callers&nbsp;that&nbsp;create&nbsp;an&nbsp;Encoder&nbsp;and&nbsp;then&nbsp;invoke&nbsp;EncodeToken&nbsp;directly,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="4918247">//&nbsp;using&nbsp;Encode&nbsp;or&nbsp;EncodeElement,&nbsp;need&nbsp;to&nbsp;call&nbsp;Flush&nbsp;when&nbsp;finished&nbsp;to&nbsp;ensure</span><br>
<span class="lineno"></span><span class="comment" id="4918324">//&nbsp;that&nbsp;the&nbsp;XML&nbsp;is&nbsp;written&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">190</span><span class="comment" id="4918377">//</span><br>
<span class="lineno"></span><span class="comment" id="4918380">//&nbsp;EncodeToken&nbsp;allows&nbsp;writing&nbsp;a&nbsp;ProcInst&nbsp;with&nbsp;Target&nbsp;set&nbsp;to&nbsp;&#34;xml&#34;&nbsp;only&nbsp;as&nbsp;the&nbsp;first&nbsp;token</span><br>
<span class="lineno"></span><span class="comment" id="4918470">//&nbsp;in&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="4918488">func</span>&nbsp;<span class="op" id="4918493">(</span><span class="ident" id="4918494">enc</span>&nbsp;<span class="op" id="4918498">*</span><span class="ident" id="4918499"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4918506">)</span>&nbsp;<span class="ident" id="4918508">EncodeToken</span><span class="op" id="4918519">(</span><span class="ident" id="4918520">t</span>&nbsp;<span class="ident" id="4918522"><a href="/encoding/xml/xml.go.html#4969150">Token</a></span><span class="op" id="4918527">)</span>&nbsp;<span class="builtintype" id="4918529">error</span>&nbsp;<span class="op" id="4918535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4918538">p</span>&nbsp;<span class="op" id="4918540">:=</span>&nbsp;<span class="op" id="4918543">&amp;</span><span class="ident" id="4918544"><a href="/encoding/xml/marshal.go.html#4918494">enc</a></span><span class="op" id="4918547">.</span><span class="ident" id="4918548">p</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918551">switch</span>&nbsp;<span class="ident" id="4918558">t</span>&nbsp;<span class="op" id="4918560">:=</span>&nbsp;<span class="ident" id="4918563"><a href="/encoding/xml/marshal.go.html#4918520">t</a></span><span class="op" id="4918564">.</span><span class="op" id="4918565">(</span><span class="keyword" id="4918566">type</span><span class="op" id="4918570">)</span>&nbsp;<span class="op" id="4918572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918575">case</span>&nbsp;<span class="ident" id="4918580"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4918592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918596">if</span>&nbsp;<span class="ident" id="4918599">err</span>&nbsp;<span class="op" id="4918603">:=</span>&nbsp;<span class="ident" id="4918606"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918607">.</span><span class="ident" id="4918608">writeStart</span><span class="op" id="4918618">(</span><span class="op" id="4918619">&amp;</span><span class="ident" id="4918620"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4918621">)</span><span class="op" id="4918622">;</span>&nbsp;<span class="ident" id="4918624"><a href="/encoding/xml/marshal.go.html#4918599">err</a></span>&nbsp;<span class="op" id="4918628">!=</span>&nbsp;<span class="ident" id="4918631">nil</span>&nbsp;<span class="op" id="4918635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918640">return</span>&nbsp;<span class="ident" id="4918647"><a href="/encoding/xml/marshal.go.html#4918599">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4918653">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918656">case</span>&nbsp;<span class="ident" id="4918661"><a href="/encoding/xml/xml.go.html#4969578">EndElement</a></span><span class="op" id="4918671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918675">if</span>&nbsp;<span class="ident" id="4918678">err</span>&nbsp;<span class="op" id="4918682">:=</span>&nbsp;<span class="ident" id="4918685"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918686">.</span><span class="ident" id="4918687">writeEnd</span><span class="op" id="4918695">(</span><span class="ident" id="4918696"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4918697">.</span><span class="ident" id="4918698">Name</span><span class="op" id="4918702">)</span><span class="op" id="4918703">;</span>&nbsp;<span class="ident" id="4918705"><a href="/encoding/xml/marshal.go.html#4918678">err</a></span>&nbsp;<span class="op" id="4918709">!=</span>&nbsp;<span class="ident" id="4918712">nil</span>&nbsp;<span class="op" id="4918716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918721">return</span>&nbsp;<span class="ident" id="4918728"><a href="/encoding/xml/marshal.go.html#4918678">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4918734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918737">case</span>&nbsp;<span class="ident" id="4918742"><a href="/encoding/xml/xml.go.html#4969762">CharData</a></span><span class="op" id="4918750">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4918754"><a href="/encoding/xml/xml.go.html#5010088">EscapeText</a></span><span class="op" id="4918764">(</span><span class="ident" id="4918765"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918766">,</span>&nbsp;<span class="ident" id="4918768"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4918769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918772">case</span>&nbsp;<span class="ident" id="4918777"><a href="/encoding/xml/xml.go.html#4970069">Comment</a></span><span class="op" id="4918784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918788">if</span>&nbsp;<span class="ident" id="4918791"><a href="/encoding/xml/marshal.go.html#4911550">bytes</a></span><span class="op" id="4918796">.</span><span class="ident" id="4918797">Contains</span><span class="op" id="4918805">(</span><span class="ident" id="4918806"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4918807">,</span>&nbsp;<span class="ident" id="4918809"><a href="/encoding/xml/marshal.go.html#4917708">endComment</a></span><span class="op" id="4918819">)</span>&nbsp;<span class="op" id="4918821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918826">return</span>&nbsp;<span class="ident" id="4918833"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4918836">.</span><span class="ident" id="4918837">Errorf</span><span class="op" id="4918843">(</span><span class="string" id="4918844">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;Comment&nbsp;containing&nbsp;--&gt;&nbsp;marker&#34;</span><span class="op" id="4918895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4918899">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4918903"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918904">.</span><span class="ident" id="4918905">WriteString</span><span class="op" id="4918916">(</span><span class="string" id="4918917">&#34;&lt;!--&#34;</span><span class="op" id="4918923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4918927"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918928">.</span><span class="ident" id="4918929">Write</span><span class="op" id="4918934">(</span><span class="ident" id="4918935"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4918936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4918940"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918941">.</span><span class="ident" id="4918942">WriteString</span><span class="op" id="4918953">(</span><span class="string" id="4918954">&#34;--&gt;&#34;</span><span class="op" id="4918959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918963">return</span>&nbsp;<span class="ident" id="4918970"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4918971">.</span><span class="ident" id="4918972">cachedWriteError</span><span class="op" id="4918988">(</span><span class="op" id="4918989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4918992">case</span>&nbsp;<span class="ident" id="4918997"><a href="/encoding/xml/xml.go.html#4970238">ProcInst</a></span><span class="op" id="4919005">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4919009">//&nbsp;First&nbsp;token&nbsp;to&nbsp;be&nbsp;encoded&nbsp;which&nbsp;is&nbsp;also&nbsp;a&nbsp;ProcInst&nbsp;with&nbsp;target&nbsp;of&nbsp;xml</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4919084">//&nbsp;is&nbsp;the&nbsp;xml&nbsp;declaration.&nbsp;&nbsp;The&nbsp;only&nbsp;ProcInst&nbsp;where&nbsp;target&nbsp;of&nbsp;xml&nbsp;is&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919164">if</span>&nbsp;<span class="ident" id="4919167"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919168">.</span><span class="ident" id="4919169">Target</span>&nbsp;<span class="op" id="4919176">==</span>&nbsp;<span class="string" id="4919179">&#34;xml&#34;</span>&nbsp;<span class="op" id="4919185">&amp;&amp;</span>&nbsp;<span class="ident" id="4919188"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919189">.</span><span class="ident" id="4919190">Buffered</span><span class="op" id="4919198">(</span><span class="op" id="4919199">)</span>&nbsp;<span class="op" id="4919201">!=</span>&nbsp;<span class="num" id="4919204">0</span>&nbsp;<span class="op" id="4919206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919211">return</span>&nbsp;<span class="ident" id="4919218"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4919221">.</span><span class="ident" id="4919222">Errorf</span><span class="op" id="4919228">(</span><span class="string" id="4919229">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;xml&nbsp;target&nbsp;only&nbsp;valid&nbsp;for&nbsp;xml&nbsp;declaration,&nbsp;first&nbsp;token&nbsp;encoded&#34;</span><span class="op" id="4919322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4919326">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919330">if</span>&nbsp;<span class="op" id="4919333">!</span><span class="ident" id="4919334"><a href="/encoding/xml/xml.go.html#4995232">isNameString</a></span><span class="op" id="4919346">(</span><span class="ident" id="4919347"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919348">.</span><span class="ident" id="4919349">Target</span><span class="op" id="4919355">)</span>&nbsp;<span class="op" id="4919357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919362">return</span>&nbsp;<span class="ident" id="4919369"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4919372">.</span><span class="ident" id="4919373">Errorf</span><span class="op" id="4919379">(</span><span class="string" id="4919380">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;with&nbsp;invalid&nbsp;Target&#34;</span><span class="op" id="4919430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4919434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919438">if</span>&nbsp;<span class="ident" id="4919441"><a href="/encoding/xml/marshal.go.html#4911550">bytes</a></span><span class="op" id="4919446">.</span><span class="ident" id="4919447">Contains</span><span class="op" id="4919455">(</span><span class="ident" id="4919456"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919457">.</span><span class="ident" id="4919458">Inst</span><span class="op" id="4919462">,</span>&nbsp;<span class="ident" id="4919464"><a href="/encoding/xml/marshal.go.html#4917738">endProcInst</a></span><span class="op" id="4919475">)</span>&nbsp;<span class="op" id="4919477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919482">return</span>&nbsp;<span class="ident" id="4919489"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4919492">.</span><span class="ident" id="4919493">Errorf</span><span class="op" id="4919499">(</span><span class="string" id="4919500">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;containing&nbsp;?&gt;&nbsp;marker&#34;</span><span class="op" id="4919551">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4919555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919559"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919560">.</span><span class="ident" id="4919561">WriteString</span><span class="op" id="4919572">(</span><span class="string" id="4919573">&#34;&lt;?&#34;</span><span class="op" id="4919577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919581"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919582">.</span><span class="ident" id="4919583">WriteString</span><span class="op" id="4919594">(</span><span class="ident" id="4919595"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919596">.</span><span class="ident" id="4919597">Target</span><span class="op" id="4919603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919607">if</span>&nbsp;<span class="builtinfunc" id="4919610">len</span><span class="op" id="4919613">(</span><span class="ident" id="4919614"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919615">.</span><span class="ident" id="4919616">Inst</span><span class="op" id="4919620">)</span>&nbsp;<span class="op" id="4919622">&gt;</span>&nbsp;<span class="num" id="4919624">0</span>&nbsp;<span class="op" id="4919626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919631"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919632">.</span><span class="ident" id="4919633">WriteByte</span><span class="op" id="4919642">(</span><span class="string" id="4919643">&#39;&nbsp;&#39;</span><span class="op" id="4919646">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919651"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919652">.</span><span class="ident" id="4919653">Write</span><span class="op" id="4919658">(</span><span class="ident" id="4919659"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919660">.</span><span class="ident" id="4919661">Inst</span><span class="op" id="4919665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4919669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919673"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919674">.</span><span class="ident" id="4919675">WriteString</span><span class="op" id="4919686">(</span><span class="string" id="4919687">&#34;?&gt;&#34;</span><span class="op" id="4919691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919694">case</span>&nbsp;<span class="ident" id="4919699"><a href="/encoding/xml/xml.go.html#4970484">Directive</a></span><span class="op" id="4919708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919712">if</span>&nbsp;<span class="ident" id="4919715"><a href="/encoding/xml/marshal.go.html#4911550">bytes</a></span><span class="op" id="4919720">.</span><span class="ident" id="4919721">Contains</span><span class="op" id="4919729">(</span><span class="ident" id="4919730"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919731">,</span>&nbsp;<span class="ident" id="4919733"><a href="/encoding/xml/marshal.go.html#4917767">endDirective</a></span><span class="op" id="4919745">)</span>&nbsp;<span class="op" id="4919747">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919752">return</span>&nbsp;<span class="ident" id="4919759"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4919762">.</span><span class="ident" id="4919763">Errorf</span><span class="op" id="4919769">(</span><span class="string" id="4919770">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;Directive&nbsp;containing&nbsp;&gt;&nbsp;marker&#34;</span><span class="op" id="4919821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4919825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919829"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919830">.</span><span class="ident" id="4919831">WriteString</span><span class="op" id="4919842">(</span><span class="string" id="4919843">&#34;&lt;!&#34;</span><span class="op" id="4919847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919851"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919852">.</span><span class="ident" id="4919853">Write</span><span class="op" id="4919858">(</span><span class="ident" id="4919859"><a href="/encoding/xml/marshal.go.html#4918558">t</a></span><span class="op" id="4919860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4919864"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919865">.</span><span class="ident" id="4919866">WriteString</span><span class="op" id="4919877">(</span><span class="string" id="4919878">&#34;&gt;&#34;</span><span class="op" id="4919881">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4919884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4919887">return</span>&nbsp;<span class="ident" id="4919894"><a href="/encoding/xml/marshal.go.html#4918538">p</a></span><span class="op" id="4919895">.</span><span class="ident" id="4919896">cachedWriteError</span><span class="op" id="4919912">(</span><span class="op" id="4919913">)</span><br>
<span class="lineno"></span><span class="op" id="4919915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4919918">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;buffered&nbsp;XML&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">245</span><span class="comment" id="4919978">//&nbsp;See&nbsp;the&nbsp;EncodeToken&nbsp;documentation&nbsp;for&nbsp;details&nbsp;about&nbsp;when&nbsp;it&nbsp;is&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="4920055">func</span>&nbsp;<span class="op" id="4920060">(</span><span class="ident" id="4920061">enc</span>&nbsp;<span class="op" id="4920065">*</span><span class="ident" id="4920066"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><span class="op" id="4920073">)</span>&nbsp;<span class="ident" id="4920075">Flush</span><span class="op" id="4920080">(</span><span class="op" id="4920081">)</span>&nbsp;<span class="builtintype" id="4920083">error</span>&nbsp;<span class="op" id="4920089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4920092">return</span>&nbsp;<span class="ident" id="4920099"><a href="/encoding/xml/marshal.go.html#4920061">enc</a></span><span class="op" id="4920102">.</span><span class="ident" id="4920103">p</span><span class="op" id="4920104">.</span><span class="ident" id="4920105">Flush</span><span class="op" id="4920110">(</span><span class="op" id="4920111">)</span><br>
<span class="lineno"></span><span class="op" id="4920113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="4920116">type</span>&nbsp;<span class="ident" id="4920121">printer</span>&nbsp;<span class="keyword" id="4920129">struct</span>&nbsp;<span class="op" id="4920136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4920139">*</span><span class="ident" id="4920140"><a href="/encoding/xml/marshal.go.html#4911541">bufio</a></span><span class="op" id="4920145">.</span><span class="ident" id="4920146">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920154">encoder</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4920165">*</span><span class="ident" id="4920166"><a href="/encoding/xml/marshal.go.html#4916373">Encoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920175">seq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920186">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920191">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920202">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920210">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920221">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920229">depth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4920240">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920245">indentedIn</span>&nbsp;<span class="builtintype" id="4920256">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920262">putNewline</span>&nbsp;<span class="builtintype" id="4920273">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920279">attrNS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4920290">map</span><span class="op" id="4920293">[</span><span class="builtintype" id="4920294">string</span><span class="op" id="4920300">]</span><span class="builtintype" id="4920301">string</span>&nbsp;<span class="comment" id="4920308">//&nbsp;map&nbsp;prefix&nbsp;-&gt;&nbsp;name&nbsp;space</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920337">attrPrefix</span>&nbsp;<span class="keyword" id="4920348">map</span><span class="op" id="4920351">[</span><span class="builtintype" id="4920352">string</span><span class="op" id="4920358">]</span><span class="builtintype" id="4920359">string</span>&nbsp;<span class="comment" id="4920366">//&nbsp;map&nbsp;name&nbsp;space&nbsp;-&gt;&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920395">prefixes</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4920406">[</span><span class="op" id="4920407">]</span><span class="builtintype" id="4920408">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4920416">tags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4920427">[</span><span class="op" id="4920428">]</span><span class="ident" id="4920429"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><br>
<span class="lineno"></span><span class="op" id="4920434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="4920437">//&nbsp;createAttrPrefix&nbsp;finds&nbsp;the&nbsp;name&nbsp;space&nbsp;prefix&nbsp;attribute&nbsp;to&nbsp;use&nbsp;for&nbsp;the&nbsp;given&nbsp;name&nbsp;space,</span><br>
<span class="lineno"></span><span class="comment" id="4920528">//&nbsp;defining&nbsp;a&nbsp;new&nbsp;prefix&nbsp;if&nbsp;necessary.&nbsp;It&nbsp;returns&nbsp;the&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="4920590">func</span>&nbsp;<span class="op" id="4920595">(</span><span class="ident" id="4920596">p</span>&nbsp;<span class="op" id="4920598">*</span><span class="ident" id="4920599"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4920606">)</span>&nbsp;<span class="ident" id="4920608">createAttrPrefix</span><span class="op" id="4920624">(</span><span class="ident" id="4920625">url</span>&nbsp;<span class="builtintype" id="4920629">string</span><span class="op" id="4920635">)</span>&nbsp;<span class="builtintype" id="4920637">string</span>&nbsp;<span class="op" id="4920644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4920647">if</span>&nbsp;<span class="ident" id="4920650">prefix</span>&nbsp;<span class="op" id="4920657">:=</span>&nbsp;<span class="ident" id="4920660"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4920661">.</span><span class="ident" id="4920662">attrPrefix</span><span class="op" id="4920672">[</span><span class="ident" id="4920673"><a href="/encoding/xml/marshal.go.html#4920625">url</a></span><span class="op" id="4920676">]</span><span class="op" id="4920677">;</span>&nbsp;<span class="ident" id="4920679"><a href="/encoding/xml/marshal.go.html#4920650">prefix</a></span>&nbsp;<span class="op" id="4920686">!=</span>&nbsp;<span class="string" id="4920689">&#34;&#34;</span>&nbsp;<span class="op" id="4920692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4920696">return</span>&nbsp;<span class="ident" id="4920703"><a href="/encoding/xml/marshal.go.html#4920650">prefix</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4920711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4920715">//&nbsp;The&nbsp;&#34;http://www.w3.org/XML/1998/namespace&#34;&nbsp;name&nbsp;space&nbsp;is&nbsp;predefined&nbsp;as&nbsp;&#34;xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4920796">//&nbsp;and&nbsp;must&nbsp;be&nbsp;referred&nbsp;to&nbsp;that&nbsp;way.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4920834">//&nbsp;(The&nbsp;&#34;http://www.w3.org/2000/xmlns/&#34;&nbsp;name&nbsp;space&nbsp;is&nbsp;also&nbsp;predefined&nbsp;as&nbsp;&#34;xmlns&#34;,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4920917">//&nbsp;but&nbsp;users&nbsp;should&nbsp;not&nbsp;be&nbsp;trying&nbsp;to&nbsp;use&nbsp;that&nbsp;one&nbsp;directly&nbsp;-&nbsp;that&#39;s&nbsp;our&nbsp;job.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4920996">if</span>&nbsp;<span class="ident" id="4920999"><a href="/encoding/xml/marshal.go.html#4920625">url</a></span>&nbsp;<span class="op" id="4921003">==</span>&nbsp;<span class="ident" id="4921006"><a href="/encoding/xml/xml.go.html#4975767">xmlURL</a></span>&nbsp;<span class="op" id="4921013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921017">return</span>&nbsp;<span class="string" id="4921024">&#34;xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4921035">//&nbsp;Need&nbsp;to&nbsp;define&nbsp;a&nbsp;new&nbsp;name&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921072">if</span>&nbsp;<span class="ident" id="4921075"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921076">.</span><span class="ident" id="4921077">attrPrefix</span>&nbsp;<span class="op" id="4921088">==</span>&nbsp;<span class="ident" id="4921091">nil</span>&nbsp;<span class="op" id="4921095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921099"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921100">.</span><span class="ident" id="4921101">attrPrefix</span>&nbsp;<span class="op" id="4921112">=</span>&nbsp;<span class="builtinfunc" id="4921114">make</span><span class="op" id="4921118">(</span><span class="keyword" id="4921119">map</span><span class="op" id="4921122">[</span><span class="builtintype" id="4921123">string</span><span class="op" id="4921129">]</span><span class="builtintype" id="4921130">string</span><span class="op" id="4921136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921140"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921141">.</span><span class="ident" id="4921142">attrNS</span>&nbsp;<span class="op" id="4921149">=</span>&nbsp;<span class="builtinfunc" id="4921151">make</span><span class="op" id="4921155">(</span><span class="keyword" id="4921156">map</span><span class="op" id="4921159">[</span><span class="builtintype" id="4921160">string</span><span class="op" id="4921166">]</span><span class="builtintype" id="4921167">string</span><span class="op" id="4921173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921176">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4921180">//&nbsp;Pick&nbsp;a&nbsp;name.&nbsp;We&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;final&nbsp;element&nbsp;of&nbsp;the&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4921241">//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;_.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921265">prefix</span>&nbsp;<span class="op" id="4921272">:=</span>&nbsp;<span class="ident" id="4921275"><a href="/encoding/xml/marshal.go.html#4911606">strings</a></span><span class="op" id="4921282">.</span><span class="ident" id="4921283">TrimRight</span><span class="op" id="4921292">(</span><span class="ident" id="4921293"><a href="/encoding/xml/marshal.go.html#4920625">url</a></span><span class="op" id="4921296">,</span>&nbsp;<span class="string" id="4921298">&#34;/&#34;</span><span class="op" id="4921301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921304">if</span>&nbsp;<span class="ident" id="4921307">i</span>&nbsp;<span class="op" id="4921309">:=</span>&nbsp;<span class="ident" id="4921312"><a href="/encoding/xml/marshal.go.html#4911606">strings</a></span><span class="op" id="4921319">.</span><span class="ident" id="4921320">LastIndex</span><span class="op" id="4921329">(</span><span class="ident" id="4921330"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921336">,</span>&nbsp;<span class="string" id="4921338">&#34;/&#34;</span><span class="op" id="4921341">)</span><span class="op" id="4921342">;</span>&nbsp;<span class="ident" id="4921344"><a href="/encoding/xml/marshal.go.html#4921307">i</a></span>&nbsp;<span class="op" id="4921346">&gt;=</span>&nbsp;<span class="num" id="4921349">0</span>&nbsp;<span class="op" id="4921351">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921355"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span>&nbsp;<span class="op" id="4921362">=</span>&nbsp;<span class="ident" id="4921364"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921370">[</span><span class="ident" id="4921371"><a href="/encoding/xml/marshal.go.html#4921307">i</a></span><span class="op" id="4921372">+</span><span class="num" id="4921373">1</span><span class="op" id="4921374">:</span><span class="op" id="4921375">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921381">if</span>&nbsp;<span class="ident" id="4921384"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span>&nbsp;<span class="op" id="4921391">==</span>&nbsp;<span class="string" id="4921394">&#34;&#34;</span>&nbsp;<span class="op" id="4921397">||</span>&nbsp;<span class="op" id="4921400">!</span><span class="ident" id="4921401"><a href="/encoding/xml/xml.go.html#4994830">isName</a></span><span class="op" id="4921407">(</span><span class="op" id="4921408">[</span><span class="op" id="4921409">]</span><span class="builtintype" id="4921410">byte</span><span class="op" id="4921414">(</span><span class="ident" id="4921415"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921421">)</span><span class="op" id="4921422">)</span>&nbsp;<span class="op" id="4921424">||</span>&nbsp;<span class="ident" id="4921427"><a href="/encoding/xml/marshal.go.html#4911606">strings</a></span><span class="op" id="4921434">.</span><span class="ident" id="4921435">Contains</span><span class="op" id="4921443">(</span><span class="ident" id="4921444"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921450">,</span>&nbsp;<span class="string" id="4921452">&#34;:&#34;</span><span class="op" id="4921455">)</span>&nbsp;<span class="op" id="4921457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921461"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span>&nbsp;<span class="op" id="4921468">=</span>&nbsp;<span class="string" id="4921470">&#34;_&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921475">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921478">if</span>&nbsp;<span class="ident" id="4921481"><a href="/encoding/xml/marshal.go.html#4911606">strings</a></span><span class="op" id="4921488">.</span><span class="ident" id="4921489">HasPrefix</span><span class="op" id="4921498">(</span><span class="ident" id="4921499"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921505">,</span>&nbsp;<span class="string" id="4921507">&#34;xml&#34;</span><span class="op" id="4921512">)</span>&nbsp;<span class="op" id="4921514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4921518">//&nbsp;xmlanything&nbsp;is&nbsp;reserved.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921548"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span>&nbsp;<span class="op" id="4921555">=</span>&nbsp;<span class="string" id="4921557">&#34;_&#34;</span>&nbsp;<span class="op" id="4921561">+</span>&nbsp;<span class="ident" id="4921563"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921574">if</span>&nbsp;<span class="ident" id="4921577"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921578">.</span><span class="ident" id="4921579">attrNS</span><span class="op" id="4921585">[</span><span class="ident" id="4921586"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921592">]</span>&nbsp;<span class="op" id="4921594">!=</span>&nbsp;<span class="string" id="4921597">&#34;&#34;</span>&nbsp;<span class="op" id="4921600">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4921604">//&nbsp;Name&nbsp;is&nbsp;taken.&nbsp;Find&nbsp;a&nbsp;better&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921643">for</span>&nbsp;<span class="ident" id="4921647"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921648">.</span><span class="ident" id="4921649">seq</span><span class="op" id="4921652">++</span><span class="op" id="4921654">;</span>&nbsp;<span class="op" id="4921656">;</span>&nbsp;<span class="ident" id="4921658"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921659">.</span><span class="ident" id="4921660">seq</span><span class="op" id="4921663">++</span>&nbsp;<span class="op" id="4921666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921671">if</span>&nbsp;<span class="ident" id="4921674">id</span>&nbsp;<span class="op" id="4921677">:=</span>&nbsp;<span class="ident" id="4921680"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span>&nbsp;<span class="op" id="4921687">+</span>&nbsp;<span class="string" id="4921689">&#34;_&#34;</span>&nbsp;<span class="op" id="4921693">+</span>&nbsp;<span class="ident" id="4921695"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4921702">.</span><span class="ident" id="4921703">Itoa</span><span class="op" id="4921707">(</span><span class="ident" id="4921708"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921709">.</span><span class="ident" id="4921710">seq</span><span class="op" id="4921713">)</span><span class="op" id="4921714">;</span>&nbsp;<span class="ident" id="4921716"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921717">.</span><span class="ident" id="4921718">attrNS</span><span class="op" id="4921724">[</span><span class="ident" id="4921725"><a href="/encoding/xml/marshal.go.html#4921674">id</a></span><span class="op" id="4921727">]</span>&nbsp;<span class="op" id="4921729">==</span>&nbsp;<span class="string" id="4921732">&#34;&#34;</span>&nbsp;<span class="op" id="4921735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921741"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span>&nbsp;<span class="op" id="4921748">=</span>&nbsp;<span class="ident" id="4921750"><a href="/encoding/xml/marshal.go.html#4921674">id</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921757">break</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4921773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921777"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921778">.</span><span class="ident" id="4921779">attrPrefix</span><span class="op" id="4921789">[</span><span class="ident" id="4921790"><a href="/encoding/xml/marshal.go.html#4920625">url</a></span><span class="op" id="4921793">]</span>&nbsp;<span class="op" id="4921795">=</span>&nbsp;<span class="ident" id="4921797"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921805"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921806">.</span><span class="ident" id="4921807">attrNS</span><span class="op" id="4921813">[</span><span class="ident" id="4921814"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921820">]</span>&nbsp;<span class="op" id="4921822">=</span>&nbsp;<span class="ident" id="4921824"><a href="/encoding/xml/marshal.go.html#4920625">url</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921830"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921831">.</span><span class="ident" id="4921832">WriteString</span><span class="op" id="4921843">(</span><span class="string" id="4921844">`xmlns:`</span><span class="op" id="4921852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921855"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921856">.</span><span class="ident" id="4921857">WriteString</span><span class="op" id="4921868">(</span><span class="ident" id="4921869"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921878"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921879">.</span><span class="ident" id="4921880">WriteString</span><span class="op" id="4921891">(</span><span class="string" id="4921892">`=&#34;`</span><span class="op" id="4921896">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921899"><a href="/encoding/xml/xml.go.html#5010088">EscapeText</a></span><span class="op" id="4921909">(</span><span class="ident" id="4921910"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921911">,</span>&nbsp;<span class="op" id="4921913">[</span><span class="op" id="4921914">]</span><span class="builtintype" id="4921915">byte</span><span class="op" id="4921919">(</span><span class="ident" id="4921920"><a href="/encoding/xml/marshal.go.html#4920625">url</a></span><span class="op" id="4921923">)</span><span class="op" id="4921924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921927"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921928">.</span><span class="ident" id="4921929">WriteString</span><span class="op" id="4921940">(</span><span class="string" id="4921941">`&#34;&nbsp;`</span><span class="op" id="4921945">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4921949"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921950">.</span><span class="ident" id="4921951">prefixes</span>&nbsp;<span class="op" id="4921960">=</span>&nbsp;<span class="builtinfunc" id="4921962">append</span><span class="op" id="4921968">(</span><span class="ident" id="4921969"><a href="/encoding/xml/marshal.go.html#4920596">p</a></span><span class="op" id="4921970">.</span><span class="ident" id="4921971">prefixes</span><span class="op" id="4921979">,</span>&nbsp;<span class="ident" id="4921981"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><span class="op" id="4921987">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4921991">return</span>&nbsp;<span class="ident" id="4921998"><a href="/encoding/xml/marshal.go.html#4921265">prefix</a></span><br>
<span class="lineno"></span><span class="op" id="4922005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4922008">//&nbsp;deleteAttrPrefix&nbsp;removes&nbsp;an&nbsp;attribute&nbsp;name&nbsp;space&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="4922068">func</span>&nbsp;<span class="op" id="4922073">(</span><span class="ident" id="4922074">p</span>&nbsp;<span class="op" id="4922076">*</span><span class="ident" id="4922077"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4922084">)</span>&nbsp;<span class="ident" id="4922086">deleteAttrPrefix</span><span class="op" id="4922102">(</span><span class="ident" id="4922103">prefix</span>&nbsp;<span class="builtintype" id="4922110">string</span><span class="op" id="4922116">)</span>&nbsp;<span class="op" id="4922118">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4922121">delete</span><span class="op" id="4922127">(</span><span class="ident" id="4922128"><a href="/encoding/xml/marshal.go.html#4922074">p</a></span><span class="op" id="4922129">.</span><span class="ident" id="4922130">attrPrefix</span><span class="op" id="4922140">,</span>&nbsp;<span class="ident" id="4922142"><a href="/encoding/xml/marshal.go.html#4922074">p</a></span><span class="op" id="4922143">.</span><span class="ident" id="4922144">attrNS</span><span class="op" id="4922150">[</span><span class="ident" id="4922151"><a href="/encoding/xml/marshal.go.html#4922103">prefix</a></span><span class="op" id="4922157">]</span><span class="op" id="4922158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4922161">delete</span><span class="op" id="4922167">(</span><span class="ident" id="4922168"><a href="/encoding/xml/marshal.go.html#4922074">p</a></span><span class="op" id="4922169">.</span><span class="ident" id="4922170">attrNS</span><span class="op" id="4922176">,</span>&nbsp;<span class="ident" id="4922178"><a href="/encoding/xml/marshal.go.html#4922103">prefix</a></span><span class="op" id="4922184">)</span><br>
<span class="lineno"></span><span class="op" id="4922186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4922189">func</span>&nbsp;<span class="op" id="4922194">(</span><span class="ident" id="4922195">p</span>&nbsp;<span class="op" id="4922197">*</span><span class="ident" id="4922198"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4922205">)</span>&nbsp;<span class="ident" id="4922207">markPrefix</span><span class="op" id="4922217">(</span><span class="op" id="4922218">)</span>&nbsp;<span class="op" id="4922220">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922223"><a href="/encoding/xml/marshal.go.html#4922195">p</a></span><span class="op" id="4922224">.</span><span class="ident" id="4922225">prefixes</span>&nbsp;<span class="op" id="4922234">=</span>&nbsp;<span class="builtinfunc" id="4922236">append</span><span class="op" id="4922242">(</span><span class="ident" id="4922243"><a href="/encoding/xml/marshal.go.html#4922195">p</a></span><span class="op" id="4922244">.</span><span class="ident" id="4922245">prefixes</span><span class="op" id="4922253">,</span>&nbsp;<span class="string" id="4922255">&#34;&#34;</span><span class="op" id="4922257">)</span><br>
<span class="lineno"></span><span class="op" id="4922259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4922262">func</span>&nbsp;<span class="op" id="4922267">(</span><span class="ident" id="4922268">p</span>&nbsp;<span class="op" id="4922270">*</span><span class="ident" id="4922271"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4922278">)</span>&nbsp;<span class="ident" id="4922280">popPrefix</span><span class="op" id="4922289">(</span><span class="op" id="4922290">)</span>&nbsp;<span class="op" id="4922292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4922295">for</span>&nbsp;<span class="builtinfunc" id="4922299">len</span><span class="op" id="4922302">(</span><span class="ident" id="4922303"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922304">.</span><span class="ident" id="4922305">prefixes</span><span class="op" id="4922313">)</span>&nbsp;<span class="op" id="4922315">&gt;</span>&nbsp;<span class="num" id="4922317">0</span>&nbsp;<span class="op" id="4922319">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922323">prefix</span>&nbsp;<span class="op" id="4922330">:=</span>&nbsp;<span class="ident" id="4922333"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922334">.</span><span class="ident" id="4922335">prefixes</span><span class="op" id="4922343">[</span><span class="builtinfunc" id="4922344">len</span><span class="op" id="4922347">(</span><span class="ident" id="4922348"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922349">.</span><span class="ident" id="4922350">prefixes</span><span class="op" id="4922358">)</span><span class="op" id="4922359">-</span><span class="num" id="4922360">1</span><span class="op" id="4922361">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922365"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922366">.</span><span class="ident" id="4922367">prefixes</span>&nbsp;<span class="op" id="4922376">=</span>&nbsp;<span class="ident" id="4922378"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922379">.</span><span class="ident" id="4922380">prefixes</span><span class="op" id="4922388">[</span><span class="op" id="4922389">:</span><span class="builtinfunc" id="4922390">len</span><span class="op" id="4922393">(</span><span class="ident" id="4922394"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922395">.</span><span class="ident" id="4922396">prefixes</span><span class="op" id="4922404">)</span><span class="op" id="4922405">-</span><span class="num" id="4922406">1</span><span class="op" id="4922407">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4922411">if</span>&nbsp;<span class="ident" id="4922414"><a href="/encoding/xml/marshal.go.html#4922323">prefix</a></span>&nbsp;<span class="op" id="4922421">==</span>&nbsp;<span class="string" id="4922424">&#34;&#34;</span>&nbsp;<span class="op" id="4922427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4922432">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4922440">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922444"><a href="/encoding/xml/marshal.go.html#4922268">p</a></span><span class="op" id="4922445">.</span><span class="ident" id="4922446">deleteAttrPrefix</span><span class="op" id="4922462">(</span><span class="ident" id="4922463"><a href="/encoding/xml/marshal.go.html#4922323">prefix</a></span><span class="op" id="4922469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4922472">}</span><br>
<span class="lineno"></span><span class="op" id="4922474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4922477">var</span>&nbsp;<span class="op" id="4922481">(</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922484">marshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4922502">=</span>&nbsp;<span class="ident" id="4922504"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4922511">.</span><span class="ident" id="4922512">TypeOf</span><span class="op" id="4922518">(</span><span class="op" id="4922519">(</span><span class="op" id="4922520">*</span><span class="ident" id="4922521"><a href="/encoding/xml/marshal.go.html#4915192">Marshaler</a></span><span class="op" id="4922530">)</span><span class="op" id="4922531">(</span><span class="ident" id="4922532">nil</span><span class="op" id="4922535">)</span><span class="op" id="4922536">)</span><span class="op" id="4922537">.</span><span class="ident" id="4922538">Elem</span><span class="op" id="4922542">(</span><span class="op" id="4922543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922546">marshalerAttrType</span>&nbsp;<span class="op" id="4922564">=</span>&nbsp;<span class="ident" id="4922566"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4922573">.</span><span class="ident" id="4922574">TypeOf</span><span class="op" id="4922580">(</span><span class="op" id="4922581">(</span><span class="op" id="4922582">*</span><span class="ident" id="4922583"><a href="/encoding/xml/marshal.go.html#4915817">MarshalerAttr</a></span><span class="op" id="4922596">)</span><span class="op" id="4922597">(</span><span class="ident" id="4922598">nil</span><span class="op" id="4922601">)</span><span class="op" id="4922602">)</span><span class="op" id="4922603">.</span><span class="ident" id="4922604">Elem</span><span class="op" id="4922608">(</span><span class="op" id="4922609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4922612">textMarshalerType</span>&nbsp;<span class="op" id="4922630">=</span>&nbsp;<span class="ident" id="4922632"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4922639">.</span><span class="ident" id="4922640">TypeOf</span><span class="op" id="4922646">(</span><span class="op" id="4922647">(</span><span class="op" id="4922648">*</span><span class="ident" id="4922649"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4922657">.</span><span class="ident" id="4922658">TextMarshaler</span><span class="op" id="4922671">)</span><span class="op" id="4922672">(</span><span class="ident" id="4922673">nil</span><span class="op" id="4922676">)</span><span class="op" id="4922677">)</span><span class="op" id="4922678">.</span><span class="ident" id="4922679">Elem</span><span class="op" id="4922683">(</span><span class="op" id="4922684">)</span><br>
<span class="lineno"></span><span class="op" id="4922686">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="comment" id="4922689">//&nbsp;marshalValue&nbsp;writes&nbsp;one&nbsp;or&nbsp;more&nbsp;XML&nbsp;elements&nbsp;representing&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4922755">//&nbsp;If&nbsp;val&nbsp;was&nbsp;obtained&nbsp;from&nbsp;a&nbsp;struct&nbsp;field,&nbsp;finfo&nbsp;must&nbsp;have&nbsp;its&nbsp;details.</span><br>
<span class="lineno"></span><span class="keyword" id="4922828">func</span>&nbsp;<span class="op" id="4922833">(</span><span class="ident" id="4922834">p</span>&nbsp;<span class="op" id="4922836">*</span><span class="ident" id="4922837"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4922844">)</span>&nbsp;<span class="ident" id="4922846">marshalValue</span><span class="op" id="4922858">(</span><span class="ident" id="4922859">val</span>&nbsp;<span class="ident" id="4922863"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4922870">.</span><span class="ident" id="4922871">Value</span><span class="op" id="4922876">,</span>&nbsp;<span class="ident" id="4922878">finfo</span>&nbsp;<span class="op" id="4922884">*</span><span class="ident" id="4922885"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4922894">,</span>&nbsp;<span class="ident" id="4922896">startTemplate</span>&nbsp;<span class="op" id="4922910">*</span><span class="ident" id="4922911"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4922923">)</span>&nbsp;<span class="builtintype" id="4922925">error</span>&nbsp;<span class="op" id="4922931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4922934">if</span>&nbsp;<span class="ident" id="4922937"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span>&nbsp;<span class="op" id="4922951">!=</span>&nbsp;<span class="ident" id="4922954">nil</span>&nbsp;<span class="op" id="4922958">&amp;&amp;</span>&nbsp;<span class="ident" id="4922961"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4922974">.</span><span class="ident" id="4922975">Name</span><span class="op" id="4922979">.</span><span class="ident" id="4922980">Local</span>&nbsp;<span class="op" id="4922986">==</span>&nbsp;<span class="string" id="4922989">&#34;&#34;</span>&nbsp;<span class="op" id="4922992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4922996">return</span>&nbsp;<span class="ident" id="4923003"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4923006">.</span><span class="ident" id="4923007">Errorf</span><span class="op" id="4923013">(</span><span class="string" id="4923014">&#34;xml:&nbsp;EncodeElement&nbsp;of&nbsp;StartElement&nbsp;with&nbsp;missing&nbsp;name&#34;</span><span class="op" id="4923068">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923075">if</span>&nbsp;<span class="op" id="4923078">!</span><span class="ident" id="4923079"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923082">.</span><span class="ident" id="4923083">IsValid</span><span class="op" id="4923090">(</span><span class="op" id="4923091">)</span>&nbsp;<span class="op" id="4923093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923097">return</span>&nbsp;<span class="ident" id="4923104">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923109">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923112">if</span>&nbsp;<span class="ident" id="4923115"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span>&nbsp;<span class="op" id="4923121">!=</span>&nbsp;<span class="ident" id="4923124">nil</span>&nbsp;<span class="op" id="4923128">&amp;&amp;</span>&nbsp;<span class="ident" id="4923131"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4923136">.</span><span class="ident" id="4923137">flags</span><span class="op" id="4923142">&amp;</span><span class="ident" id="4923143"><a href="/encoding/xml/typeinfo.go.html#4959010">fOmitEmpty</a></span>&nbsp;<span class="op" id="4923154">!=</span>&nbsp;<span class="num" id="4923157">0</span>&nbsp;<span class="op" id="4923159">&amp;&amp;</span>&nbsp;<span class="ident" id="4923162"><a href="/encoding/xml/marshal.go.html#4937538">isEmptyValue</a></span><span class="op" id="4923174">(</span><span class="ident" id="4923175"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923178">)</span>&nbsp;<span class="op" id="4923180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923184">return</span>&nbsp;<span class="ident" id="4923191">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4923200">//&nbsp;Drill&nbsp;into&nbsp;interfaces&nbsp;and&nbsp;pointers.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4923240">//&nbsp;This&nbsp;can&nbsp;turn&nbsp;into&nbsp;an&nbsp;infinite&nbsp;loop&nbsp;given&nbsp;a&nbsp;cyclic&nbsp;chain,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4923302">//&nbsp;but&nbsp;it&nbsp;matches&nbsp;the&nbsp;Go&nbsp;1&nbsp;behavior.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923340">for</span>&nbsp;<span class="ident" id="4923344"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923347">.</span><span class="ident" id="4923348">Kind</span><span class="op" id="4923352">(</span><span class="op" id="4923353">)</span>&nbsp;<span class="op" id="4923355">==</span>&nbsp;<span class="ident" id="4923358"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4923365">.</span><span class="ident" id="4923366">Interface</span>&nbsp;<span class="op" id="4923376">||</span>&nbsp;<span class="ident" id="4923379"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923382">.</span><span class="ident" id="4923383">Kind</span><span class="op" id="4923387">(</span><span class="op" id="4923388">)</span>&nbsp;<span class="op" id="4923390">==</span>&nbsp;<span class="ident" id="4923393"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4923400">.</span><span class="ident" id="4923401">Ptr</span>&nbsp;<span class="op" id="4923405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923409">if</span>&nbsp;<span class="ident" id="4923412"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923415">.</span><span class="ident" id="4923416">IsNil</span><span class="op" id="4923421">(</span><span class="op" id="4923422">)</span>&nbsp;<span class="op" id="4923424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923429">return</span>&nbsp;<span class="ident" id="4923436">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4923446"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span>&nbsp;<span class="op" id="4923450">=</span>&nbsp;<span class="ident" id="4923452"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923455">.</span><span class="ident" id="4923456">Elem</span><span class="op" id="4923460">(</span><span class="op" id="4923461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4923468">kind</span>&nbsp;<span class="op" id="4923473">:=</span>&nbsp;<span class="ident" id="4923476"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923479">.</span><span class="ident" id="4923480">Kind</span><span class="op" id="4923484">(</span><span class="op" id="4923485">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4923488">typ</span>&nbsp;<span class="op" id="4923492">:=</span>&nbsp;<span class="ident" id="4923495"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923498">.</span><span class="ident" id="4923499">Type</span><span class="op" id="4923503">(</span><span class="op" id="4923504">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4923508">//&nbsp;Check&nbsp;for&nbsp;marshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923533">if</span>&nbsp;<span class="ident" id="4923536"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923539">.</span><span class="ident" id="4923540">CanInterface</span><span class="op" id="4923552">(</span><span class="op" id="4923553">)</span>&nbsp;<span class="op" id="4923555">&amp;&amp;</span>&nbsp;<span class="ident" id="4923558"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4923561">.</span><span class="ident" id="4923562">Implements</span><span class="op" id="4923572">(</span><span class="ident" id="4923573"><a href="/encoding/xml/marshal.go.html#4922484">marshalerType</a></span><span class="op" id="4923586">)</span>&nbsp;<span class="op" id="4923588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923592">return</span>&nbsp;<span class="ident" id="4923599"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4923600">.</span><span class="ident" id="4923601">marshalInterface</span><span class="op" id="4923617">(</span><span class="ident" id="4923618"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923621">.</span><span class="ident" id="4923622">Interface</span><span class="op" id="4923631">(</span><span class="op" id="4923632">)</span><span class="op" id="4923633">.</span><span class="op" id="4923634">(</span><span class="ident" id="4923635"><a href="/encoding/xml/marshal.go.html#4915192">Marshaler</a></span><span class="op" id="4923644">)</span><span class="op" id="4923645">,</span>&nbsp;<span class="ident" id="4923647"><a href="/encoding/xml/marshal.go.html#4928003">defaultStart</a></span><span class="op" id="4923659">(</span><span class="ident" id="4923660"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4923663">,</span>&nbsp;<span class="ident" id="4923665"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4923670">,</span>&nbsp;<span class="ident" id="4923672"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4923685">)</span><span class="op" id="4923686">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923692">if</span>&nbsp;<span class="ident" id="4923695"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923698">.</span><span class="ident" id="4923699">CanAddr</span><span class="op" id="4923706">(</span><span class="op" id="4923707">)</span>&nbsp;<span class="op" id="4923709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4923713">pv</span>&nbsp;<span class="op" id="4923716">:=</span>&nbsp;<span class="ident" id="4923719"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923722">.</span><span class="ident" id="4923723">Addr</span><span class="op" id="4923727">(</span><span class="op" id="4923728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923732">if</span>&nbsp;<span class="ident" id="4923735"><a href="/encoding/xml/marshal.go.html#4923713">pv</a></span><span class="op" id="4923737">.</span><span class="ident" id="4923738">CanInterface</span><span class="op" id="4923750">(</span><span class="op" id="4923751">)</span>&nbsp;<span class="op" id="4923753">&amp;&amp;</span>&nbsp;<span class="ident" id="4923756"><a href="/encoding/xml/marshal.go.html#4923713">pv</a></span><span class="op" id="4923758">.</span><span class="ident" id="4923759">Type</span><span class="op" id="4923763">(</span><span class="op" id="4923764">)</span><span class="op" id="4923765">.</span><span class="ident" id="4923766">Implements</span><span class="op" id="4923776">(</span><span class="ident" id="4923777"><a href="/encoding/xml/marshal.go.html#4922484">marshalerType</a></span><span class="op" id="4923790">)</span>&nbsp;<span class="op" id="4923792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923797">return</span>&nbsp;<span class="ident" id="4923804"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4923805">.</span><span class="ident" id="4923806">marshalInterface</span><span class="op" id="4923822">(</span><span class="ident" id="4923823"><a href="/encoding/xml/marshal.go.html#4923713">pv</a></span><span class="op" id="4923825">.</span><span class="ident" id="4923826">Interface</span><span class="op" id="4923835">(</span><span class="op" id="4923836">)</span><span class="op" id="4923837">.</span><span class="op" id="4923838">(</span><span class="ident" id="4923839"><a href="/encoding/xml/marshal.go.html#4915192">Marshaler</a></span><span class="op" id="4923848">)</span><span class="op" id="4923849">,</span>&nbsp;<span class="ident" id="4923851"><a href="/encoding/xml/marshal.go.html#4928003">defaultStart</a></span><span class="op" id="4923863">(</span><span class="ident" id="4923864"><a href="/encoding/xml/marshal.go.html#4923713">pv</a></span><span class="op" id="4923866">.</span><span class="ident" id="4923867">Type</span><span class="op" id="4923871">(</span><span class="op" id="4923872">)</span><span class="op" id="4923873">,</span>&nbsp;<span class="ident" id="4923875"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4923880">,</span>&nbsp;<span class="ident" id="4923882"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4923895">)</span><span class="op" id="4923896">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4923903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4923907">//&nbsp;Check&nbsp;for&nbsp;text&nbsp;marshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4923937">if</span>&nbsp;<span class="ident" id="4923940"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4923943">.</span><span class="ident" id="4923944">CanInterface</span><span class="op" id="4923956">(</span><span class="op" id="4923957">)</span>&nbsp;<span class="op" id="4923959">&amp;&amp;</span>&nbsp;<span class="ident" id="4923962"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4923965">.</span><span class="ident" id="4923966">Implements</span><span class="op" id="4923976">(</span><span class="ident" id="4923977"><a href="/encoding/xml/marshal.go.html#4922612">textMarshalerType</a></span><span class="op" id="4923994">)</span>&nbsp;<span class="op" id="4923996">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924000">return</span>&nbsp;<span class="ident" id="4924007"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4924008">.</span><span class="ident" id="4924009">marshalTextInterface</span><span class="op" id="4924029">(</span><span class="ident" id="4924030"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4924033">.</span><span class="ident" id="4924034">Interface</span><span class="op" id="4924043">(</span><span class="op" id="4924044">)</span><span class="op" id="4924045">.</span><span class="op" id="4924046">(</span><span class="ident" id="4924047"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4924055">.</span><span class="ident" id="4924056">TextMarshaler</span><span class="op" id="4924069">)</span><span class="op" id="4924070">,</span>&nbsp;<span class="ident" id="4924072"><a href="/encoding/xml/marshal.go.html#4928003">defaultStart</a></span><span class="op" id="4924084">(</span><span class="ident" id="4924085"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4924088">,</span>&nbsp;<span class="ident" id="4924090"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4924095">,</span>&nbsp;<span class="ident" id="4924097"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4924110">)</span><span class="op" id="4924111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924117">if</span>&nbsp;<span class="ident" id="4924120"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4924123">.</span><span class="ident" id="4924124">CanAddr</span><span class="op" id="4924131">(</span><span class="op" id="4924132">)</span>&nbsp;<span class="op" id="4924134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4924138">pv</span>&nbsp;<span class="op" id="4924141">:=</span>&nbsp;<span class="ident" id="4924144"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4924147">.</span><span class="ident" id="4924148">Addr</span><span class="op" id="4924152">(</span><span class="op" id="4924153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924157">if</span>&nbsp;<span class="ident" id="4924160"><a href="/encoding/xml/marshal.go.html#4924138">pv</a></span><span class="op" id="4924162">.</span><span class="ident" id="4924163">CanInterface</span><span class="op" id="4924175">(</span><span class="op" id="4924176">)</span>&nbsp;<span class="op" id="4924178">&amp;&amp;</span>&nbsp;<span class="ident" id="4924181"><a href="/encoding/xml/marshal.go.html#4924138">pv</a></span><span class="op" id="4924183">.</span><span class="ident" id="4924184">Type</span><span class="op" id="4924188">(</span><span class="op" id="4924189">)</span><span class="op" id="4924190">.</span><span class="ident" id="4924191">Implements</span><span class="op" id="4924201">(</span><span class="ident" id="4924202"><a href="/encoding/xml/marshal.go.html#4922612">textMarshalerType</a></span><span class="op" id="4924219">)</span>&nbsp;<span class="op" id="4924221">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924226">return</span>&nbsp;<span class="ident" id="4924233"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4924234">.</span><span class="ident" id="4924235">marshalTextInterface</span><span class="op" id="4924255">(</span><span class="ident" id="4924256"><a href="/encoding/xml/marshal.go.html#4924138">pv</a></span><span class="op" id="4924258">.</span><span class="ident" id="4924259">Interface</span><span class="op" id="4924268">(</span><span class="op" id="4924269">)</span><span class="op" id="4924270">.</span><span class="op" id="4924271">(</span><span class="ident" id="4924272"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4924280">.</span><span class="ident" id="4924281">TextMarshaler</span><span class="op" id="4924294">)</span><span class="op" id="4924295">,</span>&nbsp;<span class="ident" id="4924297"><a href="/encoding/xml/marshal.go.html#4928003">defaultStart</a></span><span class="op" id="4924309">(</span><span class="ident" id="4924310"><a href="/encoding/xml/marshal.go.html#4924138">pv</a></span><span class="op" id="4924312">.</span><span class="ident" id="4924313">Type</span><span class="op" id="4924317">(</span><span class="op" id="4924318">)</span><span class="op" id="4924319">,</span>&nbsp;<span class="ident" id="4924321"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4924326">,</span>&nbsp;<span class="ident" id="4924328"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4924341">)</span><span class="op" id="4924342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924353">//&nbsp;Slices&nbsp;and&nbsp;arrays&nbsp;iterate&nbsp;over&nbsp;the&nbsp;elements.&nbsp;They&nbsp;do&nbsp;not&nbsp;have&nbsp;an&nbsp;enclosing&nbsp;tag.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924437">if</span>&nbsp;<span class="op" id="4924440">(</span><span class="ident" id="4924441"><a href="/encoding/xml/marshal.go.html#4923468">kind</a></span>&nbsp;<span class="op" id="4924446">==</span>&nbsp;<span class="ident" id="4924449"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4924456">.</span><span class="ident" id="4924457">Slice</span>&nbsp;<span class="op" id="4924463">||</span>&nbsp;<span class="ident" id="4924466"><a href="/encoding/xml/marshal.go.html#4923468">kind</a></span>&nbsp;<span class="op" id="4924471">==</span>&nbsp;<span class="ident" id="4924474"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4924481">.</span><span class="ident" id="4924482">Array</span><span class="op" id="4924487">)</span>&nbsp;<span class="op" id="4924489">&amp;&amp;</span>&nbsp;<span class="ident" id="4924492"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4924495">.</span><span class="ident" id="4924496">Elem</span><span class="op" id="4924500">(</span><span class="op" id="4924501">)</span><span class="op" id="4924502">.</span><span class="ident" id="4924503">Kind</span><span class="op" id="4924507">(</span><span class="op" id="4924508">)</span>&nbsp;<span class="op" id="4924510">!=</span>&nbsp;<span class="ident" id="4924513"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4924520">.</span><span class="ident" id="4924521">Uint8</span>&nbsp;<span class="op" id="4924527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924531">for</span>&nbsp;<span class="ident" id="4924535">i</span><span class="op" id="4924536">,</span>&nbsp;<span class="ident" id="4924538">n</span>&nbsp;<span class="op" id="4924540">:=</span>&nbsp;<span class="num" id="4924543">0</span><span class="op" id="4924544">,</span>&nbsp;<span class="ident" id="4924546"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4924549">.</span><span class="ident" id="4924550">Len</span><span class="op" id="4924553">(</span><span class="op" id="4924554">)</span><span class="op" id="4924555">;</span>&nbsp;<span class="ident" id="4924557"><a href="/encoding/xml/marshal.go.html#4924535">i</a></span>&nbsp;<span class="op" id="4924559">&lt;</span>&nbsp;<span class="ident" id="4924561"><a href="/encoding/xml/marshal.go.html#4924538">n</a></span><span class="op" id="4924562">;</span>&nbsp;<span class="ident" id="4924564"><a href="/encoding/xml/marshal.go.html#4924535">i</a></span><span class="op" id="4924565">++</span>&nbsp;<span class="op" id="4924568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924573">if</span>&nbsp;<span class="ident" id="4924576">err</span>&nbsp;<span class="op" id="4924580">:=</span>&nbsp;<span class="ident" id="4924583"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4924584">.</span><span class="ident" id="4924585">marshalValue</span><span class="op" id="4924597">(</span><span class="ident" id="4924598"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4924601">.</span><span class="ident" id="4924602">Index</span><span class="op" id="4924607">(</span><span class="ident" id="4924608"><a href="/encoding/xml/marshal.go.html#4924535">i</a></span><span class="op" id="4924609">)</span><span class="op" id="4924610">,</span>&nbsp;<span class="ident" id="4924612"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4924617">,</span>&nbsp;<span class="ident" id="4924619"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4924632">)</span><span class="op" id="4924633">;</span>&nbsp;<span class="ident" id="4924635"><a href="/encoding/xml/marshal.go.html#4924576">err</a></span>&nbsp;<span class="op" id="4924639">!=</span>&nbsp;<span class="ident" id="4924642">nil</span>&nbsp;<span class="op" id="4924646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924652">return</span>&nbsp;<span class="ident" id="4924659"><a href="/encoding/xml/marshal.go.html#4924576">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924666">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924674">return</span>&nbsp;<span class="ident" id="4924681">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4924690">tinfo</span><span class="op" id="4924695">,</span>&nbsp;<span class="ident" id="4924697">err</span>&nbsp;<span class="op" id="4924701">:=</span>&nbsp;<span class="ident" id="4924704"><a href="/encoding/xml/typeinfo.go.html#4959324">getTypeInfo</a></span><span class="op" id="4924715">(</span><span class="ident" id="4924716"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4924719">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924722">if</span>&nbsp;<span class="ident" id="4924725"><a href="/encoding/xml/marshal.go.html#4924697">err</a></span>&nbsp;<span class="op" id="4924729">!=</span>&nbsp;<span class="ident" id="4924732">nil</span>&nbsp;<span class="op" id="4924736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924740">return</span>&nbsp;<span class="ident" id="4924747"><a href="/encoding/xml/marshal.go.html#4924697">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4924752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924756">//&nbsp;Create&nbsp;start&nbsp;element.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924782">//&nbsp;Precedence&nbsp;for&nbsp;the&nbsp;XML&nbsp;element&nbsp;name&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924826">//&nbsp;0.&nbsp;startTemplate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924847">//&nbsp;1.&nbsp;XMLName&nbsp;field&nbsp;in&nbsp;underlying&nbsp;struct;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924890">//&nbsp;2.&nbsp;field&nbsp;name/tag&nbsp;in&nbsp;the&nbsp;struct&nbsp;field;&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4924937">//&nbsp;3.&nbsp;type&nbsp;name</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924954">var</span>&nbsp;<span class="ident" id="4924958">start</span>&nbsp;<span class="ident" id="4924964"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4924979">if</span>&nbsp;<span class="ident" id="4924982"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span>&nbsp;<span class="op" id="4924996">!=</span>&nbsp;<span class="ident" id="4924999">nil</span>&nbsp;<span class="op" id="4925003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925007"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925012">.</span><span class="ident" id="4925013">Name</span>&nbsp;<span class="op" id="4925018">=</span>&nbsp;<span class="ident" id="4925020"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4925033">.</span><span class="ident" id="4925034">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925041"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925046">.</span><span class="ident" id="4925047">Attr</span>&nbsp;<span class="op" id="4925052">=</span>&nbsp;<span class="builtinfunc" id="4925054">append</span><span class="op" id="4925060">(</span><span class="ident" id="4925061"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925066">.</span><span class="ident" id="4925067">Attr</span><span class="op" id="4925071">,</span>&nbsp;<span class="ident" id="4925073"><a href="/encoding/xml/marshal.go.html#4922896">startTemplate</a></span><span class="op" id="4925086">.</span><span class="ident" id="4925087">Attr</span><span class="op" id="4925091">...</span><span class="op" id="4925094">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925097">}</span>&nbsp;<span class="keyword" id="4925099">else</span>&nbsp;<span class="keyword" id="4925104">if</span>&nbsp;<span class="ident" id="4925107"><a href="/encoding/xml/marshal.go.html#4924690">tinfo</a></span><span class="op" id="4925112">.</span><span class="ident" id="4925113">xmlname</span>&nbsp;<span class="op" id="4925121">!=</span>&nbsp;<span class="ident" id="4925124">nil</span>&nbsp;<span class="op" id="4925128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925132">xmlname</span>&nbsp;<span class="op" id="4925140">:=</span>&nbsp;<span class="ident" id="4925143"><a href="/encoding/xml/marshal.go.html#4924690">tinfo</a></span><span class="op" id="4925148">.</span><span class="ident" id="4925149">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925159">if</span>&nbsp;<span class="ident" id="4925162"><a href="/encoding/xml/marshal.go.html#4925132">xmlname</a></span><span class="op" id="4925169">.</span><span class="ident" id="4925170">name</span>&nbsp;<span class="op" id="4925175">!=</span>&nbsp;<span class="string" id="4925178">&#34;&#34;</span>&nbsp;<span class="op" id="4925181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925186"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925191">.</span><span class="ident" id="4925192">Name</span><span class="op" id="4925196">.</span><span class="ident" id="4925197">Space</span><span class="op" id="4925202">,</span>&nbsp;<span class="ident" id="4925204"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925209">.</span><span class="ident" id="4925210">Name</span><span class="op" id="4925214">.</span><span class="ident" id="4925215">Local</span>&nbsp;<span class="op" id="4925221">=</span>&nbsp;<span class="ident" id="4925223"><a href="/encoding/xml/marshal.go.html#4925132">xmlname</a></span><span class="op" id="4925230">.</span><span class="ident" id="4925231">xmlns</span><span class="op" id="4925236">,</span>&nbsp;<span class="ident" id="4925238"><a href="/encoding/xml/marshal.go.html#4925132">xmlname</a></span><span class="op" id="4925245">.</span><span class="ident" id="4925246">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925253">}</span>&nbsp;<span class="keyword" id="4925255">else</span>&nbsp;<span class="keyword" id="4925260">if</span>&nbsp;<span class="ident" id="4925263">v</span><span class="op" id="4925264">,</span>&nbsp;<span class="ident" id="4925266">ok</span>&nbsp;<span class="op" id="4925269">:=</span>&nbsp;<span class="ident" id="4925272"><a href="/encoding/xml/marshal.go.html#4925132">xmlname</a></span><span class="op" id="4925279">.</span><span class="ident" id="4925280">value</span><span class="op" id="4925285">(</span><span class="ident" id="4925286"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4925289">)</span><span class="op" id="4925290">.</span><span class="ident" id="4925291">Interface</span><span class="op" id="4925300">(</span><span class="op" id="4925301">)</span><span class="op" id="4925302">.</span><span class="op" id="4925303">(</span><span class="ident" id="4925304"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4925308">)</span><span class="op" id="4925309">;</span>&nbsp;<span class="ident" id="4925311"><a href="/encoding/xml/marshal.go.html#4925266">ok</a></span>&nbsp;<span class="op" id="4925314">&amp;&amp;</span>&nbsp;<span class="ident" id="4925317"><a href="/encoding/xml/marshal.go.html#4925263">v</a></span><span class="op" id="4925318">.</span><span class="ident" id="4925319">Local</span>&nbsp;<span class="op" id="4925325">!=</span>&nbsp;<span class="string" id="4925328">&#34;&#34;</span>&nbsp;<span class="op" id="4925331">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925336"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925341">.</span><span class="ident" id="4925342">Name</span>&nbsp;<span class="op" id="4925347">=</span>&nbsp;<span class="ident" id="4925349"><a href="/encoding/xml/marshal.go.html#4925263">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925359">if</span>&nbsp;<span class="ident" id="4925362"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925367">.</span><span class="ident" id="4925368">Name</span><span class="op" id="4925372">.</span><span class="ident" id="4925373">Local</span>&nbsp;<span class="op" id="4925379">==</span>&nbsp;<span class="string" id="4925382">&#34;&#34;</span>&nbsp;<span class="op" id="4925385">&amp;&amp;</span>&nbsp;<span class="ident" id="4925388"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span>&nbsp;<span class="op" id="4925394">!=</span>&nbsp;<span class="ident" id="4925397">nil</span>&nbsp;<span class="op" id="4925401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925405"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925410">.</span><span class="ident" id="4925411">Name</span><span class="op" id="4925415">.</span><span class="ident" id="4925416">Space</span><span class="op" id="4925421">,</span>&nbsp;<span class="ident" id="4925423"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925428">.</span><span class="ident" id="4925429">Name</span><span class="op" id="4925433">.</span><span class="ident" id="4925434">Local</span>&nbsp;<span class="op" id="4925440">=</span>&nbsp;<span class="ident" id="4925442"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4925447">.</span><span class="ident" id="4925448">xmlns</span><span class="op" id="4925453">,</span>&nbsp;<span class="ident" id="4925455"><a href="/encoding/xml/marshal.go.html#4922878">finfo</a></span><span class="op" id="4925460">.</span><span class="ident" id="4925461">name</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925470">if</span>&nbsp;<span class="ident" id="4925473"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925478">.</span><span class="ident" id="4925479">Name</span><span class="op" id="4925483">.</span><span class="ident" id="4925484">Local</span>&nbsp;<span class="op" id="4925490">==</span>&nbsp;<span class="string" id="4925493">&#34;&#34;</span>&nbsp;<span class="op" id="4925496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925500">name</span>&nbsp;<span class="op" id="4925505">:=</span>&nbsp;<span class="ident" id="4925508"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4925511">.</span><span class="ident" id="4925512">Name</span><span class="op" id="4925516">(</span><span class="op" id="4925517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925521">if</span>&nbsp;<span class="ident" id="4925524"><a href="/encoding/xml/marshal.go.html#4925500">name</a></span>&nbsp;<span class="op" id="4925529">==</span>&nbsp;<span class="string" id="4925532">&#34;&#34;</span>&nbsp;<span class="op" id="4925535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925540">return</span>&nbsp;<span class="op" id="4925547">&amp;</span><span class="ident" id="4925548"><a href="/encoding/xml/marshal.go.html#4937378">UnsupportedTypeError</a></span><span class="op" id="4925568">{</span><span class="ident" id="4925569"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4925572">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925580"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4925585">.</span><span class="ident" id="4925586">Name</span><span class="op" id="4925590">.</span><span class="ident" id="4925591">Local</span>&nbsp;<span class="op" id="4925597">=</span>&nbsp;<span class="ident" id="4925599"><a href="/encoding/xml/marshal.go.html#4925500">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4925609">//&nbsp;Attributes</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925624">for</span>&nbsp;<span class="ident" id="4925628">i</span>&nbsp;<span class="op" id="4925630">:=</span>&nbsp;<span class="keyword" id="4925633">range</span>&nbsp;<span class="ident" id="4925639"><a href="/encoding/xml/marshal.go.html#4924690">tinfo</a></span><span class="op" id="4925644">.</span><span class="ident" id="4925645">fields</span>&nbsp;<span class="op" id="4925652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925656">finfo</span>&nbsp;<span class="op" id="4925662">:=</span>&nbsp;<span class="op" id="4925665">&amp;</span><span class="ident" id="4925666"><a href="/encoding/xml/marshal.go.html#4924690">tinfo</a></span><span class="op" id="4925671">.</span><span class="ident" id="4925672">fields</span><span class="op" id="4925678">[</span><span class="ident" id="4925679"><a href="/encoding/xml/marshal.go.html#4925628">i</a></span><span class="op" id="4925680">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925684">if</span>&nbsp;<span class="ident" id="4925687"><a href="/encoding/xml/marshal.go.html#4925656">finfo</a></span><span class="op" id="4925692">.</span><span class="ident" id="4925693">flags</span><span class="op" id="4925698">&amp;</span><span class="ident" id="4925699"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span>&nbsp;<span class="op" id="4925705">==</span>&nbsp;<span class="num" id="4925708">0</span>&nbsp;<span class="op" id="4925710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925715">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925726">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925730">fv</span>&nbsp;<span class="op" id="4925733">:=</span>&nbsp;<span class="ident" id="4925736"><a href="/encoding/xml/marshal.go.html#4925656">finfo</a></span><span class="op" id="4925741">.</span><span class="ident" id="4925742">value</span><span class="op" id="4925747">(</span><span class="ident" id="4925748"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4925751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4925755">name</span>&nbsp;<span class="op" id="4925760">:=</span>&nbsp;<span class="ident" id="4925763"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4925767">{</span><span class="ident" id="4925768">Space</span><span class="op" id="4925773">:</span>&nbsp;<span class="ident" id="4925775"><a href="/encoding/xml/marshal.go.html#4925656">finfo</a></span><span class="op" id="4925780">.</span><span class="ident" id="4925781">xmlns</span><span class="op" id="4925786">,</span>&nbsp;<span class="ident" id="4925788">Local</span><span class="op" id="4925793">:</span>&nbsp;<span class="ident" id="4925795"><a href="/encoding/xml/marshal.go.html#4925656">finfo</a></span><span class="op" id="4925800">.</span><span class="ident" id="4925801">name</span><span class="op" id="4925805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925810">if</span>&nbsp;<span class="ident" id="4925813"><a href="/encoding/xml/marshal.go.html#4925656">finfo</a></span><span class="op" id="4925818">.</span><span class="ident" id="4925819">flags</span><span class="op" id="4925824">&amp;</span><span class="ident" id="4925825"><a href="/encoding/xml/typeinfo.go.html#4959010">fOmitEmpty</a></span>&nbsp;<span class="op" id="4925836">!=</span>&nbsp;<span class="num" id="4925839">0</span>&nbsp;<span class="op" id="4925841">&amp;&amp;</span>&nbsp;<span class="ident" id="4925844"><a href="/encoding/xml/marshal.go.html#4937538">isEmptyValue</a></span><span class="op" id="4925856">(</span><span class="ident" id="4925857"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4925859">)</span>&nbsp;<span class="op" id="4925861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925866">continue</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925882">if</span>&nbsp;<span class="ident" id="4925885"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4925887">.</span><span class="ident" id="4925888">Kind</span><span class="op" id="4925892">(</span><span class="op" id="4925893">)</span>&nbsp;<span class="op" id="4925895">==</span>&nbsp;<span class="ident" id="4925898"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4925905">.</span><span class="ident" id="4925906">Interface</span>&nbsp;<span class="op" id="4925916">&amp;&amp;</span>&nbsp;<span class="ident" id="4925919"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4925921">.</span><span class="ident" id="4925922">IsNil</span><span class="op" id="4925927">(</span><span class="op" id="4925928">)</span>&nbsp;<span class="op" id="4925930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925935">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4925946">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4925951">if</span>&nbsp;<span class="ident" id="4925954"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4925956">.</span><span class="ident" id="4925957">CanInterface</span><span class="op" id="4925969">(</span><span class="op" id="4925970">)</span>&nbsp;<span class="op" id="4925972">&amp;&amp;</span>&nbsp;<span class="ident" id="4925975"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4925977">.</span><span class="ident" id="4925978">Type</span><span class="op" id="4925982">(</span><span class="op" id="4925983">)</span><span class="op" id="4925984">.</span><span class="ident" id="4925985">Implements</span><span class="op" id="4925995">(</span><span class="ident" id="4925996"><a href="/encoding/xml/marshal.go.html#4922546">marshalerAttrType</a></span><span class="op" id="4926013">)</span>&nbsp;<span class="op" id="4926015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926020">attr</span><span class="op" id="4926024">,</span>&nbsp;<span class="ident" id="4926026">err</span>&nbsp;<span class="op" id="4926030">:=</span>&nbsp;<span class="ident" id="4926033"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926035">.</span><span class="ident" id="4926036">Interface</span><span class="op" id="4926045">(</span><span class="op" id="4926046">)</span><span class="op" id="4926047">.</span><span class="op" id="4926048">(</span><span class="ident" id="4926049"><a href="/encoding/xml/marshal.go.html#4915817">MarshalerAttr</a></span><span class="op" id="4926062">)</span><span class="op" id="4926063">.</span><span class="ident" id="4926064">MarshalXMLAttr</span><span class="op" id="4926078">(</span><span class="ident" id="4926079"><a href="/encoding/xml/marshal.go.html#4925755">name</a></span><span class="op" id="4926083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926088">if</span>&nbsp;<span class="ident" id="4926091"><a href="/encoding/xml/marshal.go.html#4926026">err</a></span>&nbsp;<span class="op" id="4926095">!=</span>&nbsp;<span class="ident" id="4926098">nil</span>&nbsp;<span class="op" id="4926102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926108">return</span>&nbsp;<span class="ident" id="4926115"><a href="/encoding/xml/marshal.go.html#4926026">err</a></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926127">if</span>&nbsp;<span class="ident" id="4926130"><a href="/encoding/xml/marshal.go.html#4926020">attr</a></span><span class="op" id="4926134">.</span><span class="ident" id="4926135">Name</span><span class="op" id="4926139">.</span><span class="ident" id="4926140">Local</span>&nbsp;<span class="op" id="4926146">!=</span>&nbsp;<span class="string" id="4926149">&#34;&#34;</span>&nbsp;<span class="op" id="4926152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926158"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4926163">.</span><span class="ident" id="4926164">Attr</span>&nbsp;<span class="op" id="4926169">=</span>&nbsp;<span class="builtinfunc" id="4926171">append</span><span class="op" id="4926177">(</span><span class="ident" id="4926178"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4926183">.</span><span class="ident" id="4926184">Attr</span><span class="op" id="4926188">,</span>&nbsp;<span class="ident" id="4926190"><a href="/encoding/xml/marshal.go.html#4926020">attr</a></span><span class="op" id="4926194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926204">continue</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926220">if</span>&nbsp;<span class="ident" id="4926223"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926225">.</span><span class="ident" id="4926226">CanAddr</span><span class="op" id="4926233">(</span><span class="op" id="4926234">)</span>&nbsp;<span class="op" id="4926236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926241">pv</span>&nbsp;<span class="op" id="4926244">:=</span>&nbsp;<span class="ident" id="4926247"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926249">.</span><span class="ident" id="4926250">Addr</span><span class="op" id="4926254">(</span><span class="op" id="4926255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926260">if</span>&nbsp;<span class="ident" id="4926263"><a href="/encoding/xml/marshal.go.html#4926241">pv</a></span><span class="op" id="4926265">.</span><span class="ident" id="4926266">CanInterface</span><span class="op" id="4926278">(</span><span class="op" id="4926279">)</span>&nbsp;<span class="op" id="4926281">&amp;&amp;</span>&nbsp;<span class="ident" id="4926284"><a href="/encoding/xml/marshal.go.html#4926241">pv</a></span><span class="op" id="4926286">.</span><span class="ident" id="4926287">Type</span><span class="op" id="4926291">(</span><span class="op" id="4926292">)</span><span class="op" id="4926293">.</span><span class="ident" id="4926294">Implements</span><span class="op" id="4926304">(</span><span class="ident" id="4926305"><a href="/encoding/xml/marshal.go.html#4922546">marshalerAttrType</a></span><span class="op" id="4926322">)</span>&nbsp;<span class="op" id="4926324">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926330">attr</span><span class="op" id="4926334">,</span>&nbsp;<span class="ident" id="4926336">err</span>&nbsp;<span class="op" id="4926340">:=</span>&nbsp;<span class="ident" id="4926343"><a href="/encoding/xml/marshal.go.html#4926241">pv</a></span><span class="op" id="4926345">.</span><span class="ident" id="4926346">Interface</span><span class="op" id="4926355">(</span><span class="op" id="4926356">)</span><span class="op" id="4926357">.</span><span class="op" id="4926358">(</span><span class="ident" id="4926359"><a href="/encoding/xml/marshal.go.html#4915817">MarshalerAttr</a></span><span class="op" id="4926372">)</span><span class="op" id="4926373">.</span><span class="ident" id="4926374">MarshalXMLAttr</span><span class="op" id="4926388">(</span><span class="ident" id="4926389"><a href="/encoding/xml/marshal.go.html#4925755">name</a></span><span class="op" id="4926393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926399">if</span>&nbsp;<span class="ident" id="4926402"><a href="/encoding/xml/marshal.go.html#4926336">err</a></span>&nbsp;<span class="op" id="4926406">!=</span>&nbsp;<span class="ident" id="4926409">nil</span>&nbsp;<span class="op" id="4926413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926420">return</span>&nbsp;<span class="ident" id="4926427"><a href="/encoding/xml/marshal.go.html#4926336">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926441">if</span>&nbsp;<span class="ident" id="4926444"><a href="/encoding/xml/marshal.go.html#4926330">attr</a></span><span class="op" id="4926448">.</span><span class="ident" id="4926449">Name</span><span class="op" id="4926453">.</span><span class="ident" id="4926454">Local</span>&nbsp;<span class="op" id="4926460">!=</span>&nbsp;<span class="string" id="4926463">&#34;&#34;</span>&nbsp;<span class="op" id="4926466">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926473"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4926478">.</span><span class="ident" id="4926479">Attr</span>&nbsp;<span class="op" id="4926484">=</span>&nbsp;<span class="builtinfunc" id="4926486">append</span><span class="op" id="4926492">(</span><span class="ident" id="4926493"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4926498">.</span><span class="ident" id="4926499">Attr</span><span class="op" id="4926503">,</span>&nbsp;<span class="ident" id="4926505"><a href="/encoding/xml/marshal.go.html#4926330">attr</a></span><span class="op" id="4926509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926521">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926537">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926542">if</span>&nbsp;<span class="ident" id="4926545"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926547">.</span><span class="ident" id="4926548">CanInterface</span><span class="op" id="4926560">(</span><span class="op" id="4926561">)</span>&nbsp;<span class="op" id="4926563">&amp;&amp;</span>&nbsp;<span class="ident" id="4926566"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926568">.</span><span class="ident" id="4926569">Type</span><span class="op" id="4926573">(</span><span class="op" id="4926574">)</span><span class="op" id="4926575">.</span><span class="ident" id="4926576">Implements</span><span class="op" id="4926586">(</span><span class="ident" id="4926587"><a href="/encoding/xml/marshal.go.html#4922612">textMarshalerType</a></span><span class="op" id="4926604">)</span>&nbsp;<span class="op" id="4926606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926611">text</span><span class="op" id="4926615">,</span>&nbsp;<span class="ident" id="4926617">err</span>&nbsp;<span class="op" id="4926621">:=</span>&nbsp;<span class="ident" id="4926624"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926626">.</span><span class="ident" id="4926627">Interface</span><span class="op" id="4926636">(</span><span class="op" id="4926637">)</span><span class="op" id="4926638">.</span><span class="op" id="4926639">(</span><span class="ident" id="4926640"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4926648">.</span><span class="ident" id="4926649">TextMarshaler</span><span class="op" id="4926662">)</span><span class="op" id="4926663">.</span><span class="ident" id="4926664">MarshalText</span><span class="op" id="4926675">(</span><span class="op" id="4926676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926681">if</span>&nbsp;<span class="ident" id="4926684"><a href="/encoding/xml/marshal.go.html#4926617">err</a></span>&nbsp;<span class="op" id="4926688">!=</span>&nbsp;<span class="ident" id="4926691">nil</span>&nbsp;<span class="op" id="4926695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926701">return</span>&nbsp;<span class="ident" id="4926708"><a href="/encoding/xml/marshal.go.html#4926617">err</a></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926720"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4926725">.</span><span class="ident" id="4926726">Attr</span>&nbsp;<span class="op" id="4926731">=</span>&nbsp;<span class="builtinfunc" id="4926733">append</span><span class="op" id="4926739">(</span><span class="ident" id="4926740"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4926745">.</span><span class="ident" id="4926746">Attr</span><span class="op" id="4926750">,</span>&nbsp;<span class="ident" id="4926752"><a href="/encoding/xml/xml.go.html#4968971">Attr</a></span><span class="op" id="4926756">{</span><span class="ident" id="4926757"><a href="/encoding/xml/marshal.go.html#4925755">name</a></span><span class="op" id="4926761">,</span>&nbsp;<span class="builtintype" id="4926763">string</span><span class="op" id="4926769">(</span><span class="ident" id="4926770"><a href="/encoding/xml/marshal.go.html#4926611">text</a></span><span class="op" id="4926774">)</span><span class="op" id="4926775">}</span><span class="op" id="4926776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926781">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4926792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926797">if</span>&nbsp;<span class="ident" id="4926800"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926802">.</span><span class="ident" id="4926803">CanAddr</span><span class="op" id="4926810">(</span><span class="op" id="4926811">)</span>&nbsp;<span class="op" id="4926813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926818">pv</span>&nbsp;<span class="op" id="4926821">:=</span>&nbsp;<span class="ident" id="4926824"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4926826">.</span><span class="ident" id="4926827">Addr</span><span class="op" id="4926831">(</span><span class="op" id="4926832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926837">if</span>&nbsp;<span class="ident" id="4926840"><a href="/encoding/xml/marshal.go.html#4926818">pv</a></span><span class="op" id="4926842">.</span><span class="ident" id="4926843">CanInterface</span><span class="op" id="4926855">(</span><span class="op" id="4926856">)</span>&nbsp;<span class="op" id="4926858">&amp;&amp;</span>&nbsp;<span class="ident" id="4926861"><a href="/encoding/xml/marshal.go.html#4926818">pv</a></span><span class="op" id="4926863">.</span><span class="ident" id="4926864">Type</span><span class="op" id="4926868">(</span><span class="op" id="4926869">)</span><span class="op" id="4926870">.</span><span class="ident" id="4926871">Implements</span><span class="op" id="4926881">(</span><span class="ident" id="4926882"><a href="/encoding/xml/marshal.go.html#4922612">textMarshalerType</a></span><span class="op" id="4926899">)</span>&nbsp;<span class="op" id="4926901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4926907">text</span><span class="op" id="4926911">,</span>&nbsp;<span class="ident" id="4926913">err</span>&nbsp;<span class="op" id="4926917">:=</span>&nbsp;<span class="ident" id="4926920"><a href="/encoding/xml/marshal.go.html#4926818">pv</a></span><span class="op" id="4926922">.</span><span class="ident" id="4926923">Interface</span><span class="op" id="4926932">(</span><span class="op" id="4926933">)</span><span class="op" id="4926934">.</span><span class="op" id="4926935">(</span><span class="ident" id="4926936"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4926944">.</span><span class="ident" id="4926945">TextMarshaler</span><span class="op" id="4926958">)</span><span class="op" id="4926959">.</span><span class="ident" id="4926960">MarshalText</span><span class="op" id="4926971">(</span><span class="op" id="4926972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926978">if</span>&nbsp;<span class="ident" id="4926981"><a href="/encoding/xml/marshal.go.html#4926913">err</a></span>&nbsp;<span class="op" id="4926985">!=</span>&nbsp;<span class="ident" id="4926988">nil</span>&nbsp;<span class="op" id="4926992">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4926999">return</span>&nbsp;<span class="ident" id="4927006"><a href="/encoding/xml/marshal.go.html#4926913">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927020"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4927025">.</span><span class="ident" id="4927026">Attr</span>&nbsp;<span class="op" id="4927031">=</span>&nbsp;<span class="builtinfunc" id="4927033">append</span><span class="op" id="4927039">(</span><span class="ident" id="4927040"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4927045">.</span><span class="ident" id="4927046">Attr</span><span class="op" id="4927050">,</span>&nbsp;<span class="ident" id="4927052"><a href="/encoding/xml/xml.go.html#4968971">Attr</a></span><span class="op" id="4927056">{</span><span class="ident" id="4927057"><a href="/encoding/xml/marshal.go.html#4925755">name</a></span><span class="op" id="4927061">,</span>&nbsp;<span class="builtintype" id="4927063">string</span><span class="op" id="4927069">(</span><span class="ident" id="4927070"><a href="/encoding/xml/marshal.go.html#4926907">text</a></span><span class="op" id="4927074">)</span><span class="op" id="4927075">}</span><span class="op" id="4927076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927082">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927094">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4927103">//&nbsp;Dereference&nbsp;or&nbsp;skip&nbsp;nil&nbsp;pointer,&nbsp;interface&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927159">switch</span>&nbsp;<span class="ident" id="4927166"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4927168">.</span><span class="ident" id="4927169">Kind</span><span class="op" id="4927173">(</span><span class="op" id="4927174">)</span>&nbsp;<span class="op" id="4927176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927180">case</span>&nbsp;<span class="ident" id="4927185"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4927192">.</span><span class="ident" id="4927193">Ptr</span><span class="op" id="4927196">,</span>&nbsp;<span class="ident" id="4927198"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4927205">.</span><span class="ident" id="4927206">Interface</span><span class="op" id="4927215">:</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927220">if</span>&nbsp;<span class="ident" id="4927223"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4927225">.</span><span class="ident" id="4927226">IsNil</span><span class="op" id="4927231">(</span><span class="op" id="4927232">)</span>&nbsp;<span class="op" id="4927234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927240">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927257"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span>&nbsp;<span class="op" id="4927260">=</span>&nbsp;<span class="ident" id="4927262"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4927264">.</span><span class="ident" id="4927265">Elem</span><span class="op" id="4927269">(</span><span class="op" id="4927270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927274">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927279">s</span><span class="op" id="4927280">,</span>&nbsp;<span class="ident" id="4927282">b</span><span class="op" id="4927283">,</span>&nbsp;<span class="ident" id="4927285">err</span>&nbsp;<span class="op" id="4927289">:=</span>&nbsp;<span class="ident" id="4927292"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927293">.</span><span class="ident" id="4927294">marshalSimple</span><span class="op" id="4927307">(</span><span class="ident" id="4927308"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4927310">.</span><span class="ident" id="4927311">Type</span><span class="op" id="4927315">(</span><span class="op" id="4927316">)</span><span class="op" id="4927317">,</span>&nbsp;<span class="ident" id="4927319"><a href="/encoding/xml/marshal.go.html#4925730">fv</a></span><span class="op" id="4927321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927325">if</span>&nbsp;<span class="ident" id="4927328"><a href="/encoding/xml/marshal.go.html#4927285">err</a></span>&nbsp;<span class="op" id="4927332">!=</span>&nbsp;<span class="ident" id="4927335">nil</span>&nbsp;<span class="op" id="4927339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927344">return</span>&nbsp;<span class="ident" id="4927351"><a href="/encoding/xml/marshal.go.html#4927285">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927357">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927361">if</span>&nbsp;<span class="ident" id="4927364"><a href="/encoding/xml/marshal.go.html#4927282">b</a></span>&nbsp;<span class="op" id="4927366">!=</span>&nbsp;<span class="ident" id="4927369">nil</span>&nbsp;<span class="op" id="4927373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927378"><a href="/encoding/xml/marshal.go.html#4927279">s</a></span>&nbsp;<span class="op" id="4927380">=</span>&nbsp;<span class="builtintype" id="4927382">string</span><span class="op" id="4927388">(</span><span class="ident" id="4927389"><a href="/encoding/xml/marshal.go.html#4927282">b</a></span><span class="op" id="4927390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927398"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4927403">.</span><span class="ident" id="4927404">Attr</span>&nbsp;<span class="op" id="4927409">=</span>&nbsp;<span class="builtinfunc" id="4927411">append</span><span class="op" id="4927417">(</span><span class="ident" id="4927418"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4927423">.</span><span class="ident" id="4927424">Attr</span><span class="op" id="4927428">,</span>&nbsp;<span class="ident" id="4927430"><a href="/encoding/xml/xml.go.html#4968971">Attr</a></span><span class="op" id="4927434">{</span><span class="ident" id="4927435"><a href="/encoding/xml/marshal.go.html#4925755">name</a></span><span class="op" id="4927439">,</span>&nbsp;<span class="ident" id="4927441"><a href="/encoding/xml/marshal.go.html#4927279">s</a></span><span class="op" id="4927442">}</span><span class="op" id="4927443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927446">}</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927450">if</span>&nbsp;<span class="ident" id="4927453">err</span>&nbsp;<span class="op" id="4927457">:=</span>&nbsp;<span class="ident" id="4927460"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927461">.</span><span class="ident" id="4927462">writeStart</span><span class="op" id="4927472">(</span><span class="op" id="4927473">&amp;</span><span class="ident" id="4927474"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4927479">)</span><span class="op" id="4927480">;</span>&nbsp;<span class="ident" id="4927482"><a href="/encoding/xml/marshal.go.html#4927453">err</a></span>&nbsp;<span class="op" id="4927486">!=</span>&nbsp;<span class="ident" id="4927489">nil</span>&nbsp;<span class="op" id="4927493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927497">return</span>&nbsp;<span class="ident" id="4927504"><a href="/encoding/xml/marshal.go.html#4927453">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927513">if</span>&nbsp;<span class="ident" id="4927516"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4927519">.</span><span class="ident" id="4927520">Kind</span><span class="op" id="4927524">(</span><span class="op" id="4927525">)</span>&nbsp;<span class="op" id="4927527">==</span>&nbsp;<span class="ident" id="4927530"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4927537">.</span><span class="ident" id="4927538">Struct</span>&nbsp;<span class="op" id="4927545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927549"><a href="/encoding/xml/marshal.go.html#4924697">err</a></span>&nbsp;<span class="op" id="4927553">=</span>&nbsp;<span class="ident" id="4927555"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927556">.</span><span class="ident" id="4927557">marshalStruct</span><span class="op" id="4927570">(</span><span class="ident" id="4927571"><a href="/encoding/xml/marshal.go.html#4924690">tinfo</a></span><span class="op" id="4927576">,</span>&nbsp;<span class="ident" id="4927578"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4927581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927584">}</span>&nbsp;<span class="keyword" id="4927586">else</span>&nbsp;<span class="op" id="4927591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927595">s</span><span class="op" id="4927596">,</span>&nbsp;<span class="ident" id="4927598">b</span><span class="op" id="4927599">,</span>&nbsp;<span class="ident" id="4927601">err1</span>&nbsp;<span class="op" id="4927606">:=</span>&nbsp;<span class="ident" id="4927609"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927610">.</span><span class="ident" id="4927611">marshalSimple</span><span class="op" id="4927624">(</span><span class="ident" id="4927625"><a href="/encoding/xml/marshal.go.html#4923488">typ</a></span><span class="op" id="4927628">,</span>&nbsp;<span class="ident" id="4927630"><a href="/encoding/xml/marshal.go.html#4922859">val</a></span><span class="op" id="4927633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927637">if</span>&nbsp;<span class="ident" id="4927640"><a href="/encoding/xml/marshal.go.html#4927601">err1</a></span>&nbsp;<span class="op" id="4927645">!=</span>&nbsp;<span class="ident" id="4927648">nil</span>&nbsp;<span class="op" id="4927652">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927657"><a href="/encoding/xml/marshal.go.html#4924697">err</a></span>&nbsp;<span class="op" id="4927661">=</span>&nbsp;<span class="ident" id="4927663"><a href="/encoding/xml/marshal.go.html#4927601">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927670">}</span>&nbsp;<span class="keyword" id="4927672">else</span>&nbsp;<span class="keyword" id="4927677">if</span>&nbsp;<span class="ident" id="4927680"><a href="/encoding/xml/marshal.go.html#4927598">b</a></span>&nbsp;<span class="op" id="4927682">!=</span>&nbsp;<span class="ident" id="4927685">nil</span>&nbsp;<span class="op" id="4927689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927694"><a href="/encoding/xml/xml.go.html#5010088">EscapeText</a></span><span class="op" id="4927704">(</span><span class="ident" id="4927705"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927706">,</span>&nbsp;<span class="ident" id="4927708"><a href="/encoding/xml/marshal.go.html#4927598">b</a></span><span class="op" id="4927709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927713">}</span>&nbsp;<span class="keyword" id="4927715">else</span>&nbsp;<span class="op" id="4927720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4927725"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927726">.</span><span class="ident" id="4927727">EscapeString</span><span class="op" id="4927739">(</span><span class="ident" id="4927740"><a href="/encoding/xml/marshal.go.html#4927595">s</a></span><span class="op" id="4927741">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927751">if</span>&nbsp;<span class="ident" id="4927754"><a href="/encoding/xml/marshal.go.html#4924697">err</a></span>&nbsp;<span class="op" id="4927758">!=</span>&nbsp;<span class="ident" id="4927761">nil</span>&nbsp;<span class="op" id="4927765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927769">return</span>&nbsp;<span class="ident" id="4927776"><a href="/encoding/xml/marshal.go.html#4924697">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927781">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927785">if</span>&nbsp;<span class="ident" id="4927788">err</span>&nbsp;<span class="op" id="4927792">:=</span>&nbsp;<span class="ident" id="4927795"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927796">.</span><span class="ident" id="4927797">writeEnd</span><span class="op" id="4927805">(</span><span class="ident" id="4927806"><a href="/encoding/xml/marshal.go.html#4924958">start</a></span><span class="op" id="4927811">.</span><span class="ident" id="4927812">Name</span><span class="op" id="4927816">)</span><span class="op" id="4927817">;</span>&nbsp;<span class="ident" id="4927819"><a href="/encoding/xml/marshal.go.html#4927788">err</a></span>&nbsp;<span class="op" id="4927823">!=</span>&nbsp;<span class="ident" id="4927826">nil</span>&nbsp;<span class="op" id="4927830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927834">return</span>&nbsp;<span class="ident" id="4927841"><a href="/encoding/xml/marshal.go.html#4927788">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4927846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4927850">return</span>&nbsp;<span class="ident" id="4927857"><a href="/encoding/xml/marshal.go.html#4922834">p</a></span><span class="op" id="4927858">.</span><span class="ident" id="4927859">cachedWriteError</span><span class="op" id="4927875">(</span><span class="op" id="4927876">)</span><br>
<span class="lineno"></span><span class="op" id="4927878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4927881">//&nbsp;defaultStart&nbsp;returns&nbsp;the&nbsp;default&nbsp;start&nbsp;element&nbsp;to&nbsp;use,</span><br>
<span class="lineno"></span><span class="comment" id="4927939">//&nbsp;given&nbsp;the&nbsp;reflect&nbsp;type,&nbsp;field&nbsp;info,&nbsp;and&nbsp;start&nbsp;template.</span><br>
<span class="lineno">555</span><span class="keyword" id="4927998">func</span>&nbsp;<span class="ident" id="4928003">defaultStart</span><span class="op" id="4928015">(</span><span class="ident" id="4928016">typ</span>&nbsp;<span class="ident" id="4928020"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4928027">.</span><span class="ident" id="4928028">Type</span><span class="op" id="4928032">,</span>&nbsp;<span class="ident" id="4928034">finfo</span>&nbsp;<span class="op" id="4928040">*</span><span class="ident" id="4928041"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4928050">,</span>&nbsp;<span class="ident" id="4928052">startTemplate</span>&nbsp;<span class="op" id="4928066">*</span><span class="ident" id="4928067"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4928079">)</span>&nbsp;<span class="ident" id="4928081"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span>&nbsp;<span class="op" id="4928094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928097">var</span>&nbsp;<span class="ident" id="4928101">start</span>&nbsp;<span class="ident" id="4928107"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928121">//&nbsp;Precedence&nbsp;for&nbsp;the&nbsp;XML&nbsp;element&nbsp;name&nbsp;is&nbsp;as&nbsp;above,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928174">//&nbsp;except&nbsp;that&nbsp;we&nbsp;do&nbsp;not&nbsp;look&nbsp;inside&nbsp;structs&nbsp;for&nbsp;the&nbsp;first&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928241">if</span>&nbsp;<span class="ident" id="4928244"><a href="/encoding/xml/marshal.go.html#4928052">startTemplate</a></span>&nbsp;<span class="op" id="4928258">!=</span>&nbsp;<span class="ident" id="4928261">nil</span>&nbsp;<span class="op" id="4928265">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928269"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928274">.</span><span class="ident" id="4928275">Name</span>&nbsp;<span class="op" id="4928280">=</span>&nbsp;<span class="ident" id="4928282"><a href="/encoding/xml/marshal.go.html#4928052">startTemplate</a></span><span class="op" id="4928295">.</span><span class="ident" id="4928296">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928303"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928308">.</span><span class="ident" id="4928309">Attr</span>&nbsp;<span class="op" id="4928314">=</span>&nbsp;<span class="builtinfunc" id="4928316">append</span><span class="op" id="4928322">(</span><span class="ident" id="4928323"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928328">.</span><span class="ident" id="4928329">Attr</span><span class="op" id="4928333">,</span>&nbsp;<span class="ident" id="4928335"><a href="/encoding/xml/marshal.go.html#4928052">startTemplate</a></span><span class="op" id="4928348">.</span><span class="ident" id="4928349">Attr</span><span class="op" id="4928353">...</span><span class="op" id="4928356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928359">}</span>&nbsp;<span class="keyword" id="4928361">else</span>&nbsp;<span class="keyword" id="4928366">if</span>&nbsp;<span class="ident" id="4928369"><a href="/encoding/xml/marshal.go.html#4928034">finfo</a></span>&nbsp;<span class="op" id="4928375">!=</span>&nbsp;<span class="ident" id="4928378">nil</span>&nbsp;<span class="op" id="4928382">&amp;&amp;</span>&nbsp;<span class="ident" id="4928385"><a href="/encoding/xml/marshal.go.html#4928034">finfo</a></span><span class="op" id="4928390">.</span><span class="ident" id="4928391">name</span>&nbsp;<span class="op" id="4928396">!=</span>&nbsp;<span class="string" id="4928399">&#34;&#34;</span>&nbsp;<span class="op" id="4928402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928406"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928411">.</span><span class="ident" id="4928412">Name</span><span class="op" id="4928416">.</span><span class="ident" id="4928417">Local</span>&nbsp;<span class="op" id="4928423">=</span>&nbsp;<span class="ident" id="4928425"><a href="/encoding/xml/marshal.go.html#4928034">finfo</a></span><span class="op" id="4928430">.</span><span class="ident" id="4928431">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928438"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928443">.</span><span class="ident" id="4928444">Name</span><span class="op" id="4928448">.</span><span class="ident" id="4928449">Space</span>&nbsp;<span class="op" id="4928455">=</span>&nbsp;<span class="ident" id="4928457"><a href="/encoding/xml/marshal.go.html#4928034">finfo</a></span><span class="op" id="4928462">.</span><span class="ident" id="4928463">xmlns</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928470">}</span>&nbsp;<span class="keyword" id="4928472">else</span>&nbsp;<span class="keyword" id="4928477">if</span>&nbsp;<span class="ident" id="4928480"><a href="/encoding/xml/marshal.go.html#4928016">typ</a></span><span class="op" id="4928483">.</span><span class="ident" id="4928484">Name</span><span class="op" id="4928488">(</span><span class="op" id="4928489">)</span>&nbsp;<span class="op" id="4928491">!=</span>&nbsp;<span class="string" id="4928494">&#34;&#34;</span>&nbsp;<span class="op" id="4928497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928501"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928506">.</span><span class="ident" id="4928507">Name</span><span class="op" id="4928511">.</span><span class="ident" id="4928512">Local</span>&nbsp;<span class="op" id="4928518">=</span>&nbsp;<span class="ident" id="4928520"><a href="/encoding/xml/marshal.go.html#4928016">typ</a></span><span class="op" id="4928523">.</span><span class="ident" id="4928524">Name</span><span class="op" id="4928528">(</span><span class="op" id="4928529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928532">}</span>&nbsp;<span class="keyword" id="4928534">else</span>&nbsp;<span class="op" id="4928539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928543">//&nbsp;Must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;named&nbsp;type,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928583">//&nbsp;since&nbsp;it&nbsp;has&nbsp;the&nbsp;Marshaler&nbsp;methods.</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928624"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><span class="op" id="4928629">.</span><span class="ident" id="4928630">Name</span><span class="op" id="4928634">.</span><span class="ident" id="4928635">Local</span>&nbsp;<span class="op" id="4928641">=</span>&nbsp;<span class="ident" id="4928643"><a href="/encoding/xml/marshal.go.html#4928016">typ</a></span><span class="op" id="4928646">.</span><span class="ident" id="4928647">Elem</span><span class="op" id="4928651">(</span><span class="op" id="4928652">)</span><span class="op" id="4928653">.</span><span class="ident" id="4928654">Name</span><span class="op" id="4928658">(</span><span class="op" id="4928659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4928662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4928665">return</span>&nbsp;<span class="ident" id="4928672"><a href="/encoding/xml/marshal.go.html#4928101">start</a></span><br>
<span class="lineno"></span><span class="op" id="4928678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="4928681">//&nbsp;marshalInterface&nbsp;marshals&nbsp;a&nbsp;Marshaler&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="4928739">func</span>&nbsp;<span class="op" id="4928744">(</span><span class="ident" id="4928745">p</span>&nbsp;<span class="op" id="4928747">*</span><span class="ident" id="4928748"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4928755">)</span>&nbsp;<span class="ident" id="4928757">marshalInterface</span><span class="op" id="4928773">(</span><span class="ident" id="4928774">val</span>&nbsp;<span class="ident" id="4928778"><a href="/encoding/xml/marshal.go.html#4915192">Marshaler</a></span><span class="op" id="4928787">,</span>&nbsp;<span class="ident" id="4928789">start</span>&nbsp;<span class="ident" id="4928795"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4928807">)</span>&nbsp;<span class="builtintype" id="4928809">error</span>&nbsp;<span class="op" id="4928815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928818">//&nbsp;Push&nbsp;a&nbsp;marker&nbsp;onto&nbsp;the&nbsp;tag&nbsp;stack&nbsp;so&nbsp;that&nbsp;MarshalXML</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4928874">//&nbsp;cannot&nbsp;close&nbsp;the&nbsp;XML&nbsp;tags&nbsp;that&nbsp;it&nbsp;did&nbsp;not&nbsp;open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928926"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4928927">.</span><span class="ident" id="4928928">tags</span>&nbsp;<span class="op" id="4928933">=</span>&nbsp;<span class="builtinfunc" id="4928935">append</span><span class="op" id="4928941">(</span><span class="ident" id="4928942"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4928943">.</span><span class="ident" id="4928944">tags</span><span class="op" id="4928948">,</span>&nbsp;<span class="ident" id="4928950"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4928954">{</span><span class="op" id="4928955">}</span><span class="op" id="4928956">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928959">n</span>&nbsp;<span class="op" id="4928961">:=</span>&nbsp;<span class="builtinfunc" id="4928964">len</span><span class="op" id="4928967">(</span><span class="ident" id="4928968"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4928969">.</span><span class="ident" id="4928970">tags</span><span class="op" id="4928974">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4928978">err</span>&nbsp;<span class="op" id="4928982">:=</span>&nbsp;<span class="ident" id="4928985"><a href="/encoding/xml/marshal.go.html#4928774">val</a></span><span class="op" id="4928988">.</span><span class="ident" id="4928989">MarshalXML</span><span class="op" id="4928999">(</span><span class="ident" id="4929000"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4929001">.</span><span class="ident" id="4929002">encoder</span><span class="op" id="4929009">,</span>&nbsp;<span class="ident" id="4929011"><a href="/encoding/xml/marshal.go.html#4928789">start</a></span><span class="op" id="4929016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929019">if</span>&nbsp;<span class="ident" id="4929022"><a href="/encoding/xml/marshal.go.html#4928978">err</a></span>&nbsp;<span class="op" id="4929026">!=</span>&nbsp;<span class="ident" id="4929029">nil</span>&nbsp;<span class="op" id="4929033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929037">return</span>&nbsp;<span class="ident" id="4929044"><a href="/encoding/xml/marshal.go.html#4928978">err</a></span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4929053">//&nbsp;Make&nbsp;sure&nbsp;MarshalXML&nbsp;closed&nbsp;all&nbsp;its&nbsp;tags.&nbsp;p.tags[n-1]&nbsp;is&nbsp;the&nbsp;mark.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929124">if</span>&nbsp;<span class="builtinfunc" id="4929127">len</span><span class="op" id="4929130">(</span><span class="ident" id="4929131"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4929132">.</span><span class="ident" id="4929133">tags</span><span class="op" id="4929137">)</span>&nbsp;<span class="op" id="4929139">&gt;</span>&nbsp;<span class="ident" id="4929141"><a href="/encoding/xml/marshal.go.html#4928959">n</a></span>&nbsp;<span class="op" id="4929143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929147">return</span>&nbsp;<span class="ident" id="4929154"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4929157">.</span><span class="ident" id="4929158">Errorf</span><span class="op" id="4929164">(</span><span class="string" id="4929165">&#34;xml:&nbsp;%s.MarshalXML&nbsp;wrote&nbsp;invalid&nbsp;XML:&nbsp;&lt;%s&gt;&nbsp;not&nbsp;closed&#34;</span><span class="op" id="4929220">,</span>&nbsp;<span class="ident" id="4929222"><a href="/encoding/xml/read.go.html#4945142">receiverType</a></span><span class="op" id="4929234">(</span><span class="ident" id="4929235"><a href="/encoding/xml/marshal.go.html#4928774">val</a></span><span class="op" id="4929238">)</span><span class="op" id="4929239">,</span>&nbsp;<span class="ident" id="4929241"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4929242">.</span><span class="ident" id="4929243">tags</span><span class="op" id="4929247">[</span><span class="builtinfunc" id="4929248">len</span><span class="op" id="4929251">(</span><span class="ident" id="4929252"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4929253">.</span><span class="ident" id="4929254">tags</span><span class="op" id="4929258">)</span><span class="op" id="4929259">-</span><span class="num" id="4929260">1</span><span class="op" id="4929261">]</span><span class="op" id="4929262">.</span><span class="ident" id="4929263">Local</span><span class="op" id="4929268">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929274"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4929275">.</span><span class="ident" id="4929276">tags</span>&nbsp;<span class="op" id="4929281">=</span>&nbsp;<span class="ident" id="4929283"><a href="/encoding/xml/marshal.go.html#4928745">p</a></span><span class="op" id="4929284">.</span><span class="ident" id="4929285">tags</span><span class="op" id="4929289">[</span><span class="op" id="4929290">:</span><span class="ident" id="4929291"><a href="/encoding/xml/marshal.go.html#4928959">n</a></span><span class="op" id="4929292">-</span><span class="num" id="4929293">1</span><span class="op" id="4929294">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929297">return</span>&nbsp;<span class="ident" id="4929304">nil</span><br>
<span class="lineno"></span><span class="op" id="4929308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="4929311">//&nbsp;marshalTextInterface&nbsp;marshals&nbsp;a&nbsp;TextMarshaler&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="4929377">func</span>&nbsp;<span class="op" id="4929382">(</span><span class="ident" id="4929383">p</span>&nbsp;<span class="op" id="4929385">*</span><span class="ident" id="4929386"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4929393">)</span>&nbsp;<span class="ident" id="4929395">marshalTextInterface</span><span class="op" id="4929415">(</span><span class="ident" id="4929416">val</span>&nbsp;<span class="ident" id="4929420"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4929428">.</span><span class="ident" id="4929429">TextMarshaler</span><span class="op" id="4929442">,</span>&nbsp;<span class="ident" id="4929444">start</span>&nbsp;<span class="ident" id="4929450"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4929462">)</span>&nbsp;<span class="builtintype" id="4929464">error</span>&nbsp;<span class="op" id="4929470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929473">if</span>&nbsp;<span class="ident" id="4929476">err</span>&nbsp;<span class="op" id="4929480">:=</span>&nbsp;<span class="ident" id="4929483"><a href="/encoding/xml/marshal.go.html#4929383">p</a></span><span class="op" id="4929484">.</span><span class="ident" id="4929485">writeStart</span><span class="op" id="4929495">(</span><span class="op" id="4929496">&amp;</span><span class="ident" id="4929497"><a href="/encoding/xml/marshal.go.html#4929444">start</a></span><span class="op" id="4929502">)</span><span class="op" id="4929503">;</span>&nbsp;<span class="ident" id="4929505"><a href="/encoding/xml/marshal.go.html#4929476">err</a></span>&nbsp;<span class="op" id="4929509">!=</span>&nbsp;<span class="ident" id="4929512">nil</span>&nbsp;<span class="op" id="4929516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929520">return</span>&nbsp;<span class="ident" id="4929527"><a href="/encoding/xml/marshal.go.html#4929476">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929532">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929535">text</span><span class="op" id="4929539">,</span>&nbsp;<span class="ident" id="4929541">err</span>&nbsp;<span class="op" id="4929545">:=</span>&nbsp;<span class="ident" id="4929548"><a href="/encoding/xml/marshal.go.html#4929416">val</a></span><span class="op" id="4929551">.</span><span class="ident" id="4929552">MarshalText</span><span class="op" id="4929563">(</span><span class="op" id="4929564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929567">if</span>&nbsp;<span class="ident" id="4929570"><a href="/encoding/xml/marshal.go.html#4929541">err</a></span>&nbsp;<span class="op" id="4929574">!=</span>&nbsp;<span class="ident" id="4929577">nil</span>&nbsp;<span class="op" id="4929581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929585">return</span>&nbsp;<span class="ident" id="4929592"><a href="/encoding/xml/marshal.go.html#4929541">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929600"><a href="/encoding/xml/xml.go.html#5010088">EscapeText</a></span><span class="op" id="4929610">(</span><span class="ident" id="4929611"><a href="/encoding/xml/marshal.go.html#4929383">p</a></span><span class="op" id="4929612">,</span>&nbsp;<span class="ident" id="4929614"><a href="/encoding/xml/marshal.go.html#4929535">text</a></span><span class="op" id="4929618">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929621">return</span>&nbsp;<span class="ident" id="4929628"><a href="/encoding/xml/marshal.go.html#4929383">p</a></span><span class="op" id="4929629">.</span><span class="ident" id="4929630">writeEnd</span><span class="op" id="4929638">(</span><span class="ident" id="4929639"><a href="/encoding/xml/marshal.go.html#4929444">start</a></span><span class="op" id="4929644">.</span><span class="ident" id="4929645">Name</span><span class="op" id="4929649">)</span><br>
<span class="lineno"></span><span class="op" id="4929651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4929654">//&nbsp;writeStart&nbsp;writes&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="4929700">func</span>&nbsp;<span class="op" id="4929705">(</span><span class="ident" id="4929706">p</span>&nbsp;<span class="op" id="4929708">*</span><span class="ident" id="4929709"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4929716">)</span>&nbsp;<span class="ident" id="4929718">writeStart</span><span class="op" id="4929728">(</span><span class="ident" id="4929729">start</span>&nbsp;<span class="op" id="4929735">*</span><span class="ident" id="4929736"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4929748">)</span>&nbsp;<span class="builtintype" id="4929750">error</span>&nbsp;<span class="op" id="4929756">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929759">if</span>&nbsp;<span class="ident" id="4929762"><a href="/encoding/xml/marshal.go.html#4929729">start</a></span><span class="op" id="4929767">.</span><span class="ident" id="4929768">Name</span><span class="op" id="4929772">.</span><span class="ident" id="4929773">Local</span>&nbsp;<span class="op" id="4929779">==</span>&nbsp;<span class="string" id="4929782">&#34;&#34;</span>&nbsp;<span class="op" id="4929785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929789">return</span>&nbsp;<span class="ident" id="4929796"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4929799">.</span><span class="ident" id="4929800">Errorf</span><span class="op" id="4929806">(</span><span class="string" id="4929807">&#34;xml:&nbsp;start&nbsp;tag&nbsp;with&nbsp;no&nbsp;name&#34;</span><span class="op" id="4929836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4929839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929843"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929844">.</span><span class="ident" id="4929845">tags</span>&nbsp;<span class="op" id="4929850">=</span>&nbsp;<span class="builtinfunc" id="4929852">append</span><span class="op" id="4929858">(</span><span class="ident" id="4929859"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929860">.</span><span class="ident" id="4929861">tags</span><span class="op" id="4929865">,</span>&nbsp;<span class="ident" id="4929867"><a href="/encoding/xml/marshal.go.html#4929729">start</a></span><span class="op" id="4929872">.</span><span class="ident" id="4929873">Name</span><span class="op" id="4929877">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929880"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929881">.</span><span class="ident" id="4929882">markPrefix</span><span class="op" id="4929892">(</span><span class="op" id="4929893">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929897"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929898">.</span><span class="ident" id="4929899">writeIndent</span><span class="op" id="4929910">(</span><span class="num" id="4929911">1</span><span class="op" id="4929912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929915"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929916">.</span><span class="ident" id="4929917">WriteByte</span><span class="op" id="4929926">(</span><span class="string" id="4929927">&#39;&lt;&#39;</span><span class="op" id="4929930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929933"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929934">.</span><span class="ident" id="4929935">WriteString</span><span class="op" id="4929946">(</span><span class="ident" id="4929947"><a href="/encoding/xml/marshal.go.html#4929729">start</a></span><span class="op" id="4929952">.</span><span class="ident" id="4929953">Name</span><span class="op" id="4929957">.</span><span class="ident" id="4929958">Local</span><span class="op" id="4929963">)</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4929967">if</span>&nbsp;<span class="ident" id="4929970"><a href="/encoding/xml/marshal.go.html#4929729">start</a></span><span class="op" id="4929975">.</span><span class="ident" id="4929976">Name</span><span class="op" id="4929980">.</span><span class="ident" id="4929981">Space</span>&nbsp;<span class="op" id="4929987">!=</span>&nbsp;<span class="string" id="4929990">&#34;&#34;</span>&nbsp;<span class="op" id="4929993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4929997"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4929998">.</span><span class="ident" id="4929999">WriteString</span><span class="op" id="4930010">(</span><span class="string" id="4930011">`&nbsp;xmlns=&#34;`</span><span class="op" id="4930021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930025"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930026">.</span><span class="ident" id="4930027">EscapeString</span><span class="op" id="4930039">(</span><span class="ident" id="4930040"><a href="/encoding/xml/marshal.go.html#4929729">start</a></span><span class="op" id="4930045">.</span><span class="ident" id="4930046">Name</span><span class="op" id="4930050">.</span><span class="ident" id="4930051">Space</span><span class="op" id="4930056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930060"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930061">.</span><span class="ident" id="4930062">WriteByte</span><span class="op" id="4930071">(</span><span class="string" id="4930072">&#39;&#34;&#39;</span><span class="op" id="4930075">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4930082">//&nbsp;Attributes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930097">for</span>&nbsp;<span class="ident" id="4930101">_</span><span class="op" id="4930102">,</span>&nbsp;<span class="ident" id="4930104">attr</span>&nbsp;<span class="op" id="4930109">:=</span>&nbsp;<span class="keyword" id="4930112">range</span>&nbsp;<span class="ident" id="4930118"><a href="/encoding/xml/marshal.go.html#4929729">start</a></span><span class="op" id="4930123">.</span><span class="ident" id="4930124">Attr</span>&nbsp;<span class="op" id="4930129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930133">name</span>&nbsp;<span class="op" id="4930138">:=</span>&nbsp;<span class="ident" id="4930141"><a href="/encoding/xml/marshal.go.html#4930104">attr</a></span><span class="op" id="4930145">.</span><span class="ident" id="4930146">Name</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930153">if</span>&nbsp;<span class="ident" id="4930156"><a href="/encoding/xml/marshal.go.html#4930133">name</a></span><span class="op" id="4930160">.</span><span class="ident" id="4930161">Local</span>&nbsp;<span class="op" id="4930167">==</span>&nbsp;<span class="string" id="4930170">&#34;&#34;</span>&nbsp;<span class="op" id="4930173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930178">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930193"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930194">.</span><span class="ident" id="4930195">WriteByte</span><span class="op" id="4930204">(</span><span class="string" id="4930205">&#39;&nbsp;&#39;</span><span class="op" id="4930208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930212">if</span>&nbsp;<span class="ident" id="4930215"><a href="/encoding/xml/marshal.go.html#4930133">name</a></span><span class="op" id="4930219">.</span><span class="ident" id="4930220">Space</span>&nbsp;<span class="op" id="4930226">!=</span>&nbsp;<span class="string" id="4930229">&#34;&#34;</span>&nbsp;<span class="op" id="4930232">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930237"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930238">.</span><span class="ident" id="4930239">WriteString</span><span class="op" id="4930250">(</span><span class="ident" id="4930251"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930252">.</span><span class="ident" id="4930253">createAttrPrefix</span><span class="op" id="4930269">(</span><span class="ident" id="4930270"><a href="/encoding/xml/marshal.go.html#4930133">name</a></span><span class="op" id="4930274">.</span><span class="ident" id="4930275">Space</span><span class="op" id="4930280">)</span><span class="op" id="4930281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930286"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930287">.</span><span class="ident" id="4930288">WriteByte</span><span class="op" id="4930297">(</span><span class="string" id="4930298">&#39;:&#39;</span><span class="op" id="4930301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930309"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930310">.</span><span class="ident" id="4930311">WriteString</span><span class="op" id="4930322">(</span><span class="ident" id="4930323"><a href="/encoding/xml/marshal.go.html#4930133">name</a></span><span class="op" id="4930327">.</span><span class="ident" id="4930328">Local</span><span class="op" id="4930333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930337"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930338">.</span><span class="ident" id="4930339">WriteString</span><span class="op" id="4930350">(</span><span class="string" id="4930351">`=&#34;`</span><span class="op" id="4930355">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930359"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930360">.</span><span class="ident" id="4930361">EscapeString</span><span class="op" id="4930373">(</span><span class="ident" id="4930374"><a href="/encoding/xml/marshal.go.html#4930104">attr</a></span><span class="op" id="4930378">.</span><span class="ident" id="4930379">Value</span><span class="op" id="4930384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930388"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930389">.</span><span class="ident" id="4930390">WriteByte</span><span class="op" id="4930399">(</span><span class="string" id="4930400">&#39;&#34;&#39;</span><span class="op" id="4930403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4930409"><a href="/encoding/xml/marshal.go.html#4929706">p</a></span><span class="op" id="4930410">.</span><span class="ident" id="4930411">WriteByte</span><span class="op" id="4930420">(</span><span class="string" id="4930421">&#39;&gt;&#39;</span><span class="op" id="4930424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930427">return</span>&nbsp;<span class="ident" id="4930434">nil</span><br>
<span class="lineno">645</span><span class="op" id="4930438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4930441">func</span>&nbsp;<span class="op" id="4930446">(</span><span class="ident" id="4930447">p</span>&nbsp;<span class="op" id="4930449">*</span><span class="ident" id="4930450"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4930457">)</span>&nbsp;<span class="ident" id="4930459">writeEnd</span><span class="op" id="4930467">(</span><span class="ident" id="4930468">name</span>&nbsp;<span class="ident" id="4930473"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4930477">)</span>&nbsp;<span class="builtintype" id="4930479">error</span>&nbsp;<span class="op" id="4930485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930488">if</span>&nbsp;<span class="ident" id="4930491"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4930495">.</span><span class="ident" id="4930496">Local</span>&nbsp;<span class="op" id="4930502">==</span>&nbsp;<span class="string" id="4930505">&#34;&#34;</span>&nbsp;<span class="op" id="4930508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930512">return</span>&nbsp;<span class="ident" id="4930519"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4930522">.</span><span class="ident" id="4930523">Errorf</span><span class="op" id="4930529">(</span><span class="string" id="4930530">&#34;xml:&nbsp;end&nbsp;tag&nbsp;with&nbsp;no&nbsp;name&#34;</span><span class="op" id="4930557">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930563">if</span>&nbsp;<span class="builtinfunc" id="4930566">len</span><span class="op" id="4930569">(</span><span class="ident" id="4930570"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4930571">.</span><span class="ident" id="4930572">tags</span><span class="op" id="4930576">)</span>&nbsp;<span class="op" id="4930578">==</span>&nbsp;<span class="num" id="4930581">0</span>&nbsp;<span class="op" id="4930583">||</span>&nbsp;<span class="ident" id="4930586"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4930587">.</span><span class="ident" id="4930588">tags</span><span class="op" id="4930592">[</span><span class="builtinfunc" id="4930593">len</span><span class="op" id="4930596">(</span><span class="ident" id="4930597"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4930598">.</span><span class="ident" id="4930599">tags</span><span class="op" id="4930603">)</span><span class="op" id="4930604">-</span><span class="num" id="4930605">1</span><span class="op" id="4930606">]</span><span class="op" id="4930607">.</span><span class="ident" id="4930608">Local</span>&nbsp;<span class="op" id="4930614">==</span>&nbsp;<span class="string" id="4930617">&#34;&#34;</span>&nbsp;<span class="op" id="4930620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930624">return</span>&nbsp;<span class="ident" id="4930631"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4930634">.</span><span class="ident" id="4930635">Errorf</span><span class="op" id="4930641">(</span><span class="string" id="4930642">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;without&nbsp;start&nbsp;tag&#34;</span><span class="op" id="4930680">,</span>&nbsp;<span class="ident" id="4930682"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4930686">.</span><span class="ident" id="4930687">Local</span><span class="op" id="4930692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930698">if</span>&nbsp;<span class="ident" id="4930701">top</span>&nbsp;<span class="op" id="4930705">:=</span>&nbsp;<span class="ident" id="4930708"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4930709">.</span><span class="ident" id="4930710">tags</span><span class="op" id="4930714">[</span><span class="builtinfunc" id="4930715">len</span><span class="op" id="4930718">(</span><span class="ident" id="4930719"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4930720">.</span><span class="ident" id="4930721">tags</span><span class="op" id="4930725">)</span><span class="op" id="4930726">-</span><span class="num" id="4930727">1</span><span class="op" id="4930728">]</span><span class="op" id="4930729">;</span>&nbsp;<span class="ident" id="4930731"><a href="/encoding/xml/marshal.go.html#4930701">top</a></span>&nbsp;<span class="op" id="4930735">!=</span>&nbsp;<span class="ident" id="4930738"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span>&nbsp;<span class="op" id="4930743">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930747">if</span>&nbsp;<span class="ident" id="4930750"><a href="/encoding/xml/marshal.go.html#4930701">top</a></span><span class="op" id="4930753">.</span><span class="ident" id="4930754">Local</span>&nbsp;<span class="op" id="4930760">!=</span>&nbsp;<span class="ident" id="4930763"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4930767">.</span><span class="ident" id="4930768">Local</span>&nbsp;<span class="op" id="4930774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930779">return</span>&nbsp;<span class="ident" id="4930786"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4930789">.</span><span class="ident" id="4930790">Errorf</span><span class="op" id="4930796">(</span><span class="string" id="4930797">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;does&nbsp;not&nbsp;match&nbsp;start&nbsp;tag&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="4930847">,</span>&nbsp;<span class="ident" id="4930849"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4930853">.</span><span class="ident" id="4930854">Local</span><span class="op" id="4930859">,</span>&nbsp;<span class="ident" id="4930861"><a href="/encoding/xml/marshal.go.html#4930701">top</a></span><span class="op" id="4930864">.</span><span class="ident" id="4930865">Local</span><span class="op" id="4930870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4930874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4930878">return</span>&nbsp;<span class="ident" id="4930885"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4930888">.</span><span class="ident" id="4930889">Errorf</span><span class="op" id="4930895">(</span><span class="string" id="4930896">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;in&nbsp;namespace&nbsp;%s&nbsp;does&nbsp;not&nbsp;match&nbsp;start&nbsp;tag&nbsp;&lt;%s&gt;&nbsp;in&nbsp;namespace&nbsp;%s&#34;</span><span class="op" id="4930978">,</span>&nbsp;<span class="ident" id="4930980"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4930984">.</span><span class="ident" id="4930985">Local</span><span class="op" id="4930990">,</span>&nbsp;<span class="ident" id="4930992"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4930996">.</span><span class="ident" id="4930997">Space</span><span class="op" id="4931002">,</span>&nbsp;<span class="ident" id="4931004"><a href="/encoding/xml/marshal.go.html#4930701">top</a></span><span class="op" id="4931007">.</span><span class="ident" id="4931008">Local</span><span class="op" id="4931013">,</span>&nbsp;<span class="ident" id="4931015"><a href="/encoding/xml/marshal.go.html#4930701">top</a></span><span class="op" id="4931018">.</span><span class="ident" id="4931019">Space</span><span class="op" id="4931024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4931027">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931030"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931031">.</span><span class="ident" id="4931032">tags</span>&nbsp;<span class="op" id="4931037">=</span>&nbsp;<span class="ident" id="4931039"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931040">.</span><span class="ident" id="4931041">tags</span><span class="op" id="4931045">[</span><span class="op" id="4931046">:</span><span class="builtinfunc" id="4931047">len</span><span class="op" id="4931050">(</span><span class="ident" id="4931051"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931052">.</span><span class="ident" id="4931053">tags</span><span class="op" id="4931057">)</span><span class="op" id="4931058">-</span><span class="num" id="4931059">1</span><span class="op" id="4931060">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931064"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931065">.</span><span class="ident" id="4931066">writeIndent</span><span class="op" id="4931077">(</span><span class="op" id="4931078">-</span><span class="num" id="4931079">1</span><span class="op" id="4931080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931083"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931084">.</span><span class="ident" id="4931085">WriteByte</span><span class="op" id="4931094">(</span><span class="string" id="4931095">&#39;&lt;&#39;</span><span class="op" id="4931098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931101"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931102">.</span><span class="ident" id="4931103">WriteByte</span><span class="op" id="4931112">(</span><span class="string" id="4931113">&#39;/&#39;</span><span class="op" id="4931116">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931119"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931120">.</span><span class="ident" id="4931121">WriteString</span><span class="op" id="4931132">(</span><span class="ident" id="4931133"><a href="/encoding/xml/marshal.go.html#4930468">name</a></span><span class="op" id="4931137">.</span><span class="ident" id="4931138">Local</span><span class="op" id="4931143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931146"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931147">.</span><span class="ident" id="4931148">WriteByte</span><span class="op" id="4931157">(</span><span class="string" id="4931158">&#39;&gt;&#39;</span><span class="op" id="4931161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931164"><a href="/encoding/xml/marshal.go.html#4930447">p</a></span><span class="op" id="4931165">.</span><span class="ident" id="4931166">popPrefix</span><span class="op" id="4931175">(</span><span class="op" id="4931176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931179">return</span>&nbsp;<span class="ident" id="4931186">nil</span><br>
<span class="lineno"></span><span class="op" id="4931190">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="4931193">func</span>&nbsp;<span class="op" id="4931198">(</span><span class="ident" id="4931199">p</span>&nbsp;<span class="op" id="4931201">*</span><span class="ident" id="4931202"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4931209">)</span>&nbsp;<span class="ident" id="4931211">marshalSimple</span><span class="op" id="4931224">(</span><span class="ident" id="4931225">typ</span>&nbsp;<span class="ident" id="4931229"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931236">.</span><span class="ident" id="4931237">Type</span><span class="op" id="4931241">,</span>&nbsp;<span class="ident" id="4931243">val</span>&nbsp;<span class="ident" id="4931247"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931254">.</span><span class="ident" id="4931255">Value</span><span class="op" id="4931260">)</span>&nbsp;<span class="op" id="4931262">(</span><span class="builtintype" id="4931263">string</span><span class="op" id="4931269">,</span>&nbsp;<span class="op" id="4931271">[</span><span class="op" id="4931272">]</span><span class="builtintype" id="4931273">byte</span><span class="op" id="4931277">,</span>&nbsp;<span class="builtintype" id="4931279">error</span><span class="op" id="4931284">)</span>&nbsp;<span class="op" id="4931286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931289">switch</span>&nbsp;<span class="ident" id="4931296"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931299">.</span><span class="ident" id="4931300">Kind</span><span class="op" id="4931304">(</span><span class="op" id="4931305">)</span>&nbsp;<span class="op" id="4931307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931310">case</span>&nbsp;<span class="ident" id="4931315"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931322">.</span><span class="ident" id="4931323">Int</span><span class="op" id="4931326">,</span>&nbsp;<span class="ident" id="4931328"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931335">.</span><span class="ident" id="4931336">Int8</span><span class="op" id="4931340">,</span>&nbsp;<span class="ident" id="4931342"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931349">.</span><span class="ident" id="4931350">Int16</span><span class="op" id="4931355">,</span>&nbsp;<span class="ident" id="4931357"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931364">.</span><span class="ident" id="4931365">Int32</span><span class="op" id="4931370">,</span>&nbsp;<span class="ident" id="4931372"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931379">.</span><span class="ident" id="4931380">Int64</span><span class="op" id="4931385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931389">return</span>&nbsp;<span class="ident" id="4931396"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4931403">.</span><span class="ident" id="4931404">FormatInt</span><span class="op" id="4931413">(</span><span class="ident" id="4931414"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931417">.</span><span class="ident" id="4931418">Int</span><span class="op" id="4931421">(</span><span class="op" id="4931422">)</span><span class="op" id="4931423">,</span>&nbsp;<span class="num" id="4931425">10</span><span class="op" id="4931427">)</span><span class="op" id="4931428">,</span>&nbsp;<span class="ident" id="4931430">nil</span><span class="op" id="4931433">,</span>&nbsp;<span class="ident" id="4931435">nil</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931440">case</span>&nbsp;<span class="ident" id="4931445"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931452">.</span><span class="ident" id="4931453">Uint</span><span class="op" id="4931457">,</span>&nbsp;<span class="ident" id="4931459"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931466">.</span><span class="ident" id="4931467">Uint8</span><span class="op" id="4931472">,</span>&nbsp;<span class="ident" id="4931474"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931481">.</span><span class="ident" id="4931482">Uint16</span><span class="op" id="4931488">,</span>&nbsp;<span class="ident" id="4931490"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931497">.</span><span class="ident" id="4931498">Uint32</span><span class="op" id="4931504">,</span>&nbsp;<span class="ident" id="4931506"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931513">.</span><span class="ident" id="4931514">Uint64</span><span class="op" id="4931520">,</span>&nbsp;<span class="ident" id="4931522"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931529">.</span><span class="ident" id="4931530">Uintptr</span><span class="op" id="4931537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931541">return</span>&nbsp;<span class="ident" id="4931548"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4931555">.</span><span class="ident" id="4931556">FormatUint</span><span class="op" id="4931566">(</span><span class="ident" id="4931567"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931570">.</span><span class="ident" id="4931571">Uint</span><span class="op" id="4931575">(</span><span class="op" id="4931576">)</span><span class="op" id="4931577">,</span>&nbsp;<span class="num" id="4931579">10</span><span class="op" id="4931581">)</span><span class="op" id="4931582">,</span>&nbsp;<span class="ident" id="4931584">nil</span><span class="op" id="4931587">,</span>&nbsp;<span class="ident" id="4931589">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931594">case</span>&nbsp;<span class="ident" id="4931599"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931606">.</span><span class="ident" id="4931607">Float32</span><span class="op" id="4931614">,</span>&nbsp;<span class="ident" id="4931616"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931623">.</span><span class="ident" id="4931624">Float64</span><span class="op" id="4931631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931635">return</span>&nbsp;<span class="ident" id="4931642"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4931649">.</span><span class="ident" id="4931650">FormatFloat</span><span class="op" id="4931661">(</span><span class="ident" id="4931662"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931665">.</span><span class="ident" id="4931666">Float</span><span class="op" id="4931671">(</span><span class="op" id="4931672">)</span><span class="op" id="4931673">,</span>&nbsp;<span class="string" id="4931675">&#39;g&#39;</span><span class="op" id="4931678">,</span>&nbsp;<span class="op" id="4931680">-</span><span class="num" id="4931681">1</span><span class="op" id="4931682">,</span>&nbsp;<span class="ident" id="4931684"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931687">.</span><span class="ident" id="4931688">Type</span><span class="op" id="4931692">(</span><span class="op" id="4931693">)</span><span class="op" id="4931694">.</span><span class="ident" id="4931695">Bits</span><span class="op" id="4931699">(</span><span class="op" id="4931700">)</span><span class="op" id="4931701">)</span><span class="op" id="4931702">,</span>&nbsp;<span class="ident" id="4931704">nil</span><span class="op" id="4931707">,</span>&nbsp;<span class="ident" id="4931709">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931714">case</span>&nbsp;<span class="ident" id="4931719"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931726">.</span><span class="ident" id="4931727">String</span><span class="op" id="4931733">:</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931737">return</span>&nbsp;<span class="ident" id="4931744"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931747">.</span><span class="ident" id="4931748">String</span><span class="op" id="4931754">(</span><span class="op" id="4931755">)</span><span class="op" id="4931756">,</span>&nbsp;<span class="ident" id="4931758">nil</span><span class="op" id="4931761">,</span>&nbsp;<span class="ident" id="4931763">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931768">case</span>&nbsp;<span class="ident" id="4931773"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931780">.</span><span class="ident" id="4931781">Bool</span><span class="op" id="4931785">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931789">return</span>&nbsp;<span class="ident" id="4931796"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4931803">.</span><span class="ident" id="4931804">FormatBool</span><span class="op" id="4931814">(</span><span class="ident" id="4931815"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931818">.</span><span class="ident" id="4931819">Bool</span><span class="op" id="4931823">(</span><span class="op" id="4931824">)</span><span class="op" id="4931825">)</span><span class="op" id="4931826">,</span>&nbsp;<span class="ident" id="4931828">nil</span><span class="op" id="4931831">,</span>&nbsp;<span class="ident" id="4931833">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931838">case</span>&nbsp;<span class="ident" id="4931843"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931850">.</span><span class="ident" id="4931851">Array</span><span class="op" id="4931856">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931860">if</span>&nbsp;<span class="ident" id="4931863"><a href="/encoding/xml/marshal.go.html#4931225">typ</a></span><span class="op" id="4931866">.</span><span class="ident" id="4931867">Elem</span><span class="op" id="4931871">(</span><span class="op" id="4931872">)</span><span class="op" id="4931873">.</span><span class="ident" id="4931874">Kind</span><span class="op" id="4931878">(</span><span class="op" id="4931879">)</span>&nbsp;<span class="op" id="4931881">!=</span>&nbsp;<span class="ident" id="4931884"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4931891">.</span><span class="ident" id="4931892">Uint8</span>&nbsp;<span class="op" id="4931898">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931903">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4931911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4931915">//&nbsp;[...]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931930">var</span>&nbsp;<span class="ident" id="4931934">bytes</span>&nbsp;<span class="op" id="4931940">[</span><span class="op" id="4931941">]</span><span class="builtintype" id="4931942">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4931949">if</span>&nbsp;<span class="ident" id="4931952"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931955">.</span><span class="ident" id="4931956">CanAddr</span><span class="op" id="4931963">(</span><span class="op" id="4931964">)</span>&nbsp;<span class="op" id="4931966">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4931971"><a href="/encoding/xml/marshal.go.html#4931934">bytes</a></span>&nbsp;<span class="op" id="4931977">=</span>&nbsp;<span class="ident" id="4931979"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931982">.</span><span class="ident" id="4931983">Slice</span><span class="op" id="4931988">(</span><span class="num" id="4931989">0</span><span class="op" id="4931990">,</span>&nbsp;<span class="ident" id="4931992"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4931995">.</span><span class="ident" id="4931996">Len</span><span class="op" id="4931999">(</span><span class="op" id="4932000">)</span><span class="op" id="4932001">)</span><span class="op" id="4932002">.</span><span class="ident" id="4932003">Bytes</span><span class="op" id="4932008">(</span><span class="op" id="4932009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932013">}</span>&nbsp;<span class="keyword" id="4932015">else</span>&nbsp;<span class="op" id="4932020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932025"><a href="/encoding/xml/marshal.go.html#4931934">bytes</a></span>&nbsp;<span class="op" id="4932031">=</span>&nbsp;<span class="builtinfunc" id="4932033">make</span><span class="op" id="4932037">(</span><span class="op" id="4932038">[</span><span class="op" id="4932039">]</span><span class="builtintype" id="4932040">byte</span><span class="op" id="4932044">,</span>&nbsp;<span class="ident" id="4932046"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4932049">.</span><span class="ident" id="4932050">Len</span><span class="op" id="4932053">(</span><span class="op" id="4932054">)</span><span class="op" id="4932055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932060"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932067">.</span><span class="ident" id="4932068">Copy</span><span class="op" id="4932072">(</span><span class="ident" id="4932073"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932080">.</span><span class="ident" id="4932081">ValueOf</span><span class="op" id="4932088">(</span><span class="ident" id="4932089"><a href="/encoding/xml/marshal.go.html#4931934">bytes</a></span><span class="op" id="4932094">)</span><span class="op" id="4932095">,</span>&nbsp;<span class="ident" id="4932097"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4932100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932104">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932108">return</span>&nbsp;<span class="string" id="4932115">&#34;&#34;</span><span class="op" id="4932117">,</span>&nbsp;<span class="ident" id="4932119"><a href="/encoding/xml/marshal.go.html#4931934">bytes</a></span><span class="op" id="4932124">,</span>&nbsp;<span class="ident" id="4932126">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932131">case</span>&nbsp;<span class="ident" id="4932136"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932143">.</span><span class="ident" id="4932144">Slice</span><span class="op" id="4932149">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932153">if</span>&nbsp;<span class="ident" id="4932156"><a href="/encoding/xml/marshal.go.html#4931225">typ</a></span><span class="op" id="4932159">.</span><span class="ident" id="4932160">Elem</span><span class="op" id="4932164">(</span><span class="op" id="4932165">)</span><span class="op" id="4932166">.</span><span class="ident" id="4932167">Kind</span><span class="op" id="4932171">(</span><span class="op" id="4932172">)</span>&nbsp;<span class="op" id="4932174">!=</span>&nbsp;<span class="ident" id="4932177"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932184">.</span><span class="ident" id="4932185">Uint8</span>&nbsp;<span class="op" id="4932191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932196">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932204">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4932208">//&nbsp;[]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932220">return</span>&nbsp;<span class="string" id="4932227">&#34;&#34;</span><span class="op" id="4932229">,</span>&nbsp;<span class="ident" id="4932231"><a href="/encoding/xml/marshal.go.html#4931243">val</a></span><span class="op" id="4932234">.</span><span class="ident" id="4932235">Bytes</span><span class="op" id="4932240">(</span><span class="op" id="4932241">)</span><span class="op" id="4932242">,</span>&nbsp;<span class="ident" id="4932244">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932252">return</span>&nbsp;<span class="string" id="4932259">&#34;&#34;</span><span class="op" id="4932261">,</span>&nbsp;<span class="ident" id="4932263">nil</span><span class="op" id="4932266">,</span>&nbsp;<span class="op" id="4932268">&amp;</span><span class="ident" id="4932269"><a href="/encoding/xml/marshal.go.html#4937378">UnsupportedTypeError</a></span><span class="op" id="4932289">{</span><span class="ident" id="4932290"><a href="/encoding/xml/marshal.go.html#4931225">typ</a></span><span class="op" id="4932293">}</span><br>
<span class="lineno"></span><span class="op" id="4932295">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="keyword" id="4932298">var</span>&nbsp;<span class="ident" id="4932302">ddBytes</span>&nbsp;<span class="op" id="4932310">=</span>&nbsp;<span class="op" id="4932312">[</span><span class="op" id="4932313">]</span><span class="builtintype" id="4932314">byte</span><span class="op" id="4932318">(</span><span class="string" id="4932319">&#34;--&#34;</span><span class="op" id="4932323">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4932326">func</span>&nbsp;<span class="op" id="4932331">(</span><span class="ident" id="4932332">p</span>&nbsp;<span class="op" id="4932334">*</span><span class="ident" id="4932335"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4932342">)</span>&nbsp;<span class="ident" id="4932344">marshalStruct</span><span class="op" id="4932357">(</span><span class="ident" id="4932358">tinfo</span>&nbsp;<span class="op" id="4932364">*</span><span class="ident" id="4932365"><a href="/encoding/xml/typeinfo.go.html#4958654">typeInfo</a></span><span class="op" id="4932373">,</span>&nbsp;<span class="ident" id="4932375">val</span>&nbsp;<span class="ident" id="4932379"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932386">.</span><span class="ident" id="4932387">Value</span><span class="op" id="4932392">)</span>&nbsp;<span class="builtintype" id="4932394">error</span>&nbsp;<span class="op" id="4932400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932403">s</span>&nbsp;<span class="op" id="4932405">:=</span>&nbsp;<span class="ident" id="4932408"><a href="/encoding/xml/marshal.go.html#4936319">parentStack</a></span><span class="op" id="4932419">{</span><span class="ident" id="4932420">p</span><span class="op" id="4932421">:</span>&nbsp;<span class="ident" id="4932423"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4932424">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932427">for</span>&nbsp;<span class="ident" id="4932431">i</span>&nbsp;<span class="op" id="4932433">:=</span>&nbsp;<span class="keyword" id="4932436">range</span>&nbsp;<span class="ident" id="4932442"><a href="/encoding/xml/marshal.go.html#4932358">tinfo</a></span><span class="op" id="4932447">.</span><span class="ident" id="4932448">fields</span>&nbsp;<span class="op" id="4932455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932459">finfo</span>&nbsp;<span class="op" id="4932465">:=</span>&nbsp;<span class="op" id="4932468">&amp;</span><span class="ident" id="4932469"><a href="/encoding/xml/marshal.go.html#4932358">tinfo</a></span><span class="op" id="4932474">.</span><span class="ident" id="4932475">fields</span><span class="op" id="4932481">[</span><span class="ident" id="4932482"><a href="/encoding/xml/marshal.go.html#4932431">i</a></span><span class="op" id="4932483">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932487">if</span>&nbsp;<span class="ident" id="4932490"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4932495">.</span><span class="ident" id="4932496">flags</span><span class="op" id="4932501">&amp;</span><span class="ident" id="4932502"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span>&nbsp;<span class="op" id="4932508">!=</span>&nbsp;<span class="num" id="4932511">0</span>&nbsp;<span class="op" id="4932513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932518">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932529">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932533">vf</span>&nbsp;<span class="op" id="4932536">:=</span>&nbsp;<span class="ident" id="4932539"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4932544">.</span><span class="ident" id="4932545">value</span><span class="op" id="4932550">(</span><span class="ident" id="4932551"><a href="/encoding/xml/marshal.go.html#4932375">val</a></span><span class="op" id="4932554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4932559">//&nbsp;Dereference&nbsp;or&nbsp;skip&nbsp;nil&nbsp;pointer,&nbsp;interface&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932615">switch</span>&nbsp;<span class="ident" id="4932622"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932624">.</span><span class="ident" id="4932625">Kind</span><span class="op" id="4932629">(</span><span class="op" id="4932630">)</span>&nbsp;<span class="op" id="4932632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932636">case</span>&nbsp;<span class="ident" id="4932641"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932648">.</span><span class="ident" id="4932649">Ptr</span><span class="op" id="4932652">,</span>&nbsp;<span class="ident" id="4932654"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4932661">.</span><span class="ident" id="4932662">Interface</span><span class="op" id="4932671">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932676">if</span>&nbsp;<span class="op" id="4932679">!</span><span class="ident" id="4932680"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932682">.</span><span class="ident" id="4932683">IsNil</span><span class="op" id="4932688">(</span><span class="op" id="4932689">)</span>&nbsp;<span class="op" id="4932691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932697"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span>&nbsp;<span class="op" id="4932700">=</span>&nbsp;<span class="ident" id="4932702"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932704">.</span><span class="ident" id="4932705">Elem</span><span class="op" id="4932709">(</span><span class="op" id="4932710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932724">switch</span>&nbsp;<span class="ident" id="4932731"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4932736">.</span><span class="ident" id="4932737">flags</span>&nbsp;<span class="op" id="4932743">&amp;</span>&nbsp;<span class="ident" id="4932745"><a href="/encoding/xml/typeinfo.go.html#4959023">fMode</a></span>&nbsp;<span class="op" id="4932751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932755">case</span>&nbsp;<span class="ident" id="4932760"><a href="/encoding/xml/typeinfo.go.html#4958971">fCharData</a></span><span class="op" id="4932769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932774">if</span>&nbsp;<span class="ident" id="4932777"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932779">.</span><span class="ident" id="4932780">CanInterface</span><span class="op" id="4932792">(</span><span class="op" id="4932793">)</span>&nbsp;<span class="op" id="4932795">&amp;&amp;</span>&nbsp;<span class="ident" id="4932798"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932800">.</span><span class="ident" id="4932801">Type</span><span class="op" id="4932805">(</span><span class="op" id="4932806">)</span><span class="op" id="4932807">.</span><span class="ident" id="4932808">Implements</span><span class="op" id="4932818">(</span><span class="ident" id="4932819"><a href="/encoding/xml/marshal.go.html#4922612">textMarshalerType</a></span><span class="op" id="4932836">)</span>&nbsp;<span class="op" id="4932838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932844">data</span><span class="op" id="4932848">,</span>&nbsp;<span class="ident" id="4932850">err</span>&nbsp;<span class="op" id="4932854">:=</span>&nbsp;<span class="ident" id="4932857"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932859">.</span><span class="ident" id="4932860">Interface</span><span class="op" id="4932869">(</span><span class="op" id="4932870">)</span><span class="op" id="4932871">.</span><span class="op" id="4932872">(</span><span class="ident" id="4932873"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4932881">.</span><span class="ident" id="4932882">TextMarshaler</span><span class="op" id="4932895">)</span><span class="op" id="4932896">.</span><span class="ident" id="4932897">MarshalText</span><span class="op" id="4932908">(</span><span class="op" id="4932909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932915">if</span>&nbsp;<span class="ident" id="4932918"><a href="/encoding/xml/marshal.go.html#4932850">err</a></span>&nbsp;<span class="op" id="4932922">!=</span>&nbsp;<span class="ident" id="4932925">nil</span>&nbsp;<span class="op" id="4932929">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932936">return</span>&nbsp;<span class="ident" id="4932943"><a href="/encoding/xml/marshal.go.html#4932850">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4932957"><a href="/encoding/xml/xml.go.html#5011723">Escape</a></span><span class="op" id="4932963">(</span><span class="ident" id="4932964"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4932965">,</span>&nbsp;<span class="ident" id="4932967"><a href="/encoding/xml/marshal.go.html#4932844">data</a></span><span class="op" id="4932971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932977">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4932989">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4932994">if</span>&nbsp;<span class="ident" id="4932997"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4932999">.</span><span class="ident" id="4933000">CanAddr</span><span class="op" id="4933007">(</span><span class="op" id="4933008">)</span>&nbsp;<span class="op" id="4933010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933016">pv</span>&nbsp;<span class="op" id="4933019">:=</span>&nbsp;<span class="ident" id="4933022"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933024">.</span><span class="ident" id="4933025">Addr</span><span class="op" id="4933029">(</span><span class="op" id="4933030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933036">if</span>&nbsp;<span class="ident" id="4933039"><a href="/encoding/xml/marshal.go.html#4933016">pv</a></span><span class="op" id="4933041">.</span><span class="ident" id="4933042">CanInterface</span><span class="op" id="4933054">(</span><span class="op" id="4933055">)</span>&nbsp;<span class="op" id="4933057">&amp;&amp;</span>&nbsp;<span class="ident" id="4933060"><a href="/encoding/xml/marshal.go.html#4933016">pv</a></span><span class="op" id="4933062">.</span><span class="ident" id="4933063">Type</span><span class="op" id="4933067">(</span><span class="op" id="4933068">)</span><span class="op" id="4933069">.</span><span class="ident" id="4933070">Implements</span><span class="op" id="4933080">(</span><span class="ident" id="4933081"><a href="/encoding/xml/marshal.go.html#4922612">textMarshalerType</a></span><span class="op" id="4933098">)</span>&nbsp;<span class="op" id="4933100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933107">data</span><span class="op" id="4933111">,</span>&nbsp;<span class="ident" id="4933113">err</span>&nbsp;<span class="op" id="4933117">:=</span>&nbsp;<span class="ident" id="4933120"><a href="/encoding/xml/marshal.go.html#4933016">pv</a></span><span class="op" id="4933122">.</span><span class="ident" id="4933123">Interface</span><span class="op" id="4933132">(</span><span class="op" id="4933133">)</span><span class="op" id="4933134">.</span><span class="op" id="4933135">(</span><span class="ident" id="4933136"><a href="/encoding/xml/marshal.go.html#4911559">encoding</a></span><span class="op" id="4933144">.</span><span class="ident" id="4933145">TextMarshaler</span><span class="op" id="4933158">)</span><span class="op" id="4933159">.</span><span class="ident" id="4933160">MarshalText</span><span class="op" id="4933171">(</span><span class="op" id="4933172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933179">if</span>&nbsp;<span class="ident" id="4933182"><a href="/encoding/xml/marshal.go.html#4933113">err</a></span>&nbsp;<span class="op" id="4933186">!=</span>&nbsp;<span class="ident" id="4933189">nil</span>&nbsp;<span class="op" id="4933193">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933201">return</span>&nbsp;<span class="ident" id="4933208"><a href="/encoding/xml/marshal.go.html#4933113">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4933217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933224"><a href="/encoding/xml/xml.go.html#5011723">Escape</a></span><span class="op" id="4933230">(</span><span class="ident" id="4933231"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4933232">,</span>&nbsp;<span class="ident" id="4933234"><a href="/encoding/xml/marshal.go.html#4933107">data</a></span><span class="op" id="4933238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933245">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4933258">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4933263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933268">var</span>&nbsp;<span class="ident" id="4933272">scratch</span>&nbsp;<span class="op" id="4933280">[</span><span class="num" id="4933281">64</span><span class="op" id="4933283">]</span><span class="builtintype" id="4933284">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933292">switch</span>&nbsp;<span class="ident" id="4933299"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933301">.</span><span class="ident" id="4933302">Kind</span><span class="op" id="4933306">(</span><span class="op" id="4933307">)</span>&nbsp;<span class="op" id="4933309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933314">case</span>&nbsp;<span class="ident" id="4933319"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933326">.</span><span class="ident" id="4933327">Int</span><span class="op" id="4933330">,</span>&nbsp;<span class="ident" id="4933332"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933339">.</span><span class="ident" id="4933340">Int8</span><span class="op" id="4933344">,</span>&nbsp;<span class="ident" id="4933346"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933353">.</span><span class="ident" id="4933354">Int16</span><span class="op" id="4933359">,</span>&nbsp;<span class="ident" id="4933361"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933368">.</span><span class="ident" id="4933369">Int32</span><span class="op" id="4933374">,</span>&nbsp;<span class="ident" id="4933376"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933383">.</span><span class="ident" id="4933384">Int64</span><span class="op" id="4933389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933395"><a href="/encoding/xml/xml.go.html#5011723">Escape</a></span><span class="op" id="4933401">(</span><span class="ident" id="4933402"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4933403">,</span>&nbsp;<span class="ident" id="4933405"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4933412">.</span><span class="ident" id="4933413">AppendInt</span><span class="op" id="4933422">(</span><span class="ident" id="4933423"><a href="/encoding/xml/marshal.go.html#4933272">scratch</a></span><span class="op" id="4933430">[</span><span class="op" id="4933431">:</span><span class="num" id="4933432">0</span><span class="op" id="4933433">]</span><span class="op" id="4933434">,</span>&nbsp;<span class="ident" id="4933436"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933438">.</span><span class="ident" id="4933439">Int</span><span class="op" id="4933442">(</span><span class="op" id="4933443">)</span><span class="op" id="4933444">,</span>&nbsp;<span class="num" id="4933446">10</span><span class="op" id="4933448">)</span><span class="op" id="4933449">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933454">case</span>&nbsp;<span class="ident" id="4933459"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933466">.</span><span class="ident" id="4933467">Uint</span><span class="op" id="4933471">,</span>&nbsp;<span class="ident" id="4933473"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933480">.</span><span class="ident" id="4933481">Uint8</span><span class="op" id="4933486">,</span>&nbsp;<span class="ident" id="4933488"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933495">.</span><span class="ident" id="4933496">Uint16</span><span class="op" id="4933502">,</span>&nbsp;<span class="ident" id="4933504"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933511">.</span><span class="ident" id="4933512">Uint32</span><span class="op" id="4933518">,</span>&nbsp;<span class="ident" id="4933520"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933527">.</span><span class="ident" id="4933528">Uint64</span><span class="op" id="4933534">,</span>&nbsp;<span class="ident" id="4933536"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933543">.</span><span class="ident" id="4933544">Uintptr</span><span class="op" id="4933551">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933557"><a href="/encoding/xml/xml.go.html#5011723">Escape</a></span><span class="op" id="4933563">(</span><span class="ident" id="4933564"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4933565">,</span>&nbsp;<span class="ident" id="4933567"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4933574">.</span><span class="ident" id="4933575">AppendUint</span><span class="op" id="4933585">(</span><span class="ident" id="4933586"><a href="/encoding/xml/marshal.go.html#4933272">scratch</a></span><span class="op" id="4933593">[</span><span class="op" id="4933594">:</span><span class="num" id="4933595">0</span><span class="op" id="4933596">]</span><span class="op" id="4933597">,</span>&nbsp;<span class="ident" id="4933599"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933601">.</span><span class="ident" id="4933602">Uint</span><span class="op" id="4933606">(</span><span class="op" id="4933607">)</span><span class="op" id="4933608">,</span>&nbsp;<span class="num" id="4933610">10</span><span class="op" id="4933612">)</span><span class="op" id="4933613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933618">case</span>&nbsp;<span class="ident" id="4933623"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933630">.</span><span class="ident" id="4933631">Float32</span><span class="op" id="4933638">,</span>&nbsp;<span class="ident" id="4933640"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933647">.</span><span class="ident" id="4933648">Float64</span><span class="op" id="4933655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933661"><a href="/encoding/xml/xml.go.html#5011723">Escape</a></span><span class="op" id="4933667">(</span><span class="ident" id="4933668"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4933669">,</span>&nbsp;<span class="ident" id="4933671"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4933678">.</span><span class="ident" id="4933679">AppendFloat</span><span class="op" id="4933690">(</span><span class="ident" id="4933691"><a href="/encoding/xml/marshal.go.html#4933272">scratch</a></span><span class="op" id="4933698">[</span><span class="op" id="4933699">:</span><span class="num" id="4933700">0</span><span class="op" id="4933701">]</span><span class="op" id="4933702">,</span>&nbsp;<span class="ident" id="4933704"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933706">.</span><span class="ident" id="4933707">Float</span><span class="op" id="4933712">(</span><span class="op" id="4933713">)</span><span class="op" id="4933714">,</span>&nbsp;<span class="string" id="4933716">&#39;g&#39;</span><span class="op" id="4933719">,</span>&nbsp;<span class="op" id="4933721">-</span><span class="num" id="4933722">1</span><span class="op" id="4933723">,</span>&nbsp;<span class="ident" id="4933725"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933727">.</span><span class="ident" id="4933728">Type</span><span class="op" id="4933732">(</span><span class="op" id="4933733">)</span><span class="op" id="4933734">.</span><span class="ident" id="4933735">Bits</span><span class="op" id="4933739">(</span><span class="op" id="4933740">)</span><span class="op" id="4933741">)</span><span class="op" id="4933742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933747">case</span>&nbsp;<span class="ident" id="4933752"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933759">.</span><span class="ident" id="4933760">Bool</span><span class="op" id="4933764">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4933770"><a href="/encoding/xml/xml.go.html#5011723">Escape</a></span><span class="op" id="4933776">(</span><span class="ident" id="4933777"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4933778">,</span>&nbsp;<span class="ident" id="4933780"><a href="/encoding/xml/marshal.go.html#4911595">strconv</a></span><span class="op" id="4933787">.</span><span class="ident" id="4933788">AppendBool</span><span class="op" id="4933798">(</span><span class="ident" id="4933799"><a href="/encoding/xml/marshal.go.html#4933272">scratch</a></span><span class="op" id="4933806">[</span><span class="op" id="4933807">:</span><span class="num" id="4933808">0</span><span class="op" id="4933809">]</span><span class="op" id="4933810">,</span>&nbsp;<span class="ident" id="4933812"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933814">.</span><span class="ident" id="4933815">Bool</span><span class="op" id="4933819">(</span><span class="op" id="4933820">)</span><span class="op" id="4933821">)</span><span class="op" id="4933822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933827">case</span>&nbsp;<span class="ident" id="4933832"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933839">.</span><span class="ident" id="4933840">String</span><span class="op" id="4933846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933852">if</span>&nbsp;<span class="ident" id="4933855">err</span>&nbsp;<span class="op" id="4933859">:=</span>&nbsp;<span class="ident" id="4933862"><a href="/encoding/xml/xml.go.html#5010088">EscapeText</a></span><span class="op" id="4933872">(</span><span class="ident" id="4933873"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4933874">,</span>&nbsp;<span class="op" id="4933876">[</span><span class="op" id="4933877">]</span><span class="builtintype" id="4933878">byte</span><span class="op" id="4933882">(</span><span class="ident" id="4933883"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933885">.</span><span class="ident" id="4933886">String</span><span class="op" id="4933892">(</span><span class="op" id="4933893">)</span><span class="op" id="4933894">)</span><span class="op" id="4933895">)</span><span class="op" id="4933896">;</span>&nbsp;<span class="ident" id="4933898"><a href="/encoding/xml/marshal.go.html#4933855">err</a></span>&nbsp;<span class="op" id="4933902">!=</span>&nbsp;<span class="ident" id="4933905">nil</span>&nbsp;<span class="op" id="4933909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933916">return</span>&nbsp;<span class="ident" id="4933923"><a href="/encoding/xml/marshal.go.html#4933855">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4933931">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933936">case</span>&nbsp;<span class="ident" id="4933941"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4933948">.</span><span class="ident" id="4933949">Slice</span><span class="op" id="4933954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4933960">if</span>&nbsp;<span class="ident" id="4933963">elem</span><span class="op" id="4933967">,</span>&nbsp;<span class="ident" id="4933969">ok</span>&nbsp;<span class="op" id="4933972">:=</span>&nbsp;<span class="ident" id="4933975"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4933977">.</span><span class="ident" id="4933978">Interface</span><span class="op" id="4933987">(</span><span class="op" id="4933988">)</span><span class="op" id="4933989">.</span><span class="op" id="4933990">(</span><span class="op" id="4933991">[</span><span class="op" id="4933992">]</span><span class="builtintype" id="4933993">byte</span><span class="op" id="4933997">)</span><span class="op" id="4933998">;</span>&nbsp;<span class="ident" id="4934000"><a href="/encoding/xml/marshal.go.html#4933969">ok</a></span>&nbsp;<span class="op" id="4934003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934010">if</span>&nbsp;<span class="ident" id="4934013">err</span>&nbsp;<span class="op" id="4934017">:=</span>&nbsp;<span class="ident" id="4934020"><a href="/encoding/xml/xml.go.html#5010088">EscapeText</a></span><span class="op" id="4934030">(</span><span class="ident" id="4934031"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4934032">,</span>&nbsp;<span class="ident" id="4934034"><a href="/encoding/xml/marshal.go.html#4933963">elem</a></span><span class="op" id="4934038">)</span><span class="op" id="4934039">;</span>&nbsp;<span class="ident" id="4934041"><a href="/encoding/xml/marshal.go.html#4934013">err</a></span>&nbsp;<span class="op" id="4934045">!=</span>&nbsp;<span class="ident" id="4934048">nil</span>&nbsp;<span class="op" id="4934052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934060">return</span>&nbsp;<span class="ident" id="4934067"><a href="/encoding/xml/marshal.go.html#4934013">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934076">}</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934092">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934104">case</span>&nbsp;<span class="ident" id="4934109"><a href="/encoding/xml/typeinfo.go.html#4958993">fComment</a></span><span class="op" id="4934117">:</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934122">k</span>&nbsp;<span class="op" id="4934124">:=</span>&nbsp;<span class="ident" id="4934127"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4934129">.</span><span class="ident" id="4934130">Kind</span><span class="op" id="4934134">(</span><span class="op" id="4934135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934140">if</span>&nbsp;<span class="op" id="4934143">!</span><span class="op" id="4934144">(</span><span class="ident" id="4934145"><a href="/encoding/xml/marshal.go.html#4934122">k</a></span>&nbsp;<span class="op" id="4934147">==</span>&nbsp;<span class="ident" id="4934150"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4934157">.</span><span class="ident" id="4934158">String</span>&nbsp;<span class="op" id="4934165">||</span>&nbsp;<span class="ident" id="4934168"><a href="/encoding/xml/marshal.go.html#4934122">k</a></span>&nbsp;<span class="op" id="4934170">==</span>&nbsp;<span class="ident" id="4934173"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4934180">.</span><span class="ident" id="4934181">Slice</span>&nbsp;<span class="op" id="4934187">&amp;&amp;</span>&nbsp;<span class="ident" id="4934190"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4934192">.</span><span class="ident" id="4934193">Type</span><span class="op" id="4934197">(</span><span class="op" id="4934198">)</span><span class="op" id="4934199">.</span><span class="ident" id="4934200">Elem</span><span class="op" id="4934204">(</span><span class="op" id="4934205">)</span><span class="op" id="4934206">.</span><span class="ident" id="4934207">Kind</span><span class="op" id="4934211">(</span><span class="op" id="4934212">)</span>&nbsp;<span class="op" id="4934214">==</span>&nbsp;<span class="ident" id="4934217"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4934224">.</span><span class="ident" id="4934225">Uint8</span><span class="op" id="4934230">)</span>&nbsp;<span class="op" id="4934232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934238">return</span>&nbsp;<span class="ident" id="4934245"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4934248">.</span><span class="ident" id="4934249">Errorf</span><span class="op" id="4934255">(</span><span class="string" id="4934256">&#34;xml:&nbsp;bad&nbsp;type&nbsp;for&nbsp;comment&nbsp;field&nbsp;of&nbsp;%s&#34;</span><span class="op" id="4934295">,</span>&nbsp;<span class="ident" id="4934297"><a href="/encoding/xml/marshal.go.html#4932375">val</a></span><span class="op" id="4934300">.</span><span class="ident" id="4934301">Type</span><span class="op" id="4934305">(</span><span class="op" id="4934306">)</span><span class="op" id="4934307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934317">if</span>&nbsp;<span class="ident" id="4934320"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4934322">.</span><span class="ident" id="4934323">Len</span><span class="op" id="4934326">(</span><span class="op" id="4934327">)</span>&nbsp;<span class="op" id="4934329">==</span>&nbsp;<span class="num" id="4934332">0</span>&nbsp;<span class="op" id="4934334">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934340">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934357"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4934358">.</span><span class="ident" id="4934359">writeIndent</span><span class="op" id="4934370">(</span><span class="num" id="4934371">0</span><span class="op" id="4934372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934377"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4934378">.</span><span class="ident" id="4934379">WriteString</span><span class="op" id="4934390">(</span><span class="string" id="4934391">&#34;&lt;!--&#34;</span><span class="op" id="4934397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934402">dashDash</span>&nbsp;<span class="op" id="4934411">:=</span>&nbsp;<span class="builtintype" id="4934414">false</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934423">dashLast</span>&nbsp;<span class="op" id="4934432">:=</span>&nbsp;<span class="builtintype" id="4934435">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934444">switch</span>&nbsp;<span class="ident" id="4934451"><a href="/encoding/xml/marshal.go.html#4934122">k</a></span>&nbsp;<span class="op" id="4934453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934458">case</span>&nbsp;<span class="ident" id="4934463"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4934470">.</span><span class="ident" id="4934471">String</span><span class="op" id="4934477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934483">s</span>&nbsp;<span class="op" id="4934485">:=</span>&nbsp;<span class="ident" id="4934488"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4934490">.</span><span class="ident" id="4934491">String</span><span class="op" id="4934497">(</span><span class="op" id="4934498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934504"><a href="/encoding/xml/marshal.go.html#4934402">dashDash</a></span>&nbsp;<span class="op" id="4934513">=</span>&nbsp;<span class="ident" id="4934515"><a href="/encoding/xml/marshal.go.html#4911606">strings</a></span><span class="op" id="4934522">.</span><span class="ident" id="4934523">Index</span><span class="op" id="4934528">(</span><span class="ident" id="4934529"><a href="/encoding/xml/marshal.go.html#4934483">s</a></span><span class="op" id="4934530">,</span>&nbsp;<span class="string" id="4934532">&#34;--&#34;</span><span class="op" id="4934536">)</span>&nbsp;<span class="op" id="4934538">&gt;=</span>&nbsp;<span class="num" id="4934541">0</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934547"><a href="/encoding/xml/marshal.go.html#4934423">dashLast</a></span>&nbsp;<span class="op" id="4934556">=</span>&nbsp;<span class="ident" id="4934558"><a href="/encoding/xml/marshal.go.html#4934483">s</a></span><span class="op" id="4934559">[</span><span class="builtinfunc" id="4934560">len</span><span class="op" id="4934563">(</span><span class="ident" id="4934564"><a href="/encoding/xml/marshal.go.html#4934483">s</a></span><span class="op" id="4934565">)</span><span class="op" id="4934566">-</span><span class="num" id="4934567">1</span><span class="op" id="4934568">]</span>&nbsp;<span class="op" id="4934570">==</span>&nbsp;<span class="string" id="4934573">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934581">if</span>&nbsp;<span class="op" id="4934584">!</span><span class="ident" id="4934585"><a href="/encoding/xml/marshal.go.html#4934402">dashDash</a></span>&nbsp;<span class="op" id="4934594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934601"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4934602">.</span><span class="ident" id="4934603">WriteString</span><span class="op" id="4934614">(</span><span class="ident" id="4934615"><a href="/encoding/xml/marshal.go.html#4934483">s</a></span><span class="op" id="4934616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934627">case</span>&nbsp;<span class="ident" id="4934632"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4934639">.</span><span class="ident" id="4934640">Slice</span><span class="op" id="4934645">:</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934651">b</span>&nbsp;<span class="op" id="4934653">:=</span>&nbsp;<span class="ident" id="4934656"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4934658">.</span><span class="ident" id="4934659">Bytes</span><span class="op" id="4934664">(</span><span class="op" id="4934665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934671"><a href="/encoding/xml/marshal.go.html#4934402">dashDash</a></span>&nbsp;<span class="op" id="4934680">=</span>&nbsp;<span class="ident" id="4934682"><a href="/encoding/xml/marshal.go.html#4911550">bytes</a></span><span class="op" id="4934687">.</span><span class="ident" id="4934688">Index</span><span class="op" id="4934693">(</span><span class="ident" id="4934694"><a href="/encoding/xml/marshal.go.html#4934651">b</a></span><span class="op" id="4934695">,</span>&nbsp;<span class="ident" id="4934697"><a href="/encoding/xml/marshal.go.html#4932302">ddBytes</a></span><span class="op" id="4934704">)</span>&nbsp;<span class="op" id="4934706">&gt;=</span>&nbsp;<span class="num" id="4934709">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934715"><a href="/encoding/xml/marshal.go.html#4934423">dashLast</a></span>&nbsp;<span class="op" id="4934724">=</span>&nbsp;<span class="ident" id="4934726"><a href="/encoding/xml/marshal.go.html#4934651">b</a></span><span class="op" id="4934727">[</span><span class="builtinfunc" id="4934728">len</span><span class="op" id="4934731">(</span><span class="ident" id="4934732"><a href="/encoding/xml/marshal.go.html#4934651">b</a></span><span class="op" id="4934733">)</span><span class="op" id="4934734">-</span><span class="num" id="4934735">1</span><span class="op" id="4934736">]</span>&nbsp;<span class="op" id="4934738">==</span>&nbsp;<span class="string" id="4934741">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934749">if</span>&nbsp;<span class="op" id="4934752">!</span><span class="ident" id="4934753"><a href="/encoding/xml/marshal.go.html#4934402">dashDash</a></span>&nbsp;<span class="op" id="4934762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934769"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4934770">.</span><span class="ident" id="4934771">Write</span><span class="op" id="4934776">(</span><span class="ident" id="4934777"><a href="/encoding/xml/marshal.go.html#4934651">b</a></span><span class="op" id="4934778">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934789">default</span><span class="op" id="4934796">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4934802">panic</span><span class="op" id="4934807">(</span><span class="string" id="4934808">&#34;can&#39;t&nbsp;happen&#34;</span><span class="op" id="4934822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934832">if</span>&nbsp;<span class="ident" id="4934835"><a href="/encoding/xml/marshal.go.html#4934402">dashDash</a></span>&nbsp;<span class="op" id="4934844">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934850">return</span>&nbsp;<span class="ident" id="4934857"><a href="/encoding/xml/marshal.go.html#4911571">fmt</a></span><span class="op" id="4934860">.</span><span class="ident" id="4934861">Errorf</span><span class="op" id="4934867">(</span><span class="string" id="4934868">`xml:&nbsp;comments&nbsp;must&nbsp;not&nbsp;contain&nbsp;&#34;--&#34;`</span><span class="op" id="4934905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934915">if</span>&nbsp;<span class="ident" id="4934918"><a href="/encoding/xml/marshal.go.html#4934423">dashLast</a></span>&nbsp;<span class="op" id="4934927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4934933">//&nbsp;&#34;---&gt;&#34;&nbsp;is&nbsp;invalid&nbsp;grammar.&nbsp;Make&nbsp;it&nbsp;&#34;-&nbsp;--&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934983"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4934984">.</span><span class="ident" id="4934985">WriteByte</span><span class="op" id="4934994">(</span><span class="string" id="4934995">&#39;&nbsp;&#39;</span><span class="op" id="4934998">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935008"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4935009">.</span><span class="ident" id="4935010">WriteString</span><span class="op" id="4935021">(</span><span class="string" id="4935022">&#34;--&gt;&#34;</span><span class="op" id="4935027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935032">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935044">case</span>&nbsp;<span class="ident" id="4935049"><a href="/encoding/xml/typeinfo.go.html#4958982">fInnerXml</a></span><span class="op" id="4935058">:</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935063">iface</span>&nbsp;<span class="op" id="4935069">:=</span>&nbsp;<span class="ident" id="4935072"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4935074">.</span><span class="ident" id="4935075">Interface</span><span class="op" id="4935084">(</span><span class="op" id="4935085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935090">switch</span>&nbsp;<span class="ident" id="4935097">raw</span>&nbsp;<span class="op" id="4935101">:=</span>&nbsp;<span class="ident" id="4935104"><a href="/encoding/xml/marshal.go.html#4935063">iface</a></span><span class="op" id="4935109">.</span><span class="op" id="4935110">(</span><span class="keyword" id="4935111">type</span><span class="op" id="4935115">)</span>&nbsp;<span class="op" id="4935117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935122">case</span>&nbsp;<span class="op" id="4935127">[</span><span class="op" id="4935128">]</span><span class="builtintype" id="4935129">byte</span><span class="op" id="4935133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935139"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4935140">.</span><span class="ident" id="4935141">Write</span><span class="op" id="4935146">(</span><span class="ident" id="4935147"><a href="/encoding/xml/marshal.go.html#4935097">raw</a></span><span class="op" id="4935150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935156">continue</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935168">case</span>&nbsp;<span class="builtintype" id="4935173">string</span><span class="op" id="4935179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935185"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4935186">.</span><span class="ident" id="4935187">WriteString</span><span class="op" id="4935198">(</span><span class="ident" id="4935199"><a href="/encoding/xml/marshal.go.html#4935097">raw</a></span><span class="op" id="4935202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935208">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935225">case</span>&nbsp;<span class="ident" id="4935230"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span><span class="op" id="4935238">,</span>&nbsp;<span class="ident" id="4935240"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span>&nbsp;<span class="op" id="4935249">|</span>&nbsp;<span class="ident" id="4935251"><a href="/encoding/xml/typeinfo.go.html#4959003">fAny</a></span><span class="op" id="4935255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935260">if</span>&nbsp;<span class="ident" id="4935263">err</span>&nbsp;<span class="op" id="4935267">:=</span>&nbsp;<span class="ident" id="4935270"><a href="/encoding/xml/marshal.go.html#4932403">s</a></span><span class="op" id="4935271">.</span><span class="ident" id="4935272">trim</span><span class="op" id="4935276">(</span><span class="ident" id="4935277"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4935282">.</span><span class="ident" id="4935283">parents</span><span class="op" id="4935290">)</span><span class="op" id="4935291">;</span>&nbsp;<span class="ident" id="4935293"><a href="/encoding/xml/marshal.go.html#4935263">err</a></span>&nbsp;<span class="op" id="4935297">!=</span>&nbsp;<span class="ident" id="4935300">nil</span>&nbsp;<span class="op" id="4935304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935310">return</span>&nbsp;<span class="ident" id="4935317"><a href="/encoding/xml/marshal.go.html#4935263">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935329">if</span>&nbsp;<span class="builtinfunc" id="4935332">len</span><span class="op" id="4935335">(</span><span class="ident" id="4935336"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4935341">.</span><span class="ident" id="4935342">parents</span><span class="op" id="4935349">)</span>&nbsp;<span class="op" id="4935351">&gt;</span>&nbsp;<span class="builtinfunc" id="4935353">len</span><span class="op" id="4935356">(</span><span class="ident" id="4935357"><a href="/encoding/xml/marshal.go.html#4932403">s</a></span><span class="op" id="4935358">.</span><span class="ident" id="4935359">stack</span><span class="op" id="4935364">)</span>&nbsp;<span class="op" id="4935366">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935372">if</span>&nbsp;<span class="ident" id="4935375"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4935377">.</span><span class="ident" id="4935378">Kind</span><span class="op" id="4935382">(</span><span class="op" id="4935383">)</span>&nbsp;<span class="op" id="4935385">!=</span>&nbsp;<span class="ident" id="4935388"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4935395">.</span><span class="ident" id="4935396">Ptr</span>&nbsp;<span class="op" id="4935400">&amp;&amp;</span>&nbsp;<span class="ident" id="4935403"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4935405">.</span><span class="ident" id="4935406">Kind</span><span class="op" id="4935410">(</span><span class="op" id="4935411">)</span>&nbsp;<span class="op" id="4935413">!=</span>&nbsp;<span class="ident" id="4935416"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4935423">.</span><span class="ident" id="4935424">Interface</span>&nbsp;<span class="op" id="4935434">||</span>&nbsp;<span class="op" id="4935437">!</span><span class="ident" id="4935438"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4935440">.</span><span class="ident" id="4935441">IsNil</span><span class="op" id="4935446">(</span><span class="op" id="4935447">)</span>&nbsp;<span class="op" id="4935449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935456">if</span>&nbsp;<span class="ident" id="4935459">err</span>&nbsp;<span class="op" id="4935463">:=</span>&nbsp;<span class="ident" id="4935466"><a href="/encoding/xml/marshal.go.html#4932403">s</a></span><span class="op" id="4935467">.</span><span class="ident" id="4935468">push</span><span class="op" id="4935472">(</span><span class="ident" id="4935473"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4935478">.</span><span class="ident" id="4935479">parents</span><span class="op" id="4935486">[</span><span class="builtinfunc" id="4935487">len</span><span class="op" id="4935490">(</span><span class="ident" id="4935491"><a href="/encoding/xml/marshal.go.html#4932403">s</a></span><span class="op" id="4935492">.</span><span class="ident" id="4935493">stack</span><span class="op" id="4935498">)</span><span class="op" id="4935499">:</span><span class="op" id="4935500">]</span><span class="op" id="4935501">)</span><span class="op" id="4935502">;</span>&nbsp;<span class="ident" id="4935504"><a href="/encoding/xml/marshal.go.html#4935459">err</a></span>&nbsp;<span class="op" id="4935508">!=</span>&nbsp;<span class="ident" id="4935511">nil</span>&nbsp;<span class="op" id="4935515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935523">return</span>&nbsp;<span class="ident" id="4935530"><a href="/encoding/xml/marshal.go.html#4935459">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935545">}</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935558">if</span>&nbsp;<span class="ident" id="4935561">err</span>&nbsp;<span class="op" id="4935565">:=</span>&nbsp;<span class="ident" id="4935568"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4935569">.</span><span class="ident" id="4935570">marshalValue</span><span class="op" id="4935582">(</span><span class="ident" id="4935583"><a href="/encoding/xml/marshal.go.html#4932533">vf</a></span><span class="op" id="4935585">,</span>&nbsp;<span class="ident" id="4935587"><a href="/encoding/xml/marshal.go.html#4932459">finfo</a></span><span class="op" id="4935592">,</span>&nbsp;<span class="ident" id="4935594">nil</span><span class="op" id="4935597">)</span><span class="op" id="4935598">;</span>&nbsp;<span class="ident" id="4935600"><a href="/encoding/xml/marshal.go.html#4935561">err</a></span>&nbsp;<span class="op" id="4935604">!=</span>&nbsp;<span class="ident" id="4935607">nil</span>&nbsp;<span class="op" id="4935611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935616">return</span>&nbsp;<span class="ident" id="4935623"><a href="/encoding/xml/marshal.go.html#4935561">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935629">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935635"><a href="/encoding/xml/marshal.go.html#4932403">s</a></span><span class="op" id="4935636">.</span><span class="ident" id="4935637">trim</span><span class="op" id="4935641">(</span><span class="ident" id="4935642">nil</span><span class="op" id="4935645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935648">return</span>&nbsp;<span class="ident" id="4935655"><a href="/encoding/xml/marshal.go.html#4932332">p</a></span><span class="op" id="4935656">.</span><span class="ident" id="4935657">cachedWriteError</span><span class="op" id="4935673">(</span><span class="op" id="4935674">)</span><br>
<span class="lineno"></span><span class="op" id="4935676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="4935679">//&nbsp;return&nbsp;the&nbsp;bufio&nbsp;Writer&#39;s&nbsp;cached&nbsp;write&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="4935727">func</span>&nbsp;<span class="op" id="4935732">(</span><span class="ident" id="4935733">p</span>&nbsp;<span class="op" id="4935735">*</span><span class="ident" id="4935736"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4935743">)</span>&nbsp;<span class="ident" id="4935745">cachedWriteError</span><span class="op" id="4935761">(</span><span class="op" id="4935762">)</span>&nbsp;<span class="builtintype" id="4935764">error</span>&nbsp;<span class="op" id="4935770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935773">_</span><span class="op" id="4935774">,</span>&nbsp;<span class="ident" id="4935776">err</span>&nbsp;<span class="op" id="4935780">:=</span>&nbsp;<span class="ident" id="4935783"><a href="/encoding/xml/marshal.go.html#4935733">p</a></span><span class="op" id="4935784">.</span><span class="ident" id="4935785">Write</span><span class="op" id="4935790">(</span><span class="ident" id="4935791">nil</span><span class="op" id="4935794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935797">return</span>&nbsp;<span class="ident" id="4935804"><a href="/encoding/xml/marshal.go.html#4935776">err</a></span><br>
<span class="lineno"></span><span class="op" id="4935808">}</span><br>
<span class="lineno">845</span><br>
<span class="lineno"></span><span class="keyword" id="4935811">func</span>&nbsp;<span class="op" id="4935816">(</span><span class="ident" id="4935817">p</span>&nbsp;<span class="op" id="4935819">*</span><span class="ident" id="4935820"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><span class="op" id="4935827">)</span>&nbsp;<span class="ident" id="4935829">writeIndent</span><span class="op" id="4935840">(</span><span class="ident" id="4935841">depthDelta</span>&nbsp;<span class="builtintype" id="4935852">int</span><span class="op" id="4935855">)</span>&nbsp;<span class="op" id="4935857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935860">if</span>&nbsp;<span class="builtinfunc" id="4935863">len</span><span class="op" id="4935866">(</span><span class="ident" id="4935867"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4935868">.</span><span class="ident" id="4935869">prefix</span><span class="op" id="4935875">)</span>&nbsp;<span class="op" id="4935877">==</span>&nbsp;<span class="num" id="4935880">0</span>&nbsp;<span class="op" id="4935882">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4935885">len</span><span class="op" id="4935888">(</span><span class="ident" id="4935889"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4935890">.</span><span class="ident" id="4935891">indent</span><span class="op" id="4935897">)</span>&nbsp;<span class="op" id="4935899">==</span>&nbsp;<span class="num" id="4935902">0</span>&nbsp;<span class="op" id="4935904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935908">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935916">}</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935919">if</span>&nbsp;<span class="ident" id="4935922"><a href="/encoding/xml/marshal.go.html#4935841">depthDelta</a></span>&nbsp;<span class="op" id="4935933">&lt;</span>&nbsp;<span class="num" id="4935935">0</span>&nbsp;<span class="op" id="4935937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935941"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4935942">.</span><span class="ident" id="4935943">depth</span><span class="op" id="4935948">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935953">if</span>&nbsp;<span class="ident" id="4935956"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4935957">.</span><span class="ident" id="4935958">indentedIn</span>&nbsp;<span class="op" id="4935969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935974"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4935975">.</span><span class="ident" id="4935976">indentedIn</span>&nbsp;<span class="op" id="4935987">=</span>&nbsp;<span class="builtintype" id="4935989">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935998">return</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936011"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936012">.</span><span class="ident" id="4936013">indentedIn</span>&nbsp;<span class="op" id="4936024">=</span>&nbsp;<span class="builtintype" id="4936026">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936036">if</span>&nbsp;<span class="ident" id="4936039"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936040">.</span><span class="ident" id="4936041">putNewline</span>&nbsp;<span class="op" id="4936052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936056"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936057">.</span><span class="ident" id="4936058">WriteByte</span><span class="op" id="4936067">(</span><span class="string" id="4936068">&#39;\n&#39;</span><span class="op" id="4936072">)</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936075">}</span>&nbsp;<span class="keyword" id="4936077">else</span>&nbsp;<span class="op" id="4936082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936086"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936087">.</span><span class="ident" id="4936088">putNewline</span>&nbsp;<span class="op" id="4936099">=</span>&nbsp;<span class="builtintype" id="4936101">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936110">if</span>&nbsp;<span class="builtinfunc" id="4936113">len</span><span class="op" id="4936116">(</span><span class="ident" id="4936117"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936118">.</span><span class="ident" id="4936119">prefix</span><span class="op" id="4936125">)</span>&nbsp;<span class="op" id="4936127">&gt;</span>&nbsp;<span class="num" id="4936129">0</span>&nbsp;<span class="op" id="4936131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936135"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936136">.</span><span class="ident" id="4936137">WriteString</span><span class="op" id="4936148">(</span><span class="ident" id="4936149"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936150">.</span><span class="ident" id="4936151">prefix</span><span class="op" id="4936157">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936163">if</span>&nbsp;<span class="builtinfunc" id="4936166">len</span><span class="op" id="4936169">(</span><span class="ident" id="4936170"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936171">.</span><span class="ident" id="4936172">indent</span><span class="op" id="4936178">)</span>&nbsp;<span class="op" id="4936180">&gt;</span>&nbsp;<span class="num" id="4936182">0</span>&nbsp;<span class="op" id="4936184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936188">for</span>&nbsp;<span class="ident" id="4936192">i</span>&nbsp;<span class="op" id="4936194">:=</span>&nbsp;<span class="num" id="4936197">0</span><span class="op" id="4936198">;</span>&nbsp;<span class="ident" id="4936200"><a href="/encoding/xml/marshal.go.html#4936192">i</a></span>&nbsp;<span class="op" id="4936202">&lt;</span>&nbsp;<span class="ident" id="4936204"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936205">.</span><span class="ident" id="4936206">depth</span><span class="op" id="4936211">;</span>&nbsp;<span class="ident" id="4936213"><a href="/encoding/xml/marshal.go.html#4936192">i</a></span><span class="op" id="4936214">++</span>&nbsp;<span class="op" id="4936217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936222"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936223">.</span><span class="ident" id="4936224">WriteString</span><span class="op" id="4936235">(</span><span class="ident" id="4936236"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936237">.</span><span class="ident" id="4936238">indent</span><span class="op" id="4936244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936248">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936254">if</span>&nbsp;<span class="ident" id="4936257"><a href="/encoding/xml/marshal.go.html#4935841">depthDelta</a></span>&nbsp;<span class="op" id="4936268">&gt;</span>&nbsp;<span class="num" id="4936270">0</span>&nbsp;<span class="op" id="4936272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936276"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936277">.</span><span class="ident" id="4936278">depth</span><span class="op" id="4936283">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936288"><a href="/encoding/xml/marshal.go.html#4935817">p</a></span><span class="op" id="4936289">.</span><span class="ident" id="4936290">indentedIn</span>&nbsp;<span class="op" id="4936301">=</span>&nbsp;<span class="builtintype" id="4936303">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936309">}</span><br>
<span class="lineno">875</span><span class="op" id="4936311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4936314">type</span>&nbsp;<span class="ident" id="4936319">parentStack</span>&nbsp;<span class="keyword" id="4936331">struct</span>&nbsp;<span class="op" id="4936338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936341">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4936347">*</span><span class="ident" id="4936348"><a href="/encoding/xml/marshal.go.html#4920121">printer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936357">stack</span>&nbsp;<span class="op" id="4936363">[</span><span class="op" id="4936364">]</span><span class="builtintype" id="4936365">string</span><br>
<span class="lineno">880</span><span class="op" id="4936372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4936375">//&nbsp;trim&nbsp;updates&nbsp;the&nbsp;XML&nbsp;context&nbsp;to&nbsp;match&nbsp;the&nbsp;longest&nbsp;common&nbsp;prefix&nbsp;of&nbsp;the&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="4936455">//&nbsp;and&nbsp;the&nbsp;given&nbsp;parents.&nbsp;&nbsp;A&nbsp;closing&nbsp;tag&nbsp;will&nbsp;be&nbsp;written&nbsp;for&nbsp;every&nbsp;parent</span><br>
<span class="lineno"></span><span class="comment" id="4936529">//&nbsp;popped.&nbsp;&nbsp;Passing&nbsp;a&nbsp;zero&nbsp;slice&nbsp;or&nbsp;nil&nbsp;will&nbsp;close&nbsp;all&nbsp;the&nbsp;elements.</span><br>
<span class="lineno">885</span><span class="keyword" id="4936598">func</span>&nbsp;<span class="op" id="4936603">(</span><span class="ident" id="4936604">s</span>&nbsp;<span class="op" id="4936606">*</span><span class="ident" id="4936607"><a href="/encoding/xml/marshal.go.html#4936319">parentStack</a></span><span class="op" id="4936618">)</span>&nbsp;<span class="ident" id="4936620">trim</span><span class="op" id="4936624">(</span><span class="ident" id="4936625">parents</span>&nbsp;<span class="op" id="4936633">[</span><span class="op" id="4936634">]</span><span class="builtintype" id="4936635">string</span><span class="op" id="4936641">)</span>&nbsp;<span class="builtintype" id="4936643">error</span>&nbsp;<span class="op" id="4936649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936652">split</span>&nbsp;<span class="op" id="4936658">:=</span>&nbsp;<span class="num" id="4936661">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936664">for</span>&nbsp;<span class="op" id="4936668">;</span>&nbsp;<span class="ident" id="4936670"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span>&nbsp;<span class="op" id="4936676">&lt;</span>&nbsp;<span class="builtinfunc" id="4936678">len</span><span class="op" id="4936681">(</span><span class="ident" id="4936682"><a href="/encoding/xml/marshal.go.html#4936625">parents</a></span><span class="op" id="4936689">)</span>&nbsp;<span class="op" id="4936691">&amp;&amp;</span>&nbsp;<span class="ident" id="4936694"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span>&nbsp;<span class="op" id="4936700">&lt;</span>&nbsp;<span class="builtinfunc" id="4936702">len</span><span class="op" id="4936705">(</span><span class="ident" id="4936706"><a href="/encoding/xml/marshal.go.html#4936604">s</a></span><span class="op" id="4936707">.</span><span class="ident" id="4936708">stack</span><span class="op" id="4936713">)</span><span class="op" id="4936714">;</span>&nbsp;<span class="ident" id="4936716"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span><span class="op" id="4936721">++</span>&nbsp;<span class="op" id="4936724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936728">if</span>&nbsp;<span class="ident" id="4936731"><a href="/encoding/xml/marshal.go.html#4936625">parents</a></span><span class="op" id="4936738">[</span><span class="ident" id="4936739"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span><span class="op" id="4936744">]</span>&nbsp;<span class="op" id="4936746">!=</span>&nbsp;<span class="ident" id="4936749"><a href="/encoding/xml/marshal.go.html#4936604">s</a></span><span class="op" id="4936750">.</span><span class="ident" id="4936751">stack</span><span class="op" id="4936756">[</span><span class="ident" id="4936757"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span><span class="op" id="4936762">]</span>&nbsp;<span class="op" id="4936764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936769">break</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936783">for</span>&nbsp;<span class="ident" id="4936787">i</span>&nbsp;<span class="op" id="4936789">:=</span>&nbsp;<span class="builtinfunc" id="4936792">len</span><span class="op" id="4936795">(</span><span class="ident" id="4936796"><a href="/encoding/xml/marshal.go.html#4936604">s</a></span><span class="op" id="4936797">.</span><span class="ident" id="4936798">stack</span><span class="op" id="4936803">)</span>&nbsp;<span class="op" id="4936805">-</span>&nbsp;<span class="num" id="4936807">1</span><span class="op" id="4936808">;</span>&nbsp;<span class="ident" id="4936810"><a href="/encoding/xml/marshal.go.html#4936787">i</a></span>&nbsp;<span class="op" id="4936812">&gt;=</span>&nbsp;<span class="ident" id="4936815"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span><span class="op" id="4936820">;</span>&nbsp;<span class="ident" id="4936822"><a href="/encoding/xml/marshal.go.html#4936787">i</a></span><span class="op" id="4936823">--</span>&nbsp;<span class="op" id="4936826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936830">if</span>&nbsp;<span class="ident" id="4936833">err</span>&nbsp;<span class="op" id="4936837">:=</span>&nbsp;<span class="ident" id="4936840"><a href="/encoding/xml/marshal.go.html#4936604">s</a></span><span class="op" id="4936841">.</span><span class="ident" id="4936842">p</span><span class="op" id="4936843">.</span><span class="ident" id="4936844">writeEnd</span><span class="op" id="4936852">(</span><span class="ident" id="4936853"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4936857">{</span><span class="ident" id="4936858">Local</span><span class="op" id="4936863">:</span>&nbsp;<span class="ident" id="4936865"><a href="/encoding/xml/marshal.go.html#4936604">s</a></span><span class="op" id="4936866">.</span><span class="ident" id="4936867">stack</span><span class="op" id="4936872">[</span><span class="ident" id="4936873"><a href="/encoding/xml/marshal.go.html#4936787">i</a></span><span class="op" id="4936874">]</span><span class="op" id="4936875">}</span><span class="op" id="4936876">)</span><span class="op" id="4936877">;</span>&nbsp;<span class="ident" id="4936879"><a href="/encoding/xml/marshal.go.html#4936833">err</a></span>&nbsp;<span class="op" id="4936883">!=</span>&nbsp;<span class="ident" id="4936886">nil</span>&nbsp;<span class="op" id="4936890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936895">return</span>&nbsp;<span class="ident" id="4936902"><a href="/encoding/xml/marshal.go.html#4936833">err</a></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4936911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936914"><a href="/encoding/xml/marshal.go.html#4936604">s</a></span><span class="op" id="4936915">.</span><span class="ident" id="4936916">stack</span>&nbsp;<span class="op" id="4936922">=</span>&nbsp;<span class="ident" id="4936924"><a href="/encoding/xml/marshal.go.html#4936625">parents</a></span><span class="op" id="4936931">[</span><span class="op" id="4936932">:</span><span class="ident" id="4936933"><a href="/encoding/xml/marshal.go.html#4936652">split</a></span><span class="op" id="4936938">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4936941">return</span>&nbsp;<span class="ident" id="4936948">nil</span><br>
<span class="lineno"></span><span class="op" id="4936952">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span><span class="comment" id="4936955">//&nbsp;push&nbsp;adds&nbsp;parent&nbsp;elements&nbsp;to&nbsp;the&nbsp;stack&nbsp;and&nbsp;writes&nbsp;open&nbsp;tags.</span><br>
<span class="lineno"></span><span class="keyword" id="4937019">func</span>&nbsp;<span class="op" id="4937024">(</span><span class="ident" id="4937025">s</span>&nbsp;<span class="op" id="4937027">*</span><span class="ident" id="4937028"><a href="/encoding/xml/marshal.go.html#4936319">parentStack</a></span><span class="op" id="4937039">)</span>&nbsp;<span class="ident" id="4937041">push</span><span class="op" id="4937045">(</span><span class="ident" id="4937046">parents</span>&nbsp;<span class="op" id="4937054">[</span><span class="op" id="4937055">]</span><span class="builtintype" id="4937056">string</span><span class="op" id="4937062">)</span>&nbsp;<span class="builtintype" id="4937064">error</span>&nbsp;<span class="op" id="4937070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937073">for</span>&nbsp;<span class="ident" id="4937077">i</span>&nbsp;<span class="op" id="4937079">:=</span>&nbsp;<span class="num" id="4937082">0</span><span class="op" id="4937083">;</span>&nbsp;<span class="ident" id="4937085"><a href="/encoding/xml/marshal.go.html#4937077">i</a></span>&nbsp;<span class="op" id="4937087">&lt;</span>&nbsp;<span class="builtinfunc" id="4937089">len</span><span class="op" id="4937092">(</span><span class="ident" id="4937093"><a href="/encoding/xml/marshal.go.html#4937046">parents</a></span><span class="op" id="4937100">)</span><span class="op" id="4937101">;</span>&nbsp;<span class="ident" id="4937103"><a href="/encoding/xml/marshal.go.html#4937077">i</a></span><span class="op" id="4937104">++</span>&nbsp;<span class="op" id="4937107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937111">if</span>&nbsp;<span class="ident" id="4937114">err</span>&nbsp;<span class="op" id="4937118">:=</span>&nbsp;<span class="ident" id="4937121"><a href="/encoding/xml/marshal.go.html#4937025">s</a></span><span class="op" id="4937122">.</span><span class="ident" id="4937123">p</span><span class="op" id="4937124">.</span><span class="ident" id="4937125">writeStart</span><span class="op" id="4937135">(</span><span class="op" id="4937136">&amp;</span><span class="ident" id="4937137"><a href="/encoding/xml/xml.go.html#4969225">StartElement</a></span><span class="op" id="4937149">{</span><span class="ident" id="4937150">Name</span><span class="op" id="4937154">:</span>&nbsp;<span class="ident" id="4937156"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4937160">{</span><span class="ident" id="4937161">Local</span><span class="op" id="4937166">:</span>&nbsp;<span class="ident" id="4937168"><a href="/encoding/xml/marshal.go.html#4937046">parents</a></span><span class="op" id="4937175">[</span><span class="ident" id="4937176"><a href="/encoding/xml/marshal.go.html#4937077">i</a></span><span class="op" id="4937177">]</span><span class="op" id="4937178">}</span><span class="op" id="4937179">}</span><span class="op" id="4937180">)</span><span class="op" id="4937181">;</span>&nbsp;<span class="ident" id="4937183"><a href="/encoding/xml/marshal.go.html#4937114">err</a></span>&nbsp;<span class="op" id="4937187">!=</span>&nbsp;<span class="ident" id="4937190">nil</span>&nbsp;<span class="op" id="4937194">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937199">return</span>&nbsp;<span class="ident" id="4937206"><a href="/encoding/xml/marshal.go.html#4937114">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4937212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4937215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937218"><a href="/encoding/xml/marshal.go.html#4937025">s</a></span><span class="op" id="4937219">.</span><span class="ident" id="4937220">stack</span>&nbsp;<span class="op" id="4937226">=</span>&nbsp;<span class="builtinfunc" id="4937228">append</span><span class="op" id="4937234">(</span><span class="ident" id="4937235"><a href="/encoding/xml/marshal.go.html#4937025">s</a></span><span class="op" id="4937236">.</span><span class="ident" id="4937237">stack</span><span class="op" id="4937242">,</span>&nbsp;<span class="ident" id="4937244"><a href="/encoding/xml/marshal.go.html#4937046">parents</a></span><span class="op" id="4937251">...</span><span class="op" id="4937254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937257">return</span>&nbsp;<span class="ident" id="4937264">nil</span><br>
<span class="lineno">910</span><span class="op" id="4937268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4937271">//&nbsp;A&nbsp;MarshalXMLError&nbsp;is&nbsp;returned&nbsp;when&nbsp;Marshal&nbsp;encounters&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="4937335">//&nbsp;that&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;into&nbsp;XML.</span><br>
<span class="lineno"></span><span class="keyword" id="4937373">type</span>&nbsp;<span class="ident" id="4937378">UnsupportedTypeError</span>&nbsp;<span class="keyword" id="4937399">struct</span>&nbsp;<span class="op" id="4937406">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937409">Type</span>&nbsp;<span class="ident" id="4937414"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937421">.</span><span class="ident" id="4937422">Type</span><br>
<span class="lineno"></span><span class="op" id="4937427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4937430">func</span>&nbsp;<span class="op" id="4937435">(</span><span class="ident" id="4937436">e</span>&nbsp;<span class="op" id="4937438">*</span><span class="ident" id="4937439"><a href="/encoding/xml/marshal.go.html#4937378">UnsupportedTypeError</a></span><span class="op" id="4937459">)</span>&nbsp;<span class="ident" id="4937461">Error</span><span class="op" id="4937466">(</span><span class="op" id="4937467">)</span>&nbsp;<span class="builtintype" id="4937469">string</span>&nbsp;<span class="op" id="4937476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937479">return</span>&nbsp;<span class="string" id="4937486">&#34;xml:&nbsp;unsupported&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="4937512">+</span>&nbsp;<span class="ident" id="4937514"><a href="/encoding/xml/marshal.go.html#4937436">e</a></span><span class="op" id="4937515">.</span><span class="ident" id="4937516">Type</span><span class="op" id="4937520">.</span><span class="ident" id="4937521">String</span><span class="op" id="4937527">(</span><span class="op" id="4937528">)</span><br>
<span class="lineno">920</span><span class="op" id="4937530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4937533">func</span>&nbsp;<span class="ident" id="4937538">isEmptyValue</span><span class="op" id="4937550">(</span><span class="ident" id="4937551">v</span>&nbsp;<span class="ident" id="4937553"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937560">.</span><span class="ident" id="4937561">Value</span><span class="op" id="4937566">)</span>&nbsp;<span class="builtintype" id="4937568">bool</span>&nbsp;<span class="op" id="4937573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937576">switch</span>&nbsp;<span class="ident" id="4937583"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4937584">.</span><span class="ident" id="4937585">Kind</span><span class="op" id="4937589">(</span><span class="op" id="4937590">)</span>&nbsp;<span class="op" id="4937592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937595">case</span>&nbsp;<span class="ident" id="4937600"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937607">.</span><span class="ident" id="4937608">Array</span><span class="op" id="4937613">,</span>&nbsp;<span class="ident" id="4937615"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937622">.</span><span class="ident" id="4937623">Map</span><span class="op" id="4937626">,</span>&nbsp;<span class="ident" id="4937628"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937635">.</span><span class="ident" id="4937636">Slice</span><span class="op" id="4937641">,</span>&nbsp;<span class="ident" id="4937643"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937650">.</span><span class="ident" id="4937651">String</span><span class="op" id="4937657">:</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937661">return</span>&nbsp;<span class="ident" id="4937668"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4937669">.</span><span class="ident" id="4937670">Len</span><span class="op" id="4937673">(</span><span class="op" id="4937674">)</span>&nbsp;<span class="op" id="4937676">==</span>&nbsp;<span class="num" id="4937679">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937682">case</span>&nbsp;<span class="ident" id="4937687"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937694">.</span><span class="ident" id="4937695">Bool</span><span class="op" id="4937699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937703">return</span>&nbsp;<span class="op" id="4937710">!</span><span class="ident" id="4937711"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4937712">.</span><span class="ident" id="4937713">Bool</span><span class="op" id="4937717">(</span><span class="op" id="4937718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937721">case</span>&nbsp;<span class="ident" id="4937726"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937733">.</span><span class="ident" id="4937734">Int</span><span class="op" id="4937737">,</span>&nbsp;<span class="ident" id="4937739"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937746">.</span><span class="ident" id="4937747">Int8</span><span class="op" id="4937751">,</span>&nbsp;<span class="ident" id="4937753"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937760">.</span><span class="ident" id="4937761">Int16</span><span class="op" id="4937766">,</span>&nbsp;<span class="ident" id="4937768"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937775">.</span><span class="ident" id="4937776">Int32</span><span class="op" id="4937781">,</span>&nbsp;<span class="ident" id="4937783"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937790">.</span><span class="ident" id="4937791">Int64</span><span class="op" id="4937796">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937800">return</span>&nbsp;<span class="ident" id="4937807"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4937808">.</span><span class="ident" id="4937809">Int</span><span class="op" id="4937812">(</span><span class="op" id="4937813">)</span>&nbsp;<span class="op" id="4937815">==</span>&nbsp;<span class="num" id="4937818">0</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937821">case</span>&nbsp;<span class="ident" id="4937826"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937833">.</span><span class="ident" id="4937834">Uint</span><span class="op" id="4937838">,</span>&nbsp;<span class="ident" id="4937840"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937847">.</span><span class="ident" id="4937848">Uint8</span><span class="op" id="4937853">,</span>&nbsp;<span class="ident" id="4937855"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937862">.</span><span class="ident" id="4937863">Uint16</span><span class="op" id="4937869">,</span>&nbsp;<span class="ident" id="4937871"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937878">.</span><span class="ident" id="4937879">Uint32</span><span class="op" id="4937885">,</span>&nbsp;<span class="ident" id="4937887"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937894">.</span><span class="ident" id="4937895">Uint64</span><span class="op" id="4937901">,</span>&nbsp;<span class="ident" id="4937903"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937910">.</span><span class="ident" id="4937911">Uintptr</span><span class="op" id="4937918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937922">return</span>&nbsp;<span class="ident" id="4937929"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4937930">.</span><span class="ident" id="4937931">Uint</span><span class="op" id="4937935">(</span><span class="op" id="4937936">)</span>&nbsp;<span class="op" id="4937938">==</span>&nbsp;<span class="num" id="4937941">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937944">case</span>&nbsp;<span class="ident" id="4937949"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937956">.</span><span class="ident" id="4937957">Float32</span><span class="op" id="4937964">,</span>&nbsp;<span class="ident" id="4937966"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4937973">.</span><span class="ident" id="4937974">Float64</span><span class="op" id="4937981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4937985">return</span>&nbsp;<span class="ident" id="4937992"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4937993">.</span><span class="ident" id="4937994">Float</span><span class="op" id="4937999">(</span><span class="op" id="4938000">)</span>&nbsp;<span class="op" id="4938002">==</span>&nbsp;<span class="num" id="4938005">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938008">case</span>&nbsp;<span class="ident" id="4938013"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4938020">.</span><span class="ident" id="4938021">Interface</span><span class="op" id="4938030">,</span>&nbsp;<span class="ident" id="4938032"><a href="/encoding/xml/marshal.go.html#4911584">reflect</a></span><span class="op" id="4938039">.</span><span class="ident" id="4938040">Ptr</span><span class="op" id="4938043">:</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938047">return</span>&nbsp;<span class="ident" id="4938054"><a href="/encoding/xml/marshal.go.html#4937551">v</a></span><span class="op" id="4938055">.</span><span class="ident" id="4938056">IsNil</span><span class="op" id="4938061">(</span><span class="op" id="4938062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4938065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938068">return</span>&nbsp;<span class="builtintype" id="4938075">false</span><br>
<span class="lineno"></span><span class="op" id="4938081">}</span>
</div>
</body>
</html>
