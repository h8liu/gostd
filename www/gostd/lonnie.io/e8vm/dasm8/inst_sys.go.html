<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="4353608">package</span>&nbsp;<span class="ident" id="4353616">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4353623">import</span>&nbsp;<span class="op" id="4353630">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4353633">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="4353639">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4353642">var</span>&nbsp;<span class="op" id="4353646">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353649">opSysMap</span>&nbsp;<span class="op" id="4353658">=</span>&nbsp;<span class="keyword" id="4353660">map</span><span class="op" id="4353663">[</span><span class="builtintype" id="4353664">uint32</span><span class="op" id="4353670">]</span><span class="builtintype" id="4353671">string</span><span class="op" id="4353677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4353681">64</span><span class="op" id="4353683">:</span>&nbsp;<span class="string" id="4353685">&#34;halt&#34;</span><span class="op" id="4353691">,</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4353695">65</span><span class="op" id="4353697">:</span>&nbsp;<span class="string" id="4353699">&#34;syscall&#34;</span><span class="op" id="4353708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4353712">66</span><span class="op" id="4353714">:</span>&nbsp;<span class="string" id="4353716">&#34;usermod&#34;</span><span class="op" id="4353725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4353729">68</span><span class="op" id="4353731">:</span>&nbsp;<span class="string" id="4353733">&#34;iret&#34;</span><span class="op" id="4353739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4353742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353746">opSys1Map</span>&nbsp;<span class="op" id="4353756">=</span>&nbsp;<span class="keyword" id="4353758">map</span><span class="op" id="4353761">[</span><span class="builtintype" id="4353762">uint32</span><span class="op" id="4353768">]</span><span class="builtintype" id="4353769">string</span><span class="op" id="4353775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4353779">67</span><span class="op" id="4353781">:</span>&nbsp;<span class="string" id="4353783">&#34;vtable&#34;</span><span class="op" id="4353791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4353795">69</span><span class="op" id="4353797">:</span>&nbsp;<span class="string" id="4353799">&#34;cpuid&#34;</span><span class="op" id="4353806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4353809">}</span><br>
<span class="lineno"></span><span class="op" id="4353811">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4353814">func</span>&nbsp;<span class="ident" id="4353819">instSys</span><span class="op" id="4353826">(</span><span class="ident" id="4353827">addr</span>&nbsp;<span class="builtintype" id="4353832">uint32</span><span class="op" id="4353838">,</span>&nbsp;<span class="ident" id="4353840">in</span>&nbsp;<span class="builtintype" id="4353843">uint32</span><span class="op" id="4353849">)</span>&nbsp;<span class="op" id="4353851">*</span><span class="ident" id="4353852">Line</span>&nbsp;<span class="op" id="4353857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353860">op</span>&nbsp;<span class="op" id="4353863">:=</span>&nbsp;<span class="op" id="4353866">(</span><span class="ident" id="4353867">in</span>&nbsp;<span class="op" id="4353870">&gt;&gt;</span>&nbsp;<span class="num" id="4353873">24</span><span class="op" id="4353875">)</span>&nbsp;<span class="op" id="4353877">&amp;</span>&nbsp;<span class="num" id="4353879">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353885">src</span>&nbsp;<span class="op" id="4353889">:=</span>&nbsp;<span class="ident" id="4353892">regStr</span><span class="op" id="4353898">(</span><span class="op" id="4353899">(</span><span class="ident" id="4353900">in</span>&nbsp;<span class="op" id="4353903">&gt;&gt;</span>&nbsp;<span class="num" id="4353906">21</span><span class="op" id="4353908">)</span>&nbsp;<span class="op" id="4353910">&amp;</span>&nbsp;<span class="num" id="4353912">0x7</span><span class="op" id="4353915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4353919">var</span>&nbsp;<span class="ident" id="4353923">s</span>&nbsp;<span class="builtintype" id="4353925">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4353933">if</span>&nbsp;<span class="ident" id="4353936">opStr</span><span class="op" id="4353941">,</span>&nbsp;<span class="ident" id="4353943">found</span>&nbsp;<span class="op" id="4353949">:=</span>&nbsp;<span class="ident" id="4353952">opSysMap</span><span class="op" id="4353960">[</span><span class="ident" id="4353961">op</span><span class="op" id="4353963">]</span><span class="op" id="4353964">;</span>&nbsp;<span class="ident" id="4353966">found</span>&nbsp;<span class="op" id="4353972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353976">s</span>&nbsp;<span class="op" id="4353978">=</span>&nbsp;<span class="ident" id="4353980">opStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4353987">}</span>&nbsp;<span class="keyword" id="4353989">else</span>&nbsp;<span class="keyword" id="4353994">if</span>&nbsp;<span class="ident" id="4353997">opStr</span><span class="op" id="4354002">,</span>&nbsp;<span class="ident" id="4354004">found</span>&nbsp;<span class="op" id="4354010">:=</span>&nbsp;<span class="ident" id="4354013">opSys1Map</span><span class="op" id="4354022">[</span><span class="ident" id="4354023">op</span><span class="op" id="4354025">]</span><span class="op" id="4354026">;</span>&nbsp;<span class="ident" id="4354028">found</span>&nbsp;<span class="op" id="4354034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4354038">s</span>&nbsp;<span class="op" id="4354040">=</span>&nbsp;<span class="ident" id="4354042">fmt</span><span class="op" id="4354045">.</span><span class="ident" id="4354046">Sprintf</span><span class="op" id="4354053">(</span><span class="string" id="4354054">&#34;%s&nbsp;%s&#34;</span><span class="op" id="4354061">,</span>&nbsp;<span class="ident" id="4354063">opStr</span><span class="op" id="4354068">,</span>&nbsp;<span class="ident" id="4354070">src</span><span class="op" id="4354073">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4354076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4354080">ret</span>&nbsp;<span class="op" id="4354084">:=</span>&nbsp;<span class="ident" id="4354087">newLine</span><span class="op" id="4354094">(</span><span class="ident" id="4354095">addr</span><span class="op" id="4354099">,</span>&nbsp;<span class="ident" id="4354101">in</span><span class="op" id="4354103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4354106">ret</span><span class="op" id="4354109">.</span><span class="ident" id="4354110">Str</span>&nbsp;<span class="op" id="4354114">=</span>&nbsp;<span class="ident" id="4354116">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4354119">return</span>&nbsp;<span class="ident" id="4354126">ret</span><br>
<span class="lineno">35</span><span class="op" id="4354130">}</span>
</div>
</body>
</html>
