<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3248791">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3248846">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3248900">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3248951">package</span>&nbsp;<span class="ident" id="3248959">bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3248966">//&nbsp;Simple&nbsp;byte&nbsp;buffer&nbsp;for&nbsp;marshaling&nbsp;data.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3249010">import</span>&nbsp;<span class="op" id="3249017">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3249020">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3249030">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3249036">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3249051">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3249054">//&nbsp;A&nbsp;Buffer&nbsp;is&nbsp;a&nbsp;variable-sized&nbsp;buffer&nbsp;of&nbsp;bytes&nbsp;with&nbsp;Read&nbsp;and&nbsp;Write&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="3249131">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;Buffer&nbsp;is&nbsp;an&nbsp;empty&nbsp;buffer&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="3249193">type</span>&nbsp;<span class="ident" id="3249198">Buffer</span>&nbsp;<span class="keyword" id="3249205">struct</span>&nbsp;<span class="op" id="3249212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249215">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3249225">[</span><span class="op" id="3249226">]</span><span class="builtintype" id="3249227">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3249243">//&nbsp;contents&nbsp;are&nbsp;the&nbsp;bytes&nbsp;buf[off&nbsp;:&nbsp;len(buf)]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249290">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3249300">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3249318">//&nbsp;read&nbsp;at&nbsp;&amp;buf[off],&nbsp;write&nbsp;at&nbsp;&amp;buf[len(buf)]</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249365">runeBytes</span>&nbsp;<span class="op" id="3249375">[</span><span class="ident" id="3249376"><a href="/bytes/buffer.go.html#3249036">utf8</a></span><span class="op" id="3249380">.</span><span class="ident" id="3249381">UTFMax</span><span class="op" id="3249387">]</span><span class="builtintype" id="3249388">byte</span>&nbsp;<span class="comment" id="3249393">//&nbsp;avoid&nbsp;allocation&nbsp;of&nbsp;slice&nbsp;on&nbsp;each&nbsp;WriteByte&nbsp;or&nbsp;Rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249449">bootstrap</span>&nbsp;<span class="op" id="3249459">[</span><span class="num" id="3249460">64</span><span class="op" id="3249462">]</span><span class="builtintype" id="3249463">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3249477">//&nbsp;memory&nbsp;to&nbsp;hold&nbsp;first&nbsp;slice;&nbsp;helps&nbsp;small&nbsp;buffers&nbsp;(Printf)&nbsp;avoid&nbsp;allocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249556">lastRead</span>&nbsp;&nbsp;<span class="ident" id="3249566"><a href="/bytes/buffer.go.html#3249795">readOp</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3249584">//&nbsp;last&nbsp;read&nbsp;operation,&nbsp;so&nbsp;that&nbsp;Unread*&nbsp;can&nbsp;work&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="op" id="3249644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="3249647">//&nbsp;The&nbsp;readOp&nbsp;constants&nbsp;describe&nbsp;the&nbsp;last&nbsp;action&nbsp;performed&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="3249709">//&nbsp;the&nbsp;buffer,&nbsp;so&nbsp;that&nbsp;UnreadRune&nbsp;and&nbsp;UnreadByte&nbsp;can</span><br>
<span class="lineno"></span><span class="comment" id="3249762">//&nbsp;check&nbsp;for&nbsp;invalid&nbsp;usage.</span><br>
<span class="lineno"></span><span class="keyword" id="3249790">type</span>&nbsp;<span class="ident" id="3249795">readOp</span>&nbsp;<span class="builtintype" id="3249802">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3249807">const</span>&nbsp;<span class="op" id="3249813">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249816">opInvalid</span>&nbsp;&nbsp;<span class="ident" id="3249827"><a href="/bytes/buffer.go.html#3249795">readOp</a></span>&nbsp;<span class="op" id="3249834">=</span>&nbsp;<span class="ident" id="3249836">iota</span>&nbsp;<span class="comment" id="3249841">//&nbsp;Non-read&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249865">opReadRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3249890">//&nbsp;Read&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3249905">opRead</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3249930">//&nbsp;Any&nbsp;other&nbsp;read&nbsp;operation.</span><br>
<span class="lineno"></span><span class="op" id="3249959">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3249962">//&nbsp;ErrTooLarge&nbsp;is&nbsp;passed&nbsp;to&nbsp;panic&nbsp;if&nbsp;memory&nbsp;cannot&nbsp;be&nbsp;allocated&nbsp;to&nbsp;store&nbsp;data&nbsp;in&nbsp;a&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3250053">var</span>&nbsp;<span class="ident" id="3250057">ErrTooLarge</span>&nbsp;<span class="op" id="3250069">=</span>&nbsp;<span class="ident" id="3250071"><a href="/bytes/buffer.go.html#3249020">errors</a></span><span class="op" id="3250077">.</span><span class="ident" id="3250078">New</span><span class="op" id="3250081">(</span><span class="string" id="3250082">&#34;bytes.Buffer:&nbsp;too&nbsp;large&#34;</span><span class="op" id="3250107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3250110">//&nbsp;Bytes&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer;</span><br>
<span class="lineno">40</span><span class="comment" id="3250188">//&nbsp;len(b.Bytes())&nbsp;==&nbsp;b.Len().&nbsp;&nbsp;If&nbsp;the&nbsp;caller&nbsp;changes&nbsp;the&nbsp;contents&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3250261">//&nbsp;returned&nbsp;slice,&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;buffer&nbsp;will&nbsp;change&nbsp;provided&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="3250334">//&nbsp;are&nbsp;no&nbsp;intervening&nbsp;method&nbsp;calls&nbsp;on&nbsp;the&nbsp;Buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3250384">func</span>&nbsp;<span class="op" id="3250389">(</span><span class="ident" id="3250390">b</span>&nbsp;<span class="op" id="3250392">*</span><span class="ident" id="3250393"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3250399">)</span>&nbsp;<span class="ident" id="3250401">Bytes</span><span class="op" id="3250406">(</span><span class="op" id="3250407">)</span>&nbsp;<span class="op" id="3250409">[</span><span class="op" id="3250410">]</span><span class="builtintype" id="3250411">byte</span>&nbsp;<span class="op" id="3250416">{</span>&nbsp;<span class="keyword" id="3250418">return</span>&nbsp;<span class="ident" id="3250425"><a href="/bytes/buffer.go.html#3250390">b</a></span><span class="op" id="3250426">.</span><span class="ident" id="3250427">buf</span><span class="op" id="3250430">[</span><span class="ident" id="3250431"><a href="/bytes/buffer.go.html#3250390">b</a></span><span class="op" id="3250432">.</span><span class="ident" id="3250433">off</span><span class="op" id="3250436">:</span><span class="op" id="3250437">]</span>&nbsp;<span class="op" id="3250439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3250442">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3250509">//&nbsp;as&nbsp;a&nbsp;string.&nbsp;&nbsp;If&nbsp;the&nbsp;Buffer&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;it&nbsp;returns&nbsp;&#34;&lt;nil&gt;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3250578">func</span>&nbsp;<span class="op" id="3250583">(</span><span class="ident" id="3250584">b</span>&nbsp;<span class="op" id="3250586">*</span><span class="ident" id="3250587"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3250593">)</span>&nbsp;<span class="ident" id="3250595">String</span><span class="op" id="3250601">(</span><span class="op" id="3250602">)</span>&nbsp;<span class="builtintype" id="3250604">string</span>&nbsp;<span class="op" id="3250611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250614">if</span>&nbsp;<span class="ident" id="3250617"><a href="/bytes/buffer.go.html#3250584">b</a></span>&nbsp;<span class="op" id="3250619">==</span>&nbsp;<span class="ident" id="3250622">nil</span>&nbsp;<span class="op" id="3250626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3250630">//&nbsp;Special&nbsp;case,&nbsp;useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250670">return</span>&nbsp;<span class="string" id="3250677">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3250686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3250689">return</span>&nbsp;<span class="builtintype" id="3250696">string</span><span class="op" id="3250702">(</span><span class="ident" id="3250703"><a href="/bytes/buffer.go.html#3250584">b</a></span><span class="op" id="3250704">.</span><span class="ident" id="3250705">buf</span><span class="op" id="3250708">[</span><span class="ident" id="3250709"><a href="/bytes/buffer.go.html#3250584">b</a></span><span class="op" id="3250710">.</span><span class="ident" id="3250711">off</span><span class="op" id="3250714">:</span><span class="op" id="3250715">]</span><span class="op" id="3250716">)</span><br>
<span class="lineno"></span><span class="op" id="3250718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="3250721">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;of&nbsp;the&nbsp;unread&nbsp;portion&nbsp;of&nbsp;the&nbsp;buffer;</span><br>
<span class="lineno"></span><span class="comment" id="3250793">//&nbsp;b.Len()&nbsp;==&nbsp;len(b.Bytes()).</span><br>
<span class="lineno"></span><span class="keyword" id="3250823">func</span>&nbsp;<span class="op" id="3250828">(</span><span class="ident" id="3250829">b</span>&nbsp;<span class="op" id="3250831">*</span><span class="ident" id="3250832"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3250838">)</span>&nbsp;<span class="ident" id="3250840">Len</span><span class="op" id="3250843">(</span><span class="op" id="3250844">)</span>&nbsp;<span class="builtintype" id="3250846">int</span>&nbsp;<span class="op" id="3250850">{</span>&nbsp;<span class="keyword" id="3250852">return</span>&nbsp;<span class="builtinfunc" id="3250859">len</span><span class="op" id="3250862">(</span><span class="ident" id="3250863"><a href="/bytes/buffer.go.html#3250829">b</a></span><span class="op" id="3250864">.</span><span class="ident" id="3250865">buf</span><span class="op" id="3250868">)</span>&nbsp;<span class="op" id="3250870">-</span>&nbsp;<span class="ident" id="3250872"><a href="/bytes/buffer.go.html#3250829">b</a></span><span class="op" id="3250873">.</span><span class="ident" id="3250874">off</span>&nbsp;<span class="op" id="3250878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3250881">//&nbsp;Truncate&nbsp;discards&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;n&nbsp;unread&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno">60</span><span class="comment" id="3250952">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or&nbsp;greater&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3251024">func</span>&nbsp;<span class="op" id="3251029">(</span><span class="ident" id="3251030">b</span>&nbsp;<span class="op" id="3251032">*</span><span class="ident" id="3251033"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3251039">)</span>&nbsp;<span class="ident" id="3251041">Truncate</span><span class="op" id="3251049">(</span><span class="ident" id="3251050">n</span>&nbsp;<span class="builtintype" id="3251052">int</span><span class="op" id="3251055">)</span>&nbsp;<span class="op" id="3251057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251060"><a href="/bytes/buffer.go.html#3251030">b</a></span><span class="op" id="3251061">.</span><span class="ident" id="3251062">lastRead</span>&nbsp;<span class="op" id="3251071">=</span>&nbsp;<span class="ident" id="3251073"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251084">switch</span>&nbsp;<span class="op" id="3251091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251094">case</span>&nbsp;<span class="ident" id="3251099"><a href="/bytes/buffer.go.html#3251050">n</a></span>&nbsp;<span class="op" id="3251101">&lt;</span>&nbsp;<span class="num" id="3251103">0</span>&nbsp;<span class="op" id="3251105">||</span>&nbsp;<span class="ident" id="3251108"><a href="/bytes/buffer.go.html#3251050">n</a></span>&nbsp;<span class="op" id="3251110">&gt;</span>&nbsp;<span class="ident" id="3251112"><a href="/bytes/buffer.go.html#3251030">b</a></span><span class="op" id="3251113">.</span><span class="ident" id="3251114">Len</span><span class="op" id="3251117">(</span><span class="op" id="3251118">)</span><span class="op" id="3251119">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3251123">panic</span><span class="op" id="3251128">(</span><span class="string" id="3251129">&#34;bytes.Buffer:&nbsp;truncation&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="3251168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251171">case</span>&nbsp;<span class="ident" id="3251176"><a href="/bytes/buffer.go.html#3251050">n</a></span>&nbsp;<span class="op" id="3251178">==</span>&nbsp;<span class="num" id="3251181">0</span><span class="op" id="3251182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251186">//&nbsp;Reuse&nbsp;buffer&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251211"><a href="/bytes/buffer.go.html#3251030">b</a></span><span class="op" id="3251212">.</span><span class="ident" id="3251213">off</span>&nbsp;<span class="op" id="3251217">=</span>&nbsp;<span class="num" id="3251219">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251222">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251225"><a href="/bytes/buffer.go.html#3251030">b</a></span><span class="op" id="3251226">.</span><span class="ident" id="3251227">buf</span>&nbsp;<span class="op" id="3251231">=</span>&nbsp;<span class="ident" id="3251233"><a href="/bytes/buffer.go.html#3251030">b</a></span><span class="op" id="3251234">.</span><span class="ident" id="3251235">buf</span><span class="op" id="3251238">[</span><span class="num" id="3251239">0</span>&nbsp;<span class="op" id="3251241">:</span>&nbsp;<span class="ident" id="3251243"><a href="/bytes/buffer.go.html#3251030">b</a></span><span class="op" id="3251244">.</span><span class="ident" id="3251245">off</span><span class="op" id="3251248">+</span><span class="ident" id="3251249"><a href="/bytes/buffer.go.html#3251050">n</a></span><span class="op" id="3251250">]</span><br>
<span class="lineno"></span><span class="op" id="3251252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3251255">//&nbsp;Reset&nbsp;resets&nbsp;the&nbsp;buffer&nbsp;so&nbsp;it&nbsp;has&nbsp;no&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="3251304">//&nbsp;b.Reset()&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;b.Truncate(0).</span><br>
<span class="lineno">75</span><span class="keyword" id="3251347">func</span>&nbsp;<span class="op" id="3251352">(</span><span class="ident" id="3251353">b</span>&nbsp;<span class="op" id="3251355">*</span><span class="ident" id="3251356"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3251362">)</span>&nbsp;<span class="ident" id="3251364">Reset</span><span class="op" id="3251369">(</span><span class="op" id="3251370">)</span>&nbsp;<span class="op" id="3251372">{</span>&nbsp;<span class="ident" id="3251374"><a href="/bytes/buffer.go.html#3251353">b</a></span><span class="op" id="3251375">.</span><span class="ident" id="3251376">Truncate</span><span class="op" id="3251384">(</span><span class="num" id="3251385">0</span><span class="op" id="3251386">)</span>&nbsp;<span class="op" id="3251388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3251391">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;buffer&nbsp;to&nbsp;guarantee&nbsp;space&nbsp;for&nbsp;n&nbsp;more&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="3251453">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;bytes&nbsp;should&nbsp;be&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="3251508">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;can&#39;t&nbsp;grow&nbsp;it&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">80</span><span class="keyword" id="3251568">func</span>&nbsp;<span class="op" id="3251573">(</span><span class="ident" id="3251574">b</span>&nbsp;<span class="op" id="3251576">*</span><span class="ident" id="3251577"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3251583">)</span>&nbsp;<span class="ident" id="3251585">grow</span><span class="op" id="3251589">(</span><span class="ident" id="3251590">n</span>&nbsp;<span class="builtintype" id="3251592">int</span><span class="op" id="3251595">)</span>&nbsp;<span class="builtintype" id="3251597">int</span>&nbsp;<span class="op" id="3251601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251604">m</span>&nbsp;<span class="op" id="3251606">:=</span>&nbsp;<span class="ident" id="3251609"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251610">.</span><span class="ident" id="3251611">Len</span><span class="op" id="3251614">(</span><span class="op" id="3251615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251618">//&nbsp;If&nbsp;buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251666">if</span>&nbsp;<span class="ident" id="3251669"><a href="/bytes/buffer.go.html#3251604">m</a></span>&nbsp;<span class="op" id="3251671">==</span>&nbsp;<span class="num" id="3251674">0</span>&nbsp;<span class="op" id="3251676">&amp;&amp;</span>&nbsp;<span class="ident" id="3251679"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251680">.</span><span class="ident" id="3251681">off</span>&nbsp;<span class="op" id="3251685">!=</span>&nbsp;<span class="num" id="3251688">0</span>&nbsp;<span class="op" id="3251690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251694"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251695">.</span><span class="ident" id="3251696">Truncate</span><span class="op" id="3251704">(</span><span class="num" id="3251705">0</span><span class="op" id="3251706">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251712">if</span>&nbsp;<span class="builtinfunc" id="3251715">len</span><span class="op" id="3251718">(</span><span class="ident" id="3251719"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251720">.</span><span class="ident" id="3251721">buf</span><span class="op" id="3251724">)</span><span class="op" id="3251725">+</span><span class="ident" id="3251726"><a href="/bytes/buffer.go.html#3251590">n</a></span>&nbsp;<span class="op" id="3251728">&gt;</span>&nbsp;<span class="builtinfunc" id="3251730">cap</span><span class="op" id="3251733">(</span><span class="ident" id="3251734"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251735">.</span><span class="ident" id="3251736">buf</span><span class="op" id="3251739">)</span>&nbsp;<span class="op" id="3251741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251745">var</span>&nbsp;<span class="ident" id="3251749">buf</span>&nbsp;<span class="op" id="3251753">[</span><span class="op" id="3251754">]</span><span class="builtintype" id="3251755">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3251762">if</span>&nbsp;<span class="ident" id="3251765"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251766">.</span><span class="ident" id="3251767">buf</span>&nbsp;<span class="op" id="3251771">==</span>&nbsp;<span class="ident" id="3251774">nil</span>&nbsp;<span class="op" id="3251778">&amp;&amp;</span>&nbsp;<span class="ident" id="3251781"><a href="/bytes/buffer.go.html#3251590">n</a></span>&nbsp;<span class="op" id="3251783">&lt;=</span>&nbsp;<span class="builtinfunc" id="3251786">len</span><span class="op" id="3251789">(</span><span class="ident" id="3251790"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251791">.</span><span class="ident" id="3251792">bootstrap</span><span class="op" id="3251801">)</span>&nbsp;<span class="op" id="3251803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3251808"><a href="/bytes/buffer.go.html#3251749">buf</a></span>&nbsp;<span class="op" id="3251812">=</span>&nbsp;<span class="ident" id="3251814"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251815">.</span><span class="ident" id="3251816">bootstrap</span><span class="op" id="3251825">[</span><span class="num" id="3251826">0</span><span class="op" id="3251827">:</span><span class="op" id="3251828">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3251832">}</span>&nbsp;<span class="keyword" id="3251834">else</span>&nbsp;<span class="keyword" id="3251839">if</span>&nbsp;<span class="ident" id="3251842"><a href="/bytes/buffer.go.html#3251604">m</a></span><span class="op" id="3251843">+</span><span class="ident" id="3251844"><a href="/bytes/buffer.go.html#3251590">n</a></span>&nbsp;<span class="op" id="3251846">&lt;=</span>&nbsp;<span class="builtinfunc" id="3251849">cap</span><span class="op" id="3251852">(</span><span class="ident" id="3251853"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3251854">.</span><span class="ident" id="3251855">buf</span><span class="op" id="3251858">)</span><span class="op" id="3251859">/</span><span class="num" id="3251860">2</span>&nbsp;<span class="op" id="3251862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251867">//&nbsp;We&nbsp;can&nbsp;slide&nbsp;things&nbsp;down&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251926">//&nbsp;slice.&nbsp;We&nbsp;only&nbsp;need&nbsp;m+n&nbsp;&lt;=&nbsp;cap(b.buf)&nbsp;to&nbsp;slide,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3251984">//&nbsp;we&nbsp;instead&nbsp;let&nbsp;capacity&nbsp;get&nbsp;twice&nbsp;as&nbsp;large&nbsp;so&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3252039">//&nbsp;don&#39;t&nbsp;spend&nbsp;all&nbsp;our&nbsp;time&nbsp;copying.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3252079">copy</span><span class="op" id="3252083">(</span><span class="ident" id="3252084"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252085">.</span><span class="ident" id="3252086">buf</span><span class="op" id="3252089">[</span><span class="op" id="3252090">:</span><span class="op" id="3252091">]</span><span class="op" id="3252092">,</span>&nbsp;<span class="ident" id="3252094"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252095">.</span><span class="ident" id="3252096">buf</span><span class="op" id="3252099">[</span><span class="ident" id="3252100"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252101">.</span><span class="ident" id="3252102">off</span><span class="op" id="3252105">:</span><span class="op" id="3252106">]</span><span class="op" id="3252107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252112"><a href="/bytes/buffer.go.html#3251749">buf</a></span>&nbsp;<span class="op" id="3252116">=</span>&nbsp;<span class="ident" id="3252118"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252119">.</span><span class="ident" id="3252120">buf</span><span class="op" id="3252123">[</span><span class="op" id="3252124">:</span><span class="ident" id="3252125"><a href="/bytes/buffer.go.html#3251604">m</a></span><span class="op" id="3252126">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252130">}</span>&nbsp;<span class="keyword" id="3252132">else</span>&nbsp;<span class="op" id="3252137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3252142">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;anywhere</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252174"><a href="/bytes/buffer.go.html#3251749">buf</a></span>&nbsp;<span class="op" id="3252178">=</span>&nbsp;<span class="ident" id="3252180"><a href="/bytes/buffer.go.html#3254863">makeSlice</a></span><span class="op" id="3252189">(</span><span class="num" id="3252190">2</span><span class="op" id="3252191">*</span><span class="builtinfunc" id="3252192">cap</span><span class="op" id="3252195">(</span><span class="ident" id="3252196"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252197">.</span><span class="ident" id="3252198">buf</span><span class="op" id="3252201">)</span>&nbsp;<span class="op" id="3252203">+</span>&nbsp;<span class="ident" id="3252205"><a href="/bytes/buffer.go.html#3251590">n</a></span><span class="op" id="3252206">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3252211">copy</span><span class="op" id="3252215">(</span><span class="ident" id="3252216"><a href="/bytes/buffer.go.html#3251749">buf</a></span><span class="op" id="3252219">,</span>&nbsp;<span class="ident" id="3252221"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252222">.</span><span class="ident" id="3252223">buf</span><span class="op" id="3252226">[</span><span class="ident" id="3252227"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252228">.</span><span class="ident" id="3252229">off</span><span class="op" id="3252232">:</span><span class="op" id="3252233">]</span><span class="op" id="3252234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252242"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252243">.</span><span class="ident" id="3252244">buf</span>&nbsp;<span class="op" id="3252248">=</span>&nbsp;<span class="ident" id="3252250"><a href="/bytes/buffer.go.html#3251749">buf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252256"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252257">.</span><span class="ident" id="3252258">off</span>&nbsp;<span class="op" id="3252262">=</span>&nbsp;<span class="num" id="3252264">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252267">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252270"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252271">.</span><span class="ident" id="3252272">buf</span>&nbsp;<span class="op" id="3252276">=</span>&nbsp;<span class="ident" id="3252278"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252279">.</span><span class="ident" id="3252280">buf</span><span class="op" id="3252283">[</span><span class="num" id="3252284">0</span>&nbsp;<span class="op" id="3252286">:</span>&nbsp;<span class="ident" id="3252288"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252289">.</span><span class="ident" id="3252290">off</span><span class="op" id="3252293">+</span><span class="ident" id="3252294"><a href="/bytes/buffer.go.html#3251604">m</a></span><span class="op" id="3252295">+</span><span class="ident" id="3252296"><a href="/bytes/buffer.go.html#3251590">n</a></span><span class="op" id="3252297">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252300">return</span>&nbsp;<span class="ident" id="3252307"><a href="/bytes/buffer.go.html#3251574">b</a></span><span class="op" id="3252308">.</span><span class="ident" id="3252309">off</span>&nbsp;<span class="op" id="3252313">+</span>&nbsp;<span class="ident" id="3252315"><a href="/bytes/buffer.go.html#3251604">m</a></span><br>
<span class="lineno"></span><span class="op" id="3252317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252320">//&nbsp;Grow&nbsp;grows&nbsp;the&nbsp;buffer&#39;s&nbsp;capacity,&nbsp;if&nbsp;necessary,&nbsp;to&nbsp;guarantee&nbsp;space&nbsp;for</span><br>
<span class="lineno">110</span><span class="comment" id="3252394">//&nbsp;another&nbsp;n&nbsp;bytes.&nbsp;After&nbsp;Grow(n),&nbsp;at&nbsp;least&nbsp;n&nbsp;bytes&nbsp;can&nbsp;be&nbsp;written&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3252468">//&nbsp;buffer&nbsp;without&nbsp;another&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="comment" id="3252506">//&nbsp;If&nbsp;n&nbsp;is&nbsp;negative,&nbsp;Grow&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="3252544">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;can&#39;t&nbsp;grow&nbsp;it&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3252604">func</span>&nbsp;<span class="op" id="3252609">(</span><span class="ident" id="3252610">b</span>&nbsp;<span class="op" id="3252612">*</span><span class="ident" id="3252613"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3252619">)</span>&nbsp;<span class="ident" id="3252621">Grow</span><span class="op" id="3252625">(</span><span class="ident" id="3252626">n</span>&nbsp;<span class="builtintype" id="3252628">int</span><span class="op" id="3252631">)</span>&nbsp;<span class="op" id="3252633">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3252636">if</span>&nbsp;<span class="ident" id="3252639"><a href="/bytes/buffer.go.html#3252626">n</a></span>&nbsp;<span class="op" id="3252641">&lt;</span>&nbsp;<span class="num" id="3252643">0</span>&nbsp;<span class="op" id="3252645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3252649">panic</span><span class="op" id="3252654">(</span><span class="string" id="3252655">&#34;bytes.Buffer.Grow:&nbsp;negative&nbsp;count&#34;</span><span class="op" id="3252690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3252693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252696">m</span>&nbsp;<span class="op" id="3252698">:=</span>&nbsp;<span class="ident" id="3252701"><a href="/bytes/buffer.go.html#3252610">b</a></span><span class="op" id="3252702">.</span><span class="ident" id="3252703">grow</span><span class="op" id="3252707">(</span><span class="ident" id="3252708"><a href="/bytes/buffer.go.html#3252626">n</a></span><span class="op" id="3252709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3252712"><a href="/bytes/buffer.go.html#3252610">b</a></span><span class="op" id="3252713">.</span><span class="ident" id="3252714">buf</span>&nbsp;<span class="op" id="3252718">=</span>&nbsp;<span class="ident" id="3252720"><a href="/bytes/buffer.go.html#3252610">b</a></span><span class="op" id="3252721">.</span><span class="ident" id="3252722">buf</span><span class="op" id="3252725">[</span><span class="num" id="3252726">0</span><span class="op" id="3252727">:</span><span class="ident" id="3252728"><a href="/bytes/buffer.go.html#3252696">m</a></span><span class="op" id="3252729">]</span><br>
<span class="lineno">120</span><span class="op" id="3252731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252734">//&nbsp;Write&nbsp;appends&nbsp;the&nbsp;contents&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3252806">//&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;p;&nbsp;err&nbsp;is&nbsp;always&nbsp;nil.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3252882">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;Write&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">125</span><span class="keyword" id="3252946">func</span>&nbsp;<span class="op" id="3252951">(</span><span class="ident" id="3252952">b</span>&nbsp;<span class="op" id="3252954">*</span><span class="ident" id="3252955"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3252961">)</span>&nbsp;<span class="ident" id="3252963">Write</span><span class="op" id="3252968">(</span><span class="ident" id="3252969">p</span>&nbsp;<span class="op" id="3252971">[</span><span class="op" id="3252972">]</span><span class="builtintype" id="3252973">byte</span><span class="op" id="3252977">)</span>&nbsp;<span class="op" id="3252979">(</span><span class="ident" id="3252980">n</span>&nbsp;<span class="builtintype" id="3252982">int</span><span class="op" id="3252985">,</span>&nbsp;<span class="ident" id="3252987">err</span>&nbsp;<span class="builtintype" id="3252991">error</span><span class="op" id="3252996">)</span>&nbsp;<span class="op" id="3252998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253001"><a href="/bytes/buffer.go.html#3252952">b</a></span><span class="op" id="3253002">.</span><span class="ident" id="3253003">lastRead</span>&nbsp;<span class="op" id="3253012">=</span>&nbsp;<span class="ident" id="3253014"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253025">m</span>&nbsp;<span class="op" id="3253027">:=</span>&nbsp;<span class="ident" id="3253030"><a href="/bytes/buffer.go.html#3252952">b</a></span><span class="op" id="3253031">.</span><span class="ident" id="3253032">grow</span><span class="op" id="3253036">(</span><span class="builtinfunc" id="3253037">len</span><span class="op" id="3253040">(</span><span class="ident" id="3253041"><a href="/bytes/buffer.go.html#3252969">p</a></span><span class="op" id="3253042">)</span><span class="op" id="3253043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253046">return</span>&nbsp;<span class="builtinfunc" id="3253053">copy</span><span class="op" id="3253057">(</span><span class="ident" id="3253058"><a href="/bytes/buffer.go.html#3252952">b</a></span><span class="op" id="3253059">.</span><span class="ident" id="3253060">buf</span><span class="op" id="3253063">[</span><span class="ident" id="3253064"><a href="/bytes/buffer.go.html#3253025">m</a></span><span class="op" id="3253065">:</span><span class="op" id="3253066">]</span><span class="op" id="3253067">,</span>&nbsp;<span class="ident" id="3253069"><a href="/bytes/buffer.go.html#3252969">p</a></span><span class="op" id="3253070">)</span><span class="op" id="3253071">,</span>&nbsp;<span class="ident" id="3253073">nil</span><br>
<span class="lineno"></span><span class="op" id="3253077">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="3253080">//&nbsp;WriteString&nbsp;appends&nbsp;the&nbsp;contents&nbsp;of&nbsp;s&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3253158">//&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;s;&nbsp;err&nbsp;is&nbsp;always&nbsp;nil.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3253234">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteString&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3253304">func</span>&nbsp;<span class="op" id="3253309">(</span><span class="ident" id="3253310">b</span>&nbsp;<span class="op" id="3253312">*</span><span class="ident" id="3253313"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3253319">)</span>&nbsp;<span class="ident" id="3253321">WriteString</span><span class="op" id="3253332">(</span><span class="ident" id="3253333">s</span>&nbsp;<span class="builtintype" id="3253335">string</span><span class="op" id="3253341">)</span>&nbsp;<span class="op" id="3253343">(</span><span class="ident" id="3253344">n</span>&nbsp;<span class="builtintype" id="3253346">int</span><span class="op" id="3253349">,</span>&nbsp;<span class="ident" id="3253351">err</span>&nbsp;<span class="builtintype" id="3253355">error</span><span class="op" id="3253360">)</span>&nbsp;<span class="op" id="3253362">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253365"><a href="/bytes/buffer.go.html#3253310">b</a></span><span class="op" id="3253366">.</span><span class="ident" id="3253367">lastRead</span>&nbsp;<span class="op" id="3253376">=</span>&nbsp;<span class="ident" id="3253378"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3253389">m</span>&nbsp;<span class="op" id="3253391">:=</span>&nbsp;<span class="ident" id="3253394"><a href="/bytes/buffer.go.html#3253310">b</a></span><span class="op" id="3253395">.</span><span class="ident" id="3253396">grow</span><span class="op" id="3253400">(</span><span class="builtinfunc" id="3253401">len</span><span class="op" id="3253404">(</span><span class="ident" id="3253405"><a href="/bytes/buffer.go.html#3253333">s</a></span><span class="op" id="3253406">)</span><span class="op" id="3253407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3253410">return</span>&nbsp;<span class="builtinfunc" id="3253417">copy</span><span class="op" id="3253421">(</span><span class="ident" id="3253422"><a href="/bytes/buffer.go.html#3253310">b</a></span><span class="op" id="3253423">.</span><span class="ident" id="3253424">buf</span><span class="op" id="3253427">[</span><span class="ident" id="3253428"><a href="/bytes/buffer.go.html#3253389">m</a></span><span class="op" id="3253429">:</span><span class="op" id="3253430">]</span><span class="op" id="3253431">,</span>&nbsp;<span class="ident" id="3253433"><a href="/bytes/buffer.go.html#3253333">s</a></span><span class="op" id="3253434">)</span><span class="op" id="3253435">,</span>&nbsp;<span class="ident" id="3253437">nil</span><br>
<span class="lineno"></span><span class="op" id="3253441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3253444">//&nbsp;MinRead&nbsp;is&nbsp;the&nbsp;minimum&nbsp;slice&nbsp;size&nbsp;passed&nbsp;to&nbsp;a&nbsp;Read&nbsp;call&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3253506">//&nbsp;Buffer.ReadFrom.&nbsp;&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;Buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;MinRead&nbsp;bytes&nbsp;beyond</span><br>
<span class="lineno"></span><span class="comment" id="3253583">//&nbsp;what&nbsp;is&nbsp;required&nbsp;to&nbsp;hold&nbsp;the&nbsp;contents&nbsp;of&nbsp;r,&nbsp;ReadFrom&nbsp;will&nbsp;not&nbsp;grow&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3253657">//&nbsp;underlying&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3253679">const</span>&nbsp;<span class="ident" id="3253685">MinRead</span>&nbsp;<span class="op" id="3253693">=</span>&nbsp;<span class="num" id="3253695">512</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="3253700">//&nbsp;ReadFrom&nbsp;reads&nbsp;data&nbsp;from&nbsp;r&nbsp;until&nbsp;EOF&nbsp;and&nbsp;appends&nbsp;it&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing</span><br>
<span class="lineno"></span><span class="comment" id="3253778">//&nbsp;the&nbsp;buffer&nbsp;as&nbsp;needed.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.&nbsp;Any</span><br>
<span class="lineno"></span><span class="comment" id="3253855">//&nbsp;error&nbsp;except&nbsp;io.EOF&nbsp;encountered&nbsp;during&nbsp;the&nbsp;read&nbsp;is&nbsp;also&nbsp;returned.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3253931">//&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;ReadFrom&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno">150</span><span class="keyword" id="3253998">func</span>&nbsp;<span class="op" id="3254003">(</span><span class="ident" id="3254004">b</span>&nbsp;<span class="op" id="3254006">*</span><span class="ident" id="3254007"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3254013">)</span>&nbsp;<span class="ident" id="3254015">ReadFrom</span><span class="op" id="3254023">(</span><span class="ident" id="3254024">r</span>&nbsp;<span class="ident" id="3254026"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3254028">.</span><span class="ident" id="3254029">Reader</span><span class="op" id="3254035">)</span>&nbsp;<span class="op" id="3254037">(</span><span class="ident" id="3254038">n</span>&nbsp;<span class="ident" id="3254040">int64</span><span class="op" id="3254045">,</span>&nbsp;<span class="ident" id="3254047">err</span>&nbsp;<span class="builtintype" id="3254051">error</span><span class="op" id="3254056">)</span>&nbsp;<span class="op" id="3254058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254061"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254062">.</span><span class="ident" id="3254063">lastRead</span>&nbsp;<span class="op" id="3254072">=</span>&nbsp;<span class="ident" id="3254074"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3254085">//&nbsp;If&nbsp;buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254133">if</span>&nbsp;<span class="ident" id="3254136"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254137">.</span><span class="ident" id="3254138">off</span>&nbsp;<span class="op" id="3254142">&gt;=</span>&nbsp;<span class="builtinfunc" id="3254145">len</span><span class="op" id="3254148">(</span><span class="ident" id="3254149"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254150">.</span><span class="ident" id="3254151">buf</span><span class="op" id="3254154">)</span>&nbsp;<span class="op" id="3254156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254160"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254161">.</span><span class="ident" id="3254162">Truncate</span><span class="op" id="3254170">(</span><span class="num" id="3254171">0</span><span class="op" id="3254172">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254178">for</span>&nbsp;<span class="op" id="3254182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254186">if</span>&nbsp;<span class="ident" id="3254189">free</span>&nbsp;<span class="op" id="3254194">:=</span>&nbsp;<span class="builtinfunc" id="3254197">cap</span><span class="op" id="3254200">(</span><span class="ident" id="3254201"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254202">.</span><span class="ident" id="3254203">buf</span><span class="op" id="3254206">)</span>&nbsp;<span class="op" id="3254208">-</span>&nbsp;<span class="builtinfunc" id="3254210">len</span><span class="op" id="3254213">(</span><span class="ident" id="3254214"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254215">.</span><span class="ident" id="3254216">buf</span><span class="op" id="3254219">)</span><span class="op" id="3254220">;</span>&nbsp;<span class="ident" id="3254222"><a href="/bytes/buffer.go.html#3254189">free</a></span>&nbsp;<span class="op" id="3254227">&lt;</span>&nbsp;<span class="ident" id="3254229"><a href="/bytes/buffer.go.html#3253685">MinRead</a></span>&nbsp;<span class="op" id="3254237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3254242">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;at&nbsp;end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254272">newBuf</span>&nbsp;<span class="op" id="3254279">:=</span>&nbsp;<span class="ident" id="3254282"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254283">.</span><span class="ident" id="3254284">buf</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254291">if</span>&nbsp;<span class="ident" id="3254294"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254295">.</span><span class="ident" id="3254296">off</span><span class="op" id="3254299">+</span><span class="ident" id="3254300"><a href="/bytes/buffer.go.html#3254189">free</a></span>&nbsp;<span class="op" id="3254305">&lt;</span>&nbsp;<span class="ident" id="3254307"><a href="/bytes/buffer.go.html#3253685">MinRead</a></span>&nbsp;<span class="op" id="3254315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3254321">//&nbsp;not&nbsp;enough&nbsp;space&nbsp;using&nbsp;beginning&nbsp;of&nbsp;buffer;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3254372">//&nbsp;double&nbsp;buffer&nbsp;capacity</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254402"><a href="/bytes/buffer.go.html#3254272">newBuf</a></span>&nbsp;<span class="op" id="3254409">=</span>&nbsp;<span class="ident" id="3254411"><a href="/bytes/buffer.go.html#3254863">makeSlice</a></span><span class="op" id="3254420">(</span><span class="num" id="3254421">2</span><span class="op" id="3254422">*</span><span class="builtinfunc" id="3254423">cap</span><span class="op" id="3254426">(</span><span class="ident" id="3254427"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254428">.</span><span class="ident" id="3254429">buf</span><span class="op" id="3254432">)</span>&nbsp;<span class="op" id="3254434">+</span>&nbsp;<span class="ident" id="3254436"><a href="/bytes/buffer.go.html#3253685">MinRead</a></span><span class="op" id="3254443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254448">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3254453">copy</span><span class="op" id="3254457">(</span><span class="ident" id="3254458"><a href="/bytes/buffer.go.html#3254272">newBuf</a></span><span class="op" id="3254464">,</span>&nbsp;<span class="ident" id="3254466"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254467">.</span><span class="ident" id="3254468">buf</span><span class="op" id="3254471">[</span><span class="ident" id="3254472"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254473">.</span><span class="ident" id="3254474">off</span><span class="op" id="3254477">:</span><span class="op" id="3254478">]</span><span class="op" id="3254479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254484"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254485">.</span><span class="ident" id="3254486">buf</span>&nbsp;<span class="op" id="3254490">=</span>&nbsp;<span class="ident" id="3254492"><a href="/bytes/buffer.go.html#3254272">newBuf</a></span><span class="op" id="3254498">[</span><span class="op" id="3254499">:</span><span class="builtinfunc" id="3254500">len</span><span class="op" id="3254503">(</span><span class="ident" id="3254504"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254505">.</span><span class="ident" id="3254506">buf</span><span class="op" id="3254509">)</span><span class="op" id="3254510">-</span><span class="ident" id="3254511"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254512">.</span><span class="ident" id="3254513">off</span><span class="op" id="3254516">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254521"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254522">.</span><span class="ident" id="3254523">off</span>&nbsp;<span class="op" id="3254527">=</span>&nbsp;<span class="num" id="3254529">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254537">m</span><span class="op" id="3254538">,</span>&nbsp;<span class="ident" id="3254540">e</span>&nbsp;<span class="op" id="3254542">:=</span>&nbsp;<span class="ident" id="3254545"><a href="/bytes/buffer.go.html#3254024">r</a></span><span class="op" id="3254546">.</span><span class="ident" id="3254547">Read</span><span class="op" id="3254551">(</span><span class="ident" id="3254552"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254553">.</span><span class="ident" id="3254554">buf</span><span class="op" id="3254557">[</span><span class="builtinfunc" id="3254558">len</span><span class="op" id="3254561">(</span><span class="ident" id="3254562"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254563">.</span><span class="ident" id="3254564">buf</span><span class="op" id="3254567">)</span><span class="op" id="3254568">:</span><span class="builtinfunc" id="3254569">cap</span><span class="op" id="3254572">(</span><span class="ident" id="3254573"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254574">.</span><span class="ident" id="3254575">buf</span><span class="op" id="3254578">)</span><span class="op" id="3254579">]</span><span class="op" id="3254580">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254584"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254585">.</span><span class="ident" id="3254586">buf</span>&nbsp;<span class="op" id="3254590">=</span>&nbsp;<span class="ident" id="3254592"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254593">.</span><span class="ident" id="3254594">buf</span><span class="op" id="3254597">[</span><span class="num" id="3254598">0</span>&nbsp;<span class="op" id="3254600">:</span>&nbsp;<span class="builtinfunc" id="3254602">len</span><span class="op" id="3254605">(</span><span class="ident" id="3254606"><a href="/bytes/buffer.go.html#3254004">b</a></span><span class="op" id="3254607">.</span><span class="ident" id="3254608">buf</span><span class="op" id="3254611">)</span><span class="op" id="3254612">+</span><span class="ident" id="3254613"><a href="/bytes/buffer.go.html#3254537">m</a></span><span class="op" id="3254614">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3254618"><a href="/bytes/buffer.go.html#3254038">n</a></span>&nbsp;<span class="op" id="3254620">+=</span>&nbsp;<span class="ident" id="3254623">int64</span><span class="op" id="3254628">(</span><span class="ident" id="3254629"><a href="/bytes/buffer.go.html#3254537">m</a></span><span class="op" id="3254630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254634">if</span>&nbsp;<span class="ident" id="3254637"><a href="/bytes/buffer.go.html#3254540">e</a></span>&nbsp;<span class="op" id="3254639">==</span>&nbsp;<span class="ident" id="3254642"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3254644">.</span><span class="ident" id="3254645">EOF</span>&nbsp;<span class="op" id="3254649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254654">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254662">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254666">if</span>&nbsp;<span class="ident" id="3254669"><a href="/bytes/buffer.go.html#3254540">e</a></span>&nbsp;<span class="op" id="3254671">!=</span>&nbsp;<span class="ident" id="3254674">nil</span>&nbsp;<span class="op" id="3254678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254683">return</span>&nbsp;<span class="ident" id="3254690"><a href="/bytes/buffer.go.html#3254038">n</a></span><span class="op" id="3254691">,</span>&nbsp;<span class="ident" id="3254693"><a href="/bytes/buffer.go.html#3254540">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254703">return</span>&nbsp;<span class="ident" id="3254710"><a href="/bytes/buffer.go.html#3254038">n</a></span><span class="op" id="3254711">,</span>&nbsp;<span class="ident" id="3254713">nil</span>&nbsp;<span class="comment" id="3254717">//&nbsp;err&nbsp;is&nbsp;EOF,&nbsp;so&nbsp;return&nbsp;nil&nbsp;explicitly</span><br>
<span class="lineno">180</span><span class="op" id="3254757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254760">//&nbsp;makeSlice&nbsp;allocates&nbsp;a&nbsp;slice&nbsp;of&nbsp;size&nbsp;n.&nbsp;If&nbsp;the&nbsp;allocation&nbsp;fails,&nbsp;it&nbsp;panics</span><br>
<span class="lineno"></span><span class="comment" id="3254837">//&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3254858">func</span>&nbsp;<span class="ident" id="3254863">makeSlice</span><span class="op" id="3254872">(</span><span class="ident" id="3254873">n</span>&nbsp;<span class="builtintype" id="3254875">int</span><span class="op" id="3254878">)</span>&nbsp;<span class="op" id="3254880">[</span><span class="op" id="3254881">]</span><span class="builtintype" id="3254882">byte</span>&nbsp;<span class="op" id="3254887">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3254890">//&nbsp;If&nbsp;the&nbsp;make&nbsp;fails,&nbsp;give&nbsp;a&nbsp;known&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254933">defer</span>&nbsp;<span class="keyword" id="3254939">func</span><span class="op" id="3254943">(</span><span class="op" id="3254944">)</span>&nbsp;<span class="op" id="3254946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3254950">if</span>&nbsp;<span class="builtinfunc" id="3254953">recover</span><span class="op" id="3254960">(</span><span class="op" id="3254961">)</span>&nbsp;<span class="op" id="3254963">!=</span>&nbsp;<span class="ident" id="3254966">nil</span>&nbsp;<span class="op" id="3254970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3254975">panic</span><span class="op" id="3254980">(</span><span class="ident" id="3254981"><a href="/bytes/buffer.go.html#3250057">ErrTooLarge</a></span><span class="op" id="3254992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254996">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3254999">}</span><span class="op" id="3255000">(</span><span class="op" id="3255001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255004">return</span>&nbsp;<span class="builtinfunc" id="3255011">make</span><span class="op" id="3255015">(</span><span class="op" id="3255016">[</span><span class="op" id="3255017">]</span><span class="builtintype" id="3255018">byte</span><span class="op" id="3255022">,</span>&nbsp;<span class="ident" id="3255024"><a href="/bytes/buffer.go.html#3254873">n</a></span><span class="op" id="3255025">)</span><br>
<span class="lineno"></span><span class="op" id="3255027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3255030">//&nbsp;WriteTo&nbsp;writes&nbsp;data&nbsp;to&nbsp;w&nbsp;until&nbsp;the&nbsp;buffer&nbsp;is&nbsp;drained&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno">195</span><span class="comment" id="3255106">//&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written;&nbsp;it&nbsp;always&nbsp;fits&nbsp;into&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="3255183">//&nbsp;int,&nbsp;but&nbsp;it&nbsp;is&nbsp;int64&nbsp;to&nbsp;match&nbsp;the&nbsp;io.WriterTo&nbsp;interface.&nbsp;Any&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3255253">//&nbsp;encountered&nbsp;during&nbsp;the&nbsp;write&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3255303">func</span>&nbsp;<span class="op" id="3255308">(</span><span class="ident" id="3255309">b</span>&nbsp;<span class="op" id="3255311">*</span><span class="ident" id="3255312"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3255318">)</span>&nbsp;<span class="ident" id="3255320">WriteTo</span><span class="op" id="3255327">(</span><span class="ident" id="3255328">w</span>&nbsp;<span class="ident" id="3255330"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3255332">.</span><span class="ident" id="3255333">Writer</span><span class="op" id="3255339">)</span>&nbsp;<span class="op" id="3255341">(</span><span class="ident" id="3255342">n</span>&nbsp;<span class="ident" id="3255344">int64</span><span class="op" id="3255349">,</span>&nbsp;<span class="ident" id="3255351">err</span>&nbsp;<span class="builtintype" id="3255355">error</span><span class="op" id="3255360">)</span>&nbsp;<span class="op" id="3255362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255365"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255366">.</span><span class="ident" id="3255367">lastRead</span>&nbsp;<span class="op" id="3255376">=</span>&nbsp;<span class="ident" id="3255378"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255389">if</span>&nbsp;<span class="ident" id="3255392"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255393">.</span><span class="ident" id="3255394">off</span>&nbsp;<span class="op" id="3255398">&lt;</span>&nbsp;<span class="builtinfunc" id="3255400">len</span><span class="op" id="3255403">(</span><span class="ident" id="3255404"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255405">.</span><span class="ident" id="3255406">buf</span><span class="op" id="3255409">)</span>&nbsp;<span class="op" id="3255411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255415">nBytes</span>&nbsp;<span class="op" id="3255422">:=</span>&nbsp;<span class="ident" id="3255425"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255426">.</span><span class="ident" id="3255427">Len</span><span class="op" id="3255430">(</span><span class="op" id="3255431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255435">m</span><span class="op" id="3255436">,</span>&nbsp;<span class="ident" id="3255438">e</span>&nbsp;<span class="op" id="3255440">:=</span>&nbsp;<span class="ident" id="3255443"><a href="/bytes/buffer.go.html#3255328">w</a></span><span class="op" id="3255444">.</span><span class="ident" id="3255445">Write</span><span class="op" id="3255450">(</span><span class="ident" id="3255451"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255452">.</span><span class="ident" id="3255453">buf</span><span class="op" id="3255456">[</span><span class="ident" id="3255457"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255458">.</span><span class="ident" id="3255459">off</span><span class="op" id="3255462">:</span><span class="op" id="3255463">]</span><span class="op" id="3255464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255468">if</span>&nbsp;<span class="ident" id="3255471"><a href="/bytes/buffer.go.html#3255435">m</a></span>&nbsp;<span class="op" id="3255473">&gt;</span>&nbsp;<span class="ident" id="3255475"><a href="/bytes/buffer.go.html#3255415">nBytes</a></span>&nbsp;<span class="op" id="3255482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3255487">panic</span><span class="op" id="3255492">(</span><span class="string" id="3255493">&#34;bytes.Buffer.WriteTo:&nbsp;invalid&nbsp;Write&nbsp;count&#34;</span><span class="op" id="3255536">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255544"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255545">.</span><span class="ident" id="3255546">off</span>&nbsp;<span class="op" id="3255550">+=</span>&nbsp;<span class="ident" id="3255553"><a href="/bytes/buffer.go.html#3255435">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255557"><a href="/bytes/buffer.go.html#3255342">n</a></span>&nbsp;<span class="op" id="3255559">=</span>&nbsp;<span class="ident" id="3255561">int64</span><span class="op" id="3255566">(</span><span class="ident" id="3255567"><a href="/bytes/buffer.go.html#3255435">m</a></span><span class="op" id="3255568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255572">if</span>&nbsp;<span class="ident" id="3255575"><a href="/bytes/buffer.go.html#3255438">e</a></span>&nbsp;<span class="op" id="3255577">!=</span>&nbsp;<span class="ident" id="3255580">nil</span>&nbsp;<span class="op" id="3255584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255589">return</span>&nbsp;<span class="ident" id="3255596"><a href="/bytes/buffer.go.html#3255342">n</a></span><span class="op" id="3255597">,</span>&nbsp;<span class="ident" id="3255599"><a href="/bytes/buffer.go.html#3255438">e</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3255607">//&nbsp;all&nbsp;bytes&nbsp;should&nbsp;have&nbsp;been&nbsp;written,&nbsp;by&nbsp;definition&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3255665">//&nbsp;Write&nbsp;method&nbsp;in&nbsp;io.Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255696">if</span>&nbsp;<span class="ident" id="3255699"><a href="/bytes/buffer.go.html#3255435">m</a></span>&nbsp;<span class="op" id="3255701">!=</span>&nbsp;<span class="ident" id="3255704"><a href="/bytes/buffer.go.html#3255415">nBytes</a></span>&nbsp;<span class="op" id="3255711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255716">return</span>&nbsp;<span class="ident" id="3255723"><a href="/bytes/buffer.go.html#3255342">n</a></span><span class="op" id="3255724">,</span>&nbsp;<span class="ident" id="3255726"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3255728">.</span><span class="ident" id="3255729">ErrShortWrite</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3255751">//&nbsp;Buffer&nbsp;is&nbsp;now&nbsp;empty;&nbsp;reset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255783"><a href="/bytes/buffer.go.html#3255309">b</a></span><span class="op" id="3255784">.</span><span class="ident" id="3255785">Truncate</span><span class="op" id="3255793">(</span><span class="num" id="3255794">0</span><span class="op" id="3255795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255798">return</span><br>
<span class="lineno">220</span><span class="op" id="3255805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3255808">//&nbsp;WriteByte&nbsp;appends&nbsp;the&nbsp;byte&nbsp;c&nbsp;to&nbsp;the&nbsp;buffer,&nbsp;growing&nbsp;the&nbsp;buffer&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span><span class="comment" id="3255885">//&nbsp;The&nbsp;returned&nbsp;error&nbsp;is&nbsp;always&nbsp;nil,&nbsp;but&nbsp;is&nbsp;included&nbsp;to&nbsp;match&nbsp;bufio.Writer&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3255962">//&nbsp;WriteByte.&nbsp;If&nbsp;the&nbsp;buffer&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteByte&nbsp;will&nbsp;panic&nbsp;with</span><br>
<span class="lineno">225</span><span class="comment" id="3256035">//&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3256051">func</span>&nbsp;<span class="op" id="3256056">(</span><span class="ident" id="3256057">b</span>&nbsp;<span class="op" id="3256059">*</span><span class="ident" id="3256060"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3256066">)</span>&nbsp;<span class="ident" id="3256068">WriteByte</span><span class="op" id="3256077">(</span><span class="ident" id="3256078">c</span>&nbsp;<span class="builtintype" id="3256080">byte</span><span class="op" id="3256084">)</span>&nbsp;<span class="builtintype" id="3256086">error</span>&nbsp;<span class="op" id="3256092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256095"><a href="/bytes/buffer.go.html#3256057">b</a></span><span class="op" id="3256096">.</span><span class="ident" id="3256097">lastRead</span>&nbsp;<span class="op" id="3256106">=</span>&nbsp;<span class="ident" id="3256108"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256119">m</span>&nbsp;<span class="op" id="3256121">:=</span>&nbsp;<span class="ident" id="3256124"><a href="/bytes/buffer.go.html#3256057">b</a></span><span class="op" id="3256125">.</span><span class="ident" id="3256126">grow</span><span class="op" id="3256130">(</span><span class="num" id="3256131">1</span><span class="op" id="3256132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256135"><a href="/bytes/buffer.go.html#3256057">b</a></span><span class="op" id="3256136">.</span><span class="ident" id="3256137">buf</span><span class="op" id="3256140">[</span><span class="ident" id="3256141"><a href="/bytes/buffer.go.html#3256119">m</a></span><span class="op" id="3256142">]</span>&nbsp;<span class="op" id="3256144">=</span>&nbsp;<span class="ident" id="3256146"><a href="/bytes/buffer.go.html#3256078">c</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256149">return</span>&nbsp;<span class="ident" id="3256156">nil</span><br>
<span class="lineno"></span><span class="op" id="3256160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256163">//&nbsp;WriteRune&nbsp;appends&nbsp;the&nbsp;UTF-8&nbsp;encoding&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3256234">//&nbsp;buffer,&nbsp;returning&nbsp;its&nbsp;length&nbsp;and&nbsp;an&nbsp;error,&nbsp;which&nbsp;is&nbsp;always&nbsp;nil&nbsp;but&nbsp;is</span><br>
<span class="lineno">235</span><span class="comment" id="3256307">//&nbsp;included&nbsp;to&nbsp;match&nbsp;bufio.Writer&#39;s&nbsp;WriteRune.&nbsp;The&nbsp;buffer&nbsp;is&nbsp;grown&nbsp;as&nbsp;needed;</span><br>
<span class="lineno"></span><span class="comment" id="3256385">//&nbsp;if&nbsp;it&nbsp;becomes&nbsp;too&nbsp;large,&nbsp;WriteRune&nbsp;will&nbsp;panic&nbsp;with&nbsp;ErrTooLarge.</span><br>
<span class="lineno"></span><span class="keyword" id="3256452">func</span>&nbsp;<span class="op" id="3256457">(</span><span class="ident" id="3256458">b</span>&nbsp;<span class="op" id="3256460">*</span><span class="ident" id="3256461"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3256467">)</span>&nbsp;<span class="ident" id="3256469">WriteRune</span><span class="op" id="3256478">(</span><span class="ident" id="3256479">r</span>&nbsp;<span class="builtintype" id="3256481">rune</span><span class="op" id="3256485">)</span>&nbsp;<span class="op" id="3256487">(</span><span class="ident" id="3256488">n</span>&nbsp;<span class="builtintype" id="3256490">int</span><span class="op" id="3256493">,</span>&nbsp;<span class="ident" id="3256495">err</span>&nbsp;<span class="builtintype" id="3256499">error</span><span class="op" id="3256504">)</span>&nbsp;<span class="op" id="3256506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256509">if</span>&nbsp;<span class="ident" id="3256512"><a href="/bytes/buffer.go.html#3256479">r</a></span>&nbsp;<span class="op" id="3256514">&lt;</span>&nbsp;<span class="ident" id="3256516"><a href="/bytes/buffer.go.html#3249036">utf8</a></span><span class="op" id="3256520">.</span><span class="ident" id="3256521">RuneSelf</span>&nbsp;<span class="op" id="3256530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256534"><a href="/bytes/buffer.go.html#3256458">b</a></span><span class="op" id="3256535">.</span><span class="ident" id="3256536">WriteByte</span><span class="op" id="3256545">(</span><span class="builtintype" id="3256546">byte</span><span class="op" id="3256550">(</span><span class="ident" id="3256551"><a href="/bytes/buffer.go.html#3256479">r</a></span><span class="op" id="3256552">)</span><span class="op" id="3256553">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256557">return</span>&nbsp;<span class="num" id="3256564">1</span><span class="op" id="3256565">,</span>&nbsp;<span class="ident" id="3256567">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256575"><a href="/bytes/buffer.go.html#3256488">n</a></span>&nbsp;<span class="op" id="3256577">=</span>&nbsp;<span class="ident" id="3256579"><a href="/bytes/buffer.go.html#3249036">utf8</a></span><span class="op" id="3256583">.</span><span class="ident" id="3256584">EncodeRune</span><span class="op" id="3256594">(</span><span class="ident" id="3256595"><a href="/bytes/buffer.go.html#3256458">b</a></span><span class="op" id="3256596">.</span><span class="ident" id="3256597">runeBytes</span><span class="op" id="3256606">[</span><span class="num" id="3256607">0</span><span class="op" id="3256608">:</span><span class="op" id="3256609">]</span><span class="op" id="3256610">,</span>&nbsp;<span class="ident" id="3256612"><a href="/bytes/buffer.go.html#3256479">r</a></span><span class="op" id="3256613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256616"><a href="/bytes/buffer.go.html#3256458">b</a></span><span class="op" id="3256617">.</span><span class="ident" id="3256618">Write</span><span class="op" id="3256623">(</span><span class="ident" id="3256624"><a href="/bytes/buffer.go.html#3256458">b</a></span><span class="op" id="3256625">.</span><span class="ident" id="3256626">runeBytes</span><span class="op" id="3256635">[</span><span class="num" id="3256636">0</span><span class="op" id="3256637">:</span><span class="ident" id="3256638"><a href="/bytes/buffer.go.html#3256488">n</a></span><span class="op" id="3256639">]</span><span class="op" id="3256640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256643">return</span>&nbsp;<span class="ident" id="3256650"><a href="/bytes/buffer.go.html#3256488">n</a></span><span class="op" id="3256651">,</span>&nbsp;<span class="ident" id="3256653">nil</span><br>
<span class="lineno">245</span><span class="op" id="3256657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256660">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;next&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer&nbsp;or&nbsp;until&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3256732">//&nbsp;is&nbsp;drained.&nbsp;&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.&nbsp;&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3256804">//&nbsp;buffer&nbsp;has&nbsp;no&nbsp;data&nbsp;to&nbsp;return,&nbsp;err&nbsp;is&nbsp;io.EOF&nbsp;(unless&nbsp;len(p)&nbsp;is&nbsp;zero);</span><br>
<span class="lineno">250</span><span class="comment" id="3256876">//&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3256900">func</span>&nbsp;<span class="op" id="3256905">(</span><span class="ident" id="3256906">b</span>&nbsp;<span class="op" id="3256908">*</span><span class="ident" id="3256909"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3256915">)</span>&nbsp;<span class="ident" id="3256917">Read</span><span class="op" id="3256921">(</span><span class="ident" id="3256922">p</span>&nbsp;<span class="op" id="3256924">[</span><span class="op" id="3256925">]</span><span class="builtintype" id="3256926">byte</span><span class="op" id="3256930">)</span>&nbsp;<span class="op" id="3256932">(</span><span class="ident" id="3256933">n</span>&nbsp;<span class="builtintype" id="3256935">int</span><span class="op" id="3256938">,</span>&nbsp;<span class="ident" id="3256940">err</span>&nbsp;<span class="builtintype" id="3256944">error</span><span class="op" id="3256949">)</span>&nbsp;<span class="op" id="3256951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256954"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3256955">.</span><span class="ident" id="3256956">lastRead</span>&nbsp;<span class="op" id="3256965">=</span>&nbsp;<span class="ident" id="3256967"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256978">if</span>&nbsp;<span class="ident" id="3256981"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3256982">.</span><span class="ident" id="3256983">off</span>&nbsp;<span class="op" id="3256987">&gt;=</span>&nbsp;<span class="builtinfunc" id="3256990">len</span><span class="op" id="3256993">(</span><span class="ident" id="3256994"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3256995">.</span><span class="ident" id="3256996">buf</span><span class="op" id="3256999">)</span>&nbsp;<span class="op" id="3257001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257005">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257051"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3257052">.</span><span class="ident" id="3257053">Truncate</span><span class="op" id="3257061">(</span><span class="num" id="3257062">0</span><span class="op" id="3257063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257067">if</span>&nbsp;<span class="builtinfunc" id="3257070">len</span><span class="op" id="3257073">(</span><span class="ident" id="3257074"><a href="/bytes/buffer.go.html#3256922">p</a></span><span class="op" id="3257075">)</span>&nbsp;<span class="op" id="3257077">==</span>&nbsp;<span class="num" id="3257080">0</span>&nbsp;<span class="op" id="3257082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257087">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257100">return</span>&nbsp;<span class="num" id="3257107">0</span><span class="op" id="3257108">,</span>&nbsp;<span class="ident" id="3257110"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3257112">.</span><span class="ident" id="3257113">EOF</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257121"><a href="/bytes/buffer.go.html#3256933">n</a></span>&nbsp;<span class="op" id="3257123">=</span>&nbsp;<span class="builtinfunc" id="3257125">copy</span><span class="op" id="3257129">(</span><span class="ident" id="3257130"><a href="/bytes/buffer.go.html#3256922">p</a></span><span class="op" id="3257131">,</span>&nbsp;<span class="ident" id="3257133"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3257134">.</span><span class="ident" id="3257135">buf</span><span class="op" id="3257138">[</span><span class="ident" id="3257139"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3257140">.</span><span class="ident" id="3257141">off</span><span class="op" id="3257144">:</span><span class="op" id="3257145">]</span><span class="op" id="3257146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257149"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3257150">.</span><span class="ident" id="3257151">off</span>&nbsp;<span class="op" id="3257155">+=</span>&nbsp;<span class="ident" id="3257158"><a href="/bytes/buffer.go.html#3256933">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257161">if</span>&nbsp;<span class="ident" id="3257164"><a href="/bytes/buffer.go.html#3256933">n</a></span>&nbsp;<span class="op" id="3257166">&gt;</span>&nbsp;<span class="num" id="3257168">0</span>&nbsp;<span class="op" id="3257170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257174"><a href="/bytes/buffer.go.html#3256906">b</a></span><span class="op" id="3257175">.</span><span class="ident" id="3257176">lastRead</span>&nbsp;<span class="op" id="3257185">=</span>&nbsp;<span class="ident" id="3257187"><a href="/bytes/buffer.go.html#3249905">opRead</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257198">return</span><br>
<span class="lineno"></span><span class="op" id="3257205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257208">//&nbsp;Next&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;next&nbsp;n&nbsp;bytes&nbsp;from&nbsp;the&nbsp;buffer,</span><br>
<span class="lineno">270</span><span class="comment" id="3257277">//&nbsp;advancing&nbsp;the&nbsp;buffer&nbsp;as&nbsp;if&nbsp;the&nbsp;bytes&nbsp;had&nbsp;been&nbsp;returned&nbsp;by&nbsp;Read.</span><br>
<span class="lineno"></span><span class="comment" id="3257344">//&nbsp;If&nbsp;there&nbsp;are&nbsp;fewer&nbsp;than&nbsp;n&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer,&nbsp;Next&nbsp;returns&nbsp;the&nbsp;entire&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3257426">//&nbsp;The&nbsp;slice&nbsp;is&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;a&nbsp;read&nbsp;or&nbsp;write&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3257500">func</span>&nbsp;<span class="op" id="3257505">(</span><span class="ident" id="3257506">b</span>&nbsp;<span class="op" id="3257508">*</span><span class="ident" id="3257509"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3257515">)</span>&nbsp;<span class="ident" id="3257517">Next</span><span class="op" id="3257521">(</span><span class="ident" id="3257522">n</span>&nbsp;<span class="builtintype" id="3257524">int</span><span class="op" id="3257527">)</span>&nbsp;<span class="op" id="3257529">[</span><span class="op" id="3257530">]</span><span class="builtintype" id="3257531">byte</span>&nbsp;<span class="op" id="3257536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257539"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257540">.</span><span class="ident" id="3257541">lastRead</span>&nbsp;<span class="op" id="3257550">=</span>&nbsp;<span class="ident" id="3257552"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257563">m</span>&nbsp;<span class="op" id="3257565">:=</span>&nbsp;<span class="ident" id="3257568"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257569">.</span><span class="ident" id="3257570">Len</span><span class="op" id="3257573">(</span><span class="op" id="3257574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257577">if</span>&nbsp;<span class="ident" id="3257580"><a href="/bytes/buffer.go.html#3257522">n</a></span>&nbsp;<span class="op" id="3257582">&gt;</span>&nbsp;<span class="ident" id="3257584"><a href="/bytes/buffer.go.html#3257563">m</a></span>&nbsp;<span class="op" id="3257586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257590"><a href="/bytes/buffer.go.html#3257522">n</a></span>&nbsp;<span class="op" id="3257592">=</span>&nbsp;<span class="ident" id="3257594"><a href="/bytes/buffer.go.html#3257563">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257600">data</span>&nbsp;<span class="op" id="3257605">:=</span>&nbsp;<span class="ident" id="3257608"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257609">.</span><span class="ident" id="3257610">buf</span><span class="op" id="3257613">[</span><span class="ident" id="3257614"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257615">.</span><span class="ident" id="3257616">off</span>&nbsp;<span class="op" id="3257620">:</span>&nbsp;<span class="ident" id="3257622"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257623">.</span><span class="ident" id="3257624">off</span><span class="op" id="3257627">+</span><span class="ident" id="3257628"><a href="/bytes/buffer.go.html#3257522">n</a></span><span class="op" id="3257629">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257632"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257633">.</span><span class="ident" id="3257634">off</span>&nbsp;<span class="op" id="3257638">+=</span>&nbsp;<span class="ident" id="3257641"><a href="/bytes/buffer.go.html#3257522">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257644">if</span>&nbsp;<span class="ident" id="3257647"><a href="/bytes/buffer.go.html#3257522">n</a></span>&nbsp;<span class="op" id="3257649">&gt;</span>&nbsp;<span class="num" id="3257651">0</span>&nbsp;<span class="op" id="3257653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257657"><a href="/bytes/buffer.go.html#3257506">b</a></span><span class="op" id="3257658">.</span><span class="ident" id="3257659">lastRead</span>&nbsp;<span class="op" id="3257668">=</span>&nbsp;<span class="ident" id="3257670"><a href="/bytes/buffer.go.html#3249905">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257681">return</span>&nbsp;<span class="ident" id="3257688"><a href="/bytes/buffer.go.html#3257600">data</a></span><br>
<span class="lineno">285</span><span class="op" id="3257693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257696">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3257757">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;it&nbsp;returns&nbsp;error&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="3257810">func</span>&nbsp;<span class="op" id="3257815">(</span><span class="ident" id="3257816">b</span>&nbsp;<span class="op" id="3257818">*</span><span class="ident" id="3257819"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3257825">)</span>&nbsp;<span class="ident" id="3257827">ReadByte</span><span class="op" id="3257835">(</span><span class="op" id="3257836">)</span>&nbsp;<span class="op" id="3257838">(</span><span class="ident" id="3257839">c</span>&nbsp;<span class="builtintype" id="3257841">byte</span><span class="op" id="3257845">,</span>&nbsp;<span class="ident" id="3257847">err</span>&nbsp;<span class="builtintype" id="3257851">error</span><span class="op" id="3257856">)</span>&nbsp;<span class="op" id="3257858">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257861"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3257862">.</span><span class="ident" id="3257863">lastRead</span>&nbsp;<span class="op" id="3257872">=</span>&nbsp;<span class="ident" id="3257874"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257885">if</span>&nbsp;<span class="ident" id="3257888"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3257889">.</span><span class="ident" id="3257890">off</span>&nbsp;<span class="op" id="3257894">&gt;=</span>&nbsp;<span class="builtinfunc" id="3257897">len</span><span class="op" id="3257900">(</span><span class="ident" id="3257901"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3257902">.</span><span class="ident" id="3257903">buf</span><span class="op" id="3257906">)</span>&nbsp;<span class="op" id="3257908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3257912">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257958"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3257959">.</span><span class="ident" id="3257960">Truncate</span><span class="op" id="3257968">(</span><span class="num" id="3257969">0</span><span class="op" id="3257970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257974">return</span>&nbsp;<span class="num" id="3257981">0</span><span class="op" id="3257982">,</span>&nbsp;<span class="ident" id="3257984"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3257986">.</span><span class="ident" id="3257987">EOF</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3257992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257995"><a href="/bytes/buffer.go.html#3257839">c</a></span>&nbsp;<span class="op" id="3257997">=</span>&nbsp;<span class="ident" id="3257999"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3258000">.</span><span class="ident" id="3258001">buf</span><span class="op" id="3258004">[</span><span class="ident" id="3258005"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3258006">.</span><span class="ident" id="3258007">off</span><span class="op" id="3258010">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258013"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3258014">.</span><span class="ident" id="3258015">off</span><span class="op" id="3258018">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258022"><a href="/bytes/buffer.go.html#3257816">b</a></span><span class="op" id="3258023">.</span><span class="ident" id="3258024">lastRead</span>&nbsp;<span class="op" id="3258033">=</span>&nbsp;<span class="ident" id="3258035"><a href="/bytes/buffer.go.html#3249905">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258043">return</span>&nbsp;<span class="ident" id="3258050"><a href="/bytes/buffer.go.html#3257839">c</a></span><span class="op" id="3258051">,</span>&nbsp;<span class="ident" id="3258053">nil</span><br>
<span class="lineno">300</span><span class="op" id="3258057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3258060">//&nbsp;ReadRune&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;UTF-8-encoded</span><br>
<span class="lineno"></span><span class="comment" id="3258113">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3258152">//&nbsp;If&nbsp;no&nbsp;bytes&nbsp;are&nbsp;available,&nbsp;the&nbsp;error&nbsp;returned&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno">305</span><span class="comment" id="3258212">//&nbsp;If&nbsp;the&nbsp;bytes&nbsp;are&nbsp;an&nbsp;erroneous&nbsp;UTF-8&nbsp;encoding,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3258264">//&nbsp;consumes&nbsp;one&nbsp;byte&nbsp;and&nbsp;returns&nbsp;U+FFFD,&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="3258308">func</span>&nbsp;<span class="op" id="3258313">(</span><span class="ident" id="3258314">b</span>&nbsp;<span class="op" id="3258316">*</span><span class="ident" id="3258317"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3258323">)</span>&nbsp;<span class="ident" id="3258325">ReadRune</span><span class="op" id="3258333">(</span><span class="op" id="3258334">)</span>&nbsp;<span class="op" id="3258336">(</span><span class="ident" id="3258337">r</span>&nbsp;<span class="builtintype" id="3258339">rune</span><span class="op" id="3258343">,</span>&nbsp;<span class="ident" id="3258345">size</span>&nbsp;<span class="builtintype" id="3258350">int</span><span class="op" id="3258353">,</span>&nbsp;<span class="ident" id="3258355">err</span>&nbsp;<span class="builtintype" id="3258359">error</span><span class="op" id="3258364">)</span>&nbsp;<span class="op" id="3258366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258369"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258370">.</span><span class="ident" id="3258371">lastRead</span>&nbsp;<span class="op" id="3258380">=</span>&nbsp;<span class="ident" id="3258382"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258393">if</span>&nbsp;<span class="ident" id="3258396"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258397">.</span><span class="ident" id="3258398">off</span>&nbsp;<span class="op" id="3258402">&gt;=</span>&nbsp;<span class="builtinfunc" id="3258405">len</span><span class="op" id="3258408">(</span><span class="ident" id="3258409"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258410">.</span><span class="ident" id="3258411">buf</span><span class="op" id="3258414">)</span>&nbsp;<span class="op" id="3258416">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3258420">//&nbsp;Buffer&nbsp;is&nbsp;empty,&nbsp;reset&nbsp;to&nbsp;recover&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258466"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258467">.</span><span class="ident" id="3258468">Truncate</span><span class="op" id="3258476">(</span><span class="num" id="3258477">0</span><span class="op" id="3258478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258482">return</span>&nbsp;<span class="num" id="3258489">0</span><span class="op" id="3258490">,</span>&nbsp;<span class="num" id="3258492">0</span><span class="op" id="3258493">,</span>&nbsp;<span class="ident" id="3258495"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3258497">.</span><span class="ident" id="3258498">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258506"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258507">.</span><span class="ident" id="3258508">lastRead</span>&nbsp;<span class="op" id="3258517">=</span>&nbsp;<span class="ident" id="3258519"><a href="/bytes/buffer.go.html#3249865">opReadRune</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258531">c</span>&nbsp;<span class="op" id="3258533">:=</span>&nbsp;<span class="ident" id="3258536"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258537">.</span><span class="ident" id="3258538">buf</span><span class="op" id="3258541">[</span><span class="ident" id="3258542"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258543">.</span><span class="ident" id="3258544">off</span><span class="op" id="3258547">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258550">if</span>&nbsp;<span class="ident" id="3258553"><a href="/bytes/buffer.go.html#3258531">c</a></span>&nbsp;<span class="op" id="3258555">&lt;</span>&nbsp;<span class="ident" id="3258557"><a href="/bytes/buffer.go.html#3249036">utf8</a></span><span class="op" id="3258561">.</span><span class="ident" id="3258562">RuneSelf</span>&nbsp;<span class="op" id="3258571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258575"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258576">.</span><span class="ident" id="3258577">off</span><span class="op" id="3258580">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258585">return</span>&nbsp;<span class="builtintype" id="3258592">rune</span><span class="op" id="3258596">(</span><span class="ident" id="3258597"><a href="/bytes/buffer.go.html#3258531">c</a></span><span class="op" id="3258598">)</span><span class="op" id="3258599">,</span>&nbsp;<span class="num" id="3258601">1</span><span class="op" id="3258602">,</span>&nbsp;<span class="ident" id="3258604">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258609">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258612"><a href="/bytes/buffer.go.html#3258337">r</a></span><span class="op" id="3258613">,</span>&nbsp;<span class="ident" id="3258615">n</span>&nbsp;<span class="op" id="3258617">:=</span>&nbsp;<span class="ident" id="3258620"><a href="/bytes/buffer.go.html#3249036">utf8</a></span><span class="op" id="3258624">.</span><span class="ident" id="3258625">DecodeRune</span><span class="op" id="3258635">(</span><span class="ident" id="3258636"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258637">.</span><span class="ident" id="3258638">buf</span><span class="op" id="3258641">[</span><span class="ident" id="3258642"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258643">.</span><span class="ident" id="3258644">off</span><span class="op" id="3258647">:</span><span class="op" id="3258648">]</span><span class="op" id="3258649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258652"><a href="/bytes/buffer.go.html#3258314">b</a></span><span class="op" id="3258653">.</span><span class="ident" id="3258654">off</span>&nbsp;<span class="op" id="3258658">+=</span>&nbsp;<span class="ident" id="3258661"><a href="/bytes/buffer.go.html#3258615">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258664">return</span>&nbsp;<span class="ident" id="3258671"><a href="/bytes/buffer.go.html#3258337">r</a></span><span class="op" id="3258672">,</span>&nbsp;<span class="ident" id="3258674"><a href="/bytes/buffer.go.html#3258615">n</a></span><span class="op" id="3258675">,</span>&nbsp;<span class="ident" id="3258677">nil</span><br>
<span class="lineno"></span><span class="op" id="3258681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="3258684">//&nbsp;UnreadRune&nbsp;unreads&nbsp;the&nbsp;last&nbsp;rune&nbsp;returned&nbsp;by&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="comment" id="3258742">//&nbsp;If&nbsp;the&nbsp;most&nbsp;recent&nbsp;read&nbsp;or&nbsp;write&nbsp;operation&nbsp;on&nbsp;the&nbsp;buffer&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="3258806">//&nbsp;not&nbsp;a&nbsp;ReadRune,&nbsp;UnreadRune&nbsp;returns&nbsp;an&nbsp;error.&nbsp;&nbsp;(In&nbsp;this&nbsp;regard</span><br>
<span class="lineno"></span><span class="comment" id="3258871">//&nbsp;it&nbsp;is&nbsp;stricter&nbsp;than&nbsp;UnreadByte,&nbsp;which&nbsp;will&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="3258938">//&nbsp;from&nbsp;any&nbsp;read&nbsp;operation.)</span><br>
<span class="lineno">330</span><span class="keyword" id="3258967">func</span>&nbsp;<span class="op" id="3258972">(</span><span class="ident" id="3258973">b</span>&nbsp;<span class="op" id="3258975">*</span><span class="ident" id="3258976"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3258982">)</span>&nbsp;<span class="ident" id="3258984">UnreadRune</span><span class="op" id="3258994">(</span><span class="op" id="3258995">)</span>&nbsp;<span class="builtintype" id="3258997">error</span>&nbsp;<span class="op" id="3259003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259006">if</span>&nbsp;<span class="ident" id="3259009"><a href="/bytes/buffer.go.html#3258973">b</a></span><span class="op" id="3259010">.</span><span class="ident" id="3259011">lastRead</span>&nbsp;<span class="op" id="3259020">!=</span>&nbsp;<span class="ident" id="3259023"><a href="/bytes/buffer.go.html#3249865">opReadRune</a></span>&nbsp;<span class="op" id="3259034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259038">return</span>&nbsp;<span class="ident" id="3259045"><a href="/bytes/buffer.go.html#3249020">errors</a></span><span class="op" id="3259051">.</span><span class="ident" id="3259052">New</span><span class="op" id="3259055">(</span><span class="string" id="3259056">&#34;bytes.Buffer:&nbsp;UnreadRune:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;ReadRune&#34;</span><span class="op" id="3259119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259125"><a href="/bytes/buffer.go.html#3258973">b</a></span><span class="op" id="3259126">.</span><span class="ident" id="3259127">lastRead</span>&nbsp;<span class="op" id="3259136">=</span>&nbsp;<span class="ident" id="3259138"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259149">if</span>&nbsp;<span class="ident" id="3259152"><a href="/bytes/buffer.go.html#3258973">b</a></span><span class="op" id="3259153">.</span><span class="ident" id="3259154">off</span>&nbsp;<span class="op" id="3259158">&gt;</span>&nbsp;<span class="num" id="3259160">0</span>&nbsp;<span class="op" id="3259162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259166">_</span><span class="op" id="3259167">,</span>&nbsp;<span class="ident" id="3259169">n</span>&nbsp;<span class="op" id="3259171">:=</span>&nbsp;<span class="ident" id="3259174"><a href="/bytes/buffer.go.html#3249036">utf8</a></span><span class="op" id="3259178">.</span><span class="ident" id="3259179">DecodeLastRune</span><span class="op" id="3259193">(</span><span class="ident" id="3259194"><a href="/bytes/buffer.go.html#3258973">b</a></span><span class="op" id="3259195">.</span><span class="ident" id="3259196">buf</span><span class="op" id="3259199">[</span><span class="num" id="3259200">0</span><span class="op" id="3259201">:</span><span class="ident" id="3259202"><a href="/bytes/buffer.go.html#3258973">b</a></span><span class="op" id="3259203">.</span><span class="ident" id="3259204">off</span><span class="op" id="3259207">]</span><span class="op" id="3259208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259212"><a href="/bytes/buffer.go.html#3258973">b</a></span><span class="op" id="3259213">.</span><span class="ident" id="3259214">off</span>&nbsp;<span class="op" id="3259218">-=</span>&nbsp;<span class="ident" id="3259221"><a href="/bytes/buffer.go.html#3259169">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259227">return</span>&nbsp;<span class="ident" id="3259234">nil</span><br>
<span class="lineno">340</span><span class="op" id="3259238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3259241">//&nbsp;UnreadByte&nbsp;unreads&nbsp;the&nbsp;last&nbsp;byte&nbsp;returned&nbsp;by&nbsp;the&nbsp;most&nbsp;recent</span><br>
<span class="lineno"></span><span class="comment" id="3259305">//&nbsp;read&nbsp;operation.&nbsp;&nbsp;If&nbsp;write&nbsp;has&nbsp;happened&nbsp;since&nbsp;the&nbsp;last&nbsp;read,&nbsp;UnreadByte</span><br>
<span class="lineno"></span><span class="comment" id="3259379">//&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">345</span><span class="keyword" id="3259400">func</span>&nbsp;<span class="op" id="3259405">(</span><span class="ident" id="3259406">b</span>&nbsp;<span class="op" id="3259408">*</span><span class="ident" id="3259409"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3259415">)</span>&nbsp;<span class="ident" id="3259417">UnreadByte</span><span class="op" id="3259427">(</span><span class="op" id="3259428">)</span>&nbsp;<span class="builtintype" id="3259430">error</span>&nbsp;<span class="op" id="3259436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259439">if</span>&nbsp;<span class="ident" id="3259442"><a href="/bytes/buffer.go.html#3259406">b</a></span><span class="op" id="3259443">.</span><span class="ident" id="3259444">lastRead</span>&nbsp;<span class="op" id="3259453">!=</span>&nbsp;<span class="ident" id="3259456"><a href="/bytes/buffer.go.html#3249865">opReadRune</a></span>&nbsp;<span class="op" id="3259467">&amp;&amp;</span>&nbsp;<span class="ident" id="3259470"><a href="/bytes/buffer.go.html#3259406">b</a></span><span class="op" id="3259471">.</span><span class="ident" id="3259472">lastRead</span>&nbsp;<span class="op" id="3259481">!=</span>&nbsp;<span class="ident" id="3259484"><a href="/bytes/buffer.go.html#3249905">opRead</a></span>&nbsp;<span class="op" id="3259491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259495">return</span>&nbsp;<span class="ident" id="3259502"><a href="/bytes/buffer.go.html#3249020">errors</a></span><span class="op" id="3259508">.</span><span class="ident" id="3259509">New</span><span class="op" id="3259512">(</span><span class="string" id="3259513">&#34;bytes.Buffer:&nbsp;UnreadByte:&nbsp;previous&nbsp;operation&nbsp;was&nbsp;not&nbsp;a&nbsp;read&#34;</span><span class="op" id="3259574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259580"><a href="/bytes/buffer.go.html#3259406">b</a></span><span class="op" id="3259581">.</span><span class="ident" id="3259582">lastRead</span>&nbsp;<span class="op" id="3259591">=</span>&nbsp;<span class="ident" id="3259593"><a href="/bytes/buffer.go.html#3249816">opInvalid</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259604">if</span>&nbsp;<span class="ident" id="3259607"><a href="/bytes/buffer.go.html#3259406">b</a></span><span class="op" id="3259608">.</span><span class="ident" id="3259609">off</span>&nbsp;<span class="op" id="3259613">&gt;</span>&nbsp;<span class="num" id="3259615">0</span>&nbsp;<span class="op" id="3259617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259621"><a href="/bytes/buffer.go.html#3259406">b</a></span><span class="op" id="3259622">.</span><span class="ident" id="3259623">off</span><span class="op" id="3259626">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3259630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3259633">return</span>&nbsp;<span class="ident" id="3259640">nil</span><br>
<span class="lineno"></span><span class="op" id="3259644">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="3259647">//&nbsp;ReadBytes&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="3259716">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="3259792">//&nbsp;If&nbsp;ReadBytes&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3259856">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">360</span><span class="comment" id="3259938">//&nbsp;ReadBytes&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3260019">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="keyword" id="3260029">func</span>&nbsp;<span class="op" id="3260034">(</span><span class="ident" id="3260035">b</span>&nbsp;<span class="op" id="3260037">*</span><span class="ident" id="3260038"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3260044">)</span>&nbsp;<span class="ident" id="3260046">ReadBytes</span><span class="op" id="3260055">(</span><span class="ident" id="3260056">delim</span>&nbsp;<span class="builtintype" id="3260062">byte</span><span class="op" id="3260066">)</span>&nbsp;<span class="op" id="3260068">(</span><span class="ident" id="3260069">line</span>&nbsp;<span class="op" id="3260074">[</span><span class="op" id="3260075">]</span><span class="builtintype" id="3260076">byte</span><span class="op" id="3260080">,</span>&nbsp;<span class="ident" id="3260082">err</span>&nbsp;<span class="builtintype" id="3260086">error</span><span class="op" id="3260091">)</span>&nbsp;<span class="op" id="3260093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260096">slice</span><span class="op" id="3260101">,</span>&nbsp;<span class="ident" id="3260103"><a href="/bytes/buffer.go.html#3260082">err</a></span>&nbsp;<span class="op" id="3260107">:=</span>&nbsp;<span class="ident" id="3260110"><a href="/bytes/buffer.go.html#3260035">b</a></span><span class="op" id="3260111">.</span><span class="ident" id="3260112">readSlice</span><span class="op" id="3260121">(</span><span class="ident" id="3260122"><a href="/bytes/buffer.go.html#3260056">delim</a></span><span class="op" id="3260127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260130">//&nbsp;return&nbsp;a&nbsp;copy&nbsp;of&nbsp;slice.&nbsp;The&nbsp;buffer&#39;s&nbsp;backing&nbsp;array&nbsp;may</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260189">//&nbsp;be&nbsp;overwritten&nbsp;by&nbsp;later&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260224"><a href="/bytes/buffer.go.html#3260069">line</a></span>&nbsp;<span class="op" id="3260229">=</span>&nbsp;<span class="builtinfunc" id="3260231">append</span><span class="op" id="3260237">(</span><span class="ident" id="3260238"><a href="/bytes/buffer.go.html#3260069">line</a></span><span class="op" id="3260242">,</span>&nbsp;<span class="ident" id="3260244"><a href="/bytes/buffer.go.html#3260096">slice</a></span><span class="op" id="3260249">...</span><span class="op" id="3260252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260255">return</span><br>
<span class="lineno"></span><span class="op" id="3260262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="comment" id="3260265">//&nbsp;readSlice&nbsp;is&nbsp;like&nbsp;ReadBytes&nbsp;but&nbsp;returns&nbsp;a&nbsp;reference&nbsp;to&nbsp;internal&nbsp;buffer&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3260345">func</span>&nbsp;<span class="op" id="3260350">(</span><span class="ident" id="3260351">b</span>&nbsp;<span class="op" id="3260353">*</span><span class="ident" id="3260354"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3260360">)</span>&nbsp;<span class="ident" id="3260362">readSlice</span><span class="op" id="3260371">(</span><span class="ident" id="3260372">delim</span>&nbsp;<span class="builtintype" id="3260378">byte</span><span class="op" id="3260382">)</span>&nbsp;<span class="op" id="3260384">(</span><span class="ident" id="3260385">line</span>&nbsp;<span class="op" id="3260390">[</span><span class="op" id="3260391">]</span><span class="builtintype" id="3260392">byte</span><span class="op" id="3260396">,</span>&nbsp;<span class="ident" id="3260398">err</span>&nbsp;<span class="builtintype" id="3260402">error</span><span class="op" id="3260407">)</span>&nbsp;<span class="op" id="3260409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260412">i</span>&nbsp;<span class="op" id="3260414">:=</span>&nbsp;<span class="ident" id="3260417"><a href="/bytes/bytes_decl.go.html#3280517">IndexByte</a></span><span class="op" id="3260426">(</span><span class="ident" id="3260427"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260428">.</span><span class="ident" id="3260429">buf</span><span class="op" id="3260432">[</span><span class="ident" id="3260433"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260434">.</span><span class="ident" id="3260435">off</span><span class="op" id="3260438">:</span><span class="op" id="3260439">]</span><span class="op" id="3260440">,</span>&nbsp;<span class="ident" id="3260442"><a href="/bytes/buffer.go.html#3260372">delim</a></span><span class="op" id="3260447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260450">end</span>&nbsp;<span class="op" id="3260454">:=</span>&nbsp;<span class="ident" id="3260457"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260458">.</span><span class="ident" id="3260459">off</span>&nbsp;<span class="op" id="3260463">+</span>&nbsp;<span class="ident" id="3260465"><a href="/bytes/buffer.go.html#3260412">i</a></span>&nbsp;<span class="op" id="3260467">+</span>&nbsp;<span class="num" id="3260469">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260472">if</span>&nbsp;<span class="ident" id="3260475"><a href="/bytes/buffer.go.html#3260412">i</a></span>&nbsp;<span class="op" id="3260477">&lt;</span>&nbsp;<span class="num" id="3260479">0</span>&nbsp;<span class="op" id="3260481">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260485"><a href="/bytes/buffer.go.html#3260450">end</a></span>&nbsp;<span class="op" id="3260489">=</span>&nbsp;<span class="builtinfunc" id="3260491">len</span><span class="op" id="3260494">(</span><span class="ident" id="3260495"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260496">.</span><span class="ident" id="3260497">buf</span><span class="op" id="3260500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260504"><a href="/bytes/buffer.go.html#3260398">err</a></span>&nbsp;<span class="op" id="3260508">=</span>&nbsp;<span class="ident" id="3260510"><a href="/bytes/buffer.go.html#3249030">io</a></span><span class="op" id="3260512">.</span><span class="ident" id="3260513">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3260518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260521"><a href="/bytes/buffer.go.html#3260385">line</a></span>&nbsp;<span class="op" id="3260526">=</span>&nbsp;<span class="ident" id="3260528"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260529">.</span><span class="ident" id="3260530">buf</span><span class="op" id="3260533">[</span><span class="ident" id="3260534"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260535">.</span><span class="ident" id="3260536">off</span><span class="op" id="3260539">:</span><span class="ident" id="3260540"><a href="/bytes/buffer.go.html#3260450">end</a></span><span class="op" id="3260543">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260546"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260547">.</span><span class="ident" id="3260548">off</span>&nbsp;<span class="op" id="3260552">=</span>&nbsp;<span class="ident" id="3260554"><a href="/bytes/buffer.go.html#3260450">end</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260559"><a href="/bytes/buffer.go.html#3260351">b</a></span><span class="op" id="3260560">.</span><span class="ident" id="3260561">lastRead</span>&nbsp;<span class="op" id="3260570">=</span>&nbsp;<span class="ident" id="3260572"><a href="/bytes/buffer.go.html#3249905">opRead</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3260580">return</span>&nbsp;<span class="ident" id="3260587"><a href="/bytes/buffer.go.html#3260385">line</a></span><span class="op" id="3260591">,</span>&nbsp;<span class="ident" id="3260593"><a href="/bytes/buffer.go.html#3260398">err</a></span><br>
<span class="lineno"></span><span class="op" id="3260597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3260600">//&nbsp;ReadString&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno">385</span><span class="comment" id="3260670">//&nbsp;returning&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="3260747">//&nbsp;If&nbsp;ReadString&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="3260812">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno"></span><span class="comment" id="3260894">//&nbsp;ReadString&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end</span><br>
<span class="lineno"></span><span class="comment" id="3260973">//&nbsp;in&nbsp;delim.</span><br>
<span class="lineno">390</span><span class="keyword" id="3260986">func</span>&nbsp;<span class="op" id="3260991">(</span><span class="ident" id="3260992">b</span>&nbsp;<span class="op" id="3260994">*</span><span class="ident" id="3260995"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3261001">)</span>&nbsp;<span class="ident" id="3261003">ReadString</span><span class="op" id="3261013">(</span><span class="ident" id="3261014">delim</span>&nbsp;<span class="builtintype" id="3261020">byte</span><span class="op" id="3261024">)</span>&nbsp;<span class="op" id="3261026">(</span><span class="ident" id="3261027">line</span>&nbsp;<span class="builtintype" id="3261032">string</span><span class="op" id="3261038">,</span>&nbsp;<span class="ident" id="3261040">err</span>&nbsp;<span class="builtintype" id="3261044">error</span><span class="op" id="3261049">)</span>&nbsp;<span class="op" id="3261051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261054">slice</span><span class="op" id="3261059">,</span>&nbsp;<span class="ident" id="3261061"><a href="/bytes/buffer.go.html#3261040">err</a></span>&nbsp;<span class="op" id="3261065">:=</span>&nbsp;<span class="ident" id="3261068"><a href="/bytes/buffer.go.html#3260992">b</a></span><span class="op" id="3261069">.</span><span class="ident" id="3261070">readSlice</span><span class="op" id="3261079">(</span><span class="ident" id="3261080"><a href="/bytes/buffer.go.html#3261014">delim</a></span><span class="op" id="3261085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261088">return</span>&nbsp;<span class="builtintype" id="3261095">string</span><span class="op" id="3261101">(</span><span class="ident" id="3261102"><a href="/bytes/buffer.go.html#3261054">slice</a></span><span class="op" id="3261107">)</span><span class="op" id="3261108">,</span>&nbsp;<span class="ident" id="3261110"><a href="/bytes/buffer.go.html#3261040">err</a></span><br>
<span class="lineno"></span><span class="op" id="3261114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="comment" id="3261117">//&nbsp;NewBuffer&nbsp;creates&nbsp;and&nbsp;initializes&nbsp;a&nbsp;new&nbsp;Buffer&nbsp;using&nbsp;buf&nbsp;as&nbsp;its&nbsp;initial</span><br>
<span class="lineno"></span><span class="comment" id="3261192">//&nbsp;contents.&nbsp;&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;prepare&nbsp;a&nbsp;Buffer&nbsp;to&nbsp;read&nbsp;existing&nbsp;data.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3261268">//&nbsp;can&nbsp;also&nbsp;be&nbsp;used&nbsp;to&nbsp;size&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;for&nbsp;writing.&nbsp;To&nbsp;do&nbsp;that,</span><br>
<span class="lineno"></span><span class="comment" id="3261341">//&nbsp;buf&nbsp;should&nbsp;have&nbsp;the&nbsp;desired&nbsp;capacity&nbsp;but&nbsp;a&nbsp;length&nbsp;of&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="3261403">//</span><br>
<span class="lineno">400</span><span class="comment" id="3261406">//&nbsp;In&nbsp;most&nbsp;cases,&nbsp;new(Buffer)&nbsp;(or&nbsp;just&nbsp;declaring&nbsp;a&nbsp;Buffer&nbsp;variable)&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3261477">//&nbsp;sufficient&nbsp;to&nbsp;initialize&nbsp;a&nbsp;Buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="3261515">func</span>&nbsp;<span class="ident" id="3261520">NewBuffer</span><span class="op" id="3261529">(</span><span class="ident" id="3261530">buf</span>&nbsp;<span class="op" id="3261534">[</span><span class="op" id="3261535">]</span><span class="builtintype" id="3261536">byte</span><span class="op" id="3261540">)</span>&nbsp;<span class="op" id="3261542">*</span><span class="ident" id="3261543"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span>&nbsp;<span class="op" id="3261550">{</span>&nbsp;<span class="keyword" id="3261552">return</span>&nbsp;<span class="op" id="3261559">&amp;</span><span class="ident" id="3261560"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3261566">{</span><span class="ident" id="3261567">buf</span><span class="op" id="3261570">:</span>&nbsp;<span class="ident" id="3261572"><a href="/bytes/buffer.go.html#3261530">buf</a></span><span class="op" id="3261575">}</span>&nbsp;<span class="op" id="3261577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3261580">//&nbsp;NewBufferString&nbsp;creates&nbsp;and&nbsp;initializes&nbsp;a&nbsp;new&nbsp;Buffer&nbsp;using&nbsp;string&nbsp;s&nbsp;as&nbsp;its</span><br>
<span class="lineno">405</span><span class="comment" id="3261658">//&nbsp;initial&nbsp;contents.&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;prepare&nbsp;a&nbsp;buffer&nbsp;to&nbsp;read&nbsp;an&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3261734">//&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3261745">//</span><br>
<span class="lineno"></span><span class="comment" id="3261748">//&nbsp;In&nbsp;most&nbsp;cases,&nbsp;new(Buffer)&nbsp;(or&nbsp;just&nbsp;declaring&nbsp;a&nbsp;Buffer&nbsp;variable)&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3261819">//&nbsp;sufficient&nbsp;to&nbsp;initialize&nbsp;a&nbsp;Buffer.</span><br>
<span class="lineno">410</span><span class="keyword" id="3261857">func</span>&nbsp;<span class="ident" id="3261862">NewBufferString</span><span class="op" id="3261877">(</span><span class="ident" id="3261878">s</span>&nbsp;<span class="builtintype" id="3261880">string</span><span class="op" id="3261886">)</span>&nbsp;<span class="op" id="3261888">*</span><span class="ident" id="3261889"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span>&nbsp;<span class="op" id="3261896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3261899">return</span>&nbsp;<span class="op" id="3261906">&amp;</span><span class="ident" id="3261907"><a href="/bytes/buffer.go.html#3249198">Buffer</a></span><span class="op" id="3261913">{</span><span class="ident" id="3261914">buf</span><span class="op" id="3261917">:</span>&nbsp;<span class="op" id="3261919">[</span><span class="op" id="3261920">]</span><span class="builtintype" id="3261921">byte</span><span class="op" id="3261925">(</span><span class="ident" id="3261926"><a href="/bytes/buffer.go.html#3261878">s</a></span><span class="op" id="3261927">)</span><span class="op" id="3261928">}</span><br>
<span class="lineno"></span><span class="op" id="3261930">}</span>
</div>
</body>
</html>
