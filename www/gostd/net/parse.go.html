<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3088967">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3089022">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3089076">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3089127">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="3089180">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3089228">package</span>&nbsp;<span class="ident" id="3089236">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3089241">import</span>&nbsp;<span class="op" id="3089248">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3089251">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3089257">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3089262">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3089265">type</span>&nbsp;<span class="ident" id="3089270">file</span>&nbsp;<span class="keyword" id="3089275">struct</span>&nbsp;<span class="op" id="3089282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089285">file</span>&nbsp;&nbsp;<span class="op" id="3089291">*</span><span class="ident" id="3089292">os</span><span class="op" id="3089294">.</span><span class="ident" id="3089295">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089301">data</span>&nbsp;&nbsp;<span class="op" id="3089307">[</span><span class="op" id="3089308">]</span><span class="builtintype" id="3089309">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089315">atEOF</span>&nbsp;<span class="builtintype" id="3089321">bool</span><br>
<span class="lineno"></span><span class="op" id="3089326">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3089329">func</span>&nbsp;<span class="op" id="3089334">(</span><span class="ident" id="3089335">f</span>&nbsp;<span class="op" id="3089337">*</span><span class="ident" id="3089338">file</span><span class="op" id="3089342">)</span>&nbsp;<span class="builtinfunc" id="3089344">close</span><span class="op" id="3089349">(</span><span class="op" id="3089350">)</span>&nbsp;<span class="op" id="3089352">{</span>&nbsp;<span class="ident" id="3089354">f</span><span class="op" id="3089355">.</span><span class="ident" id="3089356">file</span><span class="op" id="3089360">.</span><span class="ident" id="3089361">Close</span><span class="op" id="3089366">(</span><span class="op" id="3089367">)</span>&nbsp;<span class="op" id="3089369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3089372">func</span>&nbsp;<span class="op" id="3089377">(</span><span class="ident" id="3089378">f</span>&nbsp;<span class="op" id="3089380">*</span><span class="ident" id="3089381">file</span><span class="op" id="3089385">)</span>&nbsp;<span class="ident" id="3089387">getLineFromData</span><span class="op" id="3089402">(</span><span class="op" id="3089403">)</span>&nbsp;<span class="op" id="3089405">(</span><span class="ident" id="3089406">s</span>&nbsp;<span class="builtintype" id="3089408">string</span><span class="op" id="3089414">,</span>&nbsp;<span class="ident" id="3089416">ok</span>&nbsp;<span class="builtintype" id="3089419">bool</span><span class="op" id="3089423">)</span>&nbsp;<span class="op" id="3089425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089428">data</span>&nbsp;<span class="op" id="3089433">:=</span>&nbsp;<span class="ident" id="3089436">f</span><span class="op" id="3089437">.</span><span class="ident" id="3089438">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089444">i</span>&nbsp;<span class="op" id="3089446">:=</span>&nbsp;<span class="num" id="3089449">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089452">for</span>&nbsp;<span class="ident" id="3089456">i</span>&nbsp;<span class="op" id="3089458">=</span>&nbsp;<span class="num" id="3089460">0</span><span class="op" id="3089461">;</span>&nbsp;<span class="ident" id="3089463">i</span>&nbsp;<span class="op" id="3089465">&lt;</span>&nbsp;<span class="builtinfunc" id="3089467">len</span><span class="op" id="3089470">(</span><span class="ident" id="3089471">data</span><span class="op" id="3089475">)</span><span class="op" id="3089476">;</span>&nbsp;<span class="ident" id="3089478">i</span><span class="op" id="3089479">++</span>&nbsp;<span class="op" id="3089482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089486">if</span>&nbsp;<span class="ident" id="3089489">data</span><span class="op" id="3089493">[</span><span class="ident" id="3089494">i</span><span class="op" id="3089495">]</span>&nbsp;<span class="op" id="3089497">==</span>&nbsp;<span class="string" id="3089500">&#39;\n&#39;</span>&nbsp;<span class="op" id="3089505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089510">s</span>&nbsp;<span class="op" id="3089512">=</span>&nbsp;<span class="builtintype" id="3089514">string</span><span class="op" id="3089520">(</span><span class="ident" id="3089521">data</span><span class="op" id="3089525">[</span><span class="num" id="3089526">0</span><span class="op" id="3089527">:</span><span class="ident" id="3089528">i</span><span class="op" id="3089529">]</span><span class="op" id="3089530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089535">ok</span>&nbsp;<span class="op" id="3089538">=</span>&nbsp;<span class="builtintype" id="3089540">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3089548">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089564">i</span><span class="op" id="3089565">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089571">n</span>&nbsp;<span class="op" id="3089573">:=</span>&nbsp;<span class="builtinfunc" id="3089576">len</span><span class="op" id="3089579">(</span><span class="ident" id="3089580">data</span><span class="op" id="3089584">)</span>&nbsp;<span class="op" id="3089586">-</span>&nbsp;<span class="ident" id="3089588">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3089593">copy</span><span class="op" id="3089597">(</span><span class="ident" id="3089598">data</span><span class="op" id="3089602">[</span><span class="num" id="3089603">0</span><span class="op" id="3089604">:</span><span class="op" id="3089605">]</span><span class="op" id="3089606">,</span>&nbsp;<span class="ident" id="3089608">data</span><span class="op" id="3089612">[</span><span class="ident" id="3089613">i</span><span class="op" id="3089614">:</span><span class="op" id="3089615">]</span><span class="op" id="3089616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089621">f</span><span class="op" id="3089622">.</span><span class="ident" id="3089623">data</span>&nbsp;<span class="op" id="3089628">=</span>&nbsp;<span class="ident" id="3089630">data</span><span class="op" id="3089634">[</span><span class="num" id="3089635">0</span><span class="op" id="3089636">:</span><span class="ident" id="3089637">n</span><span class="op" id="3089638">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089643">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089658">if</span>&nbsp;<span class="ident" id="3089661">f</span><span class="op" id="3089662">.</span><span class="ident" id="3089663">atEOF</span>&nbsp;<span class="op" id="3089669">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3089672">len</span><span class="op" id="3089675">(</span><span class="ident" id="3089676">f</span><span class="op" id="3089677">.</span><span class="ident" id="3089678">data</span><span class="op" id="3089682">)</span>&nbsp;<span class="op" id="3089684">&gt;</span>&nbsp;<span class="num" id="3089686">0</span>&nbsp;<span class="op" id="3089688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3089692">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089721">s</span>&nbsp;<span class="op" id="3089723">=</span>&nbsp;<span class="builtintype" id="3089725">string</span><span class="op" id="3089731">(</span><span class="ident" id="3089732">data</span><span class="op" id="3089736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089740">f</span><span class="op" id="3089741">.</span><span class="ident" id="3089742">data</span>&nbsp;<span class="op" id="3089747">=</span>&nbsp;<span class="ident" id="3089749">f</span><span class="op" id="3089750">.</span><span class="ident" id="3089751">data</span><span class="op" id="3089755">[</span><span class="num" id="3089756">0</span><span class="op" id="3089757">:</span><span class="num" id="3089758">0</span><span class="op" id="3089759">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089763">ok</span>&nbsp;<span class="op" id="3089766">=</span>&nbsp;<span class="builtintype" id="3089768">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089777">return</span><br>
<span class="lineno">45</span><span class="op" id="3089784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3089787">func</span>&nbsp;<span class="op" id="3089792">(</span><span class="ident" id="3089793">f</span>&nbsp;<span class="op" id="3089795">*</span><span class="ident" id="3089796">file</span><span class="op" id="3089800">)</span>&nbsp;<span class="ident" id="3089802">readLine</span><span class="op" id="3089810">(</span><span class="op" id="3089811">)</span>&nbsp;<span class="op" id="3089813">(</span><span class="ident" id="3089814">s</span>&nbsp;<span class="builtintype" id="3089816">string</span><span class="op" id="3089822">,</span>&nbsp;<span class="ident" id="3089824">ok</span>&nbsp;<span class="builtintype" id="3089827">bool</span><span class="op" id="3089831">)</span>&nbsp;<span class="op" id="3089833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089836">if</span>&nbsp;<span class="ident" id="3089839">s</span><span class="op" id="3089840">,</span>&nbsp;<span class="ident" id="3089842">ok</span>&nbsp;<span class="op" id="3089845">=</span>&nbsp;<span class="ident" id="3089847">f</span><span class="op" id="3089848">.</span><span class="ident" id="3089849">getLineFromData</span><span class="op" id="3089864">(</span><span class="op" id="3089865">)</span><span class="op" id="3089866">;</span>&nbsp;<span class="ident" id="3089868">ok</span>&nbsp;<span class="op" id="3089871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089875">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3089883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089886">if</span>&nbsp;<span class="builtinfunc" id="3089889">len</span><span class="op" id="3089892">(</span><span class="ident" id="3089893">f</span><span class="op" id="3089894">.</span><span class="ident" id="3089895">data</span><span class="op" id="3089899">)</span>&nbsp;<span class="op" id="3089901">&lt;</span>&nbsp;<span class="builtinfunc" id="3089903">cap</span><span class="op" id="3089906">(</span><span class="ident" id="3089907">f</span><span class="op" id="3089908">.</span><span class="ident" id="3089909">data</span><span class="op" id="3089913">)</span>&nbsp;<span class="op" id="3089915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089919">ln</span>&nbsp;<span class="op" id="3089922">:=</span>&nbsp;<span class="builtinfunc" id="3089925">len</span><span class="op" id="3089928">(</span><span class="ident" id="3089929">f</span><span class="op" id="3089930">.</span><span class="ident" id="3089931">data</span><span class="op" id="3089935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3089939">n</span><span class="op" id="3089940">,</span>&nbsp;<span class="ident" id="3089942">err</span>&nbsp;<span class="op" id="3089946">:=</span>&nbsp;<span class="ident" id="3089949">io</span><span class="op" id="3089951">.</span><span class="ident" id="3089952">ReadFull</span><span class="op" id="3089960">(</span><span class="ident" id="3089961">f</span><span class="op" id="3089962">.</span><span class="ident" id="3089963">file</span><span class="op" id="3089967">,</span>&nbsp;<span class="ident" id="3089969">f</span><span class="op" id="3089970">.</span><span class="ident" id="3089971">data</span><span class="op" id="3089975">[</span><span class="ident" id="3089976">ln</span><span class="op" id="3089978">:</span><span class="builtinfunc" id="3089979">cap</span><span class="op" id="3089982">(</span><span class="ident" id="3089983">f</span><span class="op" id="3089984">.</span><span class="ident" id="3089985">data</span><span class="op" id="3089989">)</span><span class="op" id="3089990">]</span><span class="op" id="3089991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3089995">if</span>&nbsp;<span class="ident" id="3089998">n</span>&nbsp;<span class="op" id="3090000">&gt;=</span>&nbsp;<span class="num" id="3090003">0</span>&nbsp;<span class="op" id="3090005">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090010">f</span><span class="op" id="3090011">.</span><span class="ident" id="3090012">data</span>&nbsp;<span class="op" id="3090017">=</span>&nbsp;<span class="ident" id="3090019">f</span><span class="op" id="3090020">.</span><span class="ident" id="3090021">data</span><span class="op" id="3090025">[</span><span class="num" id="3090026">0</span>&nbsp;<span class="op" id="3090028">:</span>&nbsp;<span class="ident" id="3090030">ln</span><span class="op" id="3090032">+</span><span class="ident" id="3090033">n</span><span class="op" id="3090034">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090042">if</span>&nbsp;<span class="ident" id="3090045">err</span>&nbsp;<span class="op" id="3090049">==</span>&nbsp;<span class="ident" id="3090052">io</span><span class="op" id="3090054">.</span><span class="ident" id="3090055">EOF</span>&nbsp;<span class="op" id="3090059">||</span>&nbsp;<span class="ident" id="3090062">err</span>&nbsp;<span class="op" id="3090066">==</span>&nbsp;<span class="ident" id="3090069">io</span><span class="op" id="3090071">.</span><span class="ident" id="3090072">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="3090089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090094">f</span><span class="op" id="3090095">.</span><span class="ident" id="3090096">atEOF</span>&nbsp;<span class="op" id="3090102">=</span>&nbsp;<span class="builtintype" id="3090104">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090111">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090117">s</span><span class="op" id="3090118">,</span>&nbsp;<span class="ident" id="3090120">ok</span>&nbsp;<span class="op" id="3090123">=</span>&nbsp;<span class="ident" id="3090125">f</span><span class="op" id="3090126">.</span><span class="ident" id="3090127">getLineFromData</span><span class="op" id="3090142">(</span><span class="op" id="3090143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090146">return</span><br>
<span class="lineno"></span><span class="op" id="3090153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="3090156">func</span>&nbsp;<span class="ident" id="3090161">open</span><span class="op" id="3090165">(</span><span class="ident" id="3090166">name</span>&nbsp;<span class="builtintype" id="3090171">string</span><span class="op" id="3090177">)</span>&nbsp;<span class="op" id="3090179">(</span><span class="op" id="3090180">*</span><span class="ident" id="3090181">file</span><span class="op" id="3090185">,</span>&nbsp;<span class="builtintype" id="3090187">error</span><span class="op" id="3090192">)</span>&nbsp;<span class="op" id="3090194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090197">fd</span><span class="op" id="3090199">,</span>&nbsp;<span class="ident" id="3090201">err</span>&nbsp;<span class="op" id="3090205">:=</span>&nbsp;<span class="ident" id="3090208">os</span><span class="op" id="3090210">.</span><span class="ident" id="3090211">Open</span><span class="op" id="3090215">(</span><span class="ident" id="3090216">name</span><span class="op" id="3090220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090223">if</span>&nbsp;<span class="ident" id="3090226">err</span>&nbsp;<span class="op" id="3090230">!=</span>&nbsp;<span class="ident" id="3090233">nil</span>&nbsp;<span class="op" id="3090237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090241">return</span>&nbsp;<span class="ident" id="3090248">nil</span><span class="op" id="3090251">,</span>&nbsp;<span class="ident" id="3090253">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090258">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090261">return</span>&nbsp;<span class="op" id="3090268">&amp;</span><span class="ident" id="3090269">file</span><span class="op" id="3090273">{</span><span class="ident" id="3090274">fd</span><span class="op" id="3090276">,</span>&nbsp;<span class="builtinfunc" id="3090278">make</span><span class="op" id="3090282">(</span><span class="op" id="3090283">[</span><span class="op" id="3090284">]</span><span class="builtintype" id="3090285">byte</span><span class="op" id="3090289">,</span>&nbsp;<span class="num" id="3090291">0</span><span class="op" id="3090292">,</span>&nbsp;<span class="ident" id="3090294">os</span><span class="op" id="3090296">.</span><span class="ident" id="3090297">Getpagesize</span><span class="op" id="3090308">(</span><span class="op" id="3090309">)</span><span class="op" id="3090310">)</span><span class="op" id="3090311">,</span>&nbsp;<span class="builtintype" id="3090313">false</span><span class="op" id="3090318">}</span><span class="op" id="3090319">,</span>&nbsp;<span class="ident" id="3090321">nil</span><br>
<span class="lineno"></span><span class="op" id="3090325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3090328">func</span>&nbsp;<span class="ident" id="3090333">byteIndex</span><span class="op" id="3090342">(</span><span class="ident" id="3090343">s</span>&nbsp;<span class="builtintype" id="3090345">string</span><span class="op" id="3090351">,</span>&nbsp;<span class="ident" id="3090353">c</span>&nbsp;<span class="builtintype" id="3090355">byte</span><span class="op" id="3090359">)</span>&nbsp;<span class="builtintype" id="3090361">int</span>&nbsp;<span class="op" id="3090365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090368">for</span>&nbsp;<span class="ident" id="3090372">i</span>&nbsp;<span class="op" id="3090374">:=</span>&nbsp;<span class="num" id="3090377">0</span><span class="op" id="3090378">;</span>&nbsp;<span class="ident" id="3090380">i</span>&nbsp;<span class="op" id="3090382">&lt;</span>&nbsp;<span class="builtinfunc" id="3090384">len</span><span class="op" id="3090387">(</span><span class="ident" id="3090388">s</span><span class="op" id="3090389">)</span><span class="op" id="3090390">;</span>&nbsp;<span class="ident" id="3090392">i</span><span class="op" id="3090393">++</span>&nbsp;<span class="op" id="3090396">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090400">if</span>&nbsp;<span class="ident" id="3090403">s</span><span class="op" id="3090404">[</span><span class="ident" id="3090405">i</span><span class="op" id="3090406">]</span>&nbsp;<span class="op" id="3090408">==</span>&nbsp;<span class="ident" id="3090411">c</span>&nbsp;<span class="op" id="3090413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090418">return</span>&nbsp;<span class="ident" id="3090425">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090435">return</span>&nbsp;<span class="op" id="3090442">-</span><span class="num" id="3090443">1</span><br>
<span class="lineno">80</span><span class="op" id="3090445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3090448">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3090493">func</span>&nbsp;<span class="ident" id="3090498">countAnyByte</span><span class="op" id="3090510">(</span><span class="ident" id="3090511">s</span>&nbsp;<span class="builtintype" id="3090513">string</span><span class="op" id="3090519">,</span>&nbsp;<span class="ident" id="3090521">t</span>&nbsp;<span class="builtintype" id="3090523">string</span><span class="op" id="3090529">)</span>&nbsp;<span class="builtintype" id="3090531">int</span>&nbsp;<span class="op" id="3090535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090538">n</span>&nbsp;<span class="op" id="3090540">:=</span>&nbsp;<span class="num" id="3090543">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090546">for</span>&nbsp;<span class="ident" id="3090550">i</span>&nbsp;<span class="op" id="3090552">:=</span>&nbsp;<span class="num" id="3090555">0</span><span class="op" id="3090556">;</span>&nbsp;<span class="ident" id="3090558">i</span>&nbsp;<span class="op" id="3090560">&lt;</span>&nbsp;<span class="builtinfunc" id="3090562">len</span><span class="op" id="3090565">(</span><span class="ident" id="3090566">s</span><span class="op" id="3090567">)</span><span class="op" id="3090568">;</span>&nbsp;<span class="ident" id="3090570">i</span><span class="op" id="3090571">++</span>&nbsp;<span class="op" id="3090574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090578">if</span>&nbsp;<span class="ident" id="3090581">byteIndex</span><span class="op" id="3090590">(</span><span class="ident" id="3090591">t</span><span class="op" id="3090592">,</span>&nbsp;<span class="ident" id="3090594">s</span><span class="op" id="3090595">[</span><span class="ident" id="3090596">i</span><span class="op" id="3090597">]</span><span class="op" id="3090598">)</span>&nbsp;<span class="op" id="3090600">&gt;=</span>&nbsp;<span class="num" id="3090603">0</span>&nbsp;<span class="op" id="3090605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090610">n</span><span class="op" id="3090611">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090619">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090622">return</span>&nbsp;<span class="ident" id="3090629">n</span><br>
<span class="lineno"></span><span class="op" id="3090631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3090634">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3090664">func</span>&nbsp;<span class="ident" id="3090669">splitAtBytes</span><span class="op" id="3090681">(</span><span class="ident" id="3090682">s</span>&nbsp;<span class="builtintype" id="3090684">string</span><span class="op" id="3090690">,</span>&nbsp;<span class="ident" id="3090692">t</span>&nbsp;<span class="builtintype" id="3090694">string</span><span class="op" id="3090700">)</span>&nbsp;<span class="op" id="3090702">[</span><span class="op" id="3090703">]</span><span class="builtintype" id="3090704">string</span>&nbsp;<span class="op" id="3090711">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090714">a</span>&nbsp;<span class="op" id="3090716">:=</span>&nbsp;<span class="builtinfunc" id="3090719">make</span><span class="op" id="3090723">(</span><span class="op" id="3090724">[</span><span class="op" id="3090725">]</span><span class="builtintype" id="3090726">string</span><span class="op" id="3090732">,</span>&nbsp;<span class="num" id="3090734">1</span><span class="op" id="3090735">+</span><span class="ident" id="3090736">countAnyByte</span><span class="op" id="3090748">(</span><span class="ident" id="3090749">s</span><span class="op" id="3090750">,</span>&nbsp;<span class="ident" id="3090752">t</span><span class="op" id="3090753">)</span><span class="op" id="3090754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090757">n</span>&nbsp;<span class="op" id="3090759">:=</span>&nbsp;<span class="num" id="3090762">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090765">last</span>&nbsp;<span class="op" id="3090770">:=</span>&nbsp;<span class="num" id="3090773">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090776">for</span>&nbsp;<span class="ident" id="3090780">i</span>&nbsp;<span class="op" id="3090782">:=</span>&nbsp;<span class="num" id="3090785">0</span><span class="op" id="3090786">;</span>&nbsp;<span class="ident" id="3090788">i</span>&nbsp;<span class="op" id="3090790">&lt;</span>&nbsp;<span class="builtinfunc" id="3090792">len</span><span class="op" id="3090795">(</span><span class="ident" id="3090796">s</span><span class="op" id="3090797">)</span><span class="op" id="3090798">;</span>&nbsp;<span class="ident" id="3090800">i</span><span class="op" id="3090801">++</span>&nbsp;<span class="op" id="3090804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090808">if</span>&nbsp;<span class="ident" id="3090811">byteIndex</span><span class="op" id="3090820">(</span><span class="ident" id="3090821">t</span><span class="op" id="3090822">,</span>&nbsp;<span class="ident" id="3090824">s</span><span class="op" id="3090825">[</span><span class="ident" id="3090826">i</span><span class="op" id="3090827">]</span><span class="op" id="3090828">)</span>&nbsp;<span class="op" id="3090830">&gt;=</span>&nbsp;<span class="num" id="3090833">0</span>&nbsp;<span class="op" id="3090835">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090840">if</span>&nbsp;<span class="ident" id="3090843">last</span>&nbsp;<span class="op" id="3090848">&lt;</span>&nbsp;<span class="ident" id="3090850">i</span>&nbsp;<span class="op" id="3090852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090858">a</span><span class="op" id="3090859">[</span><span class="ident" id="3090860">n</span><span class="op" id="3090861">]</span>&nbsp;<span class="op" id="3090863">=</span>&nbsp;<span class="builtintype" id="3090865">string</span><span class="op" id="3090871">(</span><span class="ident" id="3090872">s</span><span class="op" id="3090873">[</span><span class="ident" id="3090874">last</span><span class="op" id="3090878">:</span><span class="ident" id="3090879">i</span><span class="op" id="3090880">]</span><span class="op" id="3090881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090887">n</span><span class="op" id="3090888">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090899">last</span>&nbsp;<span class="op" id="3090904">=</span>&nbsp;<span class="ident" id="3090906">i</span>&nbsp;<span class="op" id="3090908">+</span>&nbsp;<span class="num" id="3090910">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090920">if</span>&nbsp;<span class="ident" id="3090923">last</span>&nbsp;<span class="op" id="3090928">&lt;</span>&nbsp;<span class="builtinfunc" id="3090930">len</span><span class="op" id="3090933">(</span><span class="ident" id="3090934">s</span><span class="op" id="3090935">)</span>&nbsp;<span class="op" id="3090937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090941">a</span><span class="op" id="3090942">[</span><span class="ident" id="3090943">n</span><span class="op" id="3090944">]</span>&nbsp;<span class="op" id="3090946">=</span>&nbsp;<span class="builtintype" id="3090948">string</span><span class="op" id="3090954">(</span><span class="ident" id="3090955">s</span><span class="op" id="3090956">[</span><span class="ident" id="3090957">last</span><span class="op" id="3090961">:</span><span class="op" id="3090962">]</span><span class="op" id="3090963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3090967">n</span><span class="op" id="3090968">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3090972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3090975">return</span>&nbsp;<span class="ident" id="3090982">a</span><span class="op" id="3090983">[</span><span class="num" id="3090984">0</span><span class="op" id="3090985">:</span><span class="ident" id="3090986">n</span><span class="op" id="3090987">]</span><br>
<span class="lineno"></span><span class="op" id="3090989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3090992">func</span>&nbsp;<span class="ident" id="3090997">getFields</span><span class="op" id="3091006">(</span><span class="ident" id="3091007">s</span>&nbsp;<span class="builtintype" id="3091009">string</span><span class="op" id="3091015">)</span>&nbsp;<span class="op" id="3091017">[</span><span class="op" id="3091018">]</span><span class="builtintype" id="3091019">string</span>&nbsp;<span class="op" id="3091026">{</span>&nbsp;<span class="keyword" id="3091028">return</span>&nbsp;<span class="ident" id="3091035">splitAtBytes</span><span class="op" id="3091047">(</span><span class="ident" id="3091048">s</span><span class="op" id="3091049">,</span>&nbsp;<span class="string" id="3091051">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="3091060">)</span>&nbsp;<span class="op" id="3091062">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3091065">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="3091125">const</span>&nbsp;<span class="ident" id="3091131">big</span>&nbsp;<span class="op" id="3091135">=</span>&nbsp;<span class="num" id="3091137">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3091147">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="3091189">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3091229">func</span>&nbsp;<span class="ident" id="3091234">dtoi</span><span class="op" id="3091238">(</span><span class="ident" id="3091239">s</span>&nbsp;<span class="builtintype" id="3091241">string</span><span class="op" id="3091247">,</span>&nbsp;<span class="ident" id="3091249">i0</span>&nbsp;<span class="builtintype" id="3091252">int</span><span class="op" id="3091255">)</span>&nbsp;<span class="op" id="3091257">(</span><span class="ident" id="3091258">n</span>&nbsp;<span class="builtintype" id="3091260">int</span><span class="op" id="3091263">,</span>&nbsp;<span class="ident" id="3091265">i</span>&nbsp;<span class="builtintype" id="3091267">int</span><span class="op" id="3091270">,</span>&nbsp;<span class="ident" id="3091272">ok</span>&nbsp;<span class="builtintype" id="3091275">bool</span><span class="op" id="3091279">)</span>&nbsp;<span class="op" id="3091281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091284">n</span>&nbsp;<span class="op" id="3091286">=</span>&nbsp;<span class="num" id="3091288">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091291">for</span>&nbsp;<span class="ident" id="3091295">i</span>&nbsp;<span class="op" id="3091297">=</span>&nbsp;<span class="ident" id="3091299">i0</span><span class="op" id="3091301">;</span>&nbsp;<span class="ident" id="3091303">i</span>&nbsp;<span class="op" id="3091305">&lt;</span>&nbsp;<span class="builtinfunc" id="3091307">len</span><span class="op" id="3091310">(</span><span class="ident" id="3091311">s</span><span class="op" id="3091312">)</span>&nbsp;<span class="op" id="3091314">&amp;&amp;</span>&nbsp;<span class="string" id="3091317">&#39;0&#39;</span>&nbsp;<span class="op" id="3091321">&lt;=</span>&nbsp;<span class="ident" id="3091324">s</span><span class="op" id="3091325">[</span><span class="ident" id="3091326">i</span><span class="op" id="3091327">]</span>&nbsp;<span class="op" id="3091329">&amp;&amp;</span>&nbsp;<span class="ident" id="3091332">s</span><span class="op" id="3091333">[</span><span class="ident" id="3091334">i</span><span class="op" id="3091335">]</span>&nbsp;<span class="op" id="3091337">&lt;=</span>&nbsp;<span class="string" id="3091340">&#39;9&#39;</span><span class="op" id="3091343">;</span>&nbsp;<span class="ident" id="3091345">i</span><span class="op" id="3091346">++</span>&nbsp;<span class="op" id="3091349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091353">n</span>&nbsp;<span class="op" id="3091355">=</span>&nbsp;<span class="ident" id="3091357">n</span><span class="op" id="3091358">*</span><span class="num" id="3091359">10</span>&nbsp;<span class="op" id="3091362">+</span>&nbsp;<span class="builtintype" id="3091364">int</span><span class="op" id="3091367">(</span><span class="ident" id="3091368">s</span><span class="op" id="3091369">[</span><span class="ident" id="3091370">i</span><span class="op" id="3091371">]</span><span class="op" id="3091372">-</span><span class="string" id="3091373">&#39;0&#39;</span><span class="op" id="3091376">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091380">if</span>&nbsp;<span class="ident" id="3091383">n</span>&nbsp;<span class="op" id="3091385">&gt;=</span>&nbsp;<span class="ident" id="3091388">big</span>&nbsp;<span class="op" id="3091392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091397">return</span>&nbsp;<span class="num" id="3091404">0</span><span class="op" id="3091405">,</span>&nbsp;<span class="ident" id="3091407">i</span><span class="op" id="3091408">,</span>&nbsp;<span class="builtintype" id="3091410">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091424">if</span>&nbsp;<span class="ident" id="3091427">i</span>&nbsp;<span class="op" id="3091429">==</span>&nbsp;<span class="ident" id="3091432">i0</span>&nbsp;<span class="op" id="3091435">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091439">return</span>&nbsp;<span class="num" id="3091446">0</span><span class="op" id="3091447">,</span>&nbsp;<span class="ident" id="3091449">i</span><span class="op" id="3091450">,</span>&nbsp;<span class="builtintype" id="3091452">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091462">return</span>&nbsp;<span class="ident" id="3091469">n</span><span class="op" id="3091470">,</span>&nbsp;<span class="ident" id="3091472">i</span><span class="op" id="3091473">,</span>&nbsp;<span class="builtintype" id="3091475">true</span><br>
<span class="lineno"></span><span class="op" id="3091480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3091483">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="3091529">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3091569">func</span>&nbsp;<span class="ident" id="3091574">xtoi</span><span class="op" id="3091578">(</span><span class="ident" id="3091579">s</span>&nbsp;<span class="builtintype" id="3091581">string</span><span class="op" id="3091587">,</span>&nbsp;<span class="ident" id="3091589">i0</span>&nbsp;<span class="builtintype" id="3091592">int</span><span class="op" id="3091595">)</span>&nbsp;<span class="op" id="3091597">(</span><span class="ident" id="3091598">n</span>&nbsp;<span class="builtintype" id="3091600">int</span><span class="op" id="3091603">,</span>&nbsp;<span class="ident" id="3091605">i</span>&nbsp;<span class="builtintype" id="3091607">int</span><span class="op" id="3091610">,</span>&nbsp;<span class="ident" id="3091612">ok</span>&nbsp;<span class="builtintype" id="3091615">bool</span><span class="op" id="3091619">)</span>&nbsp;<span class="op" id="3091621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091624">n</span>&nbsp;<span class="op" id="3091626">=</span>&nbsp;<span class="num" id="3091628">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091631">for</span>&nbsp;<span class="ident" id="3091635">i</span>&nbsp;<span class="op" id="3091637">=</span>&nbsp;<span class="ident" id="3091639">i0</span><span class="op" id="3091641">;</span>&nbsp;<span class="ident" id="3091643">i</span>&nbsp;<span class="op" id="3091645">&lt;</span>&nbsp;<span class="builtinfunc" id="3091647">len</span><span class="op" id="3091650">(</span><span class="ident" id="3091651">s</span><span class="op" id="3091652">)</span><span class="op" id="3091653">;</span>&nbsp;<span class="ident" id="3091655">i</span><span class="op" id="3091656">++</span>&nbsp;<span class="op" id="3091659">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091663">if</span>&nbsp;<span class="string" id="3091666">&#39;0&#39;</span>&nbsp;<span class="op" id="3091670">&lt;=</span>&nbsp;<span class="ident" id="3091673">s</span><span class="op" id="3091674">[</span><span class="ident" id="3091675">i</span><span class="op" id="3091676">]</span>&nbsp;<span class="op" id="3091678">&amp;&amp;</span>&nbsp;<span class="ident" id="3091681">s</span><span class="op" id="3091682">[</span><span class="ident" id="3091683">i</span><span class="op" id="3091684">]</span>&nbsp;<span class="op" id="3091686">&lt;=</span>&nbsp;<span class="string" id="3091689">&#39;9&#39;</span>&nbsp;<span class="op" id="3091693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091698">n</span>&nbsp;<span class="op" id="3091700">*=</span>&nbsp;<span class="num" id="3091703">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091709">n</span>&nbsp;<span class="op" id="3091711">+=</span>&nbsp;<span class="builtintype" id="3091714">int</span><span class="op" id="3091717">(</span><span class="ident" id="3091718">s</span><span class="op" id="3091719">[</span><span class="ident" id="3091720">i</span><span class="op" id="3091721">]</span>&nbsp;<span class="op" id="3091723">-</span>&nbsp;<span class="string" id="3091725">&#39;0&#39;</span><span class="op" id="3091728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091732">}</span>&nbsp;<span class="keyword" id="3091734">else</span>&nbsp;<span class="keyword" id="3091739">if</span>&nbsp;<span class="string" id="3091742">&#39;a&#39;</span>&nbsp;<span class="op" id="3091746">&lt;=</span>&nbsp;<span class="ident" id="3091749">s</span><span class="op" id="3091750">[</span><span class="ident" id="3091751">i</span><span class="op" id="3091752">]</span>&nbsp;<span class="op" id="3091754">&amp;&amp;</span>&nbsp;<span class="ident" id="3091757">s</span><span class="op" id="3091758">[</span><span class="ident" id="3091759">i</span><span class="op" id="3091760">]</span>&nbsp;<span class="op" id="3091762">&lt;=</span>&nbsp;<span class="string" id="3091765">&#39;f&#39;</span>&nbsp;<span class="op" id="3091769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091774">n</span>&nbsp;<span class="op" id="3091776">*=</span>&nbsp;<span class="num" id="3091779">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091785">n</span>&nbsp;<span class="op" id="3091787">+=</span>&nbsp;<span class="builtintype" id="3091790">int</span><span class="op" id="3091793">(</span><span class="ident" id="3091794">s</span><span class="op" id="3091795">[</span><span class="ident" id="3091796">i</span><span class="op" id="3091797">]</span><span class="op" id="3091798">-</span><span class="string" id="3091799">&#39;a&#39;</span><span class="op" id="3091802">)</span>&nbsp;<span class="op" id="3091804">+</span>&nbsp;<span class="num" id="3091806">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091811">}</span>&nbsp;<span class="keyword" id="3091813">else</span>&nbsp;<span class="keyword" id="3091818">if</span>&nbsp;<span class="string" id="3091821">&#39;A&#39;</span>&nbsp;<span class="op" id="3091825">&lt;=</span>&nbsp;<span class="ident" id="3091828">s</span><span class="op" id="3091829">[</span><span class="ident" id="3091830">i</span><span class="op" id="3091831">]</span>&nbsp;<span class="op" id="3091833">&amp;&amp;</span>&nbsp;<span class="ident" id="3091836">s</span><span class="op" id="3091837">[</span><span class="ident" id="3091838">i</span><span class="op" id="3091839">]</span>&nbsp;<span class="op" id="3091841">&lt;=</span>&nbsp;<span class="string" id="3091844">&#39;F&#39;</span>&nbsp;<span class="op" id="3091848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091853">n</span>&nbsp;<span class="op" id="3091855">*=</span>&nbsp;<span class="num" id="3091858">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3091864">n</span>&nbsp;<span class="op" id="3091866">+=</span>&nbsp;<span class="builtintype" id="3091869">int</span><span class="op" id="3091872">(</span><span class="ident" id="3091873">s</span><span class="op" id="3091874">[</span><span class="ident" id="3091875">i</span><span class="op" id="3091876">]</span><span class="op" id="3091877">-</span><span class="string" id="3091878">&#39;A&#39;</span><span class="op" id="3091881">)</span>&nbsp;<span class="op" id="3091883">+</span>&nbsp;<span class="num" id="3091885">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091890">}</span>&nbsp;<span class="keyword" id="3091892">else</span>&nbsp;<span class="op" id="3091897">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091902">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091914">if</span>&nbsp;<span class="ident" id="3091917">n</span>&nbsp;<span class="op" id="3091919">&gt;=</span>&nbsp;<span class="ident" id="3091922">big</span>&nbsp;<span class="op" id="3091926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091931">return</span>&nbsp;<span class="num" id="3091938">0</span><span class="op" id="3091939">,</span>&nbsp;<span class="ident" id="3091941">i</span><span class="op" id="3091942">,</span>&nbsp;<span class="builtintype" id="3091944">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091952">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091958">if</span>&nbsp;<span class="ident" id="3091961">i</span>&nbsp;<span class="op" id="3091963">==</span>&nbsp;<span class="ident" id="3091966">i0</span>&nbsp;<span class="op" id="3091969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091973">return</span>&nbsp;<span class="num" id="3091980">0</span><span class="op" id="3091981">,</span>&nbsp;<span class="ident" id="3091983">i</span><span class="op" id="3091984">,</span>&nbsp;<span class="builtintype" id="3091986">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3091993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3091996">return</span>&nbsp;<span class="ident" id="3092003">n</span><span class="op" id="3092004">,</span>&nbsp;<span class="ident" id="3092006">i</span><span class="op" id="3092007">,</span>&nbsp;<span class="builtintype" id="3092009">true</span><br>
<span class="lineno">160</span><span class="op" id="3092014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092017">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3092077">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="3092139">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="3092207">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3092247">func</span>&nbsp;<span class="ident" id="3092252">xtoi2</span><span class="op" id="3092257">(</span><span class="ident" id="3092258">s</span>&nbsp;<span class="builtintype" id="3092260">string</span><span class="op" id="3092266">,</span>&nbsp;<span class="ident" id="3092268">e</span>&nbsp;<span class="builtintype" id="3092270">byte</span><span class="op" id="3092274">)</span>&nbsp;<span class="op" id="3092276">(</span><span class="builtintype" id="3092277">byte</span><span class="op" id="3092281">,</span>&nbsp;<span class="builtintype" id="3092283">bool</span><span class="op" id="3092287">)</span>&nbsp;<span class="op" id="3092289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092292">if</span>&nbsp;<span class="builtinfunc" id="3092295">len</span><span class="op" id="3092298">(</span><span class="ident" id="3092299">s</span><span class="op" id="3092300">)</span>&nbsp;<span class="op" id="3092302">&gt;</span>&nbsp;<span class="num" id="3092304">2</span>&nbsp;<span class="op" id="3092306">&amp;&amp;</span>&nbsp;<span class="ident" id="3092309">s</span><span class="op" id="3092310">[</span><span class="num" id="3092311">2</span><span class="op" id="3092312">]</span>&nbsp;<span class="op" id="3092314">!=</span>&nbsp;<span class="ident" id="3092317">e</span>&nbsp;<span class="op" id="3092319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092323">return</span>&nbsp;<span class="num" id="3092330">0</span><span class="op" id="3092331">,</span>&nbsp;<span class="builtintype" id="3092333">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092340">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092343">n</span><span class="op" id="3092344">,</span>&nbsp;<span class="ident" id="3092346">ei</span><span class="op" id="3092348">,</span>&nbsp;<span class="ident" id="3092350">ok</span>&nbsp;<span class="op" id="3092353">:=</span>&nbsp;<span class="ident" id="3092356">xtoi</span><span class="op" id="3092360">(</span><span class="ident" id="3092361">s</span><span class="op" id="3092362">[</span><span class="op" id="3092363">:</span><span class="num" id="3092364">2</span><span class="op" id="3092365">]</span><span class="op" id="3092366">,</span>&nbsp;<span class="num" id="3092368">0</span><span class="op" id="3092369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092372">return</span>&nbsp;<span class="builtintype" id="3092379">byte</span><span class="op" id="3092383">(</span><span class="ident" id="3092384">n</span><span class="op" id="3092385">)</span><span class="op" id="3092386">,</span>&nbsp;<span class="ident" id="3092388">ok</span>&nbsp;<span class="op" id="3092391">&amp;&amp;</span>&nbsp;<span class="ident" id="3092394">ei</span>&nbsp;<span class="op" id="3092397">==</span>&nbsp;<span class="num" id="3092400">2</span><br>
<span class="lineno"></span><span class="op" id="3092402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092405">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="3092428">func</span>&nbsp;<span class="ident" id="3092433">itoa</span><span class="op" id="3092437">(</span><span class="ident" id="3092438">i</span>&nbsp;<span class="builtintype" id="3092440">int</span><span class="op" id="3092443">)</span>&nbsp;<span class="builtintype" id="3092445">string</span>&nbsp;<span class="op" id="3092452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092455">var</span>&nbsp;<span class="ident" id="3092459">buf</span>&nbsp;<span class="op" id="3092463">[</span><span class="num" id="3092464">30</span><span class="op" id="3092466">]</span><span class="builtintype" id="3092467">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092473">n</span>&nbsp;<span class="op" id="3092475">:=</span>&nbsp;<span class="builtinfunc" id="3092478">len</span><span class="op" id="3092481">(</span><span class="ident" id="3092482">buf</span><span class="op" id="3092485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092488">neg</span>&nbsp;<span class="op" id="3092492">:=</span>&nbsp;<span class="builtintype" id="3092495">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092502">if</span>&nbsp;<span class="ident" id="3092505">i</span>&nbsp;<span class="op" id="3092507">&lt;</span>&nbsp;<span class="num" id="3092509">0</span>&nbsp;<span class="op" id="3092511">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092515">i</span>&nbsp;<span class="op" id="3092517">=</span>&nbsp;<span class="op" id="3092519">-</span><span class="ident" id="3092520">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092524">neg</span>&nbsp;<span class="op" id="3092528">=</span>&nbsp;<span class="builtintype" id="3092530">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092539">ui</span>&nbsp;<span class="op" id="3092542">:=</span>&nbsp;<span class="builtintype" id="3092545">uint</span><span class="op" id="3092549">(</span><span class="ident" id="3092550">i</span><span class="op" id="3092551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092554">for</span>&nbsp;<span class="ident" id="3092558">ui</span>&nbsp;<span class="op" id="3092561">&gt;</span>&nbsp;<span class="num" id="3092563">0</span>&nbsp;<span class="op" id="3092565">||</span>&nbsp;<span class="ident" id="3092568">n</span>&nbsp;<span class="op" id="3092570">==</span>&nbsp;<span class="builtinfunc" id="3092573">len</span><span class="op" id="3092576">(</span><span class="ident" id="3092577">buf</span><span class="op" id="3092580">)</span>&nbsp;<span class="op" id="3092582">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092586">n</span><span class="op" id="3092587">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092592">buf</span><span class="op" id="3092595">[</span><span class="ident" id="3092596">n</span><span class="op" id="3092597">]</span>&nbsp;<span class="op" id="3092599">=</span>&nbsp;<span class="builtintype" id="3092601">byte</span><span class="op" id="3092605">(</span><span class="string" id="3092606">&#39;0&#39;</span>&nbsp;<span class="op" id="3092610">+</span>&nbsp;<span class="ident" id="3092612">ui</span><span class="op" id="3092614">%</span><span class="num" id="3092615">10</span><span class="op" id="3092617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092621">ui</span>&nbsp;<span class="op" id="3092624">/=</span>&nbsp;<span class="num" id="3092627">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092634">if</span>&nbsp;<span class="ident" id="3092637">neg</span>&nbsp;<span class="op" id="3092641">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092645">n</span><span class="op" id="3092646">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092651">buf</span><span class="op" id="3092654">[</span><span class="ident" id="3092655">n</span><span class="op" id="3092656">]</span>&nbsp;<span class="op" id="3092658">=</span>&nbsp;<span class="string" id="3092660">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092668">return</span>&nbsp;<span class="builtintype" id="3092675">string</span><span class="op" id="3092681">(</span><span class="ident" id="3092682">buf</span><span class="op" id="3092685">[</span><span class="ident" id="3092686">n</span><span class="op" id="3092687">:</span><span class="op" id="3092688">]</span><span class="op" id="3092689">)</span><br>
<span class="lineno"></span><span class="op" id="3092691">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3092694">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3092726">func</span>&nbsp;<span class="ident" id="3092731">itod</span><span class="op" id="3092735">(</span><span class="ident" id="3092736">i</span>&nbsp;<span class="builtintype" id="3092738">uint</span><span class="op" id="3092742">)</span>&nbsp;<span class="builtintype" id="3092744">string</span>&nbsp;<span class="op" id="3092751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092754">if</span>&nbsp;<span class="ident" id="3092757">i</span>&nbsp;<span class="op" id="3092759">==</span>&nbsp;<span class="num" id="3092762">0</span>&nbsp;<span class="op" id="3092764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092768">return</span>&nbsp;<span class="string" id="3092775">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3092784">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092823">var</span>&nbsp;<span class="ident" id="3092827">b</span>&nbsp;<span class="op" id="3092829">[</span><span class="num" id="3092830">32</span><span class="op" id="3092832">]</span><span class="builtintype" id="3092833">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092839">bp</span>&nbsp;<span class="op" id="3092842">:=</span>&nbsp;<span class="builtinfunc" id="3092845">len</span><span class="op" id="3092848">(</span><span class="ident" id="3092849">b</span><span class="op" id="3092850">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092853">for</span>&nbsp;<span class="op" id="3092857">;</span>&nbsp;<span class="ident" id="3092859">i</span>&nbsp;<span class="op" id="3092861">&gt;</span>&nbsp;<span class="num" id="3092863">0</span><span class="op" id="3092864">;</span>&nbsp;<span class="ident" id="3092866">i</span>&nbsp;<span class="op" id="3092868">/=</span>&nbsp;<span class="num" id="3092871">10</span>&nbsp;<span class="op" id="3092874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092878">bp</span><span class="op" id="3092880">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3092885">b</span><span class="op" id="3092886">[</span><span class="ident" id="3092887">bp</span><span class="op" id="3092889">]</span>&nbsp;<span class="op" id="3092891">=</span>&nbsp;<span class="builtintype" id="3092893">byte</span><span class="op" id="3092897">(</span><span class="ident" id="3092898">i</span><span class="op" id="3092899">%</span><span class="num" id="3092900">10</span><span class="op" id="3092902">)</span>&nbsp;<span class="op" id="3092904">+</span>&nbsp;<span class="string" id="3092906">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3092911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3092915">return</span>&nbsp;<span class="builtintype" id="3092922">string</span><span class="op" id="3092928">(</span><span class="ident" id="3092929">b</span><span class="op" id="3092930">[</span><span class="ident" id="3092931">bp</span><span class="op" id="3092933">:</span><span class="op" id="3092934">]</span><span class="op" id="3092935">)</span><br>
<span class="lineno"></span><span class="op" id="3092937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3092940">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="3093009">func</span>&nbsp;<span class="ident" id="3093014">appendHex</span><span class="op" id="3093023">(</span><span class="ident" id="3093024">dst</span>&nbsp;<span class="op" id="3093028">[</span><span class="op" id="3093029">]</span><span class="builtintype" id="3093030">byte</span><span class="op" id="3093034">,</span>&nbsp;<span class="ident" id="3093036">i</span>&nbsp;<span class="builtintype" id="3093038">uint32</span><span class="op" id="3093044">)</span>&nbsp;<span class="op" id="3093046">[</span><span class="op" id="3093047">]</span><span class="builtintype" id="3093048">byte</span>&nbsp;<span class="op" id="3093053">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093056">if</span>&nbsp;<span class="ident" id="3093059">i</span>&nbsp;<span class="op" id="3093061">==</span>&nbsp;<span class="num" id="3093064">0</span>&nbsp;<span class="op" id="3093066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093070">return</span>&nbsp;<span class="builtinfunc" id="3093077">append</span><span class="op" id="3093083">(</span><span class="ident" id="3093084">dst</span><span class="op" id="3093087">,</span>&nbsp;<span class="string" id="3093089">&#39;0&#39;</span><span class="op" id="3093092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093098">for</span>&nbsp;<span class="ident" id="3093102">j</span>&nbsp;<span class="op" id="3093104">:=</span>&nbsp;<span class="num" id="3093107">7</span><span class="op" id="3093108">;</span>&nbsp;<span class="ident" id="3093110">j</span>&nbsp;<span class="op" id="3093112">&gt;=</span>&nbsp;<span class="num" id="3093115">0</span><span class="op" id="3093116">;</span>&nbsp;<span class="ident" id="3093118">j</span><span class="op" id="3093119">--</span>&nbsp;<span class="op" id="3093122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093126">v</span>&nbsp;<span class="op" id="3093128">:=</span>&nbsp;<span class="ident" id="3093131">i</span>&nbsp;<span class="op" id="3093133">&gt;&gt;</span>&nbsp;<span class="builtintype" id="3093136">uint</span><span class="op" id="3093140">(</span><span class="ident" id="3093141">j</span><span class="op" id="3093142">*</span><span class="num" id="3093143">4</span><span class="op" id="3093144">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093148">if</span>&nbsp;<span class="ident" id="3093151">v</span>&nbsp;<span class="op" id="3093153">&gt;</span>&nbsp;<span class="num" id="3093155">0</span>&nbsp;<span class="op" id="3093157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093162">dst</span>&nbsp;<span class="op" id="3093166">=</span>&nbsp;<span class="builtinfunc" id="3093168">append</span><span class="op" id="3093174">(</span><span class="ident" id="3093175">dst</span><span class="op" id="3093178">,</span>&nbsp;<span class="ident" id="3093180">hexDigit</span><span class="op" id="3093188">[</span><span class="ident" id="3093189">v</span><span class="op" id="3093190">&amp;</span><span class="num" id="3093191">0xf</span><span class="op" id="3093194">]</span><span class="op" id="3093195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093205">return</span>&nbsp;<span class="ident" id="3093212">dst</span><br>
<span class="lineno">225</span><span class="op" id="3093216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3093219">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3093255">func</span>&nbsp;<span class="ident" id="3093260">count</span><span class="op" id="3093265">(</span><span class="ident" id="3093266">s</span>&nbsp;<span class="builtintype" id="3093268">string</span><span class="op" id="3093274">,</span>&nbsp;<span class="ident" id="3093276">b</span>&nbsp;<span class="builtintype" id="3093278">byte</span><span class="op" id="3093282">)</span>&nbsp;<span class="builtintype" id="3093284">int</span>&nbsp;<span class="op" id="3093288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093291">n</span>&nbsp;<span class="op" id="3093293">:=</span>&nbsp;<span class="num" id="3093296">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093299">for</span>&nbsp;<span class="ident" id="3093303">i</span>&nbsp;<span class="op" id="3093305">:=</span>&nbsp;<span class="num" id="3093308">0</span><span class="op" id="3093309">;</span>&nbsp;<span class="ident" id="3093311">i</span>&nbsp;<span class="op" id="3093313">&lt;</span>&nbsp;<span class="builtinfunc" id="3093315">len</span><span class="op" id="3093318">(</span><span class="ident" id="3093319">s</span><span class="op" id="3093320">)</span><span class="op" id="3093321">;</span>&nbsp;<span class="ident" id="3093323">i</span><span class="op" id="3093324">++</span>&nbsp;<span class="op" id="3093327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093331">if</span>&nbsp;<span class="ident" id="3093334">s</span><span class="op" id="3093335">[</span><span class="ident" id="3093336">i</span><span class="op" id="3093337">]</span>&nbsp;<span class="op" id="3093339">==</span>&nbsp;<span class="ident" id="3093342">b</span>&nbsp;<span class="op" id="3093344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093349">n</span><span class="op" id="3093350">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093358">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093361">return</span>&nbsp;<span class="ident" id="3093368">n</span><br>
<span class="lineno"></span><span class="op" id="3093370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3093373">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3093417">func</span>&nbsp;<span class="ident" id="3093422">last</span><span class="op" id="3093426">(</span><span class="ident" id="3093427">s</span>&nbsp;<span class="builtintype" id="3093429">string</span><span class="op" id="3093435">,</span>&nbsp;<span class="ident" id="3093437">b</span>&nbsp;<span class="builtintype" id="3093439">byte</span><span class="op" id="3093443">)</span>&nbsp;<span class="builtintype" id="3093445">int</span>&nbsp;<span class="op" id="3093449">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3093452">i</span>&nbsp;<span class="op" id="3093454">:=</span>&nbsp;<span class="builtinfunc" id="3093457">len</span><span class="op" id="3093460">(</span><span class="ident" id="3093461">s</span><span class="op" id="3093462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093465">for</span>&nbsp;<span class="ident" id="3093469">i</span><span class="op" id="3093470">--</span><span class="op" id="3093472">;</span>&nbsp;<span class="ident" id="3093474">i</span>&nbsp;<span class="op" id="3093476">&gt;=</span>&nbsp;<span class="num" id="3093479">0</span><span class="op" id="3093480">;</span>&nbsp;<span class="ident" id="3093482">i</span><span class="op" id="3093483">--</span>&nbsp;<span class="op" id="3093486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093490">if</span>&nbsp;<span class="ident" id="3093493">s</span><span class="op" id="3093494">[</span><span class="ident" id="3093495">i</span><span class="op" id="3093496">]</span>&nbsp;<span class="op" id="3093498">==</span>&nbsp;<span class="ident" id="3093501">b</span>&nbsp;<span class="op" id="3093503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093508">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093516">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3093519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3093522">return</span>&nbsp;<span class="ident" id="3093529">i</span><br>
<span class="lineno"></span><span class="op" id="3093531">}</span>
</div>
</body>
</html>
