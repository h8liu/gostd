<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html" class="current">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2462659">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2462715">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2462769">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2462820">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2462855">package</span>&nbsp;<span class="ident" id="2462863">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2462867">import</span>&nbsp;<span class="string" id="2462874">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2462885">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2462964">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2463038">func</span>&nbsp;<span class="ident" id="2463043">Expand</span><span class="op" id="2463049">(</span><span class="ident" id="2463050">s</span>&nbsp;<span class="builtintype" id="2463052">string</span><span class="op" id="2463058">,</span>&nbsp;<span class="ident" id="2463060">mapping</span>&nbsp;<span class="keyword" id="2463068">func</span><span class="op" id="2463072">(</span><span class="builtintype" id="2463073">string</span><span class="op" id="2463079">)</span>&nbsp;<span class="builtintype" id="2463081">string</span><span class="op" id="2463087">)</span>&nbsp;<span class="builtintype" id="2463089">string</span>&nbsp;<span class="op" id="2463096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463099">buf</span>&nbsp;<span class="op" id="2463103">:=</span>&nbsp;<span class="builtinfunc" id="2463106">make</span><span class="op" id="2463110">(</span><span class="op" id="2463111">[</span><span class="op" id="2463112">]</span><span class="builtintype" id="2463113">byte</span><span class="op" id="2463117">,</span>&nbsp;<span class="num" id="2463119">0</span><span class="op" id="2463120">,</span>&nbsp;<span class="num" id="2463122">2</span><span class="op" id="2463123">*</span><span class="builtinfunc" id="2463124">len</span><span class="op" id="2463127">(</span><span class="ident" id="2463128">s</span><span class="op" id="2463129">)</span><span class="op" id="2463130">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2463133">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463193">i</span>&nbsp;<span class="op" id="2463195">:=</span>&nbsp;<span class="num" id="2463198">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463201">for</span>&nbsp;<span class="ident" id="2463205">j</span>&nbsp;<span class="op" id="2463207">:=</span>&nbsp;<span class="num" id="2463210">0</span><span class="op" id="2463211">;</span>&nbsp;<span class="ident" id="2463213">j</span>&nbsp;<span class="op" id="2463215">&lt;</span>&nbsp;<span class="builtinfunc" id="2463217">len</span><span class="op" id="2463220">(</span><span class="ident" id="2463221">s</span><span class="op" id="2463222">)</span><span class="op" id="2463223">;</span>&nbsp;<span class="ident" id="2463225">j</span><span class="op" id="2463226">++</span>&nbsp;<span class="op" id="2463229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463233">if</span>&nbsp;<span class="ident" id="2463236">s</span><span class="op" id="2463237">[</span><span class="ident" id="2463238">j</span><span class="op" id="2463239">]</span>&nbsp;<span class="op" id="2463241">==</span>&nbsp;<span class="string" id="2463244">&#39;$&#39;</span>&nbsp;<span class="op" id="2463248">&amp;&amp;</span>&nbsp;<span class="ident" id="2463251">j</span><span class="op" id="2463252">+</span><span class="num" id="2463253">1</span>&nbsp;<span class="op" id="2463255">&lt;</span>&nbsp;<span class="builtinfunc" id="2463257">len</span><span class="op" id="2463260">(</span><span class="ident" id="2463261">s</span><span class="op" id="2463262">)</span>&nbsp;<span class="op" id="2463264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463269">buf</span>&nbsp;<span class="op" id="2463273">=</span>&nbsp;<span class="builtinfunc" id="2463275">append</span><span class="op" id="2463281">(</span><span class="ident" id="2463282">buf</span><span class="op" id="2463285">,</span>&nbsp;<span class="ident" id="2463287">s</span><span class="op" id="2463288">[</span><span class="ident" id="2463289">i</span><span class="op" id="2463290">:</span><span class="ident" id="2463291">j</span><span class="op" id="2463292">]</span><span class="op" id="2463293">...</span><span class="op" id="2463296">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463301">name</span><span class="op" id="2463305">,</span>&nbsp;<span class="ident" id="2463307">w</span>&nbsp;<span class="op" id="2463309">:=</span>&nbsp;<span class="ident" id="2463312">getShellName</span><span class="op" id="2463324">(</span><span class="ident" id="2463325">s</span><span class="op" id="2463326">[</span><span class="ident" id="2463327">j</span><span class="op" id="2463328">+</span><span class="num" id="2463329">1</span><span class="op" id="2463330">:</span><span class="op" id="2463331">]</span><span class="op" id="2463332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463337">buf</span>&nbsp;<span class="op" id="2463341">=</span>&nbsp;<span class="builtinfunc" id="2463343">append</span><span class="op" id="2463349">(</span><span class="ident" id="2463350">buf</span><span class="op" id="2463353">,</span>&nbsp;<span class="ident" id="2463355">mapping</span><span class="op" id="2463362">(</span><span class="ident" id="2463363">name</span><span class="op" id="2463367">)</span><span class="op" id="2463368">...</span><span class="op" id="2463371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463376">j</span>&nbsp;<span class="op" id="2463378">+=</span>&nbsp;<span class="ident" id="2463381">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2463386">i</span>&nbsp;<span class="op" id="2463388">=</span>&nbsp;<span class="ident" id="2463390">j</span>&nbsp;<span class="op" id="2463392">+</span>&nbsp;<span class="num" id="2463394">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2463398">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2463401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463404">return</span>&nbsp;<span class="builtintype" id="2463411">string</span><span class="op" id="2463417">(</span><span class="ident" id="2463418">buf</span><span class="op" id="2463421">)</span>&nbsp;<span class="op" id="2463423">+</span>&nbsp;<span class="ident" id="2463425">s</span><span class="op" id="2463426">[</span><span class="ident" id="2463427">i</span><span class="op" id="2463428">:</span><span class="op" id="2463429">]</span><br>
<span class="lineno"></span><span class="op" id="2463431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2463434">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2463509">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2463575">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2463622">func</span>&nbsp;<span class="ident" id="2463627">ExpandEnv</span><span class="op" id="2463636">(</span><span class="ident" id="2463637">s</span>&nbsp;<span class="builtintype" id="2463639">string</span><span class="op" id="2463645">)</span>&nbsp;<span class="builtintype" id="2463647">string</span>&nbsp;<span class="op" id="2463654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463657">return</span>&nbsp;<span class="ident" id="2463664">Expand</span><span class="op" id="2463670">(</span><span class="ident" id="2463671">s</span><span class="op" id="2463672">,</span>&nbsp;<span class="ident" id="2463674">Getenv</span><span class="op" id="2463680">)</span><br>
<span class="lineno"></span><span class="op" id="2463682">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2463685">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2463757">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2463787">func</span>&nbsp;<span class="ident" id="2463792">isShellSpecialVar</span><span class="op" id="2463809">(</span><span class="ident" id="2463810">c</span>&nbsp;<span class="builtintype" id="2463812">uint8</span><span class="op" id="2463817">)</span>&nbsp;<span class="builtintype" id="2463819">bool</span>&nbsp;<span class="op" id="2463824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463827">switch</span>&nbsp;<span class="ident" id="2463834">c</span>&nbsp;<span class="op" id="2463836">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463839">case</span>&nbsp;<span class="string" id="2463844">&#39;*&#39;</span><span class="op" id="2463847">,</span>&nbsp;<span class="string" id="2463849">&#39;#&#39;</span><span class="op" id="2463852">,</span>&nbsp;<span class="string" id="2463854">&#39;$&#39;</span><span class="op" id="2463857">,</span>&nbsp;<span class="string" id="2463859">&#39;@&#39;</span><span class="op" id="2463862">,</span>&nbsp;<span class="string" id="2463864">&#39;!&#39;</span><span class="op" id="2463867">,</span>&nbsp;<span class="string" id="2463869">&#39;?&#39;</span><span class="op" id="2463872">,</span>&nbsp;<span class="string" id="2463874">&#39;0&#39;</span><span class="op" id="2463877">,</span>&nbsp;<span class="string" id="2463879">&#39;1&#39;</span><span class="op" id="2463882">,</span>&nbsp;<span class="string" id="2463884">&#39;2&#39;</span><span class="op" id="2463887">,</span>&nbsp;<span class="string" id="2463889">&#39;3&#39;</span><span class="op" id="2463892">,</span>&nbsp;<span class="string" id="2463894">&#39;4&#39;</span><span class="op" id="2463897">,</span>&nbsp;<span class="string" id="2463899">&#39;5&#39;</span><span class="op" id="2463902">,</span>&nbsp;<span class="string" id="2463904">&#39;6&#39;</span><span class="op" id="2463907">,</span>&nbsp;<span class="string" id="2463909">&#39;7&#39;</span><span class="op" id="2463912">,</span>&nbsp;<span class="string" id="2463914">&#39;8&#39;</span><span class="op" id="2463917">,</span>&nbsp;<span class="string" id="2463919">&#39;9&#39;</span><span class="op" id="2463922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463926">return</span>&nbsp;<span class="builtintype" id="2463933">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2463939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2463942">return</span>&nbsp;<span class="builtintype" id="2463949">false</span><br>
<span class="lineno"></span><span class="op" id="2463955">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2463958">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2464039">func</span>&nbsp;<span class="ident" id="2464044">isAlphaNum</span><span class="op" id="2464054">(</span><span class="ident" id="2464055">c</span>&nbsp;<span class="builtintype" id="2464057">uint8</span><span class="op" id="2464062">)</span>&nbsp;<span class="builtintype" id="2464064">bool</span>&nbsp;<span class="op" id="2464069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464072">return</span>&nbsp;<span class="ident" id="2464079">c</span>&nbsp;<span class="op" id="2464081">==</span>&nbsp;<span class="string" id="2464084">&#39;_&#39;</span>&nbsp;<span class="op" id="2464088">||</span>&nbsp;<span class="string" id="2464091">&#39;0&#39;</span>&nbsp;<span class="op" id="2464095">&lt;=</span>&nbsp;<span class="ident" id="2464098">c</span>&nbsp;<span class="op" id="2464100">&amp;&amp;</span>&nbsp;<span class="ident" id="2464103">c</span>&nbsp;<span class="op" id="2464105">&lt;=</span>&nbsp;<span class="string" id="2464108">&#39;9&#39;</span>&nbsp;<span class="op" id="2464112">||</span>&nbsp;<span class="string" id="2464115">&#39;a&#39;</span>&nbsp;<span class="op" id="2464119">&lt;=</span>&nbsp;<span class="ident" id="2464122">c</span>&nbsp;<span class="op" id="2464124">&amp;&amp;</span>&nbsp;<span class="ident" id="2464127">c</span>&nbsp;<span class="op" id="2464129">&lt;=</span>&nbsp;<span class="string" id="2464132">&#39;z&#39;</span>&nbsp;<span class="op" id="2464136">||</span>&nbsp;<span class="string" id="2464139">&#39;A&#39;</span>&nbsp;<span class="op" id="2464143">&lt;=</span>&nbsp;<span class="ident" id="2464146">c</span>&nbsp;<span class="op" id="2464148">&amp;&amp;</span>&nbsp;<span class="ident" id="2464151">c</span>&nbsp;<span class="op" id="2464153">&lt;=</span>&nbsp;<span class="string" id="2464156">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2464160">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2464163">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2464238">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2464316">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2464388">func</span>&nbsp;<span class="ident" id="2464393">getShellName</span><span class="op" id="2464405">(</span><span class="ident" id="2464406">s</span>&nbsp;<span class="builtintype" id="2464408">string</span><span class="op" id="2464414">)</span>&nbsp;<span class="op" id="2464416">(</span><span class="builtintype" id="2464417">string</span><span class="op" id="2464423">,</span>&nbsp;<span class="builtintype" id="2464425">int</span><span class="op" id="2464428">)</span>&nbsp;<span class="op" id="2464430">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464433">switch</span>&nbsp;<span class="op" id="2464440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464443">case</span>&nbsp;<span class="ident" id="2464448">s</span><span class="op" id="2464449">[</span><span class="num" id="2464450">0</span><span class="op" id="2464451">]</span>&nbsp;<span class="op" id="2464453">==</span>&nbsp;<span class="string" id="2464456">&#39;{&#39;</span><span class="op" id="2464459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464463">if</span>&nbsp;<span class="builtinfunc" id="2464466">len</span><span class="op" id="2464469">(</span><span class="ident" id="2464470">s</span><span class="op" id="2464471">)</span>&nbsp;<span class="op" id="2464473">&gt;</span>&nbsp;<span class="num" id="2464475">2</span>&nbsp;<span class="op" id="2464477">&amp;&amp;</span>&nbsp;<span class="ident" id="2464480">isShellSpecialVar</span><span class="op" id="2464497">(</span><span class="ident" id="2464498">s</span><span class="op" id="2464499">[</span><span class="num" id="2464500">1</span><span class="op" id="2464501">]</span><span class="op" id="2464502">)</span>&nbsp;<span class="op" id="2464504">&amp;&amp;</span>&nbsp;<span class="ident" id="2464507">s</span><span class="op" id="2464508">[</span><span class="num" id="2464509">2</span><span class="op" id="2464510">]</span>&nbsp;<span class="op" id="2464512">==</span>&nbsp;<span class="string" id="2464515">&#39;}&#39;</span>&nbsp;<span class="op" id="2464519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464524">return</span>&nbsp;<span class="ident" id="2464531">s</span><span class="op" id="2464532">[</span><span class="num" id="2464533">1</span><span class="op" id="2464534">:</span><span class="num" id="2464535">2</span><span class="op" id="2464536">]</span><span class="op" id="2464537">,</span>&nbsp;<span class="num" id="2464539">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2464543">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2464547">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464574">for</span>&nbsp;<span class="ident" id="2464578">i</span>&nbsp;<span class="op" id="2464580">:=</span>&nbsp;<span class="num" id="2464583">1</span><span class="op" id="2464584">;</span>&nbsp;<span class="ident" id="2464586">i</span>&nbsp;<span class="op" id="2464588">&lt;</span>&nbsp;<span class="builtinfunc" id="2464590">len</span><span class="op" id="2464593">(</span><span class="ident" id="2464594">s</span><span class="op" id="2464595">)</span><span class="op" id="2464596">;</span>&nbsp;<span class="ident" id="2464598">i</span><span class="op" id="2464599">++</span>&nbsp;<span class="op" id="2464602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464607">if</span>&nbsp;<span class="ident" id="2464610">s</span><span class="op" id="2464611">[</span><span class="ident" id="2464612">i</span><span class="op" id="2464613">]</span>&nbsp;<span class="op" id="2464615">==</span>&nbsp;<span class="string" id="2464618">&#39;}&#39;</span>&nbsp;<span class="op" id="2464622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464628">return</span>&nbsp;<span class="ident" id="2464635">s</span><span class="op" id="2464636">[</span><span class="num" id="2464637">1</span><span class="op" id="2464638">:</span><span class="ident" id="2464639">i</span><span class="op" id="2464640">]</span><span class="op" id="2464641">,</span>&nbsp;<span class="ident" id="2464643">i</span>&nbsp;<span class="op" id="2464645">+</span>&nbsp;<span class="num" id="2464647">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2464652">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2464656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464660">return</span>&nbsp;<span class="string" id="2464667">&#34;&#34;</span><span class="op" id="2464669">,</span>&nbsp;<span class="num" id="2464671">1</span>&nbsp;<span class="comment" id="2464673">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464709">case</span>&nbsp;<span class="ident" id="2464714">isShellSpecialVar</span><span class="op" id="2464731">(</span><span class="ident" id="2464732">s</span><span class="op" id="2464733">[</span><span class="num" id="2464734">0</span><span class="op" id="2464735">]</span><span class="op" id="2464736">)</span><span class="op" id="2464737">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464741">return</span>&nbsp;<span class="ident" id="2464748">s</span><span class="op" id="2464749">[</span><span class="num" id="2464750">0</span><span class="op" id="2464751">:</span><span class="num" id="2464752">1</span><span class="op" id="2464753">]</span><span class="op" id="2464754">,</span>&nbsp;<span class="num" id="2464756">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2464759">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2464762">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464786">var</span>&nbsp;<span class="ident" id="2464790">i</span>&nbsp;<span class="builtintype" id="2464792">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464797">for</span>&nbsp;<span class="ident" id="2464801">i</span>&nbsp;<span class="op" id="2464803">=</span>&nbsp;<span class="num" id="2464805">0</span><span class="op" id="2464806">;</span>&nbsp;<span class="ident" id="2464808">i</span>&nbsp;<span class="op" id="2464810">&lt;</span>&nbsp;<span class="builtinfunc" id="2464812">len</span><span class="op" id="2464815">(</span><span class="ident" id="2464816">s</span><span class="op" id="2464817">)</span>&nbsp;<span class="op" id="2464819">&amp;&amp;</span>&nbsp;<span class="ident" id="2464822">isAlphaNum</span><span class="op" id="2464832">(</span><span class="ident" id="2464833">s</span><span class="op" id="2464834">[</span><span class="ident" id="2464835">i</span><span class="op" id="2464836">]</span><span class="op" id="2464837">)</span><span class="op" id="2464838">;</span>&nbsp;<span class="ident" id="2464840">i</span><span class="op" id="2464841">++</span>&nbsp;<span class="op" id="2464844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2464847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2464850">return</span>&nbsp;<span class="ident" id="2464857">s</span><span class="op" id="2464858">[</span><span class="op" id="2464859">:</span><span class="ident" id="2464860">i</span><span class="op" id="2464861">]</span><span class="op" id="2464862">,</span>&nbsp;<span class="ident" id="2464864">i</span><br>
<span class="lineno">75</span><span class="op" id="2464866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2464869">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2464945">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2465022">func</span>&nbsp;<span class="ident" id="2465027">Getenv</span><span class="op" id="2465033">(</span><span class="ident" id="2465034">key</span>&nbsp;<span class="builtintype" id="2465038">string</span><span class="op" id="2465044">)</span>&nbsp;<span class="builtintype" id="2465046">string</span>&nbsp;<span class="op" id="2465053">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2465056">v</span><span class="op" id="2465057">,</span>&nbsp;<span class="ident" id="2465059">_</span>&nbsp;<span class="op" id="2465061">:=</span>&nbsp;<span class="ident" id="2465064">syscall</span><span class="op" id="2465071">.</span><span class="ident" id="2465072">Getenv</span><span class="op" id="2465078">(</span><span class="ident" id="2465079">key</span><span class="op" id="2465082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2465085">return</span>&nbsp;<span class="ident" id="2465092">v</span><br>
<span class="lineno"></span><span class="op" id="2465094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2465097">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2465168">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2465200">func</span>&nbsp;<span class="ident" id="2465205">Setenv</span><span class="op" id="2465211">(</span><span class="ident" id="2465212">key</span><span class="op" id="2465215">,</span>&nbsp;<span class="ident" id="2465217">value</span>&nbsp;<span class="builtintype" id="2465223">string</span><span class="op" id="2465229">)</span>&nbsp;<span class="builtintype" id="2465231">error</span>&nbsp;<span class="op" id="2465237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2465240">err</span>&nbsp;<span class="op" id="2465244">:=</span>&nbsp;<span class="ident" id="2465247">syscall</span><span class="op" id="2465254">.</span><span class="ident" id="2465255">Setenv</span><span class="op" id="2465261">(</span><span class="ident" id="2465262">key</span><span class="op" id="2465265">,</span>&nbsp;<span class="ident" id="2465267">value</span><span class="op" id="2465272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2465275">if</span>&nbsp;<span class="ident" id="2465278">err</span>&nbsp;<span class="op" id="2465282">!=</span>&nbsp;<span class="builtintype" id="2465285">nil</span>&nbsp;<span class="op" id="2465289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2465293">return</span>&nbsp;<span class="ident" id="2465300">NewSyscallError</span><span class="op" id="2465315">(</span><span class="string" id="2465316">&#34;setenv&#34;</span><span class="op" id="2465324">,</span>&nbsp;<span class="ident" id="2465326">err</span><span class="op" id="2465329">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2465332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2465335">return</span>&nbsp;<span class="builtintype" id="2465342">nil</span><br>
<span class="lineno"></span><span class="op" id="2465346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2465349">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2465399">func</span>&nbsp;<span class="ident" id="2465404">Unsetenv</span><span class="op" id="2465412">(</span><span class="ident" id="2465413">key</span>&nbsp;<span class="builtintype" id="2465417">string</span><span class="op" id="2465423">)</span>&nbsp;<span class="builtintype" id="2465425">error</span>&nbsp;<span class="op" id="2465431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2465434">return</span>&nbsp;<span class="ident" id="2465441">syscall</span><span class="op" id="2465448">.</span><span class="ident" id="2465449">Unsetenv</span><span class="op" id="2465457">(</span><span class="ident" id="2465458">key</span><span class="op" id="2465461">)</span><br>
<span class="lineno"></span><span class="op" id="2465463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2465466">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2465513">func</span>&nbsp;<span class="ident" id="2465518">Clearenv</span><span class="op" id="2465526">(</span><span class="op" id="2465527">)</span>&nbsp;<span class="op" id="2465529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2465532">syscall</span><span class="op" id="2465539">.</span><span class="ident" id="2465540">Clearenv</span><span class="op" id="2465548">(</span><span class="op" id="2465549">)</span><br>
<span class="lineno"></span><span class="op" id="2465551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2465554">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2465621">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2465649">func</span>&nbsp;<span class="ident" id="2465654">Environ</span><span class="op" id="2465661">(</span><span class="op" id="2465662">)</span>&nbsp;<span class="op" id="2465664">[</span><span class="op" id="2465665">]</span><span class="builtintype" id="2465666">string</span>&nbsp;<span class="op" id="2465673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2465676">return</span>&nbsp;<span class="ident" id="2465683">syscall</span><span class="op" id="2465690">.</span><span class="ident" id="2465691">Environ</span><span class="op" id="2465698">(</span><span class="op" id="2465699">)</span><br>
<span class="lineno"></span><span class="op" id="2465701">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
