<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2199537">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2199593">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2199647">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2199698">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2199733">package</span>&nbsp;<span class="ident" id="2199741">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2199745">import</span>&nbsp;<span class="string" id="2199752">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2199763">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2199842">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2199916">func</span>&nbsp;<span class="ident" id="2199921">Expand</span><span class="op" id="2199927">(</span><span class="ident" id="2199928">s</span>&nbsp;<span class="builtintype" id="2199930">string</span><span class="op" id="2199936">,</span>&nbsp;<span class="ident" id="2199938">mapping</span>&nbsp;<span class="keyword" id="2199946">func</span><span class="op" id="2199950">(</span><span class="builtintype" id="2199951">string</span><span class="op" id="2199957">)</span>&nbsp;<span class="builtintype" id="2199959">string</span><span class="op" id="2199965">)</span>&nbsp;<span class="builtintype" id="2199967">string</span>&nbsp;<span class="op" id="2199974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2199977">buf</span>&nbsp;<span class="op" id="2199981">:=</span>&nbsp;<span class="builtinfunc" id="2199984">make</span><span class="op" id="2199988">(</span><span class="op" id="2199989">[</span><span class="op" id="2199990">]</span><span class="builtintype" id="2199991">byte</span><span class="op" id="2199995">,</span>&nbsp;<span class="num" id="2199997">0</span><span class="op" id="2199998">,</span>&nbsp;<span class="num" id="2200000">2</span><span class="op" id="2200001">*</span><span class="builtinfunc" id="2200002">len</span><span class="op" id="2200005">(</span><span class="ident" id="2200006">s</span><span class="op" id="2200007">)</span><span class="op" id="2200008">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2200011">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2200071">i</span>&nbsp;<span class="op" id="2200073">:=</span>&nbsp;<span class="num" id="2200076">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200079">for</span>&nbsp;<span class="ident" id="2200083">j</span>&nbsp;<span class="op" id="2200085">:=</span>&nbsp;<span class="num" id="2200088">0</span><span class="op" id="2200089">;</span>&nbsp;<span class="ident" id="2200091">j</span>&nbsp;<span class="op" id="2200093">&lt;</span>&nbsp;<span class="builtinfunc" id="2200095">len</span><span class="op" id="2200098">(</span><span class="ident" id="2200099">s</span><span class="op" id="2200100">)</span><span class="op" id="2200101">;</span>&nbsp;<span class="ident" id="2200103">j</span><span class="op" id="2200104">++</span>&nbsp;<span class="op" id="2200107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200111">if</span>&nbsp;<span class="ident" id="2200114">s</span><span class="op" id="2200115">[</span><span class="ident" id="2200116">j</span><span class="op" id="2200117">]</span>&nbsp;<span class="op" id="2200119">==</span>&nbsp;<span class="string" id="2200122">&#39;$&#39;</span>&nbsp;<span class="op" id="2200126">&amp;&amp;</span>&nbsp;<span class="ident" id="2200129">j</span><span class="op" id="2200130">+</span><span class="num" id="2200131">1</span>&nbsp;<span class="op" id="2200133">&lt;</span>&nbsp;<span class="builtinfunc" id="2200135">len</span><span class="op" id="2200138">(</span><span class="ident" id="2200139">s</span><span class="op" id="2200140">)</span>&nbsp;<span class="op" id="2200142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2200147">buf</span>&nbsp;<span class="op" id="2200151">=</span>&nbsp;<span class="builtinfunc" id="2200153">append</span><span class="op" id="2200159">(</span><span class="ident" id="2200160">buf</span><span class="op" id="2200163">,</span>&nbsp;<span class="ident" id="2200165">s</span><span class="op" id="2200166">[</span><span class="ident" id="2200167">i</span><span class="op" id="2200168">:</span><span class="ident" id="2200169">j</span><span class="op" id="2200170">]</span><span class="op" id="2200171">...</span><span class="op" id="2200174">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2200179">name</span><span class="op" id="2200183">,</span>&nbsp;<span class="ident" id="2200185">w</span>&nbsp;<span class="op" id="2200187">:=</span>&nbsp;<span class="ident" id="2200190">getShellName</span><span class="op" id="2200202">(</span><span class="ident" id="2200203">s</span><span class="op" id="2200204">[</span><span class="ident" id="2200205">j</span><span class="op" id="2200206">+</span><span class="num" id="2200207">1</span><span class="op" id="2200208">:</span><span class="op" id="2200209">]</span><span class="op" id="2200210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2200215">buf</span>&nbsp;<span class="op" id="2200219">=</span>&nbsp;<span class="builtinfunc" id="2200221">append</span><span class="op" id="2200227">(</span><span class="ident" id="2200228">buf</span><span class="op" id="2200231">,</span>&nbsp;<span class="ident" id="2200233">mapping</span><span class="op" id="2200240">(</span><span class="ident" id="2200241">name</span><span class="op" id="2200245">)</span><span class="op" id="2200246">...</span><span class="op" id="2200249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2200254">j</span>&nbsp;<span class="op" id="2200256">+=</span>&nbsp;<span class="ident" id="2200259">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2200264">i</span>&nbsp;<span class="op" id="2200266">=</span>&nbsp;<span class="ident" id="2200268">j</span>&nbsp;<span class="op" id="2200270">+</span>&nbsp;<span class="num" id="2200272">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2200276">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2200279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200282">return</span>&nbsp;<span class="builtintype" id="2200289">string</span><span class="op" id="2200295">(</span><span class="ident" id="2200296">buf</span><span class="op" id="2200299">)</span>&nbsp;<span class="op" id="2200301">+</span>&nbsp;<span class="ident" id="2200303">s</span><span class="op" id="2200304">[</span><span class="ident" id="2200305">i</span><span class="op" id="2200306">:</span><span class="op" id="2200307">]</span><br>
<span class="lineno"></span><span class="op" id="2200309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2200312">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2200387">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2200453">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2200500">func</span>&nbsp;<span class="ident" id="2200505">ExpandEnv</span><span class="op" id="2200514">(</span><span class="ident" id="2200515">s</span>&nbsp;<span class="builtintype" id="2200517">string</span><span class="op" id="2200523">)</span>&nbsp;<span class="builtintype" id="2200525">string</span>&nbsp;<span class="op" id="2200532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200535">return</span>&nbsp;<span class="ident" id="2200542">Expand</span><span class="op" id="2200548">(</span><span class="ident" id="2200549">s</span><span class="op" id="2200550">,</span>&nbsp;<span class="ident" id="2200552">Getenv</span><span class="op" id="2200558">)</span><br>
<span class="lineno"></span><span class="op" id="2200560">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2200563">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2200635">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2200665">func</span>&nbsp;<span class="ident" id="2200670">isShellSpecialVar</span><span class="op" id="2200687">(</span><span class="ident" id="2200688">c</span>&nbsp;<span class="builtintype" id="2200690">uint8</span><span class="op" id="2200695">)</span>&nbsp;<span class="builtintype" id="2200697">bool</span>&nbsp;<span class="op" id="2200702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200705">switch</span>&nbsp;<span class="ident" id="2200712">c</span>&nbsp;<span class="op" id="2200714">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200717">case</span>&nbsp;<span class="string" id="2200722">&#39;*&#39;</span><span class="op" id="2200725">,</span>&nbsp;<span class="string" id="2200727">&#39;#&#39;</span><span class="op" id="2200730">,</span>&nbsp;<span class="string" id="2200732">&#39;$&#39;</span><span class="op" id="2200735">,</span>&nbsp;<span class="string" id="2200737">&#39;@&#39;</span><span class="op" id="2200740">,</span>&nbsp;<span class="string" id="2200742">&#39;!&#39;</span><span class="op" id="2200745">,</span>&nbsp;<span class="string" id="2200747">&#39;?&#39;</span><span class="op" id="2200750">,</span>&nbsp;<span class="string" id="2200752">&#39;0&#39;</span><span class="op" id="2200755">,</span>&nbsp;<span class="string" id="2200757">&#39;1&#39;</span><span class="op" id="2200760">,</span>&nbsp;<span class="string" id="2200762">&#39;2&#39;</span><span class="op" id="2200765">,</span>&nbsp;<span class="string" id="2200767">&#39;3&#39;</span><span class="op" id="2200770">,</span>&nbsp;<span class="string" id="2200772">&#39;4&#39;</span><span class="op" id="2200775">,</span>&nbsp;<span class="string" id="2200777">&#39;5&#39;</span><span class="op" id="2200780">,</span>&nbsp;<span class="string" id="2200782">&#39;6&#39;</span><span class="op" id="2200785">,</span>&nbsp;<span class="string" id="2200787">&#39;7&#39;</span><span class="op" id="2200790">,</span>&nbsp;<span class="string" id="2200792">&#39;8&#39;</span><span class="op" id="2200795">,</span>&nbsp;<span class="string" id="2200797">&#39;9&#39;</span><span class="op" id="2200800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200804">return</span>&nbsp;<span class="ident" id="2200811">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2200817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200820">return</span>&nbsp;<span class="ident" id="2200827">false</span><br>
<span class="lineno"></span><span class="op" id="2200833">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2200836">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2200917">func</span>&nbsp;<span class="ident" id="2200922">isAlphaNum</span><span class="op" id="2200932">(</span><span class="ident" id="2200933">c</span>&nbsp;<span class="builtintype" id="2200935">uint8</span><span class="op" id="2200940">)</span>&nbsp;<span class="builtintype" id="2200942">bool</span>&nbsp;<span class="op" id="2200947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2200950">return</span>&nbsp;<span class="ident" id="2200957">c</span>&nbsp;<span class="op" id="2200959">==</span>&nbsp;<span class="string" id="2200962">&#39;_&#39;</span>&nbsp;<span class="op" id="2200966">||</span>&nbsp;<span class="string" id="2200969">&#39;0&#39;</span>&nbsp;<span class="op" id="2200973">&lt;=</span>&nbsp;<span class="ident" id="2200976">c</span>&nbsp;<span class="op" id="2200978">&amp;&amp;</span>&nbsp;<span class="ident" id="2200981">c</span>&nbsp;<span class="op" id="2200983">&lt;=</span>&nbsp;<span class="string" id="2200986">&#39;9&#39;</span>&nbsp;<span class="op" id="2200990">||</span>&nbsp;<span class="string" id="2200993">&#39;a&#39;</span>&nbsp;<span class="op" id="2200997">&lt;=</span>&nbsp;<span class="ident" id="2201000">c</span>&nbsp;<span class="op" id="2201002">&amp;&amp;</span>&nbsp;<span class="ident" id="2201005">c</span>&nbsp;<span class="op" id="2201007">&lt;=</span>&nbsp;<span class="string" id="2201010">&#39;z&#39;</span>&nbsp;<span class="op" id="2201014">||</span>&nbsp;<span class="string" id="2201017">&#39;A&#39;</span>&nbsp;<span class="op" id="2201021">&lt;=</span>&nbsp;<span class="ident" id="2201024">c</span>&nbsp;<span class="op" id="2201026">&amp;&amp;</span>&nbsp;<span class="ident" id="2201029">c</span>&nbsp;<span class="op" id="2201031">&lt;=</span>&nbsp;<span class="string" id="2201034">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2201038">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2201041">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2201116">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2201194">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2201266">func</span>&nbsp;<span class="ident" id="2201271">getShellName</span><span class="op" id="2201283">(</span><span class="ident" id="2201284">s</span>&nbsp;<span class="builtintype" id="2201286">string</span><span class="op" id="2201292">)</span>&nbsp;<span class="op" id="2201294">(</span><span class="builtintype" id="2201295">string</span><span class="op" id="2201301">,</span>&nbsp;<span class="builtintype" id="2201303">int</span><span class="op" id="2201306">)</span>&nbsp;<span class="op" id="2201308">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201311">switch</span>&nbsp;<span class="op" id="2201318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201321">case</span>&nbsp;<span class="ident" id="2201326">s</span><span class="op" id="2201327">[</span><span class="num" id="2201328">0</span><span class="op" id="2201329">]</span>&nbsp;<span class="op" id="2201331">==</span>&nbsp;<span class="string" id="2201334">&#39;{&#39;</span><span class="op" id="2201337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201341">if</span>&nbsp;<span class="builtinfunc" id="2201344">len</span><span class="op" id="2201347">(</span><span class="ident" id="2201348">s</span><span class="op" id="2201349">)</span>&nbsp;<span class="op" id="2201351">&gt;</span>&nbsp;<span class="num" id="2201353">2</span>&nbsp;<span class="op" id="2201355">&amp;&amp;</span>&nbsp;<span class="ident" id="2201358">isShellSpecialVar</span><span class="op" id="2201375">(</span><span class="ident" id="2201376">s</span><span class="op" id="2201377">[</span><span class="num" id="2201378">1</span><span class="op" id="2201379">]</span><span class="op" id="2201380">)</span>&nbsp;<span class="op" id="2201382">&amp;&amp;</span>&nbsp;<span class="ident" id="2201385">s</span><span class="op" id="2201386">[</span><span class="num" id="2201387">2</span><span class="op" id="2201388">]</span>&nbsp;<span class="op" id="2201390">==</span>&nbsp;<span class="string" id="2201393">&#39;}&#39;</span>&nbsp;<span class="op" id="2201397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201402">return</span>&nbsp;<span class="ident" id="2201409">s</span><span class="op" id="2201410">[</span><span class="num" id="2201411">1</span><span class="op" id="2201412">:</span><span class="num" id="2201413">2</span><span class="op" id="2201414">]</span><span class="op" id="2201415">,</span>&nbsp;<span class="num" id="2201417">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2201421">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2201425">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201452">for</span>&nbsp;<span class="ident" id="2201456">i</span>&nbsp;<span class="op" id="2201458">:=</span>&nbsp;<span class="num" id="2201461">1</span><span class="op" id="2201462">;</span>&nbsp;<span class="ident" id="2201464">i</span>&nbsp;<span class="op" id="2201466">&lt;</span>&nbsp;<span class="builtinfunc" id="2201468">len</span><span class="op" id="2201471">(</span><span class="ident" id="2201472">s</span><span class="op" id="2201473">)</span><span class="op" id="2201474">;</span>&nbsp;<span class="ident" id="2201476">i</span><span class="op" id="2201477">++</span>&nbsp;<span class="op" id="2201480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201485">if</span>&nbsp;<span class="ident" id="2201488">s</span><span class="op" id="2201489">[</span><span class="ident" id="2201490">i</span><span class="op" id="2201491">]</span>&nbsp;<span class="op" id="2201493">==</span>&nbsp;<span class="string" id="2201496">&#39;}&#39;</span>&nbsp;<span class="op" id="2201500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201506">return</span>&nbsp;<span class="ident" id="2201513">s</span><span class="op" id="2201514">[</span><span class="num" id="2201515">1</span><span class="op" id="2201516">:</span><span class="ident" id="2201517">i</span><span class="op" id="2201518">]</span><span class="op" id="2201519">,</span>&nbsp;<span class="ident" id="2201521">i</span>&nbsp;<span class="op" id="2201523">+</span>&nbsp;<span class="num" id="2201525">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2201530">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2201534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201538">return</span>&nbsp;<span class="string" id="2201545">&#34;&#34;</span><span class="op" id="2201547">,</span>&nbsp;<span class="num" id="2201549">1</span>&nbsp;<span class="comment" id="2201551">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201587">case</span>&nbsp;<span class="ident" id="2201592">isShellSpecialVar</span><span class="op" id="2201609">(</span><span class="ident" id="2201610">s</span><span class="op" id="2201611">[</span><span class="num" id="2201612">0</span><span class="op" id="2201613">]</span><span class="op" id="2201614">)</span><span class="op" id="2201615">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201619">return</span>&nbsp;<span class="ident" id="2201626">s</span><span class="op" id="2201627">[</span><span class="num" id="2201628">0</span><span class="op" id="2201629">:</span><span class="num" id="2201630">1</span><span class="op" id="2201631">]</span><span class="op" id="2201632">,</span>&nbsp;<span class="num" id="2201634">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2201637">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2201640">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201664">var</span>&nbsp;<span class="ident" id="2201668">i</span>&nbsp;<span class="builtintype" id="2201670">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201675">for</span>&nbsp;<span class="ident" id="2201679">i</span>&nbsp;<span class="op" id="2201681">=</span>&nbsp;<span class="num" id="2201683">0</span><span class="op" id="2201684">;</span>&nbsp;<span class="ident" id="2201686">i</span>&nbsp;<span class="op" id="2201688">&lt;</span>&nbsp;<span class="builtinfunc" id="2201690">len</span><span class="op" id="2201693">(</span><span class="ident" id="2201694">s</span><span class="op" id="2201695">)</span>&nbsp;<span class="op" id="2201697">&amp;&amp;</span>&nbsp;<span class="ident" id="2201700">isAlphaNum</span><span class="op" id="2201710">(</span><span class="ident" id="2201711">s</span><span class="op" id="2201712">[</span><span class="ident" id="2201713">i</span><span class="op" id="2201714">]</span><span class="op" id="2201715">)</span><span class="op" id="2201716">;</span>&nbsp;<span class="ident" id="2201718">i</span><span class="op" id="2201719">++</span>&nbsp;<span class="op" id="2201722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2201725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201728">return</span>&nbsp;<span class="ident" id="2201735">s</span><span class="op" id="2201736">[</span><span class="op" id="2201737">:</span><span class="ident" id="2201738">i</span><span class="op" id="2201739">]</span><span class="op" id="2201740">,</span>&nbsp;<span class="ident" id="2201742">i</span><br>
<span class="lineno">75</span><span class="op" id="2201744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2201747">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2201823">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2201900">func</span>&nbsp;<span class="ident" id="2201905">Getenv</span><span class="op" id="2201911">(</span><span class="ident" id="2201912">key</span>&nbsp;<span class="builtintype" id="2201916">string</span><span class="op" id="2201922">)</span>&nbsp;<span class="builtintype" id="2201924">string</span>&nbsp;<span class="op" id="2201931">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2201934">v</span><span class="op" id="2201935">,</span>&nbsp;<span class="ident" id="2201937">_</span>&nbsp;<span class="op" id="2201939">:=</span>&nbsp;<span class="ident" id="2201942">syscall</span><span class="op" id="2201949">.</span><span class="ident" id="2201950">Getenv</span><span class="op" id="2201956">(</span><span class="ident" id="2201957">key</span><span class="op" id="2201960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2201963">return</span>&nbsp;<span class="ident" id="2201970">v</span><br>
<span class="lineno"></span><span class="op" id="2201972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2201975">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2202046">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2202078">func</span>&nbsp;<span class="ident" id="2202083">Setenv</span><span class="op" id="2202089">(</span><span class="ident" id="2202090">key</span><span class="op" id="2202093">,</span>&nbsp;<span class="ident" id="2202095">value</span>&nbsp;<span class="builtintype" id="2202101">string</span><span class="op" id="2202107">)</span>&nbsp;<span class="builtintype" id="2202109">error</span>&nbsp;<span class="op" id="2202115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2202118">err</span>&nbsp;<span class="op" id="2202122">:=</span>&nbsp;<span class="ident" id="2202125">syscall</span><span class="op" id="2202132">.</span><span class="ident" id="2202133">Setenv</span><span class="op" id="2202139">(</span><span class="ident" id="2202140">key</span><span class="op" id="2202143">,</span>&nbsp;<span class="ident" id="2202145">value</span><span class="op" id="2202150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2202153">if</span>&nbsp;<span class="ident" id="2202156">err</span>&nbsp;<span class="op" id="2202160">!=</span>&nbsp;<span class="ident" id="2202163">nil</span>&nbsp;<span class="op" id="2202167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2202171">return</span>&nbsp;<span class="ident" id="2202178">NewSyscallError</span><span class="op" id="2202193">(</span><span class="string" id="2202194">&#34;setenv&#34;</span><span class="op" id="2202202">,</span>&nbsp;<span class="ident" id="2202204">err</span><span class="op" id="2202207">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2202210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2202213">return</span>&nbsp;<span class="ident" id="2202220">nil</span><br>
<span class="lineno"></span><span class="op" id="2202224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2202227">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2202277">func</span>&nbsp;<span class="ident" id="2202282">Unsetenv</span><span class="op" id="2202290">(</span><span class="ident" id="2202291">key</span>&nbsp;<span class="builtintype" id="2202295">string</span><span class="op" id="2202301">)</span>&nbsp;<span class="builtintype" id="2202303">error</span>&nbsp;<span class="op" id="2202309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2202312">return</span>&nbsp;<span class="ident" id="2202319">syscall</span><span class="op" id="2202326">.</span><span class="ident" id="2202327">Unsetenv</span><span class="op" id="2202335">(</span><span class="ident" id="2202336">key</span><span class="op" id="2202339">)</span><br>
<span class="lineno"></span><span class="op" id="2202341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2202344">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2202391">func</span>&nbsp;<span class="ident" id="2202396">Clearenv</span><span class="op" id="2202404">(</span><span class="op" id="2202405">)</span>&nbsp;<span class="op" id="2202407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2202410">syscall</span><span class="op" id="2202417">.</span><span class="ident" id="2202418">Clearenv</span><span class="op" id="2202426">(</span><span class="op" id="2202427">)</span><br>
<span class="lineno"></span><span class="op" id="2202429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2202432">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2202499">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2202527">func</span>&nbsp;<span class="ident" id="2202532">Environ</span><span class="op" id="2202539">(</span><span class="op" id="2202540">)</span>&nbsp;<span class="op" id="2202542">[</span><span class="op" id="2202543">]</span><span class="builtintype" id="2202544">string</span>&nbsp;<span class="op" id="2202551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2202554">return</span>&nbsp;<span class="ident" id="2202561">syscall</span><span class="op" id="2202568">.</span><span class="ident" id="2202569">Environ</span><span class="op" id="2202576">(</span><span class="op" id="2202577">)</span><br>
<span class="lineno"></span><span class="op" id="2202579">}</span>
</div>
</body>
</html>
