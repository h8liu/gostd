<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7996437">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7996492">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7996546">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7996597">package</span>&nbsp;<span class="ident" id="7996605">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7996611">import</span>&nbsp;<span class="op" id="7996618">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7996621">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7996631">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7996634">var</span>&nbsp;<span class="ident" id="7996638">ParseRangeTests</span>&nbsp;<span class="op" id="7996654">=</span>&nbsp;<span class="op" id="7996656">[</span><span class="op" id="7996657">]</span><span class="keyword" id="7996658">struct</span>&nbsp;<span class="op" id="7996665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996668">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7996675">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996683">length</span>&nbsp;<span class="ident" id="7996690">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7996697">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7996704">[</span><span class="op" id="7996705">]</span><span class="ident" id="7996706">httpRange</span><br>
<span class="lineno">15</span><span class="op" id="7996716">}</span><span class="op" id="7996717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996720">{</span><span class="string" id="7996721">&#34;&#34;</span><span class="op" id="7996723">,</span>&nbsp;<span class="num" id="7996725">0</span><span class="op" id="7996726">,</span>&nbsp;<span class="ident" id="7996728">nil</span><span class="op" id="7996731">}</span><span class="op" id="7996732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996735">{</span><span class="string" id="7996736">&#34;&#34;</span><span class="op" id="7996738">,</span>&nbsp;<span class="num" id="7996740">1000</span><span class="op" id="7996744">,</span>&nbsp;<span class="ident" id="7996746">nil</span><span class="op" id="7996749">}</span><span class="op" id="7996750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996753">{</span><span class="string" id="7996754">&#34;foo&#34;</span><span class="op" id="7996759">,</span>&nbsp;<span class="num" id="7996761">0</span><span class="op" id="7996762">,</span>&nbsp;<span class="ident" id="7996764">nil</span><span class="op" id="7996767">}</span><span class="op" id="7996768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996771">{</span><span class="string" id="7996772">&#34;bytes=&#34;</span><span class="op" id="7996780">,</span>&nbsp;<span class="num" id="7996782">0</span><span class="op" id="7996783">,</span>&nbsp;<span class="ident" id="7996785">nil</span><span class="op" id="7996788">}</span><span class="op" id="7996789">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996792">{</span><span class="string" id="7996793">&#34;bytes=7&#34;</span><span class="op" id="7996802">,</span>&nbsp;<span class="num" id="7996804">10</span><span class="op" id="7996806">,</span>&nbsp;<span class="ident" id="7996808">nil</span><span class="op" id="7996811">}</span><span class="op" id="7996812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996815">{</span><span class="string" id="7996816">&#34;bytes=&nbsp;7&nbsp;&#34;</span><span class="op" id="7996827">,</span>&nbsp;<span class="num" id="7996829">10</span><span class="op" id="7996831">,</span>&nbsp;<span class="ident" id="7996833">nil</span><span class="op" id="7996836">}</span><span class="op" id="7996837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996840">{</span><span class="string" id="7996841">&#34;bytes=1-&#34;</span><span class="op" id="7996851">,</span>&nbsp;<span class="num" id="7996853">0</span><span class="op" id="7996854">,</span>&nbsp;<span class="ident" id="7996856">nil</span><span class="op" id="7996859">}</span><span class="op" id="7996860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996863">{</span><span class="string" id="7996864">&#34;bytes=5-4&#34;</span><span class="op" id="7996875">,</span>&nbsp;<span class="num" id="7996877">10</span><span class="op" id="7996879">,</span>&nbsp;<span class="ident" id="7996881">nil</span><span class="op" id="7996884">}</span><span class="op" id="7996885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996888">{</span><span class="string" id="7996889">&#34;bytes=0-2,5-4&#34;</span><span class="op" id="7996904">,</span>&nbsp;<span class="num" id="7996906">10</span><span class="op" id="7996908">,</span>&nbsp;<span class="ident" id="7996910">nil</span><span class="op" id="7996913">}</span><span class="op" id="7996914">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996917">{</span><span class="string" id="7996918">&#34;bytes=2-5,4-3&#34;</span><span class="op" id="7996933">,</span>&nbsp;<span class="num" id="7996935">10</span><span class="op" id="7996937">,</span>&nbsp;<span class="ident" id="7996939">nil</span><span class="op" id="7996942">}</span><span class="op" id="7996943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996946">{</span><span class="string" id="7996947">&#34;bytes=--5,4--3&#34;</span><span class="op" id="7996963">,</span>&nbsp;<span class="num" id="7996965">10</span><span class="op" id="7996967">,</span>&nbsp;<span class="ident" id="7996969">nil</span><span class="op" id="7996972">}</span><span class="op" id="7996973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7996976">{</span><span class="string" id="7996977">&#34;bytes=A-&#34;</span><span class="op" id="7996987">,</span>&nbsp;<span class="num" id="7996989">10</span><span class="op" id="7996991">,</span>&nbsp;<span class="ident" id="7996993">nil</span><span class="op" id="7996996">}</span><span class="op" id="7996997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997000">{</span><span class="string" id="7997001">&#34;bytes=A-&nbsp;&#34;</span><span class="op" id="7997012">,</span>&nbsp;<span class="num" id="7997014">10</span><span class="op" id="7997016">,</span>&nbsp;<span class="ident" id="7997018">nil</span><span class="op" id="7997021">}</span><span class="op" id="7997022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997025">{</span><span class="string" id="7997026">&#34;bytes=A-Z&#34;</span><span class="op" id="7997037">,</span>&nbsp;<span class="num" id="7997039">10</span><span class="op" id="7997041">,</span>&nbsp;<span class="ident" id="7997043">nil</span><span class="op" id="7997046">}</span><span class="op" id="7997047">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997050">{</span><span class="string" id="7997051">&#34;bytes=&nbsp;-Z&#34;</span><span class="op" id="7997062">,</span>&nbsp;<span class="num" id="7997064">10</span><span class="op" id="7997066">,</span>&nbsp;<span class="ident" id="7997068">nil</span><span class="op" id="7997071">}</span><span class="op" id="7997072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997075">{</span><span class="string" id="7997076">&#34;bytes=5-Z&#34;</span><span class="op" id="7997087">,</span>&nbsp;<span class="num" id="7997089">10</span><span class="op" id="7997091">,</span>&nbsp;<span class="ident" id="7997093">nil</span><span class="op" id="7997096">}</span><span class="op" id="7997097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997100">{</span><span class="string" id="7997101">&#34;bytes=Ran-dom,&nbsp;garbage&#34;</span><span class="op" id="7997125">,</span>&nbsp;<span class="num" id="7997127">10</span><span class="op" id="7997129">,</span>&nbsp;<span class="ident" id="7997131">nil</span><span class="op" id="7997134">}</span><span class="op" id="7997135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997138">{</span><span class="string" id="7997139">&#34;bytes=0x01-0x02&#34;</span><span class="op" id="7997156">,</span>&nbsp;<span class="num" id="7997158">10</span><span class="op" id="7997160">,</span>&nbsp;<span class="ident" id="7997162">nil</span><span class="op" id="7997165">}</span><span class="op" id="7997166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997169">{</span><span class="string" id="7997170">&#34;bytes=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7997187">,</span>&nbsp;<span class="num" id="7997189">10</span><span class="op" id="7997191">,</span>&nbsp;<span class="ident" id="7997193">nil</span><span class="op" id="7997196">}</span><span class="op" id="7997197">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997200">{</span><span class="string" id="7997201">&#34;bytes=&nbsp;,&nbsp;,&nbsp;,&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7997218">,</span>&nbsp;<span class="num" id="7997220">10</span><span class="op" id="7997222">,</span>&nbsp;<span class="ident" id="7997224">nil</span><span class="op" id="7997227">}</span><span class="op" id="7997228">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997232">{</span><span class="string" id="7997233">&#34;bytes=0-9&#34;</span><span class="op" id="7997244">,</span>&nbsp;<span class="num" id="7997246">10</span><span class="op" id="7997248">,</span>&nbsp;<span class="op" id="7997250">[</span><span class="op" id="7997251">]</span><span class="ident" id="7997252">httpRange</span><span class="op" id="7997261">{</span><span class="op" id="7997262">{</span><span class="num" id="7997263">0</span><span class="op" id="7997264">,</span>&nbsp;<span class="num" id="7997266">10</span><span class="op" id="7997268">}</span><span class="op" id="7997269">}</span><span class="op" id="7997270">}</span><span class="op" id="7997271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997274">{</span><span class="string" id="7997275">&#34;bytes=0-&#34;</span><span class="op" id="7997285">,</span>&nbsp;<span class="num" id="7997287">10</span><span class="op" id="7997289">,</span>&nbsp;<span class="op" id="7997291">[</span><span class="op" id="7997292">]</span><span class="ident" id="7997293">httpRange</span><span class="op" id="7997302">{</span><span class="op" id="7997303">{</span><span class="num" id="7997304">0</span><span class="op" id="7997305">,</span>&nbsp;<span class="num" id="7997307">10</span><span class="op" id="7997309">}</span><span class="op" id="7997310">}</span><span class="op" id="7997311">}</span><span class="op" id="7997312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997315">{</span><span class="string" id="7997316">&#34;bytes=5-&#34;</span><span class="op" id="7997326">,</span>&nbsp;<span class="num" id="7997328">10</span><span class="op" id="7997330">,</span>&nbsp;<span class="op" id="7997332">[</span><span class="op" id="7997333">]</span><span class="ident" id="7997334">httpRange</span><span class="op" id="7997343">{</span><span class="op" id="7997344">{</span><span class="num" id="7997345">5</span><span class="op" id="7997346">,</span>&nbsp;<span class="num" id="7997348">5</span><span class="op" id="7997349">}</span><span class="op" id="7997350">}</span><span class="op" id="7997351">}</span><span class="op" id="7997352">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997355">{</span><span class="string" id="7997356">&#34;bytes=0-20&#34;</span><span class="op" id="7997368">,</span>&nbsp;<span class="num" id="7997370">10</span><span class="op" id="7997372">,</span>&nbsp;<span class="op" id="7997374">[</span><span class="op" id="7997375">]</span><span class="ident" id="7997376">httpRange</span><span class="op" id="7997385">{</span><span class="op" id="7997386">{</span><span class="num" id="7997387">0</span><span class="op" id="7997388">,</span>&nbsp;<span class="num" id="7997390">10</span><span class="op" id="7997392">}</span><span class="op" id="7997393">}</span><span class="op" id="7997394">}</span><span class="op" id="7997395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997398">{</span><span class="string" id="7997399">&#34;bytes=15-,0-5&#34;</span><span class="op" id="7997414">,</span>&nbsp;<span class="num" id="7997416">10</span><span class="op" id="7997418">,</span>&nbsp;<span class="ident" id="7997420">nil</span><span class="op" id="7997423">}</span><span class="op" id="7997424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997427">{</span><span class="string" id="7997428">&#34;bytes=1-2,5-&#34;</span><span class="op" id="7997442">,</span>&nbsp;<span class="num" id="7997444">10</span><span class="op" id="7997446">,</span>&nbsp;<span class="op" id="7997448">[</span><span class="op" id="7997449">]</span><span class="ident" id="7997450">httpRange</span><span class="op" id="7997459">{</span><span class="op" id="7997460">{</span><span class="num" id="7997461">1</span><span class="op" id="7997462">,</span>&nbsp;<span class="num" id="7997464">2</span><span class="op" id="7997465">}</span><span class="op" id="7997466">,</span>&nbsp;<span class="op" id="7997468">{</span><span class="num" id="7997469">5</span><span class="op" id="7997470">,</span>&nbsp;<span class="num" id="7997472">5</span><span class="op" id="7997473">}</span><span class="op" id="7997474">}</span><span class="op" id="7997475">}</span><span class="op" id="7997476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997479">{</span><span class="string" id="7997480">&#34;bytes=-2&nbsp;,&nbsp;7-&#34;</span><span class="op" id="7997495">,</span>&nbsp;<span class="num" id="7997497">11</span><span class="op" id="7997499">,</span>&nbsp;<span class="op" id="7997501">[</span><span class="op" id="7997502">]</span><span class="ident" id="7997503">httpRange</span><span class="op" id="7997512">{</span><span class="op" id="7997513">{</span><span class="num" id="7997514">9</span><span class="op" id="7997515">,</span>&nbsp;<span class="num" id="7997517">2</span><span class="op" id="7997518">}</span><span class="op" id="7997519">,</span>&nbsp;<span class="op" id="7997521">{</span><span class="num" id="7997522">7</span><span class="op" id="7997523">,</span>&nbsp;<span class="num" id="7997525">4</span><span class="op" id="7997526">}</span><span class="op" id="7997527">}</span><span class="op" id="7997528">}</span><span class="op" id="7997529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997532">{</span><span class="string" id="7997533">&#34;bytes=0-0&nbsp;,2-2,&nbsp;7-&#34;</span><span class="op" id="7997553">,</span>&nbsp;<span class="num" id="7997555">11</span><span class="op" id="7997557">,</span>&nbsp;<span class="op" id="7997559">[</span><span class="op" id="7997560">]</span><span class="ident" id="7997561">httpRange</span><span class="op" id="7997570">{</span><span class="op" id="7997571">{</span><span class="num" id="7997572">0</span><span class="op" id="7997573">,</span>&nbsp;<span class="num" id="7997575">1</span><span class="op" id="7997576">}</span><span class="op" id="7997577">,</span>&nbsp;<span class="op" id="7997579">{</span><span class="num" id="7997580">2</span><span class="op" id="7997581">,</span>&nbsp;<span class="num" id="7997583">1</span><span class="op" id="7997584">}</span><span class="op" id="7997585">,</span>&nbsp;<span class="op" id="7997587">{</span><span class="num" id="7997588">7</span><span class="op" id="7997589">,</span>&nbsp;<span class="num" id="7997591">4</span><span class="op" id="7997592">}</span><span class="op" id="7997593">}</span><span class="op" id="7997594">}</span><span class="op" id="7997595">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997598">{</span><span class="string" id="7997599">&#34;bytes=-5&#34;</span><span class="op" id="7997609">,</span>&nbsp;<span class="num" id="7997611">10</span><span class="op" id="7997613">,</span>&nbsp;<span class="op" id="7997615">[</span><span class="op" id="7997616">]</span><span class="ident" id="7997617">httpRange</span><span class="op" id="7997626">{</span><span class="op" id="7997627">{</span><span class="num" id="7997628">5</span><span class="op" id="7997629">,</span>&nbsp;<span class="num" id="7997631">5</span><span class="op" id="7997632">}</span><span class="op" id="7997633">}</span><span class="op" id="7997634">}</span><span class="op" id="7997635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997638">{</span><span class="string" id="7997639">&#34;bytes=-15&#34;</span><span class="op" id="7997650">,</span>&nbsp;<span class="num" id="7997652">10</span><span class="op" id="7997654">,</span>&nbsp;<span class="op" id="7997656">[</span><span class="op" id="7997657">]</span><span class="ident" id="7997658">httpRange</span><span class="op" id="7997667">{</span><span class="op" id="7997668">{</span><span class="num" id="7997669">0</span><span class="op" id="7997670">,</span>&nbsp;<span class="num" id="7997672">10</span><span class="op" id="7997674">}</span><span class="op" id="7997675">}</span><span class="op" id="7997676">}</span><span class="op" id="7997677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997680">{</span><span class="string" id="7997681">&#34;bytes=0-499&#34;</span><span class="op" id="7997694">,</span>&nbsp;<span class="num" id="7997696">10000</span><span class="op" id="7997701">,</span>&nbsp;<span class="op" id="7997703">[</span><span class="op" id="7997704">]</span><span class="ident" id="7997705">httpRange</span><span class="op" id="7997714">{</span><span class="op" id="7997715">{</span><span class="num" id="7997716">0</span><span class="op" id="7997717">,</span>&nbsp;<span class="num" id="7997719">500</span><span class="op" id="7997722">}</span><span class="op" id="7997723">}</span><span class="op" id="7997724">}</span><span class="op" id="7997725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997728">{</span><span class="string" id="7997729">&#34;bytes=500-999&#34;</span><span class="op" id="7997744">,</span>&nbsp;<span class="num" id="7997746">10000</span><span class="op" id="7997751">,</span>&nbsp;<span class="op" id="7997753">[</span><span class="op" id="7997754">]</span><span class="ident" id="7997755">httpRange</span><span class="op" id="7997764">{</span><span class="op" id="7997765">{</span><span class="num" id="7997766">500</span><span class="op" id="7997769">,</span>&nbsp;<span class="num" id="7997771">500</span><span class="op" id="7997774">}</span><span class="op" id="7997775">}</span><span class="op" id="7997776">}</span><span class="op" id="7997777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997780">{</span><span class="string" id="7997781">&#34;bytes=-500&#34;</span><span class="op" id="7997793">,</span>&nbsp;<span class="num" id="7997795">10000</span><span class="op" id="7997800">,</span>&nbsp;<span class="op" id="7997802">[</span><span class="op" id="7997803">]</span><span class="ident" id="7997804">httpRange</span><span class="op" id="7997813">{</span><span class="op" id="7997814">{</span><span class="num" id="7997815">9500</span><span class="op" id="7997819">,</span>&nbsp;<span class="num" id="7997821">500</span><span class="op" id="7997824">}</span><span class="op" id="7997825">}</span><span class="op" id="7997826">}</span><span class="op" id="7997827">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997830">{</span><span class="string" id="7997831">&#34;bytes=9500-&#34;</span><span class="op" id="7997844">,</span>&nbsp;<span class="num" id="7997846">10000</span><span class="op" id="7997851">,</span>&nbsp;<span class="op" id="7997853">[</span><span class="op" id="7997854">]</span><span class="ident" id="7997855">httpRange</span><span class="op" id="7997864">{</span><span class="op" id="7997865">{</span><span class="num" id="7997866">9500</span><span class="op" id="7997870">,</span>&nbsp;<span class="num" id="7997872">500</span><span class="op" id="7997875">}</span><span class="op" id="7997876">}</span><span class="op" id="7997877">}</span><span class="op" id="7997878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997881">{</span><span class="string" id="7997882">&#34;bytes=0-0,-1&#34;</span><span class="op" id="7997896">,</span>&nbsp;<span class="num" id="7997898">10000</span><span class="op" id="7997903">,</span>&nbsp;<span class="op" id="7997905">[</span><span class="op" id="7997906">]</span><span class="ident" id="7997907">httpRange</span><span class="op" id="7997916">{</span><span class="op" id="7997917">{</span><span class="num" id="7997918">0</span><span class="op" id="7997919">,</span>&nbsp;<span class="num" id="7997921">1</span><span class="op" id="7997922">}</span><span class="op" id="7997923">,</span>&nbsp;<span class="op" id="7997925">{</span><span class="num" id="7997926">9999</span><span class="op" id="7997930">,</span>&nbsp;<span class="num" id="7997932">1</span><span class="op" id="7997933">}</span><span class="op" id="7997934">}</span><span class="op" id="7997935">}</span><span class="op" id="7997936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7997939">{</span><span class="string" id="7997940">&#34;bytes=500-600,601-999&#34;</span><span class="op" id="7997963">,</span>&nbsp;<span class="num" id="7997965">10000</span><span class="op" id="7997970">,</span>&nbsp;<span class="op" id="7997972">[</span><span class="op" id="7997973">]</span><span class="ident" id="7997974">httpRange</span><span class="op" id="7997983">{</span><span class="op" id="7997984">{</span><span class="num" id="7997985">500</span><span class="op" id="7997988">,</span>&nbsp;<span class="num" id="7997990">101</span><span class="op" id="7997993">}</span><span class="op" id="7997994">,</span>&nbsp;<span class="op" id="7997996">{</span><span class="num" id="7997997">601</span><span class="op" id="7998000">,</span>&nbsp;<span class="num" id="7998002">399</span><span class="op" id="7998005">}</span><span class="op" id="7998006">}</span><span class="op" id="7998007">}</span><span class="op" id="7998008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998011">{</span><span class="string" id="7998012">&#34;bytes=500-700,601-999&#34;</span><span class="op" id="7998035">,</span>&nbsp;<span class="num" id="7998037">10000</span><span class="op" id="7998042">,</span>&nbsp;<span class="op" id="7998044">[</span><span class="op" id="7998045">]</span><span class="ident" id="7998046">httpRange</span><span class="op" id="7998055">{</span><span class="op" id="7998056">{</span><span class="num" id="7998057">500</span><span class="op" id="7998060">,</span>&nbsp;<span class="num" id="7998062">201</span><span class="op" id="7998065">}</span><span class="op" id="7998066">,</span>&nbsp;<span class="op" id="7998068">{</span><span class="num" id="7998069">601</span><span class="op" id="7998072">,</span>&nbsp;<span class="num" id="7998074">399</span><span class="op" id="7998077">}</span><span class="op" id="7998078">}</span><span class="op" id="7998079">}</span><span class="op" id="7998080">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7998084">//&nbsp;Match&nbsp;Apache&nbsp;laxity:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998109">{</span><span class="string" id="7998110">&#34;bytes=&nbsp;&nbsp;&nbsp;1&nbsp;-2&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;4-&nbsp;5,&nbsp;7&nbsp;-&nbsp;8&nbsp;,&nbsp;,,&#34;</span><span class="op" id="7998147">,</span>&nbsp;<span class="num" id="7998149">11</span><span class="op" id="7998151">,</span>&nbsp;<span class="op" id="7998153">[</span><span class="op" id="7998154">]</span><span class="ident" id="7998155">httpRange</span><span class="op" id="7998164">{</span><span class="op" id="7998165">{</span><span class="num" id="7998166">1</span><span class="op" id="7998167">,</span>&nbsp;<span class="num" id="7998169">2</span><span class="op" id="7998170">}</span><span class="op" id="7998171">,</span>&nbsp;<span class="op" id="7998173">{</span><span class="num" id="7998174">4</span><span class="op" id="7998175">,</span>&nbsp;<span class="num" id="7998177">2</span><span class="op" id="7998178">}</span><span class="op" id="7998179">,</span>&nbsp;<span class="op" id="7998181">{</span><span class="num" id="7998182">7</span><span class="op" id="7998183">,</span>&nbsp;<span class="num" id="7998185">2</span><span class="op" id="7998186">}</span><span class="op" id="7998187">}</span><span class="op" id="7998188">}</span><span class="op" id="7998189">,</span><br>
<span class="lineno"></span><span class="op" id="7998191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7998194">func</span>&nbsp;<span class="ident" id="7998199">TestParseRange</span><span class="op" id="7998213">(</span><span class="ident" id="7998214">t</span>&nbsp;<span class="op" id="7998216">*</span><span class="ident" id="7998217">testing</span><span class="op" id="7998224">.</span><span class="ident" id="7998225">T</span><span class="op" id="7998226">)</span>&nbsp;<span class="op" id="7998228">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998231">for</span>&nbsp;<span class="ident" id="7998235">_</span><span class="op" id="7998236">,</span>&nbsp;<span class="ident" id="7998238">test</span>&nbsp;<span class="op" id="7998243">:=</span>&nbsp;<span class="keyword" id="7998246">range</span>&nbsp;<span class="ident" id="7998252">ParseRangeTests</span>&nbsp;<span class="op" id="7998268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998272">r</span>&nbsp;<span class="op" id="7998274">:=</span>&nbsp;<span class="ident" id="7998277">test</span><span class="op" id="7998281">.</span><span class="ident" id="7998282">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998286">ranges</span><span class="op" id="7998292">,</span>&nbsp;<span class="ident" id="7998294">err</span>&nbsp;<span class="op" id="7998298">:=</span>&nbsp;<span class="ident" id="7998301">parseRange</span><span class="op" id="7998311">(</span><span class="ident" id="7998312">test</span><span class="op" id="7998316">.</span><span class="ident" id="7998317">s</span><span class="op" id="7998318">,</span>&nbsp;<span class="ident" id="7998320">test</span><span class="op" id="7998324">.</span><span class="ident" id="7998325">length</span><span class="op" id="7998331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998335">if</span>&nbsp;<span class="ident" id="7998338">err</span>&nbsp;<span class="op" id="7998342">!=</span>&nbsp;<span class="ident" id="7998345">nil</span>&nbsp;<span class="op" id="7998349">&amp;&amp;</span>&nbsp;<span class="ident" id="7998352">r</span>&nbsp;<span class="op" id="7998354">!=</span>&nbsp;<span class="ident" id="7998357">nil</span>&nbsp;<span class="op" id="7998361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998366">t</span><span class="op" id="7998367">.</span><span class="ident" id="7998368">Errorf</span><span class="op" id="7998374">(</span><span class="string" id="7998375">&#34;parseRange(%q)&nbsp;returned&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7998409">,</span>&nbsp;<span class="ident" id="7998411">test</span><span class="op" id="7998415">.</span><span class="ident" id="7998416">s</span><span class="op" id="7998417">,</span>&nbsp;<span class="ident" id="7998419">err</span><span class="op" id="7998422">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998430">if</span>&nbsp;<span class="builtinfunc" id="7998433">len</span><span class="op" id="7998436">(</span><span class="ident" id="7998437">ranges</span><span class="op" id="7998443">)</span>&nbsp;<span class="op" id="7998445">!=</span>&nbsp;<span class="builtinfunc" id="7998448">len</span><span class="op" id="7998451">(</span><span class="ident" id="7998452">r</span><span class="op" id="7998453">)</span>&nbsp;<span class="op" id="7998455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998460">t</span><span class="op" id="7998461">.</span><span class="ident" id="7998462">Errorf</span><span class="op" id="7998468">(</span><span class="string" id="7998469">&#34;len(parseRange(%q))&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7998504">,</span>&nbsp;<span class="ident" id="7998506">test</span><span class="op" id="7998510">.</span><span class="ident" id="7998511">s</span><span class="op" id="7998512">,</span>&nbsp;<span class="builtinfunc" id="7998514">len</span><span class="op" id="7998517">(</span><span class="ident" id="7998518">ranges</span><span class="op" id="7998524">)</span><span class="op" id="7998525">,</span>&nbsp;<span class="builtinfunc" id="7998527">len</span><span class="op" id="7998530">(</span><span class="ident" id="7998531">r</span><span class="op" id="7998532">)</span><span class="op" id="7998533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998538">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998549">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998553">for</span>&nbsp;<span class="ident" id="7998557">i</span>&nbsp;<span class="op" id="7998559">:=</span>&nbsp;<span class="keyword" id="7998562">range</span>&nbsp;<span class="ident" id="7998568">r</span>&nbsp;<span class="op" id="7998570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998575">if</span>&nbsp;<span class="ident" id="7998578">ranges</span><span class="op" id="7998584">[</span><span class="ident" id="7998585">i</span><span class="op" id="7998586">]</span><span class="op" id="7998587">.</span><span class="ident" id="7998588">start</span>&nbsp;<span class="op" id="7998594">!=</span>&nbsp;<span class="ident" id="7998597">r</span><span class="op" id="7998598">[</span><span class="ident" id="7998599">i</span><span class="op" id="7998600">]</span><span class="op" id="7998601">.</span><span class="ident" id="7998602">start</span>&nbsp;<span class="op" id="7998608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998614">t</span><span class="op" id="7998615">.</span><span class="ident" id="7998616">Errorf</span><span class="op" id="7998622">(</span><span class="string" id="7998623">&#34;parseRange(%q)[%d].start&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7998663">,</span>&nbsp;<span class="ident" id="7998665">test</span><span class="op" id="7998669">.</span><span class="ident" id="7998670">s</span><span class="op" id="7998671">,</span>&nbsp;<span class="ident" id="7998673">i</span><span class="op" id="7998674">,</span>&nbsp;<span class="ident" id="7998676">ranges</span><span class="op" id="7998682">[</span><span class="ident" id="7998683">i</span><span class="op" id="7998684">]</span><span class="op" id="7998685">.</span><span class="ident" id="7998686">start</span><span class="op" id="7998691">,</span>&nbsp;<span class="ident" id="7998693">r</span><span class="op" id="7998694">[</span><span class="ident" id="7998695">i</span><span class="op" id="7998696">]</span><span class="op" id="7998697">.</span><span class="ident" id="7998698">start</span><span class="op" id="7998703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7998713">if</span>&nbsp;<span class="ident" id="7998716">ranges</span><span class="op" id="7998722">[</span><span class="ident" id="7998723">i</span><span class="op" id="7998724">]</span><span class="op" id="7998725">.</span><span class="ident" id="7998726">length</span>&nbsp;<span class="op" id="7998733">!=</span>&nbsp;<span class="ident" id="7998736">r</span><span class="op" id="7998737">[</span><span class="ident" id="7998738">i</span><span class="op" id="7998739">]</span><span class="op" id="7998740">.</span><span class="ident" id="7998741">length</span>&nbsp;<span class="op" id="7998748">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7998754">t</span><span class="op" id="7998755">.</span><span class="ident" id="7998756">Errorf</span><span class="op" id="7998762">(</span><span class="string" id="7998763">&#34;parseRange(%q)[%d].length&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7998804">,</span>&nbsp;<span class="ident" id="7998806">test</span><span class="op" id="7998810">.</span><span class="ident" id="7998811">s</span><span class="op" id="7998812">,</span>&nbsp;<span class="ident" id="7998814">i</span><span class="op" id="7998815">,</span>&nbsp;<span class="ident" id="7998817">ranges</span><span class="op" id="7998823">[</span><span class="ident" id="7998824">i</span><span class="op" id="7998825">]</span><span class="op" id="7998826">.</span><span class="ident" id="7998827">length</span><span class="op" id="7998833">,</span>&nbsp;<span class="ident" id="7998835">r</span><span class="op" id="7998836">[</span><span class="ident" id="7998837">i</span><span class="op" id="7998838">]</span><span class="op" id="7998839">.</span><span class="ident" id="7998840">length</span><span class="op" id="7998846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7998858">}</span><br>
<span class="lineno"></span><span class="op" id="7998860">}</span>
</div>
</body>
</html>
