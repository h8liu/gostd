<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8195104">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8195159">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8195213">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8195264">package</span>&nbsp;<span class="ident" id="8195272">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8195277">import</span>&nbsp;<span class="op" id="8195284">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195287">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195293">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195306">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195312">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195323">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8195333">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8195336">var</span>&nbsp;<span class="ident" id="8195340">filenames</span>&nbsp;<span class="op" id="8195350">=</span>&nbsp;<span class="op" id="8195352">[</span><span class="op" id="8195353">]</span><span class="builtintype" id="8195354">string</span><span class="op" id="8195360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195363">&#34;../testdata/e.txt&#34;</span><span class="op" id="8195382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8195385">&#34;../testdata/pi.txt&#34;</span><span class="op" id="8195405">,</span><br>
<span class="lineno"></span><span class="op" id="8195407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8195410">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="8195488">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="8195555">func</span>&nbsp;<span class="ident" id="8195560">testFile</span><span class="op" id="8195568">(</span><span class="ident" id="8195569">t</span>&nbsp;<span class="op" id="8195571">*</span><span class="ident" id="8195572">testing</span><span class="op" id="8195579">.</span><span class="ident" id="8195580">T</span><span class="op" id="8195581">,</span>&nbsp;<span class="ident" id="8195583">fn</span>&nbsp;<span class="builtintype" id="8195586">string</span><span class="op" id="8195592">,</span>&nbsp;<span class="ident" id="8195594">order</span>&nbsp;<span class="ident" id="8195600">Order</span><span class="op" id="8195605">,</span>&nbsp;<span class="ident" id="8195607">litWidth</span>&nbsp;<span class="builtintype" id="8195616">int</span><span class="op" id="8195619">)</span>&nbsp;<span class="op" id="8195621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8195624">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195661">golden</span><span class="op" id="8195667">,</span>&nbsp;<span class="ident" id="8195669">err</span>&nbsp;<span class="op" id="8195673">:=</span>&nbsp;<span class="ident" id="8195676">os</span><span class="op" id="8195678">.</span><span class="ident" id="8195679">Open</span><span class="op" id="8195683">(</span><span class="ident" id="8195684">fn</span><span class="op" id="8195686">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195689">if</span>&nbsp;<span class="ident" id="8195692">err</span>&nbsp;<span class="op" id="8195696">!=</span>&nbsp;<span class="ident" id="8195699">nil</span>&nbsp;<span class="op" id="8195703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195707">t</span><span class="op" id="8195708">.</span><span class="ident" id="8195709">Errorf</span><span class="op" id="8195715">(</span><span class="string" id="8195716">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8195747">,</span>&nbsp;<span class="ident" id="8195749">fn</span><span class="op" id="8195751">,</span>&nbsp;<span class="ident" id="8195753">order</span><span class="op" id="8195758">,</span>&nbsp;<span class="ident" id="8195760">litWidth</span><span class="op" id="8195768">,</span>&nbsp;<span class="ident" id="8195770">err</span><span class="op" id="8195773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195777">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195788">defer</span>&nbsp;<span class="ident" id="8195794">golden</span><span class="op" id="8195800">.</span><span class="ident" id="8195801">Close</span><span class="op" id="8195806">(</span><span class="op" id="8195807">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8195811">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195931">raw</span><span class="op" id="8195934">,</span>&nbsp;<span class="ident" id="8195936">err</span>&nbsp;<span class="op" id="8195940">:=</span>&nbsp;<span class="ident" id="8195943">os</span><span class="op" id="8195945">.</span><span class="ident" id="8195946">Open</span><span class="op" id="8195950">(</span><span class="ident" id="8195951">fn</span><span class="op" id="8195953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195956">if</span>&nbsp;<span class="ident" id="8195959">err</span>&nbsp;<span class="op" id="8195963">!=</span>&nbsp;<span class="ident" id="8195966">nil</span>&nbsp;<span class="op" id="8195970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195974">t</span><span class="op" id="8195975">.</span><span class="ident" id="8195976">Errorf</span><span class="op" id="8195982">(</span><span class="string" id="8195983">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8196014">,</span>&nbsp;<span class="ident" id="8196016">fn</span><span class="op" id="8196018">,</span>&nbsp;<span class="ident" id="8196020">order</span><span class="op" id="8196025">,</span>&nbsp;<span class="ident" id="8196027">litWidth</span><span class="op" id="8196035">,</span>&nbsp;<span class="ident" id="8196037">err</span><span class="op" id="8196040">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196044">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196056">piper</span><span class="op" id="8196061">,</span>&nbsp;<span class="ident" id="8196063">pipew</span>&nbsp;<span class="op" id="8196069">:=</span>&nbsp;<span class="ident" id="8196072">io</span><span class="op" id="8196074">.</span><span class="ident" id="8196075">Pipe</span><span class="op" id="8196079">(</span><span class="op" id="8196080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196083">defer</span>&nbsp;<span class="ident" id="8196089">piper</span><span class="op" id="8196094">.</span><span class="ident" id="8196095">Close</span><span class="op" id="8196100">(</span><span class="op" id="8196101">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196104">go</span>&nbsp;<span class="keyword" id="8196107">func</span><span class="op" id="8196111">(</span><span class="op" id="8196112">)</span>&nbsp;<span class="op" id="8196114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196118">defer</span>&nbsp;<span class="ident" id="8196124">raw</span><span class="op" id="8196127">.</span><span class="ident" id="8196128">Close</span><span class="op" id="8196133">(</span><span class="op" id="8196134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196138">defer</span>&nbsp;<span class="ident" id="8196144">pipew</span><span class="op" id="8196149">.</span><span class="ident" id="8196150">Close</span><span class="op" id="8196155">(</span><span class="op" id="8196156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196160">lzww</span>&nbsp;<span class="op" id="8196165">:=</span>&nbsp;<span class="ident" id="8196168">NewWriter</span><span class="op" id="8196177">(</span><span class="ident" id="8196178">pipew</span><span class="op" id="8196183">,</span>&nbsp;<span class="ident" id="8196185">order</span><span class="op" id="8196190">,</span>&nbsp;<span class="ident" id="8196192">litWidth</span><span class="op" id="8196200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196204">defer</span>&nbsp;<span class="ident" id="8196210">lzww</span><span class="op" id="8196214">.</span><span class="ident" id="8196215">Close</span><span class="op" id="8196220">(</span><span class="op" id="8196221">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196225">var</span>&nbsp;<span class="ident" id="8196229">b</span>&nbsp;<span class="op" id="8196231">[</span><span class="num" id="8196232">4096</span><span class="op" id="8196236">]</span><span class="builtintype" id="8196237">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196244">for</span>&nbsp;<span class="op" id="8196248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196253">n</span><span class="op" id="8196254">,</span>&nbsp;<span class="ident" id="8196256">err0</span>&nbsp;<span class="op" id="8196261">:=</span>&nbsp;<span class="ident" id="8196264">raw</span><span class="op" id="8196267">.</span><span class="ident" id="8196268">Read</span><span class="op" id="8196272">(</span><span class="ident" id="8196273">b</span><span class="op" id="8196274">[</span><span class="op" id="8196275">:</span><span class="op" id="8196276">]</span><span class="op" id="8196277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196282">if</span>&nbsp;<span class="ident" id="8196285">err0</span>&nbsp;<span class="op" id="8196290">!=</span>&nbsp;<span class="ident" id="8196293">nil</span>&nbsp;<span class="op" id="8196297">&amp;&amp;</span>&nbsp;<span class="ident" id="8196300">err0</span>&nbsp;<span class="op" id="8196305">!=</span>&nbsp;<span class="ident" id="8196308">io</span><span class="op" id="8196310">.</span><span class="ident" id="8196311">EOF</span>&nbsp;<span class="op" id="8196315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196321">t</span><span class="op" id="8196322">.</span><span class="ident" id="8196323">Errorf</span><span class="op" id="8196329">(</span><span class="string" id="8196330">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8196361">,</span>&nbsp;<span class="ident" id="8196363">fn</span><span class="op" id="8196365">,</span>&nbsp;<span class="ident" id="8196367">order</span><span class="op" id="8196372">,</span>&nbsp;<span class="ident" id="8196374">litWidth</span><span class="op" id="8196382">,</span>&nbsp;<span class="ident" id="8196384">err0</span><span class="op" id="8196388">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196394">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196409">_</span><span class="op" id="8196410">,</span>&nbsp;<span class="ident" id="8196412">err1</span>&nbsp;<span class="op" id="8196417">:=</span>&nbsp;<span class="ident" id="8196420">lzww</span><span class="op" id="8196424">.</span><span class="ident" id="8196425">Write</span><span class="op" id="8196430">(</span><span class="ident" id="8196431">b</span><span class="op" id="8196432">[</span><span class="op" id="8196433">:</span><span class="ident" id="8196434">n</span><span class="op" id="8196435">]</span><span class="op" id="8196436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196441">if</span>&nbsp;<span class="ident" id="8196444">err1</span>&nbsp;<span class="op" id="8196449">!=</span>&nbsp;<span class="ident" id="8196452">nil</span>&nbsp;<span class="op" id="8196456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196462">t</span><span class="op" id="8196463">.</span><span class="ident" id="8196464">Errorf</span><span class="op" id="8196470">(</span><span class="string" id="8196471">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8196502">,</span>&nbsp;<span class="ident" id="8196504">fn</span><span class="op" id="8196506">,</span>&nbsp;<span class="ident" id="8196508">order</span><span class="op" id="8196513">,</span>&nbsp;<span class="ident" id="8196515">litWidth</span><span class="op" id="8196523">,</span>&nbsp;<span class="ident" id="8196525">err1</span><span class="op" id="8196529">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196535">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196550">if</span>&nbsp;<span class="ident" id="8196553">err0</span>&nbsp;<span class="op" id="8196558">==</span>&nbsp;<span class="ident" id="8196561">io</span><span class="op" id="8196563">.</span><span class="ident" id="8196564">EOF</span>&nbsp;<span class="op" id="8196568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196574">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196583">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196590">}</span><span class="op" id="8196591">(</span><span class="op" id="8196592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196595">lzwr</span>&nbsp;<span class="op" id="8196600">:=</span>&nbsp;<span class="ident" id="8196603">NewReader</span><span class="op" id="8196612">(</span><span class="ident" id="8196613">piper</span><span class="op" id="8196618">,</span>&nbsp;<span class="ident" id="8196620">order</span><span class="op" id="8196625">,</span>&nbsp;<span class="ident" id="8196627">litWidth</span><span class="op" id="8196635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196638">defer</span>&nbsp;<span class="ident" id="8196644">lzwr</span><span class="op" id="8196648">.</span><span class="ident" id="8196649">Close</span><span class="op" id="8196654">(</span><span class="op" id="8196655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8196659">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196680">b0</span><span class="op" id="8196682">,</span>&nbsp;<span class="ident" id="8196684">err0</span>&nbsp;<span class="op" id="8196689">:=</span>&nbsp;<span class="ident" id="8196692">ioutil</span><span class="op" id="8196698">.</span><span class="ident" id="8196699">ReadAll</span><span class="op" id="8196706">(</span><span class="ident" id="8196707">golden</span><span class="op" id="8196713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196716">b1</span><span class="op" id="8196718">,</span>&nbsp;<span class="ident" id="8196720">err1</span>&nbsp;<span class="op" id="8196725">:=</span>&nbsp;<span class="ident" id="8196728">ioutil</span><span class="op" id="8196734">.</span><span class="ident" id="8196735">ReadAll</span><span class="op" id="8196742">(</span><span class="ident" id="8196743">lzwr</span><span class="op" id="8196747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196750">if</span>&nbsp;<span class="ident" id="8196753">err0</span>&nbsp;<span class="op" id="8196758">!=</span>&nbsp;<span class="ident" id="8196761">nil</span>&nbsp;<span class="op" id="8196765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196769">t</span><span class="op" id="8196770">.</span><span class="ident" id="8196771">Errorf</span><span class="op" id="8196777">(</span><span class="string" id="8196778">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8196809">,</span>&nbsp;<span class="ident" id="8196811">fn</span><span class="op" id="8196813">,</span>&nbsp;<span class="ident" id="8196815">order</span><span class="op" id="8196820">,</span>&nbsp;<span class="ident" id="8196822">litWidth</span><span class="op" id="8196830">,</span>&nbsp;<span class="ident" id="8196832">err0</span><span class="op" id="8196836">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196840">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196851">if</span>&nbsp;<span class="ident" id="8196854">err1</span>&nbsp;<span class="op" id="8196859">!=</span>&nbsp;<span class="ident" id="8196862">nil</span>&nbsp;<span class="op" id="8196866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196870">t</span><span class="op" id="8196871">.</span><span class="ident" id="8196872">Errorf</span><span class="op" id="8196878">(</span><span class="string" id="8196879">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8196910">,</span>&nbsp;<span class="ident" id="8196912">fn</span><span class="op" id="8196914">,</span>&nbsp;<span class="ident" id="8196916">order</span><span class="op" id="8196921">,</span>&nbsp;<span class="ident" id="8196923">litWidth</span><span class="op" id="8196931">,</span>&nbsp;<span class="ident" id="8196933">err1</span><span class="op" id="8196937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196941">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8196949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8196952">if</span>&nbsp;<span class="builtinfunc" id="8196955">len</span><span class="op" id="8196958">(</span><span class="ident" id="8196959">b1</span><span class="op" id="8196961">)</span>&nbsp;<span class="op" id="8196963">!=</span>&nbsp;<span class="builtinfunc" id="8196966">len</span><span class="op" id="8196969">(</span><span class="ident" id="8196970">b0</span><span class="op" id="8196972">)</span>&nbsp;<span class="op" id="8196974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8196978">t</span><span class="op" id="8196979">.</span><span class="ident" id="8196980">Errorf</span><span class="op" id="8196986">(</span><span class="string" id="8196987">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="8197040">,</span>&nbsp;<span class="ident" id="8197042">fn</span><span class="op" id="8197044">,</span>&nbsp;<span class="ident" id="8197046">order</span><span class="op" id="8197051">,</span>&nbsp;<span class="ident" id="8197053">litWidth</span><span class="op" id="8197061">,</span>&nbsp;<span class="builtinfunc" id="8197063">len</span><span class="op" id="8197066">(</span><span class="ident" id="8197067">b1</span><span class="op" id="8197069">)</span><span class="op" id="8197070">,</span>&nbsp;<span class="builtinfunc" id="8197072">len</span><span class="op" id="8197075">(</span><span class="ident" id="8197076">b0</span><span class="op" id="8197078">)</span><span class="op" id="8197079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197083">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197091">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197094">for</span>&nbsp;<span class="ident" id="8197098">i</span>&nbsp;<span class="op" id="8197100">:=</span>&nbsp;<span class="num" id="8197103">0</span><span class="op" id="8197104">;</span>&nbsp;<span class="ident" id="8197106">i</span>&nbsp;<span class="op" id="8197108">&lt;</span>&nbsp;<span class="builtinfunc" id="8197110">len</span><span class="op" id="8197113">(</span><span class="ident" id="8197114">b0</span><span class="op" id="8197116">)</span><span class="op" id="8197117">;</span>&nbsp;<span class="ident" id="8197119">i</span><span class="op" id="8197120">++</span>&nbsp;<span class="op" id="8197123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197127">if</span>&nbsp;<span class="ident" id="8197130">b1</span><span class="op" id="8197132">[</span><span class="ident" id="8197133">i</span><span class="op" id="8197134">]</span>&nbsp;<span class="op" id="8197136">!=</span>&nbsp;<span class="ident" id="8197139">b0</span><span class="op" id="8197141">[</span><span class="ident" id="8197142">i</span><span class="op" id="8197143">]</span>&nbsp;<span class="op" id="8197145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197150">t</span><span class="op" id="8197151">.</span><span class="ident" id="8197152">Errorf</span><span class="op" id="8197158">(</span><span class="string" id="8197159">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="8197222">,</span>&nbsp;<span class="ident" id="8197224">fn</span><span class="op" id="8197226">,</span>&nbsp;<span class="ident" id="8197228">order</span><span class="op" id="8197233">,</span>&nbsp;<span class="ident" id="8197235">litWidth</span><span class="op" id="8197243">,</span>&nbsp;<span class="ident" id="8197245">i</span><span class="op" id="8197246">,</span>&nbsp;<span class="ident" id="8197248">b1</span><span class="op" id="8197250">[</span><span class="ident" id="8197251">i</span><span class="op" id="8197252">]</span><span class="op" id="8197253">,</span>&nbsp;<span class="ident" id="8197255">b0</span><span class="op" id="8197257">[</span><span class="ident" id="8197258">i</span><span class="op" id="8197259">]</span><span class="op" id="8197260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197265">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197274">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197277">}</span><br>
<span class="lineno"></span><span class="op" id="8197279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8197282">func</span>&nbsp;<span class="ident" id="8197287">TestWriter</span><span class="op" id="8197297">(</span><span class="ident" id="8197298">t</span>&nbsp;<span class="op" id="8197300">*</span><span class="ident" id="8197301">testing</span><span class="op" id="8197308">.</span><span class="ident" id="8197309">T</span><span class="op" id="8197310">)</span>&nbsp;<span class="op" id="8197312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197315">for</span>&nbsp;<span class="ident" id="8197319">_</span><span class="op" id="8197320">,</span>&nbsp;<span class="ident" id="8197322">filename</span>&nbsp;<span class="op" id="8197331">:=</span>&nbsp;<span class="keyword" id="8197334">range</span>&nbsp;<span class="ident" id="8197340">filenames</span>&nbsp;<span class="op" id="8197350">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197354">for</span>&nbsp;<span class="ident" id="8197358">_</span><span class="op" id="8197359">,</span>&nbsp;<span class="ident" id="8197361">order</span>&nbsp;<span class="op" id="8197367">:=</span>&nbsp;<span class="keyword" id="8197370">range</span>&nbsp;<span class="op" id="8197376">[</span><span class="op" id="8197377">...</span><span class="op" id="8197380">]</span><span class="ident" id="8197381">Order</span><span class="op" id="8197386">{</span><span class="ident" id="8197387">LSB</span><span class="op" id="8197390">,</span>&nbsp;<span class="ident" id="8197392">MSB</span><span class="op" id="8197395">}</span>&nbsp;<span class="op" id="8197397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8197402">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197482">for</span>&nbsp;<span class="ident" id="8197486">_</span><span class="op" id="8197487">,</span>&nbsp;<span class="ident" id="8197489">litWidth</span>&nbsp;<span class="op" id="8197498">:=</span>&nbsp;<span class="keyword" id="8197501">range</span>&nbsp;<span class="op" id="8197507">[</span><span class="op" id="8197508">...</span><span class="op" id="8197511">]</span><span class="builtintype" id="8197512">int</span><span class="op" id="8197515">{</span><span class="num" id="8197516">6</span><span class="op" id="8197517">,</span>&nbsp;<span class="num" id="8197519">7</span><span class="op" id="8197520">,</span>&nbsp;<span class="num" id="8197522">8</span><span class="op" id="8197523">}</span>&nbsp;<span class="op" id="8197525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197531">testFile</span><span class="op" id="8197539">(</span><span class="ident" id="8197540">t</span><span class="op" id="8197541">,</span>&nbsp;<span class="ident" id="8197543">filename</span><span class="op" id="8197551">,</span>&nbsp;<span class="ident" id="8197553">order</span><span class="op" id="8197558">,</span>&nbsp;<span class="ident" id="8197560">litWidth</span><span class="op" id="8197568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197573">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197580">}</span><br>
<span class="lineno"></span><span class="op" id="8197582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8197585">func</span>&nbsp;<span class="ident" id="8197590">TestWriterReturnValues</span><span class="op" id="8197612">(</span><span class="ident" id="8197613">t</span>&nbsp;<span class="op" id="8197615">*</span><span class="ident" id="8197616">testing</span><span class="op" id="8197623">.</span><span class="ident" id="8197624">T</span><span class="op" id="8197625">)</span>&nbsp;<span class="op" id="8197627">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197630">w</span>&nbsp;<span class="op" id="8197632">:=</span>&nbsp;<span class="ident" id="8197635">NewWriter</span><span class="op" id="8197644">(</span><span class="ident" id="8197645">ioutil</span><span class="op" id="8197651">.</span><span class="ident" id="8197652">Discard</span><span class="op" id="8197659">,</span>&nbsp;<span class="ident" id="8197661">LSB</span><span class="op" id="8197664">,</span>&nbsp;<span class="num" id="8197666">8</span><span class="op" id="8197667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197670">n</span><span class="op" id="8197671">,</span>&nbsp;<span class="ident" id="8197673">err</span>&nbsp;<span class="op" id="8197677">:=</span>&nbsp;<span class="ident" id="8197680">w</span><span class="op" id="8197681">.</span><span class="ident" id="8197682">Write</span><span class="op" id="8197687">(</span><span class="op" id="8197688">[</span><span class="op" id="8197689">]</span><span class="builtintype" id="8197690">byte</span><span class="op" id="8197694">(</span><span class="string" id="8197695">&#34;asdf&#34;</span><span class="op" id="8197701">)</span><span class="op" id="8197702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197705">if</span>&nbsp;<span class="ident" id="8197708">n</span>&nbsp;<span class="op" id="8197710">!=</span>&nbsp;<span class="num" id="8197713">4</span>&nbsp;<span class="op" id="8197715">||</span>&nbsp;<span class="ident" id="8197718">err</span>&nbsp;<span class="op" id="8197722">!=</span>&nbsp;<span class="ident" id="8197725">nil</span>&nbsp;<span class="op" id="8197729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197733">t</span><span class="op" id="8197734">.</span><span class="ident" id="8197735">Errorf</span><span class="op" id="8197741">(</span><span class="string" id="8197742">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="8197767">,</span>&nbsp;<span class="ident" id="8197769">n</span><span class="op" id="8197770">,</span>&nbsp;<span class="ident" id="8197772">err</span><span class="op" id="8197775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197778">}</span><br>
<span class="lineno">105</span><span class="op" id="8197780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8197783">func</span>&nbsp;<span class="ident" id="8197788">benchmarkEncoder</span><span class="op" id="8197804">(</span><span class="ident" id="8197805">b</span>&nbsp;<span class="op" id="8197807">*</span><span class="ident" id="8197808">testing</span><span class="op" id="8197815">.</span><span class="ident" id="8197816">B</span><span class="op" id="8197817">,</span>&nbsp;<span class="ident" id="8197819">n</span>&nbsp;<span class="builtintype" id="8197821">int</span><span class="op" id="8197824">)</span>&nbsp;<span class="op" id="8197826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197829">b</span><span class="op" id="8197830">.</span><span class="ident" id="8197831">StopTimer</span><span class="op" id="8197840">(</span><span class="op" id="8197841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197844">b</span><span class="op" id="8197845">.</span><span class="ident" id="8197846">SetBytes</span><span class="op" id="8197854">(</span><span class="ident" id="8197855">int64</span><span class="op" id="8197860">(</span><span class="ident" id="8197861">n</span><span class="op" id="8197862">)</span><span class="op" id="8197863">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197866">buf0</span><span class="op" id="8197870">,</span>&nbsp;<span class="ident" id="8197872">err</span>&nbsp;<span class="op" id="8197876">:=</span>&nbsp;<span class="ident" id="8197879">ioutil</span><span class="op" id="8197885">.</span><span class="ident" id="8197886">ReadFile</span><span class="op" id="8197894">(</span><span class="string" id="8197895">&#34;../testdata/e.txt&#34;</span><span class="op" id="8197914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197917">if</span>&nbsp;<span class="ident" id="8197920">err</span>&nbsp;<span class="op" id="8197924">!=</span>&nbsp;<span class="ident" id="8197927">nil</span>&nbsp;<span class="op" id="8197931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197935">b</span><span class="op" id="8197936">.</span><span class="ident" id="8197937">Fatal</span><span class="op" id="8197942">(</span><span class="ident" id="8197943">err</span><span class="op" id="8197946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8197949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8197952">if</span>&nbsp;<span class="builtinfunc" id="8197955">len</span><span class="op" id="8197958">(</span><span class="ident" id="8197959">buf0</span><span class="op" id="8197963">)</span>&nbsp;<span class="op" id="8197965">==</span>&nbsp;<span class="num" id="8197968">0</span>&nbsp;<span class="op" id="8197970">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8197974">b</span><span class="op" id="8197975">.</span><span class="ident" id="8197976">Fatalf</span><span class="op" id="8197982">(</span><span class="string" id="8197983">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="8198006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198012">buf1</span>&nbsp;<span class="op" id="8198017">:=</span>&nbsp;<span class="builtinfunc" id="8198020">make</span><span class="op" id="8198024">(</span><span class="op" id="8198025">[</span><span class="op" id="8198026">]</span><span class="builtintype" id="8198027">byte</span><span class="op" id="8198031">,</span>&nbsp;<span class="ident" id="8198033">n</span><span class="op" id="8198034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8198037">for</span>&nbsp;<span class="ident" id="8198041">i</span>&nbsp;<span class="op" id="8198043">:=</span>&nbsp;<span class="num" id="8198046">0</span><span class="op" id="8198047">;</span>&nbsp;<span class="ident" id="8198049">i</span>&nbsp;<span class="op" id="8198051">&lt;</span>&nbsp;<span class="ident" id="8198053">n</span><span class="op" id="8198054">;</span>&nbsp;<span class="ident" id="8198056">i</span>&nbsp;<span class="op" id="8198058">+=</span>&nbsp;<span class="builtinfunc" id="8198061">len</span><span class="op" id="8198064">(</span><span class="ident" id="8198065">buf0</span><span class="op" id="8198069">)</span>&nbsp;<span class="op" id="8198071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8198075">if</span>&nbsp;<span class="builtinfunc" id="8198078">len</span><span class="op" id="8198081">(</span><span class="ident" id="8198082">buf0</span><span class="op" id="8198086">)</span>&nbsp;<span class="op" id="8198088">&gt;</span>&nbsp;<span class="ident" id="8198090">n</span><span class="op" id="8198091">-</span><span class="ident" id="8198092">i</span>&nbsp;<span class="op" id="8198094">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198099">buf0</span>&nbsp;<span class="op" id="8198104">=</span>&nbsp;<span class="ident" id="8198106">buf0</span><span class="op" id="8198110">[</span><span class="op" id="8198111">:</span><span class="ident" id="8198112">n</span><span class="op" id="8198113">-</span><span class="ident" id="8198114">i</span><span class="op" id="8198115">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8198123">copy</span><span class="op" id="8198127">(</span><span class="ident" id="8198128">buf1</span><span class="op" id="8198132">[</span><span class="ident" id="8198133">i</span><span class="op" id="8198134">:</span><span class="op" id="8198135">]</span><span class="op" id="8198136">,</span>&nbsp;<span class="ident" id="8198138">buf0</span><span class="op" id="8198142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198148">buf0</span>&nbsp;<span class="op" id="8198153">=</span>&nbsp;<span class="ident" id="8198155">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198160">runtime</span><span class="op" id="8198167">.</span><span class="ident" id="8198168">GC</span><span class="op" id="8198170">(</span><span class="op" id="8198171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198174">b</span><span class="op" id="8198175">.</span><span class="ident" id="8198176">StartTimer</span><span class="op" id="8198186">(</span><span class="op" id="8198187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8198190">for</span>&nbsp;<span class="ident" id="8198194">i</span>&nbsp;<span class="op" id="8198196">:=</span>&nbsp;<span class="num" id="8198199">0</span><span class="op" id="8198200">;</span>&nbsp;<span class="ident" id="8198202">i</span>&nbsp;<span class="op" id="8198204">&lt;</span>&nbsp;<span class="ident" id="8198206">b</span><span class="op" id="8198207">.</span><span class="ident" id="8198208">N</span><span class="op" id="8198209">;</span>&nbsp;<span class="ident" id="8198211">i</span><span class="op" id="8198212">++</span>&nbsp;<span class="op" id="8198215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198219">w</span>&nbsp;<span class="op" id="8198221">:=</span>&nbsp;<span class="ident" id="8198224">NewWriter</span><span class="op" id="8198233">(</span><span class="ident" id="8198234">ioutil</span><span class="op" id="8198240">.</span><span class="ident" id="8198241">Discard</span><span class="op" id="8198248">,</span>&nbsp;<span class="ident" id="8198250">LSB</span><span class="op" id="8198253">,</span>&nbsp;<span class="num" id="8198255">8</span><span class="op" id="8198256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198260">w</span><span class="op" id="8198261">.</span><span class="ident" id="8198262">Write</span><span class="op" id="8198267">(</span><span class="ident" id="8198268">buf1</span><span class="op" id="8198272">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198276">w</span><span class="op" id="8198277">.</span><span class="ident" id="8198278">Close</span><span class="op" id="8198283">(</span><span class="op" id="8198284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8198287">}</span><br>
<span class="lineno"></span><span class="op" id="8198289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198292">func</span>&nbsp;<span class="ident" id="8198297">BenchmarkEncoder1e4</span><span class="op" id="8198316">(</span><span class="ident" id="8198317">b</span>&nbsp;<span class="op" id="8198319">*</span><span class="ident" id="8198320">testing</span><span class="op" id="8198327">.</span><span class="ident" id="8198328">B</span><span class="op" id="8198329">)</span>&nbsp;<span class="op" id="8198331">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198334">benchmarkEncoder</span><span class="op" id="8198350">(</span><span class="ident" id="8198351">b</span><span class="op" id="8198352">,</span>&nbsp;<span class="num" id="8198354">1e4</span><span class="op" id="8198357">)</span><br>
<span class="lineno"></span><span class="op" id="8198359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198362">func</span>&nbsp;<span class="ident" id="8198367">BenchmarkEncoder1e5</span><span class="op" id="8198386">(</span><span class="ident" id="8198387">b</span>&nbsp;<span class="op" id="8198389">*</span><span class="ident" id="8198390">testing</span><span class="op" id="8198397">.</span><span class="ident" id="8198398">B</span><span class="op" id="8198399">)</span>&nbsp;<span class="op" id="8198401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198404">benchmarkEncoder</span><span class="op" id="8198420">(</span><span class="ident" id="8198421">b</span><span class="op" id="8198422">,</span>&nbsp;<span class="num" id="8198424">1e5</span><span class="op" id="8198427">)</span><br>
<span class="lineno">140</span><span class="op" id="8198429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8198432">func</span>&nbsp;<span class="ident" id="8198437">BenchmarkEncoder1e6</span><span class="op" id="8198456">(</span><span class="ident" id="8198457">b</span>&nbsp;<span class="op" id="8198459">*</span><span class="ident" id="8198460">testing</span><span class="op" id="8198467">.</span><span class="ident" id="8198468">B</span><span class="op" id="8198469">)</span>&nbsp;<span class="op" id="8198471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8198474">benchmarkEncoder</span><span class="op" id="8198490">(</span><span class="ident" id="8198491">b</span><span class="op" id="8198492">,</span>&nbsp;<span class="num" id="8198494">1e6</span><span class="op" id="8198497">)</span><br>
<span class="lineno"></span><span class="op" id="8198499">}</span>
</div>
</body>
</html>
