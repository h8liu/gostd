<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6695734">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6695789">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6695843">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6695894">package</span>&nbsp;<span class="ident" id="6695902">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6695910">import</span>&nbsp;<span class="op" id="6695917">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6695920">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6695929">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6695946">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6695967">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6695978">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6695988">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6695991">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="6696036">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="6696063">func</span>&nbsp;<span class="ident" id="6696068">RemoveAll</span><span class="op" id="6696077">(</span><span class="op" id="6696078">)</span>&nbsp;<span class="op" id="6696080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696083">mutex</span><span class="op" id="6696088">.</span><span class="ident" id="6696089">Lock</span><span class="op" id="6696093">(</span><span class="op" id="6696094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696097">defer</span>&nbsp;<span class="ident" id="6696103">mutex</span><span class="op" id="6696108">.</span><span class="ident" id="6696109">Unlock</span><span class="op" id="6696115">(</span><span class="op" id="6696116">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696119">vars</span>&nbsp;<span class="op" id="6696124">=</span>&nbsp;<span class="builtinfunc" id="6696126">make</span><span class="op" id="6696130">(</span><span class="keyword" id="6696131">map</span><span class="op" id="6696134">[</span><span class="builtintype" id="6696135">string</span><span class="op" id="6696141">]</span><span class="ident" id="6696142">Var</span><span class="op" id="6696145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696148">varKeys</span>&nbsp;<span class="op" id="6696156">=</span>&nbsp;<span class="ident" id="6696158">nil</span><br>
<span class="lineno"></span><span class="op" id="6696162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6696165">func</span>&nbsp;<span class="ident" id="6696170">TestInt</span><span class="op" id="6696177">(</span><span class="ident" id="6696178">t</span>&nbsp;<span class="op" id="6696180">*</span><span class="ident" id="6696181">testing</span><span class="op" id="6696188">.</span><span class="ident" id="6696189">T</span><span class="op" id="6696190">)</span>&nbsp;<span class="op" id="6696192">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696195">RemoveAll</span><span class="op" id="6696204">(</span><span class="op" id="6696205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696208">reqs</span>&nbsp;<span class="op" id="6696213">:=</span>&nbsp;<span class="ident" id="6696216">NewInt</span><span class="op" id="6696222">(</span><span class="string" id="6696223">&#34;requests&#34;</span><span class="op" id="6696233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696236">if</span>&nbsp;<span class="ident" id="6696239">reqs</span><span class="op" id="6696243">.</span><span class="ident" id="6696244">i</span>&nbsp;<span class="op" id="6696246">!=</span>&nbsp;<span class="num" id="6696249">0</span>&nbsp;<span class="op" id="6696251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696255">t</span><span class="op" id="6696256">.</span><span class="ident" id="6696257">Errorf</span><span class="op" id="6696263">(</span><span class="string" id="6696264">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6696285">,</span>&nbsp;<span class="ident" id="6696287">reqs</span><span class="op" id="6696291">.</span><span class="ident" id="6696292">i</span><span class="op" id="6696293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696296">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696299">if</span>&nbsp;<span class="ident" id="6696302">reqs</span>&nbsp;<span class="op" id="6696307">!=</span>&nbsp;<span class="ident" id="6696310">Get</span><span class="op" id="6696313">(</span><span class="string" id="6696314">&#34;requests&#34;</span><span class="op" id="6696324">)</span><span class="op" id="6696325">.</span><span class="op" id="6696326">(</span><span class="op" id="6696327">*</span><span class="ident" id="6696328">Int</span><span class="op" id="6696331">)</span>&nbsp;<span class="op" id="6696333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696337">t</span><span class="op" id="6696338">.</span><span class="ident" id="6696339">Errorf</span><span class="op" id="6696345">(</span><span class="string" id="6696346">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6696361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696368">reqs</span><span class="op" id="6696372">.</span><span class="ident" id="6696373">Add</span><span class="op" id="6696376">(</span><span class="num" id="6696377">1</span><span class="op" id="6696378">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696381">reqs</span><span class="op" id="6696385">.</span><span class="ident" id="6696386">Add</span><span class="op" id="6696389">(</span><span class="num" id="6696390">3</span><span class="op" id="6696391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696394">if</span>&nbsp;<span class="ident" id="6696397">reqs</span><span class="op" id="6696401">.</span><span class="ident" id="6696402">i</span>&nbsp;<span class="op" id="6696404">!=</span>&nbsp;<span class="num" id="6696407">4</span>&nbsp;<span class="op" id="6696409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696413">t</span><span class="op" id="6696414">.</span><span class="ident" id="6696415">Errorf</span><span class="op" id="6696421">(</span><span class="string" id="6696422">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6696443">,</span>&nbsp;<span class="ident" id="6696445">reqs</span><span class="op" id="6696449">.</span><span class="ident" id="6696450">i</span><span class="op" id="6696451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696458">if</span>&nbsp;<span class="ident" id="6696461">s</span>&nbsp;<span class="op" id="6696463">:=</span>&nbsp;<span class="ident" id="6696466">reqs</span><span class="op" id="6696470">.</span><span class="ident" id="6696471">String</span><span class="op" id="6696477">(</span><span class="op" id="6696478">)</span><span class="op" id="6696479">;</span>&nbsp;<span class="ident" id="6696481">s</span>&nbsp;<span class="op" id="6696483">!=</span>&nbsp;<span class="string" id="6696486">&#34;4&#34;</span>&nbsp;<span class="op" id="6696490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696494">t</span><span class="op" id="6696495">.</span><span class="ident" id="6696496">Errorf</span><span class="op" id="6696502">(</span><span class="string" id="6696503">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="6696535">,</span>&nbsp;<span class="ident" id="6696537">s</span><span class="op" id="6696538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696545">reqs</span><span class="op" id="6696549">.</span><span class="ident" id="6696550">Set</span><span class="op" id="6696553">(</span><span class="op" id="6696554">-</span><span class="num" id="6696555">2</span><span class="op" id="6696556">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696559">if</span>&nbsp;<span class="ident" id="6696562">reqs</span><span class="op" id="6696566">.</span><span class="ident" id="6696567">i</span>&nbsp;<span class="op" id="6696569">!=</span>&nbsp;<span class="op" id="6696572">-</span><span class="num" id="6696573">2</span>&nbsp;<span class="op" id="6696575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696579">t</span><span class="op" id="6696580">.</span><span class="ident" id="6696581">Errorf</span><span class="op" id="6696587">(</span><span class="string" id="6696588">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="6696610">,</span>&nbsp;<span class="ident" id="6696612">reqs</span><span class="op" id="6696616">.</span><span class="ident" id="6696617">i</span><span class="op" id="6696618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696621">}</span><br>
<span class="lineno"></span><span class="op" id="6696623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6696626">func</span>&nbsp;<span class="ident" id="6696631">TestFloat</span><span class="op" id="6696640">(</span><span class="ident" id="6696641">t</span>&nbsp;<span class="op" id="6696643">*</span><span class="ident" id="6696644">testing</span><span class="op" id="6696651">.</span><span class="ident" id="6696652">T</span><span class="op" id="6696653">)</span>&nbsp;<span class="op" id="6696655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696658">RemoveAll</span><span class="op" id="6696667">(</span><span class="op" id="6696668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696671">reqs</span>&nbsp;<span class="op" id="6696676">:=</span>&nbsp;<span class="ident" id="6696679">NewFloat</span><span class="op" id="6696687">(</span><span class="string" id="6696688">&#34;requests-float&#34;</span><span class="op" id="6696704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696707">if</span>&nbsp;<span class="ident" id="6696710">reqs</span><span class="op" id="6696714">.</span><span class="ident" id="6696715">f</span>&nbsp;<span class="op" id="6696717">!=</span>&nbsp;<span class="num" id="6696720">0.0</span>&nbsp;<span class="op" id="6696724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696728">t</span><span class="op" id="6696729">.</span><span class="ident" id="6696730">Errorf</span><span class="op" id="6696736">(</span><span class="string" id="6696737">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6696758">,</span>&nbsp;<span class="ident" id="6696760">reqs</span><span class="op" id="6696764">.</span><span class="ident" id="6696765">f</span><span class="op" id="6696766">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696772">if</span>&nbsp;<span class="ident" id="6696775">reqs</span>&nbsp;<span class="op" id="6696780">!=</span>&nbsp;<span class="ident" id="6696783">Get</span><span class="op" id="6696786">(</span><span class="string" id="6696787">&#34;requests-float&#34;</span><span class="op" id="6696803">)</span><span class="op" id="6696804">.</span><span class="op" id="6696805">(</span><span class="op" id="6696806">*</span><span class="ident" id="6696807">Float</span><span class="op" id="6696812">)</span>&nbsp;<span class="op" id="6696814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696818">t</span><span class="op" id="6696819">.</span><span class="ident" id="6696820">Errorf</span><span class="op" id="6696826">(</span><span class="string" id="6696827">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6696842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696849">reqs</span><span class="op" id="6696853">.</span><span class="ident" id="6696854">Add</span><span class="op" id="6696857">(</span><span class="num" id="6696858">1.5</span><span class="op" id="6696861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696864">reqs</span><span class="op" id="6696868">.</span><span class="ident" id="6696869">Add</span><span class="op" id="6696872">(</span><span class="num" id="6696873">1.25</span><span class="op" id="6696877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696880">if</span>&nbsp;<span class="ident" id="6696883">reqs</span><span class="op" id="6696887">.</span><span class="ident" id="6696888">f</span>&nbsp;<span class="op" id="6696890">!=</span>&nbsp;<span class="num" id="6696893">2.75</span>&nbsp;<span class="op" id="6696898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696902">t</span><span class="op" id="6696903">.</span><span class="ident" id="6696904">Errorf</span><span class="op" id="6696910">(</span><span class="string" id="6696911">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="6696935">,</span>&nbsp;<span class="ident" id="6696937">reqs</span><span class="op" id="6696941">.</span><span class="ident" id="6696942">f</span><span class="op" id="6696943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6696946">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6696950">if</span>&nbsp;<span class="ident" id="6696953">s</span>&nbsp;<span class="op" id="6696955">:=</span>&nbsp;<span class="ident" id="6696958">reqs</span><span class="op" id="6696962">.</span><span class="ident" id="6696963">String</span><span class="op" id="6696969">(</span><span class="op" id="6696970">)</span><span class="op" id="6696971">;</span>&nbsp;<span class="ident" id="6696973">s</span>&nbsp;<span class="op" id="6696975">!=</span>&nbsp;<span class="string" id="6696978">&#34;2.75&#34;</span>&nbsp;<span class="op" id="6696985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6696989">t</span><span class="op" id="6696990">.</span><span class="ident" id="6696991">Errorf</span><span class="op" id="6696997">(</span><span class="string" id="6696998">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="6697033">,</span>&nbsp;<span class="ident" id="6697035">s</span><span class="op" id="6697036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697043">reqs</span><span class="op" id="6697047">.</span><span class="ident" id="6697048">Add</span><span class="op" id="6697051">(</span><span class="op" id="6697052">-</span><span class="num" id="6697053">2</span><span class="op" id="6697054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697057">if</span>&nbsp;<span class="ident" id="6697060">reqs</span><span class="op" id="6697064">.</span><span class="ident" id="6697065">f</span>&nbsp;<span class="op" id="6697067">!=</span>&nbsp;<span class="num" id="6697070">0.75</span>&nbsp;<span class="op" id="6697075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697079">t</span><span class="op" id="6697080">.</span><span class="ident" id="6697081">Errorf</span><span class="op" id="6697087">(</span><span class="string" id="6697088">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="6697112">,</span>&nbsp;<span class="ident" id="6697114">reqs</span><span class="op" id="6697118">.</span><span class="ident" id="6697119">f</span><span class="op" id="6697120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697123">}</span><br>
<span class="lineno"></span><span class="op" id="6697125">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="6697128">func</span>&nbsp;<span class="ident" id="6697133">TestString</span><span class="op" id="6697143">(</span><span class="ident" id="6697144">t</span>&nbsp;<span class="op" id="6697146">*</span><span class="ident" id="6697147">testing</span><span class="op" id="6697154">.</span><span class="ident" id="6697155">T</span><span class="op" id="6697156">)</span>&nbsp;<span class="op" id="6697158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697161">RemoveAll</span><span class="op" id="6697170">(</span><span class="op" id="6697171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697174">name</span>&nbsp;<span class="op" id="6697179">:=</span>&nbsp;<span class="ident" id="6697182">NewString</span><span class="op" id="6697191">(</span><span class="string" id="6697192">&#34;my-name&#34;</span><span class="op" id="6697201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697204">if</span>&nbsp;<span class="ident" id="6697207">name</span><span class="op" id="6697211">.</span><span class="ident" id="6697212">s</span>&nbsp;<span class="op" id="6697214">!=</span>&nbsp;<span class="string" id="6697217">&#34;&#34;</span>&nbsp;<span class="op" id="6697220">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697224">t</span><span class="op" id="6697225">.</span><span class="ident" id="6697226">Errorf</span><span class="op" id="6697232">(</span><span class="string" id="6697233">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="6697257">,</span>&nbsp;<span class="ident" id="6697259">name</span><span class="op" id="6697263">.</span><span class="ident" id="6697264">s</span><span class="op" id="6697265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697272">name</span><span class="op" id="6697276">.</span><span class="ident" id="6697277">Set</span><span class="op" id="6697280">(</span><span class="string" id="6697281">&#34;Mike&#34;</span><span class="op" id="6697287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697290">if</span>&nbsp;<span class="ident" id="6697293">name</span><span class="op" id="6697297">.</span><span class="ident" id="6697298">s</span>&nbsp;<span class="op" id="6697300">!=</span>&nbsp;<span class="string" id="6697303">&#34;Mike&#34;</span>&nbsp;<span class="op" id="6697310">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697314">t</span><span class="op" id="6697315">.</span><span class="ident" id="6697316">Errorf</span><span class="op" id="6697322">(</span><span class="string" id="6697323">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="6697351">,</span>&nbsp;<span class="ident" id="6697353">name</span><span class="op" id="6697357">.</span><span class="ident" id="6697358">s</span><span class="op" id="6697359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697366">if</span>&nbsp;<span class="ident" id="6697369">s</span>&nbsp;<span class="op" id="6697371">:=</span>&nbsp;<span class="ident" id="6697374">name</span><span class="op" id="6697378">.</span><span class="ident" id="6697379">String</span><span class="op" id="6697385">(</span><span class="op" id="6697386">)</span><span class="op" id="6697387">;</span>&nbsp;<span class="ident" id="6697389">s</span>&nbsp;<span class="op" id="6697391">!=</span>&nbsp;<span class="string" id="6697394">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="6697405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697409">t</span><span class="op" id="6697410">.</span><span class="ident" id="6697411">Errorf</span><span class="op" id="6697417">(</span><span class="string" id="6697418">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="6697457">,</span>&nbsp;<span class="ident" id="6697459">s</span><span class="op" id="6697460">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697463">}</span><br>
<span class="lineno"></span><span class="op" id="6697465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6697468">func</span>&nbsp;<span class="ident" id="6697473">TestMapCounter</span><span class="op" id="6697487">(</span><span class="ident" id="6697488">t</span>&nbsp;<span class="op" id="6697490">*</span><span class="ident" id="6697491">testing</span><span class="op" id="6697498">.</span><span class="ident" id="6697499">T</span><span class="op" id="6697500">)</span>&nbsp;<span class="op" id="6697502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697505">RemoveAll</span><span class="op" id="6697514">(</span><span class="op" id="6697515">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697518">colors</span>&nbsp;<span class="op" id="6697525">:=</span>&nbsp;<span class="ident" id="6697528">NewMap</span><span class="op" id="6697534">(</span><span class="string" id="6697535">&#34;bike-shed-colors&#34;</span><span class="op" id="6697553">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697557">colors</span><span class="op" id="6697563">.</span><span class="ident" id="6697564">Add</span><span class="op" id="6697567">(</span><span class="string" id="6697568">&#34;red&#34;</span><span class="op" id="6697573">,</span>&nbsp;<span class="num" id="6697575">1</span><span class="op" id="6697576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697579">colors</span><span class="op" id="6697585">.</span><span class="ident" id="6697586">Add</span><span class="op" id="6697589">(</span><span class="string" id="6697590">&#34;red&#34;</span><span class="op" id="6697595">,</span>&nbsp;<span class="num" id="6697597">2</span><span class="op" id="6697598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697601">colors</span><span class="op" id="6697607">.</span><span class="ident" id="6697608">Add</span><span class="op" id="6697611">(</span><span class="string" id="6697612">&#34;blue&#34;</span><span class="op" id="6697618">,</span>&nbsp;<span class="num" id="6697620">4</span><span class="op" id="6697621">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697624">colors</span><span class="op" id="6697630">.</span><span class="ident" id="6697631">AddFloat</span><span class="op" id="6697639">(</span><span class="string" id="6697640">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6697656">,</span>&nbsp;<span class="num" id="6697658">4.125</span><span class="op" id="6697663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697666">if</span>&nbsp;<span class="ident" id="6697669">x</span>&nbsp;<span class="op" id="6697671">:=</span>&nbsp;<span class="ident" id="6697674">colors</span><span class="op" id="6697680">.</span><span class="ident" id="6697681">m</span><span class="op" id="6697682">[</span><span class="string" id="6697683">&#34;red&#34;</span><span class="op" id="6697688">]</span><span class="op" id="6697689">.</span><span class="op" id="6697690">(</span><span class="op" id="6697691">*</span><span class="ident" id="6697692">Int</span><span class="op" id="6697695">)</span><span class="op" id="6697696">.</span><span class="ident" id="6697697">i</span><span class="op" id="6697698">;</span>&nbsp;<span class="ident" id="6697700">x</span>&nbsp;<span class="op" id="6697702">!=</span>&nbsp;<span class="num" id="6697705">3</span>&nbsp;<span class="op" id="6697707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697711">t</span><span class="op" id="6697712">.</span><span class="ident" id="6697713">Errorf</span><span class="op" id="6697719">(</span><span class="string" id="6697720">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6697752">,</span>&nbsp;<span class="ident" id="6697754">x</span><span class="op" id="6697755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697761">if</span>&nbsp;<span class="ident" id="6697764">x</span>&nbsp;<span class="op" id="6697766">:=</span>&nbsp;<span class="ident" id="6697769">colors</span><span class="op" id="6697775">.</span><span class="ident" id="6697776">m</span><span class="op" id="6697777">[</span><span class="string" id="6697778">&#34;blue&#34;</span><span class="op" id="6697784">]</span><span class="op" id="6697785">.</span><span class="op" id="6697786">(</span><span class="op" id="6697787">*</span><span class="ident" id="6697788">Int</span><span class="op" id="6697791">)</span><span class="op" id="6697792">.</span><span class="ident" id="6697793">i</span><span class="op" id="6697794">;</span>&nbsp;<span class="ident" id="6697796">x</span>&nbsp;<span class="op" id="6697798">!=</span>&nbsp;<span class="num" id="6697801">4</span>&nbsp;<span class="op" id="6697803">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697807">t</span><span class="op" id="6697808">.</span><span class="ident" id="6697809">Errorf</span><span class="op" id="6697815">(</span><span class="string" id="6697816">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6697849">,</span>&nbsp;<span class="ident" id="6697851">x</span><span class="op" id="6697852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6697858">if</span>&nbsp;<span class="ident" id="6697861">x</span>&nbsp;<span class="op" id="6697863">:=</span>&nbsp;<span class="ident" id="6697866">colors</span><span class="op" id="6697872">.</span><span class="ident" id="6697873">m</span><span class="op" id="6697874">[</span><span class="string" id="6697875">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6697891">]</span><span class="op" id="6697892">.</span><span class="op" id="6697893">(</span><span class="op" id="6697894">*</span><span class="ident" id="6697895">Float</span><span class="op" id="6697900">)</span><span class="op" id="6697901">.</span><span class="ident" id="6697902">f</span><span class="op" id="6697903">;</span>&nbsp;<span class="ident" id="6697905">x</span>&nbsp;<span class="op" id="6697907">!=</span>&nbsp;<span class="num" id="6697910">4.125</span>&nbsp;<span class="op" id="6697916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6697920">t</span><span class="op" id="6697921">.</span><span class="ident" id="6697922">Errorf</span><span class="op" id="6697928">(</span><span class="string" id="6697929">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="6697974">,</span>&nbsp;<span class="ident" id="6697976">x</span><span class="op" id="6697977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6697980">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6697984">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6698037">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698086">s</span>&nbsp;<span class="op" id="6698088">:=</span>&nbsp;<span class="ident" id="6698091">colors</span><span class="op" id="6698097">.</span><span class="ident" id="6698098">String</span><span class="op" id="6698104">(</span><span class="op" id="6698105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698108">var</span>&nbsp;<span class="ident" id="6698112">j</span>&nbsp;<span class="keyword" id="6698114">interface</span><span class="op" id="6698123">{</span><span class="op" id="6698124">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698127">err</span>&nbsp;<span class="op" id="6698131">:=</span>&nbsp;<span class="ident" id="6698134">json</span><span class="op" id="6698138">.</span><span class="ident" id="6698139">Unmarshal</span><span class="op" id="6698148">(</span><span class="op" id="6698149">[</span><span class="op" id="6698150">]</span><span class="builtintype" id="6698151">byte</span><span class="op" id="6698155">(</span><span class="ident" id="6698156">s</span><span class="op" id="6698157">)</span><span class="op" id="6698158">,</span>&nbsp;<span class="op" id="6698160">&amp;</span><span class="ident" id="6698161">j</span><span class="op" id="6698162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698165">if</span>&nbsp;<span class="ident" id="6698168">err</span>&nbsp;<span class="op" id="6698172">!=</span>&nbsp;<span class="ident" id="6698175">nil</span>&nbsp;<span class="op" id="6698179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698183">t</span><span class="op" id="6698184">.</span><span class="ident" id="6698185">Errorf</span><span class="op" id="6698191">(</span><span class="string" id="6698192">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="6698230">,</span>&nbsp;<span class="ident" id="6698232">err</span><span class="op" id="6698235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698241">m</span><span class="op" id="6698242">,</span>&nbsp;<span class="ident" id="6698244">ok</span>&nbsp;<span class="op" id="6698247">:=</span>&nbsp;<span class="ident" id="6698250">j</span><span class="op" id="6698251">.</span><span class="op" id="6698252">(</span><span class="keyword" id="6698253">map</span><span class="op" id="6698256">[</span><span class="builtintype" id="6698257">string</span><span class="op" id="6698263">]</span><span class="keyword" id="6698264">interface</span><span class="op" id="6698273">{</span><span class="op" id="6698274">}</span><span class="op" id="6698275">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698278">if</span>&nbsp;<span class="op" id="6698281">!</span><span class="ident" id="6698282">ok</span>&nbsp;<span class="op" id="6698285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698289">t</span><span class="op" id="6698290">.</span><span class="ident" id="6698291">Error</span><span class="op" id="6698296">(</span><span class="string" id="6698297">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="6698336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698342">red</span>&nbsp;<span class="op" id="6698346">:=</span>&nbsp;<span class="ident" id="6698349">m</span><span class="op" id="6698350">[</span><span class="string" id="6698351">&#34;red&#34;</span><span class="op" id="6698356">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698359">x</span><span class="op" id="6698360">,</span>&nbsp;<span class="ident" id="6698362">ok</span>&nbsp;<span class="op" id="6698365">:=</span>&nbsp;<span class="ident" id="6698368">red</span><span class="op" id="6698371">.</span><span class="op" id="6698372">(</span><span class="builtintype" id="6698373">float64</span><span class="op" id="6698380">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698383">if</span>&nbsp;<span class="op" id="6698386">!</span><span class="ident" id="6698387">ok</span>&nbsp;<span class="op" id="6698390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698394">t</span><span class="op" id="6698395">.</span><span class="ident" id="6698396">Error</span><span class="op" id="6698401">(</span><span class="string" id="6698402">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="6698431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698437">if</span>&nbsp;<span class="ident" id="6698440">x</span>&nbsp;<span class="op" id="6698442">!=</span>&nbsp;<span class="num" id="6698445">3</span>&nbsp;<span class="op" id="6698447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698451">t</span><span class="op" id="6698452">.</span><span class="ident" id="6698453">Errorf</span><span class="op" id="6698459">(</span><span class="string" id="6698460">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6698478">,</span>&nbsp;<span class="ident" id="6698480">x</span><span class="op" id="6698481">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698484">}</span><br>
<span class="lineno"></span><span class="op" id="6698486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6698489">func</span>&nbsp;<span class="ident" id="6698494">TestFunc</span><span class="op" id="6698502">(</span><span class="ident" id="6698503">t</span>&nbsp;<span class="op" id="6698505">*</span><span class="ident" id="6698506">testing</span><span class="op" id="6698513">.</span><span class="ident" id="6698514">T</span><span class="op" id="6698515">)</span>&nbsp;<span class="op" id="6698517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698520">RemoveAll</span><span class="op" id="6698529">(</span><span class="op" id="6698530">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698533">var</span>&nbsp;<span class="ident" id="6698537">x</span>&nbsp;<span class="keyword" id="6698539">interface</span><span class="op" id="6698548">{</span><span class="op" id="6698549">}</span>&nbsp;<span class="op" id="6698551">=</span>&nbsp;<span class="op" id="6698553">[</span><span class="op" id="6698554">]</span><span class="builtintype" id="6698555">string</span><span class="op" id="6698561">{</span><span class="string" id="6698562">&#34;a&#34;</span><span class="op" id="6698565">,</span>&nbsp;<span class="string" id="6698567">&#34;b&#34;</span><span class="op" id="6698570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698573">f</span>&nbsp;<span class="op" id="6698575">:=</span>&nbsp;<span class="ident" id="6698578">Func</span><span class="op" id="6698582">(</span><span class="keyword" id="6698583">func</span><span class="op" id="6698587">(</span><span class="op" id="6698588">)</span>&nbsp;<span class="keyword" id="6698590">interface</span><span class="op" id="6698599">{</span><span class="op" id="6698600">}</span>&nbsp;<span class="op" id="6698602">{</span>&nbsp;<span class="keyword" id="6698604">return</span>&nbsp;<span class="ident" id="6698611">x</span>&nbsp;<span class="op" id="6698613">}</span><span class="op" id="6698614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698617">if</span>&nbsp;<span class="ident" id="6698620">s</span><span class="op" id="6698621">,</span>&nbsp;<span class="ident" id="6698623">exp</span>&nbsp;<span class="op" id="6698627">:=</span>&nbsp;<span class="ident" id="6698630">f</span><span class="op" id="6698631">.</span><span class="ident" id="6698632">String</span><span class="op" id="6698638">(</span><span class="op" id="6698639">)</span><span class="op" id="6698640">,</span>&nbsp;<span class="string" id="6698642">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="6698653">;</span>&nbsp;<span class="ident" id="6698655">s</span>&nbsp;<span class="op" id="6698657">!=</span>&nbsp;<span class="ident" id="6698660">exp</span>&nbsp;<span class="op" id="6698664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698668">t</span><span class="op" id="6698669">.</span><span class="ident" id="6698670">Errorf</span><span class="op" id="6698676">(</span><span class="string" id="6698677">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6698703">,</span>&nbsp;<span class="ident" id="6698705">s</span><span class="op" id="6698706">,</span>&nbsp;<span class="ident" id="6698708">exp</span><span class="op" id="6698711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698714">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698718">x</span>&nbsp;<span class="op" id="6698720">=</span>&nbsp;<span class="num" id="6698722">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698726">if</span>&nbsp;<span class="ident" id="6698729">s</span><span class="op" id="6698730">,</span>&nbsp;<span class="ident" id="6698732">exp</span>&nbsp;<span class="op" id="6698736">:=</span>&nbsp;<span class="ident" id="6698739">f</span><span class="op" id="6698740">.</span><span class="ident" id="6698741">String</span><span class="op" id="6698747">(</span><span class="op" id="6698748">)</span><span class="op" id="6698749">,</span>&nbsp;<span class="string" id="6698751">`17`</span><span class="op" id="6698755">;</span>&nbsp;<span class="ident" id="6698757">s</span>&nbsp;<span class="op" id="6698759">!=</span>&nbsp;<span class="ident" id="6698762">exp</span>&nbsp;<span class="op" id="6698766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698770">t</span><span class="op" id="6698771">.</span><span class="ident" id="6698772">Errorf</span><span class="op" id="6698778">(</span><span class="string" id="6698779">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6698805">,</span>&nbsp;<span class="ident" id="6698807">s</span><span class="op" id="6698808">,</span>&nbsp;<span class="ident" id="6698810">exp</span><span class="op" id="6698813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6698816">}</span><br>
<span class="lineno">145</span><span class="op" id="6698818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6698821">func</span>&nbsp;<span class="ident" id="6698826">TestHandler</span><span class="op" id="6698837">(</span><span class="ident" id="6698838">t</span>&nbsp;<span class="op" id="6698840">*</span><span class="ident" id="6698841">testing</span><span class="op" id="6698848">.</span><span class="ident" id="6698849">T</span><span class="op" id="6698850">)</span>&nbsp;<span class="op" id="6698852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698855">RemoveAll</span><span class="op" id="6698864">(</span><span class="op" id="6698865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698868">m</span>&nbsp;<span class="op" id="6698870">:=</span>&nbsp;<span class="ident" id="6698873">NewMap</span><span class="op" id="6698879">(</span><span class="string" id="6698880">&#34;map1&#34;</span><span class="op" id="6698886">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698889">m</span><span class="op" id="6698890">.</span><span class="ident" id="6698891">Add</span><span class="op" id="6698894">(</span><span class="string" id="6698895">&#34;a&#34;</span><span class="op" id="6698898">,</span>&nbsp;<span class="num" id="6698900">1</span><span class="op" id="6698901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698904">m</span><span class="op" id="6698905">.</span><span class="ident" id="6698906">Add</span><span class="op" id="6698909">(</span><span class="string" id="6698910">&#34;z&#34;</span><span class="op" id="6698913">,</span>&nbsp;<span class="num" id="6698915">2</span><span class="op" id="6698916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698919">m2</span>&nbsp;<span class="op" id="6698922">:=</span>&nbsp;<span class="ident" id="6698925">NewMap</span><span class="op" id="6698931">(</span><span class="string" id="6698932">&#34;map2&#34;</span><span class="op" id="6698938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698941">for</span>&nbsp;<span class="ident" id="6698945">i</span>&nbsp;<span class="op" id="6698947">:=</span>&nbsp;<span class="num" id="6698950">0</span><span class="op" id="6698951">;</span>&nbsp;<span class="ident" id="6698953">i</span>&nbsp;<span class="op" id="6698955">&lt;</span>&nbsp;<span class="num" id="6698957">9</span><span class="op" id="6698958">;</span>&nbsp;<span class="ident" id="6698960">i</span><span class="op" id="6698961">++</span>&nbsp;<span class="op" id="6698964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6698968">m2</span><span class="op" id="6698970">.</span><span class="ident" id="6698971">Add</span><span class="op" id="6698974">(</span><span class="ident" id="6698975">strconv</span><span class="op" id="6698982">.</span><span class="ident" id="6698983">Itoa</span><span class="op" id="6698987">(</span><span class="ident" id="6698988">i</span><span class="op" id="6698989">)</span><span class="op" id="6698990">,</span>&nbsp;<span class="ident" id="6698992">int64</span><span class="op" id="6698997">(</span><span class="ident" id="6698998">i</span><span class="op" id="6698999">)</span><span class="op" id="6699000">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6699006">rr</span>&nbsp;<span class="op" id="6699009">:=</span>&nbsp;<span class="ident" id="6699012">httptest</span><span class="op" id="6699020">.</span><span class="ident" id="6699021">NewRecorder</span><span class="op" id="6699032">(</span><span class="op" id="6699033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6699036">rr</span><span class="op" id="6699038">.</span><span class="ident" id="6699039">Body</span>&nbsp;<span class="op" id="6699044">=</span>&nbsp;<span class="builtinfunc" id="6699046">new</span><span class="op" id="6699049">(</span><span class="ident" id="6699050">bytes</span><span class="op" id="6699055">.</span><span class="ident" id="6699056">Buffer</span><span class="op" id="6699062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6699065">expvarHandler</span><span class="op" id="6699078">(</span><span class="ident" id="6699079">rr</span><span class="op" id="6699081">,</span>&nbsp;<span class="ident" id="6699083">nil</span><span class="op" id="6699086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6699089">want</span>&nbsp;<span class="op" id="6699094">:=</span>&nbsp;<span class="string" id="6699097">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6699212">if</span>&nbsp;<span class="ident" id="6699215">got</span>&nbsp;<span class="op" id="6699219">:=</span>&nbsp;<span class="ident" id="6699222">rr</span><span class="op" id="6699224">.</span><span class="ident" id="6699225">Body</span><span class="op" id="6699229">.</span><span class="ident" id="6699230">String</span><span class="op" id="6699236">(</span><span class="op" id="6699237">)</span><span class="op" id="6699238">;</span>&nbsp;<span class="ident" id="6699240">got</span>&nbsp;<span class="op" id="6699244">!=</span>&nbsp;<span class="ident" id="6699247">want</span>&nbsp;<span class="op" id="6699252">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6699256">t</span><span class="op" id="6699257">.</span><span class="ident" id="6699258">Errorf</span><span class="op" id="6699264">(</span><span class="string" id="6699265">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="6699301">,</span>&nbsp;<span class="ident" id="6699303">got</span><span class="op" id="6699306">,</span>&nbsp;<span class="ident" id="6699308">want</span><span class="op" id="6699312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6699315">}</span><br>
<span class="lineno"></span><span class="op" id="6699317">}</span>
</div>
</body>
</html>
