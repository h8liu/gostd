<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3846778">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3846833">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3846887">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3846938">package</span>&nbsp;<span class="ident" id="3846946">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3846951">import</span>&nbsp;<span class="op" id="3846958">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3846961">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3846973">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3846981">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="3846991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3846994">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="3847071">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="3847156">func</span>&nbsp;<span class="ident" id="3847161">SortImports</span><span class="op" id="3847172">(</span><span class="ident" id="3847173">fset</span>&nbsp;<span class="op" id="3847178">*</span><span class="ident" id="3847179"><a href="/gostd/go/ast/import.go.html#3846961">token</a></span><span class="op" id="3847184">.</span><span class="ident" id="3847185"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="3847192">,</span>&nbsp;<span class="ident" id="3847194">f</span>&nbsp;<span class="op" id="3847196">*</span><span class="ident" id="3847197"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="3847201">)</span>&nbsp;<span class="op" id="3847203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847206">for</span>&nbsp;<span class="ident" id="3847210">_</span><span class="op" id="3847211">,</span>&nbsp;<span class="ident" id="3847213">d</span>&nbsp;<span class="op" id="3847215">:=</span>&nbsp;<span class="keyword" id="3847218">range</span>&nbsp;<span class="ident" id="3847224"><a href="/gostd/go/ast/import.go.html#3847194">f</a></span><span class="op" id="3847225">.</span><span class="ident" id="3847226"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span>&nbsp;<span class="op" id="3847232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847236">d</span><span class="op" id="3847237">,</span>&nbsp;<span class="ident" id="3847239">ok</span>&nbsp;<span class="op" id="3847242">:=</span>&nbsp;<span class="ident" id="3847245"><a href="/gostd/go/ast/import.go.html#3847213">d</a></span><span class="op" id="3847246">.</span><span class="op" id="3847247">(</span><span class="op" id="3847248">*</span><span class="ident" id="3847249"><a href="/gostd/go/ast/ast.go.html#3822162">GenDecl</a></span><span class="op" id="3847256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847260">if</span>&nbsp;<span class="op" id="3847263">!</span><span class="ident" id="3847264"><a href="/gostd/go/ast/import.go.html#3847239">ok</a></span>&nbsp;<span class="op" id="3847267">||</span>&nbsp;<span class="ident" id="3847270"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847271">.</span><span class="ident" id="3847272"><a href="/gostd/go/ast/ast.go.html#3822282">Tok</a></span>&nbsp;<span class="op" id="3847276">!=</span>&nbsp;<span class="ident" id="3847279"><a href="/gostd/go/ast/import.go.html#3846961">token</a></span><span class="op" id="3847284">.</span><span class="ident" id="3847285"><a href="/gostd/go/token/token.go.html#3890848">IMPORT</a></span>&nbsp;<span class="op" id="3847292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847297">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847345">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847377">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847390">if</span>&nbsp;<span class="op" id="3847393">!</span><span class="ident" id="3847394"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847395">.</span><span class="ident" id="3847396"><a href="/gostd/go/ast/ast.go.html#3822333">Lparen</a></span><span class="op" id="3847402">.</span><span class="ident" id="3847403"><a href="/gostd/go/token/position.go.html#3876151">IsValid</a></span><span class="op" id="3847410">(</span><span class="op" id="3847411">)</span>&nbsp;<span class="op" id="3847413">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847418">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847456">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847472">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847530">i</span>&nbsp;<span class="op" id="3847532">:=</span>&nbsp;<span class="num" id="3847535">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847539">specs</span>&nbsp;<span class="op" id="3847545">:=</span>&nbsp;<span class="ident" id="3847548"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847549">.</span><span class="ident" id="3847550"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3847555">[</span><span class="op" id="3847556">:</span><span class="num" id="3847557">0</span><span class="op" id="3847558">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847562">for</span>&nbsp;<span class="ident" id="3847566">j</span><span class="op" id="3847567">,</span>&nbsp;<span class="ident" id="3847569">s</span>&nbsp;<span class="op" id="3847571">:=</span>&nbsp;<span class="keyword" id="3847574">range</span>&nbsp;<span class="ident" id="3847580"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847581">.</span><span class="ident" id="3847582"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span>&nbsp;<span class="op" id="3847588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847593">if</span>&nbsp;<span class="ident" id="3847596"><a href="/gostd/go/ast/import.go.html#3847566">j</a></span>&nbsp;<span class="op" id="3847598">&gt;</span>&nbsp;<span class="ident" id="3847600"><a href="/gostd/go/ast/import.go.html#3847530">i</a></span>&nbsp;<span class="op" id="3847602">&amp;&amp;</span>&nbsp;<span class="ident" id="3847605"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3847609">.</span><span class="ident" id="3847610"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3847618">(</span><span class="ident" id="3847619"><a href="/gostd/go/ast/import.go.html#3847569">s</a></span><span class="op" id="3847620">.</span><span class="ident" id="3847621"><a href="/gostd/go/ast/ast.go.html#3795032">Pos</a></span><span class="op" id="3847624">(</span><span class="op" id="3847625">)</span><span class="op" id="3847626">)</span><span class="op" id="3847627">.</span><span class="ident" id="3847628"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="3847633">&gt;</span>&nbsp;<span class="num" id="3847635">1</span><span class="op" id="3847636">+</span><span class="ident" id="3847637"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3847641">.</span><span class="ident" id="3847642"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3847650">(</span><span class="ident" id="3847651"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847652">.</span><span class="ident" id="3847653"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3847658">[</span><span class="ident" id="3847659"><a href="/gostd/go/ast/import.go.html#3847566">j</a></span><span class="op" id="3847660">-</span><span class="num" id="3847661">1</span><span class="op" id="3847662">]</span><span class="op" id="3847663">.</span><span class="ident" id="3847664"><a href="/gostd/go/ast/ast.go.html#3795102">End</a></span><span class="op" id="3847667">(</span><span class="op" id="3847668">)</span><span class="op" id="3847669">)</span><span class="op" id="3847670">.</span><span class="ident" id="3847671"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="3847676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847682">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847724"><a href="/gostd/go/ast/import.go.html#3847539">specs</a></span>&nbsp;<span class="op" id="3847730">=</span>&nbsp;<span class="builtinfunc" id="3847732">append</span><span class="op" id="3847738">(</span><span class="ident" id="3847739"><a href="/gostd/go/ast/import.go.html#3847539">specs</a></span><span class="op" id="3847744">,</span>&nbsp;<span class="ident" id="3847746"><a href="/gostd/go/ast/import.go.html#3848881">sortSpecs</a></span><span class="op" id="3847755">(</span><span class="ident" id="3847756"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3847760">,</span>&nbsp;<span class="ident" id="3847762"><a href="/gostd/go/ast/import.go.html#3847194">f</a></span><span class="op" id="3847763">,</span>&nbsp;<span class="ident" id="3847765"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847766">.</span><span class="ident" id="3847767"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3847772">[</span><span class="ident" id="3847773"><a href="/gostd/go/ast/import.go.html#3847530">i</a></span><span class="op" id="3847774">:</span><span class="ident" id="3847775"><a href="/gostd/go/ast/import.go.html#3847566">j</a></span><span class="op" id="3847776">]</span><span class="op" id="3847777">)</span><span class="op" id="3847778">...</span><span class="op" id="3847781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847787"><a href="/gostd/go/ast/import.go.html#3847530">i</a></span>&nbsp;<span class="op" id="3847789">=</span>&nbsp;<span class="ident" id="3847791"><a href="/gostd/go/ast/import.go.html#3847566">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847804"><a href="/gostd/go/ast/import.go.html#3847539">specs</a></span>&nbsp;<span class="op" id="3847810">=</span>&nbsp;<span class="builtinfunc" id="3847812">append</span><span class="op" id="3847818">(</span><span class="ident" id="3847819"><a href="/gostd/go/ast/import.go.html#3847539">specs</a></span><span class="op" id="3847824">,</span>&nbsp;<span class="ident" id="3847826"><a href="/gostd/go/ast/import.go.html#3848881">sortSpecs</a></span><span class="op" id="3847835">(</span><span class="ident" id="3847836"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3847840">,</span>&nbsp;<span class="ident" id="3847842"><a href="/gostd/go/ast/import.go.html#3847194">f</a></span><span class="op" id="3847843">,</span>&nbsp;<span class="ident" id="3847845"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847846">.</span><span class="ident" id="3847847"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3847852">[</span><span class="ident" id="3847853"><a href="/gostd/go/ast/import.go.html#3847530">i</a></span><span class="op" id="3847854">:</span><span class="op" id="3847855">]</span><span class="op" id="3847856">)</span><span class="op" id="3847857">...</span><span class="op" id="3847860">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847864"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847865">.</span><span class="ident" id="3847866"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span>&nbsp;<span class="op" id="3847872">=</span>&nbsp;<span class="ident" id="3847874"><a href="/gostd/go/ast/import.go.html#3847539">specs</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847883">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847954">if</span>&nbsp;<span class="builtinfunc" id="3847957">len</span><span class="op" id="3847960">(</span><span class="ident" id="3847961"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847962">.</span><span class="ident" id="3847963"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3847968">)</span>&nbsp;<span class="op" id="3847970">&gt;</span>&nbsp;<span class="num" id="3847972">0</span>&nbsp;<span class="op" id="3847974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847979">lastSpec</span>&nbsp;<span class="op" id="3847988">:=</span>&nbsp;<span class="ident" id="3847991"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3847992">.</span><span class="ident" id="3847993"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3847998">[</span><span class="builtinfunc" id="3847999">len</span><span class="op" id="3848002">(</span><span class="ident" id="3848003"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3848004">.</span><span class="ident" id="3848005"><a href="/gostd/go/ast/ast.go.html#3822383">Specs</a></span><span class="op" id="3848010">)</span><span class="op" id="3848011">-</span><span class="num" id="3848012">1</span><span class="op" id="3848013">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848018">lastLine</span>&nbsp;<span class="op" id="3848027">:=</span>&nbsp;<span class="ident" id="3848030"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3848034">.</span><span class="ident" id="3848035"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3848043">(</span><span class="ident" id="3848044"><a href="/gostd/go/ast/import.go.html#3847979">lastSpec</a></span><span class="op" id="3848052">.</span><span class="ident" id="3848053"><a href="/gostd/go/ast/ast.go.html#3795032">Pos</a></span><span class="op" id="3848056">(</span><span class="op" id="3848057">)</span><span class="op" id="3848058">)</span><span class="op" id="3848059">.</span><span class="ident" id="3848060"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848068">if</span>&nbsp;<span class="ident" id="3848071">rParenLine</span>&nbsp;<span class="op" id="3848082">:=</span>&nbsp;<span class="ident" id="3848085"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3848089">.</span><span class="ident" id="3848090"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3848098">(</span><span class="ident" id="3848099"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3848100">.</span><span class="ident" id="3848101"><a href="/gostd/go/ast/ast.go.html#3822399">Rparen</a></span><span class="op" id="3848107">)</span><span class="op" id="3848108">.</span><span class="ident" id="3848109"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="3848113">;</span>&nbsp;<span class="ident" id="3848115"><a href="/gostd/go/ast/import.go.html#3848071">rParenLine</a></span>&nbsp;<span class="op" id="3848126">&gt;</span>&nbsp;<span class="ident" id="3848128"><a href="/gostd/go/ast/import.go.html#3848018">lastLine</a></span><span class="op" id="3848136">+</span><span class="num" id="3848137">1</span>&nbsp;<span class="op" id="3848139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848145"><a href="/gostd/go/ast/import.go.html#3847173">fset</a></span><span class="op" id="3848149">.</span><span class="ident" id="3848150"><a href="/gostd/go/token/position.go.html#3886425">File</a></span><span class="op" id="3848154">(</span><span class="ident" id="3848155"><a href="/gostd/go/ast/import.go.html#3847236">d</a></span><span class="op" id="3848156">.</span><span class="ident" id="3848157"><a href="/gostd/go/ast/ast.go.html#3822399">Rparen</a></span><span class="op" id="3848163">)</span><span class="op" id="3848164">.</span><span class="ident" id="3848165"><a href="/gostd/go/token/position.go.html#3877976">MergeLine</a></span><span class="op" id="3848174">(</span><span class="ident" id="3848175"><a href="/gostd/go/ast/import.go.html#3848071">rParenLine</a></span>&nbsp;<span class="op" id="3848186">-</span>&nbsp;<span class="num" id="3848188">1</span><span class="op" id="3848189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848198">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848201">}</span><br>
<span class="lineno"></span><span class="op" id="3848203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3848206">func</span>&nbsp;<span class="ident" id="3848211">importPath</span><span class="op" id="3848221">(</span><span class="ident" id="3848222">s</span>&nbsp;<span class="ident" id="3848224"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3848228">)</span>&nbsp;<span class="builtintype" id="3848230">string</span>&nbsp;<span class="op" id="3848237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848240">t</span><span class="op" id="3848241">,</span>&nbsp;<span class="ident" id="3848243">err</span>&nbsp;<span class="op" id="3848247">:=</span>&nbsp;<span class="ident" id="3848250"><a href="/gostd/go/ast/import.go.html#3846981">strconv</a></span><span class="op" id="3848257">.</span><span class="ident" id="3848258"><a href="/gostd/strconv/quote.go.html#2417743">Unquote</a></span><span class="op" id="3848265">(</span><span class="ident" id="3848266"><a href="/gostd/go/ast/import.go.html#3848222">s</a></span><span class="op" id="3848267">.</span><span class="op" id="3848268">(</span><span class="op" id="3848269">*</span><span class="ident" id="3848270"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3848280">)</span><span class="op" id="3848281">.</span><span class="ident" id="3848282"><a href="/gostd/go/ast/ast.go.html#3819761">Path</a></span><span class="op" id="3848286">.</span><span class="ident" id="3848287"><a href="/gostd/go/ast/ast.go.html#3800851">Value</a></span><span class="op" id="3848292">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848295">if</span>&nbsp;<span class="ident" id="3848298"><a href="/gostd/go/ast/import.go.html#3848243">err</a></span>&nbsp;<span class="op" id="3848302">==</span>&nbsp;<span class="builtintype" id="3848305">nil</span>&nbsp;<span class="op" id="3848309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848313">return</span>&nbsp;<span class="ident" id="3848320"><a href="/gostd/go/ast/import.go.html#3848240">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848326">return</span>&nbsp;<span class="string" id="3848333">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3848336">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3848339">func</span>&nbsp;<span class="ident" id="3848344">importName</span><span class="op" id="3848354">(</span><span class="ident" id="3848355">s</span>&nbsp;<span class="ident" id="3848357"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3848361">)</span>&nbsp;<span class="builtintype" id="3848363">string</span>&nbsp;<span class="op" id="3848370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848373">n</span>&nbsp;<span class="op" id="3848375">:=</span>&nbsp;<span class="ident" id="3848378"><a href="/gostd/go/ast/import.go.html#3848355">s</a></span><span class="op" id="3848379">.</span><span class="op" id="3848380">(</span><span class="op" id="3848381">*</span><span class="ident" id="3848382"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3848392">)</span><span class="op" id="3848393">.</span><span class="ident" id="3848394"><a href="/gostd/go/ast/ast.go.html#3819691">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848400">if</span>&nbsp;<span class="ident" id="3848403"><a href="/gostd/go/ast/import.go.html#3848373">n</a></span>&nbsp;<span class="op" id="3848405">==</span>&nbsp;<span class="builtintype" id="3848408">nil</span>&nbsp;<span class="op" id="3848412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848416">return</span>&nbsp;<span class="string" id="3848423">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848430">return</span>&nbsp;<span class="ident" id="3848437"><a href="/gostd/go/ast/import.go.html#3848373">n</a></span><span class="op" id="3848438">.</span><span class="ident" id="3848439"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><br>
<span class="lineno"></span><span class="op" id="3848444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3848447">func</span>&nbsp;<span class="ident" id="3848452">importComment</span><span class="op" id="3848465">(</span><span class="ident" id="3848466">s</span>&nbsp;<span class="ident" id="3848468"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3848472">)</span>&nbsp;<span class="builtintype" id="3848474">string</span>&nbsp;<span class="op" id="3848481">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848484">c</span>&nbsp;<span class="op" id="3848486">:=</span>&nbsp;<span class="ident" id="3848489"><a href="/gostd/go/ast/import.go.html#3848466">s</a></span><span class="op" id="3848490">.</span><span class="op" id="3848491">(</span><span class="op" id="3848492">*</span><span class="ident" id="3848493"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3848503">)</span><span class="op" id="3848504">.</span><span class="ident" id="3848505"><a href="/gostd/go/ast/ast.go.html#3819800">Comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848514">if</span>&nbsp;<span class="ident" id="3848517"><a href="/gostd/go/ast/import.go.html#3848484">c</a></span>&nbsp;<span class="op" id="3848519">==</span>&nbsp;<span class="builtintype" id="3848522">nil</span>&nbsp;<span class="op" id="3848526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848530">return</span>&nbsp;<span class="string" id="3848537">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848544">return</span>&nbsp;<span class="ident" id="3848551"><a href="/gostd/go/ast/import.go.html#3848484">c</a></span><span class="op" id="3848552">.</span><span class="ident" id="3848553"><a href="/gostd/go/ast/ast.go.html#3796792">Text</a></span><span class="op" id="3848557">(</span><span class="op" id="3848558">)</span><br>
<span class="lineno">75</span><span class="op" id="3848560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3848563">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="3848633">func</span>&nbsp;<span class="ident" id="3848638">collapse</span><span class="op" id="3848646">(</span><span class="ident" id="3848647">prev</span><span class="op" id="3848651">,</span>&nbsp;<span class="ident" id="3848653">next</span>&nbsp;<span class="ident" id="3848658"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3848662">)</span>&nbsp;<span class="builtintype" id="3848664">bool</span>&nbsp;<span class="op" id="3848669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848672">if</span>&nbsp;<span class="ident" id="3848675"><a href="/gostd/go/ast/import.go.html#3848211">importPath</a></span><span class="op" id="3848685">(</span><span class="ident" id="3848686"><a href="/gostd/go/ast/import.go.html#3848653">next</a></span><span class="op" id="3848690">)</span>&nbsp;<span class="op" id="3848692">!=</span>&nbsp;<span class="ident" id="3848695"><a href="/gostd/go/ast/import.go.html#3848211">importPath</a></span><span class="op" id="3848705">(</span><span class="ident" id="3848706"><a href="/gostd/go/ast/import.go.html#3848647">prev</a></span><span class="op" id="3848710">)</span>&nbsp;<span class="op" id="3848712">||</span>&nbsp;<span class="ident" id="3848715"><a href="/gostd/go/ast/import.go.html#3848344">importName</a></span><span class="op" id="3848725">(</span><span class="ident" id="3848726"><a href="/gostd/go/ast/import.go.html#3848653">next</a></span><span class="op" id="3848730">)</span>&nbsp;<span class="op" id="3848732">!=</span>&nbsp;<span class="ident" id="3848735"><a href="/gostd/go/ast/import.go.html#3848344">importName</a></span><span class="op" id="3848745">(</span><span class="ident" id="3848746"><a href="/gostd/go/ast/import.go.html#3848647">prev</a></span><span class="op" id="3848750">)</span>&nbsp;<span class="op" id="3848752">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848756">return</span>&nbsp;<span class="builtintype" id="3848763">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848773">return</span>&nbsp;<span class="ident" id="3848780"><a href="/gostd/go/ast/import.go.html#3848647">prev</a></span><span class="op" id="3848784">.</span><span class="op" id="3848785">(</span><span class="op" id="3848786">*</span><span class="ident" id="3848787"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3848797">)</span><span class="op" id="3848798">.</span><span class="ident" id="3848799"><a href="/gostd/go/ast/ast.go.html#3819800">Comment</a></span>&nbsp;<span class="op" id="3848807">==</span>&nbsp;<span class="builtintype" id="3848810">nil</span><br>
<span class="lineno"></span><span class="op" id="3848814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="3848817">type</span>&nbsp;<span class="ident" id="3848822">posSpan</span>&nbsp;<span class="keyword" id="3848830">struct</span>&nbsp;<span class="op" id="3848837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848840">Start</span>&nbsp;<span class="ident" id="3848846"><a href="/gostd/go/ast/import.go.html#3846961">token</a></span><span class="op" id="3848851">.</span><span class="ident" id="3848852"><a href="/gostd/go/token/position.go.html#3875795">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848857">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3848863"><a href="/gostd/go/ast/import.go.html#3846961">token</a></span><span class="op" id="3848868">.</span><span class="ident" id="3848869"><a href="/gostd/go/token/position.go.html#3875795">Pos</a></span><br>
<span class="lineno"></span><span class="op" id="3848873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="3848876">func</span>&nbsp;<span class="ident" id="3848881">sortSpecs</span><span class="op" id="3848890">(</span><span class="ident" id="3848891">fset</span>&nbsp;<span class="op" id="3848896">*</span><span class="ident" id="3848897"><a href="/gostd/go/ast/import.go.html#3846961">token</a></span><span class="op" id="3848902">.</span><span class="ident" id="3848903"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="3848910">,</span>&nbsp;<span class="ident" id="3848912">f</span>&nbsp;<span class="op" id="3848914">*</span><span class="ident" id="3848915"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="3848919">,</span>&nbsp;<span class="ident" id="3848921">specs</span>&nbsp;<span class="op" id="3848927">[</span><span class="op" id="3848928">]</span><span class="ident" id="3848929"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="3848933">)</span>&nbsp;<span class="op" id="3848935">[</span><span class="op" id="3848936">]</span><span class="ident" id="3848937"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span>&nbsp;<span class="op" id="3848942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3848945">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3849008">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3849053">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849104">if</span>&nbsp;<span class="builtinfunc" id="3849107">len</span><span class="op" id="3849110">(</span><span class="ident" id="3849111"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3849116">)</span>&nbsp;<span class="op" id="3849118">&lt;=</span>&nbsp;<span class="num" id="3849121">1</span>&nbsp;<span class="op" id="3849123">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849127">return</span>&nbsp;<span class="ident" id="3849134"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3849145">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849177">pos</span>&nbsp;<span class="op" id="3849181">:=</span>&nbsp;<span class="builtinfunc" id="3849184">make</span><span class="op" id="3849188">(</span><span class="op" id="3849189">[</span><span class="op" id="3849190">]</span><span class="ident" id="3849191"><a href="/gostd/go/ast/import.go.html#3848822">posSpan</a></span><span class="op" id="3849198">,</span>&nbsp;<span class="builtinfunc" id="3849200">len</span><span class="op" id="3849203">(</span><span class="ident" id="3849204"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3849209">)</span><span class="op" id="3849210">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849213">for</span>&nbsp;<span class="ident" id="3849217">i</span><span class="op" id="3849218">,</span>&nbsp;<span class="ident" id="3849220">s</span>&nbsp;<span class="op" id="3849222">:=</span>&nbsp;<span class="keyword" id="3849225">range</span>&nbsp;<span class="ident" id="3849231"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span>&nbsp;<span class="op" id="3849237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849241"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3849244">[</span><span class="ident" id="3849245"><a href="/gostd/go/ast/import.go.html#3849217">i</a></span><span class="op" id="3849246">]</span>&nbsp;<span class="op" id="3849248">=</span>&nbsp;<span class="ident" id="3849250"><a href="/gostd/go/ast/import.go.html#3848822">posSpan</a></span><span class="op" id="3849257">{</span><span class="ident" id="3849258"><a href="/gostd/go/ast/import.go.html#3849220">s</a></span><span class="op" id="3849259">.</span><span class="ident" id="3849260"><a href="/gostd/go/ast/ast.go.html#3795032">Pos</a></span><span class="op" id="3849263">(</span><span class="op" id="3849264">)</span><span class="op" id="3849265">,</span>&nbsp;<span class="ident" id="3849267"><a href="/gostd/go/ast/import.go.html#3849220">s</a></span><span class="op" id="3849268">.</span><span class="ident" id="3849269"><a href="/gostd/go/ast/ast.go.html#3795102">End</a></span><span class="op" id="3849272">(</span><span class="op" id="3849273">)</span><span class="op" id="3849274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3849281">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3849318">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849378">lastLine</span>&nbsp;<span class="op" id="3849387">:=</span>&nbsp;<span class="ident" id="3849390"><a href="/gostd/go/ast/import.go.html#3848891">fset</a></span><span class="op" id="3849394">.</span><span class="ident" id="3849395"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3849403">(</span><span class="ident" id="3849404"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3849407">[</span><span class="builtinfunc" id="3849408">len</span><span class="op" id="3849411">(</span><span class="ident" id="3849412"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3849415">)</span><span class="op" id="3849416">-</span><span class="num" id="3849417">1</span><span class="op" id="3849418">]</span><span class="op" id="3849419">.</span><span class="ident" id="3849420"><a href="/gostd/go/ast/import.go.html#3848857">End</a></span><span class="op" id="3849423">)</span><span class="op" id="3849424">.</span><span class="ident" id="3849425"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849431">cstart</span>&nbsp;<span class="op" id="3849438">:=</span>&nbsp;<span class="builtinfunc" id="3849441">len</span><span class="op" id="3849444">(</span><span class="ident" id="3849445"><a href="/gostd/go/ast/import.go.html#3848912">f</a></span><span class="op" id="3849446">.</span><span class="ident" id="3849447"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="3849455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849458">cend</span>&nbsp;<span class="op" id="3849463">:=</span>&nbsp;<span class="builtinfunc" id="3849466">len</span><span class="op" id="3849469">(</span><span class="ident" id="3849470"><a href="/gostd/go/ast/import.go.html#3848912">f</a></span><span class="op" id="3849471">.</span><span class="ident" id="3849472"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="3849480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849483">for</span>&nbsp;<span class="ident" id="3849487">i</span><span class="op" id="3849488">,</span>&nbsp;<span class="ident" id="3849490">g</span>&nbsp;<span class="op" id="3849492">:=</span>&nbsp;<span class="keyword" id="3849495">range</span>&nbsp;<span class="ident" id="3849501"><a href="/gostd/go/ast/import.go.html#3848912">f</a></span><span class="op" id="3849502">.</span><span class="ident" id="3849503"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span>&nbsp;<span class="op" id="3849512">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849516">if</span>&nbsp;<span class="ident" id="3849519"><a href="/gostd/go/ast/import.go.html#3849490">g</a></span><span class="op" id="3849520">.</span><span class="ident" id="3849521"><a href="/gostd/go/ast/ast.go.html#3796116">Pos</a></span><span class="op" id="3849524">(</span><span class="op" id="3849525">)</span>&nbsp;<span class="op" id="3849527">&lt;</span>&nbsp;<span class="ident" id="3849529"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3849532">[</span><span class="num" id="3849533">0</span><span class="op" id="3849534">]</span><span class="op" id="3849535">.</span><span class="ident" id="3849536"><a href="/gostd/go/ast/import.go.html#3848840">Start</a></span>&nbsp;<span class="op" id="3849542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849547">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849562">if</span>&nbsp;<span class="ident" id="3849565"><a href="/gostd/go/ast/import.go.html#3849487">i</a></span>&nbsp;<span class="op" id="3849567">&lt;</span>&nbsp;<span class="ident" id="3849569"><a href="/gostd/go/ast/import.go.html#3849431">cstart</a></span>&nbsp;<span class="op" id="3849576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849581"><a href="/gostd/go/ast/import.go.html#3849431">cstart</a></span>&nbsp;<span class="op" id="3849588">=</span>&nbsp;<span class="ident" id="3849590"><a href="/gostd/go/ast/import.go.html#3849487">i</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849598">if</span>&nbsp;<span class="ident" id="3849601"><a href="/gostd/go/ast/import.go.html#3848891">fset</a></span><span class="op" id="3849605">.</span><span class="ident" id="3849606"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3849614">(</span><span class="ident" id="3849615"><a href="/gostd/go/ast/import.go.html#3849490">g</a></span><span class="op" id="3849616">.</span><span class="ident" id="3849617"><a href="/gostd/go/ast/ast.go.html#3796182">End</a></span><span class="op" id="3849620">(</span><span class="op" id="3849621">)</span><span class="op" id="3849622">)</span><span class="op" id="3849623">.</span><span class="ident" id="3849624"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="3849629">&gt;</span>&nbsp;<span class="ident" id="3849631"><a href="/gostd/go/ast/import.go.html#3849378">lastLine</a></span>&nbsp;<span class="op" id="3849640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849645"><a href="/gostd/go/ast/import.go.html#3849458">cend</a></span>&nbsp;<span class="op" id="3849650">=</span>&nbsp;<span class="ident" id="3849652"><a href="/gostd/go/ast/import.go.html#3849487">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849657">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849665">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849671">comments</span>&nbsp;<span class="op" id="3849680">:=</span>&nbsp;<span class="ident" id="3849683"><a href="/gostd/go/ast/import.go.html#3848912">f</a></span><span class="op" id="3849684">.</span><span class="ident" id="3849685"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="3849693">[</span><span class="ident" id="3849694"><a href="/gostd/go/ast/import.go.html#3849431">cstart</a></span><span class="op" id="3849700">:</span><span class="ident" id="3849701"><a href="/gostd/go/ast/import.go.html#3849458">cend</a></span><span class="op" id="3849705">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3849709">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849766">importComment</span>&nbsp;<span class="op" id="3849780">:=</span>&nbsp;<span class="keyword" id="3849783">map</span><span class="op" id="3849786">[</span><span class="op" id="3849787">*</span><span class="ident" id="3849788"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3849798">]</span><span class="op" id="3849799">[</span><span class="op" id="3849800">]</span><span class="op" id="3849801">*</span><span class="ident" id="3849802"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span><span class="op" id="3849814">{</span><span class="op" id="3849815">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849818">specIndex</span>&nbsp;<span class="op" id="3849828">:=</span>&nbsp;<span class="num" id="3849831">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849834">for</span>&nbsp;<span class="ident" id="3849838">_</span><span class="op" id="3849839">,</span>&nbsp;<span class="ident" id="3849841">g</span>&nbsp;<span class="op" id="3849843">:=</span>&nbsp;<span class="keyword" id="3849846">range</span>&nbsp;<span class="ident" id="3849852"><a href="/gostd/go/ast/import.go.html#3849671">comments</a></span>&nbsp;<span class="op" id="3849861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849865">for</span>&nbsp;<span class="ident" id="3849869"><a href="/gostd/go/ast/import.go.html#3849818">specIndex</a></span><span class="op" id="3849878">+</span><span class="num" id="3849879">1</span>&nbsp;<span class="op" id="3849881">&lt;</span>&nbsp;<span class="builtinfunc" id="3849883">len</span><span class="op" id="3849886">(</span><span class="ident" id="3849887"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3849892">)</span>&nbsp;<span class="op" id="3849894">&amp;&amp;</span>&nbsp;<span class="ident" id="3849897"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3849900">[</span><span class="ident" id="3849901"><a href="/gostd/go/ast/import.go.html#3849818">specIndex</a></span><span class="op" id="3849910">+</span><span class="num" id="3849911">1</span><span class="op" id="3849912">]</span><span class="op" id="3849913">.</span><span class="ident" id="3849914"><a href="/gostd/go/ast/import.go.html#3848840">Start</a></span>&nbsp;<span class="op" id="3849920">&lt;=</span>&nbsp;<span class="ident" id="3849923"><a href="/gostd/go/ast/import.go.html#3849841">g</a></span><span class="op" id="3849924">.</span><span class="ident" id="3849925"><a href="/gostd/go/ast/ast.go.html#3796116">Pos</a></span><span class="op" id="3849928">(</span><span class="op" id="3849929">)</span>&nbsp;<span class="op" id="3849931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849936"><a href="/gostd/go/ast/import.go.html#3849818">specIndex</a></span><span class="op" id="3849945">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849950">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849954">s</span>&nbsp;<span class="op" id="3849956">:=</span>&nbsp;<span class="ident" id="3849959"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3849964">[</span><span class="ident" id="3849965"><a href="/gostd/go/ast/import.go.html#3849818">specIndex</a></span><span class="op" id="3849974">]</span><span class="op" id="3849975">.</span><span class="op" id="3849976">(</span><span class="op" id="3849977">*</span><span class="ident" id="3849978"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3849988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849992"><a href="/gostd/go/ast/import.go.html#3849766">importComment</a></span><span class="op" id="3850005">[</span><span class="ident" id="3850006"><a href="/gostd/go/ast/import.go.html#3849954">s</a></span><span class="op" id="3850007">]</span>&nbsp;<span class="op" id="3850009">=</span>&nbsp;<span class="builtinfunc" id="3850011">append</span><span class="op" id="3850017">(</span><span class="ident" id="3850018"><a href="/gostd/go/ast/import.go.html#3849766">importComment</a></span><span class="op" id="3850031">[</span><span class="ident" id="3850032"><a href="/gostd/go/ast/import.go.html#3849954">s</a></span><span class="op" id="3850033">]</span><span class="op" id="3850034">,</span>&nbsp;<span class="ident" id="3850036"><a href="/gostd/go/ast/import.go.html#3849841">g</a></span><span class="op" id="3850037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850044">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850086">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850142">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850208">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850263">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850302"><a href="/gostd/go/ast/import.go.html#3846973">sort</a></span><span class="op" id="3850306">.</span><span class="ident" id="3850307"><a href="/gostd/sort/sort.go.html#2015380">Sort</a></span><span class="op" id="3850311">(</span><span class="ident" id="3850312"><a href="/gostd/go/ast/import.go.html#3851014">byImportSpec</a></span><span class="op" id="3850324">(</span><span class="ident" id="3850325"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3850330">)</span><span class="op" id="3850331">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850335">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850390">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850421">deduped</span>&nbsp;<span class="op" id="3850429">:=</span>&nbsp;<span class="ident" id="3850432"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3850437">[</span><span class="op" id="3850438">:</span><span class="num" id="3850439">0</span><span class="op" id="3850440">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850443">for</span>&nbsp;<span class="ident" id="3850447">i</span><span class="op" id="3850448">,</span>&nbsp;<span class="ident" id="3850450">s</span>&nbsp;<span class="op" id="3850452">:=</span>&nbsp;<span class="keyword" id="3850455">range</span>&nbsp;<span class="ident" id="3850461"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span>&nbsp;<span class="op" id="3850467">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850471">if</span>&nbsp;<span class="ident" id="3850474"><a href="/gostd/go/ast/import.go.html#3850447">i</a></span>&nbsp;<span class="op" id="3850476">==</span>&nbsp;<span class="builtinfunc" id="3850479">len</span><span class="op" id="3850482">(</span><span class="ident" id="3850483"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3850488">)</span><span class="op" id="3850489">-</span><span class="num" id="3850490">1</span>&nbsp;<span class="op" id="3850492">||</span>&nbsp;<span class="op" id="3850495">!</span><span class="ident" id="3850496"><a href="/gostd/go/ast/import.go.html#3848638">collapse</a></span><span class="op" id="3850504">(</span><span class="ident" id="3850505"><a href="/gostd/go/ast/import.go.html#3850450">s</a></span><span class="op" id="3850506">,</span>&nbsp;<span class="ident" id="3850508"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><span class="op" id="3850513">[</span><span class="ident" id="3850514"><a href="/gostd/go/ast/import.go.html#3850447">i</a></span><span class="op" id="3850515">+</span><span class="num" id="3850516">1</span><span class="op" id="3850517">]</span><span class="op" id="3850518">)</span>&nbsp;<span class="op" id="3850520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850525"><a href="/gostd/go/ast/import.go.html#3850421">deduped</a></span>&nbsp;<span class="op" id="3850533">=</span>&nbsp;<span class="builtinfunc" id="3850535">append</span><span class="op" id="3850541">(</span><span class="ident" id="3850542"><a href="/gostd/go/ast/import.go.html#3850421">deduped</a></span><span class="op" id="3850549">,</span>&nbsp;<span class="ident" id="3850551"><a href="/gostd/go/ast/import.go.html#3850450">s</a></span><span class="op" id="3850552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850556">}</span>&nbsp;<span class="keyword" id="3850558">else</span>&nbsp;<span class="op" id="3850563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850568">p</span>&nbsp;<span class="op" id="3850570">:=</span>&nbsp;<span class="ident" id="3850573"><a href="/gostd/go/ast/import.go.html#3850450">s</a></span><span class="op" id="3850574">.</span><span class="ident" id="3850575"><a href="/gostd/go/ast/ast.go.html#3795032">Pos</a></span><span class="op" id="3850578">(</span><span class="op" id="3850579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850584"><a href="/gostd/go/ast/import.go.html#3848891">fset</a></span><span class="op" id="3850588">.</span><span class="ident" id="3850589"><a href="/gostd/go/token/position.go.html#3886425">File</a></span><span class="op" id="3850593">(</span><span class="ident" id="3850594"><a href="/gostd/go/ast/import.go.html#3850568">p</a></span><span class="op" id="3850595">)</span><span class="op" id="3850596">.</span><span class="ident" id="3850597"><a href="/gostd/go/token/position.go.html#3877976">MergeLine</a></span><span class="op" id="3850606">(</span><span class="ident" id="3850607"><a href="/gostd/go/ast/import.go.html#3848891">fset</a></span><span class="op" id="3850611">.</span><span class="ident" id="3850612"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="3850620">(</span><span class="ident" id="3850621"><a href="/gostd/go/ast/import.go.html#3850568">p</a></span><span class="op" id="3850622">)</span><span class="op" id="3850623">.</span><span class="ident" id="3850624"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="3850628">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850638"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span>&nbsp;<span class="op" id="3850644">=</span>&nbsp;<span class="ident" id="3850646"><a href="/gostd/go/ast/import.go.html#3850421">deduped</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3850656">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850685">for</span>&nbsp;<span class="ident" id="3850689">i</span><span class="op" id="3850690">,</span>&nbsp;<span class="ident" id="3850692">s</span>&nbsp;<span class="op" id="3850694">:=</span>&nbsp;<span class="keyword" id="3850697">range</span>&nbsp;<span class="ident" id="3850703"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span>&nbsp;<span class="op" id="3850709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850713">s</span>&nbsp;<span class="op" id="3850715">:=</span>&nbsp;<span class="ident" id="3850718"><a href="/gostd/go/ast/import.go.html#3850692">s</a></span><span class="op" id="3850719">.</span><span class="op" id="3850720">(</span><span class="op" id="3850721">*</span><span class="ident" id="3850722"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="3850732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850736">if</span>&nbsp;<span class="ident" id="3850739"><a href="/gostd/go/ast/import.go.html#3850713">s</a></span><span class="op" id="3850740">.</span><span class="ident" id="3850741"><a href="/gostd/go/ast/ast.go.html#3819691">Name</a></span>&nbsp;<span class="op" id="3850746">!=</span>&nbsp;<span class="builtintype" id="3850749">nil</span>&nbsp;<span class="op" id="3850753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850758"><a href="/gostd/go/ast/import.go.html#3850713">s</a></span><span class="op" id="3850759">.</span><span class="ident" id="3850760"><a href="/gostd/go/ast/ast.go.html#3819691">Name</a></span><span class="op" id="3850764">.</span><span class="ident" id="3850765"><a href="/gostd/go/ast/ast.go.html#3800256">NamePos</a></span>&nbsp;<span class="op" id="3850773">=</span>&nbsp;<span class="ident" id="3850775"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3850778">[</span><span class="ident" id="3850779"><a href="/gostd/go/ast/import.go.html#3850689">i</a></span><span class="op" id="3850780">]</span><span class="op" id="3850781">.</span><span class="ident" id="3850782"><a href="/gostd/go/ast/import.go.html#3848840">Start</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850790">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850794"><a href="/gostd/go/ast/import.go.html#3850713">s</a></span><span class="op" id="3850795">.</span><span class="ident" id="3850796"><a href="/gostd/go/ast/ast.go.html#3819761">Path</a></span><span class="op" id="3850800">.</span><span class="ident" id="3850801"><a href="/gostd/go/ast/ast.go.html#3800718">ValuePos</a></span>&nbsp;<span class="op" id="3850810">=</span>&nbsp;<span class="ident" id="3850812"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3850815">[</span><span class="ident" id="3850816"><a href="/gostd/go/ast/import.go.html#3850689">i</a></span><span class="op" id="3850817">]</span><span class="op" id="3850818">.</span><span class="ident" id="3850819"><a href="/gostd/go/ast/import.go.html#3848840">Start</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850827"><a href="/gostd/go/ast/import.go.html#3850713">s</a></span><span class="op" id="3850828">.</span><span class="ident" id="3850829"><a href="/gostd/go/ast/ast.go.html#3819849">EndPos</a></span>&nbsp;<span class="op" id="3850836">=</span>&nbsp;<span class="ident" id="3850838"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3850841">[</span><span class="ident" id="3850842"><a href="/gostd/go/ast/import.go.html#3850689">i</a></span><span class="op" id="3850843">]</span><span class="op" id="3850844">.</span><span class="ident" id="3850845"><a href="/gostd/go/ast/import.go.html#3848857">End</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850851">for</span>&nbsp;<span class="ident" id="3850855">_</span><span class="op" id="3850856">,</span>&nbsp;<span class="ident" id="3850858">g</span>&nbsp;<span class="op" id="3850860">:=</span>&nbsp;<span class="keyword" id="3850863">range</span>&nbsp;<span class="ident" id="3850869"><a href="/gostd/go/ast/import.go.html#3849766">importComment</a></span><span class="op" id="3850882">[</span><span class="ident" id="3850883"><a href="/gostd/go/ast/import.go.html#3850713">s</a></span><span class="op" id="3850884">]</span>&nbsp;<span class="op" id="3850886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850891">for</span>&nbsp;<span class="ident" id="3850895">_</span><span class="op" id="3850896">,</span>&nbsp;<span class="ident" id="3850898">c</span>&nbsp;<span class="op" id="3850900">:=</span>&nbsp;<span class="keyword" id="3850903">range</span>&nbsp;<span class="ident" id="3850909"><a href="/gostd/go/ast/import.go.html#3850858">g</a></span><span class="op" id="3850910">.</span><span class="ident" id="3850911"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span>&nbsp;<span class="op" id="3850916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850922"><a href="/gostd/go/ast/import.go.html#3850898">c</a></span><span class="op" id="3850923">.</span><span class="ident" id="3850924"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span>&nbsp;<span class="op" id="3850930">=</span>&nbsp;<span class="ident" id="3850932"><a href="/gostd/go/ast/import.go.html#3849177">pos</a></span><span class="op" id="3850935">[</span><span class="ident" id="3850936"><a href="/gostd/go/ast/import.go.html#3850689">i</a></span><span class="op" id="3850937">]</span><span class="op" id="3850938">.</span><span class="ident" id="3850939"><a href="/gostd/go/ast/import.go.html#3848857">End</a></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3850953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3850957"><a href="/gostd/go/ast/import.go.html#3846973">sort</a></span><span class="op" id="3850961">.</span><span class="ident" id="3850962"><a href="/gostd/sort/sort.go.html#2015380">Sort</a></span><span class="op" id="3850966">(</span><span class="ident" id="3850967"><a href="/gostd/go/ast/import.go.html#3851483">byCommentPos</a></span><span class="op" id="3850979">(</span><span class="ident" id="3850980"><a href="/gostd/go/ast/import.go.html#3849671">comments</a></span><span class="op" id="3850988">)</span><span class="op" id="3850989">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3850993">return</span>&nbsp;<span class="ident" id="3851000"><a href="/gostd/go/ast/import.go.html#3848921">specs</a></span><br>
<span class="lineno"></span><span class="op" id="3851006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3851009">type</span>&nbsp;<span class="ident" id="3851014">byImportSpec</span>&nbsp;<span class="op" id="3851027">[</span><span class="op" id="3851028">]</span><span class="ident" id="3851029"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span>&nbsp;<span class="comment" id="3851034">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3851059">func</span>&nbsp;<span class="op" id="3851064">(</span><span class="ident" id="3851065">x</span>&nbsp;<span class="ident" id="3851067"><a href="/gostd/go/ast/import.go.html#3851014">byImportSpec</a></span><span class="op" id="3851079">)</span>&nbsp;<span class="ident" id="3851081">Len</span><span class="op" id="3851084">(</span><span class="op" id="3851085">)</span>&nbsp;<span class="builtintype" id="3851087">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3851096">{</span>&nbsp;<span class="keyword" id="3851098">return</span>&nbsp;<span class="builtinfunc" id="3851105">len</span><span class="op" id="3851108">(</span><span class="ident" id="3851109"><a href="/gostd/go/ast/import.go.html#3851065">x</a></span><span class="op" id="3851110">)</span>&nbsp;<span class="op" id="3851112">}</span><br>
<span class="lineno"></span><span class="keyword" id="3851114">func</span>&nbsp;<span class="op" id="3851119">(</span><span class="ident" id="3851120">x</span>&nbsp;<span class="ident" id="3851122"><a href="/gostd/go/ast/import.go.html#3851014">byImportSpec</a></span><span class="op" id="3851134">)</span>&nbsp;<span class="ident" id="3851136">Swap</span><span class="op" id="3851140">(</span><span class="ident" id="3851141">i</span><span class="op" id="3851142">,</span>&nbsp;<span class="ident" id="3851144">j</span>&nbsp;<span class="builtintype" id="3851146">int</span><span class="op" id="3851149">)</span>&nbsp;<span class="op" id="3851151">{</span>&nbsp;<span class="ident" id="3851153"><a href="/gostd/go/ast/import.go.html#3851120">x</a></span><span class="op" id="3851154">[</span><span class="ident" id="3851155"><a href="/gostd/go/ast/import.go.html#3851141">i</a></span><span class="op" id="3851156">]</span><span class="op" id="3851157">,</span>&nbsp;<span class="ident" id="3851159"><a href="/gostd/go/ast/import.go.html#3851120">x</a></span><span class="op" id="3851160">[</span><span class="ident" id="3851161"><a href="/gostd/go/ast/import.go.html#3851144">j</a></span><span class="op" id="3851162">]</span>&nbsp;<span class="op" id="3851164">=</span>&nbsp;<span class="ident" id="3851166"><a href="/gostd/go/ast/import.go.html#3851120">x</a></span><span class="op" id="3851167">[</span><span class="ident" id="3851168"><a href="/gostd/go/ast/import.go.html#3851144">j</a></span><span class="op" id="3851169">]</span><span class="op" id="3851170">,</span>&nbsp;<span class="ident" id="3851172"><a href="/gostd/go/ast/import.go.html#3851120">x</a></span><span class="op" id="3851173">[</span><span class="ident" id="3851174"><a href="/gostd/go/ast/import.go.html#3851141">i</a></span><span class="op" id="3851175">]</span>&nbsp;<span class="op" id="3851177">}</span><br>
<span class="lineno"></span><span class="keyword" id="3851179">func</span>&nbsp;<span class="op" id="3851184">(</span><span class="ident" id="3851185">x</span>&nbsp;<span class="ident" id="3851187"><a href="/gostd/go/ast/import.go.html#3851014">byImportSpec</a></span><span class="op" id="3851199">)</span>&nbsp;<span class="ident" id="3851201">Less</span><span class="op" id="3851205">(</span><span class="ident" id="3851206">i</span><span class="op" id="3851207">,</span>&nbsp;<span class="ident" id="3851209">j</span>&nbsp;<span class="builtintype" id="3851211">int</span><span class="op" id="3851214">)</span>&nbsp;<span class="builtintype" id="3851216">bool</span>&nbsp;<span class="op" id="3851221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3851224">ipath</span>&nbsp;<span class="op" id="3851230">:=</span>&nbsp;<span class="ident" id="3851233"><a href="/gostd/go/ast/import.go.html#3848211">importPath</a></span><span class="op" id="3851243">(</span><span class="ident" id="3851244"><a href="/gostd/go/ast/import.go.html#3851185">x</a></span><span class="op" id="3851245">[</span><span class="ident" id="3851246"><a href="/gostd/go/ast/import.go.html#3851206">i</a></span><span class="op" id="3851247">]</span><span class="op" id="3851248">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3851251">jpath</span>&nbsp;<span class="op" id="3851257">:=</span>&nbsp;<span class="ident" id="3851260"><a href="/gostd/go/ast/import.go.html#3848211">importPath</a></span><span class="op" id="3851270">(</span><span class="ident" id="3851271"><a href="/gostd/go/ast/import.go.html#3851185">x</a></span><span class="op" id="3851272">[</span><span class="ident" id="3851273"><a href="/gostd/go/ast/import.go.html#3851209">j</a></span><span class="op" id="3851274">]</span><span class="op" id="3851275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3851278">if</span>&nbsp;<span class="ident" id="3851281"><a href="/gostd/go/ast/import.go.html#3851224">ipath</a></span>&nbsp;<span class="op" id="3851287">!=</span>&nbsp;<span class="ident" id="3851290"><a href="/gostd/go/ast/import.go.html#3851251">jpath</a></span>&nbsp;<span class="op" id="3851296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3851300">return</span>&nbsp;<span class="ident" id="3851307"><a href="/gostd/go/ast/import.go.html#3851224">ipath</a></span>&nbsp;<span class="op" id="3851313">&lt;</span>&nbsp;<span class="ident" id="3851315"><a href="/gostd/go/ast/import.go.html#3851251">jpath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3851322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3851325">iname</span>&nbsp;<span class="op" id="3851331">:=</span>&nbsp;<span class="ident" id="3851334"><a href="/gostd/go/ast/import.go.html#3848344">importName</a></span><span class="op" id="3851344">(</span><span class="ident" id="3851345"><a href="/gostd/go/ast/import.go.html#3851185">x</a></span><span class="op" id="3851346">[</span><span class="ident" id="3851347"><a href="/gostd/go/ast/import.go.html#3851206">i</a></span><span class="op" id="3851348">]</span><span class="op" id="3851349">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3851352">jname</span>&nbsp;<span class="op" id="3851358">:=</span>&nbsp;<span class="ident" id="3851361"><a href="/gostd/go/ast/import.go.html#3848344">importName</a></span><span class="op" id="3851371">(</span><span class="ident" id="3851372"><a href="/gostd/go/ast/import.go.html#3851185">x</a></span><span class="op" id="3851373">[</span><span class="ident" id="3851374"><a href="/gostd/go/ast/import.go.html#3851209">j</a></span><span class="op" id="3851375">]</span><span class="op" id="3851376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3851379">if</span>&nbsp;<span class="ident" id="3851382"><a href="/gostd/go/ast/import.go.html#3851325">iname</a></span>&nbsp;<span class="op" id="3851388">!=</span>&nbsp;<span class="ident" id="3851391"><a href="/gostd/go/ast/import.go.html#3851352">jname</a></span>&nbsp;<span class="op" id="3851397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3851401">return</span>&nbsp;<span class="ident" id="3851408"><a href="/gostd/go/ast/import.go.html#3851325">iname</a></span>&nbsp;<span class="op" id="3851414">&lt;</span>&nbsp;<span class="ident" id="3851416"><a href="/gostd/go/ast/import.go.html#3851352">jname</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3851423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3851426">return</span>&nbsp;<span class="ident" id="3851433"><a href="/gostd/go/ast/import.go.html#3848452">importComment</a></span><span class="op" id="3851446">(</span><span class="ident" id="3851447"><a href="/gostd/go/ast/import.go.html#3851185">x</a></span><span class="op" id="3851448">[</span><span class="ident" id="3851449"><a href="/gostd/go/ast/import.go.html#3851206">i</a></span><span class="op" id="3851450">]</span><span class="op" id="3851451">)</span>&nbsp;<span class="op" id="3851453">&lt;</span>&nbsp;<span class="ident" id="3851455"><a href="/gostd/go/ast/import.go.html#3848452">importComment</a></span><span class="op" id="3851468">(</span><span class="ident" id="3851469"><a href="/gostd/go/ast/import.go.html#3851185">x</a></span><span class="op" id="3851470">[</span><span class="ident" id="3851471"><a href="/gostd/go/ast/import.go.html#3851209">j</a></span><span class="op" id="3851472">]</span><span class="op" id="3851473">)</span><br>
<span class="lineno">190</span><span class="op" id="3851475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3851478">type</span>&nbsp;<span class="ident" id="3851483">byCommentPos</span>&nbsp;<span class="op" id="3851496">[</span><span class="op" id="3851497">]</span><span class="op" id="3851498">*</span><span class="ident" id="3851499"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3851513">func</span>&nbsp;<span class="op" id="3851518">(</span><span class="ident" id="3851519">x</span>&nbsp;<span class="ident" id="3851521"><a href="/gostd/go/ast/import.go.html#3851483">byCommentPos</a></span><span class="op" id="3851533">)</span>&nbsp;<span class="ident" id="3851535">Len</span><span class="op" id="3851538">(</span><span class="op" id="3851539">)</span>&nbsp;<span class="builtintype" id="3851541">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3851555">{</span>&nbsp;<span class="keyword" id="3851557">return</span>&nbsp;<span class="builtinfunc" id="3851564">len</span><span class="op" id="3851567">(</span><span class="ident" id="3851568"><a href="/gostd/go/ast/import.go.html#3851519">x</a></span><span class="op" id="3851569">)</span>&nbsp;<span class="op" id="3851571">}</span><br>
<span class="lineno">195</span><span class="keyword" id="3851573">func</span>&nbsp;<span class="op" id="3851578">(</span><span class="ident" id="3851579">x</span>&nbsp;<span class="ident" id="3851581"><a href="/gostd/go/ast/import.go.html#3851483">byCommentPos</a></span><span class="op" id="3851593">)</span>&nbsp;<span class="ident" id="3851595">Swap</span><span class="op" id="3851599">(</span><span class="ident" id="3851600">i</span><span class="op" id="3851601">,</span>&nbsp;<span class="ident" id="3851603">j</span>&nbsp;<span class="builtintype" id="3851605">int</span><span class="op" id="3851608">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3851615">{</span>&nbsp;<span class="ident" id="3851617"><a href="/gostd/go/ast/import.go.html#3851579">x</a></span><span class="op" id="3851618">[</span><span class="ident" id="3851619"><a href="/gostd/go/ast/import.go.html#3851600">i</a></span><span class="op" id="3851620">]</span><span class="op" id="3851621">,</span>&nbsp;<span class="ident" id="3851623"><a href="/gostd/go/ast/import.go.html#3851579">x</a></span><span class="op" id="3851624">[</span><span class="ident" id="3851625"><a href="/gostd/go/ast/import.go.html#3851603">j</a></span><span class="op" id="3851626">]</span>&nbsp;<span class="op" id="3851628">=</span>&nbsp;<span class="ident" id="3851630"><a href="/gostd/go/ast/import.go.html#3851579">x</a></span><span class="op" id="3851631">[</span><span class="ident" id="3851632"><a href="/gostd/go/ast/import.go.html#3851603">j</a></span><span class="op" id="3851633">]</span><span class="op" id="3851634">,</span>&nbsp;<span class="ident" id="3851636"><a href="/gostd/go/ast/import.go.html#3851579">x</a></span><span class="op" id="3851637">[</span><span class="ident" id="3851638"><a href="/gostd/go/ast/import.go.html#3851600">i</a></span><span class="op" id="3851639">]</span>&nbsp;<span class="op" id="3851641">}</span><br>
<span class="lineno"></span><span class="keyword" id="3851643">func</span>&nbsp;<span class="op" id="3851648">(</span><span class="ident" id="3851649">x</span>&nbsp;<span class="ident" id="3851651"><a href="/gostd/go/ast/import.go.html#3851483">byCommentPos</a></span><span class="op" id="3851663">)</span>&nbsp;<span class="ident" id="3851665">Less</span><span class="op" id="3851669">(</span><span class="ident" id="3851670">i</span><span class="op" id="3851671">,</span>&nbsp;<span class="ident" id="3851673">j</span>&nbsp;<span class="builtintype" id="3851675">int</span><span class="op" id="3851678">)</span>&nbsp;<span class="builtintype" id="3851680">bool</span>&nbsp;<span class="op" id="3851685">{</span>&nbsp;<span class="keyword" id="3851687">return</span>&nbsp;<span class="ident" id="3851694"><a href="/gostd/go/ast/import.go.html#3851649">x</a></span><span class="op" id="3851695">[</span><span class="ident" id="3851696"><a href="/gostd/go/ast/import.go.html#3851670">i</a></span><span class="op" id="3851697">]</span><span class="op" id="3851698">.</span><span class="ident" id="3851699"><a href="/gostd/go/ast/ast.go.html#3796116">Pos</a></span><span class="op" id="3851702">(</span><span class="op" id="3851703">)</span>&nbsp;<span class="op" id="3851705">&lt;</span>&nbsp;<span class="ident" id="3851707"><a href="/gostd/go/ast/import.go.html#3851649">x</a></span><span class="op" id="3851708">[</span><span class="ident" id="3851709"><a href="/gostd/go/ast/import.go.html#3851673">j</a></span><span class="op" id="3851710">]</span><span class="op" id="3851711">.</span><span class="ident" id="3851712"><a href="/gostd/go/ast/ast.go.html#3796116">Pos</a></span><span class="op" id="3851715">(</span><span class="op" id="3851716">)</span>&nbsp;<span class="op" id="3851718">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
