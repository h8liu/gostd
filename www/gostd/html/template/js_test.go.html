<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7374031">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7374086">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7374140">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7374191">package</span>&nbsp;<span class="ident" id="7374199">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374209">import</span>&nbsp;<span class="op" id="7374216">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374219">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374228">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374236">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374247">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7374257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374260">func</span>&nbsp;<span class="ident" id="7374265">TestNextJsCtx</span><span class="op" id="7374278">(</span><span class="ident" id="7374279">t</span>&nbsp;<span class="op" id="7374281">*</span><span class="ident" id="7374282">testing</span><span class="op" id="7374289">.</span><span class="ident" id="7374290">T</span><span class="op" id="7374291">)</span>&nbsp;<span class="op" id="7374293">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374296">tests</span>&nbsp;<span class="op" id="7374302">:=</span>&nbsp;<span class="op" id="7374305">[</span><span class="op" id="7374306">]</span><span class="keyword" id="7374307">struct</span>&nbsp;<span class="op" id="7374314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374318">jsCtx</span>&nbsp;<span class="ident" id="7374324">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374332">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7374338">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374346">}</span><span class="op" id="7374347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374351">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374395">{</span><span class="ident" id="7374396">jsCtxRegexp</span><span class="op" id="7374407">,</span>&nbsp;<span class="string" id="7374409">&#34;;&#34;</span><span class="op" id="7374412">}</span><span class="op" id="7374413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374417">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374444">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374497">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374560">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374623">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374646">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374696">{</span><span class="ident" id="7374697">jsCtxRegexp</span><span class="op" id="7374708">,</span>&nbsp;<span class="string" id="7374710">&#34;}&#34;</span><span class="op" id="7374713">}</span><span class="op" id="7374714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374718">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374784">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374806">{</span><span class="ident" id="7374807">jsCtxDivOp</span><span class="op" id="7374817">,</span>&nbsp;<span class="string" id="7374819">&#34;)&#34;</span><span class="op" id="7374822">}</span><span class="op" id="7374823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374827">{</span><span class="ident" id="7374828">jsCtxDivOp</span><span class="op" id="7374838">,</span>&nbsp;<span class="string" id="7374840">&#34;]&#34;</span><span class="op" id="7374843">}</span><span class="op" id="7374844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374848">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374912">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374945">{</span><span class="ident" id="7374946">jsCtxRegexp</span><span class="op" id="7374957">,</span>&nbsp;<span class="string" id="7374959">&#34;(&#34;</span><span class="op" id="7374962">}</span><span class="op" id="7374963">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374967">{</span><span class="ident" id="7374968">jsCtxRegexp</span><span class="op" id="7374979">,</span>&nbsp;<span class="string" id="7374981">&#34;[&#34;</span><span class="op" id="7374984">}</span><span class="op" id="7374985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374989">{</span><span class="ident" id="7374990">jsCtxRegexp</span><span class="op" id="7375001">,</span>&nbsp;<span class="string" id="7375003">&#34;{&#34;</span><span class="op" id="7375006">}</span><span class="op" id="7375007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375011">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375075">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375109">{</span><span class="ident" id="7375110">jsCtxRegexp</span><span class="op" id="7375121">,</span>&nbsp;<span class="string" id="7375123">&#34;=&#34;</span><span class="op" id="7375126">}</span><span class="op" id="7375127">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375131">{</span><span class="ident" id="7375132">jsCtxRegexp</span><span class="op" id="7375143">,</span>&nbsp;<span class="string" id="7375145">&#34;+=&#34;</span><span class="op" id="7375149">}</span><span class="op" id="7375150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375154">{</span><span class="ident" id="7375155">jsCtxRegexp</span><span class="op" id="7375166">,</span>&nbsp;<span class="string" id="7375168">&#34;*=&#34;</span><span class="op" id="7375172">}</span><span class="op" id="7375173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375177">{</span><span class="ident" id="7375178">jsCtxRegexp</span><span class="op" id="7375189">,</span>&nbsp;<span class="string" id="7375191">&#34;*&#34;</span><span class="op" id="7375194">}</span><span class="op" id="7375195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375199">{</span><span class="ident" id="7375200">jsCtxRegexp</span><span class="op" id="7375211">,</span>&nbsp;<span class="string" id="7375213">&#34;!&#34;</span><span class="op" id="7375216">}</span><span class="op" id="7375217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375221">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375285">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375298">{</span><span class="ident" id="7375299">jsCtxRegexp</span><span class="op" id="7375310">,</span>&nbsp;<span class="string" id="7375312">&#34;+&#34;</span><span class="op" id="7375315">}</span><span class="op" id="7375316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375320">{</span><span class="ident" id="7375321">jsCtxRegexp</span><span class="op" id="7375332">,</span>&nbsp;<span class="string" id="7375334">&#34;-&#34;</span><span class="op" id="7375337">}</span><span class="op" id="7375338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375342">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375388">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375450">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375514">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375563">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375627">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375640">{</span><span class="ident" id="7375641">jsCtxDivOp</span><span class="op" id="7375651">,</span>&nbsp;<span class="string" id="7375653">&#34;--&#34;</span><span class="op" id="7375657">}</span><span class="op" id="7375658">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375662">{</span><span class="ident" id="7375663">jsCtxDivOp</span><span class="op" id="7375673">,</span>&nbsp;<span class="string" id="7375675">&#34;++&#34;</span><span class="op" id="7375679">}</span><span class="op" id="7375680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375684">{</span><span class="ident" id="7375685">jsCtxDivOp</span><span class="op" id="7375695">,</span>&nbsp;<span class="string" id="7375697">&#34;x--&#34;</span><span class="op" id="7375702">}</span><span class="op" id="7375703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375707">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375770">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375790">{</span><span class="ident" id="7375791">jsCtxRegexp</span><span class="op" id="7375802">,</span>&nbsp;<span class="string" id="7375804">&#34;x---&#34;</span><span class="op" id="7375810">}</span><span class="op" id="7375811">,</span>&nbsp;<span class="comment" id="7375813">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375841">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375907">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375974">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375993">{</span><span class="ident" id="7375994">jsCtxRegexp</span><span class="op" id="7376005">,</span>&nbsp;<span class="string" id="7376007">&#34;return&#34;</span><span class="op" id="7376015">}</span><span class="op" id="7376016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376020">{</span><span class="ident" id="7376021">jsCtxRegexp</span><span class="op" id="7376032">,</span>&nbsp;<span class="string" id="7376034">&#34;return&nbsp;&#34;</span><span class="op" id="7376043">}</span><span class="op" id="7376044">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376048">{</span><span class="ident" id="7376049">jsCtxRegexp</span><span class="op" id="7376060">,</span>&nbsp;<span class="string" id="7376062">&#34;return\t&#34;</span><span class="op" id="7376072">}</span><span class="op" id="7376073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376077">{</span><span class="ident" id="7376078">jsCtxRegexp</span><span class="op" id="7376089">,</span>&nbsp;<span class="string" id="7376091">&#34;return\n&#34;</span><span class="op" id="7376101">}</span><span class="op" id="7376102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376106">{</span><span class="ident" id="7376107">jsCtxRegexp</span><span class="op" id="7376118">,</span>&nbsp;<span class="string" id="7376120">&#34;return\u2028&#34;</span><span class="op" id="7376134">}</span><span class="op" id="7376135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376139">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376205">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376267">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376333">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376398">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376464">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376475">{</span><span class="ident" id="7376476">jsCtxDivOp</span><span class="op" id="7376486">,</span>&nbsp;<span class="string" id="7376488">&#34;x&#34;</span><span class="op" id="7376491">}</span><span class="op" id="7376492">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376496">{</span><span class="ident" id="7376497">jsCtxDivOp</span><span class="op" id="7376507">,</span>&nbsp;<span class="string" id="7376509">&#34;x&nbsp;&#34;</span><span class="op" id="7376513">}</span><span class="op" id="7376514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376518">{</span><span class="ident" id="7376519">jsCtxDivOp</span><span class="op" id="7376529">,</span>&nbsp;<span class="string" id="7376531">&#34;x\t&#34;</span><span class="op" id="7376536">}</span><span class="op" id="7376537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376541">{</span><span class="ident" id="7376542">jsCtxDivOp</span><span class="op" id="7376552">,</span>&nbsp;<span class="string" id="7376554">&#34;x\n&#34;</span><span class="op" id="7376559">}</span><span class="op" id="7376560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376564">{</span><span class="ident" id="7376565">jsCtxDivOp</span><span class="op" id="7376575">,</span>&nbsp;<span class="string" id="7376577">&#34;x\u2028&#34;</span><span class="op" id="7376586">}</span><span class="op" id="7376587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376591">{</span><span class="ident" id="7376592">jsCtxDivOp</span><span class="op" id="7376602">,</span>&nbsp;<span class="string" id="7376604">&#34;preturn&#34;</span><span class="op" id="7376613">}</span><span class="op" id="7376614">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376618">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376648">{</span><span class="ident" id="7376649">jsCtxDivOp</span><span class="op" id="7376659">,</span>&nbsp;<span class="string" id="7376661">&#34;0&#34;</span><span class="op" id="7376664">}</span><span class="op" id="7376665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376669">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376724">{</span><span class="ident" id="7376725">jsCtxDivOp</span><span class="op" id="7376735">,</span>&nbsp;<span class="string" id="7376737">&#34;0.&#34;</span><span class="op" id="7376741">}</span><span class="op" id="7376742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376745">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376749">for</span>&nbsp;<span class="ident" id="7376753">_</span><span class="op" id="7376754">,</span>&nbsp;<span class="ident" id="7376756">test</span>&nbsp;<span class="op" id="7376761">:=</span>&nbsp;<span class="keyword" id="7376764">range</span>&nbsp;<span class="ident" id="7376770">tests</span>&nbsp;<span class="op" id="7376776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376780">if</span>&nbsp;<span class="ident" id="7376783">nextJSCtx</span><span class="op" id="7376792">(</span><span class="op" id="7376793">[</span><span class="op" id="7376794">]</span><span class="builtintype" id="7376795">byte</span><span class="op" id="7376799">(</span><span class="ident" id="7376800">test</span><span class="op" id="7376804">.</span><span class="ident" id="7376805">s</span><span class="op" id="7376806">)</span><span class="op" id="7376807">,</span>&nbsp;<span class="ident" id="7376809">jsCtxRegexp</span><span class="op" id="7376820">)</span>&nbsp;<span class="op" id="7376822">!=</span>&nbsp;<span class="ident" id="7376825">test</span><span class="op" id="7376829">.</span><span class="ident" id="7376830">jsCtx</span>&nbsp;<span class="op" id="7376836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376841">t</span><span class="op" id="7376842">.</span><span class="ident" id="7376843">Errorf</span><span class="op" id="7376849">(</span><span class="string" id="7376850">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7376866">,</span>&nbsp;<span class="ident" id="7376868">test</span><span class="op" id="7376872">.</span><span class="ident" id="7376873">jsCtx</span><span class="op" id="7376878">,</span>&nbsp;<span class="ident" id="7376880">test</span><span class="op" id="7376884">.</span><span class="ident" id="7376885">s</span><span class="op" id="7376886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376890">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376894">if</span>&nbsp;<span class="ident" id="7376897">nextJSCtx</span><span class="op" id="7376906">(</span><span class="op" id="7376907">[</span><span class="op" id="7376908">]</span><span class="builtintype" id="7376909">byte</span><span class="op" id="7376913">(</span><span class="ident" id="7376914">test</span><span class="op" id="7376918">.</span><span class="ident" id="7376919">s</span><span class="op" id="7376920">)</span><span class="op" id="7376921">,</span>&nbsp;<span class="ident" id="7376923">jsCtxDivOp</span><span class="op" id="7376933">)</span>&nbsp;<span class="op" id="7376935">!=</span>&nbsp;<span class="ident" id="7376938">test</span><span class="op" id="7376942">.</span><span class="ident" id="7376943">jsCtx</span>&nbsp;<span class="op" id="7376949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376954">t</span><span class="op" id="7376955">.</span><span class="ident" id="7376956">Errorf</span><span class="op" id="7376962">(</span><span class="string" id="7376963">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7376979">,</span>&nbsp;<span class="ident" id="7376981">test</span><span class="op" id="7376985">.</span><span class="ident" id="7376986">jsCtx</span><span class="op" id="7376991">,</span>&nbsp;<span class="ident" id="7376993">test</span><span class="op" id="7376997">.</span><span class="ident" id="7376998">s</span><span class="op" id="7376999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377010">if</span>&nbsp;<span class="ident" id="7377013">nextJSCtx</span><span class="op" id="7377022">(</span><span class="op" id="7377023">[</span><span class="op" id="7377024">]</span><span class="builtintype" id="7377025">byte</span><span class="op" id="7377029">(</span><span class="string" id="7377030">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7377035">)</span><span class="op" id="7377036">,</span>&nbsp;<span class="ident" id="7377038">jsCtxRegexp</span><span class="op" id="7377049">)</span>&nbsp;<span class="op" id="7377051">!=</span>&nbsp;<span class="ident" id="7377054">jsCtxRegexp</span>&nbsp;<span class="op" id="7377066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377070">t</span><span class="op" id="7377071">.</span><span class="ident" id="7377072">Error</span><span class="op" id="7377077">(</span><span class="string" id="7377078">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7377092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377099">if</span>&nbsp;<span class="ident" id="7377102">nextJSCtx</span><span class="op" id="7377111">(</span><span class="op" id="7377112">[</span><span class="op" id="7377113">]</span><span class="builtintype" id="7377114">byte</span><span class="op" id="7377118">(</span><span class="string" id="7377119">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7377124">)</span><span class="op" id="7377125">,</span>&nbsp;<span class="ident" id="7377127">jsCtxDivOp</span><span class="op" id="7377137">)</span>&nbsp;<span class="op" id="7377139">!=</span>&nbsp;<span class="ident" id="7377142">jsCtxDivOp</span>&nbsp;<span class="op" id="7377153">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377157">t</span><span class="op" id="7377158">.</span><span class="ident" id="7377159">Error</span><span class="op" id="7377164">(</span><span class="string" id="7377165">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7377179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377182">}</span><br>
<span class="lineno"></span><span class="op" id="7377184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7377187">func</span>&nbsp;<span class="ident" id="7377192">TestJSValEscaper</span><span class="op" id="7377208">(</span><span class="ident" id="7377209">t</span>&nbsp;<span class="op" id="7377211">*</span><span class="ident" id="7377212">testing</span><span class="op" id="7377219">.</span><span class="ident" id="7377220">T</span><span class="op" id="7377221">)</span>&nbsp;<span class="op" id="7377223">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377226">tests</span>&nbsp;<span class="op" id="7377232">:=</span>&nbsp;<span class="op" id="7377235">[</span><span class="op" id="7377236">]</span><span class="keyword" id="7377237">struct</span>&nbsp;<span class="op" id="7377244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377248">x</span>&nbsp;&nbsp;<span class="keyword" id="7377251">interface</span><span class="op" id="7377260">{</span><span class="op" id="7377261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377265">js</span>&nbsp;<span class="builtintype" id="7377268">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377276">}</span><span class="op" id="7377277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377281">{</span><span class="builtintype" id="7377282">int</span><span class="op" id="7377285">(</span><span class="num" id="7377286">42</span><span class="op" id="7377288">)</span><span class="op" id="7377289">,</span>&nbsp;<span class="string" id="7377291">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377297">}</span><span class="op" id="7377298">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377302">{</span><span class="builtintype" id="7377303">uint</span><span class="op" id="7377307">(</span><span class="num" id="7377308">42</span><span class="op" id="7377310">)</span><span class="op" id="7377311">,</span>&nbsp;<span class="string" id="7377313">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377319">}</span><span class="op" id="7377320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377324">{</span><span class="builtintype" id="7377325">int16</span><span class="op" id="7377330">(</span><span class="num" id="7377331">42</span><span class="op" id="7377333">)</span><span class="op" id="7377334">,</span>&nbsp;<span class="string" id="7377336">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377342">}</span><span class="op" id="7377343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377347">{</span><span class="builtintype" id="7377348">uint16</span><span class="op" id="7377354">(</span><span class="num" id="7377355">42</span><span class="op" id="7377357">)</span><span class="op" id="7377358">,</span>&nbsp;<span class="string" id="7377360">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377366">}</span><span class="op" id="7377367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377371">{</span><span class="builtintype" id="7377372">int32</span><span class="op" id="7377377">(</span><span class="op" id="7377378">-</span><span class="num" id="7377379">42</span><span class="op" id="7377381">)</span><span class="op" id="7377382">,</span>&nbsp;<span class="string" id="7377384">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7377391">}</span><span class="op" id="7377392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377396">{</span><span class="builtintype" id="7377397">uint32</span><span class="op" id="7377403">(</span><span class="num" id="7377404">42</span><span class="op" id="7377406">)</span><span class="op" id="7377407">,</span>&nbsp;<span class="string" id="7377409">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377415">}</span><span class="op" id="7377416">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377420">{</span><span class="builtintype" id="7377421">int16</span><span class="op" id="7377426">(</span><span class="op" id="7377427">-</span><span class="num" id="7377428">42</span><span class="op" id="7377430">)</span><span class="op" id="7377431">,</span>&nbsp;<span class="string" id="7377433">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7377440">}</span><span class="op" id="7377441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377445">{</span><span class="builtintype" id="7377446">uint16</span><span class="op" id="7377452">(</span><span class="num" id="7377453">42</span><span class="op" id="7377455">)</span><span class="op" id="7377456">,</span>&nbsp;<span class="string" id="7377458">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377464">}</span><span class="op" id="7377465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377469">{</span><span class="ident" id="7377470">int64</span><span class="op" id="7377475">(</span><span class="op" id="7377476">-</span><span class="num" id="7377477">42</span><span class="op" id="7377479">)</span><span class="op" id="7377480">,</span>&nbsp;<span class="string" id="7377482">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7377489">}</span><span class="op" id="7377490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377494">{</span><span class="ident" id="7377495">uint64</span><span class="op" id="7377501">(</span><span class="num" id="7377502">42</span><span class="op" id="7377504">)</span><span class="op" id="7377505">,</span>&nbsp;<span class="string" id="7377507">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7377513">}</span><span class="op" id="7377514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377518">{</span><span class="ident" id="7377519">uint64</span><span class="op" id="7377525">(</span><span class="num" id="7377526">1</span><span class="op" id="7377527">)</span>&nbsp;<span class="op" id="7377529">&lt;&lt;</span>&nbsp;<span class="num" id="7377532">53</span><span class="op" id="7377534">,</span>&nbsp;<span class="string" id="7377536">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7377556">}</span><span class="op" id="7377557">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377561">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377613">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377667">{</span><span class="ident" id="7377668">uint64</span><span class="op" id="7377674">(</span><span class="num" id="7377675">1</span><span class="op" id="7377676">)</span><span class="op" id="7377677">&lt;&lt;</span><span class="num" id="7377679">53</span>&nbsp;<span class="op" id="7377682">+</span>&nbsp;<span class="num" id="7377684">1</span><span class="op" id="7377685">,</span>&nbsp;<span class="string" id="7377687">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7377707">}</span><span class="op" id="7377708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377712">{</span><span class="builtintype" id="7377713">float32</span><span class="op" id="7377720">(</span><span class="num" id="7377721">1.0</span><span class="op" id="7377724">)</span><span class="op" id="7377725">,</span>&nbsp;<span class="string" id="7377727">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7377732">}</span><span class="op" id="7377733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377737">{</span><span class="builtintype" id="7377738">float32</span><span class="op" id="7377745">(</span><span class="op" id="7377746">-</span><span class="num" id="7377747">1.0</span><span class="op" id="7377750">)</span><span class="op" id="7377751">,</span>&nbsp;<span class="string" id="7377753">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7377759">}</span><span class="op" id="7377760">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377764">{</span><span class="builtintype" id="7377765">float32</span><span class="op" id="7377772">(</span><span class="num" id="7377773">0.5</span><span class="op" id="7377776">)</span><span class="op" id="7377777">,</span>&nbsp;<span class="string" id="7377779">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7377786">}</span><span class="op" id="7377787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377791">{</span><span class="builtintype" id="7377792">float32</span><span class="op" id="7377799">(</span><span class="op" id="7377800">-</span><span class="num" id="7377801">0.5</span><span class="op" id="7377804">)</span><span class="op" id="7377805">,</span>&nbsp;<span class="string" id="7377807">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7377815">}</span><span class="op" id="7377816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377820">{</span><span class="builtintype" id="7377821">float32</span><span class="op" id="7377828">(</span><span class="num" id="7377829">1.0</span><span class="op" id="7377832">)</span>&nbsp;<span class="op" id="7377834">/</span>&nbsp;<span class="builtintype" id="7377836">float32</span><span class="op" id="7377843">(</span><span class="num" id="7377844">256</span><span class="op" id="7377847">)</span><span class="op" id="7377848">,</span>&nbsp;<span class="string" id="7377850">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7377864">}</span><span class="op" id="7377865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377869">{</span><span class="builtintype" id="7377870">float32</span><span class="op" id="7377877">(</span><span class="num" id="7377878">0</span><span class="op" id="7377879">)</span><span class="op" id="7377880">,</span>&nbsp;<span class="string" id="7377882">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7377887">}</span><span class="op" id="7377888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377892">{</span><span class="ident" id="7377893">math</span><span class="op" id="7377897">.</span><span class="ident" id="7377898">Copysign</span><span class="op" id="7377906">(</span><span class="num" id="7377907">0</span><span class="op" id="7377908">,</span>&nbsp;<span class="op" id="7377910">-</span><span class="num" id="7377911">1</span><span class="op" id="7377912">)</span><span class="op" id="7377913">,</span>&nbsp;<span class="string" id="7377915">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7377921">}</span><span class="op" id="7377922">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377926">{</span><span class="builtintype" id="7377927">float64</span><span class="op" id="7377934">(</span><span class="num" id="7377935">1.0</span><span class="op" id="7377938">)</span><span class="op" id="7377939">,</span>&nbsp;<span class="string" id="7377941">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7377946">}</span><span class="op" id="7377947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377951">{</span><span class="builtintype" id="7377952">float64</span><span class="op" id="7377959">(</span><span class="op" id="7377960">-</span><span class="num" id="7377961">1.0</span><span class="op" id="7377964">)</span><span class="op" id="7377965">,</span>&nbsp;<span class="string" id="7377967">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7377973">}</span><span class="op" id="7377974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377978">{</span><span class="builtintype" id="7377979">float64</span><span class="op" id="7377986">(</span><span class="num" id="7377987">0.5</span><span class="op" id="7377990">)</span><span class="op" id="7377991">,</span>&nbsp;<span class="string" id="7377993">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7378000">}</span><span class="op" id="7378001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378005">{</span><span class="builtintype" id="7378006">float64</span><span class="op" id="7378013">(</span><span class="op" id="7378014">-</span><span class="num" id="7378015">0.5</span><span class="op" id="7378018">)</span><span class="op" id="7378019">,</span>&nbsp;<span class="string" id="7378021">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7378029">}</span><span class="op" id="7378030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378034">{</span><span class="builtintype" id="7378035">float64</span><span class="op" id="7378042">(</span><span class="num" id="7378043">0</span><span class="op" id="7378044">)</span><span class="op" id="7378045">,</span>&nbsp;<span class="string" id="7378047">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7378052">}</span><span class="op" id="7378053">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378057">{</span><span class="ident" id="7378058">math</span><span class="op" id="7378062">.</span><span class="ident" id="7378063">Copysign</span><span class="op" id="7378071">(</span><span class="num" id="7378072">0</span><span class="op" id="7378073">,</span>&nbsp;<span class="op" id="7378075">-</span><span class="num" id="7378076">1</span><span class="op" id="7378077">)</span><span class="op" id="7378078">,</span>&nbsp;<span class="string" id="7378080">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7378086">}</span><span class="op" id="7378087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378091">{</span><span class="string" id="7378092">&#34;&#34;</span><span class="op" id="7378094">,</span>&nbsp;<span class="string" id="7378096">`&#34;&#34;`</span><span class="op" id="7378100">}</span><span class="op" id="7378101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378105">{</span><span class="string" id="7378106">&#34;foo&#34;</span><span class="op" id="7378111">,</span>&nbsp;<span class="string" id="7378113">`&#34;foo&#34;`</span><span class="op" id="7378120">}</span><span class="op" id="7378121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378125">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378140">{</span><span class="string" id="7378141">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7378159">,</span>&nbsp;<span class="string" id="7378161">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7378181">}</span><span class="op" id="7378182">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378186">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378234">{</span><span class="string" id="7378235">&#34;\t\x0b&#34;</span><span class="op" id="7378243">,</span>&nbsp;<span class="string" id="7378245">`&#34;\t\u000b&#34;`</span><span class="op" id="7378257">}</span><span class="op" id="7378258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378262">{</span><span class="keyword" id="7378263">struct</span><span class="op" id="7378269">{</span>&nbsp;<span class="ident" id="7378271">X</span><span class="op" id="7378272">,</span>&nbsp;<span class="ident" id="7378274">Y</span>&nbsp;<span class="builtintype" id="7378276">int</span>&nbsp;<span class="op" id="7378280">}</span><span class="op" id="7378281">{</span><span class="num" id="7378282">1</span><span class="op" id="7378283">,</span>&nbsp;<span class="num" id="7378285">2</span><span class="op" id="7378286">}</span><span class="op" id="7378287">,</span>&nbsp;<span class="string" id="7378289">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7378304">}</span><span class="op" id="7378305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378309">{</span><span class="op" id="7378310">[</span><span class="op" id="7378311">]</span><span class="keyword" id="7378312">interface</span><span class="op" id="7378321">{</span><span class="op" id="7378322">}</span><span class="op" id="7378323">{</span><span class="op" id="7378324">}</span><span class="op" id="7378325">,</span>&nbsp;<span class="string" id="7378327">&#34;[]&#34;</span><span class="op" id="7378331">}</span><span class="op" id="7378332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378336">{</span><span class="op" id="7378337">[</span><span class="op" id="7378338">]</span><span class="keyword" id="7378339">interface</span><span class="op" id="7378348">{</span><span class="op" id="7378349">}</span><span class="op" id="7378350">{</span><span class="num" id="7378351">42</span><span class="op" id="7378353">,</span>&nbsp;<span class="string" id="7378355">&#34;foo&#34;</span><span class="op" id="7378360">,</span>&nbsp;<span class="ident" id="7378362">nil</span><span class="op" id="7378365">}</span><span class="op" id="7378366">,</span>&nbsp;<span class="string" id="7378368">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7378385">}</span><span class="op" id="7378386">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378390">{</span><span class="op" id="7378391">[</span><span class="op" id="7378392">]</span><span class="builtintype" id="7378393">string</span><span class="op" id="7378399">{</span><span class="string" id="7378400">&#34;&lt;!--&#34;</span><span class="op" id="7378406">,</span>&nbsp;<span class="string" id="7378408">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7378419">,</span>&nbsp;<span class="string" id="7378421">&#34;--&gt;&#34;</span><span class="op" id="7378426">}</span><span class="op" id="7378427">,</span>&nbsp;<span class="string" id="7378429">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7378477">}</span><span class="op" id="7378478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378482">{</span><span class="string" id="7378483">&#34;&lt;!--&#34;</span><span class="op" id="7378489">,</span>&nbsp;<span class="string" id="7378491">`&#34;\u003c!--&#34;`</span><span class="op" id="7378504">}</span><span class="op" id="7378505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378509">{</span><span class="string" id="7378510">&#34;--&gt;&#34;</span><span class="op" id="7378515">,</span>&nbsp;<span class="string" id="7378517">`&#34;--\u003e&#34;`</span><span class="op" id="7378529">}</span><span class="op" id="7378530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378534">{</span><span class="string" id="7378535">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7378546">,</span>&nbsp;<span class="string" id="7378548">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7378566">}</span><span class="op" id="7378567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378571">{</span><span class="string" id="7378572">&#34;]]&gt;&#34;</span><span class="op" id="7378577">,</span>&nbsp;<span class="string" id="7378579">`&#34;]]\u003e&#34;`</span><span class="op" id="7378591">}</span><span class="op" id="7378592">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378596">{</span><span class="string" id="7378597">&#34;&lt;/script&#34;</span><span class="op" id="7378607">,</span>&nbsp;<span class="string" id="7378609">`&#34;\u003c/script&#34;`</span><span class="op" id="7378626">}</span><span class="op" id="7378627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378631">{</span><span class="string" id="7378632">&#34;\U0001D11E&#34;</span><span class="op" id="7378644">,</span>&nbsp;<span class="string" id="7378646">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7378662">}</span><span class="op" id="7378663">,</span>&nbsp;<span class="comment" id="7378665">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378691">for</span>&nbsp;<span class="ident" id="7378695">_</span><span class="op" id="7378696">,</span>&nbsp;<span class="ident" id="7378698">test</span>&nbsp;<span class="op" id="7378703">:=</span>&nbsp;<span class="keyword" id="7378706">range</span>&nbsp;<span class="ident" id="7378712">tests</span>&nbsp;<span class="op" id="7378718">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378722">if</span>&nbsp;<span class="ident" id="7378725">js</span>&nbsp;<span class="op" id="7378728">:=</span>&nbsp;<span class="ident" id="7378731">jsValEscaper</span><span class="op" id="7378743">(</span><span class="ident" id="7378744">test</span><span class="op" id="7378748">.</span><span class="ident" id="7378749">x</span><span class="op" id="7378750">)</span><span class="op" id="7378751">;</span>&nbsp;<span class="ident" id="7378753">js</span>&nbsp;<span class="op" id="7378756">!=</span>&nbsp;<span class="ident" id="7378759">test</span><span class="op" id="7378763">.</span><span class="ident" id="7378764">js</span>&nbsp;<span class="op" id="7378767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378772">t</span><span class="op" id="7378773">.</span><span class="ident" id="7378774">Errorf</span><span class="op" id="7378780">(</span><span class="string" id="7378781">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7378809">,</span>&nbsp;<span class="ident" id="7378811">test</span><span class="op" id="7378815">.</span><span class="ident" id="7378816">x</span><span class="op" id="7378817">,</span>&nbsp;<span class="ident" id="7378819">test</span><span class="op" id="7378823">.</span><span class="ident" id="7378824">js</span><span class="op" id="7378826">,</span>&nbsp;<span class="ident" id="7378828">js</span><span class="op" id="7378830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378838">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378895">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378912">a</span>&nbsp;<span class="op" id="7378914">:=</span>&nbsp;<span class="op" id="7378917">[</span><span class="op" id="7378918">]</span><span class="keyword" id="7378919">interface</span><span class="op" id="7378928">{</span><span class="op" id="7378929">}</span><span class="op" id="7378930">{</span><span class="ident" id="7378931">test</span><span class="op" id="7378935">.</span><span class="ident" id="7378936">x</span><span class="op" id="7378937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378941">want</span>&nbsp;<span class="op" id="7378946">:=</span>&nbsp;<span class="string" id="7378949">&#34;[&#34;</span>&nbsp;<span class="op" id="7378953">+</span>&nbsp;<span class="ident" id="7378955">strings</span><span class="op" id="7378962">.</span><span class="ident" id="7378963">TrimSpace</span><span class="op" id="7378972">(</span><span class="ident" id="7378973">test</span><span class="op" id="7378977">.</span><span class="ident" id="7378978">js</span><span class="op" id="7378980">)</span>&nbsp;<span class="op" id="7378982">+</span>&nbsp;<span class="string" id="7378984">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378990">if</span>&nbsp;<span class="ident" id="7378993">js</span>&nbsp;<span class="op" id="7378996">:=</span>&nbsp;<span class="ident" id="7378999">jsValEscaper</span><span class="op" id="7379011">(</span><span class="ident" id="7379012">a</span><span class="op" id="7379013">)</span><span class="op" id="7379014">;</span>&nbsp;<span class="ident" id="7379016">js</span>&nbsp;<span class="op" id="7379019">!=</span>&nbsp;<span class="ident" id="7379022">want</span>&nbsp;<span class="op" id="7379027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379032">t</span><span class="op" id="7379033">.</span><span class="ident" id="7379034">Errorf</span><span class="op" id="7379040">(</span><span class="string" id="7379041">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7379069">,</span>&nbsp;<span class="ident" id="7379071">a</span><span class="op" id="7379072">,</span>&nbsp;<span class="ident" id="7379074">want</span><span class="op" id="7379078">,</span>&nbsp;<span class="ident" id="7379080">js</span><span class="op" id="7379082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379086">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379089">}</span><br>
<span class="lineno"></span><span class="op" id="7379091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7379094">func</span>&nbsp;<span class="ident" id="7379099">TestJSStrEscaper</span><span class="op" id="7379115">(</span><span class="ident" id="7379116">t</span>&nbsp;<span class="op" id="7379118">*</span><span class="ident" id="7379119">testing</span><span class="op" id="7379126">.</span><span class="ident" id="7379127">T</span><span class="op" id="7379128">)</span>&nbsp;<span class="op" id="7379130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379133">tests</span>&nbsp;<span class="op" id="7379139">:=</span>&nbsp;<span class="op" id="7379142">[</span><span class="op" id="7379143">]</span><span class="keyword" id="7379144">struct</span>&nbsp;<span class="op" id="7379151">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379155">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379159">interface</span><span class="op" id="7379168">{</span><span class="op" id="7379169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379173">esc</span>&nbsp;<span class="builtintype" id="7379177">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379185">}</span><span class="op" id="7379186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379190">{</span><span class="string" id="7379191">&#34;&#34;</span><span class="op" id="7379193">,</span>&nbsp;<span class="string" id="7379195">``</span><span class="op" id="7379197">}</span><span class="op" id="7379198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379202">{</span><span class="string" id="7379203">&#34;foo&#34;</span><span class="op" id="7379208">,</span>&nbsp;<span class="string" id="7379210">`foo`</span><span class="op" id="7379215">}</span><span class="op" id="7379216">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379220">{</span><span class="string" id="7379221">&#34;\u0000&#34;</span><span class="op" id="7379229">,</span>&nbsp;<span class="string" id="7379231">`\0`</span><span class="op" id="7379235">}</span><span class="op" id="7379236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379240">{</span><span class="string" id="7379241">&#34;\t&#34;</span><span class="op" id="7379245">,</span>&nbsp;<span class="string" id="7379247">`\t`</span><span class="op" id="7379251">}</span><span class="op" id="7379252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379256">{</span><span class="string" id="7379257">&#34;\n&#34;</span><span class="op" id="7379261">,</span>&nbsp;<span class="string" id="7379263">`\n`</span><span class="op" id="7379267">}</span><span class="op" id="7379268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379272">{</span><span class="string" id="7379273">&#34;\r&#34;</span><span class="op" id="7379277">,</span>&nbsp;<span class="string" id="7379279">`\r`</span><span class="op" id="7379283">}</span><span class="op" id="7379284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379288">{</span><span class="string" id="7379289">&#34;\u2028&#34;</span><span class="op" id="7379297">,</span>&nbsp;<span class="string" id="7379299">`\u2028`</span><span class="op" id="7379307">}</span><span class="op" id="7379308">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379312">{</span><span class="string" id="7379313">&#34;\u2029&#34;</span><span class="op" id="7379321">,</span>&nbsp;<span class="string" id="7379323">`\u2029`</span><span class="op" id="7379331">}</span><span class="op" id="7379332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379336">{</span><span class="string" id="7379337">&#34;\\&#34;</span><span class="op" id="7379341">,</span>&nbsp;<span class="string" id="7379343">`\\`</span><span class="op" id="7379347">}</span><span class="op" id="7379348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379352">{</span><span class="string" id="7379353">&#34;\\n&#34;</span><span class="op" id="7379358">,</span>&nbsp;<span class="string" id="7379360">`\\n`</span><span class="op" id="7379365">}</span><span class="op" id="7379366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379370">{</span><span class="string" id="7379371">&#34;foo\r\nbar&#34;</span><span class="op" id="7379383">,</span>&nbsp;<span class="string" id="7379385">`foo\r\nbar`</span><span class="op" id="7379397">}</span><span class="op" id="7379398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379402">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379438">{</span><span class="string" id="7379439">`&#34;`</span><span class="op" id="7379442">,</span>&nbsp;<span class="string" id="7379444">`\x22`</span><span class="op" id="7379450">}</span><span class="op" id="7379451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379455">{</span><span class="string" id="7379456">`&#39;`</span><span class="op" id="7379459">,</span>&nbsp;<span class="string" id="7379461">`\x27`</span><span class="op" id="7379467">}</span><span class="op" id="7379468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379472">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379527">{</span><span class="string" id="7379528">`&amp;amp;`</span><span class="op" id="7379535">,</span>&nbsp;<span class="string" id="7379537">`\x26amp;`</span><span class="op" id="7379547">}</span><span class="op" id="7379548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379552">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379615">{</span><span class="string" id="7379616">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7379627">,</span>&nbsp;<span class="string" id="7379629">`\x3c\/script\x3e`</span><span class="op" id="7379647">}</span><span class="op" id="7379648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379652">{</span><span class="string" id="7379653">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7379664">,</span>&nbsp;<span class="string" id="7379666">`\x3c![CDATA[`</span><span class="op" id="7379680">}</span><span class="op" id="7379681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379685">{</span><span class="string" id="7379686">&#34;]]&gt;&#34;</span><span class="op" id="7379691">,</span>&nbsp;<span class="string" id="7379693">`]]\x3e`</span><span class="op" id="7379701">}</span><span class="op" id="7379702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379706">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379778">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379842">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379903">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379950">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380014">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380081">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380147">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380207">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380271">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380322">{</span><span class="string" id="7380323">&#34;&lt;!--&#34;</span><span class="op" id="7380329">,</span>&nbsp;<span class="string" id="7380331">`\x3c!--`</span><span class="op" id="7380340">}</span><span class="op" id="7380341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380345">{</span><span class="string" id="7380346">&#34;--&gt;&#34;</span><span class="op" id="7380351">,</span>&nbsp;<span class="string" id="7380353">`--\x3e`</span><span class="op" id="7380361">}</span><span class="op" id="7380362">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380366">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380426">{</span><span class="string" id="7380427">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7380470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7380475">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7380531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380535">}</span><span class="op" id="7380536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380540">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380568">{</span><span class="string" id="7380569">&#34;foo\xA0bar&#34;</span><span class="op" id="7380581">,</span>&nbsp;<span class="string" id="7380583">&#34;foo\xA0bar&#34;</span><span class="op" id="7380595">}</span><span class="op" id="7380596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380600">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380635">{</span><span class="string" id="7380636">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7380656">,</span>&nbsp;<span class="string" id="7380658">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7380678">}</span><span class="op" id="7380679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380686">for</span>&nbsp;<span class="ident" id="7380690">_</span><span class="op" id="7380691">,</span>&nbsp;<span class="ident" id="7380693">test</span>&nbsp;<span class="op" id="7380698">:=</span>&nbsp;<span class="keyword" id="7380701">range</span>&nbsp;<span class="ident" id="7380707">tests</span>&nbsp;<span class="op" id="7380713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380717">esc</span>&nbsp;<span class="op" id="7380721">:=</span>&nbsp;<span class="ident" id="7380724">jsStrEscaper</span><span class="op" id="7380736">(</span><span class="ident" id="7380737">test</span><span class="op" id="7380741">.</span><span class="ident" id="7380742">x</span><span class="op" id="7380743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380747">if</span>&nbsp;<span class="ident" id="7380750">esc</span>&nbsp;<span class="op" id="7380754">!=</span>&nbsp;<span class="ident" id="7380757">test</span><span class="op" id="7380761">.</span><span class="ident" id="7380762">esc</span>&nbsp;<span class="op" id="7380766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380771">t</span><span class="op" id="7380772">.</span><span class="ident" id="7380773">Errorf</span><span class="op" id="7380779">(</span><span class="string" id="7380780">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7380800">,</span>&nbsp;<span class="ident" id="7380802">test</span><span class="op" id="7380806">.</span><span class="ident" id="7380807">x</span><span class="op" id="7380808">,</span>&nbsp;<span class="ident" id="7380810">test</span><span class="op" id="7380814">.</span><span class="ident" id="7380815">esc</span><span class="op" id="7380818">,</span>&nbsp;<span class="ident" id="7380820">esc</span><span class="op" id="7380823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380827">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380830">}</span><br>
<span class="lineno"></span><span class="op" id="7380832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7380835">func</span>&nbsp;<span class="ident" id="7380840">TestJSRegexpEscaper</span><span class="op" id="7380859">(</span><span class="ident" id="7380860">t</span>&nbsp;<span class="op" id="7380862">*</span><span class="ident" id="7380863">testing</span><span class="op" id="7380870">.</span><span class="ident" id="7380871">T</span><span class="op" id="7380872">)</span>&nbsp;<span class="op" id="7380874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380877">tests</span>&nbsp;<span class="op" id="7380883">:=</span>&nbsp;<span class="op" id="7380886">[</span><span class="op" id="7380887">]</span><span class="keyword" id="7380888">struct</span>&nbsp;<span class="op" id="7380895">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380899">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380903">interface</span><span class="op" id="7380912">{</span><span class="op" id="7380913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380917">esc</span>&nbsp;<span class="builtintype" id="7380921">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380929">}</span><span class="op" id="7380930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380934">{</span><span class="string" id="7380935">&#34;&#34;</span><span class="op" id="7380937">,</span>&nbsp;<span class="string" id="7380939">`(?:)`</span><span class="op" id="7380945">}</span><span class="op" id="7380946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380950">{</span><span class="string" id="7380951">&#34;foo&#34;</span><span class="op" id="7380956">,</span>&nbsp;<span class="string" id="7380958">`foo`</span><span class="op" id="7380963">}</span><span class="op" id="7380964">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380968">{</span><span class="string" id="7380969">&#34;\u0000&#34;</span><span class="op" id="7380977">,</span>&nbsp;<span class="string" id="7380979">`\0`</span><span class="op" id="7380983">}</span><span class="op" id="7380984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380988">{</span><span class="string" id="7380989">&#34;\t&#34;</span><span class="op" id="7380993">,</span>&nbsp;<span class="string" id="7380995">`\t`</span><span class="op" id="7380999">}</span><span class="op" id="7381000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381004">{</span><span class="string" id="7381005">&#34;\n&#34;</span><span class="op" id="7381009">,</span>&nbsp;<span class="string" id="7381011">`\n`</span><span class="op" id="7381015">}</span><span class="op" id="7381016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381020">{</span><span class="string" id="7381021">&#34;\r&#34;</span><span class="op" id="7381025">,</span>&nbsp;<span class="string" id="7381027">`\r`</span><span class="op" id="7381031">}</span><span class="op" id="7381032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381036">{</span><span class="string" id="7381037">&#34;\u2028&#34;</span><span class="op" id="7381045">,</span>&nbsp;<span class="string" id="7381047">`\u2028`</span><span class="op" id="7381055">}</span><span class="op" id="7381056">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381060">{</span><span class="string" id="7381061">&#34;\u2029&#34;</span><span class="op" id="7381069">,</span>&nbsp;<span class="string" id="7381071">`\u2029`</span><span class="op" id="7381079">}</span><span class="op" id="7381080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381084">{</span><span class="string" id="7381085">&#34;\\&#34;</span><span class="op" id="7381089">,</span>&nbsp;<span class="string" id="7381091">`\\`</span><span class="op" id="7381095">}</span><span class="op" id="7381096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381100">{</span><span class="string" id="7381101">&#34;\\n&#34;</span><span class="op" id="7381106">,</span>&nbsp;<span class="string" id="7381108">`\\n`</span><span class="op" id="7381113">}</span><span class="op" id="7381114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381118">{</span><span class="string" id="7381119">&#34;foo\r\nbar&#34;</span><span class="op" id="7381131">,</span>&nbsp;<span class="string" id="7381133">`foo\r\nbar`</span><span class="op" id="7381145">}</span><span class="op" id="7381146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7381150">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381186">{</span><span class="string" id="7381187">`&#34;`</span><span class="op" id="7381190">,</span>&nbsp;<span class="string" id="7381192">`\x22`</span><span class="op" id="7381198">}</span><span class="op" id="7381199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381203">{</span><span class="string" id="7381204">`&#39;`</span><span class="op" id="7381207">,</span>&nbsp;<span class="string" id="7381209">`\x27`</span><span class="op" id="7381215">}</span><span class="op" id="7381216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7381220">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381275">{</span><span class="string" id="7381276">`&amp;amp;`</span><span class="op" id="7381283">,</span>&nbsp;<span class="string" id="7381285">`\x26amp;`</span><span class="op" id="7381295">}</span><span class="op" id="7381296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7381300">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381363">{</span><span class="string" id="7381364">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7381375">,</span>&nbsp;<span class="string" id="7381377">`\x3c\/script\x3e`</span><span class="op" id="7381395">}</span><span class="op" id="7381396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381400">{</span><span class="string" id="7381401">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7381412">,</span>&nbsp;<span class="string" id="7381414">`\x3c!\[CDATA\[`</span><span class="op" id="7381430">}</span><span class="op" id="7381431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381435">{</span><span class="string" id="7381436">&#34;]]&gt;&#34;</span><span class="op" id="7381441">,</span>&nbsp;<span class="string" id="7381443">`\]\]\x3e`</span><span class="op" id="7381453">}</span><span class="op" id="7381454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7381458">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381484">{</span><span class="string" id="7381485">&#34;&lt;!--&#34;</span><span class="op" id="7381491">,</span>&nbsp;<span class="string" id="7381493">`\x3c!\-\-`</span><span class="op" id="7381504">}</span><span class="op" id="7381505">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381509">{</span><span class="string" id="7381510">&#34;--&gt;&#34;</span><span class="op" id="7381515">,</span>&nbsp;<span class="string" id="7381517">`\-\-\x3e`</span><span class="op" id="7381527">}</span><span class="op" id="7381528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381532">{</span><span class="string" id="7381533">&#34;*&#34;</span><span class="op" id="7381536">,</span>&nbsp;<span class="string" id="7381538">`\*`</span><span class="op" id="7381542">}</span><span class="op" id="7381543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381547">{</span><span class="string" id="7381548">&#34;+&#34;</span><span class="op" id="7381551">,</span>&nbsp;<span class="string" id="7381553">`\x2b`</span><span class="op" id="7381559">}</span><span class="op" id="7381560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381564">{</span><span class="string" id="7381565">&#34;?&#34;</span><span class="op" id="7381568">,</span>&nbsp;<span class="string" id="7381570">`\?`</span><span class="op" id="7381574">}</span><span class="op" id="7381575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381579">{</span><span class="string" id="7381580">&#34;[](){}&#34;</span><span class="op" id="7381588">,</span>&nbsp;<span class="string" id="7381590">`\[\]\(\)\{\}`</span><span class="op" id="7381604">}</span><span class="op" id="7381605">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381609">{</span><span class="string" id="7381610">&#34;$foo|x.y&#34;</span><span class="op" id="7381620">,</span>&nbsp;<span class="string" id="7381622">`\$foo\|x\.y`</span><span class="op" id="7381635">}</span><span class="op" id="7381636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381640">{</span><span class="string" id="7381641">&#34;x^y&#34;</span><span class="op" id="7381646">,</span>&nbsp;<span class="string" id="7381648">`x\^y`</span><span class="op" id="7381654">}</span><span class="op" id="7381655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381662">for</span>&nbsp;<span class="ident" id="7381666">_</span><span class="op" id="7381667">,</span>&nbsp;<span class="ident" id="7381669">test</span>&nbsp;<span class="op" id="7381674">:=</span>&nbsp;<span class="keyword" id="7381677">range</span>&nbsp;<span class="ident" id="7381683">tests</span>&nbsp;<span class="op" id="7381689">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381693">esc</span>&nbsp;<span class="op" id="7381697">:=</span>&nbsp;<span class="ident" id="7381700">jsRegexpEscaper</span><span class="op" id="7381715">(</span><span class="ident" id="7381716">test</span><span class="op" id="7381720">.</span><span class="ident" id="7381721">x</span><span class="op" id="7381722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381726">if</span>&nbsp;<span class="ident" id="7381729">esc</span>&nbsp;<span class="op" id="7381733">!=</span>&nbsp;<span class="ident" id="7381736">test</span><span class="op" id="7381740">.</span><span class="ident" id="7381741">esc</span>&nbsp;<span class="op" id="7381745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381750">t</span><span class="op" id="7381751">.</span><span class="ident" id="7381752">Errorf</span><span class="op" id="7381758">(</span><span class="string" id="7381759">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7381779">,</span>&nbsp;<span class="ident" id="7381781">test</span><span class="op" id="7381785">.</span><span class="ident" id="7381786">x</span><span class="op" id="7381787">,</span>&nbsp;<span class="ident" id="7381789">test</span><span class="op" id="7381793">.</span><span class="ident" id="7381794">esc</span><span class="op" id="7381797">,</span>&nbsp;<span class="ident" id="7381799">esc</span><span class="op" id="7381802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381809">}</span><br>
<span class="lineno">265</span><span class="op" id="7381811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7381814">func</span>&nbsp;<span class="ident" id="7381819">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7381862">(</span><span class="ident" id="7381863">t</span>&nbsp;<span class="op" id="7381865">*</span><span class="ident" id="7381866">testing</span><span class="op" id="7381873">.</span><span class="ident" id="7381874">T</span><span class="op" id="7381875">)</span>&nbsp;<span class="op" id="7381877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381880">input</span>&nbsp;<span class="op" id="7381886">:=</span>&nbsp;<span class="op" id="7381889">(</span><span class="string" id="7381890">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7381951">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7381955">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7382022">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382026">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7382045">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382049">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7382068">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382072">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7382091">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382095">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7382114">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382118">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7382137">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382141">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7382163">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382167">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7382209">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382213">tests</span>&nbsp;<span class="op" id="7382219">:=</span>&nbsp;<span class="op" id="7382222">[</span><span class="op" id="7382223">]</span><span class="keyword" id="7382224">struct</span>&nbsp;<span class="op" id="7382231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382235">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7382243">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382252">escaper</span>&nbsp;<span class="keyword" id="7382260">func</span><span class="op" id="7382264">(</span><span class="op" id="7382265">...</span><span class="keyword" id="7382268">interface</span><span class="op" id="7382277">{</span><span class="op" id="7382278">}</span><span class="op" id="7382279">)</span>&nbsp;<span class="builtintype" id="7382281">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382290">escaped</span>&nbsp;<span class="builtintype" id="7382298">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382306">}</span><span class="op" id="7382307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382316">&#34;jsStrEscaper&#34;</span><span class="op" id="7382330">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382335">jsStrEscaper</span><span class="op" id="7382347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382352">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7382386">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382392">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7382424">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382430">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7382465">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382471">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7382506">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382512">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7382544">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382550">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7382575">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382581">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7382600">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382606">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7382626">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382632">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7382651">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382657">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7382679">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382685">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7382729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382733">}</span><span class="op" id="7382734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7382738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382743">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7382760">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7382765">jsRegexpEscaper</span><span class="op" id="7382780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382785">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7382819">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382825">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7382857">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382863">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7382898">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382904">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7382939">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382945">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7382983">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7382989">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7383015">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7383021">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7383040">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7383046">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7383069">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7383075">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7383094">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7383100">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7383121">+</span>&nbsp;<span class="string" id="7383123">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7383132">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7383138">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7383182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383186">}</span><span class="op" id="7383187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383194">for</span>&nbsp;<span class="ident" id="7383198">_</span><span class="op" id="7383199">,</span>&nbsp;<span class="ident" id="7383201">test</span>&nbsp;<span class="op" id="7383206">:=</span>&nbsp;<span class="keyword" id="7383209">range</span>&nbsp;<span class="ident" id="7383215">tests</span>&nbsp;<span class="op" id="7383221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383225">if</span>&nbsp;<span class="ident" id="7383228">s</span>&nbsp;<span class="op" id="7383230">:=</span>&nbsp;<span class="ident" id="7383233">test</span><span class="op" id="7383237">.</span><span class="ident" id="7383238">escaper</span><span class="op" id="7383245">(</span><span class="ident" id="7383246">input</span><span class="op" id="7383251">)</span><span class="op" id="7383252">;</span>&nbsp;<span class="ident" id="7383254">s</span>&nbsp;<span class="op" id="7383256">!=</span>&nbsp;<span class="ident" id="7383259">test</span><span class="op" id="7383263">.</span><span class="ident" id="7383264">escaped</span>&nbsp;<span class="op" id="7383272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383277">t</span><span class="op" id="7383278">.</span><span class="ident" id="7383279">Errorf</span><span class="op" id="7383285">(</span><span class="string" id="7383286">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7383318">,</span>&nbsp;<span class="ident" id="7383320">test</span><span class="op" id="7383324">.</span><span class="ident" id="7383325">name</span><span class="op" id="7383329">,</span>&nbsp;<span class="ident" id="7383331">test</span><span class="op" id="7383335">.</span><span class="ident" id="7383336">escaped</span><span class="op" id="7383343">,</span>&nbsp;<span class="ident" id="7383345">s</span><span class="op" id="7383346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383351">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383362">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7383367">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7383417">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383466">var</span>&nbsp;<span class="ident" id="7383470">buf</span>&nbsp;<span class="ident" id="7383474">bytes</span><span class="op" id="7383479">.</span><span class="ident" id="7383480">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383489">for</span>&nbsp;<span class="ident" id="7383493">_</span><span class="op" id="7383494">,</span>&nbsp;<span class="ident" id="7383496">c</span>&nbsp;<span class="op" id="7383498">:=</span>&nbsp;<span class="keyword" id="7383501">range</span>&nbsp;<span class="ident" id="7383507">input</span>&nbsp;<span class="op" id="7383513">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383518">buf</span><span class="op" id="7383521">.</span><span class="ident" id="7383522">WriteString</span><span class="op" id="7383533">(</span><span class="ident" id="7383534">test</span><span class="op" id="7383538">.</span><span class="ident" id="7383539">escaper</span><span class="op" id="7383546">(</span><span class="builtintype" id="7383547">string</span><span class="op" id="7383553">(</span><span class="ident" id="7383554">c</span><span class="op" id="7383555">)</span><span class="op" id="7383556">)</span><span class="op" id="7383557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383566">if</span>&nbsp;<span class="ident" id="7383569">s</span>&nbsp;<span class="op" id="7383571">:=</span>&nbsp;<span class="ident" id="7383574">buf</span><span class="op" id="7383577">.</span><span class="ident" id="7383578">String</span><span class="op" id="7383584">(</span><span class="op" id="7383585">)</span><span class="op" id="7383586">;</span>&nbsp;<span class="ident" id="7383588">s</span>&nbsp;<span class="op" id="7383590">!=</span>&nbsp;<span class="ident" id="7383593">test</span><span class="op" id="7383597">.</span><span class="ident" id="7383598">escaped</span>&nbsp;<span class="op" id="7383606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383611">t</span><span class="op" id="7383612">.</span><span class="ident" id="7383613">Errorf</span><span class="op" id="7383619">(</span><span class="string" id="7383620">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7383657">,</span>&nbsp;<span class="ident" id="7383659">test</span><span class="op" id="7383663">.</span><span class="ident" id="7383664">name</span><span class="op" id="7383668">,</span>&nbsp;<span class="ident" id="7383670">test</span><span class="op" id="7383674">.</span><span class="ident" id="7383675">escaped</span><span class="op" id="7383682">,</span>&nbsp;<span class="ident" id="7383684">s</span><span class="op" id="7383685">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383690">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383704">}</span><br>
<span class="lineno"></span><span class="op" id="7383706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7383709">func</span>&nbsp;<span class="ident" id="7383714">BenchmarkJSValEscaperWithNum</span><span class="op" id="7383742">(</span><span class="ident" id="7383743">b</span>&nbsp;<span class="op" id="7383745">*</span><span class="ident" id="7383746">testing</span><span class="op" id="7383753">.</span><span class="ident" id="7383754">B</span><span class="op" id="7383755">)</span>&nbsp;<span class="op" id="7383757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383760">for</span>&nbsp;<span class="ident" id="7383764">i</span>&nbsp;<span class="op" id="7383766">:=</span>&nbsp;<span class="num" id="7383769">0</span><span class="op" id="7383770">;</span>&nbsp;<span class="ident" id="7383772">i</span>&nbsp;<span class="op" id="7383774">&lt;</span>&nbsp;<span class="ident" id="7383776">b</span><span class="op" id="7383777">.</span><span class="ident" id="7383778">N</span><span class="op" id="7383779">;</span>&nbsp;<span class="ident" id="7383781">i</span><span class="op" id="7383782">++</span>&nbsp;<span class="op" id="7383785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383789">jsValEscaper</span><span class="op" id="7383801">(</span><span class="num" id="7383802">3.141592654</span><span class="op" id="7383813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7383816">}</span><br>
<span class="lineno"></span><span class="op" id="7383818">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7383821">func</span>&nbsp;<span class="ident" id="7383826">BenchmarkJSValEscaperWithStr</span><span class="op" id="7383854">(</span><span class="ident" id="7383855">b</span>&nbsp;<span class="op" id="7383857">*</span><span class="ident" id="7383858">testing</span><span class="op" id="7383865">.</span><span class="ident" id="7383866">B</span><span class="op" id="7383867">)</span>&nbsp;<span class="op" id="7383869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7383872">for</span>&nbsp;<span class="ident" id="7383876">i</span>&nbsp;<span class="op" id="7383878">:=</span>&nbsp;<span class="num" id="7383881">0</span><span class="op" id="7383882">;</span>&nbsp;<span class="ident" id="7383884">i</span>&nbsp;<span class="op" id="7383886">&lt;</span>&nbsp;<span class="ident" id="7383888">b</span><span class="op" id="7383889">.</span><span class="ident" id="7383890">N</span><span class="op" id="7383891">;</span>&nbsp;<span class="ident" id="7383893">i</span><span class="op" id="7383894">++</span>&nbsp;<span class="op" id="7383897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7383901">jsValEscaper</span><span class="op" id="7383913">(</span><span class="string" id="7383914">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7384035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384038">}</span><br>
<span class="lineno">345</span><span class="op" id="7384040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7384043">func</span>&nbsp;<span class="ident" id="7384048">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7384086">(</span><span class="ident" id="7384087">b</span>&nbsp;<span class="op" id="7384089">*</span><span class="ident" id="7384090">testing</span><span class="op" id="7384097">.</span><span class="ident" id="7384098">B</span><span class="op" id="7384099">)</span>&nbsp;<span class="op" id="7384101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384104">for</span>&nbsp;<span class="ident" id="7384108">i</span>&nbsp;<span class="op" id="7384110">:=</span>&nbsp;<span class="num" id="7384113">0</span><span class="op" id="7384114">;</span>&nbsp;<span class="ident" id="7384116">i</span>&nbsp;<span class="op" id="7384118">&lt;</span>&nbsp;<span class="ident" id="7384120">b</span><span class="op" id="7384121">.</span><span class="ident" id="7384122">N</span><span class="op" id="7384123">;</span>&nbsp;<span class="ident" id="7384125">i</span><span class="op" id="7384126">++</span>&nbsp;<span class="op" id="7384129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384133">jsValEscaper</span><span class="op" id="7384145">(</span><span class="string" id="7384146">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7384192">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384195">}</span><br>
<span class="lineno"></span><span class="op" id="7384197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7384200">func</span>&nbsp;<span class="ident" id="7384205">BenchmarkJSValEscaperWithObj</span><span class="op" id="7384233">(</span><span class="ident" id="7384234">b</span>&nbsp;<span class="op" id="7384236">*</span><span class="ident" id="7384237">testing</span><span class="op" id="7384244">.</span><span class="ident" id="7384245">B</span><span class="op" id="7384246">)</span>&nbsp;<span class="op" id="7384248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384251">o</span>&nbsp;<span class="op" id="7384253">:=</span>&nbsp;<span class="keyword" id="7384256">struct</span>&nbsp;<span class="op" id="7384263">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384267">S</span>&nbsp;<span class="builtintype" id="7384269">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384278">N</span>&nbsp;<span class="builtintype" id="7384280">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384285">}</span><span class="op" id="7384286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7384290">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7384417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7384421">42</span><span class="op" id="7384423">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384429">for</span>&nbsp;<span class="ident" id="7384433">i</span>&nbsp;<span class="op" id="7384435">:=</span>&nbsp;<span class="num" id="7384438">0</span><span class="op" id="7384439">;</span>&nbsp;<span class="ident" id="7384441">i</span>&nbsp;<span class="op" id="7384443">&lt;</span>&nbsp;<span class="ident" id="7384445">b</span><span class="op" id="7384446">.</span><span class="ident" id="7384447">N</span><span class="op" id="7384448">;</span>&nbsp;<span class="ident" id="7384450">i</span><span class="op" id="7384451">++</span>&nbsp;<span class="op" id="7384454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384458">jsValEscaper</span><span class="op" id="7384470">(</span><span class="ident" id="7384471">o</span><span class="op" id="7384472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384475">}</span><br>
<span class="lineno"></span><span class="op" id="7384477">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7384480">func</span>&nbsp;<span class="ident" id="7384485">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7384523">(</span><span class="ident" id="7384524">b</span>&nbsp;<span class="op" id="7384526">*</span><span class="ident" id="7384527">testing</span><span class="op" id="7384534">.</span><span class="ident" id="7384535">B</span><span class="op" id="7384536">)</span>&nbsp;<span class="op" id="7384538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384541">o</span>&nbsp;<span class="op" id="7384543">:=</span>&nbsp;<span class="keyword" id="7384546">struct</span>&nbsp;<span class="op" id="7384553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384557">S</span>&nbsp;<span class="builtintype" id="7384559">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384568">N</span>&nbsp;<span class="builtintype" id="7384570">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384575">}</span><span class="op" id="7384576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7384580">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7384626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7384630">42</span><span class="op" id="7384632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384638">for</span>&nbsp;<span class="ident" id="7384642">i</span>&nbsp;<span class="op" id="7384644">:=</span>&nbsp;<span class="num" id="7384647">0</span><span class="op" id="7384648">;</span>&nbsp;<span class="ident" id="7384650">i</span>&nbsp;<span class="op" id="7384652">&lt;</span>&nbsp;<span class="ident" id="7384654">b</span><span class="op" id="7384655">.</span><span class="ident" id="7384656">N</span><span class="op" id="7384657">;</span>&nbsp;<span class="ident" id="7384659">i</span><span class="op" id="7384660">++</span>&nbsp;<span class="op" id="7384663">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384667">jsValEscaper</span><span class="op" id="7384679">(</span><span class="ident" id="7384680">o</span><span class="op" id="7384681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384684">}</span><br>
<span class="lineno"></span><span class="op" id="7384686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7384689">func</span>&nbsp;<span class="ident" id="7384694">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7384725">(</span><span class="ident" id="7384726">b</span>&nbsp;<span class="op" id="7384728">*</span><span class="ident" id="7384729">testing</span><span class="op" id="7384736">.</span><span class="ident" id="7384737">B</span><span class="op" id="7384738">)</span>&nbsp;<span class="op" id="7384740">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384743">for</span>&nbsp;<span class="ident" id="7384747">i</span>&nbsp;<span class="op" id="7384749">:=</span>&nbsp;<span class="num" id="7384752">0</span><span class="op" id="7384753">;</span>&nbsp;<span class="ident" id="7384755">i</span>&nbsp;<span class="op" id="7384757">&lt;</span>&nbsp;<span class="ident" id="7384759">b</span><span class="op" id="7384760">.</span><span class="ident" id="7384761">N</span><span class="op" id="7384762">;</span>&nbsp;<span class="ident" id="7384764">i</span><span class="op" id="7384765">++</span>&nbsp;<span class="op" id="7384768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384772">jsStrEscaper</span><span class="op" id="7384784">(</span><span class="string" id="7384785">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7384832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7384835">}</span><br>
<span class="lineno"></span><span class="op" id="7384837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7384840">func</span>&nbsp;<span class="ident" id="7384845">BenchmarkJSStrEscaper</span><span class="op" id="7384866">(</span><span class="ident" id="7384867">b</span>&nbsp;<span class="op" id="7384869">*</span><span class="ident" id="7384870">testing</span><span class="op" id="7384877">.</span><span class="ident" id="7384878">B</span><span class="op" id="7384879">)</span>&nbsp;<span class="op" id="7384881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7384884">for</span>&nbsp;<span class="ident" id="7384888">i</span>&nbsp;<span class="op" id="7384890">:=</span>&nbsp;<span class="num" id="7384893">0</span><span class="op" id="7384894">;</span>&nbsp;<span class="ident" id="7384896">i</span>&nbsp;<span class="op" id="7384898">&lt;</span>&nbsp;<span class="ident" id="7384900">b</span><span class="op" id="7384901">.</span><span class="ident" id="7384902">N</span><span class="op" id="7384903">;</span>&nbsp;<span class="ident" id="7384905">i</span><span class="op" id="7384906">++</span>&nbsp;<span class="op" id="7384909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7384913">jsStrEscaper</span><span class="op" id="7384925">(</span><span class="string" id="7384926">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7385047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385050">}</span><br>
<span class="lineno"></span><span class="op" id="7385052">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7385055">func</span>&nbsp;<span class="ident" id="7385060">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7385094">(</span><span class="ident" id="7385095">b</span>&nbsp;<span class="op" id="7385097">*</span><span class="ident" id="7385098">testing</span><span class="op" id="7385105">.</span><span class="ident" id="7385106">B</span><span class="op" id="7385107">)</span>&nbsp;<span class="op" id="7385109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385112">for</span>&nbsp;<span class="ident" id="7385116">i</span>&nbsp;<span class="op" id="7385118">:=</span>&nbsp;<span class="num" id="7385121">0</span><span class="op" id="7385122">;</span>&nbsp;<span class="ident" id="7385124">i</span>&nbsp;<span class="op" id="7385126">&lt;</span>&nbsp;<span class="ident" id="7385128">b</span><span class="op" id="7385129">.</span><span class="ident" id="7385130">N</span><span class="op" id="7385131">;</span>&nbsp;<span class="ident" id="7385133">i</span><span class="op" id="7385134">++</span>&nbsp;<span class="op" id="7385137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385141">jsRegexpEscaper</span><span class="op" id="7385156">(</span><span class="string" id="7385157">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7385203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385206">}</span><br>
<span class="lineno">395</span><span class="op" id="7385208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7385211">func</span>&nbsp;<span class="ident" id="7385216">BenchmarkJSRegexpEscaper</span><span class="op" id="7385240">(</span><span class="ident" id="7385241">b</span>&nbsp;<span class="op" id="7385243">*</span><span class="ident" id="7385244">testing</span><span class="op" id="7385251">.</span><span class="ident" id="7385252">B</span><span class="op" id="7385253">)</span>&nbsp;<span class="op" id="7385255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7385258">for</span>&nbsp;<span class="ident" id="7385262">i</span>&nbsp;<span class="op" id="7385264">:=</span>&nbsp;<span class="num" id="7385267">0</span><span class="op" id="7385268">;</span>&nbsp;<span class="ident" id="7385270">i</span>&nbsp;<span class="op" id="7385272">&lt;</span>&nbsp;<span class="ident" id="7385274">b</span><span class="op" id="7385275">.</span><span class="ident" id="7385276">N</span><span class="op" id="7385277">;</span>&nbsp;<span class="ident" id="7385279">i</span><span class="op" id="7385280">++</span>&nbsp;<span class="op" id="7385283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7385287">jsRegexpEscaper</span><span class="op" id="7385302">(</span><span class="string" id="7385303">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7385424">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7385427">}</span><br>
<span class="lineno"></span><span class="op" id="7385429">}</span>
</div>
</body>
</html>
