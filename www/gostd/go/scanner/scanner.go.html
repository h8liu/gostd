<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2995683">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2995738">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2995792">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2995843">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="2995903">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="2995962">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2996008">//</span><br>
<span class="lineno"></span><span class="keyword" id="2996011">package</span>&nbsp;<span class="ident" id="2996019">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2996028">import</span>&nbsp;<span class="op" id="2996035">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996038">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996047">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996054">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996066">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996083">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996094">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2996105">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2996120">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="2996123">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2996196">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2996269">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2996343">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="2996367">//</span><br>
<span class="lineno"></span><span class="keyword" id="2996370">type</span>&nbsp;<span class="ident" id="2996375">ErrorHandler</span>&nbsp;<span class="keyword" id="2996388">func</span><span class="op" id="2996392">(</span><span class="ident" id="2996393">pos</span>&nbsp;<span class="ident" id="2996397">token</span><span class="op" id="2996402">.</span><span class="ident" id="2996403">Position</span><span class="op" id="2996411">,</span>&nbsp;<span class="ident" id="2996413">msg</span>&nbsp;<span class="builtintype" id="2996417">string</span><span class="op" id="2996423">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2996426">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="2996491">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="2996553">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="2996611">//</span><br>
<span class="lineno"></span><span class="keyword" id="2996614">type</span>&nbsp;<span class="ident" id="2996619">Scanner</span>&nbsp;<span class="keyword" id="2996627">struct</span>&nbsp;<span class="op" id="2996634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996637">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996657">file</span>&nbsp;<span class="op" id="2996662">*</span><span class="ident" id="2996663">token</span><span class="op" id="2996668">.</span><span class="ident" id="2996669">File</span>&nbsp;&nbsp;<span class="comment" id="2996675">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996698">dir</span>&nbsp;&nbsp;<span class="builtintype" id="2996703">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2996716">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996753">src</span>&nbsp;&nbsp;<span class="op" id="2996758">[</span><span class="op" id="2996759">]</span><span class="builtintype" id="2996760">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2996771">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996782">err</span>&nbsp;&nbsp;<span class="ident" id="2996787">ErrorHandler</span>&nbsp;<span class="comment" id="2996800">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996828">mode</span>&nbsp;<span class="ident" id="2996833">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2996846">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996865">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996884">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2996895">rune</span>&nbsp;<span class="comment" id="2996900">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996922">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2996933">int</span>&nbsp;&nbsp;<span class="comment" id="2996938">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996959">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2996970">int</span>&nbsp;&nbsp;<span class="comment" id="2996975">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997029">lineOffset</span>&nbsp;<span class="builtintype" id="2997040">int</span>&nbsp;&nbsp;<span class="comment" id="2997045">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997069">insertSemi</span>&nbsp;<span class="builtintype" id="2997080">bool</span>&nbsp;<span class="comment" id="2997085">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2997129">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997161">ErrorCount</span>&nbsp;<span class="builtintype" id="2997172">int</span>&nbsp;<span class="comment" id="2997176">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="2997208">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="2997211">const</span>&nbsp;<span class="ident" id="2997217">bom</span>&nbsp;<span class="op" id="2997221">=</span>&nbsp;<span class="num" id="2997223">0xFEFF</span>&nbsp;<span class="comment" id="2997230">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2997290">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="2997331">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="2997362">//</span><br>
<span class="lineno"></span><span class="keyword" id="2997365">func</span>&nbsp;<span class="op" id="2997370">(</span><span class="ident" id="2997371">s</span>&nbsp;<span class="op" id="2997373">*</span><span class="ident" id="2997374">Scanner</span><span class="op" id="2997381">)</span>&nbsp;<span class="ident" id="2997383">next</span><span class="op" id="2997387">(</span><span class="op" id="2997388">)</span>&nbsp;<span class="op" id="2997390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997393">if</span>&nbsp;<span class="ident" id="2997396">s</span><span class="op" id="2997397">.</span><span class="ident" id="2997398">rdOffset</span>&nbsp;<span class="op" id="2997407">&lt;</span>&nbsp;<span class="builtinfunc" id="2997409">len</span><span class="op" id="2997412">(</span><span class="ident" id="2997413">s</span><span class="op" id="2997414">.</span><span class="ident" id="2997415">src</span><span class="op" id="2997418">)</span>&nbsp;<span class="op" id="2997420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997424">s</span><span class="op" id="2997425">.</span><span class="ident" id="2997426">offset</span>&nbsp;<span class="op" id="2997433">=</span>&nbsp;<span class="ident" id="2997435">s</span><span class="op" id="2997436">.</span><span class="ident" id="2997437">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997448">if</span>&nbsp;<span class="ident" id="2997451">s</span><span class="op" id="2997452">.</span><span class="ident" id="2997453">ch</span>&nbsp;<span class="op" id="2997456">==</span>&nbsp;<span class="string" id="2997459">&#39;\n&#39;</span>&nbsp;<span class="op" id="2997464">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997469">s</span><span class="op" id="2997470">.</span><span class="ident" id="2997471">lineOffset</span>&nbsp;<span class="op" id="2997482">=</span>&nbsp;<span class="ident" id="2997484">s</span><span class="op" id="2997485">.</span><span class="ident" id="2997486">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997496">s</span><span class="op" id="2997497">.</span><span class="ident" id="2997498">file</span><span class="op" id="2997502">.</span><span class="ident" id="2997503">AddLine</span><span class="op" id="2997510">(</span><span class="ident" id="2997511">s</span><span class="op" id="2997512">.</span><span class="ident" id="2997513">offset</span><span class="op" id="2997519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997527">r</span><span class="op" id="2997528">,</span>&nbsp;<span class="ident" id="2997530">w</span>&nbsp;<span class="op" id="2997532">:=</span>&nbsp;<span class="builtintype" id="2997535">rune</span><span class="op" id="2997539">(</span><span class="ident" id="2997540">s</span><span class="op" id="2997541">.</span><span class="ident" id="2997542">src</span><span class="op" id="2997545">[</span><span class="ident" id="2997546">s</span><span class="op" id="2997547">.</span><span class="ident" id="2997548">rdOffset</span><span class="op" id="2997556">]</span><span class="op" id="2997557">)</span><span class="op" id="2997558">,</span>&nbsp;<span class="num" id="2997560">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997564">switch</span>&nbsp;<span class="op" id="2997571">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997575">case</span>&nbsp;<span class="ident" id="2997580">r</span>&nbsp;<span class="op" id="2997582">==</span>&nbsp;<span class="num" id="2997585">0</span><span class="op" id="2997586">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997591">s</span><span class="op" id="2997592">.</span><span class="builtintype" id="2997593">error</span><span class="op" id="2997598">(</span><span class="ident" id="2997599">s</span><span class="op" id="2997600">.</span><span class="ident" id="2997601">offset</span><span class="op" id="2997607">,</span>&nbsp;<span class="string" id="2997609">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="2997632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997636">case</span>&nbsp;<span class="ident" id="2997641">r</span>&nbsp;<span class="op" id="2997643">&gt;=</span>&nbsp;<span class="num" id="2997646">0x80</span><span class="op" id="2997650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2997655">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997671">r</span><span class="op" id="2997672">,</span>&nbsp;<span class="ident" id="2997674">w</span>&nbsp;<span class="op" id="2997676">=</span>&nbsp;<span class="ident" id="2997678">utf8</span><span class="op" id="2997682">.</span><span class="ident" id="2997683">DecodeRune</span><span class="op" id="2997693">(</span><span class="ident" id="2997694">s</span><span class="op" id="2997695">.</span><span class="ident" id="2997696">src</span><span class="op" id="2997699">[</span><span class="ident" id="2997700">s</span><span class="op" id="2997701">.</span><span class="ident" id="2997702">rdOffset</span><span class="op" id="2997710">:</span><span class="op" id="2997711">]</span><span class="op" id="2997712">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997717">if</span>&nbsp;<span class="ident" id="2997720">r</span>&nbsp;<span class="op" id="2997722">==</span>&nbsp;<span class="ident" id="2997725">utf8</span><span class="op" id="2997729">.</span><span class="ident" id="2997730">RuneError</span>&nbsp;<span class="op" id="2997740">&amp;&amp;</span>&nbsp;<span class="ident" id="2997743">w</span>&nbsp;<span class="op" id="2997745">==</span>&nbsp;<span class="num" id="2997748">1</span>&nbsp;<span class="op" id="2997750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997756">s</span><span class="op" id="2997757">.</span><span class="builtintype" id="2997758">error</span><span class="op" id="2997763">(</span><span class="ident" id="2997764">s</span><span class="op" id="2997765">.</span><span class="ident" id="2997766">offset</span><span class="op" id="2997772">,</span>&nbsp;<span class="string" id="2997774">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="2997798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997803">}</span>&nbsp;<span class="keyword" id="2997805">else</span>&nbsp;<span class="keyword" id="2997810">if</span>&nbsp;<span class="ident" id="2997813">r</span>&nbsp;<span class="op" id="2997815">==</span>&nbsp;<span class="ident" id="2997818">bom</span>&nbsp;<span class="op" id="2997822">&amp;&amp;</span>&nbsp;<span class="ident" id="2997825">s</span><span class="op" id="2997826">.</span><span class="ident" id="2997827">offset</span>&nbsp;<span class="op" id="2997834">&gt;</span>&nbsp;<span class="num" id="2997836">0</span>&nbsp;<span class="op" id="2997838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997844">s</span><span class="op" id="2997845">.</span><span class="builtintype" id="2997846">error</span><span class="op" id="2997851">(</span><span class="ident" id="2997852">s</span><span class="op" id="2997853">.</span><span class="ident" id="2997854">offset</span><span class="op" id="2997860">,</span>&nbsp;<span class="string" id="2997862">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="2997887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997892">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997900">s</span><span class="op" id="2997901">.</span><span class="ident" id="2997902">rdOffset</span>&nbsp;<span class="op" id="2997911">+=</span>&nbsp;<span class="ident" id="2997914">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997918">s</span><span class="op" id="2997919">.</span><span class="ident" id="2997920">ch</span>&nbsp;<span class="op" id="2997923">=</span>&nbsp;<span class="ident" id="2997925">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997928">}</span>&nbsp;<span class="keyword" id="2997930">else</span>&nbsp;<span class="op" id="2997935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997939">s</span><span class="op" id="2997940">.</span><span class="ident" id="2997941">offset</span>&nbsp;<span class="op" id="2997948">=</span>&nbsp;<span class="builtinfunc" id="2997950">len</span><span class="op" id="2997953">(</span><span class="ident" id="2997954">s</span><span class="op" id="2997955">.</span><span class="ident" id="2997956">src</span><span class="op" id="2997959">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997963">if</span>&nbsp;<span class="ident" id="2997966">s</span><span class="op" id="2997967">.</span><span class="ident" id="2997968">ch</span>&nbsp;<span class="op" id="2997971">==</span>&nbsp;<span class="string" id="2997974">&#39;\n&#39;</span>&nbsp;<span class="op" id="2997979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997984">s</span><span class="op" id="2997985">.</span><span class="ident" id="2997986">lineOffset</span>&nbsp;<span class="op" id="2997997">=</span>&nbsp;<span class="ident" id="2997999">s</span><span class="op" id="2998000">.</span><span class="ident" id="2998001">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998011">s</span><span class="op" id="2998012">.</span><span class="ident" id="2998013">file</span><span class="op" id="2998017">.</span><span class="ident" id="2998018">AddLine</span><span class="op" id="2998025">(</span><span class="ident" id="2998026">s</span><span class="op" id="2998027">.</span><span class="ident" id="2998028">offset</span><span class="op" id="2998034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998042">s</span><span class="op" id="2998043">.</span><span class="ident" id="2998044">ch</span>&nbsp;<span class="op" id="2998047">=</span>&nbsp;<span class="op" id="2998049">-</span><span class="num" id="2998050">1</span>&nbsp;<span class="comment" id="2998052">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998060">}</span><br>
<span class="lineno"></span><span class="op" id="2998062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2998065">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="2998107">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="2998141">//</span><br>
<span class="lineno"></span><span class="keyword" id="2998144">type</span>&nbsp;<span class="ident" id="2998149">Mode</span>&nbsp;<span class="builtintype" id="2998154">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2998160">const</span>&nbsp;<span class="op" id="2998166">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998169">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2998185">Mode</span>&nbsp;<span class="op" id="2998190">=</span>&nbsp;<span class="num" id="2998192">1</span>&nbsp;<span class="op" id="2998194">&lt;&lt;</span>&nbsp;<span class="ident" id="2998197">iota</span>&nbsp;<span class="comment" id="2998202">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998240">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2998273">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="2998334">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2998337">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2998408">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="2998479">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="2998551">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2998621">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2998692">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="2998747">//</span><br>
<span class="lineno">105</span><span class="comment" id="2998750">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2998821">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="2998891">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2998965">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="2999005">//</span><br>
<span class="lineno">110</span><span class="comment" id="2999008">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2999083">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2999099">//</span><br>
<span class="lineno"></span><span class="keyword" id="2999102">func</span>&nbsp;<span class="op" id="2999107">(</span><span class="ident" id="2999108">s</span>&nbsp;<span class="op" id="2999110">*</span><span class="ident" id="2999111">Scanner</span><span class="op" id="2999118">)</span>&nbsp;<span class="ident" id="2999120">Init</span><span class="op" id="2999124">(</span><span class="ident" id="2999125">file</span>&nbsp;<span class="op" id="2999130">*</span><span class="ident" id="2999131">token</span><span class="op" id="2999136">.</span><span class="ident" id="2999137">File</span><span class="op" id="2999141">,</span>&nbsp;<span class="ident" id="2999143">src</span>&nbsp;<span class="op" id="2999147">[</span><span class="op" id="2999148">]</span><span class="builtintype" id="2999149">byte</span><span class="op" id="2999153">,</span>&nbsp;<span class="ident" id="2999155">err</span>&nbsp;<span class="ident" id="2999159">ErrorHandler</span><span class="op" id="2999171">,</span>&nbsp;<span class="ident" id="2999173">mode</span>&nbsp;<span class="ident" id="2999178">Mode</span><span class="op" id="2999182">)</span>&nbsp;<span class="op" id="2999184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2999187">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999255">if</span>&nbsp;<span class="ident" id="2999258">file</span><span class="op" id="2999262">.</span><span class="ident" id="2999263">Size</span><span class="op" id="2999267">(</span><span class="op" id="2999268">)</span>&nbsp;<span class="op" id="2999270">!=</span>&nbsp;<span class="builtinfunc" id="2999273">len</span><span class="op" id="2999276">(</span><span class="ident" id="2999277">src</span><span class="op" id="2999280">)</span>&nbsp;<span class="op" id="2999282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2999286">panic</span><span class="op" id="2999291">(</span><span class="ident" id="2999292">fmt</span><span class="op" id="2999295">.</span><span class="ident" id="2999296">Sprintf</span><span class="op" id="2999303">(</span><span class="string" id="2999304">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="2999348">,</span>&nbsp;<span class="ident" id="2999350">file</span><span class="op" id="2999354">.</span><span class="ident" id="2999355">Size</span><span class="op" id="2999359">(</span><span class="op" id="2999360">)</span><span class="op" id="2999361">,</span>&nbsp;<span class="builtinfunc" id="2999363">len</span><span class="op" id="2999366">(</span><span class="ident" id="2999367">src</span><span class="op" id="2999370">)</span><span class="op" id="2999371">)</span><span class="op" id="2999372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999378">s</span><span class="op" id="2999379">.</span><span class="ident" id="2999380">file</span>&nbsp;<span class="op" id="2999385">=</span>&nbsp;<span class="ident" id="2999387">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999393">s</span><span class="op" id="2999394">.</span><span class="ident" id="2999395">dir</span><span class="op" id="2999398">,</span>&nbsp;<span class="ident" id="2999400">_</span>&nbsp;<span class="op" id="2999402">=</span>&nbsp;<span class="ident" id="2999404">filepath</span><span class="op" id="2999412">.</span><span class="ident" id="2999413">Split</span><span class="op" id="2999418">(</span><span class="ident" id="2999419">file</span><span class="op" id="2999423">.</span><span class="ident" id="2999424">Name</span><span class="op" id="2999428">(</span><span class="op" id="2999429">)</span><span class="op" id="2999430">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999433">s</span><span class="op" id="2999434">.</span><span class="ident" id="2999435">src</span>&nbsp;<span class="op" id="2999439">=</span>&nbsp;<span class="ident" id="2999441">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999446">s</span><span class="op" id="2999447">.</span><span class="ident" id="2999448">err</span>&nbsp;<span class="op" id="2999452">=</span>&nbsp;<span class="ident" id="2999454">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999459">s</span><span class="op" id="2999460">.</span><span class="ident" id="2999461">mode</span>&nbsp;<span class="op" id="2999466">=</span>&nbsp;<span class="ident" id="2999468">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999475">s</span><span class="op" id="2999476">.</span><span class="ident" id="2999477">ch</span>&nbsp;<span class="op" id="2999480">=</span>&nbsp;<span class="string" id="2999482">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999487">s</span><span class="op" id="2999488">.</span><span class="ident" id="2999489">offset</span>&nbsp;<span class="op" id="2999496">=</span>&nbsp;<span class="num" id="2999498">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999501">s</span><span class="op" id="2999502">.</span><span class="ident" id="2999503">rdOffset</span>&nbsp;<span class="op" id="2999512">=</span>&nbsp;<span class="num" id="2999514">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999517">s</span><span class="op" id="2999518">.</span><span class="ident" id="2999519">lineOffset</span>&nbsp;<span class="op" id="2999530">=</span>&nbsp;<span class="num" id="2999532">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999535">s</span><span class="op" id="2999536">.</span><span class="ident" id="2999537">insertSemi</span>&nbsp;<span class="op" id="2999548">=</span>&nbsp;<span class="builtintype" id="2999550">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999557">s</span><span class="op" id="2999558">.</span><span class="ident" id="2999559">ErrorCount</span>&nbsp;<span class="op" id="2999570">=</span>&nbsp;<span class="num" id="2999572">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999576">s</span><span class="op" id="2999577">.</span><span class="ident" id="2999578">next</span><span class="op" id="2999582">(</span><span class="op" id="2999583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999586">if</span>&nbsp;<span class="ident" id="2999589">s</span><span class="op" id="2999590">.</span><span class="ident" id="2999591">ch</span>&nbsp;<span class="op" id="2999594">==</span>&nbsp;<span class="ident" id="2999597">bom</span>&nbsp;<span class="op" id="2999601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999605">s</span><span class="op" id="2999606">.</span><span class="ident" id="2999607">next</span><span class="op" id="2999611">(</span><span class="op" id="2999612">)</span>&nbsp;<span class="comment" id="2999614">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999647">}</span><br>
<span class="lineno">135</span><span class="op" id="2999649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2999652">func</span>&nbsp;<span class="op" id="2999657">(</span><span class="ident" id="2999658">s</span>&nbsp;<span class="op" id="2999660">*</span><span class="ident" id="2999661">Scanner</span><span class="op" id="2999668">)</span>&nbsp;<span class="builtintype" id="2999670">error</span><span class="op" id="2999675">(</span><span class="ident" id="2999676">offs</span>&nbsp;<span class="builtintype" id="2999681">int</span><span class="op" id="2999684">,</span>&nbsp;<span class="ident" id="2999686">msg</span>&nbsp;<span class="builtintype" id="2999690">string</span><span class="op" id="2999696">)</span>&nbsp;<span class="op" id="2999698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999701">if</span>&nbsp;<span class="ident" id="2999704">s</span><span class="op" id="2999705">.</span><span class="ident" id="2999706">err</span>&nbsp;<span class="op" id="2999710">!=</span>&nbsp;<span class="ident" id="2999713">nil</span>&nbsp;<span class="op" id="2999717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999721">s</span><span class="op" id="2999722">.</span><span class="ident" id="2999723">err</span><span class="op" id="2999726">(</span><span class="ident" id="2999727">s</span><span class="op" id="2999728">.</span><span class="ident" id="2999729">file</span><span class="op" id="2999733">.</span><span class="ident" id="2999734">Position</span><span class="op" id="2999742">(</span><span class="ident" id="2999743">s</span><span class="op" id="2999744">.</span><span class="ident" id="2999745">file</span><span class="op" id="2999749">.</span><span class="ident" id="2999750">Pos</span><span class="op" id="2999753">(</span><span class="ident" id="2999754">offs</span><span class="op" id="2999758">)</span><span class="op" id="2999759">)</span><span class="op" id="2999760">,</span>&nbsp;<span class="ident" id="2999762">msg</span><span class="op" id="2999765">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2999771">s</span><span class="op" id="2999772">.</span><span class="ident" id="2999773">ErrorCount</span><span class="op" id="2999783">++</span><br>
<span class="lineno"></span><span class="op" id="2999786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2999789">var</span>&nbsp;<span class="ident" id="2999793">prefix</span>&nbsp;<span class="op" id="2999800">=</span>&nbsp;<span class="op" id="2999802">[</span><span class="op" id="2999803">]</span><span class="builtintype" id="2999804">byte</span><span class="op" id="2999808">(</span><span class="string" id="2999809">&#34;//line&nbsp;&#34;</span><span class="op" id="2999818">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="2999821">func</span>&nbsp;<span class="op" id="2999826">(</span><span class="ident" id="2999827">s</span>&nbsp;<span class="op" id="2999829">*</span><span class="ident" id="2999830">Scanner</span><span class="op" id="2999837">)</span>&nbsp;<span class="ident" id="2999839">interpretLineComment</span><span class="op" id="2999859">(</span><span class="ident" id="2999860">text</span>&nbsp;<span class="op" id="2999865">[</span><span class="op" id="2999866">]</span><span class="builtintype" id="2999867">byte</span><span class="op" id="2999871">)</span>&nbsp;<span class="op" id="2999873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999876">if</span>&nbsp;<span class="ident" id="2999879">bytes</span><span class="op" id="2999884">.</span><span class="ident" id="2999885">HasPrefix</span><span class="op" id="2999894">(</span><span class="ident" id="2999895">text</span><span class="op" id="2999899">,</span>&nbsp;<span class="ident" id="2999901">prefix</span><span class="op" id="2999907">)</span>&nbsp;<span class="op" id="2999909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2999913">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999955">if</span>&nbsp;<span class="ident" id="2999958">i</span>&nbsp;<span class="op" id="2999960">:=</span>&nbsp;<span class="ident" id="2999963">bytes</span><span class="op" id="2999968">.</span><span class="ident" id="2999969">LastIndex</span><span class="op" id="2999978">(</span><span class="ident" id="2999979">text</span><span class="op" id="2999983">,</span>&nbsp;<span class="op" id="2999985">[</span><span class="op" id="2999986">]</span><span class="builtintype" id="2999987">byte</span><span class="op" id="2999991">{</span><span class="string" id="2999992">&#39;:&#39;</span><span class="op" id="2999995">}</span><span class="op" id="2999996">)</span><span class="op" id="2999997">;</span>&nbsp;<span class="ident" id="2999999">i</span>&nbsp;<span class="op" id="3000001">&gt;</span>&nbsp;<span class="num" id="3000003">0</span>&nbsp;<span class="op" id="3000005">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000010">if</span>&nbsp;<span class="ident" id="3000013">line</span><span class="op" id="3000017">,</span>&nbsp;<span class="ident" id="3000019">err</span>&nbsp;<span class="op" id="3000023">:=</span>&nbsp;<span class="ident" id="3000026">strconv</span><span class="op" id="3000033">.</span><span class="ident" id="3000034">Atoi</span><span class="op" id="3000038">(</span><span class="builtintype" id="3000039">string</span><span class="op" id="3000045">(</span><span class="ident" id="3000046">text</span><span class="op" id="3000050">[</span><span class="ident" id="3000051">i</span><span class="op" id="3000052">+</span><span class="num" id="3000053">1</span><span class="op" id="3000054">:</span><span class="op" id="3000055">]</span><span class="op" id="3000056">)</span><span class="op" id="3000057">)</span><span class="op" id="3000058">;</span>&nbsp;<span class="ident" id="3000060">err</span>&nbsp;<span class="op" id="3000064">==</span>&nbsp;<span class="ident" id="3000067">nil</span>&nbsp;<span class="op" id="3000071">&amp;&amp;</span>&nbsp;<span class="ident" id="3000074">line</span>&nbsp;<span class="op" id="3000079">&gt;</span>&nbsp;<span class="num" id="3000081">0</span>&nbsp;<span class="op" id="3000083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000089">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000131">filename</span>&nbsp;<span class="op" id="3000140">:=</span>&nbsp;<span class="builtintype" id="3000143">string</span><span class="op" id="3000149">(</span><span class="ident" id="3000150">bytes</span><span class="op" id="3000155">.</span><span class="ident" id="3000156">TrimSpace</span><span class="op" id="3000165">(</span><span class="ident" id="3000166">text</span><span class="op" id="3000170">[</span><span class="builtinfunc" id="3000171">len</span><span class="op" id="3000174">(</span><span class="ident" id="3000175">prefix</span><span class="op" id="3000181">)</span><span class="op" id="3000182">:</span><span class="ident" id="3000183">i</span><span class="op" id="3000184">]</span><span class="op" id="3000185">)</span><span class="op" id="3000186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000192">if</span>&nbsp;<span class="ident" id="3000195">filename</span>&nbsp;<span class="op" id="3000204">!=</span>&nbsp;<span class="string" id="3000207">&#34;&#34;</span>&nbsp;<span class="op" id="3000210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000217">filename</span>&nbsp;<span class="op" id="3000226">=</span>&nbsp;<span class="ident" id="3000228">filepath</span><span class="op" id="3000236">.</span><span class="ident" id="3000237">Clean</span><span class="op" id="3000242">(</span><span class="ident" id="3000243">filename</span><span class="op" id="3000251">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000258">if</span>&nbsp;<span class="op" id="3000261">!</span><span class="ident" id="3000262">filepath</span><span class="op" id="3000270">.</span><span class="ident" id="3000271">IsAbs</span><span class="op" id="3000276">(</span><span class="ident" id="3000277">filename</span><span class="op" id="3000285">)</span>&nbsp;<span class="op" id="3000287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000295">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000348">filename</span>&nbsp;<span class="op" id="3000357">=</span>&nbsp;<span class="ident" id="3000359">filepath</span><span class="op" id="3000367">.</span><span class="ident" id="3000368">Join</span><span class="op" id="3000372">(</span><span class="ident" id="3000373">s</span><span class="op" id="3000374">.</span><span class="ident" id="3000375">dir</span><span class="op" id="3000378">,</span>&nbsp;<span class="ident" id="3000380">filename</span><span class="op" id="3000388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000401">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000407">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000438">s</span><span class="op" id="3000439">.</span><span class="ident" id="3000440">file</span><span class="op" id="3000444">.</span><span class="ident" id="3000445">AddLineInfo</span><span class="op" id="3000456">(</span><span class="ident" id="3000457">s</span><span class="op" id="3000458">.</span><span class="ident" id="3000459">lineOffset</span><span class="op" id="3000469">+</span><span class="builtinfunc" id="3000470">len</span><span class="op" id="3000473">(</span><span class="ident" id="3000474">text</span><span class="op" id="3000478">)</span><span class="op" id="3000479">+</span><span class="num" id="3000480">1</span><span class="op" id="3000481">,</span>&nbsp;<span class="ident" id="3000483">filename</span><span class="op" id="3000491">,</span>&nbsp;<span class="ident" id="3000493">line</span><span class="op" id="3000497">)</span>&nbsp;<span class="comment" id="3000499">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000560">}</span><br>
<span class="lineno">165</span><span class="op" id="3000562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3000565">func</span>&nbsp;<span class="op" id="3000570">(</span><span class="ident" id="3000571">s</span>&nbsp;<span class="op" id="3000573">*</span><span class="ident" id="3000574">Scanner</span><span class="op" id="3000581">)</span>&nbsp;<span class="ident" id="3000583">scanComment</span><span class="op" id="3000594">(</span><span class="op" id="3000595">)</span>&nbsp;<span class="builtintype" id="3000597">string</span>&nbsp;<span class="op" id="3000604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000607">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000668">offs</span>&nbsp;<span class="op" id="3000673">:=</span>&nbsp;<span class="ident" id="3000676">s</span><span class="op" id="3000677">.</span><span class="ident" id="3000678">offset</span>&nbsp;<span class="op" id="3000685">-</span>&nbsp;<span class="num" id="3000687">1</span>&nbsp;<span class="comment" id="3000689">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000717">hasCR</span>&nbsp;<span class="op" id="3000723">:=</span>&nbsp;<span class="builtintype" id="3000726">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000734">if</span>&nbsp;<span class="ident" id="3000737">s</span><span class="op" id="3000738">.</span><span class="ident" id="3000739">ch</span>&nbsp;<span class="op" id="3000742">==</span>&nbsp;<span class="string" id="3000745">&#39;/&#39;</span>&nbsp;<span class="op" id="3000749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000753">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000772">s</span><span class="op" id="3000773">.</span><span class="ident" id="3000774">next</span><span class="op" id="3000778">(</span><span class="op" id="3000779">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000783">for</span>&nbsp;<span class="ident" id="3000787">s</span><span class="op" id="3000788">.</span><span class="ident" id="3000789">ch</span>&nbsp;<span class="op" id="3000792">!=</span>&nbsp;<span class="string" id="3000795">&#39;\n&#39;</span>&nbsp;<span class="op" id="3000800">&amp;&amp;</span>&nbsp;<span class="ident" id="3000803">s</span><span class="op" id="3000804">.</span><span class="ident" id="3000805">ch</span>&nbsp;<span class="op" id="3000808">&gt;=</span>&nbsp;<span class="num" id="3000811">0</span>&nbsp;<span class="op" id="3000813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000818">if</span>&nbsp;<span class="ident" id="3000821">s</span><span class="op" id="3000822">.</span><span class="ident" id="3000823">ch</span>&nbsp;<span class="op" id="3000826">==</span>&nbsp;<span class="string" id="3000829">&#39;\r&#39;</span>&nbsp;<span class="op" id="3000834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000840">hasCR</span>&nbsp;<span class="op" id="3000846">=</span>&nbsp;<span class="builtintype" id="3000848">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000861">s</span><span class="op" id="3000862">.</span><span class="ident" id="3000863">next</span><span class="op" id="3000867">(</span><span class="op" id="3000868">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000876">if</span>&nbsp;<span class="ident" id="3000879">offs</span>&nbsp;<span class="op" id="3000884">==</span>&nbsp;<span class="ident" id="3000887">s</span><span class="op" id="3000888">.</span><span class="ident" id="3000889">lineOffset</span>&nbsp;<span class="op" id="3000900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000905">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000963">s</span><span class="op" id="3000964">.</span><span class="ident" id="3000965">interpretLineComment</span><span class="op" id="3000985">(</span><span class="ident" id="3000986">s</span><span class="op" id="3000987">.</span><span class="ident" id="3000988">src</span><span class="op" id="3000991">[</span><span class="ident" id="3000992">offs</span><span class="op" id="3000996">:</span><span class="ident" id="3000997">s</span><span class="op" id="3000998">.</span><span class="ident" id="3000999">offset</span><span class="op" id="3001005">]</span><span class="op" id="3001006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001010">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001014">goto</span>&nbsp;<span class="ident" id="3001019">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3001029">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001050">s</span><span class="op" id="3001051">.</span><span class="ident" id="3001052">next</span><span class="op" id="3001056">(</span><span class="op" id="3001057">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001060">for</span>&nbsp;<span class="ident" id="3001064">s</span><span class="op" id="3001065">.</span><span class="ident" id="3001066">ch</span>&nbsp;<span class="op" id="3001069">&gt;=</span>&nbsp;<span class="num" id="3001072">0</span>&nbsp;<span class="op" id="3001074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001078">ch</span>&nbsp;<span class="op" id="3001081">:=</span>&nbsp;<span class="ident" id="3001084">s</span><span class="op" id="3001085">.</span><span class="ident" id="3001086">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001091">if</span>&nbsp;<span class="ident" id="3001094">ch</span>&nbsp;<span class="op" id="3001097">==</span>&nbsp;<span class="string" id="3001100">&#39;\r&#39;</span>&nbsp;<span class="op" id="3001105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001110">hasCR</span>&nbsp;<span class="op" id="3001116">=</span>&nbsp;<span class="builtintype" id="3001118">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001125">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001129">s</span><span class="op" id="3001130">.</span><span class="ident" id="3001131">next</span><span class="op" id="3001135">(</span><span class="op" id="3001136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001140">if</span>&nbsp;<span class="ident" id="3001143">ch</span>&nbsp;<span class="op" id="3001146">==</span>&nbsp;<span class="string" id="3001149">&#39;*&#39;</span>&nbsp;<span class="op" id="3001153">&amp;&amp;</span>&nbsp;<span class="ident" id="3001156">s</span><span class="op" id="3001157">.</span><span class="ident" id="3001158">ch</span>&nbsp;<span class="op" id="3001161">==</span>&nbsp;<span class="string" id="3001164">&#39;/&#39;</span>&nbsp;<span class="op" id="3001168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001173">s</span><span class="op" id="3001174">.</span><span class="ident" id="3001175">next</span><span class="op" id="3001179">(</span><span class="op" id="3001180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001185">goto</span>&nbsp;<span class="ident" id="3001190">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001197">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001204">s</span><span class="op" id="3001205">.</span><span class="builtintype" id="3001206">error</span><span class="op" id="3001211">(</span><span class="ident" id="3001212">offs</span><span class="op" id="3001216">,</span>&nbsp;<span class="string" id="3001218">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3001242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3001245">exit</span><span class="op" id="3001249">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001252">lit</span>&nbsp;<span class="op" id="3001256">:=</span>&nbsp;<span class="ident" id="3001259">s</span><span class="op" id="3001260">.</span><span class="ident" id="3001261">src</span><span class="op" id="3001264">[</span><span class="ident" id="3001265">offs</span><span class="op" id="3001269">:</span><span class="ident" id="3001270">s</span><span class="op" id="3001271">.</span><span class="ident" id="3001272">offset</span><span class="op" id="3001278">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001281">if</span>&nbsp;<span class="ident" id="3001284">hasCR</span>&nbsp;<span class="op" id="3001290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001294">lit</span>&nbsp;<span class="op" id="3001298">=</span>&nbsp;<span class="ident" id="3001300">stripCR</span><span class="op" id="3001307">(</span><span class="ident" id="3001308">lit</span><span class="op" id="3001311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001318">return</span>&nbsp;<span class="builtintype" id="3001325">string</span><span class="op" id="3001331">(</span><span class="ident" id="3001332">lit</span><span class="op" id="3001335">)</span><br>
<span class="lineno"></span><span class="op" id="3001337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3001340">func</span>&nbsp;<span class="op" id="3001345">(</span><span class="ident" id="3001346">s</span>&nbsp;<span class="op" id="3001348">*</span><span class="ident" id="3001349">Scanner</span><span class="op" id="3001356">)</span>&nbsp;<span class="ident" id="3001358">findLineEnd</span><span class="op" id="3001369">(</span><span class="op" id="3001370">)</span>&nbsp;<span class="builtintype" id="3001372">bool</span>&nbsp;<span class="op" id="3001377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3001380">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001414">defer</span>&nbsp;<span class="keyword" id="3001420">func</span><span class="op" id="3001424">(</span><span class="ident" id="3001425">offs</span>&nbsp;<span class="builtintype" id="3001430">int</span><span class="op" id="3001433">)</span>&nbsp;<span class="op" id="3001435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3001439">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001505">s</span><span class="op" id="3001506">.</span><span class="ident" id="3001507">ch</span>&nbsp;<span class="op" id="3001510">=</span>&nbsp;<span class="string" id="3001512">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001518">s</span><span class="op" id="3001519">.</span><span class="ident" id="3001520">offset</span>&nbsp;<span class="op" id="3001527">=</span>&nbsp;<span class="ident" id="3001529">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001536">s</span><span class="op" id="3001537">.</span><span class="ident" id="3001538">rdOffset</span>&nbsp;<span class="op" id="3001547">=</span>&nbsp;<span class="ident" id="3001549">offs</span>&nbsp;<span class="op" id="3001554">+</span>&nbsp;<span class="num" id="3001556">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001560">s</span><span class="op" id="3001561">.</span><span class="ident" id="3001562">next</span><span class="op" id="3001566">(</span><span class="op" id="3001567">)</span>&nbsp;<span class="comment" id="3001569">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001599">}</span><span class="op" id="3001600">(</span><span class="ident" id="3001601">s</span><span class="op" id="3001602">.</span><span class="ident" id="3001603">offset</span>&nbsp;<span class="op" id="3001610">-</span>&nbsp;<span class="num" id="3001612">1</span><span class="op" id="3001613">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3001617">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001684">for</span>&nbsp;<span class="ident" id="3001688">s</span><span class="op" id="3001689">.</span><span class="ident" id="3001690">ch</span>&nbsp;<span class="op" id="3001693">==</span>&nbsp;<span class="string" id="3001696">&#39;/&#39;</span>&nbsp;<span class="op" id="3001700">||</span>&nbsp;<span class="ident" id="3001703">s</span><span class="op" id="3001704">.</span><span class="ident" id="3001705">ch</span>&nbsp;<span class="op" id="3001708">==</span>&nbsp;<span class="string" id="3001711">&#39;*&#39;</span>&nbsp;<span class="op" id="3001715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001719">if</span>&nbsp;<span class="ident" id="3001722">s</span><span class="op" id="3001723">.</span><span class="ident" id="3001724">ch</span>&nbsp;<span class="op" id="3001727">==</span>&nbsp;<span class="string" id="3001730">&#39;/&#39;</span>&nbsp;<span class="op" id="3001734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3001739">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001785">return</span>&nbsp;<span class="builtintype" id="3001792">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001799">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3001803">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001843">s</span><span class="op" id="3001844">.</span><span class="ident" id="3001845">next</span><span class="op" id="3001849">(</span><span class="op" id="3001850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001854">for</span>&nbsp;<span class="ident" id="3001858">s</span><span class="op" id="3001859">.</span><span class="ident" id="3001860">ch</span>&nbsp;<span class="op" id="3001863">&gt;=</span>&nbsp;<span class="num" id="3001866">0</span>&nbsp;<span class="op" id="3001868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001873">ch</span>&nbsp;<span class="op" id="3001876">:=</span>&nbsp;<span class="ident" id="3001879">s</span><span class="op" id="3001880">.</span><span class="ident" id="3001881">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001887">if</span>&nbsp;<span class="ident" id="3001890">ch</span>&nbsp;<span class="op" id="3001893">==</span>&nbsp;<span class="string" id="3001896">&#39;\n&#39;</span>&nbsp;<span class="op" id="3001901">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001907">return</span>&nbsp;<span class="builtintype" id="3001914">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001927">s</span><span class="op" id="3001928">.</span><span class="ident" id="3001929">next</span><span class="op" id="3001933">(</span><span class="op" id="3001934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001939">if</span>&nbsp;<span class="ident" id="3001942">ch</span>&nbsp;<span class="op" id="3001945">==</span>&nbsp;<span class="string" id="3001948">&#39;*&#39;</span>&nbsp;<span class="op" id="3001952">&amp;&amp;</span>&nbsp;<span class="ident" id="3001955">s</span><span class="op" id="3001956">.</span><span class="ident" id="3001957">ch</span>&nbsp;<span class="op" id="3001960">==</span>&nbsp;<span class="string" id="3001963">&#39;/&#39;</span>&nbsp;<span class="op" id="3001967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001973">s</span><span class="op" id="3001974">.</span><span class="ident" id="3001975">next</span><span class="op" id="3001979">(</span><span class="op" id="3001980">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001986">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002003">s</span><span class="op" id="3002004">.</span><span class="ident" id="3002005">skipWhitespace</span><span class="op" id="3002019">(</span><span class="op" id="3002020">)</span>&nbsp;<span class="comment" id="3002022">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002047">if</span>&nbsp;<span class="ident" id="3002050">s</span><span class="op" id="3002051">.</span><span class="ident" id="3002052">ch</span>&nbsp;<span class="op" id="3002055">&lt;</span>&nbsp;<span class="num" id="3002057">0</span>&nbsp;<span class="op" id="3002059">||</span>&nbsp;<span class="ident" id="3002062">s</span><span class="op" id="3002063">.</span><span class="ident" id="3002064">ch</span>&nbsp;<span class="op" id="3002067">==</span>&nbsp;<span class="string" id="3002070">&#39;\n&#39;</span>&nbsp;<span class="op" id="3002075">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002080">return</span>&nbsp;<span class="builtintype" id="3002087">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002098">if</span>&nbsp;<span class="ident" id="3002101">s</span><span class="op" id="3002102">.</span><span class="ident" id="3002103">ch</span>&nbsp;<span class="op" id="3002106">!=</span>&nbsp;<span class="string" id="3002109">&#39;/&#39;</span>&nbsp;<span class="op" id="3002113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3002118">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002142">return</span>&nbsp;<span class="builtintype" id="3002149">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002161">s</span><span class="op" id="3002162">.</span><span class="ident" id="3002163">next</span><span class="op" id="3002167">(</span><span class="op" id="3002168">)</span>&nbsp;<span class="comment" id="3002170">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002190">return</span>&nbsp;<span class="builtintype" id="3002197">false</span><br>
<span class="lineno">255</span><span class="op" id="3002203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3002206">func</span>&nbsp;<span class="ident" id="3002211">isLetter</span><span class="op" id="3002219">(</span><span class="ident" id="3002220">ch</span>&nbsp;<span class="builtintype" id="3002223">rune</span><span class="op" id="3002227">)</span>&nbsp;<span class="builtintype" id="3002229">bool</span>&nbsp;<span class="op" id="3002234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002237">return</span>&nbsp;<span class="string" id="3002244">&#39;a&#39;</span>&nbsp;<span class="op" id="3002248">&lt;=</span>&nbsp;<span class="ident" id="3002251">ch</span>&nbsp;<span class="op" id="3002254">&amp;&amp;</span>&nbsp;<span class="ident" id="3002257">ch</span>&nbsp;<span class="op" id="3002260">&lt;=</span>&nbsp;<span class="string" id="3002263">&#39;z&#39;</span>&nbsp;<span class="op" id="3002267">||</span>&nbsp;<span class="string" id="3002270">&#39;A&#39;</span>&nbsp;<span class="op" id="3002274">&lt;=</span>&nbsp;<span class="ident" id="3002277">ch</span>&nbsp;<span class="op" id="3002280">&amp;&amp;</span>&nbsp;<span class="ident" id="3002283">ch</span>&nbsp;<span class="op" id="3002286">&lt;=</span>&nbsp;<span class="string" id="3002289">&#39;Z&#39;</span>&nbsp;<span class="op" id="3002293">||</span>&nbsp;<span class="ident" id="3002296">ch</span>&nbsp;<span class="op" id="3002299">==</span>&nbsp;<span class="string" id="3002302">&#39;_&#39;</span>&nbsp;<span class="op" id="3002306">||</span>&nbsp;<span class="ident" id="3002309">ch</span>&nbsp;<span class="op" id="3002312">&gt;=</span>&nbsp;<span class="num" id="3002315">0x80</span>&nbsp;<span class="op" id="3002320">&amp;&amp;</span>&nbsp;<span class="ident" id="3002323">unicode</span><span class="op" id="3002330">.</span><span class="ident" id="3002331">IsLetter</span><span class="op" id="3002339">(</span><span class="ident" id="3002340">ch</span><span class="op" id="3002342">)</span><br>
<span class="lineno"></span><span class="op" id="3002344">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="3002347">func</span>&nbsp;<span class="ident" id="3002352">isDigit</span><span class="op" id="3002359">(</span><span class="ident" id="3002360">ch</span>&nbsp;<span class="builtintype" id="3002363">rune</span><span class="op" id="3002367">)</span>&nbsp;<span class="builtintype" id="3002369">bool</span>&nbsp;<span class="op" id="3002374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002377">return</span>&nbsp;<span class="string" id="3002384">&#39;0&#39;</span>&nbsp;<span class="op" id="3002388">&lt;=</span>&nbsp;<span class="ident" id="3002391">ch</span>&nbsp;<span class="op" id="3002394">&amp;&amp;</span>&nbsp;<span class="ident" id="3002397">ch</span>&nbsp;<span class="op" id="3002400">&lt;=</span>&nbsp;<span class="string" id="3002403">&#39;9&#39;</span>&nbsp;<span class="op" id="3002407">||</span>&nbsp;<span class="ident" id="3002410">ch</span>&nbsp;<span class="op" id="3002413">&gt;=</span>&nbsp;<span class="num" id="3002416">0x80</span>&nbsp;<span class="op" id="3002421">&amp;&amp;</span>&nbsp;<span class="ident" id="3002424">unicode</span><span class="op" id="3002431">.</span><span class="ident" id="3002432">IsDigit</span><span class="op" id="3002439">(</span><span class="ident" id="3002440">ch</span><span class="op" id="3002442">)</span><br>
<span class="lineno"></span><span class="op" id="3002444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="3002447">func</span>&nbsp;<span class="op" id="3002452">(</span><span class="ident" id="3002453">s</span>&nbsp;<span class="op" id="3002455">*</span><span class="ident" id="3002456">Scanner</span><span class="op" id="3002463">)</span>&nbsp;<span class="ident" id="3002465">scanIdentifier</span><span class="op" id="3002479">(</span><span class="op" id="3002480">)</span>&nbsp;<span class="builtintype" id="3002482">string</span>&nbsp;<span class="op" id="3002489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002492">offs</span>&nbsp;<span class="op" id="3002497">:=</span>&nbsp;<span class="ident" id="3002500">s</span><span class="op" id="3002501">.</span><span class="ident" id="3002502">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002510">for</span>&nbsp;<span class="ident" id="3002514">isLetter</span><span class="op" id="3002522">(</span><span class="ident" id="3002523">s</span><span class="op" id="3002524">.</span><span class="ident" id="3002525">ch</span><span class="op" id="3002527">)</span>&nbsp;<span class="op" id="3002529">||</span>&nbsp;<span class="ident" id="3002532">isDigit</span><span class="op" id="3002539">(</span><span class="ident" id="3002540">s</span><span class="op" id="3002541">.</span><span class="ident" id="3002542">ch</span><span class="op" id="3002544">)</span>&nbsp;<span class="op" id="3002546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002550">s</span><span class="op" id="3002551">.</span><span class="ident" id="3002552">next</span><span class="op" id="3002556">(</span><span class="op" id="3002557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002560">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002563">return</span>&nbsp;<span class="builtintype" id="3002570">string</span><span class="op" id="3002576">(</span><span class="ident" id="3002577">s</span><span class="op" id="3002578">.</span><span class="ident" id="3002579">src</span><span class="op" id="3002582">[</span><span class="ident" id="3002583">offs</span><span class="op" id="3002587">:</span><span class="ident" id="3002588">s</span><span class="op" id="3002589">.</span><span class="ident" id="3002590">offset</span><span class="op" id="3002596">]</span><span class="op" id="3002597">)</span><br>
<span class="lineno"></span><span class="op" id="3002599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3002602">func</span>&nbsp;<span class="ident" id="3002607">digitVal</span><span class="op" id="3002615">(</span><span class="ident" id="3002616">ch</span>&nbsp;<span class="builtintype" id="3002619">rune</span><span class="op" id="3002623">)</span>&nbsp;<span class="builtintype" id="3002625">int</span>&nbsp;<span class="op" id="3002629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002632">switch</span>&nbsp;<span class="op" id="3002639">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002642">case</span>&nbsp;<span class="string" id="3002647">&#39;0&#39;</span>&nbsp;<span class="op" id="3002651">&lt;=</span>&nbsp;<span class="ident" id="3002654">ch</span>&nbsp;<span class="op" id="3002657">&amp;&amp;</span>&nbsp;<span class="ident" id="3002660">ch</span>&nbsp;<span class="op" id="3002663">&lt;=</span>&nbsp;<span class="string" id="3002666">&#39;9&#39;</span><span class="op" id="3002669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002673">return</span>&nbsp;<span class="builtintype" id="3002680">int</span><span class="op" id="3002683">(</span><span class="ident" id="3002684">ch</span>&nbsp;<span class="op" id="3002687">-</span>&nbsp;<span class="string" id="3002689">&#39;0&#39;</span><span class="op" id="3002692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002695">case</span>&nbsp;<span class="string" id="3002700">&#39;a&#39;</span>&nbsp;<span class="op" id="3002704">&lt;=</span>&nbsp;<span class="ident" id="3002707">ch</span>&nbsp;<span class="op" id="3002710">&amp;&amp;</span>&nbsp;<span class="ident" id="3002713">ch</span>&nbsp;<span class="op" id="3002716">&lt;=</span>&nbsp;<span class="string" id="3002719">&#39;f&#39;</span><span class="op" id="3002722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002726">return</span>&nbsp;<span class="builtintype" id="3002733">int</span><span class="op" id="3002736">(</span><span class="ident" id="3002737">ch</span>&nbsp;<span class="op" id="3002740">-</span>&nbsp;<span class="string" id="3002742">&#39;a&#39;</span>&nbsp;<span class="op" id="3002746">+</span>&nbsp;<span class="num" id="3002748">10</span><span class="op" id="3002750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002753">case</span>&nbsp;<span class="string" id="3002758">&#39;A&#39;</span>&nbsp;<span class="op" id="3002762">&lt;=</span>&nbsp;<span class="ident" id="3002765">ch</span>&nbsp;<span class="op" id="3002768">&amp;&amp;</span>&nbsp;<span class="ident" id="3002771">ch</span>&nbsp;<span class="op" id="3002774">&lt;=</span>&nbsp;<span class="string" id="3002777">&#39;F&#39;</span><span class="op" id="3002780">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002784">return</span>&nbsp;<span class="builtintype" id="3002791">int</span><span class="op" id="3002794">(</span><span class="ident" id="3002795">ch</span>&nbsp;<span class="op" id="3002798">-</span>&nbsp;<span class="string" id="3002800">&#39;A&#39;</span>&nbsp;<span class="op" id="3002804">+</span>&nbsp;<span class="num" id="3002806">10</span><span class="op" id="3002808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002814">return</span>&nbsp;<span class="num" id="3002821">16</span>&nbsp;<span class="comment" id="3002824">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="3002859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="3002862">func</span>&nbsp;<span class="op" id="3002867">(</span><span class="ident" id="3002868">s</span>&nbsp;<span class="op" id="3002870">*</span><span class="ident" id="3002871">Scanner</span><span class="op" id="3002878">)</span>&nbsp;<span class="ident" id="3002880">scanMantissa</span><span class="op" id="3002892">(</span><span class="ident" id="3002893">base</span>&nbsp;<span class="builtintype" id="3002898">int</span><span class="op" id="3002901">)</span>&nbsp;<span class="op" id="3002903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002906">for</span>&nbsp;<span class="ident" id="3002910">digitVal</span><span class="op" id="3002918">(</span><span class="ident" id="3002919">s</span><span class="op" id="3002920">.</span><span class="ident" id="3002921">ch</span><span class="op" id="3002923">)</span>&nbsp;<span class="op" id="3002925">&lt;</span>&nbsp;<span class="ident" id="3002927">base</span>&nbsp;<span class="op" id="3002932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002936">s</span><span class="op" id="3002937">.</span><span class="ident" id="3002938">next</span><span class="op" id="3002942">(</span><span class="op" id="3002943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002946">}</span><br>
<span class="lineno"></span><span class="op" id="3002948">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="3002951">func</span>&nbsp;<span class="op" id="3002956">(</span><span class="ident" id="3002957">s</span>&nbsp;<span class="op" id="3002959">*</span><span class="ident" id="3002960">Scanner</span><span class="op" id="3002967">)</span>&nbsp;<span class="ident" id="3002969">scanNumber</span><span class="op" id="3002979">(</span><span class="ident" id="3002980">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="3002997">bool</span><span class="op" id="3003001">)</span>&nbsp;<span class="op" id="3003003">(</span><span class="ident" id="3003004">token</span><span class="op" id="3003009">.</span><span class="ident" id="3003010">Token</span><span class="op" id="3003015">,</span>&nbsp;<span class="builtintype" id="3003017">string</span><span class="op" id="3003023">)</span>&nbsp;<span class="op" id="3003025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003028">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003052">offs</span>&nbsp;<span class="op" id="3003057">:=</span>&nbsp;<span class="ident" id="3003060">s</span><span class="op" id="3003061">.</span><span class="ident" id="3003062">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003070">tok</span>&nbsp;<span class="op" id="3003074">:=</span>&nbsp;<span class="ident" id="3003077">token</span><span class="op" id="3003082">.</span><span class="ident" id="3003083">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003089">if</span>&nbsp;<span class="ident" id="3003092">seenDecimalPoint</span>&nbsp;<span class="op" id="3003109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003113">offs</span><span class="op" id="3003117">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003122">tok</span>&nbsp;<span class="op" id="3003126">=</span>&nbsp;<span class="ident" id="3003128">token</span><span class="op" id="3003133">.</span><span class="ident" id="3003134">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003142">s</span><span class="op" id="3003143">.</span><span class="ident" id="3003144">scanMantissa</span><span class="op" id="3003156">(</span><span class="num" id="3003157">10</span><span class="op" id="3003159">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003163">goto</span>&nbsp;<span class="ident" id="3003168">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003182">if</span>&nbsp;<span class="ident" id="3003185">s</span><span class="op" id="3003186">.</span><span class="ident" id="3003187">ch</span>&nbsp;<span class="op" id="3003190">==</span>&nbsp;<span class="string" id="3003193">&#39;0&#39;</span>&nbsp;<span class="op" id="3003197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003201">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003219">offs</span>&nbsp;<span class="op" id="3003224">:=</span>&nbsp;<span class="ident" id="3003227">s</span><span class="op" id="3003228">.</span><span class="ident" id="3003229">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003238">s</span><span class="op" id="3003239">.</span><span class="ident" id="3003240">next</span><span class="op" id="3003244">(</span><span class="op" id="3003245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003249">if</span>&nbsp;<span class="ident" id="3003252">s</span><span class="op" id="3003253">.</span><span class="ident" id="3003254">ch</span>&nbsp;<span class="op" id="3003257">==</span>&nbsp;<span class="string" id="3003260">&#39;x&#39;</span>&nbsp;<span class="op" id="3003264">||</span>&nbsp;<span class="ident" id="3003267">s</span><span class="op" id="3003268">.</span><span class="ident" id="3003269">ch</span>&nbsp;<span class="op" id="3003272">==</span>&nbsp;<span class="string" id="3003275">&#39;X&#39;</span>&nbsp;<span class="op" id="3003279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003284">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003306">s</span><span class="op" id="3003307">.</span><span class="ident" id="3003308">next</span><span class="op" id="3003312">(</span><span class="op" id="3003313">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003318">s</span><span class="op" id="3003319">.</span><span class="ident" id="3003320">scanMantissa</span><span class="op" id="3003332">(</span><span class="num" id="3003333">16</span><span class="op" id="3003335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003340">if</span>&nbsp;<span class="ident" id="3003343">s</span><span class="op" id="3003344">.</span><span class="ident" id="3003345">offset</span><span class="op" id="3003351">-</span><span class="ident" id="3003352">offs</span>&nbsp;<span class="op" id="3003357">&lt;=</span>&nbsp;<span class="num" id="3003360">2</span>&nbsp;<span class="op" id="3003362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003368">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003401">s</span><span class="op" id="3003402">.</span><span class="builtintype" id="3003403">error</span><span class="op" id="3003408">(</span><span class="ident" id="3003409">offs</span><span class="op" id="3003413">,</span>&nbsp;<span class="string" id="3003415">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="3003443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003448">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003452">}</span>&nbsp;<span class="keyword" id="3003454">else</span>&nbsp;<span class="op" id="3003459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003464">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003489">seenDecimalDigit</span>&nbsp;<span class="op" id="3003506">:=</span>&nbsp;<span class="builtintype" id="3003509">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003518">s</span><span class="op" id="3003519">.</span><span class="ident" id="3003520">scanMantissa</span><span class="op" id="3003532">(</span><span class="num" id="3003533">8</span><span class="op" id="3003534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003539">if</span>&nbsp;<span class="ident" id="3003542">s</span><span class="op" id="3003543">.</span><span class="ident" id="3003544">ch</span>&nbsp;<span class="op" id="3003547">==</span>&nbsp;<span class="string" id="3003550">&#39;8&#39;</span>&nbsp;<span class="op" id="3003554">||</span>&nbsp;<span class="ident" id="3003557">s</span><span class="op" id="3003558">.</span><span class="ident" id="3003559">ch</span>&nbsp;<span class="op" id="3003562">==</span>&nbsp;<span class="string" id="3003565">&#39;9&#39;</span>&nbsp;<span class="op" id="3003569">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003575">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003609">seenDecimalDigit</span>&nbsp;<span class="op" id="3003626">=</span>&nbsp;<span class="builtintype" id="3003628">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003637">s</span><span class="op" id="3003638">.</span><span class="ident" id="3003639">scanMantissa</span><span class="op" id="3003651">(</span><span class="num" id="3003652">10</span><span class="op" id="3003654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003664">if</span>&nbsp;<span class="ident" id="3003667">s</span><span class="op" id="3003668">.</span><span class="ident" id="3003669">ch</span>&nbsp;<span class="op" id="3003672">==</span>&nbsp;<span class="string" id="3003675">&#39;.&#39;</span>&nbsp;<span class="op" id="3003679">||</span>&nbsp;<span class="ident" id="3003682">s</span><span class="op" id="3003683">.</span><span class="ident" id="3003684">ch</span>&nbsp;<span class="op" id="3003687">==</span>&nbsp;<span class="string" id="3003690">&#39;e&#39;</span>&nbsp;<span class="op" id="3003694">||</span>&nbsp;<span class="ident" id="3003697">s</span><span class="op" id="3003698">.</span><span class="ident" id="3003699">ch</span>&nbsp;<span class="op" id="3003702">==</span>&nbsp;<span class="string" id="3003705">&#39;E&#39;</span>&nbsp;<span class="op" id="3003709">||</span>&nbsp;<span class="ident" id="3003712">s</span><span class="op" id="3003713">.</span><span class="ident" id="3003714">ch</span>&nbsp;<span class="op" id="3003717">==</span>&nbsp;<span class="string" id="3003720">&#39;i&#39;</span>&nbsp;<span class="op" id="3003724">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003730">goto</span>&nbsp;<span class="ident" id="3003735">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003752">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003768">if</span>&nbsp;<span class="ident" id="3003771">seenDecimalDigit</span>&nbsp;<span class="op" id="3003788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003794">s</span><span class="op" id="3003795">.</span><span class="builtintype" id="3003796">error</span><span class="op" id="3003801">(</span><span class="ident" id="3003802">offs</span><span class="op" id="3003806">,</span>&nbsp;<span class="string" id="3003808">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="3003830">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003843">goto</span>&nbsp;<span class="ident" id="3003848">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3003858">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003883">s</span><span class="op" id="3003884">.</span><span class="ident" id="3003885">scanMantissa</span><span class="op" id="3003897">(</span><span class="num" id="3003898">10</span><span class="op" id="3003900">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3003903">fraction</span><span class="op" id="3003911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003914">if</span>&nbsp;<span class="ident" id="3003917">s</span><span class="op" id="3003918">.</span><span class="ident" id="3003919">ch</span>&nbsp;<span class="op" id="3003922">==</span>&nbsp;<span class="string" id="3003925">&#39;.&#39;</span>&nbsp;<span class="op" id="3003929">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003933">tok</span>&nbsp;<span class="op" id="3003937">=</span>&nbsp;<span class="ident" id="3003939">token</span><span class="op" id="3003944">.</span><span class="ident" id="3003945">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003953">s</span><span class="op" id="3003954">.</span><span class="ident" id="3003955">next</span><span class="op" id="3003959">(</span><span class="op" id="3003960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3003964">s</span><span class="op" id="3003965">.</span><span class="ident" id="3003966">scanMantissa</span><span class="op" id="3003978">(</span><span class="num" id="3003979">10</span><span class="op" id="3003981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3003984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="3003987">exponent</span><span class="op" id="3003995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003998">if</span>&nbsp;<span class="ident" id="3004001">s</span><span class="op" id="3004002">.</span><span class="ident" id="3004003">ch</span>&nbsp;<span class="op" id="3004006">==</span>&nbsp;<span class="string" id="3004009">&#39;e&#39;</span>&nbsp;<span class="op" id="3004013">||</span>&nbsp;<span class="ident" id="3004016">s</span><span class="op" id="3004017">.</span><span class="ident" id="3004018">ch</span>&nbsp;<span class="op" id="3004021">==</span>&nbsp;<span class="string" id="3004024">&#39;E&#39;</span>&nbsp;<span class="op" id="3004028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004032">tok</span>&nbsp;<span class="op" id="3004036">=</span>&nbsp;<span class="ident" id="3004038">token</span><span class="op" id="3004043">.</span><span class="ident" id="3004044">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004052">s</span><span class="op" id="3004053">.</span><span class="ident" id="3004054">next</span><span class="op" id="3004058">(</span><span class="op" id="3004059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004063">if</span>&nbsp;<span class="ident" id="3004066">s</span><span class="op" id="3004067">.</span><span class="ident" id="3004068">ch</span>&nbsp;<span class="op" id="3004071">==</span>&nbsp;<span class="string" id="3004074">&#39;-&#39;</span>&nbsp;<span class="op" id="3004078">||</span>&nbsp;<span class="ident" id="3004081">s</span><span class="op" id="3004082">.</span><span class="ident" id="3004083">ch</span>&nbsp;<span class="op" id="3004086">==</span>&nbsp;<span class="string" id="3004089">&#39;+&#39;</span>&nbsp;<span class="op" id="3004093">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004098">s</span><span class="op" id="3004099">.</span><span class="ident" id="3004100">next</span><span class="op" id="3004104">(</span><span class="op" id="3004105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3004109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004113">s</span><span class="op" id="3004114">.</span><span class="ident" id="3004115">scanMantissa</span><span class="op" id="3004127">(</span><span class="num" id="3004128">10</span><span class="op" id="3004130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3004133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004137">if</span>&nbsp;<span class="ident" id="3004140">s</span><span class="op" id="3004141">.</span><span class="ident" id="3004142">ch</span>&nbsp;<span class="op" id="3004145">==</span>&nbsp;<span class="string" id="3004148">&#39;i&#39;</span>&nbsp;<span class="op" id="3004152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004156">tok</span>&nbsp;<span class="op" id="3004160">=</span>&nbsp;<span class="ident" id="3004162">token</span><span class="op" id="3004167">.</span><span class="ident" id="3004168">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004175">s</span><span class="op" id="3004176">.</span><span class="ident" id="3004177">next</span><span class="op" id="3004181">(</span><span class="op" id="3004182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3004185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="3004188">exit</span><span class="op" id="3004192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004195">return</span>&nbsp;<span class="ident" id="3004202">tok</span><span class="op" id="3004205">,</span>&nbsp;<span class="builtintype" id="3004207">string</span><span class="op" id="3004213">(</span><span class="ident" id="3004214">s</span><span class="op" id="3004215">.</span><span class="ident" id="3004216">src</span><span class="op" id="3004219">[</span><span class="ident" id="3004220">offs</span><span class="op" id="3004224">:</span><span class="ident" id="3004225">s</span><span class="op" id="3004226">.</span><span class="ident" id="3004227">offset</span><span class="op" id="3004233">]</span><span class="op" id="3004234">)</span><br>
<span class="lineno"></span><span class="op" id="3004236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004239">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="3004306">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="3004377">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="3004442">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="3004462">func</span>&nbsp;<span class="op" id="3004467">(</span><span class="ident" id="3004468">s</span>&nbsp;<span class="op" id="3004470">*</span><span class="ident" id="3004471">Scanner</span><span class="op" id="3004478">)</span>&nbsp;<span class="ident" id="3004480">scanEscape</span><span class="op" id="3004490">(</span><span class="ident" id="3004491">quote</span>&nbsp;<span class="builtintype" id="3004497">rune</span><span class="op" id="3004501">)</span>&nbsp;<span class="builtintype" id="3004503">bool</span>&nbsp;<span class="op" id="3004508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004511">offs</span>&nbsp;<span class="op" id="3004516">:=</span>&nbsp;<span class="ident" id="3004519">s</span><span class="op" id="3004520">.</span><span class="ident" id="3004521">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004530">var</span>&nbsp;<span class="ident" id="3004534">n</span>&nbsp;<span class="builtintype" id="3004536">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004541">var</span>&nbsp;<span class="ident" id="3004545">base</span><span class="op" id="3004549">,</span>&nbsp;<span class="ident" id="3004551">max</span>&nbsp;<span class="builtintype" id="3004555">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004563">switch</span>&nbsp;<span class="ident" id="3004570">s</span><span class="op" id="3004571">.</span><span class="ident" id="3004572">ch</span>&nbsp;<span class="op" id="3004575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004578">case</span>&nbsp;<span class="string" id="3004583">&#39;a&#39;</span><span class="op" id="3004586">,</span>&nbsp;<span class="string" id="3004588">&#39;b&#39;</span><span class="op" id="3004591">,</span>&nbsp;<span class="string" id="3004593">&#39;f&#39;</span><span class="op" id="3004596">,</span>&nbsp;<span class="string" id="3004598">&#39;n&#39;</span><span class="op" id="3004601">,</span>&nbsp;<span class="string" id="3004603">&#39;r&#39;</span><span class="op" id="3004606">,</span>&nbsp;<span class="string" id="3004608">&#39;t&#39;</span><span class="op" id="3004611">,</span>&nbsp;<span class="string" id="3004613">&#39;v&#39;</span><span class="op" id="3004616">,</span>&nbsp;<span class="string" id="3004618">&#39;\\&#39;</span><span class="op" id="3004622">,</span>&nbsp;<span class="ident" id="3004624">quote</span><span class="op" id="3004629">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004633">s</span><span class="op" id="3004634">.</span><span class="ident" id="3004635">next</span><span class="op" id="3004639">(</span><span class="op" id="3004640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004644">return</span>&nbsp;<span class="builtintype" id="3004651">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004657">case</span>&nbsp;<span class="string" id="3004662">&#39;0&#39;</span><span class="op" id="3004665">,</span>&nbsp;<span class="string" id="3004667">&#39;1&#39;</span><span class="op" id="3004670">,</span>&nbsp;<span class="string" id="3004672">&#39;2&#39;</span><span class="op" id="3004675">,</span>&nbsp;<span class="string" id="3004677">&#39;3&#39;</span><span class="op" id="3004680">,</span>&nbsp;<span class="string" id="3004682">&#39;4&#39;</span><span class="op" id="3004685">,</span>&nbsp;<span class="string" id="3004687">&#39;5&#39;</span><span class="op" id="3004690">,</span>&nbsp;<span class="string" id="3004692">&#39;6&#39;</span><span class="op" id="3004695">,</span>&nbsp;<span class="string" id="3004697">&#39;7&#39;</span><span class="op" id="3004700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004704">n</span><span class="op" id="3004705">,</span>&nbsp;<span class="ident" id="3004707">base</span><span class="op" id="3004711">,</span>&nbsp;<span class="ident" id="3004713">max</span>&nbsp;<span class="op" id="3004717">=</span>&nbsp;<span class="num" id="3004719">3</span><span class="op" id="3004720">,</span>&nbsp;<span class="num" id="3004722">8</span><span class="op" id="3004723">,</span>&nbsp;<span class="num" id="3004725">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004730">case</span>&nbsp;<span class="string" id="3004735">&#39;x&#39;</span><span class="op" id="3004738">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004742">s</span><span class="op" id="3004743">.</span><span class="ident" id="3004744">next</span><span class="op" id="3004748">(</span><span class="op" id="3004749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004753">n</span><span class="op" id="3004754">,</span>&nbsp;<span class="ident" id="3004756">base</span><span class="op" id="3004760">,</span>&nbsp;<span class="ident" id="3004762">max</span>&nbsp;<span class="op" id="3004766">=</span>&nbsp;<span class="num" id="3004768">2</span><span class="op" id="3004769">,</span>&nbsp;<span class="num" id="3004771">16</span><span class="op" id="3004773">,</span>&nbsp;<span class="num" id="3004775">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004780">case</span>&nbsp;<span class="string" id="3004785">&#39;u&#39;</span><span class="op" id="3004788">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004792">s</span><span class="op" id="3004793">.</span><span class="ident" id="3004794">next</span><span class="op" id="3004798">(</span><span class="op" id="3004799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004803">n</span><span class="op" id="3004804">,</span>&nbsp;<span class="ident" id="3004806">base</span><span class="op" id="3004810">,</span>&nbsp;<span class="ident" id="3004812">max</span>&nbsp;<span class="op" id="3004816">=</span>&nbsp;<span class="num" id="3004818">4</span><span class="op" id="3004819">,</span>&nbsp;<span class="num" id="3004821">16</span><span class="op" id="3004823">,</span>&nbsp;<span class="ident" id="3004825">unicode</span><span class="op" id="3004832">.</span><span class="ident" id="3004833">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004842">case</span>&nbsp;<span class="string" id="3004847">&#39;U&#39;</span><span class="op" id="3004850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004854">s</span><span class="op" id="3004855">.</span><span class="ident" id="3004856">next</span><span class="op" id="3004860">(</span><span class="op" id="3004861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004865">n</span><span class="op" id="3004866">,</span>&nbsp;<span class="ident" id="3004868">base</span><span class="op" id="3004872">,</span>&nbsp;<span class="ident" id="3004874">max</span>&nbsp;<span class="op" id="3004878">=</span>&nbsp;<span class="num" id="3004880">8</span><span class="op" id="3004881">,</span>&nbsp;<span class="num" id="3004883">16</span><span class="op" id="3004885">,</span>&nbsp;<span class="ident" id="3004887">unicode</span><span class="op" id="3004894">.</span><span class="ident" id="3004895">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004904">default</span><span class="op" id="3004911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004915">msg</span>&nbsp;<span class="op" id="3004919">:=</span>&nbsp;<span class="string" id="3004922">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004950">if</span>&nbsp;<span class="ident" id="3004953">s</span><span class="op" id="3004954">.</span><span class="ident" id="3004955">ch</span>&nbsp;<span class="op" id="3004958">&lt;</span>&nbsp;<span class="num" id="3004960">0</span>&nbsp;<span class="op" id="3004962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004967">msg</span>&nbsp;<span class="op" id="3004971">=</span>&nbsp;<span class="string" id="3004973">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005012">s</span><span class="op" id="3005013">.</span><span class="builtintype" id="3005014">error</span><span class="op" id="3005019">(</span><span class="ident" id="3005020">offs</span><span class="op" id="3005024">,</span>&nbsp;<span class="ident" id="3005026">msg</span><span class="op" id="3005029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005033">return</span>&nbsp;<span class="builtintype" id="3005040">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005051">var</span>&nbsp;<span class="ident" id="3005055">x</span>&nbsp;<span class="builtintype" id="3005057">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005065">for</span>&nbsp;<span class="ident" id="3005069">n</span>&nbsp;<span class="op" id="3005071">&gt;</span>&nbsp;<span class="num" id="3005073">0</span>&nbsp;<span class="op" id="3005075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005079">d</span>&nbsp;<span class="op" id="3005081">:=</span>&nbsp;<span class="builtintype" id="3005084">uint32</span><span class="op" id="3005090">(</span><span class="ident" id="3005091">digitVal</span><span class="op" id="3005099">(</span><span class="ident" id="3005100">s</span><span class="op" id="3005101">.</span><span class="ident" id="3005102">ch</span><span class="op" id="3005104">)</span><span class="op" id="3005105">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005109">if</span>&nbsp;<span class="ident" id="3005112">d</span>&nbsp;<span class="op" id="3005114">&gt;=</span>&nbsp;<span class="ident" id="3005117">base</span>&nbsp;<span class="op" id="3005122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005127">msg</span>&nbsp;<span class="op" id="3005131">:=</span>&nbsp;<span class="ident" id="3005134">fmt</span><span class="op" id="3005137">.</span><span class="ident" id="3005138">Sprintf</span><span class="op" id="3005145">(</span><span class="string" id="3005146">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="3005188">,</span>&nbsp;<span class="ident" id="3005190">s</span><span class="op" id="3005191">.</span><span class="ident" id="3005192">ch</span><span class="op" id="3005194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005199">if</span>&nbsp;<span class="ident" id="3005202">s</span><span class="op" id="3005203">.</span><span class="ident" id="3005204">ch</span>&nbsp;<span class="op" id="3005207">&lt;</span>&nbsp;<span class="num" id="3005209">0</span>&nbsp;<span class="op" id="3005211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005217">msg</span>&nbsp;<span class="op" id="3005221">=</span>&nbsp;<span class="string" id="3005223">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005259">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005264">s</span><span class="op" id="3005265">.</span><span class="builtintype" id="3005266">error</span><span class="op" id="3005271">(</span><span class="ident" id="3005272">s</span><span class="op" id="3005273">.</span><span class="ident" id="3005274">offset</span><span class="op" id="3005280">,</span>&nbsp;<span class="ident" id="3005282">msg</span><span class="op" id="3005285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005290">return</span>&nbsp;<span class="builtintype" id="3005297">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005309">x</span>&nbsp;<span class="op" id="3005311">=</span>&nbsp;<span class="ident" id="3005313">x</span><span class="op" id="3005314">*</span><span class="ident" id="3005315">base</span>&nbsp;<span class="op" id="3005320">+</span>&nbsp;<span class="ident" id="3005322">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005326">s</span><span class="op" id="3005327">.</span><span class="ident" id="3005328">next</span><span class="op" id="3005332">(</span><span class="op" id="3005333">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005337">n</span><span class="op" id="3005338">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005346">if</span>&nbsp;<span class="ident" id="3005349">x</span>&nbsp;<span class="op" id="3005351">&gt;</span>&nbsp;<span class="ident" id="3005353">max</span>&nbsp;<span class="op" id="3005357">||</span>&nbsp;<span class="num" id="3005360">0xD800</span>&nbsp;<span class="op" id="3005367">&lt;=</span>&nbsp;<span class="ident" id="3005370">x</span>&nbsp;<span class="op" id="3005372">&amp;&amp;</span>&nbsp;<span class="ident" id="3005375">x</span>&nbsp;<span class="op" id="3005377">&lt;</span>&nbsp;<span class="num" id="3005379">0xE000</span>&nbsp;<span class="op" id="3005386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005390">s</span><span class="op" id="3005391">.</span><span class="builtintype" id="3005392">error</span><span class="op" id="3005397">(</span><span class="ident" id="3005398">offs</span><span class="op" id="3005402">,</span>&nbsp;<span class="string" id="3005404">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="3005451">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005455">return</span>&nbsp;<span class="builtintype" id="3005462">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005473">return</span>&nbsp;<span class="builtintype" id="3005480">true</span><br>
<span class="lineno"></span><span class="op" id="3005485">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="3005488">func</span>&nbsp;<span class="op" id="3005493">(</span><span class="ident" id="3005494">s</span>&nbsp;<span class="op" id="3005496">*</span><span class="ident" id="3005497">Scanner</span><span class="op" id="3005504">)</span>&nbsp;<span class="ident" id="3005506">scanRune</span><span class="op" id="3005514">(</span><span class="op" id="3005515">)</span>&nbsp;<span class="builtintype" id="3005517">string</span>&nbsp;<span class="op" id="3005524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3005527">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005561">offs</span>&nbsp;<span class="op" id="3005566">:=</span>&nbsp;<span class="ident" id="3005569">s</span><span class="op" id="3005570">.</span><span class="ident" id="3005571">offset</span>&nbsp;<span class="op" id="3005578">-</span>&nbsp;<span class="num" id="3005580">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005584">valid</span>&nbsp;<span class="op" id="3005590">:=</span>&nbsp;<span class="builtintype" id="3005593">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005599">n</span>&nbsp;<span class="op" id="3005601">:=</span>&nbsp;<span class="num" id="3005604">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005607">for</span>&nbsp;<span class="op" id="3005611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005615">ch</span>&nbsp;<span class="op" id="3005618">:=</span>&nbsp;<span class="ident" id="3005621">s</span><span class="op" id="3005622">.</span><span class="ident" id="3005623">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005628">if</span>&nbsp;<span class="ident" id="3005631">ch</span>&nbsp;<span class="op" id="3005634">==</span>&nbsp;<span class="string" id="3005637">&#39;\n&#39;</span>&nbsp;<span class="op" id="3005642">||</span>&nbsp;<span class="ident" id="3005645">ch</span>&nbsp;<span class="op" id="3005648">&lt;</span>&nbsp;<span class="num" id="3005650">0</span>&nbsp;<span class="op" id="3005652">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3005657">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005710">if</span>&nbsp;<span class="ident" id="3005713">valid</span>&nbsp;<span class="op" id="3005719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005725">s</span><span class="op" id="3005726">.</span><span class="builtintype" id="3005727">error</span><span class="op" id="3005732">(</span><span class="ident" id="3005733">offs</span><span class="op" id="3005737">,</span>&nbsp;<span class="string" id="3005739">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3005768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005774">valid</span>&nbsp;<span class="op" id="3005780">=</span>&nbsp;<span class="builtintype" id="3005782">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005791">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005796">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005808">s</span><span class="op" id="3005809">.</span><span class="ident" id="3005810">next</span><span class="op" id="3005814">(</span><span class="op" id="3005815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005819">if</span>&nbsp;<span class="ident" id="3005822">ch</span>&nbsp;<span class="op" id="3005825">==</span>&nbsp;<span class="string" id="3005828">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="3005833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005838">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005850">n</span><span class="op" id="3005851">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005856">if</span>&nbsp;<span class="ident" id="3005859">ch</span>&nbsp;<span class="op" id="3005862">==</span>&nbsp;<span class="string" id="3005865">&#39;\\&#39;</span>&nbsp;<span class="op" id="3005870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005875">if</span>&nbsp;<span class="op" id="3005878">!</span><span class="ident" id="3005879">s</span><span class="op" id="3005880">.</span><span class="ident" id="3005881">scanEscape</span><span class="op" id="3005891">(</span><span class="string" id="3005892">&#39;\&#39;&#39;</span><span class="op" id="3005896">)</span>&nbsp;<span class="op" id="3005898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005904">valid</span>&nbsp;<span class="op" id="3005910">=</span>&nbsp;<span class="builtintype" id="3005912">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3005926">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005972">if</span>&nbsp;<span class="ident" id="3005975">valid</span>&nbsp;<span class="op" id="3005981">&amp;&amp;</span>&nbsp;<span class="ident" id="3005984">n</span>&nbsp;<span class="op" id="3005986">!=</span>&nbsp;<span class="num" id="3005989">1</span>&nbsp;<span class="op" id="3005991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005995">s</span><span class="op" id="3005996">.</span><span class="builtintype" id="3005997">error</span><span class="op" id="3006002">(</span><span class="ident" id="3006003">offs</span><span class="op" id="3006007">,</span>&nbsp;<span class="string" id="3006009">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="3006031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006038">return</span>&nbsp;<span class="builtintype" id="3006045">string</span><span class="op" id="3006051">(</span><span class="ident" id="3006052">s</span><span class="op" id="3006053">.</span><span class="ident" id="3006054">src</span><span class="op" id="3006057">[</span><span class="ident" id="3006058">offs</span><span class="op" id="3006062">:</span><span class="ident" id="3006063">s</span><span class="op" id="3006064">.</span><span class="ident" id="3006065">offset</span><span class="op" id="3006071">]</span><span class="op" id="3006072">)</span><br>
<span class="lineno">455</span><span class="op" id="3006074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3006077">func</span>&nbsp;<span class="op" id="3006082">(</span><span class="ident" id="3006083">s</span>&nbsp;<span class="op" id="3006085">*</span><span class="ident" id="3006086">Scanner</span><span class="op" id="3006093">)</span>&nbsp;<span class="ident" id="3006095">scanString</span><span class="op" id="3006105">(</span><span class="op" id="3006106">)</span>&nbsp;<span class="builtintype" id="3006108">string</span>&nbsp;<span class="op" id="3006115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3006118">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006151">offs</span>&nbsp;<span class="op" id="3006156">:=</span>&nbsp;<span class="ident" id="3006159">s</span><span class="op" id="3006160">.</span><span class="ident" id="3006161">offset</span>&nbsp;<span class="op" id="3006168">-</span>&nbsp;<span class="num" id="3006170">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006174">for</span>&nbsp;<span class="op" id="3006178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006182">ch</span>&nbsp;<span class="op" id="3006185">:=</span>&nbsp;<span class="ident" id="3006188">s</span><span class="op" id="3006189">.</span><span class="ident" id="3006190">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006195">if</span>&nbsp;<span class="ident" id="3006198">ch</span>&nbsp;<span class="op" id="3006201">==</span>&nbsp;<span class="string" id="3006204">&#39;\n&#39;</span>&nbsp;<span class="op" id="3006209">||</span>&nbsp;<span class="ident" id="3006212">ch</span>&nbsp;<span class="op" id="3006215">&lt;</span>&nbsp;<span class="num" id="3006217">0</span>&nbsp;<span class="op" id="3006219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006224">s</span><span class="op" id="3006225">.</span><span class="builtintype" id="3006226">error</span><span class="op" id="3006231">(</span><span class="ident" id="3006232">offs</span><span class="op" id="3006236">,</span>&nbsp;<span class="string" id="3006238">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3006269">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006274">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006286">s</span><span class="op" id="3006287">.</span><span class="ident" id="3006288">next</span><span class="op" id="3006292">(</span><span class="op" id="3006293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006297">if</span>&nbsp;<span class="ident" id="3006300">ch</span>&nbsp;<span class="op" id="3006303">==</span>&nbsp;<span class="string" id="3006306">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3006310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006315">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006327">if</span>&nbsp;<span class="ident" id="3006330">ch</span>&nbsp;<span class="op" id="3006333">==</span>&nbsp;<span class="string" id="3006336">&#39;\\&#39;</span>&nbsp;<span class="op" id="3006341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006346">s</span><span class="op" id="3006347">.</span><span class="ident" id="3006348">scanEscape</span><span class="op" id="3006358">(</span><span class="string" id="3006359">&#39;&#34;&#39;</span><span class="op" id="3006362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006369">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006373">return</span>&nbsp;<span class="builtintype" id="3006380">string</span><span class="op" id="3006386">(</span><span class="ident" id="3006387">s</span><span class="op" id="3006388">.</span><span class="ident" id="3006389">src</span><span class="op" id="3006392">[</span><span class="ident" id="3006393">offs</span><span class="op" id="3006397">:</span><span class="ident" id="3006398">s</span><span class="op" id="3006399">.</span><span class="ident" id="3006400">offset</span><span class="op" id="3006406">]</span><span class="op" id="3006407">)</span><br>
<span class="lineno"></span><span class="op" id="3006409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3006412">func</span>&nbsp;<span class="ident" id="3006417">stripCR</span><span class="op" id="3006424">(</span><span class="ident" id="3006425">b</span>&nbsp;<span class="op" id="3006427">[</span><span class="op" id="3006428">]</span><span class="builtintype" id="3006429">byte</span><span class="op" id="3006433">)</span>&nbsp;<span class="op" id="3006435">[</span><span class="op" id="3006436">]</span><span class="builtintype" id="3006437">byte</span>&nbsp;<span class="op" id="3006442">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006445">c</span>&nbsp;<span class="op" id="3006447">:=</span>&nbsp;<span class="builtinfunc" id="3006450">make</span><span class="op" id="3006454">(</span><span class="op" id="3006455">[</span><span class="op" id="3006456">]</span><span class="builtintype" id="3006457">byte</span><span class="op" id="3006461">,</span>&nbsp;<span class="builtinfunc" id="3006463">len</span><span class="op" id="3006466">(</span><span class="ident" id="3006467">b</span><span class="op" id="3006468">)</span><span class="op" id="3006469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006472">i</span>&nbsp;<span class="op" id="3006474">:=</span>&nbsp;<span class="num" id="3006477">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006480">for</span>&nbsp;<span class="ident" id="3006484">_</span><span class="op" id="3006485">,</span>&nbsp;<span class="ident" id="3006487">ch</span>&nbsp;<span class="op" id="3006490">:=</span>&nbsp;<span class="keyword" id="3006493">range</span>&nbsp;<span class="ident" id="3006499">b</span>&nbsp;<span class="op" id="3006501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006505">if</span>&nbsp;<span class="ident" id="3006508">ch</span>&nbsp;<span class="op" id="3006511">!=</span>&nbsp;<span class="string" id="3006514">&#39;\r&#39;</span>&nbsp;<span class="op" id="3006519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006524">c</span><span class="op" id="3006525">[</span><span class="ident" id="3006526">i</span><span class="op" id="3006527">]</span>&nbsp;<span class="op" id="3006529">=</span>&nbsp;<span class="ident" id="3006531">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006537">i</span><span class="op" id="3006538">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006549">return</span>&nbsp;<span class="ident" id="3006556">c</span><span class="op" id="3006557">[</span><span class="op" id="3006558">:</span><span class="ident" id="3006559">i</span><span class="op" id="3006560">]</span><br>
<span class="lineno"></span><span class="op" id="3006562">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="3006565">func</span>&nbsp;<span class="op" id="3006570">(</span><span class="ident" id="3006571">s</span>&nbsp;<span class="op" id="3006573">*</span><span class="ident" id="3006574">Scanner</span><span class="op" id="3006581">)</span>&nbsp;<span class="ident" id="3006583">scanRawString</span><span class="op" id="3006596">(</span><span class="op" id="3006597">)</span>&nbsp;<span class="builtintype" id="3006599">string</span>&nbsp;<span class="op" id="3006606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3006609">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006642">offs</span>&nbsp;<span class="op" id="3006647">:=</span>&nbsp;<span class="ident" id="3006650">s</span><span class="op" id="3006651">.</span><span class="ident" id="3006652">offset</span>&nbsp;<span class="op" id="3006659">-</span>&nbsp;<span class="num" id="3006661">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006665">hasCR</span>&nbsp;<span class="op" id="3006671">:=</span>&nbsp;<span class="builtintype" id="3006674">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006681">for</span>&nbsp;<span class="op" id="3006685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006689">ch</span>&nbsp;<span class="op" id="3006692">:=</span>&nbsp;<span class="ident" id="3006695">s</span><span class="op" id="3006696">.</span><span class="ident" id="3006697">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006702">if</span>&nbsp;<span class="ident" id="3006705">ch</span>&nbsp;<span class="op" id="3006708">&lt;</span>&nbsp;<span class="num" id="3006710">0</span>&nbsp;<span class="op" id="3006712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006717">s</span><span class="op" id="3006718">.</span><span class="builtintype" id="3006719">error</span><span class="op" id="3006724">(</span><span class="ident" id="3006725">offs</span><span class="op" id="3006729">,</span>&nbsp;<span class="string" id="3006731">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="3006766">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006771">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006783">s</span><span class="op" id="3006784">.</span><span class="ident" id="3006785">next</span><span class="op" id="3006789">(</span><span class="op" id="3006790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006794">if</span>&nbsp;<span class="ident" id="3006797">ch</span>&nbsp;<span class="op" id="3006800">==</span>&nbsp;<span class="string" id="3006803">&#39;`&#39;</span>&nbsp;<span class="op" id="3006807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006812">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006824">if</span>&nbsp;<span class="ident" id="3006827">ch</span>&nbsp;<span class="op" id="3006830">==</span>&nbsp;<span class="string" id="3006833">&#39;\r&#39;</span>&nbsp;<span class="op" id="3006838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006843">hasCR</span>&nbsp;<span class="op" id="3006849">=</span>&nbsp;<span class="builtintype" id="3006851">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006861">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006865">lit</span>&nbsp;<span class="op" id="3006869">:=</span>&nbsp;<span class="ident" id="3006872">s</span><span class="op" id="3006873">.</span><span class="ident" id="3006874">src</span><span class="op" id="3006877">[</span><span class="ident" id="3006878">offs</span><span class="op" id="3006882">:</span><span class="ident" id="3006883">s</span><span class="op" id="3006884">.</span><span class="ident" id="3006885">offset</span><span class="op" id="3006891">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006894">if</span>&nbsp;<span class="ident" id="3006897">hasCR</span>&nbsp;<span class="op" id="3006903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006907">lit</span>&nbsp;<span class="op" id="3006911">=</span>&nbsp;<span class="ident" id="3006913">stripCR</span><span class="op" id="3006920">(</span><span class="ident" id="3006921">lit</span><span class="op" id="3006924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006927">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006931">return</span>&nbsp;<span class="builtintype" id="3006938">string</span><span class="op" id="3006944">(</span><span class="ident" id="3006945">lit</span><span class="op" id="3006948">)</span><br>
<span class="lineno"></span><span class="op" id="3006950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3006953">func</span>&nbsp;<span class="op" id="3006958">(</span><span class="ident" id="3006959">s</span>&nbsp;<span class="op" id="3006961">*</span><span class="ident" id="3006962">Scanner</span><span class="op" id="3006969">)</span>&nbsp;<span class="ident" id="3006971">skipWhitespace</span><span class="op" id="3006985">(</span><span class="op" id="3006986">)</span>&nbsp;<span class="op" id="3006988">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006991">for</span>&nbsp;<span class="ident" id="3006995">s</span><span class="op" id="3006996">.</span><span class="ident" id="3006997">ch</span>&nbsp;<span class="op" id="3007000">==</span>&nbsp;<span class="string" id="3007003">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3007007">||</span>&nbsp;<span class="ident" id="3007010">s</span><span class="op" id="3007011">.</span><span class="ident" id="3007012">ch</span>&nbsp;<span class="op" id="3007015">==</span>&nbsp;<span class="string" id="3007018">&#39;\t&#39;</span>&nbsp;<span class="op" id="3007023">||</span>&nbsp;<span class="ident" id="3007026">s</span><span class="op" id="3007027">.</span><span class="ident" id="3007028">ch</span>&nbsp;<span class="op" id="3007031">==</span>&nbsp;<span class="string" id="3007034">&#39;\n&#39;</span>&nbsp;<span class="op" id="3007039">&amp;&amp;</span>&nbsp;<span class="op" id="3007042">!</span><span class="ident" id="3007043">s</span><span class="op" id="3007044">.</span><span class="ident" id="3007045">insertSemi</span>&nbsp;<span class="op" id="3007056">||</span>&nbsp;<span class="ident" id="3007059">s</span><span class="op" id="3007060">.</span><span class="ident" id="3007061">ch</span>&nbsp;<span class="op" id="3007064">==</span>&nbsp;<span class="string" id="3007067">&#39;\r&#39;</span>&nbsp;<span class="op" id="3007072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007076">s</span><span class="op" id="3007077">.</span><span class="ident" id="3007078">next</span><span class="op" id="3007082">(</span><span class="op" id="3007083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007086">}</span><br>
<span class="lineno"></span><span class="op" id="3007088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="3007091">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="3007162">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="3007234">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="3007297">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="3007366">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="3007433">func</span>&nbsp;<span class="op" id="3007438">(</span><span class="ident" id="3007439">s</span>&nbsp;<span class="op" id="3007441">*</span><span class="ident" id="3007442">Scanner</span><span class="op" id="3007449">)</span>&nbsp;<span class="ident" id="3007451">switch2</span><span class="op" id="3007458">(</span><span class="ident" id="3007459">tok0</span><span class="op" id="3007463">,</span>&nbsp;<span class="ident" id="3007465">tok1</span>&nbsp;<span class="ident" id="3007470">token</span><span class="op" id="3007475">.</span><span class="ident" id="3007476">Token</span><span class="op" id="3007481">)</span>&nbsp;<span class="ident" id="3007483">token</span><span class="op" id="3007488">.</span><span class="ident" id="3007489">Token</span>&nbsp;<span class="op" id="3007495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007498">if</span>&nbsp;<span class="ident" id="3007501">s</span><span class="op" id="3007502">.</span><span class="ident" id="3007503">ch</span>&nbsp;<span class="op" id="3007506">==</span>&nbsp;<span class="string" id="3007509">&#39;=&#39;</span>&nbsp;<span class="op" id="3007513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007517">s</span><span class="op" id="3007518">.</span><span class="ident" id="3007519">next</span><span class="op" id="3007523">(</span><span class="op" id="3007524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007528">return</span>&nbsp;<span class="ident" id="3007535">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007544">return</span>&nbsp;<span class="ident" id="3007551">tok0</span><br>
<span class="lineno"></span><span class="op" id="3007556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3007559">func</span>&nbsp;<span class="op" id="3007564">(</span><span class="ident" id="3007565">s</span>&nbsp;<span class="op" id="3007567">*</span><span class="ident" id="3007568">Scanner</span><span class="op" id="3007575">)</span>&nbsp;<span class="ident" id="3007577">switch3</span><span class="op" id="3007584">(</span><span class="ident" id="3007585">tok0</span><span class="op" id="3007589">,</span>&nbsp;<span class="ident" id="3007591">tok1</span>&nbsp;<span class="ident" id="3007596">token</span><span class="op" id="3007601">.</span><span class="ident" id="3007602">Token</span><span class="op" id="3007607">,</span>&nbsp;<span class="ident" id="3007609">ch2</span>&nbsp;<span class="builtintype" id="3007613">rune</span><span class="op" id="3007617">,</span>&nbsp;<span class="ident" id="3007619">tok2</span>&nbsp;<span class="ident" id="3007624">token</span><span class="op" id="3007629">.</span><span class="ident" id="3007630">Token</span><span class="op" id="3007635">)</span>&nbsp;<span class="ident" id="3007637">token</span><span class="op" id="3007642">.</span><span class="ident" id="3007643">Token</span>&nbsp;<span class="op" id="3007649">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007652">if</span>&nbsp;<span class="ident" id="3007655">s</span><span class="op" id="3007656">.</span><span class="ident" id="3007657">ch</span>&nbsp;<span class="op" id="3007660">==</span>&nbsp;<span class="string" id="3007663">&#39;=&#39;</span>&nbsp;<span class="op" id="3007667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007671">s</span><span class="op" id="3007672">.</span><span class="ident" id="3007673">next</span><span class="op" id="3007677">(</span><span class="op" id="3007678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007682">return</span>&nbsp;<span class="ident" id="3007689">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007698">if</span>&nbsp;<span class="ident" id="3007701">s</span><span class="op" id="3007702">.</span><span class="ident" id="3007703">ch</span>&nbsp;<span class="op" id="3007706">==</span>&nbsp;<span class="ident" id="3007709">ch2</span>&nbsp;<span class="op" id="3007713">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007717">s</span><span class="op" id="3007718">.</span><span class="ident" id="3007719">next</span><span class="op" id="3007723">(</span><span class="op" id="3007724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007728">return</span>&nbsp;<span class="ident" id="3007735">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007744">return</span>&nbsp;<span class="ident" id="3007751">tok0</span><br>
<span class="lineno"></span><span class="op" id="3007756">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="3007759">func</span>&nbsp;<span class="op" id="3007764">(</span><span class="ident" id="3007765">s</span>&nbsp;<span class="op" id="3007767">*</span><span class="ident" id="3007768">Scanner</span><span class="op" id="3007775">)</span>&nbsp;<span class="ident" id="3007777">switch4</span><span class="op" id="3007784">(</span><span class="ident" id="3007785">tok0</span><span class="op" id="3007789">,</span>&nbsp;<span class="ident" id="3007791">tok1</span>&nbsp;<span class="ident" id="3007796">token</span><span class="op" id="3007801">.</span><span class="ident" id="3007802">Token</span><span class="op" id="3007807">,</span>&nbsp;<span class="ident" id="3007809">ch2</span>&nbsp;<span class="builtintype" id="3007813">rune</span><span class="op" id="3007817">,</span>&nbsp;<span class="ident" id="3007819">tok2</span><span class="op" id="3007823">,</span>&nbsp;<span class="ident" id="3007825">tok3</span>&nbsp;<span class="ident" id="3007830">token</span><span class="op" id="3007835">.</span><span class="ident" id="3007836">Token</span><span class="op" id="3007841">)</span>&nbsp;<span class="ident" id="3007843">token</span><span class="op" id="3007848">.</span><span class="ident" id="3007849">Token</span>&nbsp;<span class="op" id="3007855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007858">if</span>&nbsp;<span class="ident" id="3007861">s</span><span class="op" id="3007862">.</span><span class="ident" id="3007863">ch</span>&nbsp;<span class="op" id="3007866">==</span>&nbsp;<span class="string" id="3007869">&#39;=&#39;</span>&nbsp;<span class="op" id="3007873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007877">s</span><span class="op" id="3007878">.</span><span class="ident" id="3007879">next</span><span class="op" id="3007883">(</span><span class="op" id="3007884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007888">return</span>&nbsp;<span class="ident" id="3007895">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007904">if</span>&nbsp;<span class="ident" id="3007907">s</span><span class="op" id="3007908">.</span><span class="ident" id="3007909">ch</span>&nbsp;<span class="op" id="3007912">==</span>&nbsp;<span class="ident" id="3007915">ch2</span>&nbsp;<span class="op" id="3007919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007923">s</span><span class="op" id="3007924">.</span><span class="ident" id="3007925">next</span><span class="op" id="3007929">(</span><span class="op" id="3007930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007934">if</span>&nbsp;<span class="ident" id="3007937">s</span><span class="op" id="3007938">.</span><span class="ident" id="3007939">ch</span>&nbsp;<span class="op" id="3007942">==</span>&nbsp;<span class="string" id="3007945">&#39;=&#39;</span>&nbsp;<span class="op" id="3007949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007954">s</span><span class="op" id="3007955">.</span><span class="ident" id="3007956">next</span><span class="op" id="3007960">(</span><span class="op" id="3007961">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007966">return</span>&nbsp;<span class="ident" id="3007973">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007984">return</span>&nbsp;<span class="ident" id="3007991">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008000">return</span>&nbsp;<span class="ident" id="3008007">tok0</span><br>
<span class="lineno">565</span><span class="op" id="3008012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3008015">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="3008087">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3008159">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="3008173">//</span><br>
<span class="lineno"></span><span class="comment" id="3008176">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="3008252">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3008330">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3008362">//</span><br>
<span class="lineno">575</span><span class="comment" id="3008365">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="3008439">//</span><br>
<span class="lineno"></span><span class="comment" id="3008442">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="3008505">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="3008574">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="3008640">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="3008651">//</span><br>
<span class="lineno"></span><span class="comment" id="3008654">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3008723">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="3008747">//</span><br>
<span class="lineno">585</span><span class="comment" id="3008750">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3008811">//</span><br>
<span class="lineno"></span><span class="comment" id="3008814">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3008878">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="3008941">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="3009004">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3009066">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="3009128">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="3009181">//</span><br>
<span class="lineno"></span><span class="comment" id="3009184">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="3009244">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="3009304">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="3009342">//</span><br>
<span class="lineno"></span><span class="keyword" id="3009345">func</span>&nbsp;<span class="op" id="3009350">(</span><span class="ident" id="3009351">s</span>&nbsp;<span class="op" id="3009353">*</span><span class="ident" id="3009354">Scanner</span><span class="op" id="3009361">)</span>&nbsp;<span class="ident" id="3009363">Scan</span><span class="op" id="3009367">(</span><span class="op" id="3009368">)</span>&nbsp;<span class="op" id="3009370">(</span><span class="ident" id="3009371">pos</span>&nbsp;<span class="ident" id="3009375">token</span><span class="op" id="3009380">.</span><span class="ident" id="3009381">Pos</span><span class="op" id="3009384">,</span>&nbsp;<span class="ident" id="3009386">tok</span>&nbsp;<span class="ident" id="3009390">token</span><span class="op" id="3009395">.</span><span class="ident" id="3009396">Token</span><span class="op" id="3009401">,</span>&nbsp;<span class="ident" id="3009403">lit</span>&nbsp;<span class="builtintype" id="3009407">string</span><span class="op" id="3009413">)</span>&nbsp;<span class="op" id="3009415">{</span><br>
<span class="lineno"></span><span class="ident" id="3009417">scanAgain</span><span class="op" id="3009426">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009429">s</span><span class="op" id="3009430">.</span><span class="ident" id="3009431">skipWhitespace</span><span class="op" id="3009445">(</span><span class="op" id="3009446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3009450">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009474">pos</span>&nbsp;<span class="op" id="3009478">=</span>&nbsp;<span class="ident" id="3009480">s</span><span class="op" id="3009481">.</span><span class="ident" id="3009482">file</span><span class="op" id="3009486">.</span><span class="ident" id="3009487">Pos</span><span class="op" id="3009490">(</span><span class="ident" id="3009491">s</span><span class="op" id="3009492">.</span><span class="ident" id="3009493">offset</span><span class="op" id="3009499">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3009503">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009529">insertSemi</span>&nbsp;<span class="op" id="3009540">:=</span>&nbsp;<span class="builtintype" id="3009543">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009550">switch</span>&nbsp;<span class="ident" id="3009557">ch</span>&nbsp;<span class="op" id="3009560">:=</span>&nbsp;<span class="ident" id="3009563">s</span><span class="op" id="3009564">.</span><span class="ident" id="3009565">ch</span><span class="op" id="3009567">;</span>&nbsp;<span class="op" id="3009569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009572">case</span>&nbsp;<span class="ident" id="3009577">isLetter</span><span class="op" id="3009585">(</span><span class="ident" id="3009586">ch</span><span class="op" id="3009588">)</span><span class="op" id="3009589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009593">lit</span>&nbsp;<span class="op" id="3009597">=</span>&nbsp;<span class="ident" id="3009599">s</span><span class="op" id="3009600">.</span><span class="ident" id="3009601">scanIdentifier</span><span class="op" id="3009615">(</span><span class="op" id="3009616">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009620">if</span>&nbsp;<span class="builtinfunc" id="3009623">len</span><span class="op" id="3009626">(</span><span class="ident" id="3009627">lit</span><span class="op" id="3009630">)</span>&nbsp;<span class="op" id="3009632">&gt;</span>&nbsp;<span class="num" id="3009634">1</span>&nbsp;<span class="op" id="3009636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3009641">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009708">tok</span>&nbsp;<span class="op" id="3009712">=</span>&nbsp;<span class="ident" id="3009714">token</span><span class="op" id="3009719">.</span><span class="ident" id="3009720">Lookup</span><span class="op" id="3009726">(</span><span class="ident" id="3009727">lit</span><span class="op" id="3009730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009735">switch</span>&nbsp;<span class="ident" id="3009742">tok</span>&nbsp;<span class="op" id="3009746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009751">case</span>&nbsp;<span class="ident" id="3009756">token</span><span class="op" id="3009761">.</span><span class="ident" id="3009762">IDENT</span><span class="op" id="3009767">,</span>&nbsp;<span class="ident" id="3009769">token</span><span class="op" id="3009774">.</span><span class="ident" id="3009775">BREAK</span><span class="op" id="3009780">,</span>&nbsp;<span class="ident" id="3009782">token</span><span class="op" id="3009787">.</span><span class="ident" id="3009788">CONTINUE</span><span class="op" id="3009796">,</span>&nbsp;<span class="ident" id="3009798">token</span><span class="op" id="3009803">.</span><span class="ident" id="3009804">FALLTHROUGH</span><span class="op" id="3009815">,</span>&nbsp;<span class="ident" id="3009817">token</span><span class="op" id="3009822">.</span><span class="ident" id="3009823">RETURN</span><span class="op" id="3009829">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009835">insertSemi</span>&nbsp;<span class="op" id="3009846">=</span>&nbsp;<span class="builtintype" id="3009848">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3009856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3009860">}</span>&nbsp;<span class="keyword" id="3009862">else</span>&nbsp;<span class="op" id="3009867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009872">insertSemi</span>&nbsp;<span class="op" id="3009883">=</span>&nbsp;<span class="builtintype" id="3009885">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009893">tok</span>&nbsp;<span class="op" id="3009897">=</span>&nbsp;<span class="ident" id="3009899">token</span><span class="op" id="3009904">.</span><span class="ident" id="3009905">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3009913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009916">case</span>&nbsp;<span class="string" id="3009921">&#39;0&#39;</span>&nbsp;<span class="op" id="3009925">&lt;=</span>&nbsp;<span class="ident" id="3009928">ch</span>&nbsp;<span class="op" id="3009931">&amp;&amp;</span>&nbsp;<span class="ident" id="3009934">ch</span>&nbsp;<span class="op" id="3009937">&lt;=</span>&nbsp;<span class="string" id="3009940">&#39;9&#39;</span><span class="op" id="3009943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009947">insertSemi</span>&nbsp;<span class="op" id="3009958">=</span>&nbsp;<span class="builtintype" id="3009960">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009967">tok</span><span class="op" id="3009970">,</span>&nbsp;<span class="ident" id="3009972">lit</span>&nbsp;<span class="op" id="3009976">=</span>&nbsp;<span class="ident" id="3009978">s</span><span class="op" id="3009979">.</span><span class="ident" id="3009980">scanNumber</span><span class="op" id="3009990">(</span><span class="builtintype" id="3009991">false</span><span class="op" id="3009996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009999">default</span><span class="op" id="3010006">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010010">s</span><span class="op" id="3010011">.</span><span class="ident" id="3010012">next</span><span class="op" id="3010016">(</span><span class="op" id="3010017">)</span>&nbsp;<span class="comment" id="3010019">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010045">switch</span>&nbsp;<span class="ident" id="3010052">ch</span>&nbsp;<span class="op" id="3010055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010059">case</span>&nbsp;<span class="op" id="3010064">-</span><span class="num" id="3010065">1</span><span class="op" id="3010066">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010071">if</span>&nbsp;<span class="ident" id="3010074">s</span><span class="op" id="3010075">.</span><span class="ident" id="3010076">insertSemi</span>&nbsp;<span class="op" id="3010087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010093">s</span><span class="op" id="3010094">.</span><span class="ident" id="3010095">insertSemi</span>&nbsp;<span class="op" id="3010106">=</span>&nbsp;<span class="builtintype" id="3010108">false</span>&nbsp;<span class="comment" id="3010114">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010134">return</span>&nbsp;<span class="ident" id="3010141">pos</span><span class="op" id="3010144">,</span>&nbsp;<span class="ident" id="3010146">token</span><span class="op" id="3010151">.</span><span class="ident" id="3010152">SEMICOLON</span><span class="op" id="3010161">,</span>&nbsp;<span class="string" id="3010163">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010176">tok</span>&nbsp;<span class="op" id="3010180">=</span>&nbsp;<span class="ident" id="3010182">token</span><span class="op" id="3010187">.</span><span class="ident" id="3010188">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010194">case</span>&nbsp;<span class="string" id="3010199">&#39;\n&#39;</span><span class="op" id="3010203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3010208">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3010253">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3010299">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010329">s</span><span class="op" id="3010330">.</span><span class="ident" id="3010331">insertSemi</span>&nbsp;<span class="op" id="3010342">=</span>&nbsp;<span class="builtintype" id="3010344">false</span>&nbsp;<span class="comment" id="3010350">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010373">return</span>&nbsp;<span class="ident" id="3010380">pos</span><span class="op" id="3010383">,</span>&nbsp;<span class="ident" id="3010385">token</span><span class="op" id="3010390">.</span><span class="ident" id="3010391">SEMICOLON</span><span class="op" id="3010400">,</span>&nbsp;<span class="string" id="3010402">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010409">case</span>&nbsp;<span class="string" id="3010414">&#39;&#34;&#39;</span><span class="op" id="3010417">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010422">insertSemi</span>&nbsp;<span class="op" id="3010433">=</span>&nbsp;<span class="builtintype" id="3010435">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010443">tok</span>&nbsp;<span class="op" id="3010447">=</span>&nbsp;<span class="ident" id="3010449">token</span><span class="op" id="3010454">.</span><span class="ident" id="3010455">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010465">lit</span>&nbsp;<span class="op" id="3010469">=</span>&nbsp;<span class="ident" id="3010471">s</span><span class="op" id="3010472">.</span><span class="ident" id="3010473">scanString</span><span class="op" id="3010483">(</span><span class="op" id="3010484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010488">case</span>&nbsp;<span class="string" id="3010493">&#39;\&#39;&#39;</span><span class="op" id="3010497">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010502">insertSemi</span>&nbsp;<span class="op" id="3010513">=</span>&nbsp;<span class="builtintype" id="3010515">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010523">tok</span>&nbsp;<span class="op" id="3010527">=</span>&nbsp;<span class="ident" id="3010529">token</span><span class="op" id="3010534">.</span><span class="ident" id="3010535">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010543">lit</span>&nbsp;<span class="op" id="3010547">=</span>&nbsp;<span class="ident" id="3010549">s</span><span class="op" id="3010550">.</span><span class="ident" id="3010551">scanRune</span><span class="op" id="3010559">(</span><span class="op" id="3010560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010564">case</span>&nbsp;<span class="string" id="3010569">&#39;`&#39;</span><span class="op" id="3010572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010577">insertSemi</span>&nbsp;<span class="op" id="3010588">=</span>&nbsp;<span class="builtintype" id="3010590">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010598">tok</span>&nbsp;<span class="op" id="3010602">=</span>&nbsp;<span class="ident" id="3010604">token</span><span class="op" id="3010609">.</span><span class="ident" id="3010610">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010620">lit</span>&nbsp;<span class="op" id="3010624">=</span>&nbsp;<span class="ident" id="3010626">s</span><span class="op" id="3010627">.</span><span class="ident" id="3010628">scanRawString</span><span class="op" id="3010641">(</span><span class="op" id="3010642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010646">case</span>&nbsp;<span class="string" id="3010651">&#39;:&#39;</span><span class="op" id="3010654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010659">tok</span>&nbsp;<span class="op" id="3010663">=</span>&nbsp;<span class="ident" id="3010665">s</span><span class="op" id="3010666">.</span><span class="ident" id="3010667">switch2</span><span class="op" id="3010674">(</span><span class="ident" id="3010675">token</span><span class="op" id="3010680">.</span><span class="ident" id="3010681">COLON</span><span class="op" id="3010686">,</span>&nbsp;<span class="ident" id="3010688">token</span><span class="op" id="3010693">.</span><span class="ident" id="3010694">DEFINE</span><span class="op" id="3010700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010704">case</span>&nbsp;<span class="string" id="3010709">&#39;.&#39;</span><span class="op" id="3010712">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010717">if</span>&nbsp;<span class="string" id="3010720">&#39;0&#39;</span>&nbsp;<span class="op" id="3010724">&lt;=</span>&nbsp;<span class="ident" id="3010727">s</span><span class="op" id="3010728">.</span><span class="ident" id="3010729">ch</span>&nbsp;<span class="op" id="3010732">&amp;&amp;</span>&nbsp;<span class="ident" id="3010735">s</span><span class="op" id="3010736">.</span><span class="ident" id="3010737">ch</span>&nbsp;<span class="op" id="3010740">&lt;=</span>&nbsp;<span class="string" id="3010743">&#39;9&#39;</span>&nbsp;<span class="op" id="3010747">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010753">insertSemi</span>&nbsp;<span class="op" id="3010764">=</span>&nbsp;<span class="builtintype" id="3010766">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010775">tok</span><span class="op" id="3010778">,</span>&nbsp;<span class="ident" id="3010780">lit</span>&nbsp;<span class="op" id="3010784">=</span>&nbsp;<span class="ident" id="3010786">s</span><span class="op" id="3010787">.</span><span class="ident" id="3010788">scanNumber</span><span class="op" id="3010798">(</span><span class="builtintype" id="3010799">true</span><span class="op" id="3010803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010808">}</span>&nbsp;<span class="keyword" id="3010810">else</span>&nbsp;<span class="keyword" id="3010815">if</span>&nbsp;<span class="ident" id="3010818">s</span><span class="op" id="3010819">.</span><span class="ident" id="3010820">ch</span>&nbsp;<span class="op" id="3010823">==</span>&nbsp;<span class="string" id="3010826">&#39;.&#39;</span>&nbsp;<span class="op" id="3010830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010836">s</span><span class="op" id="3010837">.</span><span class="ident" id="3010838">next</span><span class="op" id="3010842">(</span><span class="op" id="3010843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010849">if</span>&nbsp;<span class="ident" id="3010852">s</span><span class="op" id="3010853">.</span><span class="ident" id="3010854">ch</span>&nbsp;<span class="op" id="3010857">==</span>&nbsp;<span class="string" id="3010860">&#39;.&#39;</span>&nbsp;<span class="op" id="3010864">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010871">s</span><span class="op" id="3010872">.</span><span class="ident" id="3010873">next</span><span class="op" id="3010877">(</span><span class="op" id="3010878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010885">tok</span>&nbsp;<span class="op" id="3010889">=</span>&nbsp;<span class="ident" id="3010891">token</span><span class="op" id="3010896">.</span><span class="ident" id="3010897">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010915">}</span>&nbsp;<span class="keyword" id="3010917">else</span>&nbsp;<span class="op" id="3010922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010928">tok</span>&nbsp;<span class="op" id="3010932">=</span>&nbsp;<span class="ident" id="3010934">token</span><span class="op" id="3010939">.</span><span class="ident" id="3010940">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010954">case</span>&nbsp;<span class="string" id="3010959">&#39;,&#39;</span><span class="op" id="3010962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010967">tok</span>&nbsp;<span class="op" id="3010971">=</span>&nbsp;<span class="ident" id="3010973">token</span><span class="op" id="3010978">.</span><span class="ident" id="3010979">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010987">case</span>&nbsp;<span class="string" id="3010992">&#39;;&#39;</span><span class="op" id="3010995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011000">tok</span>&nbsp;<span class="op" id="3011004">=</span>&nbsp;<span class="ident" id="3011006">token</span><span class="op" id="3011011">.</span><span class="ident" id="3011012">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011025">lit</span>&nbsp;<span class="op" id="3011029">=</span>&nbsp;<span class="string" id="3011031">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011037">case</span>&nbsp;<span class="string" id="3011042">&#39;(&#39;</span><span class="op" id="3011045">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011050">tok</span>&nbsp;<span class="op" id="3011054">=</span>&nbsp;<span class="ident" id="3011056">token</span><span class="op" id="3011061">.</span><span class="ident" id="3011062">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011071">case</span>&nbsp;<span class="string" id="3011076">&#39;)&#39;</span><span class="op" id="3011079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011084">insertSemi</span>&nbsp;<span class="op" id="3011095">=</span>&nbsp;<span class="builtintype" id="3011097">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011105">tok</span>&nbsp;<span class="op" id="3011109">=</span>&nbsp;<span class="ident" id="3011111">token</span><span class="op" id="3011116">.</span><span class="ident" id="3011117">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011126">case</span>&nbsp;<span class="string" id="3011131">&#39;[&#39;</span><span class="op" id="3011134">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011139">tok</span>&nbsp;<span class="op" id="3011143">=</span>&nbsp;<span class="ident" id="3011145">token</span><span class="op" id="3011150">.</span><span class="ident" id="3011151">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011160">case</span>&nbsp;<span class="string" id="3011165">&#39;]&#39;</span><span class="op" id="3011168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011173">insertSemi</span>&nbsp;<span class="op" id="3011184">=</span>&nbsp;<span class="builtintype" id="3011186">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011194">tok</span>&nbsp;<span class="op" id="3011198">=</span>&nbsp;<span class="ident" id="3011200">token</span><span class="op" id="3011205">.</span><span class="ident" id="3011206">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011215">case</span>&nbsp;<span class="string" id="3011220">&#39;{&#39;</span><span class="op" id="3011223">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011228">tok</span>&nbsp;<span class="op" id="3011232">=</span>&nbsp;<span class="ident" id="3011234">token</span><span class="op" id="3011239">.</span><span class="ident" id="3011240">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011249">case</span>&nbsp;<span class="string" id="3011254">&#39;}&#39;</span><span class="op" id="3011257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011262">insertSemi</span>&nbsp;<span class="op" id="3011273">=</span>&nbsp;<span class="builtintype" id="3011275">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011283">tok</span>&nbsp;<span class="op" id="3011287">=</span>&nbsp;<span class="ident" id="3011289">token</span><span class="op" id="3011294">.</span><span class="ident" id="3011295">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011304">case</span>&nbsp;<span class="string" id="3011309">&#39;+&#39;</span><span class="op" id="3011312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011317">tok</span>&nbsp;<span class="op" id="3011321">=</span>&nbsp;<span class="ident" id="3011323">s</span><span class="op" id="3011324">.</span><span class="ident" id="3011325">switch3</span><span class="op" id="3011332">(</span><span class="ident" id="3011333">token</span><span class="op" id="3011338">.</span><span class="ident" id="3011339">ADD</span><span class="op" id="3011342">,</span>&nbsp;<span class="ident" id="3011344">token</span><span class="op" id="3011349">.</span><span class="ident" id="3011350">ADD_ASSIGN</span><span class="op" id="3011360">,</span>&nbsp;<span class="string" id="3011362">&#39;+&#39;</span><span class="op" id="3011365">,</span>&nbsp;<span class="ident" id="3011367">token</span><span class="op" id="3011372">.</span><span class="ident" id="3011373">INC</span><span class="op" id="3011376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011381">if</span>&nbsp;<span class="ident" id="3011384">tok</span>&nbsp;<span class="op" id="3011388">==</span>&nbsp;<span class="ident" id="3011391">token</span><span class="op" id="3011396">.</span><span class="ident" id="3011397">INC</span>&nbsp;<span class="op" id="3011401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011407">insertSemi</span>&nbsp;<span class="op" id="3011418">=</span>&nbsp;<span class="builtintype" id="3011420">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3011428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011432">case</span>&nbsp;<span class="string" id="3011437">&#39;-&#39;</span><span class="op" id="3011440">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011445">tok</span>&nbsp;<span class="op" id="3011449">=</span>&nbsp;<span class="ident" id="3011451">s</span><span class="op" id="3011452">.</span><span class="ident" id="3011453">switch3</span><span class="op" id="3011460">(</span><span class="ident" id="3011461">token</span><span class="op" id="3011466">.</span><span class="ident" id="3011467">SUB</span><span class="op" id="3011470">,</span>&nbsp;<span class="ident" id="3011472">token</span><span class="op" id="3011477">.</span><span class="ident" id="3011478">SUB_ASSIGN</span><span class="op" id="3011488">,</span>&nbsp;<span class="string" id="3011490">&#39;-&#39;</span><span class="op" id="3011493">,</span>&nbsp;<span class="ident" id="3011495">token</span><span class="op" id="3011500">.</span><span class="ident" id="3011501">DEC</span><span class="op" id="3011504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011509">if</span>&nbsp;<span class="ident" id="3011512">tok</span>&nbsp;<span class="op" id="3011516">==</span>&nbsp;<span class="ident" id="3011519">token</span><span class="op" id="3011524">.</span><span class="ident" id="3011525">DEC</span>&nbsp;<span class="op" id="3011529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011535">insertSemi</span>&nbsp;<span class="op" id="3011546">=</span>&nbsp;<span class="builtintype" id="3011548">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3011556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011560">case</span>&nbsp;<span class="string" id="3011565">&#39;*&#39;</span><span class="op" id="3011568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011573">tok</span>&nbsp;<span class="op" id="3011577">=</span>&nbsp;<span class="ident" id="3011579">s</span><span class="op" id="3011580">.</span><span class="ident" id="3011581">switch2</span><span class="op" id="3011588">(</span><span class="ident" id="3011589">token</span><span class="op" id="3011594">.</span><span class="ident" id="3011595">MUL</span><span class="op" id="3011598">,</span>&nbsp;<span class="ident" id="3011600">token</span><span class="op" id="3011605">.</span><span class="ident" id="3011606">MUL_ASSIGN</span><span class="op" id="3011616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011620">case</span>&nbsp;<span class="string" id="3011625">&#39;/&#39;</span><span class="op" id="3011628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011633">if</span>&nbsp;<span class="ident" id="3011636">s</span><span class="op" id="3011637">.</span><span class="ident" id="3011638">ch</span>&nbsp;<span class="op" id="3011641">==</span>&nbsp;<span class="string" id="3011644">&#39;/&#39;</span>&nbsp;<span class="op" id="3011648">||</span>&nbsp;<span class="ident" id="3011651">s</span><span class="op" id="3011652">.</span><span class="ident" id="3011653">ch</span>&nbsp;<span class="op" id="3011656">==</span>&nbsp;<span class="string" id="3011659">&#39;*&#39;</span>&nbsp;<span class="op" id="3011663">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3011669">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011684">if</span>&nbsp;<span class="ident" id="3011687">s</span><span class="op" id="3011688">.</span><span class="ident" id="3011689">insertSemi</span>&nbsp;<span class="op" id="3011700">&amp;&amp;</span>&nbsp;<span class="ident" id="3011703">s</span><span class="op" id="3011704">.</span><span class="ident" id="3011705">findLineEnd</span><span class="op" id="3011716">(</span><span class="op" id="3011717">)</span>&nbsp;<span class="op" id="3011719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3011726">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011781">s</span><span class="op" id="3011782">.</span><span class="ident" id="3011783">ch</span>&nbsp;<span class="op" id="3011786">=</span>&nbsp;<span class="string" id="3011788">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011797">s</span><span class="op" id="3011798">.</span><span class="ident" id="3011799">offset</span>&nbsp;<span class="op" id="3011806">=</span>&nbsp;<span class="ident" id="3011808">s</span><span class="op" id="3011809">.</span><span class="ident" id="3011810">file</span><span class="op" id="3011814">.</span><span class="ident" id="3011815">Offset</span><span class="op" id="3011821">(</span><span class="ident" id="3011822">pos</span><span class="op" id="3011825">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011832">s</span><span class="op" id="3011833">.</span><span class="ident" id="3011834">rdOffset</span>&nbsp;<span class="op" id="3011843">=</span>&nbsp;<span class="ident" id="3011845">s</span><span class="op" id="3011846">.</span><span class="ident" id="3011847">offset</span>&nbsp;<span class="op" id="3011854">+</span>&nbsp;<span class="num" id="3011856">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011863">s</span><span class="op" id="3011864">.</span><span class="ident" id="3011865">insertSemi</span>&nbsp;<span class="op" id="3011876">=</span>&nbsp;<span class="builtintype" id="3011878">false</span>&nbsp;<span class="comment" id="3011884">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011909">return</span>&nbsp;<span class="ident" id="3011916">pos</span><span class="op" id="3011919">,</span>&nbsp;<span class="ident" id="3011921">token</span><span class="op" id="3011926">.</span><span class="ident" id="3011927">SEMICOLON</span><span class="op" id="3011936">,</span>&nbsp;<span class="string" id="3011938">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3011947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011953">lit</span>&nbsp;<span class="op" id="3011957">=</span>&nbsp;<span class="ident" id="3011959">s</span><span class="op" id="3011960">.</span><span class="ident" id="3011961">scanComment</span><span class="op" id="3011972">(</span><span class="op" id="3011973">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011979">if</span>&nbsp;<span class="ident" id="3011982">s</span><span class="op" id="3011983">.</span><span class="ident" id="3011984">mode</span><span class="op" id="3011988">&amp;</span><span class="ident" id="3011989">ScanComments</span>&nbsp;<span class="op" id="3012002">==</span>&nbsp;<span class="num" id="3012005">0</span>&nbsp;<span class="op" id="3012007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3012014">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012035">s</span><span class="op" id="3012036">.</span><span class="ident" id="3012037">insertSemi</span>&nbsp;<span class="op" id="3012048">=</span>&nbsp;<span class="builtintype" id="3012050">false</span>&nbsp;<span class="comment" id="3012056">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012081">goto</span>&nbsp;<span class="ident" id="3012086">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012100">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012106">tok</span>&nbsp;<span class="op" id="3012110">=</span>&nbsp;<span class="ident" id="3012112">token</span><span class="op" id="3012117">.</span><span class="ident" id="3012118">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012129">}</span>&nbsp;<span class="keyword" id="3012131">else</span>&nbsp;<span class="op" id="3012136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012142">tok</span>&nbsp;<span class="op" id="3012146">=</span>&nbsp;<span class="ident" id="3012148">s</span><span class="op" id="3012149">.</span><span class="ident" id="3012150">switch2</span><span class="op" id="3012157">(</span><span class="ident" id="3012158">token</span><span class="op" id="3012163">.</span><span class="ident" id="3012164">QUO</span><span class="op" id="3012167">,</span>&nbsp;<span class="ident" id="3012169">token</span><span class="op" id="3012174">.</span><span class="ident" id="3012175">QUO_ASSIGN</span><span class="op" id="3012185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012194">case</span>&nbsp;<span class="string" id="3012199">&#39;%&#39;</span><span class="op" id="3012202">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012207">tok</span>&nbsp;<span class="op" id="3012211">=</span>&nbsp;<span class="ident" id="3012213">s</span><span class="op" id="3012214">.</span><span class="ident" id="3012215">switch2</span><span class="op" id="3012222">(</span><span class="ident" id="3012223">token</span><span class="op" id="3012228">.</span><span class="ident" id="3012229">REM</span><span class="op" id="3012232">,</span>&nbsp;<span class="ident" id="3012234">token</span><span class="op" id="3012239">.</span><span class="ident" id="3012240">REM_ASSIGN</span><span class="op" id="3012250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012254">case</span>&nbsp;<span class="string" id="3012259">&#39;^&#39;</span><span class="op" id="3012262">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012267">tok</span>&nbsp;<span class="op" id="3012271">=</span>&nbsp;<span class="ident" id="3012273">s</span><span class="op" id="3012274">.</span><span class="ident" id="3012275">switch2</span><span class="op" id="3012282">(</span><span class="ident" id="3012283">token</span><span class="op" id="3012288">.</span><span class="ident" id="3012289">XOR</span><span class="op" id="3012292">,</span>&nbsp;<span class="ident" id="3012294">token</span><span class="op" id="3012299">.</span><span class="ident" id="3012300">XOR_ASSIGN</span><span class="op" id="3012310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012314">case</span>&nbsp;<span class="string" id="3012319">&#39;&lt;&#39;</span><span class="op" id="3012322">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012327">if</span>&nbsp;<span class="ident" id="3012330">s</span><span class="op" id="3012331">.</span><span class="ident" id="3012332">ch</span>&nbsp;<span class="op" id="3012335">==</span>&nbsp;<span class="string" id="3012338">&#39;-&#39;</span>&nbsp;<span class="op" id="3012342">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012348">s</span><span class="op" id="3012349">.</span><span class="ident" id="3012350">next</span><span class="op" id="3012354">(</span><span class="op" id="3012355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012361">tok</span>&nbsp;<span class="op" id="3012365">=</span>&nbsp;<span class="ident" id="3012367">token</span><span class="op" id="3012372">.</span><span class="ident" id="3012373">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012382">}</span>&nbsp;<span class="keyword" id="3012384">else</span>&nbsp;<span class="op" id="3012389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012395">tok</span>&nbsp;<span class="op" id="3012399">=</span>&nbsp;<span class="ident" id="3012401">s</span><span class="op" id="3012402">.</span><span class="ident" id="3012403">switch4</span><span class="op" id="3012410">(</span><span class="ident" id="3012411">token</span><span class="op" id="3012416">.</span><span class="ident" id="3012417">LSS</span><span class="op" id="3012420">,</span>&nbsp;<span class="ident" id="3012422">token</span><span class="op" id="3012427">.</span><span class="ident" id="3012428">LEQ</span><span class="op" id="3012431">,</span>&nbsp;<span class="string" id="3012433">&#39;&lt;&#39;</span><span class="op" id="3012436">,</span>&nbsp;<span class="ident" id="3012438">token</span><span class="op" id="3012443">.</span><span class="ident" id="3012444">SHL</span><span class="op" id="3012447">,</span>&nbsp;<span class="ident" id="3012449">token</span><span class="op" id="3012454">.</span><span class="ident" id="3012455">SHL_ASSIGN</span><span class="op" id="3012465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012470">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012474">case</span>&nbsp;<span class="string" id="3012479">&#39;&gt;&#39;</span><span class="op" id="3012482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012487">tok</span>&nbsp;<span class="op" id="3012491">=</span>&nbsp;<span class="ident" id="3012493">s</span><span class="op" id="3012494">.</span><span class="ident" id="3012495">switch4</span><span class="op" id="3012502">(</span><span class="ident" id="3012503">token</span><span class="op" id="3012508">.</span><span class="ident" id="3012509">GTR</span><span class="op" id="3012512">,</span>&nbsp;<span class="ident" id="3012514">token</span><span class="op" id="3012519">.</span><span class="ident" id="3012520">GEQ</span><span class="op" id="3012523">,</span>&nbsp;<span class="string" id="3012525">&#39;&gt;&#39;</span><span class="op" id="3012528">,</span>&nbsp;<span class="ident" id="3012530">token</span><span class="op" id="3012535">.</span><span class="ident" id="3012536">SHR</span><span class="op" id="3012539">,</span>&nbsp;<span class="ident" id="3012541">token</span><span class="op" id="3012546">.</span><span class="ident" id="3012547">SHR_ASSIGN</span><span class="op" id="3012557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012561">case</span>&nbsp;<span class="string" id="3012566">&#39;=&#39;</span><span class="op" id="3012569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012574">tok</span>&nbsp;<span class="op" id="3012578">=</span>&nbsp;<span class="ident" id="3012580">s</span><span class="op" id="3012581">.</span><span class="ident" id="3012582">switch2</span><span class="op" id="3012589">(</span><span class="ident" id="3012590">token</span><span class="op" id="3012595">.</span><span class="ident" id="3012596">ASSIGN</span><span class="op" id="3012602">,</span>&nbsp;<span class="ident" id="3012604">token</span><span class="op" id="3012609">.</span><span class="ident" id="3012610">EQL</span><span class="op" id="3012613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012617">case</span>&nbsp;<span class="string" id="3012622">&#39;!&#39;</span><span class="op" id="3012625">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012630">tok</span>&nbsp;<span class="op" id="3012634">=</span>&nbsp;<span class="ident" id="3012636">s</span><span class="op" id="3012637">.</span><span class="ident" id="3012638">switch2</span><span class="op" id="3012645">(</span><span class="ident" id="3012646">token</span><span class="op" id="3012651">.</span><span class="ident" id="3012652">NOT</span><span class="op" id="3012655">,</span>&nbsp;<span class="ident" id="3012657">token</span><span class="op" id="3012662">.</span><span class="ident" id="3012663">NEQ</span><span class="op" id="3012666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012670">case</span>&nbsp;<span class="string" id="3012675">&#39;&amp;&#39;</span><span class="op" id="3012678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012683">if</span>&nbsp;<span class="ident" id="3012686">s</span><span class="op" id="3012687">.</span><span class="ident" id="3012688">ch</span>&nbsp;<span class="op" id="3012691">==</span>&nbsp;<span class="string" id="3012694">&#39;^&#39;</span>&nbsp;<span class="op" id="3012698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012704">s</span><span class="op" id="3012705">.</span><span class="ident" id="3012706">next</span><span class="op" id="3012710">(</span><span class="op" id="3012711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012717">tok</span>&nbsp;<span class="op" id="3012721">=</span>&nbsp;<span class="ident" id="3012723">s</span><span class="op" id="3012724">.</span><span class="ident" id="3012725">switch2</span><span class="op" id="3012732">(</span><span class="ident" id="3012733">token</span><span class="op" id="3012738">.</span><span class="ident" id="3012739">AND_NOT</span><span class="op" id="3012746">,</span>&nbsp;<span class="ident" id="3012748">token</span><span class="op" id="3012753">.</span><span class="ident" id="3012754">AND_NOT_ASSIGN</span><span class="op" id="3012768">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012773">}</span>&nbsp;<span class="keyword" id="3012775">else</span>&nbsp;<span class="op" id="3012780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012786">tok</span>&nbsp;<span class="op" id="3012790">=</span>&nbsp;<span class="ident" id="3012792">s</span><span class="op" id="3012793">.</span><span class="ident" id="3012794">switch3</span><span class="op" id="3012801">(</span><span class="ident" id="3012802">token</span><span class="op" id="3012807">.</span><span class="ident" id="3012808">AND</span><span class="op" id="3012811">,</span>&nbsp;<span class="ident" id="3012813">token</span><span class="op" id="3012818">.</span><span class="ident" id="3012819">AND_ASSIGN</span><span class="op" id="3012829">,</span>&nbsp;<span class="string" id="3012831">&#39;&amp;&#39;</span><span class="op" id="3012834">,</span>&nbsp;<span class="ident" id="3012836">token</span><span class="op" id="3012841">.</span><span class="ident" id="3012842">LAND</span><span class="op" id="3012846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3012851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012855">case</span>&nbsp;<span class="string" id="3012860">&#39;|&#39;</span><span class="op" id="3012863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3012868">tok</span>&nbsp;<span class="op" id="3012872">=</span>&nbsp;<span class="ident" id="3012874">s</span><span class="op" id="3012875">.</span><span class="ident" id="3012876">switch3</span><span class="op" id="3012883">(</span><span class="ident" id="3012884">token</span><span class="op" id="3012889">.</span><span class="ident" id="3012890">OR</span><span class="op" id="3012892">,</span>&nbsp;<span class="ident" id="3012894">token</span><span class="op" id="3012899">.</span><span class="ident" id="3012900">OR_ASSIGN</span><span class="op" id="3012909">,</span>&nbsp;<span class="string" id="3012911">&#39;|&#39;</span><span class="op" id="3012914">,</span>&nbsp;<span class="ident" id="3012916">token</span><span class="op" id="3012921">.</span><span class="ident" id="3012922">LOR</span><span class="op" id="3012925">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012929">default</span><span class="op" id="3012936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3012941">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3012991">if</span>&nbsp;<span class="ident" id="3012994">ch</span>&nbsp;<span class="op" id="3012997">!=</span>&nbsp;<span class="ident" id="3013000">bom</span>&nbsp;<span class="op" id="3013004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3013010">s</span><span class="op" id="3013011">.</span><span class="builtintype" id="3013012">error</span><span class="op" id="3013017">(</span><span class="ident" id="3013018">s</span><span class="op" id="3013019">.</span><span class="ident" id="3013020">file</span><span class="op" id="3013024">.</span><span class="ident" id="3013025">Offset</span><span class="op" id="3013031">(</span><span class="ident" id="3013032">pos</span><span class="op" id="3013035">)</span><span class="op" id="3013036">,</span>&nbsp;<span class="ident" id="3013038">fmt</span><span class="op" id="3013041">.</span><span class="ident" id="3013042">Sprintf</span><span class="op" id="3013049">(</span><span class="string" id="3013050">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="3013073">,</span>&nbsp;<span class="ident" id="3013075">ch</span><span class="op" id="3013077">)</span><span class="op" id="3013078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3013083">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3013088">insertSemi</span>&nbsp;<span class="op" id="3013099">=</span>&nbsp;<span class="ident" id="3013101">s</span><span class="op" id="3013102">.</span><span class="ident" id="3013103">insertSemi</span>&nbsp;<span class="comment" id="3013114">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3013145">tok</span>&nbsp;<span class="op" id="3013149">=</span>&nbsp;<span class="ident" id="3013151">token</span><span class="op" id="3013156">.</span><span class="ident" id="3013157">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3013168">lit</span>&nbsp;<span class="op" id="3013172">=</span>&nbsp;<span class="builtintype" id="3013174">string</span><span class="op" id="3013180">(</span><span class="ident" id="3013181">ch</span><span class="op" id="3013183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3013187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3013190">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3013193">if</span>&nbsp;<span class="ident" id="3013196">s</span><span class="op" id="3013197">.</span><span class="ident" id="3013198">mode</span><span class="op" id="3013202">&amp;</span><span class="ident" id="3013203">dontInsertSemis</span>&nbsp;<span class="op" id="3013219">==</span>&nbsp;<span class="num" id="3013222">0</span>&nbsp;<span class="op" id="3013224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3013228">s</span><span class="op" id="3013229">.</span><span class="ident" id="3013230">insertSemi</span>&nbsp;<span class="op" id="3013241">=</span>&nbsp;<span class="ident" id="3013243">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3013255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3013259">return</span><br>
<span class="lineno">760</span><span class="op" id="3013266">}</span>
</div>
</body>
</html>
