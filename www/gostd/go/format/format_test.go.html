<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7264673">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7264728">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7264782">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7264833">package</span>&nbsp;<span class="ident" id="7264841">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7264849">import</span>&nbsp;<span class="op" id="7264856">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7264859">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7264868">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7264881">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7264893">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7264906">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7264917">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7264927">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7264930">const</span>&nbsp;<span class="ident" id="7264936">testfile</span>&nbsp;<span class="op" id="7264945">=</span>&nbsp;<span class="string" id="7264947">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7264965">func</span>&nbsp;<span class="ident" id="7264970">diff</span><span class="op" id="7264974">(</span><span class="ident" id="7264975">t</span>&nbsp;<span class="op" id="7264977">*</span><span class="ident" id="7264978">testing</span><span class="op" id="7264985">.</span><span class="ident" id="7264986">T</span><span class="op" id="7264987">,</span>&nbsp;<span class="ident" id="7264989">dst</span><span class="op" id="7264992">,</span>&nbsp;<span class="ident" id="7264994">src</span>&nbsp;<span class="op" id="7264998">[</span><span class="op" id="7264999">]</span><span class="builtintype" id="7265000">byte</span><span class="op" id="7265004">)</span>&nbsp;<span class="op" id="7265006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265009">line</span>&nbsp;<span class="op" id="7265014">:=</span>&nbsp;<span class="num" id="7265017">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265020">offs</span>&nbsp;<span class="op" id="7265025">:=</span>&nbsp;<span class="num" id="7265028">0</span>&nbsp;<span class="comment" id="7265030">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265046">for</span>&nbsp;<span class="ident" id="7265050">i</span>&nbsp;<span class="op" id="7265052">:=</span>&nbsp;<span class="num" id="7265055">0</span><span class="op" id="7265056">;</span>&nbsp;<span class="ident" id="7265058">i</span>&nbsp;<span class="op" id="7265060">&lt;</span>&nbsp;<span class="builtinfunc" id="7265062">len</span><span class="op" id="7265065">(</span><span class="ident" id="7265066">dst</span><span class="op" id="7265069">)</span>&nbsp;<span class="op" id="7265071">&amp;&amp;</span>&nbsp;<span class="ident" id="7265074">i</span>&nbsp;<span class="op" id="7265076">&lt;</span>&nbsp;<span class="builtinfunc" id="7265078">len</span><span class="op" id="7265081">(</span><span class="ident" id="7265082">src</span><span class="op" id="7265085">)</span><span class="op" id="7265086">;</span>&nbsp;<span class="ident" id="7265088">i</span><span class="op" id="7265089">++</span>&nbsp;<span class="op" id="7265092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265096">d</span>&nbsp;<span class="op" id="7265098">:=</span>&nbsp;<span class="ident" id="7265101">dst</span><span class="op" id="7265104">[</span><span class="ident" id="7265105">i</span><span class="op" id="7265106">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265110">s</span>&nbsp;<span class="op" id="7265112">:=</span>&nbsp;<span class="ident" id="7265115">src</span><span class="op" id="7265118">[</span><span class="ident" id="7265119">i</span><span class="op" id="7265120">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265124">if</span>&nbsp;<span class="ident" id="7265127">d</span>&nbsp;<span class="op" id="7265129">!=</span>&nbsp;<span class="ident" id="7265132">s</span>&nbsp;<span class="op" id="7265134">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265139">t</span><span class="op" id="7265140">.</span><span class="ident" id="7265141">Errorf</span><span class="op" id="7265147">(</span><span class="string" id="7265148">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="7265162">,</span>&nbsp;<span class="ident" id="7265164">line</span><span class="op" id="7265168">,</span>&nbsp;<span class="ident" id="7265170">dst</span><span class="op" id="7265173">[</span><span class="ident" id="7265174">offs</span><span class="op" id="7265178">:</span><span class="ident" id="7265179">i</span><span class="op" id="7265180">+</span><span class="num" id="7265181">1</span><span class="op" id="7265182">]</span><span class="op" id="7265183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265188">t</span><span class="op" id="7265189">.</span><span class="ident" id="7265190">Errorf</span><span class="op" id="7265196">(</span><span class="string" id="7265197">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="7265211">,</span>&nbsp;<span class="ident" id="7265213">line</span><span class="op" id="7265217">,</span>&nbsp;<span class="ident" id="7265219">src</span><span class="op" id="7265222">[</span><span class="ident" id="7265223">offs</span><span class="op" id="7265227">:</span><span class="ident" id="7265228">i</span><span class="op" id="7265229">+</span><span class="num" id="7265230">1</span><span class="op" id="7265231">]</span><span class="op" id="7265232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265237">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265250">if</span>&nbsp;<span class="ident" id="7265253">s</span>&nbsp;<span class="op" id="7265255">==</span>&nbsp;<span class="string" id="7265258">&#39;\n&#39;</span>&nbsp;<span class="op" id="7265263">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265268">line</span><span class="op" id="7265272">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265278">offs</span>&nbsp;<span class="op" id="7265283">=</span>&nbsp;<span class="ident" id="7265285">i</span>&nbsp;<span class="op" id="7265287">+</span>&nbsp;<span class="num" id="7265289">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265299">if</span>&nbsp;<span class="builtinfunc" id="7265302">len</span><span class="op" id="7265305">(</span><span class="ident" id="7265306">dst</span><span class="op" id="7265309">)</span>&nbsp;<span class="op" id="7265311">!=</span>&nbsp;<span class="builtinfunc" id="7265314">len</span><span class="op" id="7265317">(</span><span class="ident" id="7265318">src</span><span class="op" id="7265321">)</span>&nbsp;<span class="op" id="7265323">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265327">t</span><span class="op" id="7265328">.</span><span class="ident" id="7265329">Errorf</span><span class="op" id="7265335">(</span><span class="string" id="7265336">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="7265376">,</span>&nbsp;<span class="builtinfunc" id="7265378">len</span><span class="op" id="7265381">(</span><span class="ident" id="7265382">dst</span><span class="op" id="7265385">)</span><span class="op" id="7265386">,</span>&nbsp;<span class="builtinfunc" id="7265388">len</span><span class="op" id="7265391">(</span><span class="ident" id="7265392">src</span><span class="op" id="7265395">)</span><span class="op" id="7265396">,</span>&nbsp;<span class="ident" id="7265398">src</span><span class="op" id="7265401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265404">}</span><br>
<span class="lineno"></span><span class="op" id="7265406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7265409">func</span>&nbsp;<span class="ident" id="7265414">TestNode</span><span class="op" id="7265422">(</span><span class="ident" id="7265423">t</span>&nbsp;<span class="op" id="7265425">*</span><span class="ident" id="7265426">testing</span><span class="op" id="7265433">.</span><span class="ident" id="7265434">T</span><span class="op" id="7265435">)</span>&nbsp;<span class="op" id="7265437">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265440">src</span><span class="op" id="7265443">,</span>&nbsp;<span class="ident" id="7265445">err</span>&nbsp;<span class="op" id="7265449">:=</span>&nbsp;<span class="ident" id="7265452">ioutil</span><span class="op" id="7265458">.</span><span class="ident" id="7265459">ReadFile</span><span class="op" id="7265467">(</span><span class="ident" id="7265468">testfile</span><span class="op" id="7265476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265479">if</span>&nbsp;<span class="ident" id="7265482">err</span>&nbsp;<span class="op" id="7265486">!=</span>&nbsp;<span class="ident" id="7265489">nil</span>&nbsp;<span class="op" id="7265493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265497">t</span><span class="op" id="7265498">.</span><span class="ident" id="7265499">Fatal</span><span class="op" id="7265504">(</span><span class="ident" id="7265505">err</span><span class="op" id="7265508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265515">fset</span>&nbsp;<span class="op" id="7265520">:=</span>&nbsp;<span class="ident" id="7265523">token</span><span class="op" id="7265528">.</span><span class="ident" id="7265529">NewFileSet</span><span class="op" id="7265539">(</span><span class="op" id="7265540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265543">file</span><span class="op" id="7265547">,</span>&nbsp;<span class="ident" id="7265549">err</span>&nbsp;<span class="op" id="7265553">:=</span>&nbsp;<span class="ident" id="7265556">parser</span><span class="op" id="7265562">.</span><span class="ident" id="7265563">ParseFile</span><span class="op" id="7265572">(</span><span class="ident" id="7265573">fset</span><span class="op" id="7265577">,</span>&nbsp;<span class="ident" id="7265579">testfile</span><span class="op" id="7265587">,</span>&nbsp;<span class="ident" id="7265589">src</span><span class="op" id="7265592">,</span>&nbsp;<span class="ident" id="7265594">parser</span><span class="op" id="7265600">.</span><span class="ident" id="7265601">ParseComments</span><span class="op" id="7265614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265617">if</span>&nbsp;<span class="ident" id="7265620">err</span>&nbsp;<span class="op" id="7265624">!=</span>&nbsp;<span class="ident" id="7265627">nil</span>&nbsp;<span class="op" id="7265631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265635">t</span><span class="op" id="7265636">.</span><span class="ident" id="7265637">Fatal</span><span class="op" id="7265642">(</span><span class="ident" id="7265643">err</span><span class="op" id="7265646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265649">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265653">var</span>&nbsp;<span class="ident" id="7265657">buf</span>&nbsp;<span class="ident" id="7265661">bytes</span><span class="op" id="7265666">.</span><span class="ident" id="7265667">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265676">if</span>&nbsp;<span class="ident" id="7265679">err</span>&nbsp;<span class="op" id="7265683">=</span>&nbsp;<span class="ident" id="7265685">Node</span><span class="op" id="7265689">(</span><span class="op" id="7265690">&amp;</span><span class="ident" id="7265691">buf</span><span class="op" id="7265694">,</span>&nbsp;<span class="ident" id="7265696">fset</span><span class="op" id="7265700">,</span>&nbsp;<span class="ident" id="7265702">file</span><span class="op" id="7265706">)</span><span class="op" id="7265707">;</span>&nbsp;<span class="ident" id="7265709">err</span>&nbsp;<span class="op" id="7265713">!=</span>&nbsp;<span class="ident" id="7265716">nil</span>&nbsp;<span class="op" id="7265720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265724">t</span><span class="op" id="7265725">.</span><span class="ident" id="7265726">Fatal</span><span class="op" id="7265731">(</span><span class="string" id="7265732">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="7265746">,</span>&nbsp;<span class="ident" id="7265748">err</span><span class="op" id="7265751">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265758">diff</span><span class="op" id="7265762">(</span><span class="ident" id="7265763">t</span><span class="op" id="7265764">,</span>&nbsp;<span class="ident" id="7265766">buf</span><span class="op" id="7265769">.</span><span class="ident" id="7265770">Bytes</span><span class="op" id="7265775">(</span><span class="op" id="7265776">)</span><span class="op" id="7265777">,</span>&nbsp;<span class="ident" id="7265779">src</span><span class="op" id="7265782">)</span><br>
<span class="lineno"></span><span class="op" id="7265784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7265787">func</span>&nbsp;<span class="ident" id="7265792">TestSource</span><span class="op" id="7265802">(</span><span class="ident" id="7265803">t</span>&nbsp;<span class="op" id="7265805">*</span><span class="ident" id="7265806">testing</span><span class="op" id="7265813">.</span><span class="ident" id="7265814">T</span><span class="op" id="7265815">)</span>&nbsp;<span class="op" id="7265817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265820">src</span><span class="op" id="7265823">,</span>&nbsp;<span class="ident" id="7265825">err</span>&nbsp;<span class="op" id="7265829">:=</span>&nbsp;<span class="ident" id="7265832">ioutil</span><span class="op" id="7265838">.</span><span class="ident" id="7265839">ReadFile</span><span class="op" id="7265847">(</span><span class="ident" id="7265848">testfile</span><span class="op" id="7265856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265859">if</span>&nbsp;<span class="ident" id="7265862">err</span>&nbsp;<span class="op" id="7265866">!=</span>&nbsp;<span class="ident" id="7265869">nil</span>&nbsp;<span class="op" id="7265873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265877">t</span><span class="op" id="7265878">.</span><span class="ident" id="7265879">Fatal</span><span class="op" id="7265884">(</span><span class="ident" id="7265885">err</span><span class="op" id="7265888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265891">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265895">res</span><span class="op" id="7265898">,</span>&nbsp;<span class="ident" id="7265900">err</span>&nbsp;<span class="op" id="7265904">:=</span>&nbsp;<span class="ident" id="7265907">Source</span><span class="op" id="7265913">(</span><span class="ident" id="7265914">src</span><span class="op" id="7265917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7265920">if</span>&nbsp;<span class="ident" id="7265923">err</span>&nbsp;<span class="op" id="7265927">!=</span>&nbsp;<span class="ident" id="7265930">nil</span>&nbsp;<span class="op" id="7265934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265938">t</span><span class="op" id="7265939">.</span><span class="ident" id="7265940">Fatal</span><span class="op" id="7265945">(</span><span class="string" id="7265946">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="7265962">,</span>&nbsp;<span class="ident" id="7265964">err</span><span class="op" id="7265967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7265970">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7265974">diff</span><span class="op" id="7265978">(</span><span class="ident" id="7265979">t</span><span class="op" id="7265980">,</span>&nbsp;<span class="ident" id="7265982">res</span><span class="op" id="7265985">,</span>&nbsp;<span class="ident" id="7265987">src</span><span class="op" id="7265990">)</span><br>
<span class="lineno"></span><span class="op" id="7265992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7265995">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="7266069">var</span>&nbsp;<span class="ident" id="7266073">tests</span>&nbsp;<span class="op" id="7266079">=</span>&nbsp;<span class="op" id="7266081">[</span><span class="op" id="7266082">]</span><span class="builtintype" id="7266083">string</span><span class="op" id="7266089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7266092">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266114">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="7266134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266137">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="7266148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266151">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="7266181">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7266185">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266205">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7266213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266216">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="7266252">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7266256">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266300">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="7266320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266323">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7266349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266352">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7266388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266391">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7266435">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266438">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="7266495">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7266501">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266545">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="7266606">,</span>&nbsp;<span class="comment" id="7266608">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7266655">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266668">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="7266690">,</span>&nbsp;<span class="comment" id="7266692">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7266709">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266732">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="7266746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7266749">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="7266763">,</span><br>
<span class="lineno"></span><span class="op" id="7266765">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="7266768">func</span>&nbsp;<span class="ident" id="7266773">String</span><span class="op" id="7266779">(</span><span class="ident" id="7266780">s</span>&nbsp;<span class="builtintype" id="7266782">string</span><span class="op" id="7266788">)</span>&nbsp;<span class="op" id="7266790">(</span><span class="builtintype" id="7266791">string</span><span class="op" id="7266797">,</span>&nbsp;<span class="builtintype" id="7266799">error</span><span class="op" id="7266804">)</span>&nbsp;<span class="op" id="7266806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7266809">res</span><span class="op" id="7266812">,</span>&nbsp;<span class="ident" id="7266814">err</span>&nbsp;<span class="op" id="7266818">:=</span>&nbsp;<span class="ident" id="7266821">Source</span><span class="op" id="7266827">(</span><span class="op" id="7266828">[</span><span class="op" id="7266829">]</span><span class="builtintype" id="7266830">byte</span><span class="op" id="7266834">(</span><span class="ident" id="7266835">s</span><span class="op" id="7266836">)</span><span class="op" id="7266837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266840">if</span>&nbsp;<span class="ident" id="7266843">err</span>&nbsp;<span class="op" id="7266847">!=</span>&nbsp;<span class="ident" id="7266850">nil</span>&nbsp;<span class="op" id="7266854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266858">return</span>&nbsp;<span class="string" id="7266865">&#34;&#34;</span><span class="op" id="7266867">,</span>&nbsp;<span class="ident" id="7266869">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7266874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266877">return</span>&nbsp;<span class="builtintype" id="7266884">string</span><span class="op" id="7266890">(</span><span class="ident" id="7266891">res</span><span class="op" id="7266894">)</span><span class="op" id="7266895">,</span>&nbsp;<span class="ident" id="7266897">nil</span><br>
<span class="lineno"></span><span class="op" id="7266901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7266904">func</span>&nbsp;<span class="ident" id="7266909">TestPartial</span><span class="op" id="7266920">(</span><span class="ident" id="7266921">t</span>&nbsp;<span class="op" id="7266923">*</span><span class="ident" id="7266924">testing</span><span class="op" id="7266931">.</span><span class="ident" id="7266932">T</span><span class="op" id="7266933">)</span>&nbsp;<span class="op" id="7266935">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266938">for</span>&nbsp;<span class="ident" id="7266942">_</span><span class="op" id="7266943">,</span>&nbsp;<span class="ident" id="7266945">src</span>&nbsp;<span class="op" id="7266949">:=</span>&nbsp;<span class="keyword" id="7266952">range</span>&nbsp;<span class="ident" id="7266958">tests</span>&nbsp;<span class="op" id="7266964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7266968">if</span>&nbsp;<span class="ident" id="7266971">strings</span><span class="op" id="7266978">.</span><span class="ident" id="7266979">HasPrefix</span><span class="op" id="7266988">(</span><span class="ident" id="7266989">src</span><span class="op" id="7266992">,</span>&nbsp;<span class="string" id="7266994">&#34;ERROR&#34;</span><span class="op" id="7267001">)</span>&nbsp;<span class="op" id="7267003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7267008">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267036">src</span>&nbsp;<span class="op" id="7267040">=</span>&nbsp;<span class="ident" id="7267042">src</span><span class="op" id="7267045">[</span><span class="num" id="7267046">5</span><span class="op" id="7267047">:</span><span class="op" id="7267048">]</span>&nbsp;<span class="comment" id="7267050">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267076">res</span><span class="op" id="7267079">,</span>&nbsp;<span class="ident" id="7267081">err</span>&nbsp;<span class="op" id="7267085">:=</span>&nbsp;<span class="ident" id="7267088">String</span><span class="op" id="7267094">(</span><span class="ident" id="7267095">src</span><span class="op" id="7267098">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267103">if</span>&nbsp;<span class="ident" id="7267106">err</span>&nbsp;<span class="op" id="7267110">==</span>&nbsp;<span class="ident" id="7267113">nil</span>&nbsp;<span class="op" id="7267117">&amp;&amp;</span>&nbsp;<span class="ident" id="7267120">res</span>&nbsp;<span class="op" id="7267124">==</span>&nbsp;<span class="ident" id="7267127">src</span>&nbsp;<span class="op" id="7267131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267137">t</span><span class="op" id="7267138">.</span><span class="ident" id="7267139">Errorf</span><span class="op" id="7267145">(</span><span class="string" id="7267146">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="7267198">,</span>&nbsp;<span class="ident" id="7267200">src</span><span class="op" id="7267203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267212">}</span>&nbsp;<span class="keyword" id="7267214">else</span>&nbsp;<span class="op" id="7267219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7267224">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267255">res</span><span class="op" id="7267258">,</span>&nbsp;<span class="ident" id="7267260">err</span>&nbsp;<span class="op" id="7267264">:=</span>&nbsp;<span class="ident" id="7267267">String</span><span class="op" id="7267273">(</span><span class="ident" id="7267274">src</span><span class="op" id="7267277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7267282">if</span>&nbsp;<span class="ident" id="7267285">err</span>&nbsp;<span class="op" id="7267289">!=</span>&nbsp;<span class="ident" id="7267292">nil</span>&nbsp;<span class="op" id="7267296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267302">t</span><span class="op" id="7267303">.</span><span class="ident" id="7267304">Errorf</span><span class="op" id="7267310">(</span><span class="string" id="7267311">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="7267340">,</span>&nbsp;<span class="ident" id="7267342">err</span><span class="op" id="7267345">,</span>&nbsp;<span class="ident" id="7267347">src</span><span class="op" id="7267350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267355">}</span>&nbsp;<span class="keyword" id="7267357">else</span>&nbsp;<span class="keyword" id="7267362">if</span>&nbsp;<span class="ident" id="7267365">res</span>&nbsp;<span class="op" id="7267369">!=</span>&nbsp;<span class="ident" id="7267372">src</span>&nbsp;<span class="op" id="7267376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7267382">t</span><span class="op" id="7267383">.</span><span class="ident" id="7267384">Errorf</span><span class="op" id="7267390">(</span><span class="string" id="7267391">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="7267438">,</span>&nbsp;<span class="ident" id="7267440">src</span><span class="op" id="7267443">,</span>&nbsp;<span class="ident" id="7267445">res</span><span class="op" id="7267448">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7267460">}</span><br>
<span class="lineno"></span><span class="op" id="7267462">}</span>
</div>
</body>
</html>
