<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3461525">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3461581">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3461635">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3461686">package</span>&nbsp;<span class="ident" id="3461694">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3461699">//&nbsp;UDPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;UDP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="3461753">type</span>&nbsp;<span class="ident" id="3461758">UDPAddr</span>&nbsp;<span class="keyword" id="3461766">struct</span>&nbsp;<span class="op" id="3461773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461776">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3461781">IP</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461785">Port</span>&nbsp;<span class="builtintype" id="3461790">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3461795">Zone</span>&nbsp;<span class="builtintype" id="3461800">string</span>&nbsp;<span class="comment" id="3461807">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="3461838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3461841">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;udp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="3461895">func</span>&nbsp;<span class="op" id="3461900">(</span><span class="ident" id="3461901">a</span>&nbsp;<span class="op" id="3461903">*</span><span class="ident" id="3461904">UDPAddr</span><span class="op" id="3461911">)</span>&nbsp;<span class="ident" id="3461913">Network</span><span class="op" id="3461920">(</span><span class="op" id="3461921">)</span>&nbsp;<span class="builtintype" id="3461923">string</span>&nbsp;<span class="op" id="3461930">{</span>&nbsp;<span class="keyword" id="3461932">return</span>&nbsp;<span class="string" id="3461939">&#34;udp&#34;</span>&nbsp;<span class="op" id="3461945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3461948">func</span>&nbsp;<span class="op" id="3461953">(</span><span class="ident" id="3461954">a</span>&nbsp;<span class="op" id="3461956">*</span><span class="ident" id="3461957">UDPAddr</span><span class="op" id="3461964">)</span>&nbsp;<span class="ident" id="3461966">String</span><span class="op" id="3461972">(</span><span class="op" id="3461973">)</span>&nbsp;<span class="builtintype" id="3461975">string</span>&nbsp;<span class="op" id="3461982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3461985">if</span>&nbsp;<span class="ident" id="3461988">a</span>&nbsp;<span class="op" id="3461990">==</span>&nbsp;<span class="ident" id="3461993">nil</span>&nbsp;<span class="op" id="3461997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462001">return</span>&nbsp;<span class="string" id="3462008">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3462017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462020">ip</span>&nbsp;<span class="op" id="3462023">:=</span>&nbsp;<span class="ident" id="3462026">ipEmptyString</span><span class="op" id="3462039">(</span><span class="ident" id="3462040">a</span><span class="op" id="3462041">.</span><span class="ident" id="3462042">IP</span><span class="op" id="3462044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462047">if</span>&nbsp;<span class="ident" id="3462050">a</span><span class="op" id="3462051">.</span><span class="ident" id="3462052">Zone</span>&nbsp;<span class="op" id="3462057">!=</span>&nbsp;<span class="string" id="3462060">&#34;&#34;</span>&nbsp;<span class="op" id="3462063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462067">return</span>&nbsp;<span class="ident" id="3462074">JoinHostPort</span><span class="op" id="3462086">(</span><span class="ident" id="3462087">ip</span><span class="op" id="3462089">+</span><span class="string" id="3462090">&#34;%&#34;</span><span class="op" id="3462093">+</span><span class="ident" id="3462094">a</span><span class="op" id="3462095">.</span><span class="ident" id="3462096">Zone</span><span class="op" id="3462100">,</span>&nbsp;<span class="ident" id="3462102">itoa</span><span class="op" id="3462106">(</span><span class="ident" id="3462107">a</span><span class="op" id="3462108">.</span><span class="ident" id="3462109">Port</span><span class="op" id="3462113">)</span><span class="op" id="3462114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3462117">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462120">return</span>&nbsp;<span class="ident" id="3462127">JoinHostPort</span><span class="op" id="3462139">(</span><span class="ident" id="3462140">ip</span><span class="op" id="3462142">,</span>&nbsp;<span class="ident" id="3462144">itoa</span><span class="op" id="3462148">(</span><span class="ident" id="3462149">a</span><span class="op" id="3462150">.</span><span class="ident" id="3462151">Port</span><span class="op" id="3462155">)</span><span class="op" id="3462156">)</span><br>
<span class="lineno"></span><span class="op" id="3462158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3462161">func</span>&nbsp;<span class="op" id="3462166">(</span><span class="ident" id="3462167">a</span>&nbsp;<span class="op" id="3462169">*</span><span class="ident" id="3462170">UDPAddr</span><span class="op" id="3462177">)</span>&nbsp;<span class="ident" id="3462179">toAddr</span><span class="op" id="3462185">(</span><span class="op" id="3462186">)</span>&nbsp;<span class="ident" id="3462188">Addr</span>&nbsp;<span class="op" id="3462193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462196">if</span>&nbsp;<span class="ident" id="3462199">a</span>&nbsp;<span class="op" id="3462201">==</span>&nbsp;<span class="ident" id="3462204">nil</span>&nbsp;<span class="op" id="3462208">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462212">return</span>&nbsp;<span class="ident" id="3462219">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3462224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462227">return</span>&nbsp;<span class="ident" id="3462234">a</span><br>
<span class="lineno"></span><span class="op" id="3462236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3462239">//&nbsp;ResolveUDPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;UDP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3462310">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3462379">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3462443">//&nbsp;&#34;udp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="3462512">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="3462575">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3462601">func</span>&nbsp;<span class="ident" id="3462606">ResolveUDPAddr</span><span class="op" id="3462620">(</span><span class="ident" id="3462621">net</span><span class="op" id="3462624">,</span>&nbsp;<span class="ident" id="3462626">addr</span>&nbsp;<span class="builtintype" id="3462631">string</span><span class="op" id="3462637">)</span>&nbsp;<span class="op" id="3462639">(</span><span class="op" id="3462640">*</span><span class="ident" id="3462641">UDPAddr</span><span class="op" id="3462648">,</span>&nbsp;<span class="builtintype" id="3462650">error</span><span class="op" id="3462655">)</span>&nbsp;<span class="op" id="3462657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462660">switch</span>&nbsp;<span class="ident" id="3462667">net</span>&nbsp;<span class="op" id="3462671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462674">case</span>&nbsp;<span class="string" id="3462679">&#34;udp&#34;</span><span class="op" id="3462684">,</span>&nbsp;<span class="string" id="3462686">&#34;udp4&#34;</span><span class="op" id="3462692">,</span>&nbsp;<span class="string" id="3462694">&#34;udp6&#34;</span><span class="op" id="3462700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462703">case</span>&nbsp;<span class="string" id="3462708">&#34;&#34;</span><span class="op" id="3462710">:</span>&nbsp;<span class="comment" id="3462712">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462766">net</span>&nbsp;<span class="op" id="3462770">=</span>&nbsp;<span class="string" id="3462772">&#34;udp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462779">default</span><span class="op" id="3462786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462790">return</span>&nbsp;<span class="ident" id="3462797">nil</span><span class="op" id="3462800">,</span>&nbsp;<span class="ident" id="3462802">UnknownNetworkError</span><span class="op" id="3462821">(</span><span class="ident" id="3462822">net</span><span class="op" id="3462825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3462828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3462831">a</span><span class="op" id="3462832">,</span>&nbsp;<span class="ident" id="3462834">err</span>&nbsp;<span class="op" id="3462838">:=</span>&nbsp;<span class="ident" id="3462841">resolveInternetAddr</span><span class="op" id="3462860">(</span><span class="ident" id="3462861">net</span><span class="op" id="3462864">,</span>&nbsp;<span class="ident" id="3462866">addr</span><span class="op" id="3462870">,</span>&nbsp;<span class="ident" id="3462872">noDeadline</span><span class="op" id="3462882">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462885">if</span>&nbsp;<span class="ident" id="3462888">err</span>&nbsp;<span class="op" id="3462892">!=</span>&nbsp;<span class="ident" id="3462895">nil</span>&nbsp;<span class="op" id="3462899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462903">return</span>&nbsp;<span class="ident" id="3462910">nil</span><span class="op" id="3462913">,</span>&nbsp;<span class="ident" id="3462915">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3462920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3462923">return</span>&nbsp;<span class="ident" id="3462930">a</span><span class="op" id="3462931">.</span><span class="ident" id="3462932">toAddr</span><span class="op" id="3462938">(</span><span class="op" id="3462939">)</span><span class="op" id="3462940">.</span><span class="op" id="3462941">(</span><span class="op" id="3462942">*</span><span class="ident" id="3462943">UDPAddr</span><span class="op" id="3462950">)</span><span class="op" id="3462951">,</span>&nbsp;<span class="ident" id="3462953">nil</span><br>
<span class="lineno"></span><span class="op" id="3462957">}</span>
</div>
</body>
</html>
