<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html" class="current">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3752991">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3753046">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3753100">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3753151">package</span>&nbsp;<span class="ident" id="3753159">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3753167">import</span>&nbsp;<span class="op" id="3753174">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3753177">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3753188">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3753197">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3753200">const</span>&nbsp;<span class="ident" id="3753206">wordSize</span>&nbsp;<span class="op" id="3753215">=</span>&nbsp;<span class="builtintype" id="3753217">int</span><span class="op" id="3753220">(</span><span class="ident" id="3753221">unsafe</span><span class="op" id="3753227">.</span><span class="ident" id="3753228">Sizeof</span><span class="op" id="3753234">(</span><span class="builtintype" id="3753235">uintptr</span><span class="op" id="3753242">(</span><span class="num" id="3753243">0</span><span class="op" id="3753244">)</span><span class="op" id="3753245">)</span><span class="op" id="3753246">)</span><br>
<span class="lineno"></span><span class="keyword" id="3753248">const</span>&nbsp;<span class="ident" id="3753254">supportsUnaligned</span>&nbsp;<span class="op" id="3753272">=</span>&nbsp;<span class="ident" id="3753274">runtime</span><span class="op" id="3753281">.</span><span class="ident" id="3753282">GOARCH</span>&nbsp;<span class="op" id="3753289">==</span>&nbsp;<span class="string" id="3753292">&#34;386&#34;</span>&nbsp;<span class="op" id="3753298">||</span>&nbsp;<span class="ident" id="3753301">runtime</span><span class="op" id="3753308">.</span><span class="ident" id="3753309">GOARCH</span>&nbsp;<span class="op" id="3753316">==</span>&nbsp;<span class="string" id="3753319">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3753328">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3753394">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3753428">func</span>&nbsp;<span class="ident" id="3753433">fastXORBytes</span><span class="op" id="3753445">(</span><span class="ident" id="3753446">dst</span><span class="op" id="3753449">,</span>&nbsp;<span class="ident" id="3753451">a</span><span class="op" id="3753452">,</span>&nbsp;<span class="ident" id="3753454">b</span>&nbsp;<span class="op" id="3753456">[</span><span class="op" id="3753457">]</span><span class="builtintype" id="3753458">byte</span><span class="op" id="3753462">)</span>&nbsp;<span class="builtintype" id="3753464">int</span>&nbsp;<span class="op" id="3753468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753471">n</span>&nbsp;<span class="op" id="3753473">:=</span>&nbsp;<span class="builtinfunc" id="3753476">len</span><span class="op" id="3753479">(</span><span class="ident" id="3753480">a</span><span class="op" id="3753481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753484">if</span>&nbsp;<span class="builtinfunc" id="3753487">len</span><span class="op" id="3753490">(</span><span class="ident" id="3753491">b</span><span class="op" id="3753492">)</span>&nbsp;<span class="op" id="3753494">&lt;</span>&nbsp;<span class="ident" id="3753496">n</span>&nbsp;<span class="op" id="3753498">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753502">n</span>&nbsp;<span class="op" id="3753504">=</span>&nbsp;<span class="builtinfunc" id="3753506">len</span><span class="op" id="3753509">(</span><span class="ident" id="3753510">b</span><span class="op" id="3753511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753518">w</span>&nbsp;<span class="op" id="3753520">:=</span>&nbsp;<span class="ident" id="3753523">n</span>&nbsp;<span class="op" id="3753525">/</span>&nbsp;<span class="ident" id="3753527">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753537">if</span>&nbsp;<span class="ident" id="3753540">w</span>&nbsp;<span class="op" id="3753542">&gt;</span>&nbsp;<span class="num" id="3753544">0</span>&nbsp;<span class="op" id="3753546">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753550">dw</span>&nbsp;<span class="op" id="3753553">:=</span>&nbsp;<span class="op" id="3753556">*</span><span class="op" id="3753557">(</span><span class="op" id="3753558">*</span><span class="op" id="3753559">[</span><span class="op" id="3753560">]</span><span class="builtintype" id="3753561">uintptr</span><span class="op" id="3753568">)</span><span class="op" id="3753569">(</span><span class="ident" id="3753570">unsafe</span><span class="op" id="3753576">.</span><span class="ident" id="3753577">Pointer</span><span class="op" id="3753584">(</span><span class="op" id="3753585">&amp;</span><span class="ident" id="3753586">dst</span><span class="op" id="3753589">)</span><span class="op" id="3753590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753594">aw</span>&nbsp;<span class="op" id="3753597">:=</span>&nbsp;<span class="op" id="3753600">*</span><span class="op" id="3753601">(</span><span class="op" id="3753602">*</span><span class="op" id="3753603">[</span><span class="op" id="3753604">]</span><span class="builtintype" id="3753605">uintptr</span><span class="op" id="3753612">)</span><span class="op" id="3753613">(</span><span class="ident" id="3753614">unsafe</span><span class="op" id="3753620">.</span><span class="ident" id="3753621">Pointer</span><span class="op" id="3753628">(</span><span class="op" id="3753629">&amp;</span><span class="ident" id="3753630">a</span><span class="op" id="3753631">)</span><span class="op" id="3753632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753636">bw</span>&nbsp;<span class="op" id="3753639">:=</span>&nbsp;<span class="op" id="3753642">*</span><span class="op" id="3753643">(</span><span class="op" id="3753644">*</span><span class="op" id="3753645">[</span><span class="op" id="3753646">]</span><span class="builtintype" id="3753647">uintptr</span><span class="op" id="3753654">)</span><span class="op" id="3753655">(</span><span class="ident" id="3753656">unsafe</span><span class="op" id="3753662">.</span><span class="ident" id="3753663">Pointer</span><span class="op" id="3753670">(</span><span class="op" id="3753671">&amp;</span><span class="ident" id="3753672">b</span><span class="op" id="3753673">)</span><span class="op" id="3753674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753678">for</span>&nbsp;<span class="ident" id="3753682">i</span>&nbsp;<span class="op" id="3753684">:=</span>&nbsp;<span class="num" id="3753687">0</span><span class="op" id="3753688">;</span>&nbsp;<span class="ident" id="3753690">i</span>&nbsp;<span class="op" id="3753692">&lt;</span>&nbsp;<span class="ident" id="3753694">w</span><span class="op" id="3753695">;</span>&nbsp;<span class="ident" id="3753697">i</span><span class="op" id="3753698">++</span>&nbsp;<span class="op" id="3753701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753706">dw</span><span class="op" id="3753708">[</span><span class="ident" id="3753709">i</span><span class="op" id="3753710">]</span>&nbsp;<span class="op" id="3753712">=</span>&nbsp;<span class="ident" id="3753714">aw</span><span class="op" id="3753716">[</span><span class="ident" id="3753717">i</span><span class="op" id="3753718">]</span>&nbsp;<span class="op" id="3753720">^</span>&nbsp;<span class="ident" id="3753722">bw</span><span class="op" id="3753724">[</span><span class="ident" id="3753725">i</span><span class="op" id="3753726">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753737">for</span>&nbsp;<span class="ident" id="3753741">i</span>&nbsp;<span class="op" id="3753743">:=</span>&nbsp;<span class="op" id="3753746">(</span><span class="ident" id="3753747">n</span>&nbsp;<span class="op" id="3753749">-</span>&nbsp;<span class="ident" id="3753751">n</span><span class="op" id="3753752">%</span><span class="ident" id="3753753">wordSize</span><span class="op" id="3753761">)</span><span class="op" id="3753762">;</span>&nbsp;<span class="ident" id="3753764">i</span>&nbsp;<span class="op" id="3753766">&lt;</span>&nbsp;<span class="ident" id="3753768">n</span><span class="op" id="3753769">;</span>&nbsp;<span class="ident" id="3753771">i</span><span class="op" id="3753772">++</span>&nbsp;<span class="op" id="3753775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753779">dst</span><span class="op" id="3753782">[</span><span class="ident" id="3753783">i</span><span class="op" id="3753784">]</span>&nbsp;<span class="op" id="3753786">=</span>&nbsp;<span class="ident" id="3753788">a</span><span class="op" id="3753789">[</span><span class="ident" id="3753790">i</span><span class="op" id="3753791">]</span>&nbsp;<span class="op" id="3753793">^</span>&nbsp;<span class="ident" id="3753795">b</span><span class="op" id="3753796">[</span><span class="ident" id="3753797">i</span><span class="op" id="3753798">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753805">return</span>&nbsp;<span class="ident" id="3753812">n</span><br>
<span class="lineno"></span><span class="op" id="3753814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3753817">func</span>&nbsp;<span class="ident" id="3753822">safeXORBytes</span><span class="op" id="3753834">(</span><span class="ident" id="3753835">dst</span><span class="op" id="3753838">,</span>&nbsp;<span class="ident" id="3753840">a</span><span class="op" id="3753841">,</span>&nbsp;<span class="ident" id="3753843">b</span>&nbsp;<span class="op" id="3753845">[</span><span class="op" id="3753846">]</span><span class="builtintype" id="3753847">byte</span><span class="op" id="3753851">)</span>&nbsp;<span class="builtintype" id="3753853">int</span>&nbsp;<span class="op" id="3753857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753860">n</span>&nbsp;<span class="op" id="3753862">:=</span>&nbsp;<span class="builtinfunc" id="3753865">len</span><span class="op" id="3753868">(</span><span class="ident" id="3753869">a</span><span class="op" id="3753870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753873">if</span>&nbsp;<span class="builtinfunc" id="3753876">len</span><span class="op" id="3753879">(</span><span class="ident" id="3753880">b</span><span class="op" id="3753881">)</span>&nbsp;<span class="op" id="3753883">&lt;</span>&nbsp;<span class="ident" id="3753885">n</span>&nbsp;<span class="op" id="3753887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753891">n</span>&nbsp;<span class="op" id="3753893">=</span>&nbsp;<span class="builtinfunc" id="3753895">len</span><span class="op" id="3753898">(</span><span class="ident" id="3753899">b</span><span class="op" id="3753900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753903">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753906">for</span>&nbsp;<span class="ident" id="3753910">i</span>&nbsp;<span class="op" id="3753912">:=</span>&nbsp;<span class="num" id="3753915">0</span><span class="op" id="3753916">;</span>&nbsp;<span class="ident" id="3753918">i</span>&nbsp;<span class="op" id="3753920">&lt;</span>&nbsp;<span class="ident" id="3753922">n</span><span class="op" id="3753923">;</span>&nbsp;<span class="ident" id="3753925">i</span><span class="op" id="3753926">++</span>&nbsp;<span class="op" id="3753929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753933">dst</span><span class="op" id="3753936">[</span><span class="ident" id="3753937">i</span><span class="op" id="3753938">]</span>&nbsp;<span class="op" id="3753940">=</span>&nbsp;<span class="ident" id="3753942">a</span><span class="op" id="3753943">[</span><span class="ident" id="3753944">i</span><span class="op" id="3753945">]</span>&nbsp;<span class="op" id="3753947">^</span>&nbsp;<span class="ident" id="3753949">b</span><span class="op" id="3753950">[</span><span class="ident" id="3753951">i</span><span class="op" id="3753952">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753958">return</span>&nbsp;<span class="ident" id="3753965">n</span><br>
<span class="lineno"></span><span class="op" id="3753967">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3753970">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3754051">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3754096">func</span>&nbsp;<span class="ident" id="3754101">xorBytes</span><span class="op" id="3754109">(</span><span class="ident" id="3754110">dst</span><span class="op" id="3754113">,</span>&nbsp;<span class="ident" id="3754115">a</span><span class="op" id="3754116">,</span>&nbsp;<span class="ident" id="3754118">b</span>&nbsp;<span class="op" id="3754120">[</span><span class="op" id="3754121">]</span><span class="builtintype" id="3754122">byte</span><span class="op" id="3754126">)</span>&nbsp;<span class="builtintype" id="3754128">int</span>&nbsp;<span class="op" id="3754132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754135">if</span>&nbsp;<span class="ident" id="3754138">supportsUnaligned</span>&nbsp;<span class="op" id="3754156">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754160">return</span>&nbsp;<span class="ident" id="3754167">fastXORBytes</span><span class="op" id="3754179">(</span><span class="ident" id="3754180">dst</span><span class="op" id="3754183">,</span>&nbsp;<span class="ident" id="3754185">a</span><span class="op" id="3754186">,</span>&nbsp;<span class="ident" id="3754188">b</span><span class="op" id="3754189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754192">}</span>&nbsp;<span class="keyword" id="3754194">else</span>&nbsp;<span class="op" id="3754199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3754203">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3754259">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3754313">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3754368">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3754413">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754431">return</span>&nbsp;<span class="ident" id="3754438">safeXORBytes</span><span class="op" id="3754450">(</span><span class="ident" id="3754451">dst</span><span class="op" id="3754454">,</span>&nbsp;<span class="ident" id="3754456">a</span><span class="op" id="3754457">,</span>&nbsp;<span class="ident" id="3754459">b</span><span class="op" id="3754460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754463">}</span><br>
<span class="lineno"></span><span class="op" id="3754465">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3754468">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3754544">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3754596">func</span>&nbsp;<span class="ident" id="3754601">fastXORWords</span><span class="op" id="3754613">(</span><span class="ident" id="3754614">dst</span><span class="op" id="3754617">,</span>&nbsp;<span class="ident" id="3754619">a</span><span class="op" id="3754620">,</span>&nbsp;<span class="ident" id="3754622">b</span>&nbsp;<span class="op" id="3754624">[</span><span class="op" id="3754625">]</span><span class="builtintype" id="3754626">byte</span><span class="op" id="3754630">)</span>&nbsp;<span class="op" id="3754632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754635">dw</span>&nbsp;<span class="op" id="3754638">:=</span>&nbsp;<span class="op" id="3754641">*</span><span class="op" id="3754642">(</span><span class="op" id="3754643">*</span><span class="op" id="3754644">[</span><span class="op" id="3754645">]</span><span class="builtintype" id="3754646">uintptr</span><span class="op" id="3754653">)</span><span class="op" id="3754654">(</span><span class="ident" id="3754655">unsafe</span><span class="op" id="3754661">.</span><span class="ident" id="3754662">Pointer</span><span class="op" id="3754669">(</span><span class="op" id="3754670">&amp;</span><span class="ident" id="3754671">dst</span><span class="op" id="3754674">)</span><span class="op" id="3754675">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754678">aw</span>&nbsp;<span class="op" id="3754681">:=</span>&nbsp;<span class="op" id="3754684">*</span><span class="op" id="3754685">(</span><span class="op" id="3754686">*</span><span class="op" id="3754687">[</span><span class="op" id="3754688">]</span><span class="builtintype" id="3754689">uintptr</span><span class="op" id="3754696">)</span><span class="op" id="3754697">(</span><span class="ident" id="3754698">unsafe</span><span class="op" id="3754704">.</span><span class="ident" id="3754705">Pointer</span><span class="op" id="3754712">(</span><span class="op" id="3754713">&amp;</span><span class="ident" id="3754714">a</span><span class="op" id="3754715">)</span><span class="op" id="3754716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754719">bw</span>&nbsp;<span class="op" id="3754722">:=</span>&nbsp;<span class="op" id="3754725">*</span><span class="op" id="3754726">(</span><span class="op" id="3754727">*</span><span class="op" id="3754728">[</span><span class="op" id="3754729">]</span><span class="builtintype" id="3754730">uintptr</span><span class="op" id="3754737">)</span><span class="op" id="3754738">(</span><span class="ident" id="3754739">unsafe</span><span class="op" id="3754745">.</span><span class="ident" id="3754746">Pointer</span><span class="op" id="3754753">(</span><span class="op" id="3754754">&amp;</span><span class="ident" id="3754755">b</span><span class="op" id="3754756">)</span><span class="op" id="3754757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754760">n</span>&nbsp;<span class="op" id="3754762">:=</span>&nbsp;<span class="builtinfunc" id="3754765">len</span><span class="op" id="3754768">(</span><span class="ident" id="3754769">b</span><span class="op" id="3754770">)</span>&nbsp;<span class="op" id="3754772">/</span>&nbsp;<span class="ident" id="3754774">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754784">for</span>&nbsp;<span class="ident" id="3754788">i</span>&nbsp;<span class="op" id="3754790">:=</span>&nbsp;<span class="num" id="3754793">0</span><span class="op" id="3754794">;</span>&nbsp;<span class="ident" id="3754796">i</span>&nbsp;<span class="op" id="3754798">&lt;</span>&nbsp;<span class="ident" id="3754800">n</span><span class="op" id="3754801">;</span>&nbsp;<span class="ident" id="3754803">i</span><span class="op" id="3754804">++</span>&nbsp;<span class="op" id="3754807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754811">dw</span><span class="op" id="3754813">[</span><span class="ident" id="3754814">i</span><span class="op" id="3754815">]</span>&nbsp;<span class="op" id="3754817">=</span>&nbsp;<span class="ident" id="3754819">aw</span><span class="op" id="3754821">[</span><span class="ident" id="3754822">i</span><span class="op" id="3754823">]</span>&nbsp;<span class="op" id="3754825">^</span>&nbsp;<span class="ident" id="3754827">bw</span><span class="op" id="3754829">[</span><span class="ident" id="3754830">i</span><span class="op" id="3754831">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754834">}</span><br>
<span class="lineno"></span><span class="op" id="3754836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3754839">func</span>&nbsp;<span class="ident" id="3754844">xorWords</span><span class="op" id="3754852">(</span><span class="ident" id="3754853">dst</span><span class="op" id="3754856">,</span>&nbsp;<span class="ident" id="3754858">a</span><span class="op" id="3754859">,</span>&nbsp;<span class="ident" id="3754861">b</span>&nbsp;<span class="op" id="3754863">[</span><span class="op" id="3754864">]</span><span class="builtintype" id="3754865">byte</span><span class="op" id="3754869">)</span>&nbsp;<span class="op" id="3754871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754874">if</span>&nbsp;<span class="ident" id="3754877">supportsUnaligned</span>&nbsp;<span class="op" id="3754895">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754899">fastXORWords</span><span class="op" id="3754911">(</span><span class="ident" id="3754912">dst</span><span class="op" id="3754915">,</span>&nbsp;<span class="ident" id="3754917">a</span><span class="op" id="3754918">,</span>&nbsp;<span class="ident" id="3754920">b</span><span class="op" id="3754921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754924">}</span>&nbsp;<span class="keyword" id="3754926">else</span>&nbsp;<span class="op" id="3754931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754935">safeXORBytes</span><span class="op" id="3754947">(</span><span class="ident" id="3754948">dst</span><span class="op" id="3754951">,</span>&nbsp;<span class="ident" id="3754953">a</span><span class="op" id="3754954">,</span>&nbsp;<span class="ident" id="3754956">b</span><span class="op" id="3754957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754960">}</span><br>
<span class="lineno"></span><span class="op" id="3754962">}</span>
</div>
</body>
</html>
