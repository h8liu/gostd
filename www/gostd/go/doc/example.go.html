<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3348055">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3348110">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3348164">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3348215">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3348261">package</span>&nbsp;<span class="ident" id="3348269">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3348274">import</span>&nbsp;<span class="op" id="3348281">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348284">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348294">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348306">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348314">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348324">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348332">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348343">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348354">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3348365">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3348380">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="3348383">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3348453">type</span>&nbsp;<span class="ident" id="3348458">Example</span>&nbsp;<span class="keyword" id="3348466">struct</span>&nbsp;<span class="op" id="3348473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348476">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3348488">string</span>&nbsp;<span class="comment" id="3348495">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348534">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3348546">string</span>&nbsp;<span class="comment" id="3348553">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348585">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348597">ast</span><span class="op" id="3348600">.</span><span class="ident" id="3348601">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348607">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3348619">*</span><span class="ident" id="3348620">ast</span><span class="op" id="3348623">.</span><span class="ident" id="3348624">File</span>&nbsp;<span class="comment" id="3348629">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348672">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3348684">[</span><span class="op" id="3348685">]</span><span class="op" id="3348686">*</span><span class="ident" id="3348687">ast</span><span class="op" id="3348690">.</span><span class="ident" id="3348691">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348705">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3348717">string</span>&nbsp;<span class="comment" id="3348724">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348744">EmptyOutput</span>&nbsp;<span class="builtintype" id="3348756">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3348763">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3348787">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3348799">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3348806">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="3348836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3348839">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="3348914">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="3348991">//</span><br>
<span class="lineno"></span><span class="comment" id="3348994">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3349064">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="3349139">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="3349157">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="3349233">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3349309">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="3349372">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="3349446">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="3349522">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="3349595">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="3349629">func</span>&nbsp;<span class="ident" id="3349634">Examples</span><span class="op" id="3349642">(</span><span class="ident" id="3349643">files</span>&nbsp;<span class="op" id="3349649">...</span><span class="op" id="3349652">*</span><span class="ident" id="3349653">ast</span><span class="op" id="3349656">.</span><span class="ident" id="3349657">File</span><span class="op" id="3349661">)</span>&nbsp;<span class="op" id="3349663">[</span><span class="op" id="3349664">]</span><span class="op" id="3349665">*</span><span class="ident" id="3349666">Example</span>&nbsp;<span class="op" id="3349674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3349677">var</span>&nbsp;<span class="ident" id="3349681">list</span>&nbsp;<span class="op" id="3349686">[</span><span class="op" id="3349687">]</span><span class="op" id="3349688">*</span><span class="ident" id="3349689">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3349698">for</span>&nbsp;<span class="ident" id="3349702">_</span><span class="op" id="3349703">,</span>&nbsp;<span class="ident" id="3349705">file</span>&nbsp;<span class="op" id="3349710">:=</span>&nbsp;<span class="keyword" id="3349713">range</span>&nbsp;<span class="ident" id="3349719">files</span>&nbsp;<span class="op" id="3349725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3349729">hasTests</span>&nbsp;<span class="op" id="3349738">:=</span>&nbsp;<span class="builtintype" id="3349741">false</span>&nbsp;<span class="comment" id="3349747">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3349786">numDecl</span>&nbsp;<span class="op" id="3349794">:=</span>&nbsp;<span class="num" id="3349797">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3349804">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3349855">var</span>&nbsp;<span class="ident" id="3349859">flist</span>&nbsp;<span class="op" id="3349865">[</span><span class="op" id="3349866">]</span><span class="op" id="3349867">*</span><span class="ident" id="3349868">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3349878">for</span>&nbsp;<span class="ident" id="3349882">_</span><span class="op" id="3349883">,</span>&nbsp;<span class="ident" id="3349885">decl</span>&nbsp;<span class="op" id="3349890">:=</span>&nbsp;<span class="keyword" id="3349893">range</span>&nbsp;<span class="ident" id="3349899">file</span><span class="op" id="3349903">.</span><span class="ident" id="3349904">Decls</span>&nbsp;<span class="op" id="3349910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3349915">if</span>&nbsp;<span class="ident" id="3349918">g</span><span class="op" id="3349919">,</span>&nbsp;<span class="ident" id="3349921">ok</span>&nbsp;<span class="op" id="3349924">:=</span>&nbsp;<span class="ident" id="3349927">decl</span><span class="op" id="3349931">.</span><span class="op" id="3349932">(</span><span class="op" id="3349933">*</span><span class="ident" id="3349934">ast</span><span class="op" id="3349937">.</span><span class="ident" id="3349938">GenDecl</span><span class="op" id="3349945">)</span><span class="op" id="3349946">;</span>&nbsp;<span class="ident" id="3349948">ok</span>&nbsp;<span class="op" id="3349951">&amp;&amp;</span>&nbsp;<span class="ident" id="3349954">g</span><span class="op" id="3349955">.</span><span class="ident" id="3349956">Tok</span>&nbsp;<span class="op" id="3349960">!=</span>&nbsp;<span class="ident" id="3349963">token</span><span class="op" id="3349968">.</span><span class="ident" id="3349969">IMPORT</span>&nbsp;<span class="op" id="3349976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3349982">numDecl</span><span class="op" id="3349989">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3349996">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350013">f</span><span class="op" id="3350014">,</span>&nbsp;<span class="ident" id="3350016">ok</span>&nbsp;<span class="op" id="3350019">:=</span>&nbsp;<span class="ident" id="3350022">decl</span><span class="op" id="3350026">.</span><span class="op" id="3350027">(</span><span class="op" id="3350028">*</span><span class="ident" id="3350029">ast</span><span class="op" id="3350032">.</span><span class="ident" id="3350033">FuncDecl</span><span class="op" id="3350041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350046">if</span>&nbsp;<span class="op" id="3350049">!</span><span class="ident" id="3350050">ok</span>&nbsp;<span class="op" id="3350053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350059">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350076">numDecl</span><span class="op" id="3350083">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350089">name</span>&nbsp;<span class="op" id="3350094">:=</span>&nbsp;<span class="ident" id="3350097">f</span><span class="op" id="3350098">.</span><span class="ident" id="3350099">Name</span><span class="op" id="3350103">.</span><span class="ident" id="3350104">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350112">if</span>&nbsp;<span class="ident" id="3350115">isTest</span><span class="op" id="3350121">(</span><span class="ident" id="3350122">name</span><span class="op" id="3350126">,</span>&nbsp;<span class="string" id="3350128">&#34;Test&#34;</span><span class="op" id="3350134">)</span>&nbsp;<span class="op" id="3350136">||</span>&nbsp;<span class="ident" id="3350139">isTest</span><span class="op" id="3350145">(</span><span class="ident" id="3350146">name</span><span class="op" id="3350150">,</span>&nbsp;<span class="string" id="3350152">&#34;Benchmark&#34;</span><span class="op" id="3350163">)</span>&nbsp;<span class="op" id="3350165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350171">hasTests</span>&nbsp;<span class="op" id="3350180">=</span>&nbsp;<span class="builtintype" id="3350182">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350191">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350208">if</span>&nbsp;<span class="op" id="3350211">!</span><span class="ident" id="3350212">isTest</span><span class="op" id="3350218">(</span><span class="ident" id="3350219">name</span><span class="op" id="3350223">,</span>&nbsp;<span class="string" id="3350225">&#34;Example&#34;</span><span class="op" id="3350234">)</span>&nbsp;<span class="op" id="3350236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350242">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350254">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350259">var</span>&nbsp;<span class="ident" id="3350263">doc</span>&nbsp;<span class="builtintype" id="3350267">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350277">if</span>&nbsp;<span class="ident" id="3350280">f</span><span class="op" id="3350281">.</span><span class="ident" id="3350282">Doc</span>&nbsp;<span class="op" id="3350286">!=</span>&nbsp;<span class="builtintype" id="3350289">nil</span>&nbsp;<span class="op" id="3350293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350299">doc</span>&nbsp;<span class="op" id="3350303">=</span>&nbsp;<span class="ident" id="3350305">f</span><span class="op" id="3350306">.</span><span class="ident" id="3350307">Doc</span><span class="op" id="3350310">.</span><span class="ident" id="3350311">Text</span><span class="op" id="3350315">(</span><span class="op" id="3350316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350326">output</span><span class="op" id="3350332">,</span>&nbsp;<span class="ident" id="3350334">hasOutput</span>&nbsp;<span class="op" id="3350344">:=</span>&nbsp;<span class="ident" id="3350347">exampleOutput</span><span class="op" id="3350360">(</span><span class="ident" id="3350361">f</span><span class="op" id="3350362">.</span><span class="ident" id="3350363">Body</span><span class="op" id="3350367">,</span>&nbsp;<span class="ident" id="3350369">file</span><span class="op" id="3350373">.</span><span class="ident" id="3350374">Comments</span><span class="op" id="3350382">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350387">flist</span>&nbsp;<span class="op" id="3350393">=</span>&nbsp;<span class="builtinfunc" id="3350395">append</span><span class="op" id="3350401">(</span><span class="ident" id="3350402">flist</span><span class="op" id="3350407">,</span>&nbsp;<span class="op" id="3350409">&amp;</span><span class="ident" id="3350410">Example</span><span class="op" id="3350417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350423">Name</span><span class="op" id="3350427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350436">name</span><span class="op" id="3350440">[</span><span class="builtinfunc" id="3350441">len</span><span class="op" id="3350444">(</span><span class="string" id="3350445">&#34;Example&#34;</span><span class="op" id="3350454">)</span><span class="op" id="3350455">:</span><span class="op" id="3350456">]</span><span class="op" id="3350457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350463">Doc</span><span class="op" id="3350466">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350476">doc</span><span class="op" id="3350479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350485">Code</span><span class="op" id="3350489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350498">f</span><span class="op" id="3350499">.</span><span class="ident" id="3350500">Body</span><span class="op" id="3350504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350510">Play</span><span class="op" id="3350514">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350523">playExample</span><span class="op" id="3350534">(</span><span class="ident" id="3350535">file</span><span class="op" id="3350539">,</span>&nbsp;<span class="ident" id="3350541">f</span><span class="op" id="3350542">.</span><span class="ident" id="3350543">Body</span><span class="op" id="3350547">)</span><span class="op" id="3350548">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350554">Comments</span><span class="op" id="3350562">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350567">file</span><span class="op" id="3350571">.</span><span class="ident" id="3350572">Comments</span><span class="op" id="3350580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350586">Output</span><span class="op" id="3350592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350599">output</span><span class="op" id="3350605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350611">EmptyOutput</span><span class="op" id="3350622">:</span>&nbsp;<span class="ident" id="3350624">output</span>&nbsp;<span class="op" id="3350631">==</span>&nbsp;<span class="string" id="3350634">&#34;&#34;</span>&nbsp;<span class="op" id="3350637">&amp;&amp;</span>&nbsp;<span class="ident" id="3350640">hasOutput</span><span class="op" id="3350649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350655">Order</span><span class="op" id="3350660">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3350668">len</span><span class="op" id="3350671">(</span><span class="ident" id="3350672">flist</span><span class="op" id="3350677">)</span><span class="op" id="3350678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350683">}</span><span class="op" id="3350684">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3350692">if</span>&nbsp;<span class="op" id="3350695">!</span><span class="ident" id="3350696">hasTests</span>&nbsp;<span class="op" id="3350705">&amp;&amp;</span>&nbsp;<span class="ident" id="3350708">numDecl</span>&nbsp;<span class="op" id="3350716">&gt;</span>&nbsp;<span class="num" id="3350718">1</span>&nbsp;<span class="op" id="3350720">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3350723">len</span><span class="op" id="3350726">(</span><span class="ident" id="3350727">flist</span><span class="op" id="3350732">)</span>&nbsp;<span class="op" id="3350734">==</span>&nbsp;<span class="num" id="3350737">1</span>&nbsp;<span class="op" id="3350739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3350744">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3350799">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3350851">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350904">flist</span><span class="op" id="3350909">[</span><span class="num" id="3350910">0</span><span class="op" id="3350911">]</span><span class="op" id="3350912">.</span><span class="ident" id="3350913">Code</span>&nbsp;<span class="op" id="3350918">=</span>&nbsp;<span class="ident" id="3350920">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350928">flist</span><span class="op" id="3350933">[</span><span class="num" id="3350934">0</span><span class="op" id="3350935">]</span><span class="op" id="3350936">.</span><span class="ident" id="3350937">Play</span>&nbsp;<span class="op" id="3350942">=</span>&nbsp;<span class="ident" id="3350944">playExampleFile</span><span class="op" id="3350959">(</span><span class="ident" id="3350960">file</span><span class="op" id="3350964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3350968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3350972">list</span>&nbsp;<span class="op" id="3350977">=</span>&nbsp;<span class="builtinfunc" id="3350979">append</span><span class="op" id="3350985">(</span><span class="ident" id="3350986">list</span><span class="op" id="3350990">,</span>&nbsp;<span class="ident" id="3350992">flist</span><span class="op" id="3350997">...</span><span class="op" id="3351000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3351003">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3351006">sort</span><span class="op" id="3351010">.</span><span class="ident" id="3351011">Sort</span><span class="op" id="3351015">(</span><span class="ident" id="3351016">exampleByName</span><span class="op" id="3351029">(</span><span class="ident" id="3351030">list</span><span class="op" id="3351034">)</span><span class="op" id="3351035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351038">return</span>&nbsp;<span class="ident" id="3351045">list</span><br>
<span class="lineno"></span><span class="op" id="3351050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3351053">var</span>&nbsp;<span class="ident" id="3351057">outputPrefix</span>&nbsp;<span class="op" id="3351070">=</span>&nbsp;<span class="ident" id="3351072">regexp</span><span class="op" id="3351078">.</span><span class="ident" id="3351079">MustCompile</span><span class="op" id="3351090">(</span><span class="string" id="3351091">`(?i)^[[:space:]]*output:`</span><span class="op" id="3351117">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3351120">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="3351197">func</span>&nbsp;<span class="ident" id="3351202">exampleOutput</span><span class="op" id="3351215">(</span><span class="ident" id="3351216">b</span>&nbsp;<span class="op" id="3351218">*</span><span class="ident" id="3351219">ast</span><span class="op" id="3351222">.</span><span class="ident" id="3351223">BlockStmt</span><span class="op" id="3351232">,</span>&nbsp;<span class="ident" id="3351234">comments</span>&nbsp;<span class="op" id="3351243">[</span><span class="op" id="3351244">]</span><span class="op" id="3351245">*</span><span class="ident" id="3351246">ast</span><span class="op" id="3351249">.</span><span class="ident" id="3351250">CommentGroup</span><span class="op" id="3351262">)</span>&nbsp;<span class="op" id="3351264">(</span><span class="ident" id="3351265">output</span>&nbsp;<span class="builtintype" id="3351272">string</span><span class="op" id="3351278">,</span>&nbsp;<span class="ident" id="3351280">ok</span>&nbsp;<span class="builtintype" id="3351283">bool</span><span class="op" id="3351287">)</span>&nbsp;<span class="op" id="3351289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351292">if</span>&nbsp;<span class="ident" id="3351295">_</span><span class="op" id="3351296">,</span>&nbsp;<span class="ident" id="3351298">last</span>&nbsp;<span class="op" id="3351303">:=</span>&nbsp;<span class="ident" id="3351306">lastComment</span><span class="op" id="3351317">(</span><span class="ident" id="3351318">b</span><span class="op" id="3351319">,</span>&nbsp;<span class="ident" id="3351321">comments</span><span class="op" id="3351329">)</span><span class="op" id="3351330">;</span>&nbsp;<span class="ident" id="3351332">last</span>&nbsp;<span class="op" id="3351337">!=</span>&nbsp;<span class="builtintype" id="3351340">nil</span>&nbsp;<span class="op" id="3351344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3351348">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3351397">text</span>&nbsp;<span class="op" id="3351402">:=</span>&nbsp;<span class="ident" id="3351405">last</span><span class="op" id="3351409">.</span><span class="ident" id="3351410">Text</span><span class="op" id="3351414">(</span><span class="op" id="3351415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351419">if</span>&nbsp;<span class="ident" id="3351422">loc</span>&nbsp;<span class="op" id="3351426">:=</span>&nbsp;<span class="ident" id="3351429">outputPrefix</span><span class="op" id="3351441">.</span><span class="ident" id="3351442">FindStringIndex</span><span class="op" id="3351457">(</span><span class="ident" id="3351458">text</span><span class="op" id="3351462">)</span><span class="op" id="3351463">;</span>&nbsp;<span class="ident" id="3351465">loc</span>&nbsp;<span class="op" id="3351469">!=</span>&nbsp;<span class="builtintype" id="3351472">nil</span>&nbsp;<span class="op" id="3351476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3351481">text</span>&nbsp;<span class="op" id="3351486">=</span>&nbsp;<span class="ident" id="3351488">text</span><span class="op" id="3351492">[</span><span class="ident" id="3351493">loc</span><span class="op" id="3351496">[</span><span class="num" id="3351497">1</span><span class="op" id="3351498">]</span><span class="op" id="3351499">:</span><span class="op" id="3351500">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3351505">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3351571">text</span>&nbsp;<span class="op" id="3351576">=</span>&nbsp;<span class="ident" id="3351578">strings</span><span class="op" id="3351585">.</span><span class="ident" id="3351586">TrimLeft</span><span class="op" id="3351594">(</span><span class="ident" id="3351595">text</span><span class="op" id="3351599">,</span>&nbsp;<span class="string" id="3351601">&#34;&nbsp;&#34;</span><span class="op" id="3351604">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351609">if</span>&nbsp;<span class="builtinfunc" id="3351612">len</span><span class="op" id="3351615">(</span><span class="ident" id="3351616">text</span><span class="op" id="3351620">)</span>&nbsp;<span class="op" id="3351622">&gt;</span>&nbsp;<span class="num" id="3351624">0</span>&nbsp;<span class="op" id="3351626">&amp;&amp;</span>&nbsp;<span class="ident" id="3351629">text</span><span class="op" id="3351633">[</span><span class="num" id="3351634">0</span><span class="op" id="3351635">]</span>&nbsp;<span class="op" id="3351637">==</span>&nbsp;<span class="string" id="3351640">&#39;\n&#39;</span>&nbsp;<span class="op" id="3351645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3351651">text</span>&nbsp;<span class="op" id="3351656">=</span>&nbsp;<span class="ident" id="3351658">text</span><span class="op" id="3351662">[</span><span class="num" id="3351663">1</span><span class="op" id="3351664">:</span><span class="op" id="3351665">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3351670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351675">return</span>&nbsp;<span class="ident" id="3351682">text</span><span class="op" id="3351686">,</span>&nbsp;<span class="builtintype" id="3351688">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3351695">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3351698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351701">return</span>&nbsp;<span class="string" id="3351708">&#34;&#34;</span><span class="op" id="3351710">,</span>&nbsp;<span class="builtintype" id="3351712">false</span>&nbsp;<span class="comment" id="3351718">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="3351747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3351750">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="3351821">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3351892">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="3351941">func</span>&nbsp;<span class="ident" id="3351946">isTest</span><span class="op" id="3351952">(</span><span class="ident" id="3351953">name</span><span class="op" id="3351957">,</span>&nbsp;<span class="ident" id="3351959">prefix</span>&nbsp;<span class="builtintype" id="3351966">string</span><span class="op" id="3351972">)</span>&nbsp;<span class="builtintype" id="3351974">bool</span>&nbsp;<span class="op" id="3351979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3351982">if</span>&nbsp;<span class="op" id="3351985">!</span><span class="ident" id="3351986">strings</span><span class="op" id="3351993">.</span><span class="ident" id="3351994">HasPrefix</span><span class="op" id="3352003">(</span><span class="ident" id="3352004">name</span><span class="op" id="3352008">,</span>&nbsp;<span class="ident" id="3352010">prefix</span><span class="op" id="3352016">)</span>&nbsp;<span class="op" id="3352018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352022">return</span>&nbsp;<span class="builtintype" id="3352029">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3352036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352039">if</span>&nbsp;<span class="builtinfunc" id="3352042">len</span><span class="op" id="3352045">(</span><span class="ident" id="3352046">name</span><span class="op" id="3352050">)</span>&nbsp;<span class="op" id="3352052">==</span>&nbsp;<span class="builtinfunc" id="3352055">len</span><span class="op" id="3352058">(</span><span class="ident" id="3352059">prefix</span><span class="op" id="3352065">)</span>&nbsp;<span class="op" id="3352067">{</span>&nbsp;<span class="comment" id="3352069">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352087">return</span>&nbsp;<span class="builtintype" id="3352094">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3352100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3352103">rune</span><span class="op" id="3352107">,</span>&nbsp;<span class="ident" id="3352109">_</span>&nbsp;<span class="op" id="3352111">:=</span>&nbsp;<span class="ident" id="3352114">utf8</span><span class="op" id="3352118">.</span><span class="ident" id="3352119">DecodeRuneInString</span><span class="op" id="3352137">(</span><span class="ident" id="3352138">name</span><span class="op" id="3352142">[</span><span class="builtinfunc" id="3352143">len</span><span class="op" id="3352146">(</span><span class="ident" id="3352147">prefix</span><span class="op" id="3352153">)</span><span class="op" id="3352154">:</span><span class="op" id="3352155">]</span><span class="op" id="3352156">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352159">return</span>&nbsp;<span class="op" id="3352166">!</span><span class="ident" id="3352167">unicode</span><span class="op" id="3352174">.</span><span class="ident" id="3352175">IsLower</span><span class="op" id="3352182">(</span><span class="builtintype" id="3352183">rune</span><span class="op" id="3352187">)</span><br>
<span class="lineno"></span><span class="op" id="3352189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3352192">type</span>&nbsp;<span class="ident" id="3352197">exampleByName</span>&nbsp;<span class="op" id="3352211">[</span><span class="op" id="3352212">]</span><span class="op" id="3352213">*</span><span class="ident" id="3352214">Example</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="3352223">func</span>&nbsp;<span class="op" id="3352228">(</span><span class="ident" id="3352229">s</span>&nbsp;<span class="ident" id="3352231">exampleByName</span><span class="op" id="3352244">)</span>&nbsp;<span class="ident" id="3352246">Len</span><span class="op" id="3352249">(</span><span class="op" id="3352250">)</span>&nbsp;<span class="builtintype" id="3352252">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3352266">{</span>&nbsp;<span class="keyword" id="3352268">return</span>&nbsp;<span class="builtinfunc" id="3352275">len</span><span class="op" id="3352278">(</span><span class="ident" id="3352279">s</span><span class="op" id="3352280">)</span>&nbsp;<span class="op" id="3352282">}</span><br>
<span class="lineno"></span><span class="keyword" id="3352284">func</span>&nbsp;<span class="op" id="3352289">(</span><span class="ident" id="3352290">s</span>&nbsp;<span class="ident" id="3352292">exampleByName</span><span class="op" id="3352305">)</span>&nbsp;<span class="ident" id="3352307">Swap</span><span class="op" id="3352311">(</span><span class="ident" id="3352312">i</span><span class="op" id="3352313">,</span>&nbsp;<span class="ident" id="3352315">j</span>&nbsp;<span class="builtintype" id="3352317">int</span><span class="op" id="3352320">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3352327">{</span>&nbsp;<span class="ident" id="3352329">s</span><span class="op" id="3352330">[</span><span class="ident" id="3352331">i</span><span class="op" id="3352332">]</span><span class="op" id="3352333">,</span>&nbsp;<span class="ident" id="3352335">s</span><span class="op" id="3352336">[</span><span class="ident" id="3352337">j</span><span class="op" id="3352338">]</span>&nbsp;<span class="op" id="3352340">=</span>&nbsp;<span class="ident" id="3352342">s</span><span class="op" id="3352343">[</span><span class="ident" id="3352344">j</span><span class="op" id="3352345">]</span><span class="op" id="3352346">,</span>&nbsp;<span class="ident" id="3352348">s</span><span class="op" id="3352349">[</span><span class="ident" id="3352350">i</span><span class="op" id="3352351">]</span>&nbsp;<span class="op" id="3352353">}</span><br>
<span class="lineno"></span><span class="keyword" id="3352355">func</span>&nbsp;<span class="op" id="3352360">(</span><span class="ident" id="3352361">s</span>&nbsp;<span class="ident" id="3352363">exampleByName</span><span class="op" id="3352376">)</span>&nbsp;<span class="ident" id="3352378">Less</span><span class="op" id="3352382">(</span><span class="ident" id="3352383">i</span><span class="op" id="3352384">,</span>&nbsp;<span class="ident" id="3352386">j</span>&nbsp;<span class="builtintype" id="3352388">int</span><span class="op" id="3352391">)</span>&nbsp;<span class="builtintype" id="3352393">bool</span>&nbsp;<span class="op" id="3352398">{</span>&nbsp;<span class="keyword" id="3352400">return</span>&nbsp;<span class="ident" id="3352407">s</span><span class="op" id="3352408">[</span><span class="ident" id="3352409">i</span><span class="op" id="3352410">]</span><span class="op" id="3352411">.</span><span class="ident" id="3352412">Name</span>&nbsp;<span class="op" id="3352417">&lt;</span>&nbsp;<span class="ident" id="3352419">s</span><span class="op" id="3352420">[</span><span class="ident" id="3352421">j</span><span class="op" id="3352422">]</span><span class="op" id="3352423">.</span><span class="ident" id="3352424">Name</span>&nbsp;<span class="op" id="3352429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3352432">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="3352497">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="3352558">func</span>&nbsp;<span class="ident" id="3352563">playExample</span><span class="op" id="3352574">(</span><span class="ident" id="3352575">file</span>&nbsp;<span class="op" id="3352580">*</span><span class="ident" id="3352581">ast</span><span class="op" id="3352584">.</span><span class="ident" id="3352585">File</span><span class="op" id="3352589">,</span>&nbsp;<span class="ident" id="3352591">body</span>&nbsp;<span class="op" id="3352596">*</span><span class="ident" id="3352597">ast</span><span class="op" id="3352600">.</span><span class="ident" id="3352601">BlockStmt</span><span class="op" id="3352610">)</span>&nbsp;<span class="op" id="3352612">*</span><span class="ident" id="3352613">ast</span><span class="op" id="3352616">.</span><span class="ident" id="3352617">File</span>&nbsp;<span class="op" id="3352622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352625">if</span>&nbsp;<span class="op" id="3352628">!</span><span class="ident" id="3352629">strings</span><span class="op" id="3352636">.</span><span class="ident" id="3352637">HasSuffix</span><span class="op" id="3352646">(</span><span class="ident" id="3352647">file</span><span class="op" id="3352651">.</span><span class="ident" id="3352652">Name</span><span class="op" id="3352656">.</span><span class="ident" id="3352657">Name</span><span class="op" id="3352661">,</span>&nbsp;<span class="string" id="3352663">&#34;_test&#34;</span><span class="op" id="3352670">)</span>&nbsp;<span class="op" id="3352672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3352676">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3352728">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352756">return</span>&nbsp;<span class="builtintype" id="3352763">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3352768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3352772">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3352817">topDecls</span>&nbsp;<span class="op" id="3352826">:=</span>&nbsp;<span class="builtinfunc" id="3352829">make</span><span class="op" id="3352833">(</span><span class="keyword" id="3352834">map</span><span class="op" id="3352837">[</span><span class="op" id="3352838">*</span><span class="ident" id="3352839">ast</span><span class="op" id="3352842">.</span><span class="ident" id="3352843">Object</span><span class="op" id="3352849">]</span><span class="builtintype" id="3352850">bool</span><span class="op" id="3352854">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352857">for</span>&nbsp;<span class="ident" id="3352861">_</span><span class="op" id="3352862">,</span>&nbsp;<span class="ident" id="3352864">decl</span>&nbsp;<span class="op" id="3352869">:=</span>&nbsp;<span class="keyword" id="3352872">range</span>&nbsp;<span class="ident" id="3352878">file</span><span class="op" id="3352882">.</span><span class="ident" id="3352883">Decls</span>&nbsp;<span class="op" id="3352889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352893">switch</span>&nbsp;<span class="ident" id="3352900">d</span>&nbsp;<span class="op" id="3352902">:=</span>&nbsp;<span class="ident" id="3352905">decl</span><span class="op" id="3352909">.</span><span class="op" id="3352910">(</span><span class="keyword" id="3352911">type</span><span class="op" id="3352915">)</span>&nbsp;<span class="op" id="3352917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352921">case</span>&nbsp;<span class="op" id="3352926">*</span><span class="ident" id="3352927">ast</span><span class="op" id="3352930">.</span><span class="ident" id="3352931">FuncDecl</span><span class="op" id="3352939">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3352944">topDecls</span><span class="op" id="3352952">[</span><span class="ident" id="3352953">d</span><span class="op" id="3352954">.</span><span class="ident" id="3352955">Name</span><span class="op" id="3352959">.</span><span class="ident" id="3352960">Obj</span><span class="op" id="3352963">]</span>&nbsp;<span class="op" id="3352965">=</span>&nbsp;<span class="builtintype" id="3352967">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352974">case</span>&nbsp;<span class="op" id="3352979">*</span><span class="ident" id="3352980">ast</span><span class="op" id="3352983">.</span><span class="ident" id="3352984">GenDecl</span><span class="op" id="3352991">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3352996">for</span>&nbsp;<span class="ident" id="3353000">_</span><span class="op" id="3353001">,</span>&nbsp;<span class="ident" id="3353003">spec</span>&nbsp;<span class="op" id="3353008">:=</span>&nbsp;<span class="keyword" id="3353011">range</span>&nbsp;<span class="ident" id="3353017">d</span><span class="op" id="3353018">.</span><span class="ident" id="3353019">Specs</span>&nbsp;<span class="op" id="3353025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353031">switch</span>&nbsp;<span class="ident" id="3353038">s</span>&nbsp;<span class="op" id="3353040">:=</span>&nbsp;<span class="ident" id="3353043">spec</span><span class="op" id="3353047">.</span><span class="op" id="3353048">(</span><span class="keyword" id="3353049">type</span><span class="op" id="3353053">)</span>&nbsp;<span class="op" id="3353055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353061">case</span>&nbsp;<span class="op" id="3353066">*</span><span class="ident" id="3353067">ast</span><span class="op" id="3353070">.</span><span class="ident" id="3353071">TypeSpec</span><span class="op" id="3353079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353086">topDecls</span><span class="op" id="3353094">[</span><span class="ident" id="3353095">s</span><span class="op" id="3353096">.</span><span class="ident" id="3353097">Name</span><span class="op" id="3353101">.</span><span class="ident" id="3353102">Obj</span><span class="op" id="3353105">]</span>&nbsp;<span class="op" id="3353107">=</span>&nbsp;<span class="builtintype" id="3353109">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353118">case</span>&nbsp;<span class="op" id="3353123">*</span><span class="ident" id="3353124">ast</span><span class="op" id="3353127">.</span><span class="ident" id="3353128">ValueSpec</span><span class="op" id="3353137">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353144">for</span>&nbsp;<span class="ident" id="3353148">_</span><span class="op" id="3353149">,</span>&nbsp;<span class="ident" id="3353151">id</span>&nbsp;<span class="op" id="3353154">:=</span>&nbsp;<span class="keyword" id="3353157">range</span>&nbsp;<span class="ident" id="3353163">s</span><span class="op" id="3353164">.</span><span class="ident" id="3353165">Names</span>&nbsp;<span class="op" id="3353171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353179">topDecls</span><span class="op" id="3353187">[</span><span class="ident" id="3353188">id</span><span class="op" id="3353190">.</span><span class="ident" id="3353191">Obj</span><span class="op" id="3353194">]</span>&nbsp;<span class="op" id="3353196">=</span>&nbsp;<span class="builtintype" id="3353198">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353219">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353230">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353298">unresolved</span>&nbsp;<span class="op" id="3353309">:=</span>&nbsp;<span class="builtinfunc" id="3353312">make</span><span class="op" id="3353316">(</span><span class="keyword" id="3353317">map</span><span class="op" id="3353320">[</span><span class="builtintype" id="3353321">string</span><span class="op" id="3353327">]</span><span class="builtintype" id="3353328">bool</span><span class="op" id="3353332">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353335">usesTopDecl</span>&nbsp;<span class="op" id="3353347">:=</span>&nbsp;<span class="builtintype" id="3353350">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353357">var</span>&nbsp;<span class="ident" id="3353361">inspectFunc</span>&nbsp;<span class="keyword" id="3353373">func</span><span class="op" id="3353377">(</span><span class="ident" id="3353378">ast</span><span class="op" id="3353381">.</span><span class="ident" id="3353382">Node</span><span class="op" id="3353386">)</span>&nbsp;<span class="builtintype" id="3353388">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353394">inspectFunc</span>&nbsp;<span class="op" id="3353406">=</span>&nbsp;<span class="keyword" id="3353408">func</span><span class="op" id="3353412">(</span><span class="ident" id="3353413">n</span>&nbsp;<span class="ident" id="3353415">ast</span><span class="op" id="3353418">.</span><span class="ident" id="3353419">Node</span><span class="op" id="3353423">)</span>&nbsp;<span class="builtintype" id="3353425">bool</span>&nbsp;<span class="op" id="3353430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353434">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353498">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353562">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353608">if</span>&nbsp;<span class="ident" id="3353611">e</span><span class="op" id="3353612">,</span>&nbsp;<span class="ident" id="3353614">ok</span>&nbsp;<span class="op" id="3353617">:=</span>&nbsp;<span class="ident" id="3353620">n</span><span class="op" id="3353621">.</span><span class="op" id="3353622">(</span><span class="op" id="3353623">*</span><span class="ident" id="3353624">ast</span><span class="op" id="3353627">.</span><span class="ident" id="3353628">SelectorExpr</span><span class="op" id="3353640">)</span><span class="op" id="3353641">;</span>&nbsp;<span class="ident" id="3353643">ok</span>&nbsp;<span class="op" id="3353646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353651">ast</span><span class="op" id="3353654">.</span><span class="ident" id="3353655">Inspect</span><span class="op" id="3353662">(</span><span class="ident" id="3353663">e</span><span class="op" id="3353664">.</span><span class="ident" id="3353665">X</span><span class="op" id="3353666">,</span>&nbsp;<span class="ident" id="3353668">inspectFunc</span><span class="op" id="3353679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353684">return</span>&nbsp;<span class="builtintype" id="3353691">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353699">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353703">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353758">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3353812">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353836">if</span>&nbsp;<span class="ident" id="3353839">e</span><span class="op" id="3353840">,</span>&nbsp;<span class="ident" id="3353842">ok</span>&nbsp;<span class="op" id="3353845">:=</span>&nbsp;<span class="ident" id="3353848">n</span><span class="op" id="3353849">.</span><span class="op" id="3353850">(</span><span class="op" id="3353851">*</span><span class="ident" id="3353852">ast</span><span class="op" id="3353855">.</span><span class="ident" id="3353856">KeyValueExpr</span><span class="op" id="3353868">)</span><span class="op" id="3353869">;</span>&nbsp;<span class="ident" id="3353871">ok</span>&nbsp;<span class="op" id="3353874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353879">ast</span><span class="op" id="3353882">.</span><span class="ident" id="3353883">Inspect</span><span class="op" id="3353890">(</span><span class="ident" id="3353891">e</span><span class="op" id="3353892">.</span><span class="ident" id="3353893">Value</span><span class="op" id="3353898">,</span>&nbsp;<span class="ident" id="3353900">inspectFunc</span><span class="op" id="3353911">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353916">return</span>&nbsp;<span class="builtintype" id="3353923">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3353931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353935">if</span>&nbsp;<span class="ident" id="3353938">id</span><span class="op" id="3353940">,</span>&nbsp;<span class="ident" id="3353942">ok</span>&nbsp;<span class="op" id="3353945">:=</span>&nbsp;<span class="ident" id="3353948">n</span><span class="op" id="3353949">.</span><span class="op" id="3353950">(</span><span class="op" id="3353951">*</span><span class="ident" id="3353952">ast</span><span class="op" id="3353955">.</span><span class="ident" id="3353956">Ident</span><span class="op" id="3353961">)</span><span class="op" id="3353962">;</span>&nbsp;<span class="ident" id="3353964">ok</span>&nbsp;<span class="op" id="3353967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3353972">if</span>&nbsp;<span class="ident" id="3353975">id</span><span class="op" id="3353977">.</span><span class="ident" id="3353978">Obj</span>&nbsp;<span class="op" id="3353982">==</span>&nbsp;<span class="builtintype" id="3353985">nil</span>&nbsp;<span class="op" id="3353989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3353995">unresolved</span><span class="op" id="3354005">[</span><span class="ident" id="3354006">id</span><span class="op" id="3354008">.</span><span class="ident" id="3354009">Name</span><span class="op" id="3354013">]</span>&nbsp;<span class="op" id="3354015">=</span>&nbsp;<span class="builtintype" id="3354017">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354025">}</span>&nbsp;<span class="keyword" id="3354027">else</span>&nbsp;<span class="keyword" id="3354032">if</span>&nbsp;<span class="ident" id="3354035">topDecls</span><span class="op" id="3354043">[</span><span class="ident" id="3354044">id</span><span class="op" id="3354046">.</span><span class="ident" id="3354047">Obj</span><span class="op" id="3354050">]</span>&nbsp;<span class="op" id="3354052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354058">usesTopDecl</span>&nbsp;<span class="op" id="3354070">=</span>&nbsp;<span class="builtintype" id="3354072">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354088">return</span>&nbsp;<span class="builtintype" id="3354095">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354104">ast</span><span class="op" id="3354107">.</span><span class="ident" id="3354108">Inspect</span><span class="op" id="3354115">(</span><span class="ident" id="3354116">body</span><span class="op" id="3354120">,</span>&nbsp;<span class="ident" id="3354122">inspectFunc</span><span class="op" id="3354133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354136">if</span>&nbsp;<span class="ident" id="3354139">usesTopDecl</span>&nbsp;<span class="op" id="3354151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3354155">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354221">return</span>&nbsp;<span class="builtintype" id="3354228">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3354237">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354294">for</span>&nbsp;<span class="ident" id="3354298">n</span>&nbsp;<span class="op" id="3354300">:=</span>&nbsp;<span class="keyword" id="3354303">range</span>&nbsp;<span class="ident" id="3354309">unresolved</span>&nbsp;<span class="op" id="3354320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354324">if</span>&nbsp;<span class="ident" id="3354327">predeclaredTypes</span><span class="op" id="3354343">[</span><span class="ident" id="3354344">n</span><span class="op" id="3354345">]</span>&nbsp;<span class="op" id="3354347">||</span>&nbsp;<span class="ident" id="3354350">predeclaredConstants</span><span class="op" id="3354370">[</span><span class="ident" id="3354371">n</span><span class="op" id="3354372">]</span>&nbsp;<span class="op" id="3354374">||</span>&nbsp;<span class="ident" id="3354377">predeclaredFuncs</span><span class="op" id="3354393">[</span><span class="ident" id="3354394">n</span><span class="op" id="3354395">]</span>&nbsp;<span class="op" id="3354397">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3354402">delete</span><span class="op" id="3354408">(</span><span class="ident" id="3354409">unresolved</span><span class="op" id="3354419">,</span>&nbsp;<span class="ident" id="3354421">n</span><span class="op" id="3354422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3354433">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3354502">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3354569">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354645">namedImports</span>&nbsp;<span class="op" id="3354658">:=</span>&nbsp;<span class="builtinfunc" id="3354661">make</span><span class="op" id="3354665">(</span><span class="keyword" id="3354666">map</span><span class="op" id="3354669">[</span><span class="builtintype" id="3354670">string</span><span class="op" id="3354676">]</span><span class="builtintype" id="3354677">string</span><span class="op" id="3354683">)</span>&nbsp;<span class="comment" id="3354685">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354700">var</span>&nbsp;<span class="ident" id="3354704">blankImports</span>&nbsp;<span class="op" id="3354717">[</span><span class="op" id="3354718">]</span><span class="ident" id="3354719">ast</span><span class="op" id="3354722">.</span><span class="ident" id="3354723">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3354740">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354754">for</span>&nbsp;<span class="ident" id="3354758">_</span><span class="op" id="3354759">,</span>&nbsp;<span class="ident" id="3354761">s</span>&nbsp;<span class="op" id="3354763">:=</span>&nbsp;<span class="keyword" id="3354766">range</span>&nbsp;<span class="ident" id="3354772">file</span><span class="op" id="3354776">.</span><span class="ident" id="3354777">Imports</span>&nbsp;<span class="op" id="3354785">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354789">p</span><span class="op" id="3354790">,</span>&nbsp;<span class="ident" id="3354792">err</span>&nbsp;<span class="op" id="3354796">:=</span>&nbsp;<span class="ident" id="3354799">strconv</span><span class="op" id="3354806">.</span><span class="ident" id="3354807">Unquote</span><span class="op" id="3354814">(</span><span class="ident" id="3354815">s</span><span class="op" id="3354816">.</span><span class="ident" id="3354817">Path</span><span class="op" id="3354821">.</span><span class="ident" id="3354822">Value</span><span class="op" id="3354827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354831">if</span>&nbsp;<span class="ident" id="3354834">err</span>&nbsp;<span class="op" id="3354838">!=</span>&nbsp;<span class="builtintype" id="3354841">nil</span>&nbsp;<span class="op" id="3354845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354850">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3354861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354865">n</span>&nbsp;<span class="op" id="3354867">:=</span>&nbsp;<span class="ident" id="3354870">path</span><span class="op" id="3354874">.</span><span class="ident" id="3354875">Base</span><span class="op" id="3354879">(</span><span class="ident" id="3354880">p</span><span class="op" id="3354881">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354885">if</span>&nbsp;<span class="ident" id="3354888">s</span><span class="op" id="3354889">.</span><span class="ident" id="3354890">Name</span>&nbsp;<span class="op" id="3354895">!=</span>&nbsp;<span class="builtintype" id="3354898">nil</span>&nbsp;<span class="op" id="3354902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354907">n</span>&nbsp;<span class="op" id="3354909">=</span>&nbsp;<span class="ident" id="3354911">s</span><span class="op" id="3354912">.</span><span class="ident" id="3354913">Name</span><span class="op" id="3354917">.</span><span class="ident" id="3354918">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354926">switch</span>&nbsp;<span class="ident" id="3354933">n</span>&nbsp;<span class="op" id="3354935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354940">case</span>&nbsp;<span class="string" id="3354945">&#34;_&#34;</span><span class="op" id="3354948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3354954">blankImports</span>&nbsp;<span class="op" id="3354967">=</span>&nbsp;<span class="builtinfunc" id="3354969">append</span><span class="op" id="3354975">(</span><span class="ident" id="3354976">blankImports</span><span class="op" id="3354988">,</span>&nbsp;<span class="ident" id="3354990">s</span><span class="op" id="3354991">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3354997">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355009">case</span>&nbsp;<span class="string" id="3355014">&#34;.&#34;</span><span class="op" id="3355017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355023">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355066">return</span>&nbsp;<span class="builtintype" id="3355073">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355080">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355088">if</span>&nbsp;<span class="ident" id="3355091">unresolved</span><span class="op" id="3355101">[</span><span class="ident" id="3355102">n</span><span class="op" id="3355103">]</span>&nbsp;<span class="op" id="3355105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355110">namedImports</span><span class="op" id="3355122">[</span><span class="ident" id="3355123">n</span><span class="op" id="3355124">]</span>&nbsp;<span class="op" id="3355126">=</span>&nbsp;<span class="ident" id="3355128">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3355133">delete</span><span class="op" id="3355139">(</span><span class="ident" id="3355140">unresolved</span><span class="op" id="3355150">,</span>&nbsp;<span class="ident" id="3355152">n</span><span class="op" id="3355153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355157">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355164">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355232">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355276">if</span>&nbsp;<span class="builtinfunc" id="3355279">len</span><span class="op" id="3355282">(</span><span class="ident" id="3355283">unresolved</span><span class="op" id="3355293">)</span>&nbsp;<span class="op" id="3355295">&gt;</span>&nbsp;<span class="num" id="3355297">0</span>&nbsp;<span class="op" id="3355299">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355303">return</span>&nbsp;<span class="builtintype" id="3355310">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355319">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355373">var</span>&nbsp;<span class="ident" id="3355377">comments</span>&nbsp;<span class="op" id="3355386">[</span><span class="op" id="3355387">]</span><span class="op" id="3355388">*</span><span class="ident" id="3355389">ast</span><span class="op" id="3355392">.</span><span class="ident" id="3355393">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355407">for</span>&nbsp;<span class="ident" id="3355411">_</span><span class="op" id="3355412">,</span>&nbsp;<span class="ident" id="3355414">s</span>&nbsp;<span class="op" id="3355416">:=</span>&nbsp;<span class="keyword" id="3355419">range</span>&nbsp;<span class="ident" id="3355425">blankImports</span>&nbsp;<span class="op" id="3355438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355442">if</span>&nbsp;<span class="ident" id="3355445">c</span>&nbsp;<span class="op" id="3355447">:=</span>&nbsp;<span class="ident" id="3355450">s</span><span class="op" id="3355451">.</span><span class="op" id="3355452">(</span><span class="op" id="3355453">*</span><span class="ident" id="3355454">ast</span><span class="op" id="3355457">.</span><span class="ident" id="3355458">ImportSpec</span><span class="op" id="3355468">)</span><span class="op" id="3355469">.</span><span class="ident" id="3355470">Doc</span><span class="op" id="3355473">;</span>&nbsp;<span class="ident" id="3355475">c</span>&nbsp;<span class="op" id="3355477">!=</span>&nbsp;<span class="builtintype" id="3355480">nil</span>&nbsp;<span class="op" id="3355484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355489">comments</span>&nbsp;<span class="op" id="3355498">=</span>&nbsp;<span class="builtinfunc" id="3355500">append</span><span class="op" id="3355506">(</span><span class="ident" id="3355507">comments</span><span class="op" id="3355515">,</span>&nbsp;<span class="ident" id="3355517">c</span><span class="op" id="3355518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355525">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355529">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355585">for</span>&nbsp;<span class="ident" id="3355589">_</span><span class="op" id="3355590">,</span>&nbsp;<span class="ident" id="3355592">c</span>&nbsp;<span class="op" id="3355594">:=</span>&nbsp;<span class="keyword" id="3355597">range</span>&nbsp;<span class="ident" id="3355603">file</span><span class="op" id="3355607">.</span><span class="ident" id="3355608">Comments</span>&nbsp;<span class="op" id="3355617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3355621">if</span>&nbsp;<span class="ident" id="3355624">body</span><span class="op" id="3355628">.</span><span class="ident" id="3355629">Pos</span><span class="op" id="3355632">(</span><span class="op" id="3355633">)</span>&nbsp;<span class="op" id="3355635">&lt;=</span>&nbsp;<span class="ident" id="3355638">c</span><span class="op" id="3355639">.</span><span class="ident" id="3355640">Pos</span><span class="op" id="3355643">(</span><span class="op" id="3355644">)</span>&nbsp;<span class="op" id="3355646">&amp;&amp;</span>&nbsp;<span class="ident" id="3355649">c</span><span class="op" id="3355650">.</span><span class="ident" id="3355651">End</span><span class="op" id="3355654">(</span><span class="op" id="3355655">)</span>&nbsp;<span class="op" id="3355657">&lt;=</span>&nbsp;<span class="ident" id="3355660">body</span><span class="op" id="3355664">.</span><span class="ident" id="3355665">End</span><span class="op" id="3355668">(</span><span class="op" id="3355669">)</span>&nbsp;<span class="op" id="3355671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355676">comments</span>&nbsp;<span class="op" id="3355685">=</span>&nbsp;<span class="builtinfunc" id="3355687">append</span><span class="op" id="3355693">(</span><span class="ident" id="3355694">comments</span><span class="op" id="3355702">,</span>&nbsp;<span class="ident" id="3355704">c</span><span class="op" id="3355705">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3355712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355716">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355774">body</span><span class="op" id="3355778">,</span>&nbsp;<span class="ident" id="3355780">comments</span>&nbsp;<span class="op" id="3355789">=</span>&nbsp;<span class="ident" id="3355791">stripOutputComment</span><span class="op" id="3355809">(</span><span class="ident" id="3355810">body</span><span class="op" id="3355814">,</span>&nbsp;<span class="ident" id="3355816">comments</span><span class="op" id="3355824">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3355828">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355863">importDecl</span>&nbsp;<span class="op" id="3355874">:=</span>&nbsp;<span class="op" id="3355877">&amp;</span><span class="ident" id="3355878">ast</span><span class="op" id="3355881">.</span><span class="ident" id="3355882">GenDecl</span><span class="op" id="3355889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355893">Tok</span><span class="op" id="3355896">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355901">token</span><span class="op" id="3355906">.</span><span class="ident" id="3355907">IMPORT</span><span class="op" id="3355913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355917">Lparen</span><span class="op" id="3355923">:</span>&nbsp;<span class="num" id="3355925">1</span><span class="op" id="3355926">,</span>&nbsp;<span class="comment" id="3355928">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3355981">Rparen</span><span class="op" id="3355987">:</span>&nbsp;<span class="num" id="3355989">1</span><span class="op" id="3355990">,</span>&nbsp;<span class="comment" id="3355992">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3356030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3356033">for</span>&nbsp;<span class="ident" id="3356037">n</span><span class="op" id="3356038">,</span>&nbsp;<span class="ident" id="3356040">p</span>&nbsp;<span class="op" id="3356042">:=</span>&nbsp;<span class="keyword" id="3356045">range</span>&nbsp;<span class="ident" id="3356051">namedImports</span>&nbsp;<span class="op" id="3356064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356068">s</span>&nbsp;<span class="op" id="3356070">:=</span>&nbsp;<span class="op" id="3356073">&amp;</span><span class="ident" id="3356074">ast</span><span class="op" id="3356077">.</span><span class="ident" id="3356078">ImportSpec</span><span class="op" id="3356088">{</span><span class="ident" id="3356089">Path</span><span class="op" id="3356093">:</span>&nbsp;<span class="op" id="3356095">&amp;</span><span class="ident" id="3356096">ast</span><span class="op" id="3356099">.</span><span class="ident" id="3356100">BasicLit</span><span class="op" id="3356108">{</span><span class="ident" id="3356109">Value</span><span class="op" id="3356114">:</span>&nbsp;<span class="ident" id="3356116">strconv</span><span class="op" id="3356123">.</span><span class="ident" id="3356124">Quote</span><span class="op" id="3356129">(</span><span class="ident" id="3356130">p</span><span class="op" id="3356131">)</span><span class="op" id="3356132">}</span><span class="op" id="3356133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3356137">if</span>&nbsp;<span class="ident" id="3356140">path</span><span class="op" id="3356144">.</span><span class="ident" id="3356145">Base</span><span class="op" id="3356149">(</span><span class="ident" id="3356150">p</span><span class="op" id="3356151">)</span>&nbsp;<span class="op" id="3356153">!=</span>&nbsp;<span class="ident" id="3356156">n</span>&nbsp;<span class="op" id="3356158">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356163">s</span><span class="op" id="3356164">.</span><span class="ident" id="3356165">Name</span>&nbsp;<span class="op" id="3356170">=</span>&nbsp;<span class="ident" id="3356172">ast</span><span class="op" id="3356175">.</span><span class="ident" id="3356176">NewIdent</span><span class="op" id="3356184">(</span><span class="ident" id="3356185">n</span><span class="op" id="3356186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3356190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356194">importDecl</span><span class="op" id="3356204">.</span><span class="ident" id="3356205">Specs</span>&nbsp;<span class="op" id="3356211">=</span>&nbsp;<span class="builtinfunc" id="3356213">append</span><span class="op" id="3356219">(</span><span class="ident" id="3356220">importDecl</span><span class="op" id="3356230">.</span><span class="ident" id="3356231">Specs</span><span class="op" id="3356236">,</span>&nbsp;<span class="ident" id="3356238">s</span><span class="op" id="3356239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3356242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356245">importDecl</span><span class="op" id="3356255">.</span><span class="ident" id="3356256">Specs</span>&nbsp;<span class="op" id="3356262">=</span>&nbsp;<span class="builtinfunc" id="3356264">append</span><span class="op" id="3356270">(</span><span class="ident" id="3356271">importDecl</span><span class="op" id="3356281">.</span><span class="ident" id="3356282">Specs</span><span class="op" id="3356287">,</span>&nbsp;<span class="ident" id="3356289">blankImports</span><span class="op" id="3356301">...</span><span class="op" id="3356304">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3356308">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356338">funcDecl</span>&nbsp;<span class="op" id="3356347">:=</span>&nbsp;<span class="op" id="3356350">&amp;</span><span class="ident" id="3356351">ast</span><span class="op" id="3356354">.</span><span class="ident" id="3356355">FuncDecl</span><span class="op" id="3356363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356367">Name</span><span class="op" id="3356371">:</span>&nbsp;<span class="ident" id="3356373">ast</span><span class="op" id="3356376">.</span><span class="ident" id="3356377">NewIdent</span><span class="op" id="3356385">(</span><span class="string" id="3356386">&#34;main&#34;</span><span class="op" id="3356392">)</span><span class="op" id="3356393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356397">Type</span><span class="op" id="3356401">:</span>&nbsp;<span class="op" id="3356403">&amp;</span><span class="ident" id="3356404">ast</span><span class="op" id="3356407">.</span><span class="ident" id="3356408">FuncType</span><span class="op" id="3356416">{</span><span class="ident" id="3356417">Params</span><span class="op" id="3356423">:</span>&nbsp;<span class="op" id="3356425">&amp;</span><span class="ident" id="3356426">ast</span><span class="op" id="3356429">.</span><span class="ident" id="3356430">FieldList</span><span class="op" id="3356439">{</span><span class="op" id="3356440">}</span><span class="op" id="3356441">}</span><span class="op" id="3356442">,</span>&nbsp;<span class="comment" id="3356444">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356481">Body</span><span class="op" id="3356485">:</span>&nbsp;<span class="ident" id="3356487">body</span><span class="op" id="3356491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3356494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3356498">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3356519">return</span>&nbsp;<span class="op" id="3356526">&amp;</span><span class="ident" id="3356527">ast</span><span class="op" id="3356530">.</span><span class="ident" id="3356531">File</span><span class="op" id="3356535">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356539">Name</span><span class="op" id="3356543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356549">ast</span><span class="op" id="3356552">.</span><span class="ident" id="3356553">NewIdent</span><span class="op" id="3356561">(</span><span class="string" id="3356562">&#34;main&#34;</span><span class="op" id="3356568">)</span><span class="op" id="3356569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356573">Decls</span><span class="op" id="3356578">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3356583">[</span><span class="op" id="3356584">]</span><span class="ident" id="3356585">ast</span><span class="op" id="3356588">.</span><span class="ident" id="3356589">Decl</span><span class="op" id="3356593">{</span><span class="ident" id="3356594">importDecl</span><span class="op" id="3356604">,</span>&nbsp;<span class="ident" id="3356606">funcDecl</span><span class="op" id="3356614">}</span><span class="op" id="3356615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356619">Comments</span><span class="op" id="3356627">:</span>&nbsp;<span class="ident" id="3356629">comments</span><span class="op" id="3356637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3356640">}</span><br>
<span class="lineno"></span><span class="op" id="3356642">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3356645">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="3356723">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="3356782">func</span>&nbsp;<span class="ident" id="3356787">playExampleFile</span><span class="op" id="3356802">(</span><span class="ident" id="3356803">file</span>&nbsp;<span class="op" id="3356808">*</span><span class="ident" id="3356809">ast</span><span class="op" id="3356812">.</span><span class="ident" id="3356813">File</span><span class="op" id="3356817">)</span>&nbsp;<span class="op" id="3356819">*</span><span class="ident" id="3356820">ast</span><span class="op" id="3356823">.</span><span class="ident" id="3356824">File</span>&nbsp;<span class="op" id="3356829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3356832">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356872">comments</span>&nbsp;<span class="op" id="3356881">:=</span>&nbsp;<span class="ident" id="3356884">file</span><span class="op" id="3356888">.</span><span class="ident" id="3356889">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3356899">if</span>&nbsp;<span class="builtinfunc" id="3356902">len</span><span class="op" id="3356905">(</span><span class="ident" id="3356906">comments</span><span class="op" id="3356914">)</span>&nbsp;<span class="op" id="3356916">&gt;</span>&nbsp;<span class="num" id="3356918">0</span>&nbsp;<span class="op" id="3356920">&amp;&amp;</span>&nbsp;<span class="ident" id="3356923">strings</span><span class="op" id="3356930">.</span><span class="ident" id="3356931">HasPrefix</span><span class="op" id="3356940">(</span><span class="ident" id="3356941">comments</span><span class="op" id="3356949">[</span><span class="num" id="3356950">0</span><span class="op" id="3356951">]</span><span class="op" id="3356952">.</span><span class="ident" id="3356953">Text</span><span class="op" id="3356957">(</span><span class="op" id="3356958">)</span><span class="op" id="3356959">,</span>&nbsp;<span class="string" id="3356961">&#34;Copyright&#34;</span><span class="op" id="3356972">)</span>&nbsp;<span class="op" id="3356974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356978">comments</span>&nbsp;<span class="op" id="3356987">=</span>&nbsp;<span class="ident" id="3356989">comments</span><span class="op" id="3356997">[</span><span class="num" id="3356998">1</span><span class="op" id="3356999">:</span><span class="op" id="3357000">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3357003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3357007">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3357076">var</span>&nbsp;<span class="ident" id="3357080">decls</span>&nbsp;<span class="op" id="3357086">[</span><span class="op" id="3357087">]</span><span class="ident" id="3357088">ast</span><span class="op" id="3357091">.</span><span class="ident" id="3357092">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3357098">for</span>&nbsp;<span class="ident" id="3357102">_</span><span class="op" id="3357103">,</span>&nbsp;<span class="ident" id="3357105">d</span>&nbsp;<span class="op" id="3357107">:=</span>&nbsp;<span class="keyword" id="3357110">range</span>&nbsp;<span class="ident" id="3357116">file</span><span class="op" id="3357120">.</span><span class="ident" id="3357121">Decls</span>&nbsp;<span class="op" id="3357127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3357131">if</span>&nbsp;<span class="ident" id="3357134">f</span><span class="op" id="3357135">,</span>&nbsp;<span class="ident" id="3357137">ok</span>&nbsp;<span class="op" id="3357140">:=</span>&nbsp;<span class="ident" id="3357143">d</span><span class="op" id="3357144">.</span><span class="op" id="3357145">(</span><span class="op" id="3357146">*</span><span class="ident" id="3357147">ast</span><span class="op" id="3357150">.</span><span class="ident" id="3357151">FuncDecl</span><span class="op" id="3357159">)</span><span class="op" id="3357160">;</span>&nbsp;<span class="ident" id="3357162">ok</span>&nbsp;<span class="op" id="3357165">&amp;&amp;</span>&nbsp;<span class="ident" id="3357168">isTest</span><span class="op" id="3357174">(</span><span class="ident" id="3357175">f</span><span class="op" id="3357176">.</span><span class="ident" id="3357177">Name</span><span class="op" id="3357181">.</span><span class="ident" id="3357182">Name</span><span class="op" id="3357186">,</span>&nbsp;<span class="string" id="3357188">&#34;Example&#34;</span><span class="op" id="3357197">)</span>&nbsp;<span class="op" id="3357199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3357204">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357258">newF</span>&nbsp;<span class="op" id="3357263">:=</span>&nbsp;<span class="op" id="3357266">*</span><span class="ident" id="3357267">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357272">newF</span><span class="op" id="3357276">.</span><span class="ident" id="3357277">Name</span>&nbsp;<span class="op" id="3357282">=</span>&nbsp;<span class="ident" id="3357284">ast</span><span class="op" id="3357287">.</span><span class="ident" id="3357288">NewIdent</span><span class="op" id="3357296">(</span><span class="string" id="3357297">&#34;main&#34;</span><span class="op" id="3357303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357308">newF</span><span class="op" id="3357312">.</span><span class="ident" id="3357313">Body</span><span class="op" id="3357317">,</span>&nbsp;<span class="ident" id="3357319">comments</span>&nbsp;<span class="op" id="3357328">=</span>&nbsp;<span class="ident" id="3357330">stripOutputComment</span><span class="op" id="3357348">(</span><span class="ident" id="3357349">f</span><span class="op" id="3357350">.</span><span class="ident" id="3357351">Body</span><span class="op" id="3357355">,</span>&nbsp;<span class="ident" id="3357357">comments</span><span class="op" id="3357365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357370">d</span>&nbsp;<span class="op" id="3357372">=</span>&nbsp;<span class="op" id="3357374">&amp;</span><span class="ident" id="3357375">newF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3357382">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357386">decls</span>&nbsp;<span class="op" id="3357392">=</span>&nbsp;<span class="builtinfunc" id="3357394">append</span><span class="op" id="3357400">(</span><span class="ident" id="3357401">decls</span><span class="op" id="3357406">,</span>&nbsp;<span class="ident" id="3357408">d</span><span class="op" id="3357409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3357412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3357416">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357464">f</span>&nbsp;<span class="op" id="3357466">:=</span>&nbsp;<span class="op" id="3357469">*</span><span class="ident" id="3357470">file</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357476">f</span><span class="op" id="3357477">.</span><span class="ident" id="3357478">Name</span>&nbsp;<span class="op" id="3357483">=</span>&nbsp;<span class="ident" id="3357485">ast</span><span class="op" id="3357488">.</span><span class="ident" id="3357489">NewIdent</span><span class="op" id="3357497">(</span><span class="string" id="3357498">&#34;main&#34;</span><span class="op" id="3357504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357507">f</span><span class="op" id="3357508">.</span><span class="ident" id="3357509">Decls</span>&nbsp;<span class="op" id="3357515">=</span>&nbsp;<span class="ident" id="3357517">decls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357524">f</span><span class="op" id="3357525">.</span><span class="ident" id="3357526">Comments</span>&nbsp;<span class="op" id="3357535">=</span>&nbsp;<span class="ident" id="3357537">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3357547">return</span>&nbsp;<span class="op" id="3357554">&amp;</span><span class="ident" id="3357555">f</span><br>
<span class="lineno"></span><span class="op" id="3357557">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="3357560">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="3357631">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="3357691">func</span>&nbsp;<span class="ident" id="3357696">stripOutputComment</span><span class="op" id="3357714">(</span><span class="ident" id="3357715">body</span>&nbsp;<span class="op" id="3357720">*</span><span class="ident" id="3357721">ast</span><span class="op" id="3357724">.</span><span class="ident" id="3357725">BlockStmt</span><span class="op" id="3357734">,</span>&nbsp;<span class="ident" id="3357736">comments</span>&nbsp;<span class="op" id="3357745">[</span><span class="op" id="3357746">]</span><span class="op" id="3357747">*</span><span class="ident" id="3357748">ast</span><span class="op" id="3357751">.</span><span class="ident" id="3357752">CommentGroup</span><span class="op" id="3357764">)</span>&nbsp;<span class="op" id="3357766">(</span><span class="op" id="3357767">*</span><span class="ident" id="3357768">ast</span><span class="op" id="3357771">.</span><span class="ident" id="3357772">BlockStmt</span><span class="op" id="3357781">,</span>&nbsp;<span class="op" id="3357783">[</span><span class="op" id="3357784">]</span><span class="op" id="3357785">*</span><span class="ident" id="3357786">ast</span><span class="op" id="3357789">.</span><span class="ident" id="3357790">CommentGroup</span><span class="op" id="3357802">)</span>&nbsp;<span class="op" id="3357804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3357807">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3357853">i</span><span class="op" id="3357854">,</span>&nbsp;<span class="ident" id="3357856">last</span>&nbsp;<span class="op" id="3357861">:=</span>&nbsp;<span class="ident" id="3357864">lastComment</span><span class="op" id="3357875">(</span><span class="ident" id="3357876">body</span><span class="op" id="3357880">,</span>&nbsp;<span class="ident" id="3357882">comments</span><span class="op" id="3357890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3357893">if</span>&nbsp;<span class="ident" id="3357896">last</span>&nbsp;<span class="op" id="3357901">==</span>&nbsp;<span class="builtintype" id="3357904">nil</span>&nbsp;<span class="op" id="3357908">||</span>&nbsp;<span class="op" id="3357911">!</span><span class="ident" id="3357912">outputPrefix</span><span class="op" id="3357924">.</span><span class="ident" id="3357925">MatchString</span><span class="op" id="3357936">(</span><span class="ident" id="3357937">last</span><span class="op" id="3357941">.</span><span class="ident" id="3357942">Text</span><span class="op" id="3357946">(</span><span class="op" id="3357947">)</span><span class="op" id="3357948">)</span>&nbsp;<span class="op" id="3357950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3357954">return</span>&nbsp;<span class="ident" id="3357961">body</span><span class="op" id="3357965">,</span>&nbsp;<span class="ident" id="3357967">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3357977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3357981">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358049">newBody</span>&nbsp;<span class="op" id="3358057">:=</span>&nbsp;<span class="op" id="3358060">&amp;</span><span class="ident" id="3358061">ast</span><span class="op" id="3358064">.</span><span class="ident" id="3358065">BlockStmt</span><span class="op" id="3358074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358078">Lbrace</span><span class="op" id="3358084">:</span>&nbsp;<span class="ident" id="3358086">body</span><span class="op" id="3358090">.</span><span class="ident" id="3358091">Lbrace</span><span class="op" id="3358097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358101">List</span><span class="op" id="3358105">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3358109">body</span><span class="op" id="3358113">.</span><span class="ident" id="3358114">List</span><span class="op" id="3358118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358122">Rbrace</span><span class="op" id="3358128">:</span>&nbsp;<span class="ident" id="3358130">last</span><span class="op" id="3358134">.</span><span class="ident" id="3358135">Pos</span><span class="op" id="3358138">(</span><span class="op" id="3358139">)</span><span class="op" id="3358140">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358146">newComments</span>&nbsp;<span class="op" id="3358158">:=</span>&nbsp;<span class="builtinfunc" id="3358161">make</span><span class="op" id="3358165">(</span><span class="op" id="3358166">[</span><span class="op" id="3358167">]</span><span class="op" id="3358168">*</span><span class="ident" id="3358169">ast</span><span class="op" id="3358172">.</span><span class="ident" id="3358173">CommentGroup</span><span class="op" id="3358185">,</span>&nbsp;<span class="builtinfunc" id="3358187">len</span><span class="op" id="3358190">(</span><span class="ident" id="3358191">comments</span><span class="op" id="3358199">)</span><span class="op" id="3358200">-</span><span class="num" id="3358201">1</span><span class="op" id="3358202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3358205">copy</span><span class="op" id="3358209">(</span><span class="ident" id="3358210">newComments</span><span class="op" id="3358221">,</span>&nbsp;<span class="ident" id="3358223">comments</span><span class="op" id="3358231">[</span><span class="op" id="3358232">:</span><span class="ident" id="3358233">i</span><span class="op" id="3358234">]</span><span class="op" id="3358235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3358238">copy</span><span class="op" id="3358242">(</span><span class="ident" id="3358243">newComments</span><span class="op" id="3358254">[</span><span class="ident" id="3358255">i</span><span class="op" id="3358256">:</span><span class="op" id="3358257">]</span><span class="op" id="3358258">,</span>&nbsp;<span class="ident" id="3358260">comments</span><span class="op" id="3358268">[</span><span class="ident" id="3358269">i</span><span class="op" id="3358270">+</span><span class="num" id="3358271">1</span><span class="op" id="3358272">:</span><span class="op" id="3358273">]</span><span class="op" id="3358274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358277">return</span>&nbsp;<span class="ident" id="3358284">newBody</span><span class="op" id="3358291">,</span>&nbsp;<span class="ident" id="3358293">newComments</span><br>
<span class="lineno">340</span><span class="op" id="3358305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358308">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="3358375">func</span>&nbsp;<span class="ident" id="3358380">lastComment</span><span class="op" id="3358391">(</span><span class="ident" id="3358392">b</span>&nbsp;<span class="op" id="3358394">*</span><span class="ident" id="3358395">ast</span><span class="op" id="3358398">.</span><span class="ident" id="3358399">BlockStmt</span><span class="op" id="3358408">,</span>&nbsp;<span class="ident" id="3358410">c</span>&nbsp;<span class="op" id="3358412">[</span><span class="op" id="3358413">]</span><span class="op" id="3358414">*</span><span class="ident" id="3358415">ast</span><span class="op" id="3358418">.</span><span class="ident" id="3358419">CommentGroup</span><span class="op" id="3358431">)</span>&nbsp;<span class="op" id="3358433">(</span><span class="ident" id="3358434">i</span>&nbsp;<span class="builtintype" id="3358436">int</span><span class="op" id="3358439">,</span>&nbsp;<span class="ident" id="3358441">last</span>&nbsp;<span class="op" id="3358446">*</span><span class="ident" id="3358447">ast</span><span class="op" id="3358450">.</span><span class="ident" id="3358451">CommentGroup</span><span class="op" id="3358463">)</span>&nbsp;<span class="op" id="3358465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358468">pos</span><span class="op" id="3358471">,</span>&nbsp;<span class="ident" id="3358473">end</span>&nbsp;<span class="op" id="3358477">:=</span>&nbsp;<span class="ident" id="3358480">b</span><span class="op" id="3358481">.</span><span class="ident" id="3358482">Pos</span><span class="op" id="3358485">(</span><span class="op" id="3358486">)</span><span class="op" id="3358487">,</span>&nbsp;<span class="ident" id="3358489">b</span><span class="op" id="3358490">.</span><span class="ident" id="3358491">End</span><span class="op" id="3358494">(</span><span class="op" id="3358495">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358498">for</span>&nbsp;<span class="ident" id="3358502">j</span><span class="op" id="3358503">,</span>&nbsp;<span class="ident" id="3358505">cg</span>&nbsp;<span class="op" id="3358508">:=</span>&nbsp;<span class="keyword" id="3358511">range</span>&nbsp;<span class="ident" id="3358517">c</span>&nbsp;<span class="op" id="3358519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358523">if</span>&nbsp;<span class="ident" id="3358526">cg</span><span class="op" id="3358528">.</span><span class="ident" id="3358529">Pos</span><span class="op" id="3358532">(</span><span class="op" id="3358533">)</span>&nbsp;<span class="op" id="3358535">&lt;</span>&nbsp;<span class="ident" id="3358537">pos</span>&nbsp;<span class="op" id="3358541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358546">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358561">if</span>&nbsp;<span class="ident" id="3358564">cg</span><span class="op" id="3358566">.</span><span class="ident" id="3358567">End</span><span class="op" id="3358570">(</span><span class="op" id="3358571">)</span>&nbsp;<span class="op" id="3358573">&gt;</span>&nbsp;<span class="ident" id="3358575">end</span>&nbsp;<span class="op" id="3358579">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358584">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358596">i</span><span class="op" id="3358597">,</span>&nbsp;<span class="ident" id="3358599">last</span>&nbsp;<span class="op" id="3358604">=</span>&nbsp;<span class="ident" id="3358606">j</span><span class="op" id="3358607">,</span>&nbsp;<span class="ident" id="3358609">cg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358616">return</span><br>
<span class="lineno">355</span><span class="op" id="3358623">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
