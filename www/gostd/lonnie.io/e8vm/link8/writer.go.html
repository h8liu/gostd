<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5137581">package</span>&nbsp;<span class="ident" id="5137589">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137596">import</span>&nbsp;<span class="op" id="5137603">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5137606">&#34;bytes&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5137616">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span><span class="op" id="5137634">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137637">type</span>&nbsp;<span class="ident" id="5137642">writer</span>&nbsp;<span class="keyword" id="5137649">struct</span>&nbsp;<span class="op" id="5137656">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137659">buf</span>&nbsp;<span class="op" id="5137663">*</span><span class="ident" id="5137664">bytes</span><span class="op" id="5137669">.</span><span class="ident" id="5137670">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5137677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137680">func</span>&nbsp;<span class="ident" id="5137685">newWriter</span><span class="op" id="5137694">(</span><span class="op" id="5137695">)</span>&nbsp;<span class="op" id="5137697">*</span><span class="ident" id="5137698">writer</span>&nbsp;<span class="op" id="5137705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137708">ret</span>&nbsp;<span class="op" id="5137712">:=</span>&nbsp;<span class="builtinfunc" id="5137715">new</span><span class="op" id="5137718">(</span><span class="ident" id="5137719">writer</span><span class="op" id="5137725">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137728">ret</span><span class="op" id="5137731">.</span><span class="ident" id="5137732">buf</span>&nbsp;<span class="op" id="5137736">=</span>&nbsp;<span class="builtinfunc" id="5137738">new</span><span class="op" id="5137741">(</span><span class="ident" id="5137742">bytes</span><span class="op" id="5137747">.</span><span class="ident" id="5137748">Buffer</span><span class="op" id="5137754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137757">return</span>&nbsp;<span class="ident" id="5137764">ret</span><br>
<span class="lineno"></span><span class="op" id="5137768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137771">func</span>&nbsp;<span class="op" id="5137776">(</span><span class="ident" id="5137777">w</span>&nbsp;<span class="op" id="5137779">*</span><span class="ident" id="5137780">writer</span><span class="op" id="5137786">)</span>&nbsp;<span class="ident" id="5137788">writeU32</span><span class="op" id="5137796">(</span><span class="ident" id="5137797">u</span>&nbsp;<span class="builtintype" id="5137799">uint32</span><span class="op" id="5137805">)</span>&nbsp;<span class="op" id="5137807">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137810">var</span>&nbsp;<span class="ident" id="5137814">b</span>&nbsp;<span class="op" id="5137816">[</span><span class="num" id="5137817">4</span><span class="op" id="5137818">]</span><span class="builtintype" id="5137819">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137825">binary</span><span class="op" id="5137831">.</span><span class="ident" id="5137832">LittleEndian</span><span class="op" id="5137844">.</span><span class="ident" id="5137845">PutUint32</span><span class="op" id="5137854">(</span><span class="ident" id="5137855">b</span><span class="op" id="5137856">[</span><span class="op" id="5137857">:</span><span class="op" id="5137858">]</span><span class="op" id="5137859">,</span>&nbsp;<span class="ident" id="5137861">u</span><span class="op" id="5137862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137865">_</span><span class="op" id="5137866">,</span>&nbsp;<span class="ident" id="5137868">e</span>&nbsp;<span class="op" id="5137870">:=</span>&nbsp;<span class="ident" id="5137873">w</span><span class="op" id="5137874">.</span><span class="ident" id="5137875">buf</span><span class="op" id="5137878">.</span><span class="ident" id="5137879">Write</span><span class="op" id="5137884">(</span><span class="ident" id="5137885">b</span><span class="op" id="5137886">[</span><span class="op" id="5137887">:</span><span class="op" id="5137888">]</span><span class="op" id="5137889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137892">if</span>&nbsp;<span class="ident" id="5137895">e</span>&nbsp;<span class="op" id="5137897">!=</span>&nbsp;<span class="ident" id="5137900">nil</span>&nbsp;<span class="op" id="5137904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5137908">panic</span><span class="op" id="5137913">(</span><span class="string" id="5137914">&#34;buf&nbsp;write&#34;</span><span class="op" id="5137925">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5137928">}</span><br>
<span class="lineno"></span><span class="op" id="5137930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137933">func</span>&nbsp;<span class="op" id="5137938">(</span><span class="ident" id="5137939">w</span>&nbsp;<span class="op" id="5137941">*</span><span class="ident" id="5137942">writer</span><span class="op" id="5137948">)</span>&nbsp;<span class="ident" id="5137950">writeBareFunc</span><span class="op" id="5137963">(</span><span class="ident" id="5137964">f</span>&nbsp;<span class="op" id="5137966">*</span><span class="ident" id="5137967">Func</span><span class="op" id="5137971">)</span>&nbsp;<span class="op" id="5137973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137976">if</span>&nbsp;<span class="builtinfunc" id="5137979">len</span><span class="op" id="5137982">(</span><span class="ident" id="5137983">f</span><span class="op" id="5137984">.</span><span class="ident" id="5137985">links</span><span class="op" id="5137990">)</span>&nbsp;<span class="op" id="5137992">!=</span>&nbsp;<span class="num" id="5137995">0</span>&nbsp;<span class="op" id="5137997">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5138001">panic</span><span class="op" id="5138006">(</span><span class="string" id="5138007">&#34;not&nbsp;a&nbsp;bare&nbsp;function&#34;</span><span class="op" id="5138028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138035">for</span>&nbsp;<span class="ident" id="5138039">_</span><span class="op" id="5138040">,</span>&nbsp;<span class="ident" id="5138042">i</span>&nbsp;<span class="op" id="5138044">:=</span>&nbsp;<span class="keyword" id="5138047">range</span>&nbsp;<span class="ident" id="5138053">f</span><span class="op" id="5138054">.</span><span class="ident" id="5138055">insts</span>&nbsp;<span class="op" id="5138061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138065">w</span><span class="op" id="5138066">.</span><span class="ident" id="5138067">writeU32</span><span class="op" id="5138075">(</span><span class="ident" id="5138076">i</span><span class="op" id="5138077">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138080">}</span><br>
<span class="lineno"></span><span class="op" id="5138082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5138085">func</span>&nbsp;<span class="op" id="5138090">(</span><span class="ident" id="5138091">w</span>&nbsp;<span class="op" id="5138093">*</span><span class="ident" id="5138094">writer</span><span class="op" id="5138100">)</span>&nbsp;<span class="ident" id="5138102">bytes</span><span class="op" id="5138107">(</span><span class="op" id="5138108">)</span>&nbsp;<span class="op" id="5138110">[</span><span class="op" id="5138111">]</span><span class="builtintype" id="5138112">byte</span>&nbsp;<span class="op" id="5138117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138120">return</span>&nbsp;<span class="ident" id="5138127">w</span><span class="op" id="5138128">.</span><span class="ident" id="5138129">buf</span><span class="op" id="5138132">.</span><span class="ident" id="5138133">Bytes</span><span class="op" id="5138138">(</span><span class="op" id="5138139">)</span><br>
<span class="lineno">40</span><span class="op" id="5138141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5138144">func</span>&nbsp;<span class="ident" id="5138149">writeVar</span><span class="op" id="5138157">(</span><span class="ident" id="5138158">w</span>&nbsp;<span class="op" id="5138160">*</span><span class="ident" id="5138161">writer</span><span class="op" id="5138167">,</span>&nbsp;<span class="ident" id="5138169">v</span>&nbsp;<span class="op" id="5138171">*</span><span class="ident" id="5138172">Var</span><span class="op" id="5138175">)</span>&nbsp;<span class="op" id="5138177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138180">w</span><span class="op" id="5138181">.</span><span class="ident" id="5138182">buf</span><span class="op" id="5138185">.</span><span class="ident" id="5138186">Write</span><span class="op" id="5138191">(</span><span class="builtinfunc" id="5138192">make</span><span class="op" id="5138196">(</span><span class="op" id="5138197">[</span><span class="op" id="5138198">]</span><span class="builtintype" id="5138199">byte</span><span class="op" id="5138203">,</span>&nbsp;<span class="ident" id="5138205">v</span><span class="op" id="5138206">.</span><span class="ident" id="5138207">prePad</span><span class="op" id="5138213">)</span><span class="op" id="5138214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138217">w</span><span class="op" id="5138218">.</span><span class="ident" id="5138219">buf</span><span class="op" id="5138222">.</span><span class="ident" id="5138223">Write</span><span class="op" id="5138228">(</span><span class="ident" id="5138229">v</span><span class="op" id="5138230">.</span><span class="ident" id="5138231">buf</span><span class="op" id="5138234">.</span><span class="ident" id="5138235">Bytes</span><span class="op" id="5138240">(</span><span class="op" id="5138241">)</span><span class="op" id="5138242">)</span><br>
<span class="lineno">45</span><span class="op" id="5138244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5138247">func</span>&nbsp;<span class="ident" id="5138252">writeFunc</span><span class="op" id="5138261">(</span><span class="ident" id="5138262">w</span>&nbsp;<span class="op" id="5138264">*</span><span class="ident" id="5138265">writer</span><span class="op" id="5138271">,</span>&nbsp;<span class="ident" id="5138273">p</span>&nbsp;<span class="op" id="5138275">*</span><span class="ident" id="5138276">Package</span><span class="op" id="5138283">,</span>&nbsp;<span class="ident" id="5138285">f</span>&nbsp;<span class="op" id="5138287">*</span><span class="ident" id="5138288">Func</span><span class="op" id="5138292">)</span>&nbsp;<span class="op" id="5138294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138297">cur</span>&nbsp;<span class="op" id="5138301">:=</span>&nbsp;<span class="num" id="5138304">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138307">var</span>&nbsp;<span class="ident" id="5138311">curLink</span>&nbsp;<span class="op" id="5138319">*</span><span class="ident" id="5138320">link</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138326">var</span>&nbsp;<span class="ident" id="5138330">curIndex</span>&nbsp;<span class="builtintype" id="5138339">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138344">updateCur</span>&nbsp;<span class="op" id="5138354">:=</span>&nbsp;<span class="keyword" id="5138357">func</span><span class="op" id="5138361">(</span><span class="op" id="5138362">)</span>&nbsp;<span class="op" id="5138364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138368">if</span>&nbsp;<span class="ident" id="5138371">cur</span>&nbsp;<span class="op" id="5138375">&lt;</span>&nbsp;<span class="builtinfunc" id="5138377">len</span><span class="op" id="5138380">(</span><span class="ident" id="5138381">f</span><span class="op" id="5138382">.</span><span class="ident" id="5138383">links</span><span class="op" id="5138388">)</span>&nbsp;<span class="op" id="5138390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138395">curLink</span>&nbsp;<span class="op" id="5138403">=</span>&nbsp;<span class="ident" id="5138405">f</span><span class="op" id="5138406">.</span><span class="ident" id="5138407">links</span><span class="op" id="5138412">[</span><span class="ident" id="5138413">cur</span><span class="op" id="5138416">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138421">curIndex</span>&nbsp;<span class="op" id="5138430">=</span>&nbsp;<span class="builtintype" id="5138432">int</span><span class="op" id="5138435">(</span><span class="ident" id="5138436">curLink</span><span class="op" id="5138443">.</span><span class="ident" id="5138444">offset</span>&nbsp;<span class="op" id="5138451">&gt;&gt;</span>&nbsp;<span class="num" id="5138454">2</span><span class="op" id="5138455">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138466">updateCur</span><span class="op" id="5138475">(</span><span class="op" id="5138476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138479">for</span>&nbsp;<span class="ident" id="5138483">i</span><span class="op" id="5138484">,</span>&nbsp;<span class="ident" id="5138486">inst</span>&nbsp;<span class="op" id="5138491">:=</span>&nbsp;<span class="keyword" id="5138494">range</span>&nbsp;<span class="ident" id="5138500">f</span><span class="op" id="5138501">.</span><span class="ident" id="5138502">insts</span>&nbsp;<span class="op" id="5138508">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138512">if</span>&nbsp;<span class="ident" id="5138515">curLink</span>&nbsp;<span class="op" id="5138523">!=</span>&nbsp;<span class="ident" id="5138526">nil</span>&nbsp;<span class="op" id="5138530">&amp;&amp;</span>&nbsp;<span class="ident" id="5138533">i</span>&nbsp;<span class="op" id="5138535">==</span>&nbsp;<span class="ident" id="5138538">curIndex</span>&nbsp;<span class="op" id="5138547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138552">fill</span>&nbsp;<span class="op" id="5138557">:=</span>&nbsp;<span class="ident" id="5138560">curLink</span><span class="op" id="5138567">.</span><span class="ident" id="5138568">offset</span>&nbsp;<span class="op" id="5138575">&amp;</span>&nbsp;<span class="num" id="5138577">0x3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138584">if</span>&nbsp;<span class="ident" id="5138587">fill</span>&nbsp;<span class="op" id="5138592">==</span>&nbsp;<span class="ident" id="5138595">FillLink</span>&nbsp;<span class="op" id="5138604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138610">if</span>&nbsp;<span class="op" id="5138613">(</span><span class="ident" id="5138614">inst</span>&nbsp;<span class="op" id="5138619">&gt;&gt;</span>&nbsp;<span class="num" id="5138622">31</span><span class="op" id="5138624">)</span>&nbsp;<span class="op" id="5138626">!=</span>&nbsp;<span class="num" id="5138629">0x1</span>&nbsp;<span class="op" id="5138633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5138640">panic</span><span class="op" id="5138645">(</span><span class="string" id="5138646">&#34;not&nbsp;a&nbsp;jump&#34;</span><span class="op" id="5138658">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138670">if</span>&nbsp;<span class="op" id="5138673">(</span><span class="ident" id="5138674">inst</span>&nbsp;<span class="op" id="5138679">&amp;</span>&nbsp;<span class="num" id="5138681">0x3fffffff</span><span class="op" id="5138691">)</span>&nbsp;<span class="op" id="5138693">!=</span>&nbsp;<span class="num" id="5138696">0</span>&nbsp;<span class="op" id="5138698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5138705">panic</span><span class="op" id="5138710">(</span><span class="string" id="5138711">&#34;already&nbsp;filled&#34;</span><span class="op" id="5138727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138740">pc</span>&nbsp;<span class="op" id="5138743">:=</span>&nbsp;<span class="ident" id="5138746">f</span><span class="op" id="5138747">.</span><span class="ident" id="5138748">addr</span>&nbsp;<span class="op" id="5138753">+</span>&nbsp;<span class="builtintype" id="5138755">uint32</span><span class="op" id="5138761">(</span><span class="ident" id="5138762">i</span><span class="op" id="5138763">)</span><span class="op" id="5138764">*</span><span class="num" id="5138765">4</span>&nbsp;<span class="op" id="5138767">+</span>&nbsp;<span class="num" id="5138769">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138775">target</span>&nbsp;<span class="op" id="5138782">:=</span>&nbsp;<span class="ident" id="5138785">p</span><span class="op" id="5138786">.</span><span class="ident" id="5138787">requires</span><span class="op" id="5138795">[</span><span class="ident" id="5138796">curLink</span><span class="op" id="5138803">.</span><span class="ident" id="5138804">pkg</span><span class="op" id="5138807">]</span><span class="op" id="5138808">.</span><span class="ident" id="5138809">Func</span><span class="op" id="5138813">(</span><span class="ident" id="5138814">curLink</span><span class="op" id="5138821">.</span><span class="ident" id="5138822">sym</span><span class="op" id="5138825">)</span><span class="op" id="5138826">.</span><span class="ident" id="5138827">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138836">inst</span>&nbsp;<span class="op" id="5138841">|=</span>&nbsp;<span class="op" id="5138844">(</span><span class="ident" id="5138845">target</span>&nbsp;<span class="op" id="5138852">-</span>&nbsp;<span class="ident" id="5138854">pc</span><span class="op" id="5138856">)</span>&nbsp;<span class="op" id="5138858">&gt;&gt;</span>&nbsp;<span class="num" id="5138861">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138866">}</span>&nbsp;<span class="keyword" id="5138868">else</span>&nbsp;<span class="keyword" id="5138873">if</span>&nbsp;<span class="ident" id="5138876">fill</span>&nbsp;<span class="op" id="5138881">==</span>&nbsp;<span class="ident" id="5138884">FillHigh</span>&nbsp;<span class="op" id="5138893">||</span>&nbsp;<span class="ident" id="5138896">fill</span>&nbsp;<span class="op" id="5138901">==</span>&nbsp;<span class="ident" id="5138904">FillLow</span>&nbsp;<span class="op" id="5138912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138918">if</span>&nbsp;<span class="op" id="5138921">(</span><span class="ident" id="5138922">inst</span>&nbsp;<span class="op" id="5138927">&amp;</span>&nbsp;<span class="num" id="5138929">0xffff</span><span class="op" id="5138935">)</span>&nbsp;<span class="op" id="5138937">!=</span>&nbsp;<span class="num" id="5138940">0</span>&nbsp;<span class="op" id="5138942">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5138949">panic</span><span class="op" id="5138954">(</span><span class="string" id="5138955">&#34;already&nbsp;filled&#34;</span><span class="op" id="5138971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138984">pkg</span>&nbsp;<span class="op" id="5138988">:=</span>&nbsp;<span class="ident" id="5138991">p</span><span class="op" id="5138992">.</span><span class="ident" id="5138993">requires</span><span class="op" id="5139001">[</span><span class="ident" id="5139002">curLink</span><span class="op" id="5139009">.</span><span class="ident" id="5139010">pkg</span><span class="op" id="5139013">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139019">sym</span>&nbsp;<span class="op" id="5139023">:=</span>&nbsp;<span class="ident" id="5139026">pkg</span><span class="op" id="5139029">.</span><span class="ident" id="5139030">symbols</span><span class="op" id="5139037">[</span><span class="ident" id="5139038">curLink</span><span class="op" id="5139045">.</span><span class="ident" id="5139046">sym</span><span class="op" id="5139049">]</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139055">var</span>&nbsp;<span class="ident" id="5139059">v</span>&nbsp;<span class="builtintype" id="5139061">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139072">switch</span>&nbsp;<span class="ident" id="5139079">sym</span><span class="op" id="5139082">.</span><span class="ident" id="5139083">Type</span>&nbsp;<span class="op" id="5139088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139094">case</span>&nbsp;<span class="ident" id="5139099">SymFunc</span><span class="op" id="5139106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139113">v</span>&nbsp;<span class="op" id="5139115">=</span>&nbsp;<span class="ident" id="5139117">pkg</span><span class="op" id="5139120">.</span><span class="ident" id="5139121">Func</span><span class="op" id="5139125">(</span><span class="ident" id="5139126">curLink</span><span class="op" id="5139133">.</span><span class="ident" id="5139134">sym</span><span class="op" id="5139137">)</span><span class="op" id="5139138">.</span><span class="ident" id="5139139">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139148">case</span>&nbsp;<span class="ident" id="5139153">SymVar</span><span class="op" id="5139159">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139166">v</span>&nbsp;<span class="op" id="5139168">=</span>&nbsp;<span class="ident" id="5139170">pkg</span><span class="op" id="5139173">.</span><span class="ident" id="5139174">Var</span><span class="op" id="5139177">(</span><span class="ident" id="5139178">curLink</span><span class="op" id="5139185">.</span><span class="ident" id="5139186">sym</span><span class="op" id="5139189">)</span><span class="op" id="5139190">.</span><span class="ident" id="5139191">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139200">default</span><span class="op" id="5139207">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5139214">panic</span><span class="op" id="5139219">(</span><span class="string" id="5139220">&#34;bug&#34;</span><span class="op" id="5139225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139238">if</span>&nbsp;<span class="ident" id="5139241">fill</span>&nbsp;<span class="op" id="5139246">==</span>&nbsp;<span class="ident" id="5139249">FillHigh</span>&nbsp;<span class="op" id="5139258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139265">inst</span>&nbsp;<span class="op" id="5139270">|=</span>&nbsp;<span class="ident" id="5139273">v</span>&nbsp;<span class="op" id="5139275">&gt;&gt;</span>&nbsp;<span class="num" id="5139278">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139285">}</span>&nbsp;<span class="keyword" id="5139287">else</span>&nbsp;<span class="op" id="5139292">{</span>&nbsp;<span class="comment" id="5139294">//&nbsp;fillLow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139310">inst</span>&nbsp;<span class="op" id="5139315">|=</span>&nbsp;<span class="ident" id="5139318">v</span>&nbsp;<span class="op" id="5139320">&amp;</span>&nbsp;<span class="num" id="5139322">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139333">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139338">}</span>&nbsp;<span class="keyword" id="5139340">else</span>&nbsp;<span class="op" id="5139345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5139351">panic</span><span class="op" id="5139356">(</span><span class="string" id="5139357">&#34;invalid&nbsp;fill&#34;</span><span class="op" id="5139371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139382">cur</span><span class="op" id="5139385">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139391">updateCur</span><span class="op" id="5139400">(</span><span class="op" id="5139401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139410">w</span><span class="op" id="5139411">.</span><span class="ident" id="5139412">writeU32</span><span class="op" id="5139420">(</span><span class="ident" id="5139421">inst</span><span class="op" id="5139425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139428">}</span><br>
<span class="lineno">105</span><span class="op" id="5139430">}</span>
</div>
</body>
</html>
