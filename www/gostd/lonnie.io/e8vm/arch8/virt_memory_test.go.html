<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="8030302">package</span>&nbsp;<span class="ident" id="8030310">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8030317">import</span>&nbsp;<span class="op" id="8030324">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8030327">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="8030337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8030340">func</span>&nbsp;<span class="ident" id="8030345">TestVirtMemory</span><span class="op" id="8030359">(</span><span class="ident" id="8030360">t</span>&nbsp;<span class="op" id="8030362">*</span><span class="ident" id="8030363">testing</span><span class="op" id="8030370">.</span><span class="ident" id="8030371">T</span><span class="op" id="8030372">)</span>&nbsp;<span class="op" id="8030374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030377">as</span>&nbsp;<span class="op" id="8030380">:=</span>&nbsp;<span class="keyword" id="8030383">func</span><span class="op" id="8030387">(</span><span class="ident" id="8030388">cond</span>&nbsp;<span class="builtintype" id="8030393">bool</span><span class="op" id="8030397">,</span>&nbsp;<span class="ident" id="8030399">s</span>&nbsp;<span class="builtintype" id="8030401">string</span><span class="op" id="8030407">,</span>&nbsp;<span class="ident" id="8030409">args</span>&nbsp;<span class="op" id="8030414">...</span><span class="keyword" id="8030417">interface</span><span class="op" id="8030426">{</span><span class="op" id="8030427">}</span><span class="op" id="8030428">)</span>&nbsp;<span class="op" id="8030430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030434">if</span>&nbsp;<span class="op" id="8030437">!</span><span class="ident" id="8030438">cond</span>&nbsp;<span class="op" id="8030443">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030448">t</span><span class="op" id="8030449">.</span><span class="ident" id="8030450">Fatalf</span><span class="op" id="8030456">(</span><span class="ident" id="8030457">s</span><span class="op" id="8030458">,</span>&nbsp;<span class="ident" id="8030460">args</span><span class="op" id="8030464">...</span><span class="op" id="8030467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030478">eo</span>&nbsp;<span class="op" id="8030481">:=</span>&nbsp;<span class="keyword" id="8030484">func</span><span class="op" id="8030488">(</span><span class="ident" id="8030489">cond</span>&nbsp;<span class="builtintype" id="8030494">bool</span><span class="op" id="8030498">,</span>&nbsp;<span class="ident" id="8030500">s</span>&nbsp;<span class="builtintype" id="8030502">string</span><span class="op" id="8030508">,</span>&nbsp;<span class="ident" id="8030510">args</span>&nbsp;<span class="op" id="8030515">...</span><span class="keyword" id="8030518">interface</span><span class="op" id="8030527">{</span><span class="op" id="8030528">}</span><span class="op" id="8030529">)</span>&nbsp;<span class="op" id="8030531">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030535">if</span>&nbsp;<span class="ident" id="8030538">cond</span>&nbsp;<span class="op" id="8030543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030548">t</span><span class="op" id="8030549">.</span><span class="ident" id="8030550">Fatalf</span><span class="op" id="8030556">(</span><span class="ident" id="8030557">s</span><span class="op" id="8030558">,</span>&nbsp;<span class="ident" id="8030560">args</span><span class="op" id="8030564">...</span><span class="op" id="8030567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030578">m</span>&nbsp;<span class="op" id="8030580">:=</span>&nbsp;<span class="ident" id="8030583">newPhyMemory</span><span class="op" id="8030595">(</span><span class="num" id="8030596">8</span>&nbsp;<span class="op" id="8030598">*</span>&nbsp;<span class="ident" id="8030600">PageSize</span><span class="op" id="8030608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030611">p1</span>&nbsp;<span class="op" id="8030614">:=</span>&nbsp;<span class="ident" id="8030617">m</span><span class="op" id="8030618">.</span><span class="ident" id="8030619">Page</span><span class="op" id="8030623">(</span><span class="num" id="8030624">1</span><span class="op" id="8030625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030628">p2</span>&nbsp;<span class="op" id="8030631">:=</span>&nbsp;<span class="ident" id="8030634">m</span><span class="op" id="8030635">.</span><span class="ident" id="8030636">Page</span><span class="op" id="8030640">(</span><span class="num" id="8030641">2</span><span class="op" id="8030642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030645">p3</span>&nbsp;<span class="op" id="8030648">:=</span>&nbsp;<span class="ident" id="8030651">m</span><span class="op" id="8030652">.</span><span class="ident" id="8030653">Page</span><span class="op" id="8030657">(</span><span class="num" id="8030658">3</span><span class="op" id="8030659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030663">pte1</span>&nbsp;<span class="op" id="8030668">:=</span>&nbsp;<span class="ident" id="8030671">ptEntry</span><span class="op" id="8030678">(</span><span class="num" id="8030679">2</span>&nbsp;<span class="op" id="8030681">*</span>&nbsp;<span class="ident" id="8030683">PageSize</span><span class="op" id="8030691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030694">pte1</span><span class="op" id="8030698">.</span><span class="ident" id="8030699">setBit</span><span class="op" id="8030705">(</span><span class="ident" id="8030706">pteValid</span><span class="op" id="8030714">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030718">p1</span><span class="op" id="8030720">.</span><span class="ident" id="8030721">WriteWord</span><span class="op" id="8030730">(</span><span class="num" id="8030731">0</span><span class="op" id="8030732">,</span>&nbsp;<span class="builtintype" id="8030734">uint32</span><span class="op" id="8030740">(</span><span class="ident" id="8030741">pte1</span><span class="op" id="8030745">)</span><span class="op" id="8030746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030749">pte1</span>&nbsp;<span class="op" id="8030754">+=</span>&nbsp;<span class="ident" id="8030757">PageSize</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030767">p1</span><span class="op" id="8030769">.</span><span class="ident" id="8030770">WriteWord</span><span class="op" id="8030779">(</span><span class="num" id="8030780">4</span><span class="op" id="8030781">*</span><span class="num" id="8030782">10</span><span class="op" id="8030784">,</span>&nbsp;<span class="builtintype" id="8030786">uint32</span><span class="op" id="8030792">(</span><span class="ident" id="8030793">pte1</span><span class="op" id="8030797">)</span><span class="op" id="8030798">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030802">for</span>&nbsp;<span class="ident" id="8030806">i</span>&nbsp;<span class="op" id="8030808">:=</span>&nbsp;<span class="builtintype" id="8030811">uint32</span><span class="op" id="8030817">(</span><span class="num" id="8030818">0</span><span class="op" id="8030819">)</span><span class="op" id="8030820">;</span>&nbsp;<span class="ident" id="8030822">i</span>&nbsp;<span class="op" id="8030824">&lt;</span>&nbsp;<span class="num" id="8030826">4</span><span class="op" id="8030827">;</span>&nbsp;<span class="ident" id="8030829">i</span><span class="op" id="8030830">++</span>&nbsp;<span class="op" id="8030833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030837">pte</span>&nbsp;<span class="op" id="8030841">:=</span>&nbsp;<span class="ident" id="8030844">ptEntry</span><span class="op" id="8030851">(</span><span class="op" id="8030852">(</span><span class="ident" id="8030853">i</span>&nbsp;<span class="op" id="8030855">+</span>&nbsp;<span class="num" id="8030857">4</span><span class="op" id="8030858">)</span>&nbsp;<span class="op" id="8030860">*</span>&nbsp;<span class="ident" id="8030862">PageSize</span><span class="op" id="8030870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030874">pte</span><span class="op" id="8030877">.</span><span class="ident" id="8030878">setBit</span><span class="op" id="8030884">(</span><span class="ident" id="8030885">pteValid</span><span class="op" id="8030893">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030897">p2</span><span class="op" id="8030899">.</span><span class="ident" id="8030900">WriteWord</span><span class="op" id="8030909">(</span><span class="num" id="8030910">4</span><span class="op" id="8030911">*</span><span class="ident" id="8030912">i</span><span class="op" id="8030913">,</span>&nbsp;<span class="builtintype" id="8030915">uint32</span><span class="op" id="8030921">(</span><span class="ident" id="8030922">pte</span><span class="op" id="8030925">)</span><span class="op" id="8030926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030930">p3</span><span class="op" id="8030932">.</span><span class="ident" id="8030933">WriteWord</span><span class="op" id="8030942">(</span><span class="num" id="8030943">4</span><span class="op" id="8030944">*</span><span class="op" id="8030945">(</span><span class="num" id="8030946">3</span><span class="op" id="8030947">-</span><span class="ident" id="8030948">i</span><span class="op" id="8030949">)</span><span class="op" id="8030950">,</span>&nbsp;<span class="builtintype" id="8030952">uint32</span><span class="op" id="8030958">(</span><span class="ident" id="8030959">pte</span><span class="op" id="8030962">)</span><span class="op" id="8030963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030970">vm</span>&nbsp;<span class="op" id="8030973">:=</span>&nbsp;<span class="ident" id="8030976">newVirtMemory</span><span class="op" id="8030989">(</span><span class="ident" id="8030990">m</span><span class="op" id="8030991">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030994">vm</span><span class="op" id="8030996">.</span><span class="ident" id="8030997">SetTable</span><span class="op" id="8031005">(</span><span class="ident" id="8031006">PageSize</span><span class="op" id="8031014">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8031018">//&nbsp;page&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8031062">//&nbsp;page&nbsp;B+0,&nbsp;B+1,&nbsp;B+2,&nbsp;B+3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;7,&nbsp;6,&nbsp;5,&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8031114">//&nbsp;where&nbsp;B&nbsp;=&nbsp;10&nbsp;*&nbsp;1024</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031138">w</span>&nbsp;<span class="op" id="8031140">:=</span>&nbsp;<span class="builtintype" id="8031143">uint32</span><span class="op" id="8031149">(</span><span class="num" id="8031150">0x37215a40</span><span class="op" id="8031160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031163">off</span>&nbsp;<span class="op" id="8031167">:=</span>&nbsp;<span class="builtintype" id="8031170">uint32</span><span class="op" id="8031176">(</span><span class="num" id="8031177">324</span><span class="op" id="8031180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031184">for</span>&nbsp;<span class="ident" id="8031188">i</span>&nbsp;<span class="op" id="8031190">:=</span>&nbsp;<span class="builtintype" id="8031193">uint32</span><span class="op" id="8031199">(</span><span class="num" id="8031200">0</span><span class="op" id="8031201">)</span><span class="op" id="8031202">;</span>&nbsp;<span class="ident" id="8031204">i</span>&nbsp;<span class="op" id="8031206">&lt;</span>&nbsp;<span class="num" id="8031208">4</span><span class="op" id="8031209">;</span>&nbsp;<span class="ident" id="8031211">i</span><span class="op" id="8031212">++</span>&nbsp;<span class="op" id="8031215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031219">wd</span>&nbsp;<span class="op" id="8031222">:=</span>&nbsp;<span class="ident" id="8031225">w</span>&nbsp;<span class="op" id="8031227">+</span>&nbsp;<span class="ident" id="8031229">i</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031233">e</span>&nbsp;<span class="op" id="8031235">:=</span>&nbsp;<span class="ident" id="8031238">vm</span><span class="op" id="8031240">.</span><span class="ident" id="8031241">WriteWord</span><span class="op" id="8031250">(</span><span class="ident" id="8031251">off</span><span class="op" id="8031254">+</span><span class="ident" id="8031255">i</span><span class="op" id="8031256">*</span><span class="ident" id="8031257">PageSize</span><span class="op" id="8031265">,</span>&nbsp;<span class="num" id="8031267">0</span><span class="op" id="8031268">,</span>&nbsp;<span class="ident" id="8031270">wd</span><span class="op" id="8031272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031276">as</span><span class="op" id="8031278">(</span><span class="ident" id="8031279">e</span>&nbsp;<span class="op" id="8031281">==</span>&nbsp;<span class="ident" id="8031284">nil</span><span class="op" id="8031287">,</span>&nbsp;<span class="string" id="8031289">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8031306">,</span>&nbsp;<span class="ident" id="8031308">e</span><span class="op" id="8031309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031313">w2</span><span class="op" id="8031315">,</span>&nbsp;<span class="ident" id="8031317">e</span>&nbsp;<span class="op" id="8031319">:=</span>&nbsp;<span class="ident" id="8031322">vm</span><span class="op" id="8031324">.</span><span class="ident" id="8031325">ReadWord</span><span class="op" id="8031333">(</span><span class="op" id="8031334">(</span><span class="num" id="8031335">10</span><span class="op" id="8031337">*</span><span class="num" id="8031338">1024</span><span class="op" id="8031342">+</span><span class="op" id="8031343">(</span><span class="num" id="8031344">3</span><span class="op" id="8031345">-</span><span class="ident" id="8031346">i</span><span class="op" id="8031347">)</span><span class="op" id="8031348">)</span><span class="op" id="8031349">*</span><span class="ident" id="8031350">PageSize</span><span class="op" id="8031358">+</span><span class="ident" id="8031359">off</span><span class="op" id="8031362">,</span>&nbsp;<span class="num" id="8031364">0</span><span class="op" id="8031365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031369">as</span><span class="op" id="8031371">(</span><span class="ident" id="8031372">e</span>&nbsp;<span class="op" id="8031374">==</span>&nbsp;<span class="ident" id="8031377">nil</span><span class="op" id="8031380">,</span>&nbsp;<span class="string" id="8031382">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8031398">,</span>&nbsp;<span class="ident" id="8031400">e</span><span class="op" id="8031401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031405">eo</span><span class="op" id="8031407">(</span><span class="ident" id="8031408">w2</span>&nbsp;<span class="op" id="8031411">!=</span>&nbsp;<span class="ident" id="8031414">wd</span><span class="op" id="8031416">,</span>&nbsp;<span class="string" id="8031418">&#34;expect&nbsp;0x%08x,&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8031445">,</span>&nbsp;<span class="ident" id="8031447">wd</span><span class="op" id="8031449">,</span>&nbsp;<span class="ident" id="8031451">w2</span><span class="op" id="8031453">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031460">b</span>&nbsp;<span class="op" id="8031462">:=</span>&nbsp;<span class="builtintype" id="8031465">byte</span><span class="op" id="8031469">(</span><span class="num" id="8031470">0x54</span><span class="op" id="8031474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031477">off</span>&nbsp;<span class="op" id="8031481">=</span>&nbsp;<span class="num" id="8031483">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031488">for</span>&nbsp;<span class="ident" id="8031492">i</span>&nbsp;<span class="op" id="8031494">:=</span>&nbsp;<span class="builtintype" id="8031497">uint32</span><span class="op" id="8031503">(</span><span class="num" id="8031504">0</span><span class="op" id="8031505">)</span><span class="op" id="8031506">;</span>&nbsp;<span class="ident" id="8031508">i</span>&nbsp;<span class="op" id="8031510">&lt;</span>&nbsp;<span class="num" id="8031512">4</span><span class="op" id="8031513">;</span>&nbsp;<span class="ident" id="8031515">i</span><span class="op" id="8031516">++</span>&nbsp;<span class="op" id="8031519">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031523">bt</span>&nbsp;<span class="op" id="8031526">:=</span>&nbsp;<span class="ident" id="8031529">b</span>&nbsp;<span class="op" id="8031531">+</span>&nbsp;<span class="builtintype" id="8031533">byte</span><span class="op" id="8031537">(</span><span class="ident" id="8031538">i</span><span class="op" id="8031539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031543">e</span>&nbsp;<span class="op" id="8031545">:=</span>&nbsp;<span class="ident" id="8031548">vm</span><span class="op" id="8031550">.</span><span class="ident" id="8031551">WriteByte</span><span class="op" id="8031560">(</span><span class="ident" id="8031561">off</span><span class="op" id="8031564">+</span><span class="ident" id="8031565">i</span><span class="op" id="8031566">*</span><span class="ident" id="8031567">PageSize</span><span class="op" id="8031575">,</span>&nbsp;<span class="num" id="8031577">0</span><span class="op" id="8031578">,</span>&nbsp;<span class="ident" id="8031580">bt</span><span class="op" id="8031582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031586">as</span><span class="op" id="8031588">(</span><span class="ident" id="8031589">e</span>&nbsp;<span class="op" id="8031591">==</span>&nbsp;<span class="ident" id="8031594">nil</span><span class="op" id="8031597">,</span>&nbsp;<span class="string" id="8031599">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8031616">,</span>&nbsp;<span class="ident" id="8031618">e</span><span class="op" id="8031619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031623">b2</span><span class="op" id="8031625">,</span>&nbsp;<span class="ident" id="8031627">e</span>&nbsp;<span class="op" id="8031629">:=</span>&nbsp;<span class="ident" id="8031632">vm</span><span class="op" id="8031634">.</span><span class="ident" id="8031635">ReadByte</span><span class="op" id="8031643">(</span><span class="op" id="8031644">(</span><span class="num" id="8031645">10</span><span class="op" id="8031647">*</span><span class="num" id="8031648">1024</span><span class="op" id="8031652">+</span><span class="op" id="8031653">(</span><span class="num" id="8031654">3</span><span class="op" id="8031655">-</span><span class="ident" id="8031656">i</span><span class="op" id="8031657">)</span><span class="op" id="8031658">)</span><span class="op" id="8031659">*</span><span class="ident" id="8031660">PageSize</span><span class="op" id="8031668">+</span><span class="ident" id="8031669">off</span><span class="op" id="8031672">,</span>&nbsp;<span class="num" id="8031674">0</span><span class="op" id="8031675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031679">as</span><span class="op" id="8031681">(</span><span class="ident" id="8031682">e</span>&nbsp;<span class="op" id="8031684">==</span>&nbsp;<span class="ident" id="8031687">nil</span><span class="op" id="8031690">,</span>&nbsp;<span class="string" id="8031692">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8031708">,</span>&nbsp;<span class="ident" id="8031710">e</span><span class="op" id="8031711">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031715">eo</span><span class="op" id="8031717">(</span><span class="ident" id="8031718">b2</span>&nbsp;<span class="op" id="8031721">!=</span>&nbsp;<span class="ident" id="8031724">bt</span><span class="op" id="8031726">,</span>&nbsp;<span class="string" id="8031728">&#34;expect&nbsp;0x%02x,&nbsp;got&nbsp;0x%02x&#34;</span><span class="op" id="8031755">,</span>&nbsp;<span class="ident" id="8031757">bt</span><span class="op" id="8031759">,</span>&nbsp;<span class="ident" id="8031761">b2</span><span class="op" id="8031763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031766">}</span><br>
<span class="lineno"></span><span class="op" id="8031768">}</span>
</div>
</body>
</html>
