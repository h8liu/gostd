<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/asn1</h2>
<ul>
<li><a href="/gostd/encoding/asn1/asn1.go.html">asn1.go</a></li>
<li><a href="/gostd/encoding/asn1/asn1_test.go.html">asn1_test.go</a></li>
<li><a href="/gostd/encoding/asn1/common.go.html">common.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal.go.html" class="current">marshal.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal_test.go.html">marshal_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4523166">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4523221">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4523275">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4523326">package</span>&nbsp;<span class="ident" id="4523334">asn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4523340">import</span>&nbsp;<span class="op" id="4523347">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523350">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523359">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523369">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523376">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523382">&#34;math/big&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523394">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523405">&#34;time&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4523413">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4523428">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4523431">//&nbsp;A&nbsp;forkableWriter&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;buffer&nbsp;that&nbsp;can&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4523486">//&nbsp;&#39;forked&#39;&nbsp;to&nbsp;create&nbsp;new&nbsp;forkableWriters&nbsp;that&nbsp;bracket&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4523545">//&nbsp;original.&nbsp;&nbsp;After</span><br>
<span class="lineno"></span><span class="comment" id="4523565">//&nbsp;&nbsp;&nbsp;&nbsp;pre,&nbsp;post&nbsp;:=&nbsp;w.fork();</span><br>
<span class="lineno"></span><span class="comment" id="4523594">//&nbsp;the&nbsp;overall&nbsp;sequence&nbsp;of&nbsp;bytes&nbsp;represented&nbsp;is&nbsp;logically&nbsp;w+pre+post.</span><br>
<span class="lineno"></span><span class="keyword" id="4523664">type</span>&nbsp;<span class="ident" id="4523669">forkableWriter</span>&nbsp;<span class="keyword" id="4523684">struct</span>&nbsp;<span class="op" id="4523691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4523694">*</span><span class="ident" id="4523695">bytes</span><span class="op" id="4523700">.</span><span class="ident" id="4523701">Buffer</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4523709">pre</span><span class="op" id="4523712">,</span>&nbsp;<span class="ident" id="4523714">post</span>&nbsp;<span class="op" id="4523719">*</span><span class="ident" id="4523720">forkableWriter</span><br>
<span class="lineno"></span><span class="op" id="4523735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4523738">func</span>&nbsp;<span class="ident" id="4523743">newForkableWriter</span><span class="op" id="4523760">(</span><span class="op" id="4523761">)</span>&nbsp;<span class="op" id="4523763">*</span><span class="ident" id="4523764">forkableWriter</span>&nbsp;<span class="op" id="4523779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4523782">return</span>&nbsp;<span class="op" id="4523789">&amp;</span><span class="ident" id="4523790">forkableWriter</span><span class="op" id="4523804">{</span><span class="builtinfunc" id="4523805">new</span><span class="op" id="4523808">(</span><span class="ident" id="4523809">bytes</span><span class="op" id="4523814">.</span><span class="ident" id="4523815">Buffer</span><span class="op" id="4523821">)</span><span class="op" id="4523822">,</span>&nbsp;<span class="builtintype" id="4523824">nil</span><span class="op" id="4523827">,</span>&nbsp;<span class="builtintype" id="4523829">nil</span><span class="op" id="4523832">}</span><br>
<span class="lineno">30</span><span class="op" id="4523834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4523837">func</span>&nbsp;<span class="op" id="4523842">(</span><span class="ident" id="4523843">f</span>&nbsp;<span class="op" id="4523845">*</span><span class="ident" id="4523846">forkableWriter</span><span class="op" id="4523860">)</span>&nbsp;<span class="ident" id="4523862">fork</span><span class="op" id="4523866">(</span><span class="op" id="4523867">)</span>&nbsp;<span class="op" id="4523869">(</span><span class="ident" id="4523870">pre</span><span class="op" id="4523873">,</span>&nbsp;<span class="ident" id="4523875">post</span>&nbsp;<span class="op" id="4523880">*</span><span class="ident" id="4523881">forkableWriter</span><span class="op" id="4523895">)</span>&nbsp;<span class="op" id="4523897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4523900">if</span>&nbsp;<span class="ident" id="4523903">f</span><span class="op" id="4523904">.</span><span class="ident" id="4523905">pre</span>&nbsp;<span class="op" id="4523909">!=</span>&nbsp;<span class="builtintype" id="4523912">nil</span>&nbsp;<span class="op" id="4523916">||</span>&nbsp;<span class="ident" id="4523919">f</span><span class="op" id="4523920">.</span><span class="ident" id="4523921">post</span>&nbsp;<span class="op" id="4523926">!=</span>&nbsp;<span class="builtintype" id="4523929">nil</span>&nbsp;<span class="op" id="4523933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4523937">panic</span><span class="op" id="4523942">(</span><span class="string" id="4523943">&#34;have&nbsp;already&nbsp;forked&#34;</span><span class="op" id="4523964">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4523967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4523970">f</span><span class="op" id="4523971">.</span><span class="ident" id="4523972">pre</span>&nbsp;<span class="op" id="4523976">=</span>&nbsp;<span class="ident" id="4523978">newForkableWriter</span><span class="op" id="4523995">(</span><span class="op" id="4523996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4523999">f</span><span class="op" id="4524000">.</span><span class="ident" id="4524001">post</span>&nbsp;<span class="op" id="4524006">=</span>&nbsp;<span class="ident" id="4524008">newForkableWriter</span><span class="op" id="4524025">(</span><span class="op" id="4524026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524029">return</span>&nbsp;<span class="ident" id="4524036">f</span><span class="op" id="4524037">.</span><span class="ident" id="4524038">pre</span><span class="op" id="4524041">,</span>&nbsp;<span class="ident" id="4524043">f</span><span class="op" id="4524044">.</span><span class="ident" id="4524045">post</span><br>
<span class="lineno"></span><span class="op" id="4524050">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4524053">func</span>&nbsp;<span class="op" id="4524058">(</span><span class="ident" id="4524059">f</span>&nbsp;<span class="op" id="4524061">*</span><span class="ident" id="4524062">forkableWriter</span><span class="op" id="4524076">)</span>&nbsp;<span class="ident" id="4524078">Len</span><span class="op" id="4524081">(</span><span class="op" id="4524082">)</span>&nbsp;<span class="op" id="4524084">(</span><span class="ident" id="4524085">l</span>&nbsp;<span class="builtintype" id="4524087">int</span><span class="op" id="4524090">)</span>&nbsp;<span class="op" id="4524092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524095">l</span>&nbsp;<span class="op" id="4524097">+=</span>&nbsp;<span class="ident" id="4524100">f</span><span class="op" id="4524101">.</span><span class="ident" id="4524102">Buffer</span><span class="op" id="4524108">.</span><span class="ident" id="4524109">Len</span><span class="op" id="4524112">(</span><span class="op" id="4524113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524116">if</span>&nbsp;<span class="ident" id="4524119">f</span><span class="op" id="4524120">.</span><span class="ident" id="4524121">pre</span>&nbsp;<span class="op" id="4524125">!=</span>&nbsp;<span class="builtintype" id="4524128">nil</span>&nbsp;<span class="op" id="4524132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524136">l</span>&nbsp;<span class="op" id="4524138">+=</span>&nbsp;<span class="ident" id="4524141">f</span><span class="op" id="4524142">.</span><span class="ident" id="4524143">pre</span><span class="op" id="4524146">.</span><span class="ident" id="4524147">Len</span><span class="op" id="4524150">(</span><span class="op" id="4524151">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524157">if</span>&nbsp;<span class="ident" id="4524160">f</span><span class="op" id="4524161">.</span><span class="ident" id="4524162">post</span>&nbsp;<span class="op" id="4524167">!=</span>&nbsp;<span class="builtintype" id="4524170">nil</span>&nbsp;<span class="op" id="4524174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524178">l</span>&nbsp;<span class="op" id="4524180">+=</span>&nbsp;<span class="ident" id="4524183">f</span><span class="op" id="4524184">.</span><span class="ident" id="4524185">post</span><span class="op" id="4524189">.</span><span class="ident" id="4524190">Len</span><span class="op" id="4524193">(</span><span class="op" id="4524194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524200">return</span><br>
<span class="lineno">50</span><span class="op" id="4524207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4524210">func</span>&nbsp;<span class="op" id="4524215">(</span><span class="ident" id="4524216">f</span>&nbsp;<span class="op" id="4524218">*</span><span class="ident" id="4524219">forkableWriter</span><span class="op" id="4524233">)</span>&nbsp;<span class="ident" id="4524235">writeTo</span><span class="op" id="4524242">(</span><span class="ident" id="4524243">out</span>&nbsp;<span class="ident" id="4524247">io</span><span class="op" id="4524249">.</span><span class="ident" id="4524250">Writer</span><span class="op" id="4524256">)</span>&nbsp;<span class="op" id="4524258">(</span><span class="ident" id="4524259">n</span>&nbsp;<span class="builtintype" id="4524261">int</span><span class="op" id="4524264">,</span>&nbsp;<span class="ident" id="4524266">err</span>&nbsp;<span class="builtintype" id="4524270">error</span><span class="op" id="4524275">)</span>&nbsp;<span class="op" id="4524277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524280">n</span><span class="op" id="4524281">,</span>&nbsp;<span class="ident" id="4524283">err</span>&nbsp;<span class="op" id="4524287">=</span>&nbsp;<span class="ident" id="4524289">out</span><span class="op" id="4524292">.</span><span class="ident" id="4524293">Write</span><span class="op" id="4524298">(</span><span class="ident" id="4524299">f</span><span class="op" id="4524300">.</span><span class="ident" id="4524301">Bytes</span><span class="op" id="4524306">(</span><span class="op" id="4524307">)</span><span class="op" id="4524308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524311">if</span>&nbsp;<span class="ident" id="4524314">err</span>&nbsp;<span class="op" id="4524318">!=</span>&nbsp;<span class="builtintype" id="4524321">nil</span>&nbsp;<span class="op" id="4524325">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524329">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524341">var</span>&nbsp;<span class="ident" id="4524345">nn</span>&nbsp;<span class="builtintype" id="4524348">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524354">if</span>&nbsp;<span class="ident" id="4524357">f</span><span class="op" id="4524358">.</span><span class="ident" id="4524359">pre</span>&nbsp;<span class="op" id="4524363">!=</span>&nbsp;<span class="builtintype" id="4524366">nil</span>&nbsp;<span class="op" id="4524370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524374">nn</span><span class="op" id="4524376">,</span>&nbsp;<span class="ident" id="4524378">err</span>&nbsp;<span class="op" id="4524382">=</span>&nbsp;<span class="ident" id="4524384">f</span><span class="op" id="4524385">.</span><span class="ident" id="4524386">pre</span><span class="op" id="4524389">.</span><span class="ident" id="4524390">writeTo</span><span class="op" id="4524397">(</span><span class="ident" id="4524398">out</span><span class="op" id="4524401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524405">n</span>&nbsp;<span class="op" id="4524407">+=</span>&nbsp;<span class="ident" id="4524410">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524415">if</span>&nbsp;<span class="ident" id="4524418">err</span>&nbsp;<span class="op" id="4524422">!=</span>&nbsp;<span class="builtintype" id="4524425">nil</span>&nbsp;<span class="op" id="4524429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524434">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524450">if</span>&nbsp;<span class="ident" id="4524453">f</span><span class="op" id="4524454">.</span><span class="ident" id="4524455">post</span>&nbsp;<span class="op" id="4524460">!=</span>&nbsp;<span class="builtintype" id="4524463">nil</span>&nbsp;<span class="op" id="4524467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524471">nn</span><span class="op" id="4524473">,</span>&nbsp;<span class="ident" id="4524475">err</span>&nbsp;<span class="op" id="4524479">=</span>&nbsp;<span class="ident" id="4524481">f</span><span class="op" id="4524482">.</span><span class="ident" id="4524483">post</span><span class="op" id="4524487">.</span><span class="ident" id="4524488">writeTo</span><span class="op" id="4524495">(</span><span class="ident" id="4524496">out</span><span class="op" id="4524499">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524503">n</span>&nbsp;<span class="op" id="4524505">+=</span>&nbsp;<span class="ident" id="4524508">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524515">return</span><br>
<span class="lineno"></span><span class="op" id="4524522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4524525">func</span>&nbsp;<span class="ident" id="4524530">marshalBase128Int</span><span class="op" id="4524547">(</span><span class="ident" id="4524548">out</span>&nbsp;<span class="op" id="4524552">*</span><span class="ident" id="4524553">forkableWriter</span><span class="op" id="4524567">,</span>&nbsp;<span class="ident" id="4524569">n</span>&nbsp;<span class="builtintype" id="4524571">int64</span><span class="op" id="4524576">)</span>&nbsp;<span class="op" id="4524578">(</span><span class="ident" id="4524579">err</span>&nbsp;<span class="builtintype" id="4524583">error</span><span class="op" id="4524588">)</span>&nbsp;<span class="op" id="4524590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524593">if</span>&nbsp;<span class="ident" id="4524596">n</span>&nbsp;<span class="op" id="4524598">==</span>&nbsp;<span class="num" id="4524601">0</span>&nbsp;<span class="op" id="4524603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524607">err</span>&nbsp;<span class="op" id="4524611">=</span>&nbsp;<span class="ident" id="4524613">out</span><span class="op" id="4524616">.</span><span class="ident" id="4524617">WriteByte</span><span class="op" id="4524626">(</span><span class="num" id="4524627">0</span><span class="op" id="4524628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524632">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524640">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524644">l</span>&nbsp;<span class="op" id="4524646">:=</span>&nbsp;<span class="num" id="4524649">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524652">for</span>&nbsp;<span class="ident" id="4524656">i</span>&nbsp;<span class="op" id="4524658">:=</span>&nbsp;<span class="ident" id="4524661">n</span><span class="op" id="4524662">;</span>&nbsp;<span class="ident" id="4524664">i</span>&nbsp;<span class="op" id="4524666">&gt;</span>&nbsp;<span class="num" id="4524668">0</span><span class="op" id="4524669">;</span>&nbsp;<span class="ident" id="4524671">i</span>&nbsp;<span class="op" id="4524673">&gt;&gt;=</span>&nbsp;<span class="num" id="4524677">7</span>&nbsp;<span class="op" id="4524679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524683">l</span><span class="op" id="4524684">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524688">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524692">for</span>&nbsp;<span class="ident" id="4524696">i</span>&nbsp;<span class="op" id="4524698">:=</span>&nbsp;<span class="ident" id="4524701">l</span>&nbsp;<span class="op" id="4524703">-</span>&nbsp;<span class="num" id="4524705">1</span><span class="op" id="4524706">;</span>&nbsp;<span class="ident" id="4524708">i</span>&nbsp;<span class="op" id="4524710">&gt;=</span>&nbsp;<span class="num" id="4524713">0</span><span class="op" id="4524714">;</span>&nbsp;<span class="ident" id="4524716">i</span><span class="op" id="4524717">--</span>&nbsp;<span class="op" id="4524720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524724">o</span>&nbsp;<span class="op" id="4524726">:=</span>&nbsp;<span class="builtintype" id="4524729">byte</span><span class="op" id="4524733">(</span><span class="ident" id="4524734">n</span>&nbsp;<span class="op" id="4524736">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4524739">uint</span><span class="op" id="4524743">(</span><span class="ident" id="4524744">i</span><span class="op" id="4524745">*</span><span class="num" id="4524746">7</span><span class="op" id="4524747">)</span><span class="op" id="4524748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524752">o</span>&nbsp;<span class="op" id="4524754">&amp;=</span>&nbsp;<span class="num" id="4524757">0x7f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524764">if</span>&nbsp;<span class="ident" id="4524767">i</span>&nbsp;<span class="op" id="4524769">!=</span>&nbsp;<span class="num" id="4524772">0</span>&nbsp;<span class="op" id="4524774">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524779">o</span>&nbsp;<span class="op" id="4524781">|=</span>&nbsp;<span class="num" id="4524784">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524795">err</span>&nbsp;<span class="op" id="4524799">=</span>&nbsp;<span class="ident" id="4524801">out</span><span class="op" id="4524804">.</span><span class="ident" id="4524805">WriteByte</span><span class="op" id="4524814">(</span><span class="ident" id="4524815">o</span><span class="op" id="4524816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524820">if</span>&nbsp;<span class="ident" id="4524823">err</span>&nbsp;<span class="op" id="4524827">!=</span>&nbsp;<span class="builtintype" id="4524830">nil</span>&nbsp;<span class="op" id="4524834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524839">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4524851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524855">return</span>&nbsp;<span class="builtintype" id="4524862">nil</span><br>
<span class="lineno"></span><span class="op" id="4524866">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4524869">func</span>&nbsp;<span class="ident" id="4524874">marshalInt64</span><span class="op" id="4524886">(</span><span class="ident" id="4524887">out</span>&nbsp;<span class="op" id="4524891">*</span><span class="ident" id="4524892">forkableWriter</span><span class="op" id="4524906">,</span>&nbsp;<span class="ident" id="4524908">i</span>&nbsp;<span class="builtintype" id="4524910">int64</span><span class="op" id="4524915">)</span>&nbsp;<span class="op" id="4524917">(</span><span class="ident" id="4524918">err</span>&nbsp;<span class="builtintype" id="4524922">error</span><span class="op" id="4524927">)</span>&nbsp;<span class="op" id="4524929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524932">n</span>&nbsp;<span class="op" id="4524934">:=</span>&nbsp;<span class="ident" id="4524937">int64Length</span><span class="op" id="4524948">(</span><span class="ident" id="4524949">i</span><span class="op" id="4524950">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4524954">for</span>&nbsp;<span class="op" id="4524958">;</span>&nbsp;<span class="ident" id="4524960">n</span>&nbsp;<span class="op" id="4524962">&gt;</span>&nbsp;<span class="num" id="4524964">0</span><span class="op" id="4524965">;</span>&nbsp;<span class="ident" id="4524967">n</span><span class="op" id="4524968">--</span>&nbsp;<span class="op" id="4524971">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4524975">err</span>&nbsp;<span class="op" id="4524979">=</span>&nbsp;<span class="ident" id="4524981">out</span><span class="op" id="4524984">.</span><span class="ident" id="4524985">WriteByte</span><span class="op" id="4524994">(</span><span class="builtintype" id="4524995">byte</span><span class="op" id="4524999">(</span><span class="ident" id="4525000">i</span>&nbsp;<span class="op" id="4525002">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4525005">uint</span><span class="op" id="4525009">(</span><span class="op" id="4525010">(</span><span class="ident" id="4525011">n</span><span class="op" id="4525012">-</span><span class="num" id="4525013">1</span><span class="op" id="4525014">)</span><span class="op" id="4525015">*</span><span class="num" id="4525016">8</span><span class="op" id="4525017">)</span><span class="op" id="4525018">)</span><span class="op" id="4525019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525023">if</span>&nbsp;<span class="ident" id="4525026">err</span>&nbsp;<span class="op" id="4525030">!=</span>&nbsp;<span class="builtintype" id="4525033">nil</span>&nbsp;<span class="op" id="4525037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525042">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525054">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525058">return</span>&nbsp;<span class="builtintype" id="4525065">nil</span><br>
<span class="lineno"></span><span class="op" id="4525069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4525072">func</span>&nbsp;<span class="ident" id="4525077">int64Length</span><span class="op" id="4525088">(</span><span class="ident" id="4525089">i</span>&nbsp;<span class="builtintype" id="4525091">int64</span><span class="op" id="4525096">)</span>&nbsp;<span class="op" id="4525098">(</span><span class="ident" id="4525099">numBytes</span>&nbsp;<span class="builtintype" id="4525108">int</span><span class="op" id="4525111">)</span>&nbsp;<span class="op" id="4525113">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525116">numBytes</span>&nbsp;<span class="op" id="4525125">=</span>&nbsp;<span class="num" id="4525127">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525131">for</span>&nbsp;<span class="ident" id="4525135">i</span>&nbsp;<span class="op" id="4525137">&gt;</span>&nbsp;<span class="num" id="4525139">127</span>&nbsp;<span class="op" id="4525143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525147">numBytes</span><span class="op" id="4525155">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525160">i</span>&nbsp;<span class="op" id="4525162">&gt;&gt;=</span>&nbsp;<span class="num" id="4525166">8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525173">for</span>&nbsp;<span class="ident" id="4525177">i</span>&nbsp;<span class="op" id="4525179">&lt;</span>&nbsp;<span class="op" id="4525181">-</span><span class="num" id="4525182">128</span>&nbsp;<span class="op" id="4525186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525190">numBytes</span><span class="op" id="4525198">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525203">i</span>&nbsp;<span class="op" id="4525205">&gt;&gt;=</span>&nbsp;<span class="num" id="4525209">8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525216">return</span><br>
<span class="lineno"></span><span class="op" id="4525223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="4525226">func</span>&nbsp;<span class="ident" id="4525231">marshalBigInt</span><span class="op" id="4525244">(</span><span class="ident" id="4525245">out</span>&nbsp;<span class="op" id="4525249">*</span><span class="ident" id="4525250">forkableWriter</span><span class="op" id="4525264">,</span>&nbsp;<span class="ident" id="4525266">n</span>&nbsp;<span class="op" id="4525268">*</span><span class="ident" id="4525269">big</span><span class="op" id="4525272">.</span><span class="ident" id="4525273">Int</span><span class="op" id="4525276">)</span>&nbsp;<span class="op" id="4525278">(</span><span class="ident" id="4525279">err</span>&nbsp;<span class="builtintype" id="4525283">error</span><span class="op" id="4525288">)</span>&nbsp;<span class="op" id="4525290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525293">if</span>&nbsp;<span class="ident" id="4525296">n</span><span class="op" id="4525297">.</span><span class="ident" id="4525298">Sign</span><span class="op" id="4525302">(</span><span class="op" id="4525303">)</span>&nbsp;<span class="op" id="4525305">&lt;</span>&nbsp;<span class="num" id="4525307">0</span>&nbsp;<span class="op" id="4525309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4525313">//&nbsp;A&nbsp;negative&nbsp;number&nbsp;has&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;two&#39;s-complement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4525376">//&nbsp;form.&nbsp;So&nbsp;we&#39;ll&nbsp;subtract&nbsp;1&nbsp;and&nbsp;invert.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4525426">//&nbsp;most-significant-bit&nbsp;isn&#39;t&nbsp;set&nbsp;then&nbsp;we&#39;ll&nbsp;need&nbsp;to&nbsp;pad&nbsp;the</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4525489">//&nbsp;beginning&nbsp;with&nbsp;0xff&nbsp;in&nbsp;order&nbsp;to&nbsp;keep&nbsp;the&nbsp;number&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525552">nMinus1</span>&nbsp;<span class="op" id="4525560">:=</span>&nbsp;<span class="builtinfunc" id="4525563">new</span><span class="op" id="4525566">(</span><span class="ident" id="4525567">big</span><span class="op" id="4525570">.</span><span class="ident" id="4525571">Int</span><span class="op" id="4525574">)</span><span class="op" id="4525575">.</span><span class="ident" id="4525576">Neg</span><span class="op" id="4525579">(</span><span class="ident" id="4525580">n</span><span class="op" id="4525581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525585">nMinus1</span><span class="op" id="4525592">.</span><span class="ident" id="4525593">Sub</span><span class="op" id="4525596">(</span><span class="ident" id="4525597">nMinus1</span><span class="op" id="4525604">,</span>&nbsp;<span class="ident" id="4525606">bigOne</span><span class="op" id="4525612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525616">bytes</span>&nbsp;<span class="op" id="4525622">:=</span>&nbsp;<span class="ident" id="4525625">nMinus1</span><span class="op" id="4525632">.</span><span class="ident" id="4525633">Bytes</span><span class="op" id="4525638">(</span><span class="op" id="4525639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525643">for</span>&nbsp;<span class="ident" id="4525647">i</span>&nbsp;<span class="op" id="4525649">:=</span>&nbsp;<span class="keyword" id="4525652">range</span>&nbsp;<span class="ident" id="4525658">bytes</span>&nbsp;<span class="op" id="4525664">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525669">bytes</span><span class="op" id="4525674">[</span><span class="ident" id="4525675">i</span><span class="op" id="4525676">]</span>&nbsp;<span class="op" id="4525678">^=</span>&nbsp;<span class="num" id="4525681">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525692">if</span>&nbsp;<span class="builtinfunc" id="4525695">len</span><span class="op" id="4525698">(</span><span class="ident" id="4525699">bytes</span><span class="op" id="4525704">)</span>&nbsp;<span class="op" id="4525706">==</span>&nbsp;<span class="num" id="4525709">0</span>&nbsp;<span class="op" id="4525711">||</span>&nbsp;<span class="ident" id="4525714">bytes</span><span class="op" id="4525719">[</span><span class="num" id="4525720">0</span><span class="op" id="4525721">]</span><span class="op" id="4525722">&amp;</span><span class="num" id="4525723">0x80</span>&nbsp;<span class="op" id="4525728">==</span>&nbsp;<span class="num" id="4525731">0</span>&nbsp;<span class="op" id="4525733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525738">err</span>&nbsp;<span class="op" id="4525742">=</span>&nbsp;<span class="ident" id="4525744">out</span><span class="op" id="4525747">.</span><span class="ident" id="4525748">WriteByte</span><span class="op" id="4525757">(</span><span class="num" id="4525758">0xff</span><span class="op" id="4525762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525767">if</span>&nbsp;<span class="ident" id="4525770">err</span>&nbsp;<span class="op" id="4525774">!=</span>&nbsp;<span class="builtintype" id="4525777">nil</span>&nbsp;<span class="op" id="4525781">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525787">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525805">_</span><span class="op" id="4525806">,</span>&nbsp;<span class="ident" id="4525808">err</span>&nbsp;<span class="op" id="4525812">=</span>&nbsp;<span class="ident" id="4525814">out</span><span class="op" id="4525817">.</span><span class="ident" id="4525818">Write</span><span class="op" id="4525823">(</span><span class="ident" id="4525824">bytes</span><span class="op" id="4525829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525832">}</span>&nbsp;<span class="keyword" id="4525834">else</span>&nbsp;<span class="keyword" id="4525839">if</span>&nbsp;<span class="ident" id="4525842">n</span><span class="op" id="4525843">.</span><span class="ident" id="4525844">Sign</span><span class="op" id="4525848">(</span><span class="op" id="4525849">)</span>&nbsp;<span class="op" id="4525851">==</span>&nbsp;<span class="num" id="4525854">0</span>&nbsp;<span class="op" id="4525856">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4525860">//&nbsp;Zero&nbsp;is&nbsp;written&nbsp;as&nbsp;a&nbsp;single&nbsp;0&nbsp;zero&nbsp;rather&nbsp;than&nbsp;no&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525922">err</span>&nbsp;<span class="op" id="4525926">=</span>&nbsp;<span class="ident" id="4525928">out</span><span class="op" id="4525931">.</span><span class="ident" id="4525932">WriteByte</span><span class="op" id="4525941">(</span><span class="num" id="4525942">0x00</span><span class="op" id="4525946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4525949">}</span>&nbsp;<span class="keyword" id="4525951">else</span>&nbsp;<span class="op" id="4525956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4525960">bytes</span>&nbsp;<span class="op" id="4525966">:=</span>&nbsp;<span class="ident" id="4525969">n</span><span class="op" id="4525970">.</span><span class="ident" id="4525971">Bytes</span><span class="op" id="4525976">(</span><span class="op" id="4525977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4525981">if</span>&nbsp;<span class="builtinfunc" id="4525984">len</span><span class="op" id="4525987">(</span><span class="ident" id="4525988">bytes</span><span class="op" id="4525993">)</span>&nbsp;<span class="op" id="4525995">&gt;</span>&nbsp;<span class="num" id="4525997">0</span>&nbsp;<span class="op" id="4525999">&amp;&amp;</span>&nbsp;<span class="ident" id="4526002">bytes</span><span class="op" id="4526007">[</span><span class="num" id="4526008">0</span><span class="op" id="4526009">]</span><span class="op" id="4526010">&amp;</span><span class="num" id="4526011">0x80</span>&nbsp;<span class="op" id="4526016">!=</span>&nbsp;<span class="num" id="4526019">0</span>&nbsp;<span class="op" id="4526021">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4526026">//&nbsp;We&#39;ll&nbsp;have&nbsp;to&nbsp;pad&nbsp;this&nbsp;with&nbsp;0x00&nbsp;in&nbsp;order&nbsp;to&nbsp;stop&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4526085">//&nbsp;looking&nbsp;like&nbsp;a&nbsp;negative&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526123">err</span>&nbsp;<span class="op" id="4526127">=</span>&nbsp;<span class="ident" id="4526129">out</span><span class="op" id="4526132">.</span><span class="ident" id="4526133">WriteByte</span><span class="op" id="4526142">(</span><span class="num" id="4526143">0</span><span class="op" id="4526144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526149">if</span>&nbsp;<span class="ident" id="4526152">err</span>&nbsp;<span class="op" id="4526156">!=</span>&nbsp;<span class="builtintype" id="4526159">nil</span>&nbsp;<span class="op" id="4526163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526169">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526187">_</span><span class="op" id="4526188">,</span>&nbsp;<span class="ident" id="4526190">err</span>&nbsp;<span class="op" id="4526194">=</span>&nbsp;<span class="ident" id="4526196">out</span><span class="op" id="4526199">.</span><span class="ident" id="4526200">Write</span><span class="op" id="4526205">(</span><span class="ident" id="4526206">bytes</span><span class="op" id="4526211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526217">return</span><br>
<span class="lineno">165</span><span class="op" id="4526224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526227">func</span>&nbsp;<span class="ident" id="4526232">marshalLength</span><span class="op" id="4526245">(</span><span class="ident" id="4526246">out</span>&nbsp;<span class="op" id="4526250">*</span><span class="ident" id="4526251">forkableWriter</span><span class="op" id="4526265">,</span>&nbsp;<span class="ident" id="4526267">i</span>&nbsp;<span class="builtintype" id="4526269">int</span><span class="op" id="4526272">)</span>&nbsp;<span class="op" id="4526274">(</span><span class="ident" id="4526275">err</span>&nbsp;<span class="builtintype" id="4526279">error</span><span class="op" id="4526284">)</span>&nbsp;<span class="op" id="4526286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526289">n</span>&nbsp;<span class="op" id="4526291">:=</span>&nbsp;<span class="ident" id="4526294">lengthLength</span><span class="op" id="4526306">(</span><span class="ident" id="4526307">i</span><span class="op" id="4526308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526312">for</span>&nbsp;<span class="op" id="4526316">;</span>&nbsp;<span class="ident" id="4526318">n</span>&nbsp;<span class="op" id="4526320">&gt;</span>&nbsp;<span class="num" id="4526322">0</span><span class="op" id="4526323">;</span>&nbsp;<span class="ident" id="4526325">n</span><span class="op" id="4526326">--</span>&nbsp;<span class="op" id="4526329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526333">err</span>&nbsp;<span class="op" id="4526337">=</span>&nbsp;<span class="ident" id="4526339">out</span><span class="op" id="4526342">.</span><span class="ident" id="4526343">WriteByte</span><span class="op" id="4526352">(</span><span class="builtintype" id="4526353">byte</span><span class="op" id="4526357">(</span><span class="ident" id="4526358">i</span>&nbsp;<span class="op" id="4526360">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4526363">uint</span><span class="op" id="4526367">(</span><span class="op" id="4526368">(</span><span class="ident" id="4526369">n</span><span class="op" id="4526370">-</span><span class="num" id="4526371">1</span><span class="op" id="4526372">)</span><span class="op" id="4526373">*</span><span class="num" id="4526374">8</span><span class="op" id="4526375">)</span><span class="op" id="4526376">)</span><span class="op" id="4526377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526381">if</span>&nbsp;<span class="ident" id="4526384">err</span>&nbsp;<span class="op" id="4526388">!=</span>&nbsp;<span class="builtintype" id="4526391">nil</span>&nbsp;<span class="op" id="4526395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526400">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526409">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526416">return</span>&nbsp;<span class="builtintype" id="4526423">nil</span><br>
<span class="lineno"></span><span class="op" id="4526427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4526430">func</span>&nbsp;<span class="ident" id="4526435">lengthLength</span><span class="op" id="4526447">(</span><span class="ident" id="4526448">i</span>&nbsp;<span class="builtintype" id="4526450">int</span><span class="op" id="4526453">)</span>&nbsp;<span class="op" id="4526455">(</span><span class="ident" id="4526456">numBytes</span>&nbsp;<span class="builtintype" id="4526465">int</span><span class="op" id="4526468">)</span>&nbsp;<span class="op" id="4526470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526473">numBytes</span>&nbsp;<span class="op" id="4526482">=</span>&nbsp;<span class="num" id="4526484">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526487">for</span>&nbsp;<span class="ident" id="4526491">i</span>&nbsp;<span class="op" id="4526493">&gt;</span>&nbsp;<span class="num" id="4526495">255</span>&nbsp;<span class="op" id="4526499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526503">numBytes</span><span class="op" id="4526511">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526516">i</span>&nbsp;<span class="op" id="4526518">&gt;&gt;=</span>&nbsp;<span class="num" id="4526522">8</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526528">return</span><br>
<span class="lineno"></span><span class="op" id="4526535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4526538">func</span>&nbsp;<span class="ident" id="4526543">marshalTagAndLength</span><span class="op" id="4526562">(</span><span class="ident" id="4526563">out</span>&nbsp;<span class="op" id="4526567">*</span><span class="ident" id="4526568">forkableWriter</span><span class="op" id="4526582">,</span>&nbsp;<span class="ident" id="4526584">t</span>&nbsp;<span class="ident" id="4526586">tagAndLength</span><span class="op" id="4526598">)</span>&nbsp;<span class="op" id="4526600">(</span><span class="ident" id="4526601">err</span>&nbsp;<span class="builtintype" id="4526605">error</span><span class="op" id="4526610">)</span>&nbsp;<span class="op" id="4526612">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526615">b</span>&nbsp;<span class="op" id="4526617">:=</span>&nbsp;<span class="builtintype" id="4526620">uint8</span><span class="op" id="4526625">(</span><span class="ident" id="4526626">t</span><span class="op" id="4526627">.</span><span class="ident" id="4526628">class</span><span class="op" id="4526633">)</span>&nbsp;<span class="op" id="4526635">&lt;&lt;</span>&nbsp;<span class="num" id="4526638">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526641">if</span>&nbsp;<span class="ident" id="4526644">t</span><span class="op" id="4526645">.</span><span class="ident" id="4526646">isCompound</span>&nbsp;<span class="op" id="4526657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526661">b</span>&nbsp;<span class="op" id="4526663">|=</span>&nbsp;<span class="num" id="4526666">0x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526675">if</span>&nbsp;<span class="ident" id="4526678">t</span><span class="op" id="4526679">.</span><span class="ident" id="4526680">tag</span>&nbsp;<span class="op" id="4526684">&gt;=</span>&nbsp;<span class="num" id="4526687">31</span>&nbsp;<span class="op" id="4526690">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526694">b</span>&nbsp;<span class="op" id="4526696">|=</span>&nbsp;<span class="num" id="4526699">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526706">err</span>&nbsp;<span class="op" id="4526710">=</span>&nbsp;<span class="ident" id="4526712">out</span><span class="op" id="4526715">.</span><span class="ident" id="4526716">WriteByte</span><span class="op" id="4526725">(</span><span class="ident" id="4526726">b</span><span class="op" id="4526727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526731">if</span>&nbsp;<span class="ident" id="4526734">err</span>&nbsp;<span class="op" id="4526738">!=</span>&nbsp;<span class="builtintype" id="4526741">nil</span>&nbsp;<span class="op" id="4526745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526750">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526759">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526763">err</span>&nbsp;<span class="op" id="4526767">=</span>&nbsp;<span class="ident" id="4526769">marshalBase128Int</span><span class="op" id="4526786">(</span><span class="ident" id="4526787">out</span><span class="op" id="4526790">,</span>&nbsp;<span class="builtintype" id="4526792">int64</span><span class="op" id="4526797">(</span><span class="ident" id="4526798">t</span><span class="op" id="4526799">.</span><span class="ident" id="4526800">tag</span><span class="op" id="4526803">)</span><span class="op" id="4526804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526808">if</span>&nbsp;<span class="ident" id="4526811">err</span>&nbsp;<span class="op" id="4526815">!=</span>&nbsp;<span class="builtintype" id="4526818">nil</span>&nbsp;<span class="op" id="4526822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526839">}</span>&nbsp;<span class="keyword" id="4526841">else</span>&nbsp;<span class="op" id="4526846">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526850">b</span>&nbsp;<span class="op" id="4526852">|=</span>&nbsp;<span class="builtintype" id="4526855">uint8</span><span class="op" id="4526860">(</span><span class="ident" id="4526861">t</span><span class="op" id="4526862">.</span><span class="ident" id="4526863">tag</span><span class="op" id="4526866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526870">err</span>&nbsp;<span class="op" id="4526874">=</span>&nbsp;<span class="ident" id="4526876">out</span><span class="op" id="4526879">.</span><span class="ident" id="4526880">WriteByte</span><span class="op" id="4526889">(</span><span class="ident" id="4526890">b</span><span class="op" id="4526891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526895">if</span>&nbsp;<span class="ident" id="4526898">err</span>&nbsp;<span class="op" id="4526902">!=</span>&nbsp;<span class="builtintype" id="4526905">nil</span>&nbsp;<span class="op" id="4526909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526914">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526923">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4526926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4526930">if</span>&nbsp;<span class="ident" id="4526933">t</span><span class="op" id="4526934">.</span><span class="ident" id="4526935">length</span>&nbsp;<span class="op" id="4526942">&gt;=</span>&nbsp;<span class="num" id="4526945">128</span>&nbsp;<span class="op" id="4526949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526953">l</span>&nbsp;<span class="op" id="4526955">:=</span>&nbsp;<span class="ident" id="4526958">lengthLength</span><span class="op" id="4526970">(</span><span class="ident" id="4526971">t</span><span class="op" id="4526972">.</span><span class="ident" id="4526973">length</span><span class="op" id="4526979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4526983">err</span>&nbsp;<span class="op" id="4526987">=</span>&nbsp;<span class="ident" id="4526989">out</span><span class="op" id="4526992">.</span><span class="ident" id="4526993">WriteByte</span><span class="op" id="4527002">(</span><span class="num" id="4527003">0x80</span>&nbsp;<span class="op" id="4527008">|</span>&nbsp;<span class="builtintype" id="4527010">byte</span><span class="op" id="4527014">(</span><span class="ident" id="4527015">l</span><span class="op" id="4527016">)</span><span class="op" id="4527017">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527021">if</span>&nbsp;<span class="ident" id="4527024">err</span>&nbsp;<span class="op" id="4527028">!=</span>&nbsp;<span class="builtintype" id="4527031">nil</span>&nbsp;<span class="op" id="4527035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527040">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527053">err</span>&nbsp;<span class="op" id="4527057">=</span>&nbsp;<span class="ident" id="4527059">marshalLength</span><span class="op" id="4527072">(</span><span class="ident" id="4527073">out</span><span class="op" id="4527076">,</span>&nbsp;<span class="ident" id="4527078">t</span><span class="op" id="4527079">.</span><span class="ident" id="4527080">length</span><span class="op" id="4527086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527090">if</span>&nbsp;<span class="ident" id="4527093">err</span>&nbsp;<span class="op" id="4527097">!=</span>&nbsp;<span class="builtintype" id="4527100">nil</span>&nbsp;<span class="op" id="4527104">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527109">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527121">}</span>&nbsp;<span class="keyword" id="4527123">else</span>&nbsp;<span class="op" id="4527128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527132">err</span>&nbsp;<span class="op" id="4527136">=</span>&nbsp;<span class="ident" id="4527138">out</span><span class="op" id="4527141">.</span><span class="ident" id="4527142">WriteByte</span><span class="op" id="4527151">(</span><span class="builtintype" id="4527152">byte</span><span class="op" id="4527156">(</span><span class="ident" id="4527157">t</span><span class="op" id="4527158">.</span><span class="ident" id="4527159">length</span><span class="op" id="4527165">)</span><span class="op" id="4527166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527170">if</span>&nbsp;<span class="ident" id="4527173">err</span>&nbsp;<span class="op" id="4527177">!=</span>&nbsp;<span class="builtintype" id="4527180">nil</span>&nbsp;<span class="op" id="4527184">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527189">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527205">return</span>&nbsp;<span class="builtintype" id="4527212">nil</span><br>
<span class="lineno">230</span><span class="op" id="4527216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4527219">func</span>&nbsp;<span class="ident" id="4527224">marshalBitString</span><span class="op" id="4527240">(</span><span class="ident" id="4527241">out</span>&nbsp;<span class="op" id="4527245">*</span><span class="ident" id="4527246">forkableWriter</span><span class="op" id="4527260">,</span>&nbsp;<span class="ident" id="4527262">b</span>&nbsp;<span class="ident" id="4527264">BitString</span><span class="op" id="4527273">)</span>&nbsp;<span class="op" id="4527275">(</span><span class="ident" id="4527276">err</span>&nbsp;<span class="builtintype" id="4527280">error</span><span class="op" id="4527285">)</span>&nbsp;<span class="op" id="4527287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527290">paddingBits</span>&nbsp;<span class="op" id="4527302">:=</span>&nbsp;<span class="builtintype" id="4527305">byte</span><span class="op" id="4527309">(</span><span class="op" id="4527310">(</span><span class="num" id="4527311">8</span>&nbsp;<span class="op" id="4527313">-</span>&nbsp;<span class="ident" id="4527315">b</span><span class="op" id="4527316">.</span><span class="ident" id="4527317">BitLength</span><span class="op" id="4527326">%</span><span class="num" id="4527327">8</span><span class="op" id="4527328">)</span>&nbsp;<span class="op" id="4527330">%</span>&nbsp;<span class="num" id="4527332">8</span><span class="op" id="4527333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527336">err</span>&nbsp;<span class="op" id="4527340">=</span>&nbsp;<span class="ident" id="4527342">out</span><span class="op" id="4527345">.</span><span class="ident" id="4527346">WriteByte</span><span class="op" id="4527355">(</span><span class="ident" id="4527356">paddingBits</span><span class="op" id="4527367">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527370">if</span>&nbsp;<span class="ident" id="4527373">err</span>&nbsp;<span class="op" id="4527377">!=</span>&nbsp;<span class="builtintype" id="4527380">nil</span>&nbsp;<span class="op" id="4527384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527388">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527399">_</span><span class="op" id="4527400">,</span>&nbsp;<span class="ident" id="4527402">err</span>&nbsp;<span class="op" id="4527406">=</span>&nbsp;<span class="ident" id="4527408">out</span><span class="op" id="4527411">.</span><span class="ident" id="4527412">Write</span><span class="op" id="4527417">(</span><span class="ident" id="4527418">b</span><span class="op" id="4527419">.</span><span class="ident" id="4527420">Bytes</span><span class="op" id="4527425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527428">return</span><br>
<span class="lineno">240</span><span class="op" id="4527435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4527438">func</span>&nbsp;<span class="ident" id="4527443">marshalObjectIdentifier</span><span class="op" id="4527466">(</span><span class="ident" id="4527467">out</span>&nbsp;<span class="op" id="4527471">*</span><span class="ident" id="4527472">forkableWriter</span><span class="op" id="4527486">,</span>&nbsp;<span class="ident" id="4527488">oid</span>&nbsp;<span class="op" id="4527492">[</span><span class="op" id="4527493">]</span><span class="builtintype" id="4527494">int</span><span class="op" id="4527497">)</span>&nbsp;<span class="op" id="4527499">(</span><span class="ident" id="4527500">err</span>&nbsp;<span class="builtintype" id="4527504">error</span><span class="op" id="4527509">)</span>&nbsp;<span class="op" id="4527511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527514">if</span>&nbsp;<span class="builtinfunc" id="4527517">len</span><span class="op" id="4527520">(</span><span class="ident" id="4527521">oid</span><span class="op" id="4527524">)</span>&nbsp;<span class="op" id="4527526">&lt;</span>&nbsp;<span class="num" id="4527528">2</span>&nbsp;<span class="op" id="4527530">||</span>&nbsp;<span class="ident" id="4527533">oid</span><span class="op" id="4527536">[</span><span class="num" id="4527537">0</span><span class="op" id="4527538">]</span>&nbsp;<span class="op" id="4527540">&gt;</span>&nbsp;<span class="num" id="4527542">2</span>&nbsp;<span class="op" id="4527544">||</span>&nbsp;<span class="op" id="4527547">(</span><span class="ident" id="4527548">oid</span><span class="op" id="4527551">[</span><span class="num" id="4527552">0</span><span class="op" id="4527553">]</span>&nbsp;<span class="op" id="4527555">&lt;</span>&nbsp;<span class="num" id="4527557">2</span>&nbsp;<span class="op" id="4527559">&amp;&amp;</span>&nbsp;<span class="ident" id="4527562">oid</span><span class="op" id="4527565">[</span><span class="num" id="4527566">1</span><span class="op" id="4527567">]</span>&nbsp;<span class="op" id="4527569">&gt;=</span>&nbsp;<span class="num" id="4527572">40</span><span class="op" id="4527574">)</span>&nbsp;<span class="op" id="4527576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527580">return</span>&nbsp;<span class="ident" id="4527587">StructuralError</span><span class="op" id="4527602">{</span><span class="string" id="4527603">&#34;invalid&nbsp;object&nbsp;identifier&#34;</span><span class="op" id="4527630">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527637">err</span>&nbsp;<span class="op" id="4527641">=</span>&nbsp;<span class="ident" id="4527643">marshalBase128Int</span><span class="op" id="4527660">(</span><span class="ident" id="4527661">out</span><span class="op" id="4527664">,</span>&nbsp;<span class="builtintype" id="4527666">int64</span><span class="op" id="4527671">(</span><span class="ident" id="4527672">oid</span><span class="op" id="4527675">[</span><span class="num" id="4527676">0</span><span class="op" id="4527677">]</span><span class="op" id="4527678">*</span><span class="num" id="4527679">40</span><span class="op" id="4527681">+</span><span class="ident" id="4527682">oid</span><span class="op" id="4527685">[</span><span class="num" id="4527686">1</span><span class="op" id="4527687">]</span><span class="op" id="4527688">)</span><span class="op" id="4527689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527692">if</span>&nbsp;<span class="ident" id="4527695">err</span>&nbsp;<span class="op" id="4527699">!=</span>&nbsp;<span class="builtintype" id="4527702">nil</span>&nbsp;<span class="op" id="4527706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527710">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527721">for</span>&nbsp;<span class="ident" id="4527725">i</span>&nbsp;<span class="op" id="4527727">:=</span>&nbsp;<span class="num" id="4527730">2</span><span class="op" id="4527731">;</span>&nbsp;<span class="ident" id="4527733">i</span>&nbsp;<span class="op" id="4527735">&lt;</span>&nbsp;<span class="builtinfunc" id="4527737">len</span><span class="op" id="4527740">(</span><span class="ident" id="4527741">oid</span><span class="op" id="4527744">)</span><span class="op" id="4527745">;</span>&nbsp;<span class="ident" id="4527747">i</span><span class="op" id="4527748">++</span>&nbsp;<span class="op" id="4527751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527755">err</span>&nbsp;<span class="op" id="4527759">=</span>&nbsp;<span class="ident" id="4527761">marshalBase128Int</span><span class="op" id="4527778">(</span><span class="ident" id="4527779">out</span><span class="op" id="4527782">,</span>&nbsp;<span class="builtintype" id="4527784">int64</span><span class="op" id="4527789">(</span><span class="ident" id="4527790">oid</span><span class="op" id="4527793">[</span><span class="ident" id="4527794">i</span><span class="op" id="4527795">]</span><span class="op" id="4527796">)</span><span class="op" id="4527797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527801">if</span>&nbsp;<span class="ident" id="4527804">err</span>&nbsp;<span class="op" id="4527808">!=</span>&nbsp;<span class="builtintype" id="4527811">nil</span>&nbsp;<span class="op" id="4527815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527820">return</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4527832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527836">return</span><br>
<span class="lineno"></span><span class="op" id="4527843">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4527846">func</span>&nbsp;<span class="ident" id="4527851">marshalPrintableString</span><span class="op" id="4527873">(</span><span class="ident" id="4527874">out</span>&nbsp;<span class="op" id="4527878">*</span><span class="ident" id="4527879">forkableWriter</span><span class="op" id="4527893">,</span>&nbsp;<span class="ident" id="4527895">s</span>&nbsp;<span class="builtintype" id="4527897">string</span><span class="op" id="4527903">)</span>&nbsp;<span class="op" id="4527905">(</span><span class="ident" id="4527906">err</span>&nbsp;<span class="builtintype" id="4527910">error</span><span class="op" id="4527915">)</span>&nbsp;<span class="op" id="4527917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4527920">b</span>&nbsp;<span class="op" id="4527922">:=</span>&nbsp;<span class="op" id="4527925">[</span><span class="op" id="4527926">]</span><span class="builtintype" id="4527927">byte</span><span class="op" id="4527931">(</span><span class="ident" id="4527932">s</span><span class="op" id="4527933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527936">for</span>&nbsp;<span class="ident" id="4527940">_</span><span class="op" id="4527941">,</span>&nbsp;<span class="ident" id="4527943">c</span>&nbsp;<span class="op" id="4527945">:=</span>&nbsp;<span class="keyword" id="4527948">range</span>&nbsp;<span class="ident" id="4527954">b</span>&nbsp;<span class="op" id="4527956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527960">if</span>&nbsp;<span class="op" id="4527963">!</span><span class="ident" id="4527964">isPrintable</span><span class="op" id="4527975">(</span><span class="ident" id="4527976">c</span><span class="op" id="4527977">)</span>&nbsp;<span class="op" id="4527979">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4527984">return</span>&nbsp;<span class="ident" id="4527991">StructuralError</span><span class="op" id="4528006">{</span><span class="string" id="4528007">&#34;PrintableString&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4528051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4528055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4528058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528062">_</span><span class="op" id="4528063">,</span>&nbsp;<span class="ident" id="4528065">err</span>&nbsp;<span class="op" id="4528069">=</span>&nbsp;<span class="ident" id="4528071">out</span><span class="op" id="4528074">.</span><span class="ident" id="4528075">Write</span><span class="op" id="4528080">(</span><span class="ident" id="4528081">b</span><span class="op" id="4528082">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528085">return</span><br>
<span class="lineno"></span><span class="op" id="4528092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4528095">func</span>&nbsp;<span class="ident" id="4528100">marshalIA5String</span><span class="op" id="4528116">(</span><span class="ident" id="4528117">out</span>&nbsp;<span class="op" id="4528121">*</span><span class="ident" id="4528122">forkableWriter</span><span class="op" id="4528136">,</span>&nbsp;<span class="ident" id="4528138">s</span>&nbsp;<span class="builtintype" id="4528140">string</span><span class="op" id="4528146">)</span>&nbsp;<span class="op" id="4528148">(</span><span class="ident" id="4528149">err</span>&nbsp;<span class="builtintype" id="4528153">error</span><span class="op" id="4528158">)</span>&nbsp;<span class="op" id="4528160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528163">b</span>&nbsp;<span class="op" id="4528165">:=</span>&nbsp;<span class="op" id="4528168">[</span><span class="op" id="4528169">]</span><span class="builtintype" id="4528170">byte</span><span class="op" id="4528174">(</span><span class="ident" id="4528175">s</span><span class="op" id="4528176">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528179">for</span>&nbsp;<span class="ident" id="4528183">_</span><span class="op" id="4528184">,</span>&nbsp;<span class="ident" id="4528186">c</span>&nbsp;<span class="op" id="4528188">:=</span>&nbsp;<span class="keyword" id="4528191">range</span>&nbsp;<span class="ident" id="4528197">b</span>&nbsp;<span class="op" id="4528199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528203">if</span>&nbsp;<span class="ident" id="4528206">c</span>&nbsp;<span class="op" id="4528208">&gt;</span>&nbsp;<span class="num" id="4528210">127</span>&nbsp;<span class="op" id="4528214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528219">return</span>&nbsp;<span class="ident" id="4528226">StructuralError</span><span class="op" id="4528241">{</span><span class="string" id="4528242">&#34;IA5String&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4528280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4528284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4528287">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528291">_</span><span class="op" id="4528292">,</span>&nbsp;<span class="ident" id="4528294">err</span>&nbsp;<span class="op" id="4528298">=</span>&nbsp;<span class="ident" id="4528300">out</span><span class="op" id="4528303">.</span><span class="ident" id="4528304">Write</span><span class="op" id="4528309">(</span><span class="ident" id="4528310">b</span><span class="op" id="4528311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528314">return</span><br>
<span class="lineno"></span><span class="op" id="4528321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4528324">func</span>&nbsp;<span class="ident" id="4528329">marshalUTF8String</span><span class="op" id="4528346">(</span><span class="ident" id="4528347">out</span>&nbsp;<span class="op" id="4528351">*</span><span class="ident" id="4528352">forkableWriter</span><span class="op" id="4528366">,</span>&nbsp;<span class="ident" id="4528368">s</span>&nbsp;<span class="builtintype" id="4528370">string</span><span class="op" id="4528376">)</span>&nbsp;<span class="op" id="4528378">(</span><span class="ident" id="4528379">err</span>&nbsp;<span class="builtintype" id="4528383">error</span><span class="op" id="4528388">)</span>&nbsp;<span class="op" id="4528390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528393">_</span><span class="op" id="4528394">,</span>&nbsp;<span class="ident" id="4528396">err</span>&nbsp;<span class="op" id="4528400">=</span>&nbsp;<span class="ident" id="4528402">out</span><span class="op" id="4528405">.</span><span class="ident" id="4528406">Write</span><span class="op" id="4528411">(</span><span class="op" id="4528412">[</span><span class="op" id="4528413">]</span><span class="builtintype" id="4528414">byte</span><span class="op" id="4528418">(</span><span class="ident" id="4528419">s</span><span class="op" id="4528420">)</span><span class="op" id="4528421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528424">return</span><br>
<span class="lineno"></span><span class="op" id="4528431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4528434">func</span>&nbsp;<span class="ident" id="4528439">marshalTwoDigits</span><span class="op" id="4528455">(</span><span class="ident" id="4528456">out</span>&nbsp;<span class="op" id="4528460">*</span><span class="ident" id="4528461">forkableWriter</span><span class="op" id="4528475">,</span>&nbsp;<span class="ident" id="4528477">v</span>&nbsp;<span class="builtintype" id="4528479">int</span><span class="op" id="4528482">)</span>&nbsp;<span class="op" id="4528484">(</span><span class="ident" id="4528485">err</span>&nbsp;<span class="builtintype" id="4528489">error</span><span class="op" id="4528494">)</span>&nbsp;<span class="op" id="4528496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528499">err</span>&nbsp;<span class="op" id="4528503">=</span>&nbsp;<span class="ident" id="4528505">out</span><span class="op" id="4528508">.</span><span class="ident" id="4528509">WriteByte</span><span class="op" id="4528518">(</span><span class="builtintype" id="4528519">byte</span><span class="op" id="4528523">(</span><span class="string" id="4528524">&#39;0&#39;</span>&nbsp;<span class="op" id="4528528">+</span>&nbsp;<span class="op" id="4528530">(</span><span class="ident" id="4528531">v</span><span class="op" id="4528532">/</span><span class="num" id="4528533">10</span><span class="op" id="4528535">)</span><span class="op" id="4528536">%</span><span class="num" id="4528537">10</span><span class="op" id="4528539">)</span><span class="op" id="4528540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528543">if</span>&nbsp;<span class="ident" id="4528546">err</span>&nbsp;<span class="op" id="4528550">!=</span>&nbsp;<span class="builtintype" id="4528553">nil</span>&nbsp;<span class="op" id="4528557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528561">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4528569">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528572">return</span>&nbsp;<span class="ident" id="4528579">out</span><span class="op" id="4528582">.</span><span class="ident" id="4528583">WriteByte</span><span class="op" id="4528592">(</span><span class="builtintype" id="4528593">byte</span><span class="op" id="4528597">(</span><span class="string" id="4528598">&#39;0&#39;</span>&nbsp;<span class="op" id="4528602">+</span>&nbsp;<span class="ident" id="4528604">v</span><span class="op" id="4528605">%</span><span class="num" id="4528606">10</span><span class="op" id="4528608">)</span><span class="op" id="4528609">)</span><br>
<span class="lineno"></span><span class="op" id="4528611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4528614">func</span>&nbsp;<span class="ident" id="4528619">marshalFourDigits</span><span class="op" id="4528636">(</span><span class="ident" id="4528637">out</span>&nbsp;<span class="op" id="4528641">*</span><span class="ident" id="4528642">forkableWriter</span><span class="op" id="4528656">,</span>&nbsp;<span class="ident" id="4528658">v</span>&nbsp;<span class="builtintype" id="4528660">int</span><span class="op" id="4528663">)</span>&nbsp;<span class="op" id="4528665">(</span><span class="ident" id="4528666">err</span>&nbsp;<span class="builtintype" id="4528670">error</span><span class="op" id="4528675">)</span>&nbsp;<span class="op" id="4528677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528680">var</span>&nbsp;<span class="ident" id="4528684">bytes</span>&nbsp;<span class="op" id="4528690">[</span><span class="num" id="4528691">4</span><span class="op" id="4528692">]</span><span class="builtintype" id="4528693">byte</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528699">for</span>&nbsp;<span class="ident" id="4528703">i</span>&nbsp;<span class="op" id="4528705">:=</span>&nbsp;<span class="keyword" id="4528708">range</span>&nbsp;<span class="ident" id="4528714">bytes</span>&nbsp;<span class="op" id="4528720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528724">bytes</span><span class="op" id="4528729">[</span><span class="num" id="4528730">3</span><span class="op" id="4528731">-</span><span class="ident" id="4528732">i</span><span class="op" id="4528733">]</span>&nbsp;<span class="op" id="4528735">=</span>&nbsp;<span class="string" id="4528737">&#39;0&#39;</span>&nbsp;<span class="op" id="4528741">+</span>&nbsp;<span class="builtintype" id="4528743">byte</span><span class="op" id="4528747">(</span><span class="ident" id="4528748">v</span><span class="op" id="4528749">%</span><span class="num" id="4528750">10</span><span class="op" id="4528752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528756">v</span>&nbsp;<span class="op" id="4528758">/=</span>&nbsp;<span class="num" id="4528761">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4528765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528768">_</span><span class="op" id="4528769">,</span>&nbsp;<span class="ident" id="4528771">err</span>&nbsp;<span class="op" id="4528775">=</span>&nbsp;<span class="ident" id="4528777">out</span><span class="op" id="4528780">.</span><span class="ident" id="4528781">Write</span><span class="op" id="4528786">(</span><span class="ident" id="4528787">bytes</span><span class="op" id="4528792">[</span><span class="op" id="4528793">:</span><span class="op" id="4528794">]</span><span class="op" id="4528795">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528798">return</span><br>
<span class="lineno"></span><span class="op" id="4528805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4528808">func</span>&nbsp;<span class="ident" id="4528813">outsideUTCRange</span><span class="op" id="4528828">(</span><span class="ident" id="4528829">t</span>&nbsp;<span class="ident" id="4528831">time</span><span class="op" id="4528835">.</span><span class="ident" id="4528836">Time</span><span class="op" id="4528840">)</span>&nbsp;<span class="builtintype" id="4528842">bool</span>&nbsp;<span class="op" id="4528847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528850">year</span>&nbsp;<span class="op" id="4528855">:=</span>&nbsp;<span class="ident" id="4528858">t</span><span class="op" id="4528859">.</span><span class="ident" id="4528860">Year</span><span class="op" id="4528864">(</span><span class="op" id="4528865">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528868">return</span>&nbsp;<span class="ident" id="4528875">year</span>&nbsp;<span class="op" id="4528880">&lt;</span>&nbsp;<span class="num" id="4528882">1950</span>&nbsp;<span class="op" id="4528887">||</span>&nbsp;<span class="ident" id="4528890">year</span>&nbsp;<span class="op" id="4528895">&gt;=</span>&nbsp;<span class="num" id="4528898">2050</span><br>
<span class="lineno"></span><span class="op" id="4528903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4528906">func</span>&nbsp;<span class="ident" id="4528911">marshalUTCTime</span><span class="op" id="4528925">(</span><span class="ident" id="4528926">out</span>&nbsp;<span class="op" id="4528930">*</span><span class="ident" id="4528931">forkableWriter</span><span class="op" id="4528945">,</span>&nbsp;<span class="ident" id="4528947">t</span>&nbsp;<span class="ident" id="4528949">time</span><span class="op" id="4528953">.</span><span class="ident" id="4528954">Time</span><span class="op" id="4528958">)</span>&nbsp;<span class="op" id="4528960">(</span><span class="ident" id="4528961">err</span>&nbsp;<span class="builtintype" id="4528965">error</span><span class="op" id="4528970">)</span>&nbsp;<span class="op" id="4528972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4528975">year</span>&nbsp;<span class="op" id="4528980">:=</span>&nbsp;<span class="ident" id="4528983">t</span><span class="op" id="4528984">.</span><span class="ident" id="4528985">Year</span><span class="op" id="4528989">(</span><span class="op" id="4528990">)</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4528994">switch</span>&nbsp;<span class="op" id="4529001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529004">case</span>&nbsp;<span class="num" id="4529009">1950</span>&nbsp;<span class="op" id="4529014">&lt;=</span>&nbsp;<span class="ident" id="4529017">year</span>&nbsp;<span class="op" id="4529022">&amp;&amp;</span>&nbsp;<span class="ident" id="4529025">year</span>&nbsp;<span class="op" id="4529030">&lt;</span>&nbsp;<span class="num" id="4529032">2000</span><span class="op" id="4529036">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529040">err</span>&nbsp;<span class="op" id="4529044">=</span>&nbsp;<span class="ident" id="4529046">marshalTwoDigits</span><span class="op" id="4529062">(</span><span class="ident" id="4529063">out</span><span class="op" id="4529066">,</span>&nbsp;<span class="builtintype" id="4529068">int</span><span class="op" id="4529071">(</span><span class="ident" id="4529072">year</span><span class="op" id="4529076">-</span><span class="num" id="4529077">1900</span><span class="op" id="4529081">)</span><span class="op" id="4529082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529085">case</span>&nbsp;<span class="num" id="4529090">2000</span>&nbsp;<span class="op" id="4529095">&lt;=</span>&nbsp;<span class="ident" id="4529098">year</span>&nbsp;<span class="op" id="4529103">&amp;&amp;</span>&nbsp;<span class="ident" id="4529106">year</span>&nbsp;<span class="op" id="4529111">&lt;</span>&nbsp;<span class="num" id="4529113">2050</span><span class="op" id="4529117">:</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529121">err</span>&nbsp;<span class="op" id="4529125">=</span>&nbsp;<span class="ident" id="4529127">marshalTwoDigits</span><span class="op" id="4529143">(</span><span class="ident" id="4529144">out</span><span class="op" id="4529147">,</span>&nbsp;<span class="builtintype" id="4529149">int</span><span class="op" id="4529152">(</span><span class="ident" id="4529153">year</span><span class="op" id="4529157">-</span><span class="num" id="4529158">2000</span><span class="op" id="4529162">)</span><span class="op" id="4529163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529166">default</span><span class="op" id="4529173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529177">return</span>&nbsp;<span class="ident" id="4529184">StructuralError</span><span class="op" id="4529199">{</span><span class="string" id="4529200">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;UTCTime&#34;</span><span class="op" id="4529234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529240">if</span>&nbsp;<span class="ident" id="4529243">err</span>&nbsp;<span class="op" id="4529247">!=</span>&nbsp;<span class="builtintype" id="4529250">nil</span>&nbsp;<span class="op" id="4529254">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529258">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529270">return</span>&nbsp;<span class="ident" id="4529277">marshalTimeCommon</span><span class="op" id="4529294">(</span><span class="ident" id="4529295">out</span><span class="op" id="4529298">,</span>&nbsp;<span class="ident" id="4529300">t</span><span class="op" id="4529301">)</span><br>
<span class="lineno"></span><span class="op" id="4529303">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="4529306">func</span>&nbsp;<span class="ident" id="4529311">marshalGeneralizedTime</span><span class="op" id="4529333">(</span><span class="ident" id="4529334">out</span>&nbsp;<span class="op" id="4529338">*</span><span class="ident" id="4529339">forkableWriter</span><span class="op" id="4529353">,</span>&nbsp;<span class="ident" id="4529355">t</span>&nbsp;<span class="ident" id="4529357">time</span><span class="op" id="4529361">.</span><span class="ident" id="4529362">Time</span><span class="op" id="4529366">)</span>&nbsp;<span class="op" id="4529368">(</span><span class="ident" id="4529369">err</span>&nbsp;<span class="builtintype" id="4529373">error</span><span class="op" id="4529378">)</span>&nbsp;<span class="op" id="4529380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529383">year</span>&nbsp;<span class="op" id="4529388">:=</span>&nbsp;<span class="ident" id="4529391">t</span><span class="op" id="4529392">.</span><span class="ident" id="4529393">Year</span><span class="op" id="4529397">(</span><span class="op" id="4529398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529401">if</span>&nbsp;<span class="ident" id="4529404">year</span>&nbsp;<span class="op" id="4529409">&lt;</span>&nbsp;<span class="num" id="4529411">0</span>&nbsp;<span class="op" id="4529413">||</span>&nbsp;<span class="ident" id="4529416">year</span>&nbsp;<span class="op" id="4529421">&gt;</span>&nbsp;<span class="num" id="4529423">9999</span>&nbsp;<span class="op" id="4529428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529432">return</span>&nbsp;<span class="ident" id="4529439">StructuralError</span><span class="op" id="4529454">{</span><span class="string" id="4529455">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;GeneralizedTime&#34;</span><span class="op" id="4529497">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529503">if</span>&nbsp;<span class="ident" id="4529506">err</span>&nbsp;<span class="op" id="4529510">=</span>&nbsp;<span class="ident" id="4529512">marshalFourDigits</span><span class="op" id="4529529">(</span><span class="ident" id="4529530">out</span><span class="op" id="4529533">,</span>&nbsp;<span class="ident" id="4529535">year</span><span class="op" id="4529539">)</span><span class="op" id="4529540">;</span>&nbsp;<span class="ident" id="4529542">err</span>&nbsp;<span class="op" id="4529546">!=</span>&nbsp;<span class="builtintype" id="4529549">nil</span>&nbsp;<span class="op" id="4529553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529557">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529569">return</span>&nbsp;<span class="ident" id="4529576">marshalTimeCommon</span><span class="op" id="4529593">(</span><span class="ident" id="4529594">out</span><span class="op" id="4529597">,</span>&nbsp;<span class="ident" id="4529599">t</span><span class="op" id="4529600">)</span><br>
<span class="lineno"></span><span class="op" id="4529602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4529605">func</span>&nbsp;<span class="ident" id="4529610">marshalTimeCommon</span><span class="op" id="4529627">(</span><span class="ident" id="4529628">out</span>&nbsp;<span class="op" id="4529632">*</span><span class="ident" id="4529633">forkableWriter</span><span class="op" id="4529647">,</span>&nbsp;<span class="ident" id="4529649">t</span>&nbsp;<span class="ident" id="4529651">time</span><span class="op" id="4529655">.</span><span class="ident" id="4529656">Time</span><span class="op" id="4529660">)</span>&nbsp;<span class="op" id="4529662">(</span><span class="ident" id="4529663">err</span>&nbsp;<span class="builtintype" id="4529667">error</span><span class="op" id="4529672">)</span>&nbsp;<span class="op" id="4529674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529677">_</span><span class="op" id="4529678">,</span>&nbsp;<span class="ident" id="4529680">month</span><span class="op" id="4529685">,</span>&nbsp;<span class="ident" id="4529687">day</span>&nbsp;<span class="op" id="4529691">:=</span>&nbsp;<span class="ident" id="4529694">t</span><span class="op" id="4529695">.</span><span class="ident" id="4529696">Date</span><span class="op" id="4529700">(</span><span class="op" id="4529701">)</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529705">err</span>&nbsp;<span class="op" id="4529709">=</span>&nbsp;<span class="ident" id="4529711">marshalTwoDigits</span><span class="op" id="4529727">(</span><span class="ident" id="4529728">out</span><span class="op" id="4529731">,</span>&nbsp;<span class="builtintype" id="4529733">int</span><span class="op" id="4529736">(</span><span class="ident" id="4529737">month</span><span class="op" id="4529742">)</span><span class="op" id="4529743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529746">if</span>&nbsp;<span class="ident" id="4529749">err</span>&nbsp;<span class="op" id="4529753">!=</span>&nbsp;<span class="builtintype" id="4529756">nil</span>&nbsp;<span class="op" id="4529760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529764">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529772">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529776">err</span>&nbsp;<span class="op" id="4529780">=</span>&nbsp;<span class="ident" id="4529782">marshalTwoDigits</span><span class="op" id="4529798">(</span><span class="ident" id="4529799">out</span><span class="op" id="4529802">,</span>&nbsp;<span class="ident" id="4529804">day</span><span class="op" id="4529807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529810">if</span>&nbsp;<span class="ident" id="4529813">err</span>&nbsp;<span class="op" id="4529817">!=</span>&nbsp;<span class="builtintype" id="4529820">nil</span>&nbsp;<span class="op" id="4529824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529828">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529836">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529840">hour</span><span class="op" id="4529844">,</span>&nbsp;<span class="ident" id="4529846">min</span><span class="op" id="4529849">,</span>&nbsp;<span class="ident" id="4529851">sec</span>&nbsp;<span class="op" id="4529855">:=</span>&nbsp;<span class="ident" id="4529858">t</span><span class="op" id="4529859">.</span><span class="ident" id="4529860">Clock</span><span class="op" id="4529865">(</span><span class="op" id="4529866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529870">err</span>&nbsp;<span class="op" id="4529874">=</span>&nbsp;<span class="ident" id="4529876">marshalTwoDigits</span><span class="op" id="4529892">(</span><span class="ident" id="4529893">out</span><span class="op" id="4529896">,</span>&nbsp;<span class="ident" id="4529898">hour</span><span class="op" id="4529902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529905">if</span>&nbsp;<span class="ident" id="4529908">err</span>&nbsp;<span class="op" id="4529912">!=</span>&nbsp;<span class="builtintype" id="4529915">nil</span>&nbsp;<span class="op" id="4529919">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529923">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529935">err</span>&nbsp;<span class="op" id="4529939">=</span>&nbsp;<span class="ident" id="4529941">marshalTwoDigits</span><span class="op" id="4529957">(</span><span class="ident" id="4529958">out</span><span class="op" id="4529961">,</span>&nbsp;<span class="ident" id="4529963">min</span><span class="op" id="4529966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529969">if</span>&nbsp;<span class="ident" id="4529972">err</span>&nbsp;<span class="op" id="4529976">!=</span>&nbsp;<span class="builtintype" id="4529979">nil</span>&nbsp;<span class="op" id="4529983">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4529987">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4529995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4529999">err</span>&nbsp;<span class="op" id="4530003">=</span>&nbsp;<span class="ident" id="4530005">marshalTwoDigits</span><span class="op" id="4530021">(</span><span class="ident" id="4530022">out</span><span class="op" id="4530025">,</span>&nbsp;<span class="ident" id="4530027">sec</span><span class="op" id="4530030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530033">if</span>&nbsp;<span class="ident" id="4530036">err</span>&nbsp;<span class="op" id="4530040">!=</span>&nbsp;<span class="builtintype" id="4530043">nil</span>&nbsp;<span class="op" id="4530047">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530051">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530063">_</span><span class="op" id="4530064">,</span>&nbsp;<span class="ident" id="4530066">offset</span>&nbsp;<span class="op" id="4530073">:=</span>&nbsp;<span class="ident" id="4530076">t</span><span class="op" id="4530077">.</span><span class="ident" id="4530078">Zone</span><span class="op" id="4530082">(</span><span class="op" id="4530083">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530087">switch</span>&nbsp;<span class="op" id="4530094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530097">case</span>&nbsp;<span class="ident" id="4530102">offset</span><span class="op" id="4530108">/</span><span class="num" id="4530109">60</span>&nbsp;<span class="op" id="4530112">==</span>&nbsp;<span class="num" id="4530115">0</span><span class="op" id="4530116">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530120">err</span>&nbsp;<span class="op" id="4530124">=</span>&nbsp;<span class="ident" id="4530126">out</span><span class="op" id="4530129">.</span><span class="ident" id="4530130">WriteByte</span><span class="op" id="4530139">(</span><span class="string" id="4530140">&#39;Z&#39;</span><span class="op" id="4530143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530147">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530155">case</span>&nbsp;<span class="ident" id="4530160">offset</span>&nbsp;<span class="op" id="4530167">&gt;</span>&nbsp;<span class="num" id="4530169">0</span><span class="op" id="4530170">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530174">err</span>&nbsp;<span class="op" id="4530178">=</span>&nbsp;<span class="ident" id="4530180">out</span><span class="op" id="4530183">.</span><span class="ident" id="4530184">WriteByte</span><span class="op" id="4530193">(</span><span class="string" id="4530194">&#39;+&#39;</span><span class="op" id="4530197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530200">case</span>&nbsp;<span class="ident" id="4530205">offset</span>&nbsp;<span class="op" id="4530212">&lt;</span>&nbsp;<span class="num" id="4530214">0</span><span class="op" id="4530215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530219">err</span>&nbsp;<span class="op" id="4530223">=</span>&nbsp;<span class="ident" id="4530225">out</span><span class="op" id="4530228">.</span><span class="ident" id="4530229">WriteByte</span><span class="op" id="4530238">(</span><span class="string" id="4530239">&#39;-&#39;</span><span class="op" id="4530242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530249">if</span>&nbsp;<span class="ident" id="4530252">err</span>&nbsp;<span class="op" id="4530256">!=</span>&nbsp;<span class="builtintype" id="4530259">nil</span>&nbsp;<span class="op" id="4530263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530267">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530279">offsetMinutes</span>&nbsp;<span class="op" id="4530293">:=</span>&nbsp;<span class="ident" id="4530296">offset</span>&nbsp;<span class="op" id="4530303">/</span>&nbsp;<span class="num" id="4530305">60</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530309">if</span>&nbsp;<span class="ident" id="4530312">offsetMinutes</span>&nbsp;<span class="op" id="4530326">&lt;</span>&nbsp;<span class="num" id="4530328">0</span>&nbsp;<span class="op" id="4530330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530334">offsetMinutes</span>&nbsp;<span class="op" id="4530348">=</span>&nbsp;<span class="op" id="4530350">-</span><span class="ident" id="4530351">offsetMinutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530370">err</span>&nbsp;<span class="op" id="4530374">=</span>&nbsp;<span class="ident" id="4530376">marshalTwoDigits</span><span class="op" id="4530392">(</span><span class="ident" id="4530393">out</span><span class="op" id="4530396">,</span>&nbsp;<span class="ident" id="4530398">offsetMinutes</span><span class="op" id="4530411">/</span><span class="num" id="4530412">60</span><span class="op" id="4530414">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530417">if</span>&nbsp;<span class="ident" id="4530420">err</span>&nbsp;<span class="op" id="4530424">!=</span>&nbsp;<span class="builtintype" id="4530427">nil</span>&nbsp;<span class="op" id="4530431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530435">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530447">err</span>&nbsp;<span class="op" id="4530451">=</span>&nbsp;<span class="ident" id="4530453">marshalTwoDigits</span><span class="op" id="4530469">(</span><span class="ident" id="4530470">out</span><span class="op" id="4530473">,</span>&nbsp;<span class="ident" id="4530475">offsetMinutes</span><span class="op" id="4530488">%</span><span class="num" id="4530489">60</span><span class="op" id="4530491">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530494">return</span><br>
<span class="lineno"></span><span class="op" id="4530501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4530504">func</span>&nbsp;<span class="ident" id="4530509">stripTagAndLength</span><span class="op" id="4530526">(</span><span class="ident" id="4530527">in</span>&nbsp;<span class="op" id="4530530">[</span><span class="op" id="4530531">]</span><span class="builtintype" id="4530532">byte</span><span class="op" id="4530536">)</span>&nbsp;<span class="op" id="4530538">[</span><span class="op" id="4530539">]</span><span class="builtintype" id="4530540">byte</span>&nbsp;<span class="op" id="4530545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530548">_</span><span class="op" id="4530549">,</span>&nbsp;<span class="ident" id="4530551">offset</span><span class="op" id="4530557">,</span>&nbsp;<span class="ident" id="4530559">err</span>&nbsp;<span class="op" id="4530563">:=</span>&nbsp;<span class="ident" id="4530566">parseTagAndLength</span><span class="op" id="4530583">(</span><span class="ident" id="4530584">in</span><span class="op" id="4530586">,</span>&nbsp;<span class="num" id="4530588">0</span><span class="op" id="4530589">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530592">if</span>&nbsp;<span class="ident" id="4530595">err</span>&nbsp;<span class="op" id="4530599">!=</span>&nbsp;<span class="builtintype" id="4530602">nil</span>&nbsp;<span class="op" id="4530606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530610">return</span>&nbsp;<span class="ident" id="4530617">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530624">return</span>&nbsp;<span class="ident" id="4530631">in</span><span class="op" id="4530633">[</span><span class="ident" id="4530634">offset</span><span class="op" id="4530640">:</span><span class="op" id="4530641">]</span><br>
<span class="lineno"></span><span class="op" id="4530643">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="4530646">func</span>&nbsp;<span class="ident" id="4530651">marshalBody</span><span class="op" id="4530662">(</span><span class="ident" id="4530663">out</span>&nbsp;<span class="op" id="4530667">*</span><span class="ident" id="4530668">forkableWriter</span><span class="op" id="4530682">,</span>&nbsp;<span class="ident" id="4530684">value</span>&nbsp;<span class="ident" id="4530690">reflect</span><span class="op" id="4530697">.</span><span class="ident" id="4530698">Value</span><span class="op" id="4530703">,</span>&nbsp;<span class="ident" id="4530705">params</span>&nbsp;<span class="ident" id="4530712">fieldParameters</span><span class="op" id="4530727">)</span>&nbsp;<span class="op" id="4530729">(</span><span class="ident" id="4530730">err</span>&nbsp;<span class="builtintype" id="4530734">error</span><span class="op" id="4530739">)</span>&nbsp;<span class="op" id="4530741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530744">switch</span>&nbsp;<span class="ident" id="4530751">value</span><span class="op" id="4530756">.</span><span class="ident" id="4530757">Type</span><span class="op" id="4530761">(</span><span class="op" id="4530762">)</span>&nbsp;<span class="op" id="4530764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530767">case</span>&nbsp;<span class="ident" id="4530772">timeType</span><span class="op" id="4530780">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4530784">t</span>&nbsp;<span class="op" id="4530786">:=</span>&nbsp;<span class="ident" id="4530789">value</span><span class="op" id="4530794">.</span><span class="ident" id="4530795">Interface</span><span class="op" id="4530804">(</span><span class="op" id="4530805">)</span><span class="op" id="4530806">.</span><span class="op" id="4530807">(</span><span class="ident" id="4530808">time</span><span class="op" id="4530812">.</span><span class="ident" id="4530813">Time</span><span class="op" id="4530817">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530821">if</span>&nbsp;<span class="ident" id="4530824">outsideUTCRange</span><span class="op" id="4530839">(</span><span class="ident" id="4530840">t</span><span class="op" id="4530841">)</span>&nbsp;<span class="op" id="4530843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530848">return</span>&nbsp;<span class="ident" id="4530855">marshalGeneralizedTime</span><span class="op" id="4530877">(</span><span class="ident" id="4530878">out</span><span class="op" id="4530881">,</span>&nbsp;<span class="ident" id="4530883">t</span><span class="op" id="4530884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530888">}</span>&nbsp;<span class="keyword" id="4530890">else</span>&nbsp;<span class="op" id="4530895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530900">return</span>&nbsp;<span class="ident" id="4530907">marshalUTCTime</span><span class="op" id="4530921">(</span><span class="ident" id="4530922">out</span><span class="op" id="4530925">,</span>&nbsp;<span class="ident" id="4530927">t</span><span class="op" id="4530928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4530932">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530935">case</span>&nbsp;<span class="ident" id="4530940">bitStringType</span><span class="op" id="4530953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4530957">return</span>&nbsp;<span class="ident" id="4530964">marshalBitString</span><span class="op" id="4530980">(</span><span class="ident" id="4530981">out</span><span class="op" id="4530984">,</span>&nbsp;<span class="ident" id="4530986">value</span><span class="op" id="4530991">.</span><span class="ident" id="4530992">Interface</span><span class="op" id="4531001">(</span><span class="op" id="4531002">)</span><span class="op" id="4531003">.</span><span class="op" id="4531004">(</span><span class="ident" id="4531005">BitString</span><span class="op" id="4531014">)</span><span class="op" id="4531015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531018">case</span>&nbsp;<span class="ident" id="4531023">objectIdentifierType</span><span class="op" id="4531043">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531047">return</span>&nbsp;<span class="ident" id="4531054">marshalObjectIdentifier</span><span class="op" id="4531077">(</span><span class="ident" id="4531078">out</span><span class="op" id="4531081">,</span>&nbsp;<span class="ident" id="4531083">value</span><span class="op" id="4531088">.</span><span class="ident" id="4531089">Interface</span><span class="op" id="4531098">(</span><span class="op" id="4531099">)</span><span class="op" id="4531100">.</span><span class="op" id="4531101">(</span><span class="ident" id="4531102">ObjectIdentifier</span><span class="op" id="4531118">)</span><span class="op" id="4531119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531122">case</span>&nbsp;<span class="ident" id="4531127">bigIntType</span><span class="op" id="4531137">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531141">return</span>&nbsp;<span class="ident" id="4531148">marshalBigInt</span><span class="op" id="4531161">(</span><span class="ident" id="4531162">out</span><span class="op" id="4531165">,</span>&nbsp;<span class="ident" id="4531167">value</span><span class="op" id="4531172">.</span><span class="ident" id="4531173">Interface</span><span class="op" id="4531182">(</span><span class="op" id="4531183">)</span><span class="op" id="4531184">.</span><span class="op" id="4531185">(</span><span class="op" id="4531186">*</span><span class="ident" id="4531187">big</span><span class="op" id="4531190">.</span><span class="ident" id="4531191">Int</span><span class="op" id="4531194">)</span><span class="op" id="4531195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4531198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531202">switch</span>&nbsp;<span class="ident" id="4531209">v</span>&nbsp;<span class="op" id="4531211">:=</span>&nbsp;<span class="ident" id="4531214">value</span><span class="op" id="4531219">;</span>&nbsp;<span class="ident" id="4531221">v</span><span class="op" id="4531222">.</span><span class="ident" id="4531223">Kind</span><span class="op" id="4531227">(</span><span class="op" id="4531228">)</span>&nbsp;<span class="op" id="4531230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531233">case</span>&nbsp;<span class="ident" id="4531238">reflect</span><span class="op" id="4531245">.</span><span class="ident" id="4531246">Bool</span><span class="op" id="4531250">:</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531254">if</span>&nbsp;<span class="ident" id="4531257">v</span><span class="op" id="4531258">.</span><span class="ident" id="4531259">Bool</span><span class="op" id="4531263">(</span><span class="op" id="4531264">)</span>&nbsp;<span class="op" id="4531266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531271">return</span>&nbsp;<span class="ident" id="4531278">out</span><span class="op" id="4531281">.</span><span class="ident" id="4531282">WriteByte</span><span class="op" id="4531291">(</span><span class="num" id="4531292">255</span><span class="op" id="4531295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4531299">}</span>&nbsp;<span class="keyword" id="4531301">else</span>&nbsp;<span class="op" id="4531306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531311">return</span>&nbsp;<span class="ident" id="4531318">out</span><span class="op" id="4531321">.</span><span class="ident" id="4531322">WriteByte</span><span class="op" id="4531331">(</span><span class="num" id="4531332">0</span><span class="op" id="4531333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4531337">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531340">case</span>&nbsp;<span class="ident" id="4531345">reflect</span><span class="op" id="4531352">.</span><span class="ident" id="4531353">Int</span><span class="op" id="4531356">,</span>&nbsp;<span class="ident" id="4531358">reflect</span><span class="op" id="4531365">.</span><span class="ident" id="4531366">Int8</span><span class="op" id="4531370">,</span>&nbsp;<span class="ident" id="4531372">reflect</span><span class="op" id="4531379">.</span><span class="ident" id="4531380">Int16</span><span class="op" id="4531385">,</span>&nbsp;<span class="ident" id="4531387">reflect</span><span class="op" id="4531394">.</span><span class="ident" id="4531395">Int32</span><span class="op" id="4531400">,</span>&nbsp;<span class="ident" id="4531402">reflect</span><span class="op" id="4531409">.</span><span class="ident" id="4531410">Int64</span><span class="op" id="4531415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531419">return</span>&nbsp;<span class="ident" id="4531426">marshalInt64</span><span class="op" id="4531438">(</span><span class="ident" id="4531439">out</span><span class="op" id="4531442">,</span>&nbsp;<span class="builtintype" id="4531444">int64</span><span class="op" id="4531449">(</span><span class="ident" id="4531450">v</span><span class="op" id="4531451">.</span><span class="ident" id="4531452">Int</span><span class="op" id="4531455">(</span><span class="op" id="4531456">)</span><span class="op" id="4531457">)</span><span class="op" id="4531458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531461">case</span>&nbsp;<span class="ident" id="4531466">reflect</span><span class="op" id="4531473">.</span><span class="ident" id="4531474">Struct</span><span class="op" id="4531480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4531484">t</span>&nbsp;<span class="op" id="4531486">:=</span>&nbsp;<span class="ident" id="4531489">v</span><span class="op" id="4531490">.</span><span class="ident" id="4531491">Type</span><span class="op" id="4531495">(</span><span class="op" id="4531496">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4531501">startingField</span>&nbsp;<span class="op" id="4531515">:=</span>&nbsp;<span class="num" id="4531518">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4531523">//&nbsp;If&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;structure&nbsp;is&nbsp;a&nbsp;non-empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4531581">//&nbsp;RawContents,&nbsp;then&nbsp;we&nbsp;don&#39;t&nbsp;bother&nbsp;serializing&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531642">if</span>&nbsp;<span class="ident" id="4531645">t</span><span class="op" id="4531646">.</span><span class="ident" id="4531647">NumField</span><span class="op" id="4531655">(</span><span class="op" id="4531656">)</span>&nbsp;<span class="op" id="4531658">&gt;</span>&nbsp;<span class="num" id="4531660">0</span>&nbsp;<span class="op" id="4531662">&amp;&amp;</span>&nbsp;<span class="ident" id="4531665">t</span><span class="op" id="4531666">.</span><span class="ident" id="4531667">Field</span><span class="op" id="4531672">(</span><span class="num" id="4531673">0</span><span class="op" id="4531674">)</span><span class="op" id="4531675">.</span><span class="ident" id="4531676">Type</span>&nbsp;<span class="op" id="4531681">==</span>&nbsp;<span class="ident" id="4531684">rawContentsType</span>&nbsp;<span class="op" id="4531700">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4531705">s</span>&nbsp;<span class="op" id="4531707">:=</span>&nbsp;<span class="ident" id="4531710">v</span><span class="op" id="4531711">.</span><span class="ident" id="4531712">Field</span><span class="op" id="4531717">(</span><span class="num" id="4531718">0</span><span class="op" id="4531719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531724">if</span>&nbsp;<span class="ident" id="4531727">s</span><span class="op" id="4531728">.</span><span class="ident" id="4531729">Len</span><span class="op" id="4531732">(</span><span class="op" id="4531733">)</span>&nbsp;<span class="op" id="4531735">&gt;</span>&nbsp;<span class="num" id="4531737">0</span>&nbsp;<span class="op" id="4531739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4531745">bytes</span>&nbsp;<span class="op" id="4531751">:=</span>&nbsp;<span class="builtinfunc" id="4531754">make</span><span class="op" id="4531758">(</span><span class="op" id="4531759">[</span><span class="op" id="4531760">]</span><span class="builtintype" id="4531761">byte</span><span class="op" id="4531765">,</span>&nbsp;<span class="ident" id="4531767">s</span><span class="op" id="4531768">.</span><span class="ident" id="4531769">Len</span><span class="op" id="4531772">(</span><span class="op" id="4531773">)</span><span class="op" id="4531774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4531780">for</span>&nbsp;<span class="ident" id="4531784">i</span>&nbsp;<span class="op" id="4531786">:=</span>&nbsp;<span class="num" id="4531789">0</span><span class="op" id="4531790">;</span>&nbsp;<span class="ident" id="4531792">i</span>&nbsp;<span class="op" id="4531794">&lt;</span>&nbsp;<span class="ident" id="4531796">s</span><span class="op" id="4531797">.</span><span class="ident" id="4531798">Len</span><span class="op" id="4531801">(</span><span class="op" id="4531802">)</span><span class="op" id="4531803">;</span>&nbsp;<span class="ident" id="4531805">i</span><span class="op" id="4531806">++</span>&nbsp;<span class="op" id="4531809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4531816">bytes</span><span class="op" id="4531821">[</span><span class="ident" id="4531822">i</span><span class="op" id="4531823">]</span>&nbsp;<span class="op" id="4531825">=</span>&nbsp;<span class="builtintype" id="4531827">uint8</span><span class="op" id="4531832">(</span><span class="ident" id="4531833">s</span><span class="op" id="4531834">.</span><span class="ident" id="4531835">Index</span><span class="op" id="4531840">(</span><span class="ident" id="4531841">i</span><span class="op" id="4531842">)</span><span class="op" id="4531843">.</span><span class="ident" id="4531844">Uint</span><span class="op" id="4531848">(</span><span class="op" id="4531849">)</span><span class="op" id="4531850">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4531856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4531862">/*&nbsp;The&nbsp;RawContents&nbsp;will&nbsp;contain&nbsp;the&nbsp;tag&nbsp;and<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;length&nbsp;fields&nbsp;but&nbsp;we&#39;ll&nbsp;also&nbsp;be&nbsp;writing<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;those&nbsp;ourselves,&nbsp;so&nbsp;we&nbsp;strip&nbsp;them&nbsp;out&nbsp;of<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;bytes&nbsp;*/</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532021">_</span><span class="op" id="4532022">,</span>&nbsp;<span class="ident" id="4532024">err</span>&nbsp;<span class="op" id="4532028">=</span>&nbsp;<span class="ident" id="4532030">out</span><span class="op" id="4532033">.</span><span class="ident" id="4532034">Write</span><span class="op" id="4532039">(</span><span class="ident" id="4532040">stripTagAndLength</span><span class="op" id="4532057">(</span><span class="ident" id="4532058">bytes</span><span class="op" id="4532063">)</span><span class="op" id="4532064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532070">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532080">}</span>&nbsp;<span class="keyword" id="4532082">else</span>&nbsp;<span class="op" id="4532087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532093">startingField</span>&nbsp;<span class="op" id="4532107">=</span>&nbsp;<span class="num" id="4532109">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532114">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532123">for</span>&nbsp;<span class="ident" id="4532127">i</span>&nbsp;<span class="op" id="4532129">:=</span>&nbsp;<span class="ident" id="4532132">startingField</span><span class="op" id="4532145">;</span>&nbsp;<span class="ident" id="4532147">i</span>&nbsp;<span class="op" id="4532149">&lt;</span>&nbsp;<span class="ident" id="4532151">t</span><span class="op" id="4532152">.</span><span class="ident" id="4532153">NumField</span><span class="op" id="4532161">(</span><span class="op" id="4532162">)</span><span class="op" id="4532163">;</span>&nbsp;<span class="ident" id="4532165">i</span><span class="op" id="4532166">++</span>&nbsp;<span class="op" id="4532169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532174">var</span>&nbsp;<span class="ident" id="4532178">pre</span>&nbsp;<span class="op" id="4532182">*</span><span class="ident" id="4532183">forkableWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532201">pre</span><span class="op" id="4532204">,</span>&nbsp;<span class="ident" id="4532206">out</span>&nbsp;<span class="op" id="4532210">=</span>&nbsp;<span class="ident" id="4532212">out</span><span class="op" id="4532215">.</span><span class="ident" id="4532216">fork</span><span class="op" id="4532220">(</span><span class="op" id="4532221">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532226">err</span>&nbsp;<span class="op" id="4532230">=</span>&nbsp;<span class="ident" id="4532232">marshalField</span><span class="op" id="4532244">(</span><span class="ident" id="4532245">pre</span><span class="op" id="4532248">,</span>&nbsp;<span class="ident" id="4532250">v</span><span class="op" id="4532251">.</span><span class="ident" id="4532252">Field</span><span class="op" id="4532257">(</span><span class="ident" id="4532258">i</span><span class="op" id="4532259">)</span><span class="op" id="4532260">,</span>&nbsp;<span class="ident" id="4532262">parseFieldParameters</span><span class="op" id="4532282">(</span><span class="ident" id="4532283">t</span><span class="op" id="4532284">.</span><span class="ident" id="4532285">Field</span><span class="op" id="4532290">(</span><span class="ident" id="4532291">i</span><span class="op" id="4532292">)</span><span class="op" id="4532293">.</span><span class="ident" id="4532294">Tag</span><span class="op" id="4532297">.</span><span class="ident" id="4532298">Get</span><span class="op" id="4532301">(</span><span class="string" id="4532302">&#34;asn1&#34;</span><span class="op" id="4532308">)</span><span class="op" id="4532309">)</span><span class="op" id="4532310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532315">if</span>&nbsp;<span class="ident" id="4532318">err</span>&nbsp;<span class="op" id="4532322">!=</span>&nbsp;<span class="builtintype" id="4532325">nil</span>&nbsp;<span class="op" id="4532329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532335">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532349">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532353">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532361">case</span>&nbsp;<span class="ident" id="4532366">reflect</span><span class="op" id="4532373">.</span><span class="ident" id="4532374">Slice</span><span class="op" id="4532379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532383">sliceType</span>&nbsp;<span class="op" id="4532393">:=</span>&nbsp;<span class="ident" id="4532396">v</span><span class="op" id="4532397">.</span><span class="ident" id="4532398">Type</span><span class="op" id="4532402">(</span><span class="op" id="4532403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532407">if</span>&nbsp;<span class="ident" id="4532410">sliceType</span><span class="op" id="4532419">.</span><span class="ident" id="4532420">Elem</span><span class="op" id="4532424">(</span><span class="op" id="4532425">)</span><span class="op" id="4532426">.</span><span class="ident" id="4532427">Kind</span><span class="op" id="4532431">(</span><span class="op" id="4532432">)</span>&nbsp;<span class="op" id="4532434">==</span>&nbsp;<span class="ident" id="4532437">reflect</span><span class="op" id="4532444">.</span><span class="ident" id="4532445">Uint8</span>&nbsp;<span class="op" id="4532451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532456">bytes</span>&nbsp;<span class="op" id="4532462">:=</span>&nbsp;<span class="builtinfunc" id="4532465">make</span><span class="op" id="4532469">(</span><span class="op" id="4532470">[</span><span class="op" id="4532471">]</span><span class="builtintype" id="4532472">byte</span><span class="op" id="4532476">,</span>&nbsp;<span class="ident" id="4532478">v</span><span class="op" id="4532479">.</span><span class="ident" id="4532480">Len</span><span class="op" id="4532483">(</span><span class="op" id="4532484">)</span><span class="op" id="4532485">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532490">for</span>&nbsp;<span class="ident" id="4532494">i</span>&nbsp;<span class="op" id="4532496">:=</span>&nbsp;<span class="num" id="4532499">0</span><span class="op" id="4532500">;</span>&nbsp;<span class="ident" id="4532502">i</span>&nbsp;<span class="op" id="4532504">&lt;</span>&nbsp;<span class="ident" id="4532506">v</span><span class="op" id="4532507">.</span><span class="ident" id="4532508">Len</span><span class="op" id="4532511">(</span><span class="op" id="4532512">)</span><span class="op" id="4532513">;</span>&nbsp;<span class="ident" id="4532515">i</span><span class="op" id="4532516">++</span>&nbsp;<span class="op" id="4532519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532525">bytes</span><span class="op" id="4532530">[</span><span class="ident" id="4532531">i</span><span class="op" id="4532532">]</span>&nbsp;<span class="op" id="4532534">=</span>&nbsp;<span class="builtintype" id="4532536">uint8</span><span class="op" id="4532541">(</span><span class="ident" id="4532542">v</span><span class="op" id="4532543">.</span><span class="ident" id="4532544">Index</span><span class="op" id="4532549">(</span><span class="ident" id="4532550">i</span><span class="op" id="4532551">)</span><span class="op" id="4532552">.</span><span class="ident" id="4532553">Uint</span><span class="op" id="4532557">(</span><span class="op" id="4532558">)</span><span class="op" id="4532559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532569">_</span><span class="op" id="4532570">,</span>&nbsp;<span class="ident" id="4532572">err</span>&nbsp;<span class="op" id="4532576">=</span>&nbsp;<span class="ident" id="4532578">out</span><span class="op" id="4532581">.</span><span class="ident" id="4532582">Write</span><span class="op" id="4532587">(</span><span class="ident" id="4532588">bytes</span><span class="op" id="4532593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532598">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532612">var</span>&nbsp;<span class="ident" id="4532616">fp</span>&nbsp;<span class="ident" id="4532619">fieldParameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532637">for</span>&nbsp;<span class="ident" id="4532641">i</span>&nbsp;<span class="op" id="4532643">:=</span>&nbsp;<span class="num" id="4532646">0</span><span class="op" id="4532647">;</span>&nbsp;<span class="ident" id="4532649">i</span>&nbsp;<span class="op" id="4532651">&lt;</span>&nbsp;<span class="ident" id="4532653">v</span><span class="op" id="4532654">.</span><span class="ident" id="4532655">Len</span><span class="op" id="4532658">(</span><span class="op" id="4532659">)</span><span class="op" id="4532660">;</span>&nbsp;<span class="ident" id="4532662">i</span><span class="op" id="4532663">++</span>&nbsp;<span class="op" id="4532666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532671">var</span>&nbsp;<span class="ident" id="4532675">pre</span>&nbsp;<span class="op" id="4532679">*</span><span class="ident" id="4532680">forkableWriter</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532698">pre</span><span class="op" id="4532701">,</span>&nbsp;<span class="ident" id="4532703">out</span>&nbsp;<span class="op" id="4532707">=</span>&nbsp;<span class="ident" id="4532709">out</span><span class="op" id="4532712">.</span><span class="ident" id="4532713">fork</span><span class="op" id="4532717">(</span><span class="op" id="4532718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4532723">err</span>&nbsp;<span class="op" id="4532727">=</span>&nbsp;<span class="ident" id="4532729">marshalField</span><span class="op" id="4532741">(</span><span class="ident" id="4532742">pre</span><span class="op" id="4532745">,</span>&nbsp;<span class="ident" id="4532747">v</span><span class="op" id="4532748">.</span><span class="ident" id="4532749">Index</span><span class="op" id="4532754">(</span><span class="ident" id="4532755">i</span><span class="op" id="4532756">)</span><span class="op" id="4532757">,</span>&nbsp;<span class="ident" id="4532759">fp</span><span class="op" id="4532761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532766">if</span>&nbsp;<span class="ident" id="4532769">err</span>&nbsp;<span class="op" id="4532773">!=</span>&nbsp;<span class="builtintype" id="4532776">nil</span>&nbsp;<span class="op" id="4532780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532786">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532796">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4532800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532804">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532812">case</span>&nbsp;<span class="ident" id="4532817">reflect</span><span class="op" id="4532824">.</span><span class="ident" id="4532825">String</span><span class="op" id="4532831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532835">switch</span>&nbsp;<span class="ident" id="4532842">params</span><span class="op" id="4532848">.</span><span class="ident" id="4532849">stringType</span>&nbsp;<span class="op" id="4532860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532864">case</span>&nbsp;<span class="ident" id="4532869">tagIA5String</span><span class="op" id="4532881">:</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532886">return</span>&nbsp;<span class="ident" id="4532893">marshalIA5String</span><span class="op" id="4532909">(</span><span class="ident" id="4532910">out</span><span class="op" id="4532913">,</span>&nbsp;<span class="ident" id="4532915">v</span><span class="op" id="4532916">.</span><span class="ident" id="4532917">String</span><span class="op" id="4532923">(</span><span class="op" id="4532924">)</span><span class="op" id="4532925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532929">case</span>&nbsp;<span class="ident" id="4532934">tagPrintableString</span><span class="op" id="4532952">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4532957">return</span>&nbsp;<span class="ident" id="4532964">marshalPrintableString</span><span class="op" id="4532986">(</span><span class="ident" id="4532987">out</span><span class="op" id="4532990">,</span>&nbsp;<span class="ident" id="4532992">v</span><span class="op" id="4532993">.</span><span class="ident" id="4532994">String</span><span class="op" id="4533000">(</span><span class="op" id="4533001">)</span><span class="op" id="4533002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533006">default</span><span class="op" id="4533013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533018">return</span>&nbsp;<span class="ident" id="4533025">marshalUTF8String</span><span class="op" id="4533042">(</span><span class="ident" id="4533043">out</span><span class="op" id="4533046">,</span>&nbsp;<span class="ident" id="4533048">v</span><span class="op" id="4533049">.</span><span class="ident" id="4533050">String</span><span class="op" id="4533056">(</span><span class="op" id="4533057">)</span><span class="op" id="4533058">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4533062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4533065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533069">return</span>&nbsp;<span class="ident" id="4533076">StructuralError</span><span class="op" id="4533091">{</span><span class="string" id="4533092">&#34;unknown&nbsp;Go&nbsp;type&#34;</span><span class="op" id="4533109">}</span><br>
<span class="lineno"></span><span class="op" id="4533111">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword" id="4533114">func</span>&nbsp;<span class="ident" id="4533119">marshalField</span><span class="op" id="4533131">(</span><span class="ident" id="4533132">out</span>&nbsp;<span class="op" id="4533136">*</span><span class="ident" id="4533137">forkableWriter</span><span class="op" id="4533151">,</span>&nbsp;<span class="ident" id="4533153">v</span>&nbsp;<span class="ident" id="4533155">reflect</span><span class="op" id="4533162">.</span><span class="ident" id="4533163">Value</span><span class="op" id="4533168">,</span>&nbsp;<span class="ident" id="4533170">params</span>&nbsp;<span class="ident" id="4533177">fieldParameters</span><span class="op" id="4533192">)</span>&nbsp;<span class="op" id="4533194">(</span><span class="ident" id="4533195">err</span>&nbsp;<span class="builtintype" id="4533199">error</span><span class="op" id="4533204">)</span>&nbsp;<span class="op" id="4533206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4533209">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;an&nbsp;interface{}&nbsp;then&nbsp;recurse&nbsp;into&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533266">if</span>&nbsp;<span class="ident" id="4533269">v</span><span class="op" id="4533270">.</span><span class="ident" id="4533271">Kind</span><span class="op" id="4533275">(</span><span class="op" id="4533276">)</span>&nbsp;<span class="op" id="4533278">==</span>&nbsp;<span class="ident" id="4533281">reflect</span><span class="op" id="4533288">.</span><span class="ident" id="4533289">Interface</span>&nbsp;<span class="op" id="4533299">&amp;&amp;</span>&nbsp;<span class="ident" id="4533302">v</span><span class="op" id="4533303">.</span><span class="ident" id="4533304">Type</span><span class="op" id="4533308">(</span><span class="op" id="4533309">)</span><span class="op" id="4533310">.</span><span class="ident" id="4533311">NumMethod</span><span class="op" id="4533320">(</span><span class="op" id="4533321">)</span>&nbsp;<span class="op" id="4533323">==</span>&nbsp;<span class="num" id="4533326">0</span>&nbsp;<span class="op" id="4533328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533332">return</span>&nbsp;<span class="ident" id="4533339">marshalField</span><span class="op" id="4533351">(</span><span class="ident" id="4533352">out</span><span class="op" id="4533355">,</span>&nbsp;<span class="ident" id="4533357">v</span><span class="op" id="4533358">.</span><span class="ident" id="4533359">Elem</span><span class="op" id="4533363">(</span><span class="op" id="4533364">)</span><span class="op" id="4533365">,</span>&nbsp;<span class="ident" id="4533367">params</span><span class="op" id="4533373">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4533376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533380">if</span>&nbsp;<span class="ident" id="4533383">v</span><span class="op" id="4533384">.</span><span class="ident" id="4533385">Kind</span><span class="op" id="4533389">(</span><span class="op" id="4533390">)</span>&nbsp;<span class="op" id="4533392">==</span>&nbsp;<span class="ident" id="4533395">reflect</span><span class="op" id="4533402">.</span><span class="ident" id="4533403">Slice</span>&nbsp;<span class="op" id="4533409">&amp;&amp;</span>&nbsp;<span class="ident" id="4533412">v</span><span class="op" id="4533413">.</span><span class="ident" id="4533414">Len</span><span class="op" id="4533417">(</span><span class="op" id="4533418">)</span>&nbsp;<span class="op" id="4533420">==</span>&nbsp;<span class="num" id="4533423">0</span>&nbsp;<span class="op" id="4533425">&amp;&amp;</span>&nbsp;<span class="ident" id="4533428">params</span><span class="op" id="4533434">.</span><span class="ident" id="4533435">omitEmpty</span>&nbsp;<span class="op" id="4533445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533449">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4533457">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533461">if</span>&nbsp;<span class="ident" id="4533464">params</span><span class="op" id="4533470">.</span><span class="ident" id="4533471">optional</span>&nbsp;<span class="op" id="4533480">&amp;&amp;</span>&nbsp;<span class="ident" id="4533483">params</span><span class="op" id="4533489">.</span><span class="ident" id="4533490">defaultValue</span>&nbsp;<span class="op" id="4533503">!=</span>&nbsp;<span class="builtintype" id="4533506">nil</span>&nbsp;<span class="op" id="4533510">&amp;&amp;</span>&nbsp;<span class="ident" id="4533513">canHaveDefaultValue</span><span class="op" id="4533532">(</span><span class="ident" id="4533533">v</span><span class="op" id="4533534">.</span><span class="ident" id="4533535">Kind</span><span class="op" id="4533539">(</span><span class="op" id="4533540">)</span><span class="op" id="4533541">)</span>&nbsp;<span class="op" id="4533543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4533547">defaultValue</span>&nbsp;<span class="op" id="4533560">:=</span>&nbsp;<span class="ident" id="4533563">reflect</span><span class="op" id="4533570">.</span><span class="ident" id="4533571">New</span><span class="op" id="4533574">(</span><span class="ident" id="4533575">v</span><span class="op" id="4533576">.</span><span class="ident" id="4533577">Type</span><span class="op" id="4533581">(</span><span class="op" id="4533582">)</span><span class="op" id="4533583">)</span><span class="op" id="4533584">.</span><span class="ident" id="4533585">Elem</span><span class="op" id="4533589">(</span><span class="op" id="4533590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4533594">defaultValue</span><span class="op" id="4533606">.</span><span class="ident" id="4533607">SetInt</span><span class="op" id="4533613">(</span><span class="op" id="4533614">*</span><span class="ident" id="4533615">params</span><span class="op" id="4533621">.</span><span class="ident" id="4533622">defaultValue</span><span class="op" id="4533634">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533639">if</span>&nbsp;<span class="ident" id="4533642">reflect</span><span class="op" id="4533649">.</span><span class="ident" id="4533650">DeepEqual</span><span class="op" id="4533659">(</span><span class="ident" id="4533660">v</span><span class="op" id="4533661">.</span><span class="ident" id="4533662">Interface</span><span class="op" id="4533671">(</span><span class="op" id="4533672">)</span><span class="op" id="4533673">,</span>&nbsp;<span class="ident" id="4533675">defaultValue</span><span class="op" id="4533687">.</span><span class="ident" id="4533688">Interface</span><span class="op" id="4533697">(</span><span class="op" id="4533698">)</span><span class="op" id="4533699">)</span>&nbsp;<span class="op" id="4533701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533706">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4533715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4533718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4533722">//&nbsp;If&nbsp;no&nbsp;default&nbsp;value&nbsp;is&nbsp;given&nbsp;then&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;type&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4533791">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;default&nbsp;value.&nbsp;This&nbsp;isn&#39;t&nbsp;obviously&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4533861">//&nbsp;behaviour,&nbsp;but&nbsp;it&#39;s&nbsp;what&nbsp;Go&nbsp;has&nbsp;traditionally&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533917">if</span>&nbsp;<span class="ident" id="4533920">params</span><span class="op" id="4533926">.</span><span class="ident" id="4533927">optional</span>&nbsp;<span class="op" id="4533936">&amp;&amp;</span>&nbsp;<span class="ident" id="4533939">params</span><span class="op" id="4533945">.</span><span class="ident" id="4533946">defaultValue</span>&nbsp;<span class="op" id="4533959">==</span>&nbsp;<span class="builtintype" id="4533962">nil</span>&nbsp;<span class="op" id="4533966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4533970">if</span>&nbsp;<span class="ident" id="4533973">reflect</span><span class="op" id="4533980">.</span><span class="ident" id="4533981">DeepEqual</span><span class="op" id="4533990">(</span><span class="ident" id="4533991">v</span><span class="op" id="4533992">.</span><span class="ident" id="4533993">Interface</span><span class="op" id="4534002">(</span><span class="op" id="4534003">)</span><span class="op" id="4534004">,</span>&nbsp;<span class="ident" id="4534006">reflect</span><span class="op" id="4534013">.</span><span class="ident" id="4534014">Zero</span><span class="op" id="4534018">(</span><span class="ident" id="4534019">v</span><span class="op" id="4534020">.</span><span class="ident" id="4534021">Type</span><span class="op" id="4534025">(</span><span class="op" id="4534026">)</span><span class="op" id="4534027">)</span><span class="op" id="4534028">.</span><span class="ident" id="4534029">Interface</span><span class="op" id="4534038">(</span><span class="op" id="4534039">)</span><span class="op" id="4534040">)</span>&nbsp;<span class="op" id="4534042">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534047">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534063">if</span>&nbsp;<span class="ident" id="4534066">v</span><span class="op" id="4534067">.</span><span class="ident" id="4534068">Type</span><span class="op" id="4534072">(</span><span class="op" id="4534073">)</span>&nbsp;<span class="op" id="4534075">==</span>&nbsp;<span class="ident" id="4534078">rawValueType</span>&nbsp;<span class="op" id="4534091">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534095">rv</span>&nbsp;<span class="op" id="4534098">:=</span>&nbsp;<span class="ident" id="4534101">v</span><span class="op" id="4534102">.</span><span class="ident" id="4534103">Interface</span><span class="op" id="4534112">(</span><span class="op" id="4534113">)</span><span class="op" id="4534114">.</span><span class="op" id="4534115">(</span><span class="ident" id="4534116">RawValue</span><span class="op" id="4534124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534128">if</span>&nbsp;<span class="builtinfunc" id="4534131">len</span><span class="op" id="4534134">(</span><span class="ident" id="4534135">rv</span><span class="op" id="4534137">.</span><span class="ident" id="4534138">FullBytes</span><span class="op" id="4534147">)</span>&nbsp;<span class="op" id="4534149">!=</span>&nbsp;<span class="num" id="4534152">0</span>&nbsp;<span class="op" id="4534154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534159">_</span><span class="op" id="4534160">,</span>&nbsp;<span class="ident" id="4534162">err</span>&nbsp;<span class="op" id="4534166">=</span>&nbsp;<span class="ident" id="4534168">out</span><span class="op" id="4534171">.</span><span class="ident" id="4534172">Write</span><span class="op" id="4534177">(</span><span class="ident" id="4534178">rv</span><span class="op" id="4534180">.</span><span class="ident" id="4534181">FullBytes</span><span class="op" id="4534190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534194">}</span>&nbsp;<span class="keyword" id="4534196">else</span>&nbsp;<span class="op" id="4534201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534206">err</span>&nbsp;<span class="op" id="4534210">=</span>&nbsp;<span class="ident" id="4534212">marshalTagAndLength</span><span class="op" id="4534231">(</span><span class="ident" id="4534232">out</span><span class="op" id="4534235">,</span>&nbsp;<span class="ident" id="4534237">tagAndLength</span><span class="op" id="4534249">{</span><span class="ident" id="4534250">rv</span><span class="op" id="4534252">.</span><span class="ident" id="4534253">Class</span><span class="op" id="4534258">,</span>&nbsp;<span class="ident" id="4534260">rv</span><span class="op" id="4534262">.</span><span class="ident" id="4534263">Tag</span><span class="op" id="4534266">,</span>&nbsp;<span class="builtinfunc" id="4534268">len</span><span class="op" id="4534271">(</span><span class="ident" id="4534272">rv</span><span class="op" id="4534274">.</span><span class="ident" id="4534275">Bytes</span><span class="op" id="4534280">)</span><span class="op" id="4534281">,</span>&nbsp;<span class="ident" id="4534283">rv</span><span class="op" id="4534285">.</span><span class="ident" id="4534286">IsCompound</span><span class="op" id="4534296">}</span><span class="op" id="4534297">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534302">if</span>&nbsp;<span class="ident" id="4534305">err</span>&nbsp;<span class="op" id="4534309">!=</span>&nbsp;<span class="builtintype" id="4534312">nil</span>&nbsp;<span class="op" id="4534316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534322">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534337">_</span><span class="op" id="4534338">,</span>&nbsp;<span class="ident" id="4534340">err</span>&nbsp;<span class="op" id="4534344">=</span>&nbsp;<span class="ident" id="4534346">out</span><span class="op" id="4534349">.</span><span class="ident" id="4534350">Write</span><span class="op" id="4534355">(</span><span class="ident" id="4534356">rv</span><span class="op" id="4534358">.</span><span class="ident" id="4534359">Bytes</span><span class="op" id="4534364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534368">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534372">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534384">tag</span><span class="op" id="4534387">,</span>&nbsp;<span class="ident" id="4534389">isCompound</span><span class="op" id="4534399">,</span>&nbsp;<span class="ident" id="4534401">ok</span>&nbsp;<span class="op" id="4534404">:=</span>&nbsp;<span class="ident" id="4534407">getUniversalType</span><span class="op" id="4534423">(</span><span class="ident" id="4534424">v</span><span class="op" id="4534425">.</span><span class="ident" id="4534426">Type</span><span class="op" id="4534430">(</span><span class="op" id="4534431">)</span><span class="op" id="4534432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534435">if</span>&nbsp;<span class="op" id="4534438">!</span><span class="ident" id="4534439">ok</span>&nbsp;<span class="op" id="4534442">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534446">err</span>&nbsp;<span class="op" id="4534450">=</span>&nbsp;<span class="ident" id="4534452">StructuralError</span><span class="op" id="4534467">{</span><span class="ident" id="4534468">fmt</span><span class="op" id="4534471">.</span><span class="ident" id="4534472">Sprintf</span><span class="op" id="4534479">(</span><span class="string" id="4534480">&#34;unknown&nbsp;Go&nbsp;type:&nbsp;%v&#34;</span><span class="op" id="4534501">,</span>&nbsp;<span class="ident" id="4534503">v</span><span class="op" id="4534504">.</span><span class="ident" id="4534505">Type</span><span class="op" id="4534509">(</span><span class="op" id="4534510">)</span><span class="op" id="4534511">)</span><span class="op" id="4534512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534516">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4534527">class</span>&nbsp;<span class="op" id="4534533">:=</span>&nbsp;<span class="ident" id="4534536">classUniversal</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534553">if</span>&nbsp;<span class="ident" id="4534556">params</span><span class="op" id="4534562">.</span><span class="ident" id="4534563">stringType</span>&nbsp;<span class="op" id="4534574">!=</span>&nbsp;<span class="num" id="4534577">0</span>&nbsp;<span class="op" id="4534579">&amp;&amp;</span>&nbsp;<span class="ident" id="4534582">tag</span>&nbsp;<span class="op" id="4534586">!=</span>&nbsp;<span class="ident" id="4534589">tagPrintableString</span>&nbsp;<span class="op" id="4534608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534612">return</span>&nbsp;<span class="ident" id="4534619">StructuralError</span><span class="op" id="4534634">{</span><span class="string" id="4534635">&#34;explicit&nbsp;string&nbsp;type&nbsp;given&nbsp;to&nbsp;non-string&nbsp;member&#34;</span><span class="op" id="4534684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4534687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534691">switch</span>&nbsp;<span class="ident" id="4534698">tag</span>&nbsp;<span class="op" id="4534702">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534705">case</span>&nbsp;<span class="ident" id="4534710">tagPrintableString</span><span class="op" id="4534728">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534732">if</span>&nbsp;<span class="ident" id="4534735">params</span><span class="op" id="4534741">.</span><span class="ident" id="4534742">stringType</span>&nbsp;<span class="op" id="4534753">==</span>&nbsp;<span class="num" id="4534756">0</span>&nbsp;<span class="op" id="4534758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4534763">//&nbsp;This&nbsp;is&nbsp;a&nbsp;string&nbsp;without&nbsp;an&nbsp;explicit&nbsp;string&nbsp;type.&nbsp;We&#39;ll&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4534829">//&nbsp;a&nbsp;PrintableString&nbsp;if&nbsp;the&nbsp;character&nbsp;set&nbsp;in&nbsp;the&nbsp;string&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4534891">//&nbsp;sufficiently&nbsp;limited,&nbsp;otherwise&nbsp;we&#39;ll&nbsp;use&nbsp;a&nbsp;UTF8String.</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534953">for</span>&nbsp;<span class="ident" id="4534957">_</span><span class="op" id="4534958">,</span>&nbsp;<span class="ident" id="4534960">r</span>&nbsp;<span class="op" id="4534962">:=</span>&nbsp;<span class="keyword" id="4534965">range</span>&nbsp;<span class="ident" id="4534971">v</span><span class="op" id="4534972">.</span><span class="ident" id="4534973">String</span><span class="op" id="4534979">(</span><span class="op" id="4534980">)</span>&nbsp;<span class="op" id="4534982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4534988">if</span>&nbsp;<span class="ident" id="4534991">r</span>&nbsp;<span class="op" id="4534993">&gt;=</span>&nbsp;<span class="ident" id="4534996">utf8</span><span class="op" id="4535000">.</span><span class="ident" id="4535001">RuneSelf</span>&nbsp;<span class="op" id="4535010">||</span>&nbsp;<span class="op" id="4535013">!</span><span class="ident" id="4535014">isPrintable</span><span class="op" id="4535025">(</span><span class="builtintype" id="4535026">byte</span><span class="op" id="4535030">(</span><span class="ident" id="4535031">r</span><span class="op" id="4535032">)</span><span class="op" id="4535033">)</span>&nbsp;<span class="op" id="4535035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535042">if</span>&nbsp;<span class="op" id="4535045">!</span><span class="ident" id="4535046">utf8</span><span class="op" id="4535050">.</span><span class="ident" id="4535051">ValidString</span><span class="op" id="4535062">(</span><span class="ident" id="4535063">v</span><span class="op" id="4535064">.</span><span class="ident" id="4535065">String</span><span class="op" id="4535071">(</span><span class="op" id="4535072">)</span><span class="op" id="4535073">)</span>&nbsp;<span class="op" id="4535075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535083">return</span>&nbsp;<span class="ident" id="4535090">errors</span><span class="op" id="4535096">.</span><span class="ident" id="4535097">New</span><span class="op" id="4535100">(</span><span class="string" id="4535101">&#34;asn1:&nbsp;string&nbsp;not&nbsp;valid&nbsp;UTF-8&#34;</span><span class="op" id="4535131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535138">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535145">tag</span>&nbsp;<span class="op" id="4535149">=</span>&nbsp;<span class="ident" id="4535151">tagUTF8String</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535170">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535189">}</span>&nbsp;<span class="keyword" id="4535191">else</span>&nbsp;<span class="op" id="4535196">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535201">tag</span>&nbsp;<span class="op" id="4535205">=</span>&nbsp;<span class="ident" id="4535207">params</span><span class="op" id="4535213">.</span><span class="ident" id="4535214">stringType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535230">case</span>&nbsp;<span class="ident" id="4535235">tagUTCTime</span><span class="op" id="4535245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535249">if</span>&nbsp;<span class="ident" id="4535252">outsideUTCRange</span><span class="op" id="4535267">(</span><span class="ident" id="4535268">v</span><span class="op" id="4535269">.</span><span class="ident" id="4535270">Interface</span><span class="op" id="4535279">(</span><span class="op" id="4535280">)</span><span class="op" id="4535281">.</span><span class="op" id="4535282">(</span><span class="ident" id="4535283">time</span><span class="op" id="4535287">.</span><span class="ident" id="4535288">Time</span><span class="op" id="4535292">)</span><span class="op" id="4535293">)</span>&nbsp;<span class="op" id="4535295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535300">tag</span>&nbsp;<span class="op" id="4535304">=</span>&nbsp;<span class="ident" id="4535306">tagGeneralizedTime</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535334">if</span>&nbsp;<span class="ident" id="4535337">params</span><span class="op" id="4535343">.</span><span class="ident" id="4535344">set</span>&nbsp;<span class="op" id="4535348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535352">if</span>&nbsp;<span class="ident" id="4535355">tag</span>&nbsp;<span class="op" id="4535359">!=</span>&nbsp;<span class="ident" id="4535362">tagSequence</span>&nbsp;<span class="op" id="4535374">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535379">return</span>&nbsp;<span class="ident" id="4535386">StructuralError</span><span class="op" id="4535401">{</span><span class="string" id="4535402">&#34;non&nbsp;sequence&nbsp;tagged&nbsp;as&nbsp;set&#34;</span><span class="op" id="4535430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535438">tag</span>&nbsp;<span class="op" id="4535442">=</span>&nbsp;<span class="ident" id="4535444">tagSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535456">tags</span><span class="op" id="4535460">,</span>&nbsp;<span class="ident" id="4535462">body</span>&nbsp;<span class="op" id="4535467">:=</span>&nbsp;<span class="ident" id="4535470">out</span><span class="op" id="4535473">.</span><span class="ident" id="4535474">fork</span><span class="op" id="4535478">(</span><span class="op" id="4535479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535483">err</span>&nbsp;<span class="op" id="4535487">=</span>&nbsp;<span class="ident" id="4535489">marshalBody</span><span class="op" id="4535500">(</span><span class="ident" id="4535501">body</span><span class="op" id="4535505">,</span>&nbsp;<span class="ident" id="4535507">v</span><span class="op" id="4535508">,</span>&nbsp;<span class="ident" id="4535510">params</span><span class="op" id="4535516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535519">if</span>&nbsp;<span class="ident" id="4535522">err</span>&nbsp;<span class="op" id="4535526">!=</span>&nbsp;<span class="builtintype" id="4535529">nil</span>&nbsp;<span class="op" id="4535533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535537">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535549">bodyLen</span>&nbsp;<span class="op" id="4535557">:=</span>&nbsp;<span class="ident" id="4535560">body</span><span class="op" id="4535564">.</span><span class="ident" id="4535565">Len</span><span class="op" id="4535568">(</span><span class="op" id="4535569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535573">var</span>&nbsp;<span class="ident" id="4535577">explicitTag</span>&nbsp;<span class="op" id="4535589">*</span><span class="ident" id="4535590">forkableWriter</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535606">if</span>&nbsp;<span class="ident" id="4535609">params</span><span class="op" id="4535615">.</span><span class="ident" id="4535616">explicit</span>&nbsp;<span class="op" id="4535625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535629">explicitTag</span><span class="op" id="4535640">,</span>&nbsp;<span class="ident" id="4535642">tags</span>&nbsp;<span class="op" id="4535647">=</span>&nbsp;<span class="ident" id="4535649">tags</span><span class="op" id="4535653">.</span><span class="ident" id="4535654">fork</span><span class="op" id="4535658">(</span><span class="op" id="4535659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535666">if</span>&nbsp;<span class="op" id="4535669">!</span><span class="ident" id="4535670">params</span><span class="op" id="4535676">.</span><span class="ident" id="4535677">explicit</span>&nbsp;<span class="op" id="4535686">&amp;&amp;</span>&nbsp;<span class="ident" id="4535689">params</span><span class="op" id="4535695">.</span><span class="ident" id="4535696">tag</span>&nbsp;<span class="op" id="4535700">!=</span>&nbsp;<span class="builtintype" id="4535703">nil</span>&nbsp;<span class="op" id="4535707">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4535711">//&nbsp;implicit&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535730">tag</span>&nbsp;<span class="op" id="4535734">=</span>&nbsp;<span class="op" id="4535736">*</span><span class="ident" id="4535737">params</span><span class="op" id="4535743">.</span><span class="ident" id="4535744">tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535750">class</span>&nbsp;<span class="op" id="4535756">=</span>&nbsp;<span class="ident" id="4535758">classContextSpecific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535784">err</span>&nbsp;<span class="op" id="4535788">=</span>&nbsp;<span class="ident" id="4535790">marshalTagAndLength</span><span class="op" id="4535809">(</span><span class="ident" id="4535810">tags</span><span class="op" id="4535814">,</span>&nbsp;<span class="ident" id="4535816">tagAndLength</span><span class="op" id="4535828">{</span><span class="ident" id="4535829">class</span><span class="op" id="4535834">,</span>&nbsp;<span class="ident" id="4535836">tag</span><span class="op" id="4535839">,</span>&nbsp;<span class="ident" id="4535841">bodyLen</span><span class="op" id="4535848">,</span>&nbsp;<span class="ident" id="4535850">isCompound</span><span class="op" id="4535860">}</span><span class="op" id="4535861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535864">if</span>&nbsp;<span class="ident" id="4535867">err</span>&nbsp;<span class="op" id="4535871">!=</span>&nbsp;<span class="builtintype" id="4535874">nil</span>&nbsp;<span class="op" id="4535878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535882">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4535890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4535894">if</span>&nbsp;<span class="ident" id="4535897">params</span><span class="op" id="4535903">.</span><span class="ident" id="4535904">explicit</span>&nbsp;<span class="op" id="4535913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535917">err</span>&nbsp;<span class="op" id="4535921">=</span>&nbsp;<span class="ident" id="4535923">marshalTagAndLength</span><span class="op" id="4535942">(</span><span class="ident" id="4535943">explicitTag</span><span class="op" id="4535954">,</span>&nbsp;<span class="ident" id="4535956">tagAndLength</span><span class="op" id="4535968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535973">class</span><span class="op" id="4535978">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4535985">classContextSpecific</span><span class="op" id="4536005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536010">tag</span><span class="op" id="4536013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4536022">*</span><span class="ident" id="4536023">params</span><span class="op" id="4536029">.</span><span class="ident" id="4536030">tag</span><span class="op" id="4536033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536038">length</span><span class="op" id="4536044">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536050">bodyLen</span>&nbsp;<span class="op" id="4536058">+</span>&nbsp;<span class="ident" id="4536060">tags</span><span class="op" id="4536064">.</span><span class="ident" id="4536065">Len</span><span class="op" id="4536068">(</span><span class="op" id="4536069">)</span><span class="op" id="4536070">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536075">isCompound</span><span class="op" id="4536085">:</span>&nbsp;<span class="builtintype" id="4536087">true</span><span class="op" id="4536091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4536095">}</span><span class="op" id="4536096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4536099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4536103">return</span>&nbsp;<span class="builtintype" id="4536110">nil</span><br>
<span class="lineno">625</span><span class="op" id="4536114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4536117">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;ASN.1&nbsp;encoding&nbsp;of&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4536163">//</span><br>
<span class="lineno"></span><span class="comment" id="4536166">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;struct&nbsp;tags&nbsp;recognised&nbsp;by&nbsp;Unmarshal,&nbsp;the&nbsp;following&nbsp;can&nbsp;be</span><br>
<span class="lineno">630</span><span class="comment" id="4536246">//&nbsp;used:</span><br>
<span class="lineno"></span><span class="comment" id="4536255">//</span><br>
<span class="lineno"></span><span class="comment" id="4536258">//&nbsp;&nbsp;&nbsp;&nbsp;ia5:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;IA5&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4536320">//&nbsp;&nbsp;&nbsp;&nbsp;omitempty:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;empty&nbsp;slices&nbsp;to&nbsp;be&nbsp;skipped</span><br>
<span class="lineno"></span><span class="comment" id="4536368">//&nbsp;&nbsp;&nbsp;&nbsp;printable:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;PrintableString&nbsp;strings.</span><br>
<span class="lineno">635</span><span class="comment" id="4536448">//&nbsp;&nbsp;&nbsp;&nbsp;utf8:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;UTF8&nbsp;strings</span><br>
<span class="lineno"></span><span class="keyword" id="4536512">func</span>&nbsp;<span class="ident" id="4536517">Marshal</span><span class="op" id="4536524">(</span><span class="ident" id="4536525">val</span>&nbsp;<span class="keyword" id="4536529">interface</span><span class="op" id="4536538">{</span><span class="op" id="4536539">}</span><span class="op" id="4536540">)</span>&nbsp;<span class="op" id="4536542">(</span><span class="op" id="4536543">[</span><span class="op" id="4536544">]</span><span class="builtintype" id="4536545">byte</span><span class="op" id="4536549">,</span>&nbsp;<span class="builtintype" id="4536551">error</span><span class="op" id="4536556">)</span>&nbsp;<span class="op" id="4536558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4536561">var</span>&nbsp;<span class="ident" id="4536565">out</span>&nbsp;<span class="ident" id="4536569">bytes</span><span class="op" id="4536574">.</span><span class="ident" id="4536575">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536583">v</span>&nbsp;<span class="op" id="4536585">:=</span>&nbsp;<span class="ident" id="4536588">reflect</span><span class="op" id="4536595">.</span><span class="ident" id="4536596">ValueOf</span><span class="op" id="4536603">(</span><span class="ident" id="4536604">val</span><span class="op" id="4536607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536610">f</span>&nbsp;<span class="op" id="4536612">:=</span>&nbsp;<span class="ident" id="4536615">newForkableWriter</span><span class="op" id="4536632">(</span><span class="op" id="4536633">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536636">err</span>&nbsp;<span class="op" id="4536640">:=</span>&nbsp;<span class="ident" id="4536643">marshalField</span><span class="op" id="4536655">(</span><span class="ident" id="4536656">f</span><span class="op" id="4536657">,</span>&nbsp;<span class="ident" id="4536659">v</span><span class="op" id="4536660">,</span>&nbsp;<span class="ident" id="4536662">fieldParameters</span><span class="op" id="4536677">{</span><span class="op" id="4536678">}</span><span class="op" id="4536679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4536682">if</span>&nbsp;<span class="ident" id="4536685">err</span>&nbsp;<span class="op" id="4536689">!=</span>&nbsp;<span class="builtintype" id="4536692">nil</span>&nbsp;<span class="op" id="4536696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4536700">return</span>&nbsp;<span class="builtintype" id="4536707">nil</span><span class="op" id="4536710">,</span>&nbsp;<span class="ident" id="4536712">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4536717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4536720">_</span><span class="op" id="4536721">,</span>&nbsp;<span class="ident" id="4536723">err</span>&nbsp;<span class="op" id="4536727">=</span>&nbsp;<span class="ident" id="4536729">f</span><span class="op" id="4536730">.</span><span class="ident" id="4536731">writeTo</span><span class="op" id="4536738">(</span><span class="op" id="4536739">&amp;</span><span class="ident" id="4536740">out</span><span class="op" id="4536743">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4536746">return</span>&nbsp;<span class="ident" id="4536753">out</span><span class="op" id="4536756">.</span><span class="ident" id="4536757">Bytes</span><span class="op" id="4536762">(</span><span class="op" id="4536763">)</span><span class="op" id="4536764">,</span>&nbsp;<span class="builtintype" id="4536766">nil</span><br>
<span class="lineno"></span><span class="op" id="4536770">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
