<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html" class="current">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1697523">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1697578">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1697632">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1697683">package</span>&nbsp;<span class="ident" id="1697691">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1697700">import</span>&nbsp;<span class="string" id="1697707">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1697717">//&nbsp;Declarations&nbsp;for&nbsp;runtime&nbsp;services&nbsp;implemented&nbsp;in&nbsp;C&nbsp;or&nbsp;assembly.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1697785">const</span>&nbsp;<span class="ident" id="1697791">ptrSize</span>&nbsp;<span class="op" id="1697799">=</span>&nbsp;<span class="num" id="1697801">4</span>&nbsp;<span class="op" id="1697803">&lt;&lt;</span>&nbsp;<span class="op" id="1697806">(</span><span class="op" id="1697807">^</span><span class="builtintype" id="1697808">uintptr</span><span class="op" id="1697815">(</span><span class="num" id="1697816">0</span><span class="op" id="1697817">)</span>&nbsp;<span class="op" id="1697819">&gt;&gt;</span>&nbsp;<span class="num" id="1697822">63</span><span class="op" id="1697824">)</span>&nbsp;<span class="comment" id="1697826">//&nbsp;unsafe.Sizeof(uintptr(0))&nbsp;but&nbsp;an&nbsp;ideal&nbsp;const</span><br>
<span class="lineno"></span><span class="keyword" id="1697874">const</span>&nbsp;<span class="ident" id="1697880">regSize</span>&nbsp;<span class="op" id="1697888">=</span>&nbsp;<span class="num" id="1697890">4</span>&nbsp;<span class="op" id="1697892">&lt;&lt;</span>&nbsp;<span class="op" id="1697895">(</span><span class="op" id="1697896">^</span><span class="ident" id="1697897">uintreg</span><span class="op" id="1697904">(</span><span class="num" id="1697905">0</span><span class="op" id="1697906">)</span>&nbsp;<span class="op" id="1697908">&gt;&gt;</span>&nbsp;<span class="num" id="1697911">63</span><span class="op" id="1697913">)</span>&nbsp;<span class="comment" id="1697915">//&nbsp;unsafe.Sizeof(uintreg(0))&nbsp;but&nbsp;an&nbsp;ideal&nbsp;const</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1697964">//&nbsp;Should&nbsp;be&nbsp;a&nbsp;built-in&nbsp;for&nbsp;unsafe.Pointer?</span><br>
<span class="lineno">15</span><span class="comment" id="1698008">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1698021">func</span>&nbsp;<span class="ident" id="1698026">add</span><span class="op" id="1698029">(</span><span class="ident" id="1698030">p</span>&nbsp;<span class="ident" id="1698032">unsafe</span><span class="op" id="1698038">.</span><span class="ident" id="1698039">Pointer</span><span class="op" id="1698046">,</span>&nbsp;<span class="ident" id="1698048">x</span>&nbsp;<span class="builtintype" id="1698050">uintptr</span><span class="op" id="1698057">)</span>&nbsp;<span class="ident" id="1698059">unsafe</span><span class="op" id="1698065">.</span><span class="ident" id="1698066">Pointer</span>&nbsp;<span class="op" id="1698074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1698077">return</span>&nbsp;<span class="ident" id="1698084">unsafe</span><span class="op" id="1698090">.</span><span class="ident" id="1698091">Pointer</span><span class="op" id="1698098">(</span><span class="builtintype" id="1698099">uintptr</span><span class="op" id="1698106">(</span><span class="ident" id="1698107">p</span><span class="op" id="1698108">)</span>&nbsp;<span class="op" id="1698110">+</span>&nbsp;<span class="ident" id="1698112">x</span><span class="op" id="1698113">)</span><br>
<span class="lineno"></span><span class="op" id="1698115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1698118">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;2</span><br>
<span class="lineno"></span><span class="keyword" id="1698144">func</span>&nbsp;<span class="ident" id="1698149">roundup</span><span class="op" id="1698156">(</span><span class="ident" id="1698157">p</span>&nbsp;<span class="ident" id="1698159">unsafe</span><span class="op" id="1698165">.</span><span class="ident" id="1698166">Pointer</span><span class="op" id="1698173">,</span>&nbsp;<span class="ident" id="1698175">n</span>&nbsp;<span class="builtintype" id="1698177">uintptr</span><span class="op" id="1698184">)</span>&nbsp;<span class="ident" id="1698186">unsafe</span><span class="op" id="1698192">.</span><span class="ident" id="1698193">Pointer</span>&nbsp;<span class="op" id="1698201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1698204">delta</span>&nbsp;<span class="op" id="1698210">:=</span>&nbsp;<span class="op" id="1698213">-</span><span class="builtintype" id="1698214">uintptr</span><span class="op" id="1698221">(</span><span class="ident" id="1698222">p</span><span class="op" id="1698223">)</span>&nbsp;<span class="op" id="1698225">&amp;</span>&nbsp;<span class="op" id="1698227">(</span><span class="ident" id="1698228">n</span>&nbsp;<span class="op" id="1698230">-</span>&nbsp;<span class="num" id="1698232">1</span><span class="op" id="1698233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1698236">return</span>&nbsp;<span class="ident" id="1698243">unsafe</span><span class="op" id="1698249">.</span><span class="ident" id="1698250">Pointer</span><span class="op" id="1698257">(</span><span class="builtintype" id="1698258">uintptr</span><span class="op" id="1698265">(</span><span class="ident" id="1698266">p</span><span class="op" id="1698267">)</span>&nbsp;<span class="op" id="1698269">+</span>&nbsp;<span class="ident" id="1698271">delta</span><span class="op" id="1698276">)</span><br>
<span class="lineno"></span><span class="op" id="1698278">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1698281">//&nbsp;in&nbsp;runtime.c</span><br>
<span class="lineno"></span><span class="keyword" id="1698297">func</span>&nbsp;<span class="ident" id="1698302">getg</span><span class="op" id="1698306">(</span><span class="op" id="1698307">)</span>&nbsp;<span class="op" id="1698309">*</span><span class="ident" id="1698310">g</span><br>
<span class="lineno"></span><span class="keyword" id="1698312">func</span>&nbsp;<span class="ident" id="1698317">acquirem</span><span class="op" id="1698325">(</span><span class="op" id="1698326">)</span>&nbsp;<span class="op" id="1698328">*</span><span class="ident" id="1698329">m</span><br>
<span class="lineno"></span><span class="keyword" id="1698331">func</span>&nbsp;<span class="ident" id="1698336">releasem</span><span class="op" id="1698344">(</span><span class="ident" id="1698345">mp</span>&nbsp;<span class="op" id="1698348">*</span><span class="ident" id="1698349">m</span><span class="op" id="1698350">)</span><br>
<span class="lineno">30</span><span class="keyword" id="1698352">func</span>&nbsp;<span class="ident" id="1698357">gomcache</span><span class="op" id="1698365">(</span><span class="op" id="1698366">)</span>&nbsp;<span class="op" id="1698368">*</span><span class="ident" id="1698369">mcache</span><br>
<span class="lineno"></span><span class="keyword" id="1698376">func</span>&nbsp;<span class="ident" id="1698381">readgstatus</span><span class="op" id="1698392">(</span><span class="op" id="1698393">*</span><span class="ident" id="1698394">g</span><span class="op" id="1698395">)</span>&nbsp;<span class="builtintype" id="1698397">uint32</span>&nbsp;<span class="comment" id="1698404">//&nbsp;proc.c</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1698415">//&nbsp;mcall&nbsp;switches&nbsp;from&nbsp;the&nbsp;g&nbsp;to&nbsp;the&nbsp;g0&nbsp;stack&nbsp;and&nbsp;invokes&nbsp;fn(g),</span><br>
<span class="lineno"></span><span class="comment" id="1698479">//&nbsp;where&nbsp;g&nbsp;is&nbsp;the&nbsp;goroutine&nbsp;that&nbsp;made&nbsp;the&nbsp;call.</span><br>
<span class="lineno">35</span><span class="comment" id="1698527">//&nbsp;mcall&nbsp;saves&nbsp;g&#39;s&nbsp;current&nbsp;PC/SP&nbsp;in&nbsp;g-&gt;sched&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;restored&nbsp;later.</span><br>
<span class="lineno"></span><span class="comment" id="1698606">//&nbsp;It&nbsp;is&nbsp;up&nbsp;to&nbsp;fn&nbsp;to&nbsp;arrange&nbsp;for&nbsp;that&nbsp;later&nbsp;execution,&nbsp;typically&nbsp;by&nbsp;recording</span><br>
<span class="lineno"></span><span class="comment" id="1698684">//&nbsp;g&nbsp;in&nbsp;a&nbsp;data&nbsp;structure,&nbsp;causing&nbsp;something&nbsp;to&nbsp;call&nbsp;ready(g)&nbsp;later.</span><br>
<span class="lineno"></span><span class="comment" id="1698752">//&nbsp;mcall&nbsp;returns&nbsp;to&nbsp;the&nbsp;original&nbsp;goroutine&nbsp;g&nbsp;later,&nbsp;when&nbsp;g&nbsp;has&nbsp;been&nbsp;rescheduled.</span><br>
<span class="lineno"></span><span class="comment" id="1698833">//&nbsp;fn&nbsp;must&nbsp;not&nbsp;return&nbsp;at&nbsp;all;&nbsp;typically&nbsp;it&nbsp;ends&nbsp;by&nbsp;calling&nbsp;schedule,&nbsp;to&nbsp;let&nbsp;the&nbsp;m</span><br>
<span class="lineno">40</span><span class="comment" id="1698915">//&nbsp;run&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="1698940">//</span><br>
<span class="lineno"></span><span class="comment" id="1698943">//&nbsp;mcall&nbsp;can&nbsp;only&nbsp;be&nbsp;called&nbsp;from&nbsp;g&nbsp;stacks&nbsp;(not&nbsp;g0,&nbsp;not&nbsp;gsignal).</span><br>
<span class="lineno"></span><span class="comment" id="1699008">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1699022">func</span>&nbsp;<span class="ident" id="1699027">mcall</span><span class="op" id="1699032">(</span><span class="ident" id="1699033">fn</span>&nbsp;<span class="keyword" id="1699036">func</span><span class="op" id="1699040">(</span><span class="op" id="1699041">*</span><span class="ident" id="1699042">g</span><span class="op" id="1699043">)</span><span class="op" id="1699044">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1699047">//&nbsp;onM&nbsp;switches&nbsp;from&nbsp;the&nbsp;g&nbsp;to&nbsp;the&nbsp;g0&nbsp;stack&nbsp;and&nbsp;invokes&nbsp;fn().</span><br>
<span class="lineno"></span><span class="comment" id="1699108">//&nbsp;When&nbsp;fn&nbsp;returns,&nbsp;onM&nbsp;switches&nbsp;back&nbsp;to&nbsp;the&nbsp;g&nbsp;and&nbsp;returns,</span><br>
<span class="lineno"></span><span class="comment" id="1699168">//&nbsp;continuing&nbsp;execution&nbsp;on&nbsp;the&nbsp;g&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="1699208">//&nbsp;If&nbsp;arguments&nbsp;must&nbsp;be&nbsp;passed&nbsp;to&nbsp;fn,&nbsp;they&nbsp;can&nbsp;be&nbsp;written&nbsp;to</span><br>
<span class="lineno">50</span><span class="comment" id="1699269">//&nbsp;g-&gt;m-&gt;ptrarg&nbsp;(pointers)&nbsp;and&nbsp;g-&gt;m-&gt;scalararg&nbsp;(non-pointers)</span><br>
<span class="lineno"></span><span class="comment" id="1699331">//&nbsp;before&nbsp;the&nbsp;call&nbsp;and&nbsp;then&nbsp;consulted&nbsp;during&nbsp;fn.</span><br>
<span class="lineno"></span><span class="comment" id="1699380">//&nbsp;Similarly,&nbsp;fn&nbsp;can&nbsp;pass&nbsp;return&nbsp;values&nbsp;back&nbsp;in&nbsp;those&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="1699445">//&nbsp;If&nbsp;fn&nbsp;is&nbsp;written&nbsp;in&nbsp;Go,&nbsp;it&nbsp;can&nbsp;be&nbsp;a&nbsp;closure,&nbsp;which&nbsp;avoids&nbsp;the&nbsp;need&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="1699519">//&nbsp;ptrarg&nbsp;and&nbsp;scalararg&nbsp;entirely.</span><br>
<span class="lineno">55</span><span class="comment" id="1699553">//&nbsp;After&nbsp;reading&nbsp;values&nbsp;out&nbsp;of&nbsp;ptrarg&nbsp;and&nbsp;scalararg&nbsp;it&nbsp;is&nbsp;conventional</span><br>
<span class="lineno"></span><span class="comment" id="1699624">//&nbsp;to&nbsp;zero&nbsp;them&nbsp;to&nbsp;avoid&nbsp;(memory&nbsp;or&nbsp;information)&nbsp;leaks.</span><br>
<span class="lineno"></span><span class="comment" id="1699680">//</span><br>
<span class="lineno"></span><span class="comment" id="1699683">//&nbsp;If&nbsp;onM&nbsp;is&nbsp;called&nbsp;from&nbsp;a&nbsp;g0&nbsp;stack,&nbsp;it&nbsp;invokes&nbsp;fn&nbsp;and&nbsp;returns,</span><br>
<span class="lineno"></span><span class="comment" id="1699747">//&nbsp;without&nbsp;any&nbsp;stack&nbsp;switches.</span><br>
<span class="lineno">60</span><span class="comment" id="1699778">//</span><br>
<span class="lineno"></span><span class="comment" id="1699781">//&nbsp;If&nbsp;onM&nbsp;is&nbsp;called&nbsp;from&nbsp;a&nbsp;gsignal&nbsp;stack,&nbsp;it&nbsp;crashes&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="comment" id="1699847">//&nbsp;The&nbsp;implication&nbsp;is&nbsp;that&nbsp;functions&nbsp;used&nbsp;in&nbsp;signal&nbsp;handlers&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="1699913">//&nbsp;not&nbsp;use&nbsp;onM.</span><br>
<span class="lineno"></span><span class="comment" id="1699929">//</span><br>
<span class="lineno">65</span><span class="comment" id="1699932">//&nbsp;NOTE(rsc):&nbsp;We&nbsp;could&nbsp;introduce&nbsp;a&nbsp;separate&nbsp;onMsignal&nbsp;that&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1699994">//&nbsp;like&nbsp;onM&nbsp;but&nbsp;if&nbsp;called&nbsp;from&nbsp;a&nbsp;gsignal&nbsp;stack&nbsp;would&nbsp;just&nbsp;run&nbsp;fn&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1700062">//&nbsp;that&nbsp;stack.&nbsp;The&nbsp;caller&nbsp;of&nbsp;onMsignal&nbsp;would&nbsp;be&nbsp;required&nbsp;to&nbsp;save&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1700131">//&nbsp;old&nbsp;values&nbsp;of&nbsp;ptrarg/scalararg&nbsp;and&nbsp;restore&nbsp;them&nbsp;when&nbsp;the&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="1700196">//&nbsp;was&nbsp;finished,&nbsp;in&nbsp;case&nbsp;the&nbsp;signal&nbsp;interrupted&nbsp;an&nbsp;onM&nbsp;sequence</span><br>
<span class="lineno">70</span><span class="comment" id="1700260">//&nbsp;in&nbsp;progress&nbsp;on&nbsp;the&nbsp;g&nbsp;or&nbsp;g0&nbsp;stacks.&nbsp;Until&nbsp;there&nbsp;is&nbsp;a&nbsp;clear&nbsp;need&nbsp;for&nbsp;this,</span><br>
<span class="lineno"></span><span class="comment" id="1700336">//&nbsp;we&nbsp;just&nbsp;reject&nbsp;onM&nbsp;in&nbsp;signal&nbsp;handling&nbsp;contexts&nbsp;entirely.</span><br>
<span class="lineno"></span><span class="comment" id="1700396">//</span><br>
<span class="lineno"></span><span class="comment" id="1700399">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1700413">func</span>&nbsp;<span class="ident" id="1700418">onM</span><span class="op" id="1700421">(</span><span class="ident" id="1700422">fn</span>&nbsp;<span class="keyword" id="1700425">func</span><span class="op" id="1700429">(</span><span class="op" id="1700430">)</span><span class="op" id="1700431">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="1700434">//&nbsp;onMsignal&nbsp;is&nbsp;like&nbsp;onM&nbsp;but&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;used&nbsp;in&nbsp;code&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1700498">//&nbsp;might&nbsp;run&nbsp;on&nbsp;the&nbsp;gsignal&nbsp;stack.&nbsp;Code&nbsp;running&nbsp;on&nbsp;a&nbsp;signal&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="1700564">//&nbsp;may&nbsp;be&nbsp;interrupting&nbsp;an&nbsp;onM&nbsp;sequence&nbsp;on&nbsp;the&nbsp;main&nbsp;stack,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="1700625">//&nbsp;if&nbsp;the&nbsp;onMsignal&nbsp;calling&nbsp;sequence&nbsp;writes&nbsp;to&nbsp;ptrarg/scalararg,</span><br>
<span class="lineno">80</span><span class="comment" id="1700690">//&nbsp;it&nbsp;must&nbsp;first&nbsp;save&nbsp;the&nbsp;old&nbsp;values&nbsp;and&nbsp;then&nbsp;restore&nbsp;them&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="1700754">//&nbsp;finished.&nbsp;As&nbsp;an&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule,&nbsp;it&nbsp;is&nbsp;fine&nbsp;not&nbsp;to&nbsp;save&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1700823">//&nbsp;restore&nbsp;the&nbsp;values&nbsp;if&nbsp;the&nbsp;program&nbsp;is&nbsp;trying&nbsp;to&nbsp;crash&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="1700891">//&nbsp;return&nbsp;from&nbsp;the&nbsp;signal&nbsp;handler.</span><br>
<span class="lineno"></span><span class="comment" id="1700926">//&nbsp;Once&nbsp;all&nbsp;the&nbsp;runtime&nbsp;is&nbsp;written&nbsp;in&nbsp;Go,&nbsp;there&nbsp;will&nbsp;be&nbsp;no&nbsp;ptrarg/scalararg</span><br>
<span class="lineno">85</span><span class="comment" id="1701002">//&nbsp;and&nbsp;the&nbsp;distinction&nbsp;between&nbsp;onM&nbsp;and&nbsp;onMsignal&nbsp;(and&nbsp;perhaps&nbsp;mcall)</span><br>
<span class="lineno"></span><span class="comment" id="1701071">//&nbsp;can&nbsp;go&nbsp;away.</span><br>
<span class="lineno"></span><span class="comment" id="1701087">//</span><br>
<span class="lineno"></span><span class="comment" id="1701090">//&nbsp;If&nbsp;onMsignal&nbsp;is&nbsp;called&nbsp;from&nbsp;a&nbsp;gsignal&nbsp;stack,&nbsp;it&nbsp;invokes&nbsp;fn&nbsp;directly,</span><br>
<span class="lineno"></span><span class="comment" id="1701162">//&nbsp;without&nbsp;a&nbsp;stack&nbsp;switch.&nbsp;Otherwise&nbsp;onMsignal&nbsp;behaves&nbsp;like&nbsp;onM.</span><br>
<span class="lineno">90</span><span class="comment" id="1701227">//</span><br>
<span class="lineno"></span><span class="comment" id="1701230">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1701244">func</span>&nbsp;<span class="ident" id="1701249">onM_signalok</span><span class="op" id="1701261">(</span><span class="ident" id="1701262">fn</span>&nbsp;<span class="keyword" id="1701265">func</span><span class="op" id="1701269">(</span><span class="op" id="1701270">)</span><span class="op" id="1701271">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1701274">func</span>&nbsp;<span class="ident" id="1701279">badonm</span><span class="op" id="1701285">(</span><span class="op" id="1701286">)</span>&nbsp;<span class="op" id="1701288">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1701291">gothrow</span><span class="op" id="1701298">(</span><span class="string" id="1701299">&#34;onM&nbsp;called&nbsp;from&nbsp;signal&nbsp;goroutine&#34;</span><span class="op" id="1701333">)</span><br>
<span class="lineno"></span><span class="op" id="1701335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1701338">//&nbsp;C&nbsp;functions&nbsp;that&nbsp;run&nbsp;on&nbsp;the&nbsp;M&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="1701378">//&nbsp;Call&nbsp;using&nbsp;mcall.</span><br>
<span class="lineno">100</span><span class="keyword" id="1701399">func</span>&nbsp;<span class="ident" id="1701404">gosched_m</span><span class="op" id="1701413">(</span><span class="op" id="1701414">*</span><span class="ident" id="1701415">g</span><span class="op" id="1701416">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701418">func</span>&nbsp;<span class="ident" id="1701423">park_m</span><span class="op" id="1701429">(</span><span class="op" id="1701430">*</span><span class="ident" id="1701431">g</span><span class="op" id="1701432">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701434">func</span>&nbsp;<span class="ident" id="1701439">recovery_m</span><span class="op" id="1701449">(</span><span class="op" id="1701450">*</span><span class="ident" id="1701451">g</span><span class="op" id="1701452">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1701455">//&nbsp;More&nbsp;C&nbsp;functions&nbsp;that&nbsp;run&nbsp;on&nbsp;the&nbsp;M&nbsp;stack.</span><br>
<span class="lineno">105</span><span class="comment" id="1701500">//&nbsp;Call&nbsp;using&nbsp;onM.</span><br>
<span class="lineno"></span><span class="keyword" id="1701519">func</span>&nbsp;<span class="ident" id="1701524">mcacheRefill_m</span><span class="op" id="1701538">(</span><span class="op" id="1701539">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701541">func</span>&nbsp;<span class="ident" id="1701546">largeAlloc_m</span><span class="op" id="1701558">(</span><span class="op" id="1701559">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701561">func</span>&nbsp;<span class="ident" id="1701566">gc_m</span><span class="op" id="1701570">(</span><span class="op" id="1701571">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701573">func</span>&nbsp;<span class="ident" id="1701578">scavenge_m</span><span class="op" id="1701588">(</span><span class="op" id="1701589">)</span><br>
<span class="lineno">110</span><span class="keyword" id="1701591">func</span>&nbsp;<span class="ident" id="1701596">setFinalizer_m</span><span class="op" id="1701610">(</span><span class="op" id="1701611">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701613">func</span>&nbsp;<span class="ident" id="1701618">removeFinalizer_m</span><span class="op" id="1701635">(</span><span class="op" id="1701636">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701638">func</span>&nbsp;<span class="ident" id="1701643">markallocated_m</span><span class="op" id="1701658">(</span><span class="op" id="1701659">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701661">func</span>&nbsp;<span class="ident" id="1701666">unrollgcprog_m</span><span class="op" id="1701680">(</span><span class="op" id="1701681">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701683">func</span>&nbsp;<span class="ident" id="1701688">unrollgcproginplace_m</span><span class="op" id="1701709">(</span><span class="op" id="1701710">)</span><br>
<span class="lineno">115</span><span class="keyword" id="1701712">func</span>&nbsp;<span class="ident" id="1701717">setgcpercent_m</span><span class="op" id="1701731">(</span><span class="op" id="1701732">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701734">func</span>&nbsp;<span class="ident" id="1701739">setmaxthreads_m</span><span class="op" id="1701754">(</span><span class="op" id="1701755">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701757">func</span>&nbsp;<span class="ident" id="1701762">ready_m</span><span class="op" id="1701769">(</span><span class="op" id="1701770">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701772">func</span>&nbsp;<span class="ident" id="1701777">deferproc_m</span><span class="op" id="1701788">(</span><span class="op" id="1701789">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701791">func</span>&nbsp;<span class="ident" id="1701796">goexit_m</span><span class="op" id="1701804">(</span><span class="op" id="1701805">)</span><br>
<span class="lineno">120</span><span class="keyword" id="1701807">func</span>&nbsp;<span class="ident" id="1701812">startpanic_m</span><span class="op" id="1701824">(</span><span class="op" id="1701825">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701827">func</span>&nbsp;<span class="ident" id="1701832">dopanic_m</span><span class="op" id="1701841">(</span><span class="op" id="1701842">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701844">func</span>&nbsp;<span class="ident" id="1701849">readmemstats_m</span><span class="op" id="1701863">(</span><span class="op" id="1701864">)</span><br>
<span class="lineno"></span><span class="keyword" id="1701866">func</span>&nbsp;<span class="ident" id="1701871">writeheapdump_m</span><span class="op" id="1701886">(</span><span class="op" id="1701887">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="1701890">//&nbsp;memclr&nbsp;clears&nbsp;n&nbsp;bytes&nbsp;starting&nbsp;at&nbsp;ptr.</span><br>
<span class="lineno"></span><span class="comment" id="1701932">//&nbsp;in&nbsp;memclr_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1701949">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1701963">func</span>&nbsp;<span class="ident" id="1701968">memclr</span><span class="op" id="1701974">(</span><span class="ident" id="1701975">ptr</span>&nbsp;<span class="ident" id="1701979">unsafe</span><span class="op" id="1701985">.</span><span class="ident" id="1701986">Pointer</span><span class="op" id="1701993">,</span>&nbsp;<span class="ident" id="1701995">n</span>&nbsp;<span class="builtintype" id="1701997">uintptr</span><span class="op" id="1702004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="1702007">//&nbsp;memmove&nbsp;copies&nbsp;n&nbsp;bytes&nbsp;from&nbsp;&#34;from&#34;&nbsp;to&nbsp;&#34;to&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1702054">//&nbsp;in&nbsp;memmove_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1702072">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1702086">func</span>&nbsp;<span class="ident" id="1702091">memmove</span><span class="op" id="1702098">(</span><span class="ident" id="1702099">to</span>&nbsp;<span class="ident" id="1702102">unsafe</span><span class="op" id="1702108">.</span><span class="ident" id="1702109">Pointer</span><span class="op" id="1702116">,</span>&nbsp;<span class="ident" id="1702118">from</span>&nbsp;<span class="ident" id="1702123">unsafe</span><span class="op" id="1702129">.</span><span class="ident" id="1702130">Pointer</span><span class="op" id="1702137">,</span>&nbsp;<span class="ident" id="1702139">n</span>&nbsp;<span class="builtintype" id="1702141">uintptr</span><span class="op" id="1702148">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="1702151">func</span>&nbsp;<span class="ident" id="1702156">starttheworld</span><span class="op" id="1702169">(</span><span class="op" id="1702170">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702172">func</span>&nbsp;<span class="ident" id="1702177">stoptheworld</span><span class="op" id="1702189">(</span><span class="op" id="1702190">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702192">func</span>&nbsp;<span class="ident" id="1702197">newextram</span><span class="op" id="1702206">(</span><span class="op" id="1702207">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702209">func</span>&nbsp;<span class="ident" id="1702214">lockOSThread</span><span class="op" id="1702226">(</span><span class="op" id="1702227">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702229">func</span>&nbsp;<span class="ident" id="1702234">unlockOSThread</span><span class="op" id="1702248">(</span><span class="op" id="1702249">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1702252">//&nbsp;exported&nbsp;value&nbsp;for&nbsp;testing</span><br>
<span class="lineno"></span><span class="keyword" id="1702282">var</span>&nbsp;<span class="ident" id="1702286">hashLoad</span>&nbsp;<span class="op" id="1702295">=</span>&nbsp;<span class="ident" id="1702297">loadFactor</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1702309">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno">145</span><span class="keyword" id="1702323">func</span>&nbsp;<span class="ident" id="1702328">fastrand1</span><span class="op" id="1702337">(</span><span class="op" id="1702338">)</span>&nbsp;<span class="builtintype" id="1702340">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1702348">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1702362">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1702376">func</span>&nbsp;<span class="ident" id="1702381">memeq</span><span class="op" id="1702386">(</span><span class="ident" id="1702387">a</span><span class="op" id="1702388">,</span>&nbsp;<span class="ident" id="1702390">b</span>&nbsp;<span class="ident" id="1702392">unsafe</span><span class="op" id="1702398">.</span><span class="ident" id="1702399">Pointer</span><span class="op" id="1702406">,</span>&nbsp;<span class="ident" id="1702408">size</span>&nbsp;<span class="builtintype" id="1702413">uintptr</span><span class="op" id="1702420">)</span>&nbsp;<span class="builtintype" id="1702422">bool</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="comment" id="1702428">//&nbsp;noescape&nbsp;hides&nbsp;a&nbsp;pointer&nbsp;from&nbsp;escape&nbsp;analysis.&nbsp;&nbsp;noescape&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1702491">//&nbsp;the&nbsp;identity&nbsp;function&nbsp;but&nbsp;escape&nbsp;analysis&nbsp;doesn&#39;t&nbsp;think&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1702554">//&nbsp;output&nbsp;depends&nbsp;on&nbsp;the&nbsp;input.&nbsp;&nbsp;noescape&nbsp;is&nbsp;inlined&nbsp;and&nbsp;currently</span><br>
<span class="lineno"></span><span class="comment" id="1702621">//&nbsp;compiles&nbsp;down&nbsp;to&nbsp;a&nbsp;single&nbsp;xor&nbsp;instruction.</span><br>
<span class="lineno">155</span><span class="comment" id="1702667">//&nbsp;USE&nbsp;CAREFULLY!</span><br>
<span class="lineno"></span><span class="comment" id="1702685">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1702698">func</span>&nbsp;<span class="ident" id="1702703">noescape</span><span class="op" id="1702711">(</span><span class="ident" id="1702712">p</span>&nbsp;<span class="ident" id="1702714">unsafe</span><span class="op" id="1702720">.</span><span class="ident" id="1702721">Pointer</span><span class="op" id="1702728">)</span>&nbsp;<span class="ident" id="1702730">unsafe</span><span class="op" id="1702736">.</span><span class="ident" id="1702737">Pointer</span>&nbsp;<span class="op" id="1702745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1702748">x</span>&nbsp;<span class="op" id="1702750">:=</span>&nbsp;<span class="builtintype" id="1702753">uintptr</span><span class="op" id="1702760">(</span><span class="ident" id="1702761">p</span><span class="op" id="1702762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1702765">return</span>&nbsp;<span class="ident" id="1702772">unsafe</span><span class="op" id="1702778">.</span><span class="ident" id="1702779">Pointer</span><span class="op" id="1702786">(</span><span class="ident" id="1702787">x</span>&nbsp;<span class="op" id="1702789">^</span>&nbsp;<span class="num" id="1702791">0</span><span class="op" id="1702792">)</span><br>
<span class="lineno">160</span><span class="op" id="1702794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1702797">func</span>&nbsp;<span class="ident" id="1702802">entersyscall</span><span class="op" id="1702814">(</span><span class="op" id="1702815">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702817">func</span>&nbsp;<span class="ident" id="1702822">reentersyscall</span><span class="op" id="1702836">(</span><span class="ident" id="1702837">pc</span>&nbsp;<span class="builtintype" id="1702840">uintptr</span><span class="op" id="1702847">,</span>&nbsp;<span class="ident" id="1702849">sp</span>&nbsp;<span class="ident" id="1702852">unsafe</span><span class="op" id="1702858">.</span><span class="ident" id="1702859">Pointer</span><span class="op" id="1702866">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702868">func</span>&nbsp;<span class="ident" id="1702873">entersyscallblock</span><span class="op" id="1702890">(</span><span class="op" id="1702891">)</span><br>
<span class="lineno">165</span><span class="keyword" id="1702893">func</span>&nbsp;<span class="ident" id="1702898">exitsyscall</span><span class="op" id="1702909">(</span><span class="op" id="1702910">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1702913">func</span>&nbsp;<span class="ident" id="1702918">cgocallback</span><span class="op" id="1702929">(</span><span class="ident" id="1702930">fn</span><span class="op" id="1702932">,</span>&nbsp;<span class="ident" id="1702934">frame</span>&nbsp;<span class="ident" id="1702940">unsafe</span><span class="op" id="1702946">.</span><span class="ident" id="1702947">Pointer</span><span class="op" id="1702954">,</span>&nbsp;<span class="ident" id="1702956">framesize</span>&nbsp;<span class="builtintype" id="1702966">uintptr</span><span class="op" id="1702973">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702975">func</span>&nbsp;<span class="ident" id="1702980">gogo</span><span class="op" id="1702984">(</span><span class="ident" id="1702985">buf</span>&nbsp;<span class="op" id="1702989">*</span><span class="ident" id="1702990">gobuf</span><span class="op" id="1702995">)</span><br>
<span class="lineno"></span><span class="keyword" id="1702997">func</span>&nbsp;<span class="ident" id="1703002">gosave</span><span class="op" id="1703008">(</span><span class="ident" id="1703009">buf</span>&nbsp;<span class="op" id="1703013">*</span><span class="ident" id="1703014">gobuf</span><span class="op" id="1703019">)</span><br>
<span class="lineno">170</span><span class="keyword" id="1703021">func</span>&nbsp;<span class="ident" id="1703026">read</span><span class="op" id="1703030">(</span><span class="ident" id="1703031">fd</span>&nbsp;<span class="builtintype" id="1703034">int32</span><span class="op" id="1703039">,</span>&nbsp;<span class="ident" id="1703041">p</span>&nbsp;<span class="ident" id="1703043">unsafe</span><span class="op" id="1703049">.</span><span class="ident" id="1703050">Pointer</span><span class="op" id="1703057">,</span>&nbsp;<span class="ident" id="1703059">n</span>&nbsp;<span class="builtintype" id="1703061">int32</span><span class="op" id="1703066">)</span>&nbsp;<span class="builtintype" id="1703068">int32</span><br>
<span class="lineno"></span><span class="keyword" id="1703074">func</span>&nbsp;<span class="builtinfunc" id="1703079">close</span><span class="op" id="1703084">(</span><span class="ident" id="1703085">fd</span>&nbsp;<span class="builtintype" id="1703088">int32</span><span class="op" id="1703093">)</span>&nbsp;<span class="builtintype" id="1703095">int32</span><br>
<span class="lineno"></span><span class="keyword" id="1703101">func</span>&nbsp;<span class="ident" id="1703106">mincore</span><span class="op" id="1703113">(</span><span class="ident" id="1703114">addr</span>&nbsp;<span class="ident" id="1703119">unsafe</span><span class="op" id="1703125">.</span><span class="ident" id="1703126">Pointer</span><span class="op" id="1703133">,</span>&nbsp;<span class="ident" id="1703135">n</span>&nbsp;<span class="builtintype" id="1703137">uintptr</span><span class="op" id="1703144">,</span>&nbsp;<span class="ident" id="1703146">dst</span>&nbsp;<span class="op" id="1703150">*</span><span class="builtintype" id="1703151">byte</span><span class="op" id="1703155">)</span>&nbsp;<span class="builtintype" id="1703157">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1703164">//go:noescape</span><br>
<span class="lineno">175</span><span class="keyword" id="1703178">func</span>&nbsp;<span class="ident" id="1703183">jmpdefer</span><span class="op" id="1703191">(</span><span class="ident" id="1703192">fv</span>&nbsp;<span class="op" id="1703195">*</span><span class="ident" id="1703196">funcval</span><span class="op" id="1703203">,</span>&nbsp;<span class="ident" id="1703205">argp</span>&nbsp;<span class="builtintype" id="1703210">uintptr</span><span class="op" id="1703217">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703219">func</span>&nbsp;<span class="ident" id="1703224">exit1</span><span class="op" id="1703229">(</span><span class="ident" id="1703230">code</span>&nbsp;<span class="builtintype" id="1703235">int32</span><span class="op" id="1703240">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703242">func</span>&nbsp;<span class="ident" id="1703247">asminit</span><span class="op" id="1703254">(</span><span class="op" id="1703255">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703257">func</span>&nbsp;<span class="ident" id="1703262">setg</span><span class="op" id="1703266">(</span><span class="ident" id="1703267">gg</span>&nbsp;<span class="op" id="1703270">*</span><span class="ident" id="1703271">g</span><span class="op" id="1703272">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703274">func</span>&nbsp;<span class="ident" id="1703279">exit</span><span class="op" id="1703283">(</span><span class="ident" id="1703284">code</span>&nbsp;<span class="builtintype" id="1703289">int32</span><span class="op" id="1703294">)</span><br>
<span class="lineno">180</span><span class="keyword" id="1703296">func</span>&nbsp;<span class="ident" id="1703301">breakpoint</span><span class="op" id="1703311">(</span><span class="op" id="1703312">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703314">func</span>&nbsp;<span class="ident" id="1703319">nanotime</span><span class="op" id="1703327">(</span><span class="op" id="1703328">)</span>&nbsp;<span class="ident" id="1703330">int64</span><br>
<span class="lineno"></span><span class="keyword" id="1703336">func</span>&nbsp;<span class="ident" id="1703341">usleep</span><span class="op" id="1703347">(</span><span class="ident" id="1703348">usec</span>&nbsp;<span class="builtintype" id="1703353">uint32</span><span class="op" id="1703359">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1703362">//&nbsp;careful:&nbsp;cputicks&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;monotonic!&nbsp;&nbsp;In&nbsp;particular,&nbsp;we&nbsp;have</span><br>
<span class="lineno">185</span><span class="comment" id="1703442">//&nbsp;noticed&nbsp;drift&nbsp;between&nbsp;cpus&nbsp;on&nbsp;certain&nbsp;os/arch&nbsp;combinations.&nbsp;&nbsp;See&nbsp;issue&nbsp;8976.</span><br>
<span class="lineno"></span><span class="keyword" id="1703522">func</span>&nbsp;<span class="ident" id="1703527">cputicks</span><span class="op" id="1703535">(</span><span class="op" id="1703536">)</span>&nbsp;<span class="ident" id="1703538">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1703545">func</span>&nbsp;<span class="ident" id="1703550">mmap</span><span class="op" id="1703554">(</span><span class="ident" id="1703555">addr</span>&nbsp;<span class="ident" id="1703560">unsafe</span><span class="op" id="1703566">.</span><span class="ident" id="1703567">Pointer</span><span class="op" id="1703574">,</span>&nbsp;<span class="ident" id="1703576">n</span>&nbsp;<span class="builtintype" id="1703578">uintptr</span><span class="op" id="1703585">,</span>&nbsp;<span class="ident" id="1703587">prot</span><span class="op" id="1703591">,</span>&nbsp;<span class="ident" id="1703593">flags</span><span class="op" id="1703598">,</span>&nbsp;<span class="ident" id="1703600">fd</span>&nbsp;<span class="builtintype" id="1703603">int32</span><span class="op" id="1703608">,</span>&nbsp;<span class="ident" id="1703610">off</span>&nbsp;<span class="builtintype" id="1703614">uint32</span><span class="op" id="1703620">)</span>&nbsp;<span class="ident" id="1703622">unsafe</span><span class="op" id="1703628">.</span><span class="ident" id="1703629">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="1703637">func</span>&nbsp;<span class="ident" id="1703642">munmap</span><span class="op" id="1703648">(</span><span class="ident" id="1703649">addr</span>&nbsp;<span class="ident" id="1703654">unsafe</span><span class="op" id="1703660">.</span><span class="ident" id="1703661">Pointer</span><span class="op" id="1703668">,</span>&nbsp;<span class="ident" id="1703670">n</span>&nbsp;<span class="builtintype" id="1703672">uintptr</span><span class="op" id="1703679">)</span><br>
<span class="lineno">190</span><span class="keyword" id="1703681">func</span>&nbsp;<span class="ident" id="1703686">madvise</span><span class="op" id="1703693">(</span><span class="ident" id="1703694">addr</span>&nbsp;<span class="ident" id="1703699">unsafe</span><span class="op" id="1703705">.</span><span class="ident" id="1703706">Pointer</span><span class="op" id="1703713">,</span>&nbsp;<span class="ident" id="1703715">n</span>&nbsp;<span class="builtintype" id="1703717">uintptr</span><span class="op" id="1703724">,</span>&nbsp;<span class="ident" id="1703726">flags</span>&nbsp;<span class="builtintype" id="1703732">int32</span><span class="op" id="1703737">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703739">func</span>&nbsp;<span class="ident" id="1703744">reflectcall</span><span class="op" id="1703755">(</span><span class="ident" id="1703756">fn</span><span class="op" id="1703758">,</span>&nbsp;<span class="ident" id="1703760">arg</span>&nbsp;<span class="ident" id="1703764">unsafe</span><span class="op" id="1703770">.</span><span class="ident" id="1703771">Pointer</span><span class="op" id="1703778">,</span>&nbsp;<span class="ident" id="1703780">n</span>&nbsp;<span class="builtintype" id="1703782">uint32</span><span class="op" id="1703788">,</span>&nbsp;<span class="ident" id="1703790">retoffset</span>&nbsp;<span class="builtintype" id="1703800">uint32</span><span class="op" id="1703806">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703808">func</span>&nbsp;<span class="ident" id="1703813">osyield</span><span class="op" id="1703820">(</span><span class="op" id="1703821">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703823">func</span>&nbsp;<span class="ident" id="1703828">procyield</span><span class="op" id="1703837">(</span><span class="ident" id="1703838">cycles</span>&nbsp;<span class="builtintype" id="1703845">uint32</span><span class="op" id="1703851">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703853">func</span>&nbsp;<span class="ident" id="1703858">cgocallback_gofunc</span><span class="op" id="1703876">(</span><span class="ident" id="1703877">fv</span>&nbsp;<span class="op" id="1703880">*</span><span class="ident" id="1703881">funcval</span><span class="op" id="1703888">,</span>&nbsp;<span class="ident" id="1703890">frame</span>&nbsp;<span class="ident" id="1703896">unsafe</span><span class="op" id="1703902">.</span><span class="ident" id="1703903">Pointer</span><span class="op" id="1703910">,</span>&nbsp;<span class="ident" id="1703912">framesize</span>&nbsp;<span class="builtintype" id="1703922">uintptr</span><span class="op" id="1703929">)</span><br>
<span class="lineno">195</span><span class="keyword" id="1703931">func</span>&nbsp;<span class="ident" id="1703936">readgogc</span><span class="op" id="1703944">(</span><span class="op" id="1703945">)</span>&nbsp;<span class="builtintype" id="1703947">int32</span><br>
<span class="lineno"></span><span class="keyword" id="1703953">func</span>&nbsp;<span class="ident" id="1703958">purgecachedstats</span><span class="op" id="1703974">(</span><span class="ident" id="1703975">c</span>&nbsp;<span class="op" id="1703977">*</span><span class="ident" id="1703978">mcache</span><span class="op" id="1703984">)</span><br>
<span class="lineno"></span><span class="keyword" id="1703986">func</span>&nbsp;<span class="ident" id="1703991">gostringnocopy</span><span class="op" id="1704005">(</span><span class="ident" id="1704006">b</span>&nbsp;<span class="op" id="1704008">*</span><span class="builtintype" id="1704009">byte</span><span class="op" id="1704013">)</span>&nbsp;<span class="builtintype" id="1704015">string</span><br>
<span class="lineno"></span><span class="keyword" id="1704022">func</span>&nbsp;<span class="ident" id="1704027">goexit</span><span class="op" id="1704033">(</span><span class="op" id="1704034">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="1704037">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704051">func</span>&nbsp;<span class="ident" id="1704056">write</span><span class="op" id="1704061">(</span><span class="ident" id="1704062">fd</span>&nbsp;<span class="builtintype" id="1704065">uintptr</span><span class="op" id="1704072">,</span>&nbsp;<span class="ident" id="1704074">p</span>&nbsp;<span class="ident" id="1704076">unsafe</span><span class="op" id="1704082">.</span><span class="ident" id="1704083">Pointer</span><span class="op" id="1704090">,</span>&nbsp;<span class="ident" id="1704092">n</span>&nbsp;<span class="builtintype" id="1704094">int32</span><span class="op" id="1704099">)</span>&nbsp;<span class="builtintype" id="1704101">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1704108">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704122">func</span>&nbsp;<span class="ident" id="1704127">cas</span><span class="op" id="1704130">(</span><span class="ident" id="1704131">ptr</span>&nbsp;<span class="op" id="1704135">*</span><span class="builtintype" id="1704136">uint32</span><span class="op" id="1704142">,</span>&nbsp;<span class="ident" id="1704144">old</span><span class="op" id="1704147">,</span>&nbsp;<span class="builtinfunc" id="1704149">new</span>&nbsp;<span class="builtintype" id="1704153">uint32</span><span class="op" id="1704159">)</span>&nbsp;<span class="builtintype" id="1704161">bool</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="1704167">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704181">func</span>&nbsp;<span class="ident" id="1704186">casp</span><span class="op" id="1704190">(</span><span class="ident" id="1704191">ptr</span>&nbsp;<span class="op" id="1704195">*</span><span class="ident" id="1704196">unsafe</span><span class="op" id="1704202">.</span><span class="ident" id="1704203">Pointer</span><span class="op" id="1704210">,</span>&nbsp;<span class="ident" id="1704212">old</span><span class="op" id="1704215">,</span>&nbsp;<span class="builtinfunc" id="1704217">new</span>&nbsp;<span class="ident" id="1704221">unsafe</span><span class="op" id="1704227">.</span><span class="ident" id="1704228">Pointer</span><span class="op" id="1704235">)</span>&nbsp;<span class="builtintype" id="1704237">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1704243">//go:noescape</span><br>
<span class="lineno">210</span><span class="keyword" id="1704257">func</span>&nbsp;<span class="ident" id="1704262">casuintptr</span><span class="op" id="1704272">(</span><span class="ident" id="1704273">ptr</span>&nbsp;<span class="op" id="1704277">*</span><span class="builtintype" id="1704278">uintptr</span><span class="op" id="1704285">,</span>&nbsp;<span class="ident" id="1704287">old</span><span class="op" id="1704290">,</span>&nbsp;<span class="builtinfunc" id="1704292">new</span>&nbsp;<span class="builtintype" id="1704296">uintptr</span><span class="op" id="1704303">)</span>&nbsp;<span class="builtintype" id="1704305">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1704311">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704325">func</span>&nbsp;<span class="ident" id="1704330">atomicstoreuintptr</span><span class="op" id="1704348">(</span><span class="ident" id="1704349">ptr</span>&nbsp;<span class="op" id="1704353">*</span><span class="builtintype" id="1704354">uintptr</span><span class="op" id="1704361">,</span>&nbsp;<span class="builtinfunc" id="1704363">new</span>&nbsp;<span class="builtintype" id="1704367">uintptr</span><span class="op" id="1704374">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="1704377">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704391">func</span>&nbsp;<span class="ident" id="1704396">atomicloaduintptr</span><span class="op" id="1704413">(</span><span class="ident" id="1704414">ptr</span>&nbsp;<span class="op" id="1704418">*</span><span class="builtintype" id="1704419">uintptr</span><span class="op" id="1704426">)</span>&nbsp;<span class="builtintype" id="1704428">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1704437">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704451">func</span>&nbsp;<span class="ident" id="1704456">atomicloaduint</span><span class="op" id="1704470">(</span><span class="ident" id="1704471">ptr</span>&nbsp;<span class="op" id="1704475">*</span><span class="builtintype" id="1704476">uint</span><span class="op" id="1704480">)</span>&nbsp;<span class="builtintype" id="1704482">uint</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="1704488">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1704502">func</span>&nbsp;<span class="ident" id="1704507">setcallerpc</span><span class="op" id="1704518">(</span><span class="ident" id="1704519">argp</span>&nbsp;<span class="ident" id="1704524">unsafe</span><span class="op" id="1704530">.</span><span class="ident" id="1704531">Pointer</span><span class="op" id="1704538">,</span>&nbsp;<span class="ident" id="1704540">pc</span>&nbsp;<span class="builtintype" id="1704543">uintptr</span><span class="op" id="1704550">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1704553">//&nbsp;getcallerpc&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;(PC)&nbsp;of&nbsp;its&nbsp;caller&#39;s&nbsp;caller.</span><br>
<span class="lineno">225</span><span class="comment" id="1704625">//&nbsp;getcallersp&nbsp;returns&nbsp;the&nbsp;stack&nbsp;pointer&nbsp;(SP)&nbsp;of&nbsp;its&nbsp;caller&#39;s&nbsp;caller.</span><br>
<span class="lineno"></span><span class="comment" id="1704695">//&nbsp;For&nbsp;both,&nbsp;the&nbsp;argp&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;caller&#39;s&nbsp;first&nbsp;function&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="1704776">//&nbsp;The&nbsp;implementation&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;use&nbsp;argp,&nbsp;depending&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1704836">//&nbsp;the&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="comment" id="1704857">//</span><br>
<span class="lineno">230</span><span class="comment" id="1704860">//&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="1704876">//</span><br>
<span class="lineno"></span><span class="comment" id="1704879">//&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;f(arg1,&nbsp;arg2,&nbsp;arg3&nbsp;int)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="1704913">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pc&nbsp;:=&nbsp;getcallerpc(unsafe.Pointer(&amp;arg1))</span><br>
<span class="lineno"></span><span class="comment" id="1704958">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sp&nbsp;:=&nbsp;getcallerpc(unsafe.Pointer(&amp;arg2))</span><br>
<span class="lineno">235</span><span class="comment" id="1705003">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="1705008">//</span><br>
<span class="lineno"></span><span class="comment" id="1705011">//&nbsp;These&nbsp;two&nbsp;lines&nbsp;find&nbsp;the&nbsp;PC&nbsp;and&nbsp;SP&nbsp;immediately&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="1705071">//&nbsp;the&nbsp;call&nbsp;to&nbsp;f&nbsp;(where&nbsp;f&nbsp;will&nbsp;return).</span><br>
<span class="lineno"></span><span class="comment" id="1705111">//</span><br>
<span class="lineno">240</span><span class="comment" id="1705114">//&nbsp;The&nbsp;call&nbsp;to&nbsp;getcallerpc&nbsp;and&nbsp;getcallersp&nbsp;must&nbsp;be&nbsp;done&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1705177">//&nbsp;frame&nbsp;being&nbsp;asked&nbsp;about.&nbsp;It&nbsp;would&nbsp;not&nbsp;be&nbsp;correct&nbsp;for&nbsp;f&nbsp;to&nbsp;pass&nbsp;&amp;arg1</span><br>
<span class="lineno"></span><span class="comment" id="1705249">//&nbsp;to&nbsp;another&nbsp;function&nbsp;g&nbsp;and&nbsp;let&nbsp;g&nbsp;call&nbsp;getcallerpc/getcallersp.</span><br>
<span class="lineno"></span><span class="comment" id="1705314">//&nbsp;The&nbsp;call&nbsp;inside&nbsp;g&nbsp;might&nbsp;return&nbsp;information&nbsp;about&nbsp;g&#39;s&nbsp;caller&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1705380">//&nbsp;information&nbsp;about&nbsp;f&#39;s&nbsp;caller&nbsp;or&nbsp;complete&nbsp;garbage.</span><br>
<span class="lineno">245</span><span class="comment" id="1705433">//</span><br>
<span class="lineno"></span><span class="comment" id="1705436">//&nbsp;The&nbsp;result&nbsp;of&nbsp;getcallersp&nbsp;is&nbsp;correct&nbsp;at&nbsp;the&nbsp;time&nbsp;of&nbsp;the&nbsp;return,</span><br>
<span class="lineno"></span><span class="comment" id="1705503">//&nbsp;but&nbsp;it&nbsp;may&nbsp;be&nbsp;invalidated&nbsp;by&nbsp;any&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="1705569">//&nbsp;that&nbsp;might&nbsp;relocate&nbsp;the&nbsp;stack&nbsp;in&nbsp;order&nbsp;to&nbsp;grow&nbsp;or&nbsp;shrink&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="1705633">//&nbsp;A&nbsp;general&nbsp;rule&nbsp;is&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;getcallersp&nbsp;should&nbsp;be&nbsp;used</span><br>
<span class="lineno">250</span><span class="comment" id="1705700">//&nbsp;immediately&nbsp;and&nbsp;can&nbsp;only&nbsp;be&nbsp;passed&nbsp;to&nbsp;nosplit&nbsp;functions.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1705761">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1705775">func</span>&nbsp;<span class="ident" id="1705780">getcallerpc</span><span class="op" id="1705791">(</span><span class="ident" id="1705792">argp</span>&nbsp;<span class="ident" id="1705797">unsafe</span><span class="op" id="1705803">.</span><span class="ident" id="1705804">Pointer</span><span class="op" id="1705811">)</span>&nbsp;<span class="builtintype" id="1705813">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="1705822">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1705836">func</span>&nbsp;<span class="ident" id="1705841">getcallersp</span><span class="op" id="1705852">(</span><span class="ident" id="1705853">argp</span>&nbsp;<span class="ident" id="1705858">unsafe</span><span class="op" id="1705864">.</span><span class="ident" id="1705865">Pointer</span><span class="op" id="1705872">)</span>&nbsp;<span class="builtintype" id="1705874">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1705883">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1705897">func</span>&nbsp;<span class="ident" id="1705902">asmcgocall</span><span class="op" id="1705912">(</span><span class="ident" id="1705913">fn</span><span class="op" id="1705915">,</span>&nbsp;<span class="ident" id="1705917">arg</span>&nbsp;<span class="ident" id="1705921">unsafe</span><span class="op" id="1705927">.</span><span class="ident" id="1705928">Pointer</span><span class="op" id="1705935">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="1705938">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1705952">func</span>&nbsp;<span class="ident" id="1705957">asmcgocall_errno</span><span class="op" id="1705973">(</span><span class="ident" id="1705974">fn</span><span class="op" id="1705976">,</span>&nbsp;<span class="ident" id="1705978">arg</span>&nbsp;<span class="ident" id="1705982">unsafe</span><span class="op" id="1705988">.</span><span class="ident" id="1705989">Pointer</span><span class="op" id="1705996">)</span>&nbsp;<span class="builtintype" id="1705998">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1706005">//go:noescape</span><br>
<span class="lineno">265</span><span class="keyword" id="1706019">func</span>&nbsp;<span class="ident" id="1706024">open</span><span class="op" id="1706028">(</span><span class="ident" id="1706029">name</span>&nbsp;<span class="op" id="1706034">*</span><span class="builtintype" id="1706035">byte</span><span class="op" id="1706039">,</span>&nbsp;<span class="ident" id="1706041">mode</span><span class="op" id="1706045">,</span>&nbsp;<span class="ident" id="1706047">perm</span>&nbsp;<span class="builtintype" id="1706052">int32</span><span class="op" id="1706057">)</span>&nbsp;<span class="builtintype" id="1706059">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1706066">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1706080">func</span>&nbsp;<span class="ident" id="1706085">gotraceback</span><span class="op" id="1706096">(</span><span class="op" id="1706097">*</span><span class="builtintype" id="1706098">bool</span><span class="op" id="1706102">)</span>&nbsp;<span class="builtintype" id="1706104">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="1706111">const</span>&nbsp;<span class="ident" id="1706117">_NoArgs</span>&nbsp;<span class="op" id="1706125">=</span>&nbsp;<span class="op" id="1706127">^</span><span class="builtintype" id="1706128">uintptr</span><span class="op" id="1706135">(</span><span class="num" id="1706136">0</span><span class="op" id="1706137">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1706140">func</span>&nbsp;<span class="ident" id="1706145">newstack</span><span class="op" id="1706153">(</span><span class="op" id="1706154">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706156">func</span>&nbsp;<span class="ident" id="1706161">newproc</span><span class="op" id="1706168">(</span><span class="op" id="1706169">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706171">func</span>&nbsp;<span class="ident" id="1706176">morestack</span><span class="op" id="1706185">(</span><span class="op" id="1706186">)</span><br>
<span class="lineno">275</span><span class="keyword" id="1706188">func</span>&nbsp;<span class="ident" id="1706193">mstart</span><span class="op" id="1706199">(</span><span class="op" id="1706200">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706202">func</span>&nbsp;<span class="ident" id="1706207">rt0_go</span><span class="op" id="1706213">(</span><span class="op" id="1706214">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1706217">//&nbsp;return0&nbsp;is&nbsp;a&nbsp;stub&nbsp;used&nbsp;to&nbsp;return&nbsp;0&nbsp;from&nbsp;deferproc.</span><br>
<span class="lineno"></span><span class="comment" id="1706271">//&nbsp;It&nbsp;is&nbsp;called&nbsp;at&nbsp;the&nbsp;very&nbsp;end&nbsp;of&nbsp;deferproc&nbsp;to&nbsp;signal</span><br>
<span class="lineno">280</span><span class="comment" id="1706326">//&nbsp;the&nbsp;calling&nbsp;Go&nbsp;function&nbsp;that&nbsp;it&nbsp;should&nbsp;not&nbsp;jump</span><br>
<span class="lineno"></span><span class="comment" id="1706377">//&nbsp;to&nbsp;deferreturn.</span><br>
<span class="lineno"></span><span class="comment" id="1706396">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno"></span><span class="keyword" id="1706410">func</span>&nbsp;<span class="ident" id="1706415">return0</span><span class="op" id="1706422">(</span><span class="op" id="1706423">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="1706426">//&nbsp;thunk&nbsp;to&nbsp;call&nbsp;time.now.</span><br>
<span class="lineno"></span><span class="keyword" id="1706453">func</span>&nbsp;<span class="ident" id="1706458">timenow</span><span class="op" id="1706465">(</span><span class="op" id="1706466">)</span>&nbsp;<span class="op" id="1706468">(</span><span class="ident" id="1706469">sec</span>&nbsp;<span class="ident" id="1706473">int64</span><span class="op" id="1706478">,</span>&nbsp;<span class="ident" id="1706480">nsec</span>&nbsp;<span class="builtintype" id="1706485">int32</span><span class="op" id="1706490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1706493">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno"></span><span class="comment" id="1706507">//&nbsp;not&nbsp;called&nbsp;directly;&nbsp;definitions&nbsp;here&nbsp;supply&nbsp;type&nbsp;information&nbsp;for&nbsp;traceback.</span><br>
<span class="lineno">290</span><span class="keyword" id="1706587">func</span>&nbsp;<span class="ident" id="1706592">call16</span><span class="op" id="1706598">(</span><span class="ident" id="1706599">fn</span><span class="op" id="1706601">,</span>&nbsp;<span class="ident" id="1706603">arg</span>&nbsp;<span class="ident" id="1706607">unsafe</span><span class="op" id="1706613">.</span><span class="ident" id="1706614">Pointer</span><span class="op" id="1706621">,</span>&nbsp;<span class="ident" id="1706623">n</span><span class="op" id="1706624">,</span>&nbsp;<span class="ident" id="1706626">retoffset</span>&nbsp;<span class="builtintype" id="1706636">uint32</span><span class="op" id="1706642">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706644">func</span>&nbsp;<span class="ident" id="1706649">call32</span><span class="op" id="1706655">(</span><span class="ident" id="1706656">fn</span><span class="op" id="1706658">,</span>&nbsp;<span class="ident" id="1706660">arg</span>&nbsp;<span class="ident" id="1706664">unsafe</span><span class="op" id="1706670">.</span><span class="ident" id="1706671">Pointer</span><span class="op" id="1706678">,</span>&nbsp;<span class="ident" id="1706680">n</span><span class="op" id="1706681">,</span>&nbsp;<span class="ident" id="1706683">retoffset</span>&nbsp;<span class="builtintype" id="1706693">uint32</span><span class="op" id="1706699">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706701">func</span>&nbsp;<span class="ident" id="1706706">call64</span><span class="op" id="1706712">(</span><span class="ident" id="1706713">fn</span><span class="op" id="1706715">,</span>&nbsp;<span class="ident" id="1706717">arg</span>&nbsp;<span class="ident" id="1706721">unsafe</span><span class="op" id="1706727">.</span><span class="ident" id="1706728">Pointer</span><span class="op" id="1706735">,</span>&nbsp;<span class="ident" id="1706737">n</span><span class="op" id="1706738">,</span>&nbsp;<span class="ident" id="1706740">retoffset</span>&nbsp;<span class="builtintype" id="1706750">uint32</span><span class="op" id="1706756">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706758">func</span>&nbsp;<span class="ident" id="1706763">call128</span><span class="op" id="1706770">(</span><span class="ident" id="1706771">fn</span><span class="op" id="1706773">,</span>&nbsp;<span class="ident" id="1706775">arg</span>&nbsp;<span class="ident" id="1706779">unsafe</span><span class="op" id="1706785">.</span><span class="ident" id="1706786">Pointer</span><span class="op" id="1706793">,</span>&nbsp;<span class="ident" id="1706795">n</span><span class="op" id="1706796">,</span>&nbsp;<span class="ident" id="1706798">retoffset</span>&nbsp;<span class="builtintype" id="1706808">uint32</span><span class="op" id="1706814">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706816">func</span>&nbsp;<span class="ident" id="1706821">call256</span><span class="op" id="1706828">(</span><span class="ident" id="1706829">fn</span><span class="op" id="1706831">,</span>&nbsp;<span class="ident" id="1706833">arg</span>&nbsp;<span class="ident" id="1706837">unsafe</span><span class="op" id="1706843">.</span><span class="ident" id="1706844">Pointer</span><span class="op" id="1706851">,</span>&nbsp;<span class="ident" id="1706853">n</span><span class="op" id="1706854">,</span>&nbsp;<span class="ident" id="1706856">retoffset</span>&nbsp;<span class="builtintype" id="1706866">uint32</span><span class="op" id="1706872">)</span><br>
<span class="lineno">295</span><span class="keyword" id="1706874">func</span>&nbsp;<span class="ident" id="1706879">call512</span><span class="op" id="1706886">(</span><span class="ident" id="1706887">fn</span><span class="op" id="1706889">,</span>&nbsp;<span class="ident" id="1706891">arg</span>&nbsp;<span class="ident" id="1706895">unsafe</span><span class="op" id="1706901">.</span><span class="ident" id="1706902">Pointer</span><span class="op" id="1706909">,</span>&nbsp;<span class="ident" id="1706911">n</span><span class="op" id="1706912">,</span>&nbsp;<span class="ident" id="1706914">retoffset</span>&nbsp;<span class="builtintype" id="1706924">uint32</span><span class="op" id="1706930">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706932">func</span>&nbsp;<span class="ident" id="1706937">call1024</span><span class="op" id="1706945">(</span><span class="ident" id="1706946">fn</span><span class="op" id="1706948">,</span>&nbsp;<span class="ident" id="1706950">arg</span>&nbsp;<span class="ident" id="1706954">unsafe</span><span class="op" id="1706960">.</span><span class="ident" id="1706961">Pointer</span><span class="op" id="1706968">,</span>&nbsp;<span class="ident" id="1706970">n</span><span class="op" id="1706971">,</span>&nbsp;<span class="ident" id="1706973">retoffset</span>&nbsp;<span class="builtintype" id="1706983">uint32</span><span class="op" id="1706989">)</span><br>
<span class="lineno"></span><span class="keyword" id="1706991">func</span>&nbsp;<span class="ident" id="1706996">call2048</span><span class="op" id="1707004">(</span><span class="ident" id="1707005">fn</span><span class="op" id="1707007">,</span>&nbsp;<span class="ident" id="1707009">arg</span>&nbsp;<span class="ident" id="1707013">unsafe</span><span class="op" id="1707019">.</span><span class="ident" id="1707020">Pointer</span><span class="op" id="1707027">,</span>&nbsp;<span class="ident" id="1707029">n</span><span class="op" id="1707030">,</span>&nbsp;<span class="ident" id="1707032">retoffset</span>&nbsp;<span class="builtintype" id="1707042">uint32</span><span class="op" id="1707048">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707050">func</span>&nbsp;<span class="ident" id="1707055">call4096</span><span class="op" id="1707063">(</span><span class="ident" id="1707064">fn</span><span class="op" id="1707066">,</span>&nbsp;<span class="ident" id="1707068">arg</span>&nbsp;<span class="ident" id="1707072">unsafe</span><span class="op" id="1707078">.</span><span class="ident" id="1707079">Pointer</span><span class="op" id="1707086">,</span>&nbsp;<span class="ident" id="1707088">n</span><span class="op" id="1707089">,</span>&nbsp;<span class="ident" id="1707091">retoffset</span>&nbsp;<span class="builtintype" id="1707101">uint32</span><span class="op" id="1707107">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707109">func</span>&nbsp;<span class="ident" id="1707114">call8192</span><span class="op" id="1707122">(</span><span class="ident" id="1707123">fn</span><span class="op" id="1707125">,</span>&nbsp;<span class="ident" id="1707127">arg</span>&nbsp;<span class="ident" id="1707131">unsafe</span><span class="op" id="1707137">.</span><span class="ident" id="1707138">Pointer</span><span class="op" id="1707145">,</span>&nbsp;<span class="ident" id="1707147">n</span><span class="op" id="1707148">,</span>&nbsp;<span class="ident" id="1707150">retoffset</span>&nbsp;<span class="builtintype" id="1707160">uint32</span><span class="op" id="1707166">)</span><br>
<span class="lineno">300</span><span class="keyword" id="1707168">func</span>&nbsp;<span class="ident" id="1707173">call16384</span><span class="op" id="1707182">(</span><span class="ident" id="1707183">fn</span><span class="op" id="1707185">,</span>&nbsp;<span class="ident" id="1707187">arg</span>&nbsp;<span class="ident" id="1707191">unsafe</span><span class="op" id="1707197">.</span><span class="ident" id="1707198">Pointer</span><span class="op" id="1707205">,</span>&nbsp;<span class="ident" id="1707207">n</span><span class="op" id="1707208">,</span>&nbsp;<span class="ident" id="1707210">retoffset</span>&nbsp;<span class="builtintype" id="1707220">uint32</span><span class="op" id="1707226">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707228">func</span>&nbsp;<span class="ident" id="1707233">call32768</span><span class="op" id="1707242">(</span><span class="ident" id="1707243">fn</span><span class="op" id="1707245">,</span>&nbsp;<span class="ident" id="1707247">arg</span>&nbsp;<span class="ident" id="1707251">unsafe</span><span class="op" id="1707257">.</span><span class="ident" id="1707258">Pointer</span><span class="op" id="1707265">,</span>&nbsp;<span class="ident" id="1707267">n</span><span class="op" id="1707268">,</span>&nbsp;<span class="ident" id="1707270">retoffset</span>&nbsp;<span class="builtintype" id="1707280">uint32</span><span class="op" id="1707286">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707288">func</span>&nbsp;<span class="ident" id="1707293">call65536</span><span class="op" id="1707302">(</span><span class="ident" id="1707303">fn</span><span class="op" id="1707305">,</span>&nbsp;<span class="ident" id="1707307">arg</span>&nbsp;<span class="ident" id="1707311">unsafe</span><span class="op" id="1707317">.</span><span class="ident" id="1707318">Pointer</span><span class="op" id="1707325">,</span>&nbsp;<span class="ident" id="1707327">n</span><span class="op" id="1707328">,</span>&nbsp;<span class="ident" id="1707330">retoffset</span>&nbsp;<span class="builtintype" id="1707340">uint32</span><span class="op" id="1707346">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707348">func</span>&nbsp;<span class="ident" id="1707353">call131072</span><span class="op" id="1707363">(</span><span class="ident" id="1707364">fn</span><span class="op" id="1707366">,</span>&nbsp;<span class="ident" id="1707368">arg</span>&nbsp;<span class="ident" id="1707372">unsafe</span><span class="op" id="1707378">.</span><span class="ident" id="1707379">Pointer</span><span class="op" id="1707386">,</span>&nbsp;<span class="ident" id="1707388">n</span><span class="op" id="1707389">,</span>&nbsp;<span class="ident" id="1707391">retoffset</span>&nbsp;<span class="builtintype" id="1707401">uint32</span><span class="op" id="1707407">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707409">func</span>&nbsp;<span class="ident" id="1707414">call262144</span><span class="op" id="1707424">(</span><span class="ident" id="1707425">fn</span><span class="op" id="1707427">,</span>&nbsp;<span class="ident" id="1707429">arg</span>&nbsp;<span class="ident" id="1707433">unsafe</span><span class="op" id="1707439">.</span><span class="ident" id="1707440">Pointer</span><span class="op" id="1707447">,</span>&nbsp;<span class="ident" id="1707449">n</span><span class="op" id="1707450">,</span>&nbsp;<span class="ident" id="1707452">retoffset</span>&nbsp;<span class="builtintype" id="1707462">uint32</span><span class="op" id="1707468">)</span><br>
<span class="lineno">305</span><span class="keyword" id="1707470">func</span>&nbsp;<span class="ident" id="1707475">call524288</span><span class="op" id="1707485">(</span><span class="ident" id="1707486">fn</span><span class="op" id="1707488">,</span>&nbsp;<span class="ident" id="1707490">arg</span>&nbsp;<span class="ident" id="1707494">unsafe</span><span class="op" id="1707500">.</span><span class="ident" id="1707501">Pointer</span><span class="op" id="1707508">,</span>&nbsp;<span class="ident" id="1707510">n</span><span class="op" id="1707511">,</span>&nbsp;<span class="ident" id="1707513">retoffset</span>&nbsp;<span class="builtintype" id="1707523">uint32</span><span class="op" id="1707529">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707531">func</span>&nbsp;<span class="ident" id="1707536">call1048576</span><span class="op" id="1707547">(</span><span class="ident" id="1707548">fn</span><span class="op" id="1707550">,</span>&nbsp;<span class="ident" id="1707552">arg</span>&nbsp;<span class="ident" id="1707556">unsafe</span><span class="op" id="1707562">.</span><span class="ident" id="1707563">Pointer</span><span class="op" id="1707570">,</span>&nbsp;<span class="ident" id="1707572">n</span><span class="op" id="1707573">,</span>&nbsp;<span class="ident" id="1707575">retoffset</span>&nbsp;<span class="builtintype" id="1707585">uint32</span><span class="op" id="1707591">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707593">func</span>&nbsp;<span class="ident" id="1707598">call2097152</span><span class="op" id="1707609">(</span><span class="ident" id="1707610">fn</span><span class="op" id="1707612">,</span>&nbsp;<span class="ident" id="1707614">arg</span>&nbsp;<span class="ident" id="1707618">unsafe</span><span class="op" id="1707624">.</span><span class="ident" id="1707625">Pointer</span><span class="op" id="1707632">,</span>&nbsp;<span class="ident" id="1707634">n</span><span class="op" id="1707635">,</span>&nbsp;<span class="ident" id="1707637">retoffset</span>&nbsp;<span class="builtintype" id="1707647">uint32</span><span class="op" id="1707653">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707655">func</span>&nbsp;<span class="ident" id="1707660">call4194304</span><span class="op" id="1707671">(</span><span class="ident" id="1707672">fn</span><span class="op" id="1707674">,</span>&nbsp;<span class="ident" id="1707676">arg</span>&nbsp;<span class="ident" id="1707680">unsafe</span><span class="op" id="1707686">.</span><span class="ident" id="1707687">Pointer</span><span class="op" id="1707694">,</span>&nbsp;<span class="ident" id="1707696">n</span><span class="op" id="1707697">,</span>&nbsp;<span class="ident" id="1707699">retoffset</span>&nbsp;<span class="builtintype" id="1707709">uint32</span><span class="op" id="1707715">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707717">func</span>&nbsp;<span class="ident" id="1707722">call8388608</span><span class="op" id="1707733">(</span><span class="ident" id="1707734">fn</span><span class="op" id="1707736">,</span>&nbsp;<span class="ident" id="1707738">arg</span>&nbsp;<span class="ident" id="1707742">unsafe</span><span class="op" id="1707748">.</span><span class="ident" id="1707749">Pointer</span><span class="op" id="1707756">,</span>&nbsp;<span class="ident" id="1707758">n</span><span class="op" id="1707759">,</span>&nbsp;<span class="ident" id="1707761">retoffset</span>&nbsp;<span class="builtintype" id="1707771">uint32</span><span class="op" id="1707777">)</span><br>
<span class="lineno">310</span><span class="keyword" id="1707779">func</span>&nbsp;<span class="ident" id="1707784">call16777216</span><span class="op" id="1707796">(</span><span class="ident" id="1707797">fn</span><span class="op" id="1707799">,</span>&nbsp;<span class="ident" id="1707801">arg</span>&nbsp;<span class="ident" id="1707805">unsafe</span><span class="op" id="1707811">.</span><span class="ident" id="1707812">Pointer</span><span class="op" id="1707819">,</span>&nbsp;<span class="ident" id="1707821">n</span><span class="op" id="1707822">,</span>&nbsp;<span class="ident" id="1707824">retoffset</span>&nbsp;<span class="builtintype" id="1707834">uint32</span><span class="op" id="1707840">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707842">func</span>&nbsp;<span class="ident" id="1707847">call33554432</span><span class="op" id="1707859">(</span><span class="ident" id="1707860">fn</span><span class="op" id="1707862">,</span>&nbsp;<span class="ident" id="1707864">arg</span>&nbsp;<span class="ident" id="1707868">unsafe</span><span class="op" id="1707874">.</span><span class="ident" id="1707875">Pointer</span><span class="op" id="1707882">,</span>&nbsp;<span class="ident" id="1707884">n</span><span class="op" id="1707885">,</span>&nbsp;<span class="ident" id="1707887">retoffset</span>&nbsp;<span class="builtintype" id="1707897">uint32</span><span class="op" id="1707903">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707905">func</span>&nbsp;<span class="ident" id="1707910">call67108864</span><span class="op" id="1707922">(</span><span class="ident" id="1707923">fn</span><span class="op" id="1707925">,</span>&nbsp;<span class="ident" id="1707927">arg</span>&nbsp;<span class="ident" id="1707931">unsafe</span><span class="op" id="1707937">.</span><span class="ident" id="1707938">Pointer</span><span class="op" id="1707945">,</span>&nbsp;<span class="ident" id="1707947">n</span><span class="op" id="1707948">,</span>&nbsp;<span class="ident" id="1707950">retoffset</span>&nbsp;<span class="builtintype" id="1707960">uint32</span><span class="op" id="1707966">)</span><br>
<span class="lineno"></span><span class="keyword" id="1707968">func</span>&nbsp;<span class="ident" id="1707973">call134217728</span><span class="op" id="1707986">(</span><span class="ident" id="1707987">fn</span><span class="op" id="1707989">,</span>&nbsp;<span class="ident" id="1707991">arg</span>&nbsp;<span class="ident" id="1707995">unsafe</span><span class="op" id="1708001">.</span><span class="ident" id="1708002">Pointer</span><span class="op" id="1708009">,</span>&nbsp;<span class="ident" id="1708011">n</span><span class="op" id="1708012">,</span>&nbsp;<span class="ident" id="1708014">retoffset</span>&nbsp;<span class="builtintype" id="1708024">uint32</span><span class="op" id="1708030">)</span><br>
<span class="lineno"></span><span class="keyword" id="1708032">func</span>&nbsp;<span class="ident" id="1708037">call268435456</span><span class="op" id="1708050">(</span><span class="ident" id="1708051">fn</span><span class="op" id="1708053">,</span>&nbsp;<span class="ident" id="1708055">arg</span>&nbsp;<span class="ident" id="1708059">unsafe</span><span class="op" id="1708065">.</span><span class="ident" id="1708066">Pointer</span><span class="op" id="1708073">,</span>&nbsp;<span class="ident" id="1708075">n</span><span class="op" id="1708076">,</span>&nbsp;<span class="ident" id="1708078">retoffset</span>&nbsp;<span class="builtintype" id="1708088">uint32</span><span class="op" id="1708094">)</span><br>
<span class="lineno">315</span><span class="keyword" id="1708096">func</span>&nbsp;<span class="ident" id="1708101">call536870912</span><span class="op" id="1708114">(</span><span class="ident" id="1708115">fn</span><span class="op" id="1708117">,</span>&nbsp;<span class="ident" id="1708119">arg</span>&nbsp;<span class="ident" id="1708123">unsafe</span><span class="op" id="1708129">.</span><span class="ident" id="1708130">Pointer</span><span class="op" id="1708137">,</span>&nbsp;<span class="ident" id="1708139">n</span><span class="op" id="1708140">,</span>&nbsp;<span class="ident" id="1708142">retoffset</span>&nbsp;<span class="builtintype" id="1708152">uint32</span><span class="op" id="1708158">)</span><br>
<span class="lineno"></span><span class="keyword" id="1708160">func</span>&nbsp;<span class="ident" id="1708165">call1073741824</span><span class="op" id="1708179">(</span><span class="ident" id="1708180">fn</span><span class="op" id="1708182">,</span>&nbsp;<span class="ident" id="1708184">arg</span>&nbsp;<span class="ident" id="1708188">unsafe</span><span class="op" id="1708194">.</span><span class="ident" id="1708195">Pointer</span><span class="op" id="1708202">,</span>&nbsp;<span class="ident" id="1708204">n</span><span class="op" id="1708205">,</span>&nbsp;<span class="ident" id="1708207">retoffset</span>&nbsp;<span class="builtintype" id="1708217">uint32</span><span class="op" id="1708223">)</span>
</div>
</body>
</html>
