<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6385907">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6385963">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6386017">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6386068">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6386127">package</span>&nbsp;<span class="ident" id="6386135">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386142">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6386194">import</span>&nbsp;<span class="op" id="6386201">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6386204">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6386213">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6386228">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6386247">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6386254">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6386260">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6386265">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386268">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6386310">type</span>&nbsp;<span class="ident" id="6386315">File</span>&nbsp;<span class="keyword" id="6386320">struct</span>&nbsp;<span class="op" id="6386327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386330">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386342">ByteOrder</span>&nbsp;<span class="ident" id="6386352">binary</span><span class="op" id="6386358">.</span><span class="ident" id="6386359">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386370">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6386380">[</span><span class="op" id="6386381">]</span><span class="ident" id="6386382">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386388">Sections</span>&nbsp;&nbsp;<span class="op" id="6386398">[</span><span class="op" id="6386399">]</span><span class="op" id="6386400">*</span><span class="ident" id="6386401">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386411">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6386420">*</span><span class="ident" id="6386421">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386429">Dysymtab</span>&nbsp;<span class="op" id="6386438">*</span><span class="ident" id="6386439">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386450">closer</span>&nbsp;<span class="ident" id="6386457">io</span><span class="op" id="6386459">.</span><span class="ident" id="6386460">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6386467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386470">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6386516">type</span>&nbsp;<span class="ident" id="6386521">Load</span>&nbsp;<span class="keyword" id="6386526">interface</span>&nbsp;<span class="op" id="6386536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386539">Raw</span><span class="op" id="6386542">(</span><span class="op" id="6386543">)</span>&nbsp;<span class="op" id="6386545">[</span><span class="op" id="6386546">]</span><span class="builtintype" id="6386547">byte</span><br>
<span class="lineno">35</span><span class="op" id="6386552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386555">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6386623">type</span>&nbsp;<span class="ident" id="6386628">LoadBytes</span>&nbsp;<span class="op" id="6386638">[</span><span class="op" id="6386639">]</span><span class="builtintype" id="6386640">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6386646">func</span>&nbsp;<span class="op" id="6386651">(</span><span class="ident" id="6386652">b</span>&nbsp;<span class="ident" id="6386654">LoadBytes</span><span class="op" id="6386663">)</span>&nbsp;<span class="ident" id="6386665">Raw</span><span class="op" id="6386668">(</span><span class="op" id="6386669">)</span>&nbsp;<span class="op" id="6386671">[</span><span class="op" id="6386672">]</span><span class="builtintype" id="6386673">byte</span>&nbsp;<span class="op" id="6386678">{</span>&nbsp;<span class="keyword" id="6386680">return</span>&nbsp;<span class="ident" id="6386687">b</span>&nbsp;<span class="op" id="6386689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386692">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6386777">type</span>&nbsp;<span class="ident" id="6386782">SegmentHeader</span>&nbsp;<span class="keyword" id="6386796">struct</span>&nbsp;<span class="op" id="6386803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386806">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6386814">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386823">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386831">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386839">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386847">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386855">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6386863">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386871">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6386879">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386887">Offset</span>&nbsp;&nbsp;<span class="ident" id="6386895">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386903">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6386911">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386919">Maxprot</span>&nbsp;<span class="builtintype" id="6386927">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386935">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386943">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386951">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386959">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6386967">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6386975">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6386982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6386985">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6387057">type</span>&nbsp;<span class="ident" id="6387062">Segment</span>&nbsp;<span class="keyword" id="6387070">struct</span>&nbsp;<span class="op" id="6387077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387080">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387091">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387107">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387145">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387185">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387220">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387268">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387318">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387342">io</span><span class="op" id="6387344">.</span><span class="ident" id="6387345">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387355">sr</span>&nbsp;<span class="op" id="6387358">*</span><span class="ident" id="6387359">io</span><span class="op" id="6387361">.</span><span class="ident" id="6387362">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6387376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6387379">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6387434">func</span>&nbsp;<span class="op" id="6387439">(</span><span class="ident" id="6387440">s</span>&nbsp;<span class="op" id="6387442">*</span><span class="ident" id="6387443">Segment</span><span class="op" id="6387450">)</span>&nbsp;<span class="ident" id="6387452">Data</span><span class="op" id="6387456">(</span><span class="op" id="6387457">)</span>&nbsp;<span class="op" id="6387459">(</span><span class="op" id="6387460">[</span><span class="op" id="6387461">]</span><span class="builtintype" id="6387462">byte</span><span class="op" id="6387466">,</span>&nbsp;<span class="builtintype" id="6387468">error</span><span class="op" id="6387473">)</span>&nbsp;<span class="op" id="6387475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387478">dat</span>&nbsp;<span class="op" id="6387482">:=</span>&nbsp;<span class="builtinfunc" id="6387485">make</span><span class="op" id="6387489">(</span><span class="op" id="6387490">[</span><span class="op" id="6387491">]</span><span class="builtintype" id="6387492">byte</span><span class="op" id="6387496">,</span>&nbsp;<span class="ident" id="6387498">s</span><span class="op" id="6387499">.</span><span class="ident" id="6387500">sr</span><span class="op" id="6387502">.</span><span class="ident" id="6387503">Size</span><span class="op" id="6387507">(</span><span class="op" id="6387508">)</span><span class="op" id="6387509">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387512">n</span><span class="op" id="6387513">,</span>&nbsp;<span class="ident" id="6387515">err</span>&nbsp;<span class="op" id="6387519">:=</span>&nbsp;<span class="ident" id="6387522">s</span><span class="op" id="6387523">.</span><span class="ident" id="6387524">sr</span><span class="op" id="6387526">.</span><span class="ident" id="6387527">ReadAt</span><span class="op" id="6387533">(</span><span class="ident" id="6387534">dat</span><span class="op" id="6387537">,</span>&nbsp;<span class="num" id="6387539">0</span><span class="op" id="6387540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387543">if</span>&nbsp;<span class="ident" id="6387546">n</span>&nbsp;<span class="op" id="6387548">==</span>&nbsp;<span class="builtinfunc" id="6387551">len</span><span class="op" id="6387554">(</span><span class="ident" id="6387555">dat</span><span class="op" id="6387558">)</span>&nbsp;<span class="op" id="6387560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387564">err</span>&nbsp;<span class="op" id="6387568">=</span>&nbsp;<span class="ident" id="6387570">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6387575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6387578">return</span>&nbsp;<span class="ident" id="6387585">dat</span><span class="op" id="6387588">[</span><span class="num" id="6387589">0</span><span class="op" id="6387590">:</span><span class="ident" id="6387591">n</span><span class="op" id="6387592">]</span><span class="op" id="6387593">,</span>&nbsp;<span class="ident" id="6387595">err</span><br>
<span class="lineno">80</span><span class="op" id="6387599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6387602">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6387656">func</span>&nbsp;<span class="op" id="6387661">(</span><span class="ident" id="6387662">s</span>&nbsp;<span class="op" id="6387664">*</span><span class="ident" id="6387665">Segment</span><span class="op" id="6387672">)</span>&nbsp;<span class="ident" id="6387674">Open</span><span class="op" id="6387678">(</span><span class="op" id="6387679">)</span>&nbsp;<span class="ident" id="6387681">io</span><span class="op" id="6387683">.</span><span class="ident" id="6387684">ReadSeeker</span>&nbsp;<span class="op" id="6387695">{</span>&nbsp;<span class="keyword" id="6387697">return</span>&nbsp;<span class="ident" id="6387704">io</span><span class="op" id="6387706">.</span><span class="ident" id="6387707">NewSectionReader</span><span class="op" id="6387723">(</span><span class="ident" id="6387724">s</span><span class="op" id="6387725">.</span><span class="ident" id="6387726">sr</span><span class="op" id="6387728">,</span>&nbsp;<span class="num" id="6387730">0</span><span class="op" id="6387731">,</span>&nbsp;<span class="num" id="6387733">1</span><span class="op" id="6387734">&lt;&lt;</span><span class="num" id="6387736">63</span><span class="op" id="6387738">-</span><span class="num" id="6387739">1</span><span class="op" id="6387740">)</span>&nbsp;<span class="op" id="6387742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6387745">type</span>&nbsp;<span class="ident" id="6387750">SectionHeader</span>&nbsp;<span class="keyword" id="6387764">struct</span>&nbsp;<span class="op" id="6387771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387774">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6387781">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387789">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6387796">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387804">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6387811">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387819">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6387826">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387834">Offset</span>&nbsp;<span class="builtintype" id="6387841">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387849">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6387856">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387864">Reloff</span>&nbsp;<span class="builtintype" id="6387871">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387879">Nreloc</span>&nbsp;<span class="builtintype" id="6387886">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387894">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6387901">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6387908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6387911">type</span>&nbsp;<span class="ident" id="6387916">Section</span>&nbsp;<span class="keyword" id="6387924">struct</span>&nbsp;<span class="op" id="6387931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6387934">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387950">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6387988">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388028">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388063">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388111">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6388161">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388185">io</span><span class="op" id="6388187">.</span><span class="ident" id="6388188">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388198">sr</span>&nbsp;<span class="op" id="6388201">*</span><span class="ident" id="6388202">io</span><span class="op" id="6388204">.</span><span class="ident" id="6388205">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6388219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6388222">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6388284">func</span>&nbsp;<span class="op" id="6388289">(</span><span class="ident" id="6388290">s</span>&nbsp;<span class="op" id="6388292">*</span><span class="ident" id="6388293">Section</span><span class="op" id="6388300">)</span>&nbsp;<span class="ident" id="6388302">Data</span><span class="op" id="6388306">(</span><span class="op" id="6388307">)</span>&nbsp;<span class="op" id="6388309">(</span><span class="op" id="6388310">[</span><span class="op" id="6388311">]</span><span class="builtintype" id="6388312">byte</span><span class="op" id="6388316">,</span>&nbsp;<span class="builtintype" id="6388318">error</span><span class="op" id="6388323">)</span>&nbsp;<span class="op" id="6388325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388328">dat</span>&nbsp;<span class="op" id="6388332">:=</span>&nbsp;<span class="builtinfunc" id="6388335">make</span><span class="op" id="6388339">(</span><span class="op" id="6388340">[</span><span class="op" id="6388341">]</span><span class="builtintype" id="6388342">byte</span><span class="op" id="6388346">,</span>&nbsp;<span class="ident" id="6388348">s</span><span class="op" id="6388349">.</span><span class="ident" id="6388350">sr</span><span class="op" id="6388352">.</span><span class="ident" id="6388353">Size</span><span class="op" id="6388357">(</span><span class="op" id="6388358">)</span><span class="op" id="6388359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388362">n</span><span class="op" id="6388363">,</span>&nbsp;<span class="ident" id="6388365">err</span>&nbsp;<span class="op" id="6388369">:=</span>&nbsp;<span class="ident" id="6388372">s</span><span class="op" id="6388373">.</span><span class="ident" id="6388374">sr</span><span class="op" id="6388376">.</span><span class="ident" id="6388377">ReadAt</span><span class="op" id="6388383">(</span><span class="ident" id="6388384">dat</span><span class="op" id="6388387">,</span>&nbsp;<span class="num" id="6388389">0</span><span class="op" id="6388390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388393">if</span>&nbsp;<span class="ident" id="6388396">n</span>&nbsp;<span class="op" id="6388398">==</span>&nbsp;<span class="builtinfunc" id="6388401">len</span><span class="op" id="6388404">(</span><span class="ident" id="6388405">dat</span><span class="op" id="6388408">)</span>&nbsp;<span class="op" id="6388410">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388414">err</span>&nbsp;<span class="op" id="6388418">=</span>&nbsp;<span class="ident" id="6388420">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6388425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6388428">return</span>&nbsp;<span class="ident" id="6388435">dat</span><span class="op" id="6388438">[</span><span class="num" id="6388439">0</span><span class="op" id="6388440">:</span><span class="ident" id="6388441">n</span><span class="op" id="6388442">]</span><span class="op" id="6388443">,</span>&nbsp;<span class="ident" id="6388445">err</span><br>
<span class="lineno"></span><span class="op" id="6388449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6388452">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6388513">func</span>&nbsp;<span class="op" id="6388518">(</span><span class="ident" id="6388519">s</span>&nbsp;<span class="op" id="6388521">*</span><span class="ident" id="6388522">Section</span><span class="op" id="6388529">)</span>&nbsp;<span class="ident" id="6388531">Open</span><span class="op" id="6388535">(</span><span class="op" id="6388536">)</span>&nbsp;<span class="ident" id="6388538">io</span><span class="op" id="6388540">.</span><span class="ident" id="6388541">ReadSeeker</span>&nbsp;<span class="op" id="6388552">{</span>&nbsp;<span class="keyword" id="6388554">return</span>&nbsp;<span class="ident" id="6388561">io</span><span class="op" id="6388563">.</span><span class="ident" id="6388564">NewSectionReader</span><span class="op" id="6388580">(</span><span class="ident" id="6388581">s</span><span class="op" id="6388582">.</span><span class="ident" id="6388583">sr</span><span class="op" id="6388585">,</span>&nbsp;<span class="num" id="6388587">0</span><span class="op" id="6388588">,</span>&nbsp;<span class="num" id="6388590">1</span><span class="op" id="6388591">&lt;&lt;</span><span class="num" id="6388593">63</span><span class="op" id="6388595">-</span><span class="num" id="6388596">1</span><span class="op" id="6388597">)</span>&nbsp;<span class="op" id="6388599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6388602">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6388663">type</span>&nbsp;<span class="ident" id="6388668">Dylib</span>&nbsp;<span class="keyword" id="6388674">struct</span>&nbsp;<span class="op" id="6388681">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388684">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388695">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6388710">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388718">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6388733">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388741">CurrentVersion</span>&nbsp;<span class="builtintype" id="6388756">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388764">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6388779">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6388786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6388789">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6388843">type</span>&nbsp;<span class="ident" id="6388848">Symtab</span>&nbsp;<span class="keyword" id="6388855">struct</span>&nbsp;<span class="op" id="6388862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388865">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388876">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388887">Syms</span>&nbsp;<span class="op" id="6388892">[</span><span class="op" id="6388893">]</span><span class="ident" id="6388894">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6388901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6388904">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6388968">type</span>&nbsp;<span class="ident" id="6388973">Dysymtab</span>&nbsp;<span class="keyword" id="6388982">struct</span>&nbsp;<span class="op" id="6388989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6388992">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389003">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389016">IndirectSyms</span>&nbsp;<span class="op" id="6389029">[</span><span class="op" id="6389030">]</span><span class="builtintype" id="6389031">uint32</span>&nbsp;<span class="comment" id="6389038">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6389066">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6389069">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6389094">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6389157">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6389208">type</span>&nbsp;<span class="ident" id="6389213">FormatError</span>&nbsp;<span class="keyword" id="6389225">struct</span>&nbsp;<span class="op" id="6389232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389235">off</span>&nbsp;<span class="ident" id="6389239">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389246">msg</span>&nbsp;<span class="builtintype" id="6389250">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389258">val</span>&nbsp;<span class="keyword" id="6389262">interface</span><span class="op" id="6389271">{</span><span class="op" id="6389272">}</span><br>
<span class="lineno"></span><span class="op" id="6389274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6389277">func</span>&nbsp;<span class="op" id="6389282">(</span><span class="ident" id="6389283">e</span>&nbsp;<span class="op" id="6389285">*</span><span class="ident" id="6389286">FormatError</span><span class="op" id="6389297">)</span>&nbsp;<span class="ident" id="6389299">Error</span><span class="op" id="6389304">(</span><span class="op" id="6389305">)</span>&nbsp;<span class="builtintype" id="6389307">string</span>&nbsp;<span class="op" id="6389314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389317">msg</span>&nbsp;<span class="op" id="6389321">:=</span>&nbsp;<span class="ident" id="6389324">e</span><span class="op" id="6389325">.</span><span class="ident" id="6389326">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389331">if</span>&nbsp;<span class="ident" id="6389334">e</span><span class="op" id="6389335">.</span><span class="ident" id="6389336">val</span>&nbsp;<span class="op" id="6389340">!=</span>&nbsp;<span class="ident" id="6389343">nil</span>&nbsp;<span class="op" id="6389347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389351">msg</span>&nbsp;<span class="op" id="6389355">+=</span>&nbsp;<span class="ident" id="6389358">fmt</span><span class="op" id="6389361">.</span><span class="ident" id="6389362">Sprintf</span><span class="op" id="6389369">(</span><span class="string" id="6389370">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6389377">,</span>&nbsp;<span class="ident" id="6389379">e</span><span class="op" id="6389380">.</span><span class="ident" id="6389381">val</span><span class="op" id="6389384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389390">msg</span>&nbsp;<span class="op" id="6389394">+=</span>&nbsp;<span class="ident" id="6389397">fmt</span><span class="op" id="6389400">.</span><span class="ident" id="6389401">Sprintf</span><span class="op" id="6389408">(</span><span class="string" id="6389409">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6389433">,</span>&nbsp;<span class="ident" id="6389435">e</span><span class="op" id="6389436">.</span><span class="ident" id="6389437">off</span><span class="op" id="6389440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389443">return</span>&nbsp;<span class="ident" id="6389450">msg</span><br>
<span class="lineno">165</span><span class="op" id="6389454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6389457">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6389544">func</span>&nbsp;<span class="ident" id="6389549">Open</span><span class="op" id="6389553">(</span><span class="ident" id="6389554">name</span>&nbsp;<span class="builtintype" id="6389559">string</span><span class="op" id="6389565">)</span>&nbsp;<span class="op" id="6389567">(</span><span class="op" id="6389568">*</span><span class="ident" id="6389569">File</span><span class="op" id="6389573">,</span>&nbsp;<span class="builtintype" id="6389575">error</span><span class="op" id="6389580">)</span>&nbsp;<span class="op" id="6389582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389585">f</span><span class="op" id="6389586">,</span>&nbsp;<span class="ident" id="6389588">err</span>&nbsp;<span class="op" id="6389592">:=</span>&nbsp;<span class="ident" id="6389595">os</span><span class="op" id="6389597">.</span><span class="ident" id="6389598">Open</span><span class="op" id="6389602">(</span><span class="ident" id="6389603">name</span><span class="op" id="6389607">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389610">if</span>&nbsp;<span class="ident" id="6389613">err</span>&nbsp;<span class="op" id="6389617">!=</span>&nbsp;<span class="ident" id="6389620">nil</span>&nbsp;<span class="op" id="6389624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389628">return</span>&nbsp;<span class="ident" id="6389635">nil</span><span class="op" id="6389638">,</span>&nbsp;<span class="ident" id="6389640">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389648">ff</span><span class="op" id="6389650">,</span>&nbsp;<span class="ident" id="6389652">err</span>&nbsp;<span class="op" id="6389656">:=</span>&nbsp;<span class="ident" id="6389659">NewFile</span><span class="op" id="6389666">(</span><span class="ident" id="6389667">f</span><span class="op" id="6389668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389671">if</span>&nbsp;<span class="ident" id="6389674">err</span>&nbsp;<span class="op" id="6389678">!=</span>&nbsp;<span class="ident" id="6389681">nil</span>&nbsp;<span class="op" id="6389685">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389689">f</span><span class="op" id="6389690">.</span><span class="ident" id="6389691">Close</span><span class="op" id="6389696">(</span><span class="op" id="6389697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389701">return</span>&nbsp;<span class="ident" id="6389708">nil</span><span class="op" id="6389711">,</span>&nbsp;<span class="ident" id="6389713">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389721">ff</span><span class="op" id="6389723">.</span><span class="ident" id="6389724">closer</span>&nbsp;<span class="op" id="6389731">=</span>&nbsp;<span class="ident" id="6389733">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389736">return</span>&nbsp;<span class="ident" id="6389743">ff</span><span class="op" id="6389745">,</span>&nbsp;<span class="ident" id="6389747">nil</span><br>
<span class="lineno">180</span><span class="op" id="6389751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6389754">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6389780">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6389847">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6389871">func</span>&nbsp;<span class="op" id="6389876">(</span><span class="ident" id="6389877">f</span>&nbsp;<span class="op" id="6389879">*</span><span class="ident" id="6389880">File</span><span class="op" id="6389884">)</span>&nbsp;<span class="ident" id="6389886">Close</span><span class="op" id="6389891">(</span><span class="op" id="6389892">)</span>&nbsp;<span class="builtintype" id="6389894">error</span>&nbsp;<span class="op" id="6389900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389903">var</span>&nbsp;<span class="ident" id="6389907">err</span>&nbsp;<span class="builtintype" id="6389911">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389918">if</span>&nbsp;<span class="ident" id="6389921">f</span><span class="op" id="6389922">.</span><span class="ident" id="6389923">closer</span>&nbsp;<span class="op" id="6389930">!=</span>&nbsp;<span class="ident" id="6389933">nil</span>&nbsp;<span class="op" id="6389937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389941">err</span>&nbsp;<span class="op" id="6389945">=</span>&nbsp;<span class="ident" id="6389947">f</span><span class="op" id="6389948">.</span><span class="ident" id="6389949">closer</span><span class="op" id="6389955">.</span><span class="ident" id="6389956">Close</span><span class="op" id="6389961">(</span><span class="op" id="6389962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6389966">f</span><span class="op" id="6389967">.</span><span class="ident" id="6389968">closer</span>&nbsp;<span class="op" id="6389975">=</span>&nbsp;<span class="ident" id="6389977">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6389982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6389985">return</span>&nbsp;<span class="ident" id="6389992">err</span><br>
<span class="lineno"></span><span class="op" id="6389996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6389999">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6390084">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6390157">func</span>&nbsp;<span class="ident" id="6390162">NewFile</span><span class="op" id="6390169">(</span><span class="ident" id="6390170">r</span>&nbsp;<span class="ident" id="6390172">io</span><span class="op" id="6390174">.</span><span class="ident" id="6390175">ReaderAt</span><span class="op" id="6390183">)</span>&nbsp;<span class="op" id="6390185">(</span><span class="op" id="6390186">*</span><span class="ident" id="6390187">File</span><span class="op" id="6390191">,</span>&nbsp;<span class="builtintype" id="6390193">error</span><span class="op" id="6390198">)</span>&nbsp;<span class="op" id="6390200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390203">f</span>&nbsp;<span class="op" id="6390205">:=</span>&nbsp;<span class="builtinfunc" id="6390208">new</span><span class="op" id="6390211">(</span><span class="ident" id="6390212">File</span><span class="op" id="6390216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390219">sr</span>&nbsp;<span class="op" id="6390222">:=</span>&nbsp;<span class="ident" id="6390225">io</span><span class="op" id="6390227">.</span><span class="ident" id="6390228">NewSectionReader</span><span class="op" id="6390244">(</span><span class="ident" id="6390245">r</span><span class="op" id="6390246">,</span>&nbsp;<span class="num" id="6390248">0</span><span class="op" id="6390249">,</span>&nbsp;<span class="num" id="6390251">1</span><span class="op" id="6390252">&lt;&lt;</span><span class="num" id="6390254">63</span><span class="op" id="6390256">-</span><span class="num" id="6390257">1</span><span class="op" id="6390258">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390262">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390324">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390379">var</span>&nbsp;<span class="ident" id="6390383">ident</span>&nbsp;<span class="op" id="6390389">[</span><span class="num" id="6390390">4</span><span class="op" id="6390391">]</span><span class="builtintype" id="6390392">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390398">if</span>&nbsp;<span class="ident" id="6390401">_</span><span class="op" id="6390402">,</span>&nbsp;<span class="ident" id="6390404">err</span>&nbsp;<span class="op" id="6390408">:=</span>&nbsp;<span class="ident" id="6390411">r</span><span class="op" id="6390412">.</span><span class="ident" id="6390413">ReadAt</span><span class="op" id="6390419">(</span><span class="ident" id="6390420">ident</span><span class="op" id="6390425">[</span><span class="num" id="6390426">0</span><span class="op" id="6390427">:</span><span class="op" id="6390428">]</span><span class="op" id="6390429">,</span>&nbsp;<span class="num" id="6390431">0</span><span class="op" id="6390432">)</span><span class="op" id="6390433">;</span>&nbsp;<span class="ident" id="6390435">err</span>&nbsp;<span class="op" id="6390439">!=</span>&nbsp;<span class="ident" id="6390442">nil</span>&nbsp;<span class="op" id="6390446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390450">return</span>&nbsp;<span class="ident" id="6390457">nil</span><span class="op" id="6390460">,</span>&nbsp;<span class="ident" id="6390462">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390470">be</span>&nbsp;<span class="op" id="6390473">:=</span>&nbsp;<span class="ident" id="6390476">binary</span><span class="op" id="6390482">.</span><span class="ident" id="6390483">BigEndian</span><span class="op" id="6390492">.</span><span class="ident" id="6390493">Uint32</span><span class="op" id="6390499">(</span><span class="ident" id="6390500">ident</span><span class="op" id="6390505">[</span><span class="num" id="6390506">0</span><span class="op" id="6390507">:</span><span class="op" id="6390508">]</span><span class="op" id="6390509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390512">le</span>&nbsp;<span class="op" id="6390515">:=</span>&nbsp;<span class="ident" id="6390518">binary</span><span class="op" id="6390524">.</span><span class="ident" id="6390525">LittleEndian</span><span class="op" id="6390537">.</span><span class="ident" id="6390538">Uint32</span><span class="op" id="6390544">(</span><span class="ident" id="6390545">ident</span><span class="op" id="6390550">[</span><span class="num" id="6390551">0</span><span class="op" id="6390552">:</span><span class="op" id="6390553">]</span><span class="op" id="6390554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390557">switch</span>&nbsp;<span class="ident" id="6390564">Magic32</span>&nbsp;<span class="op" id="6390572">&amp;^</span>&nbsp;<span class="num" id="6390575">1</span>&nbsp;<span class="op" id="6390577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390580">case</span>&nbsp;<span class="ident" id="6390585">be</span>&nbsp;<span class="op" id="6390588">&amp;^</span>&nbsp;<span class="num" id="6390591">1</span><span class="op" id="6390592">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390596">f</span><span class="op" id="6390597">.</span><span class="ident" id="6390598">ByteOrder</span>&nbsp;<span class="op" id="6390608">=</span>&nbsp;<span class="ident" id="6390610">binary</span><span class="op" id="6390616">.</span><span class="ident" id="6390617">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390629">f</span><span class="op" id="6390630">.</span><span class="ident" id="6390631">Magic</span>&nbsp;<span class="op" id="6390637">=</span>&nbsp;<span class="ident" id="6390639">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390643">case</span>&nbsp;<span class="ident" id="6390648">le</span>&nbsp;<span class="op" id="6390651">&amp;^</span>&nbsp;<span class="num" id="6390654">1</span><span class="op" id="6390655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390659">f</span><span class="op" id="6390660">.</span><span class="ident" id="6390661">ByteOrder</span>&nbsp;<span class="op" id="6390671">=</span>&nbsp;<span class="ident" id="6390673">binary</span><span class="op" id="6390679">.</span><span class="ident" id="6390680">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390695">f</span><span class="op" id="6390696">.</span><span class="ident" id="6390697">Magic</span>&nbsp;<span class="op" id="6390703">=</span>&nbsp;<span class="ident" id="6390705">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390709">default</span><span class="op" id="6390716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390720">return</span>&nbsp;<span class="ident" id="6390727">nil</span><span class="op" id="6390730">,</span>&nbsp;<span class="op" id="6390732">&amp;</span><span class="ident" id="6390733">FormatError</span><span class="op" id="6390744">{</span><span class="num" id="6390745">0</span><span class="op" id="6390746">,</span>&nbsp;<span class="string" id="6390748">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6390770">,</span>&nbsp;<span class="ident" id="6390772">nil</span><span class="op" id="6390775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390782">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390811">if</span>&nbsp;<span class="ident" id="6390814">err</span>&nbsp;<span class="op" id="6390818">:=</span>&nbsp;<span class="ident" id="6390821">binary</span><span class="op" id="6390827">.</span><span class="ident" id="6390828">Read</span><span class="op" id="6390832">(</span><span class="ident" id="6390833">sr</span><span class="op" id="6390835">,</span>&nbsp;<span class="ident" id="6390837">f</span><span class="op" id="6390838">.</span><span class="ident" id="6390839">ByteOrder</span><span class="op" id="6390848">,</span>&nbsp;<span class="op" id="6390850">&amp;</span><span class="ident" id="6390851">f</span><span class="op" id="6390852">.</span><span class="ident" id="6390853">FileHeader</span><span class="op" id="6390863">)</span><span class="op" id="6390864">;</span>&nbsp;<span class="ident" id="6390866">err</span>&nbsp;<span class="op" id="6390870">!=</span>&nbsp;<span class="ident" id="6390873">nil</span>&nbsp;<span class="op" id="6390877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390881">return</span>&nbsp;<span class="ident" id="6390888">nil</span><span class="op" id="6390891">,</span>&nbsp;<span class="ident" id="6390893">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6390898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6390902">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390926">offset</span>&nbsp;<span class="op" id="6390933">:=</span>&nbsp;<span class="ident" id="6390936">int64</span><span class="op" id="6390941">(</span><span class="ident" id="6390942">fileHeaderSize32</span><span class="op" id="6390958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6390961">if</span>&nbsp;<span class="ident" id="6390964">f</span><span class="op" id="6390965">.</span><span class="ident" id="6390966">Magic</span>&nbsp;<span class="op" id="6390972">==</span>&nbsp;<span class="ident" id="6390975">Magic64</span>&nbsp;<span class="op" id="6390983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6390987">offset</span>&nbsp;<span class="op" id="6390994">=</span>&nbsp;<span class="ident" id="6390996">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391017">dat</span>&nbsp;<span class="op" id="6391021">:=</span>&nbsp;<span class="builtinfunc" id="6391024">make</span><span class="op" id="6391028">(</span><span class="op" id="6391029">[</span><span class="op" id="6391030">]</span><span class="builtintype" id="6391031">byte</span><span class="op" id="6391035">,</span>&nbsp;<span class="ident" id="6391037">f</span><span class="op" id="6391038">.</span><span class="ident" id="6391039">Cmdsz</span><span class="op" id="6391044">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391047">if</span>&nbsp;<span class="ident" id="6391050">_</span><span class="op" id="6391051">,</span>&nbsp;<span class="ident" id="6391053">err</span>&nbsp;<span class="op" id="6391057">:=</span>&nbsp;<span class="ident" id="6391060">r</span><span class="op" id="6391061">.</span><span class="ident" id="6391062">ReadAt</span><span class="op" id="6391068">(</span><span class="ident" id="6391069">dat</span><span class="op" id="6391072">,</span>&nbsp;<span class="ident" id="6391074">offset</span><span class="op" id="6391080">)</span><span class="op" id="6391081">;</span>&nbsp;<span class="ident" id="6391083">err</span>&nbsp;<span class="op" id="6391087">!=</span>&nbsp;<span class="ident" id="6391090">nil</span>&nbsp;<span class="op" id="6391094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391098">return</span>&nbsp;<span class="ident" id="6391105">nil</span><span class="op" id="6391108">,</span>&nbsp;<span class="ident" id="6391110">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391118">f</span><span class="op" id="6391119">.</span><span class="ident" id="6391120">Loads</span>&nbsp;<span class="op" id="6391126">=</span>&nbsp;<span class="builtinfunc" id="6391128">make</span><span class="op" id="6391132">(</span><span class="op" id="6391133">[</span><span class="op" id="6391134">]</span><span class="ident" id="6391135">Load</span><span class="op" id="6391139">,</span>&nbsp;<span class="ident" id="6391141">f</span><span class="op" id="6391142">.</span><span class="ident" id="6391143">Ncmd</span><span class="op" id="6391147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391150">bo</span>&nbsp;<span class="op" id="6391153">:=</span>&nbsp;<span class="ident" id="6391156">f</span><span class="op" id="6391157">.</span><span class="ident" id="6391158">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391169">for</span>&nbsp;<span class="ident" id="6391173">i</span>&nbsp;<span class="op" id="6391175">:=</span>&nbsp;<span class="keyword" id="6391178">range</span>&nbsp;<span class="ident" id="6391184">f</span><span class="op" id="6391185">.</span><span class="ident" id="6391186">Loads</span>&nbsp;<span class="op" id="6391192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6391196">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391258">if</span>&nbsp;<span class="builtinfunc" id="6391261">len</span><span class="op" id="6391264">(</span><span class="ident" id="6391265">dat</span><span class="op" id="6391268">)</span>&nbsp;<span class="op" id="6391270">&lt;</span>&nbsp;<span class="num" id="6391272">8</span>&nbsp;<span class="op" id="6391274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391279">return</span>&nbsp;<span class="ident" id="6391286">nil</span><span class="op" id="6391289">,</span>&nbsp;<span class="op" id="6391291">&amp;</span><span class="ident" id="6391292">FormatError</span><span class="op" id="6391303">{</span><span class="ident" id="6391304">offset</span><span class="op" id="6391310">,</span>&nbsp;<span class="string" id="6391312">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6391337">,</span>&nbsp;<span class="ident" id="6391339">nil</span><span class="op" id="6391342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391346">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391350">cmd</span><span class="op" id="6391353">,</span>&nbsp;<span class="ident" id="6391355">siz</span>&nbsp;<span class="op" id="6391359">:=</span>&nbsp;<span class="ident" id="6391362">LoadCmd</span><span class="op" id="6391369">(</span><span class="ident" id="6391370">bo</span><span class="op" id="6391372">.</span><span class="ident" id="6391373">Uint32</span><span class="op" id="6391379">(</span><span class="ident" id="6391380">dat</span><span class="op" id="6391383">[</span><span class="num" id="6391384">0</span><span class="op" id="6391385">:</span><span class="num" id="6391386">4</span><span class="op" id="6391387">]</span><span class="op" id="6391388">)</span><span class="op" id="6391389">)</span><span class="op" id="6391390">,</span>&nbsp;<span class="ident" id="6391392">bo</span><span class="op" id="6391394">.</span><span class="ident" id="6391395">Uint32</span><span class="op" id="6391401">(</span><span class="ident" id="6391402">dat</span><span class="op" id="6391405">[</span><span class="num" id="6391406">4</span><span class="op" id="6391407">:</span><span class="num" id="6391408">8</span><span class="op" id="6391409">]</span><span class="op" id="6391410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391414">if</span>&nbsp;<span class="ident" id="6391417">siz</span>&nbsp;<span class="op" id="6391421">&lt;</span>&nbsp;<span class="num" id="6391423">8</span>&nbsp;<span class="op" id="6391425">||</span>&nbsp;<span class="ident" id="6391428">siz</span>&nbsp;<span class="op" id="6391432">&gt;</span>&nbsp;<span class="builtintype" id="6391434">uint32</span><span class="op" id="6391440">(</span><span class="builtinfunc" id="6391441">len</span><span class="op" id="6391444">(</span><span class="ident" id="6391445">dat</span><span class="op" id="6391448">)</span><span class="op" id="6391449">)</span>&nbsp;<span class="op" id="6391451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391456">return</span>&nbsp;<span class="ident" id="6391463">nil</span><span class="op" id="6391466">,</span>&nbsp;<span class="op" id="6391468">&amp;</span><span class="ident" id="6391469">FormatError</span><span class="op" id="6391480">{</span><span class="ident" id="6391481">offset</span><span class="op" id="6391487">,</span>&nbsp;<span class="string" id="6391489">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6391517">,</span>&nbsp;<span class="ident" id="6391519">nil</span><span class="op" id="6391522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391530">var</span>&nbsp;<span class="ident" id="6391534">cmddat</span>&nbsp;<span class="op" id="6391541">[</span><span class="op" id="6391542">]</span><span class="builtintype" id="6391543">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391550">cmddat</span><span class="op" id="6391556">,</span>&nbsp;<span class="ident" id="6391558">dat</span>&nbsp;<span class="op" id="6391562">=</span>&nbsp;<span class="ident" id="6391564">dat</span><span class="op" id="6391567">[</span><span class="num" id="6391568">0</span><span class="op" id="6391569">:</span><span class="ident" id="6391570">siz</span><span class="op" id="6391573">]</span><span class="op" id="6391574">,</span>&nbsp;<span class="ident" id="6391576">dat</span><span class="op" id="6391579">[</span><span class="ident" id="6391580">siz</span><span class="op" id="6391583">:</span><span class="op" id="6391584">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391588">offset</span>&nbsp;<span class="op" id="6391595">+=</span>&nbsp;<span class="ident" id="6391598">int64</span><span class="op" id="6391603">(</span><span class="ident" id="6391604">siz</span><span class="op" id="6391607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391611">var</span>&nbsp;<span class="ident" id="6391615">s</span>&nbsp;<span class="op" id="6391617">*</span><span class="ident" id="6391618">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391628">switch</span>&nbsp;<span class="ident" id="6391635">cmd</span>&nbsp;<span class="op" id="6391639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391643">default</span><span class="op" id="6391650">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391655">f</span><span class="op" id="6391656">.</span><span class="ident" id="6391657">Loads</span><span class="op" id="6391662">[</span><span class="ident" id="6391663">i</span><span class="op" id="6391664">]</span>&nbsp;<span class="op" id="6391666">=</span>&nbsp;<span class="ident" id="6391668">LoadBytes</span><span class="op" id="6391677">(</span><span class="ident" id="6391678">cmddat</span><span class="op" id="6391684">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391689">case</span>&nbsp;<span class="ident" id="6391694">LoadCmdDylib</span><span class="op" id="6391706">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391711">var</span>&nbsp;<span class="ident" id="6391715">hdr</span>&nbsp;<span class="ident" id="6391719">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391731">b</span>&nbsp;<span class="op" id="6391733">:=</span>&nbsp;<span class="ident" id="6391736">bytes</span><span class="op" id="6391741">.</span><span class="ident" id="6391742">NewReader</span><span class="op" id="6391751">(</span><span class="ident" id="6391752">cmddat</span><span class="op" id="6391758">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391763">if</span>&nbsp;<span class="ident" id="6391766">err</span>&nbsp;<span class="op" id="6391770">:=</span>&nbsp;<span class="ident" id="6391773">binary</span><span class="op" id="6391779">.</span><span class="ident" id="6391780">Read</span><span class="op" id="6391784">(</span><span class="ident" id="6391785">b</span><span class="op" id="6391786">,</span>&nbsp;<span class="ident" id="6391788">bo</span><span class="op" id="6391790">,</span>&nbsp;<span class="op" id="6391792">&amp;</span><span class="ident" id="6391793">hdr</span><span class="op" id="6391796">)</span><span class="op" id="6391797">;</span>&nbsp;<span class="ident" id="6391799">err</span>&nbsp;<span class="op" id="6391803">!=</span>&nbsp;<span class="ident" id="6391806">nil</span>&nbsp;<span class="op" id="6391810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391816">return</span>&nbsp;<span class="ident" id="6391823">nil</span><span class="op" id="6391826">,</span>&nbsp;<span class="ident" id="6391828">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391840">l</span>&nbsp;<span class="op" id="6391842">:=</span>&nbsp;<span class="builtinfunc" id="6391845">new</span><span class="op" id="6391848">(</span><span class="ident" id="6391849">Dylib</span><span class="op" id="6391854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391859">if</span>&nbsp;<span class="ident" id="6391862">hdr</span><span class="op" id="6391865">.</span><span class="ident" id="6391866">Name</span>&nbsp;<span class="op" id="6391871">&gt;=</span>&nbsp;<span class="builtintype" id="6391874">uint32</span><span class="op" id="6391880">(</span><span class="builtinfunc" id="6391881">len</span><span class="op" id="6391884">(</span><span class="ident" id="6391885">cmddat</span><span class="op" id="6391891">)</span><span class="op" id="6391892">)</span>&nbsp;<span class="op" id="6391894">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6391900">return</span>&nbsp;<span class="ident" id="6391907">nil</span><span class="op" id="6391910">,</span>&nbsp;<span class="op" id="6391912">&amp;</span><span class="ident" id="6391913">FormatError</span><span class="op" id="6391924">{</span><span class="ident" id="6391925">offset</span><span class="op" id="6391931">,</span>&nbsp;<span class="string" id="6391933">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6391974">,</span>&nbsp;<span class="ident" id="6391976">hdr</span><span class="op" id="6391979">.</span><span class="ident" id="6391980">Name</span><span class="op" id="6391984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6391989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6391994">l</span><span class="op" id="6391995">.</span><span class="ident" id="6391996">Name</span>&nbsp;<span class="op" id="6392001">=</span>&nbsp;<span class="ident" id="6392003">cstring</span><span class="op" id="6392010">(</span><span class="ident" id="6392011">cmddat</span><span class="op" id="6392017">[</span><span class="ident" id="6392018">hdr</span><span class="op" id="6392021">.</span><span class="ident" id="6392022">Name</span><span class="op" id="6392026">:</span><span class="op" id="6392027">]</span><span class="op" id="6392028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392033">l</span><span class="op" id="6392034">.</span><span class="ident" id="6392035">Time</span>&nbsp;<span class="op" id="6392040">=</span>&nbsp;<span class="ident" id="6392042">hdr</span><span class="op" id="6392045">.</span><span class="ident" id="6392046">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392054">l</span><span class="op" id="6392055">.</span><span class="ident" id="6392056">CurrentVersion</span>&nbsp;<span class="op" id="6392071">=</span>&nbsp;<span class="ident" id="6392073">hdr</span><span class="op" id="6392076">.</span><span class="ident" id="6392077">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392095">l</span><span class="op" id="6392096">.</span><span class="ident" id="6392097">CompatVersion</span>&nbsp;<span class="op" id="6392111">=</span>&nbsp;<span class="ident" id="6392113">hdr</span><span class="op" id="6392116">.</span><span class="ident" id="6392117">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392134">l</span><span class="op" id="6392135">.</span><span class="ident" id="6392136">LoadBytes</span>&nbsp;<span class="op" id="6392146">=</span>&nbsp;<span class="ident" id="6392148">LoadBytes</span><span class="op" id="6392157">(</span><span class="ident" id="6392158">cmddat</span><span class="op" id="6392164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392169">f</span><span class="op" id="6392170">.</span><span class="ident" id="6392171">Loads</span><span class="op" id="6392176">[</span><span class="ident" id="6392177">i</span><span class="op" id="6392178">]</span>&nbsp;<span class="op" id="6392180">=</span>&nbsp;<span class="ident" id="6392182">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392187">case</span>&nbsp;<span class="ident" id="6392192">LoadCmdSymtab</span><span class="op" id="6392205">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392210">var</span>&nbsp;<span class="ident" id="6392214">hdr</span>&nbsp;<span class="ident" id="6392218">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392231">b</span>&nbsp;<span class="op" id="6392233">:=</span>&nbsp;<span class="ident" id="6392236">bytes</span><span class="op" id="6392241">.</span><span class="ident" id="6392242">NewReader</span><span class="op" id="6392251">(</span><span class="ident" id="6392252">cmddat</span><span class="op" id="6392258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392263">if</span>&nbsp;<span class="ident" id="6392266">err</span>&nbsp;<span class="op" id="6392270">:=</span>&nbsp;<span class="ident" id="6392273">binary</span><span class="op" id="6392279">.</span><span class="ident" id="6392280">Read</span><span class="op" id="6392284">(</span><span class="ident" id="6392285">b</span><span class="op" id="6392286">,</span>&nbsp;<span class="ident" id="6392288">bo</span><span class="op" id="6392290">,</span>&nbsp;<span class="op" id="6392292">&amp;</span><span class="ident" id="6392293">hdr</span><span class="op" id="6392296">)</span><span class="op" id="6392297">;</span>&nbsp;<span class="ident" id="6392299">err</span>&nbsp;<span class="op" id="6392303">!=</span>&nbsp;<span class="ident" id="6392306">nil</span>&nbsp;<span class="op" id="6392310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392316">return</span>&nbsp;<span class="ident" id="6392323">nil</span><span class="op" id="6392326">,</span>&nbsp;<span class="ident" id="6392328">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392335">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392340">strtab</span>&nbsp;<span class="op" id="6392347">:=</span>&nbsp;<span class="builtinfunc" id="6392350">make</span><span class="op" id="6392354">(</span><span class="op" id="6392355">[</span><span class="op" id="6392356">]</span><span class="builtintype" id="6392357">byte</span><span class="op" id="6392361">,</span>&nbsp;<span class="ident" id="6392363">hdr</span><span class="op" id="6392366">.</span><span class="ident" id="6392367">Strsize</span><span class="op" id="6392374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392379">if</span>&nbsp;<span class="ident" id="6392382">_</span><span class="op" id="6392383">,</span>&nbsp;<span class="ident" id="6392385">err</span>&nbsp;<span class="op" id="6392389">:=</span>&nbsp;<span class="ident" id="6392392">r</span><span class="op" id="6392393">.</span><span class="ident" id="6392394">ReadAt</span><span class="op" id="6392400">(</span><span class="ident" id="6392401">strtab</span><span class="op" id="6392407">,</span>&nbsp;<span class="ident" id="6392409">int64</span><span class="op" id="6392414">(</span><span class="ident" id="6392415">hdr</span><span class="op" id="6392418">.</span><span class="ident" id="6392419">Stroff</span><span class="op" id="6392425">)</span><span class="op" id="6392426">)</span><span class="op" id="6392427">;</span>&nbsp;<span class="ident" id="6392429">err</span>&nbsp;<span class="op" id="6392433">!=</span>&nbsp;<span class="ident" id="6392436">nil</span>&nbsp;<span class="op" id="6392440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392446">return</span>&nbsp;<span class="ident" id="6392453">nil</span><span class="op" id="6392456">,</span>&nbsp;<span class="ident" id="6392458">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392470">var</span>&nbsp;<span class="ident" id="6392474">symsz</span>&nbsp;<span class="builtintype" id="6392480">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392487">if</span>&nbsp;<span class="ident" id="6392490">f</span><span class="op" id="6392491">.</span><span class="ident" id="6392492">Magic</span>&nbsp;<span class="op" id="6392498">==</span>&nbsp;<span class="ident" id="6392501">Magic64</span>&nbsp;<span class="op" id="6392509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392515">symsz</span>&nbsp;<span class="op" id="6392521">=</span>&nbsp;<span class="num" id="6392523">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392529">}</span>&nbsp;<span class="keyword" id="6392531">else</span>&nbsp;<span class="op" id="6392536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392542">symsz</span>&nbsp;<span class="op" id="6392548">=</span>&nbsp;<span class="num" id="6392550">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392556">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392561">symdat</span>&nbsp;<span class="op" id="6392568">:=</span>&nbsp;<span class="builtinfunc" id="6392571">make</span><span class="op" id="6392575">(</span><span class="op" id="6392576">[</span><span class="op" id="6392577">]</span><span class="builtintype" id="6392578">byte</span><span class="op" id="6392582">,</span>&nbsp;<span class="builtintype" id="6392584">int</span><span class="op" id="6392587">(</span><span class="ident" id="6392588">hdr</span><span class="op" id="6392591">.</span><span class="ident" id="6392592">Nsyms</span><span class="op" id="6392597">)</span><span class="op" id="6392598">*</span><span class="ident" id="6392599">symsz</span><span class="op" id="6392604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392609">if</span>&nbsp;<span class="ident" id="6392612">_</span><span class="op" id="6392613">,</span>&nbsp;<span class="ident" id="6392615">err</span>&nbsp;<span class="op" id="6392619">:=</span>&nbsp;<span class="ident" id="6392622">r</span><span class="op" id="6392623">.</span><span class="ident" id="6392624">ReadAt</span><span class="op" id="6392630">(</span><span class="ident" id="6392631">symdat</span><span class="op" id="6392637">,</span>&nbsp;<span class="ident" id="6392639">int64</span><span class="op" id="6392644">(</span><span class="ident" id="6392645">hdr</span><span class="op" id="6392648">.</span><span class="ident" id="6392649">Symoff</span><span class="op" id="6392655">)</span><span class="op" id="6392656">)</span><span class="op" id="6392657">;</span>&nbsp;<span class="ident" id="6392659">err</span>&nbsp;<span class="op" id="6392663">!=</span>&nbsp;<span class="ident" id="6392666">nil</span>&nbsp;<span class="op" id="6392670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392676">return</span>&nbsp;<span class="ident" id="6392683">nil</span><span class="op" id="6392686">,</span>&nbsp;<span class="ident" id="6392688">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392700">st</span><span class="op" id="6392702">,</span>&nbsp;<span class="ident" id="6392704">err</span>&nbsp;<span class="op" id="6392708">:=</span>&nbsp;<span class="ident" id="6392711">f</span><span class="op" id="6392712">.</span><span class="ident" id="6392713">parseSymtab</span><span class="op" id="6392724">(</span><span class="ident" id="6392725">symdat</span><span class="op" id="6392731">,</span>&nbsp;<span class="ident" id="6392733">strtab</span><span class="op" id="6392739">,</span>&nbsp;<span class="ident" id="6392741">cmddat</span><span class="op" id="6392747">,</span>&nbsp;<span class="op" id="6392749">&amp;</span><span class="ident" id="6392750">hdr</span><span class="op" id="6392753">,</span>&nbsp;<span class="ident" id="6392755">offset</span><span class="op" id="6392761">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392766">if</span>&nbsp;<span class="ident" id="6392769">err</span>&nbsp;<span class="op" id="6392773">!=</span>&nbsp;<span class="ident" id="6392776">nil</span>&nbsp;<span class="op" id="6392780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392786">return</span>&nbsp;<span class="ident" id="6392793">nil</span><span class="op" id="6392796">,</span>&nbsp;<span class="ident" id="6392798">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392810">f</span><span class="op" id="6392811">.</span><span class="ident" id="6392812">Loads</span><span class="op" id="6392817">[</span><span class="ident" id="6392818">i</span><span class="op" id="6392819">]</span>&nbsp;<span class="op" id="6392821">=</span>&nbsp;<span class="ident" id="6392823">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392829">f</span><span class="op" id="6392830">.</span><span class="ident" id="6392831">Symtab</span>&nbsp;<span class="op" id="6392838">=</span>&nbsp;<span class="ident" id="6392840">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392846">case</span>&nbsp;<span class="ident" id="6392851">LoadCmdDysymtab</span><span class="op" id="6392866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392871">var</span>&nbsp;<span class="ident" id="6392875">hdr</span>&nbsp;<span class="ident" id="6392879">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6392894">b</span>&nbsp;<span class="op" id="6392896">:=</span>&nbsp;<span class="ident" id="6392899">bytes</span><span class="op" id="6392904">.</span><span class="ident" id="6392905">NewReader</span><span class="op" id="6392914">(</span><span class="ident" id="6392915">cmddat</span><span class="op" id="6392921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392926">if</span>&nbsp;<span class="ident" id="6392929">err</span>&nbsp;<span class="op" id="6392933">:=</span>&nbsp;<span class="ident" id="6392936">binary</span><span class="op" id="6392942">.</span><span class="ident" id="6392943">Read</span><span class="op" id="6392947">(</span><span class="ident" id="6392948">b</span><span class="op" id="6392949">,</span>&nbsp;<span class="ident" id="6392951">bo</span><span class="op" id="6392953">,</span>&nbsp;<span class="op" id="6392955">&amp;</span><span class="ident" id="6392956">hdr</span><span class="op" id="6392959">)</span><span class="op" id="6392960">;</span>&nbsp;<span class="ident" id="6392962">err</span>&nbsp;<span class="op" id="6392966">!=</span>&nbsp;<span class="ident" id="6392969">nil</span>&nbsp;<span class="op" id="6392973">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6392979">return</span>&nbsp;<span class="ident" id="6392986">nil</span><span class="op" id="6392989">,</span>&nbsp;<span class="ident" id="6392991">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6392998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393003">dat</span>&nbsp;<span class="op" id="6393007">:=</span>&nbsp;<span class="builtinfunc" id="6393010">make</span><span class="op" id="6393014">(</span><span class="op" id="6393015">[</span><span class="op" id="6393016">]</span><span class="builtintype" id="6393017">byte</span><span class="op" id="6393021">,</span>&nbsp;<span class="ident" id="6393023">hdr</span><span class="op" id="6393026">.</span><span class="ident" id="6393027">Nindirectsyms</span><span class="op" id="6393040">*</span><span class="num" id="6393041">4</span><span class="op" id="6393042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393047">if</span>&nbsp;<span class="ident" id="6393050">_</span><span class="op" id="6393051">,</span>&nbsp;<span class="ident" id="6393053">err</span>&nbsp;<span class="op" id="6393057">:=</span>&nbsp;<span class="ident" id="6393060">r</span><span class="op" id="6393061">.</span><span class="ident" id="6393062">ReadAt</span><span class="op" id="6393068">(</span><span class="ident" id="6393069">dat</span><span class="op" id="6393072">,</span>&nbsp;<span class="ident" id="6393074">int64</span><span class="op" id="6393079">(</span><span class="ident" id="6393080">hdr</span><span class="op" id="6393083">.</span><span class="ident" id="6393084">Indirectsymoff</span><span class="op" id="6393098">)</span><span class="op" id="6393099">)</span><span class="op" id="6393100">;</span>&nbsp;<span class="ident" id="6393102">err</span>&nbsp;<span class="op" id="6393106">!=</span>&nbsp;<span class="ident" id="6393109">nil</span>&nbsp;<span class="op" id="6393113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393119">return</span>&nbsp;<span class="ident" id="6393126">nil</span><span class="op" id="6393129">,</span>&nbsp;<span class="ident" id="6393131">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6393138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393143">x</span>&nbsp;<span class="op" id="6393145">:=</span>&nbsp;<span class="builtinfunc" id="6393148">make</span><span class="op" id="6393152">(</span><span class="op" id="6393153">[</span><span class="op" id="6393154">]</span><span class="builtintype" id="6393155">uint32</span><span class="op" id="6393161">,</span>&nbsp;<span class="ident" id="6393163">hdr</span><span class="op" id="6393166">.</span><span class="ident" id="6393167">Nindirectsyms</span><span class="op" id="6393180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393185">if</span>&nbsp;<span class="ident" id="6393188">err</span>&nbsp;<span class="op" id="6393192">:=</span>&nbsp;<span class="ident" id="6393195">binary</span><span class="op" id="6393201">.</span><span class="ident" id="6393202">Read</span><span class="op" id="6393206">(</span><span class="ident" id="6393207">bytes</span><span class="op" id="6393212">.</span><span class="ident" id="6393213">NewReader</span><span class="op" id="6393222">(</span><span class="ident" id="6393223">dat</span><span class="op" id="6393226">)</span><span class="op" id="6393227">,</span>&nbsp;<span class="ident" id="6393229">bo</span><span class="op" id="6393231">,</span>&nbsp;<span class="ident" id="6393233">x</span><span class="op" id="6393234">)</span><span class="op" id="6393235">;</span>&nbsp;<span class="ident" id="6393237">err</span>&nbsp;<span class="op" id="6393241">!=</span>&nbsp;<span class="ident" id="6393244">nil</span>&nbsp;<span class="op" id="6393248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393254">return</span>&nbsp;<span class="ident" id="6393261">nil</span><span class="op" id="6393264">,</span>&nbsp;<span class="ident" id="6393266">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6393273">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393278">st</span>&nbsp;<span class="op" id="6393281">:=</span>&nbsp;<span class="builtinfunc" id="6393284">new</span><span class="op" id="6393287">(</span><span class="ident" id="6393288">Dysymtab</span><span class="op" id="6393296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393301">st</span><span class="op" id="6393303">.</span><span class="ident" id="6393304">LoadBytes</span>&nbsp;<span class="op" id="6393314">=</span>&nbsp;<span class="ident" id="6393316">LoadBytes</span><span class="op" id="6393325">(</span><span class="ident" id="6393326">cmddat</span><span class="op" id="6393332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393337">st</span><span class="op" id="6393339">.</span><span class="ident" id="6393340">DysymtabCmd</span>&nbsp;<span class="op" id="6393352">=</span>&nbsp;<span class="ident" id="6393354">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393361">st</span><span class="op" id="6393363">.</span><span class="ident" id="6393364">IndirectSyms</span>&nbsp;<span class="op" id="6393377">=</span>&nbsp;<span class="ident" id="6393379">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393384">f</span><span class="op" id="6393385">.</span><span class="ident" id="6393386">Loads</span><span class="op" id="6393391">[</span><span class="ident" id="6393392">i</span><span class="op" id="6393393">]</span>&nbsp;<span class="op" id="6393395">=</span>&nbsp;<span class="ident" id="6393397">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393403">f</span><span class="op" id="6393404">.</span><span class="ident" id="6393405">Dysymtab</span>&nbsp;<span class="op" id="6393414">=</span>&nbsp;<span class="ident" id="6393416">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393422">case</span>&nbsp;<span class="ident" id="6393427">LoadCmdSegment</span><span class="op" id="6393441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393446">var</span>&nbsp;<span class="ident" id="6393450">seg32</span>&nbsp;<span class="ident" id="6393456">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393469">b</span>&nbsp;<span class="op" id="6393471">:=</span>&nbsp;<span class="ident" id="6393474">bytes</span><span class="op" id="6393479">.</span><span class="ident" id="6393480">NewReader</span><span class="op" id="6393489">(</span><span class="ident" id="6393490">cmddat</span><span class="op" id="6393496">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393501">if</span>&nbsp;<span class="ident" id="6393504">err</span>&nbsp;<span class="op" id="6393508">:=</span>&nbsp;<span class="ident" id="6393511">binary</span><span class="op" id="6393517">.</span><span class="ident" id="6393518">Read</span><span class="op" id="6393522">(</span><span class="ident" id="6393523">b</span><span class="op" id="6393524">,</span>&nbsp;<span class="ident" id="6393526">bo</span><span class="op" id="6393528">,</span>&nbsp;<span class="op" id="6393530">&amp;</span><span class="ident" id="6393531">seg32</span><span class="op" id="6393536">)</span><span class="op" id="6393537">;</span>&nbsp;<span class="ident" id="6393539">err</span>&nbsp;<span class="op" id="6393543">!=</span>&nbsp;<span class="ident" id="6393546">nil</span>&nbsp;<span class="op" id="6393550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393556">return</span>&nbsp;<span class="ident" id="6393563">nil</span><span class="op" id="6393566">,</span>&nbsp;<span class="ident" id="6393568">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6393575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393580">s</span>&nbsp;<span class="op" id="6393582">=</span>&nbsp;<span class="builtinfunc" id="6393584">new</span><span class="op" id="6393587">(</span><span class="ident" id="6393588">Segment</span><span class="op" id="6393595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393600">s</span><span class="op" id="6393601">.</span><span class="ident" id="6393602">LoadBytes</span>&nbsp;<span class="op" id="6393612">=</span>&nbsp;<span class="ident" id="6393614">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393624">s</span><span class="op" id="6393625">.</span><span class="ident" id="6393626">Cmd</span>&nbsp;<span class="op" id="6393630">=</span>&nbsp;<span class="ident" id="6393632">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393639">s</span><span class="op" id="6393640">.</span><span class="ident" id="6393641">Len</span>&nbsp;<span class="op" id="6393645">=</span>&nbsp;<span class="ident" id="6393647">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393654">s</span><span class="op" id="6393655">.</span><span class="ident" id="6393656">Name</span>&nbsp;<span class="op" id="6393661">=</span>&nbsp;<span class="ident" id="6393663">cstring</span><span class="op" id="6393670">(</span><span class="ident" id="6393671">seg32</span><span class="op" id="6393676">.</span><span class="ident" id="6393677">Name</span><span class="op" id="6393681">[</span><span class="num" id="6393682">0</span><span class="op" id="6393683">:</span><span class="op" id="6393684">]</span><span class="op" id="6393685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393690">s</span><span class="op" id="6393691">.</span><span class="ident" id="6393692">Addr</span>&nbsp;<span class="op" id="6393697">=</span>&nbsp;<span class="ident" id="6393699">uint64</span><span class="op" id="6393705">(</span><span class="ident" id="6393706">seg32</span><span class="op" id="6393711">.</span><span class="ident" id="6393712">Addr</span><span class="op" id="6393716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393721">s</span><span class="op" id="6393722">.</span><span class="ident" id="6393723">Memsz</span>&nbsp;<span class="op" id="6393729">=</span>&nbsp;<span class="ident" id="6393731">uint64</span><span class="op" id="6393737">(</span><span class="ident" id="6393738">seg32</span><span class="op" id="6393743">.</span><span class="ident" id="6393744">Memsz</span><span class="op" id="6393749">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393754">s</span><span class="op" id="6393755">.</span><span class="ident" id="6393756">Offset</span>&nbsp;<span class="op" id="6393763">=</span>&nbsp;<span class="ident" id="6393765">uint64</span><span class="op" id="6393771">(</span><span class="ident" id="6393772">seg32</span><span class="op" id="6393777">.</span><span class="ident" id="6393778">Offset</span><span class="op" id="6393784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393789">s</span><span class="op" id="6393790">.</span><span class="ident" id="6393791">Filesz</span>&nbsp;<span class="op" id="6393798">=</span>&nbsp;<span class="ident" id="6393800">uint64</span><span class="op" id="6393806">(</span><span class="ident" id="6393807">seg32</span><span class="op" id="6393812">.</span><span class="ident" id="6393813">Filesz</span><span class="op" id="6393819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393824">s</span><span class="op" id="6393825">.</span><span class="ident" id="6393826">Maxprot</span>&nbsp;<span class="op" id="6393834">=</span>&nbsp;<span class="ident" id="6393836">seg32</span><span class="op" id="6393841">.</span><span class="ident" id="6393842">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393853">s</span><span class="op" id="6393854">.</span><span class="ident" id="6393855">Prot</span>&nbsp;<span class="op" id="6393860">=</span>&nbsp;<span class="ident" id="6393862">seg32</span><span class="op" id="6393867">.</span><span class="ident" id="6393868">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393876">s</span><span class="op" id="6393877">.</span><span class="ident" id="6393878">Nsect</span>&nbsp;<span class="op" id="6393884">=</span>&nbsp;<span class="ident" id="6393886">seg32</span><span class="op" id="6393891">.</span><span class="ident" id="6393892">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393901">s</span><span class="op" id="6393902">.</span><span class="ident" id="6393903">Flag</span>&nbsp;<span class="op" id="6393908">=</span>&nbsp;<span class="ident" id="6393910">seg32</span><span class="op" id="6393915">.</span><span class="ident" id="6393916">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6393924">f</span><span class="op" id="6393925">.</span><span class="ident" id="6393926">Loads</span><span class="op" id="6393931">[</span><span class="ident" id="6393932">i</span><span class="op" id="6393933">]</span>&nbsp;<span class="op" id="6393935">=</span>&nbsp;<span class="ident" id="6393937">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393942">for</span>&nbsp;<span class="ident" id="6393946">i</span>&nbsp;<span class="op" id="6393948">:=</span>&nbsp;<span class="num" id="6393951">0</span><span class="op" id="6393952">;</span>&nbsp;<span class="ident" id="6393954">i</span>&nbsp;<span class="op" id="6393956">&lt;</span>&nbsp;<span class="builtintype" id="6393958">int</span><span class="op" id="6393961">(</span><span class="ident" id="6393962">s</span><span class="op" id="6393963">.</span><span class="ident" id="6393964">Nsect</span><span class="op" id="6393969">)</span><span class="op" id="6393970">;</span>&nbsp;<span class="ident" id="6393972">i</span><span class="op" id="6393973">++</span>&nbsp;<span class="op" id="6393976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6393982">var</span>&nbsp;<span class="ident" id="6393986">sh32</span>&nbsp;<span class="ident" id="6393991">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394005">if</span>&nbsp;<span class="ident" id="6394008">err</span>&nbsp;<span class="op" id="6394012">:=</span>&nbsp;<span class="ident" id="6394015">binary</span><span class="op" id="6394021">.</span><span class="ident" id="6394022">Read</span><span class="op" id="6394026">(</span><span class="ident" id="6394027">b</span><span class="op" id="6394028">,</span>&nbsp;<span class="ident" id="6394030">bo</span><span class="op" id="6394032">,</span>&nbsp;<span class="op" id="6394034">&amp;</span><span class="ident" id="6394035">sh32</span><span class="op" id="6394039">)</span><span class="op" id="6394040">;</span>&nbsp;<span class="ident" id="6394042">err</span>&nbsp;<span class="op" id="6394046">!=</span>&nbsp;<span class="ident" id="6394049">nil</span>&nbsp;<span class="op" id="6394053">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394060">return</span>&nbsp;<span class="ident" id="6394067">nil</span><span class="op" id="6394070">,</span>&nbsp;<span class="ident" id="6394072">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6394080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394086">sh</span>&nbsp;<span class="op" id="6394089">:=</span>&nbsp;<span class="builtinfunc" id="6394092">new</span><span class="op" id="6394095">(</span><span class="ident" id="6394096">Section</span><span class="op" id="6394103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394109">sh</span><span class="op" id="6394111">.</span><span class="ident" id="6394112">Name</span>&nbsp;<span class="op" id="6394117">=</span>&nbsp;<span class="ident" id="6394119">cstring</span><span class="op" id="6394126">(</span><span class="ident" id="6394127">sh32</span><span class="op" id="6394131">.</span><span class="ident" id="6394132">Name</span><span class="op" id="6394136">[</span><span class="num" id="6394137">0</span><span class="op" id="6394138">:</span><span class="op" id="6394139">]</span><span class="op" id="6394140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394146">sh</span><span class="op" id="6394148">.</span><span class="ident" id="6394149">Seg</span>&nbsp;<span class="op" id="6394153">=</span>&nbsp;<span class="ident" id="6394155">cstring</span><span class="op" id="6394162">(</span><span class="ident" id="6394163">sh32</span><span class="op" id="6394167">.</span><span class="ident" id="6394168">Seg</span><span class="op" id="6394171">[</span><span class="num" id="6394172">0</span><span class="op" id="6394173">:</span><span class="op" id="6394174">]</span><span class="op" id="6394175">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394181">sh</span><span class="op" id="6394183">.</span><span class="ident" id="6394184">Addr</span>&nbsp;<span class="op" id="6394189">=</span>&nbsp;<span class="ident" id="6394191">uint64</span><span class="op" id="6394197">(</span><span class="ident" id="6394198">sh32</span><span class="op" id="6394202">.</span><span class="ident" id="6394203">Addr</span><span class="op" id="6394207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394213">sh</span><span class="op" id="6394215">.</span><span class="ident" id="6394216">Size</span>&nbsp;<span class="op" id="6394221">=</span>&nbsp;<span class="ident" id="6394223">uint64</span><span class="op" id="6394229">(</span><span class="ident" id="6394230">sh32</span><span class="op" id="6394234">.</span><span class="ident" id="6394235">Size</span><span class="op" id="6394239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394245">sh</span><span class="op" id="6394247">.</span><span class="ident" id="6394248">Offset</span>&nbsp;<span class="op" id="6394255">=</span>&nbsp;<span class="ident" id="6394257">sh32</span><span class="op" id="6394261">.</span><span class="ident" id="6394262">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394273">sh</span><span class="op" id="6394275">.</span><span class="ident" id="6394276">Align</span>&nbsp;<span class="op" id="6394282">=</span>&nbsp;<span class="ident" id="6394284">sh32</span><span class="op" id="6394288">.</span><span class="ident" id="6394289">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394299">sh</span><span class="op" id="6394301">.</span><span class="ident" id="6394302">Reloff</span>&nbsp;<span class="op" id="6394309">=</span>&nbsp;<span class="ident" id="6394311">sh32</span><span class="op" id="6394315">.</span><span class="ident" id="6394316">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394327">sh</span><span class="op" id="6394329">.</span><span class="ident" id="6394330">Nreloc</span>&nbsp;<span class="op" id="6394337">=</span>&nbsp;<span class="ident" id="6394339">sh32</span><span class="op" id="6394343">.</span><span class="ident" id="6394344">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394355">sh</span><span class="op" id="6394357">.</span><span class="ident" id="6394358">Flags</span>&nbsp;<span class="op" id="6394364">=</span>&nbsp;<span class="ident" id="6394366">sh32</span><span class="op" id="6394370">.</span><span class="ident" id="6394371">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394381">f</span><span class="op" id="6394382">.</span><span class="ident" id="6394383">pushSection</span><span class="op" id="6394394">(</span><span class="ident" id="6394395">sh</span><span class="op" id="6394397">,</span>&nbsp;<span class="ident" id="6394399">r</span><span class="op" id="6394400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6394405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394410">case</span>&nbsp;<span class="ident" id="6394415">LoadCmdSegment64</span><span class="op" id="6394431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394436">var</span>&nbsp;<span class="ident" id="6394440">seg64</span>&nbsp;<span class="ident" id="6394446">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394459">b</span>&nbsp;<span class="op" id="6394461">:=</span>&nbsp;<span class="ident" id="6394464">bytes</span><span class="op" id="6394469">.</span><span class="ident" id="6394470">NewReader</span><span class="op" id="6394479">(</span><span class="ident" id="6394480">cmddat</span><span class="op" id="6394486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394491">if</span>&nbsp;<span class="ident" id="6394494">err</span>&nbsp;<span class="op" id="6394498">:=</span>&nbsp;<span class="ident" id="6394501">binary</span><span class="op" id="6394507">.</span><span class="ident" id="6394508">Read</span><span class="op" id="6394512">(</span><span class="ident" id="6394513">b</span><span class="op" id="6394514">,</span>&nbsp;<span class="ident" id="6394516">bo</span><span class="op" id="6394518">,</span>&nbsp;<span class="op" id="6394520">&amp;</span><span class="ident" id="6394521">seg64</span><span class="op" id="6394526">)</span><span class="op" id="6394527">;</span>&nbsp;<span class="ident" id="6394529">err</span>&nbsp;<span class="op" id="6394533">!=</span>&nbsp;<span class="ident" id="6394536">nil</span>&nbsp;<span class="op" id="6394540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394546">return</span>&nbsp;<span class="ident" id="6394553">nil</span><span class="op" id="6394556">,</span>&nbsp;<span class="ident" id="6394558">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6394565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394570">s</span>&nbsp;<span class="op" id="6394572">=</span>&nbsp;<span class="builtinfunc" id="6394574">new</span><span class="op" id="6394577">(</span><span class="ident" id="6394578">Segment</span><span class="op" id="6394585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394590">s</span><span class="op" id="6394591">.</span><span class="ident" id="6394592">LoadBytes</span>&nbsp;<span class="op" id="6394602">=</span>&nbsp;<span class="ident" id="6394604">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394614">s</span><span class="op" id="6394615">.</span><span class="ident" id="6394616">Cmd</span>&nbsp;<span class="op" id="6394620">=</span>&nbsp;<span class="ident" id="6394622">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394629">s</span><span class="op" id="6394630">.</span><span class="ident" id="6394631">Len</span>&nbsp;<span class="op" id="6394635">=</span>&nbsp;<span class="ident" id="6394637">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394644">s</span><span class="op" id="6394645">.</span><span class="ident" id="6394646">Name</span>&nbsp;<span class="op" id="6394651">=</span>&nbsp;<span class="ident" id="6394653">cstring</span><span class="op" id="6394660">(</span><span class="ident" id="6394661">seg64</span><span class="op" id="6394666">.</span><span class="ident" id="6394667">Name</span><span class="op" id="6394671">[</span><span class="num" id="6394672">0</span><span class="op" id="6394673">:</span><span class="op" id="6394674">]</span><span class="op" id="6394675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394680">s</span><span class="op" id="6394681">.</span><span class="ident" id="6394682">Addr</span>&nbsp;<span class="op" id="6394687">=</span>&nbsp;<span class="ident" id="6394689">seg64</span><span class="op" id="6394694">.</span><span class="ident" id="6394695">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394703">s</span><span class="op" id="6394704">.</span><span class="ident" id="6394705">Memsz</span>&nbsp;<span class="op" id="6394711">=</span>&nbsp;<span class="ident" id="6394713">seg64</span><span class="op" id="6394718">.</span><span class="ident" id="6394719">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394728">s</span><span class="op" id="6394729">.</span><span class="ident" id="6394730">Offset</span>&nbsp;<span class="op" id="6394737">=</span>&nbsp;<span class="ident" id="6394739">seg64</span><span class="op" id="6394744">.</span><span class="ident" id="6394745">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394755">s</span><span class="op" id="6394756">.</span><span class="ident" id="6394757">Filesz</span>&nbsp;<span class="op" id="6394764">=</span>&nbsp;<span class="ident" id="6394766">seg64</span><span class="op" id="6394771">.</span><span class="ident" id="6394772">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394782">s</span><span class="op" id="6394783">.</span><span class="ident" id="6394784">Maxprot</span>&nbsp;<span class="op" id="6394792">=</span>&nbsp;<span class="ident" id="6394794">seg64</span><span class="op" id="6394799">.</span><span class="ident" id="6394800">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394811">s</span><span class="op" id="6394812">.</span><span class="ident" id="6394813">Prot</span>&nbsp;<span class="op" id="6394818">=</span>&nbsp;<span class="ident" id="6394820">seg64</span><span class="op" id="6394825">.</span><span class="ident" id="6394826">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394834">s</span><span class="op" id="6394835">.</span><span class="ident" id="6394836">Nsect</span>&nbsp;<span class="op" id="6394842">=</span>&nbsp;<span class="ident" id="6394844">seg64</span><span class="op" id="6394849">.</span><span class="ident" id="6394850">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394859">s</span><span class="op" id="6394860">.</span><span class="ident" id="6394861">Flag</span>&nbsp;<span class="op" id="6394866">=</span>&nbsp;<span class="ident" id="6394868">seg64</span><span class="op" id="6394873">.</span><span class="ident" id="6394874">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6394882">f</span><span class="op" id="6394883">.</span><span class="ident" id="6394884">Loads</span><span class="op" id="6394889">[</span><span class="ident" id="6394890">i</span><span class="op" id="6394891">]</span>&nbsp;<span class="op" id="6394893">=</span>&nbsp;<span class="ident" id="6394895">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394900">for</span>&nbsp;<span class="ident" id="6394904">i</span>&nbsp;<span class="op" id="6394906">:=</span>&nbsp;<span class="num" id="6394909">0</span><span class="op" id="6394910">;</span>&nbsp;<span class="ident" id="6394912">i</span>&nbsp;<span class="op" id="6394914">&lt;</span>&nbsp;<span class="builtintype" id="6394916">int</span><span class="op" id="6394919">(</span><span class="ident" id="6394920">s</span><span class="op" id="6394921">.</span><span class="ident" id="6394922">Nsect</span><span class="op" id="6394927">)</span><span class="op" id="6394928">;</span>&nbsp;<span class="ident" id="6394930">i</span><span class="op" id="6394931">++</span>&nbsp;<span class="op" id="6394934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394940">var</span>&nbsp;<span class="ident" id="6394944">sh64</span>&nbsp;<span class="ident" id="6394949">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6394963">if</span>&nbsp;<span class="ident" id="6394966">err</span>&nbsp;<span class="op" id="6394970">:=</span>&nbsp;<span class="ident" id="6394973">binary</span><span class="op" id="6394979">.</span><span class="ident" id="6394980">Read</span><span class="op" id="6394984">(</span><span class="ident" id="6394985">b</span><span class="op" id="6394986">,</span>&nbsp;<span class="ident" id="6394988">bo</span><span class="op" id="6394990">,</span>&nbsp;<span class="op" id="6394992">&amp;</span><span class="ident" id="6394993">sh64</span><span class="op" id="6394997">)</span><span class="op" id="6394998">;</span>&nbsp;<span class="ident" id="6395000">err</span>&nbsp;<span class="op" id="6395004">!=</span>&nbsp;<span class="ident" id="6395007">nil</span>&nbsp;<span class="op" id="6395011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395018">return</span>&nbsp;<span class="ident" id="6395025">nil</span><span class="op" id="6395028">,</span>&nbsp;<span class="ident" id="6395030">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395038">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395044">sh</span>&nbsp;<span class="op" id="6395047">:=</span>&nbsp;<span class="builtinfunc" id="6395050">new</span><span class="op" id="6395053">(</span><span class="ident" id="6395054">Section</span><span class="op" id="6395061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395067">sh</span><span class="op" id="6395069">.</span><span class="ident" id="6395070">Name</span>&nbsp;<span class="op" id="6395075">=</span>&nbsp;<span class="ident" id="6395077">cstring</span><span class="op" id="6395084">(</span><span class="ident" id="6395085">sh64</span><span class="op" id="6395089">.</span><span class="ident" id="6395090">Name</span><span class="op" id="6395094">[</span><span class="num" id="6395095">0</span><span class="op" id="6395096">:</span><span class="op" id="6395097">]</span><span class="op" id="6395098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395104">sh</span><span class="op" id="6395106">.</span><span class="ident" id="6395107">Seg</span>&nbsp;<span class="op" id="6395111">=</span>&nbsp;<span class="ident" id="6395113">cstring</span><span class="op" id="6395120">(</span><span class="ident" id="6395121">sh64</span><span class="op" id="6395125">.</span><span class="ident" id="6395126">Seg</span><span class="op" id="6395129">[</span><span class="num" id="6395130">0</span><span class="op" id="6395131">:</span><span class="op" id="6395132">]</span><span class="op" id="6395133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395139">sh</span><span class="op" id="6395141">.</span><span class="ident" id="6395142">Addr</span>&nbsp;<span class="op" id="6395147">=</span>&nbsp;<span class="ident" id="6395149">sh64</span><span class="op" id="6395153">.</span><span class="ident" id="6395154">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395163">sh</span><span class="op" id="6395165">.</span><span class="ident" id="6395166">Size</span>&nbsp;<span class="op" id="6395171">=</span>&nbsp;<span class="ident" id="6395173">sh64</span><span class="op" id="6395177">.</span><span class="ident" id="6395178">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395187">sh</span><span class="op" id="6395189">.</span><span class="ident" id="6395190">Offset</span>&nbsp;<span class="op" id="6395197">=</span>&nbsp;<span class="ident" id="6395199">sh64</span><span class="op" id="6395203">.</span><span class="ident" id="6395204">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395215">sh</span><span class="op" id="6395217">.</span><span class="ident" id="6395218">Align</span>&nbsp;<span class="op" id="6395224">=</span>&nbsp;<span class="ident" id="6395226">sh64</span><span class="op" id="6395230">.</span><span class="ident" id="6395231">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395241">sh</span><span class="op" id="6395243">.</span><span class="ident" id="6395244">Reloff</span>&nbsp;<span class="op" id="6395251">=</span>&nbsp;<span class="ident" id="6395253">sh64</span><span class="op" id="6395257">.</span><span class="ident" id="6395258">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395269">sh</span><span class="op" id="6395271">.</span><span class="ident" id="6395272">Nreloc</span>&nbsp;<span class="op" id="6395279">=</span>&nbsp;<span class="ident" id="6395281">sh64</span><span class="op" id="6395285">.</span><span class="ident" id="6395286">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395297">sh</span><span class="op" id="6395299">.</span><span class="ident" id="6395300">Flags</span>&nbsp;<span class="op" id="6395306">=</span>&nbsp;<span class="ident" id="6395308">sh64</span><span class="op" id="6395312">.</span><span class="ident" id="6395313">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395323">f</span><span class="op" id="6395324">.</span><span class="ident" id="6395325">pushSection</span><span class="op" id="6395336">(</span><span class="ident" id="6395337">sh</span><span class="op" id="6395339">,</span>&nbsp;<span class="ident" id="6395341">r</span><span class="op" id="6395342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395355">if</span>&nbsp;<span class="ident" id="6395358">s</span>&nbsp;<span class="op" id="6395360">!=</span>&nbsp;<span class="ident" id="6395363">nil</span>&nbsp;<span class="op" id="6395367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395372">s</span><span class="op" id="6395373">.</span><span class="ident" id="6395374">sr</span>&nbsp;<span class="op" id="6395377">=</span>&nbsp;<span class="ident" id="6395379">io</span><span class="op" id="6395381">.</span><span class="ident" id="6395382">NewSectionReader</span><span class="op" id="6395398">(</span><span class="ident" id="6395399">r</span><span class="op" id="6395400">,</span>&nbsp;<span class="ident" id="6395402">int64</span><span class="op" id="6395407">(</span><span class="ident" id="6395408">s</span><span class="op" id="6395409">.</span><span class="ident" id="6395410">Offset</span><span class="op" id="6395416">)</span><span class="op" id="6395417">,</span>&nbsp;<span class="ident" id="6395419">int64</span><span class="op" id="6395424">(</span><span class="ident" id="6395425">s</span><span class="op" id="6395426">.</span><span class="ident" id="6395427">Filesz</span><span class="op" id="6395433">)</span><span class="op" id="6395434">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395439">s</span><span class="op" id="6395440">.</span><span class="ident" id="6395441">ReaderAt</span>&nbsp;<span class="op" id="6395450">=</span>&nbsp;<span class="ident" id="6395452">s</span><span class="op" id="6395453">.</span><span class="ident" id="6395454">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395465">return</span>&nbsp;<span class="ident" id="6395472">f</span><span class="op" id="6395473">,</span>&nbsp;<span class="ident" id="6395475">nil</span><br>
<span class="lineno"></span><span class="op" id="6395479">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6395482">func</span>&nbsp;<span class="op" id="6395487">(</span><span class="ident" id="6395488">f</span>&nbsp;<span class="op" id="6395490">*</span><span class="ident" id="6395491">File</span><span class="op" id="6395495">)</span>&nbsp;<span class="ident" id="6395497">parseSymtab</span><span class="op" id="6395508">(</span><span class="ident" id="6395509">symdat</span><span class="op" id="6395515">,</span>&nbsp;<span class="ident" id="6395517">strtab</span><span class="op" id="6395523">,</span>&nbsp;<span class="ident" id="6395525">cmddat</span>&nbsp;<span class="op" id="6395532">[</span><span class="op" id="6395533">]</span><span class="builtintype" id="6395534">byte</span><span class="op" id="6395538">,</span>&nbsp;<span class="ident" id="6395540">hdr</span>&nbsp;<span class="op" id="6395544">*</span><span class="ident" id="6395545">SymtabCmd</span><span class="op" id="6395554">,</span>&nbsp;<span class="ident" id="6395556">offset</span>&nbsp;<span class="ident" id="6395563">int64</span><span class="op" id="6395568">)</span>&nbsp;<span class="op" id="6395570">(</span><span class="op" id="6395571">*</span><span class="ident" id="6395572">Symtab</span><span class="op" id="6395578">,</span>&nbsp;<span class="builtintype" id="6395580">error</span><span class="op" id="6395585">)</span>&nbsp;<span class="op" id="6395587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395590">bo</span>&nbsp;<span class="op" id="6395593">:=</span>&nbsp;<span class="ident" id="6395596">f</span><span class="op" id="6395597">.</span><span class="ident" id="6395598">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395609">symtab</span>&nbsp;<span class="op" id="6395616">:=</span>&nbsp;<span class="builtinfunc" id="6395619">make</span><span class="op" id="6395623">(</span><span class="op" id="6395624">[</span><span class="op" id="6395625">]</span><span class="ident" id="6395626">Symbol</span><span class="op" id="6395632">,</span>&nbsp;<span class="ident" id="6395634">hdr</span><span class="op" id="6395637">.</span><span class="ident" id="6395638">Nsyms</span><span class="op" id="6395643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395646">b</span>&nbsp;<span class="op" id="6395648">:=</span>&nbsp;<span class="ident" id="6395651">bytes</span><span class="op" id="6395656">.</span><span class="ident" id="6395657">NewReader</span><span class="op" id="6395666">(</span><span class="ident" id="6395667">symdat</span><span class="op" id="6395673">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395676">for</span>&nbsp;<span class="ident" id="6395680">i</span>&nbsp;<span class="op" id="6395682">:=</span>&nbsp;<span class="keyword" id="6395685">range</span>&nbsp;<span class="ident" id="6395691">symtab</span>&nbsp;<span class="op" id="6395698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395702">var</span>&nbsp;<span class="ident" id="6395706">n</span>&nbsp;<span class="ident" id="6395708">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395718">if</span>&nbsp;<span class="ident" id="6395721">f</span><span class="op" id="6395722">.</span><span class="ident" id="6395723">Magic</span>&nbsp;<span class="op" id="6395729">==</span>&nbsp;<span class="ident" id="6395732">Magic64</span>&nbsp;<span class="op" id="6395740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395745">if</span>&nbsp;<span class="ident" id="6395748">err</span>&nbsp;<span class="op" id="6395752">:=</span>&nbsp;<span class="ident" id="6395755">binary</span><span class="op" id="6395761">.</span><span class="ident" id="6395762">Read</span><span class="op" id="6395766">(</span><span class="ident" id="6395767">b</span><span class="op" id="6395768">,</span>&nbsp;<span class="ident" id="6395770">bo</span><span class="op" id="6395772">,</span>&nbsp;<span class="op" id="6395774">&amp;</span><span class="ident" id="6395775">n</span><span class="op" id="6395776">)</span><span class="op" id="6395777">;</span>&nbsp;<span class="ident" id="6395779">err</span>&nbsp;<span class="op" id="6395783">!=</span>&nbsp;<span class="ident" id="6395786">nil</span>&nbsp;<span class="op" id="6395790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395796">return</span>&nbsp;<span class="ident" id="6395803">nil</span><span class="op" id="6395806">,</span>&nbsp;<span class="ident" id="6395808">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395819">}</span>&nbsp;<span class="keyword" id="6395821">else</span>&nbsp;<span class="op" id="6395826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395831">var</span>&nbsp;<span class="ident" id="6395835">n32</span>&nbsp;<span class="ident" id="6395839">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395850">if</span>&nbsp;<span class="ident" id="6395853">err</span>&nbsp;<span class="op" id="6395857">:=</span>&nbsp;<span class="ident" id="6395860">binary</span><span class="op" id="6395866">.</span><span class="ident" id="6395867">Read</span><span class="op" id="6395871">(</span><span class="ident" id="6395872">b</span><span class="op" id="6395873">,</span>&nbsp;<span class="ident" id="6395875">bo</span><span class="op" id="6395877">,</span>&nbsp;<span class="op" id="6395879">&amp;</span><span class="ident" id="6395880">n32</span><span class="op" id="6395883">)</span><span class="op" id="6395884">;</span>&nbsp;<span class="ident" id="6395886">err</span>&nbsp;<span class="op" id="6395890">!=</span>&nbsp;<span class="ident" id="6395893">nil</span>&nbsp;<span class="op" id="6395897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6395903">return</span>&nbsp;<span class="ident" id="6395910">nil</span><span class="op" id="6395913">,</span>&nbsp;<span class="ident" id="6395915">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6395922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395927">n</span><span class="op" id="6395928">.</span><span class="ident" id="6395929">Name</span>&nbsp;<span class="op" id="6395934">=</span>&nbsp;<span class="ident" id="6395936">n32</span><span class="op" id="6395939">.</span><span class="ident" id="6395940">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395948">n</span><span class="op" id="6395949">.</span><span class="ident" id="6395950">Type</span>&nbsp;<span class="op" id="6395955">=</span>&nbsp;<span class="ident" id="6395957">n32</span><span class="op" id="6395960">.</span><span class="ident" id="6395961">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395969">n</span><span class="op" id="6395970">.</span><span class="ident" id="6395971">Sect</span>&nbsp;<span class="op" id="6395976">=</span>&nbsp;<span class="ident" id="6395978">n32</span><span class="op" id="6395981">.</span><span class="ident" id="6395982">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6395990">n</span><span class="op" id="6395991">.</span><span class="ident" id="6395992">Desc</span>&nbsp;<span class="op" id="6395997">=</span>&nbsp;<span class="ident" id="6395999">n32</span><span class="op" id="6396002">.</span><span class="ident" id="6396003">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396011">n</span><span class="op" id="6396012">.</span><span class="ident" id="6396013">Value</span>&nbsp;<span class="op" id="6396019">=</span>&nbsp;<span class="ident" id="6396021">uint64</span><span class="op" id="6396027">(</span><span class="ident" id="6396028">n32</span><span class="op" id="6396031">.</span><span class="ident" id="6396032">Value</span><span class="op" id="6396037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396045">sym</span>&nbsp;<span class="op" id="6396049">:=</span>&nbsp;<span class="op" id="6396052">&amp;</span><span class="ident" id="6396053">symtab</span><span class="op" id="6396059">[</span><span class="ident" id="6396060">i</span><span class="op" id="6396061">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396065">if</span>&nbsp;<span class="ident" id="6396068">n</span><span class="op" id="6396069">.</span><span class="ident" id="6396070">Name</span>&nbsp;<span class="op" id="6396075">&gt;=</span>&nbsp;<span class="builtintype" id="6396078">uint32</span><span class="op" id="6396084">(</span><span class="builtinfunc" id="6396085">len</span><span class="op" id="6396088">(</span><span class="ident" id="6396089">strtab</span><span class="op" id="6396095">)</span><span class="op" id="6396096">)</span>&nbsp;<span class="op" id="6396098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396103">return</span>&nbsp;<span class="ident" id="6396110">nil</span><span class="op" id="6396113">,</span>&nbsp;<span class="op" id="6396115">&amp;</span><span class="ident" id="6396116">FormatError</span><span class="op" id="6396127">{</span><span class="ident" id="6396128">offset</span><span class="op" id="6396134">,</span>&nbsp;<span class="string" id="6396136">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6396166">,</span>&nbsp;<span class="ident" id="6396168">n</span><span class="op" id="6396169">.</span><span class="ident" id="6396170">Name</span><span class="op" id="6396174">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396182">sym</span><span class="op" id="6396185">.</span><span class="ident" id="6396186">Name</span>&nbsp;<span class="op" id="6396191">=</span>&nbsp;<span class="ident" id="6396193">cstring</span><span class="op" id="6396200">(</span><span class="ident" id="6396201">strtab</span><span class="op" id="6396207">[</span><span class="ident" id="6396208">n</span><span class="op" id="6396209">.</span><span class="ident" id="6396210">Name</span><span class="op" id="6396214">:</span><span class="op" id="6396215">]</span><span class="op" id="6396216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396220">sym</span><span class="op" id="6396223">.</span><span class="ident" id="6396224">Type</span>&nbsp;<span class="op" id="6396229">=</span>&nbsp;<span class="ident" id="6396231">n</span><span class="op" id="6396232">.</span><span class="ident" id="6396233">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396240">sym</span><span class="op" id="6396243">.</span><span class="ident" id="6396244">Sect</span>&nbsp;<span class="op" id="6396249">=</span>&nbsp;<span class="ident" id="6396251">n</span><span class="op" id="6396252">.</span><span class="ident" id="6396253">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396260">sym</span><span class="op" id="6396263">.</span><span class="ident" id="6396264">Desc</span>&nbsp;<span class="op" id="6396269">=</span>&nbsp;<span class="ident" id="6396271">n</span><span class="op" id="6396272">.</span><span class="ident" id="6396273">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396280">sym</span><span class="op" id="6396283">.</span><span class="ident" id="6396284">Value</span>&nbsp;<span class="op" id="6396290">=</span>&nbsp;<span class="ident" id="6396292">n</span><span class="op" id="6396293">.</span><span class="ident" id="6396294">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396304">st</span>&nbsp;<span class="op" id="6396307">:=</span>&nbsp;<span class="builtinfunc" id="6396310">new</span><span class="op" id="6396313">(</span><span class="ident" id="6396314">Symtab</span><span class="op" id="6396320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396323">st</span><span class="op" id="6396325">.</span><span class="ident" id="6396326">LoadBytes</span>&nbsp;<span class="op" id="6396336">=</span>&nbsp;<span class="ident" id="6396338">LoadBytes</span><span class="op" id="6396347">(</span><span class="ident" id="6396348">cmddat</span><span class="op" id="6396354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396357">st</span><span class="op" id="6396359">.</span><span class="ident" id="6396360">Syms</span>&nbsp;<span class="op" id="6396365">=</span>&nbsp;<span class="ident" id="6396367">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396375">return</span>&nbsp;<span class="ident" id="6396382">st</span><span class="op" id="6396384">,</span>&nbsp;<span class="ident" id="6396386">nil</span><br>
<span class="lineno"></span><span class="op" id="6396390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6396393">func</span>&nbsp;<span class="op" id="6396398">(</span><span class="ident" id="6396399">f</span>&nbsp;<span class="op" id="6396401">*</span><span class="ident" id="6396402">File</span><span class="op" id="6396406">)</span>&nbsp;<span class="ident" id="6396408">pushSection</span><span class="op" id="6396419">(</span><span class="ident" id="6396420">sh</span>&nbsp;<span class="op" id="6396423">*</span><span class="ident" id="6396424">Section</span><span class="op" id="6396431">,</span>&nbsp;<span class="ident" id="6396433">r</span>&nbsp;<span class="ident" id="6396435">io</span><span class="op" id="6396437">.</span><span class="ident" id="6396438">ReaderAt</span><span class="op" id="6396446">)</span>&nbsp;<span class="op" id="6396448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396451">f</span><span class="op" id="6396452">.</span><span class="ident" id="6396453">Sections</span>&nbsp;<span class="op" id="6396462">=</span>&nbsp;<span class="builtinfunc" id="6396464">append</span><span class="op" id="6396470">(</span><span class="ident" id="6396471">f</span><span class="op" id="6396472">.</span><span class="ident" id="6396473">Sections</span><span class="op" id="6396481">,</span>&nbsp;<span class="ident" id="6396483">sh</span><span class="op" id="6396485">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396488">sh</span><span class="op" id="6396490">.</span><span class="ident" id="6396491">sr</span>&nbsp;<span class="op" id="6396494">=</span>&nbsp;<span class="ident" id="6396496">io</span><span class="op" id="6396498">.</span><span class="ident" id="6396499">NewSectionReader</span><span class="op" id="6396515">(</span><span class="ident" id="6396516">r</span><span class="op" id="6396517">,</span>&nbsp;<span class="ident" id="6396519">int64</span><span class="op" id="6396524">(</span><span class="ident" id="6396525">sh</span><span class="op" id="6396527">.</span><span class="ident" id="6396528">Offset</span><span class="op" id="6396534">)</span><span class="op" id="6396535">,</span>&nbsp;<span class="ident" id="6396537">int64</span><span class="op" id="6396542">(</span><span class="ident" id="6396543">sh</span><span class="op" id="6396545">.</span><span class="ident" id="6396546">Size</span><span class="op" id="6396550">)</span><span class="op" id="6396551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6396554">sh</span><span class="op" id="6396556">.</span><span class="ident" id="6396557">ReaderAt</span>&nbsp;<span class="op" id="6396566">=</span>&nbsp;<span class="ident" id="6396568">sh</span><span class="op" id="6396570">.</span><span class="ident" id="6396571">sr</span><br>
<span class="lineno"></span><span class="op" id="6396574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6396577">func</span>&nbsp;<span class="ident" id="6396582">cstring</span><span class="op" id="6396589">(</span><span class="ident" id="6396590">b</span>&nbsp;<span class="op" id="6396592">[</span><span class="op" id="6396593">]</span><span class="builtintype" id="6396594">byte</span><span class="op" id="6396598">)</span>&nbsp;<span class="builtintype" id="6396600">string</span>&nbsp;<span class="op" id="6396607">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396610">var</span>&nbsp;<span class="ident" id="6396614">i</span>&nbsp;<span class="builtintype" id="6396616">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396621">for</span>&nbsp;<span class="ident" id="6396625">i</span>&nbsp;<span class="op" id="6396627">=</span>&nbsp;<span class="num" id="6396629">0</span><span class="op" id="6396630">;</span>&nbsp;<span class="ident" id="6396632">i</span>&nbsp;<span class="op" id="6396634">&lt;</span>&nbsp;<span class="builtinfunc" id="6396636">len</span><span class="op" id="6396639">(</span><span class="ident" id="6396640">b</span><span class="op" id="6396641">)</span>&nbsp;<span class="op" id="6396643">&amp;&amp;</span>&nbsp;<span class="ident" id="6396646">b</span><span class="op" id="6396647">[</span><span class="ident" id="6396648">i</span><span class="op" id="6396649">]</span>&nbsp;<span class="op" id="6396651">!=</span>&nbsp;<span class="num" id="6396654">0</span><span class="op" id="6396655">;</span>&nbsp;<span class="ident" id="6396657">i</span><span class="op" id="6396658">++</span>&nbsp;<span class="op" id="6396661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396667">return</span>&nbsp;<span class="builtintype" id="6396674">string</span><span class="op" id="6396680">(</span><span class="ident" id="6396681">b</span><span class="op" id="6396682">[</span><span class="num" id="6396683">0</span><span class="op" id="6396684">:</span><span class="ident" id="6396685">i</span><span class="op" id="6396686">]</span><span class="op" id="6396687">)</span><br>
<span class="lineno"></span><span class="op" id="6396689">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6396692">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6396784">func</span>&nbsp;<span class="op" id="6396789">(</span><span class="ident" id="6396790">f</span>&nbsp;<span class="op" id="6396792">*</span><span class="ident" id="6396793">File</span><span class="op" id="6396797">)</span>&nbsp;<span class="ident" id="6396799">Segment</span><span class="op" id="6396806">(</span><span class="ident" id="6396807">name</span>&nbsp;<span class="builtintype" id="6396812">string</span><span class="op" id="6396818">)</span>&nbsp;<span class="op" id="6396820">*</span><span class="ident" id="6396821">Segment</span>&nbsp;<span class="op" id="6396829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396832">for</span>&nbsp;<span class="ident" id="6396836">_</span><span class="op" id="6396837">,</span>&nbsp;<span class="ident" id="6396839">l</span>&nbsp;<span class="op" id="6396841">:=</span>&nbsp;<span class="keyword" id="6396844">range</span>&nbsp;<span class="ident" id="6396850">f</span><span class="op" id="6396851">.</span><span class="ident" id="6396852">Loads</span>&nbsp;<span class="op" id="6396858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396862">if</span>&nbsp;<span class="ident" id="6396865">s</span><span class="op" id="6396866">,</span>&nbsp;<span class="ident" id="6396868">ok</span>&nbsp;<span class="op" id="6396871">:=</span>&nbsp;<span class="ident" id="6396874">l</span><span class="op" id="6396875">.</span><span class="op" id="6396876">(</span><span class="op" id="6396877">*</span><span class="ident" id="6396878">Segment</span><span class="op" id="6396885">)</span><span class="op" id="6396886">;</span>&nbsp;<span class="ident" id="6396888">ok</span>&nbsp;<span class="op" id="6396891">&amp;&amp;</span>&nbsp;<span class="ident" id="6396894">s</span><span class="op" id="6396895">.</span><span class="ident" id="6396896">Name</span>&nbsp;<span class="op" id="6396901">==</span>&nbsp;<span class="ident" id="6396904">name</span>&nbsp;<span class="op" id="6396909">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396914">return</span>&nbsp;<span class="ident" id="6396921">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6396928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6396931">return</span>&nbsp;<span class="ident" id="6396938">nil</span><br>
<span class="lineno"></span><span class="op" id="6396942">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6396945">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6397021">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6397040">func</span>&nbsp;<span class="op" id="6397045">(</span><span class="ident" id="6397046">f</span>&nbsp;<span class="op" id="6397048">*</span><span class="ident" id="6397049">File</span><span class="op" id="6397053">)</span>&nbsp;<span class="ident" id="6397055">Section</span><span class="op" id="6397062">(</span><span class="ident" id="6397063">name</span>&nbsp;<span class="builtintype" id="6397068">string</span><span class="op" id="6397074">)</span>&nbsp;<span class="op" id="6397076">*</span><span class="ident" id="6397077">Section</span>&nbsp;<span class="op" id="6397085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397088">for</span>&nbsp;<span class="ident" id="6397092">_</span><span class="op" id="6397093">,</span>&nbsp;<span class="ident" id="6397095">s</span>&nbsp;<span class="op" id="6397097">:=</span>&nbsp;<span class="keyword" id="6397100">range</span>&nbsp;<span class="ident" id="6397106">f</span><span class="op" id="6397107">.</span><span class="ident" id="6397108">Sections</span>&nbsp;<span class="op" id="6397117">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397121">if</span>&nbsp;<span class="ident" id="6397124">s</span><span class="op" id="6397125">.</span><span class="ident" id="6397126">Name</span>&nbsp;<span class="op" id="6397131">==</span>&nbsp;<span class="ident" id="6397134">name</span>&nbsp;<span class="op" id="6397139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397144">return</span>&nbsp;<span class="ident" id="6397151">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397161">return</span>&nbsp;<span class="ident" id="6397168">nil</span><br>
<span class="lineno">470</span><span class="op" id="6397172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6397175">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6397241">func</span>&nbsp;<span class="op" id="6397246">(</span><span class="ident" id="6397247">f</span>&nbsp;<span class="op" id="6397249">*</span><span class="ident" id="6397250">File</span><span class="op" id="6397254">)</span>&nbsp;<span class="ident" id="6397256">DWARF</span><span class="op" id="6397261">(</span><span class="op" id="6397262">)</span>&nbsp;<span class="op" id="6397264">(</span><span class="op" id="6397265">*</span><span class="ident" id="6397266">dwarf</span><span class="op" id="6397271">.</span><span class="ident" id="6397272">Data</span><span class="op" id="6397276">,</span>&nbsp;<span class="builtintype" id="6397278">error</span><span class="op" id="6397283">)</span>&nbsp;<span class="op" id="6397285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6397288">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6397339">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6397394">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397453">var</span>&nbsp;<span class="ident" id="6397457">names</span>&nbsp;<span class="op" id="6397463">=</span>&nbsp;<span class="op" id="6397465">[</span><span class="op" id="6397466">...</span><span class="op" id="6397469">]</span><span class="builtintype" id="6397470">string</span><span class="op" id="6397476">{</span><span class="string" id="6397477">&#34;abbrev&#34;</span><span class="op" id="6397485">,</span>&nbsp;<span class="string" id="6397487">&#34;info&#34;</span><span class="op" id="6397493">,</span>&nbsp;<span class="string" id="6397495">&#34;str&#34;</span><span class="op" id="6397500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397503">var</span>&nbsp;<span class="ident" id="6397507">dat</span>&nbsp;<span class="op" id="6397511">[</span><span class="builtinfunc" id="6397512">len</span><span class="op" id="6397515">(</span><span class="ident" id="6397516">names</span><span class="op" id="6397521">)</span><span class="op" id="6397522">]</span><span class="op" id="6397523">[</span><span class="op" id="6397524">]</span><span class="builtintype" id="6397525">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397531">for</span>&nbsp;<span class="ident" id="6397535">i</span><span class="op" id="6397536">,</span>&nbsp;<span class="ident" id="6397538">name</span>&nbsp;<span class="op" id="6397543">:=</span>&nbsp;<span class="keyword" id="6397546">range</span>&nbsp;<span class="ident" id="6397552">names</span>&nbsp;<span class="op" id="6397558">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397562">name</span>&nbsp;<span class="op" id="6397567">=</span>&nbsp;<span class="string" id="6397569">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6397580">+</span>&nbsp;<span class="ident" id="6397582">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397589">s</span>&nbsp;<span class="op" id="6397591">:=</span>&nbsp;<span class="ident" id="6397594">f</span><span class="op" id="6397595">.</span><span class="ident" id="6397596">Section</span><span class="op" id="6397603">(</span><span class="ident" id="6397604">name</span><span class="op" id="6397608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397612">if</span>&nbsp;<span class="ident" id="6397615">s</span>&nbsp;<span class="op" id="6397617">==</span>&nbsp;<span class="ident" id="6397620">nil</span>&nbsp;<span class="op" id="6397624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397629">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397640">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397644">b</span><span class="op" id="6397645">,</span>&nbsp;<span class="ident" id="6397647">err</span>&nbsp;<span class="op" id="6397651">:=</span>&nbsp;<span class="ident" id="6397654">s</span><span class="op" id="6397655">.</span><span class="ident" id="6397656">Data</span><span class="op" id="6397660">(</span><span class="op" id="6397661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397665">if</span>&nbsp;<span class="ident" id="6397668">err</span>&nbsp;<span class="op" id="6397672">!=</span>&nbsp;<span class="ident" id="6397675">nil</span>&nbsp;<span class="op" id="6397679">&amp;&amp;</span>&nbsp;<span class="ident" id="6397682">uint64</span><span class="op" id="6397688">(</span><span class="builtinfunc" id="6397689">len</span><span class="op" id="6397692">(</span><span class="ident" id="6397693">b</span><span class="op" id="6397694">)</span><span class="op" id="6397695">)</span>&nbsp;<span class="op" id="6397697">&lt;</span>&nbsp;<span class="ident" id="6397699">s</span><span class="op" id="6397700">.</span><span class="ident" id="6397701">Size</span>&nbsp;<span class="op" id="6397706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397711">return</span>&nbsp;<span class="ident" id="6397718">nil</span><span class="op" id="6397721">,</span>&nbsp;<span class="ident" id="6397723">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397733">dat</span><span class="op" id="6397736">[</span><span class="ident" id="6397737">i</span><span class="op" id="6397738">]</span>&nbsp;<span class="op" id="6397740">=</span>&nbsp;<span class="ident" id="6397742">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6397745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6397749">abbrev</span><span class="op" id="6397755">,</span>&nbsp;<span class="ident" id="6397757">info</span><span class="op" id="6397761">,</span>&nbsp;<span class="ident" id="6397763">str</span>&nbsp;<span class="op" id="6397767">:=</span>&nbsp;<span class="ident" id="6397770">dat</span><span class="op" id="6397773">[</span><span class="num" id="6397774">0</span><span class="op" id="6397775">]</span><span class="op" id="6397776">,</span>&nbsp;<span class="ident" id="6397778">dat</span><span class="op" id="6397781">[</span><span class="num" id="6397782">1</span><span class="op" id="6397783">]</span><span class="op" id="6397784">,</span>&nbsp;<span class="ident" id="6397786">dat</span><span class="op" id="6397789">[</span><span class="num" id="6397790">2</span><span class="op" id="6397791">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6397794">return</span>&nbsp;<span class="ident" id="6397801">dwarf</span><span class="op" id="6397806">.</span><span class="ident" id="6397807">New</span><span class="op" id="6397810">(</span><span class="ident" id="6397811">abbrev</span><span class="op" id="6397817">,</span>&nbsp;<span class="ident" id="6397819">nil</span><span class="op" id="6397822">,</span>&nbsp;<span class="ident" id="6397824">nil</span><span class="op" id="6397827">,</span>&nbsp;<span class="ident" id="6397829">info</span><span class="op" id="6397833">,</span>&nbsp;<span class="ident" id="6397835">nil</span><span class="op" id="6397838">,</span>&nbsp;<span class="ident" id="6397840">nil</span><span class="op" id="6397843">,</span>&nbsp;<span class="ident" id="6397845">nil</span><span class="op" id="6397848">,</span>&nbsp;<span class="ident" id="6397850">str</span><span class="op" id="6397853">)</span><br>
<span class="lineno"></span><span class="op" id="6397855">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6397858">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6397910">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6397965">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6398019">func</span>&nbsp;<span class="op" id="6398024">(</span><span class="ident" id="6398025">f</span>&nbsp;<span class="op" id="6398027">*</span><span class="ident" id="6398028">File</span><span class="op" id="6398032">)</span>&nbsp;<span class="ident" id="6398034">ImportedSymbols</span><span class="op" id="6398049">(</span><span class="op" id="6398050">)</span>&nbsp;<span class="op" id="6398052">(</span><span class="op" id="6398053">[</span><span class="op" id="6398054">]</span><span class="builtintype" id="6398055">string</span><span class="op" id="6398061">,</span>&nbsp;<span class="builtintype" id="6398063">error</span><span class="op" id="6398068">)</span>&nbsp;<span class="op" id="6398070">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398073">if</span>&nbsp;<span class="ident" id="6398076">f</span><span class="op" id="6398077">.</span><span class="ident" id="6398078">Dysymtab</span>&nbsp;<span class="op" id="6398087">==</span>&nbsp;<span class="ident" id="6398090">nil</span>&nbsp;<span class="op" id="6398094">||</span>&nbsp;<span class="ident" id="6398097">f</span><span class="op" id="6398098">.</span><span class="ident" id="6398099">Symtab</span>&nbsp;<span class="op" id="6398106">==</span>&nbsp;<span class="ident" id="6398109">nil</span>&nbsp;<span class="op" id="6398113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398117">return</span>&nbsp;<span class="ident" id="6398124">nil</span><span class="op" id="6398127">,</span>&nbsp;<span class="op" id="6398129">&amp;</span><span class="ident" id="6398130">FormatError</span><span class="op" id="6398141">{</span><span class="num" id="6398142">0</span><span class="op" id="6398143">,</span>&nbsp;<span class="string" id="6398145">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6398167">,</span>&nbsp;<span class="ident" id="6398169">nil</span><span class="op" id="6398172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6398175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6398179">st</span>&nbsp;<span class="op" id="6398182">:=</span>&nbsp;<span class="ident" id="6398185">f</span><span class="op" id="6398186">.</span><span class="ident" id="6398187">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6398195">dt</span>&nbsp;<span class="op" id="6398198">:=</span>&nbsp;<span class="ident" id="6398201">f</span><span class="op" id="6398202">.</span><span class="ident" id="6398203">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398213">var</span>&nbsp;<span class="ident" id="6398217">all</span>&nbsp;<span class="op" id="6398221">[</span><span class="op" id="6398222">]</span><span class="builtintype" id="6398223">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398231">for</span>&nbsp;<span class="ident" id="6398235">_</span><span class="op" id="6398236">,</span>&nbsp;<span class="ident" id="6398238">s</span>&nbsp;<span class="op" id="6398240">:=</span>&nbsp;<span class="keyword" id="6398243">range</span>&nbsp;<span class="ident" id="6398249">st</span><span class="op" id="6398251">.</span><span class="ident" id="6398252">Syms</span><span class="op" id="6398256">[</span><span class="ident" id="6398257">dt</span><span class="op" id="6398259">.</span><span class="ident" id="6398260">Iundefsym</span>&nbsp;<span class="op" id="6398270">:</span>&nbsp;<span class="ident" id="6398272">dt</span><span class="op" id="6398274">.</span><span class="ident" id="6398275">Iundefsym</span><span class="op" id="6398284">+</span><span class="ident" id="6398285">dt</span><span class="op" id="6398287">.</span><span class="ident" id="6398288">Nundefsym</span><span class="op" id="6398297">]</span>&nbsp;<span class="op" id="6398299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6398303">all</span>&nbsp;<span class="op" id="6398307">=</span>&nbsp;<span class="builtinfunc" id="6398309">append</span><span class="op" id="6398315">(</span><span class="ident" id="6398316">all</span><span class="op" id="6398319">,</span>&nbsp;<span class="ident" id="6398321">s</span><span class="op" id="6398322">.</span><span class="ident" id="6398323">Name</span><span class="op" id="6398327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6398330">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398333">return</span>&nbsp;<span class="ident" id="6398340">all</span><span class="op" id="6398343">,</span>&nbsp;<span class="ident" id="6398345">nil</span><br>
<span class="lineno"></span><span class="op" id="6398349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6398352">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6398408">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6398463">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6398511">func</span>&nbsp;<span class="op" id="6398516">(</span><span class="ident" id="6398517">f</span>&nbsp;<span class="op" id="6398519">*</span><span class="ident" id="6398520">File</span><span class="op" id="6398524">)</span>&nbsp;<span class="ident" id="6398526">ImportedLibraries</span><span class="op" id="6398543">(</span><span class="op" id="6398544">)</span>&nbsp;<span class="op" id="6398546">(</span><span class="op" id="6398547">[</span><span class="op" id="6398548">]</span><span class="builtintype" id="6398549">string</span><span class="op" id="6398555">,</span>&nbsp;<span class="builtintype" id="6398557">error</span><span class="op" id="6398562">)</span>&nbsp;<span class="op" id="6398564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398567">var</span>&nbsp;<span class="ident" id="6398571">all</span>&nbsp;<span class="op" id="6398575">[</span><span class="op" id="6398576">]</span><span class="builtintype" id="6398577">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398585">for</span>&nbsp;<span class="ident" id="6398589">_</span><span class="op" id="6398590">,</span>&nbsp;<span class="ident" id="6398592">l</span>&nbsp;<span class="op" id="6398594">:=</span>&nbsp;<span class="keyword" id="6398597">range</span>&nbsp;<span class="ident" id="6398603">f</span><span class="op" id="6398604">.</span><span class="ident" id="6398605">Loads</span>&nbsp;<span class="op" id="6398611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398615">if</span>&nbsp;<span class="ident" id="6398618">lib</span><span class="op" id="6398621">,</span>&nbsp;<span class="ident" id="6398623">ok</span>&nbsp;<span class="op" id="6398626">:=</span>&nbsp;<span class="ident" id="6398629">l</span><span class="op" id="6398630">.</span><span class="op" id="6398631">(</span><span class="op" id="6398632">*</span><span class="ident" id="6398633">Dylib</span><span class="op" id="6398638">)</span><span class="op" id="6398639">;</span>&nbsp;<span class="ident" id="6398641">ok</span>&nbsp;<span class="op" id="6398644">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6398649">all</span>&nbsp;<span class="op" id="6398653">=</span>&nbsp;<span class="builtinfunc" id="6398655">append</span><span class="op" id="6398661">(</span><span class="ident" id="6398662">all</span><span class="op" id="6398665">,</span>&nbsp;<span class="ident" id="6398667">lib</span><span class="op" id="6398670">.</span><span class="ident" id="6398671">Name</span><span class="op" id="6398675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6398679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6398682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6398685">return</span>&nbsp;<span class="ident" id="6398692">all</span><span class="op" id="6398695">,</span>&nbsp;<span class="ident" id="6398697">nil</span><br>
<span class="lineno"></span><span class="op" id="6398701">}</span>
</div>
</body>
</html>
