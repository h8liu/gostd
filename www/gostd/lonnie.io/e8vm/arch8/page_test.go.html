<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="8502581">package</span>&nbsp;<span class="ident" id="8502589">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8502596">import</span>&nbsp;<span class="op" id="8502603">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8502606">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="8502616">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8502619">func</span>&nbsp;<span class="ident" id="8502624">TestPage</span><span class="op" id="8502632">(</span><span class="ident" id="8502633">t</span>&nbsp;<span class="op" id="8502635">*</span><span class="ident" id="8502636">testing</span><span class="op" id="8502643">.</span><span class="ident" id="8502644">T</span><span class="op" id="8502645">)</span>&nbsp;<span class="op" id="8502647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502650">e</span>&nbsp;<span class="op" id="8502652">:=</span>&nbsp;<span class="keyword" id="8502655">func</span><span class="op" id="8502659">(</span><span class="ident" id="8502660">cond</span>&nbsp;<span class="builtintype" id="8502665">bool</span><span class="op" id="8502669">,</span>&nbsp;<span class="ident" id="8502671">s</span>&nbsp;<span class="builtintype" id="8502673">string</span><span class="op" id="8502679">,</span>&nbsp;<span class="ident" id="8502681">args</span>&nbsp;<span class="op" id="8502686">...</span><span class="keyword" id="8502689">interface</span><span class="op" id="8502698">{</span><span class="op" id="8502699">}</span><span class="op" id="8502700">)</span>&nbsp;<span class="op" id="8502702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502706">if</span>&nbsp;<span class="ident" id="8502709">cond</span>&nbsp;<span class="op" id="8502714">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502719">t</span><span class="op" id="8502720">.</span><span class="ident" id="8502721">Fatalf</span><span class="op" id="8502727">(</span><span class="ident" id="8502728">s</span><span class="op" id="8502729">,</span>&nbsp;<span class="ident" id="8502731">args</span><span class="op" id="8502735">...</span><span class="op" id="8502738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502749">e</span><span class="op" id="8502750">(</span><span class="ident" id="8502751">PageSize</span>&nbsp;<span class="op" id="8502760">&lt;</span>&nbsp;<span class="num" id="8502762">4</span><span class="op" id="8502763">,</span>&nbsp;<span class="string" id="8502765">&#34;page&nbsp;size&nbsp;too&nbsp;small&#34;</span><span class="op" id="8502786">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502789">p</span>&nbsp;<span class="op" id="8502791">:=</span>&nbsp;<span class="ident" id="8502794">newPage</span><span class="op" id="8502801">(</span><span class="op" id="8502802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502805">e</span><span class="op" id="8502806">(</span><span class="builtinfunc" id="8502807">len</span><span class="op" id="8502810">(</span><span class="ident" id="8502811">p</span><span class="op" id="8502812">.</span><span class="ident" id="8502813">Bytes</span><span class="op" id="8502818">)</span>&nbsp;<span class="op" id="8502820">!=</span>&nbsp;<span class="ident" id="8502823">PageSize</span><span class="op" id="8502831">,</span>&nbsp;<span class="string" id="8502833">&#34;page&nbsp;size&nbsp;incorrect&#34;</span><span class="op" id="8502854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502857">e</span><span class="op" id="8502858">(</span><span class="op" id="8502859">(</span><span class="op" id="8502860">(</span><span class="ident" id="8502861">PageSize</span><span class="op" id="8502869">-</span><span class="num" id="8502870">1</span><span class="op" id="8502871">)</span><span class="op" id="8502872">&amp;</span><span class="ident" id="8502873">PageSize</span><span class="op" id="8502881">)</span>&nbsp;<span class="op" id="8502883">!=</span>&nbsp;<span class="num" id="8502886">0</span><span class="op" id="8502887">,</span>&nbsp;<span class="string" id="8502889">&#34;page&nbsp;size&nbsp;not&nbsp;exponential&nbsp;of&nbsp;2&#34;</span><span class="op" id="8502921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502925">for</span>&nbsp;<span class="ident" id="8502929">i</span>&nbsp;<span class="op" id="8502931">:=</span>&nbsp;<span class="builtintype" id="8502934">uint32</span><span class="op" id="8502940">(</span><span class="num" id="8502941">0</span><span class="op" id="8502942">)</span><span class="op" id="8502943">;</span>&nbsp;<span class="ident" id="8502945">i</span>&nbsp;<span class="op" id="8502947">&lt;</span>&nbsp;<span class="ident" id="8502949">PageSize</span><span class="op" id="8502957">;</span>&nbsp;<span class="ident" id="8502959">i</span><span class="op" id="8502960">++</span>&nbsp;<span class="op" id="8502963">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502967">b</span>&nbsp;<span class="op" id="8502969">:=</span>&nbsp;<span class="ident" id="8502972">p</span><span class="op" id="8502973">.</span><span class="ident" id="8502974">ReadByte</span><span class="op" id="8502982">(</span><span class="ident" id="8502983">i</span><span class="op" id="8502984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502988">e</span><span class="op" id="8502989">(</span><span class="ident" id="8502990">b</span>&nbsp;<span class="op" id="8502992">!=</span>&nbsp;<span class="num" id="8502995">0</span><span class="op" id="8502996">,</span>&nbsp;<span class="string" id="8502998">&#34;byte&nbsp;%d&nbsp;not&nbsp;zero&nbsp;on&nbsp;new&nbsp;page&#34;</span><span class="op" id="8503028">,</span>&nbsp;<span class="ident" id="8503030">i</span><span class="op" id="8503031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503038">for</span>&nbsp;<span class="ident" id="8503042">i</span>&nbsp;<span class="op" id="8503044">:=</span>&nbsp;<span class="builtintype" id="8503047">uint32</span><span class="op" id="8503053">(</span><span class="num" id="8503054">0</span><span class="op" id="8503055">)</span><span class="op" id="8503056">;</span>&nbsp;<span class="ident" id="8503058">i</span>&nbsp;<span class="op" id="8503060">&lt;</span>&nbsp;<span class="ident" id="8503062">PageSize</span><span class="op" id="8503070">/</span><span class="num" id="8503071">4</span><span class="op" id="8503072">;</span>&nbsp;<span class="ident" id="8503074">i</span><span class="op" id="8503075">++</span>&nbsp;<span class="op" id="8503078">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503082">b</span>&nbsp;<span class="op" id="8503084">:=</span>&nbsp;<span class="ident" id="8503087">p</span><span class="op" id="8503088">.</span><span class="ident" id="8503089">ReadWord</span><span class="op" id="8503097">(</span><span class="ident" id="8503098">i</span>&nbsp;<span class="op" id="8503100">*</span>&nbsp;<span class="num" id="8503102">4</span><span class="op" id="8503103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503107">e</span><span class="op" id="8503108">(</span><span class="ident" id="8503109">b</span>&nbsp;<span class="op" id="8503111">!=</span>&nbsp;<span class="num" id="8503114">0</span><span class="op" id="8503115">,</span>&nbsp;<span class="string" id="8503117">&#34;word&nbsp;%d&nbsp;not&nbsp;zero&nbsp;on&nbsp;new&nbsp;page&#34;</span><span class="op" id="8503147">,</span>&nbsp;<span class="ident" id="8503149">i</span><span class="op" id="8503150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503157">off</span>&nbsp;<span class="op" id="8503161">:=</span>&nbsp;<span class="builtintype" id="8503164">uint32</span><span class="op" id="8503170">(</span><span class="num" id="8503171">56</span><span class="op" id="8503173">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503176">p</span><span class="op" id="8503177">.</span><span class="ident" id="8503178">WriteByte</span><span class="op" id="8503187">(</span><span class="ident" id="8503188">off</span><span class="op" id="8503191">+</span><span class="num" id="8503192">0</span><span class="op" id="8503193">,</span>&nbsp;<span class="num" id="8503195">0x37</span><span class="op" id="8503199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503202">p</span><span class="op" id="8503203">.</span><span class="ident" id="8503204">WriteByte</span><span class="op" id="8503213">(</span><span class="ident" id="8503214">off</span><span class="op" id="8503217">+</span><span class="num" id="8503218">1</span><span class="op" id="8503219">,</span>&nbsp;<span class="num" id="8503221">0x21</span><span class="op" id="8503225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503228">p</span><span class="op" id="8503229">.</span><span class="ident" id="8503230">WriteByte</span><span class="op" id="8503239">(</span><span class="ident" id="8503240">off</span><span class="op" id="8503243">+</span><span class="num" id="8503244">2</span><span class="op" id="8503245">,</span>&nbsp;<span class="num" id="8503247">0x5a</span><span class="op" id="8503251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503254">p</span><span class="op" id="8503255">.</span><span class="ident" id="8503256">WriteByte</span><span class="op" id="8503265">(</span><span class="ident" id="8503266">off</span><span class="op" id="8503269">+</span><span class="num" id="8503270">3</span><span class="op" id="8503271">,</span>&nbsp;<span class="num" id="8503273">0x70</span><span class="op" id="8503277">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503281">exp</span>&nbsp;<span class="op" id="8503285">:=</span>&nbsp;<span class="builtintype" id="8503288">uint32</span><span class="op" id="8503294">(</span><span class="num" id="8503295">0x705a2137</span><span class="op" id="8503305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503308">w</span>&nbsp;<span class="op" id="8503310">:=</span>&nbsp;<span class="ident" id="8503313">p</span><span class="op" id="8503314">.</span><span class="ident" id="8503315">ReadWord</span><span class="op" id="8503323">(</span><span class="ident" id="8503324">off</span><span class="op" id="8503327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503330">e</span><span class="op" id="8503331">(</span><span class="ident" id="8503332">w</span>&nbsp;<span class="op" id="8503334">!=</span>&nbsp;<span class="ident" id="8503337">exp</span><span class="op" id="8503340">,</span>&nbsp;<span class="string" id="8503342">&#34;expect&nbsp;0x%08x&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8503368">,</span>&nbsp;<span class="ident" id="8503370">exp</span><span class="op" id="8503373">,</span>&nbsp;<span class="ident" id="8503375">w</span><span class="op" id="8503376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503379">w</span>&nbsp;<span class="op" id="8503381">=</span>&nbsp;<span class="ident" id="8503383">p</span><span class="op" id="8503384">.</span><span class="ident" id="8503385">ReadWord</span><span class="op" id="8503393">(</span><span class="ident" id="8503394">off</span>&nbsp;<span class="op" id="8503398">+</span>&nbsp;<span class="num" id="8503400">3</span><span class="op" id="8503401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503404">e</span><span class="op" id="8503405">(</span><span class="ident" id="8503406">w</span>&nbsp;<span class="op" id="8503408">!=</span>&nbsp;<span class="ident" id="8503411">exp</span><span class="op" id="8503414">,</span>&nbsp;<span class="string" id="8503416">&#34;expect&nbsp;0x%08x&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8503442">,</span>&nbsp;<span class="ident" id="8503444">exp</span><span class="op" id="8503447">,</span>&nbsp;<span class="ident" id="8503449">w</span><span class="op" id="8503450">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503453">w</span>&nbsp;<span class="op" id="8503455">=</span>&nbsp;<span class="ident" id="8503457">p</span><span class="op" id="8503458">.</span><span class="ident" id="8503459">ReadWord</span><span class="op" id="8503467">(</span><span class="ident" id="8503468">off</span>&nbsp;<span class="op" id="8503472">+</span>&nbsp;<span class="num" id="8503474">3</span>&nbsp;<span class="op" id="8503476">+</span>&nbsp;<span class="num" id="8503478">2</span><span class="op" id="8503479">*</span><span class="ident" id="8503480">PageSize</span><span class="op" id="8503488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503491">e</span><span class="op" id="8503492">(</span><span class="ident" id="8503493">w</span>&nbsp;<span class="op" id="8503495">!=</span>&nbsp;<span class="ident" id="8503498">exp</span><span class="op" id="8503501">,</span>&nbsp;<span class="string" id="8503503">&#34;expect&nbsp;0x%08x&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8503529">,</span>&nbsp;<span class="ident" id="8503531">exp</span><span class="op" id="8503534">,</span>&nbsp;<span class="ident" id="8503536">w</span><span class="op" id="8503537">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503541">b</span>&nbsp;<span class="op" id="8503543">:=</span>&nbsp;<span class="ident" id="8503546">p</span><span class="op" id="8503547">.</span><span class="ident" id="8503548">ReadByte</span><span class="op" id="8503556">(</span><span class="ident" id="8503557">off</span>&nbsp;<span class="op" id="8503561">+</span>&nbsp;<span class="num" id="8503563">2</span><span class="op" id="8503564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503567">e</span><span class="op" id="8503568">(</span><span class="ident" id="8503569">b</span>&nbsp;<span class="op" id="8503571">!=</span>&nbsp;<span class="num" id="8503574">0x5a</span><span class="op" id="8503578">,</span>&nbsp;<span class="string" id="8503580">&#34;got&nbsp;incorrect&nbsp;byte&nbsp;0x%02x&#34;</span><span class="op" id="8503607">,</span>&nbsp;<span class="ident" id="8503609">b</span><span class="op" id="8503610">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503613">b</span>&nbsp;<span class="op" id="8503615">=</span>&nbsp;<span class="ident" id="8503617">p</span><span class="op" id="8503618">.</span><span class="ident" id="8503619">ReadByte</span><span class="op" id="8503627">(</span><span class="ident" id="8503628">off</span>&nbsp;<span class="op" id="8503632">+</span>&nbsp;<span class="num" id="8503634">2</span>&nbsp;<span class="op" id="8503636">+</span>&nbsp;<span class="num" id="8503638">2</span><span class="op" id="8503639">*</span><span class="ident" id="8503640">PageSize</span><span class="op" id="8503648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503651">e</span><span class="op" id="8503652">(</span><span class="ident" id="8503653">b</span>&nbsp;<span class="op" id="8503655">!=</span>&nbsp;<span class="num" id="8503658">0x5a</span><span class="op" id="8503662">,</span>&nbsp;<span class="string" id="8503664">&#34;got&nbsp;incorrect&nbsp;byte&nbsp;0x%02x&#34;</span><span class="op" id="8503691">,</span>&nbsp;<span class="ident" id="8503693">b</span><span class="op" id="8503694">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503698">p</span><span class="op" id="8503699">.</span><span class="ident" id="8503700">WriteWord</span><span class="op" id="8503709">(</span><span class="ident" id="8503710">off</span><span class="op" id="8503713">+</span><span class="num" id="8503714">3</span><span class="op" id="8503715">+</span><span class="num" id="8503716">2</span><span class="op" id="8503717">*</span><span class="ident" id="8503718">PageSize</span><span class="op" id="8503726">,</span>&nbsp;<span class="ident" id="8503728">exp</span><span class="op" id="8503731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503734">b</span>&nbsp;<span class="op" id="8503736">=</span>&nbsp;<span class="ident" id="8503738">p</span><span class="op" id="8503739">.</span><span class="ident" id="8503740">ReadByte</span><span class="op" id="8503748">(</span><span class="ident" id="8503749">off</span>&nbsp;<span class="op" id="8503753">+</span>&nbsp;<span class="num" id="8503755">2</span><span class="op" id="8503756">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503759">e</span><span class="op" id="8503760">(</span><span class="ident" id="8503761">b</span>&nbsp;<span class="op" id="8503763">!=</span>&nbsp;<span class="num" id="8503766">0x5a</span><span class="op" id="8503770">,</span>&nbsp;<span class="string" id="8503772">&#34;got&nbsp;incorrect&nbsp;byte&nbsp;0x%02x&#34;</span><span class="op" id="8503799">,</span>&nbsp;<span class="ident" id="8503801">b</span><span class="op" id="8503802">)</span><br>
<span class="lineno"></span><span class="op" id="8503804">}</span>
</div>
</body>
</html>
