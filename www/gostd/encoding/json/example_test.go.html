<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="173065">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="173121">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="173175">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="173226">package</span>&nbsp;<span class="ident" id="173234">json_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="173245">import</span>&nbsp;<span class="op" id="173252">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173255">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173264">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173281">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173288">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173294">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173301">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="173307">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="173317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="173320">func</span>&nbsp;<span class="ident" id="173325">ExampleMarshal</span><span class="op" id="173339">(</span><span class="op" id="173340">)</span>&nbsp;<span class="op" id="173342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="173345">type</span>&nbsp;<span class="ident" id="173350">ColorGroup</span>&nbsp;<span class="keyword" id="173361">struct</span>&nbsp;<span class="op" id="173368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173372">ID</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="173379">int</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173385">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="173392">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173401">Colors</span>&nbsp;<span class="op" id="173408">[</span><span class="op" id="173409">]</span><span class="builtintype" id="173410">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="173418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173421">group</span>&nbsp;<span class="op" id="173427">:=</span>&nbsp;<span class="ident" id="173430">ColorGroup</span><span class="op" id="173440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173444">ID</span><span class="op" id="173446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="173452">1</span><span class="op" id="173453">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173457">Name</span><span class="op" id="173461">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="173465">&#34;Reds&#34;</span><span class="op" id="173471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173475">Colors</span><span class="op" id="173481">:</span>&nbsp;<span class="op" id="173483">[</span><span class="op" id="173484">]</span><span class="builtintype" id="173485">string</span><span class="op" id="173491">{</span><span class="string" id="173492">&#34;Crimson&#34;</span><span class="op" id="173501">,</span>&nbsp;<span class="string" id="173503">&#34;Red&#34;</span><span class="op" id="173508">,</span>&nbsp;<span class="string" id="173510">&#34;Ruby&#34;</span><span class="op" id="173516">,</span>&nbsp;<span class="string" id="173518">&#34;Maroon&#34;</span><span class="op" id="173526">}</span><span class="op" id="173527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="173530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173533">b</span><span class="op" id="173534">,</span>&nbsp;<span class="ident" id="173536">err</span>&nbsp;<span class="op" id="173540">:=</span>&nbsp;<span class="ident" id="173543">json</span><span class="op" id="173547">.</span><span class="ident" id="173548">Marshal</span><span class="op" id="173555">(</span><span class="ident" id="173556">group</span><span class="op" id="173561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="173564">if</span>&nbsp;<span class="ident" id="173567">err</span>&nbsp;<span class="op" id="173571">!=</span>&nbsp;<span class="ident" id="173574">nil</span>&nbsp;<span class="op" id="173578">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173582">fmt</span><span class="op" id="173585">.</span><span class="ident" id="173586">Println</span><span class="op" id="173593">(</span><span class="string" id="173594">&#34;error:&#34;</span><span class="op" id="173602">,</span>&nbsp;<span class="ident" id="173604">err</span><span class="op" id="173607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="173610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173613">os</span><span class="op" id="173615">.</span><span class="ident" id="173616">Stdout</span><span class="op" id="173622">.</span><span class="ident" id="173623">Write</span><span class="op" id="173628">(</span><span class="ident" id="173629">b</span><span class="op" id="173630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="173633">//&nbsp;Output:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="173645">//&nbsp;{&#34;ID&#34;:1,&#34;Name&#34;:&#34;Reds&#34;,&#34;Colors&#34;:[&#34;Crimson&#34;,&#34;Red&#34;,&#34;Ruby&#34;,&#34;Maroon&#34;]}</span><br>
<span class="lineno">35</span><span class="op" id="173714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="173717">func</span>&nbsp;<span class="ident" id="173722">ExampleUnmarshal</span><span class="op" id="173738">(</span><span class="op" id="173739">)</span>&nbsp;<span class="op" id="173741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="173744">var</span>&nbsp;<span class="ident" id="173748">jsonBlob</span>&nbsp;<span class="op" id="173757">=</span>&nbsp;<span class="op" id="173759">[</span><span class="op" id="173760">]</span><span class="builtintype" id="173761">byte</span><span class="op" id="173765">(</span><span class="string" id="173766">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Platypus&#34;,&nbsp;&#34;Order&#34;:&nbsp;&#34;Monotremata&#34;},<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Quoll&#34;,&nbsp;&nbsp;&nbsp;&nbsp;&#34;Order&#34;:&nbsp;&#34;Dasyuromorphia&#34;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp]`</span><span class="op" id="173870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="173873">type</span>&nbsp;<span class="ident" id="173878">Animal</span>&nbsp;<span class="keyword" id="173885">struct</span>&nbsp;<span class="op" id="173892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173896">Name</span>&nbsp;&nbsp;<span class="builtintype" id="173902">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173911">Order</span>&nbsp;<span class="builtintype" id="173917">string</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="173925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="173928">var</span>&nbsp;<span class="ident" id="173932">animals</span>&nbsp;<span class="op" id="173940">[</span><span class="op" id="173941">]</span><span class="ident" id="173942">Animal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="173950">err</span>&nbsp;<span class="op" id="173954">:=</span>&nbsp;<span class="ident" id="173957">json</span><span class="op" id="173961">.</span><span class="ident" id="173962">Unmarshal</span><span class="op" id="173971">(</span><span class="ident" id="173972">jsonBlob</span><span class="op" id="173980">,</span>&nbsp;<span class="op" id="173982">&amp;</span><span class="ident" id="173983">animals</span><span class="op" id="173990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="173993">if</span>&nbsp;<span class="ident" id="173996">err</span>&nbsp;<span class="op" id="174000">!=</span>&nbsp;<span class="ident" id="174003">nil</span>&nbsp;<span class="op" id="174007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174011">fmt</span><span class="op" id="174014">.</span><span class="ident" id="174015">Println</span><span class="op" id="174022">(</span><span class="string" id="174023">&#34;error:&#34;</span><span class="op" id="174031">,</span>&nbsp;<span class="ident" id="174033">err</span><span class="op" id="174036">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="174039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174042">fmt</span><span class="op" id="174045">.</span><span class="ident" id="174046">Printf</span><span class="op" id="174052">(</span><span class="string" id="174053">&#34;%+v&#34;</span><span class="op" id="174058">,</span>&nbsp;<span class="ident" id="174060">animals</span><span class="op" id="174067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174070">//&nbsp;Output:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174082">//&nbsp;[{Name:Platypus&nbsp;Order:Monotremata}&nbsp;{Name:Quoll&nbsp;Order:Dasyuromorphia}]</span><br>
<span class="lineno"></span><span class="op" id="174155">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="174158">//&nbsp;This&nbsp;example&nbsp;uses&nbsp;a&nbsp;Decoder&nbsp;to&nbsp;decode&nbsp;a&nbsp;stream&nbsp;of&nbsp;distinct&nbsp;JSON&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="174233">func</span>&nbsp;<span class="ident" id="174238">ExampleDecoder</span><span class="op" id="174252">(</span><span class="op" id="174253">)</span>&nbsp;<span class="op" id="174255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174258">const</span>&nbsp;<span class="ident" id="174264">jsonStream</span>&nbsp;<span class="op" id="174275">=</span>&nbsp;<span class="string" id="174277">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Ed&#34;,&nbsp;&#34;Text&#34;:&nbsp;&#34;Knock&nbsp;knock.&#34;}<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Sam&#34;,&nbsp;&#34;Text&#34;:&nbsp;&#34;Who&#39;s&nbsp;there?&#34;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Ed&#34;,&nbsp;&#34;Text&#34;:&nbsp;&#34;Go&nbsp;fmt.&#34;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Sam&#34;,&nbsp;&#34;Text&#34;:&nbsp;&#34;Go&nbsp;fmt&nbsp;who?&#34;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Name&#34;:&nbsp;&#34;Ed&#34;,&nbsp;&#34;Text&#34;:&nbsp;&#34;Go&nbsp;fmt&nbsp;yourself!&#34;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp`</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174488">type</span>&nbsp;<span class="ident" id="174493">Message</span>&nbsp;<span class="keyword" id="174501">struct</span>&nbsp;<span class="op" id="174508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174512">Name</span><span class="op" id="174516">,</span>&nbsp;<span class="ident" id="174518">Text</span>&nbsp;<span class="builtintype" id="174523">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="174531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174534">dec</span>&nbsp;<span class="op" id="174538">:=</span>&nbsp;<span class="ident" id="174541">json</span><span class="op" id="174545">.</span><span class="ident" id="174546">NewDecoder</span><span class="op" id="174556">(</span><span class="ident" id="174557">strings</span><span class="op" id="174564">.</span><span class="ident" id="174565">NewReader</span><span class="op" id="174574">(</span><span class="ident" id="174575">jsonStream</span><span class="op" id="174585">)</span><span class="op" id="174586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174589">for</span>&nbsp;<span class="op" id="174593">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174597">var</span>&nbsp;<span class="ident" id="174601">m</span>&nbsp;<span class="ident" id="174603">Message</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174613">if</span>&nbsp;<span class="ident" id="174616">err</span>&nbsp;<span class="op" id="174620">:=</span>&nbsp;<span class="ident" id="174623">dec</span><span class="op" id="174626">.</span><span class="ident" id="174627">Decode</span><span class="op" id="174633">(</span><span class="op" id="174634">&amp;</span><span class="ident" id="174635">m</span><span class="op" id="174636">)</span><span class="op" id="174637">;</span>&nbsp;<span class="ident" id="174639">err</span>&nbsp;<span class="op" id="174643">==</span>&nbsp;<span class="ident" id="174646">io</span><span class="op" id="174648">.</span><span class="ident" id="174649">EOF</span>&nbsp;<span class="op" id="174653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174658">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="174666">}</span>&nbsp;<span class="keyword" id="174668">else</span>&nbsp;<span class="keyword" id="174673">if</span>&nbsp;<span class="ident" id="174676">err</span>&nbsp;<span class="op" id="174680">!=</span>&nbsp;<span class="ident" id="174683">nil</span>&nbsp;<span class="op" id="174687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174692">log</span><span class="op" id="174695">.</span><span class="ident" id="174696">Fatal</span><span class="op" id="174701">(</span><span class="ident" id="174702">err</span><span class="op" id="174705">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="174709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174713">fmt</span><span class="op" id="174716">.</span><span class="ident" id="174717">Printf</span><span class="op" id="174723">(</span><span class="string" id="174724">&#34;%s:&nbsp;%s\n&#34;</span><span class="op" id="174734">,</span>&nbsp;<span class="ident" id="174736">m</span><span class="op" id="174737">.</span><span class="ident" id="174738">Name</span><span class="op" id="174742">,</span>&nbsp;<span class="ident" id="174744">m</span><span class="op" id="174745">.</span><span class="ident" id="174746">Text</span><span class="op" id="174750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="174753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174756">//&nbsp;Output:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174768">//&nbsp;Ed:&nbsp;Knock&nbsp;knock.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174789">//&nbsp;Sam:&nbsp;Who&#39;s&nbsp;there?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174811">//&nbsp;Ed:&nbsp;Go&nbsp;fmt.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174827">//&nbsp;Sam:&nbsp;Go&nbsp;fmt&nbsp;who?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="174848">//&nbsp;Ed:&nbsp;Go&nbsp;fmt&nbsp;yourself!</span><br>
<span class="lineno"></span><span class="op" id="174872">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="174875">//&nbsp;This&nbsp;example&nbsp;uses&nbsp;RawMessage&nbsp;to&nbsp;delay&nbsp;parsing&nbsp;part&nbsp;of&nbsp;a&nbsp;JSON&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="174948">func</span>&nbsp;<span class="ident" id="174953">ExampleRawMessage</span><span class="op" id="174970">(</span><span class="op" id="174971">)</span>&nbsp;<span class="op" id="174973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="174976">type</span>&nbsp;<span class="ident" id="174981">Color</span>&nbsp;<span class="keyword" id="174987">struct</span>&nbsp;<span class="op" id="174994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="174998">Space</span>&nbsp;<span class="builtintype" id="175004">string</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175013">Point</span>&nbsp;<span class="ident" id="175019">json</span><span class="op" id="175023">.</span><span class="ident" id="175024">RawMessage</span>&nbsp;<span class="comment" id="175035">//&nbsp;delay&nbsp;parsing&nbsp;until&nbsp;we&nbsp;know&nbsp;the&nbsp;color&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175086">type</span>&nbsp;<span class="ident" id="175091">RGB</span>&nbsp;<span class="keyword" id="175095">struct</span>&nbsp;<span class="op" id="175102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175106">R</span>&nbsp;<span class="builtintype" id="175108">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175116">G</span>&nbsp;<span class="builtintype" id="175118">uint8</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175126">B</span>&nbsp;<span class="builtintype" id="175128">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175138">type</span>&nbsp;<span class="ident" id="175143">YCbCr</span>&nbsp;<span class="keyword" id="175149">struct</span>&nbsp;<span class="op" id="175156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175160">Y</span>&nbsp;&nbsp;<span class="builtintype" id="175163">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175171">Cb</span>&nbsp;<span class="builtintype" id="175174">int8</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175181">Cr</span>&nbsp;<span class="builtintype" id="175184">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175194">var</span>&nbsp;<span class="ident" id="175198">j</span>&nbsp;<span class="op" id="175200">=</span>&nbsp;<span class="op" id="175202">[</span><span class="op" id="175203">]</span><span class="builtintype" id="175204">byte</span><span class="op" id="175208">(</span><span class="string" id="175209">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Space&#34;:&nbsp;&#34;YCbCr&#34;,&nbsp;&#34;Point&#34;:&nbsp;{&#34;Y&#34;:&nbsp;255,&nbsp;&#34;Cb&#34;:&nbsp;0,&nbsp;&#34;Cr&#34;:&nbsp;-10}},<br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&#34;Space&#34;:&nbsp;&#34;RGB&#34;,&nbsp;&nbsp;&nbsp;&#34;Point&#34;:&nbsp;{&#34;R&#34;:&nbsp;98,&nbsp;&#34;G&#34;:&nbsp;218,&nbsp;&#34;B&#34;:&nbsp;255}}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp]`</span><span class="op" id="175339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175342">var</span>&nbsp;<span class="ident" id="175346">colors</span>&nbsp;<span class="op" id="175353">[</span><span class="op" id="175354">]</span><span class="ident" id="175355">Color</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175362">err</span>&nbsp;<span class="op" id="175366">:=</span>&nbsp;<span class="ident" id="175369">json</span><span class="op" id="175373">.</span><span class="ident" id="175374">Unmarshal</span><span class="op" id="175383">(</span><span class="ident" id="175384">j</span><span class="op" id="175385">,</span>&nbsp;<span class="op" id="175387">&amp;</span><span class="ident" id="175388">colors</span><span class="op" id="175394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175397">if</span>&nbsp;<span class="ident" id="175400">err</span>&nbsp;<span class="op" id="175404">!=</span>&nbsp;<span class="ident" id="175407">nil</span>&nbsp;<span class="op" id="175411">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175415">log</span><span class="op" id="175418">.</span><span class="ident" id="175419">Fatalln</span><span class="op" id="175426">(</span><span class="string" id="175427">&#34;error:&#34;</span><span class="op" id="175435">,</span>&nbsp;<span class="ident" id="175437">err</span><span class="op" id="175440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175447">for</span>&nbsp;<span class="ident" id="175451">_</span><span class="op" id="175452">,</span>&nbsp;<span class="ident" id="175454">c</span>&nbsp;<span class="op" id="175456">:=</span>&nbsp;<span class="keyword" id="175459">range</span>&nbsp;<span class="ident" id="175465">colors</span>&nbsp;<span class="op" id="175472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175476">var</span>&nbsp;<span class="ident" id="175480">dst</span>&nbsp;<span class="keyword" id="175484">interface</span><span class="op" id="175493">{</span><span class="op" id="175494">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175498">switch</span>&nbsp;<span class="ident" id="175505">c</span><span class="op" id="175506">.</span><span class="ident" id="175507">Space</span>&nbsp;<span class="op" id="175513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175517">case</span>&nbsp;<span class="string" id="175522">&#34;RGB&#34;</span><span class="op" id="175527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175532">dst</span>&nbsp;<span class="op" id="175536">=</span>&nbsp;<span class="builtinfunc" id="175538">new</span><span class="op" id="175541">(</span><span class="ident" id="175542">RGB</span><span class="op" id="175545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175549">case</span>&nbsp;<span class="string" id="175554">&#34;YCbCr&#34;</span><span class="op" id="175561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175566">dst</span>&nbsp;<span class="op" id="175570">=</span>&nbsp;<span class="builtinfunc" id="175572">new</span><span class="op" id="175575">(</span><span class="ident" id="175576">YCbCr</span><span class="op" id="175581">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175589">err</span>&nbsp;<span class="op" id="175593">:=</span>&nbsp;<span class="ident" id="175596">json</span><span class="op" id="175600">.</span><span class="ident" id="175601">Unmarshal</span><span class="op" id="175610">(</span><span class="ident" id="175611">c</span><span class="op" id="175612">.</span><span class="ident" id="175613">Point</span><span class="op" id="175618">,</span>&nbsp;<span class="ident" id="175620">dst</span><span class="op" id="175623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175627">if</span>&nbsp;<span class="ident" id="175630">err</span>&nbsp;<span class="op" id="175634">!=</span>&nbsp;<span class="ident" id="175637">nil</span>&nbsp;<span class="op" id="175641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175646">log</span><span class="op" id="175649">.</span><span class="ident" id="175650">Fatalln</span><span class="op" id="175657">(</span><span class="string" id="175658">&#34;error:&#34;</span><span class="op" id="175666">,</span>&nbsp;<span class="ident" id="175668">err</span><span class="op" id="175671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175675">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175679">fmt</span><span class="op" id="175682">.</span><span class="ident" id="175683">Println</span><span class="op" id="175690">(</span><span class="ident" id="175691">c</span><span class="op" id="175692">.</span><span class="ident" id="175693">Space</span><span class="op" id="175698">,</span>&nbsp;<span class="ident" id="175700">dst</span><span class="op" id="175703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="175709">//&nbsp;Output:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="175721">//&nbsp;YCbCr&nbsp;&amp;{255&nbsp;0&nbsp;-10}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="175744">//&nbsp;RGB&nbsp;&amp;{98&nbsp;218&nbsp;255}</span><br>
<span class="lineno">130</span><span class="op" id="175765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="175768">func</span>&nbsp;<span class="ident" id="175773">ExampleIndent</span><span class="op" id="175786">(</span><span class="op" id="175787">)</span>&nbsp;<span class="op" id="175789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175792">type</span>&nbsp;<span class="ident" id="175797">Road</span>&nbsp;<span class="keyword" id="175802">struct</span>&nbsp;<span class="op" id="175809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175813">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="175820">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175829">Number</span>&nbsp;<span class="builtintype" id="175836">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175844">roads</span>&nbsp;<span class="op" id="175850">:=</span>&nbsp;<span class="op" id="175853">[</span><span class="op" id="175854">]</span><span class="ident" id="175855">Road</span><span class="op" id="175859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175863">{</span><span class="string" id="175864">&#34;Diamond&nbsp;Fork&#34;</span><span class="op" id="175878">,</span>&nbsp;<span class="num" id="175880">29</span><span class="op" id="175882">}</span><span class="op" id="175883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175887">{</span><span class="string" id="175888">&#34;Sheep&nbsp;Creek&#34;</span><span class="op" id="175901">,</span>&nbsp;<span class="num" id="175903">51</span><span class="op" id="175905">}</span><span class="op" id="175906">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175913">b</span><span class="op" id="175914">,</span>&nbsp;<span class="ident" id="175916">err</span>&nbsp;<span class="op" id="175920">:=</span>&nbsp;<span class="ident" id="175923">json</span><span class="op" id="175927">.</span><span class="ident" id="175928">Marshal</span><span class="op" id="175935">(</span><span class="ident" id="175936">roads</span><span class="op" id="175941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175944">if</span>&nbsp;<span class="ident" id="175947">err</span>&nbsp;<span class="op" id="175951">!=</span>&nbsp;<span class="ident" id="175954">nil</span>&nbsp;<span class="op" id="175958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="175962">log</span><span class="op" id="175965">.</span><span class="ident" id="175966">Fatal</span><span class="op" id="175971">(</span><span class="ident" id="175972">err</span><span class="op" id="175975">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="175978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="175982">var</span>&nbsp;<span class="ident" id="175986">out</span>&nbsp;<span class="ident" id="175990">bytes</span><span class="op" id="175995">.</span><span class="ident" id="175996">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="176004">json</span><span class="op" id="176008">.</span><span class="ident" id="176009">Indent</span><span class="op" id="176015">(</span><span class="op" id="176016">&amp;</span><span class="ident" id="176017">out</span><span class="op" id="176020">,</span>&nbsp;<span class="ident" id="176022">b</span><span class="op" id="176023">,</span>&nbsp;<span class="string" id="176025">&#34;=&#34;</span><span class="op" id="176028">,</span>&nbsp;<span class="string" id="176030">&#34;\t&#34;</span><span class="op" id="176034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="176037">out</span><span class="op" id="176040">.</span><span class="ident" id="176041">WriteTo</span><span class="op" id="176048">(</span><span class="ident" id="176049">os</span><span class="op" id="176051">.</span><span class="ident" id="176052">Stdout</span><span class="op" id="176058">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176061">//&nbsp;Output:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176073">//&nbsp;[</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176079">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176087">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Name&#34;:&nbsp;&#34;Diamond&nbsp;Fork&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176118">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Number&#34;:&nbsp;29</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176138">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp},</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176147">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176155">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Name&#34;:&nbsp;&#34;Sheep&nbsp;Creek&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176185">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Number&#34;:&nbsp;51</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176205">//&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="176213">//&nbsp;=]</span><br>
<span class="lineno"></span><span class="op" id="176219">}</span>
</div>
</body>
</html>
