<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html" class="current">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6225263">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6225319">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6225373">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6225424">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6225447">package</span>&nbsp;<span class="ident" id="6225455">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6225462">import</span>&nbsp;<span class="op" id="6225469">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6225472">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6225491">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6225498">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6225501">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="6225578">//</span><br>
<span class="lineno"></span><span class="comment" id="6225581">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="6225668">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="6225746">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6225824">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6225896">//</span><br>
<span class="lineno"></span><span class="comment" id="6225899">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="6225980">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="6226059">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6226112">//</span><br>
<span class="lineno"></span><span class="comment" id="6226115">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="6226190">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6226265">type</span>&nbsp;<span class="ident" id="6226270">LineTable</span>&nbsp;<span class="keyword" id="6226280">struct</span>&nbsp;<span class="op" id="6226287">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226290">Data</span>&nbsp;<span class="op" id="6226295">[</span><span class="op" id="6226296">]</span><span class="builtintype" id="6226297">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226303">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6226308">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226316">Line</span>&nbsp;<span class="builtintype" id="6226321">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6226327">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226344">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6226353">sync</span><span class="op" id="6226357">.</span><span class="ident" id="6226358">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226365">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6226374">int</span>&nbsp;<span class="comment" id="6226378">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226432">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6226441">binary</span><span class="op" id="6226447">.</span><span class="ident" id="6226448">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226459">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="6226468">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226476">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="6226485">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226493">functab</span>&nbsp;&nbsp;<span class="op" id="6226502">[</span><span class="op" id="6226503">]</span><span class="builtintype" id="6226504">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226510">nfunctab</span>&nbsp;<span class="builtintype" id="6226519">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226527">filetab</span>&nbsp;&nbsp;<span class="op" id="6226536">[</span><span class="op" id="6226537">]</span><span class="builtintype" id="6226538">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226544">nfiletab</span>&nbsp;<span class="builtintype" id="6226553">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6226561">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="6226570">map</span><span class="op" id="6226573">[</span><span class="builtintype" id="6226574">string</span><span class="op" id="6226580">]</span><span class="builtintype" id="6226581">uint32</span><br>
<span class="lineno">45</span><span class="op" id="6226588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6226591">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="6226662">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="6226727">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="6226801">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="6226812">const</span>&nbsp;<span class="ident" id="6226818">oldQuantum</span>&nbsp;<span class="op" id="6226829">=</span>&nbsp;<span class="num" id="6226831">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6226834">func</span>&nbsp;<span class="op" id="6226839">(</span><span class="ident" id="6226840">t</span>&nbsp;<span class="op" id="6226842">*</span><span class="ident" id="6226843">LineTable</span><span class="op" id="6226852">)</span>&nbsp;<span class="ident" id="6226854">parse</span><span class="op" id="6226859">(</span><span class="ident" id="6226860">targetPC</span>&nbsp;<span class="ident" id="6226869">uint64</span><span class="op" id="6226875">,</span>&nbsp;<span class="ident" id="6226877">targetLine</span>&nbsp;<span class="builtintype" id="6226888">int</span><span class="op" id="6226891">)</span>&nbsp;<span class="op" id="6226893">(</span><span class="ident" id="6226894">b</span>&nbsp;<span class="op" id="6226896">[</span><span class="op" id="6226897">]</span><span class="builtintype" id="6226898">byte</span><span class="op" id="6226902">,</span>&nbsp;<span class="ident" id="6226904">pc</span>&nbsp;<span class="ident" id="6226907">uint64</span><span class="op" id="6226913">,</span>&nbsp;<span class="ident" id="6226915">line</span>&nbsp;<span class="builtintype" id="6226920">int</span><span class="op" id="6226923">)</span>&nbsp;<span class="op" id="6226925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6226928">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6226985">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227017">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227079">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227136">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227175">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227179">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6227242">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227299">b</span><span class="op" id="6227300">,</span>&nbsp;<span class="ident" id="6227302">pc</span><span class="op" id="6227304">,</span>&nbsp;<span class="ident" id="6227306">line</span>&nbsp;<span class="op" id="6227311">=</span>&nbsp;<span class="ident" id="6227313">t</span><span class="op" id="6227314">.</span><span class="ident" id="6227315">Data</span><span class="op" id="6227319">,</span>&nbsp;<span class="ident" id="6227321">t</span><span class="op" id="6227322">.</span><span class="ident" id="6227323">PC</span><span class="op" id="6227325">,</span>&nbsp;<span class="ident" id="6227327">t</span><span class="op" id="6227328">.</span><span class="ident" id="6227329">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227335">for</span>&nbsp;<span class="ident" id="6227339">pc</span>&nbsp;<span class="op" id="6227342">&lt;=</span>&nbsp;<span class="ident" id="6227345">targetPC</span>&nbsp;<span class="op" id="6227354">&amp;&amp;</span>&nbsp;<span class="ident" id="6227357">line</span>&nbsp;<span class="op" id="6227362">!=</span>&nbsp;<span class="ident" id="6227365">targetLine</span>&nbsp;<span class="op" id="6227376">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6227379">len</span><span class="op" id="6227382">(</span><span class="ident" id="6227383">b</span><span class="op" id="6227384">)</span>&nbsp;<span class="op" id="6227386">&gt;</span>&nbsp;<span class="num" id="6227388">0</span>&nbsp;<span class="op" id="6227390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227394">code</span>&nbsp;<span class="op" id="6227399">:=</span>&nbsp;<span class="ident" id="6227402">b</span><span class="op" id="6227403">[</span><span class="num" id="6227404">0</span><span class="op" id="6227405">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227409">b</span>&nbsp;<span class="op" id="6227411">=</span>&nbsp;<span class="ident" id="6227413">b</span><span class="op" id="6227414">[</span><span class="num" id="6227415">1</span><span class="op" id="6227416">:</span><span class="op" id="6227417">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227421">switch</span>&nbsp;<span class="op" id="6227428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227432">case</span>&nbsp;<span class="ident" id="6227437">code</span>&nbsp;<span class="op" id="6227442">==</span>&nbsp;<span class="num" id="6227445">0</span><span class="op" id="6227446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227451">if</span>&nbsp;<span class="builtinfunc" id="6227454">len</span><span class="op" id="6227457">(</span><span class="ident" id="6227458">b</span><span class="op" id="6227459">)</span>&nbsp;<span class="op" id="6227461">&lt;</span>&nbsp;<span class="num" id="6227463">4</span>&nbsp;<span class="op" id="6227465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227471">b</span>&nbsp;<span class="op" id="6227473">=</span>&nbsp;<span class="ident" id="6227475">b</span><span class="op" id="6227476">[</span><span class="num" id="6227477">0</span><span class="op" id="6227478">:</span><span class="num" id="6227479">0</span><span class="op" id="6227480">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227486">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227500">val</span>&nbsp;<span class="op" id="6227504">:=</span>&nbsp;<span class="ident" id="6227507">binary</span><span class="op" id="6227513">.</span><span class="ident" id="6227514">BigEndian</span><span class="op" id="6227523">.</span><span class="ident" id="6227524">Uint32</span><span class="op" id="6227530">(</span><span class="ident" id="6227531">b</span><span class="op" id="6227532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227537">b</span>&nbsp;<span class="op" id="6227539">=</span>&nbsp;<span class="ident" id="6227541">b</span><span class="op" id="6227542">[</span><span class="num" id="6227543">4</span><span class="op" id="6227544">:</span><span class="op" id="6227545">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227550">line</span>&nbsp;<span class="op" id="6227555">+=</span>&nbsp;<span class="builtintype" id="6227558">int</span><span class="op" id="6227561">(</span><span class="ident" id="6227562">val</span><span class="op" id="6227565">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227569">case</span>&nbsp;<span class="ident" id="6227574">code</span>&nbsp;<span class="op" id="6227579">&lt;=</span>&nbsp;<span class="num" id="6227582">64</span><span class="op" id="6227584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227589">line</span>&nbsp;<span class="op" id="6227594">+=</span>&nbsp;<span class="builtintype" id="6227597">int</span><span class="op" id="6227600">(</span><span class="ident" id="6227601">code</span><span class="op" id="6227605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227609">case</span>&nbsp;<span class="ident" id="6227614">code</span>&nbsp;<span class="op" id="6227619">&lt;=</span>&nbsp;<span class="num" id="6227622">128</span><span class="op" id="6227625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227630">line</span>&nbsp;<span class="op" id="6227635">-=</span>&nbsp;<span class="builtintype" id="6227638">int</span><span class="op" id="6227641">(</span><span class="ident" id="6227642">code</span>&nbsp;<span class="op" id="6227647">-</span>&nbsp;<span class="num" id="6227649">64</span><span class="op" id="6227651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227655">default</span><span class="op" id="6227662">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227667">pc</span>&nbsp;<span class="op" id="6227670">+=</span>&nbsp;<span class="ident" id="6227673">oldQuantum</span>&nbsp;<span class="op" id="6227684">*</span>&nbsp;<span class="ident" id="6227686">uint64</span><span class="op" id="6227692">(</span><span class="ident" id="6227693">code</span><span class="op" id="6227697">-</span><span class="num" id="6227698">128</span><span class="op" id="6227701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227706">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227721">pc</span>&nbsp;<span class="op" id="6227724">+=</span>&nbsp;<span class="ident" id="6227727">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6227739">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227742">return</span>&nbsp;<span class="ident" id="6227749">b</span><span class="op" id="6227750">,</span>&nbsp;<span class="ident" id="6227752">pc</span><span class="op" id="6227754">,</span>&nbsp;<span class="ident" id="6227756">line</span><br>
<span class="lineno"></span><span class="op" id="6227761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6227764">func</span>&nbsp;<span class="op" id="6227769">(</span><span class="ident" id="6227770">t</span>&nbsp;<span class="op" id="6227772">*</span><span class="ident" id="6227773">LineTable</span><span class="op" id="6227782">)</span>&nbsp;<span class="ident" id="6227784">slice</span><span class="op" id="6227789">(</span><span class="ident" id="6227790">pc</span>&nbsp;<span class="ident" id="6227793">uint64</span><span class="op" id="6227799">)</span>&nbsp;<span class="op" id="6227801">*</span><span class="ident" id="6227802">LineTable</span>&nbsp;<span class="op" id="6227812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6227815">data</span><span class="op" id="6227819">,</span>&nbsp;<span class="ident" id="6227821">pc</span><span class="op" id="6227823">,</span>&nbsp;<span class="ident" id="6227825">line</span>&nbsp;<span class="op" id="6227830">:=</span>&nbsp;<span class="ident" id="6227833">t</span><span class="op" id="6227834">.</span><span class="ident" id="6227835">parse</span><span class="op" id="6227840">(</span><span class="ident" id="6227841">pc</span><span class="op" id="6227843">,</span>&nbsp;<span class="op" id="6227845">-</span><span class="num" id="6227846">1</span><span class="op" id="6227847">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6227850">return</span>&nbsp;<span class="op" id="6227857">&amp;</span><span class="ident" id="6227858">LineTable</span><span class="op" id="6227867">{</span><span class="ident" id="6227868">Data</span><span class="op" id="6227872">:</span>&nbsp;<span class="ident" id="6227874">data</span><span class="op" id="6227878">,</span>&nbsp;<span class="ident" id="6227880">PC</span><span class="op" id="6227882">:</span>&nbsp;<span class="ident" id="6227884">pc</span><span class="op" id="6227886">,</span>&nbsp;<span class="ident" id="6227888">Line</span><span class="op" id="6227892">:</span>&nbsp;<span class="ident" id="6227894">line</span><span class="op" id="6227898">}</span><br>
<span class="lineno"></span><span class="op" id="6227900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6227903">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="6227970">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="6228025">func</span>&nbsp;<span class="op" id="6228030">(</span><span class="ident" id="6228031">t</span>&nbsp;<span class="op" id="6228033">*</span><span class="ident" id="6228034">LineTable</span><span class="op" id="6228043">)</span>&nbsp;<span class="ident" id="6228045">PCToLine</span><span class="op" id="6228053">(</span><span class="ident" id="6228054">pc</span>&nbsp;<span class="ident" id="6228057">uint64</span><span class="op" id="6228063">)</span>&nbsp;<span class="builtintype" id="6228065">int</span>&nbsp;<span class="op" id="6228069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228072">if</span>&nbsp;<span class="ident" id="6228075">t</span><span class="op" id="6228076">.</span><span class="ident" id="6228077">isGo12</span><span class="op" id="6228083">(</span><span class="op" id="6228084">)</span>&nbsp;<span class="op" id="6228086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228090">return</span>&nbsp;<span class="ident" id="6228097">t</span><span class="op" id="6228098">.</span><span class="ident" id="6228099">go12PCToLine</span><span class="op" id="6228111">(</span><span class="ident" id="6228112">pc</span><span class="op" id="6228114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228120">_</span><span class="op" id="6228121">,</span>&nbsp;<span class="ident" id="6228123">_</span><span class="op" id="6228124">,</span>&nbsp;<span class="ident" id="6228126">line</span>&nbsp;<span class="op" id="6228131">:=</span>&nbsp;<span class="ident" id="6228134">t</span><span class="op" id="6228135">.</span><span class="ident" id="6228136">parse</span><span class="op" id="6228141">(</span><span class="ident" id="6228142">pc</span><span class="op" id="6228144">,</span>&nbsp;<span class="op" id="6228146">-</span><span class="num" id="6228147">1</span><span class="op" id="6228148">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228151">return</span>&nbsp;<span class="ident" id="6228158">line</span><br>
<span class="lineno"></span><span class="op" id="6228163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6228166">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="6228233">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="6228284">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6228339">func</span>&nbsp;<span class="op" id="6228344">(</span><span class="ident" id="6228345">t</span>&nbsp;<span class="op" id="6228347">*</span><span class="ident" id="6228348">LineTable</span><span class="op" id="6228357">)</span>&nbsp;<span class="ident" id="6228359">LineToPC</span><span class="op" id="6228367">(</span><span class="ident" id="6228368">line</span>&nbsp;<span class="builtintype" id="6228373">int</span><span class="op" id="6228376">,</span>&nbsp;<span class="ident" id="6228378">maxpc</span>&nbsp;<span class="ident" id="6228384">uint64</span><span class="op" id="6228390">)</span>&nbsp;<span class="ident" id="6228392">uint64</span>&nbsp;<span class="op" id="6228399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228402">if</span>&nbsp;<span class="ident" id="6228405">t</span><span class="op" id="6228406">.</span><span class="ident" id="6228407">isGo12</span><span class="op" id="6228413">(</span><span class="op" id="6228414">)</span>&nbsp;<span class="op" id="6228416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228420">return</span>&nbsp;<span class="num" id="6228427">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228430">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228433">_</span><span class="op" id="6228434">,</span>&nbsp;<span class="ident" id="6228436">pc</span><span class="op" id="6228438">,</span>&nbsp;<span class="ident" id="6228440">line1</span>&nbsp;<span class="op" id="6228446">:=</span>&nbsp;<span class="ident" id="6228449">t</span><span class="op" id="6228450">.</span><span class="ident" id="6228451">parse</span><span class="op" id="6228456">(</span><span class="ident" id="6228457">maxpc</span><span class="op" id="6228462">,</span>&nbsp;<span class="ident" id="6228464">line</span><span class="op" id="6228468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228471">if</span>&nbsp;<span class="ident" id="6228474">line1</span>&nbsp;<span class="op" id="6228480">!=</span>&nbsp;<span class="ident" id="6228483">line</span>&nbsp;<span class="op" id="6228488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228492">return</span>&nbsp;<span class="num" id="6228499">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6228502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6228505">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228569">return</span>&nbsp;<span class="ident" id="6228576">pc</span>&nbsp;<span class="op" id="6228579">-</span>&nbsp;<span class="ident" id="6228581">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="6228592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6228595">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="6228639">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="6228677">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6228718">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6228749">func</span>&nbsp;<span class="ident" id="6228754">NewLineTable</span><span class="op" id="6228766">(</span><span class="ident" id="6228767">data</span>&nbsp;<span class="op" id="6228772">[</span><span class="op" id="6228773">]</span><span class="builtintype" id="6228774">byte</span><span class="op" id="6228778">,</span>&nbsp;<span class="ident" id="6228780">text</span>&nbsp;<span class="ident" id="6228785">uint64</span><span class="op" id="6228791">)</span>&nbsp;<span class="op" id="6228793">*</span><span class="ident" id="6228794">LineTable</span>&nbsp;<span class="op" id="6228804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6228807">return</span>&nbsp;<span class="op" id="6228814">&amp;</span><span class="ident" id="6228815">LineTable</span><span class="op" id="6228824">{</span><span class="ident" id="6228825">Data</span><span class="op" id="6228829">:</span>&nbsp;<span class="ident" id="6228831">data</span><span class="op" id="6228835">,</span>&nbsp;<span class="ident" id="6228837">PC</span><span class="op" id="6228839">:</span>&nbsp;<span class="ident" id="6228841">text</span><span class="op" id="6228845">,</span>&nbsp;<span class="ident" id="6228847">Line</span><span class="op" id="6228851">:</span>&nbsp;<span class="num" id="6228853">0</span><span class="op" id="6228854">}</span><br>
<span class="lineno"></span><span class="op" id="6228856">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6228859">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="6228890">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="6228922">//</span><br>
<span class="lineno"></span><span class="comment" id="6228925">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="6228992">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6229060">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="6229134">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="6229158">//</span><br>
<span class="lineno"></span><span class="comment" id="6229161">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="6229231">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6229277">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6229345">func</span>&nbsp;<span class="op" id="6229350">(</span><span class="ident" id="6229351">t</span>&nbsp;<span class="op" id="6229353">*</span><span class="ident" id="6229354">LineTable</span><span class="op" id="6229363">)</span>&nbsp;<span class="ident" id="6229365">isGo12</span><span class="op" id="6229371">(</span><span class="op" id="6229372">)</span>&nbsp;<span class="builtintype" id="6229374">bool</span>&nbsp;<span class="op" id="6229379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229382">t</span><span class="op" id="6229383">.</span><span class="ident" id="6229384">go12Init</span><span class="op" id="6229392">(</span><span class="op" id="6229393">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229396">return</span>&nbsp;<span class="ident" id="6229403">t</span><span class="op" id="6229404">.</span><span class="ident" id="6229405">go12</span>&nbsp;<span class="op" id="6229410">==</span>&nbsp;<span class="num" id="6229413">1</span><br>
<span class="lineno"></span><span class="op" id="6229415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6229418">const</span>&nbsp;<span class="ident" id="6229424">go12magic</span>&nbsp;<span class="op" id="6229434">=</span>&nbsp;<span class="num" id="6229436">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6229448">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6229505">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6229562">func</span>&nbsp;<span class="op" id="6229567">(</span><span class="ident" id="6229568">t</span>&nbsp;<span class="op" id="6229570">*</span><span class="ident" id="6229571">LineTable</span><span class="op" id="6229580">)</span>&nbsp;<span class="builtintype" id="6229582">uintptr</span><span class="op" id="6229589">(</span><span class="ident" id="6229590">b</span>&nbsp;<span class="op" id="6229592">[</span><span class="op" id="6229593">]</span><span class="builtintype" id="6229594">byte</span><span class="op" id="6229598">)</span>&nbsp;<span class="ident" id="6229600">uint64</span>&nbsp;<span class="op" id="6229607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229610">if</span>&nbsp;<span class="ident" id="6229613">t</span><span class="op" id="6229614">.</span><span class="ident" id="6229615">ptrsize</span>&nbsp;<span class="op" id="6229623">==</span>&nbsp;<span class="num" id="6229626">4</span>&nbsp;<span class="op" id="6229628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229632">return</span>&nbsp;<span class="ident" id="6229639">uint64</span><span class="op" id="6229645">(</span><span class="ident" id="6229646">t</span><span class="op" id="6229647">.</span><span class="ident" id="6229648">binary</span><span class="op" id="6229654">.</span><span class="ident" id="6229655">Uint32</span><span class="op" id="6229661">(</span><span class="ident" id="6229662">b</span><span class="op" id="6229663">)</span><span class="op" id="6229664">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229670">return</span>&nbsp;<span class="ident" id="6229677">t</span><span class="op" id="6229678">.</span><span class="ident" id="6229679">binary</span><span class="op" id="6229685">.</span><span class="ident" id="6229686">Uint64</span><span class="op" id="6229692">(</span><span class="ident" id="6229693">b</span><span class="op" id="6229694">)</span><br>
<span class="lineno"></span><span class="op" id="6229696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6229699">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="6229774">func</span>&nbsp;<span class="op" id="6229779">(</span><span class="ident" id="6229780">t</span>&nbsp;<span class="op" id="6229782">*</span><span class="ident" id="6229783">LineTable</span><span class="op" id="6229792">)</span>&nbsp;<span class="ident" id="6229794">go12Init</span><span class="op" id="6229802">(</span><span class="op" id="6229803">)</span>&nbsp;<span class="op" id="6229805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6229808">t</span><span class="op" id="6229809">.</span><span class="ident" id="6229810">mu</span><span class="op" id="6229812">.</span><span class="ident" id="6229813">Lock</span><span class="op" id="6229817">(</span><span class="op" id="6229818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229821">defer</span>&nbsp;<span class="ident" id="6229827">t</span><span class="op" id="6229828">.</span><span class="ident" id="6229829">mu</span><span class="op" id="6229831">.</span><span class="ident" id="6229832">Unlock</span><span class="op" id="6229838">(</span><span class="op" id="6229839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229842">if</span>&nbsp;<span class="ident" id="6229845">t</span><span class="op" id="6229846">.</span><span class="ident" id="6229847">go12</span>&nbsp;<span class="op" id="6229852">!=</span>&nbsp;<span class="num" id="6229855">0</span>&nbsp;<span class="op" id="6229857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229861">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6229873">defer</span>&nbsp;<span class="keyword" id="6229879">func</span><span class="op" id="6229883">(</span><span class="op" id="6229884">)</span>&nbsp;<span class="op" id="6229886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229890">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6229955">recover</span><span class="op" id="6229962">(</span><span class="op" id="6229963">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6229966">}</span><span class="op" id="6229967">(</span><span class="op" id="6229968">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6229972">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230041">t</span><span class="op" id="6230042">.</span><span class="ident" id="6230043">go12</span>&nbsp;<span class="op" id="6230048">=</span>&nbsp;<span class="op" id="6230050">-</span><span class="num" id="6230051">1</span>&nbsp;<span class="comment" id="6230053">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230091">if</span>&nbsp;<span class="builtinfunc" id="6230094">len</span><span class="op" id="6230097">(</span><span class="ident" id="6230098">t</span><span class="op" id="6230099">.</span><span class="ident" id="6230100">Data</span><span class="op" id="6230104">)</span>&nbsp;<span class="op" id="6230106">&lt;</span>&nbsp;<span class="num" id="6230108">16</span>&nbsp;<span class="op" id="6230111">||</span>&nbsp;<span class="ident" id="6230114">t</span><span class="op" id="6230115">.</span><span class="ident" id="6230116">Data</span><span class="op" id="6230120">[</span><span class="num" id="6230121">4</span><span class="op" id="6230122">]</span>&nbsp;<span class="op" id="6230124">!=</span>&nbsp;<span class="num" id="6230127">0</span>&nbsp;<span class="op" id="6230129">||</span>&nbsp;<span class="ident" id="6230132">t</span><span class="op" id="6230133">.</span><span class="ident" id="6230134">Data</span><span class="op" id="6230138">[</span><span class="num" id="6230139">5</span><span class="op" id="6230140">]</span>&nbsp;<span class="op" id="6230142">!=</span>&nbsp;<span class="num" id="6230145">0</span>&nbsp;<span class="op" id="6230147">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230152">(</span><span class="ident" id="6230153">t</span><span class="op" id="6230154">.</span><span class="ident" id="6230155">Data</span><span class="op" id="6230159">[</span><span class="num" id="6230160">6</span><span class="op" id="6230161">]</span>&nbsp;<span class="op" id="6230163">!=</span>&nbsp;<span class="num" id="6230166">1</span>&nbsp;<span class="op" id="6230168">&amp;&amp;</span>&nbsp;<span class="ident" id="6230171">t</span><span class="op" id="6230172">.</span><span class="ident" id="6230173">Data</span><span class="op" id="6230177">[</span><span class="num" id="6230178">6</span><span class="op" id="6230179">]</span>&nbsp;<span class="op" id="6230181">!=</span>&nbsp;<span class="num" id="6230184">4</span><span class="op" id="6230185">)</span>&nbsp;<span class="op" id="6230187">||</span>&nbsp;<span class="comment" id="6230190">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230206">(</span><span class="ident" id="6230207">t</span><span class="op" id="6230208">.</span><span class="ident" id="6230209">Data</span><span class="op" id="6230213">[</span><span class="num" id="6230214">7</span><span class="op" id="6230215">]</span>&nbsp;<span class="op" id="6230217">!=</span>&nbsp;<span class="num" id="6230220">4</span>&nbsp;<span class="op" id="6230222">&amp;&amp;</span>&nbsp;<span class="ident" id="6230225">t</span><span class="op" id="6230226">.</span><span class="ident" id="6230227">Data</span><span class="op" id="6230231">[</span><span class="num" id="6230232">7</span><span class="op" id="6230233">]</span>&nbsp;<span class="op" id="6230235">!=</span>&nbsp;<span class="num" id="6230238">8</span><span class="op" id="6230239">)</span>&nbsp;<span class="op" id="6230241">{</span>&nbsp;<span class="comment" id="6230243">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230261">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230273">switch</span>&nbsp;<span class="builtintype" id="6230280">uint32</span><span class="op" id="6230286">(</span><span class="ident" id="6230287">go12magic</span><span class="op" id="6230296">)</span>&nbsp;<span class="op" id="6230298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230301">case</span>&nbsp;<span class="ident" id="6230306">binary</span><span class="op" id="6230312">.</span><span class="ident" id="6230313">LittleEndian</span><span class="op" id="6230325">.</span><span class="ident" id="6230326">Uint32</span><span class="op" id="6230332">(</span><span class="ident" id="6230333">t</span><span class="op" id="6230334">.</span><span class="ident" id="6230335">Data</span><span class="op" id="6230339">)</span><span class="op" id="6230340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230344">t</span><span class="op" id="6230345">.</span><span class="ident" id="6230346">binary</span>&nbsp;<span class="op" id="6230353">=</span>&nbsp;<span class="ident" id="6230355">binary</span><span class="op" id="6230361">.</span><span class="ident" id="6230362">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230376">case</span>&nbsp;<span class="ident" id="6230381">binary</span><span class="op" id="6230387">.</span><span class="ident" id="6230388">BigEndian</span><span class="op" id="6230397">.</span><span class="ident" id="6230398">Uint32</span><span class="op" id="6230404">(</span><span class="ident" id="6230405">t</span><span class="op" id="6230406">.</span><span class="ident" id="6230407">Data</span><span class="op" id="6230411">)</span><span class="op" id="6230412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230416">t</span><span class="op" id="6230417">.</span><span class="ident" id="6230418">binary</span>&nbsp;<span class="op" id="6230425">=</span>&nbsp;<span class="ident" id="6230427">binary</span><span class="op" id="6230433">.</span><span class="ident" id="6230434">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230445">default</span><span class="op" id="6230452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6230456">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6230464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230468">t</span><span class="op" id="6230469">.</span><span class="ident" id="6230470">quantum</span>&nbsp;<span class="op" id="6230478">=</span>&nbsp;<span class="builtintype" id="6230480">uint32</span><span class="op" id="6230486">(</span><span class="ident" id="6230487">t</span><span class="op" id="6230488">.</span><span class="ident" id="6230489">Data</span><span class="op" id="6230493">[</span><span class="num" id="6230494">6</span><span class="op" id="6230495">]</span><span class="op" id="6230496">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230499">t</span><span class="op" id="6230500">.</span><span class="ident" id="6230501">ptrsize</span>&nbsp;<span class="op" id="6230509">=</span>&nbsp;<span class="builtintype" id="6230511">uint32</span><span class="op" id="6230517">(</span><span class="ident" id="6230518">t</span><span class="op" id="6230519">.</span><span class="ident" id="6230520">Data</span><span class="op" id="6230524">[</span><span class="num" id="6230525">7</span><span class="op" id="6230526">]</span><span class="op" id="6230527">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230531">t</span><span class="op" id="6230532">.</span><span class="ident" id="6230533">nfunctab</span>&nbsp;<span class="op" id="6230542">=</span>&nbsp;<span class="builtintype" id="6230544">uint32</span><span class="op" id="6230550">(</span><span class="ident" id="6230551">t</span><span class="op" id="6230552">.</span><span class="builtintype" id="6230553">uintptr</span><span class="op" id="6230560">(</span><span class="ident" id="6230561">t</span><span class="op" id="6230562">.</span><span class="ident" id="6230563">Data</span><span class="op" id="6230567">[</span><span class="num" id="6230568">8</span><span class="op" id="6230569">:</span><span class="op" id="6230570">]</span><span class="op" id="6230571">)</span><span class="op" id="6230572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230575">t</span><span class="op" id="6230576">.</span><span class="ident" id="6230577">functab</span>&nbsp;<span class="op" id="6230585">=</span>&nbsp;<span class="ident" id="6230587">t</span><span class="op" id="6230588">.</span><span class="ident" id="6230589">Data</span><span class="op" id="6230593">[</span><span class="num" id="6230594">8</span><span class="op" id="6230595">+</span><span class="ident" id="6230596">t</span><span class="op" id="6230597">.</span><span class="ident" id="6230598">ptrsize</span><span class="op" id="6230605">:</span><span class="op" id="6230606">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230609">functabsize</span>&nbsp;<span class="op" id="6230621">:=</span>&nbsp;<span class="ident" id="6230624">t</span><span class="op" id="6230625">.</span><span class="ident" id="6230626">nfunctab</span><span class="op" id="6230634">*</span><span class="num" id="6230635">2</span><span class="op" id="6230636">*</span><span class="ident" id="6230637">t</span><span class="op" id="6230638">.</span><span class="ident" id="6230639">ptrsize</span>&nbsp;<span class="op" id="6230647">+</span>&nbsp;<span class="ident" id="6230649">t</span><span class="op" id="6230650">.</span><span class="ident" id="6230651">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230660">fileoff</span>&nbsp;<span class="op" id="6230668">:=</span>&nbsp;<span class="ident" id="6230671">t</span><span class="op" id="6230672">.</span><span class="ident" id="6230673">binary</span><span class="op" id="6230679">.</span><span class="ident" id="6230680">Uint32</span><span class="op" id="6230686">(</span><span class="ident" id="6230687">t</span><span class="op" id="6230688">.</span><span class="ident" id="6230689">functab</span><span class="op" id="6230696">[</span><span class="ident" id="6230697">functabsize</span><span class="op" id="6230708">:</span><span class="op" id="6230709">]</span><span class="op" id="6230710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230713">t</span><span class="op" id="6230714">.</span><span class="ident" id="6230715">functab</span>&nbsp;<span class="op" id="6230723">=</span>&nbsp;<span class="ident" id="6230725">t</span><span class="op" id="6230726">.</span><span class="ident" id="6230727">functab</span><span class="op" id="6230734">[</span><span class="op" id="6230735">:</span><span class="ident" id="6230736">functabsize</span><span class="op" id="6230747">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230750">t</span><span class="op" id="6230751">.</span><span class="ident" id="6230752">filetab</span>&nbsp;<span class="op" id="6230760">=</span>&nbsp;<span class="ident" id="6230762">t</span><span class="op" id="6230763">.</span><span class="ident" id="6230764">Data</span><span class="op" id="6230768">[</span><span class="ident" id="6230769">fileoff</span><span class="op" id="6230776">:</span><span class="op" id="6230777">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230780">t</span><span class="op" id="6230781">.</span><span class="ident" id="6230782">nfiletab</span>&nbsp;<span class="op" id="6230791">=</span>&nbsp;<span class="ident" id="6230793">t</span><span class="op" id="6230794">.</span><span class="ident" id="6230795">binary</span><span class="op" id="6230801">.</span><span class="ident" id="6230802">Uint32</span><span class="op" id="6230808">(</span><span class="ident" id="6230809">t</span><span class="op" id="6230810">.</span><span class="ident" id="6230811">filetab</span><span class="op" id="6230818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230821">t</span><span class="op" id="6230822">.</span><span class="ident" id="6230823">filetab</span>&nbsp;<span class="op" id="6230831">=</span>&nbsp;<span class="ident" id="6230833">t</span><span class="op" id="6230834">.</span><span class="ident" id="6230835">filetab</span><span class="op" id="6230842">[</span><span class="op" id="6230843">:</span><span class="ident" id="6230844">t</span><span class="op" id="6230845">.</span><span class="ident" id="6230846">nfiletab</span><span class="op" id="6230854">*</span><span class="num" id="6230855">4</span><span class="op" id="6230856">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6230860">t</span><span class="op" id="6230861">.</span><span class="ident" id="6230862">go12</span>&nbsp;<span class="op" id="6230867">=</span>&nbsp;<span class="num" id="6230869">1</span>&nbsp;<span class="comment" id="6230871">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="6230889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6230892">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="6230966">func</span>&nbsp;<span class="op" id="6230971">(</span><span class="ident" id="6230972">t</span>&nbsp;<span class="op" id="6230974">*</span><span class="ident" id="6230975">LineTable</span><span class="op" id="6230984">)</span>&nbsp;<span class="ident" id="6230986">go12Funcs</span><span class="op" id="6230995">(</span><span class="op" id="6230996">)</span>&nbsp;<span class="op" id="6230998">[</span><span class="op" id="6230999">]</span><span class="ident" id="6231000">Func</span>&nbsp;<span class="op" id="6231005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231008">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231060">defer</span>&nbsp;<span class="keyword" id="6231066">func</span><span class="op" id="6231070">(</span><span class="op" id="6231071">)</span>&nbsp;<span class="op" id="6231073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6231077">recover</span><span class="op" id="6231084">(</span><span class="op" id="6231085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231088">}</span><span class="op" id="6231089">(</span><span class="op" id="6231090">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231094">n</span>&nbsp;<span class="op" id="6231096">:=</span>&nbsp;<span class="builtinfunc" id="6231099">len</span><span class="op" id="6231102">(</span><span class="ident" id="6231103">t</span><span class="op" id="6231104">.</span><span class="ident" id="6231105">functab</span><span class="op" id="6231112">)</span>&nbsp;<span class="op" id="6231114">/</span>&nbsp;<span class="builtintype" id="6231116">int</span><span class="op" id="6231119">(</span><span class="ident" id="6231120">t</span><span class="op" id="6231121">.</span><span class="ident" id="6231122">ptrsize</span><span class="op" id="6231129">)</span>&nbsp;<span class="op" id="6231131">/</span>&nbsp;<span class="num" id="6231133">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231136">funcs</span>&nbsp;<span class="op" id="6231142">:=</span>&nbsp;<span class="builtinfunc" id="6231145">make</span><span class="op" id="6231149">(</span><span class="op" id="6231150">[</span><span class="op" id="6231151">]</span><span class="ident" id="6231152">Func</span><span class="op" id="6231156">,</span>&nbsp;<span class="ident" id="6231158">n</span><span class="op" id="6231159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231162">for</span>&nbsp;<span class="ident" id="6231166">i</span>&nbsp;<span class="op" id="6231168">:=</span>&nbsp;<span class="keyword" id="6231171">range</span>&nbsp;<span class="ident" id="6231177">funcs</span>&nbsp;<span class="op" id="6231183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231187">f</span>&nbsp;<span class="op" id="6231189">:=</span>&nbsp;<span class="op" id="6231192">&amp;</span><span class="ident" id="6231193">funcs</span><span class="op" id="6231198">[</span><span class="ident" id="6231199">i</span><span class="op" id="6231200">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231204">f</span><span class="op" id="6231205">.</span><span class="ident" id="6231206">Entry</span>&nbsp;<span class="op" id="6231212">=</span>&nbsp;<span class="ident" id="6231214">uint64</span><span class="op" id="6231220">(</span><span class="ident" id="6231221">t</span><span class="op" id="6231222">.</span><span class="builtintype" id="6231223">uintptr</span><span class="op" id="6231230">(</span><span class="ident" id="6231231">t</span><span class="op" id="6231232">.</span><span class="ident" id="6231233">functab</span><span class="op" id="6231240">[</span><span class="num" id="6231241">2</span><span class="op" id="6231242">*</span><span class="ident" id="6231243">i</span><span class="op" id="6231244">*</span><span class="builtintype" id="6231245">int</span><span class="op" id="6231248">(</span><span class="ident" id="6231249">t</span><span class="op" id="6231250">.</span><span class="ident" id="6231251">ptrsize</span><span class="op" id="6231258">)</span><span class="op" id="6231259">:</span><span class="op" id="6231260">]</span><span class="op" id="6231261">)</span><span class="op" id="6231262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231266">f</span><span class="op" id="6231267">.</span><span class="ident" id="6231268">End</span>&nbsp;<span class="op" id="6231272">=</span>&nbsp;<span class="ident" id="6231274">uint64</span><span class="op" id="6231280">(</span><span class="ident" id="6231281">t</span><span class="op" id="6231282">.</span><span class="builtintype" id="6231283">uintptr</span><span class="op" id="6231290">(</span><span class="ident" id="6231291">t</span><span class="op" id="6231292">.</span><span class="ident" id="6231293">functab</span><span class="op" id="6231300">[</span><span class="op" id="6231301">(</span><span class="num" id="6231302">2</span><span class="op" id="6231303">*</span><span class="ident" id="6231304">i</span><span class="op" id="6231305">+</span><span class="num" id="6231306">2</span><span class="op" id="6231307">)</span><span class="op" id="6231308">*</span><span class="builtintype" id="6231309">int</span><span class="op" id="6231312">(</span><span class="ident" id="6231313">t</span><span class="op" id="6231314">.</span><span class="ident" id="6231315">ptrsize</span><span class="op" id="6231322">)</span><span class="op" id="6231323">:</span><span class="op" id="6231324">]</span><span class="op" id="6231325">)</span><span class="op" id="6231326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231330">info</span>&nbsp;<span class="op" id="6231335">:=</span>&nbsp;<span class="ident" id="6231338">t</span><span class="op" id="6231339">.</span><span class="ident" id="6231340">Data</span><span class="op" id="6231344">[</span><span class="ident" id="6231345">t</span><span class="op" id="6231346">.</span><span class="builtintype" id="6231347">uintptr</span><span class="op" id="6231354">(</span><span class="ident" id="6231355">t</span><span class="op" id="6231356">.</span><span class="ident" id="6231357">functab</span><span class="op" id="6231364">[</span><span class="op" id="6231365">(</span><span class="num" id="6231366">2</span><span class="op" id="6231367">*</span><span class="ident" id="6231368">i</span><span class="op" id="6231369">+</span><span class="num" id="6231370">1</span><span class="op" id="6231371">)</span><span class="op" id="6231372">*</span><span class="builtintype" id="6231373">int</span><span class="op" id="6231376">(</span><span class="ident" id="6231377">t</span><span class="op" id="6231378">.</span><span class="ident" id="6231379">ptrsize</span><span class="op" id="6231386">)</span><span class="op" id="6231387">:</span><span class="op" id="6231388">]</span><span class="op" id="6231389">)</span><span class="op" id="6231390">:</span><span class="op" id="6231391">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231395">f</span><span class="op" id="6231396">.</span><span class="ident" id="6231397">LineTable</span>&nbsp;<span class="op" id="6231407">=</span>&nbsp;<span class="ident" id="6231409">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231413">f</span><span class="op" id="6231414">.</span><span class="ident" id="6231415">FrameSize</span>&nbsp;<span class="op" id="6231425">=</span>&nbsp;<span class="builtintype" id="6231427">int</span><span class="op" id="6231430">(</span><span class="ident" id="6231431">t</span><span class="op" id="6231432">.</span><span class="ident" id="6231433">binary</span><span class="op" id="6231439">.</span><span class="ident" id="6231440">Uint32</span><span class="op" id="6231446">(</span><span class="ident" id="6231447">info</span><span class="op" id="6231451">[</span><span class="ident" id="6231452">t</span><span class="op" id="6231453">.</span><span class="ident" id="6231454">ptrsize</span><span class="op" id="6231461">+</span><span class="num" id="6231462">2</span><span class="op" id="6231463">*</span><span class="num" id="6231464">4</span><span class="op" id="6231465">:</span><span class="op" id="6231466">]</span><span class="op" id="6231467">)</span><span class="op" id="6231468">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231472">f</span><span class="op" id="6231473">.</span><span class="ident" id="6231474">Sym</span>&nbsp;<span class="op" id="6231478">=</span>&nbsp;<span class="op" id="6231480">&amp;</span><span class="ident" id="6231481">Sym</span><span class="op" id="6231484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231489">Value</span><span class="op" id="6231494">:</span>&nbsp;&nbsp;<span class="ident" id="6231497">f</span><span class="op" id="6231498">.</span><span class="ident" id="6231499">Entry</span><span class="op" id="6231504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231509">Type</span><span class="op" id="6231513">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6231517">&#39;T&#39;</span><span class="op" id="6231520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231525">Name</span><span class="op" id="6231529">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6231533">t</span><span class="op" id="6231534">.</span><span class="builtintype" id="6231535">string</span><span class="op" id="6231541">(</span><span class="ident" id="6231542">t</span><span class="op" id="6231543">.</span><span class="ident" id="6231544">binary</span><span class="op" id="6231550">.</span><span class="ident" id="6231551">Uint32</span><span class="op" id="6231557">(</span><span class="ident" id="6231558">info</span><span class="op" id="6231562">[</span><span class="ident" id="6231563">t</span><span class="op" id="6231564">.</span><span class="ident" id="6231565">ptrsize</span><span class="op" id="6231572">:</span><span class="op" id="6231573">]</span><span class="op" id="6231574">)</span><span class="op" id="6231575">)</span><span class="op" id="6231576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231581">GoType</span><span class="op" id="6231587">:</span>&nbsp;<span class="num" id="6231589">0</span><span class="op" id="6231590">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231595">Func</span><span class="op" id="6231599">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6231603">f</span><span class="op" id="6231604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231614">return</span>&nbsp;<span class="ident" id="6231621">funcs</span><br>
<span class="lineno"></span><span class="op" id="6231627">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6231630">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="6231703">func</span>&nbsp;<span class="op" id="6231708">(</span><span class="ident" id="6231709">t</span>&nbsp;<span class="op" id="6231711">*</span><span class="ident" id="6231712">LineTable</span><span class="op" id="6231721">)</span>&nbsp;<span class="ident" id="6231723">findFunc</span><span class="op" id="6231731">(</span><span class="ident" id="6231732">pc</span>&nbsp;<span class="ident" id="6231735">uint64</span><span class="op" id="6231741">)</span>&nbsp;<span class="op" id="6231743">[</span><span class="op" id="6231744">]</span><span class="builtintype" id="6231745">byte</span>&nbsp;<span class="op" id="6231750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231753">if</span>&nbsp;<span class="ident" id="6231756">pc</span>&nbsp;<span class="op" id="6231759">&lt;</span>&nbsp;<span class="ident" id="6231761">t</span><span class="op" id="6231762">.</span><span class="builtintype" id="6231763">uintptr</span><span class="op" id="6231770">(</span><span class="ident" id="6231771">t</span><span class="op" id="6231772">.</span><span class="ident" id="6231773">functab</span><span class="op" id="6231780">)</span>&nbsp;<span class="op" id="6231782">||</span>&nbsp;<span class="ident" id="6231785">pc</span>&nbsp;<span class="op" id="6231788">&gt;=</span>&nbsp;<span class="ident" id="6231791">t</span><span class="op" id="6231792">.</span><span class="builtintype" id="6231793">uintptr</span><span class="op" id="6231800">(</span><span class="ident" id="6231801">t</span><span class="op" id="6231802">.</span><span class="ident" id="6231803">functab</span><span class="op" id="6231810">[</span><span class="builtinfunc" id="6231811">len</span><span class="op" id="6231814">(</span><span class="ident" id="6231815">t</span><span class="op" id="6231816">.</span><span class="ident" id="6231817">functab</span><span class="op" id="6231824">)</span><span class="op" id="6231825">-</span><span class="builtintype" id="6231826">int</span><span class="op" id="6231829">(</span><span class="ident" id="6231830">t</span><span class="op" id="6231831">.</span><span class="ident" id="6231832">ptrsize</span><span class="op" id="6231839">)</span><span class="op" id="6231840">:</span><span class="op" id="6231841">]</span><span class="op" id="6231842">)</span>&nbsp;<span class="op" id="6231844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6231848">return</span>&nbsp;<span class="ident" id="6231855">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6231860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231864">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6231923">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6231988">f</span>&nbsp;<span class="op" id="6231990">:=</span>&nbsp;<span class="ident" id="6231993">t</span><span class="op" id="6231994">.</span><span class="ident" id="6231995">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232004">nf</span>&nbsp;<span class="op" id="6232007">:=</span>&nbsp;<span class="ident" id="6232010">t</span><span class="op" id="6232011">.</span><span class="ident" id="6232012">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232022">for</span>&nbsp;<span class="ident" id="6232026">nf</span>&nbsp;<span class="op" id="6232029">&gt;</span>&nbsp;<span class="num" id="6232031">0</span>&nbsp;<span class="op" id="6232033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232037">m</span>&nbsp;<span class="op" id="6232039">:=</span>&nbsp;<span class="ident" id="6232042">nf</span>&nbsp;<span class="op" id="6232045">/</span>&nbsp;<span class="num" id="6232047">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232051">fm</span>&nbsp;<span class="op" id="6232054">:=</span>&nbsp;<span class="ident" id="6232057">f</span><span class="op" id="6232058">[</span><span class="num" id="6232059">2</span><span class="op" id="6232060">*</span><span class="ident" id="6232061">t</span><span class="op" id="6232062">.</span><span class="ident" id="6232063">ptrsize</span><span class="op" id="6232070">*</span><span class="ident" id="6232071">m</span><span class="op" id="6232072">:</span><span class="op" id="6232073">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232077">if</span>&nbsp;<span class="ident" id="6232080">t</span><span class="op" id="6232081">.</span><span class="builtintype" id="6232082">uintptr</span><span class="op" id="6232089">(</span><span class="ident" id="6232090">fm</span><span class="op" id="6232092">)</span>&nbsp;<span class="op" id="6232094">&lt;=</span>&nbsp;<span class="ident" id="6232097">pc</span>&nbsp;<span class="op" id="6232100">&amp;&amp;</span>&nbsp;<span class="ident" id="6232103">pc</span>&nbsp;<span class="op" id="6232106">&lt;</span>&nbsp;<span class="ident" id="6232108">t</span><span class="op" id="6232109">.</span><span class="builtintype" id="6232110">uintptr</span><span class="op" id="6232117">(</span><span class="ident" id="6232118">fm</span><span class="op" id="6232120">[</span><span class="num" id="6232121">2</span><span class="op" id="6232122">*</span><span class="ident" id="6232123">t</span><span class="op" id="6232124">.</span><span class="ident" id="6232125">ptrsize</span><span class="op" id="6232132">:</span><span class="op" id="6232133">]</span><span class="op" id="6232134">)</span>&nbsp;<span class="op" id="6232136">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232141">return</span>&nbsp;<span class="ident" id="6232148">t</span><span class="op" id="6232149">.</span><span class="ident" id="6232150">Data</span><span class="op" id="6232154">[</span><span class="ident" id="6232155">t</span><span class="op" id="6232156">.</span><span class="builtintype" id="6232157">uintptr</span><span class="op" id="6232164">(</span><span class="ident" id="6232165">fm</span><span class="op" id="6232167">[</span><span class="ident" id="6232168">t</span><span class="op" id="6232169">.</span><span class="ident" id="6232170">ptrsize</span><span class="op" id="6232177">:</span><span class="op" id="6232178">]</span><span class="op" id="6232179">)</span><span class="op" id="6232180">:</span><span class="op" id="6232181">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232185">}</span>&nbsp;<span class="keyword" id="6232187">else</span>&nbsp;<span class="keyword" id="6232192">if</span>&nbsp;<span class="ident" id="6232195">pc</span>&nbsp;<span class="op" id="6232198">&lt;</span>&nbsp;<span class="ident" id="6232200">t</span><span class="op" id="6232201">.</span><span class="builtintype" id="6232202">uintptr</span><span class="op" id="6232209">(</span><span class="ident" id="6232210">fm</span><span class="op" id="6232212">)</span>&nbsp;<span class="op" id="6232214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232219">nf</span>&nbsp;<span class="op" id="6232222">=</span>&nbsp;<span class="ident" id="6232224">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232228">}</span>&nbsp;<span class="keyword" id="6232230">else</span>&nbsp;<span class="op" id="6232235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232240">f</span>&nbsp;<span class="op" id="6232242">=</span>&nbsp;<span class="ident" id="6232244">f</span><span class="op" id="6232245">[</span><span class="op" id="6232246">(</span><span class="ident" id="6232247">m</span><span class="op" id="6232248">+</span><span class="num" id="6232249">1</span><span class="op" id="6232250">)</span><span class="op" id="6232251">*</span><span class="num" id="6232252">2</span><span class="op" id="6232253">*</span><span class="ident" id="6232254">t</span><span class="op" id="6232255">.</span><span class="ident" id="6232256">ptrsize</span><span class="op" id="6232263">:</span><span class="op" id="6232264">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232269">nf</span>&nbsp;<span class="op" id="6232272">-=</span>&nbsp;<span class="ident" id="6232275">m</span>&nbsp;<span class="op" id="6232277">+</span>&nbsp;<span class="num" id="6232279">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232289">return</span>&nbsp;<span class="ident" id="6232296">nil</span><br>
<span class="lineno"></span><span class="op" id="6232300">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6232303">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="6232364">func</span>&nbsp;<span class="op" id="6232369">(</span><span class="ident" id="6232370">t</span>&nbsp;<span class="op" id="6232372">*</span><span class="ident" id="6232373">LineTable</span><span class="op" id="6232382">)</span>&nbsp;<span class="ident" id="6232384">readvarint</span><span class="op" id="6232394">(</span><span class="ident" id="6232395">pp</span>&nbsp;<span class="op" id="6232398">*</span><span class="op" id="6232399">[</span><span class="op" id="6232400">]</span><span class="builtintype" id="6232401">byte</span><span class="op" id="6232405">)</span>&nbsp;<span class="builtintype" id="6232407">uint32</span>&nbsp;<span class="op" id="6232414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232417">var</span>&nbsp;<span class="ident" id="6232421">v</span><span class="op" id="6232422">,</span>&nbsp;<span class="ident" id="6232424">shift</span>&nbsp;<span class="builtintype" id="6232430">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232438">p</span>&nbsp;<span class="op" id="6232440">:=</span>&nbsp;<span class="op" id="6232443">*</span><span class="ident" id="6232444">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232448">for</span>&nbsp;<span class="ident" id="6232452">shift</span>&nbsp;<span class="op" id="6232458">=</span>&nbsp;<span class="num" id="6232460">0</span><span class="op" id="6232461">;</span>&nbsp;<span class="op" id="6232463">;</span>&nbsp;<span class="ident" id="6232465">shift</span>&nbsp;<span class="op" id="6232471">+=</span>&nbsp;<span class="num" id="6232474">7</span>&nbsp;<span class="op" id="6232476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232480">b</span>&nbsp;<span class="op" id="6232482">:=</span>&nbsp;<span class="ident" id="6232485">p</span><span class="op" id="6232486">[</span><span class="num" id="6232487">0</span><span class="op" id="6232488">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232492">p</span>&nbsp;<span class="op" id="6232494">=</span>&nbsp;<span class="ident" id="6232496">p</span><span class="op" id="6232497">[</span><span class="num" id="6232498">1</span><span class="op" id="6232499">:</span><span class="op" id="6232500">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232504">v</span>&nbsp;<span class="op" id="6232506">|=</span>&nbsp;<span class="op" id="6232509">(</span><span class="builtintype" id="6232510">uint32</span><span class="op" id="6232516">(</span><span class="ident" id="6232517">b</span><span class="op" id="6232518">)</span>&nbsp;<span class="op" id="6232520">&amp;</span>&nbsp;<span class="num" id="6232522">0x7F</span><span class="op" id="6232526">)</span>&nbsp;<span class="op" id="6232528">&lt;&lt;</span>&nbsp;<span class="ident" id="6232531">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232539">if</span>&nbsp;<span class="ident" id="6232542">b</span><span class="op" id="6232543">&amp;</span><span class="num" id="6232544">0x80</span>&nbsp;<span class="op" id="6232549">==</span>&nbsp;<span class="num" id="6232552">0</span>&nbsp;<span class="op" id="6232554">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232559">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232573">*</span><span class="ident" id="6232574">pp</span>&nbsp;<span class="op" id="6232577">=</span>&nbsp;<span class="ident" id="6232579">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232582">return</span>&nbsp;<span class="ident" id="6232589">v</span><br>
<span class="lineno">265</span><span class="op" id="6232591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6232594">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="6232638">func</span>&nbsp;<span class="op" id="6232643">(</span><span class="ident" id="6232644">t</span>&nbsp;<span class="op" id="6232646">*</span><span class="ident" id="6232647">LineTable</span><span class="op" id="6232656">)</span>&nbsp;<span class="builtintype" id="6232658">string</span><span class="op" id="6232664">(</span><span class="ident" id="6232665">off</span>&nbsp;<span class="builtintype" id="6232669">uint32</span><span class="op" id="6232675">)</span>&nbsp;<span class="builtintype" id="6232677">string</span>&nbsp;<span class="op" id="6232684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232687">for</span>&nbsp;<span class="ident" id="6232691">i</span>&nbsp;<span class="op" id="6232693">:=</span>&nbsp;<span class="ident" id="6232696">off</span><span class="op" id="6232699">;</span>&nbsp;<span class="op" id="6232701">;</span>&nbsp;<span class="ident" id="6232703">i</span><span class="op" id="6232704">++</span>&nbsp;<span class="op" id="6232707">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232711">if</span>&nbsp;<span class="ident" id="6232714">t</span><span class="op" id="6232715">.</span><span class="ident" id="6232716">Data</span><span class="op" id="6232720">[</span><span class="ident" id="6232721">i</span><span class="op" id="6232722">]</span>&nbsp;<span class="op" id="6232724">==</span>&nbsp;<span class="num" id="6232727">0</span>&nbsp;<span class="op" id="6232729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232734">return</span>&nbsp;<span class="builtintype" id="6232741">string</span><span class="op" id="6232747">(</span><span class="ident" id="6232748">t</span><span class="op" id="6232749">.</span><span class="ident" id="6232750">Data</span><span class="op" id="6232754">[</span><span class="ident" id="6232755">off</span><span class="op" id="6232758">:</span><span class="ident" id="6232759">i</span><span class="op" id="6232760">]</span><span class="op" id="6232761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232768">}</span><br>
<span class="lineno"></span><span class="op" id="6232770">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6232773">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6232839">func</span>&nbsp;<span class="op" id="6232844">(</span><span class="ident" id="6232845">t</span>&nbsp;<span class="op" id="6232847">*</span><span class="ident" id="6232848">LineTable</span><span class="op" id="6232857">)</span>&nbsp;<span class="ident" id="6232859">step</span><span class="op" id="6232863">(</span><span class="ident" id="6232864">p</span>&nbsp;<span class="op" id="6232866">*</span><span class="op" id="6232867">[</span><span class="op" id="6232868">]</span><span class="builtintype" id="6232869">byte</span><span class="op" id="6232873">,</span>&nbsp;<span class="ident" id="6232875">pc</span>&nbsp;<span class="op" id="6232878">*</span><span class="ident" id="6232879">uint64</span><span class="op" id="6232885">,</span>&nbsp;<span class="ident" id="6232887">val</span>&nbsp;<span class="op" id="6232891">*</span><span class="builtintype" id="6232892">int32</span><span class="op" id="6232897">,</span>&nbsp;<span class="ident" id="6232899">first</span>&nbsp;<span class="builtintype" id="6232905">bool</span><span class="op" id="6232909">)</span>&nbsp;<span class="builtintype" id="6232911">bool</span>&nbsp;<span class="op" id="6232916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6232919">uvdelta</span>&nbsp;<span class="op" id="6232927">:=</span>&nbsp;<span class="ident" id="6232930">t</span><span class="op" id="6232931">.</span><span class="ident" id="6232932">readvarint</span><span class="op" id="6232942">(</span><span class="ident" id="6232943">p</span><span class="op" id="6232944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232947">if</span>&nbsp;<span class="ident" id="6232950">uvdelta</span>&nbsp;<span class="op" id="6232958">==</span>&nbsp;<span class="num" id="6232961">0</span>&nbsp;<span class="op" id="6232963">&amp;&amp;</span>&nbsp;<span class="op" id="6232966">!</span><span class="ident" id="6232967">first</span>&nbsp;<span class="op" id="6232973">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232977">return</span>&nbsp;<span class="builtintype" id="6232984">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6232991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6232994">if</span>&nbsp;<span class="ident" id="6232997">uvdelta</span><span class="op" id="6233004">&amp;</span><span class="num" id="6233005">1</span>&nbsp;<span class="op" id="6233007">!=</span>&nbsp;<span class="num" id="6233010">0</span>&nbsp;<span class="op" id="6233012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233016">uvdelta</span>&nbsp;<span class="op" id="6233024">=</span>&nbsp;<span class="op" id="6233026">^</span><span class="op" id="6233027">(</span><span class="ident" id="6233028">uvdelta</span>&nbsp;<span class="op" id="6233036">&gt;&gt;</span>&nbsp;<span class="num" id="6233039">1</span><span class="op" id="6233040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233043">}</span>&nbsp;<span class="keyword" id="6233045">else</span>&nbsp;<span class="op" id="6233050">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233054">uvdelta</span>&nbsp;<span class="op" id="6233062">&gt;&gt;=</span>&nbsp;<span class="num" id="6233066">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233072">vdelta</span>&nbsp;<span class="op" id="6233079">:=</span>&nbsp;<span class="builtintype" id="6233082">int32</span><span class="op" id="6233087">(</span><span class="ident" id="6233088">uvdelta</span><span class="op" id="6233095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233098">pcdelta</span>&nbsp;<span class="op" id="6233106">:=</span>&nbsp;<span class="ident" id="6233109">t</span><span class="op" id="6233110">.</span><span class="ident" id="6233111">readvarint</span><span class="op" id="6233121">(</span><span class="ident" id="6233122">p</span><span class="op" id="6233123">)</span>&nbsp;<span class="op" id="6233125">*</span>&nbsp;<span class="ident" id="6233127">t</span><span class="op" id="6233128">.</span><span class="ident" id="6233129">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233138">*</span><span class="ident" id="6233139">pc</span>&nbsp;<span class="op" id="6233142">+=</span>&nbsp;<span class="ident" id="6233145">uint64</span><span class="op" id="6233151">(</span><span class="ident" id="6233152">pcdelta</span><span class="op" id="6233159">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233162">*</span><span class="ident" id="6233163">val</span>&nbsp;<span class="op" id="6233167">+=</span>&nbsp;<span class="ident" id="6233170">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233178">return</span>&nbsp;<span class="builtintype" id="6233185">true</span><br>
<span class="lineno"></span><span class="op" id="6233190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6233193">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="6233253">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="6233314">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6233375">func</span>&nbsp;<span class="op" id="6233380">(</span><span class="ident" id="6233381">t</span>&nbsp;<span class="op" id="6233383">*</span><span class="ident" id="6233384">LineTable</span><span class="op" id="6233393">)</span>&nbsp;<span class="ident" id="6233395">pcvalue</span><span class="op" id="6233402">(</span><span class="ident" id="6233403">off</span>&nbsp;<span class="builtintype" id="6233407">uint32</span><span class="op" id="6233413">,</span>&nbsp;<span class="ident" id="6233415">entry</span><span class="op" id="6233420">,</span>&nbsp;<span class="ident" id="6233422">targetpc</span>&nbsp;<span class="ident" id="6233431">uint64</span><span class="op" id="6233437">)</span>&nbsp;<span class="builtintype" id="6233439">int32</span>&nbsp;<span class="op" id="6233445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233448">if</span>&nbsp;<span class="ident" id="6233451">off</span>&nbsp;<span class="op" id="6233455">==</span>&nbsp;<span class="num" id="6233458">0</span>&nbsp;<span class="op" id="6233460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233464">return</span>&nbsp;<span class="op" id="6233471">-</span><span class="num" id="6233472">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233478">p</span>&nbsp;<span class="op" id="6233480">:=</span>&nbsp;<span class="ident" id="6233483">t</span><span class="op" id="6233484">.</span><span class="ident" id="6233485">Data</span><span class="op" id="6233489">[</span><span class="ident" id="6233490">off</span><span class="op" id="6233493">:</span><span class="op" id="6233494">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233498">val</span>&nbsp;<span class="op" id="6233502">:=</span>&nbsp;<span class="builtintype" id="6233505">int32</span><span class="op" id="6233510">(</span><span class="op" id="6233511">-</span><span class="num" id="6233512">1</span><span class="op" id="6233513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6233516">pc</span>&nbsp;<span class="op" id="6233519">:=</span>&nbsp;<span class="ident" id="6233522">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233529">for</span>&nbsp;<span class="ident" id="6233533">t</span><span class="op" id="6233534">.</span><span class="ident" id="6233535">step</span><span class="op" id="6233539">(</span><span class="op" id="6233540">&amp;</span><span class="ident" id="6233541">p</span><span class="op" id="6233542">,</span>&nbsp;<span class="op" id="6233544">&amp;</span><span class="ident" id="6233545">pc</span><span class="op" id="6233547">,</span>&nbsp;<span class="op" id="6233549">&amp;</span><span class="ident" id="6233550">val</span><span class="op" id="6233553">,</span>&nbsp;<span class="ident" id="6233555">pc</span>&nbsp;<span class="op" id="6233558">==</span>&nbsp;<span class="ident" id="6233561">entry</span><span class="op" id="6233566">)</span>&nbsp;<span class="op" id="6233568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233572">if</span>&nbsp;<span class="ident" id="6233575">targetpc</span>&nbsp;<span class="op" id="6233584">&lt;</span>&nbsp;<span class="ident" id="6233586">pc</span>&nbsp;<span class="op" id="6233589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233594">return</span>&nbsp;<span class="ident" id="6233601">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6233610">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6233613">return</span>&nbsp;<span class="op" id="6233620">-</span><span class="num" id="6233621">1</span><br>
<span class="lineno"></span><span class="op" id="6233623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6233626">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6233689">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="6233745">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="6233814">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6233885">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6233960">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="6234037">func</span>&nbsp;<span class="op" id="6234042">(</span><span class="ident" id="6234043">t</span>&nbsp;<span class="op" id="6234045">*</span><span class="ident" id="6234046">LineTable</span><span class="op" id="6234055">)</span>&nbsp;<span class="ident" id="6234057">findFileLine</span><span class="op" id="6234069">(</span><span class="ident" id="6234070">entry</span>&nbsp;<span class="ident" id="6234076">uint64</span><span class="op" id="6234082">,</span>&nbsp;<span class="ident" id="6234084">filetab</span><span class="op" id="6234091">,</span>&nbsp;<span class="ident" id="6234093">linetab</span>&nbsp;<span class="builtintype" id="6234101">uint32</span><span class="op" id="6234107">,</span>&nbsp;<span class="ident" id="6234109">filenum</span><span class="op" id="6234116">,</span>&nbsp;<span class="ident" id="6234118">line</span>&nbsp;<span class="builtintype" id="6234123">int32</span><span class="op" id="6234128">)</span>&nbsp;<span class="ident" id="6234130">uint64</span>&nbsp;<span class="op" id="6234137">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234140">if</span>&nbsp;<span class="ident" id="6234143">filetab</span>&nbsp;<span class="op" id="6234151">==</span>&nbsp;<span class="num" id="6234154">0</span>&nbsp;<span class="op" id="6234156">||</span>&nbsp;<span class="ident" id="6234159">linetab</span>&nbsp;<span class="op" id="6234167">==</span>&nbsp;<span class="num" id="6234170">0</span>&nbsp;<span class="op" id="6234172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234176">return</span>&nbsp;<span class="num" id="6234183">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6234186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234190">fp</span>&nbsp;<span class="op" id="6234193">:=</span>&nbsp;<span class="ident" id="6234196">t</span><span class="op" id="6234197">.</span><span class="ident" id="6234198">Data</span><span class="op" id="6234202">[</span><span class="ident" id="6234203">filetab</span><span class="op" id="6234210">:</span><span class="op" id="6234211">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234214">fl</span>&nbsp;<span class="op" id="6234217">:=</span>&nbsp;<span class="ident" id="6234220">t</span><span class="op" id="6234221">.</span><span class="ident" id="6234222">Data</span><span class="op" id="6234226">[</span><span class="ident" id="6234227">linetab</span><span class="op" id="6234234">:</span><span class="op" id="6234235">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234238">fileVal</span>&nbsp;<span class="op" id="6234246">:=</span>&nbsp;<span class="builtintype" id="6234249">int32</span><span class="op" id="6234254">(</span><span class="op" id="6234255">-</span><span class="num" id="6234256">1</span><span class="op" id="6234257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234260">filePC</span>&nbsp;<span class="op" id="6234267">:=</span>&nbsp;<span class="ident" id="6234270">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234277">lineVal</span>&nbsp;<span class="op" id="6234285">:=</span>&nbsp;<span class="builtintype" id="6234288">int32</span><span class="op" id="6234293">(</span><span class="op" id="6234294">-</span><span class="num" id="6234295">1</span><span class="op" id="6234296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234299">linePC</span>&nbsp;<span class="op" id="6234306">:=</span>&nbsp;<span class="ident" id="6234309">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234316">fileStartPC</span>&nbsp;<span class="op" id="6234328">:=</span>&nbsp;<span class="ident" id="6234331">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234339">for</span>&nbsp;<span class="ident" id="6234343">t</span><span class="op" id="6234344">.</span><span class="ident" id="6234345">step</span><span class="op" id="6234349">(</span><span class="op" id="6234350">&amp;</span><span class="ident" id="6234351">fp</span><span class="op" id="6234353">,</span>&nbsp;<span class="op" id="6234355">&amp;</span><span class="ident" id="6234356">filePC</span><span class="op" id="6234362">,</span>&nbsp;<span class="op" id="6234364">&amp;</span><span class="ident" id="6234365">fileVal</span><span class="op" id="6234372">,</span>&nbsp;<span class="ident" id="6234374">filePC</span>&nbsp;<span class="op" id="6234381">==</span>&nbsp;<span class="ident" id="6234384">entry</span><span class="op" id="6234389">)</span>&nbsp;<span class="op" id="6234391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234395">if</span>&nbsp;<span class="ident" id="6234398">fileVal</span>&nbsp;<span class="op" id="6234406">==</span>&nbsp;<span class="ident" id="6234409">filenum</span>&nbsp;<span class="op" id="6234417">&amp;&amp;</span>&nbsp;<span class="ident" id="6234420">fileStartPC</span>&nbsp;<span class="op" id="6234432">&lt;</span>&nbsp;<span class="ident" id="6234434">filePC</span>&nbsp;<span class="op" id="6234441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6234446">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6234503">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6234562">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6234620">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234652">lineStartPC</span>&nbsp;<span class="op" id="6234664">:=</span>&nbsp;<span class="ident" id="6234667">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234677">for</span>&nbsp;<span class="ident" id="6234681">linePC</span>&nbsp;<span class="op" id="6234688">&lt;</span>&nbsp;<span class="ident" id="6234690">filePC</span>&nbsp;<span class="op" id="6234697">&amp;&amp;</span>&nbsp;<span class="ident" id="6234700">t</span><span class="op" id="6234701">.</span><span class="ident" id="6234702">step</span><span class="op" id="6234706">(</span><span class="op" id="6234707">&amp;</span><span class="ident" id="6234708">fl</span><span class="op" id="6234710">,</span>&nbsp;<span class="op" id="6234712">&amp;</span><span class="ident" id="6234713">linePC</span><span class="op" id="6234719">,</span>&nbsp;<span class="op" id="6234721">&amp;</span><span class="ident" id="6234722">lineVal</span><span class="op" id="6234729">,</span>&nbsp;<span class="ident" id="6234731">linePC</span>&nbsp;<span class="op" id="6234738">==</span>&nbsp;<span class="ident" id="6234741">entry</span><span class="op" id="6234746">)</span>&nbsp;<span class="op" id="6234748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6234754">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234822">if</span>&nbsp;<span class="ident" id="6234825">lineVal</span>&nbsp;<span class="op" id="6234833">==</span>&nbsp;<span class="ident" id="6234836">line</span>&nbsp;<span class="op" id="6234841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234848">if</span>&nbsp;<span class="ident" id="6234851">fileStartPC</span>&nbsp;<span class="op" id="6234863">&lt;=</span>&nbsp;<span class="ident" id="6234866">lineStartPC</span>&nbsp;<span class="op" id="6234878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234886">return</span>&nbsp;<span class="ident" id="6234893">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6234910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234917">if</span>&nbsp;<span class="ident" id="6234920">fileStartPC</span>&nbsp;<span class="op" id="6234932">&lt;</span>&nbsp;<span class="ident" id="6234934">linePC</span>&nbsp;<span class="op" id="6234941">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6234949">return</span>&nbsp;<span class="ident" id="6234956">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6234973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6234979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6234985">lineStartPC</span>&nbsp;<span class="op" id="6234997">=</span>&nbsp;<span class="ident" id="6234999">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235009">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235017">fileStartPC</span>&nbsp;<span class="op" id="6235029">=</span>&nbsp;<span class="ident" id="6235031">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235042">return</span>&nbsp;<span class="num" id="6235049">0</span><br>
<span class="lineno"></span><span class="op" id="6235051">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="6235054">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6235133">func</span>&nbsp;<span class="op" id="6235138">(</span><span class="ident" id="6235139">t</span>&nbsp;<span class="op" id="6235141">*</span><span class="ident" id="6235142">LineTable</span><span class="op" id="6235151">)</span>&nbsp;<span class="ident" id="6235153">go12PCToLine</span><span class="op" id="6235165">(</span><span class="ident" id="6235166">pc</span>&nbsp;<span class="ident" id="6235169">uint64</span><span class="op" id="6235175">)</span>&nbsp;<span class="op" id="6235177">(</span><span class="ident" id="6235178">line</span>&nbsp;<span class="builtintype" id="6235183">int</span><span class="op" id="6235186">)</span>&nbsp;<span class="op" id="6235188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235191">defer</span>&nbsp;<span class="keyword" id="6235197">func</span><span class="op" id="6235201">(</span><span class="op" id="6235202">)</span>&nbsp;<span class="op" id="6235204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235208">if</span>&nbsp;<span class="builtinfunc" id="6235211">recover</span><span class="op" id="6235218">(</span><span class="op" id="6235219">)</span>&nbsp;<span class="op" id="6235221">!=</span>&nbsp;<span class="ident" id="6235224">nil</span>&nbsp;<span class="op" id="6235228">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235233">line</span>&nbsp;<span class="op" id="6235238">=</span>&nbsp;<span class="op" id="6235240">-</span><span class="num" id="6235241">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235248">}</span><span class="op" id="6235249">(</span><span class="op" id="6235250">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235254">f</span>&nbsp;<span class="op" id="6235256">:=</span>&nbsp;<span class="ident" id="6235259">t</span><span class="op" id="6235260">.</span><span class="ident" id="6235261">findFunc</span><span class="op" id="6235269">(</span><span class="ident" id="6235270">pc</span><span class="op" id="6235272">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235275">if</span>&nbsp;<span class="ident" id="6235278">f</span>&nbsp;<span class="op" id="6235280">==</span>&nbsp;<span class="ident" id="6235283">nil</span>&nbsp;<span class="op" id="6235287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235291">return</span>&nbsp;<span class="op" id="6235298">-</span><span class="num" id="6235299">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235305">entry</span>&nbsp;<span class="op" id="6235311">:=</span>&nbsp;<span class="ident" id="6235314">t</span><span class="op" id="6235315">.</span><span class="builtintype" id="6235316">uintptr</span><span class="op" id="6235323">(</span><span class="ident" id="6235324">f</span><span class="op" id="6235325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235328">linetab</span>&nbsp;<span class="op" id="6235336">:=</span>&nbsp;<span class="ident" id="6235339">t</span><span class="op" id="6235340">.</span><span class="ident" id="6235341">binary</span><span class="op" id="6235347">.</span><span class="ident" id="6235348">Uint32</span><span class="op" id="6235354">(</span><span class="ident" id="6235355">f</span><span class="op" id="6235356">[</span><span class="ident" id="6235357">t</span><span class="op" id="6235358">.</span><span class="ident" id="6235359">ptrsize</span><span class="op" id="6235366">+</span><span class="num" id="6235367">5</span><span class="op" id="6235368">*</span><span class="num" id="6235369">4</span><span class="op" id="6235370">:</span><span class="op" id="6235371">]</span><span class="op" id="6235372">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235375">return</span>&nbsp;<span class="builtintype" id="6235382">int</span><span class="op" id="6235385">(</span><span class="ident" id="6235386">t</span><span class="op" id="6235387">.</span><span class="ident" id="6235388">pcvalue</span><span class="op" id="6235395">(</span><span class="ident" id="6235396">linetab</span><span class="op" id="6235403">,</span>&nbsp;<span class="ident" id="6235405">entry</span><span class="op" id="6235410">,</span>&nbsp;<span class="ident" id="6235412">pc</span><span class="op" id="6235414">)</span><span class="op" id="6235415">)</span><br>
<span class="lineno"></span><span class="op" id="6235417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6235420">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6235497">func</span>&nbsp;<span class="op" id="6235502">(</span><span class="ident" id="6235503">t</span>&nbsp;<span class="op" id="6235505">*</span><span class="ident" id="6235506">LineTable</span><span class="op" id="6235515">)</span>&nbsp;<span class="ident" id="6235517">go12PCToFile</span><span class="op" id="6235529">(</span><span class="ident" id="6235530">pc</span>&nbsp;<span class="ident" id="6235533">uint64</span><span class="op" id="6235539">)</span>&nbsp;<span class="op" id="6235541">(</span><span class="ident" id="6235542">file</span>&nbsp;<span class="builtintype" id="6235547">string</span><span class="op" id="6235553">)</span>&nbsp;<span class="op" id="6235555">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235558">defer</span>&nbsp;<span class="keyword" id="6235564">func</span><span class="op" id="6235568">(</span><span class="op" id="6235569">)</span>&nbsp;<span class="op" id="6235571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235575">if</span>&nbsp;<span class="builtinfunc" id="6235578">recover</span><span class="op" id="6235585">(</span><span class="op" id="6235586">)</span>&nbsp;<span class="op" id="6235588">!=</span>&nbsp;<span class="ident" id="6235591">nil</span>&nbsp;<span class="op" id="6235595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235600">file</span>&nbsp;<span class="op" id="6235605">=</span>&nbsp;<span class="string" id="6235607">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235615">}</span><span class="op" id="6235616">(</span><span class="op" id="6235617">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235621">f</span>&nbsp;<span class="op" id="6235623">:=</span>&nbsp;<span class="ident" id="6235626">t</span><span class="op" id="6235627">.</span><span class="ident" id="6235628">findFunc</span><span class="op" id="6235636">(</span><span class="ident" id="6235637">pc</span><span class="op" id="6235639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235642">if</span>&nbsp;<span class="ident" id="6235645">f</span>&nbsp;<span class="op" id="6235647">==</span>&nbsp;<span class="ident" id="6235650">nil</span>&nbsp;<span class="op" id="6235654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235658">return</span>&nbsp;<span class="string" id="6235665">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235669">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235672">entry</span>&nbsp;<span class="op" id="6235678">:=</span>&nbsp;<span class="ident" id="6235681">t</span><span class="op" id="6235682">.</span><span class="builtintype" id="6235683">uintptr</span><span class="op" id="6235690">(</span><span class="ident" id="6235691">f</span><span class="op" id="6235692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235695">filetab</span>&nbsp;<span class="op" id="6235703">:=</span>&nbsp;<span class="ident" id="6235706">t</span><span class="op" id="6235707">.</span><span class="ident" id="6235708">binary</span><span class="op" id="6235714">.</span><span class="ident" id="6235715">Uint32</span><span class="op" id="6235721">(</span><span class="ident" id="6235722">f</span><span class="op" id="6235723">[</span><span class="ident" id="6235724">t</span><span class="op" id="6235725">.</span><span class="ident" id="6235726">ptrsize</span><span class="op" id="6235733">+</span><span class="num" id="6235734">4</span><span class="op" id="6235735">*</span><span class="num" id="6235736">4</span><span class="op" id="6235737">:</span><span class="op" id="6235738">]</span><span class="op" id="6235739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6235742">fno</span>&nbsp;<span class="op" id="6235746">:=</span>&nbsp;<span class="ident" id="6235749">t</span><span class="op" id="6235750">.</span><span class="ident" id="6235751">pcvalue</span><span class="op" id="6235758">(</span><span class="ident" id="6235759">filetab</span><span class="op" id="6235766">,</span>&nbsp;<span class="ident" id="6235768">entry</span><span class="op" id="6235773">,</span>&nbsp;<span class="ident" id="6235775">pc</span><span class="op" id="6235777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235780">if</span>&nbsp;<span class="ident" id="6235783">fno</span>&nbsp;<span class="op" id="6235787">&lt;=</span>&nbsp;<span class="num" id="6235790">0</span>&nbsp;<span class="op" id="6235792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235796">return</span>&nbsp;<span class="string" id="6235803">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6235807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6235810">return</span>&nbsp;<span class="ident" id="6235817">t</span><span class="op" id="6235818">.</span><span class="builtintype" id="6235819">string</span><span class="op" id="6235825">(</span><span class="ident" id="6235826">t</span><span class="op" id="6235827">.</span><span class="ident" id="6235828">binary</span><span class="op" id="6235834">.</span><span class="ident" id="6235835">Uint32</span><span class="op" id="6235841">(</span><span class="ident" id="6235842">t</span><span class="op" id="6235843">.</span><span class="ident" id="6235844">filetab</span><span class="op" id="6235851">[</span><span class="num" id="6235852">4</span><span class="op" id="6235853">*</span><span class="ident" id="6235854">fno</span><span class="op" id="6235857">:</span><span class="op" id="6235858">]</span><span class="op" id="6235859">)</span><span class="op" id="6235860">)</span><br>
<span class="lineno"></span><span class="op" id="6235862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6235865">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="6235954">func</span>&nbsp;<span class="op" id="6235959">(</span><span class="ident" id="6235960">t</span>&nbsp;<span class="op" id="6235962">*</span><span class="ident" id="6235963">LineTable</span><span class="op" id="6235972">)</span>&nbsp;<span class="ident" id="6235974">go12LineToPC</span><span class="op" id="6235986">(</span><span class="ident" id="6235987">file</span>&nbsp;<span class="builtintype" id="6235992">string</span><span class="op" id="6235998">,</span>&nbsp;<span class="ident" id="6236000">line</span>&nbsp;<span class="builtintype" id="6236005">int</span><span class="op" id="6236008">)</span>&nbsp;<span class="op" id="6236010">(</span><span class="ident" id="6236011">pc</span>&nbsp;<span class="ident" id="6236014">uint64</span><span class="op" id="6236020">)</span>&nbsp;<span class="op" id="6236022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236025">defer</span>&nbsp;<span class="keyword" id="6236031">func</span><span class="op" id="6236035">(</span><span class="op" id="6236036">)</span>&nbsp;<span class="op" id="6236038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236042">if</span>&nbsp;<span class="builtinfunc" id="6236045">recover</span><span class="op" id="6236052">(</span><span class="op" id="6236053">)</span>&nbsp;<span class="op" id="6236055">!=</span>&nbsp;<span class="ident" id="6236058">nil</span>&nbsp;<span class="op" id="6236062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236067">pc</span>&nbsp;<span class="op" id="6236070">=</span>&nbsp;<span class="num" id="6236072">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236076">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236079">}</span><span class="op" id="6236080">(</span><span class="op" id="6236081">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236085">t</span><span class="op" id="6236086">.</span><span class="ident" id="6236087">initFileMap</span><span class="op" id="6236098">(</span><span class="op" id="6236099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236102">filenum</span>&nbsp;<span class="op" id="6236110">:=</span>&nbsp;<span class="ident" id="6236113">t</span><span class="op" id="6236114">.</span><span class="ident" id="6236115">fileMap</span><span class="op" id="6236122">[</span><span class="ident" id="6236123">file</span><span class="op" id="6236127">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236130">if</span>&nbsp;<span class="ident" id="6236133">filenum</span>&nbsp;<span class="op" id="6236141">==</span>&nbsp;<span class="num" id="6236144">0</span>&nbsp;<span class="op" id="6236146">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236150">return</span>&nbsp;<span class="num" id="6236157">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6236164">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6236188">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6236265">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236338">for</span>&nbsp;<span class="ident" id="6236342">i</span>&nbsp;<span class="op" id="6236344">:=</span>&nbsp;<span class="builtintype" id="6236347">uint32</span><span class="op" id="6236353">(</span><span class="num" id="6236354">0</span><span class="op" id="6236355">)</span><span class="op" id="6236356">;</span>&nbsp;<span class="ident" id="6236358">i</span>&nbsp;<span class="op" id="6236360">&lt;</span>&nbsp;<span class="ident" id="6236362">t</span><span class="op" id="6236363">.</span><span class="ident" id="6236364">nfunctab</span><span class="op" id="6236372">;</span>&nbsp;<span class="ident" id="6236374">i</span><span class="op" id="6236375">++</span>&nbsp;<span class="op" id="6236378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236382">f</span>&nbsp;<span class="op" id="6236384">:=</span>&nbsp;<span class="ident" id="6236387">t</span><span class="op" id="6236388">.</span><span class="ident" id="6236389">Data</span><span class="op" id="6236393">[</span><span class="ident" id="6236394">t</span><span class="op" id="6236395">.</span><span class="builtintype" id="6236396">uintptr</span><span class="op" id="6236403">(</span><span class="ident" id="6236404">t</span><span class="op" id="6236405">.</span><span class="ident" id="6236406">functab</span><span class="op" id="6236413">[</span><span class="num" id="6236414">2</span><span class="op" id="6236415">*</span><span class="ident" id="6236416">t</span><span class="op" id="6236417">.</span><span class="ident" id="6236418">ptrsize</span><span class="op" id="6236425">*</span><span class="ident" id="6236426">i</span><span class="op" id="6236427">+</span><span class="ident" id="6236428">t</span><span class="op" id="6236429">.</span><span class="ident" id="6236430">ptrsize</span><span class="op" id="6236437">:</span><span class="op" id="6236438">]</span><span class="op" id="6236439">)</span><span class="op" id="6236440">:</span><span class="op" id="6236441">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236445">entry</span>&nbsp;<span class="op" id="6236451">:=</span>&nbsp;<span class="ident" id="6236454">t</span><span class="op" id="6236455">.</span><span class="builtintype" id="6236456">uintptr</span><span class="op" id="6236463">(</span><span class="ident" id="6236464">f</span><span class="op" id="6236465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236469">filetab</span>&nbsp;<span class="op" id="6236477">:=</span>&nbsp;<span class="ident" id="6236480">t</span><span class="op" id="6236481">.</span><span class="ident" id="6236482">binary</span><span class="op" id="6236488">.</span><span class="ident" id="6236489">Uint32</span><span class="op" id="6236495">(</span><span class="ident" id="6236496">f</span><span class="op" id="6236497">[</span><span class="ident" id="6236498">t</span><span class="op" id="6236499">.</span><span class="ident" id="6236500">ptrsize</span><span class="op" id="6236507">+</span><span class="num" id="6236508">4</span><span class="op" id="6236509">*</span><span class="num" id="6236510">4</span><span class="op" id="6236511">:</span><span class="op" id="6236512">]</span><span class="op" id="6236513">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236517">linetab</span>&nbsp;<span class="op" id="6236525">:=</span>&nbsp;<span class="ident" id="6236528">t</span><span class="op" id="6236529">.</span><span class="ident" id="6236530">binary</span><span class="op" id="6236536">.</span><span class="ident" id="6236537">Uint32</span><span class="op" id="6236543">(</span><span class="ident" id="6236544">f</span><span class="op" id="6236545">[</span><span class="ident" id="6236546">t</span><span class="op" id="6236547">.</span><span class="ident" id="6236548">ptrsize</span><span class="op" id="6236555">+</span><span class="num" id="6236556">5</span><span class="op" id="6236557">*</span><span class="num" id="6236558">4</span><span class="op" id="6236559">:</span><span class="op" id="6236560">]</span><span class="op" id="6236561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236565">pc</span>&nbsp;<span class="op" id="6236568">:=</span>&nbsp;<span class="ident" id="6236571">t</span><span class="op" id="6236572">.</span><span class="ident" id="6236573">findFileLine</span><span class="op" id="6236585">(</span><span class="ident" id="6236586">entry</span><span class="op" id="6236591">,</span>&nbsp;<span class="ident" id="6236593">filetab</span><span class="op" id="6236600">,</span>&nbsp;<span class="ident" id="6236602">linetab</span><span class="op" id="6236609">,</span>&nbsp;<span class="builtintype" id="6236611">int32</span><span class="op" id="6236616">(</span><span class="ident" id="6236617">filenum</span><span class="op" id="6236624">)</span><span class="op" id="6236625">,</span>&nbsp;<span class="builtintype" id="6236627">int32</span><span class="op" id="6236632">(</span><span class="ident" id="6236633">line</span><span class="op" id="6236637">)</span><span class="op" id="6236638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236642">if</span>&nbsp;<span class="ident" id="6236645">pc</span>&nbsp;<span class="op" id="6236648">!=</span>&nbsp;<span class="num" id="6236651">0</span>&nbsp;<span class="op" id="6236653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236658">return</span>&nbsp;<span class="ident" id="6236665">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236670">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236676">return</span>&nbsp;<span class="num" id="6236683">0</span><br>
<span class="lineno"></span><span class="op" id="6236685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6236688">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="6236754">func</span>&nbsp;<span class="op" id="6236759">(</span><span class="ident" id="6236760">t</span>&nbsp;<span class="op" id="6236762">*</span><span class="ident" id="6236763">LineTable</span><span class="op" id="6236772">)</span>&nbsp;<span class="ident" id="6236774">initFileMap</span><span class="op" id="6236785">(</span><span class="op" id="6236786">)</span>&nbsp;<span class="op" id="6236788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236791">t</span><span class="op" id="6236792">.</span><span class="ident" id="6236793">mu</span><span class="op" id="6236795">.</span><span class="ident" id="6236796">Lock</span><span class="op" id="6236800">(</span><span class="op" id="6236801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236804">defer</span>&nbsp;<span class="ident" id="6236810">t</span><span class="op" id="6236811">.</span><span class="ident" id="6236812">mu</span><span class="op" id="6236814">.</span><span class="ident" id="6236815">Unlock</span><span class="op" id="6236821">(</span><span class="op" id="6236822">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236826">if</span>&nbsp;<span class="ident" id="6236829">t</span><span class="op" id="6236830">.</span><span class="ident" id="6236831">fileMap</span>&nbsp;<span class="op" id="6236839">!=</span>&nbsp;<span class="ident" id="6236842">nil</span>&nbsp;<span class="op" id="6236846">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236850">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236861">m</span>&nbsp;<span class="op" id="6236863">:=</span>&nbsp;<span class="builtinfunc" id="6236866">make</span><span class="op" id="6236870">(</span><span class="keyword" id="6236871">map</span><span class="op" id="6236874">[</span><span class="builtintype" id="6236875">string</span><span class="op" id="6236881">]</span><span class="builtintype" id="6236882">uint32</span><span class="op" id="6236888">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6236892">for</span>&nbsp;<span class="ident" id="6236896">i</span>&nbsp;<span class="op" id="6236898">:=</span>&nbsp;<span class="builtintype" id="6236901">uint32</span><span class="op" id="6236907">(</span><span class="num" id="6236908">1</span><span class="op" id="6236909">)</span><span class="op" id="6236910">;</span>&nbsp;<span class="ident" id="6236912">i</span>&nbsp;<span class="op" id="6236914">&lt;</span>&nbsp;<span class="ident" id="6236916">t</span><span class="op" id="6236917">.</span><span class="ident" id="6236918">nfiletab</span><span class="op" id="6236926">;</span>&nbsp;<span class="ident" id="6236928">i</span><span class="op" id="6236929">++</span>&nbsp;<span class="op" id="6236932">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236936">s</span>&nbsp;<span class="op" id="6236938">:=</span>&nbsp;<span class="ident" id="6236941">t</span><span class="op" id="6236942">.</span><span class="builtintype" id="6236943">string</span><span class="op" id="6236949">(</span><span class="ident" id="6236950">t</span><span class="op" id="6236951">.</span><span class="ident" id="6236952">binary</span><span class="op" id="6236958">.</span><span class="ident" id="6236959">Uint32</span><span class="op" id="6236965">(</span><span class="ident" id="6236966">t</span><span class="op" id="6236967">.</span><span class="ident" id="6236968">filetab</span><span class="op" id="6236975">[</span><span class="num" id="6236976">4</span><span class="op" id="6236977">*</span><span class="ident" id="6236978">i</span><span class="op" id="6236979">:</span><span class="op" id="6236980">]</span><span class="op" id="6236981">)</span><span class="op" id="6236982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236986">m</span><span class="op" id="6236987">[</span><span class="ident" id="6236988">s</span><span class="op" id="6236989">]</span>&nbsp;<span class="op" id="6236991">=</span>&nbsp;<span class="ident" id="6236993">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6236996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6236999">t</span><span class="op" id="6237000">.</span><span class="ident" id="6237001">fileMap</span>&nbsp;<span class="op" id="6237009">=</span>&nbsp;<span class="ident" id="6237011">m</span><br>
<span class="lineno"></span><span class="op" id="6237013">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6237016">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="6237088">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="6237165">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="6237230">func</span>&nbsp;<span class="op" id="6237235">(</span><span class="ident" id="6237236">t</span>&nbsp;<span class="op" id="6237238">*</span><span class="ident" id="6237239">LineTable</span><span class="op" id="6237248">)</span>&nbsp;<span class="ident" id="6237250">go12MapFiles</span><span class="op" id="6237262">(</span><span class="ident" id="6237263">m</span>&nbsp;<span class="keyword" id="6237265">map</span><span class="op" id="6237268">[</span><span class="builtintype" id="6237269">string</span><span class="op" id="6237275">]</span><span class="op" id="6237276">*</span><span class="ident" id="6237277">Obj</span><span class="op" id="6237280">,</span>&nbsp;<span class="ident" id="6237282">obj</span>&nbsp;<span class="op" id="6237286">*</span><span class="ident" id="6237287">Obj</span><span class="op" id="6237290">)</span>&nbsp;<span class="op" id="6237292">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6237295">defer</span>&nbsp;<span class="keyword" id="6237301">func</span><span class="op" id="6237305">(</span><span class="op" id="6237306">)</span>&nbsp;<span class="op" id="6237308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6237312">recover</span><span class="op" id="6237319">(</span><span class="op" id="6237320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6237323">}</span><span class="op" id="6237324">(</span><span class="op" id="6237325">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6237329">t</span><span class="op" id="6237330">.</span><span class="ident" id="6237331">initFileMap</span><span class="op" id="6237342">(</span><span class="op" id="6237343">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6237346">for</span>&nbsp;<span class="ident" id="6237350">file</span>&nbsp;<span class="op" id="6237355">:=</span>&nbsp;<span class="keyword" id="6237358">range</span>&nbsp;<span class="ident" id="6237364">t</span><span class="op" id="6237365">.</span><span class="ident" id="6237366">fileMap</span>&nbsp;<span class="op" id="6237374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6237378">m</span><span class="op" id="6237379">[</span><span class="ident" id="6237380">file</span><span class="op" id="6237384">]</span>&nbsp;<span class="op" id="6237386">=</span>&nbsp;<span class="ident" id="6237388">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6237393">}</span><br>
<span class="lineno"></span><span class="op" id="6237395">}</span>
</div>
</body>
</html>
