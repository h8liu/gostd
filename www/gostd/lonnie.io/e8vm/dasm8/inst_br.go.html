<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/dasm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/dasm.go.html">dasm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/line.go.html">line.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/reg.go.html">reg.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="5536553">package</span>&nbsp;<span class="ident" id="5536561">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5536568">import</span>&nbsp;<span class="op" id="5536575">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5536578">&#34;fmt&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5536584">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5536587">var</span>&nbsp;<span class="op" id="5536591">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536594">opBrMap</span>&nbsp;<span class="op" id="5536602">=</span>&nbsp;<span class="keyword" id="5536604">map</span><span class="op" id="5536607">[</span><span class="builtintype" id="5536608">uint32</span><span class="op" id="5536614">]</span><span class="builtintype" id="5536615">string</span><span class="op" id="5536621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5536625">32</span><span class="op" id="5536627">:</span>&nbsp;<span class="string" id="5536629">&#34;bne&#34;</span><span class="op" id="5536634">,</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="5536638">33</span><span class="op" id="5536640">:</span>&nbsp;<span class="string" id="5536642">&#34;beq&#34;</span><span class="op" id="5536647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5536650">}</span><br>
<span class="lineno"></span><span class="op" id="5536652">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5536655">func</span>&nbsp;<span class="ident" id="5536660">instBr</span><span class="op" id="5536666">(</span><span class="ident" id="5536667">addr</span>&nbsp;<span class="builtintype" id="5536672">uint32</span><span class="op" id="5536678">,</span>&nbsp;<span class="ident" id="5536680">in</span>&nbsp;<span class="builtintype" id="5536683">uint32</span><span class="op" id="5536689">)</span>&nbsp;<span class="op" id="5536691">*</span><span class="ident" id="5536692">Line</span>&nbsp;<span class="op" id="5536697">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536700">op</span>&nbsp;<span class="op" id="5536703">:=</span>&nbsp;<span class="op" id="5536706">(</span><span class="ident" id="5536707">in</span>&nbsp;<span class="op" id="5536710">&gt;&gt;</span>&nbsp;<span class="num" id="5536713">24</span><span class="op" id="5536715">)</span>&nbsp;<span class="op" id="5536717">&amp;</span>&nbsp;<span class="num" id="5536719">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536725">src1</span>&nbsp;<span class="op" id="5536730">:=</span>&nbsp;<span class="ident" id="5536733">regStr</span><span class="op" id="5536739">(</span><span class="op" id="5536740">(</span><span class="ident" id="5536741">in</span>&nbsp;<span class="op" id="5536744">&gt;&gt;</span>&nbsp;<span class="num" id="5536747">21</span><span class="op" id="5536749">)</span>&nbsp;<span class="op" id="5536751">&amp;</span>&nbsp;<span class="num" id="5536753">0x7</span><span class="op" id="5536756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536759">src2</span>&nbsp;<span class="op" id="5536764">:=</span>&nbsp;<span class="ident" id="5536767">regStr</span><span class="op" id="5536773">(</span><span class="op" id="5536774">(</span><span class="ident" id="5536775">in</span>&nbsp;<span class="op" id="5536778">&gt;&gt;</span>&nbsp;<span class="num" id="5536781">18</span><span class="op" id="5536783">)</span>&nbsp;<span class="op" id="5536785">&amp;</span>&nbsp;<span class="num" id="5536787">0x7</span><span class="op" id="5536790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536793">im</span>&nbsp;<span class="op" id="5536796">:=</span>&nbsp;<span class="ident" id="5536799">in</span>&nbsp;<span class="op" id="5536802">&amp;</span>&nbsp;<span class="num" id="5536804">0x3ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536813">off</span>&nbsp;<span class="op" id="5536817">:=</span>&nbsp;<span class="builtintype" id="5536820">int32</span><span class="op" id="5536825">(</span><span class="ident" id="5536826">im</span><span class="op" id="5536828">&lt;&lt;</span><span class="num" id="5536830">14</span><span class="op" id="5536832">)</span>&nbsp;<span class="op" id="5536834">&gt;&gt;</span>&nbsp;<span class="num" id="5536837">12</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536842">ret</span>&nbsp;<span class="op" id="5536846">:=</span>&nbsp;<span class="ident" id="5536849">newLine</span><span class="op" id="5536856">(</span><span class="ident" id="5536857">addr</span><span class="op" id="5536861">,</span>&nbsp;<span class="ident" id="5536863">in</span><span class="op" id="5536865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5536868">if</span>&nbsp;<span class="ident" id="5536871">opStr</span><span class="op" id="5536876">,</span>&nbsp;<span class="ident" id="5536878">found</span>&nbsp;<span class="op" id="5536884">:=</span>&nbsp;<span class="ident" id="5536887">opBrMap</span><span class="op" id="5536894">[</span><span class="ident" id="5536895">op</span><span class="op" id="5536897">]</span><span class="op" id="5536898">;</span>&nbsp;<span class="ident" id="5536900">found</span>&nbsp;<span class="op" id="5536906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536910">s</span>&nbsp;<span class="op" id="5536912">:=</span>&nbsp;<span class="ident" id="5536915">fmt</span><span class="op" id="5536918">.</span><span class="ident" id="5536919">Sprintf</span><span class="op" id="5536926">(</span><span class="string" id="5536927">&#34;%s&nbsp;%s&nbsp;%s&nbsp;%d&#34;</span><span class="op" id="5536940">,</span>&nbsp;<span class="ident" id="5536942">opStr</span><span class="op" id="5536947">,</span>&nbsp;<span class="ident" id="5536949">src1</span><span class="op" id="5536953">,</span>&nbsp;<span class="ident" id="5536955">src2</span><span class="op" id="5536959">,</span>&nbsp;<span class="ident" id="5536961">off</span><span class="op" id="5536964">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536969">ret</span><span class="op" id="5536972">.</span><span class="ident" id="5536973">Str</span>&nbsp;<span class="op" id="5536977">=</span>&nbsp;<span class="ident" id="5536979">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536983">ret</span><span class="op" id="5536986">.</span><span class="ident" id="5536987">IsJump</span>&nbsp;<span class="op" id="5536994">=</span>&nbsp;<span class="builtintype" id="5536996">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5537003">ret</span><span class="op" id="5537006">.</span><span class="ident" id="5537007">To</span>&nbsp;<span class="op" id="5537010">=</span>&nbsp;<span class="ident" id="5537012">addr</span>&nbsp;<span class="op" id="5537017">+</span>&nbsp;<span class="num" id="5537019">4</span>&nbsp;<span class="op" id="5537021">+</span>&nbsp;<span class="builtintype" id="5537023">uint32</span><span class="op" id="5537029">(</span><span class="ident" id="5537030">off</span><span class="op" id="5537033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5537036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5537040">return</span>&nbsp;<span class="ident" id="5537047">ret</span><br>
<span class="lineno"></span><span class="op" id="5537051">}</span>
</div>
</body>
</html>
