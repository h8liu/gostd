<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2167935">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2167990">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2168044">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2168095">package</span>&nbsp;<span class="ident" id="2168103">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2168112">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2168184">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2168258">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2168285">func</span>&nbsp;<span class="ident" id="2168290">FormatUint</span><span class="op" id="2168300">(</span><span class="ident" id="2168301">i</span>&nbsp;<span class="ident" id="2168303">uint64</span><span class="op" id="2168309">,</span>&nbsp;<span class="ident" id="2168311">base</span>&nbsp;<span class="builtintype" id="2168316">int</span><span class="op" id="2168319">)</span>&nbsp;<span class="builtintype" id="2168321">string</span>&nbsp;<span class="op" id="2168328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2168331">_</span><span class="op" id="2168332">,</span>&nbsp;<span class="ident" id="2168334">s</span>&nbsp;<span class="op" id="2168336">:=</span>&nbsp;<span class="ident" id="2168339">formatBits</span><span class="op" id="2168349">(</span><span class="ident" id="2168350">nil</span><span class="op" id="2168353">,</span>&nbsp;<span class="ident" id="2168355">i</span><span class="op" id="2168356">,</span>&nbsp;<span class="ident" id="2168358">base</span><span class="op" id="2168362">,</span>&nbsp;<span class="ident" id="2168364">false</span><span class="op" id="2168369">,</span>&nbsp;<span class="ident" id="2168371">false</span><span class="op" id="2168376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2168379">return</span>&nbsp;<span class="ident" id="2168386">s</span><br>
<span class="lineno"></span><span class="op" id="2168388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2168391">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2168462">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2168536">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2168563">func</span>&nbsp;<span class="ident" id="2168568">FormatInt</span><span class="op" id="2168577">(</span><span class="ident" id="2168578">i</span>&nbsp;<span class="ident" id="2168580">int64</span><span class="op" id="2168585">,</span>&nbsp;<span class="ident" id="2168587">base</span>&nbsp;<span class="builtintype" id="2168592">int</span><span class="op" id="2168595">)</span>&nbsp;<span class="builtintype" id="2168597">string</span>&nbsp;<span class="op" id="2168604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2168607">_</span><span class="op" id="2168608">,</span>&nbsp;<span class="ident" id="2168610">s</span>&nbsp;<span class="op" id="2168612">:=</span>&nbsp;<span class="ident" id="2168615">formatBits</span><span class="op" id="2168625">(</span><span class="ident" id="2168626">nil</span><span class="op" id="2168629">,</span>&nbsp;<span class="ident" id="2168631">uint64</span><span class="op" id="2168637">(</span><span class="ident" id="2168638">i</span><span class="op" id="2168639">)</span><span class="op" id="2168640">,</span>&nbsp;<span class="ident" id="2168642">base</span><span class="op" id="2168646">,</span>&nbsp;<span class="ident" id="2168648">i</span>&nbsp;<span class="op" id="2168650">&lt;</span>&nbsp;<span class="num" id="2168652">0</span><span class="op" id="2168653">,</span>&nbsp;<span class="ident" id="2168655">false</span><span class="op" id="2168660">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2168663">return</span>&nbsp;<span class="ident" id="2168670">s</span><br>
<span class="lineno"></span><span class="op" id="2168672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2168675">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2168718">func</span>&nbsp;<span class="ident" id="2168723">Itoa</span><span class="op" id="2168727">(</span><span class="ident" id="2168728">i</span>&nbsp;<span class="builtintype" id="2168730">int</span><span class="op" id="2168733">)</span>&nbsp;<span class="builtintype" id="2168735">string</span>&nbsp;<span class="op" id="2168742">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2168745">return</span>&nbsp;<span class="ident" id="2168752">FormatInt</span><span class="op" id="2168761">(</span><span class="ident" id="2168762">int64</span><span class="op" id="2168767">(</span><span class="ident" id="2168768">i</span><span class="op" id="2168769">)</span><span class="op" id="2168770">,</span>&nbsp;<span class="num" id="2168772">10</span><span class="op" id="2168774">)</span><br>
<span class="lineno"></span><span class="op" id="2168776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2168779">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2168834">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2168904">func</span>&nbsp;<span class="ident" id="2168909">AppendInt</span><span class="op" id="2168918">(</span><span class="ident" id="2168919">dst</span>&nbsp;<span class="op" id="2168923">[</span><span class="op" id="2168924">]</span><span class="builtintype" id="2168925">byte</span><span class="op" id="2168929">,</span>&nbsp;<span class="ident" id="2168931">i</span>&nbsp;<span class="ident" id="2168933">int64</span><span class="op" id="2168938">,</span>&nbsp;<span class="ident" id="2168940">base</span>&nbsp;<span class="builtintype" id="2168945">int</span><span class="op" id="2168948">)</span>&nbsp;<span class="op" id="2168950">[</span><span class="op" id="2168951">]</span><span class="builtintype" id="2168952">byte</span>&nbsp;<span class="op" id="2168957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2168960">dst</span><span class="op" id="2168963">,</span>&nbsp;<span class="ident" id="2168965">_</span>&nbsp;<span class="op" id="2168967">=</span>&nbsp;<span class="ident" id="2168969">formatBits</span><span class="op" id="2168979">(</span><span class="ident" id="2168980">dst</span><span class="op" id="2168983">,</span>&nbsp;<span class="ident" id="2168985">uint64</span><span class="op" id="2168991">(</span><span class="ident" id="2168992">i</span><span class="op" id="2168993">)</span><span class="op" id="2168994">,</span>&nbsp;<span class="ident" id="2168996">base</span><span class="op" id="2169000">,</span>&nbsp;<span class="ident" id="2169002">i</span>&nbsp;<span class="op" id="2169004">&lt;</span>&nbsp;<span class="num" id="2169006">0</span><span class="op" id="2169007">,</span>&nbsp;<span class="ident" id="2169009">true</span><span class="op" id="2169013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2169016">return</span>&nbsp;<span class="ident" id="2169023">dst</span><br>
<span class="lineno"></span><span class="op" id="2169027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2169030">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2169095">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2169166">func</span>&nbsp;<span class="ident" id="2169171">AppendUint</span><span class="op" id="2169181">(</span><span class="ident" id="2169182">dst</span>&nbsp;<span class="op" id="2169186">[</span><span class="op" id="2169187">]</span><span class="builtintype" id="2169188">byte</span><span class="op" id="2169192">,</span>&nbsp;<span class="ident" id="2169194">i</span>&nbsp;<span class="ident" id="2169196">uint64</span><span class="op" id="2169202">,</span>&nbsp;<span class="ident" id="2169204">base</span>&nbsp;<span class="builtintype" id="2169209">int</span><span class="op" id="2169212">)</span>&nbsp;<span class="op" id="2169214">[</span><span class="op" id="2169215">]</span><span class="builtintype" id="2169216">byte</span>&nbsp;<span class="op" id="2169221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2169224">dst</span><span class="op" id="2169227">,</span>&nbsp;<span class="ident" id="2169229">_</span>&nbsp;<span class="op" id="2169231">=</span>&nbsp;<span class="ident" id="2169233">formatBits</span><span class="op" id="2169243">(</span><span class="ident" id="2169244">dst</span><span class="op" id="2169247">,</span>&nbsp;<span class="ident" id="2169249">i</span><span class="op" id="2169250">,</span>&nbsp;<span class="ident" id="2169252">base</span><span class="op" id="2169256">,</span>&nbsp;<span class="ident" id="2169258">false</span><span class="op" id="2169263">,</span>&nbsp;<span class="ident" id="2169265">true</span><span class="op" id="2169269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2169272">return</span>&nbsp;<span class="ident" id="2169279">dst</span><br>
<span class="lineno">40</span><span class="op" id="2169283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2169286">const</span>&nbsp;<span class="op" id="2169292">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2169295">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2169304">=</span>&nbsp;<span class="string" id="2169306">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2169346">digits01</span>&nbsp;<span class="op" id="2169355">=</span>&nbsp;<span class="string" id="2169357">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2169461">digits10</span>&nbsp;<span class="op" id="2169470">=</span>&nbsp;<span class="string" id="2169472">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2169575">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2169578">var</span>&nbsp;<span class="ident" id="2169582">shifts</span>&nbsp;<span class="op" id="2169589">=</span>&nbsp;<span class="op" id="2169591">[</span><span class="builtinfunc" id="2169592">len</span><span class="op" id="2169595">(</span><span class="ident" id="2169596">digits</span><span class="op" id="2169602">)</span>&nbsp;<span class="op" id="2169604">+</span>&nbsp;<span class="num" id="2169606">1</span><span class="op" id="2169607">]</span><span class="builtintype" id="2169608">uint</span><span class="op" id="2169612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2169615">1</span>&nbsp;<span class="op" id="2169617">&lt;&lt;</span>&nbsp;<span class="num" id="2169620">1</span><span class="op" id="2169621">:</span>&nbsp;<span class="num" id="2169623">1</span><span class="op" id="2169624">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2169627">1</span>&nbsp;<span class="op" id="2169629">&lt;&lt;</span>&nbsp;<span class="num" id="2169632">2</span><span class="op" id="2169633">:</span>&nbsp;<span class="num" id="2169635">2</span><span class="op" id="2169636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2169639">1</span>&nbsp;<span class="op" id="2169641">&lt;&lt;</span>&nbsp;<span class="num" id="2169644">3</span><span class="op" id="2169645">:</span>&nbsp;<span class="num" id="2169647">3</span><span class="op" id="2169648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2169651">1</span>&nbsp;<span class="op" id="2169653">&lt;&lt;</span>&nbsp;<span class="num" id="2169656">4</span><span class="op" id="2169657">:</span>&nbsp;<span class="num" id="2169659">4</span><span class="op" id="2169660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2169663">1</span>&nbsp;<span class="op" id="2169665">&lt;&lt;</span>&nbsp;<span class="num" id="2169668">5</span><span class="op" id="2169669">:</span>&nbsp;<span class="num" id="2169671">5</span><span class="op" id="2169672">,</span><br>
<span class="lineno"></span><span class="op" id="2169674">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2169677">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2169750">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2169820">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2169890">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2169962">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2169993">//</span><br>
<span class="lineno"></span><span class="keyword" id="2169996">func</span>&nbsp;<span class="ident" id="2170001">formatBits</span><span class="op" id="2170011">(</span><span class="ident" id="2170012">dst</span>&nbsp;<span class="op" id="2170016">[</span><span class="op" id="2170017">]</span><span class="builtintype" id="2170018">byte</span><span class="op" id="2170022">,</span>&nbsp;<span class="ident" id="2170024">u</span>&nbsp;<span class="ident" id="2170026">uint64</span><span class="op" id="2170032">,</span>&nbsp;<span class="ident" id="2170034">base</span>&nbsp;<span class="builtintype" id="2170039">int</span><span class="op" id="2170042">,</span>&nbsp;<span class="ident" id="2170044">neg</span><span class="op" id="2170047">,</span>&nbsp;<span class="ident" id="2170049">append_</span>&nbsp;<span class="builtintype" id="2170057">bool</span><span class="op" id="2170061">)</span>&nbsp;<span class="op" id="2170063">(</span><span class="ident" id="2170064">d</span>&nbsp;<span class="op" id="2170066">[</span><span class="op" id="2170067">]</span><span class="builtintype" id="2170068">byte</span><span class="op" id="2170072">,</span>&nbsp;<span class="ident" id="2170074">s</span>&nbsp;<span class="builtintype" id="2170076">string</span><span class="op" id="2170082">)</span>&nbsp;<span class="op" id="2170084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170087">if</span>&nbsp;<span class="ident" id="2170090">base</span>&nbsp;<span class="op" id="2170095">&lt;</span>&nbsp;<span class="num" id="2170097">2</span>&nbsp;<span class="op" id="2170099">||</span>&nbsp;<span class="ident" id="2170102">base</span>&nbsp;<span class="op" id="2170107">&gt;</span>&nbsp;<span class="builtinfunc" id="2170109">len</span><span class="op" id="2170112">(</span><span class="ident" id="2170113">digits</span><span class="op" id="2170119">)</span>&nbsp;<span class="op" id="2170121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2170125">panic</span><span class="op" id="2170130">(</span><span class="string" id="2170131">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2170174">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170180">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170218">var</span>&nbsp;<span class="ident" id="2170222">a</span>&nbsp;<span class="op" id="2170224">[</span><span class="num" id="2170225">64</span>&nbsp;<span class="op" id="2170228">+</span>&nbsp;<span class="num" id="2170230">1</span><span class="op" id="2170231">]</span><span class="builtintype" id="2170232">byte</span>&nbsp;<span class="comment" id="2170237">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170278">i</span>&nbsp;<span class="op" id="2170280">:=</span>&nbsp;<span class="builtinfunc" id="2170283">len</span><span class="op" id="2170286">(</span><span class="ident" id="2170287">a</span><span class="op" id="2170288">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170292">if</span>&nbsp;<span class="ident" id="2170295">neg</span>&nbsp;<span class="op" id="2170299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170303">u</span>&nbsp;<span class="op" id="2170305">=</span>&nbsp;<span class="op" id="2170307">-</span><span class="ident" id="2170308">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170315">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170332">if</span>&nbsp;<span class="ident" id="2170335">base</span>&nbsp;<span class="op" id="2170340">==</span>&nbsp;<span class="num" id="2170343">10</span>&nbsp;<span class="op" id="2170346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170350">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170402">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170459">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170480">for</span>&nbsp;<span class="ident" id="2170484">u</span>&nbsp;<span class="op" id="2170486">&gt;=</span>&nbsp;<span class="num" id="2170489">100</span>&nbsp;<span class="op" id="2170493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170498">i</span>&nbsp;<span class="op" id="2170500">-=</span>&nbsp;<span class="num" id="2170503">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170508">q</span>&nbsp;<span class="op" id="2170510">:=</span>&nbsp;<span class="ident" id="2170513">u</span>&nbsp;<span class="op" id="2170515">/</span>&nbsp;<span class="num" id="2170517">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170524">j</span>&nbsp;<span class="op" id="2170526">:=</span>&nbsp;<span class="builtintype" id="2170529">uintptr</span><span class="op" id="2170536">(</span><span class="ident" id="2170537">u</span>&nbsp;<span class="op" id="2170539">-</span>&nbsp;<span class="ident" id="2170541">q</span><span class="op" id="2170542">*</span><span class="num" id="2170543">100</span><span class="op" id="2170546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170551">a</span><span class="op" id="2170552">[</span><span class="ident" id="2170553">i</span><span class="op" id="2170554">+</span><span class="num" id="2170555">1</span><span class="op" id="2170556">]</span>&nbsp;<span class="op" id="2170558">=</span>&nbsp;<span class="ident" id="2170560">digits01</span><span class="op" id="2170568">[</span><span class="ident" id="2170569">j</span><span class="op" id="2170570">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170575">a</span><span class="op" id="2170576">[</span><span class="ident" id="2170577">i</span><span class="op" id="2170578">+</span><span class="num" id="2170579">0</span><span class="op" id="2170580">]</span>&nbsp;<span class="op" id="2170582">=</span>&nbsp;<span class="ident" id="2170584">digits10</span><span class="op" id="2170592">[</span><span class="ident" id="2170593">j</span><span class="op" id="2170594">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170599">u</span>&nbsp;<span class="op" id="2170601">=</span>&nbsp;<span class="ident" id="2170603">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170611">if</span>&nbsp;<span class="ident" id="2170614">u</span>&nbsp;<span class="op" id="2170616">&gt;=</span>&nbsp;<span class="num" id="2170619">10</span>&nbsp;<span class="op" id="2170622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170627">i</span><span class="op" id="2170628">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170634">q</span>&nbsp;<span class="op" id="2170636">:=</span>&nbsp;<span class="ident" id="2170639">u</span>&nbsp;<span class="op" id="2170641">/</span>&nbsp;<span class="num" id="2170643">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170649">a</span><span class="op" id="2170650">[</span><span class="ident" id="2170651">i</span><span class="op" id="2170652">]</span>&nbsp;<span class="op" id="2170654">=</span>&nbsp;<span class="ident" id="2170656">digits</span><span class="op" id="2170662">[</span><span class="builtintype" id="2170663">uintptr</span><span class="op" id="2170670">(</span><span class="ident" id="2170671">u</span><span class="op" id="2170672">-</span><span class="ident" id="2170673">q</span><span class="op" id="2170674">*</span><span class="num" id="2170675">10</span><span class="op" id="2170677">)</span><span class="op" id="2170678">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170683">u</span>&nbsp;<span class="op" id="2170685">=</span>&nbsp;<span class="ident" id="2170687">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170695">}</span>&nbsp;<span class="keyword" id="2170697">else</span>&nbsp;<span class="keyword" id="2170702">if</span>&nbsp;<span class="ident" id="2170705">s</span>&nbsp;<span class="op" id="2170707">:=</span>&nbsp;<span class="ident" id="2170710">shifts</span><span class="op" id="2170716">[</span><span class="ident" id="2170717">base</span><span class="op" id="2170721">]</span><span class="op" id="2170722">;</span>&nbsp;<span class="ident" id="2170724">s</span>&nbsp;<span class="op" id="2170726">&gt;</span>&nbsp;<span class="num" id="2170728">0</span>&nbsp;<span class="op" id="2170730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170734">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170799">b</span>&nbsp;<span class="op" id="2170801">:=</span>&nbsp;<span class="ident" id="2170804">uint64</span><span class="op" id="2170810">(</span><span class="ident" id="2170811">base</span><span class="op" id="2170815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170819">m</span>&nbsp;<span class="op" id="2170821">:=</span>&nbsp;<span class="builtintype" id="2170824">uintptr</span><span class="op" id="2170831">(</span><span class="ident" id="2170832">b</span><span class="op" id="2170833">)</span>&nbsp;<span class="op" id="2170835">-</span>&nbsp;<span class="num" id="2170837">1</span>&nbsp;<span class="comment" id="2170839">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170856">for</span>&nbsp;<span class="ident" id="2170860">u</span>&nbsp;<span class="op" id="2170862">&gt;=</span>&nbsp;<span class="ident" id="2170865">b</span>&nbsp;<span class="op" id="2170867">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170872">i</span><span class="op" id="2170873">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170879">a</span><span class="op" id="2170880">[</span><span class="ident" id="2170881">i</span><span class="op" id="2170882">]</span>&nbsp;<span class="op" id="2170884">=</span>&nbsp;<span class="ident" id="2170886">digits</span><span class="op" id="2170892">[</span><span class="builtintype" id="2170893">uintptr</span><span class="op" id="2170900">(</span><span class="ident" id="2170901">u</span><span class="op" id="2170902">)</span><span class="op" id="2170903">&amp;</span><span class="ident" id="2170904">m</span><span class="op" id="2170905">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170910">u</span>&nbsp;<span class="op" id="2170912">&gt;&gt;=</span>&nbsp;<span class="ident" id="2170916">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170924">}</span>&nbsp;<span class="keyword" id="2170926">else</span>&nbsp;<span class="op" id="2170931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170935">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170953">b</span>&nbsp;<span class="op" id="2170955">:=</span>&nbsp;<span class="ident" id="2170958">uint64</span><span class="op" id="2170964">(</span><span class="ident" id="2170965">base</span><span class="op" id="2170969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170973">for</span>&nbsp;<span class="ident" id="2170977">u</span>&nbsp;<span class="op" id="2170979">&gt;=</span>&nbsp;<span class="ident" id="2170982">b</span>&nbsp;<span class="op" id="2170984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170989">i</span><span class="op" id="2170990">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2170996">a</span><span class="op" id="2170997">[</span><span class="ident" id="2170998">i</span><span class="op" id="2170999">]</span>&nbsp;<span class="op" id="2171001">=</span>&nbsp;<span class="ident" id="2171003">digits</span><span class="op" id="2171009">[</span><span class="builtintype" id="2171010">uintptr</span><span class="op" id="2171017">(</span><span class="ident" id="2171018">u</span><span class="op" id="2171019">%</span><span class="ident" id="2171020">b</span><span class="op" id="2171021">)</span><span class="op" id="2171022">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171027">u</span>&nbsp;<span class="op" id="2171029">/=</span>&nbsp;<span class="ident" id="2171032">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2171043">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171056">i</span><span class="op" id="2171057">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171061">a</span><span class="op" id="2171062">[</span><span class="ident" id="2171063">i</span><span class="op" id="2171064">]</span>&nbsp;<span class="op" id="2171066">=</span>&nbsp;<span class="ident" id="2171068">digits</span><span class="op" id="2171074">[</span><span class="builtintype" id="2171075">uintptr</span><span class="op" id="2171082">(</span><span class="ident" id="2171083">u</span><span class="op" id="2171084">)</span><span class="op" id="2171085">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2171089">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171110">if</span>&nbsp;<span class="ident" id="2171113">neg</span>&nbsp;<span class="op" id="2171117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171121">i</span><span class="op" id="2171122">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171127">a</span><span class="op" id="2171128">[</span><span class="ident" id="2171129">i</span><span class="op" id="2171130">]</span>&nbsp;<span class="op" id="2171132">=</span>&nbsp;<span class="string" id="2171134">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171143">if</span>&nbsp;<span class="ident" id="2171146">append_</span>&nbsp;<span class="op" id="2171154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171158">d</span>&nbsp;<span class="op" id="2171160">=</span>&nbsp;<span class="builtinfunc" id="2171162">append</span><span class="op" id="2171168">(</span><span class="ident" id="2171169">dst</span><span class="op" id="2171172">,</span>&nbsp;<span class="ident" id="2171174">a</span><span class="op" id="2171175">[</span><span class="ident" id="2171176">i</span><span class="op" id="2171177">:</span><span class="op" id="2171178">]</span><span class="op" id="2171179">...</span><span class="op" id="2171182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171186">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171197">s</span>&nbsp;<span class="op" id="2171199">=</span>&nbsp;<span class="builtintype" id="2171201">string</span><span class="op" id="2171207">(</span><span class="ident" id="2171208">a</span><span class="op" id="2171209">[</span><span class="ident" id="2171210">i</span><span class="op" id="2171211">:</span><span class="op" id="2171212">]</span><span class="op" id="2171213">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171216">return</span><br>
<span class="lineno"></span><span class="op" id="2171223">}</span>
</div>
</body>
</html>
