<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html" class="current">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6300977">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6301033">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6301087">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6301138">package</span>&nbsp;<span class="ident" id="6301146">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6301151">import</span>&nbsp;<span class="op" id="6301158">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301161">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301170">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301182">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301192">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301199">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301210">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6301221">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6301231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6301234">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="6301318">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="6301382">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="6301451">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6301471">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="6301534">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6301558">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="6301624">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="6301689">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6301755">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6301769">//</span><br>
<span class="lineno"></span><span class="comment" id="6301772">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="6301838">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="6301907">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6301973">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="6301989">//</span><br>
<span class="lineno"></span><span class="comment" id="6301992">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="6302064">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6302140">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="6302204">//</span><br>
<span class="lineno"></span><span class="comment" id="6302207">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6302274">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="6302347">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="6302414">//</span><br>
<span class="lineno"></span><span class="comment" id="6302417">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="6302482">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6302540">//</span><br>
<span class="lineno">45</span><span class="comment" id="6302543">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6302605">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="6302671">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6302742">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6302768">//</span><br>
<span class="lineno">50</span><span class="comment" id="6302771">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6302835">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6302906">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6302979">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6303040">//</span><br>
<span class="lineno">55</span><span class="comment" id="6303043">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6303107">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6303179">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6303236">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6303304">//</span><br>
<span class="lineno">60</span><span class="comment" id="6303307">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6303376">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6303444">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6303511">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6303554">//</span><br>
<span class="lineno">65</span><span class="comment" id="6303557">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6303625">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6303692">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6303766">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6303838">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="6303907">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6303952">//</span><br>
<span class="lineno"></span><span class="comment" id="6303955">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6304023">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6304088">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="6304155">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6304201">//</span><br>
<span class="lineno"></span><span class="comment" id="6304204">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6304274">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6304350">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="6304401">//</span><br>
<span class="lineno"></span><span class="comment" id="6304404">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6304477">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6304548">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6304609">//</span><br>
<span class="lineno">85</span><span class="comment" id="6304612">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6304680">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6304725">//</span><br>
<span class="lineno"></span><span class="comment" id="6304728">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="6304791">//</span><br>
<span class="lineno">90</span><span class="comment" id="6304794">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6304863">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6304930">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="6304972">//</span><br>
<span class="lineno"></span><span class="comment" id="6304975">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="6305044">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6305081">//</span><br>
<span class="lineno"></span><span class="comment" id="6305084">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6305155">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6305220">//</span><br>
<span class="lineno">100</span><span class="comment" id="6305223">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6305288">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6305350">//</span><br>
<span class="lineno"></span><span class="comment" id="6305353">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6305422">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="6305484">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6305552">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="6305565">//</span><br>
<span class="lineno"></span><span class="comment" id="6305568">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6305633">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="6305650">//</span><br>
<span class="lineno"></span><span class="comment" id="6305653">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="6305722">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6305798">//</span><br>
<span class="lineno"></span><span class="keyword" id="6305801">func</span>&nbsp;<span class="ident" id="6305806">Unmarshal</span><span class="op" id="6305815">(</span><span class="ident" id="6305816">data</span>&nbsp;<span class="op" id="6305821">[</span><span class="op" id="6305822">]</span><span class="builtintype" id="6305823">byte</span><span class="op" id="6305827">,</span>&nbsp;<span class="ident" id="6305829">v</span>&nbsp;<span class="keyword" id="6305831">interface</span><span class="op" id="6305840">{</span><span class="op" id="6305841">}</span><span class="op" id="6305842">)</span>&nbsp;<span class="builtintype" id="6305844">error</span>&nbsp;<span class="op" id="6305850">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6305853">return</span>&nbsp;<span class="ident" id="6305860">NewDecoder</span><span class="op" id="6305870">(</span><span class="ident" id="6305871">bytes</span><span class="op" id="6305876">.</span><span class="ident" id="6305877">NewReader</span><span class="op" id="6305886">(</span><span class="ident" id="6305887">data</span><span class="op" id="6305891">)</span><span class="op" id="6305892">)</span><span class="op" id="6305893">.</span><span class="ident" id="6305894">Decode</span><span class="op" id="6305900">(</span><span class="ident" id="6305901">v</span><span class="op" id="6305902">)</span><br>
<span class="lineno"></span><span class="op" id="6305904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6305907">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="6305971">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="6306008">func</span>&nbsp;<span class="op" id="6306013">(</span><span class="ident" id="6306014">d</span>&nbsp;<span class="op" id="6306016">*</span><span class="ident" id="6306017">Decoder</span><span class="op" id="6306024">)</span>&nbsp;<span class="ident" id="6306026">Decode</span><span class="op" id="6306032">(</span><span class="ident" id="6306033">v</span>&nbsp;<span class="keyword" id="6306035">interface</span><span class="op" id="6306044">{</span><span class="op" id="6306045">}</span><span class="op" id="6306046">)</span>&nbsp;<span class="builtintype" id="6306048">error</span>&nbsp;<span class="op" id="6306054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6306057">return</span>&nbsp;<span class="ident" id="6306064">d</span><span class="op" id="6306065">.</span><span class="ident" id="6306066">DecodeElement</span><span class="op" id="6306079">(</span><span class="ident" id="6306080">v</span><span class="op" id="6306081">,</span>&nbsp;<span class="ident" id="6306083">nil</span><span class="op" id="6306086">)</span><br>
<span class="lineno"></span><span class="op" id="6306088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6306091">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="6306154">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6306210">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="6306273">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6306332">func</span>&nbsp;<span class="op" id="6306337">(</span><span class="ident" id="6306338">d</span>&nbsp;<span class="op" id="6306340">*</span><span class="ident" id="6306341">Decoder</span><span class="op" id="6306348">)</span>&nbsp;<span class="ident" id="6306350">DecodeElement</span><span class="op" id="6306363">(</span><span class="ident" id="6306364">v</span>&nbsp;<span class="keyword" id="6306366">interface</span><span class="op" id="6306375">{</span><span class="op" id="6306376">}</span><span class="op" id="6306377">,</span>&nbsp;<span class="ident" id="6306379">start</span>&nbsp;<span class="op" id="6306385">*</span><span class="ident" id="6306386">StartElement</span><span class="op" id="6306398">)</span>&nbsp;<span class="builtintype" id="6306400">error</span>&nbsp;<span class="op" id="6306406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6306409">val</span>&nbsp;<span class="op" id="6306413">:=</span>&nbsp;<span class="ident" id="6306416">reflect</span><span class="op" id="6306423">.</span><span class="ident" id="6306424">ValueOf</span><span class="op" id="6306431">(</span><span class="ident" id="6306432">v</span><span class="op" id="6306433">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6306436">if</span>&nbsp;<span class="ident" id="6306439">val</span><span class="op" id="6306442">.</span><span class="ident" id="6306443">Kind</span><span class="op" id="6306447">(</span><span class="op" id="6306448">)</span>&nbsp;<span class="op" id="6306450">!=</span>&nbsp;<span class="ident" id="6306453">reflect</span><span class="op" id="6306460">.</span><span class="ident" id="6306461">Ptr</span>&nbsp;<span class="op" id="6306465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6306469">return</span>&nbsp;<span class="ident" id="6306476">errors</span><span class="op" id="6306482">.</span><span class="ident" id="6306483">New</span><span class="op" id="6306486">(</span><span class="string" id="6306487">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="6306520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6306523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6306526">return</span>&nbsp;<span class="ident" id="6306533">d</span><span class="op" id="6306534">.</span><span class="ident" id="6306535">unmarshal</span><span class="op" id="6306544">(</span><span class="ident" id="6306545">val</span><span class="op" id="6306548">.</span><span class="ident" id="6306549">Elem</span><span class="op" id="6306553">(</span><span class="op" id="6306554">)</span><span class="op" id="6306555">,</span>&nbsp;<span class="ident" id="6306557">start</span><span class="op" id="6306562">)</span><br>
<span class="lineno"></span><span class="op" id="6306564">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="6306567">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="6306638">type</span>&nbsp;<span class="ident" id="6306643">UnmarshalError</span>&nbsp;<span class="builtintype" id="6306658">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6306666">func</span>&nbsp;<span class="op" id="6306671">(</span><span class="ident" id="6306672">e</span>&nbsp;<span class="ident" id="6306674">UnmarshalError</span><span class="op" id="6306688">)</span>&nbsp;<span class="ident" id="6306690">Error</span><span class="op" id="6306695">(</span><span class="op" id="6306696">)</span>&nbsp;<span class="builtintype" id="6306698">string</span>&nbsp;<span class="op" id="6306705">{</span>&nbsp;<span class="keyword" id="6306707">return</span>&nbsp;<span class="builtintype" id="6306714">string</span><span class="op" id="6306720">(</span><span class="ident" id="6306721">e</span><span class="op" id="6306722">)</span>&nbsp;<span class="op" id="6306724">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="6306727">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6306801">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6306846">//</span><br>
<span class="lineno"></span><span class="comment" id="6306849">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="6306894">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6306937">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6307002">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6307025">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6307079">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="6307138">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6307198">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6307256">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6307289">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6307349">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="6307384">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="6307424">type</span>&nbsp;<span class="ident" id="6307429">Unmarshaler</span>&nbsp;<span class="keyword" id="6307441">interface</span>&nbsp;<span class="op" id="6307451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6307454">UnmarshalXML</span><span class="op" id="6307466">(</span><span class="ident" id="6307467">d</span>&nbsp;<span class="op" id="6307469">*</span><span class="ident" id="6307470">Decoder</span><span class="op" id="6307477">,</span>&nbsp;<span class="ident" id="6307479">start</span>&nbsp;<span class="ident" id="6307485">StartElement</span><span class="op" id="6307497">)</span>&nbsp;<span class="builtintype" id="6307499">error</span><br>
<span class="lineno"></span><span class="op" id="6307505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6307508">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6307586">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6307633">//</span><br>
<span class="lineno"></span><span class="comment" id="6307636">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="6307688">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="6307753">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6307776">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6307836">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6307871">type</span>&nbsp;<span class="ident" id="6307876">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="6307892">interface</span>&nbsp;<span class="op" id="6307902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6307905">UnmarshalXMLAttr</span><span class="op" id="6307921">(</span><span class="ident" id="6307922">attr</span>&nbsp;<span class="ident" id="6307927">Attr</span><span class="op" id="6307931">)</span>&nbsp;<span class="builtintype" id="6307933">error</span><br>
<span class="lineno">170</span><span class="op" id="6307939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6307942">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6308030">func</span>&nbsp;<span class="ident" id="6308035">receiverType</span><span class="op" id="6308047">(</span><span class="ident" id="6308048">val</span>&nbsp;<span class="keyword" id="6308052">interface</span><span class="op" id="6308061">{</span><span class="op" id="6308062">}</span><span class="op" id="6308063">)</span>&nbsp;<span class="builtintype" id="6308065">string</span>&nbsp;<span class="op" id="6308072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6308075">t</span>&nbsp;<span class="op" id="6308077">:=</span>&nbsp;<span class="ident" id="6308080">reflect</span><span class="op" id="6308087">.</span><span class="ident" id="6308088">TypeOf</span><span class="op" id="6308094">(</span><span class="ident" id="6308095">val</span><span class="op" id="6308098">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308101">if</span>&nbsp;<span class="ident" id="6308104">t</span><span class="op" id="6308105">.</span><span class="ident" id="6308106">Name</span><span class="op" id="6308110">(</span><span class="op" id="6308111">)</span>&nbsp;<span class="op" id="6308113">!=</span>&nbsp;<span class="string" id="6308116">&#34;&#34;</span>&nbsp;<span class="op" id="6308119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308123">return</span>&nbsp;<span class="ident" id="6308130">t</span><span class="op" id="6308131">.</span><span class="ident" id="6308132">String</span><span class="op" id="6308138">(</span><span class="op" id="6308139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6308142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308145">return</span>&nbsp;<span class="string" id="6308152">&#34;(&#34;</span>&nbsp;<span class="op" id="6308156">+</span>&nbsp;<span class="ident" id="6308158">t</span><span class="op" id="6308159">.</span><span class="ident" id="6308160">String</span><span class="op" id="6308166">(</span><span class="op" id="6308167">)</span>&nbsp;<span class="op" id="6308169">+</span>&nbsp;<span class="string" id="6308171">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="6308175">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6308178">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6308242">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6308286">func</span>&nbsp;<span class="op" id="6308291">(</span><span class="ident" id="6308292">p</span>&nbsp;<span class="op" id="6308294">*</span><span class="ident" id="6308295">Decoder</span><span class="op" id="6308302">)</span>&nbsp;<span class="ident" id="6308304">unmarshalInterface</span><span class="op" id="6308322">(</span><span class="ident" id="6308323">val</span>&nbsp;<span class="ident" id="6308327">Unmarshaler</span><span class="op" id="6308338">,</span>&nbsp;<span class="ident" id="6308340">start</span>&nbsp;<span class="op" id="6308346">*</span><span class="ident" id="6308347">StartElement</span><span class="op" id="6308359">)</span>&nbsp;<span class="builtintype" id="6308361">error</span>&nbsp;<span class="op" id="6308367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6308370">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6308439">p</span><span class="op" id="6308440">.</span><span class="ident" id="6308441">pushEOF</span><span class="op" id="6308448">(</span><span class="op" id="6308449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6308453">p</span><span class="op" id="6308454">.</span><span class="ident" id="6308455">unmarshalDepth</span><span class="op" id="6308469">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6308473">err</span>&nbsp;<span class="op" id="6308477">:=</span>&nbsp;<span class="ident" id="6308480">val</span><span class="op" id="6308483">.</span><span class="ident" id="6308484">UnmarshalXML</span><span class="op" id="6308496">(</span><span class="ident" id="6308497">p</span><span class="op" id="6308498">,</span>&nbsp;<span class="op" id="6308500">*</span><span class="ident" id="6308501">start</span><span class="op" id="6308506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6308509">p</span><span class="op" id="6308510">.</span><span class="ident" id="6308511">unmarshalDepth</span><span class="op" id="6308525">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308529">if</span>&nbsp;<span class="ident" id="6308532">err</span>&nbsp;<span class="op" id="6308536">!=</span>&nbsp;<span class="ident" id="6308539">nil</span>&nbsp;<span class="op" id="6308543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6308547">p</span><span class="op" id="6308548">.</span><span class="ident" id="6308549">popEOF</span><span class="op" id="6308555">(</span><span class="op" id="6308556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308560">return</span>&nbsp;<span class="ident" id="6308567">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6308572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308576">if</span>&nbsp;<span class="op" id="6308579">!</span><span class="ident" id="6308580">p</span><span class="op" id="6308581">.</span><span class="ident" id="6308582">popEOF</span><span class="op" id="6308588">(</span><span class="op" id="6308589">)</span>&nbsp;<span class="op" id="6308591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308595">return</span>&nbsp;<span class="ident" id="6308602">fmt</span><span class="op" id="6308605">.</span><span class="ident" id="6308606">Errorf</span><span class="op" id="6308612">(</span><span class="string" id="6308613">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="6308671">,</span>&nbsp;<span class="ident" id="6308673">receiverType</span><span class="op" id="6308685">(</span><span class="ident" id="6308686">val</span><span class="op" id="6308689">)</span><span class="op" id="6308690">,</span>&nbsp;<span class="ident" id="6308692">start</span><span class="op" id="6308697">.</span><span class="ident" id="6308698">Name</span><span class="op" id="6308702">.</span><span class="ident" id="6308703">Local</span><span class="op" id="6308708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6308711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6308715">return</span>&nbsp;<span class="ident" id="6308722">nil</span><br>
<span class="lineno">200</span><span class="op" id="6308726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6308729">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6308797">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="6308861">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="6308899">func</span>&nbsp;<span class="op" id="6308904">(</span><span class="ident" id="6308905">p</span>&nbsp;<span class="op" id="6308907">*</span><span class="ident" id="6308908">Decoder</span><span class="op" id="6308915">)</span>&nbsp;<span class="ident" id="6308917">unmarshalTextInterface</span><span class="op" id="6308939">(</span><span class="ident" id="6308940">val</span>&nbsp;<span class="ident" id="6308944">encoding</span><span class="op" id="6308952">.</span><span class="ident" id="6308953">TextUnmarshaler</span><span class="op" id="6308968">,</span>&nbsp;<span class="ident" id="6308970">start</span>&nbsp;<span class="op" id="6308976">*</span><span class="ident" id="6308977">StartElement</span><span class="op" id="6308989">)</span>&nbsp;<span class="builtintype" id="6308991">error</span>&nbsp;<span class="op" id="6308997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309000">var</span>&nbsp;<span class="ident" id="6309004">buf</span>&nbsp;<span class="op" id="6309008">[</span><span class="op" id="6309009">]</span><span class="builtintype" id="6309010">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309016">depth</span>&nbsp;<span class="op" id="6309022">:=</span>&nbsp;<span class="num" id="6309025">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309028">for</span>&nbsp;<span class="ident" id="6309032">depth</span>&nbsp;<span class="op" id="6309038">&gt;</span>&nbsp;<span class="num" id="6309040">0</span>&nbsp;<span class="op" id="6309042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309046">t</span><span class="op" id="6309047">,</span>&nbsp;<span class="ident" id="6309049">err</span>&nbsp;<span class="op" id="6309053">:=</span>&nbsp;<span class="ident" id="6309056">p</span><span class="op" id="6309057">.</span><span class="ident" id="6309058">Token</span><span class="op" id="6309063">(</span><span class="op" id="6309064">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309068">if</span>&nbsp;<span class="ident" id="6309071">err</span>&nbsp;<span class="op" id="6309075">!=</span>&nbsp;<span class="ident" id="6309078">nil</span>&nbsp;<span class="op" id="6309082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309087">return</span>&nbsp;<span class="ident" id="6309094">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309104">switch</span>&nbsp;<span class="ident" id="6309111">t</span>&nbsp;<span class="op" id="6309113">:=</span>&nbsp;<span class="ident" id="6309116">t</span><span class="op" id="6309117">.</span><span class="op" id="6309118">(</span><span class="keyword" id="6309119">type</span><span class="op" id="6309123">)</span>&nbsp;<span class="op" id="6309125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309129">case</span>&nbsp;<span class="ident" id="6309134">CharData</span><span class="op" id="6309142">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309147">if</span>&nbsp;<span class="ident" id="6309150">depth</span>&nbsp;<span class="op" id="6309156">==</span>&nbsp;<span class="num" id="6309159">1</span>&nbsp;<span class="op" id="6309161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309167">buf</span>&nbsp;<span class="op" id="6309171">=</span>&nbsp;<span class="builtinfunc" id="6309173">append</span><span class="op" id="6309179">(</span><span class="ident" id="6309180">buf</span><span class="op" id="6309183">,</span>&nbsp;<span class="ident" id="6309185">t</span><span class="op" id="6309186">...</span><span class="op" id="6309189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309198">case</span>&nbsp;<span class="ident" id="6309203">StartElement</span><span class="op" id="6309215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309220">depth</span><span class="op" id="6309225">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309230">case</span>&nbsp;<span class="ident" id="6309235">EndElement</span><span class="op" id="6309245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309250">depth</span><span class="op" id="6309255">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309266">return</span>&nbsp;<span class="ident" id="6309273">val</span><span class="op" id="6309276">.</span><span class="ident" id="6309277">UnmarshalText</span><span class="op" id="6309290">(</span><span class="ident" id="6309291">buf</span><span class="op" id="6309294">)</span><br>
<span class="lineno">225</span><span class="op" id="6309296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6309299">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6309360">func</span>&nbsp;<span class="op" id="6309365">(</span><span class="ident" id="6309366">p</span>&nbsp;<span class="op" id="6309368">*</span><span class="ident" id="6309369">Decoder</span><span class="op" id="6309376">)</span>&nbsp;<span class="ident" id="6309378">unmarshalAttr</span><span class="op" id="6309391">(</span><span class="ident" id="6309392">val</span>&nbsp;<span class="ident" id="6309396">reflect</span><span class="op" id="6309403">.</span><span class="ident" id="6309404">Value</span><span class="op" id="6309409">,</span>&nbsp;<span class="ident" id="6309411">attr</span>&nbsp;<span class="ident" id="6309416">Attr</span><span class="op" id="6309420">)</span>&nbsp;<span class="builtintype" id="6309422">error</span>&nbsp;<span class="op" id="6309428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309431">if</span>&nbsp;<span class="ident" id="6309434">val</span><span class="op" id="6309437">.</span><span class="ident" id="6309438">Kind</span><span class="op" id="6309442">(</span><span class="op" id="6309443">)</span>&nbsp;<span class="op" id="6309445">==</span>&nbsp;<span class="ident" id="6309448">reflect</span><span class="op" id="6309455">.</span><span class="ident" id="6309456">Ptr</span>&nbsp;<span class="op" id="6309460">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309464">if</span>&nbsp;<span class="ident" id="6309467">val</span><span class="op" id="6309470">.</span><span class="ident" id="6309471">IsNil</span><span class="op" id="6309476">(</span><span class="op" id="6309477">)</span>&nbsp;<span class="op" id="6309479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309484">val</span><span class="op" id="6309487">.</span><span class="ident" id="6309488">Set</span><span class="op" id="6309491">(</span><span class="ident" id="6309492">reflect</span><span class="op" id="6309499">.</span><span class="ident" id="6309500">New</span><span class="op" id="6309503">(</span><span class="ident" id="6309504">val</span><span class="op" id="6309507">.</span><span class="ident" id="6309508">Type</span><span class="op" id="6309512">(</span><span class="op" id="6309513">)</span><span class="op" id="6309514">.</span><span class="ident" id="6309515">Elem</span><span class="op" id="6309519">(</span><span class="op" id="6309520">)</span><span class="op" id="6309521">)</span><span class="op" id="6309522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309530">val</span>&nbsp;<span class="op" id="6309534">=</span>&nbsp;<span class="ident" id="6309536">val</span><span class="op" id="6309539">.</span><span class="ident" id="6309540">Elem</span><span class="op" id="6309544">(</span><span class="op" id="6309545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309548">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309552">if</span>&nbsp;<span class="ident" id="6309555">val</span><span class="op" id="6309558">.</span><span class="ident" id="6309559">CanInterface</span><span class="op" id="6309571">(</span><span class="op" id="6309572">)</span>&nbsp;<span class="op" id="6309574">&amp;&amp;</span>&nbsp;<span class="ident" id="6309577">val</span><span class="op" id="6309580">.</span><span class="ident" id="6309581">Type</span><span class="op" id="6309585">(</span><span class="op" id="6309586">)</span><span class="op" id="6309587">.</span><span class="ident" id="6309588">Implements</span><span class="op" id="6309598">(</span><span class="ident" id="6309599">unmarshalerAttrType</span><span class="op" id="6309618">)</span>&nbsp;<span class="op" id="6309620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6309624">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6309681">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309745">return</span>&nbsp;<span class="ident" id="6309752">val</span><span class="op" id="6309755">.</span><span class="ident" id="6309756">Interface</span><span class="op" id="6309765">(</span><span class="op" id="6309766">)</span><span class="op" id="6309767">.</span><span class="op" id="6309768">(</span><span class="ident" id="6309769">UnmarshalerAttr</span><span class="op" id="6309784">)</span><span class="op" id="6309785">.</span><span class="ident" id="6309786">UnmarshalXMLAttr</span><span class="op" id="6309802">(</span><span class="ident" id="6309803">attr</span><span class="op" id="6309807">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309813">if</span>&nbsp;<span class="ident" id="6309816">val</span><span class="op" id="6309819">.</span><span class="ident" id="6309820">CanAddr</span><span class="op" id="6309827">(</span><span class="op" id="6309828">)</span>&nbsp;<span class="op" id="6309830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6309834">pv</span>&nbsp;<span class="op" id="6309837">:=</span>&nbsp;<span class="ident" id="6309840">val</span><span class="op" id="6309843">.</span><span class="ident" id="6309844">Addr</span><span class="op" id="6309848">(</span><span class="op" id="6309849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309853">if</span>&nbsp;<span class="ident" id="6309856">pv</span><span class="op" id="6309858">.</span><span class="ident" id="6309859">CanInterface</span><span class="op" id="6309871">(</span><span class="op" id="6309872">)</span>&nbsp;<span class="op" id="6309874">&amp;&amp;</span>&nbsp;<span class="ident" id="6309877">pv</span><span class="op" id="6309879">.</span><span class="ident" id="6309880">Type</span><span class="op" id="6309884">(</span><span class="op" id="6309885">)</span><span class="op" id="6309886">.</span><span class="ident" id="6309887">Implements</span><span class="op" id="6309897">(</span><span class="ident" id="6309898">unmarshalerAttrType</span><span class="op" id="6309917">)</span>&nbsp;<span class="op" id="6309919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6309924">return</span>&nbsp;<span class="ident" id="6309931">pv</span><span class="op" id="6309933">.</span><span class="ident" id="6309934">Interface</span><span class="op" id="6309943">(</span><span class="op" id="6309944">)</span><span class="op" id="6309945">.</span><span class="op" id="6309946">(</span><span class="ident" id="6309947">UnmarshalerAttr</span><span class="op" id="6309962">)</span><span class="op" id="6309963">.</span><span class="ident" id="6309964">UnmarshalXMLAttr</span><span class="op" id="6309980">(</span><span class="ident" id="6309981">attr</span><span class="op" id="6309985">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6309992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6309996">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310054">if</span>&nbsp;<span class="ident" id="6310057">val</span><span class="op" id="6310060">.</span><span class="ident" id="6310061">CanInterface</span><span class="op" id="6310073">(</span><span class="op" id="6310074">)</span>&nbsp;<span class="op" id="6310076">&amp;&amp;</span>&nbsp;<span class="ident" id="6310079">val</span><span class="op" id="6310082">.</span><span class="ident" id="6310083">Type</span><span class="op" id="6310087">(</span><span class="op" id="6310088">)</span><span class="op" id="6310089">.</span><span class="ident" id="6310090">Implements</span><span class="op" id="6310100">(</span><span class="ident" id="6310101">textUnmarshalerType</span><span class="op" id="6310120">)</span>&nbsp;<span class="op" id="6310122">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6310126">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6310183">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310247">return</span>&nbsp;<span class="ident" id="6310254">val</span><span class="op" id="6310257">.</span><span class="ident" id="6310258">Interface</span><span class="op" id="6310267">(</span><span class="op" id="6310268">)</span><span class="op" id="6310269">.</span><span class="op" id="6310270">(</span><span class="ident" id="6310271">encoding</span><span class="op" id="6310279">.</span><span class="ident" id="6310280">TextUnmarshaler</span><span class="op" id="6310295">)</span><span class="op" id="6310296">.</span><span class="ident" id="6310297">UnmarshalText</span><span class="op" id="6310310">(</span><span class="op" id="6310311">[</span><span class="op" id="6310312">]</span><span class="builtintype" id="6310313">byte</span><span class="op" id="6310317">(</span><span class="ident" id="6310318">attr</span><span class="op" id="6310322">.</span><span class="ident" id="6310323">Value</span><span class="op" id="6310328">)</span><span class="op" id="6310329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6310332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310335">if</span>&nbsp;<span class="ident" id="6310338">val</span><span class="op" id="6310341">.</span><span class="ident" id="6310342">CanAddr</span><span class="op" id="6310349">(</span><span class="op" id="6310350">)</span>&nbsp;<span class="op" id="6310352">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6310356">pv</span>&nbsp;<span class="op" id="6310359">:=</span>&nbsp;<span class="ident" id="6310362">val</span><span class="op" id="6310365">.</span><span class="ident" id="6310366">Addr</span><span class="op" id="6310370">(</span><span class="op" id="6310371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310375">if</span>&nbsp;<span class="ident" id="6310378">pv</span><span class="op" id="6310380">.</span><span class="ident" id="6310381">CanInterface</span><span class="op" id="6310393">(</span><span class="op" id="6310394">)</span>&nbsp;<span class="op" id="6310396">&amp;&amp;</span>&nbsp;<span class="ident" id="6310399">pv</span><span class="op" id="6310401">.</span><span class="ident" id="6310402">Type</span><span class="op" id="6310406">(</span><span class="op" id="6310407">)</span><span class="op" id="6310408">.</span><span class="ident" id="6310409">Implements</span><span class="op" id="6310419">(</span><span class="ident" id="6310420">textUnmarshalerType</span><span class="op" id="6310439">)</span>&nbsp;<span class="op" id="6310441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310446">return</span>&nbsp;<span class="ident" id="6310453">pv</span><span class="op" id="6310455">.</span><span class="ident" id="6310456">Interface</span><span class="op" id="6310465">(</span><span class="op" id="6310466">)</span><span class="op" id="6310467">.</span><span class="op" id="6310468">(</span><span class="ident" id="6310469">encoding</span><span class="op" id="6310477">.</span><span class="ident" id="6310478">TextUnmarshaler</span><span class="op" id="6310493">)</span><span class="op" id="6310494">.</span><span class="ident" id="6310495">UnmarshalText</span><span class="op" id="6310508">(</span><span class="op" id="6310509">[</span><span class="op" id="6310510">]</span><span class="builtintype" id="6310511">byte</span><span class="op" id="6310515">(</span><span class="ident" id="6310516">attr</span><span class="op" id="6310520">.</span><span class="ident" id="6310521">Value</span><span class="op" id="6310526">)</span><span class="op" id="6310527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6310531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6310534">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6310538">copyValue</span><span class="op" id="6310547">(</span><span class="ident" id="6310548">val</span><span class="op" id="6310551">,</span>&nbsp;<span class="op" id="6310553">[</span><span class="op" id="6310554">]</span><span class="builtintype" id="6310555">byte</span><span class="op" id="6310559">(</span><span class="ident" id="6310560">attr</span><span class="op" id="6310564">.</span><span class="ident" id="6310565">Value</span><span class="op" id="6310570">)</span><span class="op" id="6310571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310574">return</span>&nbsp;<span class="ident" id="6310581">nil</span><br>
<span class="lineno"></span><span class="op" id="6310585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="6310588">var</span>&nbsp;<span class="op" id="6310592">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6310595">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6310615">=</span>&nbsp;<span class="ident" id="6310617">reflect</span><span class="op" id="6310624">.</span><span class="ident" id="6310625">TypeOf</span><span class="op" id="6310631">(</span><span class="op" id="6310632">(</span><span class="op" id="6310633">*</span><span class="ident" id="6310634">Unmarshaler</span><span class="op" id="6310645">)</span><span class="op" id="6310646">(</span><span class="ident" id="6310647">nil</span><span class="op" id="6310650">)</span><span class="op" id="6310651">)</span><span class="op" id="6310652">.</span><span class="ident" id="6310653">Elem</span><span class="op" id="6310657">(</span><span class="op" id="6310658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6310661">unmarshalerAttrType</span>&nbsp;<span class="op" id="6310681">=</span>&nbsp;<span class="ident" id="6310683">reflect</span><span class="op" id="6310690">.</span><span class="ident" id="6310691">TypeOf</span><span class="op" id="6310697">(</span><span class="op" id="6310698">(</span><span class="op" id="6310699">*</span><span class="ident" id="6310700">UnmarshalerAttr</span><span class="op" id="6310715">)</span><span class="op" id="6310716">(</span><span class="ident" id="6310717">nil</span><span class="op" id="6310720">)</span><span class="op" id="6310721">)</span><span class="op" id="6310722">.</span><span class="ident" id="6310723">Elem</span><span class="op" id="6310727">(</span><span class="op" id="6310728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6310731">textUnmarshalerType</span>&nbsp;<span class="op" id="6310751">=</span>&nbsp;<span class="ident" id="6310753">reflect</span><span class="op" id="6310760">.</span><span class="ident" id="6310761">TypeOf</span><span class="op" id="6310767">(</span><span class="op" id="6310768">(</span><span class="op" id="6310769">*</span><span class="ident" id="6310770">encoding</span><span class="op" id="6310778">.</span><span class="ident" id="6310779">TextUnmarshaler</span><span class="op" id="6310794">)</span><span class="op" id="6310795">(</span><span class="ident" id="6310796">nil</span><span class="op" id="6310799">)</span><span class="op" id="6310800">)</span><span class="op" id="6310801">.</span><span class="ident" id="6310802">Elem</span><span class="op" id="6310806">(</span><span class="op" id="6310807">)</span><br>
<span class="lineno"></span><span class="op" id="6310809">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="6310812">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6310856">func</span>&nbsp;<span class="op" id="6310861">(</span><span class="ident" id="6310862">p</span>&nbsp;<span class="op" id="6310864">*</span><span class="ident" id="6310865">Decoder</span><span class="op" id="6310872">)</span>&nbsp;<span class="ident" id="6310874">unmarshal</span><span class="op" id="6310883">(</span><span class="ident" id="6310884">val</span>&nbsp;<span class="ident" id="6310888">reflect</span><span class="op" id="6310895">.</span><span class="ident" id="6310896">Value</span><span class="op" id="6310901">,</span>&nbsp;<span class="ident" id="6310903">start</span>&nbsp;<span class="op" id="6310909">*</span><span class="ident" id="6310910">StartElement</span><span class="op" id="6310922">)</span>&nbsp;<span class="builtintype" id="6310924">error</span>&nbsp;<span class="op" id="6310930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6310933">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310971">if</span>&nbsp;<span class="ident" id="6310974">start</span>&nbsp;<span class="op" id="6310980">==</span>&nbsp;<span class="ident" id="6310983">nil</span>&nbsp;<span class="op" id="6310987">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6310991">for</span>&nbsp;<span class="op" id="6310995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311000">tok</span><span class="op" id="6311003">,</span>&nbsp;<span class="ident" id="6311005">err</span>&nbsp;<span class="op" id="6311009">:=</span>&nbsp;<span class="ident" id="6311012">p</span><span class="op" id="6311013">.</span><span class="ident" id="6311014">Token</span><span class="op" id="6311019">(</span><span class="op" id="6311020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311025">if</span>&nbsp;<span class="ident" id="6311028">err</span>&nbsp;<span class="op" id="6311032">!=</span>&nbsp;<span class="ident" id="6311035">nil</span>&nbsp;<span class="op" id="6311039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311045">return</span>&nbsp;<span class="ident" id="6311052">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311059">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311064">if</span>&nbsp;<span class="ident" id="6311067">t</span><span class="op" id="6311068">,</span>&nbsp;<span class="ident" id="6311070">ok</span>&nbsp;<span class="op" id="6311073">:=</span>&nbsp;<span class="ident" id="6311076">tok</span><span class="op" id="6311079">.</span><span class="op" id="6311080">(</span><span class="ident" id="6311081">StartElement</span><span class="op" id="6311093">)</span><span class="op" id="6311094">;</span>&nbsp;<span class="ident" id="6311096">ok</span>&nbsp;<span class="op" id="6311099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311105">start</span>&nbsp;<span class="op" id="6311111">=</span>&nbsp;<span class="op" id="6311113">&amp;</span><span class="ident" id="6311114">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311120">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311133">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6311140">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6311202">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311228">if</span>&nbsp;<span class="ident" id="6311231">val</span><span class="op" id="6311234">.</span><span class="ident" id="6311235">Kind</span><span class="op" id="6311239">(</span><span class="op" id="6311240">)</span>&nbsp;<span class="op" id="6311242">==</span>&nbsp;<span class="ident" id="6311245">reflect</span><span class="op" id="6311252">.</span><span class="ident" id="6311253">Interface</span>&nbsp;<span class="op" id="6311263">&amp;&amp;</span>&nbsp;<span class="op" id="6311266">!</span><span class="ident" id="6311267">val</span><span class="op" id="6311270">.</span><span class="ident" id="6311271">IsNil</span><span class="op" id="6311276">(</span><span class="op" id="6311277">)</span>&nbsp;<span class="op" id="6311279">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311283">e</span>&nbsp;<span class="op" id="6311285">:=</span>&nbsp;<span class="ident" id="6311288">val</span><span class="op" id="6311291">.</span><span class="ident" id="6311292">Elem</span><span class="op" id="6311296">(</span><span class="op" id="6311297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311301">if</span>&nbsp;<span class="ident" id="6311304">e</span><span class="op" id="6311305">.</span><span class="ident" id="6311306">Kind</span><span class="op" id="6311310">(</span><span class="op" id="6311311">)</span>&nbsp;<span class="op" id="6311313">==</span>&nbsp;<span class="ident" id="6311316">reflect</span><span class="op" id="6311323">.</span><span class="ident" id="6311324">Ptr</span>&nbsp;<span class="op" id="6311328">&amp;&amp;</span>&nbsp;<span class="op" id="6311331">!</span><span class="ident" id="6311332">e</span><span class="op" id="6311333">.</span><span class="ident" id="6311334">IsNil</span><span class="op" id="6311339">(</span><span class="op" id="6311340">)</span>&nbsp;<span class="op" id="6311342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311347">val</span>&nbsp;<span class="op" id="6311351">=</span>&nbsp;<span class="ident" id="6311353">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311360">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311364">if</span>&nbsp;<span class="ident" id="6311367">val</span><span class="op" id="6311370">.</span><span class="ident" id="6311371">Kind</span><span class="op" id="6311375">(</span><span class="op" id="6311376">)</span>&nbsp;<span class="op" id="6311378">==</span>&nbsp;<span class="ident" id="6311381">reflect</span><span class="op" id="6311388">.</span><span class="ident" id="6311389">Ptr</span>&nbsp;<span class="op" id="6311393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311397">if</span>&nbsp;<span class="ident" id="6311400">val</span><span class="op" id="6311403">.</span><span class="ident" id="6311404">IsNil</span><span class="op" id="6311409">(</span><span class="op" id="6311410">)</span>&nbsp;<span class="op" id="6311412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311417">val</span><span class="op" id="6311420">.</span><span class="ident" id="6311421">Set</span><span class="op" id="6311424">(</span><span class="ident" id="6311425">reflect</span><span class="op" id="6311432">.</span><span class="ident" id="6311433">New</span><span class="op" id="6311436">(</span><span class="ident" id="6311437">val</span><span class="op" id="6311440">.</span><span class="ident" id="6311441">Type</span><span class="op" id="6311445">(</span><span class="op" id="6311446">)</span><span class="op" id="6311447">.</span><span class="ident" id="6311448">Elem</span><span class="op" id="6311452">(</span><span class="op" id="6311453">)</span><span class="op" id="6311454">)</span><span class="op" id="6311455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311459">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311463">val</span>&nbsp;<span class="op" id="6311467">=</span>&nbsp;<span class="ident" id="6311469">val</span><span class="op" id="6311472">.</span><span class="ident" id="6311473">Elem</span><span class="op" id="6311477">(</span><span class="op" id="6311478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311485">if</span>&nbsp;<span class="ident" id="6311488">val</span><span class="op" id="6311491">.</span><span class="ident" id="6311492">CanInterface</span><span class="op" id="6311504">(</span><span class="op" id="6311505">)</span>&nbsp;<span class="op" id="6311507">&amp;&amp;</span>&nbsp;<span class="ident" id="6311510">val</span><span class="op" id="6311513">.</span><span class="ident" id="6311514">Type</span><span class="op" id="6311518">(</span><span class="op" id="6311519">)</span><span class="op" id="6311520">.</span><span class="ident" id="6311521">Implements</span><span class="op" id="6311531">(</span><span class="ident" id="6311532">unmarshalerType</span><span class="op" id="6311547">)</span>&nbsp;<span class="op" id="6311549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6311553">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6311610">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311674">return</span>&nbsp;<span class="ident" id="6311681">p</span><span class="op" id="6311682">.</span><span class="ident" id="6311683">unmarshalInterface</span><span class="op" id="6311701">(</span><span class="ident" id="6311702">val</span><span class="op" id="6311705">.</span><span class="ident" id="6311706">Interface</span><span class="op" id="6311715">(</span><span class="op" id="6311716">)</span><span class="op" id="6311717">.</span><span class="op" id="6311718">(</span><span class="ident" id="6311719">Unmarshaler</span><span class="op" id="6311730">)</span><span class="op" id="6311731">,</span>&nbsp;<span class="ident" id="6311733">start</span><span class="op" id="6311738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311745">if</span>&nbsp;<span class="ident" id="6311748">val</span><span class="op" id="6311751">.</span><span class="ident" id="6311752">CanAddr</span><span class="op" id="6311759">(</span><span class="op" id="6311760">)</span>&nbsp;<span class="op" id="6311762">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6311766">pv</span>&nbsp;<span class="op" id="6311769">:=</span>&nbsp;<span class="ident" id="6311772">val</span><span class="op" id="6311775">.</span><span class="ident" id="6311776">Addr</span><span class="op" id="6311780">(</span><span class="op" id="6311781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311785">if</span>&nbsp;<span class="ident" id="6311788">pv</span><span class="op" id="6311790">.</span><span class="ident" id="6311791">CanInterface</span><span class="op" id="6311803">(</span><span class="op" id="6311804">)</span>&nbsp;<span class="op" id="6311806">&amp;&amp;</span>&nbsp;<span class="ident" id="6311809">pv</span><span class="op" id="6311811">.</span><span class="ident" id="6311812">Type</span><span class="op" id="6311816">(</span><span class="op" id="6311817">)</span><span class="op" id="6311818">.</span><span class="ident" id="6311819">Implements</span><span class="op" id="6311829">(</span><span class="ident" id="6311830">unmarshalerType</span><span class="op" id="6311845">)</span>&nbsp;<span class="op" id="6311847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311852">return</span>&nbsp;<span class="ident" id="6311859">p</span><span class="op" id="6311860">.</span><span class="ident" id="6311861">unmarshalInterface</span><span class="op" id="6311879">(</span><span class="ident" id="6311880">pv</span><span class="op" id="6311882">.</span><span class="ident" id="6311883">Interface</span><span class="op" id="6311892">(</span><span class="op" id="6311893">)</span><span class="op" id="6311894">.</span><span class="op" id="6311895">(</span><span class="ident" id="6311896">Unmarshaler</span><span class="op" id="6311907">)</span><span class="op" id="6311908">,</span>&nbsp;<span class="ident" id="6311910">start</span><span class="op" id="6311915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6311922">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311926">if</span>&nbsp;<span class="ident" id="6311929">val</span><span class="op" id="6311932">.</span><span class="ident" id="6311933">CanInterface</span><span class="op" id="6311945">(</span><span class="op" id="6311946">)</span>&nbsp;<span class="op" id="6311948">&amp;&amp;</span>&nbsp;<span class="ident" id="6311951">val</span><span class="op" id="6311954">.</span><span class="ident" id="6311955">Type</span><span class="op" id="6311959">(</span><span class="op" id="6311960">)</span><span class="op" id="6311961">.</span><span class="ident" id="6311962">Implements</span><span class="op" id="6311972">(</span><span class="ident" id="6311973">textUnmarshalerType</span><span class="op" id="6311992">)</span>&nbsp;<span class="op" id="6311994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6311998">return</span>&nbsp;<span class="ident" id="6312005">p</span><span class="op" id="6312006">.</span><span class="ident" id="6312007">unmarshalTextInterface</span><span class="op" id="6312029">(</span><span class="ident" id="6312030">val</span><span class="op" id="6312033">.</span><span class="ident" id="6312034">Interface</span><span class="op" id="6312043">(</span><span class="op" id="6312044">)</span><span class="op" id="6312045">.</span><span class="op" id="6312046">(</span><span class="ident" id="6312047">encoding</span><span class="op" id="6312055">.</span><span class="ident" id="6312056">TextUnmarshaler</span><span class="op" id="6312071">)</span><span class="op" id="6312072">,</span>&nbsp;<span class="ident" id="6312074">start</span><span class="op" id="6312079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312086">if</span>&nbsp;<span class="ident" id="6312089">val</span><span class="op" id="6312092">.</span><span class="ident" id="6312093">CanAddr</span><span class="op" id="6312100">(</span><span class="op" id="6312101">)</span>&nbsp;<span class="op" id="6312103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312107">pv</span>&nbsp;<span class="op" id="6312110">:=</span>&nbsp;<span class="ident" id="6312113">val</span><span class="op" id="6312116">.</span><span class="ident" id="6312117">Addr</span><span class="op" id="6312121">(</span><span class="op" id="6312122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312126">if</span>&nbsp;<span class="ident" id="6312129">pv</span><span class="op" id="6312131">.</span><span class="ident" id="6312132">CanInterface</span><span class="op" id="6312144">(</span><span class="op" id="6312145">)</span>&nbsp;<span class="op" id="6312147">&amp;&amp;</span>&nbsp;<span class="ident" id="6312150">pv</span><span class="op" id="6312152">.</span><span class="ident" id="6312153">Type</span><span class="op" id="6312157">(</span><span class="op" id="6312158">)</span><span class="op" id="6312159">.</span><span class="ident" id="6312160">Implements</span><span class="op" id="6312170">(</span><span class="ident" id="6312171">textUnmarshalerType</span><span class="op" id="6312190">)</span>&nbsp;<span class="op" id="6312192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312197">return</span>&nbsp;<span class="ident" id="6312204">p</span><span class="op" id="6312205">.</span><span class="ident" id="6312206">unmarshalTextInterface</span><span class="op" id="6312228">(</span><span class="ident" id="6312229">pv</span><span class="op" id="6312231">.</span><span class="ident" id="6312232">Interface</span><span class="op" id="6312241">(</span><span class="op" id="6312242">)</span><span class="op" id="6312243">.</span><span class="op" id="6312244">(</span><span class="ident" id="6312245">encoding</span><span class="op" id="6312253">.</span><span class="ident" id="6312254">TextUnmarshaler</span><span class="op" id="6312269">)</span><span class="op" id="6312270">,</span>&nbsp;<span class="ident" id="6312272">start</span><span class="op" id="6312277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312281">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312288">var</span>&nbsp;<span class="op" id="6312292">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312296">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6312309">[</span><span class="op" id="6312310">]</span><span class="builtintype" id="6312311">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312318">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6312331">reflect</span><span class="op" id="6312338">.</span><span class="ident" id="6312339">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312347">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6312360">[</span><span class="op" id="6312361">]</span><span class="builtintype" id="6312362">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312369">saveComment</span>&nbsp;&nbsp;<span class="ident" id="6312382">reflect</span><span class="op" id="6312389">.</span><span class="ident" id="6312390">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312398">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6312411">reflect</span><span class="op" id="6312418">.</span><span class="ident" id="6312419">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312427">saveXMLIndex</span>&nbsp;<span class="builtintype" id="6312440">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312446">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="6312459">[</span><span class="op" id="6312460">]</span><span class="builtintype" id="6312461">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312468">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6312481">reflect</span><span class="op" id="6312488">.</span><span class="ident" id="6312489">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312497">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6312510">reflect</span><span class="op" id="6312517">.</span><span class="ident" id="6312518">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312526">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6312539">*</span><span class="ident" id="6312540">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312551">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6312564">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312571">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312575">switch</span>&nbsp;<span class="ident" id="6312582">v</span>&nbsp;<span class="op" id="6312584">:=</span>&nbsp;<span class="ident" id="6312587">val</span><span class="op" id="6312590">;</span>&nbsp;<span class="ident" id="6312592">v</span><span class="op" id="6312593">.</span><span class="ident" id="6312594">Kind</span><span class="op" id="6312598">(</span><span class="op" id="6312599">)</span>&nbsp;<span class="op" id="6312601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312604">default</span><span class="op" id="6312611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312615">return</span>&nbsp;<span class="ident" id="6312622">errors</span><span class="op" id="6312628">.</span><span class="ident" id="6312629">New</span><span class="op" id="6312632">(</span><span class="string" id="6312633">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="6312649">+</span>&nbsp;<span class="ident" id="6312651">v</span><span class="op" id="6312652">.</span><span class="ident" id="6312653">Type</span><span class="op" id="6312657">(</span><span class="op" id="6312658">)</span><span class="op" id="6312659">.</span><span class="ident" id="6312660">String</span><span class="op" id="6312666">(</span><span class="op" id="6312667">)</span><span class="op" id="6312668">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312672">case</span>&nbsp;<span class="ident" id="6312677">reflect</span><span class="op" id="6312684">.</span><span class="ident" id="6312685">Interface</span><span class="op" id="6312694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6312698">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6312755">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6312810">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312848">return</span>&nbsp;<span class="ident" id="6312855">p</span><span class="op" id="6312856">.</span><span class="ident" id="6312857">Skip</span><span class="op" id="6312861">(</span><span class="op" id="6312862">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312866">case</span>&nbsp;<span class="ident" id="6312871">reflect</span><span class="op" id="6312878">.</span><span class="ident" id="6312879">Slice</span><span class="op" id="6312884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312888">typ</span>&nbsp;<span class="op" id="6312892">:=</span>&nbsp;<span class="ident" id="6312895">v</span><span class="op" id="6312896">.</span><span class="ident" id="6312897">Type</span><span class="op" id="6312901">(</span><span class="op" id="6312902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312906">if</span>&nbsp;<span class="ident" id="6312909">typ</span><span class="op" id="6312912">.</span><span class="ident" id="6312913">Elem</span><span class="op" id="6312917">(</span><span class="op" id="6312918">)</span><span class="op" id="6312919">.</span><span class="ident" id="6312920">Kind</span><span class="op" id="6312924">(</span><span class="op" id="6312925">)</span>&nbsp;<span class="op" id="6312927">==</span>&nbsp;<span class="ident" id="6312930">reflect</span><span class="op" id="6312937">.</span><span class="ident" id="6312938">Uint8</span>&nbsp;<span class="op" id="6312944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6312949">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6312962">saveData</span>&nbsp;<span class="op" id="6312971">=</span>&nbsp;<span class="ident" id="6312973">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6312978">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6312986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6312991">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6313021">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313038">n</span>&nbsp;<span class="op" id="6313040">:=</span>&nbsp;<span class="ident" id="6313043">v</span><span class="op" id="6313044">.</span><span class="ident" id="6313045">Len</span><span class="op" id="6313048">(</span><span class="op" id="6313049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313053">if</span>&nbsp;<span class="ident" id="6313056">n</span>&nbsp;<span class="op" id="6313058">&gt;=</span>&nbsp;<span class="ident" id="6313061">v</span><span class="op" id="6313062">.</span><span class="ident" id="6313063">Cap</span><span class="op" id="6313066">(</span><span class="op" id="6313067">)</span>&nbsp;<span class="op" id="6313069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313074">ncap</span>&nbsp;<span class="op" id="6313079">:=</span>&nbsp;<span class="num" id="6313082">2</span>&nbsp;<span class="op" id="6313084">*</span>&nbsp;<span class="ident" id="6313086">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313091">if</span>&nbsp;<span class="ident" id="6313094">ncap</span>&nbsp;<span class="op" id="6313099">&lt;</span>&nbsp;<span class="num" id="6313101">4</span>&nbsp;<span class="op" id="6313103">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313109">ncap</span>&nbsp;<span class="op" id="6313114">=</span>&nbsp;<span class="num" id="6313116">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6313121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6313126">new</span>&nbsp;<span class="op" id="6313130">:=</span>&nbsp;<span class="ident" id="6313133">reflect</span><span class="op" id="6313140">.</span><span class="ident" id="6313141">MakeSlice</span><span class="op" id="6313150">(</span><span class="ident" id="6313151">typ</span><span class="op" id="6313154">,</span>&nbsp;<span class="ident" id="6313156">n</span><span class="op" id="6313157">,</span>&nbsp;<span class="ident" id="6313159">ncap</span><span class="op" id="6313163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313168">reflect</span><span class="op" id="6313175">.</span><span class="ident" id="6313176">Copy</span><span class="op" id="6313180">(</span><span class="builtinfunc" id="6313181">new</span><span class="op" id="6313184">,</span>&nbsp;<span class="ident" id="6313186">v</span><span class="op" id="6313187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313192">v</span><span class="op" id="6313193">.</span><span class="ident" id="6313194">Set</span><span class="op" id="6313197">(</span><span class="builtinfunc" id="6313198">new</span><span class="op" id="6313201">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6313205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313209">v</span><span class="op" id="6313210">.</span><span class="ident" id="6313211">SetLen</span><span class="op" id="6313217">(</span><span class="ident" id="6313218">n</span>&nbsp;<span class="op" id="6313220">+</span>&nbsp;<span class="num" id="6313222">1</span><span class="op" id="6313223">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6313228">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313267">if</span>&nbsp;<span class="ident" id="6313270">err</span>&nbsp;<span class="op" id="6313274">:=</span>&nbsp;<span class="ident" id="6313277">p</span><span class="op" id="6313278">.</span><span class="ident" id="6313279">unmarshal</span><span class="op" id="6313288">(</span><span class="ident" id="6313289">v</span><span class="op" id="6313290">.</span><span class="ident" id="6313291">Index</span><span class="op" id="6313296">(</span><span class="ident" id="6313297">n</span><span class="op" id="6313298">)</span><span class="op" id="6313299">,</span>&nbsp;<span class="ident" id="6313301">start</span><span class="op" id="6313306">)</span><span class="op" id="6313307">;</span>&nbsp;<span class="ident" id="6313309">err</span>&nbsp;<span class="op" id="6313313">!=</span>&nbsp;<span class="ident" id="6313316">nil</span>&nbsp;<span class="op" id="6313320">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313325">v</span><span class="op" id="6313326">.</span><span class="ident" id="6313327">SetLen</span><span class="op" id="6313333">(</span><span class="ident" id="6313334">n</span><span class="op" id="6313335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313340">return</span>&nbsp;<span class="ident" id="6313347">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6313353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313357">return</span>&nbsp;<span class="ident" id="6313364">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313370">case</span>&nbsp;<span class="ident" id="6313375">reflect</span><span class="op" id="6313382">.</span><span class="ident" id="6313383">Bool</span><span class="op" id="6313387">,</span>&nbsp;<span class="ident" id="6313389">reflect</span><span class="op" id="6313396">.</span><span class="ident" id="6313397">Float32</span><span class="op" id="6313404">,</span>&nbsp;<span class="ident" id="6313406">reflect</span><span class="op" id="6313413">.</span><span class="ident" id="6313414">Float64</span><span class="op" id="6313421">,</span>&nbsp;<span class="ident" id="6313423">reflect</span><span class="op" id="6313430">.</span><span class="ident" id="6313431">Int</span><span class="op" id="6313434">,</span>&nbsp;<span class="ident" id="6313436">reflect</span><span class="op" id="6313443">.</span><span class="ident" id="6313444">Int8</span><span class="op" id="6313448">,</span>&nbsp;<span class="ident" id="6313450">reflect</span><span class="op" id="6313457">.</span><span class="ident" id="6313458">Int16</span><span class="op" id="6313463">,</span>&nbsp;<span class="ident" id="6313465">reflect</span><span class="op" id="6313472">.</span><span class="ident" id="6313473">Int32</span><span class="op" id="6313478">,</span>&nbsp;<span class="ident" id="6313480">reflect</span><span class="op" id="6313487">.</span><span class="ident" id="6313488">Int64</span><span class="op" id="6313493">,</span>&nbsp;<span class="ident" id="6313495">reflect</span><span class="op" id="6313502">.</span><span class="ident" id="6313503">Uint</span><span class="op" id="6313507">,</span>&nbsp;<span class="ident" id="6313509">reflect</span><span class="op" id="6313516">.</span><span class="ident" id="6313517">Uint8</span><span class="op" id="6313522">,</span>&nbsp;<span class="ident" id="6313524">reflect</span><span class="op" id="6313531">.</span><span class="ident" id="6313532">Uint16</span><span class="op" id="6313538">,</span>&nbsp;<span class="ident" id="6313540">reflect</span><span class="op" id="6313547">.</span><span class="ident" id="6313548">Uint32</span><span class="op" id="6313554">,</span>&nbsp;<span class="ident" id="6313556">reflect</span><span class="op" id="6313563">.</span><span class="ident" id="6313564">Uint64</span><span class="op" id="6313570">,</span>&nbsp;<span class="ident" id="6313572">reflect</span><span class="op" id="6313579">.</span><span class="ident" id="6313580">Uintptr</span><span class="op" id="6313587">,</span>&nbsp;<span class="ident" id="6313589">reflect</span><span class="op" id="6313596">.</span><span class="ident" id="6313597">String</span><span class="op" id="6313603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313607">saveData</span>&nbsp;<span class="op" id="6313616">=</span>&nbsp;<span class="ident" id="6313618">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313622">case</span>&nbsp;<span class="ident" id="6313627">reflect</span><span class="op" id="6313634">.</span><span class="ident" id="6313635">Struct</span><span class="op" id="6313641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313645">typ</span>&nbsp;<span class="op" id="6313649">:=</span>&nbsp;<span class="ident" id="6313652">v</span><span class="op" id="6313653">.</span><span class="ident" id="6313654">Type</span><span class="op" id="6313658">(</span><span class="op" id="6313659">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313663">if</span>&nbsp;<span class="ident" id="6313666">typ</span>&nbsp;<span class="op" id="6313670">==</span>&nbsp;<span class="ident" id="6313673">nameType</span>&nbsp;<span class="op" id="6313682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313687">v</span><span class="op" id="6313688">.</span><span class="ident" id="6313689">Set</span><span class="op" id="6313692">(</span><span class="ident" id="6313693">reflect</span><span class="op" id="6313700">.</span><span class="ident" id="6313701">ValueOf</span><span class="op" id="6313708">(</span><span class="ident" id="6313709">start</span><span class="op" id="6313714">.</span><span class="ident" id="6313715">Name</span><span class="op" id="6313719">)</span><span class="op" id="6313720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313725">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6313733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313738">sv</span>&nbsp;<span class="op" id="6313741">=</span>&nbsp;<span class="ident" id="6313743">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313747">tinfo</span><span class="op" id="6313752">,</span>&nbsp;<span class="ident" id="6313754">err</span>&nbsp;<span class="op" id="6313758">=</span>&nbsp;<span class="ident" id="6313760">getTypeInfo</span><span class="op" id="6313771">(</span><span class="ident" id="6313772">typ</span><span class="op" id="6313775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313779">if</span>&nbsp;<span class="ident" id="6313782">err</span>&nbsp;<span class="op" id="6313786">!=</span>&nbsp;<span class="ident" id="6313789">nil</span>&nbsp;<span class="op" id="6313793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313798">return</span>&nbsp;<span class="ident" id="6313805">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6313811">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6313816">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313855">if</span>&nbsp;<span class="ident" id="6313858">tinfo</span><span class="op" id="6313863">.</span><span class="ident" id="6313864">xmlname</span>&nbsp;<span class="op" id="6313872">!=</span>&nbsp;<span class="ident" id="6313875">nil</span>&nbsp;<span class="op" id="6313879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6313884">finfo</span>&nbsp;<span class="op" id="6313890">:=</span>&nbsp;<span class="ident" id="6313893">tinfo</span><span class="op" id="6313898">.</span><span class="ident" id="6313899">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313910">if</span>&nbsp;<span class="ident" id="6313913">finfo</span><span class="op" id="6313918">.</span><span class="ident" id="6313919">name</span>&nbsp;<span class="op" id="6313924">!=</span>&nbsp;<span class="string" id="6313927">&#34;&#34;</span>&nbsp;<span class="op" id="6313930">&amp;&amp;</span>&nbsp;<span class="ident" id="6313933">finfo</span><span class="op" id="6313938">.</span><span class="ident" id="6313939">name</span>&nbsp;<span class="op" id="6313944">!=</span>&nbsp;<span class="ident" id="6313947">start</span><span class="op" id="6313952">.</span><span class="ident" id="6313953">Name</span><span class="op" id="6313957">.</span><span class="ident" id="6313958">Local</span>&nbsp;<span class="op" id="6313964">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6313970">return</span>&nbsp;<span class="ident" id="6313977">UnmarshalError</span><span class="op" id="6313991">(</span><span class="string" id="6313992">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6314018">+</span>&nbsp;<span class="ident" id="6314020">finfo</span><span class="op" id="6314025">.</span><span class="ident" id="6314026">name</span>&nbsp;<span class="op" id="6314031">+</span>&nbsp;<span class="string" id="6314033">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6314048">+</span>&nbsp;<span class="ident" id="6314050">start</span><span class="op" id="6314055">.</span><span class="ident" id="6314056">Name</span><span class="op" id="6314060">.</span><span class="ident" id="6314061">Local</span>&nbsp;<span class="op" id="6314067">+</span>&nbsp;<span class="string" id="6314069">&#34;&gt;&#34;</span><span class="op" id="6314072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314082">if</span>&nbsp;<span class="ident" id="6314085">finfo</span><span class="op" id="6314090">.</span><span class="ident" id="6314091">xmlns</span>&nbsp;<span class="op" id="6314097">!=</span>&nbsp;<span class="string" id="6314100">&#34;&#34;</span>&nbsp;<span class="op" id="6314103">&amp;&amp;</span>&nbsp;<span class="ident" id="6314106">finfo</span><span class="op" id="6314111">.</span><span class="ident" id="6314112">xmlns</span>&nbsp;<span class="op" id="6314118">!=</span>&nbsp;<span class="ident" id="6314121">start</span><span class="op" id="6314126">.</span><span class="ident" id="6314127">Name</span><span class="op" id="6314131">.</span><span class="ident" id="6314132">Space</span>&nbsp;<span class="op" id="6314138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314144">e</span>&nbsp;<span class="op" id="6314146">:=</span>&nbsp;<span class="string" id="6314149">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6314170">+</span>&nbsp;<span class="ident" id="6314172">finfo</span><span class="op" id="6314177">.</span><span class="ident" id="6314178">name</span>&nbsp;<span class="op" id="6314183">+</span>&nbsp;<span class="string" id="6314185">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="6314204">+</span>&nbsp;<span class="ident" id="6314206">finfo</span><span class="op" id="6314211">.</span><span class="ident" id="6314212">xmlns</span>&nbsp;<span class="op" id="6314218">+</span>&nbsp;<span class="string" id="6314220">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314237">if</span>&nbsp;<span class="ident" id="6314240">start</span><span class="op" id="6314245">.</span><span class="ident" id="6314246">Name</span><span class="op" id="6314250">.</span><span class="ident" id="6314251">Space</span>&nbsp;<span class="op" id="6314257">==</span>&nbsp;<span class="string" id="6314260">&#34;&#34;</span>&nbsp;<span class="op" id="6314263">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314270">e</span>&nbsp;<span class="op" id="6314272">+=</span>&nbsp;<span class="string" id="6314275">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314295">}</span>&nbsp;<span class="keyword" id="6314297">else</span>&nbsp;<span class="op" id="6314302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314309">e</span>&nbsp;<span class="op" id="6314311">+=</span>&nbsp;<span class="ident" id="6314314">start</span><span class="op" id="6314319">.</span><span class="ident" id="6314320">Name</span><span class="op" id="6314324">.</span><span class="ident" id="6314325">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314341">return</span>&nbsp;<span class="ident" id="6314348">UnmarshalError</span><span class="op" id="6314362">(</span><span class="ident" id="6314363">e</span><span class="op" id="6314364">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314374">fv</span>&nbsp;<span class="op" id="6314377">:=</span>&nbsp;<span class="ident" id="6314380">finfo</span><span class="op" id="6314385">.</span><span class="ident" id="6314386">value</span><span class="op" id="6314391">(</span><span class="ident" id="6314392">sv</span><span class="op" id="6314394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314399">if</span>&nbsp;<span class="ident" id="6314402">_</span><span class="op" id="6314403">,</span>&nbsp;<span class="ident" id="6314405">ok</span>&nbsp;<span class="op" id="6314408">:=</span>&nbsp;<span class="ident" id="6314411">fv</span><span class="op" id="6314413">.</span><span class="ident" id="6314414">Interface</span><span class="op" id="6314423">(</span><span class="op" id="6314424">)</span><span class="op" id="6314425">.</span><span class="op" id="6314426">(</span><span class="ident" id="6314427">Name</span><span class="op" id="6314431">)</span><span class="op" id="6314432">;</span>&nbsp;<span class="ident" id="6314434">ok</span>&nbsp;<span class="op" id="6314437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314443">fv</span><span class="op" id="6314445">.</span><span class="ident" id="6314446">Set</span><span class="op" id="6314449">(</span><span class="ident" id="6314450">reflect</span><span class="op" id="6314457">.</span><span class="ident" id="6314458">ValueOf</span><span class="op" id="6314465">(</span><span class="ident" id="6314466">start</span><span class="op" id="6314471">.</span><span class="ident" id="6314472">Name</span><span class="op" id="6314476">)</span><span class="op" id="6314477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314482">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6314491">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6314515">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314588">for</span>&nbsp;<span class="ident" id="6314592">i</span>&nbsp;<span class="op" id="6314594">:=</span>&nbsp;<span class="keyword" id="6314597">range</span>&nbsp;<span class="ident" id="6314603">tinfo</span><span class="op" id="6314608">.</span><span class="ident" id="6314609">fields</span>&nbsp;<span class="op" id="6314616">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314621">finfo</span>&nbsp;<span class="op" id="6314627">:=</span>&nbsp;<span class="op" id="6314630">&amp;</span><span class="ident" id="6314631">tinfo</span><span class="op" id="6314636">.</span><span class="ident" id="6314637">fields</span><span class="op" id="6314643">[</span><span class="ident" id="6314644">i</span><span class="op" id="6314645">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314650">switch</span>&nbsp;<span class="ident" id="6314657">finfo</span><span class="op" id="6314662">.</span><span class="ident" id="6314663">flags</span>&nbsp;<span class="op" id="6314669">&amp;</span>&nbsp;<span class="ident" id="6314671">fMode</span>&nbsp;<span class="op" id="6314677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314682">case</span>&nbsp;<span class="ident" id="6314687">fAttr</span><span class="op" id="6314692">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6314698">strv</span>&nbsp;<span class="op" id="6314703">:=</span>&nbsp;<span class="ident" id="6314706">finfo</span><span class="op" id="6314711">.</span><span class="ident" id="6314712">value</span><span class="op" id="6314717">(</span><span class="ident" id="6314718">sv</span><span class="op" id="6314720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6314726">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314753">for</span>&nbsp;<span class="ident" id="6314757">_</span><span class="op" id="6314758">,</span>&nbsp;<span class="ident" id="6314760">a</span>&nbsp;<span class="op" id="6314762">:=</span>&nbsp;<span class="keyword" id="6314765">range</span>&nbsp;<span class="ident" id="6314771">start</span><span class="op" id="6314776">.</span><span class="ident" id="6314777">Attr</span>&nbsp;<span class="op" id="6314782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314789">if</span>&nbsp;<span class="ident" id="6314792">a</span><span class="op" id="6314793">.</span><span class="ident" id="6314794">Name</span><span class="op" id="6314798">.</span><span class="ident" id="6314799">Local</span>&nbsp;<span class="op" id="6314805">==</span>&nbsp;<span class="ident" id="6314808">finfo</span><span class="op" id="6314813">.</span><span class="ident" id="6314814">name</span>&nbsp;<span class="op" id="6314819">&amp;&amp;</span>&nbsp;<span class="op" id="6314822">(</span><span class="ident" id="6314823">finfo</span><span class="op" id="6314828">.</span><span class="ident" id="6314829">xmlns</span>&nbsp;<span class="op" id="6314835">==</span>&nbsp;<span class="string" id="6314838">&#34;&#34;</span>&nbsp;<span class="op" id="6314841">||</span>&nbsp;<span class="ident" id="6314844">finfo</span><span class="op" id="6314849">.</span><span class="ident" id="6314850">xmlns</span>&nbsp;<span class="op" id="6314856">==</span>&nbsp;<span class="ident" id="6314859">a</span><span class="op" id="6314860">.</span><span class="ident" id="6314861">Name</span><span class="op" id="6314865">.</span><span class="ident" id="6314866">Space</span><span class="op" id="6314871">)</span>&nbsp;<span class="op" id="6314873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314881">if</span>&nbsp;<span class="ident" id="6314884">err</span>&nbsp;<span class="op" id="6314888">:=</span>&nbsp;<span class="ident" id="6314891">p</span><span class="op" id="6314892">.</span><span class="ident" id="6314893">unmarshalAttr</span><span class="op" id="6314906">(</span><span class="ident" id="6314907">strv</span><span class="op" id="6314911">,</span>&nbsp;<span class="ident" id="6314913">a</span><span class="op" id="6314914">)</span><span class="op" id="6314915">;</span>&nbsp;<span class="ident" id="6314917">err</span>&nbsp;<span class="op" id="6314921">!=</span>&nbsp;<span class="ident" id="6314924">nil</span>&nbsp;<span class="op" id="6314928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314937">return</span>&nbsp;<span class="ident" id="6314944">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314954">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314962">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6314979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6314985">case</span>&nbsp;<span class="ident" id="6314990">fCharData</span><span class="op" id="6314999">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315005">if</span>&nbsp;<span class="op" id="6315008">!</span><span class="ident" id="6315009">saveData</span><span class="op" id="6315017">.</span><span class="ident" id="6315018">IsValid</span><span class="op" id="6315025">(</span><span class="op" id="6315026">)</span>&nbsp;<span class="op" id="6315028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315035">saveData</span>&nbsp;<span class="op" id="6315044">=</span>&nbsp;<span class="ident" id="6315046">finfo</span><span class="op" id="6315051">.</span><span class="ident" id="6315052">value</span><span class="op" id="6315057">(</span><span class="ident" id="6315058">sv</span><span class="op" id="6315060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315072">case</span>&nbsp;<span class="ident" id="6315077">fComment</span><span class="op" id="6315085">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315091">if</span>&nbsp;<span class="op" id="6315094">!</span><span class="ident" id="6315095">saveComment</span><span class="op" id="6315106">.</span><span class="ident" id="6315107">IsValid</span><span class="op" id="6315114">(</span><span class="op" id="6315115">)</span>&nbsp;<span class="op" id="6315117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315124">saveComment</span>&nbsp;<span class="op" id="6315136">=</span>&nbsp;<span class="ident" id="6315138">finfo</span><span class="op" id="6315143">.</span><span class="ident" id="6315144">value</span><span class="op" id="6315149">(</span><span class="ident" id="6315150">sv</span><span class="op" id="6315152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315164">case</span>&nbsp;<span class="ident" id="6315169">fAny</span><span class="op" id="6315173">,</span>&nbsp;<span class="ident" id="6315175">fAny</span>&nbsp;<span class="op" id="6315180">|</span>&nbsp;<span class="ident" id="6315182">fElement</span><span class="op" id="6315190">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315196">if</span>&nbsp;<span class="op" id="6315199">!</span><span class="ident" id="6315200">saveAny</span><span class="op" id="6315207">.</span><span class="ident" id="6315208">IsValid</span><span class="op" id="6315215">(</span><span class="op" id="6315216">)</span>&nbsp;<span class="op" id="6315218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315225">saveAny</span>&nbsp;<span class="op" id="6315233">=</span>&nbsp;<span class="ident" id="6315235">finfo</span><span class="op" id="6315240">.</span><span class="ident" id="6315241">value</span><span class="op" id="6315246">(</span><span class="ident" id="6315247">sv</span><span class="op" id="6315249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315261">case</span>&nbsp;<span class="ident" id="6315266">fInnerXml</span><span class="op" id="6315275">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315281">if</span>&nbsp;<span class="op" id="6315284">!</span><span class="ident" id="6315285">saveXML</span><span class="op" id="6315292">.</span><span class="ident" id="6315293">IsValid</span><span class="op" id="6315300">(</span><span class="op" id="6315301">)</span>&nbsp;<span class="op" id="6315303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315310">saveXML</span>&nbsp;<span class="op" id="6315318">=</span>&nbsp;<span class="ident" id="6315320">finfo</span><span class="op" id="6315325">.</span><span class="ident" id="6315326">value</span><span class="op" id="6315331">(</span><span class="ident" id="6315332">sv</span><span class="op" id="6315334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315341">if</span>&nbsp;<span class="ident" id="6315344">p</span><span class="op" id="6315345">.</span><span class="ident" id="6315346">saved</span>&nbsp;<span class="op" id="6315352">==</span>&nbsp;<span class="ident" id="6315355">nil</span>&nbsp;<span class="op" id="6315359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315367">saveXMLIndex</span>&nbsp;<span class="op" id="6315380">=</span>&nbsp;<span class="num" id="6315382">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315390">p</span><span class="op" id="6315391">.</span><span class="ident" id="6315392">saved</span>&nbsp;<span class="op" id="6315398">=</span>&nbsp;<span class="builtinfunc" id="6315400">new</span><span class="op" id="6315403">(</span><span class="ident" id="6315404">bytes</span><span class="op" id="6315409">.</span><span class="ident" id="6315410">Buffer</span><span class="op" id="6315416">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315423">}</span>&nbsp;<span class="keyword" id="6315425">else</span>&nbsp;<span class="op" id="6315430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315438">saveXMLIndex</span>&nbsp;<span class="op" id="6315451">=</span>&nbsp;<span class="ident" id="6315453">p</span><span class="op" id="6315454">.</span><span class="ident" id="6315455">savedOffset</span><span class="op" id="6315466">(</span><span class="op" id="6315467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315485">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6315496">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6315518">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="6315557">Loop</span><span class="op" id="6315561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315564">for</span>&nbsp;<span class="op" id="6315568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315572">var</span>&nbsp;<span class="ident" id="6315576">savedOffset</span>&nbsp;<span class="builtintype" id="6315588">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315594">if</span>&nbsp;<span class="ident" id="6315597">saveXML</span><span class="op" id="6315604">.</span><span class="ident" id="6315605">IsValid</span><span class="op" id="6315612">(</span><span class="op" id="6315613">)</span>&nbsp;<span class="op" id="6315615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315620">savedOffset</span>&nbsp;<span class="op" id="6315632">=</span>&nbsp;<span class="ident" id="6315634">p</span><span class="op" id="6315635">.</span><span class="ident" id="6315636">savedOffset</span><span class="op" id="6315647">(</span><span class="op" id="6315648">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315656">tok</span><span class="op" id="6315659">,</span>&nbsp;<span class="ident" id="6315661">err</span>&nbsp;<span class="op" id="6315665">:=</span>&nbsp;<span class="ident" id="6315668">p</span><span class="op" id="6315669">.</span><span class="ident" id="6315670">Token</span><span class="op" id="6315675">(</span><span class="op" id="6315676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315680">if</span>&nbsp;<span class="ident" id="6315683">err</span>&nbsp;<span class="op" id="6315687">!=</span>&nbsp;<span class="ident" id="6315690">nil</span>&nbsp;<span class="op" id="6315694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315699">return</span>&nbsp;<span class="ident" id="6315706">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315712">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315716">switch</span>&nbsp;<span class="ident" id="6315723">t</span>&nbsp;<span class="op" id="6315725">:=</span>&nbsp;<span class="ident" id="6315728">tok</span><span class="op" id="6315731">.</span><span class="op" id="6315732">(</span><span class="keyword" id="6315733">type</span><span class="op" id="6315737">)</span>&nbsp;<span class="op" id="6315739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315743">case</span>&nbsp;<span class="ident" id="6315748">StartElement</span><span class="op" id="6315760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315765">consumed</span>&nbsp;<span class="op" id="6315774">:=</span>&nbsp;<span class="builtintype" id="6315777">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315786">if</span>&nbsp;<span class="ident" id="6315789">sv</span><span class="op" id="6315791">.</span><span class="ident" id="6315792">IsValid</span><span class="op" id="6315799">(</span><span class="op" id="6315800">)</span>&nbsp;<span class="op" id="6315802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315808">consumed</span><span class="op" id="6315816">,</span>&nbsp;<span class="ident" id="6315818">err</span>&nbsp;<span class="op" id="6315822">=</span>&nbsp;<span class="ident" id="6315824">p</span><span class="op" id="6315825">.</span><span class="ident" id="6315826">unmarshalPath</span><span class="op" id="6315839">(</span><span class="ident" id="6315840">tinfo</span><span class="op" id="6315845">,</span>&nbsp;<span class="ident" id="6315847">sv</span><span class="op" id="6315849">,</span>&nbsp;<span class="ident" id="6315851">nil</span><span class="op" id="6315854">,</span>&nbsp;<span class="op" id="6315856">&amp;</span><span class="ident" id="6315857">t</span><span class="op" id="6315858">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315864">if</span>&nbsp;<span class="ident" id="6315867">err</span>&nbsp;<span class="op" id="6315871">!=</span>&nbsp;<span class="ident" id="6315874">nil</span>&nbsp;<span class="op" id="6315878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315885">return</span>&nbsp;<span class="ident" id="6315892">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6315900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315906">if</span>&nbsp;<span class="op" id="6315909">!</span><span class="ident" id="6315910">consumed</span>&nbsp;<span class="op" id="6315919">&amp;&amp;</span>&nbsp;<span class="ident" id="6315922">saveAny</span><span class="op" id="6315929">.</span><span class="ident" id="6315930">IsValid</span><span class="op" id="6315937">(</span><span class="op" id="6315938">)</span>&nbsp;<span class="op" id="6315940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6315947">consumed</span>&nbsp;<span class="op" id="6315956">=</span>&nbsp;<span class="builtintype" id="6315958">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6315968">if</span>&nbsp;<span class="ident" id="6315971">err</span>&nbsp;<span class="op" id="6315975">:=</span>&nbsp;<span class="ident" id="6315978">p</span><span class="op" id="6315979">.</span><span class="ident" id="6315980">unmarshal</span><span class="op" id="6315989">(</span><span class="ident" id="6315990">saveAny</span><span class="op" id="6315997">,</span>&nbsp;<span class="op" id="6315999">&amp;</span><span class="ident" id="6316000">t</span><span class="op" id="6316001">)</span><span class="op" id="6316002">;</span>&nbsp;<span class="ident" id="6316004">err</span>&nbsp;<span class="op" id="6316008">!=</span>&nbsp;<span class="ident" id="6316011">nil</span>&nbsp;<span class="op" id="6316015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316023">return</span>&nbsp;<span class="ident" id="6316030">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316050">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316055">if</span>&nbsp;<span class="op" id="6316058">!</span><span class="ident" id="6316059">consumed</span>&nbsp;<span class="op" id="6316068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316074">if</span>&nbsp;<span class="ident" id="6316077">err</span>&nbsp;<span class="op" id="6316081">:=</span>&nbsp;<span class="ident" id="6316084">p</span><span class="op" id="6316085">.</span><span class="ident" id="6316086">Skip</span><span class="op" id="6316090">(</span><span class="op" id="6316091">)</span><span class="op" id="6316092">;</span>&nbsp;<span class="ident" id="6316094">err</span>&nbsp;<span class="op" id="6316098">!=</span>&nbsp;<span class="ident" id="6316101">nil</span>&nbsp;<span class="op" id="6316105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316112">return</span>&nbsp;<span class="ident" id="6316119">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316132">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316137">case</span>&nbsp;<span class="ident" id="6316142">EndElement</span><span class="op" id="6316152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316157">if</span>&nbsp;<span class="ident" id="6316160">saveXML</span><span class="op" id="6316167">.</span><span class="ident" id="6316168">IsValid</span><span class="op" id="6316175">(</span><span class="op" id="6316176">)</span>&nbsp;<span class="op" id="6316178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316184">saveXMLData</span>&nbsp;<span class="op" id="6316196">=</span>&nbsp;<span class="ident" id="6316198">p</span><span class="op" id="6316199">.</span><span class="ident" id="6316200">saved</span><span class="op" id="6316205">.</span><span class="ident" id="6316206">Bytes</span><span class="op" id="6316211">(</span><span class="op" id="6316212">)</span><span class="op" id="6316213">[</span><span class="ident" id="6316214">saveXMLIndex</span><span class="op" id="6316226">:</span><span class="ident" id="6316227">savedOffset</span><span class="op" id="6316238">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316244">if</span>&nbsp;<span class="ident" id="6316247">saveXMLIndex</span>&nbsp;<span class="op" id="6316260">==</span>&nbsp;<span class="num" id="6316263">0</span>&nbsp;<span class="op" id="6316265">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316272">p</span><span class="op" id="6316273">.</span><span class="ident" id="6316274">saved</span>&nbsp;<span class="op" id="6316280">=</span>&nbsp;<span class="ident" id="6316282">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316300">break</span>&nbsp;<span class="ident" id="6316306">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316314">case</span>&nbsp;<span class="ident" id="6316319">CharData</span><span class="op" id="6316327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316332">if</span>&nbsp;<span class="ident" id="6316335">saveData</span><span class="op" id="6316343">.</span><span class="ident" id="6316344">IsValid</span><span class="op" id="6316351">(</span><span class="op" id="6316352">)</span>&nbsp;<span class="op" id="6316354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316360">data</span>&nbsp;<span class="op" id="6316365">=</span>&nbsp;<span class="builtinfunc" id="6316367">append</span><span class="op" id="6316373">(</span><span class="ident" id="6316374">data</span><span class="op" id="6316378">,</span>&nbsp;<span class="ident" id="6316380">t</span><span class="op" id="6316381">...</span><span class="op" id="6316384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316394">case</span>&nbsp;<span class="ident" id="6316399">Comment</span><span class="op" id="6316406">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316411">if</span>&nbsp;<span class="ident" id="6316414">saveComment</span><span class="op" id="6316425">.</span><span class="ident" id="6316426">IsValid</span><span class="op" id="6316433">(</span><span class="op" id="6316434">)</span>&nbsp;<span class="op" id="6316436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316442">comment</span>&nbsp;<span class="op" id="6316450">=</span>&nbsp;<span class="builtinfunc" id="6316452">append</span><span class="op" id="6316458">(</span><span class="ident" id="6316459">comment</span><span class="op" id="6316466">,</span>&nbsp;<span class="ident" id="6316468">t</span><span class="op" id="6316469">...</span><span class="op" id="6316472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316481">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316488">if</span>&nbsp;<span class="ident" id="6316491">saveData</span><span class="op" id="6316499">.</span><span class="ident" id="6316500">IsValid</span><span class="op" id="6316507">(</span><span class="op" id="6316508">)</span>&nbsp;<span class="op" id="6316510">&amp;&amp;</span>&nbsp;<span class="ident" id="6316513">saveData</span><span class="op" id="6316521">.</span><span class="ident" id="6316522">CanInterface</span><span class="op" id="6316534">(</span><span class="op" id="6316535">)</span>&nbsp;<span class="op" id="6316537">&amp;&amp;</span>&nbsp;<span class="ident" id="6316540">saveData</span><span class="op" id="6316548">.</span><span class="ident" id="6316549">Type</span><span class="op" id="6316553">(</span><span class="op" id="6316554">)</span><span class="op" id="6316555">.</span><span class="ident" id="6316556">Implements</span><span class="op" id="6316566">(</span><span class="ident" id="6316567">textUnmarshalerType</span><span class="op" id="6316586">)</span>&nbsp;<span class="op" id="6316588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316592">if</span>&nbsp;<span class="ident" id="6316595">err</span>&nbsp;<span class="op" id="6316599">:=</span>&nbsp;<span class="ident" id="6316602">saveData</span><span class="op" id="6316610">.</span><span class="ident" id="6316611">Interface</span><span class="op" id="6316620">(</span><span class="op" id="6316621">)</span><span class="op" id="6316622">.</span><span class="op" id="6316623">(</span><span class="ident" id="6316624">encoding</span><span class="op" id="6316632">.</span><span class="ident" id="6316633">TextUnmarshaler</span><span class="op" id="6316648">)</span><span class="op" id="6316649">.</span><span class="ident" id="6316650">UnmarshalText</span><span class="op" id="6316663">(</span><span class="ident" id="6316664">data</span><span class="op" id="6316668">)</span><span class="op" id="6316669">;</span>&nbsp;<span class="ident" id="6316671">err</span>&nbsp;<span class="op" id="6316675">!=</span>&nbsp;<span class="ident" id="6316678">nil</span>&nbsp;<span class="op" id="6316682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316687">return</span>&nbsp;<span class="ident" id="6316694">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316704">saveData</span>&nbsp;<span class="op" id="6316713">=</span>&nbsp;<span class="ident" id="6316715">reflect</span><span class="op" id="6316722">.</span><span class="ident" id="6316723">Value</span><span class="op" id="6316728">{</span><span class="op" id="6316729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316736">if</span>&nbsp;<span class="ident" id="6316739">saveData</span><span class="op" id="6316747">.</span><span class="ident" id="6316748">IsValid</span><span class="op" id="6316755">(</span><span class="op" id="6316756">)</span>&nbsp;<span class="op" id="6316758">&amp;&amp;</span>&nbsp;<span class="ident" id="6316761">saveData</span><span class="op" id="6316769">.</span><span class="ident" id="6316770">CanAddr</span><span class="op" id="6316777">(</span><span class="op" id="6316778">)</span>&nbsp;<span class="op" id="6316780">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316784">pv</span>&nbsp;<span class="op" id="6316787">:=</span>&nbsp;<span class="ident" id="6316790">saveData</span><span class="op" id="6316798">.</span><span class="ident" id="6316799">Addr</span><span class="op" id="6316803">(</span><span class="op" id="6316804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316808">if</span>&nbsp;<span class="ident" id="6316811">pv</span><span class="op" id="6316813">.</span><span class="ident" id="6316814">CanInterface</span><span class="op" id="6316826">(</span><span class="op" id="6316827">)</span>&nbsp;<span class="op" id="6316829">&amp;&amp;</span>&nbsp;<span class="ident" id="6316832">pv</span><span class="op" id="6316834">.</span><span class="ident" id="6316835">Type</span><span class="op" id="6316839">(</span><span class="op" id="6316840">)</span><span class="op" id="6316841">.</span><span class="ident" id="6316842">Implements</span><span class="op" id="6316852">(</span><span class="ident" id="6316853">textUnmarshalerType</span><span class="op" id="6316872">)</span>&nbsp;<span class="op" id="6316874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316879">if</span>&nbsp;<span class="ident" id="6316882">err</span>&nbsp;<span class="op" id="6316886">:=</span>&nbsp;<span class="ident" id="6316889">pv</span><span class="op" id="6316891">.</span><span class="ident" id="6316892">Interface</span><span class="op" id="6316901">(</span><span class="op" id="6316902">)</span><span class="op" id="6316903">.</span><span class="op" id="6316904">(</span><span class="ident" id="6316905">encoding</span><span class="op" id="6316913">.</span><span class="ident" id="6316914">TextUnmarshaler</span><span class="op" id="6316929">)</span><span class="op" id="6316930">.</span><span class="ident" id="6316931">UnmarshalText</span><span class="op" id="6316944">(</span><span class="ident" id="6316945">data</span><span class="op" id="6316949">)</span><span class="op" id="6316950">;</span>&nbsp;<span class="ident" id="6316952">err</span>&nbsp;<span class="op" id="6316956">!=</span>&nbsp;<span class="ident" id="6316959">nil</span>&nbsp;<span class="op" id="6316963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6316969">return</span>&nbsp;<span class="ident" id="6316976">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6316983">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6316988">saveData</span>&nbsp;<span class="op" id="6316997">=</span>&nbsp;<span class="ident" id="6316999">reflect</span><span class="op" id="6317006">.</span><span class="ident" id="6317007">Value</span><span class="op" id="6317012">{</span><span class="op" id="6317013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317024">if</span>&nbsp;<span class="ident" id="6317027">err</span>&nbsp;<span class="op" id="6317031">:=</span>&nbsp;<span class="ident" id="6317034">copyValue</span><span class="op" id="6317043">(</span><span class="ident" id="6317044">saveData</span><span class="op" id="6317052">,</span>&nbsp;<span class="ident" id="6317054">data</span><span class="op" id="6317058">)</span><span class="op" id="6317059">;</span>&nbsp;<span class="ident" id="6317061">err</span>&nbsp;<span class="op" id="6317065">!=</span>&nbsp;<span class="ident" id="6317068">nil</span>&nbsp;<span class="op" id="6317072">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317076">return</span>&nbsp;<span class="ident" id="6317083">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317092">switch</span>&nbsp;<span class="ident" id="6317099">t</span>&nbsp;<span class="op" id="6317101">:=</span>&nbsp;<span class="ident" id="6317104">saveComment</span><span class="op" id="6317115">;</span>&nbsp;<span class="ident" id="6317117">t</span><span class="op" id="6317118">.</span><span class="ident" id="6317119">Kind</span><span class="op" id="6317123">(</span><span class="op" id="6317124">)</span>&nbsp;<span class="op" id="6317126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317129">case</span>&nbsp;<span class="ident" id="6317134">reflect</span><span class="op" id="6317141">.</span><span class="ident" id="6317142">String</span><span class="op" id="6317148">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317152">t</span><span class="op" id="6317153">.</span><span class="ident" id="6317154">SetString</span><span class="op" id="6317163">(</span><span class="builtintype" id="6317164">string</span><span class="op" id="6317170">(</span><span class="ident" id="6317171">comment</span><span class="op" id="6317178">)</span><span class="op" id="6317179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317182">case</span>&nbsp;<span class="ident" id="6317187">reflect</span><span class="op" id="6317194">.</span><span class="ident" id="6317195">Slice</span><span class="op" id="6317200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317204">t</span><span class="op" id="6317205">.</span><span class="ident" id="6317206">Set</span><span class="op" id="6317209">(</span><span class="ident" id="6317210">reflect</span><span class="op" id="6317217">.</span><span class="ident" id="6317218">ValueOf</span><span class="op" id="6317225">(</span><span class="ident" id="6317226">comment</span><span class="op" id="6317233">)</span><span class="op" id="6317234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317241">switch</span>&nbsp;<span class="ident" id="6317248">t</span>&nbsp;<span class="op" id="6317250">:=</span>&nbsp;<span class="ident" id="6317253">saveXML</span><span class="op" id="6317260">;</span>&nbsp;<span class="ident" id="6317262">t</span><span class="op" id="6317263">.</span><span class="ident" id="6317264">Kind</span><span class="op" id="6317268">(</span><span class="op" id="6317269">)</span>&nbsp;<span class="op" id="6317271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317274">case</span>&nbsp;<span class="ident" id="6317279">reflect</span><span class="op" id="6317286">.</span><span class="ident" id="6317287">String</span><span class="op" id="6317293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317297">t</span><span class="op" id="6317298">.</span><span class="ident" id="6317299">SetString</span><span class="op" id="6317308">(</span><span class="builtintype" id="6317309">string</span><span class="op" id="6317315">(</span><span class="ident" id="6317316">saveXMLData</span><span class="op" id="6317327">)</span><span class="op" id="6317328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317331">case</span>&nbsp;<span class="ident" id="6317336">reflect</span><span class="op" id="6317343">.</span><span class="ident" id="6317344">Slice</span><span class="op" id="6317349">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317353">t</span><span class="op" id="6317354">.</span><span class="ident" id="6317355">Set</span><span class="op" id="6317358">(</span><span class="ident" id="6317359">reflect</span><span class="op" id="6317366">.</span><span class="ident" id="6317367">ValueOf</span><span class="op" id="6317374">(</span><span class="ident" id="6317375">saveXMLData</span><span class="op" id="6317386">)</span><span class="op" id="6317387">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317394">return</span>&nbsp;<span class="ident" id="6317401">nil</span><br>
<span class="lineno"></span><span class="op" id="6317405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6317408">func</span>&nbsp;<span class="ident" id="6317413">copyValue</span><span class="op" id="6317422">(</span><span class="ident" id="6317423">dst</span>&nbsp;<span class="ident" id="6317427">reflect</span><span class="op" id="6317434">.</span><span class="ident" id="6317435">Value</span><span class="op" id="6317440">,</span>&nbsp;<span class="ident" id="6317442">src</span>&nbsp;<span class="op" id="6317446">[</span><span class="op" id="6317447">]</span><span class="builtintype" id="6317448">byte</span><span class="op" id="6317452">)</span>&nbsp;<span class="op" id="6317454">(</span><span class="ident" id="6317455">err</span>&nbsp;<span class="builtintype" id="6317459">error</span><span class="op" id="6317464">)</span>&nbsp;<span class="op" id="6317466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317469">dst0</span>&nbsp;<span class="op" id="6317474">:=</span>&nbsp;<span class="ident" id="6317477">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317483">if</span>&nbsp;<span class="ident" id="6317486">dst</span><span class="op" id="6317489">.</span><span class="ident" id="6317490">Kind</span><span class="op" id="6317494">(</span><span class="op" id="6317495">)</span>&nbsp;<span class="op" id="6317497">==</span>&nbsp;<span class="ident" id="6317500">reflect</span><span class="op" id="6317507">.</span><span class="ident" id="6317508">Ptr</span>&nbsp;<span class="op" id="6317512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317516">if</span>&nbsp;<span class="ident" id="6317519">dst</span><span class="op" id="6317522">.</span><span class="ident" id="6317523">IsNil</span><span class="op" id="6317528">(</span><span class="op" id="6317529">)</span>&nbsp;<span class="op" id="6317531">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317536">dst</span><span class="op" id="6317539">.</span><span class="ident" id="6317540">Set</span><span class="op" id="6317543">(</span><span class="ident" id="6317544">reflect</span><span class="op" id="6317551">.</span><span class="ident" id="6317552">New</span><span class="op" id="6317555">(</span><span class="ident" id="6317556">dst</span><span class="op" id="6317559">.</span><span class="ident" id="6317560">Type</span><span class="op" id="6317564">(</span><span class="op" id="6317565">)</span><span class="op" id="6317566">.</span><span class="ident" id="6317567">Elem</span><span class="op" id="6317571">(</span><span class="op" id="6317572">)</span><span class="op" id="6317573">)</span><span class="op" id="6317574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317582">dst</span>&nbsp;<span class="op" id="6317586">=</span>&nbsp;<span class="ident" id="6317588">dst</span><span class="op" id="6317591">.</span><span class="ident" id="6317592">Elem</span><span class="op" id="6317596">(</span><span class="op" id="6317597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6317604">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317631">switch</span>&nbsp;<span class="ident" id="6317638">dst</span><span class="op" id="6317641">.</span><span class="ident" id="6317642">Kind</span><span class="op" id="6317646">(</span><span class="op" id="6317647">)</span>&nbsp;<span class="op" id="6317649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317652">case</span>&nbsp;<span class="ident" id="6317657">reflect</span><span class="op" id="6317664">.</span><span class="ident" id="6317665">Invalid</span><span class="op" id="6317672">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6317676">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317700">default</span><span class="op" id="6317707">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317711">return</span>&nbsp;<span class="ident" id="6317718">errors</span><span class="op" id="6317724">.</span><span class="ident" id="6317725">New</span><span class="op" id="6317728">(</span><span class="string" id="6317729">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="6317754">+</span>&nbsp;<span class="ident" id="6317756">dst0</span><span class="op" id="6317760">.</span><span class="ident" id="6317761">Type</span><span class="op" id="6317765">(</span><span class="op" id="6317766">)</span><span class="op" id="6317767">.</span><span class="ident" id="6317768">String</span><span class="op" id="6317774">(</span><span class="op" id="6317775">)</span><span class="op" id="6317776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317779">case</span>&nbsp;<span class="ident" id="6317784">reflect</span><span class="op" id="6317791">.</span><span class="ident" id="6317792">Int</span><span class="op" id="6317795">,</span>&nbsp;<span class="ident" id="6317797">reflect</span><span class="op" id="6317804">.</span><span class="ident" id="6317805">Int8</span><span class="op" id="6317809">,</span>&nbsp;<span class="ident" id="6317811">reflect</span><span class="op" id="6317818">.</span><span class="ident" id="6317819">Int16</span><span class="op" id="6317824">,</span>&nbsp;<span class="ident" id="6317826">reflect</span><span class="op" id="6317833">.</span><span class="ident" id="6317834">Int32</span><span class="op" id="6317839">,</span>&nbsp;<span class="ident" id="6317841">reflect</span><span class="op" id="6317848">.</span><span class="ident" id="6317849">Int64</span><span class="op" id="6317854">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317858">itmp</span><span class="op" id="6317862">,</span>&nbsp;<span class="ident" id="6317864">err</span>&nbsp;<span class="op" id="6317868">:=</span>&nbsp;<span class="ident" id="6317871">strconv</span><span class="op" id="6317878">.</span><span class="ident" id="6317879">ParseInt</span><span class="op" id="6317887">(</span><span class="builtintype" id="6317888">string</span><span class="op" id="6317894">(</span><span class="ident" id="6317895">src</span><span class="op" id="6317898">)</span><span class="op" id="6317899">,</span>&nbsp;<span class="num" id="6317901">10</span><span class="op" id="6317903">,</span>&nbsp;<span class="ident" id="6317905">dst</span><span class="op" id="6317908">.</span><span class="ident" id="6317909">Type</span><span class="op" id="6317913">(</span><span class="op" id="6317914">)</span><span class="op" id="6317915">.</span><span class="ident" id="6317916">Bits</span><span class="op" id="6317920">(</span><span class="op" id="6317921">)</span><span class="op" id="6317922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317926">if</span>&nbsp;<span class="ident" id="6317929">err</span>&nbsp;<span class="op" id="6317933">!=</span>&nbsp;<span class="ident" id="6317936">nil</span>&nbsp;<span class="op" id="6317940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317945">return</span>&nbsp;<span class="ident" id="6317952">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6317958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6317962">dst</span><span class="op" id="6317965">.</span><span class="ident" id="6317966">SetInt</span><span class="op" id="6317972">(</span><span class="ident" id="6317973">itmp</span><span class="op" id="6317977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6317980">case</span>&nbsp;<span class="ident" id="6317985">reflect</span><span class="op" id="6317992">.</span><span class="ident" id="6317993">Uint</span><span class="op" id="6317997">,</span>&nbsp;<span class="ident" id="6317999">reflect</span><span class="op" id="6318006">.</span><span class="ident" id="6318007">Uint8</span><span class="op" id="6318012">,</span>&nbsp;<span class="ident" id="6318014">reflect</span><span class="op" id="6318021">.</span><span class="ident" id="6318022">Uint16</span><span class="op" id="6318028">,</span>&nbsp;<span class="ident" id="6318030">reflect</span><span class="op" id="6318037">.</span><span class="ident" id="6318038">Uint32</span><span class="op" id="6318044">,</span>&nbsp;<span class="ident" id="6318046">reflect</span><span class="op" id="6318053">.</span><span class="ident" id="6318054">Uint64</span><span class="op" id="6318060">,</span>&nbsp;<span class="ident" id="6318062">reflect</span><span class="op" id="6318069">.</span><span class="ident" id="6318070">Uintptr</span><span class="op" id="6318077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318081">utmp</span><span class="op" id="6318085">,</span>&nbsp;<span class="ident" id="6318087">err</span>&nbsp;<span class="op" id="6318091">:=</span>&nbsp;<span class="ident" id="6318094">strconv</span><span class="op" id="6318101">.</span><span class="ident" id="6318102">ParseUint</span><span class="op" id="6318111">(</span><span class="builtintype" id="6318112">string</span><span class="op" id="6318118">(</span><span class="ident" id="6318119">src</span><span class="op" id="6318122">)</span><span class="op" id="6318123">,</span>&nbsp;<span class="num" id="6318125">10</span><span class="op" id="6318127">,</span>&nbsp;<span class="ident" id="6318129">dst</span><span class="op" id="6318132">.</span><span class="ident" id="6318133">Type</span><span class="op" id="6318137">(</span><span class="op" id="6318138">)</span><span class="op" id="6318139">.</span><span class="ident" id="6318140">Bits</span><span class="op" id="6318144">(</span><span class="op" id="6318145">)</span><span class="op" id="6318146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318150">if</span>&nbsp;<span class="ident" id="6318153">err</span>&nbsp;<span class="op" id="6318157">!=</span>&nbsp;<span class="ident" id="6318160">nil</span>&nbsp;<span class="op" id="6318164">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318169">return</span>&nbsp;<span class="ident" id="6318176">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6318182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318186">dst</span><span class="op" id="6318189">.</span><span class="ident" id="6318190">SetUint</span><span class="op" id="6318197">(</span><span class="ident" id="6318198">utmp</span><span class="op" id="6318202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318205">case</span>&nbsp;<span class="ident" id="6318210">reflect</span><span class="op" id="6318217">.</span><span class="ident" id="6318218">Float32</span><span class="op" id="6318225">,</span>&nbsp;<span class="ident" id="6318227">reflect</span><span class="op" id="6318234">.</span><span class="ident" id="6318235">Float64</span><span class="op" id="6318242">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318246">ftmp</span><span class="op" id="6318250">,</span>&nbsp;<span class="ident" id="6318252">err</span>&nbsp;<span class="op" id="6318256">:=</span>&nbsp;<span class="ident" id="6318259">strconv</span><span class="op" id="6318266">.</span><span class="ident" id="6318267">ParseFloat</span><span class="op" id="6318277">(</span><span class="builtintype" id="6318278">string</span><span class="op" id="6318284">(</span><span class="ident" id="6318285">src</span><span class="op" id="6318288">)</span><span class="op" id="6318289">,</span>&nbsp;<span class="ident" id="6318291">dst</span><span class="op" id="6318294">.</span><span class="ident" id="6318295">Type</span><span class="op" id="6318299">(</span><span class="op" id="6318300">)</span><span class="op" id="6318301">.</span><span class="ident" id="6318302">Bits</span><span class="op" id="6318306">(</span><span class="op" id="6318307">)</span><span class="op" id="6318308">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318312">if</span>&nbsp;<span class="ident" id="6318315">err</span>&nbsp;<span class="op" id="6318319">!=</span>&nbsp;<span class="ident" id="6318322">nil</span>&nbsp;<span class="op" id="6318326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318331">return</span>&nbsp;<span class="ident" id="6318338">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6318344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318348">dst</span><span class="op" id="6318351">.</span><span class="ident" id="6318352">SetFloat</span><span class="op" id="6318360">(</span><span class="ident" id="6318361">ftmp</span><span class="op" id="6318365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318368">case</span>&nbsp;<span class="ident" id="6318373">reflect</span><span class="op" id="6318380">.</span><span class="ident" id="6318381">Bool</span><span class="op" id="6318385">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318389">value</span><span class="op" id="6318394">,</span>&nbsp;<span class="ident" id="6318396">err</span>&nbsp;<span class="op" id="6318400">:=</span>&nbsp;<span class="ident" id="6318403">strconv</span><span class="op" id="6318410">.</span><span class="ident" id="6318411">ParseBool</span><span class="op" id="6318420">(</span><span class="ident" id="6318421">strings</span><span class="op" id="6318428">.</span><span class="ident" id="6318429">TrimSpace</span><span class="op" id="6318438">(</span><span class="builtintype" id="6318439">string</span><span class="op" id="6318445">(</span><span class="ident" id="6318446">src</span><span class="op" id="6318449">)</span><span class="op" id="6318450">)</span><span class="op" id="6318451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318455">if</span>&nbsp;<span class="ident" id="6318458">err</span>&nbsp;<span class="op" id="6318462">!=</span>&nbsp;<span class="ident" id="6318465">nil</span>&nbsp;<span class="op" id="6318469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318474">return</span>&nbsp;<span class="ident" id="6318481">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6318487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318491">dst</span><span class="op" id="6318494">.</span><span class="ident" id="6318495">SetBool</span><span class="op" id="6318502">(</span><span class="ident" id="6318503">value</span><span class="op" id="6318508">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318511">case</span>&nbsp;<span class="ident" id="6318516">reflect</span><span class="op" id="6318523">.</span><span class="ident" id="6318524">String</span><span class="op" id="6318530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318534">dst</span><span class="op" id="6318537">.</span><span class="ident" id="6318538">SetString</span><span class="op" id="6318547">(</span><span class="builtintype" id="6318548">string</span><span class="op" id="6318554">(</span><span class="ident" id="6318555">src</span><span class="op" id="6318558">)</span><span class="op" id="6318559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318562">case</span>&nbsp;<span class="ident" id="6318567">reflect</span><span class="op" id="6318574">.</span><span class="ident" id="6318575">Slice</span><span class="op" id="6318580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318584">if</span>&nbsp;<span class="builtinfunc" id="6318587">len</span><span class="op" id="6318590">(</span><span class="ident" id="6318591">src</span><span class="op" id="6318594">)</span>&nbsp;<span class="op" id="6318596">==</span>&nbsp;<span class="num" id="6318599">0</span>&nbsp;<span class="op" id="6318601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6318606">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318637">src</span>&nbsp;<span class="op" id="6318641">=</span>&nbsp;<span class="op" id="6318643">[</span><span class="op" id="6318644">]</span><span class="builtintype" id="6318645">byte</span><span class="op" id="6318649">{</span><span class="op" id="6318650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6318654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6318658">dst</span><span class="op" id="6318661">.</span><span class="ident" id="6318662">SetBytes</span><span class="op" id="6318670">(</span><span class="ident" id="6318671">src</span><span class="op" id="6318674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6318677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6318680">return</span>&nbsp;<span class="ident" id="6318687">nil</span><br>
<span class="lineno">605</span><span class="op" id="6318691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6318694">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="6318758">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="6318797">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="6318866">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6318933">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6319000">func</span>&nbsp;<span class="op" id="6319005">(</span><span class="ident" id="6319006">p</span>&nbsp;<span class="op" id="6319008">*</span><span class="ident" id="6319009">Decoder</span><span class="op" id="6319016">)</span>&nbsp;<span class="ident" id="6319018">unmarshalPath</span><span class="op" id="6319031">(</span><span class="ident" id="6319032">tinfo</span>&nbsp;<span class="op" id="6319038">*</span><span class="ident" id="6319039">typeInfo</span><span class="op" id="6319047">,</span>&nbsp;<span class="ident" id="6319049">sv</span>&nbsp;<span class="ident" id="6319052">reflect</span><span class="op" id="6319059">.</span><span class="ident" id="6319060">Value</span><span class="op" id="6319065">,</span>&nbsp;<span class="ident" id="6319067">parents</span>&nbsp;<span class="op" id="6319075">[</span><span class="op" id="6319076">]</span><span class="builtintype" id="6319077">string</span><span class="op" id="6319083">,</span>&nbsp;<span class="ident" id="6319085">start</span>&nbsp;<span class="op" id="6319091">*</span><span class="ident" id="6319092">StartElement</span><span class="op" id="6319104">)</span>&nbsp;<span class="op" id="6319106">(</span><span class="ident" id="6319107">consumed</span>&nbsp;<span class="builtintype" id="6319116">bool</span><span class="op" id="6319120">,</span>&nbsp;<span class="ident" id="6319122">err</span>&nbsp;<span class="builtintype" id="6319126">error</span><span class="op" id="6319131">)</span>&nbsp;<span class="op" id="6319133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6319136">recurse</span>&nbsp;<span class="op" id="6319144">:=</span>&nbsp;<span class="builtintype" id="6319147">false</span><br>
<span class="lineno"></span><span class="ident" id="6319153">Loop</span><span class="op" id="6319157">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319160">for</span>&nbsp;<span class="ident" id="6319164">i</span>&nbsp;<span class="op" id="6319166">:=</span>&nbsp;<span class="keyword" id="6319169">range</span>&nbsp;<span class="ident" id="6319175">tinfo</span><span class="op" id="6319180">.</span><span class="ident" id="6319181">fields</span>&nbsp;<span class="op" id="6319188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6319192">finfo</span>&nbsp;<span class="op" id="6319198">:=</span>&nbsp;<span class="op" id="6319201">&amp;</span><span class="ident" id="6319202">tinfo</span><span class="op" id="6319207">.</span><span class="ident" id="6319208">fields</span><span class="op" id="6319214">[</span><span class="ident" id="6319215">i</span><span class="op" id="6319216">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319220">if</span>&nbsp;<span class="ident" id="6319223">finfo</span><span class="op" id="6319228">.</span><span class="ident" id="6319229">flags</span><span class="op" id="6319234">&amp;</span><span class="ident" id="6319235">fElement</span>&nbsp;<span class="op" id="6319244">==</span>&nbsp;<span class="num" id="6319247">0</span>&nbsp;<span class="op" id="6319249">||</span>&nbsp;<span class="builtinfunc" id="6319252">len</span><span class="op" id="6319255">(</span><span class="ident" id="6319256">finfo</span><span class="op" id="6319261">.</span><span class="ident" id="6319262">parents</span><span class="op" id="6319269">)</span>&nbsp;<span class="op" id="6319271">&lt;</span>&nbsp;<span class="builtinfunc" id="6319273">len</span><span class="op" id="6319276">(</span><span class="ident" id="6319277">parents</span><span class="op" id="6319284">)</span>&nbsp;<span class="op" id="6319286">||</span>&nbsp;<span class="ident" id="6319289">finfo</span><span class="op" id="6319294">.</span><span class="ident" id="6319295">xmlns</span>&nbsp;<span class="op" id="6319301">!=</span>&nbsp;<span class="string" id="6319304">&#34;&#34;</span>&nbsp;<span class="op" id="6319307">&amp;&amp;</span>&nbsp;<span class="ident" id="6319310">finfo</span><span class="op" id="6319315">.</span><span class="ident" id="6319316">xmlns</span>&nbsp;<span class="op" id="6319322">!=</span>&nbsp;<span class="ident" id="6319325">start</span><span class="op" id="6319330">.</span><span class="ident" id="6319331">Name</span><span class="op" id="6319335">.</span><span class="ident" id="6319336">Space</span>&nbsp;<span class="op" id="6319342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319347">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6319358">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319362">for</span>&nbsp;<span class="ident" id="6319366">j</span>&nbsp;<span class="op" id="6319368">:=</span>&nbsp;<span class="keyword" id="6319371">range</span>&nbsp;<span class="ident" id="6319377">parents</span>&nbsp;<span class="op" id="6319385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319390">if</span>&nbsp;<span class="ident" id="6319393">parents</span><span class="op" id="6319400">[</span><span class="ident" id="6319401">j</span><span class="op" id="6319402">]</span>&nbsp;<span class="op" id="6319404">!=</span>&nbsp;<span class="ident" id="6319407">finfo</span><span class="op" id="6319412">.</span><span class="ident" id="6319413">parents</span><span class="op" id="6319420">[</span><span class="ident" id="6319421">j</span><span class="op" id="6319422">]</span>&nbsp;<span class="op" id="6319424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319430">continue</span>&nbsp;<span class="ident" id="6319439">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6319447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6319451">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319455">if</span>&nbsp;<span class="builtinfunc" id="6319458">len</span><span class="op" id="6319461">(</span><span class="ident" id="6319462">finfo</span><span class="op" id="6319467">.</span><span class="ident" id="6319468">parents</span><span class="op" id="6319475">)</span>&nbsp;<span class="op" id="6319477">==</span>&nbsp;<span class="builtinfunc" id="6319480">len</span><span class="op" id="6319483">(</span><span class="ident" id="6319484">parents</span><span class="op" id="6319491">)</span>&nbsp;<span class="op" id="6319493">&amp;&amp;</span>&nbsp;<span class="ident" id="6319496">finfo</span><span class="op" id="6319501">.</span><span class="ident" id="6319502">name</span>&nbsp;<span class="op" id="6319507">==</span>&nbsp;<span class="ident" id="6319510">start</span><span class="op" id="6319515">.</span><span class="ident" id="6319516">Name</span><span class="op" id="6319520">.</span><span class="ident" id="6319521">Local</span>&nbsp;<span class="op" id="6319527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6319532">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319581">return</span>&nbsp;<span class="builtintype" id="6319588">true</span><span class="op" id="6319592">,</span>&nbsp;<span class="ident" id="6319594">p</span><span class="op" id="6319595">.</span><span class="ident" id="6319596">unmarshal</span><span class="op" id="6319605">(</span><span class="ident" id="6319606">finfo</span><span class="op" id="6319611">.</span><span class="ident" id="6319612">value</span><span class="op" id="6319617">(</span><span class="ident" id="6319618">sv</span><span class="op" id="6319620">)</span><span class="op" id="6319621">,</span>&nbsp;<span class="ident" id="6319623">start</span><span class="op" id="6319628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6319632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6319636">if</span>&nbsp;<span class="builtinfunc" id="6319639">len</span><span class="op" id="6319642">(</span><span class="ident" id="6319643">finfo</span><span class="op" id="6319648">.</span><span class="ident" id="6319649">parents</span><span class="op" id="6319656">)</span>&nbsp;<span class="op" id="6319658">&gt;</span>&nbsp;<span class="builtinfunc" id="6319660">len</span><span class="op" id="6319663">(</span><span class="ident" id="6319664">parents</span><span class="op" id="6319671">)</span>&nbsp;<span class="op" id="6319673">&amp;&amp;</span>&nbsp;<span class="ident" id="6319676">finfo</span><span class="op" id="6319681">.</span><span class="ident" id="6319682">parents</span><span class="op" id="6319689">[</span><span class="builtinfunc" id="6319690">len</span><span class="op" id="6319693">(</span><span class="ident" id="6319694">parents</span><span class="op" id="6319701">)</span><span class="op" id="6319702">]</span>&nbsp;<span class="op" id="6319704">==</span>&nbsp;<span class="ident" id="6319707">start</span><span class="op" id="6319712">.</span><span class="ident" id="6319713">Name</span><span class="op" id="6319717">.</span><span class="ident" id="6319718">Local</span>&nbsp;<span class="op" id="6319724">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6319729">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6319782">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6319838">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6319879">recurse</span>&nbsp;<span class="op" id="6319887">=</span>&nbsp;<span class="builtintype" id="6319889">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6319898">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6319946">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6319979">parents</span>&nbsp;<span class="op" id="6319987">=</span>&nbsp;<span class="ident" id="6319989">finfo</span><span class="op" id="6319994">.</span><span class="ident" id="6319995">parents</span><span class="op" id="6320002">[</span><span class="op" id="6320003">:</span><span class="builtinfunc" id="6320004">len</span><span class="op" id="6320007">(</span><span class="ident" id="6320008">parents</span><span class="op" id="6320015">)</span><span class="op" id="6320016">+</span><span class="num" id="6320017">1</span><span class="op" id="6320018">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320023">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320031">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320037">if</span>&nbsp;<span class="op" id="6320040">!</span><span class="ident" id="6320041">recurse</span>&nbsp;<span class="op" id="6320049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6320053">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320097">return</span>&nbsp;<span class="builtintype" id="6320104">false</span><span class="op" id="6320109">,</span>&nbsp;<span class="ident" id="6320111">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320116">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6320119">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6320181">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6320242">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320290">for</span>&nbsp;<span class="op" id="6320294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320298">var</span>&nbsp;<span class="ident" id="6320302">tok</span>&nbsp;<span class="ident" id="6320306">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6320314">tok</span><span class="op" id="6320317">,</span>&nbsp;<span class="ident" id="6320319">err</span>&nbsp;<span class="op" id="6320323">=</span>&nbsp;<span class="ident" id="6320325">p</span><span class="op" id="6320326">.</span><span class="ident" id="6320327">Token</span><span class="op" id="6320332">(</span><span class="op" id="6320333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320337">if</span>&nbsp;<span class="ident" id="6320340">err</span>&nbsp;<span class="op" id="6320344">!=</span>&nbsp;<span class="ident" id="6320347">nil</span>&nbsp;<span class="op" id="6320351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320356">return</span>&nbsp;<span class="builtintype" id="6320363">true</span><span class="op" id="6320367">,</span>&nbsp;<span class="ident" id="6320369">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320379">switch</span>&nbsp;<span class="ident" id="6320386">t</span>&nbsp;<span class="op" id="6320388">:=</span>&nbsp;<span class="ident" id="6320391">tok</span><span class="op" id="6320394">.</span><span class="op" id="6320395">(</span><span class="keyword" id="6320396">type</span><span class="op" id="6320400">)</span>&nbsp;<span class="op" id="6320402">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320406">case</span>&nbsp;<span class="ident" id="6320411">StartElement</span><span class="op" id="6320423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6320428">consumed2</span><span class="op" id="6320437">,</span>&nbsp;<span class="ident" id="6320439">err</span>&nbsp;<span class="op" id="6320443">:=</span>&nbsp;<span class="ident" id="6320446">p</span><span class="op" id="6320447">.</span><span class="ident" id="6320448">unmarshalPath</span><span class="op" id="6320461">(</span><span class="ident" id="6320462">tinfo</span><span class="op" id="6320467">,</span>&nbsp;<span class="ident" id="6320469">sv</span><span class="op" id="6320471">,</span>&nbsp;<span class="ident" id="6320473">parents</span><span class="op" id="6320480">,</span>&nbsp;<span class="op" id="6320482">&amp;</span><span class="ident" id="6320483">t</span><span class="op" id="6320484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320489">if</span>&nbsp;<span class="ident" id="6320492">err</span>&nbsp;<span class="op" id="6320496">!=</span>&nbsp;<span class="ident" id="6320499">nil</span>&nbsp;<span class="op" id="6320503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320509">return</span>&nbsp;<span class="builtintype" id="6320516">true</span><span class="op" id="6320520">,</span>&nbsp;<span class="ident" id="6320522">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320529">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320534">if</span>&nbsp;<span class="op" id="6320537">!</span><span class="ident" id="6320538">consumed2</span>&nbsp;<span class="op" id="6320548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320554">if</span>&nbsp;<span class="ident" id="6320557">err</span>&nbsp;<span class="op" id="6320561">:=</span>&nbsp;<span class="ident" id="6320564">p</span><span class="op" id="6320565">.</span><span class="ident" id="6320566">Skip</span><span class="op" id="6320570">(</span><span class="op" id="6320571">)</span><span class="op" id="6320572">;</span>&nbsp;<span class="ident" id="6320574">err</span>&nbsp;<span class="op" id="6320578">!=</span>&nbsp;<span class="ident" id="6320581">nil</span>&nbsp;<span class="op" id="6320585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320592">return</span>&nbsp;<span class="builtintype" id="6320599">true</span><span class="op" id="6320603">,</span>&nbsp;<span class="ident" id="6320605">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320618">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320622">case</span>&nbsp;<span class="ident" id="6320627">EndElement</span><span class="op" id="6320637">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6320642">return</span>&nbsp;<span class="builtintype" id="6320649">true</span><span class="op" id="6320653">,</span>&nbsp;<span class="ident" id="6320655">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6320664">}</span><br>
<span class="lineno"></span><span class="op" id="6320666">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6320669">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6320728">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="6320788">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6320856">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="6320883">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6320947">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="6321013">func</span>&nbsp;<span class="op" id="6321018">(</span><span class="ident" id="6321019">d</span>&nbsp;<span class="op" id="6321021">*</span><span class="ident" id="6321022">Decoder</span><span class="op" id="6321029">)</span>&nbsp;<span class="ident" id="6321031">Skip</span><span class="op" id="6321035">(</span><span class="op" id="6321036">)</span>&nbsp;<span class="builtintype" id="6321038">error</span>&nbsp;<span class="op" id="6321044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321047">for</span>&nbsp;<span class="op" id="6321051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6321055">tok</span><span class="op" id="6321058">,</span>&nbsp;<span class="ident" id="6321060">err</span>&nbsp;<span class="op" id="6321064">:=</span>&nbsp;<span class="ident" id="6321067">d</span><span class="op" id="6321068">.</span><span class="ident" id="6321069">Token</span><span class="op" id="6321074">(</span><span class="op" id="6321075">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321079">if</span>&nbsp;<span class="ident" id="6321082">err</span>&nbsp;<span class="op" id="6321086">!=</span>&nbsp;<span class="ident" id="6321089">nil</span>&nbsp;<span class="op" id="6321093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321098">return</span>&nbsp;<span class="ident" id="6321105">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6321111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321115">switch</span>&nbsp;<span class="ident" id="6321122">tok</span><span class="op" id="6321125">.</span><span class="op" id="6321126">(</span><span class="keyword" id="6321127">type</span><span class="op" id="6321131">)</span>&nbsp;<span class="op" id="6321133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321137">case</span>&nbsp;<span class="ident" id="6321142">StartElement</span><span class="op" id="6321154">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321159">if</span>&nbsp;<span class="ident" id="6321162">err</span>&nbsp;<span class="op" id="6321166">:=</span>&nbsp;<span class="ident" id="6321169">d</span><span class="op" id="6321170">.</span><span class="ident" id="6321171">Skip</span><span class="op" id="6321175">(</span><span class="op" id="6321176">)</span><span class="op" id="6321177">;</span>&nbsp;<span class="ident" id="6321179">err</span>&nbsp;<span class="op" id="6321183">!=</span>&nbsp;<span class="ident" id="6321186">nil</span>&nbsp;<span class="op" id="6321190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321196">return</span>&nbsp;<span class="ident" id="6321203">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6321210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321214">case</span>&nbsp;<span class="ident" id="6321219">EndElement</span><span class="op" id="6321229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6321234">return</span>&nbsp;<span class="ident" id="6321241">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6321247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6321250">}</span><br>
<span class="lineno"></span><span class="op" id="6321252">}</span>
</div>
</body>
</html>
