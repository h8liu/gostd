<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html" class="current">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7753064">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7753119">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7753173">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7753224">package</span>&nbsp;<span class="ident" id="7753232">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7753240">import</span>&nbsp;<span class="op" id="7753247">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7753250">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7753259">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7753269">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7753272">func</span>&nbsp;<span class="ident" id="7753277">TestXOR</span><span class="op" id="7753284">(</span><span class="ident" id="7753285">t</span>&nbsp;<span class="op" id="7753287">*</span><span class="ident" id="7753288">testing</span><span class="op" id="7753295">.</span><span class="ident" id="7753296">T</span><span class="op" id="7753297">)</span>&nbsp;<span class="op" id="7753299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7753302">for</span>&nbsp;<span class="ident" id="7753306">alignP</span>&nbsp;<span class="op" id="7753313">:=</span>&nbsp;<span class="num" id="7753316">0</span><span class="op" id="7753317">;</span>&nbsp;<span class="ident" id="7753319">alignP</span>&nbsp;<span class="op" id="7753326">&lt;</span>&nbsp;<span class="num" id="7753328">2</span><span class="op" id="7753329">;</span>&nbsp;<span class="ident" id="7753331">alignP</span><span class="op" id="7753337">++</span>&nbsp;<span class="op" id="7753340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7753344">for</span>&nbsp;<span class="ident" id="7753348">alignQ</span>&nbsp;<span class="op" id="7753355">:=</span>&nbsp;<span class="num" id="7753358">0</span><span class="op" id="7753359">;</span>&nbsp;<span class="ident" id="7753361">alignQ</span>&nbsp;<span class="op" id="7753368">&lt;</span>&nbsp;<span class="num" id="7753370">2</span><span class="op" id="7753371">;</span>&nbsp;<span class="ident" id="7753373">alignQ</span><span class="op" id="7753379">++</span>&nbsp;<span class="op" id="7753382">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7753387">for</span>&nbsp;<span class="ident" id="7753391">alignD</span>&nbsp;<span class="op" id="7753398">:=</span>&nbsp;<span class="num" id="7753401">0</span><span class="op" id="7753402">;</span>&nbsp;<span class="ident" id="7753404">alignD</span>&nbsp;<span class="op" id="7753411">&lt;</span>&nbsp;<span class="num" id="7753413">2</span><span class="op" id="7753414">;</span>&nbsp;<span class="ident" id="7753416">alignD</span><span class="op" id="7753422">++</span>&nbsp;<span class="op" id="7753425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753431">p</span>&nbsp;<span class="op" id="7753433">:=</span>&nbsp;<span class="builtinfunc" id="7753436">make</span><span class="op" id="7753440">(</span><span class="op" id="7753441">[</span><span class="op" id="7753442">]</span><span class="builtintype" id="7753443">byte</span><span class="op" id="7753447">,</span>&nbsp;<span class="num" id="7753449">1024</span><span class="op" id="7753453">)</span><span class="op" id="7753454">[</span><span class="ident" id="7753455">alignP</span><span class="op" id="7753461">:</span><span class="op" id="7753462">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753468">q</span>&nbsp;<span class="op" id="7753470">:=</span>&nbsp;<span class="builtinfunc" id="7753473">make</span><span class="op" id="7753477">(</span><span class="op" id="7753478">[</span><span class="op" id="7753479">]</span><span class="builtintype" id="7753480">byte</span><span class="op" id="7753484">,</span>&nbsp;<span class="num" id="7753486">1024</span><span class="op" id="7753490">)</span><span class="op" id="7753491">[</span><span class="ident" id="7753492">alignQ</span><span class="op" id="7753498">:</span><span class="op" id="7753499">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753505">d1</span>&nbsp;<span class="op" id="7753508">:=</span>&nbsp;<span class="builtinfunc" id="7753511">make</span><span class="op" id="7753515">(</span><span class="op" id="7753516">[</span><span class="op" id="7753517">]</span><span class="builtintype" id="7753518">byte</span><span class="op" id="7753522">,</span>&nbsp;<span class="num" id="7753524">1024</span><span class="op" id="7753528">+</span><span class="ident" id="7753529">alignD</span><span class="op" id="7753535">)</span><span class="op" id="7753536">[</span><span class="ident" id="7753537">alignD</span><span class="op" id="7753543">:</span><span class="op" id="7753544">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753550">d2</span>&nbsp;<span class="op" id="7753553">:=</span>&nbsp;<span class="builtinfunc" id="7753556">make</span><span class="op" id="7753560">(</span><span class="op" id="7753561">[</span><span class="op" id="7753562">]</span><span class="builtintype" id="7753563">byte</span><span class="op" id="7753567">,</span>&nbsp;<span class="num" id="7753569">1024</span><span class="op" id="7753573">+</span><span class="ident" id="7753574">alignD</span><span class="op" id="7753580">)</span><span class="op" id="7753581">[</span><span class="ident" id="7753582">alignD</span><span class="op" id="7753588">:</span><span class="op" id="7753589">]</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753595">xorBytes</span><span class="op" id="7753603">(</span><span class="ident" id="7753604">d1</span><span class="op" id="7753606">,</span>&nbsp;<span class="ident" id="7753608">p</span><span class="op" id="7753609">,</span>&nbsp;<span class="ident" id="7753611">q</span><span class="op" id="7753612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753618">safeXORBytes</span><span class="op" id="7753630">(</span><span class="ident" id="7753631">d2</span><span class="op" id="7753633">,</span>&nbsp;<span class="ident" id="7753635">p</span><span class="op" id="7753636">,</span>&nbsp;<span class="ident" id="7753638">q</span><span class="op" id="7753639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7753645">if</span>&nbsp;<span class="ident" id="7753648">bytes</span><span class="op" id="7753653">.</span><span class="ident" id="7753654">Compare</span><span class="op" id="7753661">(</span><span class="ident" id="7753662">d1</span><span class="op" id="7753664">,</span>&nbsp;<span class="ident" id="7753666">d2</span><span class="op" id="7753668">)</span>&nbsp;<span class="op" id="7753670">!=</span>&nbsp;<span class="num" id="7753673">0</span>&nbsp;<span class="op" id="7753675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7753682">t</span><span class="op" id="7753683">.</span><span class="ident" id="7753684">Error</span><span class="op" id="7753689">(</span><span class="string" id="7753690">&#34;not&nbsp;equal&#34;</span><span class="op" id="7753701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7753707">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7753712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7753716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7753719">}</span><br>
<span class="lineno"></span><span class="op" id="7753721">}</span>
</div>
</body>
</html>
