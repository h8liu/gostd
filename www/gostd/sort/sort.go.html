<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html" class="current">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2942894">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2942949">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2943003">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2943054">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2943126">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2943142">package</span>&nbsp;<span class="ident" id="2943150">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943156">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2943228">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2943301">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2943366">type</span>&nbsp;<span class="ident" id="2943371">Interface</span>&nbsp;<span class="keyword" id="2943381">interface</span>&nbsp;<span class="op" id="2943391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2943394">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943447">Len</span><span class="op" id="2943450">(</span><span class="op" id="2943451">)</span>&nbsp;<span class="builtintype" id="2943453">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2943458">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2943500">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943557">Less</span><span class="op" id="2943561">(</span><span class="ident" id="2943562">i</span><span class="op" id="2943563">,</span>&nbsp;<span class="ident" id="2943565">j</span>&nbsp;<span class="builtintype" id="2943567">int</span><span class="op" id="2943570">)</span>&nbsp;<span class="builtintype" id="2943572">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2943578">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943628">Swap</span><span class="op" id="2943632">(</span><span class="ident" id="2943633">i</span><span class="op" id="2943634">,</span>&nbsp;<span class="ident" id="2943636">j</span>&nbsp;<span class="builtintype" id="2943638">int</span><span class="op" id="2943641">)</span><br>
<span class="lineno">20</span><span class="op" id="2943643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2943646">func</span>&nbsp;<span class="ident" id="2943651">min</span><span class="op" id="2943654">(</span><span class="ident" id="2943655">a</span><span class="op" id="2943656">,</span>&nbsp;<span class="ident" id="2943658">b</span>&nbsp;<span class="builtintype" id="2943660">int</span><span class="op" id="2943663">)</span>&nbsp;<span class="builtintype" id="2943665">int</span>&nbsp;<span class="op" id="2943669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943672">if</span>&nbsp;<span class="ident" id="2943675">a</span>&nbsp;<span class="op" id="2943677">&lt;</span>&nbsp;<span class="ident" id="2943679">b</span>&nbsp;<span class="op" id="2943681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943685">return</span>&nbsp;<span class="ident" id="2943692">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943698">return</span>&nbsp;<span class="ident" id="2943705">b</span><br>
<span class="lineno"></span><span class="op" id="2943707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943710">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2943728">func</span>&nbsp;<span class="ident" id="2943733">insertionSort</span><span class="op" id="2943746">(</span><span class="ident" id="2943747">data</span>&nbsp;<span class="ident" id="2943752">Interface</span><span class="op" id="2943761">,</span>&nbsp;<span class="ident" id="2943763">a</span><span class="op" id="2943764">,</span>&nbsp;<span class="ident" id="2943766">b</span>&nbsp;<span class="builtintype" id="2943768">int</span><span class="op" id="2943771">)</span>&nbsp;<span class="op" id="2943773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943776">for</span>&nbsp;<span class="ident" id="2943780">i</span>&nbsp;<span class="op" id="2943782">:=</span>&nbsp;<span class="ident" id="2943785">a</span>&nbsp;<span class="op" id="2943787">+</span>&nbsp;<span class="num" id="2943789">1</span><span class="op" id="2943790">;</span>&nbsp;<span class="ident" id="2943792">i</span>&nbsp;<span class="op" id="2943794">&lt;</span>&nbsp;<span class="ident" id="2943796">b</span><span class="op" id="2943797">;</span>&nbsp;<span class="ident" id="2943799">i</span><span class="op" id="2943800">++</span>&nbsp;<span class="op" id="2943803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2943807">for</span>&nbsp;<span class="ident" id="2943811">j</span>&nbsp;<span class="op" id="2943813">:=</span>&nbsp;<span class="ident" id="2943816">i</span><span class="op" id="2943817">;</span>&nbsp;<span class="ident" id="2943819">j</span>&nbsp;<span class="op" id="2943821">&gt;</span>&nbsp;<span class="ident" id="2943823">a</span>&nbsp;<span class="op" id="2943825">&amp;&amp;</span>&nbsp;<span class="ident" id="2943828">data</span><span class="op" id="2943832">.</span><span class="ident" id="2943833">Less</span><span class="op" id="2943837">(</span><span class="ident" id="2943838">j</span><span class="op" id="2943839">,</span>&nbsp;<span class="ident" id="2943841">j</span><span class="op" id="2943842">-</span><span class="num" id="2943843">1</span><span class="op" id="2943844">)</span><span class="op" id="2943845">;</span>&nbsp;<span class="ident" id="2943847">j</span><span class="op" id="2943848">--</span>&nbsp;<span class="op" id="2943851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2943856">data</span><span class="op" id="2943860">.</span><span class="ident" id="2943861">Swap</span><span class="op" id="2943865">(</span><span class="ident" id="2943866">j</span><span class="op" id="2943867">,</span>&nbsp;<span class="ident" id="2943869">j</span><span class="op" id="2943870">-</span><span class="num" id="2943871">1</span><span class="op" id="2943872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943876">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2943879">}</span><br>
<span class="lineno"></span><span class="op" id="2943881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943884">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2943942">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2944012">func</span>&nbsp;<span class="ident" id="2944017">siftDown</span><span class="op" id="2944025">(</span><span class="ident" id="2944026">data</span>&nbsp;<span class="ident" id="2944031">Interface</span><span class="op" id="2944040">,</span>&nbsp;<span class="ident" id="2944042">lo</span><span class="op" id="2944044">,</span>&nbsp;<span class="ident" id="2944046">hi</span><span class="op" id="2944048">,</span>&nbsp;<span class="ident" id="2944050">first</span>&nbsp;<span class="builtintype" id="2944056">int</span><span class="op" id="2944059">)</span>&nbsp;<span class="op" id="2944061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944064">root</span>&nbsp;<span class="op" id="2944069">:=</span>&nbsp;<span class="ident" id="2944072">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944076">for</span>&nbsp;<span class="op" id="2944080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944084">child</span>&nbsp;<span class="op" id="2944090">:=</span>&nbsp;<span class="num" id="2944093">2</span><span class="op" id="2944094">*</span><span class="ident" id="2944095">root</span>&nbsp;<span class="op" id="2944100">+</span>&nbsp;<span class="num" id="2944102">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944106">if</span>&nbsp;<span class="ident" id="2944109">child</span>&nbsp;<span class="op" id="2944115">&gt;=</span>&nbsp;<span class="ident" id="2944118">hi</span>&nbsp;<span class="op" id="2944121">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944126">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944138">if</span>&nbsp;<span class="ident" id="2944141">child</span><span class="op" id="2944146">+</span><span class="num" id="2944147">1</span>&nbsp;<span class="op" id="2944149">&lt;</span>&nbsp;<span class="ident" id="2944151">hi</span>&nbsp;<span class="op" id="2944154">&amp;&amp;</span>&nbsp;<span class="ident" id="2944157">data</span><span class="op" id="2944161">.</span><span class="ident" id="2944162">Less</span><span class="op" id="2944166">(</span><span class="ident" id="2944167">first</span><span class="op" id="2944172">+</span><span class="ident" id="2944173">child</span><span class="op" id="2944178">,</span>&nbsp;<span class="ident" id="2944180">first</span><span class="op" id="2944185">+</span><span class="ident" id="2944186">child</span><span class="op" id="2944191">+</span><span class="num" id="2944192">1</span><span class="op" id="2944193">)</span>&nbsp;<span class="op" id="2944195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944200">child</span><span class="op" id="2944205">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944210">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944214">if</span>&nbsp;<span class="op" id="2944217">!</span><span class="ident" id="2944218">data</span><span class="op" id="2944222">.</span><span class="ident" id="2944223">Less</span><span class="op" id="2944227">(</span><span class="ident" id="2944228">first</span><span class="op" id="2944233">+</span><span class="ident" id="2944234">root</span><span class="op" id="2944238">,</span>&nbsp;<span class="ident" id="2944240">first</span><span class="op" id="2944245">+</span><span class="ident" id="2944246">child</span><span class="op" id="2944251">)</span>&nbsp;<span class="op" id="2944253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944258">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944271">data</span><span class="op" id="2944275">.</span><span class="ident" id="2944276">Swap</span><span class="op" id="2944280">(</span><span class="ident" id="2944281">first</span><span class="op" id="2944286">+</span><span class="ident" id="2944287">root</span><span class="op" id="2944291">,</span>&nbsp;<span class="ident" id="2944293">first</span><span class="op" id="2944298">+</span><span class="ident" id="2944299">child</span><span class="op" id="2944304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944308">root</span>&nbsp;<span class="op" id="2944313">=</span>&nbsp;<span class="ident" id="2944315">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944322">}</span><br>
<span class="lineno"></span><span class="op" id="2944324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2944327">func</span>&nbsp;<span class="ident" id="2944332">heapSort</span><span class="op" id="2944340">(</span><span class="ident" id="2944341">data</span>&nbsp;<span class="ident" id="2944346">Interface</span><span class="op" id="2944355">,</span>&nbsp;<span class="ident" id="2944357">a</span><span class="op" id="2944358">,</span>&nbsp;<span class="ident" id="2944360">b</span>&nbsp;<span class="builtintype" id="2944362">int</span><span class="op" id="2944365">)</span>&nbsp;<span class="op" id="2944367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944370">first</span>&nbsp;<span class="op" id="2944376">:=</span>&nbsp;<span class="ident" id="2944379">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944382">lo</span>&nbsp;<span class="op" id="2944385">:=</span>&nbsp;<span class="num" id="2944388">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944391">hi</span>&nbsp;<span class="op" id="2944394">:=</span>&nbsp;<span class="ident" id="2944397">b</span>&nbsp;<span class="op" id="2944399">-</span>&nbsp;<span class="ident" id="2944401">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944405">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944450">for</span>&nbsp;<span class="ident" id="2944454">i</span>&nbsp;<span class="op" id="2944456">:=</span>&nbsp;<span class="op" id="2944459">(</span><span class="ident" id="2944460">hi</span>&nbsp;<span class="op" id="2944463">-</span>&nbsp;<span class="num" id="2944465">1</span><span class="op" id="2944466">)</span>&nbsp;<span class="op" id="2944468">/</span>&nbsp;<span class="num" id="2944470">2</span><span class="op" id="2944471">;</span>&nbsp;<span class="ident" id="2944473">i</span>&nbsp;<span class="op" id="2944475">&gt;=</span>&nbsp;<span class="num" id="2944478">0</span><span class="op" id="2944479">;</span>&nbsp;<span class="ident" id="2944481">i</span><span class="op" id="2944482">--</span>&nbsp;<span class="op" id="2944485">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944489">siftDown</span><span class="op" id="2944497">(</span><span class="ident" id="2944498">data</span><span class="op" id="2944502">,</span>&nbsp;<span class="ident" id="2944504">i</span><span class="op" id="2944505">,</span>&nbsp;<span class="ident" id="2944507">hi</span><span class="op" id="2944509">,</span>&nbsp;<span class="ident" id="2944511">first</span><span class="op" id="2944516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944523">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944574">for</span>&nbsp;<span class="ident" id="2944578">i</span>&nbsp;<span class="op" id="2944580">:=</span>&nbsp;<span class="ident" id="2944583">hi</span>&nbsp;<span class="op" id="2944586">-</span>&nbsp;<span class="num" id="2944588">1</span><span class="op" id="2944589">;</span>&nbsp;<span class="ident" id="2944591">i</span>&nbsp;<span class="op" id="2944593">&gt;=</span>&nbsp;<span class="num" id="2944596">0</span><span class="op" id="2944597">;</span>&nbsp;<span class="ident" id="2944599">i</span><span class="op" id="2944600">--</span>&nbsp;<span class="op" id="2944603">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944607">data</span><span class="op" id="2944611">.</span><span class="ident" id="2944612">Swap</span><span class="op" id="2944616">(</span><span class="ident" id="2944617">first</span><span class="op" id="2944622">,</span>&nbsp;<span class="ident" id="2944624">first</span><span class="op" id="2944629">+</span><span class="ident" id="2944630">i</span><span class="op" id="2944631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944635">siftDown</span><span class="op" id="2944643">(</span><span class="ident" id="2944644">data</span><span class="op" id="2944648">,</span>&nbsp;<span class="ident" id="2944650">lo</span><span class="op" id="2944652">,</span>&nbsp;<span class="ident" id="2944654">i</span><span class="op" id="2944655">,</span>&nbsp;<span class="ident" id="2944657">first</span><span class="op" id="2944662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2944665">}</span><br>
<span class="lineno"></span><span class="op" id="2944667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2944670">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2944715">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2944772">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2944866">func</span>&nbsp;<span class="ident" id="2944871">medianOfThree</span><span class="op" id="2944884">(</span><span class="ident" id="2944885">data</span>&nbsp;<span class="ident" id="2944890">Interface</span><span class="op" id="2944899">,</span>&nbsp;<span class="ident" id="2944901">a</span><span class="op" id="2944902">,</span>&nbsp;<span class="ident" id="2944904">b</span><span class="op" id="2944905">,</span>&nbsp;<span class="ident" id="2944907">c</span>&nbsp;<span class="builtintype" id="2944909">int</span><span class="op" id="2944912">)</span>&nbsp;<span class="op" id="2944914">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944917">m0</span>&nbsp;<span class="op" id="2944920">:=</span>&nbsp;<span class="ident" id="2944923">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944926">m1</span>&nbsp;<span class="op" id="2944929">:=</span>&nbsp;<span class="ident" id="2944932">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944935">m2</span>&nbsp;<span class="op" id="2944938">:=</span>&nbsp;<span class="ident" id="2944941">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2944944">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2944974">if</span>&nbsp;<span class="ident" id="2944977">data</span><span class="op" id="2944981">.</span><span class="ident" id="2944982">Less</span><span class="op" id="2944986">(</span><span class="ident" id="2944987">m1</span><span class="op" id="2944989">,</span>&nbsp;<span class="ident" id="2944991">m0</span><span class="op" id="2944993">)</span>&nbsp;<span class="op" id="2944995">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2944999">data</span><span class="op" id="2945003">.</span><span class="ident" id="2945004">Swap</span><span class="op" id="2945008">(</span><span class="ident" id="2945009">m1</span><span class="op" id="2945011">,</span>&nbsp;<span class="ident" id="2945013">m0</span><span class="op" id="2945015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945021">if</span>&nbsp;<span class="ident" id="2945024">data</span><span class="op" id="2945028">.</span><span class="ident" id="2945029">Less</span><span class="op" id="2945033">(</span><span class="ident" id="2945034">m2</span><span class="op" id="2945036">,</span>&nbsp;<span class="ident" id="2945038">m1</span><span class="op" id="2945040">)</span>&nbsp;<span class="op" id="2945042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945046">data</span><span class="op" id="2945050">.</span><span class="ident" id="2945051">Swap</span><span class="op" id="2945055">(</span><span class="ident" id="2945056">m2</span><span class="op" id="2945058">,</span>&nbsp;<span class="ident" id="2945060">m1</span><span class="op" id="2945062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945065">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945068">if</span>&nbsp;<span class="ident" id="2945071">data</span><span class="op" id="2945075">.</span><span class="ident" id="2945076">Less</span><span class="op" id="2945080">(</span><span class="ident" id="2945081">m1</span><span class="op" id="2945083">,</span>&nbsp;<span class="ident" id="2945085">m0</span><span class="op" id="2945087">)</span>&nbsp;<span class="op" id="2945089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945093">data</span><span class="op" id="2945097">.</span><span class="ident" id="2945098">Swap</span><span class="op" id="2945102">(</span><span class="ident" id="2945103">m1</span><span class="op" id="2945105">,</span>&nbsp;<span class="ident" id="2945107">m0</span><span class="op" id="2945109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945115">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2945155">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2945158">func</span>&nbsp;<span class="ident" id="2945163">swapRange</span><span class="op" id="2945172">(</span><span class="ident" id="2945173">data</span>&nbsp;<span class="ident" id="2945178">Interface</span><span class="op" id="2945187">,</span>&nbsp;<span class="ident" id="2945189">a</span><span class="op" id="2945190">,</span>&nbsp;<span class="ident" id="2945192">b</span><span class="op" id="2945193">,</span>&nbsp;<span class="ident" id="2945195">n</span>&nbsp;<span class="builtintype" id="2945197">int</span><span class="op" id="2945200">)</span>&nbsp;<span class="op" id="2945202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945205">for</span>&nbsp;<span class="ident" id="2945209">i</span>&nbsp;<span class="op" id="2945211">:=</span>&nbsp;<span class="num" id="2945214">0</span><span class="op" id="2945215">;</span>&nbsp;<span class="ident" id="2945217">i</span>&nbsp;<span class="op" id="2945219">&lt;</span>&nbsp;<span class="ident" id="2945221">n</span><span class="op" id="2945222">;</span>&nbsp;<span class="ident" id="2945224">i</span><span class="op" id="2945225">++</span>&nbsp;<span class="op" id="2945228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945232">data</span><span class="op" id="2945236">.</span><span class="ident" id="2945237">Swap</span><span class="op" id="2945241">(</span><span class="ident" id="2945242">a</span><span class="op" id="2945243">+</span><span class="ident" id="2945244">i</span><span class="op" id="2945245">,</span>&nbsp;<span class="ident" id="2945247">b</span><span class="op" id="2945248">+</span><span class="ident" id="2945249">i</span><span class="op" id="2945250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945253">}</span><br>
<span class="lineno">100</span><span class="op" id="2945255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2945258">func</span>&nbsp;<span class="ident" id="2945263">doPivot</span><span class="op" id="2945270">(</span><span class="ident" id="2945271">data</span>&nbsp;<span class="ident" id="2945276">Interface</span><span class="op" id="2945285">,</span>&nbsp;<span class="ident" id="2945287">lo</span><span class="op" id="2945289">,</span>&nbsp;<span class="ident" id="2945291">hi</span>&nbsp;<span class="builtintype" id="2945294">int</span><span class="op" id="2945297">)</span>&nbsp;<span class="op" id="2945299">(</span><span class="ident" id="2945300">midlo</span><span class="op" id="2945305">,</span>&nbsp;<span class="ident" id="2945307">midhi</span>&nbsp;<span class="builtintype" id="2945313">int</span><span class="op" id="2945316">)</span>&nbsp;<span class="op" id="2945318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945321">m</span>&nbsp;<span class="op" id="2945323">:=</span>&nbsp;<span class="ident" id="2945326">lo</span>&nbsp;<span class="op" id="2945329">+</span>&nbsp;<span class="op" id="2945331">(</span><span class="ident" id="2945332">hi</span><span class="op" id="2945334">-</span><span class="ident" id="2945335">lo</span><span class="op" id="2945337">)</span><span class="op" id="2945338">/</span><span class="num" id="2945339">2</span>&nbsp;<span class="comment" id="2945341">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2945390">if</span>&nbsp;<span class="ident" id="2945393">hi</span><span class="op" id="2945395">-</span><span class="ident" id="2945396">lo</span>&nbsp;<span class="op" id="2945399">&gt;</span>&nbsp;<span class="num" id="2945401">40</span>&nbsp;<span class="op" id="2945404">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945408">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945468">s</span>&nbsp;<span class="op" id="2945470">:=</span>&nbsp;<span class="op" id="2945473">(</span><span class="ident" id="2945474">hi</span>&nbsp;<span class="op" id="2945477">-</span>&nbsp;<span class="ident" id="2945479">lo</span><span class="op" id="2945481">)</span>&nbsp;<span class="op" id="2945483">/</span>&nbsp;<span class="num" id="2945485">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945489">medianOfThree</span><span class="op" id="2945502">(</span><span class="ident" id="2945503">data</span><span class="op" id="2945507">,</span>&nbsp;<span class="ident" id="2945509">lo</span><span class="op" id="2945511">,</span>&nbsp;<span class="ident" id="2945513">lo</span><span class="op" id="2945515">+</span><span class="ident" id="2945516">s</span><span class="op" id="2945517">,</span>&nbsp;<span class="ident" id="2945519">lo</span><span class="op" id="2945521">+</span><span class="num" id="2945522">2</span><span class="op" id="2945523">*</span><span class="ident" id="2945524">s</span><span class="op" id="2945525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945529">medianOfThree</span><span class="op" id="2945542">(</span><span class="ident" id="2945543">data</span><span class="op" id="2945547">,</span>&nbsp;<span class="ident" id="2945549">m</span><span class="op" id="2945550">,</span>&nbsp;<span class="ident" id="2945552">m</span><span class="op" id="2945553">-</span><span class="ident" id="2945554">s</span><span class="op" id="2945555">,</span>&nbsp;<span class="ident" id="2945557">m</span><span class="op" id="2945558">+</span><span class="ident" id="2945559">s</span><span class="op" id="2945560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945564">medianOfThree</span><span class="op" id="2945577">(</span><span class="ident" id="2945578">data</span><span class="op" id="2945582">,</span>&nbsp;<span class="ident" id="2945584">hi</span><span class="op" id="2945586">-</span><span class="num" id="2945587">1</span><span class="op" id="2945588">,</span>&nbsp;<span class="ident" id="2945590">hi</span><span class="op" id="2945592">-</span><span class="num" id="2945593">1</span><span class="op" id="2945594">-</span><span class="ident" id="2945595">s</span><span class="op" id="2945596">,</span>&nbsp;<span class="ident" id="2945598">hi</span><span class="op" id="2945600">-</span><span class="num" id="2945601">1</span><span class="op" id="2945602">-</span><span class="num" id="2945603">2</span><span class="op" id="2945604">*</span><span class="ident" id="2945605">s</span><span class="op" id="2945606">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2945609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945612">medianOfThree</span><span class="op" id="2945625">(</span><span class="ident" id="2945626">data</span><span class="op" id="2945630">,</span>&nbsp;<span class="ident" id="2945632">lo</span><span class="op" id="2945634">,</span>&nbsp;<span class="ident" id="2945636">m</span><span class="op" id="2945637">,</span>&nbsp;<span class="ident" id="2945639">hi</span><span class="op" id="2945641">-</span><span class="num" id="2945642">1</span><span class="op" id="2945643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945647">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945667">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945712">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945742">//&nbsp;&nbsp;&nbsp;&nbsp;data[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945771">//&nbsp;&nbsp;&nbsp;&nbsp;data[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945806">//&nbsp;&nbsp;&nbsp;&nbsp;data[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945835">//&nbsp;&nbsp;&nbsp;&nbsp;data[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945865">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945869">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2945921">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945955">pivot</span>&nbsp;<span class="op" id="2945961">:=</span>&nbsp;<span class="ident" id="2945964">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945968">a</span><span class="op" id="2945969">,</span>&nbsp;<span class="ident" id="2945971">b</span><span class="op" id="2945972">,</span>&nbsp;<span class="ident" id="2945974">c</span><span class="op" id="2945975">,</span>&nbsp;<span class="ident" id="2945977">d</span>&nbsp;<span class="op" id="2945979">:=</span>&nbsp;<span class="ident" id="2945982">lo</span><span class="op" id="2945984">+</span><span class="num" id="2945985">1</span><span class="op" id="2945986">,</span>&nbsp;<span class="ident" id="2945988">lo</span><span class="op" id="2945990">+</span><span class="num" id="2945991">1</span><span class="op" id="2945992">,</span>&nbsp;<span class="ident" id="2945994">hi</span><span class="op" id="2945996">,</span>&nbsp;<span class="ident" id="2945998">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946002">for</span>&nbsp;<span class="op" id="2946006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946010">for</span>&nbsp;<span class="ident" id="2946014">b</span>&nbsp;<span class="op" id="2946016">&lt;</span>&nbsp;<span class="ident" id="2946018">c</span>&nbsp;<span class="op" id="2946020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946025">if</span>&nbsp;<span class="ident" id="2946028">data</span><span class="op" id="2946032">.</span><span class="ident" id="2946033">Less</span><span class="op" id="2946037">(</span><span class="ident" id="2946038">b</span><span class="op" id="2946039">,</span>&nbsp;<span class="ident" id="2946041">pivot</span><span class="op" id="2946046">)</span>&nbsp;<span class="op" id="2946048">{</span>&nbsp;<span class="comment" id="2946050">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946073">b</span><span class="op" id="2946074">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946080">}</span>&nbsp;<span class="keyword" id="2946082">else</span>&nbsp;<span class="keyword" id="2946087">if</span>&nbsp;<span class="op" id="2946090">!</span><span class="ident" id="2946091">data</span><span class="op" id="2946095">.</span><span class="ident" id="2946096">Less</span><span class="op" id="2946100">(</span><span class="ident" id="2946101">pivot</span><span class="op" id="2946106">,</span>&nbsp;<span class="ident" id="2946108">b</span><span class="op" id="2946109">)</span>&nbsp;<span class="op" id="2946111">{</span>&nbsp;<span class="comment" id="2946113">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946136">data</span><span class="op" id="2946140">.</span><span class="ident" id="2946141">Swap</span><span class="op" id="2946145">(</span><span class="ident" id="2946146">a</span><span class="op" id="2946147">,</span>&nbsp;<span class="ident" id="2946149">b</span><span class="op" id="2946150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946156">a</span><span class="op" id="2946157">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946164">b</span><span class="op" id="2946165">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946171">}</span>&nbsp;<span class="keyword" id="2946173">else</span>&nbsp;<span class="op" id="2946178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946184">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946201">for</span>&nbsp;<span class="ident" id="2946205">b</span>&nbsp;<span class="op" id="2946207">&lt;</span>&nbsp;<span class="ident" id="2946209">c</span>&nbsp;<span class="op" id="2946211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946216">if</span>&nbsp;<span class="ident" id="2946219">data</span><span class="op" id="2946223">.</span><span class="ident" id="2946224">Less</span><span class="op" id="2946228">(</span><span class="ident" id="2946229">pivot</span><span class="op" id="2946234">,</span>&nbsp;<span class="ident" id="2946236">c</span><span class="op" id="2946237">-</span><span class="num" id="2946238">1</span><span class="op" id="2946239">)</span>&nbsp;<span class="op" id="2946241">{</span>&nbsp;<span class="comment" id="2946243">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946268">c</span><span class="op" id="2946269">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946275">}</span>&nbsp;<span class="keyword" id="2946277">else</span>&nbsp;<span class="keyword" id="2946282">if</span>&nbsp;<span class="op" id="2946285">!</span><span class="ident" id="2946286">data</span><span class="op" id="2946290">.</span><span class="ident" id="2946291">Less</span><span class="op" id="2946295">(</span><span class="ident" id="2946296">c</span><span class="op" id="2946297">-</span><span class="num" id="2946298">1</span><span class="op" id="2946299">,</span>&nbsp;<span class="ident" id="2946301">pivot</span><span class="op" id="2946306">)</span>&nbsp;<span class="op" id="2946308">{</span>&nbsp;<span class="comment" id="2946310">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946335">data</span><span class="op" id="2946339">.</span><span class="ident" id="2946340">Swap</span><span class="op" id="2946344">(</span><span class="ident" id="2946345">c</span><span class="op" id="2946346">-</span><span class="num" id="2946347">1</span><span class="op" id="2946348">,</span>&nbsp;<span class="ident" id="2946350">d</span><span class="op" id="2946351">-</span><span class="num" id="2946352">1</span><span class="op" id="2946353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946359">c</span><span class="op" id="2946360">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946367">d</span><span class="op" id="2946368">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946374">}</span>&nbsp;<span class="keyword" id="2946376">else</span>&nbsp;<span class="op" id="2946381">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946387">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946404">if</span>&nbsp;<span class="ident" id="2946407">b</span>&nbsp;<span class="op" id="2946409">&gt;=</span>&nbsp;<span class="ident" id="2946412">c</span>&nbsp;<span class="op" id="2946414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946419">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946431">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946471">data</span><span class="op" id="2946475">.</span><span class="ident" id="2946476">Swap</span><span class="op" id="2946480">(</span><span class="ident" id="2946481">b</span><span class="op" id="2946482">,</span>&nbsp;<span class="ident" id="2946484">c</span><span class="op" id="2946485">-</span><span class="num" id="2946486">1</span><span class="op" id="2946487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946491">b</span><span class="op" id="2946492">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946497">c</span><span class="op" id="2946498">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946506">n</span>&nbsp;<span class="op" id="2946508">:=</span>&nbsp;<span class="ident" id="2946511">min</span><span class="op" id="2946514">(</span><span class="ident" id="2946515">b</span><span class="op" id="2946516">-</span><span class="ident" id="2946517">a</span><span class="op" id="2946518">,</span>&nbsp;<span class="ident" id="2946520">a</span><span class="op" id="2946521">-</span><span class="ident" id="2946522">lo</span><span class="op" id="2946524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946527">swapRange</span><span class="op" id="2946536">(</span><span class="ident" id="2946537">data</span><span class="op" id="2946541">,</span>&nbsp;<span class="ident" id="2946543">lo</span><span class="op" id="2946545">,</span>&nbsp;<span class="ident" id="2946547">b</span><span class="op" id="2946548">-</span><span class="ident" id="2946549">n</span><span class="op" id="2946550">,</span>&nbsp;<span class="ident" id="2946552">n</span><span class="op" id="2946553">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946557">n</span>&nbsp;<span class="op" id="2946559">=</span>&nbsp;<span class="ident" id="2946561">min</span><span class="op" id="2946564">(</span><span class="ident" id="2946565">hi</span><span class="op" id="2946567">-</span><span class="ident" id="2946568">d</span><span class="op" id="2946569">,</span>&nbsp;<span class="ident" id="2946571">d</span><span class="op" id="2946572">-</span><span class="ident" id="2946573">c</span><span class="op" id="2946574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946577">swapRange</span><span class="op" id="2946586">(</span><span class="ident" id="2946587">data</span><span class="op" id="2946591">,</span>&nbsp;<span class="ident" id="2946593">c</span><span class="op" id="2946594">,</span>&nbsp;<span class="ident" id="2946596">hi</span><span class="op" id="2946598">-</span><span class="ident" id="2946599">n</span><span class="op" id="2946600">,</span>&nbsp;<span class="ident" id="2946602">n</span><span class="op" id="2946603">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946607">return</span>&nbsp;<span class="ident" id="2946614">lo</span>&nbsp;<span class="op" id="2946617">+</span>&nbsp;<span class="ident" id="2946619">b</span>&nbsp;<span class="op" id="2946621">-</span>&nbsp;<span class="ident" id="2946623">a</span><span class="op" id="2946624">,</span>&nbsp;<span class="ident" id="2946626">hi</span>&nbsp;<span class="op" id="2946629">-</span>&nbsp;<span class="op" id="2946631">(</span><span class="ident" id="2946632">d</span>&nbsp;<span class="op" id="2946634">-</span>&nbsp;<span class="ident" id="2946636">c</span><span class="op" id="2946637">)</span><br>
<span class="lineno"></span><span class="op" id="2946639">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2946642">func</span>&nbsp;<span class="ident" id="2946647">quickSort</span><span class="op" id="2946656">(</span><span class="ident" id="2946657">data</span>&nbsp;<span class="ident" id="2946662">Interface</span><span class="op" id="2946671">,</span>&nbsp;<span class="ident" id="2946673">a</span><span class="op" id="2946674">,</span>&nbsp;<span class="ident" id="2946676">b</span><span class="op" id="2946677">,</span>&nbsp;<span class="ident" id="2946679">maxDepth</span>&nbsp;<span class="builtintype" id="2946688">int</span><span class="op" id="2946691">)</span>&nbsp;<span class="op" id="2946693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946696">for</span>&nbsp;<span class="ident" id="2946700">b</span><span class="op" id="2946701">-</span><span class="ident" id="2946702">a</span>&nbsp;<span class="op" id="2946704">&gt;</span>&nbsp;<span class="num" id="2946706">7</span>&nbsp;<span class="op" id="2946708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946712">if</span>&nbsp;<span class="ident" id="2946715">maxDepth</span>&nbsp;<span class="op" id="2946724">==</span>&nbsp;<span class="num" id="2946727">0</span>&nbsp;<span class="op" id="2946729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946734">heapSort</span><span class="op" id="2946742">(</span><span class="ident" id="2946743">data</span><span class="op" id="2946747">,</span>&nbsp;<span class="ident" id="2946749">a</span><span class="op" id="2946750">,</span>&nbsp;<span class="ident" id="2946752">b</span><span class="op" id="2946753">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946758">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2946767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946771">maxDepth</span><span class="op" id="2946779">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946784">mlo</span><span class="op" id="2946787">,</span>&nbsp;<span class="ident" id="2946789">mhi</span>&nbsp;<span class="op" id="2946793">:=</span>&nbsp;<span class="ident" id="2946796">doPivot</span><span class="op" id="2946803">(</span><span class="ident" id="2946804">data</span><span class="op" id="2946808">,</span>&nbsp;<span class="ident" id="2946810">a</span><span class="op" id="2946811">,</span>&nbsp;<span class="ident" id="2946813">b</span><span class="op" id="2946814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946818">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2946878">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2946917">if</span>&nbsp;<span class="ident" id="2946920">mlo</span><span class="op" id="2946923">-</span><span class="ident" id="2946924">a</span>&nbsp;<span class="op" id="2946926">&lt;</span>&nbsp;<span class="ident" id="2946928">b</span><span class="op" id="2946929">-</span><span class="ident" id="2946930">mhi</span>&nbsp;<span class="op" id="2946934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946939">quickSort</span><span class="op" id="2946948">(</span><span class="ident" id="2946949">data</span><span class="op" id="2946953">,</span>&nbsp;<span class="ident" id="2946955">a</span><span class="op" id="2946956">,</span>&nbsp;<span class="ident" id="2946958">mlo</span><span class="op" id="2946961">,</span>&nbsp;<span class="ident" id="2946963">maxDepth</span><span class="op" id="2946971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946976">a</span>&nbsp;<span class="op" id="2946978">=</span>&nbsp;<span class="ident" id="2946980">mhi</span>&nbsp;<span class="comment" id="2946984">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947019">}</span>&nbsp;<span class="keyword" id="2947021">else</span>&nbsp;<span class="op" id="2947026">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947031">quickSort</span><span class="op" id="2947040">(</span><span class="ident" id="2947041">data</span><span class="op" id="2947045">,</span>&nbsp;<span class="ident" id="2947047">mhi</span><span class="op" id="2947050">,</span>&nbsp;<span class="ident" id="2947052">b</span><span class="op" id="2947053">,</span>&nbsp;<span class="ident" id="2947055">maxDepth</span><span class="op" id="2947063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947068">b</span>&nbsp;<span class="op" id="2947070">=</span>&nbsp;<span class="ident" id="2947072">mlo</span>&nbsp;<span class="comment" id="2947076">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947117">if</span>&nbsp;<span class="ident" id="2947120">b</span><span class="op" id="2947121">-</span><span class="ident" id="2947122">a</span>&nbsp;<span class="op" id="2947124">&gt;</span>&nbsp;<span class="num" id="2947126">1</span>&nbsp;<span class="op" id="2947128">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947132">insertionSort</span><span class="op" id="2947145">(</span><span class="ident" id="2947146">data</span><span class="op" id="2947150">,</span>&nbsp;<span class="ident" id="2947152">a</span><span class="op" id="2947153">,</span>&nbsp;<span class="ident" id="2947155">b</span><span class="op" id="2947156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947159">}</span><br>
<span class="lineno"></span><span class="op" id="2947161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947164">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2947184">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2947258">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2947327">func</span>&nbsp;<span class="ident" id="2947332">Sort</span><span class="op" id="2947336">(</span><span class="ident" id="2947337">data</span>&nbsp;<span class="ident" id="2947342">Interface</span><span class="op" id="2947351">)</span>&nbsp;<span class="op" id="2947353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947356">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947419">n</span>&nbsp;<span class="op" id="2947421">:=</span>&nbsp;<span class="ident" id="2947424">data</span><span class="op" id="2947428">.</span><span class="ident" id="2947429">Len</span><span class="op" id="2947432">(</span><span class="op" id="2947433">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947436">maxDepth</span>&nbsp;<span class="op" id="2947445">:=</span>&nbsp;<span class="num" id="2947448">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947451">for</span>&nbsp;<span class="ident" id="2947455">i</span>&nbsp;<span class="op" id="2947457">:=</span>&nbsp;<span class="ident" id="2947460">n</span><span class="op" id="2947461">;</span>&nbsp;<span class="ident" id="2947463">i</span>&nbsp;<span class="op" id="2947465">&gt;</span>&nbsp;<span class="num" id="2947467">0</span><span class="op" id="2947468">;</span>&nbsp;<span class="ident" id="2947470">i</span>&nbsp;<span class="op" id="2947472">&gt;&gt;=</span>&nbsp;<span class="num" id="2947476">1</span>&nbsp;<span class="op" id="2947478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947482">maxDepth</span><span class="op" id="2947490">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2947494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947497">maxDepth</span>&nbsp;<span class="op" id="2947506">*=</span>&nbsp;<span class="num" id="2947509">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947512">quickSort</span><span class="op" id="2947521">(</span><span class="ident" id="2947522">data</span><span class="op" id="2947526">,</span>&nbsp;<span class="num" id="2947528">0</span><span class="op" id="2947529">,</span>&nbsp;<span class="ident" id="2947531">n</span><span class="op" id="2947532">,</span>&nbsp;<span class="ident" id="2947534">maxDepth</span><span class="op" id="2947542">)</span><br>
<span class="lineno"></span><span class="op" id="2947544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2947547">type</span>&nbsp;<span class="ident" id="2947552">reverse</span>&nbsp;<span class="keyword" id="2947560">struct</span>&nbsp;<span class="op" id="2947567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947570">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2947636">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2947674">Interface</span><br>
<span class="lineno"></span><span class="op" id="2947684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947687">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2947762">func</span>&nbsp;<span class="op" id="2947767">(</span><span class="ident" id="2947768">r</span>&nbsp;<span class="ident" id="2947770">reverse</span><span class="op" id="2947777">)</span>&nbsp;<span class="ident" id="2947779">Less</span><span class="op" id="2947783">(</span><span class="ident" id="2947784">i</span><span class="op" id="2947785">,</span>&nbsp;<span class="ident" id="2947787">j</span>&nbsp;<span class="builtintype" id="2947789">int</span><span class="op" id="2947792">)</span>&nbsp;<span class="builtintype" id="2947794">bool</span>&nbsp;<span class="op" id="2947799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947802">return</span>&nbsp;<span class="ident" id="2947809">r</span><span class="op" id="2947810">.</span><span class="ident" id="2947811">Interface</span><span class="op" id="2947820">.</span><span class="ident" id="2947821">Less</span><span class="op" id="2947825">(</span><span class="ident" id="2947826">j</span><span class="op" id="2947827">,</span>&nbsp;<span class="ident" id="2947829">i</span><span class="op" id="2947830">)</span><br>
<span class="lineno"></span><span class="op" id="2947832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947835">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2947882">func</span>&nbsp;<span class="ident" id="2947887">Reverse</span><span class="op" id="2947894">(</span><span class="ident" id="2947895">data</span>&nbsp;<span class="ident" id="2947900">Interface</span><span class="op" id="2947909">)</span>&nbsp;<span class="ident" id="2947911">Interface</span>&nbsp;<span class="op" id="2947921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2947924">return</span>&nbsp;<span class="op" id="2947931">&amp;</span><span class="ident" id="2947932">reverse</span><span class="op" id="2947939">{</span><span class="ident" id="2947940">data</span><span class="op" id="2947944">}</span><br>
<span class="lineno"></span><span class="op" id="2947946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947949">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2947993">func</span>&nbsp;<span class="ident" id="2947998">IsSorted</span><span class="op" id="2948006">(</span><span class="ident" id="2948007">data</span>&nbsp;<span class="ident" id="2948012">Interface</span><span class="op" id="2948021">)</span>&nbsp;<span class="builtintype" id="2948023">bool</span>&nbsp;<span class="op" id="2948028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2948031">n</span>&nbsp;<span class="op" id="2948033">:=</span>&nbsp;<span class="ident" id="2948036">data</span><span class="op" id="2948040">.</span><span class="ident" id="2948041">Len</span><span class="op" id="2948044">(</span><span class="op" id="2948045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948048">for</span>&nbsp;<span class="ident" id="2948052">i</span>&nbsp;<span class="op" id="2948054">:=</span>&nbsp;<span class="ident" id="2948057">n</span>&nbsp;<span class="op" id="2948059">-</span>&nbsp;<span class="num" id="2948061">1</span><span class="op" id="2948062">;</span>&nbsp;<span class="ident" id="2948064">i</span>&nbsp;<span class="op" id="2948066">&gt;</span>&nbsp;<span class="num" id="2948068">0</span><span class="op" id="2948069">;</span>&nbsp;<span class="ident" id="2948071">i</span><span class="op" id="2948072">--</span>&nbsp;<span class="op" id="2948075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948079">if</span>&nbsp;<span class="ident" id="2948082">data</span><span class="op" id="2948086">.</span><span class="ident" id="2948087">Less</span><span class="op" id="2948091">(</span><span class="ident" id="2948092">i</span><span class="op" id="2948093">,</span>&nbsp;<span class="ident" id="2948095">i</span><span class="op" id="2948096">-</span><span class="num" id="2948097">1</span><span class="op" id="2948098">)</span>&nbsp;<span class="op" id="2948100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948105">return</span>&nbsp;<span class="builtintype" id="2948112">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948126">return</span>&nbsp;<span class="builtintype" id="2948133">true</span><br>
<span class="lineno"></span><span class="op" id="2948138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2948141">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948180">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2948265">type</span>&nbsp;<span class="ident" id="2948270">IntSlice</span>&nbsp;<span class="op" id="2948279">[</span><span class="op" id="2948280">]</span><span class="builtintype" id="2948281">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2948286">func</span>&nbsp;<span class="op" id="2948291">(</span><span class="ident" id="2948292">p</span>&nbsp;<span class="ident" id="2948294">IntSlice</span><span class="op" id="2948302">)</span>&nbsp;<span class="ident" id="2948304">Len</span><span class="op" id="2948307">(</span><span class="op" id="2948308">)</span>&nbsp;<span class="builtintype" id="2948310">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948324">{</span>&nbsp;<span class="keyword" id="2948326">return</span>&nbsp;<span class="builtinfunc" id="2948333">len</span><span class="op" id="2948336">(</span><span class="ident" id="2948337">p</span><span class="op" id="2948338">)</span>&nbsp;<span class="op" id="2948340">}</span><br>
<span class="lineno"></span><span class="keyword" id="2948342">func</span>&nbsp;<span class="op" id="2948347">(</span><span class="ident" id="2948348">p</span>&nbsp;<span class="ident" id="2948350">IntSlice</span><span class="op" id="2948358">)</span>&nbsp;<span class="ident" id="2948360">Less</span><span class="op" id="2948364">(</span><span class="ident" id="2948365">i</span><span class="op" id="2948366">,</span>&nbsp;<span class="ident" id="2948368">j</span>&nbsp;<span class="builtintype" id="2948370">int</span><span class="op" id="2948373">)</span>&nbsp;<span class="builtintype" id="2948375">bool</span>&nbsp;<span class="op" id="2948380">{</span>&nbsp;<span class="keyword" id="2948382">return</span>&nbsp;<span class="ident" id="2948389">p</span><span class="op" id="2948390">[</span><span class="ident" id="2948391">i</span><span class="op" id="2948392">]</span>&nbsp;<span class="op" id="2948394">&lt;</span>&nbsp;<span class="ident" id="2948396">p</span><span class="op" id="2948397">[</span><span class="ident" id="2948398">j</span><span class="op" id="2948399">]</span>&nbsp;<span class="op" id="2948401">}</span><br>
<span class="lineno"></span><span class="keyword" id="2948403">func</span>&nbsp;<span class="op" id="2948408">(</span><span class="ident" id="2948409">p</span>&nbsp;<span class="ident" id="2948411">IntSlice</span><span class="op" id="2948419">)</span>&nbsp;<span class="ident" id="2948421">Swap</span><span class="op" id="2948425">(</span><span class="ident" id="2948426">i</span><span class="op" id="2948427">,</span>&nbsp;<span class="ident" id="2948429">j</span>&nbsp;<span class="builtintype" id="2948431">int</span><span class="op" id="2948434">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948441">{</span>&nbsp;<span class="ident" id="2948443">p</span><span class="op" id="2948444">[</span><span class="ident" id="2948445">i</span><span class="op" id="2948446">]</span><span class="op" id="2948447">,</span>&nbsp;<span class="ident" id="2948449">p</span><span class="op" id="2948450">[</span><span class="ident" id="2948451">j</span><span class="op" id="2948452">]</span>&nbsp;<span class="op" id="2948454">=</span>&nbsp;<span class="ident" id="2948456">p</span><span class="op" id="2948457">[</span><span class="ident" id="2948458">j</span><span class="op" id="2948459">]</span><span class="op" id="2948460">,</span>&nbsp;<span class="ident" id="2948462">p</span><span class="op" id="2948463">[</span><span class="ident" id="2948464">i</span><span class="op" id="2948465">]</span>&nbsp;<span class="op" id="2948467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948470">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2948503">func</span>&nbsp;<span class="op" id="2948508">(</span><span class="ident" id="2948509">p</span>&nbsp;<span class="ident" id="2948511">IntSlice</span><span class="op" id="2948519">)</span>&nbsp;<span class="ident" id="2948521">Sort</span><span class="op" id="2948525">(</span><span class="op" id="2948526">)</span>&nbsp;<span class="op" id="2948528">{</span>&nbsp;<span class="ident" id="2948530">Sort</span><span class="op" id="2948534">(</span><span class="ident" id="2948535">p</span><span class="op" id="2948536">)</span>&nbsp;<span class="op" id="2948538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948541">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2948634">type</span>&nbsp;<span class="ident" id="2948639">Float64Slice</span>&nbsp;<span class="op" id="2948652">[</span><span class="op" id="2948653">]</span><span class="builtintype" id="2948654">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2948663">func</span>&nbsp;<span class="op" id="2948668">(</span><span class="ident" id="2948669">p</span>&nbsp;<span class="ident" id="2948671">Float64Slice</span><span class="op" id="2948683">)</span>&nbsp;<span class="ident" id="2948685">Len</span><span class="op" id="2948688">(</span><span class="op" id="2948689">)</span>&nbsp;<span class="builtintype" id="2948691">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948705">{</span>&nbsp;<span class="keyword" id="2948707">return</span>&nbsp;<span class="builtinfunc" id="2948714">len</span><span class="op" id="2948717">(</span><span class="ident" id="2948718">p</span><span class="op" id="2948719">)</span>&nbsp;<span class="op" id="2948721">}</span><br>
<span class="lineno"></span><span class="keyword" id="2948723">func</span>&nbsp;<span class="op" id="2948728">(</span><span class="ident" id="2948729">p</span>&nbsp;<span class="ident" id="2948731">Float64Slice</span><span class="op" id="2948743">)</span>&nbsp;<span class="ident" id="2948745">Less</span><span class="op" id="2948749">(</span><span class="ident" id="2948750">i</span><span class="op" id="2948751">,</span>&nbsp;<span class="ident" id="2948753">j</span>&nbsp;<span class="builtintype" id="2948755">int</span><span class="op" id="2948758">)</span>&nbsp;<span class="builtintype" id="2948760">bool</span>&nbsp;<span class="op" id="2948765">{</span>&nbsp;<span class="keyword" id="2948767">return</span>&nbsp;<span class="ident" id="2948774">p</span><span class="op" id="2948775">[</span><span class="ident" id="2948776">i</span><span class="op" id="2948777">]</span>&nbsp;<span class="op" id="2948779">&lt;</span>&nbsp;<span class="ident" id="2948781">p</span><span class="op" id="2948782">[</span><span class="ident" id="2948783">j</span><span class="op" id="2948784">]</span>&nbsp;<span class="op" id="2948786">||</span>&nbsp;<span class="ident" id="2948789">isNaN</span><span class="op" id="2948794">(</span><span class="ident" id="2948795">p</span><span class="op" id="2948796">[</span><span class="ident" id="2948797">i</span><span class="op" id="2948798">]</span><span class="op" id="2948799">)</span>&nbsp;<span class="op" id="2948801">&amp;&amp;</span>&nbsp;<span class="op" id="2948804">!</span><span class="ident" id="2948805">isNaN</span><span class="op" id="2948810">(</span><span class="ident" id="2948811">p</span><span class="op" id="2948812">[</span><span class="ident" id="2948813">j</span><span class="op" id="2948814">]</span><span class="op" id="2948815">)</span>&nbsp;<span class="op" id="2948817">}</span><br>
<span class="lineno"></span><span class="keyword" id="2948819">func</span>&nbsp;<span class="op" id="2948824">(</span><span class="ident" id="2948825">p</span>&nbsp;<span class="ident" id="2948827">Float64Slice</span><span class="op" id="2948839">)</span>&nbsp;<span class="ident" id="2948841">Swap</span><span class="op" id="2948845">(</span><span class="ident" id="2948846">i</span><span class="op" id="2948847">,</span>&nbsp;<span class="ident" id="2948849">j</span>&nbsp;<span class="builtintype" id="2948851">int</span><span class="op" id="2948854">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2948861">{</span>&nbsp;<span class="ident" id="2948863">p</span><span class="op" id="2948864">[</span><span class="ident" id="2948865">i</span><span class="op" id="2948866">]</span><span class="op" id="2948867">,</span>&nbsp;<span class="ident" id="2948869">p</span><span class="op" id="2948870">[</span><span class="ident" id="2948871">j</span><span class="op" id="2948872">]</span>&nbsp;<span class="op" id="2948874">=</span>&nbsp;<span class="ident" id="2948876">p</span><span class="op" id="2948877">[</span><span class="ident" id="2948878">j</span><span class="op" id="2948879">]</span><span class="op" id="2948880">,</span>&nbsp;<span class="ident" id="2948882">p</span><span class="op" id="2948883">[</span><span class="ident" id="2948884">i</span><span class="op" id="2948885">]</span>&nbsp;<span class="op" id="2948887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948890">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2948966">func</span>&nbsp;<span class="ident" id="2948971">isNaN</span><span class="op" id="2948976">(</span><span class="ident" id="2948977">f</span>&nbsp;<span class="builtintype" id="2948979">float64</span><span class="op" id="2948986">)</span>&nbsp;<span class="builtintype" id="2948988">bool</span>&nbsp;<span class="op" id="2948993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2948996">return</span>&nbsp;<span class="ident" id="2949003">f</span>&nbsp;<span class="op" id="2949005">!=</span>&nbsp;<span class="ident" id="2949008">f</span><br>
<span class="lineno"></span><span class="op" id="2949010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949013">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2949046">func</span>&nbsp;<span class="op" id="2949051">(</span><span class="ident" id="2949052">p</span>&nbsp;<span class="ident" id="2949054">Float64Slice</span><span class="op" id="2949066">)</span>&nbsp;<span class="ident" id="2949068">Sort</span><span class="op" id="2949072">(</span><span class="op" id="2949073">)</span>&nbsp;<span class="op" id="2949075">{</span>&nbsp;<span class="ident" id="2949077">Sort</span><span class="op" id="2949081">(</span><span class="ident" id="2949082">p</span><span class="op" id="2949083">)</span>&nbsp;<span class="op" id="2949085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949088">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2949179">type</span>&nbsp;<span class="ident" id="2949184">StringSlice</span>&nbsp;<span class="op" id="2949196">[</span><span class="op" id="2949197">]</span><span class="builtintype" id="2949198">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2949206">func</span>&nbsp;<span class="op" id="2949211">(</span><span class="ident" id="2949212">p</span>&nbsp;<span class="ident" id="2949214">StringSlice</span><span class="op" id="2949225">)</span>&nbsp;<span class="ident" id="2949227">Len</span><span class="op" id="2949230">(</span><span class="op" id="2949231">)</span>&nbsp;<span class="builtintype" id="2949233">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949247">{</span>&nbsp;<span class="keyword" id="2949249">return</span>&nbsp;<span class="builtinfunc" id="2949256">len</span><span class="op" id="2949259">(</span><span class="ident" id="2949260">p</span><span class="op" id="2949261">)</span>&nbsp;<span class="op" id="2949263">}</span><br>
<span class="lineno"></span><span class="keyword" id="2949265">func</span>&nbsp;<span class="op" id="2949270">(</span><span class="ident" id="2949271">p</span>&nbsp;<span class="ident" id="2949273">StringSlice</span><span class="op" id="2949284">)</span>&nbsp;<span class="ident" id="2949286">Less</span><span class="op" id="2949290">(</span><span class="ident" id="2949291">i</span><span class="op" id="2949292">,</span>&nbsp;<span class="ident" id="2949294">j</span>&nbsp;<span class="builtintype" id="2949296">int</span><span class="op" id="2949299">)</span>&nbsp;<span class="builtintype" id="2949301">bool</span>&nbsp;<span class="op" id="2949306">{</span>&nbsp;<span class="keyword" id="2949308">return</span>&nbsp;<span class="ident" id="2949315">p</span><span class="op" id="2949316">[</span><span class="ident" id="2949317">i</span><span class="op" id="2949318">]</span>&nbsp;<span class="op" id="2949320">&lt;</span>&nbsp;<span class="ident" id="2949322">p</span><span class="op" id="2949323">[</span><span class="ident" id="2949324">j</span><span class="op" id="2949325">]</span>&nbsp;<span class="op" id="2949327">}</span><br>
<span class="lineno"></span><span class="keyword" id="2949329">func</span>&nbsp;<span class="op" id="2949334">(</span><span class="ident" id="2949335">p</span>&nbsp;<span class="ident" id="2949337">StringSlice</span><span class="op" id="2949348">)</span>&nbsp;<span class="ident" id="2949350">Swap</span><span class="op" id="2949354">(</span><span class="ident" id="2949355">i</span><span class="op" id="2949356">,</span>&nbsp;<span class="ident" id="2949358">j</span>&nbsp;<span class="builtintype" id="2949360">int</span><span class="op" id="2949363">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2949370">{</span>&nbsp;<span class="ident" id="2949372">p</span><span class="op" id="2949373">[</span><span class="ident" id="2949374">i</span><span class="op" id="2949375">]</span><span class="op" id="2949376">,</span>&nbsp;<span class="ident" id="2949378">p</span><span class="op" id="2949379">[</span><span class="ident" id="2949380">j</span><span class="op" id="2949381">]</span>&nbsp;<span class="op" id="2949383">=</span>&nbsp;<span class="ident" id="2949385">p</span><span class="op" id="2949386">[</span><span class="ident" id="2949387">j</span><span class="op" id="2949388">]</span><span class="op" id="2949389">,</span>&nbsp;<span class="ident" id="2949391">p</span><span class="op" id="2949392">[</span><span class="ident" id="2949393">i</span><span class="op" id="2949394">]</span>&nbsp;<span class="op" id="2949396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949399">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2949432">func</span>&nbsp;<span class="op" id="2949437">(</span><span class="ident" id="2949438">p</span>&nbsp;<span class="ident" id="2949440">StringSlice</span><span class="op" id="2949451">)</span>&nbsp;<span class="ident" id="2949453">Sort</span><span class="op" id="2949457">(</span><span class="op" id="2949458">)</span>&nbsp;<span class="op" id="2949460">{</span>&nbsp;<span class="ident" id="2949462">Sort</span><span class="op" id="2949466">(</span><span class="ident" id="2949467">p</span><span class="op" id="2949468">)</span>&nbsp;<span class="op" id="2949470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949473">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949515">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2949566">func</span>&nbsp;<span class="ident" id="2949571">Ints</span><span class="op" id="2949575">(</span><span class="ident" id="2949576">a</span>&nbsp;<span class="op" id="2949578">[</span><span class="op" id="2949579">]</span><span class="builtintype" id="2949580">int</span><span class="op" id="2949583">)</span>&nbsp;<span class="op" id="2949585">{</span>&nbsp;<span class="ident" id="2949587">Sort</span><span class="op" id="2949591">(</span><span class="ident" id="2949592">IntSlice</span><span class="op" id="2949600">(</span><span class="ident" id="2949601">a</span><span class="op" id="2949602">)</span><span class="op" id="2949603">)</span>&nbsp;<span class="op" id="2949605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949608">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2949667">func</span>&nbsp;<span class="ident" id="2949672">Float64s</span><span class="op" id="2949680">(</span><span class="ident" id="2949681">a</span>&nbsp;<span class="op" id="2949683">[</span><span class="op" id="2949684">]</span><span class="builtintype" id="2949685">float64</span><span class="op" id="2949692">)</span>&nbsp;<span class="op" id="2949694">{</span>&nbsp;<span class="ident" id="2949696">Sort</span><span class="op" id="2949700">(</span><span class="ident" id="2949701">Float64Slice</span><span class="op" id="2949713">(</span><span class="ident" id="2949714">a</span><span class="op" id="2949715">)</span><span class="op" id="2949716">)</span>&nbsp;<span class="op" id="2949718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2949721">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2949778">func</span>&nbsp;<span class="ident" id="2949783">Strings</span><span class="op" id="2949790">(</span><span class="ident" id="2949791">a</span>&nbsp;<span class="op" id="2949793">[</span><span class="op" id="2949794">]</span><span class="builtintype" id="2949795">string</span><span class="op" id="2949801">)</span>&nbsp;<span class="op" id="2949803">{</span>&nbsp;<span class="ident" id="2949805">Sort</span><span class="op" id="2949809">(</span><span class="ident" id="2949810">StringSlice</span><span class="op" id="2949821">(</span><span class="ident" id="2949822">a</span><span class="op" id="2949823">)</span><span class="op" id="2949824">)</span>&nbsp;<span class="op" id="2949826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949829">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2949907">func</span>&nbsp;<span class="ident" id="2949912">IntsAreSorted</span><span class="op" id="2949925">(</span><span class="ident" id="2949926">a</span>&nbsp;<span class="op" id="2949928">[</span><span class="op" id="2949929">]</span><span class="builtintype" id="2949930">int</span><span class="op" id="2949933">)</span>&nbsp;<span class="builtintype" id="2949935">bool</span>&nbsp;<span class="op" id="2949940">{</span>&nbsp;<span class="keyword" id="2949942">return</span>&nbsp;<span class="ident" id="2949949">IsSorted</span><span class="op" id="2949957">(</span><span class="ident" id="2949958">IntSlice</span><span class="op" id="2949966">(</span><span class="ident" id="2949967">a</span><span class="op" id="2949968">)</span><span class="op" id="2949969">)</span>&nbsp;<span class="op" id="2949971">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2949974">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2950060">func</span>&nbsp;<span class="ident" id="2950065">Float64sAreSorted</span><span class="op" id="2950082">(</span><span class="ident" id="2950083">a</span>&nbsp;<span class="op" id="2950085">[</span><span class="op" id="2950086">]</span><span class="builtintype" id="2950087">float64</span><span class="op" id="2950094">)</span>&nbsp;<span class="builtintype" id="2950096">bool</span>&nbsp;<span class="op" id="2950101">{</span>&nbsp;<span class="keyword" id="2950103">return</span>&nbsp;<span class="ident" id="2950110">IsSorted</span><span class="op" id="2950118">(</span><span class="ident" id="2950119">Float64Slice</span><span class="op" id="2950131">(</span><span class="ident" id="2950132">a</span><span class="op" id="2950133">)</span><span class="op" id="2950134">)</span>&nbsp;<span class="op" id="2950136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2950139">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2950223">func</span>&nbsp;<span class="ident" id="2950228">StringsAreSorted</span><span class="op" id="2950244">(</span><span class="ident" id="2950245">a</span>&nbsp;<span class="op" id="2950247">[</span><span class="op" id="2950248">]</span><span class="builtintype" id="2950249">string</span><span class="op" id="2950255">)</span>&nbsp;<span class="builtintype" id="2950257">bool</span>&nbsp;<span class="op" id="2950262">{</span>&nbsp;<span class="keyword" id="2950264">return</span>&nbsp;<span class="ident" id="2950271">IsSorted</span><span class="op" id="2950279">(</span><span class="ident" id="2950280">StringSlice</span><span class="op" id="2950291">(</span><span class="ident" id="2950292">a</span><span class="op" id="2950293">)</span><span class="op" id="2950294">)</span>&nbsp;<span class="op" id="2950296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2950299">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2950327">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2950403">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2950478">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2950541">//</span><br>
<span class="lineno"></span><span class="comment" id="2950544">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2950586">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2950658">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2950676">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2950730">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2950807">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2950879">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2950951">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2951006">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2951079">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2951130">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2951206">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2951280">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2951346">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2951423">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2951502">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2951580">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2951654">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2951702">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2951776">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2951825">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2951898">//</span><br>
<span class="lineno">315</span><span class="comment" id="2951901">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2951971">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2952027">func</span>&nbsp;<span class="ident" id="2952032">Stable</span><span class="op" id="2952038">(</span><span class="ident" id="2952039">data</span>&nbsp;<span class="ident" id="2952044">Interface</span><span class="op" id="2952053">)</span>&nbsp;<span class="op" id="2952055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952058">n</span>&nbsp;<span class="op" id="2952060">:=</span>&nbsp;<span class="ident" id="2952063">data</span><span class="op" id="2952067">.</span><span class="ident" id="2952068">Len</span><span class="op" id="2952071">(</span><span class="op" id="2952072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952075">blockSize</span>&nbsp;<span class="op" id="2952085">:=</span>&nbsp;<span class="num" id="2952088">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952092">a</span><span class="op" id="2952093">,</span>&nbsp;<span class="ident" id="2952095">b</span>&nbsp;<span class="op" id="2952097">:=</span>&nbsp;<span class="num" id="2952100">0</span><span class="op" id="2952101">,</span>&nbsp;<span class="ident" id="2952103">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952114">for</span>&nbsp;<span class="ident" id="2952118">b</span>&nbsp;<span class="op" id="2952120">&lt;=</span>&nbsp;<span class="ident" id="2952123">n</span>&nbsp;<span class="op" id="2952125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952129">insertionSort</span><span class="op" id="2952142">(</span><span class="ident" id="2952143">data</span><span class="op" id="2952147">,</span>&nbsp;<span class="ident" id="2952149">a</span><span class="op" id="2952150">,</span>&nbsp;<span class="ident" id="2952152">b</span><span class="op" id="2952153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952157">a</span>&nbsp;<span class="op" id="2952159">=</span>&nbsp;<span class="ident" id="2952161">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952165">b</span>&nbsp;<span class="op" id="2952167">+=</span>&nbsp;<span class="ident" id="2952170">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952184">insertionSort</span><span class="op" id="2952197">(</span><span class="ident" id="2952198">data</span><span class="op" id="2952202">,</span>&nbsp;<span class="ident" id="2952204">a</span><span class="op" id="2952205">,</span>&nbsp;<span class="ident" id="2952207">n</span><span class="op" id="2952208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952212">for</span>&nbsp;<span class="ident" id="2952216">blockSize</span>&nbsp;<span class="op" id="2952226">&lt;</span>&nbsp;<span class="ident" id="2952228">n</span>&nbsp;<span class="op" id="2952230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952234">a</span><span class="op" id="2952235">,</span>&nbsp;<span class="ident" id="2952237">b</span>&nbsp;<span class="op" id="2952239">=</span>&nbsp;<span class="num" id="2952241">0</span><span class="op" id="2952242">,</span>&nbsp;<span class="num" id="2952244">2</span><span class="op" id="2952245">*</span><span class="ident" id="2952246">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2952258">for</span>&nbsp;<span class="ident" id="2952262">b</span>&nbsp;<span class="op" id="2952264">&lt;=</span>&nbsp;<span class="ident" id="2952267">n</span>&nbsp;<span class="op" id="2952269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952274">symMerge</span><span class="op" id="2952282">(</span><span class="ident" id="2952283">data</span><span class="op" id="2952287">,</span>&nbsp;<span class="ident" id="2952289">a</span><span class="op" id="2952290">,</span>&nbsp;<span class="ident" id="2952292">a</span><span class="op" id="2952293">+</span><span class="ident" id="2952294">blockSize</span><span class="op" id="2952303">,</span>&nbsp;<span class="ident" id="2952305">b</span><span class="op" id="2952306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952311">a</span>&nbsp;<span class="op" id="2952313">=</span>&nbsp;<span class="ident" id="2952315">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952320">b</span>&nbsp;<span class="op" id="2952322">+=</span>&nbsp;<span class="num" id="2952325">2</span>&nbsp;<span class="op" id="2952327">*</span>&nbsp;<span class="ident" id="2952329">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952341">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952345">symMerge</span><span class="op" id="2952353">(</span><span class="ident" id="2952354">data</span><span class="op" id="2952358">,</span>&nbsp;<span class="ident" id="2952360">a</span><span class="op" id="2952361">,</span>&nbsp;<span class="ident" id="2952363">a</span><span class="op" id="2952364">+</span><span class="ident" id="2952365">blockSize</span><span class="op" id="2952374">,</span>&nbsp;<span class="ident" id="2952376">n</span><span class="op" id="2952377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2952381">blockSize</span>&nbsp;<span class="op" id="2952391">*=</span>&nbsp;<span class="num" id="2952394">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2952397">}</span><br>
<span class="lineno"></span><span class="op" id="2952399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2952402">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2952479">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2952556">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2952631">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2952706">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2952758">//</span><br>
<span class="lineno"></span><span class="comment" id="2952761">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2952802">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2952853">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2952914">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2952973">//</span><br>
<span class="lineno"></span><span class="comment" id="2952976">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2953051">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2953131">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2953208">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2953251">func</span>&nbsp;<span class="ident" id="2953256">symMerge</span><span class="op" id="2953264">(</span><span class="ident" id="2953265">data</span>&nbsp;<span class="ident" id="2953270">Interface</span><span class="op" id="2953279">,</span>&nbsp;<span class="ident" id="2953281">a</span><span class="op" id="2953282">,</span>&nbsp;<span class="ident" id="2953284">m</span><span class="op" id="2953285">,</span>&nbsp;<span class="ident" id="2953287">b</span>&nbsp;<span class="builtintype" id="2953289">int</span><span class="op" id="2953292">)</span>&nbsp;<span class="op" id="2953294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953297">if</span>&nbsp;<span class="ident" id="2953300">a</span>&nbsp;<span class="op" id="2953302">&gt;=</span>&nbsp;<span class="ident" id="2953305">m</span>&nbsp;<span class="op" id="2953307">||</span>&nbsp;<span class="ident" id="2953310">m</span>&nbsp;<span class="op" id="2953312">&gt;=</span>&nbsp;<span class="ident" id="2953315">b</span>&nbsp;<span class="op" id="2953317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953321">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953333">mid</span>&nbsp;<span class="op" id="2953337">:=</span>&nbsp;<span class="ident" id="2953340">a</span>&nbsp;<span class="op" id="2953342">+</span>&nbsp;<span class="op" id="2953344">(</span><span class="ident" id="2953345">b</span><span class="op" id="2953346">-</span><span class="ident" id="2953347">a</span><span class="op" id="2953348">)</span><span class="op" id="2953349">/</span><span class="num" id="2953350">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953353">n</span>&nbsp;<span class="op" id="2953355">:=</span>&nbsp;<span class="ident" id="2953358">mid</span>&nbsp;<span class="op" id="2953362">+</span>&nbsp;<span class="ident" id="2953364">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953367">start</span>&nbsp;<span class="op" id="2953373">:=</span>&nbsp;<span class="num" id="2953376">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953379">if</span>&nbsp;<span class="ident" id="2953382">m</span>&nbsp;<span class="op" id="2953384">&gt;</span>&nbsp;<span class="ident" id="2953386">mid</span>&nbsp;<span class="op" id="2953390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953394">start</span>&nbsp;<span class="op" id="2953400">=</span>&nbsp;<span class="ident" id="2953402">n</span>&nbsp;<span class="op" id="2953404">-</span>&nbsp;<span class="ident" id="2953406">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953410">r</span><span class="op" id="2953411">,</span>&nbsp;<span class="ident" id="2953413">p</span>&nbsp;<span class="op" id="2953415">:=</span>&nbsp;<span class="ident" id="2953418">mid</span><span class="op" id="2953421">,</span>&nbsp;<span class="ident" id="2953423">n</span><span class="op" id="2953424">-</span><span class="num" id="2953425">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953429">for</span>&nbsp;<span class="ident" id="2953433">start</span>&nbsp;<span class="op" id="2953439">&lt;</span>&nbsp;<span class="ident" id="2953441">r</span>&nbsp;<span class="op" id="2953443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953448">c</span>&nbsp;<span class="op" id="2953450">:=</span>&nbsp;<span class="ident" id="2953453">start</span>&nbsp;<span class="op" id="2953459">+</span>&nbsp;<span class="op" id="2953461">(</span><span class="ident" id="2953462">r</span><span class="op" id="2953463">-</span><span class="ident" id="2953464">start</span><span class="op" id="2953469">)</span><span class="op" id="2953470">/</span><span class="num" id="2953471">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953476">if</span>&nbsp;<span class="op" id="2953479">!</span><span class="ident" id="2953480">data</span><span class="op" id="2953484">.</span><span class="ident" id="2953485">Less</span><span class="op" id="2953489">(</span><span class="ident" id="2953490">p</span><span class="op" id="2953491">-</span><span class="ident" id="2953492">c</span><span class="op" id="2953493">,</span>&nbsp;<span class="ident" id="2953495">c</span><span class="op" id="2953496">)</span>&nbsp;<span class="op" id="2953498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953504">start</span>&nbsp;<span class="op" id="2953510">=</span>&nbsp;<span class="ident" id="2953512">c</span>&nbsp;<span class="op" id="2953514">+</span>&nbsp;<span class="num" id="2953516">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953521">}</span>&nbsp;<span class="keyword" id="2953523">else</span>&nbsp;<span class="op" id="2953528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953534">r</span>&nbsp;<span class="op" id="2953536">=</span>&nbsp;<span class="ident" id="2953538">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953550">}</span>&nbsp;<span class="keyword" id="2953552">else</span>&nbsp;<span class="op" id="2953557">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953561">start</span>&nbsp;<span class="op" id="2953567">=</span>&nbsp;<span class="ident" id="2953569">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953573">r</span><span class="op" id="2953574">,</span>&nbsp;<span class="ident" id="2953576">p</span>&nbsp;<span class="op" id="2953578">:=</span>&nbsp;<span class="ident" id="2953581">m</span><span class="op" id="2953582">,</span>&nbsp;<span class="ident" id="2953584">n</span><span class="op" id="2953585">-</span><span class="num" id="2953586">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953590">for</span>&nbsp;<span class="ident" id="2953594">start</span>&nbsp;<span class="op" id="2953600">&lt;</span>&nbsp;<span class="ident" id="2953602">r</span>&nbsp;<span class="op" id="2953604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953609">c</span>&nbsp;<span class="op" id="2953611">:=</span>&nbsp;<span class="ident" id="2953614">start</span>&nbsp;<span class="op" id="2953620">+</span>&nbsp;<span class="op" id="2953622">(</span><span class="ident" id="2953623">r</span><span class="op" id="2953624">-</span><span class="ident" id="2953625">start</span><span class="op" id="2953630">)</span><span class="op" id="2953631">/</span><span class="num" id="2953632">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2953637">if</span>&nbsp;<span class="op" id="2953640">!</span><span class="ident" id="2953641">data</span><span class="op" id="2953645">.</span><span class="ident" id="2953646">Less</span><span class="op" id="2953650">(</span><span class="ident" id="2953651">p</span><span class="op" id="2953652">-</span><span class="ident" id="2953653">c</span><span class="op" id="2953654">,</span>&nbsp;<span class="ident" id="2953656">c</span><span class="op" id="2953657">)</span>&nbsp;<span class="op" id="2953659">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953665">start</span>&nbsp;<span class="op" id="2953671">=</span>&nbsp;<span class="ident" id="2953673">c</span>&nbsp;<span class="op" id="2953675">+</span>&nbsp;<span class="num" id="2953677">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953682">}</span>&nbsp;<span class="keyword" id="2953684">else</span>&nbsp;<span class="op" id="2953689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953695">r</span>&nbsp;<span class="op" id="2953697">=</span>&nbsp;<span class="ident" id="2953699">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953708">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2953711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953714">end</span>&nbsp;<span class="op" id="2953718">:=</span>&nbsp;<span class="ident" id="2953721">n</span>&nbsp;<span class="op" id="2953723">-</span>&nbsp;<span class="ident" id="2953725">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953732">rotate</span><span class="op" id="2953738">(</span><span class="ident" id="2953739">data</span><span class="op" id="2953743">,</span>&nbsp;<span class="ident" id="2953745">start</span><span class="op" id="2953750">,</span>&nbsp;<span class="ident" id="2953752">m</span><span class="op" id="2953753">,</span>&nbsp;<span class="ident" id="2953755">end</span><span class="op" id="2953758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953761">symMerge</span><span class="op" id="2953769">(</span><span class="ident" id="2953770">data</span><span class="op" id="2953774">,</span>&nbsp;<span class="ident" id="2953776">a</span><span class="op" id="2953777">,</span>&nbsp;<span class="ident" id="2953779">start</span><span class="op" id="2953784">,</span>&nbsp;<span class="ident" id="2953786">mid</span><span class="op" id="2953789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2953792">symMerge</span><span class="op" id="2953800">(</span><span class="ident" id="2953801">data</span><span class="op" id="2953805">,</span>&nbsp;<span class="ident" id="2953807">mid</span><span class="op" id="2953810">,</span>&nbsp;<span class="ident" id="2953812">end</span><span class="op" id="2953815">,</span>&nbsp;<span class="ident" id="2953817">b</span><span class="op" id="2953818">)</span><br>
<span class="lineno">390</span><span class="op" id="2953820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953823">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2953898">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2953953">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2954009">func</span>&nbsp;<span class="ident" id="2954014">rotate</span><span class="op" id="2954020">(</span><span class="ident" id="2954021">data</span>&nbsp;<span class="ident" id="2954026">Interface</span><span class="op" id="2954035">,</span>&nbsp;<span class="ident" id="2954037">a</span><span class="op" id="2954038">,</span>&nbsp;<span class="ident" id="2954040">m</span><span class="op" id="2954041">,</span>&nbsp;<span class="ident" id="2954043">b</span>&nbsp;<span class="builtintype" id="2954045">int</span><span class="op" id="2954048">)</span>&nbsp;<span class="op" id="2954050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954053">i</span>&nbsp;<span class="op" id="2954055">:=</span>&nbsp;<span class="ident" id="2954058">m</span>&nbsp;<span class="op" id="2954060">-</span>&nbsp;<span class="ident" id="2954062">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954065">if</span>&nbsp;<span class="ident" id="2954068">i</span>&nbsp;<span class="op" id="2954070">==</span>&nbsp;<span class="num" id="2954073">0</span>&nbsp;<span class="op" id="2954075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954079">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954087">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954090">j</span>&nbsp;<span class="op" id="2954092">:=</span>&nbsp;<span class="ident" id="2954095">b</span>&nbsp;<span class="op" id="2954097">-</span>&nbsp;<span class="ident" id="2954099">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954102">if</span>&nbsp;<span class="ident" id="2954105">j</span>&nbsp;<span class="op" id="2954107">==</span>&nbsp;<span class="num" id="2954110">0</span>&nbsp;<span class="op" id="2954112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954116">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954128">if</span>&nbsp;<span class="ident" id="2954131">i</span>&nbsp;<span class="op" id="2954133">==</span>&nbsp;<span class="ident" id="2954136">j</span>&nbsp;<span class="op" id="2954138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954142">swapRange</span><span class="op" id="2954151">(</span><span class="ident" id="2954152">data</span><span class="op" id="2954156">,</span>&nbsp;<span class="ident" id="2954158">a</span><span class="op" id="2954159">,</span>&nbsp;<span class="ident" id="2954161">m</span><span class="op" id="2954162">,</span>&nbsp;<span class="ident" id="2954164">i</span><span class="op" id="2954165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954169">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954181">p</span>&nbsp;<span class="op" id="2954183">:=</span>&nbsp;<span class="ident" id="2954186">a</span>&nbsp;<span class="op" id="2954188">+</span>&nbsp;<span class="ident" id="2954190">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954193">for</span>&nbsp;<span class="ident" id="2954197">i</span>&nbsp;<span class="op" id="2954199">!=</span>&nbsp;<span class="ident" id="2954202">j</span>&nbsp;<span class="op" id="2954204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2954208">if</span>&nbsp;<span class="ident" id="2954211">i</span>&nbsp;<span class="op" id="2954213">&gt;</span>&nbsp;<span class="ident" id="2954215">j</span>&nbsp;<span class="op" id="2954217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954222">swapRange</span><span class="op" id="2954231">(</span><span class="ident" id="2954232">data</span><span class="op" id="2954236">,</span>&nbsp;<span class="ident" id="2954238">p</span><span class="op" id="2954239">-</span><span class="ident" id="2954240">i</span><span class="op" id="2954241">,</span>&nbsp;<span class="ident" id="2954243">p</span><span class="op" id="2954244">,</span>&nbsp;<span class="ident" id="2954246">j</span><span class="op" id="2954247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954252">i</span>&nbsp;<span class="op" id="2954254">-=</span>&nbsp;<span class="ident" id="2954257">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954261">}</span>&nbsp;<span class="keyword" id="2954263">else</span>&nbsp;<span class="op" id="2954268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954273">swapRange</span><span class="op" id="2954282">(</span><span class="ident" id="2954283">data</span><span class="op" id="2954287">,</span>&nbsp;<span class="ident" id="2954289">p</span><span class="op" id="2954290">-</span><span class="ident" id="2954291">i</span><span class="op" id="2954292">,</span>&nbsp;<span class="ident" id="2954294">p</span><span class="op" id="2954295">+</span><span class="ident" id="2954296">j</span><span class="op" id="2954297">-</span><span class="ident" id="2954298">i</span><span class="op" id="2954299">,</span>&nbsp;<span class="ident" id="2954301">i</span><span class="op" id="2954302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954307">j</span>&nbsp;<span class="op" id="2954309">-=</span>&nbsp;<span class="ident" id="2954312">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954319">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2954322">swapRange</span><span class="op" id="2954331">(</span><span class="ident" id="2954332">data</span><span class="op" id="2954336">,</span>&nbsp;<span class="ident" id="2954338">p</span><span class="op" id="2954339">-</span><span class="ident" id="2954340">i</span><span class="op" id="2954341">,</span>&nbsp;<span class="ident" id="2954343">p</span><span class="op" id="2954344">,</span>&nbsp;<span class="ident" id="2954346">i</span><span class="op" id="2954347">)</span><br>
<span class="lineno"></span><span class="op" id="2954349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2954352">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
