<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html" class="current">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5370310">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5370365">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5370419">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5370470">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="5370521">package</span>&nbsp;<span class="ident" id="5370529">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5370536">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="5370613">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="5370645">type</span>&nbsp;<span class="ident" id="5370650">Color</span>&nbsp;<span class="keyword" id="5370656">interface</span>&nbsp;<span class="op" id="5370666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5370669">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5370744">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5370820">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5370896">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5370910">RGBA</span><span class="op" id="5370914">(</span><span class="op" id="5370915">)</span>&nbsp;<span class="op" id="5370917">(</span><span class="ident" id="5370918">r</span><span class="op" id="5370919">,</span>&nbsp;<span class="ident" id="5370921">g</span><span class="op" id="5370922">,</span>&nbsp;<span class="ident" id="5370924">b</span><span class="op" id="5370925">,</span>&nbsp;<span class="ident" id="5370927">a</span>&nbsp;<span class="builtintype" id="5370929">uint32</span><span class="op" id="5370935">)</span><br>
<span class="lineno"></span><span class="op" id="5370937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5370940">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5371007">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="5371064">type</span>&nbsp;<span class="ident" id="5371069">RGBA</span>&nbsp;<span class="keyword" id="5371074">struct</span>&nbsp;<span class="op" id="5371081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371084">R</span><span class="op" id="5371085">,</span>&nbsp;<span class="ident" id="5371087">G</span><span class="op" id="5371088">,</span>&nbsp;<span class="ident" id="5371090">B</span><span class="op" id="5371091">,</span>&nbsp;<span class="ident" id="5371093">A</span>&nbsp;<span class="builtintype" id="5371095">uint8</span><br>
<span class="lineno"></span><span class="op" id="5371101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5371104">func</span>&nbsp;<span class="op" id="5371109">(</span><span class="ident" id="5371110">c</span>&nbsp;<span class="ident" id="5371112">RGBA</span><span class="op" id="5371116">)</span>&nbsp;<span class="ident" id="5371118">RGBA</span><span class="op" id="5371122">(</span><span class="op" id="5371123">)</span>&nbsp;<span class="op" id="5371125">(</span><span class="ident" id="5371126">r</span><span class="op" id="5371127">,</span>&nbsp;<span class="ident" id="5371129">g</span><span class="op" id="5371130">,</span>&nbsp;<span class="ident" id="5371132">b</span><span class="op" id="5371133">,</span>&nbsp;<span class="ident" id="5371135">a</span>&nbsp;<span class="builtintype" id="5371137">uint32</span><span class="op" id="5371143">)</span>&nbsp;<span class="op" id="5371145">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371148">r</span>&nbsp;<span class="op" id="5371150">=</span>&nbsp;<span class="builtintype" id="5371152">uint32</span><span class="op" id="5371158">(</span><span class="ident" id="5371159">c</span><span class="op" id="5371160">.</span><span class="ident" id="5371161">R</span><span class="op" id="5371162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371165">r</span>&nbsp;<span class="op" id="5371167">|=</span>&nbsp;<span class="ident" id="5371170">r</span>&nbsp;<span class="op" id="5371172">&lt;&lt;</span>&nbsp;<span class="num" id="5371175">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371178">g</span>&nbsp;<span class="op" id="5371180">=</span>&nbsp;<span class="builtintype" id="5371182">uint32</span><span class="op" id="5371188">(</span><span class="ident" id="5371189">c</span><span class="op" id="5371190">.</span><span class="ident" id="5371191">G</span><span class="op" id="5371192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371195">g</span>&nbsp;<span class="op" id="5371197">|=</span>&nbsp;<span class="ident" id="5371200">g</span>&nbsp;<span class="op" id="5371202">&lt;&lt;</span>&nbsp;<span class="num" id="5371205">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371208">b</span>&nbsp;<span class="op" id="5371210">=</span>&nbsp;<span class="builtintype" id="5371212">uint32</span><span class="op" id="5371218">(</span><span class="ident" id="5371219">c</span><span class="op" id="5371220">.</span><span class="ident" id="5371221">B</span><span class="op" id="5371222">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371225">b</span>&nbsp;<span class="op" id="5371227">|=</span>&nbsp;<span class="ident" id="5371230">b</span>&nbsp;<span class="op" id="5371232">&lt;&lt;</span>&nbsp;<span class="num" id="5371235">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371238">a</span>&nbsp;<span class="op" id="5371240">=</span>&nbsp;<span class="builtintype" id="5371242">uint32</span><span class="op" id="5371248">(</span><span class="ident" id="5371249">c</span><span class="op" id="5371250">.</span><span class="ident" id="5371251">A</span><span class="op" id="5371252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371255">a</span>&nbsp;<span class="op" id="5371257">|=</span>&nbsp;<span class="ident" id="5371260">a</span>&nbsp;<span class="op" id="5371262">&lt;&lt;</span>&nbsp;<span class="num" id="5371265">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5371268">return</span><br>
<span class="lineno"></span><span class="op" id="5371275">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5371278">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5371335">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5371393">type</span>&nbsp;<span class="ident" id="5371398">RGBA64</span>&nbsp;<span class="keyword" id="5371405">struct</span>&nbsp;<span class="op" id="5371412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371415">R</span><span class="op" id="5371416">,</span>&nbsp;<span class="ident" id="5371418">G</span><span class="op" id="5371419">,</span>&nbsp;<span class="ident" id="5371421">B</span><span class="op" id="5371422">,</span>&nbsp;<span class="ident" id="5371424">A</span>&nbsp;<span class="builtintype" id="5371426">uint16</span><br>
<span class="lineno">40</span><span class="op" id="5371433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5371436">func</span>&nbsp;<span class="op" id="5371441">(</span><span class="ident" id="5371442">c</span>&nbsp;<span class="ident" id="5371444">RGBA64</span><span class="op" id="5371450">)</span>&nbsp;<span class="ident" id="5371452">RGBA</span><span class="op" id="5371456">(</span><span class="op" id="5371457">)</span>&nbsp;<span class="op" id="5371459">(</span><span class="ident" id="5371460">r</span><span class="op" id="5371461">,</span>&nbsp;<span class="ident" id="5371463">g</span><span class="op" id="5371464">,</span>&nbsp;<span class="ident" id="5371466">b</span><span class="op" id="5371467">,</span>&nbsp;<span class="ident" id="5371469">a</span>&nbsp;<span class="builtintype" id="5371471">uint32</span><span class="op" id="5371477">)</span>&nbsp;<span class="op" id="5371479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5371482">return</span>&nbsp;<span class="builtintype" id="5371489">uint32</span><span class="op" id="5371495">(</span><span class="ident" id="5371496">c</span><span class="op" id="5371497">.</span><span class="ident" id="5371498">R</span><span class="op" id="5371499">)</span><span class="op" id="5371500">,</span>&nbsp;<span class="builtintype" id="5371502">uint32</span><span class="op" id="5371508">(</span><span class="ident" id="5371509">c</span><span class="op" id="5371510">.</span><span class="ident" id="5371511">G</span><span class="op" id="5371512">)</span><span class="op" id="5371513">,</span>&nbsp;<span class="builtintype" id="5371515">uint32</span><span class="op" id="5371521">(</span><span class="ident" id="5371522">c</span><span class="op" id="5371523">.</span><span class="ident" id="5371524">B</span><span class="op" id="5371525">)</span><span class="op" id="5371526">,</span>&nbsp;<span class="builtintype" id="5371528">uint32</span><span class="op" id="5371534">(</span><span class="ident" id="5371535">c</span><span class="op" id="5371536">.</span><span class="ident" id="5371537">A</span><span class="op" id="5371538">)</span><br>
<span class="lineno"></span><span class="op" id="5371540">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5371543">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5371603">type</span>&nbsp;<span class="ident" id="5371608">NRGBA</span>&nbsp;<span class="keyword" id="5371614">struct</span>&nbsp;<span class="op" id="5371621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371624">R</span><span class="op" id="5371625">,</span>&nbsp;<span class="ident" id="5371627">G</span><span class="op" id="5371628">,</span>&nbsp;<span class="ident" id="5371630">B</span><span class="op" id="5371631">,</span>&nbsp;<span class="ident" id="5371633">A</span>&nbsp;<span class="builtintype" id="5371635">uint8</span><br>
<span class="lineno"></span><span class="op" id="5371641">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5371644">func</span>&nbsp;<span class="op" id="5371649">(</span><span class="ident" id="5371650">c</span>&nbsp;<span class="ident" id="5371652">NRGBA</span><span class="op" id="5371657">)</span>&nbsp;<span class="ident" id="5371659">RGBA</span><span class="op" id="5371663">(</span><span class="op" id="5371664">)</span>&nbsp;<span class="op" id="5371666">(</span><span class="ident" id="5371667">r</span><span class="op" id="5371668">,</span>&nbsp;<span class="ident" id="5371670">g</span><span class="op" id="5371671">,</span>&nbsp;<span class="ident" id="5371673">b</span><span class="op" id="5371674">,</span>&nbsp;<span class="ident" id="5371676">a</span>&nbsp;<span class="builtintype" id="5371678">uint32</span><span class="op" id="5371684">)</span>&nbsp;<span class="op" id="5371686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371689">r</span>&nbsp;<span class="op" id="5371691">=</span>&nbsp;<span class="builtintype" id="5371693">uint32</span><span class="op" id="5371699">(</span><span class="ident" id="5371700">c</span><span class="op" id="5371701">.</span><span class="ident" id="5371702">R</span><span class="op" id="5371703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371706">r</span>&nbsp;<span class="op" id="5371708">|=</span>&nbsp;<span class="ident" id="5371711">r</span>&nbsp;<span class="op" id="5371713">&lt;&lt;</span>&nbsp;<span class="num" id="5371716">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371719">r</span>&nbsp;<span class="op" id="5371721">*=</span>&nbsp;<span class="builtintype" id="5371724">uint32</span><span class="op" id="5371730">(</span><span class="ident" id="5371731">c</span><span class="op" id="5371732">.</span><span class="ident" id="5371733">A</span><span class="op" id="5371734">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371737">r</span>&nbsp;<span class="op" id="5371739">/=</span>&nbsp;<span class="num" id="5371742">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371748">g</span>&nbsp;<span class="op" id="5371750">=</span>&nbsp;<span class="builtintype" id="5371752">uint32</span><span class="op" id="5371758">(</span><span class="ident" id="5371759">c</span><span class="op" id="5371760">.</span><span class="ident" id="5371761">G</span><span class="op" id="5371762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371765">g</span>&nbsp;<span class="op" id="5371767">|=</span>&nbsp;<span class="ident" id="5371770">g</span>&nbsp;<span class="op" id="5371772">&lt;&lt;</span>&nbsp;<span class="num" id="5371775">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371778">g</span>&nbsp;<span class="op" id="5371780">*=</span>&nbsp;<span class="builtintype" id="5371783">uint32</span><span class="op" id="5371789">(</span><span class="ident" id="5371790">c</span><span class="op" id="5371791">.</span><span class="ident" id="5371792">A</span><span class="op" id="5371793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371796">g</span>&nbsp;<span class="op" id="5371798">/=</span>&nbsp;<span class="num" id="5371801">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371807">b</span>&nbsp;<span class="op" id="5371809">=</span>&nbsp;<span class="builtintype" id="5371811">uint32</span><span class="op" id="5371817">(</span><span class="ident" id="5371818">c</span><span class="op" id="5371819">.</span><span class="ident" id="5371820">B</span><span class="op" id="5371821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371824">b</span>&nbsp;<span class="op" id="5371826">|=</span>&nbsp;<span class="ident" id="5371829">b</span>&nbsp;<span class="op" id="5371831">&lt;&lt;</span>&nbsp;<span class="num" id="5371834">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371837">b</span>&nbsp;<span class="op" id="5371839">*=</span>&nbsp;<span class="builtintype" id="5371842">uint32</span><span class="op" id="5371848">(</span><span class="ident" id="5371849">c</span><span class="op" id="5371850">.</span><span class="ident" id="5371851">A</span><span class="op" id="5371852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371855">b</span>&nbsp;<span class="op" id="5371857">/=</span>&nbsp;<span class="num" id="5371860">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371866">a</span>&nbsp;<span class="op" id="5371868">=</span>&nbsp;<span class="builtintype" id="5371870">uint32</span><span class="op" id="5371876">(</span><span class="ident" id="5371877">c</span><span class="op" id="5371878">.</span><span class="ident" id="5371879">A</span><span class="op" id="5371880">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5371883">a</span>&nbsp;<span class="op" id="5371885">|=</span>&nbsp;<span class="ident" id="5371888">a</span>&nbsp;<span class="op" id="5371890">&lt;&lt;</span>&nbsp;<span class="num" id="5371893">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5371896">return</span><br>
<span class="lineno"></span><span class="op" id="5371903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5371906">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="5371968">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5372026">type</span>&nbsp;<span class="ident" id="5372031">NRGBA64</span>&nbsp;<span class="keyword" id="5372039">struct</span>&nbsp;<span class="op" id="5372046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372049">R</span><span class="op" id="5372050">,</span>&nbsp;<span class="ident" id="5372052">G</span><span class="op" id="5372053">,</span>&nbsp;<span class="ident" id="5372055">B</span><span class="op" id="5372056">,</span>&nbsp;<span class="ident" id="5372058">A</span>&nbsp;<span class="builtintype" id="5372060">uint16</span><br>
<span class="lineno"></span><span class="op" id="5372067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="5372070">func</span>&nbsp;<span class="op" id="5372075">(</span><span class="ident" id="5372076">c</span>&nbsp;<span class="ident" id="5372078">NRGBA64</span><span class="op" id="5372085">)</span>&nbsp;<span class="ident" id="5372087">RGBA</span><span class="op" id="5372091">(</span><span class="op" id="5372092">)</span>&nbsp;<span class="op" id="5372094">(</span><span class="ident" id="5372095">r</span><span class="op" id="5372096">,</span>&nbsp;<span class="ident" id="5372098">g</span><span class="op" id="5372099">,</span>&nbsp;<span class="ident" id="5372101">b</span><span class="op" id="5372102">,</span>&nbsp;<span class="ident" id="5372104">a</span>&nbsp;<span class="builtintype" id="5372106">uint32</span><span class="op" id="5372112">)</span>&nbsp;<span class="op" id="5372114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372117">r</span>&nbsp;<span class="op" id="5372119">=</span>&nbsp;<span class="builtintype" id="5372121">uint32</span><span class="op" id="5372127">(</span><span class="ident" id="5372128">c</span><span class="op" id="5372129">.</span><span class="ident" id="5372130">R</span><span class="op" id="5372131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372134">r</span>&nbsp;<span class="op" id="5372136">*=</span>&nbsp;<span class="builtintype" id="5372139">uint32</span><span class="op" id="5372145">(</span><span class="ident" id="5372146">c</span><span class="op" id="5372147">.</span><span class="ident" id="5372148">A</span><span class="op" id="5372149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372152">r</span>&nbsp;<span class="op" id="5372154">/=</span>&nbsp;<span class="num" id="5372157">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372165">g</span>&nbsp;<span class="op" id="5372167">=</span>&nbsp;<span class="builtintype" id="5372169">uint32</span><span class="op" id="5372175">(</span><span class="ident" id="5372176">c</span><span class="op" id="5372177">.</span><span class="ident" id="5372178">G</span><span class="op" id="5372179">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372182">g</span>&nbsp;<span class="op" id="5372184">*=</span>&nbsp;<span class="builtintype" id="5372187">uint32</span><span class="op" id="5372193">(</span><span class="ident" id="5372194">c</span><span class="op" id="5372195">.</span><span class="ident" id="5372196">A</span><span class="op" id="5372197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372200">g</span>&nbsp;<span class="op" id="5372202">/=</span>&nbsp;<span class="num" id="5372205">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372213">b</span>&nbsp;<span class="op" id="5372215">=</span>&nbsp;<span class="builtintype" id="5372217">uint32</span><span class="op" id="5372223">(</span><span class="ident" id="5372224">c</span><span class="op" id="5372225">.</span><span class="ident" id="5372226">B</span><span class="op" id="5372227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372230">b</span>&nbsp;<span class="op" id="5372232">*=</span>&nbsp;<span class="builtintype" id="5372235">uint32</span><span class="op" id="5372241">(</span><span class="ident" id="5372242">c</span><span class="op" id="5372243">.</span><span class="ident" id="5372244">A</span><span class="op" id="5372245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372248">b</span>&nbsp;<span class="op" id="5372250">/=</span>&nbsp;<span class="num" id="5372253">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372261">a</span>&nbsp;<span class="op" id="5372263">=</span>&nbsp;<span class="builtintype" id="5372265">uint32</span><span class="op" id="5372271">(</span><span class="ident" id="5372272">c</span><span class="op" id="5372273">.</span><span class="ident" id="5372274">A</span><span class="op" id="5372275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5372278">return</span><br>
<span class="lineno"></span><span class="op" id="5372285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5372288">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="5372330">type</span>&nbsp;<span class="ident" id="5372335">Alpha</span>&nbsp;<span class="keyword" id="5372341">struct</span>&nbsp;<span class="op" id="5372348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372351">A</span>&nbsp;<span class="builtintype" id="5372353">uint8</span><br>
<span class="lineno"></span><span class="op" id="5372359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5372362">func</span>&nbsp;<span class="op" id="5372367">(</span><span class="ident" id="5372368">c</span>&nbsp;<span class="ident" id="5372370">Alpha</span><span class="op" id="5372375">)</span>&nbsp;<span class="ident" id="5372377">RGBA</span><span class="op" id="5372381">(</span><span class="op" id="5372382">)</span>&nbsp;<span class="op" id="5372384">(</span><span class="ident" id="5372385">r</span><span class="op" id="5372386">,</span>&nbsp;<span class="ident" id="5372388">g</span><span class="op" id="5372389">,</span>&nbsp;<span class="ident" id="5372391">b</span><span class="op" id="5372392">,</span>&nbsp;<span class="ident" id="5372394">a</span>&nbsp;<span class="builtintype" id="5372396">uint32</span><span class="op" id="5372402">)</span>&nbsp;<span class="op" id="5372404">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372407">a</span>&nbsp;<span class="op" id="5372409">=</span>&nbsp;<span class="builtintype" id="5372411">uint32</span><span class="op" id="5372417">(</span><span class="ident" id="5372418">c</span><span class="op" id="5372419">.</span><span class="ident" id="5372420">A</span><span class="op" id="5372421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372424">a</span>&nbsp;<span class="op" id="5372426">|=</span>&nbsp;<span class="ident" id="5372429">a</span>&nbsp;<span class="op" id="5372431">&lt;&lt;</span>&nbsp;<span class="num" id="5372434">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5372437">return</span>&nbsp;<span class="ident" id="5372444">a</span><span class="op" id="5372445">,</span>&nbsp;<span class="ident" id="5372447">a</span><span class="op" id="5372448">,</span>&nbsp;<span class="ident" id="5372450">a</span><span class="op" id="5372451">,</span>&nbsp;<span class="ident" id="5372453">a</span><br>
<span class="lineno"></span><span class="op" id="5372455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5372458">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5372502">type</span>&nbsp;<span class="ident" id="5372507">Alpha16</span>&nbsp;<span class="keyword" id="5372515">struct</span>&nbsp;<span class="op" id="5372522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372525">A</span>&nbsp;<span class="builtintype" id="5372527">uint16</span><br>
<span class="lineno"></span><span class="op" id="5372534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5372537">func</span>&nbsp;<span class="op" id="5372542">(</span><span class="ident" id="5372543">c</span>&nbsp;<span class="ident" id="5372545">Alpha16</span><span class="op" id="5372552">)</span>&nbsp;<span class="ident" id="5372554">RGBA</span><span class="op" id="5372558">(</span><span class="op" id="5372559">)</span>&nbsp;<span class="op" id="5372561">(</span><span class="ident" id="5372562">r</span><span class="op" id="5372563">,</span>&nbsp;<span class="ident" id="5372565">g</span><span class="op" id="5372566">,</span>&nbsp;<span class="ident" id="5372568">b</span><span class="op" id="5372569">,</span>&nbsp;<span class="ident" id="5372571">a</span>&nbsp;<span class="builtintype" id="5372573">uint32</span><span class="op" id="5372579">)</span>&nbsp;<span class="op" id="5372581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372584">a</span>&nbsp;<span class="op" id="5372586">=</span>&nbsp;<span class="builtintype" id="5372588">uint32</span><span class="op" id="5372594">(</span><span class="ident" id="5372595">c</span><span class="op" id="5372596">.</span><span class="ident" id="5372597">A</span><span class="op" id="5372598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5372601">return</span>&nbsp;<span class="ident" id="5372608">a</span><span class="op" id="5372609">,</span>&nbsp;<span class="ident" id="5372611">a</span><span class="op" id="5372612">,</span>&nbsp;<span class="ident" id="5372614">a</span><span class="op" id="5372615">,</span>&nbsp;<span class="ident" id="5372617">a</span><br>
<span class="lineno"></span><span class="op" id="5372619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5372622">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5372667">type</span>&nbsp;<span class="ident" id="5372672">Gray</span>&nbsp;<span class="keyword" id="5372677">struct</span>&nbsp;<span class="op" id="5372684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372687">Y</span>&nbsp;<span class="builtintype" id="5372689">uint8</span><br>
<span class="lineno"></span><span class="op" id="5372695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5372698">func</span>&nbsp;<span class="op" id="5372703">(</span><span class="ident" id="5372704">c</span>&nbsp;<span class="ident" id="5372706">Gray</span><span class="op" id="5372710">)</span>&nbsp;<span class="ident" id="5372712">RGBA</span><span class="op" id="5372716">(</span><span class="op" id="5372717">)</span>&nbsp;<span class="op" id="5372719">(</span><span class="ident" id="5372720">r</span><span class="op" id="5372721">,</span>&nbsp;<span class="ident" id="5372723">g</span><span class="op" id="5372724">,</span>&nbsp;<span class="ident" id="5372726">b</span><span class="op" id="5372727">,</span>&nbsp;<span class="ident" id="5372729">a</span>&nbsp;<span class="builtintype" id="5372731">uint32</span><span class="op" id="5372737">)</span>&nbsp;<span class="op" id="5372739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372742">y</span>&nbsp;<span class="op" id="5372744">:=</span>&nbsp;<span class="builtintype" id="5372747">uint32</span><span class="op" id="5372753">(</span><span class="ident" id="5372754">c</span><span class="op" id="5372755">.</span><span class="ident" id="5372756">Y</span><span class="op" id="5372757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372760">y</span>&nbsp;<span class="op" id="5372762">|=</span>&nbsp;<span class="ident" id="5372765">y</span>&nbsp;<span class="op" id="5372767">&lt;&lt;</span>&nbsp;<span class="num" id="5372770">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5372773">return</span>&nbsp;<span class="ident" id="5372780">y</span><span class="op" id="5372781">,</span>&nbsp;<span class="ident" id="5372783">y</span><span class="op" id="5372784">,</span>&nbsp;<span class="ident" id="5372786">y</span><span class="op" id="5372787">,</span>&nbsp;<span class="num" id="5372789">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5372796">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5372799">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5372846">type</span>&nbsp;<span class="ident" id="5372851">Gray16</span>&nbsp;<span class="keyword" id="5372858">struct</span>&nbsp;<span class="op" id="5372865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372868">Y</span>&nbsp;<span class="builtintype" id="5372870">uint16</span><br>
<span class="lineno"></span><span class="op" id="5372877">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5372880">func</span>&nbsp;<span class="op" id="5372885">(</span><span class="ident" id="5372886">c</span>&nbsp;<span class="ident" id="5372888">Gray16</span><span class="op" id="5372894">)</span>&nbsp;<span class="ident" id="5372896">RGBA</span><span class="op" id="5372900">(</span><span class="op" id="5372901">)</span>&nbsp;<span class="op" id="5372903">(</span><span class="ident" id="5372904">r</span><span class="op" id="5372905">,</span>&nbsp;<span class="ident" id="5372907">g</span><span class="op" id="5372908">,</span>&nbsp;<span class="ident" id="5372910">b</span><span class="op" id="5372911">,</span>&nbsp;<span class="ident" id="5372913">a</span>&nbsp;<span class="builtintype" id="5372915">uint32</span><span class="op" id="5372921">)</span>&nbsp;<span class="op" id="5372923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5372926">y</span>&nbsp;<span class="op" id="5372928">:=</span>&nbsp;<span class="builtintype" id="5372931">uint32</span><span class="op" id="5372937">(</span><span class="ident" id="5372938">c</span><span class="op" id="5372939">.</span><span class="ident" id="5372940">Y</span><span class="op" id="5372941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5372944">return</span>&nbsp;<span class="ident" id="5372951">y</span><span class="op" id="5372952">,</span>&nbsp;<span class="ident" id="5372954">y</span><span class="op" id="5372955">,</span>&nbsp;<span class="ident" id="5372957">y</span><span class="op" id="5372958">,</span>&nbsp;<span class="num" id="5372960">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5372967">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5372970">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5373049">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="5373066">type</span>&nbsp;<span class="ident" id="5373071">Model</span>&nbsp;<span class="keyword" id="5373077">interface</span>&nbsp;<span class="op" id="5373087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373090">Convert</span><span class="op" id="5373097">(</span><span class="ident" id="5373098">c</span>&nbsp;<span class="ident" id="5373100">Color</span><span class="op" id="5373105">)</span>&nbsp;<span class="ident" id="5373107">Color</span><br>
<span class="lineno">135</span><span class="op" id="5373113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5373116">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="5373189">func</span>&nbsp;<span class="ident" id="5373194">ModelFunc</span><span class="op" id="5373203">(</span><span class="ident" id="5373204">f</span>&nbsp;<span class="keyword" id="5373206">func</span><span class="op" id="5373210">(</span><span class="ident" id="5373211">Color</span><span class="op" id="5373216">)</span>&nbsp;<span class="ident" id="5373218">Color</span><span class="op" id="5373223">)</span>&nbsp;<span class="ident" id="5373225">Model</span>&nbsp;<span class="op" id="5373231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5373234">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5373283">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5373332">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5373382">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5373432">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5373462">return</span>&nbsp;<span class="op" id="5373469">&amp;</span><span class="ident" id="5373470">modelFunc</span><span class="op" id="5373479">{</span><span class="ident" id="5373480">f</span><span class="op" id="5373481">}</span><br>
<span class="lineno">145</span><span class="op" id="5373483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5373486">type</span>&nbsp;<span class="ident" id="5373491">modelFunc</span>&nbsp;<span class="keyword" id="5373501">struct</span>&nbsp;<span class="op" id="5373508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373511">f</span>&nbsp;<span class="keyword" id="5373513">func</span><span class="op" id="5373517">(</span><span class="ident" id="5373518">Color</span><span class="op" id="5373523">)</span>&nbsp;<span class="ident" id="5373525">Color</span><br>
<span class="lineno"></span><span class="op" id="5373531">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5373534">func</span>&nbsp;<span class="op" id="5373539">(</span><span class="ident" id="5373540">m</span>&nbsp;<span class="op" id="5373542">*</span><span class="ident" id="5373543">modelFunc</span><span class="op" id="5373552">)</span>&nbsp;<span class="ident" id="5373554">Convert</span><span class="op" id="5373561">(</span><span class="ident" id="5373562">c</span>&nbsp;<span class="ident" id="5373564">Color</span><span class="op" id="5373569">)</span>&nbsp;<span class="ident" id="5373571">Color</span>&nbsp;<span class="op" id="5373577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5373580">return</span>&nbsp;<span class="ident" id="5373587">m</span><span class="op" id="5373588">.</span><span class="ident" id="5373589">f</span><span class="op" id="5373590">(</span><span class="ident" id="5373591">c</span><span class="op" id="5373592">)</span><br>
<span class="lineno"></span><span class="op" id="5373594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5373597">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5373637">var</span>&nbsp;<span class="op" id="5373641">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373644">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373657">Model</span>&nbsp;<span class="op" id="5373663">=</span>&nbsp;<span class="ident" id="5373665">ModelFunc</span><span class="op" id="5373674">(</span><span class="ident" id="5373675">rgbaModel</span><span class="op" id="5373684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373687">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="5373700">Model</span>&nbsp;<span class="op" id="5373706">=</span>&nbsp;<span class="ident" id="5373708">ModelFunc</span><span class="op" id="5373717">(</span><span class="ident" id="5373718">rgba64Model</span><span class="op" id="5373729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373732">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5373745">Model</span>&nbsp;<span class="op" id="5373751">=</span>&nbsp;<span class="ident" id="5373753">ModelFunc</span><span class="op" id="5373762">(</span><span class="ident" id="5373763">nrgbaModel</span><span class="op" id="5373773">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373776">NRGBA64Model</span>&nbsp;<span class="ident" id="5373789">Model</span>&nbsp;<span class="op" id="5373795">=</span>&nbsp;<span class="ident" id="5373797">ModelFunc</span><span class="op" id="5373806">(</span><span class="ident" id="5373807">nrgba64Model</span><span class="op" id="5373819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373822">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5373835">Model</span>&nbsp;<span class="op" id="5373841">=</span>&nbsp;<span class="ident" id="5373843">ModelFunc</span><span class="op" id="5373852">(</span><span class="ident" id="5373853">alphaModel</span><span class="op" id="5373863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373866">Alpha16Model</span>&nbsp;<span class="ident" id="5373879">Model</span>&nbsp;<span class="op" id="5373885">=</span>&nbsp;<span class="ident" id="5373887">ModelFunc</span><span class="op" id="5373896">(</span><span class="ident" id="5373897">alpha16Model</span><span class="op" id="5373909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373912">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373925">Model</span>&nbsp;<span class="op" id="5373931">=</span>&nbsp;<span class="ident" id="5373933">ModelFunc</span><span class="op" id="5373942">(</span><span class="ident" id="5373943">grayModel</span><span class="op" id="5373952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5373955">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="5373968">Model</span>&nbsp;<span class="op" id="5373974">=</span>&nbsp;<span class="ident" id="5373976">ModelFunc</span><span class="op" id="5373985">(</span><span class="ident" id="5373986">gray16Model</span><span class="op" id="5373997">)</span><br>
<span class="lineno">165</span><span class="op" id="5373999">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5374002">func</span>&nbsp;<span class="ident" id="5374007">rgbaModel</span><span class="op" id="5374016">(</span><span class="ident" id="5374017">c</span>&nbsp;<span class="ident" id="5374019">Color</span><span class="op" id="5374024">)</span>&nbsp;<span class="ident" id="5374026">Color</span>&nbsp;<span class="op" id="5374032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374035">if</span>&nbsp;<span class="ident" id="5374038">_</span><span class="op" id="5374039">,</span>&nbsp;<span class="ident" id="5374041">ok</span>&nbsp;<span class="op" id="5374044">:=</span>&nbsp;<span class="ident" id="5374047">c</span><span class="op" id="5374048">.</span><span class="op" id="5374049">(</span><span class="ident" id="5374050">RGBA</span><span class="op" id="5374054">)</span><span class="op" id="5374055">;</span>&nbsp;<span class="ident" id="5374057">ok</span>&nbsp;<span class="op" id="5374060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374064">return</span>&nbsp;<span class="ident" id="5374071">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374077">r</span><span class="op" id="5374078">,</span>&nbsp;<span class="ident" id="5374080">g</span><span class="op" id="5374081">,</span>&nbsp;<span class="ident" id="5374083">b</span><span class="op" id="5374084">,</span>&nbsp;<span class="ident" id="5374086">a</span>&nbsp;<span class="op" id="5374088">:=</span>&nbsp;<span class="ident" id="5374091">c</span><span class="op" id="5374092">.</span><span class="ident" id="5374093">RGBA</span><span class="op" id="5374097">(</span><span class="op" id="5374098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374101">return</span>&nbsp;<span class="ident" id="5374108">RGBA</span><span class="op" id="5374112">{</span><span class="builtintype" id="5374113">uint8</span><span class="op" id="5374118">(</span><span class="ident" id="5374119">r</span>&nbsp;<span class="op" id="5374121">&gt;&gt;</span>&nbsp;<span class="num" id="5374124">8</span><span class="op" id="5374125">)</span><span class="op" id="5374126">,</span>&nbsp;<span class="builtintype" id="5374128">uint8</span><span class="op" id="5374133">(</span><span class="ident" id="5374134">g</span>&nbsp;<span class="op" id="5374136">&gt;&gt;</span>&nbsp;<span class="num" id="5374139">8</span><span class="op" id="5374140">)</span><span class="op" id="5374141">,</span>&nbsp;<span class="builtintype" id="5374143">uint8</span><span class="op" id="5374148">(</span><span class="ident" id="5374149">b</span>&nbsp;<span class="op" id="5374151">&gt;&gt;</span>&nbsp;<span class="num" id="5374154">8</span><span class="op" id="5374155">)</span><span class="op" id="5374156">,</span>&nbsp;<span class="builtintype" id="5374158">uint8</span><span class="op" id="5374163">(</span><span class="ident" id="5374164">a</span>&nbsp;<span class="op" id="5374166">&gt;&gt;</span>&nbsp;<span class="num" id="5374169">8</span><span class="op" id="5374170">)</span><span class="op" id="5374171">}</span><br>
<span class="lineno"></span><span class="op" id="5374173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5374176">func</span>&nbsp;<span class="ident" id="5374181">rgba64Model</span><span class="op" id="5374192">(</span><span class="ident" id="5374193">c</span>&nbsp;<span class="ident" id="5374195">Color</span><span class="op" id="5374200">)</span>&nbsp;<span class="ident" id="5374202">Color</span>&nbsp;<span class="op" id="5374208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374211">if</span>&nbsp;<span class="ident" id="5374214">_</span><span class="op" id="5374215">,</span>&nbsp;<span class="ident" id="5374217">ok</span>&nbsp;<span class="op" id="5374220">:=</span>&nbsp;<span class="ident" id="5374223">c</span><span class="op" id="5374224">.</span><span class="op" id="5374225">(</span><span class="ident" id="5374226">RGBA64</span><span class="op" id="5374232">)</span><span class="op" id="5374233">;</span>&nbsp;<span class="ident" id="5374235">ok</span>&nbsp;<span class="op" id="5374238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374242">return</span>&nbsp;<span class="ident" id="5374249">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374255">r</span><span class="op" id="5374256">,</span>&nbsp;<span class="ident" id="5374258">g</span><span class="op" id="5374259">,</span>&nbsp;<span class="ident" id="5374261">b</span><span class="op" id="5374262">,</span>&nbsp;<span class="ident" id="5374264">a</span>&nbsp;<span class="op" id="5374266">:=</span>&nbsp;<span class="ident" id="5374269">c</span><span class="op" id="5374270">.</span><span class="ident" id="5374271">RGBA</span><span class="op" id="5374275">(</span><span class="op" id="5374276">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374279">return</span>&nbsp;<span class="ident" id="5374286">RGBA64</span><span class="op" id="5374292">{</span><span class="builtintype" id="5374293">uint16</span><span class="op" id="5374299">(</span><span class="ident" id="5374300">r</span><span class="op" id="5374301">)</span><span class="op" id="5374302">,</span>&nbsp;<span class="builtintype" id="5374304">uint16</span><span class="op" id="5374310">(</span><span class="ident" id="5374311">g</span><span class="op" id="5374312">)</span><span class="op" id="5374313">,</span>&nbsp;<span class="builtintype" id="5374315">uint16</span><span class="op" id="5374321">(</span><span class="ident" id="5374322">b</span><span class="op" id="5374323">)</span><span class="op" id="5374324">,</span>&nbsp;<span class="builtintype" id="5374326">uint16</span><span class="op" id="5374332">(</span><span class="ident" id="5374333">a</span><span class="op" id="5374334">)</span><span class="op" id="5374335">}</span><br>
<span class="lineno"></span><span class="op" id="5374337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5374340">func</span>&nbsp;<span class="ident" id="5374345">nrgbaModel</span><span class="op" id="5374355">(</span><span class="ident" id="5374356">c</span>&nbsp;<span class="ident" id="5374358">Color</span><span class="op" id="5374363">)</span>&nbsp;<span class="ident" id="5374365">Color</span>&nbsp;<span class="op" id="5374371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374374">if</span>&nbsp;<span class="ident" id="5374377">_</span><span class="op" id="5374378">,</span>&nbsp;<span class="ident" id="5374380">ok</span>&nbsp;<span class="op" id="5374383">:=</span>&nbsp;<span class="ident" id="5374386">c</span><span class="op" id="5374387">.</span><span class="op" id="5374388">(</span><span class="ident" id="5374389">NRGBA</span><span class="op" id="5374394">)</span><span class="op" id="5374395">;</span>&nbsp;<span class="ident" id="5374397">ok</span>&nbsp;<span class="op" id="5374400">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374404">return</span>&nbsp;<span class="ident" id="5374411">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374417">r</span><span class="op" id="5374418">,</span>&nbsp;<span class="ident" id="5374420">g</span><span class="op" id="5374421">,</span>&nbsp;<span class="ident" id="5374423">b</span><span class="op" id="5374424">,</span>&nbsp;<span class="ident" id="5374426">a</span>&nbsp;<span class="op" id="5374428">:=</span>&nbsp;<span class="ident" id="5374431">c</span><span class="op" id="5374432">.</span><span class="ident" id="5374433">RGBA</span><span class="op" id="5374437">(</span><span class="op" id="5374438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374441">if</span>&nbsp;<span class="ident" id="5374444">a</span>&nbsp;<span class="op" id="5374446">==</span>&nbsp;<span class="num" id="5374449">0xffff</span>&nbsp;<span class="op" id="5374456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374460">return</span>&nbsp;<span class="ident" id="5374467">NRGBA</span><span class="op" id="5374472">{</span><span class="builtintype" id="5374473">uint8</span><span class="op" id="5374478">(</span><span class="ident" id="5374479">r</span>&nbsp;<span class="op" id="5374481">&gt;&gt;</span>&nbsp;<span class="num" id="5374484">8</span><span class="op" id="5374485">)</span><span class="op" id="5374486">,</span>&nbsp;<span class="builtintype" id="5374488">uint8</span><span class="op" id="5374493">(</span><span class="ident" id="5374494">g</span>&nbsp;<span class="op" id="5374496">&gt;&gt;</span>&nbsp;<span class="num" id="5374499">8</span><span class="op" id="5374500">)</span><span class="op" id="5374501">,</span>&nbsp;<span class="builtintype" id="5374503">uint8</span><span class="op" id="5374508">(</span><span class="ident" id="5374509">b</span>&nbsp;<span class="op" id="5374511">&gt;&gt;</span>&nbsp;<span class="num" id="5374514">8</span><span class="op" id="5374515">)</span><span class="op" id="5374516">,</span>&nbsp;<span class="num" id="5374518">0xff</span><span class="op" id="5374522">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374528">if</span>&nbsp;<span class="ident" id="5374531">a</span>&nbsp;<span class="op" id="5374533">==</span>&nbsp;<span class="num" id="5374536">0</span>&nbsp;<span class="op" id="5374538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374542">return</span>&nbsp;<span class="ident" id="5374549">NRGBA</span><span class="op" id="5374554">{</span><span class="num" id="5374555">0</span><span class="op" id="5374556">,</span>&nbsp;<span class="num" id="5374558">0</span><span class="op" id="5374559">,</span>&nbsp;<span class="num" id="5374561">0</span><span class="op" id="5374562">,</span>&nbsp;<span class="num" id="5374564">0</span><span class="op" id="5374565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5374571">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374672">r</span>&nbsp;<span class="op" id="5374674">=</span>&nbsp;<span class="op" id="5374676">(</span><span class="ident" id="5374677">r</span>&nbsp;<span class="op" id="5374679">*</span>&nbsp;<span class="num" id="5374681">0xffff</span><span class="op" id="5374687">)</span>&nbsp;<span class="op" id="5374689">/</span>&nbsp;<span class="ident" id="5374691">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374694">g</span>&nbsp;<span class="op" id="5374696">=</span>&nbsp;<span class="op" id="5374698">(</span><span class="ident" id="5374699">g</span>&nbsp;<span class="op" id="5374701">*</span>&nbsp;<span class="num" id="5374703">0xffff</span><span class="op" id="5374709">)</span>&nbsp;<span class="op" id="5374711">/</span>&nbsp;<span class="ident" id="5374713">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374716">b</span>&nbsp;<span class="op" id="5374718">=</span>&nbsp;<span class="op" id="5374720">(</span><span class="ident" id="5374721">b</span>&nbsp;<span class="op" id="5374723">*</span>&nbsp;<span class="num" id="5374725">0xffff</span><span class="op" id="5374731">)</span>&nbsp;<span class="op" id="5374733">/</span>&nbsp;<span class="ident" id="5374735">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374738">return</span>&nbsp;<span class="ident" id="5374745">NRGBA</span><span class="op" id="5374750">{</span><span class="builtintype" id="5374751">uint8</span><span class="op" id="5374756">(</span><span class="ident" id="5374757">r</span>&nbsp;<span class="op" id="5374759">&gt;&gt;</span>&nbsp;<span class="num" id="5374762">8</span><span class="op" id="5374763">)</span><span class="op" id="5374764">,</span>&nbsp;<span class="builtintype" id="5374766">uint8</span><span class="op" id="5374771">(</span><span class="ident" id="5374772">g</span>&nbsp;<span class="op" id="5374774">&gt;&gt;</span>&nbsp;<span class="num" id="5374777">8</span><span class="op" id="5374778">)</span><span class="op" id="5374779">,</span>&nbsp;<span class="builtintype" id="5374781">uint8</span><span class="op" id="5374786">(</span><span class="ident" id="5374787">b</span>&nbsp;<span class="op" id="5374789">&gt;&gt;</span>&nbsp;<span class="num" id="5374792">8</span><span class="op" id="5374793">)</span><span class="op" id="5374794">,</span>&nbsp;<span class="builtintype" id="5374796">uint8</span><span class="op" id="5374801">(</span><span class="ident" id="5374802">a</span>&nbsp;<span class="op" id="5374804">&gt;&gt;</span>&nbsp;<span class="num" id="5374807">8</span><span class="op" id="5374808">)</span><span class="op" id="5374809">}</span><br>
<span class="lineno"></span><span class="op" id="5374811">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5374814">func</span>&nbsp;<span class="ident" id="5374819">nrgba64Model</span><span class="op" id="5374831">(</span><span class="ident" id="5374832">c</span>&nbsp;<span class="ident" id="5374834">Color</span><span class="op" id="5374839">)</span>&nbsp;<span class="ident" id="5374841">Color</span>&nbsp;<span class="op" id="5374847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374850">if</span>&nbsp;<span class="ident" id="5374853">_</span><span class="op" id="5374854">,</span>&nbsp;<span class="ident" id="5374856">ok</span>&nbsp;<span class="op" id="5374859">:=</span>&nbsp;<span class="ident" id="5374862">c</span><span class="op" id="5374863">.</span><span class="op" id="5374864">(</span><span class="ident" id="5374865">NRGBA64</span><span class="op" id="5374872">)</span><span class="op" id="5374873">;</span>&nbsp;<span class="ident" id="5374875">ok</span>&nbsp;<span class="op" id="5374878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374882">return</span>&nbsp;<span class="ident" id="5374889">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374892">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5374895">r</span><span class="op" id="5374896">,</span>&nbsp;<span class="ident" id="5374898">g</span><span class="op" id="5374899">,</span>&nbsp;<span class="ident" id="5374901">b</span><span class="op" id="5374902">,</span>&nbsp;<span class="ident" id="5374904">a</span>&nbsp;<span class="op" id="5374906">:=</span>&nbsp;<span class="ident" id="5374909">c</span><span class="op" id="5374910">.</span><span class="ident" id="5374911">RGBA</span><span class="op" id="5374915">(</span><span class="op" id="5374916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374919">if</span>&nbsp;<span class="ident" id="5374922">a</span>&nbsp;<span class="op" id="5374924">==</span>&nbsp;<span class="num" id="5374927">0xffff</span>&nbsp;<span class="op" id="5374934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374938">return</span>&nbsp;<span class="ident" id="5374945">NRGBA64</span><span class="op" id="5374952">{</span><span class="builtintype" id="5374953">uint16</span><span class="op" id="5374959">(</span><span class="ident" id="5374960">r</span><span class="op" id="5374961">)</span><span class="op" id="5374962">,</span>&nbsp;<span class="builtintype" id="5374964">uint16</span><span class="op" id="5374970">(</span><span class="ident" id="5374971">g</span><span class="op" id="5374972">)</span><span class="op" id="5374973">,</span>&nbsp;<span class="builtintype" id="5374975">uint16</span><span class="op" id="5374981">(</span><span class="ident" id="5374982">b</span><span class="op" id="5374983">)</span><span class="op" id="5374984">,</span>&nbsp;<span class="num" id="5374986">0xffff</span><span class="op" id="5374992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5374995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5374998">if</span>&nbsp;<span class="ident" id="5375001">a</span>&nbsp;<span class="op" id="5375003">==</span>&nbsp;<span class="num" id="5375006">0</span>&nbsp;<span class="op" id="5375008">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375012">return</span>&nbsp;<span class="ident" id="5375019">NRGBA64</span><span class="op" id="5375026">{</span><span class="num" id="5375027">0</span><span class="op" id="5375028">,</span>&nbsp;<span class="num" id="5375030">0</span><span class="op" id="5375031">,</span>&nbsp;<span class="num" id="5375033">0</span><span class="op" id="5375034">,</span>&nbsp;<span class="num" id="5375036">0</span><span class="op" id="5375037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5375040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5375043">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375144">r</span>&nbsp;<span class="op" id="5375146">=</span>&nbsp;<span class="op" id="5375148">(</span><span class="ident" id="5375149">r</span>&nbsp;<span class="op" id="5375151">*</span>&nbsp;<span class="num" id="5375153">0xffff</span><span class="op" id="5375159">)</span>&nbsp;<span class="op" id="5375161">/</span>&nbsp;<span class="ident" id="5375163">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375166">g</span>&nbsp;<span class="op" id="5375168">=</span>&nbsp;<span class="op" id="5375170">(</span><span class="ident" id="5375171">g</span>&nbsp;<span class="op" id="5375173">*</span>&nbsp;<span class="num" id="5375175">0xffff</span><span class="op" id="5375181">)</span>&nbsp;<span class="op" id="5375183">/</span>&nbsp;<span class="ident" id="5375185">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375188">b</span>&nbsp;<span class="op" id="5375190">=</span>&nbsp;<span class="op" id="5375192">(</span><span class="ident" id="5375193">b</span>&nbsp;<span class="op" id="5375195">*</span>&nbsp;<span class="num" id="5375197">0xffff</span><span class="op" id="5375203">)</span>&nbsp;<span class="op" id="5375205">/</span>&nbsp;<span class="ident" id="5375207">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375210">return</span>&nbsp;<span class="ident" id="5375217">NRGBA64</span><span class="op" id="5375224">{</span><span class="builtintype" id="5375225">uint16</span><span class="op" id="5375231">(</span><span class="ident" id="5375232">r</span><span class="op" id="5375233">)</span><span class="op" id="5375234">,</span>&nbsp;<span class="builtintype" id="5375236">uint16</span><span class="op" id="5375242">(</span><span class="ident" id="5375243">g</span><span class="op" id="5375244">)</span><span class="op" id="5375245">,</span>&nbsp;<span class="builtintype" id="5375247">uint16</span><span class="op" id="5375253">(</span><span class="ident" id="5375254">b</span><span class="op" id="5375255">)</span><span class="op" id="5375256">,</span>&nbsp;<span class="builtintype" id="5375258">uint16</span><span class="op" id="5375264">(</span><span class="ident" id="5375265">a</span><span class="op" id="5375266">)</span><span class="op" id="5375267">}</span><br>
<span class="lineno"></span><span class="op" id="5375269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5375272">func</span>&nbsp;<span class="ident" id="5375277">alphaModel</span><span class="op" id="5375287">(</span><span class="ident" id="5375288">c</span>&nbsp;<span class="ident" id="5375290">Color</span><span class="op" id="5375295">)</span>&nbsp;<span class="ident" id="5375297">Color</span>&nbsp;<span class="op" id="5375303">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375306">if</span>&nbsp;<span class="ident" id="5375309">_</span><span class="op" id="5375310">,</span>&nbsp;<span class="ident" id="5375312">ok</span>&nbsp;<span class="op" id="5375315">:=</span>&nbsp;<span class="ident" id="5375318">c</span><span class="op" id="5375319">.</span><span class="op" id="5375320">(</span><span class="ident" id="5375321">Alpha</span><span class="op" id="5375326">)</span><span class="op" id="5375327">;</span>&nbsp;<span class="ident" id="5375329">ok</span>&nbsp;<span class="op" id="5375332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375336">return</span>&nbsp;<span class="ident" id="5375343">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5375346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375349">_</span><span class="op" id="5375350">,</span>&nbsp;<span class="ident" id="5375352">_</span><span class="op" id="5375353">,</span>&nbsp;<span class="ident" id="5375355">_</span><span class="op" id="5375356">,</span>&nbsp;<span class="ident" id="5375358">a</span>&nbsp;<span class="op" id="5375360">:=</span>&nbsp;<span class="ident" id="5375363">c</span><span class="op" id="5375364">.</span><span class="ident" id="5375365">RGBA</span><span class="op" id="5375369">(</span><span class="op" id="5375370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375373">return</span>&nbsp;<span class="ident" id="5375380">Alpha</span><span class="op" id="5375385">{</span><span class="builtintype" id="5375386">uint8</span><span class="op" id="5375391">(</span><span class="ident" id="5375392">a</span>&nbsp;<span class="op" id="5375394">&gt;&gt;</span>&nbsp;<span class="num" id="5375397">8</span><span class="op" id="5375398">)</span><span class="op" id="5375399">}</span><br>
<span class="lineno">225</span><span class="op" id="5375401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5375404">func</span>&nbsp;<span class="ident" id="5375409">alpha16Model</span><span class="op" id="5375421">(</span><span class="ident" id="5375422">c</span>&nbsp;<span class="ident" id="5375424">Color</span><span class="op" id="5375429">)</span>&nbsp;<span class="ident" id="5375431">Color</span>&nbsp;<span class="op" id="5375437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375440">if</span>&nbsp;<span class="ident" id="5375443">_</span><span class="op" id="5375444">,</span>&nbsp;<span class="ident" id="5375446">ok</span>&nbsp;<span class="op" id="5375449">:=</span>&nbsp;<span class="ident" id="5375452">c</span><span class="op" id="5375453">.</span><span class="op" id="5375454">(</span><span class="ident" id="5375455">Alpha16</span><span class="op" id="5375462">)</span><span class="op" id="5375463">;</span>&nbsp;<span class="ident" id="5375465">ok</span>&nbsp;<span class="op" id="5375468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375472">return</span>&nbsp;<span class="ident" id="5375479">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5375482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375485">_</span><span class="op" id="5375486">,</span>&nbsp;<span class="ident" id="5375488">_</span><span class="op" id="5375489">,</span>&nbsp;<span class="ident" id="5375491">_</span><span class="op" id="5375492">,</span>&nbsp;<span class="ident" id="5375494">a</span>&nbsp;<span class="op" id="5375496">:=</span>&nbsp;<span class="ident" id="5375499">c</span><span class="op" id="5375500">.</span><span class="ident" id="5375501">RGBA</span><span class="op" id="5375505">(</span><span class="op" id="5375506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375509">return</span>&nbsp;<span class="ident" id="5375516">Alpha16</span><span class="op" id="5375523">{</span><span class="builtintype" id="5375524">uint16</span><span class="op" id="5375530">(</span><span class="ident" id="5375531">a</span><span class="op" id="5375532">)</span><span class="op" id="5375533">}</span><br>
<span class="lineno"></span><span class="op" id="5375535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5375538">func</span>&nbsp;<span class="ident" id="5375543">grayModel</span><span class="op" id="5375552">(</span><span class="ident" id="5375553">c</span>&nbsp;<span class="ident" id="5375555">Color</span><span class="op" id="5375560">)</span>&nbsp;<span class="ident" id="5375562">Color</span>&nbsp;<span class="op" id="5375568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375571">if</span>&nbsp;<span class="ident" id="5375574">_</span><span class="op" id="5375575">,</span>&nbsp;<span class="ident" id="5375577">ok</span>&nbsp;<span class="op" id="5375580">:=</span>&nbsp;<span class="ident" id="5375583">c</span><span class="op" id="5375584">.</span><span class="op" id="5375585">(</span><span class="ident" id="5375586">Gray</span><span class="op" id="5375590">)</span><span class="op" id="5375591">;</span>&nbsp;<span class="ident" id="5375593">ok</span>&nbsp;<span class="op" id="5375596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375600">return</span>&nbsp;<span class="ident" id="5375607">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5375610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375613">r</span><span class="op" id="5375614">,</span>&nbsp;<span class="ident" id="5375616">g</span><span class="op" id="5375617">,</span>&nbsp;<span class="ident" id="5375619">b</span><span class="op" id="5375620">,</span>&nbsp;<span class="ident" id="5375622">_</span>&nbsp;<span class="op" id="5375624">:=</span>&nbsp;<span class="ident" id="5375627">c</span><span class="op" id="5375628">.</span><span class="ident" id="5375629">RGBA</span><span class="op" id="5375633">(</span><span class="op" id="5375634">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375637">y</span>&nbsp;<span class="op" id="5375639">:=</span>&nbsp;<span class="op" id="5375642">(</span><span class="num" id="5375643">299</span><span class="op" id="5375646">*</span><span class="ident" id="5375647">r</span>&nbsp;<span class="op" id="5375649">+</span>&nbsp;<span class="num" id="5375651">587</span><span class="op" id="5375654">*</span><span class="ident" id="5375655">g</span>&nbsp;<span class="op" id="5375657">+</span>&nbsp;<span class="num" id="5375659">114</span><span class="op" id="5375662">*</span><span class="ident" id="5375663">b</span>&nbsp;<span class="op" id="5375665">+</span>&nbsp;<span class="num" id="5375667">500</span><span class="op" id="5375670">)</span>&nbsp;<span class="op" id="5375672">/</span>&nbsp;<span class="num" id="5375674">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375680">return</span>&nbsp;<span class="ident" id="5375687">Gray</span><span class="op" id="5375691">{</span><span class="builtintype" id="5375692">uint8</span><span class="op" id="5375697">(</span><span class="ident" id="5375698">y</span>&nbsp;<span class="op" id="5375700">&gt;&gt;</span>&nbsp;<span class="num" id="5375703">8</span><span class="op" id="5375704">)</span><span class="op" id="5375705">}</span><br>
<span class="lineno"></span><span class="op" id="5375707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5375710">func</span>&nbsp;<span class="ident" id="5375715">gray16Model</span><span class="op" id="5375726">(</span><span class="ident" id="5375727">c</span>&nbsp;<span class="ident" id="5375729">Color</span><span class="op" id="5375734">)</span>&nbsp;<span class="ident" id="5375736">Color</span>&nbsp;<span class="op" id="5375742">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375745">if</span>&nbsp;<span class="ident" id="5375748">_</span><span class="op" id="5375749">,</span>&nbsp;<span class="ident" id="5375751">ok</span>&nbsp;<span class="op" id="5375754">:=</span>&nbsp;<span class="ident" id="5375757">c</span><span class="op" id="5375758">.</span><span class="op" id="5375759">(</span><span class="ident" id="5375760">Gray16</span><span class="op" id="5375766">)</span><span class="op" id="5375767">;</span>&nbsp;<span class="ident" id="5375769">ok</span>&nbsp;<span class="op" id="5375772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375776">return</span>&nbsp;<span class="ident" id="5375783">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5375786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375789">r</span><span class="op" id="5375790">,</span>&nbsp;<span class="ident" id="5375792">g</span><span class="op" id="5375793">,</span>&nbsp;<span class="ident" id="5375795">b</span><span class="op" id="5375796">,</span>&nbsp;<span class="ident" id="5375798">_</span>&nbsp;<span class="op" id="5375800">:=</span>&nbsp;<span class="ident" id="5375803">c</span><span class="op" id="5375804">.</span><span class="ident" id="5375805">RGBA</span><span class="op" id="5375809">(</span><span class="op" id="5375810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5375813">y</span>&nbsp;<span class="op" id="5375815">:=</span>&nbsp;<span class="op" id="5375818">(</span><span class="num" id="5375819">299</span><span class="op" id="5375822">*</span><span class="ident" id="5375823">r</span>&nbsp;<span class="op" id="5375825">+</span>&nbsp;<span class="num" id="5375827">587</span><span class="op" id="5375830">*</span><span class="ident" id="5375831">g</span>&nbsp;<span class="op" id="5375833">+</span>&nbsp;<span class="num" id="5375835">114</span><span class="op" id="5375838">*</span><span class="ident" id="5375839">b</span>&nbsp;<span class="op" id="5375841">+</span>&nbsp;<span class="num" id="5375843">500</span><span class="op" id="5375846">)</span>&nbsp;<span class="op" id="5375848">/</span>&nbsp;<span class="num" id="5375850">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5375856">return</span>&nbsp;<span class="ident" id="5375863">Gray16</span><span class="op" id="5375869">{</span><span class="builtintype" id="5375870">uint16</span><span class="op" id="5375876">(</span><span class="ident" id="5375877">y</span><span class="op" id="5375878">)</span><span class="op" id="5375879">}</span><br>
<span class="lineno"></span><span class="op" id="5375881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5375884">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5375919">type</span>&nbsp;<span class="ident" id="5375924">Palette</span>&nbsp;<span class="op" id="5375932">[</span><span class="op" id="5375933">]</span><span class="ident" id="5375934">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="5375941">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5376017">func</span>&nbsp;<span class="op" id="5376022">(</span><span class="ident" id="5376023">p</span>&nbsp;<span class="ident" id="5376025">Palette</span><span class="op" id="5376032">)</span>&nbsp;<span class="ident" id="5376034">Convert</span><span class="op" id="5376041">(</span><span class="ident" id="5376042">c</span>&nbsp;<span class="ident" id="5376044">Color</span><span class="op" id="5376049">)</span>&nbsp;<span class="ident" id="5376051">Color</span>&nbsp;<span class="op" id="5376057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376060">if</span>&nbsp;<span class="builtinfunc" id="5376063">len</span><span class="op" id="5376066">(</span><span class="ident" id="5376067">p</span><span class="op" id="5376068">)</span>&nbsp;<span class="op" id="5376070">==</span>&nbsp;<span class="num" id="5376073">0</span>&nbsp;<span class="op" id="5376075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376079">return</span>&nbsp;<span class="builtintype" id="5376086">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376094">return</span>&nbsp;<span class="ident" id="5376101">p</span><span class="op" id="5376102">[</span><span class="ident" id="5376103">p</span><span class="op" id="5376104">.</span><span class="ident" id="5376105">Index</span><span class="op" id="5376110">(</span><span class="ident" id="5376111">c</span><span class="op" id="5376112">)</span><span class="op" id="5376113">]</span><br>
<span class="lineno"></span><span class="op" id="5376115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5376118">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="5376192">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5376208">func</span>&nbsp;<span class="op" id="5376213">(</span><span class="ident" id="5376214">p</span>&nbsp;<span class="ident" id="5376216">Palette</span><span class="op" id="5376223">)</span>&nbsp;<span class="ident" id="5376225">Index</span><span class="op" id="5376230">(</span><span class="ident" id="5376231">c</span>&nbsp;<span class="ident" id="5376233">Color</span><span class="op" id="5376238">)</span>&nbsp;<span class="builtintype" id="5376240">int</span>&nbsp;<span class="op" id="5376244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376247">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376314">cr</span><span class="op" id="5376316">,</span>&nbsp;<span class="ident" id="5376318">cg</span><span class="op" id="5376320">,</span>&nbsp;<span class="ident" id="5376322">cb</span><span class="op" id="5376324">,</span>&nbsp;<span class="ident" id="5376326">_</span>&nbsp;<span class="op" id="5376328">:=</span>&nbsp;<span class="ident" id="5376331">c</span><span class="op" id="5376332">.</span><span class="ident" id="5376333">RGBA</span><span class="op" id="5376337">(</span><span class="op" id="5376338">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376341">ret</span><span class="op" id="5376344">,</span>&nbsp;<span class="ident" id="5376346">bestSSD</span>&nbsp;<span class="op" id="5376354">:=</span>&nbsp;<span class="num" id="5376357">0</span><span class="op" id="5376358">,</span>&nbsp;<span class="builtintype" id="5376360">uint32</span><span class="op" id="5376366">(</span><span class="num" id="5376367">1</span><span class="op" id="5376368">&lt;&lt;</span><span class="num" id="5376370">32</span><span class="op" id="5376372">-</span><span class="num" id="5376373">1</span><span class="op" id="5376374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376377">for</span>&nbsp;<span class="ident" id="5376381">i</span><span class="op" id="5376382">,</span>&nbsp;<span class="ident" id="5376384">v</span>&nbsp;<span class="op" id="5376386">:=</span>&nbsp;<span class="keyword" id="5376389">range</span>&nbsp;<span class="ident" id="5376395">p</span>&nbsp;<span class="op" id="5376397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376401">vr</span><span class="op" id="5376403">,</span>&nbsp;<span class="ident" id="5376405">vg</span><span class="op" id="5376407">,</span>&nbsp;<span class="ident" id="5376409">vb</span><span class="op" id="5376411">,</span>&nbsp;<span class="ident" id="5376413">_</span>&nbsp;<span class="op" id="5376415">:=</span>&nbsp;<span class="ident" id="5376418">v</span><span class="op" id="5376419">.</span><span class="ident" id="5376420">RGBA</span><span class="op" id="5376424">(</span><span class="op" id="5376425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376429">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5376490">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376519">delta</span>&nbsp;<span class="op" id="5376525">:=</span>&nbsp;<span class="op" id="5376528">(</span><span class="builtintype" id="5376529">int32</span><span class="op" id="5376534">(</span><span class="ident" id="5376535">cr</span><span class="op" id="5376537">)</span>&nbsp;<span class="op" id="5376539">-</span>&nbsp;<span class="builtintype" id="5376541">int32</span><span class="op" id="5376546">(</span><span class="ident" id="5376547">vr</span><span class="op" id="5376549">)</span><span class="op" id="5376550">)</span>&nbsp;<span class="op" id="5376552">&gt;&gt;</span>&nbsp;<span class="num" id="5376555">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376559">ssd</span>&nbsp;<span class="op" id="5376563">:=</span>&nbsp;<span class="builtintype" id="5376566">uint32</span><span class="op" id="5376572">(</span><span class="ident" id="5376573">delta</span>&nbsp;<span class="op" id="5376579">*</span>&nbsp;<span class="ident" id="5376581">delta</span><span class="op" id="5376586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376590">delta</span>&nbsp;<span class="op" id="5376596">=</span>&nbsp;<span class="op" id="5376598">(</span><span class="builtintype" id="5376599">int32</span><span class="op" id="5376604">(</span><span class="ident" id="5376605">cg</span><span class="op" id="5376607">)</span>&nbsp;<span class="op" id="5376609">-</span>&nbsp;<span class="builtintype" id="5376611">int32</span><span class="op" id="5376616">(</span><span class="ident" id="5376617">vg</span><span class="op" id="5376619">)</span><span class="op" id="5376620">)</span>&nbsp;<span class="op" id="5376622">&gt;&gt;</span>&nbsp;<span class="num" id="5376625">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376629">ssd</span>&nbsp;<span class="op" id="5376633">+=</span>&nbsp;<span class="builtintype" id="5376636">uint32</span><span class="op" id="5376642">(</span><span class="ident" id="5376643">delta</span>&nbsp;<span class="op" id="5376649">*</span>&nbsp;<span class="ident" id="5376651">delta</span><span class="op" id="5376656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376660">delta</span>&nbsp;<span class="op" id="5376666">=</span>&nbsp;<span class="op" id="5376668">(</span><span class="builtintype" id="5376669">int32</span><span class="op" id="5376674">(</span><span class="ident" id="5376675">cb</span><span class="op" id="5376677">)</span>&nbsp;<span class="op" id="5376679">-</span>&nbsp;<span class="builtintype" id="5376681">int32</span><span class="op" id="5376686">(</span><span class="ident" id="5376687">vb</span><span class="op" id="5376689">)</span><span class="op" id="5376690">)</span>&nbsp;<span class="op" id="5376692">&gt;&gt;</span>&nbsp;<span class="num" id="5376695">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376699">ssd</span>&nbsp;<span class="op" id="5376703">+=</span>&nbsp;<span class="builtintype" id="5376706">uint32</span><span class="op" id="5376712">(</span><span class="ident" id="5376713">delta</span>&nbsp;<span class="op" id="5376719">*</span>&nbsp;<span class="ident" id="5376721">delta</span><span class="op" id="5376726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376730">if</span>&nbsp;<span class="ident" id="5376733">ssd</span>&nbsp;<span class="op" id="5376737">&lt;</span>&nbsp;<span class="ident" id="5376739">bestSSD</span>&nbsp;<span class="op" id="5376747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376752">if</span>&nbsp;<span class="ident" id="5376755">ssd</span>&nbsp;<span class="op" id="5376759">==</span>&nbsp;<span class="num" id="5376762">0</span>&nbsp;<span class="op" id="5376764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376770">return</span>&nbsp;<span class="ident" id="5376777">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376782">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376787">ret</span><span class="op" id="5376790">,</span>&nbsp;<span class="ident" id="5376792">bestSSD</span>&nbsp;<span class="op" id="5376800">=</span>&nbsp;<span class="ident" id="5376802">i</span><span class="op" id="5376803">,</span>&nbsp;<span class="ident" id="5376805">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5376817">return</span>&nbsp;<span class="ident" id="5376824">ret</span><br>
<span class="lineno"></span><span class="op" id="5376828">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5376831">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5376851">var</span>&nbsp;<span class="op" id="5376855">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376858">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376870">=</span>&nbsp;<span class="ident" id="5376872">Gray16</span><span class="op" id="5376878">{</span><span class="num" id="5376879">0</span><span class="op" id="5376880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376883">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376895">=</span>&nbsp;<span class="ident" id="5376897">Gray16</span><span class="op" id="5376903">{</span><span class="num" id="5376904">0xffff</span><span class="op" id="5376910">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376913">Transparent</span>&nbsp;<span class="op" id="5376925">=</span>&nbsp;<span class="ident" id="5376927">Alpha16</span><span class="op" id="5376934">{</span><span class="num" id="5376935">0</span><span class="op" id="5376936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5376939">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5376951">=</span>&nbsp;<span class="ident" id="5376953">Alpha16</span><span class="op" id="5376960">{</span><span class="num" id="5376961">0xffff</span><span class="op" id="5376967">}</span><br>
<span class="lineno"></span><span class="op" id="5376969">)</span>
</div>
</body>
</html>
