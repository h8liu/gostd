<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4352414">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4352469">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4352523">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4352574">//go:generate&nbsp;go&nbsp;run&nbsp;gen.go&nbsp;-output&nbsp;fixedhuff.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4352624">//&nbsp;Package&nbsp;flate&nbsp;implements&nbsp;the&nbsp;DEFLATE&nbsp;compressed&nbsp;data&nbsp;format,&nbsp;described&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4352701">//&nbsp;RFC&nbsp;1951.&nbsp;&nbsp;The&nbsp;gzip&nbsp;and&nbsp;zlib&nbsp;packages&nbsp;implement&nbsp;access&nbsp;to&nbsp;DEFLATE-based&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="4352781">//&nbsp;formats.</span><br>
<span class="lineno">10</span><span class="keyword" id="4352793">package</span>&nbsp;<span class="ident" id="4352801">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4352808">import</span>&nbsp;<span class="op" id="4352815">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4352818">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4352827">&#34;io&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4352833">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="4352843">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4352846">const</span>&nbsp;<span class="op" id="4352852">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4352855">maxCodeLen</span>&nbsp;<span class="op" id="4352866">=</span>&nbsp;<span class="num" id="4352868">16</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4352874">//&nbsp;max&nbsp;length&nbsp;of&nbsp;Huffman&nbsp;code</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4352905">maxHist</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4352916">=</span>&nbsp;<span class="num" id="4352918">32768</span>&nbsp;<span class="comment" id="4352924">//&nbsp;max&nbsp;history&nbsp;required</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4352949">//&nbsp;The&nbsp;next&nbsp;three&nbsp;numbers&nbsp;come&nbsp;from&nbsp;the&nbsp;RFC,&nbsp;section&nbsp;3.2.7.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353010">maxLit</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4353019">=</span>&nbsp;<span class="num" id="4353021">286</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353026">maxDist</span>&nbsp;&nbsp;<span class="op" id="4353035">=</span>&nbsp;<span class="num" id="4353037">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353041">numCodes</span>&nbsp;<span class="op" id="4353050">=</span>&nbsp;<span class="num" id="4353052">19</span>&nbsp;<span class="comment" id="4353055">//&nbsp;number&nbsp;of&nbsp;codes&nbsp;in&nbsp;Huffman&nbsp;meta-code</span><br>
<span class="lineno">25</span><span class="op" id="4353095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4353098">//&nbsp;A&nbsp;CorruptInputError&nbsp;reports&nbsp;the&nbsp;presence&nbsp;of&nbsp;corrupt&nbsp;input&nbsp;at&nbsp;a&nbsp;given&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="4353178">type</span>&nbsp;<span class="ident" id="4353183">CorruptInputError</span>&nbsp;<span class="ident" id="4353201">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="4353208">func</span>&nbsp;<span class="op" id="4353213">(</span><span class="ident" id="4353214">e</span>&nbsp;<span class="ident" id="4353216"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4353233">)</span>&nbsp;<span class="ident" id="4353235">Error</span><span class="op" id="4353240">(</span><span class="op" id="4353241">)</span>&nbsp;<span class="builtintype" id="4353243">string</span>&nbsp;<span class="op" id="4353250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4353253">return</span>&nbsp;<span class="string" id="4353260">&#34;flate:&nbsp;corrupt&nbsp;input&nbsp;before&nbsp;offset&nbsp;&#34;</span>&nbsp;<span class="op" id="4353298">+</span>&nbsp;<span class="ident" id="4353300"><a href="/compress/flate/inflate.go.html#4352833">strconv</a></span><span class="op" id="4353307">.</span><span class="ident" id="4353308">FormatInt</span><span class="op" id="4353317">(</span><span class="ident" id="4353318">int64</span><span class="op" id="4353323">(</span><span class="ident" id="4353324"><a href="/compress/flate/inflate.go.html#4353214">e</a></span><span class="op" id="4353325">)</span><span class="op" id="4353326">,</span>&nbsp;<span class="num" id="4353328">10</span><span class="op" id="4353330">)</span><br>
<span class="lineno"></span><span class="op" id="4353332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4353335">//&nbsp;An&nbsp;InternalError&nbsp;reports&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;flate&nbsp;code&nbsp;itself.</span><br>
<span class="lineno">35</span><span class="keyword" id="4353398">type</span>&nbsp;<span class="ident" id="4353403">InternalError</span>&nbsp;<span class="builtintype" id="4353417">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4353425">func</span>&nbsp;<span class="op" id="4353430">(</span><span class="ident" id="4353431">e</span>&nbsp;<span class="ident" id="4353433"><a href="/compress/flate/inflate.go.html#4353403">InternalError</a></span><span class="op" id="4353446">)</span>&nbsp;<span class="ident" id="4353448">Error</span><span class="op" id="4353453">(</span><span class="op" id="4353454">)</span>&nbsp;<span class="builtintype" id="4353456">string</span>&nbsp;<span class="op" id="4353463">{</span>&nbsp;<span class="keyword" id="4353465">return</span>&nbsp;<span class="string" id="4353472">&#34;flate:&nbsp;internal&nbsp;error:&nbsp;&#34;</span>&nbsp;<span class="op" id="4353498">+</span>&nbsp;<span class="builtintype" id="4353500">string</span><span class="op" id="4353506">(</span><span class="ident" id="4353507"><a href="/compress/flate/inflate.go.html#4353431">e</a></span><span class="op" id="4353508">)</span>&nbsp;<span class="op" id="4353510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4353513">//&nbsp;A&nbsp;ReadError&nbsp;reports&nbsp;an&nbsp;error&nbsp;encountered&nbsp;while&nbsp;reading&nbsp;input.</span><br>
<span class="lineno">40</span><span class="keyword" id="4353578">type</span>&nbsp;<span class="ident" id="4353583">ReadError</span>&nbsp;<span class="keyword" id="4353593">struct</span>&nbsp;<span class="op" id="4353600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353603">Offset</span>&nbsp;<span class="ident" id="4353610">int64</span>&nbsp;<span class="comment" id="4353616">//&nbsp;byte&nbsp;offset&nbsp;where&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353653">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4353660">error</span>&nbsp;<span class="comment" id="4353666">//&nbsp;error&nbsp;returned&nbsp;by&nbsp;underlying&nbsp;Read</span><br>
<span class="lineno"></span><span class="op" id="4353703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="4353706">func</span>&nbsp;<span class="op" id="4353711">(</span><span class="ident" id="4353712">e</span>&nbsp;<span class="op" id="4353714">*</span><span class="ident" id="4353715"><a href="/compress/flate/inflate.go.html#4353583">ReadError</a></span><span class="op" id="4353724">)</span>&nbsp;<span class="ident" id="4353726">Error</span><span class="op" id="4353731">(</span><span class="op" id="4353732">)</span>&nbsp;<span class="builtintype" id="4353734">string</span>&nbsp;<span class="op" id="4353741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4353744">return</span>&nbsp;<span class="string" id="4353751">&#34;flate:&nbsp;read&nbsp;error&nbsp;at&nbsp;offset&nbsp;&#34;</span>&nbsp;<span class="op" id="4353782">+</span>&nbsp;<span class="ident" id="4353784"><a href="/compress/flate/inflate.go.html#4352833">strconv</a></span><span class="op" id="4353791">.</span><span class="ident" id="4353792">FormatInt</span><span class="op" id="4353801">(</span><span class="ident" id="4353802"><a href="/compress/flate/inflate.go.html#4353712">e</a></span><span class="op" id="4353803">.</span><span class="ident" id="4353804">Offset</span><span class="op" id="4353810">,</span>&nbsp;<span class="num" id="4353812">10</span><span class="op" id="4353814">)</span>&nbsp;<span class="op" id="4353816">+</span>&nbsp;<span class="string" id="4353818">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4353823">+</span>&nbsp;<span class="ident" id="4353825"><a href="/compress/flate/inflate.go.html#4353712">e</a></span><span class="op" id="4353826">.</span><span class="ident" id="4353827">Err</span><span class="op" id="4353830">.</span><span class="ident" id="4353831">Error</span><span class="op" id="4353836">(</span><span class="op" id="4353837">)</span><br>
<span class="lineno"></span><span class="op" id="4353839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4353842">//&nbsp;A&nbsp;WriteError&nbsp;reports&nbsp;an&nbsp;error&nbsp;encountered&nbsp;while&nbsp;writing&nbsp;output.</span><br>
<span class="lineno">50</span><span class="keyword" id="4353909">type</span>&nbsp;<span class="ident" id="4353914">WriteError</span>&nbsp;<span class="keyword" id="4353925">struct</span>&nbsp;<span class="op" id="4353932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353935">Offset</span>&nbsp;<span class="ident" id="4353942">int64</span>&nbsp;<span class="comment" id="4353948">//&nbsp;byte&nbsp;offset&nbsp;where&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4353985">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4353992">error</span>&nbsp;<span class="comment" id="4353998">//&nbsp;error&nbsp;returned&nbsp;by&nbsp;underlying&nbsp;Write</span><br>
<span class="lineno"></span><span class="op" id="4354036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="4354039">func</span>&nbsp;<span class="op" id="4354044">(</span><span class="ident" id="4354045">e</span>&nbsp;<span class="op" id="4354047">*</span><span class="ident" id="4354048"><a href="/compress/flate/inflate.go.html#4353914">WriteError</a></span><span class="op" id="4354058">)</span>&nbsp;<span class="ident" id="4354060">Error</span><span class="op" id="4354065">(</span><span class="op" id="4354066">)</span>&nbsp;<span class="builtintype" id="4354068">string</span>&nbsp;<span class="op" id="4354075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4354078">return</span>&nbsp;<span class="string" id="4354085">&#34;flate:&nbsp;write&nbsp;error&nbsp;at&nbsp;offset&nbsp;&#34;</span>&nbsp;<span class="op" id="4354117">+</span>&nbsp;<span class="ident" id="4354119"><a href="/compress/flate/inflate.go.html#4352833">strconv</a></span><span class="op" id="4354126">.</span><span class="ident" id="4354127">FormatInt</span><span class="op" id="4354136">(</span><span class="ident" id="4354137"><a href="/compress/flate/inflate.go.html#4354045">e</a></span><span class="op" id="4354138">.</span><span class="ident" id="4354139">Offset</span><span class="op" id="4354145">,</span>&nbsp;<span class="num" id="4354147">10</span><span class="op" id="4354149">)</span>&nbsp;<span class="op" id="4354151">+</span>&nbsp;<span class="string" id="4354153">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4354158">+</span>&nbsp;<span class="ident" id="4354160"><a href="/compress/flate/inflate.go.html#4354045">e</a></span><span class="op" id="4354161">.</span><span class="ident" id="4354162">Err</span><span class="op" id="4354165">.</span><span class="ident" id="4354166">Error</span><span class="op" id="4354171">(</span><span class="op" id="4354172">)</span><br>
<span class="lineno"></span><span class="op" id="4354174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4354177">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">60</span><span class="comment" id="4354251">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="4354326">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4354362">type</span>&nbsp;<span class="ident" id="4354367">Resetter</span>&nbsp;<span class="keyword" id="4354376">interface</span>&nbsp;<span class="op" id="4354386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4354389">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4354463">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4354508">Reset</span><span class="op" id="4354513">(</span><span class="ident" id="4354514">r</span>&nbsp;<span class="ident" id="4354516"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4354518">.</span><span class="ident" id="4354519">Reader</span><span class="op" id="4354525">,</span>&nbsp;<span class="ident" id="4354527">dict</span>&nbsp;<span class="op" id="4354532">[</span><span class="op" id="4354533">]</span><span class="builtintype" id="4354534">byte</span><span class="op" id="4354538">)</span>&nbsp;<span class="builtintype" id="4354540">error</span><br>
<span class="lineno"></span><span class="op" id="4354546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4354549">//&nbsp;Note&nbsp;that&nbsp;much&nbsp;of&nbsp;the&nbsp;implementation&nbsp;of&nbsp;huffmanDecoder&nbsp;is&nbsp;also&nbsp;copied</span><br>
<span class="lineno"></span><span class="comment" id="4354622">//&nbsp;into&nbsp;gen.go&nbsp;(in&nbsp;package&nbsp;main)&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;precomputing&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="4354691">//&nbsp;fixed&nbsp;huffman&nbsp;tables&nbsp;so&nbsp;they&nbsp;can&nbsp;be&nbsp;included&nbsp;statically.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4354752">//&nbsp;The&nbsp;data&nbsp;structure&nbsp;for&nbsp;decoding&nbsp;Huffman&nbsp;tables&nbsp;is&nbsp;based&nbsp;on&nbsp;that&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4354822">//&nbsp;zlib.&nbsp;There&nbsp;is&nbsp;a&nbsp;lookup&nbsp;table&nbsp;of&nbsp;a&nbsp;fixed&nbsp;bit&nbsp;width&nbsp;(huffmanChunkBits),</span><br>
<span class="lineno"></span><span class="comment" id="4354896">//&nbsp;For&nbsp;codes&nbsp;smaller&nbsp;than&nbsp;the&nbsp;table&nbsp;width,&nbsp;there&nbsp;are&nbsp;multiple&nbsp;entries</span><br>
<span class="lineno">75</span><span class="comment" id="4354966">//&nbsp;(each&nbsp;combination&nbsp;of&nbsp;trailing&nbsp;bits&nbsp;has&nbsp;the&nbsp;same&nbsp;value).&nbsp;For&nbsp;codes</span><br>
<span class="lineno"></span><span class="comment" id="4355035">//&nbsp;larger&nbsp;than&nbsp;the&nbsp;table&nbsp;width,&nbsp;the&nbsp;table&nbsp;contains&nbsp;a&nbsp;link&nbsp;to&nbsp;an&nbsp;overflow</span><br>
<span class="lineno"></span><span class="comment" id="4355108">//&nbsp;table.&nbsp;The&nbsp;width&nbsp;of&nbsp;each&nbsp;entry&nbsp;in&nbsp;the&nbsp;link&nbsp;table&nbsp;is&nbsp;the&nbsp;maximum&nbsp;code</span><br>
<span class="lineno"></span><span class="comment" id="4355180">//&nbsp;size&nbsp;minus&nbsp;the&nbsp;chunk&nbsp;width.</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4355212">//&nbsp;Note&nbsp;that&nbsp;you&nbsp;can&nbsp;do&nbsp;a&nbsp;lookup&nbsp;in&nbsp;the&nbsp;table&nbsp;even&nbsp;without&nbsp;all&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="4355280">//&nbsp;filled.&nbsp;Since&nbsp;the&nbsp;extra&nbsp;bits&nbsp;are&nbsp;zero,&nbsp;and&nbsp;the&nbsp;DEFLATE&nbsp;Huffman&nbsp;codes</span><br>
<span class="lineno"></span><span class="comment" id="4355352">//&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;shorter&nbsp;codes&nbsp;come&nbsp;before&nbsp;longer&nbsp;ones,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4355421">//&nbsp;bit&nbsp;length&nbsp;estimate&nbsp;in&nbsp;the&nbsp;result&nbsp;is&nbsp;a&nbsp;lower&nbsp;bound&nbsp;on&nbsp;the&nbsp;actual</span><br>
<span class="lineno"></span><span class="comment" id="4355489">//&nbsp;number&nbsp;of&nbsp;bits.</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="4355509">//&nbsp;chunk&nbsp;&amp;&nbsp;15&nbsp;is&nbsp;number&nbsp;of&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="4355541">//&nbsp;chunk&nbsp;&gt;&gt;&nbsp;4&nbsp;is&nbsp;value,&nbsp;including&nbsp;table&nbsp;link</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4355587">const</span>&nbsp;<span class="op" id="4355593">(</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355596">huffmanChunkBits</span>&nbsp;&nbsp;<span class="op" id="4355614">=</span>&nbsp;<span class="num" id="4355616">9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355619">huffmanNumChunks</span>&nbsp;&nbsp;<span class="op" id="4355637">=</span>&nbsp;<span class="num" id="4355639">1</span>&nbsp;<span class="op" id="4355641">&lt;&lt;</span>&nbsp;<span class="ident" id="4355644"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355662">huffmanCountMask</span>&nbsp;&nbsp;<span class="op" id="4355680">=</span>&nbsp;<span class="num" id="4355682">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355686">huffmanValueShift</span>&nbsp;<span class="op" id="4355704">=</span>&nbsp;<span class="num" id="4355706">4</span><br>
<span class="lineno"></span><span class="op" id="4355708">)</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="4355711">type</span>&nbsp;<span class="ident" id="4355716">huffmanDecoder</span>&nbsp;<span class="keyword" id="4355731">struct</span>&nbsp;<span class="op" id="4355738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355741">min</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4355750">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4355775">//&nbsp;the&nbsp;minimum&nbsp;code&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355803">chunks</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4355812">[</span><span class="ident" id="4355813"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span><span class="op" id="4355829">]</span><span class="builtintype" id="4355830">uint32</span>&nbsp;<span class="comment" id="4355837">//&nbsp;chunks&nbsp;as&nbsp;described&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355867">links</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4355876">[</span><span class="op" id="4355877">]</span><span class="op" id="4355878">[</span><span class="op" id="4355879">]</span><span class="builtintype" id="4355880">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4355901">//&nbsp;overflow&nbsp;links</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4355920">linkMask</span>&nbsp;<span class="builtintype" id="4355929">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4355954">//&nbsp;mask&nbsp;the&nbsp;width&nbsp;of&nbsp;the&nbsp;link&nbsp;table</span><br>
<span class="lineno"></span><span class="op" id="4355990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4355993">//&nbsp;Initialize&nbsp;Huffman&nbsp;decoding&nbsp;tables&nbsp;from&nbsp;array&nbsp;of&nbsp;code&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="4356059">func</span>&nbsp;<span class="op" id="4356064">(</span><span class="ident" id="4356065">h</span>&nbsp;<span class="op" id="4356067">*</span><span class="ident" id="4356068"><a href="/compress/flate/inflate.go.html#4355716">huffmanDecoder</a></span><span class="op" id="4356082">)</span>&nbsp;<span class="ident" id="4356084">init</span><span class="op" id="4356088">(</span><span class="ident" id="4356089">bits</span>&nbsp;<span class="op" id="4356094">[</span><span class="op" id="4356095">]</span><span class="builtintype" id="4356096">int</span><span class="op" id="4356099">)</span>&nbsp;<span class="builtintype" id="4356101">bool</span>&nbsp;<span class="op" id="4356106">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356109">if</span>&nbsp;<span class="ident" id="4356112"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4356113">.</span><span class="ident" id="4356114">min</span>&nbsp;<span class="op" id="4356118">!=</span>&nbsp;<span class="num" id="4356121">0</span>&nbsp;<span class="op" id="4356123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356127">*</span><span class="ident" id="4356128"><a href="/compress/flate/inflate.go.html#4356065">h</a></span>&nbsp;<span class="op" id="4356130">=</span>&nbsp;<span class="ident" id="4356132"><a href="/compress/flate/inflate.go.html#4355716">huffmanDecoder</a></span><span class="op" id="4356146">{</span><span class="op" id="4356147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4356154">//&nbsp;Count&nbsp;number&nbsp;of&nbsp;codes&nbsp;of&nbsp;each&nbsp;length,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4356196">//&nbsp;compute&nbsp;min&nbsp;and&nbsp;max&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356228">var</span>&nbsp;<span class="ident" id="4356232">count</span>&nbsp;<span class="op" id="4356238">[</span><span class="ident" id="4356239"><a href="/compress/flate/inflate.go.html#4352855">maxCodeLen</a></span><span class="op" id="4356249">]</span><span class="builtintype" id="4356250">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356255">var</span>&nbsp;<span class="ident" id="4356259">min</span><span class="op" id="4356262">,</span>&nbsp;<span class="ident" id="4356264">max</span>&nbsp;<span class="builtintype" id="4356268">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356273">for</span>&nbsp;<span class="ident" id="4356277">_</span><span class="op" id="4356278">,</span>&nbsp;<span class="ident" id="4356280">n</span>&nbsp;<span class="op" id="4356282">:=</span>&nbsp;<span class="keyword" id="4356285">range</span>&nbsp;<span class="ident" id="4356291"><a href="/compress/flate/inflate.go.html#4356089">bits</a></span>&nbsp;<span class="op" id="4356296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356300">if</span>&nbsp;<span class="ident" id="4356303"><a href="/compress/flate/inflate.go.html#4356280">n</a></span>&nbsp;<span class="op" id="4356305">==</span>&nbsp;<span class="num" id="4356308">0</span>&nbsp;<span class="op" id="4356310">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356315">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356330">if</span>&nbsp;<span class="ident" id="4356333"><a href="/compress/flate/inflate.go.html#4356259">min</a></span>&nbsp;<span class="op" id="4356337">==</span>&nbsp;<span class="num" id="4356340">0</span>&nbsp;<span class="op" id="4356342">||</span>&nbsp;<span class="ident" id="4356345"><a href="/compress/flate/inflate.go.html#4356280">n</a></span>&nbsp;<span class="op" id="4356347">&lt;</span>&nbsp;<span class="ident" id="4356349"><a href="/compress/flate/inflate.go.html#4356259">min</a></span>&nbsp;<span class="op" id="4356353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356358"><a href="/compress/flate/inflate.go.html#4356259">min</a></span>&nbsp;<span class="op" id="4356362">=</span>&nbsp;<span class="ident" id="4356364"><a href="/compress/flate/inflate.go.html#4356280">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356368">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356372">if</span>&nbsp;<span class="ident" id="4356375"><a href="/compress/flate/inflate.go.html#4356280">n</a></span>&nbsp;<span class="op" id="4356377">&gt;</span>&nbsp;<span class="ident" id="4356379"><a href="/compress/flate/inflate.go.html#4356264">max</a></span>&nbsp;<span class="op" id="4356383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356388"><a href="/compress/flate/inflate.go.html#4356264">max</a></span>&nbsp;<span class="op" id="4356392">=</span>&nbsp;<span class="ident" id="4356394"><a href="/compress/flate/inflate.go.html#4356280">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356402"><a href="/compress/flate/inflate.go.html#4356232">count</a></span><span class="op" id="4356407">[</span><span class="ident" id="4356408"><a href="/compress/flate/inflate.go.html#4356280">n</a></span><span class="op" id="4356409">]</span><span class="op" id="4356410">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356414">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356417">if</span>&nbsp;<span class="ident" id="4356420"><a href="/compress/flate/inflate.go.html#4356264">max</a></span>&nbsp;<span class="op" id="4356424">==</span>&nbsp;<span class="num" id="4356427">0</span>&nbsp;<span class="op" id="4356429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356433">return</span>&nbsp;<span class="builtintype" id="4356440">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356451"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4356452">.</span><span class="ident" id="4356453">min</span>&nbsp;<span class="op" id="4356457">=</span>&nbsp;<span class="ident" id="4356459"><a href="/compress/flate/inflate.go.html#4356259">min</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356464">var</span>&nbsp;<span class="ident" id="4356468">linkBits</span>&nbsp;<span class="builtintype" id="4356477">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356483">var</span>&nbsp;<span class="ident" id="4356487">numLinks</span>&nbsp;<span class="builtintype" id="4356496">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356501">if</span>&nbsp;<span class="ident" id="4356504"><a href="/compress/flate/inflate.go.html#4356264">max</a></span>&nbsp;<span class="op" id="4356508">&gt;</span>&nbsp;<span class="ident" id="4356510"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span>&nbsp;<span class="op" id="4356527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356531"><a href="/compress/flate/inflate.go.html#4356468">linkBits</a></span>&nbsp;<span class="op" id="4356540">=</span>&nbsp;<span class="builtintype" id="4356542">uint</span><span class="op" id="4356546">(</span><span class="ident" id="4356547"><a href="/compress/flate/inflate.go.html#4356264">max</a></span><span class="op" id="4356550">)</span>&nbsp;<span class="op" id="4356552">-</span>&nbsp;<span class="ident" id="4356554"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356573"><a href="/compress/flate/inflate.go.html#4356487">numLinks</a></span>&nbsp;<span class="op" id="4356582">=</span>&nbsp;<span class="num" id="4356584">1</span>&nbsp;<span class="op" id="4356586">&lt;&lt;</span>&nbsp;<span class="ident" id="4356589"><a href="/compress/flate/inflate.go.html#4356468">linkBits</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356600"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4356601">.</span><span class="ident" id="4356602">linkMask</span>&nbsp;<span class="op" id="4356611">=</span>&nbsp;<span class="builtintype" id="4356613">uint32</span><span class="op" id="4356619">(</span><span class="ident" id="4356620"><a href="/compress/flate/inflate.go.html#4356487">numLinks</a></span>&nbsp;<span class="op" id="4356629">-</span>&nbsp;<span class="num" id="4356631">1</span><span class="op" id="4356632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356638">code</span>&nbsp;<span class="op" id="4356643">:=</span>&nbsp;<span class="num" id="4356646">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356649">var</span>&nbsp;<span class="ident" id="4356653">nextcode</span>&nbsp;<span class="op" id="4356662">[</span><span class="ident" id="4356663"><a href="/compress/flate/inflate.go.html#4352855">maxCodeLen</a></span><span class="op" id="4356673">]</span><span class="builtintype" id="4356674">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356679">for</span>&nbsp;<span class="ident" id="4356683">i</span>&nbsp;<span class="op" id="4356685">:=</span>&nbsp;<span class="ident" id="4356688"><a href="/compress/flate/inflate.go.html#4356259">min</a></span><span class="op" id="4356691">;</span>&nbsp;<span class="ident" id="4356693"><a href="/compress/flate/inflate.go.html#4356683">i</a></span>&nbsp;<span class="op" id="4356695">&lt;=</span>&nbsp;<span class="ident" id="4356698"><a href="/compress/flate/inflate.go.html#4356264">max</a></span><span class="op" id="4356701">;</span>&nbsp;<span class="ident" id="4356703"><a href="/compress/flate/inflate.go.html#4356683">i</a></span><span class="op" id="4356704">++</span>&nbsp;<span class="op" id="4356707">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356711">if</span>&nbsp;<span class="ident" id="4356714"><a href="/compress/flate/inflate.go.html#4356683">i</a></span>&nbsp;<span class="op" id="4356716">==</span>&nbsp;<span class="ident" id="4356719"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><span class="op" id="4356735">+</span><span class="num" id="4356736">1</span>&nbsp;<span class="op" id="4356738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4356743">//&nbsp;create&nbsp;link&nbsp;tables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356768">link</span>&nbsp;<span class="op" id="4356773">:=</span>&nbsp;<span class="ident" id="4356776"><a href="/compress/flate/inflate.go.html#4356638">code</a></span>&nbsp;<span class="op" id="4356781">&gt;&gt;</span>&nbsp;<span class="num" id="4356784">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356789">if</span>&nbsp;<span class="ident" id="4356792"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span>&nbsp;<span class="op" id="4356809">&lt;</span>&nbsp;<span class="ident" id="4356811"><a href="/compress/flate/inflate.go.html#4356768">link</a></span>&nbsp;<span class="op" id="4356816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356822">return</span>&nbsp;<span class="builtintype" id="4356829">false</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4356838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356843"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4356844">.</span><span class="ident" id="4356845">links</span>&nbsp;<span class="op" id="4356851">=</span>&nbsp;<span class="builtinfunc" id="4356853">make</span><span class="op" id="4356857">(</span><span class="op" id="4356858">[</span><span class="op" id="4356859">]</span><span class="op" id="4356860">[</span><span class="op" id="4356861">]</span><span class="builtintype" id="4356862">uint32</span><span class="op" id="4356868">,</span>&nbsp;<span class="ident" id="4356870"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span><span class="op" id="4356886">-</span><span class="ident" id="4356887"><a href="/compress/flate/inflate.go.html#4356768">link</a></span><span class="op" id="4356891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4356896">for</span>&nbsp;<span class="ident" id="4356900">j</span>&nbsp;<span class="op" id="4356902">:=</span>&nbsp;<span class="builtintype" id="4356905">uint</span><span class="op" id="4356909">(</span><span class="ident" id="4356910"><a href="/compress/flate/inflate.go.html#4356768">link</a></span><span class="op" id="4356914">)</span><span class="op" id="4356915">;</span>&nbsp;<span class="ident" id="4356917"><a href="/compress/flate/inflate.go.html#4356900">j</a></span>&nbsp;<span class="op" id="4356919">&lt;</span>&nbsp;<span class="ident" id="4356921"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span><span class="op" id="4356937">;</span>&nbsp;<span class="ident" id="4356939"><a href="/compress/flate/inflate.go.html#4356900">j</a></span><span class="op" id="4356940">++</span>&nbsp;<span class="op" id="4356943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4356949">reverse</span>&nbsp;<span class="op" id="4356957">:=</span>&nbsp;<span class="builtintype" id="4356960">int</span><span class="op" id="4356963">(</span><span class="ident" id="4356964"><a href="/compress/flate/reverse_bits.go.html#4369510">reverseByte</a></span><span class="op" id="4356975">[</span><span class="ident" id="4356976"><a href="/compress/flate/inflate.go.html#4356900">j</a></span><span class="op" id="4356977">&gt;&gt;</span><span class="num" id="4356979">8</span><span class="op" id="4356980">]</span><span class="op" id="4356981">)</span>&nbsp;<span class="op" id="4356983">|</span>&nbsp;<span class="builtintype" id="4356985">int</span><span class="op" id="4356988">(</span><span class="ident" id="4356989"><a href="/compress/flate/reverse_bits.go.html#4369510">reverseByte</a></span><span class="op" id="4357000">[</span><span class="ident" id="4357001"><a href="/compress/flate/inflate.go.html#4356900">j</a></span><span class="op" id="4357002">&amp;</span><span class="num" id="4357003">0xff</span><span class="op" id="4357007">]</span><span class="op" id="4357008">)</span><span class="op" id="4357009">&lt;&lt;</span><span class="num" id="4357011">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357017"><a href="/compress/flate/inflate.go.html#4356949">reverse</a></span>&nbsp;<span class="op" id="4357025">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="4357029">uint</span><span class="op" id="4357033">(</span><span class="num" id="4357034">16</span>&nbsp;<span class="op" id="4357037">-</span>&nbsp;<span class="ident" id="4357039"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><span class="op" id="4357055">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357061">off</span>&nbsp;<span class="op" id="4357065">:=</span>&nbsp;<span class="ident" id="4357068"><a href="/compress/flate/inflate.go.html#4356900">j</a></span>&nbsp;<span class="op" id="4357070">-</span>&nbsp;<span class="builtintype" id="4357072">uint</span><span class="op" id="4357076">(</span><span class="ident" id="4357077"><a href="/compress/flate/inflate.go.html#4356768">link</a></span><span class="op" id="4357081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357087"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4357088">.</span><span class="ident" id="4357089">chunks</span><span class="op" id="4357095">[</span><span class="ident" id="4357096"><a href="/compress/flate/inflate.go.html#4356949">reverse</a></span><span class="op" id="4357103">]</span>&nbsp;<span class="op" id="4357105">=</span>&nbsp;<span class="builtintype" id="4357107">uint32</span><span class="op" id="4357113">(</span><span class="ident" id="4357114"><a href="/compress/flate/inflate.go.html#4357061">off</a></span><span class="op" id="4357117">&lt;&lt;</span><span class="ident" id="4357119"><a href="/compress/flate/inflate.go.html#4355686">huffmanValueShift</a></span>&nbsp;<span class="op" id="4357137">+</span>&nbsp;<span class="builtintype" id="4357139">uint</span><span class="op" id="4357143">(</span><span class="ident" id="4357144"><a href="/compress/flate/inflate.go.html#4356683">i</a></span><span class="op" id="4357145">)</span><span class="op" id="4357146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357152"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4357153">.</span><span class="ident" id="4357154">links</span><span class="op" id="4357159">[</span><span class="ident" id="4357160"><a href="/compress/flate/inflate.go.html#4357061">off</a></span><span class="op" id="4357163">]</span>&nbsp;<span class="op" id="4357165">=</span>&nbsp;<span class="builtinfunc" id="4357167">make</span><span class="op" id="4357171">(</span><span class="op" id="4357172">[</span><span class="op" id="4357173">]</span><span class="builtintype" id="4357174">uint32</span><span class="op" id="4357180">,</span>&nbsp;<span class="num" id="4357182">1</span><span class="op" id="4357183">&lt;&lt;</span><span class="ident" id="4357185"><a href="/compress/flate/inflate.go.html#4356468">linkBits</a></span><span class="op" id="4357193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357202">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357206">n</span>&nbsp;<span class="op" id="4357208">:=</span>&nbsp;<span class="ident" id="4357211"><a href="/compress/flate/inflate.go.html#4356232">count</a></span><span class="op" id="4357216">[</span><span class="ident" id="4357217"><a href="/compress/flate/inflate.go.html#4356683">i</a></span><span class="op" id="4357218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357222"><a href="/compress/flate/inflate.go.html#4356653">nextcode</a></span><span class="op" id="4357230">[</span><span class="ident" id="4357231"><a href="/compress/flate/inflate.go.html#4356683">i</a></span><span class="op" id="4357232">]</span>&nbsp;<span class="op" id="4357234">=</span>&nbsp;<span class="ident" id="4357236"><a href="/compress/flate/inflate.go.html#4356638">code</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357243"><a href="/compress/flate/inflate.go.html#4356638">code</a></span>&nbsp;<span class="op" id="4357248">+=</span>&nbsp;<span class="ident" id="4357251"><a href="/compress/flate/inflate.go.html#4357206">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357255"><a href="/compress/flate/inflate.go.html#4356638">code</a></span>&nbsp;<span class="op" id="4357260">&lt;&lt;=</span>&nbsp;<span class="num" id="4357264">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357267">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357271">for</span>&nbsp;<span class="ident" id="4357275">i</span><span class="op" id="4357276">,</span>&nbsp;<span class="ident" id="4357278">n</span>&nbsp;<span class="op" id="4357280">:=</span>&nbsp;<span class="keyword" id="4357283">range</span>&nbsp;<span class="ident" id="4357289"><a href="/compress/flate/inflate.go.html#4356089">bits</a></span>&nbsp;<span class="op" id="4357294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357298">if</span>&nbsp;<span class="ident" id="4357301"><a href="/compress/flate/inflate.go.html#4357278">n</a></span>&nbsp;<span class="op" id="4357303">==</span>&nbsp;<span class="num" id="4357306">0</span>&nbsp;<span class="op" id="4357308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357313">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357324">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357328">code</span>&nbsp;<span class="op" id="4357333">:=</span>&nbsp;<span class="ident" id="4357336"><a href="/compress/flate/inflate.go.html#4356653">nextcode</a></span><span class="op" id="4357344">[</span><span class="ident" id="4357345"><a href="/compress/flate/inflate.go.html#4357278">n</a></span><span class="op" id="4357346">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357350"><a href="/compress/flate/inflate.go.html#4356653">nextcode</a></span><span class="op" id="4357358">[</span><span class="ident" id="4357359"><a href="/compress/flate/inflate.go.html#4357278">n</a></span><span class="op" id="4357360">]</span><span class="op" id="4357361">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357366">chunk</span>&nbsp;<span class="op" id="4357372">:=</span>&nbsp;<span class="builtintype" id="4357375">uint32</span><span class="op" id="4357381">(</span><span class="ident" id="4357382"><a href="/compress/flate/inflate.go.html#4357275">i</a></span><span class="op" id="4357383">&lt;&lt;</span><span class="ident" id="4357385"><a href="/compress/flate/inflate.go.html#4355686">huffmanValueShift</a></span>&nbsp;<span class="op" id="4357403">|</span>&nbsp;<span class="ident" id="4357405"><a href="/compress/flate/inflate.go.html#4357278">n</a></span><span class="op" id="4357406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357410">reverse</span>&nbsp;<span class="op" id="4357418">:=</span>&nbsp;<span class="builtintype" id="4357421">int</span><span class="op" id="4357424">(</span><span class="ident" id="4357425"><a href="/compress/flate/reverse_bits.go.html#4369510">reverseByte</a></span><span class="op" id="4357436">[</span><span class="ident" id="4357437"><a href="/compress/flate/inflate.go.html#4357328">code</a></span><span class="op" id="4357441">&gt;&gt;</span><span class="num" id="4357443">8</span><span class="op" id="4357444">]</span><span class="op" id="4357445">)</span>&nbsp;<span class="op" id="4357447">|</span>&nbsp;<span class="builtintype" id="4357449">int</span><span class="op" id="4357452">(</span><span class="ident" id="4357453"><a href="/compress/flate/reverse_bits.go.html#4369510">reverseByte</a></span><span class="op" id="4357464">[</span><span class="ident" id="4357465"><a href="/compress/flate/inflate.go.html#4357328">code</a></span><span class="op" id="4357469">&amp;</span><span class="num" id="4357470">0xff</span><span class="op" id="4357474">]</span><span class="op" id="4357475">)</span><span class="op" id="4357476">&lt;&lt;</span><span class="num" id="4357478">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357482"><a href="/compress/flate/inflate.go.html#4357410">reverse</a></span>&nbsp;<span class="op" id="4357490">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="4357494">uint</span><span class="op" id="4357498">(</span><span class="num" id="4357499">16</span>&nbsp;<span class="op" id="4357502">-</span>&nbsp;<span class="ident" id="4357504"><a href="/compress/flate/inflate.go.html#4357278">n</a></span><span class="op" id="4357505">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357509">if</span>&nbsp;<span class="ident" id="4357512"><a href="/compress/flate/inflate.go.html#4357278">n</a></span>&nbsp;<span class="op" id="4357514">&lt;=</span>&nbsp;<span class="ident" id="4357517"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span>&nbsp;<span class="op" id="4357534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357539">for</span>&nbsp;<span class="ident" id="4357543">off</span>&nbsp;<span class="op" id="4357547">:=</span>&nbsp;<span class="ident" id="4357550"><a href="/compress/flate/inflate.go.html#4357410">reverse</a></span><span class="op" id="4357557">;</span>&nbsp;<span class="ident" id="4357559"><a href="/compress/flate/inflate.go.html#4357543">off</a></span>&nbsp;<span class="op" id="4357563">&lt;</span>&nbsp;<span class="ident" id="4357565"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span><span class="op" id="4357581">;</span>&nbsp;<span class="ident" id="4357583"><a href="/compress/flate/inflate.go.html#4357543">off</a></span>&nbsp;<span class="op" id="4357587">+=</span>&nbsp;<span class="num" id="4357590">1</span>&nbsp;<span class="op" id="4357592">&lt;&lt;</span>&nbsp;<span class="builtintype" id="4357595">uint</span><span class="op" id="4357599">(</span><span class="ident" id="4357600"><a href="/compress/flate/inflate.go.html#4357278">n</a></span><span class="op" id="4357601">)</span>&nbsp;<span class="op" id="4357603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357609"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4357610">.</span><span class="ident" id="4357611">chunks</span><span class="op" id="4357617">[</span><span class="ident" id="4357618"><a href="/compress/flate/inflate.go.html#4357543">off</a></span><span class="op" id="4357621">]</span>&nbsp;<span class="op" id="4357623">=</span>&nbsp;<span class="ident" id="4357625"><a href="/compress/flate/inflate.go.html#4357366">chunk</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357638">}</span>&nbsp;<span class="keyword" id="4357640">else</span>&nbsp;<span class="op" id="4357645">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357650">value</span>&nbsp;<span class="op" id="4357656">:=</span>&nbsp;<span class="ident" id="4357659"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4357660">.</span><span class="ident" id="4357661">chunks</span><span class="op" id="4357667">[</span><span class="ident" id="4357668"><a href="/compress/flate/inflate.go.html#4357410">reverse</a></span><span class="op" id="4357675">&amp;</span><span class="op" id="4357676">(</span><span class="ident" id="4357677"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span><span class="op" id="4357693">-</span><span class="num" id="4357694">1</span><span class="op" id="4357695">)</span><span class="op" id="4357696">]</span>&nbsp;<span class="op" id="4357698">&gt;&gt;</span>&nbsp;<span class="ident" id="4357701"><a href="/compress/flate/inflate.go.html#4355686">huffmanValueShift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357722">if</span>&nbsp;<span class="ident" id="4357725"><a href="/compress/flate/inflate.go.html#4357650">value</a></span>&nbsp;<span class="op" id="4357731">&gt;=</span>&nbsp;<span class="builtintype" id="4357734">uint32</span><span class="op" id="4357740">(</span><span class="builtinfunc" id="4357741">len</span><span class="op" id="4357744">(</span><span class="ident" id="4357745"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4357746">.</span><span class="ident" id="4357747">links</span><span class="op" id="4357752">)</span><span class="op" id="4357753">)</span>&nbsp;<span class="op" id="4357755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357761">return</span>&nbsp;<span class="builtintype" id="4357768">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357782">linktab</span>&nbsp;<span class="op" id="4357790">:=</span>&nbsp;<span class="ident" id="4357793"><a href="/compress/flate/inflate.go.html#4356065">h</a></span><span class="op" id="4357794">.</span><span class="ident" id="4357795">links</span><span class="op" id="4357800">[</span><span class="ident" id="4357801"><a href="/compress/flate/inflate.go.html#4357650">value</a></span><span class="op" id="4357806">]</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357811"><a href="/compress/flate/inflate.go.html#4357410">reverse</a></span>&nbsp;<span class="op" id="4357819">&gt;&gt;=</span>&nbsp;<span class="ident" id="4357823"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357843">for</span>&nbsp;<span class="ident" id="4357847">off</span>&nbsp;<span class="op" id="4357851">:=</span>&nbsp;<span class="ident" id="4357854"><a href="/compress/flate/inflate.go.html#4357410">reverse</a></span><span class="op" id="4357861">;</span>&nbsp;<span class="ident" id="4357863"><a href="/compress/flate/inflate.go.html#4357847">off</a></span>&nbsp;<span class="op" id="4357867">&lt;</span>&nbsp;<span class="ident" id="4357869"><a href="/compress/flate/inflate.go.html#4356487">numLinks</a></span><span class="op" id="4357877">;</span>&nbsp;<span class="ident" id="4357879"><a href="/compress/flate/inflate.go.html#4357847">off</a></span>&nbsp;<span class="op" id="4357883">+=</span>&nbsp;<span class="num" id="4357886">1</span>&nbsp;<span class="op" id="4357888">&lt;&lt;</span>&nbsp;<span class="builtintype" id="4357891">uint</span><span class="op" id="4357895">(</span><span class="ident" id="4357896"><a href="/compress/flate/inflate.go.html#4357278">n</a></span><span class="op" id="4357897">-</span><span class="ident" id="4357898"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><span class="op" id="4357914">)</span>&nbsp;<span class="op" id="4357916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4357922"><a href="/compress/flate/inflate.go.html#4357782">linktab</a></span><span class="op" id="4357929">[</span><span class="ident" id="4357930"><a href="/compress/flate/inflate.go.html#4357847">off</a></span><span class="op" id="4357933">]</span>&nbsp;<span class="op" id="4357935">=</span>&nbsp;<span class="ident" id="4357937"><a href="/compress/flate/inflate.go.html#4357366">chunk</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357950">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4357953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4357956">return</span>&nbsp;<span class="builtintype" id="4357963">true</span><br>
<span class="lineno"></span><span class="op" id="4357968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4357971">//&nbsp;The&nbsp;actual&nbsp;read&nbsp;interface&nbsp;needed&nbsp;by&nbsp;NewReader.</span><br>
<span class="lineno">190</span><span class="comment" id="4358021">//&nbsp;If&nbsp;the&nbsp;passed&nbsp;in&nbsp;io.Reader&nbsp;does&nbsp;not&nbsp;also&nbsp;have&nbsp;ReadByte,</span><br>
<span class="lineno"></span><span class="comment" id="4358080">//&nbsp;the&nbsp;NewReader&nbsp;will&nbsp;introduce&nbsp;its&nbsp;own&nbsp;buffering.</span><br>
<span class="lineno"></span><span class="keyword" id="4358131">type</span>&nbsp;<span class="ident" id="4358136">Reader</span>&nbsp;<span class="keyword" id="4358143">interface</span>&nbsp;<span class="op" id="4358153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358156"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4358158">.</span><span class="ident" id="4358159">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358167"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4358169">.</span><span class="ident" id="4358170">ByteReader</span><br>
<span class="lineno">195</span><span class="op" id="4358181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4358184">//&nbsp;Decompress&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4358205">type</span>&nbsp;<span class="ident" id="4358210">decompressor</span>&nbsp;<span class="keyword" id="4358223">struct</span>&nbsp;<span class="op" id="4358230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358233">//&nbsp;Input&nbsp;source.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358251">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4358259"><a href="/compress/flate/inflate.go.html#4358136">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358267">roffset</span>&nbsp;<span class="ident" id="4358275">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358282">woffset</span>&nbsp;<span class="ident" id="4358290">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358298">//&nbsp;Input&nbsp;bits,&nbsp;in&nbsp;top&nbsp;of&nbsp;b.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358327">b</span>&nbsp;&nbsp;<span class="builtintype" id="4358330">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358338">nb</span>&nbsp;<span class="builtintype" id="4358341">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358348">//&nbsp;Huffman&nbsp;decoders&nbsp;for&nbsp;literal/length,&nbsp;distance.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358399">h1</span><span class="op" id="4358401">,</span>&nbsp;<span class="ident" id="4358403">h2</span>&nbsp;<span class="ident" id="4358406"><a href="/compress/flate/inflate.go.html#4355716">huffmanDecoder</a></span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358423">//&nbsp;Length&nbsp;arrays&nbsp;used&nbsp;to&nbsp;define&nbsp;Huffman&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358471">bits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4358480">*</span><span class="op" id="4358481">[</span><span class="ident" id="4358482"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span>&nbsp;<span class="op" id="4358489">+</span>&nbsp;<span class="ident" id="4358491"><a href="/compress/flate/inflate.go.html#4353026">maxDist</a></span><span class="op" id="4358498">]</span><span class="builtintype" id="4358499">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358504">codebits</span>&nbsp;<span class="op" id="4358513">*</span><span class="op" id="4358514">[</span><span class="ident" id="4358515"><a href="/compress/flate/inflate.go.html#4353041">numCodes</a></span><span class="op" id="4358523">]</span><span class="builtintype" id="4358524">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358530">//&nbsp;Output&nbsp;history,&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358558">hist</span>&nbsp;&nbsp;<span class="op" id="4358564">*</span><span class="op" id="4358565">[</span><span class="ident" id="4358566"><a href="/compress/flate/inflate.go.html#4352905">maxHist</a></span><span class="op" id="4358573">]</span><span class="builtintype" id="4358574">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358580">hp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4358586">int</span>&nbsp;&nbsp;<span class="comment" id="4358591">//&nbsp;current&nbsp;output&nbsp;position&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358629">hw</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4358635">int</span>&nbsp;&nbsp;<span class="comment" id="4358640">//&nbsp;have&nbsp;written&nbsp;hist[0:hw]&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358676">hfull</span>&nbsp;<span class="builtintype" id="4358682">bool</span>&nbsp;<span class="comment" id="4358687">//&nbsp;buffer&nbsp;has&nbsp;filled&nbsp;at&nbsp;least&nbsp;once</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358724">//&nbsp;Temporary&nbsp;buffer&nbsp;(avoids&nbsp;repeated&nbsp;allocation).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358775">buf</span>&nbsp;<span class="op" id="4358779">[</span><span class="num" id="4358780">4</span><span class="op" id="4358781">]</span><span class="builtintype" id="4358782">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358789">//&nbsp;Next&nbsp;step&nbsp;in&nbsp;the&nbsp;decompression,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4358825">//&nbsp;and&nbsp;decompression&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358854">step</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4358863">func</span><span class="op" id="4358867">(</span><span class="op" id="4358868">*</span><span class="ident" id="4358869"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4358881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358884">final</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4358893">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358899">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4358908">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358915">toRead</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4358924">[</span><span class="op" id="4358925">]</span><span class="builtintype" id="4358926">byte</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358932">hl</span><span class="op" id="4358934">,</span>&nbsp;<span class="ident" id="4358936">hd</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4358941">*</span><span class="ident" id="4358942"><a href="/compress/flate/inflate.go.html#4355716">huffmanDecoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358958">copyLen</span>&nbsp;&nbsp;<span class="builtintype" id="4358967">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4358972">copyDist</span>&nbsp;<span class="builtintype" id="4358981">int</span><br>
<span class="lineno"></span><span class="op" id="4358985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="4358988">func</span>&nbsp;<span class="op" id="4358993">(</span><span class="ident" id="4358994">f</span>&nbsp;<span class="op" id="4358996">*</span><span class="ident" id="4358997"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4359009">)</span>&nbsp;<span class="ident" id="4359011">nextBlock</span><span class="op" id="4359020">(</span><span class="op" id="4359021">)</span>&nbsp;<span class="op" id="4359023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359026">if</span>&nbsp;<span class="ident" id="4359029"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359030">.</span><span class="ident" id="4359031">final</span>&nbsp;<span class="op" id="4359037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359041">if</span>&nbsp;<span class="ident" id="4359044"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359045">.</span><span class="ident" id="4359046">hw</span>&nbsp;<span class="op" id="4359049">!=</span>&nbsp;<span class="ident" id="4359052"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359053">.</span><span class="ident" id="4359054">hp</span>&nbsp;<span class="op" id="4359057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359062"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359063">.</span><span class="ident" id="4359064">flush</span><span class="op" id="4359069">(</span><span class="op" id="4359070">(</span><span class="op" id="4359071">*</span><span class="ident" id="4359072"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4359084">)</span><span class="op" id="4359085">.</span><span class="ident" id="4359086">nextBlock</span><span class="op" id="4359095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359100">return</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359113"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359114">.</span><span class="ident" id="4359115">err</span>&nbsp;<span class="op" id="4359119">=</span>&nbsp;<span class="ident" id="4359121"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4359123">.</span><span class="ident" id="4359124">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359130">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359141">for</span>&nbsp;<span class="ident" id="4359145"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359146">.</span><span class="ident" id="4359147">nb</span>&nbsp;<span class="op" id="4359150">&lt;</span>&nbsp;<span class="num" id="4359152">1</span><span class="op" id="4359153">+</span><span class="num" id="4359154">2</span>&nbsp;<span class="op" id="4359156">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359160">if</span>&nbsp;<span class="ident" id="4359163"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359164">.</span><span class="ident" id="4359165">err</span>&nbsp;<span class="op" id="4359169">=</span>&nbsp;<span class="ident" id="4359171"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359172">.</span><span class="ident" id="4359173">moreBits</span><span class="op" id="4359181">(</span><span class="op" id="4359182">)</span><span class="op" id="4359183">;</span>&nbsp;<span class="ident" id="4359185"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359186">.</span><span class="ident" id="4359187">err</span>&nbsp;<span class="op" id="4359191">!=</span>&nbsp;<span class="ident" id="4359194">nil</span>&nbsp;<span class="op" id="4359198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359203">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359218"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359219">.</span><span class="ident" id="4359220">final</span>&nbsp;<span class="op" id="4359226">=</span>&nbsp;<span class="ident" id="4359228"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359229">.</span><span class="ident" id="4359230">b</span><span class="op" id="4359231">&amp;</span><span class="num" id="4359232">1</span>&nbsp;<span class="op" id="4359234">==</span>&nbsp;<span class="num" id="4359237">1</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359240"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359241">.</span><span class="ident" id="4359242">b</span>&nbsp;<span class="op" id="4359244">&gt;&gt;=</span>&nbsp;<span class="num" id="4359248">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359251">typ</span>&nbsp;<span class="op" id="4359255">:=</span>&nbsp;<span class="ident" id="4359258"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359259">.</span><span class="ident" id="4359260">b</span>&nbsp;<span class="op" id="4359262">&amp;</span>&nbsp;<span class="num" id="4359264">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359267"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359268">.</span><span class="ident" id="4359269">b</span>&nbsp;<span class="op" id="4359271">&gt;&gt;=</span>&nbsp;<span class="num" id="4359275">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359278"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359279">.</span><span class="ident" id="4359280">nb</span>&nbsp;<span class="op" id="4359283">-=</span>&nbsp;<span class="num" id="4359286">1</span>&nbsp;<span class="op" id="4359288">+</span>&nbsp;<span class="num" id="4359290">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359293">switch</span>&nbsp;<span class="ident" id="4359300"><a href="/compress/flate/inflate.go.html#4359251">typ</a></span>&nbsp;<span class="op" id="4359304">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359307">case</span>&nbsp;<span class="num" id="4359312">0</span><span class="op" id="4359313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359317"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359318">.</span><span class="ident" id="4359319">dataBlock</span><span class="op" id="4359328">(</span><span class="op" id="4359329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359332">case</span>&nbsp;<span class="num" id="4359337">1</span><span class="op" id="4359338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4359342">//&nbsp;compressed,&nbsp;fixed&nbsp;Huffman&nbsp;tables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359380"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359381">.</span><span class="ident" id="4359382">hl</span>&nbsp;<span class="op" id="4359385">=</span>&nbsp;<span class="op" id="4359387">&amp;</span><span class="ident" id="4359388"><a href="/compress/flate/fixedhuff.go.html#4325513">fixedHuffmanDecoder</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359410"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359411">.</span><span class="ident" id="4359412">hd</span>&nbsp;<span class="op" id="4359415">=</span>&nbsp;<span class="ident" id="4359417">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359423"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359424">.</span><span class="ident" id="4359425">huffmanBlock</span><span class="op" id="4359437">(</span><span class="op" id="4359438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359441">case</span>&nbsp;<span class="num" id="4359446">2</span><span class="op" id="4359447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4359451">//&nbsp;compressed,&nbsp;dynamic&nbsp;Huffman&nbsp;tables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359491">if</span>&nbsp;<span class="ident" id="4359494"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359495">.</span><span class="ident" id="4359496">err</span>&nbsp;<span class="op" id="4359500">=</span>&nbsp;<span class="ident" id="4359502"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359503">.</span><span class="ident" id="4359504">readHuffman</span><span class="op" id="4359515">(</span><span class="op" id="4359516">)</span><span class="op" id="4359517">;</span>&nbsp;<span class="ident" id="4359519"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359520">.</span><span class="ident" id="4359521">err</span>&nbsp;<span class="op" id="4359525">!=</span>&nbsp;<span class="ident" id="4359528">nil</span>&nbsp;<span class="op" id="4359532">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359537">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359549"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359550">.</span><span class="ident" id="4359551">hl</span>&nbsp;<span class="op" id="4359554">=</span>&nbsp;<span class="op" id="4359556">&amp;</span><span class="ident" id="4359557"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359558">.</span><span class="ident" id="4359559">h1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359564"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359565">.</span><span class="ident" id="4359566">hd</span>&nbsp;<span class="op" id="4359569">=</span>&nbsp;<span class="op" id="4359571">&amp;</span><span class="ident" id="4359572"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359573">.</span><span class="ident" id="4359574">h2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359579"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359580">.</span><span class="ident" id="4359581">huffmanBlock</span><span class="op" id="4359593">(</span><span class="op" id="4359594">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359597">default</span><span class="op" id="4359604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4359608">//&nbsp;3&nbsp;is&nbsp;reserved.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359628"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359629">.</span><span class="ident" id="4359630">err</span>&nbsp;<span class="op" id="4359634">=</span>&nbsp;<span class="ident" id="4359636"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4359653">(</span><span class="ident" id="4359654"><a href="/compress/flate/inflate.go.html#4358994">f</a></span><span class="op" id="4359655">.</span><span class="ident" id="4359656">roffset</span><span class="op" id="4359663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359666">}</span><br>
<span class="lineno"></span><span class="op" id="4359668">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="4359671">func</span>&nbsp;<span class="op" id="4359676">(</span><span class="ident" id="4359677">f</span>&nbsp;<span class="op" id="4359679">*</span><span class="ident" id="4359680"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4359692">)</span>&nbsp;<span class="ident" id="4359694">Read</span><span class="op" id="4359698">(</span><span class="ident" id="4359699">b</span>&nbsp;<span class="op" id="4359701">[</span><span class="op" id="4359702">]</span><span class="builtintype" id="4359703">byte</span><span class="op" id="4359707">)</span>&nbsp;<span class="op" id="4359709">(</span><span class="builtintype" id="4359710">int</span><span class="op" id="4359713">,</span>&nbsp;<span class="builtintype" id="4359715">error</span><span class="op" id="4359720">)</span>&nbsp;<span class="op" id="4359722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359725">for</span>&nbsp;<span class="op" id="4359729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359733">if</span>&nbsp;<span class="builtinfunc" id="4359736">len</span><span class="op" id="4359739">(</span><span class="ident" id="4359740"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359741">.</span><span class="ident" id="4359742">toRead</span><span class="op" id="4359748">)</span>&nbsp;<span class="op" id="4359750">&gt;</span>&nbsp;<span class="num" id="4359752">0</span>&nbsp;<span class="op" id="4359754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359759">n</span>&nbsp;<span class="op" id="4359761">:=</span>&nbsp;<span class="builtinfunc" id="4359764">copy</span><span class="op" id="4359768">(</span><span class="ident" id="4359769"><a href="/compress/flate/inflate.go.html#4359699">b</a></span><span class="op" id="4359770">,</span>&nbsp;<span class="ident" id="4359772"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359773">.</span><span class="ident" id="4359774">toRead</span><span class="op" id="4359780">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359785"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359786">.</span><span class="ident" id="4359787">toRead</span>&nbsp;<span class="op" id="4359794">=</span>&nbsp;<span class="ident" id="4359796"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359797">.</span><span class="ident" id="4359798">toRead</span><span class="op" id="4359804">[</span><span class="ident" id="4359805"><a href="/compress/flate/inflate.go.html#4359759">n</a></span><span class="op" id="4359806">:</span><span class="op" id="4359807">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359812">return</span>&nbsp;<span class="ident" id="4359819"><a href="/compress/flate/inflate.go.html#4359759">n</a></span><span class="op" id="4359820">,</span>&nbsp;<span class="ident" id="4359822">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359832">if</span>&nbsp;<span class="ident" id="4359835"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359836">.</span><span class="ident" id="4359837">err</span>&nbsp;<span class="op" id="4359841">!=</span>&nbsp;<span class="ident" id="4359844">nil</span>&nbsp;<span class="op" id="4359848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359853">return</span>&nbsp;<span class="num" id="4359860">0</span><span class="op" id="4359861">,</span>&nbsp;<span class="ident" id="4359863"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359864">.</span><span class="ident" id="4359865">err</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4359875"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359876">.</span><span class="ident" id="4359877">step</span><span class="op" id="4359881">(</span><span class="ident" id="4359882"><a href="/compress/flate/inflate.go.html#4359677">f</a></span><span class="op" id="4359883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359886">}</span><br>
<span class="lineno"></span><span class="op" id="4359888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4359891">func</span>&nbsp;<span class="op" id="4359896">(</span><span class="ident" id="4359897">f</span>&nbsp;<span class="op" id="4359899">*</span><span class="ident" id="4359900"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4359912">)</span>&nbsp;<span class="ident" id="4359914">Close</span><span class="op" id="4359919">(</span><span class="op" id="4359920">)</span>&nbsp;<span class="builtintype" id="4359922">error</span>&nbsp;<span class="op" id="4359928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359931">if</span>&nbsp;<span class="ident" id="4359934"><a href="/compress/flate/inflate.go.html#4359897">f</a></span><span class="op" id="4359935">.</span><span class="ident" id="4359936">err</span>&nbsp;<span class="op" id="4359940">==</span>&nbsp;<span class="ident" id="4359943"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4359945">.</span><span class="ident" id="4359946">EOF</span>&nbsp;<span class="op" id="4359950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359954">return</span>&nbsp;<span class="ident" id="4359961">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4359966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4359969">return</span>&nbsp;<span class="ident" id="4359976"><a href="/compress/flate/inflate.go.html#4359897">f</a></span><span class="op" id="4359977">.</span><span class="ident" id="4359978">err</span><br>
<span class="lineno">295</span><span class="op" id="4359982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4359985">//&nbsp;RFC&nbsp;1951&nbsp;section&nbsp;3.2.7.</span><br>
<span class="lineno"></span><span class="comment" id="4360012">//&nbsp;Compression&nbsp;with&nbsp;dynamic&nbsp;Huffman&nbsp;codes</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="keyword" id="4360055">var</span>&nbsp;<span class="ident" id="4360059">codeOrder</span>&nbsp;<span class="op" id="4360069">=</span>&nbsp;<span class="op" id="4360071">[</span><span class="op" id="4360072">...</span><span class="op" id="4360075">]</span><span class="builtintype" id="4360076">int</span><span class="op" id="4360079">{</span><span class="num" id="4360080">16</span><span class="op" id="4360082">,</span>&nbsp;<span class="num" id="4360084">17</span><span class="op" id="4360086">,</span>&nbsp;<span class="num" id="4360088">18</span><span class="op" id="4360090">,</span>&nbsp;<span class="num" id="4360092">0</span><span class="op" id="4360093">,</span>&nbsp;<span class="num" id="4360095">8</span><span class="op" id="4360096">,</span>&nbsp;<span class="num" id="4360098">7</span><span class="op" id="4360099">,</span>&nbsp;<span class="num" id="4360101">9</span><span class="op" id="4360102">,</span>&nbsp;<span class="num" id="4360104">6</span><span class="op" id="4360105">,</span>&nbsp;<span class="num" id="4360107">10</span><span class="op" id="4360109">,</span>&nbsp;<span class="num" id="4360111">5</span><span class="op" id="4360112">,</span>&nbsp;<span class="num" id="4360114">11</span><span class="op" id="4360116">,</span>&nbsp;<span class="num" id="4360118">4</span><span class="op" id="4360119">,</span>&nbsp;<span class="num" id="4360121">12</span><span class="op" id="4360123">,</span>&nbsp;<span class="num" id="4360125">3</span><span class="op" id="4360126">,</span>&nbsp;<span class="num" id="4360128">13</span><span class="op" id="4360130">,</span>&nbsp;<span class="num" id="4360132">2</span><span class="op" id="4360133">,</span>&nbsp;<span class="num" id="4360135">14</span><span class="op" id="4360137">,</span>&nbsp;<span class="num" id="4360139">1</span><span class="op" id="4360140">,</span>&nbsp;<span class="num" id="4360142">15</span><span class="op" id="4360144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4360147">func</span>&nbsp;<span class="op" id="4360152">(</span><span class="ident" id="4360153">f</span>&nbsp;<span class="op" id="4360155">*</span><span class="ident" id="4360156"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4360168">)</span>&nbsp;<span class="ident" id="4360170">readHuffman</span><span class="op" id="4360181">(</span><span class="op" id="4360182">)</span>&nbsp;<span class="builtintype" id="4360184">error</span>&nbsp;<span class="op" id="4360190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4360193">//&nbsp;HLIT[5],&nbsp;HDIST[5],&nbsp;HCLEN[4].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360226">for</span>&nbsp;<span class="ident" id="4360230"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360231">.</span><span class="ident" id="4360232">nb</span>&nbsp;<span class="op" id="4360235">&lt;</span>&nbsp;<span class="num" id="4360237">5</span><span class="op" id="4360238">+</span><span class="num" id="4360239">5</span><span class="op" id="4360240">+</span><span class="num" id="4360241">4</span>&nbsp;<span class="op" id="4360243">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360247">if</span>&nbsp;<span class="ident" id="4360250">err</span>&nbsp;<span class="op" id="4360254">:=</span>&nbsp;<span class="ident" id="4360257"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360258">.</span><span class="ident" id="4360259">moreBits</span><span class="op" id="4360267">(</span><span class="op" id="4360268">)</span><span class="op" id="4360269">;</span>&nbsp;<span class="ident" id="4360271"><a href="/compress/flate/inflate.go.html#4360250">err</a></span>&nbsp;<span class="op" id="4360275">!=</span>&nbsp;<span class="ident" id="4360278">nil</span>&nbsp;<span class="op" id="4360282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360287">return</span>&nbsp;<span class="ident" id="4360294"><a href="/compress/flate/inflate.go.html#4360250">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360306">nlit</span>&nbsp;<span class="op" id="4360311">:=</span>&nbsp;<span class="builtintype" id="4360314">int</span><span class="op" id="4360317">(</span><span class="ident" id="4360318"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360319">.</span><span class="ident" id="4360320">b</span><span class="op" id="4360321">&amp;</span><span class="num" id="4360322">0x1F</span><span class="op" id="4360326">)</span>&nbsp;<span class="op" id="4360328">+</span>&nbsp;<span class="num" id="4360330">257</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360335">if</span>&nbsp;<span class="ident" id="4360338"><a href="/compress/flate/inflate.go.html#4360306">nlit</a></span>&nbsp;<span class="op" id="4360343">&gt;</span>&nbsp;<span class="ident" id="4360345"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span>&nbsp;<span class="op" id="4360352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360356">return</span>&nbsp;<span class="ident" id="4360363"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4360380">(</span><span class="ident" id="4360381"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360382">.</span><span class="ident" id="4360383">roffset</span><span class="op" id="4360390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360396"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360397">.</span><span class="ident" id="4360398">b</span>&nbsp;<span class="op" id="4360400">&gt;&gt;=</span>&nbsp;<span class="num" id="4360404">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360407">ndist</span>&nbsp;<span class="op" id="4360413">:=</span>&nbsp;<span class="builtintype" id="4360416">int</span><span class="op" id="4360419">(</span><span class="ident" id="4360420"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360421">.</span><span class="ident" id="4360422">b</span><span class="op" id="4360423">&amp;</span><span class="num" id="4360424">0x1F</span><span class="op" id="4360428">)</span>&nbsp;<span class="op" id="4360430">+</span>&nbsp;<span class="num" id="4360432">1</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4360435">//&nbsp;maxDist&nbsp;is&nbsp;32,&nbsp;so&nbsp;ndist&nbsp;is&nbsp;always&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360480"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360481">.</span><span class="ident" id="4360482">b</span>&nbsp;<span class="op" id="4360484">&gt;&gt;=</span>&nbsp;<span class="num" id="4360488">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360491">nclen</span>&nbsp;<span class="op" id="4360497">:=</span>&nbsp;<span class="builtintype" id="4360500">int</span><span class="op" id="4360503">(</span><span class="ident" id="4360504"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360505">.</span><span class="ident" id="4360506">b</span><span class="op" id="4360507">&amp;</span><span class="num" id="4360508">0xF</span><span class="op" id="4360511">)</span>&nbsp;<span class="op" id="4360513">+</span>&nbsp;<span class="num" id="4360515">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4360518">//&nbsp;numCodes&nbsp;is&nbsp;19,&nbsp;so&nbsp;nclen&nbsp;is&nbsp;always&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360564"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360565">.</span><span class="ident" id="4360566">b</span>&nbsp;<span class="op" id="4360568">&gt;&gt;=</span>&nbsp;<span class="num" id="4360572">4</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360575"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360576">.</span><span class="ident" id="4360577">nb</span>&nbsp;<span class="op" id="4360580">-=</span>&nbsp;<span class="num" id="4360583">5</span>&nbsp;<span class="op" id="4360585">+</span>&nbsp;<span class="num" id="4360587">5</span>&nbsp;<span class="op" id="4360589">+</span>&nbsp;<span class="num" id="4360591">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4360595">//&nbsp;(HCLEN+4)*3&nbsp;bits:&nbsp;code&nbsp;lengths&nbsp;in&nbsp;the&nbsp;magic&nbsp;codeOrder&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360660">for</span>&nbsp;<span class="ident" id="4360664">i</span>&nbsp;<span class="op" id="4360666">:=</span>&nbsp;<span class="num" id="4360669">0</span><span class="op" id="4360670">;</span>&nbsp;<span class="ident" id="4360672"><a href="/compress/flate/inflate.go.html#4360664">i</a></span>&nbsp;<span class="op" id="4360674">&lt;</span>&nbsp;<span class="ident" id="4360676"><a href="/compress/flate/inflate.go.html#4360491">nclen</a></span><span class="op" id="4360681">;</span>&nbsp;<span class="ident" id="4360683"><a href="/compress/flate/inflate.go.html#4360664">i</a></span><span class="op" id="4360684">++</span>&nbsp;<span class="op" id="4360687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360691">for</span>&nbsp;<span class="ident" id="4360695"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360696">.</span><span class="ident" id="4360697">nb</span>&nbsp;<span class="op" id="4360700">&lt;</span>&nbsp;<span class="num" id="4360702">3</span>&nbsp;<span class="op" id="4360704">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360709">if</span>&nbsp;<span class="ident" id="4360712">err</span>&nbsp;<span class="op" id="4360716">:=</span>&nbsp;<span class="ident" id="4360719"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360720">.</span><span class="ident" id="4360721">moreBits</span><span class="op" id="4360729">(</span><span class="op" id="4360730">)</span><span class="op" id="4360731">;</span>&nbsp;<span class="ident" id="4360733"><a href="/compress/flate/inflate.go.html#4360712">err</a></span>&nbsp;<span class="op" id="4360737">!=</span>&nbsp;<span class="ident" id="4360740">nil</span>&nbsp;<span class="op" id="4360744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360750">return</span>&nbsp;<span class="ident" id="4360757"><a href="/compress/flate/inflate.go.html#4360712">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360772"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360773">.</span><span class="ident" id="4360774">codebits</span><span class="op" id="4360782">[</span><span class="ident" id="4360783"><a href="/compress/flate/inflate.go.html#4360059">codeOrder</a></span><span class="op" id="4360792">[</span><span class="ident" id="4360793"><a href="/compress/flate/inflate.go.html#4360664">i</a></span><span class="op" id="4360794">]</span><span class="op" id="4360795">]</span>&nbsp;<span class="op" id="4360797">=</span>&nbsp;<span class="builtintype" id="4360799">int</span><span class="op" id="4360802">(</span><span class="ident" id="4360803"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360804">.</span><span class="ident" id="4360805">b</span>&nbsp;<span class="op" id="4360807">&amp;</span>&nbsp;<span class="num" id="4360809">0x7</span><span class="op" id="4360812">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360816"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360817">.</span><span class="ident" id="4360818">b</span>&nbsp;<span class="op" id="4360820">&gt;&gt;=</span>&nbsp;<span class="num" id="4360824">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360828"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360829">.</span><span class="ident" id="4360830">nb</span>&nbsp;<span class="op" id="4360833">-=</span>&nbsp;<span class="num" id="4360836">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360842">for</span>&nbsp;<span class="ident" id="4360846">i</span>&nbsp;<span class="op" id="4360848">:=</span>&nbsp;<span class="ident" id="4360851"><a href="/compress/flate/inflate.go.html#4360491">nclen</a></span><span class="op" id="4360856">;</span>&nbsp;<span class="ident" id="4360858"><a href="/compress/flate/inflate.go.html#4360846">i</a></span>&nbsp;<span class="op" id="4360860">&lt;</span>&nbsp;<span class="builtinfunc" id="4360862">len</span><span class="op" id="4360865">(</span><span class="ident" id="4360866"><a href="/compress/flate/inflate.go.html#4360059">codeOrder</a></span><span class="op" id="4360875">)</span><span class="op" id="4360876">;</span>&nbsp;<span class="ident" id="4360878"><a href="/compress/flate/inflate.go.html#4360846">i</a></span><span class="op" id="4360879">++</span>&nbsp;<span class="op" id="4360882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4360886"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360887">.</span><span class="ident" id="4360888">codebits</span><span class="op" id="4360896">[</span><span class="ident" id="4360897"><a href="/compress/flate/inflate.go.html#4360059">codeOrder</a></span><span class="op" id="4360906">[</span><span class="ident" id="4360907"><a href="/compress/flate/inflate.go.html#4360846">i</a></span><span class="op" id="4360908">]</span><span class="op" id="4360909">]</span>&nbsp;<span class="op" id="4360911">=</span>&nbsp;<span class="num" id="4360913">0</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360919">if</span>&nbsp;<span class="op" id="4360922">!</span><span class="ident" id="4360923"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360924">.</span><span class="ident" id="4360925">h1</span><span class="op" id="4360927">.</span><span class="ident" id="4360928">init</span><span class="op" id="4360932">(</span><span class="ident" id="4360933"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360934">.</span><span class="ident" id="4360935">codebits</span><span class="op" id="4360943">[</span><span class="num" id="4360944">0</span><span class="op" id="4360945">:</span><span class="op" id="4360946">]</span><span class="op" id="4360947">)</span>&nbsp;<span class="op" id="4360949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4360953">return</span>&nbsp;<span class="ident" id="4360960"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4360977">(</span><span class="ident" id="4360978"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4360979">.</span><span class="ident" id="4360980">roffset</span><span class="op" id="4360987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4360990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4360994">//&nbsp;HLIT&nbsp;+&nbsp;257&nbsp;code&nbsp;lengths,&nbsp;HDIST&nbsp;+&nbsp;1&nbsp;code&nbsp;lengths,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4361047">//&nbsp;using&nbsp;the&nbsp;code&nbsp;length&nbsp;Huffman&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361087">for</span>&nbsp;<span class="ident" id="4361091">i</span><span class="op" id="4361092">,</span>&nbsp;<span class="ident" id="4361094">n</span>&nbsp;<span class="op" id="4361096">:=</span>&nbsp;<span class="num" id="4361099">0</span><span class="op" id="4361100">,</span>&nbsp;<span class="ident" id="4361102"><a href="/compress/flate/inflate.go.html#4360306">nlit</a></span><span class="op" id="4361106">+</span><span class="ident" id="4361107"><a href="/compress/flate/inflate.go.html#4360407">ndist</a></span><span class="op" id="4361112">;</span>&nbsp;<span class="ident" id="4361114"><a href="/compress/flate/inflate.go.html#4361091">i</a></span>&nbsp;<span class="op" id="4361116">&lt;</span>&nbsp;<span class="ident" id="4361118"><a href="/compress/flate/inflate.go.html#4361094">n</a></span><span class="op" id="4361119">;</span>&nbsp;<span class="op" id="4361121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361125">x</span><span class="op" id="4361126">,</span>&nbsp;<span class="ident" id="4361128">err</span>&nbsp;<span class="op" id="4361132">:=</span>&nbsp;<span class="ident" id="4361135"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361136">.</span><span class="ident" id="4361137">huffSym</span><span class="op" id="4361144">(</span><span class="op" id="4361145">&amp;</span><span class="ident" id="4361146"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361147">.</span><span class="ident" id="4361148">h1</span><span class="op" id="4361150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361154">if</span>&nbsp;<span class="ident" id="4361157"><a href="/compress/flate/inflate.go.html#4361128">err</a></span>&nbsp;<span class="op" id="4361161">!=</span>&nbsp;<span class="ident" id="4361164">nil</span>&nbsp;<span class="op" id="4361168">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361173">return</span>&nbsp;<span class="ident" id="4361180"><a href="/compress/flate/inflate.go.html#4361128">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361190">if</span>&nbsp;<span class="ident" id="4361193"><a href="/compress/flate/inflate.go.html#4361125">x</a></span>&nbsp;<span class="op" id="4361195">&lt;</span>&nbsp;<span class="num" id="4361197">16</span>&nbsp;<span class="op" id="4361200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4361205">//&nbsp;Actual&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361226"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361227">.</span><span class="ident" id="4361228">bits</span><span class="op" id="4361232">[</span><span class="ident" id="4361233"><a href="/compress/flate/inflate.go.html#4361091">i</a></span><span class="op" id="4361234">]</span>&nbsp;<span class="op" id="4361236">=</span>&nbsp;<span class="ident" id="4361238"><a href="/compress/flate/inflate.go.html#4361125">x</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361243"><a href="/compress/flate/inflate.go.html#4361091">i</a></span><span class="op" id="4361244">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361250">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4361265">//&nbsp;Repeat&nbsp;previous&nbsp;length&nbsp;or&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361302">var</span>&nbsp;<span class="ident" id="4361306">rep</span>&nbsp;<span class="builtintype" id="4361310">int</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361316">var</span>&nbsp;<span class="ident" id="4361320">nb</span>&nbsp;<span class="builtintype" id="4361323">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361330">var</span>&nbsp;<span class="ident" id="4361334">b</span>&nbsp;<span class="builtintype" id="4361336">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361342">switch</span>&nbsp;<span class="ident" id="4361349"><a href="/compress/flate/inflate.go.html#4361125">x</a></span>&nbsp;<span class="op" id="4361351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361355">default</span><span class="op" id="4361362">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361367">return</span>&nbsp;<span class="ident" id="4361374"><a href="/compress/flate/inflate.go.html#4353403">InternalError</a></span><span class="op" id="4361387">(</span><span class="string" id="4361388">&#34;unexpected&nbsp;length&nbsp;code&#34;</span><span class="op" id="4361412">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361416">case</span>&nbsp;<span class="num" id="4361421">16</span><span class="op" id="4361423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361428"><a href="/compress/flate/inflate.go.html#4361306">rep</a></span>&nbsp;<span class="op" id="4361432">=</span>&nbsp;<span class="num" id="4361434">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361439"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span>&nbsp;<span class="op" id="4361442">=</span>&nbsp;<span class="num" id="4361444">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361449">if</span>&nbsp;<span class="ident" id="4361452"><a href="/compress/flate/inflate.go.html#4361091">i</a></span>&nbsp;<span class="op" id="4361454">==</span>&nbsp;<span class="num" id="4361457">0</span>&nbsp;<span class="op" id="4361459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361465">return</span>&nbsp;<span class="ident" id="4361472"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4361489">(</span><span class="ident" id="4361490"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361491">.</span><span class="ident" id="4361492">roffset</span><span class="op" id="4361499">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361509"><a href="/compress/flate/inflate.go.html#4361334">b</a></span>&nbsp;<span class="op" id="4361511">=</span>&nbsp;<span class="ident" id="4361513"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361514">.</span><span class="ident" id="4361515">bits</span><span class="op" id="4361519">[</span><span class="ident" id="4361520"><a href="/compress/flate/inflate.go.html#4361091">i</a></span><span class="op" id="4361521">-</span><span class="num" id="4361522">1</span><span class="op" id="4361523">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361527">case</span>&nbsp;<span class="num" id="4361532">17</span><span class="op" id="4361534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361539"><a href="/compress/flate/inflate.go.html#4361306">rep</a></span>&nbsp;<span class="op" id="4361543">=</span>&nbsp;<span class="num" id="4361545">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361550"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span>&nbsp;<span class="op" id="4361553">=</span>&nbsp;<span class="num" id="4361555">3</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361560"><a href="/compress/flate/inflate.go.html#4361334">b</a></span>&nbsp;<span class="op" id="4361562">=</span>&nbsp;<span class="num" id="4361564">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361568">case</span>&nbsp;<span class="num" id="4361573">18</span><span class="op" id="4361575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361580"><a href="/compress/flate/inflate.go.html#4361306">rep</a></span>&nbsp;<span class="op" id="4361584">=</span>&nbsp;<span class="num" id="4361586">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361592"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span>&nbsp;<span class="op" id="4361595">=</span>&nbsp;<span class="num" id="4361597">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361602"><a href="/compress/flate/inflate.go.html#4361334">b</a></span>&nbsp;<span class="op" id="4361604">=</span>&nbsp;<span class="num" id="4361606">0</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361614">for</span>&nbsp;<span class="ident" id="4361618"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361619">.</span><span class="ident" id="4361620">nb</span>&nbsp;<span class="op" id="4361623">&lt;</span>&nbsp;<span class="ident" id="4361625"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span>&nbsp;<span class="op" id="4361628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361633">if</span>&nbsp;<span class="ident" id="4361636">err</span>&nbsp;<span class="op" id="4361640">:=</span>&nbsp;<span class="ident" id="4361643"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361644">.</span><span class="ident" id="4361645">moreBits</span><span class="op" id="4361653">(</span><span class="op" id="4361654">)</span><span class="op" id="4361655">;</span>&nbsp;<span class="ident" id="4361657"><a href="/compress/flate/inflate.go.html#4361636">err</a></span>&nbsp;<span class="op" id="4361661">!=</span>&nbsp;<span class="ident" id="4361664">nil</span>&nbsp;<span class="op" id="4361668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361674">return</span>&nbsp;<span class="ident" id="4361681"><a href="/compress/flate/inflate.go.html#4361636">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361688">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361696"><a href="/compress/flate/inflate.go.html#4361306">rep</a></span>&nbsp;<span class="op" id="4361700">+=</span>&nbsp;<span class="builtintype" id="4361703">int</span><span class="op" id="4361706">(</span><span class="ident" id="4361707"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361708">.</span><span class="ident" id="4361709">b</span>&nbsp;<span class="op" id="4361711">&amp;</span>&nbsp;<span class="builtintype" id="4361713">uint32</span><span class="op" id="4361719">(</span><span class="num" id="4361720">1</span><span class="op" id="4361721">&lt;&lt;</span><span class="ident" id="4361723"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span><span class="op" id="4361725">-</span><span class="num" id="4361726">1</span><span class="op" id="4361727">)</span><span class="op" id="4361728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361732"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361733">.</span><span class="ident" id="4361734">b</span>&nbsp;<span class="op" id="4361736">&gt;&gt;=</span>&nbsp;<span class="ident" id="4361740"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361745"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361746">.</span><span class="ident" id="4361747">nb</span>&nbsp;<span class="op" id="4361750">-=</span>&nbsp;<span class="ident" id="4361753"><a href="/compress/flate/inflate.go.html#4361320">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361758">if</span>&nbsp;<span class="ident" id="4361761"><a href="/compress/flate/inflate.go.html#4361091">i</a></span><span class="op" id="4361762">+</span><span class="ident" id="4361763"><a href="/compress/flate/inflate.go.html#4361306">rep</a></span>&nbsp;<span class="op" id="4361767">&gt;</span>&nbsp;<span class="ident" id="4361769"><a href="/compress/flate/inflate.go.html#4361094">n</a></span>&nbsp;<span class="op" id="4361771">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361776">return</span>&nbsp;<span class="ident" id="4361783"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4361800">(</span><span class="ident" id="4361801"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361802">.</span><span class="ident" id="4361803">roffset</span><span class="op" id="4361810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361818">for</span>&nbsp;<span class="ident" id="4361822">j</span>&nbsp;<span class="op" id="4361824">:=</span>&nbsp;<span class="num" id="4361827">0</span><span class="op" id="4361828">;</span>&nbsp;<span class="ident" id="4361830"><a href="/compress/flate/inflate.go.html#4361822">j</a></span>&nbsp;<span class="op" id="4361832">&lt;</span>&nbsp;<span class="ident" id="4361834"><a href="/compress/flate/inflate.go.html#4361306">rep</a></span><span class="op" id="4361837">;</span>&nbsp;<span class="ident" id="4361839"><a href="/compress/flate/inflate.go.html#4361822">j</a></span><span class="op" id="4361840">++</span>&nbsp;<span class="op" id="4361843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361848"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361849">.</span><span class="ident" id="4361850">bits</span><span class="op" id="4361854">[</span><span class="ident" id="4361855"><a href="/compress/flate/inflate.go.html#4361091">i</a></span><span class="op" id="4361856">]</span>&nbsp;<span class="op" id="4361858">=</span>&nbsp;<span class="ident" id="4361860"><a href="/compress/flate/inflate.go.html#4361334">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4361865"><a href="/compress/flate/inflate.go.html#4361091">i</a></span><span class="op" id="4361866">++</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361878">if</span>&nbsp;<span class="op" id="4361881">!</span><span class="ident" id="4361882"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361883">.</span><span class="ident" id="4361884">h1</span><span class="op" id="4361886">.</span><span class="ident" id="4361887">init</span><span class="op" id="4361891">(</span><span class="ident" id="4361892"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361893">.</span><span class="ident" id="4361894">bits</span><span class="op" id="4361898">[</span><span class="num" id="4361899">0</span><span class="op" id="4361900">:</span><span class="ident" id="4361901"><a href="/compress/flate/inflate.go.html#4360306">nlit</a></span><span class="op" id="4361905">]</span><span class="op" id="4361906">)</span>&nbsp;<span class="op" id="4361908">||</span>&nbsp;<span class="op" id="4361911">!</span><span class="ident" id="4361912"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361913">.</span><span class="ident" id="4361914">h2</span><span class="op" id="4361916">.</span><span class="ident" id="4361917">init</span><span class="op" id="4361921">(</span><span class="ident" id="4361922"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361923">.</span><span class="ident" id="4361924">bits</span><span class="op" id="4361928">[</span><span class="ident" id="4361929"><a href="/compress/flate/inflate.go.html#4360306">nlit</a></span><span class="op" id="4361933">:</span><span class="ident" id="4361934"><a href="/compress/flate/inflate.go.html#4360306">nlit</a></span><span class="op" id="4361938">+</span><span class="ident" id="4361939"><a href="/compress/flate/inflate.go.html#4360407">ndist</a></span><span class="op" id="4361944">]</span><span class="op" id="4361945">)</span>&nbsp;<span class="op" id="4361947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361951">return</span>&nbsp;<span class="ident" id="4361958"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4361975">(</span><span class="ident" id="4361976"><a href="/compress/flate/inflate.go.html#4360153">f</a></span><span class="op" id="4361977">.</span><span class="ident" id="4361978">roffset</span><span class="op" id="4361985">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4361988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4361992">return</span>&nbsp;<span class="ident" id="4361999">nil</span><br>
<span class="lineno"></span><span class="op" id="4362003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="4362006">//&nbsp;Decode&nbsp;a&nbsp;single&nbsp;Huffman&nbsp;block&nbsp;from&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="4362047">//&nbsp;hl&nbsp;and&nbsp;hd&nbsp;are&nbsp;the&nbsp;Huffman&nbsp;states&nbsp;for&nbsp;the&nbsp;lit/length&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="4362109">//&nbsp;and&nbsp;the&nbsp;distance&nbsp;values,&nbsp;respectively.&nbsp;&nbsp;If&nbsp;hd&nbsp;==&nbsp;nil,&nbsp;using&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4362176">//&nbsp;fixed&nbsp;distance&nbsp;encoding&nbsp;associated&nbsp;with&nbsp;fixed&nbsp;Huffman&nbsp;blocks.</span><br>
<span class="lineno"></span><span class="keyword" id="4362241">func</span>&nbsp;<span class="op" id="4362246">(</span><span class="ident" id="4362247">f</span>&nbsp;<span class="op" id="4362249">*</span><span class="ident" id="4362250"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4362262">)</span>&nbsp;<span class="ident" id="4362264">huffmanBlock</span><span class="op" id="4362276">(</span><span class="op" id="4362277">)</span>&nbsp;<span class="op" id="4362279">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362282">for</span>&nbsp;<span class="op" id="4362286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362290">v</span><span class="op" id="4362291">,</span>&nbsp;<span class="ident" id="4362293">err</span>&nbsp;<span class="op" id="4362297">:=</span>&nbsp;<span class="ident" id="4362300"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362301">.</span><span class="ident" id="4362302">huffSym</span><span class="op" id="4362309">(</span><span class="ident" id="4362310"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362311">.</span><span class="ident" id="4362312">hl</span><span class="op" id="4362314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362318">if</span>&nbsp;<span class="ident" id="4362321"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4362325">!=</span>&nbsp;<span class="ident" id="4362328">nil</span>&nbsp;<span class="op" id="4362332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362337"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362338">.</span><span class="ident" id="4362339">err</span>&nbsp;<span class="op" id="4362343">=</span>&nbsp;<span class="ident" id="4362345"><a href="/compress/flate/inflate.go.html#4362293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362352">return</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4362361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362365">var</span>&nbsp;<span class="ident" id="4362369">n</span>&nbsp;<span class="builtintype" id="4362371">uint</span>&nbsp;<span class="comment" id="4362376">//&nbsp;number&nbsp;of&nbsp;bits&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362402">var</span>&nbsp;<span class="ident" id="4362406">length</span>&nbsp;<span class="builtintype" id="4362413">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362419">switch</span>&nbsp;<span class="op" id="4362426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362430">case</span>&nbsp;<span class="ident" id="4362435"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362437">&lt;</span>&nbsp;<span class="num" id="4362439">256</span><span class="op" id="4362442">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362447"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362448">.</span><span class="ident" id="4362449">hist</span><span class="op" id="4362453">[</span><span class="ident" id="4362454"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362455">.</span><span class="ident" id="4362456">hp</span><span class="op" id="4362458">]</span>&nbsp;<span class="op" id="4362460">=</span>&nbsp;<span class="builtintype" id="4362462">byte</span><span class="op" id="4362466">(</span><span class="ident" id="4362467"><a href="/compress/flate/inflate.go.html#4362290">v</a></span><span class="op" id="4362468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362473"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362474">.</span><span class="ident" id="4362475">hp</span><span class="op" id="4362477">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362483">if</span>&nbsp;<span class="ident" id="4362486"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362487">.</span><span class="ident" id="4362488">hp</span>&nbsp;<span class="op" id="4362491">==</span>&nbsp;<span class="builtinfunc" id="4362494">len</span><span class="op" id="4362497">(</span><span class="ident" id="4362498"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362499">.</span><span class="ident" id="4362500">hist</span><span class="op" id="4362504">)</span>&nbsp;<span class="op" id="4362506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4362512">//&nbsp;After&nbsp;the&nbsp;flush,&nbsp;continue&nbsp;this&nbsp;loop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362556"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362557">.</span><span class="ident" id="4362558">flush</span><span class="op" id="4362563">(</span><span class="op" id="4362564">(</span><span class="op" id="4362565">*</span><span class="ident" id="4362566"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4362578">)</span><span class="op" id="4362579">.</span><span class="ident" id="4362580">huffmanBlock</span><span class="op" id="4362592">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362598">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4362608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362613">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362624">case</span>&nbsp;<span class="ident" id="4362629"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362631">==</span>&nbsp;<span class="num" id="4362634">256</span><span class="op" id="4362637">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4362642">//&nbsp;Done&nbsp;with&nbsp;huffman&nbsp;block;&nbsp;read&nbsp;next&nbsp;block.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362690"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4362691">.</span><span class="ident" id="4362692">step</span>&nbsp;<span class="op" id="4362697">=</span>&nbsp;<span class="op" id="4362699">(</span><span class="op" id="4362700">*</span><span class="ident" id="4362701"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4362713">)</span><span class="op" id="4362714">.</span><span class="ident" id="4362715">nextBlock</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362728">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4362737">//&nbsp;otherwise,&nbsp;reference&nbsp;to&nbsp;older&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362777">case</span>&nbsp;<span class="ident" id="4362782"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362784">&lt;</span>&nbsp;<span class="num" id="4362786">265</span><span class="op" id="4362789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362794"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4362801">=</span>&nbsp;<span class="ident" id="4362803"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362805">-</span>&nbsp;<span class="op" id="4362807">(</span><span class="num" id="4362808">257</span>&nbsp;<span class="op" id="4362812">-</span>&nbsp;<span class="num" id="4362814">3</span><span class="op" id="4362815">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362820"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4362822">=</span>&nbsp;<span class="num" id="4362824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362828">case</span>&nbsp;<span class="ident" id="4362833"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362835">&lt;</span>&nbsp;<span class="num" id="4362837">269</span><span class="op" id="4362840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362845"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4362852">=</span>&nbsp;<span class="ident" id="4362854"><a href="/compress/flate/inflate.go.html#4362290">v</a></span><span class="op" id="4362855">*</span><span class="num" id="4362856">2</span>&nbsp;<span class="op" id="4362858">-</span>&nbsp;<span class="op" id="4362860">(</span><span class="num" id="4362861">265</span><span class="op" id="4362864">*</span><span class="num" id="4362865">2</span>&nbsp;<span class="op" id="4362867">-</span>&nbsp;<span class="num" id="4362869">11</span><span class="op" id="4362871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362876"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4362878">=</span>&nbsp;<span class="num" id="4362880">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362884">case</span>&nbsp;<span class="ident" id="4362889"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362891">&lt;</span>&nbsp;<span class="num" id="4362893">273</span><span class="op" id="4362896">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362901"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4362908">=</span>&nbsp;<span class="ident" id="4362910"><a href="/compress/flate/inflate.go.html#4362290">v</a></span><span class="op" id="4362911">*</span><span class="num" id="4362912">4</span>&nbsp;<span class="op" id="4362914">-</span>&nbsp;<span class="op" id="4362916">(</span><span class="num" id="4362917">269</span><span class="op" id="4362920">*</span><span class="num" id="4362921">4</span>&nbsp;<span class="op" id="4362923">-</span>&nbsp;<span class="num" id="4362925">19</span><span class="op" id="4362927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362932"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4362934">=</span>&nbsp;<span class="num" id="4362936">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362940">case</span>&nbsp;<span class="ident" id="4362945"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4362947">&lt;</span>&nbsp;<span class="num" id="4362949">277</span><span class="op" id="4362952">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362957"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4362964">=</span>&nbsp;<span class="ident" id="4362966"><a href="/compress/flate/inflate.go.html#4362290">v</a></span><span class="op" id="4362967">*</span><span class="num" id="4362968">8</span>&nbsp;<span class="op" id="4362970">-</span>&nbsp;<span class="op" id="4362972">(</span><span class="num" id="4362973">273</span><span class="op" id="4362976">*</span><span class="num" id="4362977">8</span>&nbsp;<span class="op" id="4362979">-</span>&nbsp;<span class="num" id="4362981">35</span><span class="op" id="4362983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4362988"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4362990">=</span>&nbsp;<span class="num" id="4362992">3</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4362996">case</span>&nbsp;<span class="ident" id="4363001"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4363003">&lt;</span>&nbsp;<span class="num" id="4363005">281</span><span class="op" id="4363008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363013"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4363020">=</span>&nbsp;<span class="ident" id="4363022"><a href="/compress/flate/inflate.go.html#4362290">v</a></span><span class="op" id="4363023">*</span><span class="num" id="4363024">16</span>&nbsp;<span class="op" id="4363027">-</span>&nbsp;<span class="op" id="4363029">(</span><span class="num" id="4363030">277</span><span class="op" id="4363033">*</span><span class="num" id="4363034">16</span>&nbsp;<span class="op" id="4363037">-</span>&nbsp;<span class="num" id="4363039">67</span><span class="op" id="4363041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363046"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4363048">=</span>&nbsp;<span class="num" id="4363050">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363054">case</span>&nbsp;<span class="ident" id="4363059"><a href="/compress/flate/inflate.go.html#4362290">v</a></span>&nbsp;<span class="op" id="4363061">&lt;</span>&nbsp;<span class="num" id="4363063">285</span><span class="op" id="4363066">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363071"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4363078">=</span>&nbsp;<span class="ident" id="4363080"><a href="/compress/flate/inflate.go.html#4362290">v</a></span><span class="op" id="4363081">*</span><span class="num" id="4363082">32</span>&nbsp;<span class="op" id="4363085">-</span>&nbsp;<span class="op" id="4363087">(</span><span class="num" id="4363088">281</span><span class="op" id="4363091">*</span><span class="num" id="4363092">32</span>&nbsp;<span class="op" id="4363095">-</span>&nbsp;<span class="num" id="4363097">131</span><span class="op" id="4363100">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363105"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4363107">=</span>&nbsp;<span class="num" id="4363109">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363113">default</span><span class="op" id="4363120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363125"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4363132">=</span>&nbsp;<span class="num" id="4363134">258</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363141"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4363143">=</span>&nbsp;<span class="num" id="4363145">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363149">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363153">if</span>&nbsp;<span class="ident" id="4363156"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4363158">&gt;</span>&nbsp;<span class="num" id="4363160">0</span>&nbsp;<span class="op" id="4363162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363167">for</span>&nbsp;<span class="ident" id="4363171"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363172">.</span><span class="ident" id="4363173">nb</span>&nbsp;<span class="op" id="4363176">&lt;</span>&nbsp;<span class="ident" id="4363178"><a href="/compress/flate/inflate.go.html#4362369">n</a></span>&nbsp;<span class="op" id="4363180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363186">if</span>&nbsp;<span class="ident" id="4363189"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363193">=</span>&nbsp;<span class="ident" id="4363195"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363196">.</span><span class="ident" id="4363197">moreBits</span><span class="op" id="4363205">(</span><span class="op" id="4363206">)</span><span class="op" id="4363207">;</span>&nbsp;<span class="ident" id="4363209"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363213">!=</span>&nbsp;<span class="ident" id="4363216">nil</span>&nbsp;<span class="op" id="4363220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363227"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363228">.</span><span class="ident" id="4363229">err</span>&nbsp;<span class="op" id="4363233">=</span>&nbsp;<span class="ident" id="4363235"><a href="/compress/flate/inflate.go.html#4362293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363244">return</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363265"><a href="/compress/flate/inflate.go.html#4362406">length</a></span>&nbsp;<span class="op" id="4363272">+=</span>&nbsp;<span class="builtintype" id="4363275">int</span><span class="op" id="4363278">(</span><span class="ident" id="4363279"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363280">.</span><span class="ident" id="4363281">b</span>&nbsp;<span class="op" id="4363283">&amp;</span>&nbsp;<span class="builtintype" id="4363285">uint32</span><span class="op" id="4363291">(</span><span class="num" id="4363292">1</span><span class="op" id="4363293">&lt;&lt;</span><span class="ident" id="4363295"><a href="/compress/flate/inflate.go.html#4362369">n</a></span><span class="op" id="4363296">-</span><span class="num" id="4363297">1</span><span class="op" id="4363298">)</span><span class="op" id="4363299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363304"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363305">.</span><span class="ident" id="4363306">b</span>&nbsp;<span class="op" id="4363308">&gt;&gt;=</span>&nbsp;<span class="ident" id="4363312"><a href="/compress/flate/inflate.go.html#4362369">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363317"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363318">.</span><span class="ident" id="4363319">nb</span>&nbsp;<span class="op" id="4363322">-=</span>&nbsp;<span class="ident" id="4363325"><a href="/compress/flate/inflate.go.html#4362369">n</a></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363334">var</span>&nbsp;<span class="ident" id="4363338">dist</span>&nbsp;<span class="builtintype" id="4363343">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363349">if</span>&nbsp;<span class="ident" id="4363352"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363353">.</span><span class="ident" id="4363354">hd</span>&nbsp;<span class="op" id="4363357">==</span>&nbsp;<span class="ident" id="4363360">nil</span>&nbsp;<span class="op" id="4363364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363369">for</span>&nbsp;<span class="ident" id="4363373"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363374">.</span><span class="ident" id="4363375">nb</span>&nbsp;<span class="op" id="4363378">&lt;</span>&nbsp;<span class="num" id="4363380">5</span>&nbsp;<span class="op" id="4363382">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363388">if</span>&nbsp;<span class="ident" id="4363391"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363395">=</span>&nbsp;<span class="ident" id="4363397"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363398">.</span><span class="ident" id="4363399">moreBits</span><span class="op" id="4363407">(</span><span class="op" id="4363408">)</span><span class="op" id="4363409">;</span>&nbsp;<span class="ident" id="4363411"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363415">!=</span>&nbsp;<span class="ident" id="4363418">nil</span>&nbsp;<span class="op" id="4363422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363429"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363430">.</span><span class="ident" id="4363431">err</span>&nbsp;<span class="op" id="4363435">=</span>&nbsp;<span class="ident" id="4363437"><a href="/compress/flate/inflate.go.html#4362293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363446">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363462">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363467"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4363472">=</span>&nbsp;<span class="builtintype" id="4363474">int</span><span class="op" id="4363477">(</span><span class="ident" id="4363478"><a href="/compress/flate/reverse_bits.go.html#4369510">reverseByte</a></span><span class="op" id="4363489">[</span><span class="op" id="4363490">(</span><span class="ident" id="4363491"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363492">.</span><span class="ident" id="4363493">b</span><span class="op" id="4363494">&amp;</span><span class="num" id="4363495">0x1F</span><span class="op" id="4363499">)</span><span class="op" id="4363500">&lt;&lt;</span><span class="num" id="4363502">3</span><span class="op" id="4363503">]</span><span class="op" id="4363504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363509"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363510">.</span><span class="ident" id="4363511">b</span>&nbsp;<span class="op" id="4363513">&gt;&gt;=</span>&nbsp;<span class="num" id="4363517">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363522"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363523">.</span><span class="ident" id="4363524">nb</span>&nbsp;<span class="op" id="4363527">-=</span>&nbsp;<span class="num" id="4363530">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363534">}</span>&nbsp;<span class="keyword" id="4363536">else</span>&nbsp;<span class="op" id="4363541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363546">if</span>&nbsp;<span class="ident" id="4363549"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span><span class="op" id="4363553">,</span>&nbsp;<span class="ident" id="4363555"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363559">=</span>&nbsp;<span class="ident" id="4363561"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363562">.</span><span class="ident" id="4363563">huffSym</span><span class="op" id="4363570">(</span><span class="ident" id="4363571"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363572">.</span><span class="ident" id="4363573">hd</span><span class="op" id="4363575">)</span><span class="op" id="4363576">;</span>&nbsp;<span class="ident" id="4363578"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363582">!=</span>&nbsp;<span class="ident" id="4363585">nil</span>&nbsp;<span class="op" id="4363589">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363595"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363596">.</span><span class="ident" id="4363597">err</span>&nbsp;<span class="op" id="4363601">=</span>&nbsp;<span class="ident" id="4363603"><a href="/compress/flate/inflate.go.html#4362293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363611">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363630">switch</span>&nbsp;<span class="op" id="4363637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363641">case</span>&nbsp;<span class="ident" id="4363646"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4363651">&lt;</span>&nbsp;<span class="num" id="4363653">4</span><span class="op" id="4363654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363659"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span><span class="op" id="4363663">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363668">case</span>&nbsp;<span class="ident" id="4363673"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4363678">&gt;=</span>&nbsp;<span class="num" id="4363681">30</span><span class="op" id="4363683">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363688"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363689">.</span><span class="ident" id="4363690">err</span>&nbsp;<span class="op" id="4363694">=</span>&nbsp;<span class="ident" id="4363696"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4363713">(</span><span class="ident" id="4363714"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363715">.</span><span class="ident" id="4363716">roffset</span><span class="op" id="4363723">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363728">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363737">default</span><span class="op" id="4363744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363749">nb</span>&nbsp;<span class="op" id="4363752">:=</span>&nbsp;<span class="builtintype" id="4363755">uint</span><span class="op" id="4363759">(</span><span class="ident" id="4363760"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span><span class="op" id="4363764">-</span><span class="num" id="4363765">2</span><span class="op" id="4363766">)</span>&nbsp;<span class="op" id="4363768">&gt;&gt;</span>&nbsp;<span class="num" id="4363771">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4363776">//&nbsp;have&nbsp;1&nbsp;bit&nbsp;in&nbsp;bottom&nbsp;of&nbsp;dist,&nbsp;need&nbsp;nb&nbsp;more.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363826">extra</span>&nbsp;<span class="op" id="4363832">:=</span>&nbsp;<span class="op" id="4363835">(</span><span class="ident" id="4363836"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4363841">&amp;</span>&nbsp;<span class="num" id="4363843">1</span><span class="op" id="4363844">)</span>&nbsp;<span class="op" id="4363846">&lt;&lt;</span>&nbsp;<span class="ident" id="4363849"><a href="/compress/flate/inflate.go.html#4363749">nb</a></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363855">for</span>&nbsp;<span class="ident" id="4363859"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363860">.</span><span class="ident" id="4363861">nb</span>&nbsp;<span class="op" id="4363864">&lt;</span>&nbsp;<span class="ident" id="4363866"><a href="/compress/flate/inflate.go.html#4363749">nb</a></span>&nbsp;<span class="op" id="4363869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363875">if</span>&nbsp;<span class="ident" id="4363878"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363882">=</span>&nbsp;<span class="ident" id="4363884"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363885">.</span><span class="ident" id="4363886">moreBits</span><span class="op" id="4363894">(</span><span class="op" id="4363895">)</span><span class="op" id="4363896">;</span>&nbsp;<span class="ident" id="4363898"><a href="/compress/flate/inflate.go.html#4362293">err</a></span>&nbsp;<span class="op" id="4363902">!=</span>&nbsp;<span class="ident" id="4363905">nil</span>&nbsp;<span class="op" id="4363909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363916"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363917">.</span><span class="ident" id="4363918">err</span>&nbsp;<span class="op" id="4363922">=</span>&nbsp;<span class="ident" id="4363924"><a href="/compress/flate/inflate.go.html#4362293">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4363933">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363944">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4363949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363954"><a href="/compress/flate/inflate.go.html#4363826">extra</a></span>&nbsp;<span class="op" id="4363960">|=</span>&nbsp;<span class="builtintype" id="4363963">int</span><span class="op" id="4363966">(</span><span class="ident" id="4363967"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363968">.</span><span class="ident" id="4363969">b</span>&nbsp;<span class="op" id="4363971">&amp;</span>&nbsp;<span class="builtintype" id="4363973">uint32</span><span class="op" id="4363979">(</span><span class="num" id="4363980">1</span><span class="op" id="4363981">&lt;&lt;</span><span class="ident" id="4363983"><a href="/compress/flate/inflate.go.html#4363749">nb</a></span><span class="op" id="4363985">-</span><span class="num" id="4363986">1</span><span class="op" id="4363987">)</span><span class="op" id="4363988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4363993"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4363994">.</span><span class="ident" id="4363995">b</span>&nbsp;<span class="op" id="4363997">&gt;&gt;=</span>&nbsp;<span class="ident" id="4364001"><a href="/compress/flate/inflate.go.html#4363749">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364007"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364008">.</span><span class="ident" id="4364009">nb</span>&nbsp;<span class="op" id="4364012">-=</span>&nbsp;<span class="ident" id="4364015"><a href="/compress/flate/inflate.go.html#4363749">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364021"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4364026">=</span>&nbsp;<span class="num" id="4364028">1</span><span class="op" id="4364029">&lt;&lt;</span><span class="op" id="4364031">(</span><span class="ident" id="4364032"><a href="/compress/flate/inflate.go.html#4363749">nb</a></span><span class="op" id="4364034">+</span><span class="num" id="4364035">1</span><span class="op" id="4364036">)</span>&nbsp;<span class="op" id="4364038">+</span>&nbsp;<span class="num" id="4364040">1</span>&nbsp;<span class="op" id="4364042">+</span>&nbsp;<span class="ident" id="4364044"><a href="/compress/flate/inflate.go.html#4363826">extra</a></span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4364057">//&nbsp;Copy&nbsp;history[-dist:-dist+length]&nbsp;into&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364108">if</span>&nbsp;<span class="ident" id="4364111"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4364116">&gt;</span>&nbsp;<span class="builtinfunc" id="4364118">len</span><span class="op" id="4364121">(</span><span class="ident" id="4364122"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364123">.</span><span class="ident" id="4364124">hist</span><span class="op" id="4364128">)</span>&nbsp;<span class="op" id="4364130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364135"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364136">.</span><span class="ident" id="4364137">err</span>&nbsp;<span class="op" id="4364141">=</span>&nbsp;<span class="ident" id="4364143"><a href="/compress/flate/inflate.go.html#4353403">InternalError</a></span><span class="op" id="4364156">(</span><span class="string" id="4364157">&#34;bad&nbsp;history&nbsp;distance&#34;</span><span class="op" id="4364179">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364184">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4364198">//&nbsp;No&nbsp;check&nbsp;on&nbsp;length;&nbsp;encoding&nbsp;can&nbsp;be&nbsp;prescient.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364250">if</span>&nbsp;<span class="op" id="4364253">!</span><span class="ident" id="4364254"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364255">.</span><span class="ident" id="4364256">hfull</span>&nbsp;<span class="op" id="4364262">&amp;&amp;</span>&nbsp;<span class="ident" id="4364265"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span>&nbsp;<span class="op" id="4364270">&gt;</span>&nbsp;<span class="ident" id="4364272"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364273">.</span><span class="ident" id="4364274">hp</span>&nbsp;<span class="op" id="4364277">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364282"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364283">.</span><span class="ident" id="4364284">err</span>&nbsp;<span class="op" id="4364288">=</span>&nbsp;<span class="ident" id="4364290"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4364307">(</span><span class="ident" id="4364308"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364309">.</span><span class="ident" id="4364310">roffset</span><span class="op" id="4364317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364322">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364336"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364337">.</span><span class="ident" id="4364338">copyLen</span><span class="op" id="4364345">,</span>&nbsp;<span class="ident" id="4364347"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364348">.</span><span class="ident" id="4364349">copyDist</span>&nbsp;<span class="op" id="4364358">=</span>&nbsp;<span class="ident" id="4364360"><a href="/compress/flate/inflate.go.html#4362406">length</a></span><span class="op" id="4364366">,</span>&nbsp;<span class="ident" id="4364368"><a href="/compress/flate/inflate.go.html#4363338">dist</a></span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364375">if</span>&nbsp;<span class="ident" id="4364378"><a href="/compress/flate/inflate.go.html#4362247">f</a></span><span class="op" id="4364379">.</span><span class="ident" id="4364380">copyHist</span><span class="op" id="4364388">(</span><span class="op" id="4364389">)</span>&nbsp;<span class="op" id="4364391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364396">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364408">}</span><br>
<span class="lineno"></span><span class="op" id="4364410">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span><span class="comment" id="4364413">//&nbsp;copyHist&nbsp;copies&nbsp;f.copyLen&nbsp;bytes&nbsp;from&nbsp;f.hist&nbsp;(f.copyDist&nbsp;bytes&nbsp;ago)&nbsp;to&nbsp;itself.</span><br>
<span class="lineno"></span><span class="comment" id="4364494">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;the&nbsp;f.hist&nbsp;buffer&nbsp;is&nbsp;full.</span><br>
<span class="lineno"></span><span class="keyword" id="4364543">func</span>&nbsp;<span class="op" id="4364548">(</span><span class="ident" id="4364549">f</span>&nbsp;<span class="op" id="4364551">*</span><span class="ident" id="4364552"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4364564">)</span>&nbsp;<span class="ident" id="4364566">copyHist</span><span class="op" id="4364574">(</span><span class="op" id="4364575">)</span>&nbsp;<span class="builtintype" id="4364577">bool</span>&nbsp;<span class="op" id="4364582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364585">p</span>&nbsp;<span class="op" id="4364587">:=</span>&nbsp;<span class="ident" id="4364590"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364591">.</span><span class="ident" id="4364592">hp</span>&nbsp;<span class="op" id="4364595">-</span>&nbsp;<span class="ident" id="4364597"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364598">.</span><span class="ident" id="4364599">copyDist</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364609">if</span>&nbsp;<span class="ident" id="4364612"><a href="/compress/flate/inflate.go.html#4364585">p</a></span>&nbsp;<span class="op" id="4364614">&lt;</span>&nbsp;<span class="num" id="4364616">0</span>&nbsp;<span class="op" id="4364618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364622"><a href="/compress/flate/inflate.go.html#4364585">p</a></span>&nbsp;<span class="op" id="4364624">+=</span>&nbsp;<span class="builtinfunc" id="4364627">len</span><span class="op" id="4364630">(</span><span class="ident" id="4364631"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364632">.</span><span class="ident" id="4364633">hist</span><span class="op" id="4364637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364643">for</span>&nbsp;<span class="ident" id="4364647"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364648">.</span><span class="ident" id="4364649">copyLen</span>&nbsp;<span class="op" id="4364657">&gt;</span>&nbsp;<span class="num" id="4364659">0</span>&nbsp;<span class="op" id="4364661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364665">n</span>&nbsp;<span class="op" id="4364667">:=</span>&nbsp;<span class="ident" id="4364670"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364671">.</span><span class="ident" id="4364672">copyLen</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364682">if</span>&nbsp;<span class="ident" id="4364685">x</span>&nbsp;<span class="op" id="4364687">:=</span>&nbsp;<span class="builtinfunc" id="4364690">len</span><span class="op" id="4364693">(</span><span class="ident" id="4364694"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364695">.</span><span class="ident" id="4364696">hist</span><span class="op" id="4364700">)</span>&nbsp;<span class="op" id="4364702">-</span>&nbsp;<span class="ident" id="4364704"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364705">.</span><span class="ident" id="4364706">hp</span><span class="op" id="4364708">;</span>&nbsp;<span class="ident" id="4364710"><a href="/compress/flate/inflate.go.html#4364665">n</a></span>&nbsp;<span class="op" id="4364712">&gt;</span>&nbsp;<span class="ident" id="4364714"><a href="/compress/flate/inflate.go.html#4364685">x</a></span>&nbsp;<span class="op" id="4364716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364721"><a href="/compress/flate/inflate.go.html#4364665">n</a></span>&nbsp;<span class="op" id="4364723">=</span>&nbsp;<span class="ident" id="4364725"><a href="/compress/flate/inflate.go.html#4364685">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364733">if</span>&nbsp;<span class="ident" id="4364736">x</span>&nbsp;<span class="op" id="4364738">:=</span>&nbsp;<span class="builtinfunc" id="4364741">len</span><span class="op" id="4364744">(</span><span class="ident" id="4364745"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364746">.</span><span class="ident" id="4364747">hist</span><span class="op" id="4364751">)</span>&nbsp;<span class="op" id="4364753">-</span>&nbsp;<span class="ident" id="4364755"><a href="/compress/flate/inflate.go.html#4364585">p</a></span><span class="op" id="4364756">;</span>&nbsp;<span class="ident" id="4364758"><a href="/compress/flate/inflate.go.html#4364665">n</a></span>&nbsp;<span class="op" id="4364760">&gt;</span>&nbsp;<span class="ident" id="4364762"><a href="/compress/flate/inflate.go.html#4364736">x</a></span>&nbsp;<span class="op" id="4364764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364769"><a href="/compress/flate/inflate.go.html#4364665">n</a></span>&nbsp;<span class="op" id="4364771">=</span>&nbsp;<span class="ident" id="4364773"><a href="/compress/flate/inflate.go.html#4364736">x</a></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364781"><a href="/compress/flate/copy.go.html#4309471">forwardCopy</a></span><span class="op" id="4364792">(</span><span class="ident" id="4364793"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364794">.</span><span class="ident" id="4364795">hist</span><span class="op" id="4364799">[</span><span class="op" id="4364800">:</span><span class="op" id="4364801">]</span><span class="op" id="4364802">,</span>&nbsp;<span class="ident" id="4364804"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364805">.</span><span class="ident" id="4364806">hp</span><span class="op" id="4364808">,</span>&nbsp;<span class="ident" id="4364810"><a href="/compress/flate/inflate.go.html#4364585">p</a></span><span class="op" id="4364811">,</span>&nbsp;<span class="ident" id="4364813"><a href="/compress/flate/inflate.go.html#4364665">n</a></span><span class="op" id="4364814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364818"><a href="/compress/flate/inflate.go.html#4364585">p</a></span>&nbsp;<span class="op" id="4364820">+=</span>&nbsp;<span class="ident" id="4364823"><a href="/compress/flate/inflate.go.html#4364665">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364827"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364828">.</span><span class="ident" id="4364829">hp</span>&nbsp;<span class="op" id="4364832">+=</span>&nbsp;<span class="ident" id="4364835"><a href="/compress/flate/inflate.go.html#4364665">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364839"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364840">.</span><span class="ident" id="4364841">copyLen</span>&nbsp;<span class="op" id="4364849">-=</span>&nbsp;<span class="ident" id="4364852"><a href="/compress/flate/inflate.go.html#4364665">n</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364856">if</span>&nbsp;<span class="ident" id="4364859"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364860">.</span><span class="ident" id="4364861">hp</span>&nbsp;<span class="op" id="4364864">==</span>&nbsp;<span class="builtinfunc" id="4364867">len</span><span class="op" id="4364870">(</span><span class="ident" id="4364871"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364872">.</span><span class="ident" id="4364873">hist</span><span class="op" id="4364877">)</span>&nbsp;<span class="op" id="4364879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4364884">//&nbsp;After&nbsp;flush&nbsp;continue&nbsp;copying&nbsp;out&nbsp;of&nbsp;history.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4364935"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4364936">.</span><span class="ident" id="4364937">flush</span><span class="op" id="4364942">(</span><span class="op" id="4364943">(</span><span class="op" id="4364944">*</span><span class="ident" id="4364945"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4364957">)</span><span class="op" id="4364958">.</span><span class="ident" id="4364959">copyHuff</span><span class="op" id="4364967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364972">return</span>&nbsp;<span class="builtintype" id="4364979">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4364986">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4364990">if</span>&nbsp;<span class="ident" id="4364993"><a href="/compress/flate/inflate.go.html#4364585">p</a></span>&nbsp;<span class="op" id="4364995">==</span>&nbsp;<span class="builtinfunc" id="4364998">len</span><span class="op" id="4365001">(</span><span class="ident" id="4365002"><a href="/compress/flate/inflate.go.html#4364549">f</a></span><span class="op" id="4365003">.</span><span class="ident" id="4365004">hist</span><span class="op" id="4365008">)</span>&nbsp;<span class="op" id="4365010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365015"><a href="/compress/flate/inflate.go.html#4364585">p</a></span>&nbsp;<span class="op" id="4365017">=</span>&nbsp;<span class="num" id="4365019">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365029">return</span>&nbsp;<span class="builtintype" id="4365036">false</span><br>
<span class="lineno">550</span><span class="op" id="4365042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4365045">func</span>&nbsp;<span class="op" id="4365050">(</span><span class="ident" id="4365051">f</span>&nbsp;<span class="op" id="4365053">*</span><span class="ident" id="4365054"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4365066">)</span>&nbsp;<span class="ident" id="4365068">copyHuff</span><span class="op" id="4365076">(</span><span class="op" id="4365077">)</span>&nbsp;<span class="op" id="4365079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365082">if</span>&nbsp;<span class="ident" id="4365085"><a href="/compress/flate/inflate.go.html#4365051">f</a></span><span class="op" id="4365086">.</span><span class="ident" id="4365087">copyHist</span><span class="op" id="4365095">(</span><span class="op" id="4365096">)</span>&nbsp;<span class="op" id="4365098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365102">return</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365113"><a href="/compress/flate/inflate.go.html#4365051">f</a></span><span class="op" id="4365114">.</span><span class="ident" id="4365115">huffmanBlock</span><span class="op" id="4365127">(</span><span class="op" id="4365128">)</span><br>
<span class="lineno"></span><span class="op" id="4365130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4365133">//&nbsp;Copy&nbsp;a&nbsp;single&nbsp;uncompressed&nbsp;data&nbsp;block&nbsp;from&nbsp;input&nbsp;to&nbsp;output.</span><br>
<span class="lineno">560</span><span class="keyword" id="4365196">func</span>&nbsp;<span class="op" id="4365201">(</span><span class="ident" id="4365202">f</span>&nbsp;<span class="op" id="4365204">*</span><span class="ident" id="4365205"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4365217">)</span>&nbsp;<span class="ident" id="4365219">dataBlock</span><span class="op" id="4365228">(</span><span class="op" id="4365229">)</span>&nbsp;<span class="op" id="4365231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4365234">//&nbsp;Uncompressed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4365252">//&nbsp;Discard&nbsp;current&nbsp;half-byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365283"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365284">.</span><span class="ident" id="4365285">nb</span>&nbsp;<span class="op" id="4365288">=</span>&nbsp;<span class="num" id="4365290">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365293"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365294">.</span><span class="ident" id="4365295">b</span>&nbsp;<span class="op" id="4365297">=</span>&nbsp;<span class="num" id="4365299">0</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4365303">//&nbsp;Length&nbsp;then&nbsp;ones-complement&nbsp;of&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365346">nr</span><span class="op" id="4365348">,</span>&nbsp;<span class="ident" id="4365350">err</span>&nbsp;<span class="op" id="4365354">:=</span>&nbsp;<span class="ident" id="4365357"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4365359">.</span><span class="ident" id="4365360">ReadFull</span><span class="op" id="4365368">(</span><span class="ident" id="4365369"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365370">.</span><span class="ident" id="4365371">r</span><span class="op" id="4365372">,</span>&nbsp;<span class="ident" id="4365374"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365375">.</span><span class="ident" id="4365376">buf</span><span class="op" id="4365379">[</span><span class="num" id="4365380">0</span><span class="op" id="4365381">:</span><span class="num" id="4365382">4</span><span class="op" id="4365383">]</span><span class="op" id="4365384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365387"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365388">.</span><span class="ident" id="4365389">roffset</span>&nbsp;<span class="op" id="4365397">+=</span>&nbsp;<span class="ident" id="4365400">int64</span><span class="op" id="4365405">(</span><span class="ident" id="4365406"><a href="/compress/flate/inflate.go.html#4365346">nr</a></span><span class="op" id="4365408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365411">if</span>&nbsp;<span class="ident" id="4365414"><a href="/compress/flate/inflate.go.html#4365350">err</a></span>&nbsp;<span class="op" id="4365418">!=</span>&nbsp;<span class="ident" id="4365421">nil</span>&nbsp;<span class="op" id="4365425">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365429"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365430">.</span><span class="ident" id="4365431">err</span>&nbsp;<span class="op" id="4365435">=</span>&nbsp;<span class="op" id="4365437">&amp;</span><span class="ident" id="4365438"><a href="/compress/flate/inflate.go.html#4353583">ReadError</a></span><span class="op" id="4365447">{</span><span class="ident" id="4365448"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365449">.</span><span class="ident" id="4365450">roffset</span><span class="op" id="4365457">,</span>&nbsp;<span class="ident" id="4365459"><a href="/compress/flate/inflate.go.html#4365350">err</a></span><span class="op" id="4365462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365466">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365477">n</span>&nbsp;<span class="op" id="4365479">:=</span>&nbsp;<span class="builtintype" id="4365482">int</span><span class="op" id="4365485">(</span><span class="ident" id="4365486"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365487">.</span><span class="ident" id="4365488">buf</span><span class="op" id="4365491">[</span><span class="num" id="4365492">0</span><span class="op" id="4365493">]</span><span class="op" id="4365494">)</span>&nbsp;<span class="op" id="4365496">|</span>&nbsp;<span class="builtintype" id="4365498">int</span><span class="op" id="4365501">(</span><span class="ident" id="4365502"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365503">.</span><span class="ident" id="4365504">buf</span><span class="op" id="4365507">[</span><span class="num" id="4365508">1</span><span class="op" id="4365509">]</span><span class="op" id="4365510">)</span><span class="op" id="4365511">&lt;&lt;</span><span class="num" id="4365513">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365516">nn</span>&nbsp;<span class="op" id="4365519">:=</span>&nbsp;<span class="builtintype" id="4365522">int</span><span class="op" id="4365525">(</span><span class="ident" id="4365526"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365527">.</span><span class="ident" id="4365528">buf</span><span class="op" id="4365531">[</span><span class="num" id="4365532">2</span><span class="op" id="4365533">]</span><span class="op" id="4365534">)</span>&nbsp;<span class="op" id="4365536">|</span>&nbsp;<span class="builtintype" id="4365538">int</span><span class="op" id="4365541">(</span><span class="ident" id="4365542"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365543">.</span><span class="ident" id="4365544">buf</span><span class="op" id="4365547">[</span><span class="num" id="4365548">3</span><span class="op" id="4365549">]</span><span class="op" id="4365550">)</span><span class="op" id="4365551">&lt;&lt;</span><span class="num" id="4365553">8</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365556">if</span>&nbsp;<span class="builtintype" id="4365559">uint16</span><span class="op" id="4365565">(</span><span class="ident" id="4365566"><a href="/compress/flate/inflate.go.html#4365516">nn</a></span><span class="op" id="4365568">)</span>&nbsp;<span class="op" id="4365570">!=</span>&nbsp;<span class="builtintype" id="4365573">uint16</span><span class="op" id="4365579">(</span><span class="op" id="4365580">^</span><span class="ident" id="4365581"><a href="/compress/flate/inflate.go.html#4365477">n</a></span><span class="op" id="4365582">)</span>&nbsp;<span class="op" id="4365584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365588"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365589">.</span><span class="ident" id="4365590">err</span>&nbsp;<span class="op" id="4365594">=</span>&nbsp;<span class="ident" id="4365596"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4365613">(</span><span class="ident" id="4365614"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365615">.</span><span class="ident" id="4365616">roffset</span><span class="op" id="4365623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365627">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365639">if</span>&nbsp;<span class="ident" id="4365642"><a href="/compress/flate/inflate.go.html#4365477">n</a></span>&nbsp;<span class="op" id="4365644">==</span>&nbsp;<span class="num" id="4365647">0</span>&nbsp;<span class="op" id="4365649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4365653">//&nbsp;0-length&nbsp;block&nbsp;means&nbsp;sync</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365684"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365685">.</span><span class="ident" id="4365686">flush</span><span class="op" id="4365691">(</span><span class="op" id="4365692">(</span><span class="op" id="4365693">*</span><span class="ident" id="4365694"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4365706">)</span><span class="op" id="4365707">.</span><span class="ident" id="4365708">nextBlock</span><span class="op" id="4365717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365721">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365729">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365733"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365734">.</span><span class="ident" id="4365735">copyLen</span>&nbsp;<span class="op" id="4365743">=</span>&nbsp;<span class="ident" id="4365745"><a href="/compress/flate/inflate.go.html#4365477">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365748"><a href="/compress/flate/inflate.go.html#4365202">f</a></span><span class="op" id="4365749">.</span><span class="ident" id="4365750">copyData</span><span class="op" id="4365758">(</span><span class="op" id="4365759">)</span><br>
<span class="lineno"></span><span class="op" id="4365761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="4365764">//&nbsp;copyData&nbsp;copies&nbsp;f.copyLen&nbsp;bytes&nbsp;from&nbsp;the&nbsp;underlying&nbsp;reader&nbsp;into&nbsp;f.hist.</span><br>
<span class="lineno"></span><span class="comment" id="4365839">//&nbsp;It&nbsp;pauses&nbsp;for&nbsp;reads&nbsp;when&nbsp;f.hist&nbsp;is&nbsp;full.</span><br>
<span class="lineno"></span><span class="keyword" id="4365883">func</span>&nbsp;<span class="op" id="4365888">(</span><span class="ident" id="4365889">f</span>&nbsp;<span class="op" id="4365891">*</span><span class="ident" id="4365892"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4365904">)</span>&nbsp;<span class="ident" id="4365906">copyData</span><span class="op" id="4365914">(</span><span class="op" id="4365915">)</span>&nbsp;<span class="op" id="4365917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365920">n</span>&nbsp;<span class="op" id="4365922">:=</span>&nbsp;<span class="ident" id="4365925"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4365926">.</span><span class="ident" id="4365927">copyLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365936">for</span>&nbsp;<span class="ident" id="4365940"><a href="/compress/flate/inflate.go.html#4365920">n</a></span>&nbsp;<span class="op" id="4365942">&gt;</span>&nbsp;<span class="num" id="4365944">0</span>&nbsp;<span class="op" id="4365946">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365950">m</span>&nbsp;<span class="op" id="4365952">:=</span>&nbsp;<span class="builtinfunc" id="4365955">len</span><span class="op" id="4365958">(</span><span class="ident" id="4365959"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4365960">.</span><span class="ident" id="4365961">hist</span><span class="op" id="4365965">)</span>&nbsp;<span class="op" id="4365967">-</span>&nbsp;<span class="ident" id="4365969"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4365970">.</span><span class="ident" id="4365971">hp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4365976">if</span>&nbsp;<span class="ident" id="4365979"><a href="/compress/flate/inflate.go.html#4365950">m</a></span>&nbsp;<span class="op" id="4365981">&gt;</span>&nbsp;<span class="ident" id="4365983"><a href="/compress/flate/inflate.go.html#4365920">n</a></span>&nbsp;<span class="op" id="4365985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4365990"><a href="/compress/flate/inflate.go.html#4365950">m</a></span>&nbsp;<span class="op" id="4365992">=</span>&nbsp;<span class="ident" id="4365994"><a href="/compress/flate/inflate.go.html#4365920">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4365998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366002"><a href="/compress/flate/inflate.go.html#4365950">m</a></span><span class="op" id="4366003">,</span>&nbsp;<span class="ident" id="4366005">err</span>&nbsp;<span class="op" id="4366009">:=</span>&nbsp;<span class="ident" id="4366012"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4366014">.</span><span class="ident" id="4366015">ReadFull</span><span class="op" id="4366023">(</span><span class="ident" id="4366024"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366025">.</span><span class="ident" id="4366026">r</span><span class="op" id="4366027">,</span>&nbsp;<span class="ident" id="4366029"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366030">.</span><span class="ident" id="4366031">hist</span><span class="op" id="4366035">[</span><span class="ident" id="4366036"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366037">.</span><span class="ident" id="4366038">hp</span><span class="op" id="4366040">:</span><span class="ident" id="4366041"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366042">.</span><span class="ident" id="4366043">hp</span><span class="op" id="4366045">+</span><span class="ident" id="4366046"><a href="/compress/flate/inflate.go.html#4365950">m</a></span><span class="op" id="4366047">]</span><span class="op" id="4366048">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366052"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366053">.</span><span class="ident" id="4366054">roffset</span>&nbsp;<span class="op" id="4366062">+=</span>&nbsp;<span class="ident" id="4366065">int64</span><span class="op" id="4366070">(</span><span class="ident" id="4366071"><a href="/compress/flate/inflate.go.html#4365950">m</a></span><span class="op" id="4366072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366076">if</span>&nbsp;<span class="ident" id="4366079"><a href="/compress/flate/inflate.go.html#4366005">err</a></span>&nbsp;<span class="op" id="4366083">!=</span>&nbsp;<span class="ident" id="4366086">nil</span>&nbsp;<span class="op" id="4366090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366095"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366096">.</span><span class="ident" id="4366097">err</span>&nbsp;<span class="op" id="4366101">=</span>&nbsp;<span class="op" id="4366103">&amp;</span><span class="ident" id="4366104"><a href="/compress/flate/inflate.go.html#4353583">ReadError</a></span><span class="op" id="4366113">{</span><span class="ident" id="4366114"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366115">.</span><span class="ident" id="4366116">roffset</span><span class="op" id="4366123">,</span>&nbsp;<span class="ident" id="4366125"><a href="/compress/flate/inflate.go.html#4366005">err</a></span><span class="op" id="4366128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366142">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366146"><a href="/compress/flate/inflate.go.html#4365920">n</a></span>&nbsp;<span class="op" id="4366148">-=</span>&nbsp;<span class="ident" id="4366151"><a href="/compress/flate/inflate.go.html#4365950">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366155"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366156">.</span><span class="ident" id="4366157">hp</span>&nbsp;<span class="op" id="4366160">+=</span>&nbsp;<span class="ident" id="4366163"><a href="/compress/flate/inflate.go.html#4365950">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366167">if</span>&nbsp;<span class="ident" id="4366170"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366171">.</span><span class="ident" id="4366172">hp</span>&nbsp;<span class="op" id="4366175">==</span>&nbsp;<span class="builtinfunc" id="4366178">len</span><span class="op" id="4366181">(</span><span class="ident" id="4366182"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366183">.</span><span class="ident" id="4366184">hist</span><span class="op" id="4366188">)</span>&nbsp;<span class="op" id="4366190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366195"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366196">.</span><span class="ident" id="4366197">copyLen</span>&nbsp;<span class="op" id="4366205">=</span>&nbsp;<span class="ident" id="4366207"><a href="/compress/flate/inflate.go.html#4365920">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366212"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366213">.</span><span class="ident" id="4366214">flush</span><span class="op" id="4366219">(</span><span class="op" id="4366220">(</span><span class="op" id="4366221">*</span><span class="ident" id="4366222"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4366234">)</span><span class="op" id="4366235">.</span><span class="ident" id="4366236">copyData</span><span class="op" id="4366244">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366249">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366264"><a href="/compress/flate/inflate.go.html#4365889">f</a></span><span class="op" id="4366265">.</span><span class="ident" id="4366266">step</span>&nbsp;<span class="op" id="4366271">=</span>&nbsp;<span class="op" id="4366273">(</span><span class="op" id="4366274">*</span><span class="ident" id="4366275"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4366287">)</span><span class="op" id="4366288">.</span><span class="ident" id="4366289">nextBlock</span><br>
<span class="lineno"></span><span class="op" id="4366299">}</span><br>
<span class="lineno">615</span><br>
<span class="lineno"></span><span class="keyword" id="4366302">func</span>&nbsp;<span class="op" id="4366307">(</span><span class="ident" id="4366308">f</span>&nbsp;<span class="op" id="4366310">*</span><span class="ident" id="4366311"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4366323">)</span>&nbsp;<span class="ident" id="4366325">setDict</span><span class="op" id="4366332">(</span><span class="ident" id="4366333">dict</span>&nbsp;<span class="op" id="4366338">[</span><span class="op" id="4366339">]</span><span class="builtintype" id="4366340">byte</span><span class="op" id="4366344">)</span>&nbsp;<span class="op" id="4366346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366349">if</span>&nbsp;<span class="builtinfunc" id="4366352">len</span><span class="op" id="4366355">(</span><span class="ident" id="4366356"><a href="/compress/flate/inflate.go.html#4366333">dict</a></span><span class="op" id="4366360">)</span>&nbsp;<span class="op" id="4366362">&gt;</span>&nbsp;<span class="builtinfunc" id="4366364">len</span><span class="op" id="4366367">(</span><span class="ident" id="4366368"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366369">.</span><span class="ident" id="4366370">hist</span><span class="op" id="4366374">)</span>&nbsp;<span class="op" id="4366376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4366380">//&nbsp;Will&nbsp;only&nbsp;remember&nbsp;the&nbsp;tail.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366414"><a href="/compress/flate/inflate.go.html#4366333">dict</a></span>&nbsp;<span class="op" id="4366419">=</span>&nbsp;<span class="ident" id="4366421"><a href="/compress/flate/inflate.go.html#4366333">dict</a></span><span class="op" id="4366425">[</span><span class="builtinfunc" id="4366426">len</span><span class="op" id="4366429">(</span><span class="ident" id="4366430"><a href="/compress/flate/inflate.go.html#4366333">dict</a></span><span class="op" id="4366434">)</span><span class="op" id="4366435">-</span><span class="builtinfunc" id="4366436">len</span><span class="op" id="4366439">(</span><span class="ident" id="4366440"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366441">.</span><span class="ident" id="4366442">hist</span><span class="op" id="4366446">)</span><span class="op" id="4366447">:</span><span class="op" id="4366448">]</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366455"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366456">.</span><span class="ident" id="4366457">hp</span>&nbsp;<span class="op" id="4366460">=</span>&nbsp;<span class="builtinfunc" id="4366462">copy</span><span class="op" id="4366466">(</span><span class="ident" id="4366467"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366468">.</span><span class="ident" id="4366469">hist</span><span class="op" id="4366473">[</span><span class="op" id="4366474">:</span><span class="op" id="4366475">]</span><span class="op" id="4366476">,</span>&nbsp;<span class="ident" id="4366478"><a href="/compress/flate/inflate.go.html#4366333">dict</a></span><span class="op" id="4366482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366485">if</span>&nbsp;<span class="ident" id="4366488"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366489">.</span><span class="ident" id="4366490">hp</span>&nbsp;<span class="op" id="4366493">==</span>&nbsp;<span class="builtinfunc" id="4366496">len</span><span class="op" id="4366499">(</span><span class="ident" id="4366500"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366501">.</span><span class="ident" id="4366502">hist</span><span class="op" id="4366506">)</span>&nbsp;<span class="op" id="4366508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366512"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366513">.</span><span class="ident" id="4366514">hp</span>&nbsp;<span class="op" id="4366517">=</span>&nbsp;<span class="num" id="4366519">0</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366523"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366524">.</span><span class="ident" id="4366525">hfull</span>&nbsp;<span class="op" id="4366531">=</span>&nbsp;<span class="builtintype" id="4366533">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366542"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366543">.</span><span class="ident" id="4366544">hw</span>&nbsp;<span class="op" id="4366547">=</span>&nbsp;<span class="ident" id="4366549"><a href="/compress/flate/inflate.go.html#4366308">f</a></span><span class="op" id="4366550">.</span><span class="ident" id="4366551">hp</span><br>
<span class="lineno"></span><span class="op" id="4366554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="keyword" id="4366557">func</span>&nbsp;<span class="op" id="4366562">(</span><span class="ident" id="4366563">f</span>&nbsp;<span class="op" id="4366565">*</span><span class="ident" id="4366566"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4366578">)</span>&nbsp;<span class="ident" id="4366580">moreBits</span><span class="op" id="4366588">(</span><span class="op" id="4366589">)</span>&nbsp;<span class="builtintype" id="4366591">error</span>&nbsp;<span class="op" id="4366597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366600">c</span><span class="op" id="4366601">,</span>&nbsp;<span class="ident" id="4366603">err</span>&nbsp;<span class="op" id="4366607">:=</span>&nbsp;<span class="ident" id="4366610"><a href="/compress/flate/inflate.go.html#4366563">f</a></span><span class="op" id="4366611">.</span><span class="ident" id="4366612">r</span><span class="op" id="4366613">.</span><span class="ident" id="4366614">ReadByte</span><span class="op" id="4366622">(</span><span class="op" id="4366623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366626">if</span>&nbsp;<span class="ident" id="4366629"><a href="/compress/flate/inflate.go.html#4366603">err</a></span>&nbsp;<span class="op" id="4366633">!=</span>&nbsp;<span class="ident" id="4366636">nil</span>&nbsp;<span class="op" id="4366640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366644">if</span>&nbsp;<span class="ident" id="4366647"><a href="/compress/flate/inflate.go.html#4366603">err</a></span>&nbsp;<span class="op" id="4366651">==</span>&nbsp;<span class="ident" id="4366654"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4366656">.</span><span class="ident" id="4366657">EOF</span>&nbsp;<span class="op" id="4366661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366666"><a href="/compress/flate/inflate.go.html#4366603">err</a></span>&nbsp;<span class="op" id="4366670">=</span>&nbsp;<span class="ident" id="4366672"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4366674">.</span><span class="ident" id="4366675">ErrUnexpectedEOF</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366698">return</span>&nbsp;<span class="ident" id="4366705"><a href="/compress/flate/inflate.go.html#4366603">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4366710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366713"><a href="/compress/flate/inflate.go.html#4366563">f</a></span><span class="op" id="4366714">.</span><span class="ident" id="4366715">roffset</span><span class="op" id="4366722">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366726"><a href="/compress/flate/inflate.go.html#4366563">f</a></span><span class="op" id="4366727">.</span><span class="ident" id="4366728">b</span>&nbsp;<span class="op" id="4366730">|=</span>&nbsp;<span class="builtintype" id="4366733">uint32</span><span class="op" id="4366739">(</span><span class="ident" id="4366740"><a href="/compress/flate/inflate.go.html#4366600">c</a></span><span class="op" id="4366741">)</span>&nbsp;<span class="op" id="4366743">&lt;&lt;</span>&nbsp;<span class="ident" id="4366746"><a href="/compress/flate/inflate.go.html#4366563">f</a></span><span class="op" id="4366747">.</span><span class="ident" id="4366748">nb</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366752"><a href="/compress/flate/inflate.go.html#4366563">f</a></span><span class="op" id="4366753">.</span><span class="ident" id="4366754">nb</span>&nbsp;<span class="op" id="4366757">+=</span>&nbsp;<span class="num" id="4366760">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366763">return</span>&nbsp;<span class="ident" id="4366770">nil</span><br>
<span class="lineno"></span><span class="op" id="4366774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4366777">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Huffman-encoded&nbsp;symbol&nbsp;from&nbsp;f&nbsp;according&nbsp;to&nbsp;h.</span><br>
<span class="lineno">645</span><span class="keyword" id="4366840">func</span>&nbsp;<span class="op" id="4366845">(</span><span class="ident" id="4366846">f</span>&nbsp;<span class="op" id="4366848">*</span><span class="ident" id="4366849"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4366861">)</span>&nbsp;<span class="ident" id="4366863">huffSym</span><span class="op" id="4366870">(</span><span class="ident" id="4366871">h</span>&nbsp;<span class="op" id="4366873">*</span><span class="ident" id="4366874"><a href="/compress/flate/inflate.go.html#4355716">huffmanDecoder</a></span><span class="op" id="4366888">)</span>&nbsp;<span class="op" id="4366890">(</span><span class="builtintype" id="4366891">int</span><span class="op" id="4366894">,</span>&nbsp;<span class="builtintype" id="4366896">error</span><span class="op" id="4366901">)</span>&nbsp;<span class="op" id="4366903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4366906">n</span>&nbsp;<span class="op" id="4366908">:=</span>&nbsp;<span class="builtintype" id="4366911">uint</span><span class="op" id="4366915">(</span><span class="ident" id="4366916"><a href="/compress/flate/inflate.go.html#4366871">h</a></span><span class="op" id="4366917">.</span><span class="ident" id="4366918">min</span><span class="op" id="4366921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366924">for</span>&nbsp;<span class="op" id="4366928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366932">for</span>&nbsp;<span class="ident" id="4366936"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4366937">.</span><span class="ident" id="4366938">nb</span>&nbsp;<span class="op" id="4366941">&lt;</span>&nbsp;<span class="ident" id="4366943"><a href="/compress/flate/inflate.go.html#4366906">n</a></span>&nbsp;<span class="op" id="4366945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366950">if</span>&nbsp;<span class="ident" id="4366953">err</span>&nbsp;<span class="op" id="4366957">:=</span>&nbsp;<span class="ident" id="4366960"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4366961">.</span><span class="ident" id="4366962">moreBits</span><span class="op" id="4366970">(</span><span class="op" id="4366971">)</span><span class="op" id="4366972">;</span>&nbsp;<span class="ident" id="4366974"><a href="/compress/flate/inflate.go.html#4366953">err</a></span>&nbsp;<span class="op" id="4366978">!=</span>&nbsp;<span class="ident" id="4366981">nil</span>&nbsp;<span class="op" id="4366985">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4366991">return</span>&nbsp;<span class="num" id="4366998">0</span><span class="op" id="4366999">,</span>&nbsp;<span class="ident" id="4367001"><a href="/compress/flate/inflate.go.html#4366953">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367016">chunk</span>&nbsp;<span class="op" id="4367022">:=</span>&nbsp;<span class="ident" id="4367025"><a href="/compress/flate/inflate.go.html#4366871">h</a></span><span class="op" id="4367026">.</span><span class="ident" id="4367027">chunks</span><span class="op" id="4367033">[</span><span class="ident" id="4367034"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367035">.</span><span class="ident" id="4367036">b</span><span class="op" id="4367037">&amp;</span><span class="op" id="4367038">(</span><span class="ident" id="4367039"><a href="/compress/flate/inflate.go.html#4355619">huffmanNumChunks</a></span><span class="op" id="4367055">-</span><span class="num" id="4367056">1</span><span class="op" id="4367057">)</span><span class="op" id="4367058">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367062"><a href="/compress/flate/inflate.go.html#4366906">n</a></span>&nbsp;<span class="op" id="4367064">=</span>&nbsp;<span class="builtintype" id="4367066">uint</span><span class="op" id="4367070">(</span><span class="ident" id="4367071"><a href="/compress/flate/inflate.go.html#4367016">chunk</a></span>&nbsp;<span class="op" id="4367077">&amp;</span>&nbsp;<span class="ident" id="4367079"><a href="/compress/flate/inflate.go.html#4355662">huffmanCountMask</a></span><span class="op" id="4367095">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367099">if</span>&nbsp;<span class="ident" id="4367102"><a href="/compress/flate/inflate.go.html#4366906">n</a></span>&nbsp;<span class="op" id="4367104">&gt;</span>&nbsp;<span class="ident" id="4367106"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span>&nbsp;<span class="op" id="4367123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367128"><a href="/compress/flate/inflate.go.html#4367016">chunk</a></span>&nbsp;<span class="op" id="4367134">=</span>&nbsp;<span class="ident" id="4367136"><a href="/compress/flate/inflate.go.html#4366871">h</a></span><span class="op" id="4367137">.</span><span class="ident" id="4367138">links</span><span class="op" id="4367143">[</span><span class="ident" id="4367144"><a href="/compress/flate/inflate.go.html#4367016">chunk</a></span><span class="op" id="4367149">&gt;&gt;</span><span class="ident" id="4367151"><a href="/compress/flate/inflate.go.html#4355686">huffmanValueShift</a></span><span class="op" id="4367168">]</span><span class="op" id="4367169">[</span><span class="op" id="4367170">(</span><span class="ident" id="4367171"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367172">.</span><span class="ident" id="4367173">b</span><span class="op" id="4367174">&gt;&gt;</span><span class="ident" id="4367176"><a href="/compress/flate/inflate.go.html#4355596">huffmanChunkBits</a></span><span class="op" id="4367192">)</span><span class="op" id="4367193">&amp;</span><span class="ident" id="4367194"><a href="/compress/flate/inflate.go.html#4366871">h</a></span><span class="op" id="4367195">.</span><span class="ident" id="4367196">linkMask</span><span class="op" id="4367204">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367209"><a href="/compress/flate/inflate.go.html#4366906">n</a></span>&nbsp;<span class="op" id="4367211">=</span>&nbsp;<span class="builtintype" id="4367213">uint</span><span class="op" id="4367217">(</span><span class="ident" id="4367218"><a href="/compress/flate/inflate.go.html#4367016">chunk</a></span>&nbsp;<span class="op" id="4367224">&amp;</span>&nbsp;<span class="ident" id="4367226"><a href="/compress/flate/inflate.go.html#4355662">huffmanCountMask</a></span><span class="op" id="4367242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367247">if</span>&nbsp;<span class="ident" id="4367250"><a href="/compress/flate/inflate.go.html#4366906">n</a></span>&nbsp;<span class="op" id="4367252">==</span>&nbsp;<span class="num" id="4367255">0</span>&nbsp;<span class="op" id="4367257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367263"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367264">.</span><span class="ident" id="4367265">err</span>&nbsp;<span class="op" id="4367269">=</span>&nbsp;<span class="ident" id="4367271"><a href="/compress/flate/inflate.go.html#4353183">CorruptInputError</a></span><span class="op" id="4367288">(</span><span class="ident" id="4367289"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367290">.</span><span class="ident" id="4367291">roffset</span><span class="op" id="4367298">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367304">return</span>&nbsp;<span class="num" id="4367311">0</span><span class="op" id="4367312">,</span>&nbsp;<span class="ident" id="4367314"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367315">.</span><span class="ident" id="4367316">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367331">if</span>&nbsp;<span class="ident" id="4367334"><a href="/compress/flate/inflate.go.html#4366906">n</a></span>&nbsp;<span class="op" id="4367336">&lt;=</span>&nbsp;<span class="ident" id="4367339"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367340">.</span><span class="ident" id="4367341">nb</span>&nbsp;<span class="op" id="4367344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367349"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367350">.</span><span class="ident" id="4367351">b</span>&nbsp;<span class="op" id="4367353">&gt;&gt;=</span>&nbsp;<span class="ident" id="4367357"><a href="/compress/flate/inflate.go.html#4366906">n</a></span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367362"><a href="/compress/flate/inflate.go.html#4366846">f</a></span><span class="op" id="4367363">.</span><span class="ident" id="4367364">nb</span>&nbsp;<span class="op" id="4367367">-=</span>&nbsp;<span class="ident" id="4367370"><a href="/compress/flate/inflate.go.html#4366906">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367375">return</span>&nbsp;<span class="builtintype" id="4367382">int</span><span class="op" id="4367385">(</span><span class="ident" id="4367386"><a href="/compress/flate/inflate.go.html#4367016">chunk</a></span>&nbsp;<span class="op" id="4367392">&gt;&gt;</span>&nbsp;<span class="ident" id="4367395"><a href="/compress/flate/inflate.go.html#4355686">huffmanValueShift</a></span><span class="op" id="4367412">)</span><span class="op" id="4367413">,</span>&nbsp;<span class="ident" id="4367415">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367424">}</span><br>
<span class="lineno"></span><span class="op" id="4367426">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="4367429">//&nbsp;Flush&nbsp;any&nbsp;buffered&nbsp;output&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="4367484">func</span>&nbsp;<span class="op" id="4367489">(</span><span class="ident" id="4367490">f</span>&nbsp;<span class="op" id="4367492">*</span><span class="ident" id="4367493"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4367505">)</span>&nbsp;<span class="ident" id="4367507">flush</span><span class="op" id="4367512">(</span><span class="ident" id="4367513">step</span>&nbsp;<span class="keyword" id="4367518">func</span><span class="op" id="4367522">(</span><span class="op" id="4367523">*</span><span class="ident" id="4367524"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4367536">)</span><span class="op" id="4367537">)</span>&nbsp;<span class="op" id="4367539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367542"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367543">.</span><span class="ident" id="4367544">toRead</span>&nbsp;<span class="op" id="4367551">=</span>&nbsp;<span class="ident" id="4367553"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367554">.</span><span class="ident" id="4367555">hist</span><span class="op" id="4367559">[</span><span class="ident" id="4367560"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367561">.</span><span class="ident" id="4367562">hw</span><span class="op" id="4367564">:</span><span class="ident" id="4367565"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367566">.</span><span class="ident" id="4367567">hp</span><span class="op" id="4367569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367572"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367573">.</span><span class="ident" id="4367574">woffset</span>&nbsp;<span class="op" id="4367582">+=</span>&nbsp;<span class="ident" id="4367585">int64</span><span class="op" id="4367590">(</span><span class="ident" id="4367591"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367592">.</span><span class="ident" id="4367593">hp</span>&nbsp;<span class="op" id="4367596">-</span>&nbsp;<span class="ident" id="4367598"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367599">.</span><span class="ident" id="4367600">hw</span><span class="op" id="4367602">)</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367605"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367606">.</span><span class="ident" id="4367607">hw</span>&nbsp;<span class="op" id="4367610">=</span>&nbsp;<span class="ident" id="4367612"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367613">.</span><span class="ident" id="4367614">hp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367618">if</span>&nbsp;<span class="ident" id="4367621"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367622">.</span><span class="ident" id="4367623">hp</span>&nbsp;<span class="op" id="4367626">==</span>&nbsp;<span class="builtinfunc" id="4367629">len</span><span class="op" id="4367632">(</span><span class="ident" id="4367633"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367634">.</span><span class="ident" id="4367635">hist</span><span class="op" id="4367639">)</span>&nbsp;<span class="op" id="4367641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367645"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367646">.</span><span class="ident" id="4367647">hp</span>&nbsp;<span class="op" id="4367650">=</span>&nbsp;<span class="num" id="4367652">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367656"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367657">.</span><span class="ident" id="4367658">hw</span>&nbsp;<span class="op" id="4367661">=</span>&nbsp;<span class="num" id="4367663">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367667"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367668">.</span><span class="ident" id="4367669">hfull</span>&nbsp;<span class="op" id="4367675">=</span>&nbsp;<span class="builtintype" id="4367677">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367686"><a href="/compress/flate/inflate.go.html#4367490">f</a></span><span class="op" id="4367687">.</span><span class="ident" id="4367688">step</span>&nbsp;<span class="op" id="4367693">=</span>&nbsp;<span class="ident" id="4367695"><a href="/compress/flate/inflate.go.html#4367513">step</a></span><br>
<span class="lineno"></span><span class="op" id="4367700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4367703">func</span>&nbsp;<span class="ident" id="4367708">makeReader</span><span class="op" id="4367718">(</span><span class="ident" id="4367719">r</span>&nbsp;<span class="ident" id="4367721"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4367723">.</span><span class="ident" id="4367724">Reader</span><span class="op" id="4367730">)</span>&nbsp;<span class="ident" id="4367732"><a href="/compress/flate/inflate.go.html#4358136">Reader</a></span>&nbsp;<span class="op" id="4367739">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367742">if</span>&nbsp;<span class="ident" id="4367745">rr</span><span class="op" id="4367747">,</span>&nbsp;<span class="ident" id="4367749">ok</span>&nbsp;<span class="op" id="4367752">:=</span>&nbsp;<span class="ident" id="4367755"><a href="/compress/flate/inflate.go.html#4367719">r</a></span><span class="op" id="4367756">.</span><span class="op" id="4367757">(</span><span class="ident" id="4367758"><a href="/compress/flate/inflate.go.html#4358136">Reader</a></span><span class="op" id="4367764">)</span><span class="op" id="4367765">;</span>&nbsp;<span class="ident" id="4367767"><a href="/compress/flate/inflate.go.html#4367749">ok</a></span>&nbsp;<span class="op" id="4367770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367774">return</span>&nbsp;<span class="ident" id="4367781"><a href="/compress/flate/inflate.go.html#4367745">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4367788">return</span>&nbsp;<span class="ident" id="4367795"><a href="/compress/flate/inflate.go.html#4352818">bufio</a></span><span class="op" id="4367800">.</span><span class="ident" id="4367801">NewReader</span><span class="op" id="4367810">(</span><span class="ident" id="4367811"><a href="/compress/flate/inflate.go.html#4367719">r</a></span><span class="op" id="4367812">)</span><br>
<span class="lineno"></span><span class="op" id="4367814">}</span><br>
<span class="lineno">690</span><br>
<span class="lineno"></span><span class="keyword" id="4367817">func</span>&nbsp;<span class="op" id="4367822">(</span><span class="ident" id="4367823">f</span>&nbsp;<span class="op" id="4367825">*</span><span class="ident" id="4367826"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4367838">)</span>&nbsp;<span class="ident" id="4367840">Reset</span><span class="op" id="4367845">(</span><span class="ident" id="4367846">r</span>&nbsp;<span class="ident" id="4367848"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4367850">.</span><span class="ident" id="4367851">Reader</span><span class="op" id="4367857">,</span>&nbsp;<span class="ident" id="4367859">dict</span>&nbsp;<span class="op" id="4367864">[</span><span class="op" id="4367865">]</span><span class="builtintype" id="4367866">byte</span><span class="op" id="4367870">)</span>&nbsp;<span class="builtintype" id="4367872">error</span>&nbsp;<span class="op" id="4367878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4367881">*</span><span class="ident" id="4367882"><a href="/compress/flate/inflate.go.html#4367823">f</a></span>&nbsp;<span class="op" id="4367884">=</span>&nbsp;<span class="ident" id="4367886"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4367898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367902">r</span><span class="op" id="4367903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4367912"><a href="/compress/flate/inflate.go.html#4367708">makeReader</a></span><span class="op" id="4367922">(</span><span class="ident" id="4367923"><a href="/compress/flate/inflate.go.html#4367846">r</a></span><span class="op" id="4367924">)</span><span class="op" id="4367925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367929">bits</span><span class="op" id="4367933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4367939"><a href="/compress/flate/inflate.go.html#4367823">f</a></span><span class="op" id="4367940">.</span><span class="ident" id="4367941">bits</span><span class="op" id="4367945">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367949">codebits</span><span class="op" id="4367957">:</span>&nbsp;<span class="ident" id="4367959"><a href="/compress/flate/inflate.go.html#4367823">f</a></span><span class="op" id="4367960">.</span><span class="ident" id="4367961">codebits</span><span class="op" id="4367969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367973">hist</span><span class="op" id="4367977">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4367983"><a href="/compress/flate/inflate.go.html#4367823">f</a></span><span class="op" id="4367984">.</span><span class="ident" id="4367985">hist</span><span class="op" id="4367989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4367993">step</span><span class="op" id="4367997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4368003">(</span><span class="op" id="4368004">*</span><span class="ident" id="4368005"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4368017">)</span><span class="op" id="4368018">.</span><span class="ident" id="4368019">nextBlock</span><span class="op" id="4368028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4368031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4368034">if</span>&nbsp;<span class="ident" id="4368037"><a href="/compress/flate/inflate.go.html#4367859">dict</a></span>&nbsp;<span class="op" id="4368042">!=</span>&nbsp;<span class="ident" id="4368045">nil</span>&nbsp;<span class="op" id="4368049">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4368053"><a href="/compress/flate/inflate.go.html#4367823">f</a></span><span class="op" id="4368054">.</span><span class="ident" id="4368055">setDict</span><span class="op" id="4368062">(</span><span class="ident" id="4368063"><a href="/compress/flate/inflate.go.html#4367859">dict</a></span><span class="op" id="4368067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4368070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4368073">return</span>&nbsp;<span class="ident" id="4368080">nil</span><br>
<span class="lineno"></span><span class="op" id="4368084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">705</span><span class="comment" id="4368087">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadCloser&nbsp;that&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="4368142">//&nbsp;to&nbsp;read&nbsp;the&nbsp;uncompressed&nbsp;version&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4368184">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,</span><br>
<span class="lineno"></span><span class="comment" id="4368231">//&nbsp;the&nbsp;decompressor&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4368293">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser</span><br>
<span class="lineno">710</span><span class="comment" id="4368362">//&nbsp;when&nbsp;finished&nbsp;reading.</span><br>
<span class="lineno"></span><span class="comment" id="4368388">//</span><br>
<span class="lineno"></span><span class="comment" id="4368391">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="4368457">func</span>&nbsp;<span class="ident" id="4368462">NewReader</span><span class="op" id="4368471">(</span><span class="ident" id="4368472">r</span>&nbsp;<span class="ident" id="4368474"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4368476">.</span><span class="ident" id="4368477">Reader</span><span class="op" id="4368483">)</span>&nbsp;<span class="ident" id="4368485"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4368487">.</span><span class="ident" id="4368488">ReadCloser</span>&nbsp;<span class="op" id="4368499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4368502">var</span>&nbsp;<span class="ident" id="4368506">f</span>&nbsp;<span class="ident" id="4368508"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4368522"><a href="/compress/flate/inflate.go.html#4368506">f</a></span><span class="op" id="4368523">.</span><span class="ident" id="4368524">bits</span>&nbsp;<span class="op" id="4368529">=</span>&nbsp;<span class="builtinfunc" id="4368531">new</span><span class="op" id="4368534">(</span><span class="op" id="4368535">[</span><span class="ident" id="4368536"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span>&nbsp;<span class="op" id="4368543">+</span>&nbsp;<span class="ident" id="4368545"><a href="/compress/flate/inflate.go.html#4353026">maxDist</a></span><span class="op" id="4368552">]</span><span class="builtintype" id="4368553">int</span><span class="op" id="4368556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4368559"><a href="/compress/flate/inflate.go.html#4368506">f</a></span><span class="op" id="4368560">.</span><span class="ident" id="4368561">codebits</span>&nbsp;<span class="op" id="4368570">=</span>&nbsp;<span class="builtinfunc" id="4368572">new</span><span class="op" id="4368575">(</span><span class="op" id="4368576">[</span><span class="ident" id="4368577"><a href="/compress/flate/inflate.go.html#4353041">numCodes</a></span><span class="op" id="4368585">]</span><span class="builtintype" id="4368586">int</span><span class="op" id="4368589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4368592"><a href="/compress/flate/inflate.go.html#4368506">f</a></span><span class="op" id="4368593">.</span><span class="ident" id="4368594">r</span>&nbsp;<span class="op" id="4368596">=</span>&nbsp;<span class="ident" id="4368598"><a href="/compress/flate/inflate.go.html#4367708">makeReader</a></span><span class="op" id="4368608">(</span><span class="ident" id="4368609"><a href="/compress/flate/inflate.go.html#4368472">r</a></span><span class="op" id="4368610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4368613"><a href="/compress/flate/inflate.go.html#4368506">f</a></span><span class="op" id="4368614">.</span><span class="ident" id="4368615">hist</span>&nbsp;<span class="op" id="4368620">=</span>&nbsp;<span class="builtinfunc" id="4368622">new</span><span class="op" id="4368625">(</span><span class="op" id="4368626">[</span><span class="ident" id="4368627"><a href="/compress/flate/inflate.go.html#4352905">maxHist</a></span><span class="op" id="4368634">]</span><span class="builtintype" id="4368635">byte</span><span class="op" id="4368639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4368642"><a href="/compress/flate/inflate.go.html#4368506">f</a></span><span class="op" id="4368643">.</span><span class="ident" id="4368644">step</span>&nbsp;<span class="op" id="4368649">=</span>&nbsp;<span class="op" id="4368651">(</span><span class="op" id="4368652">*</span><span class="ident" id="4368653"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4368665">)</span><span class="op" id="4368666">.</span><span class="ident" id="4368667">nextBlock</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4368678">return</span>&nbsp;<span class="op" id="4368685">&amp;</span><span class="ident" id="4368686"><a href="/compress/flate/inflate.go.html#4368506">f</a></span><br>
<span class="lineno"></span><span class="op" id="4368688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4368691">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;initializes&nbsp;the&nbsp;reader</span><br>
<span class="lineno"></span><span class="comment" id="4368753">//&nbsp;with&nbsp;a&nbsp;preset&nbsp;dictionary.&nbsp;&nbsp;The&nbsp;returned&nbsp;Reader&nbsp;behaves&nbsp;as&nbsp;if</span><br>
<span class="lineno">725</span><span class="comment" id="4368817">//&nbsp;the&nbsp;uncompressed&nbsp;data&nbsp;stream&nbsp;started&nbsp;with&nbsp;the&nbsp;given&nbsp;dictionary,</span><br>
<span class="lineno"></span><span class="comment" id="4368884">//&nbsp;which&nbsp;has&nbsp;already&nbsp;been&nbsp;read.&nbsp;&nbsp;NewReaderDict&nbsp;is&nbsp;typically&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="4368949">//&nbsp;to&nbsp;read&nbsp;data&nbsp;compressed&nbsp;by&nbsp;NewWriterDict.</span><br>
<span class="lineno"></span><span class="comment" id="4368994">//</span><br>
<span class="lineno"></span><span class="comment" id="4368997">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno">730</span><span class="keyword" id="4369063">func</span>&nbsp;<span class="ident" id="4369068">NewReaderDict</span><span class="op" id="4369081">(</span><span class="ident" id="4369082">r</span>&nbsp;<span class="ident" id="4369084"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4369086">.</span><span class="ident" id="4369087">Reader</span><span class="op" id="4369093">,</span>&nbsp;<span class="ident" id="4369095">dict</span>&nbsp;<span class="op" id="4369100">[</span><span class="op" id="4369101">]</span><span class="builtintype" id="4369102">byte</span><span class="op" id="4369106">)</span>&nbsp;<span class="ident" id="4369108"><a href="/compress/flate/inflate.go.html#4352827">io</a></span><span class="op" id="4369110">.</span><span class="ident" id="4369111">ReadCloser</span>&nbsp;<span class="op" id="4369122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4369125">var</span>&nbsp;<span class="ident" id="4369129">f</span>&nbsp;<span class="ident" id="4369131"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4369145"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><span class="op" id="4369146">.</span><span class="ident" id="4369147">r</span>&nbsp;<span class="op" id="4369149">=</span>&nbsp;<span class="ident" id="4369151"><a href="/compress/flate/inflate.go.html#4367708">makeReader</a></span><span class="op" id="4369161">(</span><span class="ident" id="4369162"><a href="/compress/flate/inflate.go.html#4369082">r</a></span><span class="op" id="4369163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4369166"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><span class="op" id="4369167">.</span><span class="ident" id="4369168">hist</span>&nbsp;<span class="op" id="4369173">=</span>&nbsp;<span class="builtinfunc" id="4369175">new</span><span class="op" id="4369178">(</span><span class="op" id="4369179">[</span><span class="ident" id="4369180"><a href="/compress/flate/inflate.go.html#4352905">maxHist</a></span><span class="op" id="4369187">]</span><span class="builtintype" id="4369188">byte</span><span class="op" id="4369192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4369195"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><span class="op" id="4369196">.</span><span class="ident" id="4369197">bits</span>&nbsp;<span class="op" id="4369202">=</span>&nbsp;<span class="builtinfunc" id="4369204">new</span><span class="op" id="4369207">(</span><span class="op" id="4369208">[</span><span class="ident" id="4369209"><a href="/compress/flate/inflate.go.html#4353010">maxLit</a></span>&nbsp;<span class="op" id="4369216">+</span>&nbsp;<span class="ident" id="4369218"><a href="/compress/flate/inflate.go.html#4353026">maxDist</a></span><span class="op" id="4369225">]</span><span class="builtintype" id="4369226">int</span><span class="op" id="4369229">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4369232"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><span class="op" id="4369233">.</span><span class="ident" id="4369234">codebits</span>&nbsp;<span class="op" id="4369243">=</span>&nbsp;<span class="builtinfunc" id="4369245">new</span><span class="op" id="4369248">(</span><span class="op" id="4369249">[</span><span class="ident" id="4369250"><a href="/compress/flate/inflate.go.html#4353041">numCodes</a></span><span class="op" id="4369258">]</span><span class="builtintype" id="4369259">int</span><span class="op" id="4369262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4369265"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><span class="op" id="4369266">.</span><span class="ident" id="4369267">step</span>&nbsp;<span class="op" id="4369272">=</span>&nbsp;<span class="op" id="4369274">(</span><span class="op" id="4369275">*</span><span class="ident" id="4369276"><a href="/compress/flate/inflate.go.html#4358210">decompressor</a></span><span class="op" id="4369288">)</span><span class="op" id="4369289">.</span><span class="ident" id="4369290">nextBlock</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4369301"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><span class="op" id="4369302">.</span><span class="ident" id="4369303">setDict</span><span class="op" id="4369310">(</span><span class="ident" id="4369311"><a href="/compress/flate/inflate.go.html#4369095">dict</a></span><span class="op" id="4369315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4369318">return</span>&nbsp;<span class="op" id="4369325">&amp;</span><span class="ident" id="4369326"><a href="/compress/flate/inflate.go.html#4369129">f</a></span><br>
<span class="lineno"></span><span class="op" id="4369328">}</span>
</div>
</body>
</html>
