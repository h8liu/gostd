<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html" class="current">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6939656">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6939712">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6939766">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6939817">package</span>&nbsp;<span class="ident" id="6939825">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6939831">import</span>&nbsp;<span class="op" id="6939838">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6939841">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6939850">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6939858">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6939871">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6939882">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6939892">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6939895">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6939925">type</span>&nbsp;<span class="ident" id="6939930">example</span>&nbsp;<span class="keyword" id="6939938">struct</span>&nbsp;<span class="op" id="6939945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6939948">compact</span>&nbsp;<span class="builtintype" id="6939956">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6939964">indent</span>&nbsp;&nbsp;<span class="builtintype" id="6939972">string</span><br>
<span class="lineno">20</span><span class="op" id="6939979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6939982">var</span>&nbsp;<span class="ident" id="6939986">examples</span>&nbsp;<span class="op" id="6939995">=</span>&nbsp;<span class="op" id="6939997">[</span><span class="op" id="6939998">]</span><span class="ident" id="6939999">example</span><span class="op" id="6940006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940009">{</span><span class="string" id="6940010">`1`</span><span class="op" id="6940013">,</span>&nbsp;<span class="string" id="6940015">`1`</span><span class="op" id="6940018">}</span><span class="op" id="6940019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940022">{</span><span class="string" id="6940023">`{}`</span><span class="op" id="6940027">,</span>&nbsp;<span class="string" id="6940029">`{}`</span><span class="op" id="6940033">}</span><span class="op" id="6940034">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940037">{</span><span class="string" id="6940038">`[]`</span><span class="op" id="6940042">,</span>&nbsp;<span class="string" id="6940044">`[]`</span><span class="op" id="6940048">}</span><span class="op" id="6940049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940052">{</span><span class="string" id="6940053">`{&#34;&#34;:2}`</span><span class="op" id="6940061">,</span>&nbsp;<span class="string" id="6940063">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="6940080">}</span><span class="op" id="6940081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940084">{</span><span class="string" id="6940085">`[3]`</span><span class="op" id="6940090">,</span>&nbsp;<span class="string" id="6940092">&#34;[\n\t3\n]&#34;</span><span class="op" id="6940103">}</span><span class="op" id="6940104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940107">{</span><span class="string" id="6940108">`[1,2,3]`</span><span class="op" id="6940117">,</span>&nbsp;<span class="string" id="6940119">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="6940142">}</span><span class="op" id="6940143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940146">{</span><span class="string" id="6940147">`{&#34;x&#34;:1}`</span><span class="op" id="6940156">,</span>&nbsp;<span class="string" id="6940158">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="6940176">}</span><span class="op" id="6940177">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940180">{</span><span class="ident" id="6940181">ex1</span><span class="op" id="6940184">,</span>&nbsp;<span class="ident" id="6940186">ex1i</span><span class="op" id="6940190">}</span><span class="op" id="6940191">,</span><br>
<span class="lineno"></span><span class="op" id="6940193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6940196">var</span>&nbsp;<span class="ident" id="6940200">ex1</span>&nbsp;<span class="op" id="6940204">=</span>&nbsp;<span class="string" id="6940206">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6940245">var</span>&nbsp;<span class="ident" id="6940249">ex1i</span>&nbsp;<span class="op" id="6940254">=</span>&nbsp;<span class="string" id="6940256">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;true,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;false,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6940312">func</span>&nbsp;<span class="ident" id="6940317">TestCompact</span><span class="op" id="6940328">(</span><span class="ident" id="6940329">t</span>&nbsp;<span class="op" id="6940331">*</span><span class="ident" id="6940332">testing</span><span class="op" id="6940339">.</span><span class="ident" id="6940340">T</span><span class="op" id="6940341">)</span>&nbsp;<span class="op" id="6940343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6940346">var</span>&nbsp;<span class="ident" id="6940350">buf</span>&nbsp;<span class="ident" id="6940354">bytes</span><span class="op" id="6940359">.</span><span class="ident" id="6940360">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6940368">for</span>&nbsp;<span class="ident" id="6940372">_</span><span class="op" id="6940373">,</span>&nbsp;<span class="ident" id="6940375">tt</span>&nbsp;<span class="op" id="6940378">:=</span>&nbsp;<span class="keyword" id="6940381">range</span>&nbsp;<span class="ident" id="6940387">examples</span>&nbsp;<span class="op" id="6940396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6940400">buf</span><span class="op" id="6940403">.</span><span class="ident" id="6940404">Reset</span><span class="op" id="6940409">(</span><span class="op" id="6940410">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6940414">if</span>&nbsp;<span class="ident" id="6940417">err</span>&nbsp;<span class="op" id="6940421">:=</span>&nbsp;<span class="ident" id="6940424">Compact</span><span class="op" id="6940431">(</span><span class="op" id="6940432">&amp;</span><span class="ident" id="6940433">buf</span><span class="op" id="6940436">,</span>&nbsp;<span class="op" id="6940438">[</span><span class="op" id="6940439">]</span><span class="builtintype" id="6940440">byte</span><span class="op" id="6940444">(</span><span class="ident" id="6940445">tt</span><span class="op" id="6940447">.</span><span class="ident" id="6940448">compact</span><span class="op" id="6940455">)</span><span class="op" id="6940456">)</span><span class="op" id="6940457">;</span>&nbsp;<span class="ident" id="6940459">err</span>&nbsp;<span class="op" id="6940463">!=</span>&nbsp;<span class="builtintype" id="6940466">nil</span>&nbsp;<span class="op" id="6940470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6940475">t</span><span class="op" id="6940476">.</span><span class="ident" id="6940477">Errorf</span><span class="op" id="6940483">(</span><span class="string" id="6940484">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6940502">,</span>&nbsp;<span class="ident" id="6940504">tt</span><span class="op" id="6940506">.</span><span class="ident" id="6940507">compact</span><span class="op" id="6940514">,</span>&nbsp;<span class="ident" id="6940516">err</span><span class="op" id="6940519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940523">}</span>&nbsp;<span class="keyword" id="6940525">else</span>&nbsp;<span class="keyword" id="6940530">if</span>&nbsp;<span class="ident" id="6940533">s</span>&nbsp;<span class="op" id="6940535">:=</span>&nbsp;<span class="ident" id="6940538">buf</span><span class="op" id="6940541">.</span><span class="ident" id="6940542">String</span><span class="op" id="6940548">(</span><span class="op" id="6940549">)</span><span class="op" id="6940550">;</span>&nbsp;<span class="ident" id="6940552">s</span>&nbsp;<span class="op" id="6940554">!=</span>&nbsp;<span class="ident" id="6940557">tt</span><span class="op" id="6940559">.</span><span class="ident" id="6940560">compact</span>&nbsp;<span class="op" id="6940568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6940573">t</span><span class="op" id="6940574">.</span><span class="ident" id="6940575">Errorf</span><span class="op" id="6940581">(</span><span class="string" id="6940582">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6940617">,</span>&nbsp;<span class="ident" id="6940619">tt</span><span class="op" id="6940621">.</span><span class="ident" id="6940622">compact</span><span class="op" id="6940629">,</span>&nbsp;<span class="ident" id="6940631">s</span><span class="op" id="6940632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940636">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6940641">buf</span><span class="op" id="6940644">.</span><span class="ident" id="6940645">Reset</span><span class="op" id="6940650">(</span><span class="op" id="6940651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6940655">if</span>&nbsp;<span class="ident" id="6940658">err</span>&nbsp;<span class="op" id="6940662">:=</span>&nbsp;<span class="ident" id="6940665">Compact</span><span class="op" id="6940672">(</span><span class="op" id="6940673">&amp;</span><span class="ident" id="6940674">buf</span><span class="op" id="6940677">,</span>&nbsp;<span class="op" id="6940679">[</span><span class="op" id="6940680">]</span><span class="builtintype" id="6940681">byte</span><span class="op" id="6940685">(</span><span class="ident" id="6940686">tt</span><span class="op" id="6940688">.</span><span class="ident" id="6940689">indent</span><span class="op" id="6940695">)</span><span class="op" id="6940696">)</span><span class="op" id="6940697">;</span>&nbsp;<span class="ident" id="6940699">err</span>&nbsp;<span class="op" id="6940703">!=</span>&nbsp;<span class="builtintype" id="6940706">nil</span>&nbsp;<span class="op" id="6940710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6940715">t</span><span class="op" id="6940716">.</span><span class="ident" id="6940717">Errorf</span><span class="op" id="6940723">(</span><span class="string" id="6940724">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6940742">,</span>&nbsp;<span class="ident" id="6940744">tt</span><span class="op" id="6940746">.</span><span class="ident" id="6940747">indent</span><span class="op" id="6940753">,</span>&nbsp;<span class="ident" id="6940755">err</span><span class="op" id="6940758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6940763">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940774">}</span>&nbsp;<span class="keyword" id="6940776">else</span>&nbsp;<span class="keyword" id="6940781">if</span>&nbsp;<span class="ident" id="6940784">s</span>&nbsp;<span class="op" id="6940786">:=</span>&nbsp;<span class="ident" id="6940789">buf</span><span class="op" id="6940792">.</span><span class="ident" id="6940793">String</span><span class="op" id="6940799">(</span><span class="op" id="6940800">)</span><span class="op" id="6940801">;</span>&nbsp;<span class="ident" id="6940803">s</span>&nbsp;<span class="op" id="6940805">!=</span>&nbsp;<span class="ident" id="6940808">tt</span><span class="op" id="6940810">.</span><span class="ident" id="6940811">compact</span>&nbsp;<span class="op" id="6940819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6940824">t</span><span class="op" id="6940825">.</span><span class="ident" id="6940826">Errorf</span><span class="op" id="6940832">(</span><span class="string" id="6940833">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6940863">,</span>&nbsp;<span class="ident" id="6940865">tt</span><span class="op" id="6940867">.</span><span class="ident" id="6940868">indent</span><span class="op" id="6940874">,</span>&nbsp;<span class="ident" id="6940876">s</span><span class="op" id="6940877">,</span>&nbsp;<span class="ident" id="6940879">tt</span><span class="op" id="6940881">.</span><span class="ident" id="6940882">compact</span><span class="op" id="6940889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6940896">}</span><br>
<span class="lineno"></span><span class="op" id="6940898">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6940901">func</span>&nbsp;<span class="ident" id="6940906">TestCompactSeparators</span><span class="op" id="6940927">(</span><span class="ident" id="6940928">t</span>&nbsp;<span class="op" id="6940930">*</span><span class="ident" id="6940931">testing</span><span class="op" id="6940938">.</span><span class="ident" id="6940939">T</span><span class="op" id="6940940">)</span>&nbsp;<span class="op" id="6940942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6940945">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6941001">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941045">tests</span>&nbsp;<span class="op" id="6941051">:=</span>&nbsp;<span class="op" id="6941054">[</span><span class="op" id="6941055">]</span><span class="keyword" id="6941056">struct</span>&nbsp;<span class="op" id="6941063">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941067">in</span><span class="op" id="6941069">,</span>&nbsp;<span class="ident" id="6941071">compact</span>&nbsp;<span class="builtintype" id="6941079">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941087">}</span><span class="op" id="6941088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941092">{</span><span class="string" id="6941093">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="6941110">,</span>&nbsp;<span class="string" id="6941112">`{&#34;\u2028&#34;:1}`</span><span class="op" id="6941126">}</span><span class="op" id="6941127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941131">{</span><span class="string" id="6941132">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="6941149">,</span>&nbsp;<span class="string" id="6941151">`{&#34;\u2029&#34;:2}`</span><span class="op" id="6941165">}</span><span class="op" id="6941166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941169">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941172">for</span>&nbsp;<span class="ident" id="6941176">_</span><span class="op" id="6941177">,</span>&nbsp;<span class="ident" id="6941179">tt</span>&nbsp;<span class="op" id="6941182">:=</span>&nbsp;<span class="keyword" id="6941185">range</span>&nbsp;<span class="ident" id="6941191">tests</span>&nbsp;<span class="op" id="6941197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941201">var</span>&nbsp;<span class="ident" id="6941205">buf</span>&nbsp;<span class="ident" id="6941209">bytes</span><span class="op" id="6941214">.</span><span class="ident" id="6941215">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941224">if</span>&nbsp;<span class="ident" id="6941227">err</span>&nbsp;<span class="op" id="6941231">:=</span>&nbsp;<span class="ident" id="6941234">Compact</span><span class="op" id="6941241">(</span><span class="op" id="6941242">&amp;</span><span class="ident" id="6941243">buf</span><span class="op" id="6941246">,</span>&nbsp;<span class="op" id="6941248">[</span><span class="op" id="6941249">]</span><span class="builtintype" id="6941250">byte</span><span class="op" id="6941254">(</span><span class="ident" id="6941255">tt</span><span class="op" id="6941257">.</span><span class="ident" id="6941258">in</span><span class="op" id="6941260">)</span><span class="op" id="6941261">)</span><span class="op" id="6941262">;</span>&nbsp;<span class="ident" id="6941264">err</span>&nbsp;<span class="op" id="6941268">!=</span>&nbsp;<span class="builtintype" id="6941271">nil</span>&nbsp;<span class="op" id="6941275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941280">t</span><span class="op" id="6941281">.</span><span class="ident" id="6941282">Errorf</span><span class="op" id="6941288">(</span><span class="string" id="6941289">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="6941306">,</span>&nbsp;<span class="ident" id="6941308">tt</span><span class="op" id="6941310">.</span><span class="ident" id="6941311">in</span><span class="op" id="6941313">,</span>&nbsp;<span class="ident" id="6941315">err</span><span class="op" id="6941318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941322">}</span>&nbsp;<span class="keyword" id="6941324">else</span>&nbsp;<span class="keyword" id="6941329">if</span>&nbsp;<span class="ident" id="6941332">s</span>&nbsp;<span class="op" id="6941334">:=</span>&nbsp;<span class="ident" id="6941337">buf</span><span class="op" id="6941340">.</span><span class="ident" id="6941341">String</span><span class="op" id="6941347">(</span><span class="op" id="6941348">)</span><span class="op" id="6941349">;</span>&nbsp;<span class="ident" id="6941351">s</span>&nbsp;<span class="op" id="6941353">!=</span>&nbsp;<span class="ident" id="6941356">tt</span><span class="op" id="6941358">.</span><span class="ident" id="6941359">compact</span>&nbsp;<span class="op" id="6941367">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941372">t</span><span class="op" id="6941373">.</span><span class="ident" id="6941374">Errorf</span><span class="op" id="6941380">(</span><span class="string" id="6941381">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6941408">,</span>&nbsp;<span class="ident" id="6941410">tt</span><span class="op" id="6941412">.</span><span class="ident" id="6941413">in</span><span class="op" id="6941415">,</span>&nbsp;<span class="ident" id="6941417">s</span><span class="op" id="6941418">,</span>&nbsp;<span class="ident" id="6941420">tt</span><span class="op" id="6941422">.</span><span class="ident" id="6941423">compact</span><span class="op" id="6941430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941437">}</span><br>
<span class="lineno"></span><span class="op" id="6941439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6941442">func</span>&nbsp;<span class="ident" id="6941447">TestIndent</span><span class="op" id="6941457">(</span><span class="ident" id="6941458">t</span>&nbsp;<span class="op" id="6941460">*</span><span class="ident" id="6941461">testing</span><span class="op" id="6941468">.</span><span class="ident" id="6941469">T</span><span class="op" id="6941470">)</span>&nbsp;<span class="op" id="6941472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941475">var</span>&nbsp;<span class="ident" id="6941479">buf</span>&nbsp;<span class="ident" id="6941483">bytes</span><span class="op" id="6941488">.</span><span class="ident" id="6941489">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941497">for</span>&nbsp;<span class="ident" id="6941501">_</span><span class="op" id="6941502">,</span>&nbsp;<span class="ident" id="6941504">tt</span>&nbsp;<span class="op" id="6941507">:=</span>&nbsp;<span class="keyword" id="6941510">range</span>&nbsp;<span class="ident" id="6941516">examples</span>&nbsp;<span class="op" id="6941525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941529">buf</span><span class="op" id="6941532">.</span><span class="ident" id="6941533">Reset</span><span class="op" id="6941538">(</span><span class="op" id="6941539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941543">if</span>&nbsp;<span class="ident" id="6941546">err</span>&nbsp;<span class="op" id="6941550">:=</span>&nbsp;<span class="ident" id="6941553">Indent</span><span class="op" id="6941559">(</span><span class="op" id="6941560">&amp;</span><span class="ident" id="6941561">buf</span><span class="op" id="6941564">,</span>&nbsp;<span class="op" id="6941566">[</span><span class="op" id="6941567">]</span><span class="builtintype" id="6941568">byte</span><span class="op" id="6941572">(</span><span class="ident" id="6941573">tt</span><span class="op" id="6941575">.</span><span class="ident" id="6941576">indent</span><span class="op" id="6941582">)</span><span class="op" id="6941583">,</span>&nbsp;<span class="string" id="6941585">&#34;&#34;</span><span class="op" id="6941587">,</span>&nbsp;<span class="string" id="6941589">&#34;\t&#34;</span><span class="op" id="6941593">)</span><span class="op" id="6941594">;</span>&nbsp;<span class="ident" id="6941596">err</span>&nbsp;<span class="op" id="6941600">!=</span>&nbsp;<span class="builtintype" id="6941603">nil</span>&nbsp;<span class="op" id="6941607">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941612">t</span><span class="op" id="6941613">.</span><span class="ident" id="6941614">Errorf</span><span class="op" id="6941620">(</span><span class="string" id="6941621">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6941638">,</span>&nbsp;<span class="ident" id="6941640">tt</span><span class="op" id="6941642">.</span><span class="ident" id="6941643">indent</span><span class="op" id="6941649">,</span>&nbsp;<span class="ident" id="6941651">err</span><span class="op" id="6941654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941658">}</span>&nbsp;<span class="keyword" id="6941660">else</span>&nbsp;<span class="keyword" id="6941665">if</span>&nbsp;<span class="ident" id="6941668">s</span>&nbsp;<span class="op" id="6941670">:=</span>&nbsp;<span class="ident" id="6941673">buf</span><span class="op" id="6941676">.</span><span class="ident" id="6941677">String</span><span class="op" id="6941683">(</span><span class="op" id="6941684">)</span><span class="op" id="6941685">;</span>&nbsp;<span class="ident" id="6941687">s</span>&nbsp;<span class="op" id="6941689">!=</span>&nbsp;<span class="ident" id="6941692">tt</span><span class="op" id="6941694">.</span><span class="ident" id="6941695">indent</span>&nbsp;<span class="op" id="6941702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941707">t</span><span class="op" id="6941708">.</span><span class="ident" id="6941709">Errorf</span><span class="op" id="6941715">(</span><span class="string" id="6941716">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6941750">,</span>&nbsp;<span class="ident" id="6941752">tt</span><span class="op" id="6941754">.</span><span class="ident" id="6941755">indent</span><span class="op" id="6941761">,</span>&nbsp;<span class="ident" id="6941763">s</span><span class="op" id="6941764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941773">buf</span><span class="op" id="6941776">.</span><span class="ident" id="6941777">Reset</span><span class="op" id="6941782">(</span><span class="op" id="6941783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941787">if</span>&nbsp;<span class="ident" id="6941790">err</span>&nbsp;<span class="op" id="6941794">:=</span>&nbsp;<span class="ident" id="6941797">Indent</span><span class="op" id="6941803">(</span><span class="op" id="6941804">&amp;</span><span class="ident" id="6941805">buf</span><span class="op" id="6941808">,</span>&nbsp;<span class="op" id="6941810">[</span><span class="op" id="6941811">]</span><span class="builtintype" id="6941812">byte</span><span class="op" id="6941816">(</span><span class="ident" id="6941817">tt</span><span class="op" id="6941819">.</span><span class="ident" id="6941820">compact</span><span class="op" id="6941827">)</span><span class="op" id="6941828">,</span>&nbsp;<span class="string" id="6941830">&#34;&#34;</span><span class="op" id="6941832">,</span>&nbsp;<span class="string" id="6941834">&#34;\t&#34;</span><span class="op" id="6941838">)</span><span class="op" id="6941839">;</span>&nbsp;<span class="ident" id="6941841">err</span>&nbsp;<span class="op" id="6941845">!=</span>&nbsp;<span class="builtintype" id="6941848">nil</span>&nbsp;<span class="op" id="6941852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941857">t</span><span class="op" id="6941858">.</span><span class="ident" id="6941859">Errorf</span><span class="op" id="6941865">(</span><span class="string" id="6941866">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6941883">,</span>&nbsp;<span class="ident" id="6941885">tt</span><span class="op" id="6941887">.</span><span class="ident" id="6941888">compact</span><span class="op" id="6941895">,</span>&nbsp;<span class="ident" id="6941897">err</span><span class="op" id="6941900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6941905">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6941916">}</span>&nbsp;<span class="keyword" id="6941918">else</span>&nbsp;<span class="keyword" id="6941923">if</span>&nbsp;<span class="ident" id="6941926">s</span>&nbsp;<span class="op" id="6941928">:=</span>&nbsp;<span class="ident" id="6941931">buf</span><span class="op" id="6941934">.</span><span class="ident" id="6941935">String</span><span class="op" id="6941941">(</span><span class="op" id="6941942">)</span><span class="op" id="6941943">;</span>&nbsp;<span class="ident" id="6941945">s</span>&nbsp;<span class="op" id="6941947">!=</span>&nbsp;<span class="ident" id="6941950">tt</span><span class="op" id="6941952">.</span><span class="ident" id="6941953">indent</span>&nbsp;<span class="op" id="6941960">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6941965">t</span><span class="op" id="6941966">.</span><span class="ident" id="6941967">Errorf</span><span class="op" id="6941973">(</span><span class="string" id="6941974">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6942003">,</span>&nbsp;<span class="ident" id="6942005">tt</span><span class="op" id="6942007">.</span><span class="ident" id="6942008">compact</span><span class="op" id="6942015">,</span>&nbsp;<span class="ident" id="6942017">s</span><span class="op" id="6942018">,</span>&nbsp;<span class="ident" id="6942020">tt</span><span class="op" id="6942022">.</span><span class="ident" id="6942023">indent</span><span class="op" id="6942029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942036">}</span><br>
<span class="lineno"></span><span class="op" id="6942038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="6942041">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6942080">func</span>&nbsp;<span class="ident" id="6942085">TestCompactBig</span><span class="op" id="6942099">(</span><span class="ident" id="6942100">t</span>&nbsp;<span class="op" id="6942102">*</span><span class="ident" id="6942103">testing</span><span class="op" id="6942110">.</span><span class="ident" id="6942111">T</span><span class="op" id="6942112">)</span>&nbsp;<span class="op" id="6942114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942117">initBig</span><span class="op" id="6942124">(</span><span class="op" id="6942125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942128">var</span>&nbsp;<span class="ident" id="6942132">buf</span>&nbsp;<span class="ident" id="6942136">bytes</span><span class="op" id="6942141">.</span><span class="ident" id="6942142">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942150">if</span>&nbsp;<span class="ident" id="6942153">err</span>&nbsp;<span class="op" id="6942157">:=</span>&nbsp;<span class="ident" id="6942160">Compact</span><span class="op" id="6942167">(</span><span class="op" id="6942168">&amp;</span><span class="ident" id="6942169">buf</span><span class="op" id="6942172">,</span>&nbsp;<span class="ident" id="6942174">jsonBig</span><span class="op" id="6942181">)</span><span class="op" id="6942182">;</span>&nbsp;<span class="ident" id="6942184">err</span>&nbsp;<span class="op" id="6942188">!=</span>&nbsp;<span class="builtintype" id="6942191">nil</span>&nbsp;<span class="op" id="6942195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942199">t</span><span class="op" id="6942200">.</span><span class="ident" id="6942201">Fatalf</span><span class="op" id="6942207">(</span><span class="string" id="6942208">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6942221">,</span>&nbsp;<span class="ident" id="6942223">err</span><span class="op" id="6942226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942232">b</span>&nbsp;<span class="op" id="6942234">:=</span>&nbsp;<span class="ident" id="6942237">buf</span><span class="op" id="6942240">.</span><span class="ident" id="6942241">Bytes</span><span class="op" id="6942246">(</span><span class="op" id="6942247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942250">if</span>&nbsp;<span class="op" id="6942253">!</span><span class="ident" id="6942254">bytes</span><span class="op" id="6942259">.</span><span class="ident" id="6942260">Equal</span><span class="op" id="6942265">(</span><span class="ident" id="6942266">b</span><span class="op" id="6942267">,</span>&nbsp;<span class="ident" id="6942269">jsonBig</span><span class="op" id="6942276">)</span>&nbsp;<span class="op" id="6942278">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942282">t</span><span class="op" id="6942283">.</span><span class="ident" id="6942284">Error</span><span class="op" id="6942289">(</span><span class="string" id="6942290">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6942319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942323">diff</span><span class="op" id="6942327">(</span><span class="ident" id="6942328">t</span><span class="op" id="6942329">,</span>&nbsp;<span class="ident" id="6942331">b</span><span class="op" id="6942332">,</span>&nbsp;<span class="ident" id="6942334">jsonBig</span><span class="op" id="6942341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942345">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942353">}</span><br>
<span class="lineno"></span><span class="op" id="6942355">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="6942358">func</span>&nbsp;<span class="ident" id="6942363">TestIndentBig</span><span class="op" id="6942376">(</span><span class="ident" id="6942377">t</span>&nbsp;<span class="op" id="6942379">*</span><span class="ident" id="6942380">testing</span><span class="op" id="6942387">.</span><span class="ident" id="6942388">T</span><span class="op" id="6942389">)</span>&nbsp;<span class="op" id="6942391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942394">initBig</span><span class="op" id="6942401">(</span><span class="op" id="6942402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942405">var</span>&nbsp;<span class="ident" id="6942409">buf</span>&nbsp;<span class="ident" id="6942413">bytes</span><span class="op" id="6942418">.</span><span class="ident" id="6942419">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942427">if</span>&nbsp;<span class="ident" id="6942430">err</span>&nbsp;<span class="op" id="6942434">:=</span>&nbsp;<span class="ident" id="6942437">Indent</span><span class="op" id="6942443">(</span><span class="op" id="6942444">&amp;</span><span class="ident" id="6942445">buf</span><span class="op" id="6942448">,</span>&nbsp;<span class="ident" id="6942450">jsonBig</span><span class="op" id="6942457">,</span>&nbsp;<span class="string" id="6942459">&#34;&#34;</span><span class="op" id="6942461">,</span>&nbsp;<span class="string" id="6942463">&#34;\t&#34;</span><span class="op" id="6942467">)</span><span class="op" id="6942468">;</span>&nbsp;<span class="ident" id="6942470">err</span>&nbsp;<span class="op" id="6942474">!=</span>&nbsp;<span class="builtintype" id="6942477">nil</span>&nbsp;<span class="op" id="6942481">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942485">t</span><span class="op" id="6942486">.</span><span class="ident" id="6942487">Fatalf</span><span class="op" id="6942493">(</span><span class="string" id="6942494">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="6942507">,</span>&nbsp;<span class="ident" id="6942509">err</span><span class="op" id="6942512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942518">b</span>&nbsp;<span class="op" id="6942520">:=</span>&nbsp;<span class="ident" id="6942523">buf</span><span class="op" id="6942526">.</span><span class="ident" id="6942527">Bytes</span><span class="op" id="6942532">(</span><span class="op" id="6942533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942536">if</span>&nbsp;<span class="builtinfunc" id="6942539">len</span><span class="op" id="6942542">(</span><span class="ident" id="6942543">b</span><span class="op" id="6942544">)</span>&nbsp;<span class="op" id="6942546">==</span>&nbsp;<span class="builtinfunc" id="6942549">len</span><span class="op" id="6942552">(</span><span class="ident" id="6942553">jsonBig</span><span class="op" id="6942560">)</span>&nbsp;<span class="op" id="6942562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6942566">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6942615">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942652">t</span><span class="op" id="6942653">.</span><span class="ident" id="6942654">Fatalf</span><span class="op" id="6942660">(</span><span class="string" id="6942661">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="6942697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6942704">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942729">var</span>&nbsp;<span class="ident" id="6942733">buf1</span>&nbsp;<span class="ident" id="6942738">bytes</span><span class="op" id="6942743">.</span><span class="ident" id="6942744">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942752">if</span>&nbsp;<span class="ident" id="6942755">err</span>&nbsp;<span class="op" id="6942759">:=</span>&nbsp;<span class="ident" id="6942762">Indent</span><span class="op" id="6942768">(</span><span class="op" id="6942769">&amp;</span><span class="ident" id="6942770">buf1</span><span class="op" id="6942774">,</span>&nbsp;<span class="ident" id="6942776">b</span><span class="op" id="6942777">,</span>&nbsp;<span class="string" id="6942779">&#34;&#34;</span><span class="op" id="6942781">,</span>&nbsp;<span class="string" id="6942783">&#34;\t&#34;</span><span class="op" id="6942787">)</span><span class="op" id="6942788">;</span>&nbsp;<span class="ident" id="6942790">err</span>&nbsp;<span class="op" id="6942794">!=</span>&nbsp;<span class="builtintype" id="6942797">nil</span>&nbsp;<span class="op" id="6942801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942805">t</span><span class="op" id="6942806">.</span><span class="ident" id="6942807">Fatalf</span><span class="op" id="6942813">(</span><span class="string" id="6942814">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="6942827">,</span>&nbsp;<span class="ident" id="6942829">err</span><span class="op" id="6942832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942838">b1</span>&nbsp;<span class="op" id="6942841">:=</span>&nbsp;<span class="ident" id="6942844">buf1</span><span class="op" id="6942848">.</span><span class="ident" id="6942849">Bytes</span><span class="op" id="6942854">(</span><span class="op" id="6942855">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942858">if</span>&nbsp;<span class="op" id="6942861">!</span><span class="ident" id="6942862">bytes</span><span class="op" id="6942867">.</span><span class="ident" id="6942868">Equal</span><span class="op" id="6942873">(</span><span class="ident" id="6942874">b1</span><span class="op" id="6942876">,</span>&nbsp;<span class="ident" id="6942878">b</span><span class="op" id="6942879">)</span>&nbsp;<span class="op" id="6942881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942885">t</span><span class="op" id="6942886">.</span><span class="ident" id="6942887">Error</span><span class="op" id="6942892">(</span><span class="string" id="6942893">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="6942937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6942941">diff</span><span class="op" id="6942945">(</span><span class="ident" id="6942946">t</span><span class="op" id="6942947">,</span>&nbsp;<span class="ident" id="6942949">b1</span><span class="op" id="6942951">,</span>&nbsp;<span class="ident" id="6942953">b</span><span class="op" id="6942954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6942958">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6942966">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6942970">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943002">buf1</span><span class="op" id="6943006">.</span><span class="ident" id="6943007">Reset</span><span class="op" id="6943012">(</span><span class="op" id="6943013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943016">if</span>&nbsp;<span class="ident" id="6943019">err</span>&nbsp;<span class="op" id="6943023">:=</span>&nbsp;<span class="ident" id="6943026">Compact</span><span class="op" id="6943033">(</span><span class="op" id="6943034">&amp;</span><span class="ident" id="6943035">buf1</span><span class="op" id="6943039">,</span>&nbsp;<span class="ident" id="6943041">b</span><span class="op" id="6943042">)</span><span class="op" id="6943043">;</span>&nbsp;<span class="ident" id="6943045">err</span>&nbsp;<span class="op" id="6943049">!=</span>&nbsp;<span class="builtintype" id="6943052">nil</span>&nbsp;<span class="op" id="6943056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943060">t</span><span class="op" id="6943061">.</span><span class="ident" id="6943062">Fatalf</span><span class="op" id="6943068">(</span><span class="string" id="6943069">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6943082">,</span>&nbsp;<span class="ident" id="6943084">err</span><span class="op" id="6943087">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943093">b1</span>&nbsp;<span class="op" id="6943096">=</span>&nbsp;<span class="ident" id="6943098">buf1</span><span class="op" id="6943102">.</span><span class="ident" id="6943103">Bytes</span><span class="op" id="6943108">(</span><span class="op" id="6943109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943112">if</span>&nbsp;<span class="op" id="6943115">!</span><span class="ident" id="6943116">bytes</span><span class="op" id="6943121">.</span><span class="ident" id="6943122">Equal</span><span class="op" id="6943127">(</span><span class="ident" id="6943128">b1</span><span class="op" id="6943130">,</span>&nbsp;<span class="ident" id="6943132">jsonBig</span><span class="op" id="6943139">)</span>&nbsp;<span class="op" id="6943141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943145">t</span><span class="op" id="6943146">.</span><span class="ident" id="6943147">Error</span><span class="op" id="6943152">(</span><span class="string" id="6943153">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6943190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943194">diff</span><span class="op" id="6943198">(</span><span class="ident" id="6943199">t</span><span class="op" id="6943200">,</span>&nbsp;<span class="ident" id="6943202">b1</span><span class="op" id="6943204">,</span>&nbsp;<span class="ident" id="6943206">jsonBig</span><span class="op" id="6943213">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943217">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943225">}</span><br>
<span class="lineno"></span><span class="op" id="6943227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943230">type</span>&nbsp;<span class="ident" id="6943235">indentErrorTest</span>&nbsp;<span class="keyword" id="6943251">struct</span>&nbsp;<span class="op" id="6943258">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943261">in</span>&nbsp;&nbsp;<span class="builtintype" id="6943265">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943273">err</span>&nbsp;<span class="builtintype" id="6943277">error</span><br>
<span class="lineno"></span><span class="op" id="6943283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943286">var</span>&nbsp;<span class="ident" id="6943290">indentErrorTests</span>&nbsp;<span class="op" id="6943307">=</span>&nbsp;<span class="op" id="6943309">[</span><span class="op" id="6943310">]</span><span class="ident" id="6943311">indentErrorTest</span><span class="op" id="6943326">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943329">{</span><span class="string" id="6943330">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="6943349">,</span>&nbsp;<span class="op" id="6943351">&amp;</span><span class="ident" id="6943352">SyntaxError</span><span class="op" id="6943363">{</span><span class="string" id="6943364">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="6943404">,</span>&nbsp;<span class="num" id="6943406">17</span><span class="op" id="6943408">}</span><span class="op" id="6943409">}</span><span class="op" id="6943410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943413">{</span><span class="string" id="6943414">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="6943439">,</span>&nbsp;<span class="op" id="6943441">&amp;</span><span class="ident" id="6943442">SyntaxError</span><span class="op" id="6943453">{</span><span class="string" id="6943454">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="6943506">,</span>&nbsp;<span class="num" id="6943508">13</span><span class="op" id="6943510">}</span><span class="op" id="6943511">}</span><span class="op" id="6943512">,</span><br>
<span class="lineno"></span><span class="op" id="6943514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943517">func</span>&nbsp;<span class="ident" id="6943522">TestIndentErrors</span><span class="op" id="6943538">(</span><span class="ident" id="6943539">t</span>&nbsp;<span class="op" id="6943541">*</span><span class="ident" id="6943542">testing</span><span class="op" id="6943549">.</span><span class="ident" id="6943550">T</span><span class="op" id="6943551">)</span>&nbsp;<span class="op" id="6943553">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943556">for</span>&nbsp;<span class="ident" id="6943560">i</span><span class="op" id="6943561">,</span>&nbsp;<span class="ident" id="6943563">tt</span>&nbsp;<span class="op" id="6943566">:=</span>&nbsp;<span class="keyword" id="6943569">range</span>&nbsp;<span class="ident" id="6943575">indentErrorTests</span>&nbsp;<span class="op" id="6943592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943596">slice</span>&nbsp;<span class="op" id="6943602">:=</span>&nbsp;<span class="builtinfunc" id="6943605">make</span><span class="op" id="6943609">(</span><span class="op" id="6943610">[</span><span class="op" id="6943611">]</span><span class="builtintype" id="6943612">uint8</span><span class="op" id="6943617">,</span>&nbsp;<span class="num" id="6943619">0</span><span class="op" id="6943620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943624">buf</span>&nbsp;<span class="op" id="6943628">:=</span>&nbsp;<span class="ident" id="6943631">bytes</span><span class="op" id="6943636">.</span><span class="ident" id="6943637">NewBuffer</span><span class="op" id="6943646">(</span><span class="ident" id="6943647">slice</span><span class="op" id="6943652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943656">if</span>&nbsp;<span class="ident" id="6943659">err</span>&nbsp;<span class="op" id="6943663">:=</span>&nbsp;<span class="ident" id="6943666">Indent</span><span class="op" id="6943672">(</span><span class="ident" id="6943673">buf</span><span class="op" id="6943676">,</span>&nbsp;<span class="op" id="6943678">[</span><span class="op" id="6943679">]</span><span class="builtintype" id="6943680">uint8</span><span class="op" id="6943685">(</span><span class="ident" id="6943686">tt</span><span class="op" id="6943688">.</span><span class="ident" id="6943689">in</span><span class="op" id="6943691">)</span><span class="op" id="6943692">,</span>&nbsp;<span class="string" id="6943694">&#34;&#34;</span><span class="op" id="6943696">,</span>&nbsp;<span class="string" id="6943698">&#34;&#34;</span><span class="op" id="6943700">)</span><span class="op" id="6943701">;</span>&nbsp;<span class="ident" id="6943703">err</span>&nbsp;<span class="op" id="6943707">!=</span>&nbsp;<span class="builtintype" id="6943710">nil</span>&nbsp;<span class="op" id="6943714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943719">if</span>&nbsp;<span class="op" id="6943722">!</span><span class="ident" id="6943723">reflect</span><span class="op" id="6943730">.</span><span class="ident" id="6943731">DeepEqual</span><span class="op" id="6943740">(</span><span class="ident" id="6943741">err</span><span class="op" id="6943744">,</span>&nbsp;<span class="ident" id="6943746">tt</span><span class="op" id="6943748">.</span><span class="ident" id="6943749">err</span><span class="op" id="6943752">)</span>&nbsp;<span class="op" id="6943754">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943760">t</span><span class="op" id="6943761">.</span><span class="ident" id="6943762">Errorf</span><span class="op" id="6943768">(</span><span class="string" id="6943769">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="6943787">,</span>&nbsp;<span class="ident" id="6943789">i</span><span class="op" id="6943790">,</span>&nbsp;<span class="ident" id="6943792">err</span><span class="op" id="6943795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943801">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943820">}</span><br>
<span class="lineno">180</span><span class="op" id="6943822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6943825">func</span>&nbsp;<span class="ident" id="6943830">TestNextValueBig</span><span class="op" id="6943846">(</span><span class="ident" id="6943847">t</span>&nbsp;<span class="op" id="6943849">*</span><span class="ident" id="6943850">testing</span><span class="op" id="6943857">.</span><span class="ident" id="6943858">T</span><span class="op" id="6943859">)</span>&nbsp;<span class="op" id="6943861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943864">initBig</span><span class="op" id="6943871">(</span><span class="op" id="6943872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943875">var</span>&nbsp;<span class="ident" id="6943879">scan</span>&nbsp;<span class="ident" id="6943884">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943893">item</span><span class="op" id="6943897">,</span>&nbsp;<span class="ident" id="6943899">rest</span><span class="op" id="6943903">,</span>&nbsp;<span class="ident" id="6943905">err</span>&nbsp;<span class="op" id="6943909">:=</span>&nbsp;<span class="ident" id="6943912">nextValue</span><span class="op" id="6943921">(</span><span class="ident" id="6943922">jsonBig</span><span class="op" id="6943929">,</span>&nbsp;<span class="op" id="6943931">&amp;</span><span class="ident" id="6943932">scan</span><span class="op" id="6943936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943939">if</span>&nbsp;<span class="ident" id="6943942">err</span>&nbsp;<span class="op" id="6943946">!=</span>&nbsp;<span class="builtintype" id="6943949">nil</span>&nbsp;<span class="op" id="6943953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6943957">t</span><span class="op" id="6943958">.</span><span class="ident" id="6943959">Fatalf</span><span class="op" id="6943965">(</span><span class="string" id="6943966">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="6943981">,</span>&nbsp;<span class="ident" id="6943983">err</span><span class="op" id="6943986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6943989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6943992">if</span>&nbsp;<span class="builtinfunc" id="6943995">len</span><span class="op" id="6943998">(</span><span class="ident" id="6943999">item</span><span class="op" id="6944003">)</span>&nbsp;<span class="op" id="6944005">!=</span>&nbsp;<span class="builtinfunc" id="6944008">len</span><span class="op" id="6944011">(</span><span class="ident" id="6944012">jsonBig</span><span class="op" id="6944019">)</span>&nbsp;<span class="op" id="6944021">||</span>&nbsp;<span class="op" id="6944024">&amp;</span><span class="ident" id="6944025">item</span><span class="op" id="6944029">[</span><span class="num" id="6944030">0</span><span class="op" id="6944031">]</span>&nbsp;<span class="op" id="6944033">!=</span>&nbsp;<span class="op" id="6944036">&amp;</span><span class="ident" id="6944037">jsonBig</span><span class="op" id="6944044">[</span><span class="num" id="6944045">0</span><span class="op" id="6944046">]</span>&nbsp;<span class="op" id="6944048">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944052">t</span><span class="op" id="6944053">.</span><span class="ident" id="6944054">Errorf</span><span class="op" id="6944060">(</span><span class="string" id="6944061">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6944082">,</span>&nbsp;<span class="builtinfunc" id="6944084">len</span><span class="op" id="6944087">(</span><span class="ident" id="6944088">item</span><span class="op" id="6944092">)</span><span class="op" id="6944093">,</span>&nbsp;<span class="builtinfunc" id="6944095">len</span><span class="op" id="6944098">(</span><span class="ident" id="6944099">jsonBig</span><span class="op" id="6944106">)</span><span class="op" id="6944107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944113">if</span>&nbsp;<span class="builtinfunc" id="6944116">len</span><span class="op" id="6944119">(</span><span class="ident" id="6944120">rest</span><span class="op" id="6944124">)</span>&nbsp;<span class="op" id="6944126">!=</span>&nbsp;<span class="num" id="6944129">0</span>&nbsp;<span class="op" id="6944131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944135">t</span><span class="op" id="6944136">.</span><span class="ident" id="6944137">Errorf</span><span class="op" id="6944143">(</span><span class="string" id="6944144">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6944162">,</span>&nbsp;<span class="builtinfunc" id="6944164">len</span><span class="op" id="6944167">(</span><span class="ident" id="6944168">rest</span><span class="op" id="6944172">)</span><span class="op" id="6944173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944176">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944180">item</span><span class="op" id="6944184">,</span>&nbsp;<span class="ident" id="6944186">rest</span><span class="op" id="6944190">,</span>&nbsp;<span class="ident" id="6944192">err</span>&nbsp;<span class="op" id="6944196">=</span>&nbsp;<span class="ident" id="6944198">nextValue</span><span class="op" id="6944207">(</span><span class="builtinfunc" id="6944208">append</span><span class="op" id="6944214">(</span><span class="ident" id="6944215">jsonBig</span><span class="op" id="6944222">,</span>&nbsp;<span class="string" id="6944224">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="6944237">...</span><span class="op" id="6944240">)</span><span class="op" id="6944241">,</span>&nbsp;<span class="op" id="6944243">&amp;</span><span class="ident" id="6944244">scan</span><span class="op" id="6944248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944251">if</span>&nbsp;<span class="ident" id="6944254">err</span>&nbsp;<span class="op" id="6944258">!=</span>&nbsp;<span class="builtintype" id="6944261">nil</span>&nbsp;<span class="op" id="6944265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944269">t</span><span class="op" id="6944270">.</span><span class="ident" id="6944271">Fatalf</span><span class="op" id="6944277">(</span><span class="string" id="6944278">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="6944299">,</span>&nbsp;<span class="ident" id="6944301">err</span><span class="op" id="6944304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944307">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944310">if</span>&nbsp;<span class="builtinfunc" id="6944313">len</span><span class="op" id="6944316">(</span><span class="ident" id="6944317">item</span><span class="op" id="6944321">)</span>&nbsp;<span class="op" id="6944323">!=</span>&nbsp;<span class="builtinfunc" id="6944326">len</span><span class="op" id="6944329">(</span><span class="ident" id="6944330">jsonBig</span><span class="op" id="6944337">)</span>&nbsp;<span class="op" id="6944339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944343">t</span><span class="op" id="6944344">.</span><span class="ident" id="6944345">Errorf</span><span class="op" id="6944351">(</span><span class="string" id="6944352">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6944373">,</span>&nbsp;<span class="builtinfunc" id="6944375">len</span><span class="op" id="6944378">(</span><span class="ident" id="6944379">item</span><span class="op" id="6944383">)</span><span class="op" id="6944384">,</span>&nbsp;<span class="builtinfunc" id="6944386">len</span><span class="op" id="6944389">(</span><span class="ident" id="6944390">jsonBig</span><span class="op" id="6944397">)</span><span class="op" id="6944398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944404">if</span>&nbsp;<span class="builtintype" id="6944407">string</span><span class="op" id="6944413">(</span><span class="ident" id="6944414">rest</span><span class="op" id="6944418">)</span>&nbsp;<span class="op" id="6944420">!=</span>&nbsp;<span class="string" id="6944423">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="6944437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944441">t</span><span class="op" id="6944442">.</span><span class="ident" id="6944443">Errorf</span><span class="op" id="6944449">(</span><span class="string" id="6944450">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6944468">,</span>&nbsp;<span class="builtinfunc" id="6944470">len</span><span class="op" id="6944473">(</span><span class="ident" id="6944474">rest</span><span class="op" id="6944478">)</span><span class="op" id="6944479">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944482">}</span><br>
<span class="lineno"></span><span class="op" id="6944484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944487">var</span>&nbsp;<span class="ident" id="6944491">benchScan</span>&nbsp;<span class="ident" id="6944501">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="6944510">func</span>&nbsp;<span class="ident" id="6944515">BenchmarkSkipValue</span><span class="op" id="6944533">(</span><span class="ident" id="6944534">b</span>&nbsp;<span class="op" id="6944536">*</span><span class="ident" id="6944537">testing</span><span class="op" id="6944544">.</span><span class="ident" id="6944545">B</span><span class="op" id="6944546">)</span>&nbsp;<span class="op" id="6944548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944551">initBig</span><span class="op" id="6944558">(</span><span class="op" id="6944559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944562">for</span>&nbsp;<span class="ident" id="6944566">i</span>&nbsp;<span class="op" id="6944568">:=</span>&nbsp;<span class="num" id="6944571">0</span><span class="op" id="6944572">;</span>&nbsp;<span class="ident" id="6944574">i</span>&nbsp;<span class="op" id="6944576">&lt;</span>&nbsp;<span class="ident" id="6944578">b</span><span class="op" id="6944579">.</span><span class="ident" id="6944580">N</span><span class="op" id="6944581">;</span>&nbsp;<span class="ident" id="6944583">i</span><span class="op" id="6944584">++</span>&nbsp;<span class="op" id="6944587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944591">nextValue</span><span class="op" id="6944600">(</span><span class="ident" id="6944601">jsonBig</span><span class="op" id="6944608">,</span>&nbsp;<span class="op" id="6944610">&amp;</span><span class="ident" id="6944611">benchScan</span><span class="op" id="6944620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944623">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944626">b</span><span class="op" id="6944627">.</span><span class="ident" id="6944628">SetBytes</span><span class="op" id="6944636">(</span><span class="ident" id="6944637">int64</span><span class="op" id="6944642">(</span><span class="builtinfunc" id="6944643">len</span><span class="op" id="6944646">(</span><span class="ident" id="6944647">jsonBig</span><span class="op" id="6944654">)</span><span class="op" id="6944655">)</span><span class="op" id="6944656">)</span><br>
<span class="lineno"></span><span class="op" id="6944658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944661">func</span>&nbsp;<span class="ident" id="6944666">diff</span><span class="op" id="6944670">(</span><span class="ident" id="6944671">t</span>&nbsp;<span class="op" id="6944673">*</span><span class="ident" id="6944674">testing</span><span class="op" id="6944681">.</span><span class="ident" id="6944682">T</span><span class="op" id="6944683">,</span>&nbsp;<span class="ident" id="6944685">a</span><span class="op" id="6944686">,</span>&nbsp;<span class="ident" id="6944688">b</span>&nbsp;<span class="op" id="6944690">[</span><span class="op" id="6944691">]</span><span class="builtintype" id="6944692">byte</span><span class="op" id="6944696">)</span>&nbsp;<span class="op" id="6944698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944701">for</span>&nbsp;<span class="ident" id="6944705">i</span>&nbsp;<span class="op" id="6944707">:=</span>&nbsp;<span class="num" id="6944710">0</span><span class="op" id="6944711">;</span>&nbsp;<span class="op" id="6944713">;</span>&nbsp;<span class="ident" id="6944715">i</span><span class="op" id="6944716">++</span>&nbsp;<span class="op" id="6944719">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944723">if</span>&nbsp;<span class="ident" id="6944726">i</span>&nbsp;<span class="op" id="6944728">&gt;=</span>&nbsp;<span class="builtinfunc" id="6944731">len</span><span class="op" id="6944734">(</span><span class="ident" id="6944735">a</span><span class="op" id="6944736">)</span>&nbsp;<span class="op" id="6944738">||</span>&nbsp;<span class="ident" id="6944741">i</span>&nbsp;<span class="op" id="6944743">&gt;=</span>&nbsp;<span class="builtinfunc" id="6944746">len</span><span class="op" id="6944749">(</span><span class="ident" id="6944750">b</span><span class="op" id="6944751">)</span>&nbsp;<span class="op" id="6944753">||</span>&nbsp;<span class="ident" id="6944756">a</span><span class="op" id="6944757">[</span><span class="ident" id="6944758">i</span><span class="op" id="6944759">]</span>&nbsp;<span class="op" id="6944761">!=</span>&nbsp;<span class="ident" id="6944764">b</span><span class="op" id="6944765">[</span><span class="ident" id="6944766">i</span><span class="op" id="6944767">]</span>&nbsp;<span class="op" id="6944769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944774">j</span>&nbsp;<span class="op" id="6944776">:=</span>&nbsp;<span class="ident" id="6944779">i</span>&nbsp;<span class="op" id="6944781">-</span>&nbsp;<span class="num" id="6944783">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944789">if</span>&nbsp;<span class="ident" id="6944792">j</span>&nbsp;<span class="op" id="6944794">&lt;</span>&nbsp;<span class="num" id="6944796">0</span>&nbsp;<span class="op" id="6944798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944804">j</span>&nbsp;<span class="op" id="6944806">=</span>&nbsp;<span class="num" id="6944808">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944813">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6944818">t</span><span class="op" id="6944819">.</span><span class="ident" id="6944820">Errorf</span><span class="op" id="6944826">(</span><span class="string" id="6944827">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;«%s»&nbsp;vs&nbsp;«%s»&#34;</span><span class="op" id="6944860">,</span>&nbsp;<span class="ident" id="6944862">i</span><span class="op" id="6944863">,</span>&nbsp;<span class="ident" id="6944865">trim</span><span class="op" id="6944869">(</span><span class="ident" id="6944870">a</span><span class="op" id="6944871">[</span><span class="ident" id="6944872">j</span><span class="op" id="6944873">:</span><span class="op" id="6944874">]</span><span class="op" id="6944875">)</span><span class="op" id="6944876">,</span>&nbsp;<span class="ident" id="6944878">trim</span><span class="op" id="6944882">(</span><span class="ident" id="6944883">b</span><span class="op" id="6944884">[</span><span class="ident" id="6944885">j</span><span class="op" id="6944886">:</span><span class="op" id="6944887">]</span><span class="op" id="6944888">)</span><span class="op" id="6944889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944894">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944906">}</span><br>
<span class="lineno"></span><span class="op" id="6944908">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6944911">func</span>&nbsp;<span class="ident" id="6944916">trim</span><span class="op" id="6944920">(</span><span class="ident" id="6944921">b</span>&nbsp;<span class="op" id="6944923">[</span><span class="op" id="6944924">]</span><span class="builtintype" id="6944925">byte</span><span class="op" id="6944929">)</span>&nbsp;<span class="op" id="6944931">[</span><span class="op" id="6944932">]</span><span class="builtintype" id="6944933">byte</span>&nbsp;<span class="op" id="6944938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944941">if</span>&nbsp;<span class="builtinfunc" id="6944944">len</span><span class="op" id="6944947">(</span><span class="ident" id="6944948">b</span><span class="op" id="6944949">)</span>&nbsp;<span class="op" id="6944951">&gt;</span>&nbsp;<span class="num" id="6944953">20</span>&nbsp;<span class="op" id="6944956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944960">return</span>&nbsp;<span class="ident" id="6944967">b</span><span class="op" id="6944968">[</span><span class="num" id="6944969">0</span><span class="op" id="6944970">:</span><span class="num" id="6944971">20</span><span class="op" id="6944973">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6944976">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6944979">return</span>&nbsp;<span class="ident" id="6944986">b</span><br>
<span class="lineno"></span><span class="op" id="6944988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6944991">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6945026">var</span>&nbsp;<span class="ident" id="6945030">jsonBig</span>&nbsp;<span class="op" id="6945038">[</span><span class="op" id="6945039">]</span><span class="builtintype" id="6945040">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945046">func</span>&nbsp;<span class="ident" id="6945051">initBig</span><span class="op" id="6945058">(</span><span class="op" id="6945059">)</span>&nbsp;<span class="op" id="6945061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945064">n</span>&nbsp;<span class="op" id="6945066">:=</span>&nbsp;<span class="num" id="6945069">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945076">if</span>&nbsp;<span class="ident" id="6945079">testing</span><span class="op" id="6945086">.</span><span class="ident" id="6945087">Short</span><span class="op" id="6945092">(</span><span class="op" id="6945093">)</span>&nbsp;<span class="op" id="6945095">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945099">n</span>&nbsp;<span class="op" id="6945101">=</span>&nbsp;<span class="num" id="6945103">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945111">b</span><span class="op" id="6945112">,</span>&nbsp;<span class="ident" id="6945114">err</span>&nbsp;<span class="op" id="6945118">:=</span>&nbsp;<span class="ident" id="6945121">Marshal</span><span class="op" id="6945128">(</span><span class="ident" id="6945129">genValue</span><span class="op" id="6945137">(</span><span class="ident" id="6945138">n</span><span class="op" id="6945139">)</span><span class="op" id="6945140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945143">if</span>&nbsp;<span class="ident" id="6945146">err</span>&nbsp;<span class="op" id="6945150">!=</span>&nbsp;<span class="builtintype" id="6945153">nil</span>&nbsp;<span class="op" id="6945157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6945161">panic</span><span class="op" id="6945166">(</span><span class="ident" id="6945167">err</span><span class="op" id="6945170">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945176">jsonBig</span>&nbsp;<span class="op" id="6945184">=</span>&nbsp;<span class="ident" id="6945186">b</span><br>
<span class="lineno"></span><span class="op" id="6945188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945191">func</span>&nbsp;<span class="ident" id="6945196">genValue</span><span class="op" id="6945204">(</span><span class="ident" id="6945205">n</span>&nbsp;<span class="builtintype" id="6945207">int</span><span class="op" id="6945210">)</span>&nbsp;<span class="keyword" id="6945212">interface</span><span class="op" id="6945221">{</span><span class="op" id="6945222">}</span>&nbsp;<span class="op" id="6945224">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945227">if</span>&nbsp;<span class="ident" id="6945230">n</span>&nbsp;<span class="op" id="6945232">&gt;</span>&nbsp;<span class="num" id="6945234">1</span>&nbsp;<span class="op" id="6945236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945240">switch</span>&nbsp;<span class="ident" id="6945247">rand</span><span class="op" id="6945251">.</span><span class="ident" id="6945252">Intn</span><span class="op" id="6945256">(</span><span class="num" id="6945257">2</span><span class="op" id="6945258">)</span>&nbsp;<span class="op" id="6945260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945264">case</span>&nbsp;<span class="num" id="6945269">0</span><span class="op" id="6945270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945275">return</span>&nbsp;<span class="ident" id="6945282">genArray</span><span class="op" id="6945290">(</span><span class="ident" id="6945291">n</span><span class="op" id="6945292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945296">case</span>&nbsp;<span class="num" id="6945301">1</span><span class="op" id="6945302">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945307">return</span>&nbsp;<span class="ident" id="6945314">genMap</span><span class="op" id="6945320">(</span><span class="ident" id="6945321">n</span><span class="op" id="6945322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945332">switch</span>&nbsp;<span class="ident" id="6945339">rand</span><span class="op" id="6945343">.</span><span class="ident" id="6945344">Intn</span><span class="op" id="6945348">(</span><span class="num" id="6945349">3</span><span class="op" id="6945350">)</span>&nbsp;<span class="op" id="6945352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945355">case</span>&nbsp;<span class="num" id="6945360">0</span><span class="op" id="6945361">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945365">return</span>&nbsp;<span class="ident" id="6945372">rand</span><span class="op" id="6945376">.</span><span class="ident" id="6945377">Intn</span><span class="op" id="6945381">(</span><span class="num" id="6945382">2</span><span class="op" id="6945383">)</span>&nbsp;<span class="op" id="6945385">==</span>&nbsp;<span class="num" id="6945388">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945391">case</span>&nbsp;<span class="num" id="6945396">1</span><span class="op" id="6945397">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945401">return</span>&nbsp;<span class="ident" id="6945408">rand</span><span class="op" id="6945412">.</span><span class="ident" id="6945413">NormFloat64</span><span class="op" id="6945424">(</span><span class="op" id="6945425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945428">case</span>&nbsp;<span class="num" id="6945433">2</span><span class="op" id="6945434">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945438">return</span>&nbsp;<span class="ident" id="6945445">genString</span><span class="op" id="6945454">(</span><span class="num" id="6945455">30</span><span class="op" id="6945457">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6945463">panic</span><span class="op" id="6945468">(</span><span class="string" id="6945469">&#34;unreachable&#34;</span><span class="op" id="6945482">)</span><br>
<span class="lineno"></span><span class="op" id="6945484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945487">func</span>&nbsp;<span class="ident" id="6945492">genString</span><span class="op" id="6945501">(</span><span class="ident" id="6945502">stddev</span>&nbsp;<span class="builtintype" id="6945509">float64</span><span class="op" id="6945516">)</span>&nbsp;<span class="builtintype" id="6945518">string</span>&nbsp;<span class="op" id="6945525">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945528">n</span>&nbsp;<span class="op" id="6945530">:=</span>&nbsp;<span class="builtintype" id="6945533">int</span><span class="op" id="6945536">(</span><span class="ident" id="6945537">math</span><span class="op" id="6945541">.</span><span class="ident" id="6945542">Abs</span><span class="op" id="6945545">(</span><span class="ident" id="6945546">rand</span><span class="op" id="6945550">.</span><span class="ident" id="6945551">NormFloat64</span><span class="op" id="6945562">(</span><span class="op" id="6945563">)</span><span class="op" id="6945564">*</span><span class="ident" id="6945565">stddev</span>&nbsp;<span class="op" id="6945572">+</span>&nbsp;<span class="ident" id="6945574">stddev</span><span class="op" id="6945580">/</span><span class="num" id="6945581">2</span><span class="op" id="6945582">)</span><span class="op" id="6945583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945586">c</span>&nbsp;<span class="op" id="6945588">:=</span>&nbsp;<span class="builtinfunc" id="6945591">make</span><span class="op" id="6945595">(</span><span class="op" id="6945596">[</span><span class="op" id="6945597">]</span><span class="builtintype" id="6945598">rune</span><span class="op" id="6945602">,</span>&nbsp;<span class="ident" id="6945604">n</span><span class="op" id="6945605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945608">for</span>&nbsp;<span class="ident" id="6945612">i</span>&nbsp;<span class="op" id="6945614">:=</span>&nbsp;<span class="keyword" id="6945617">range</span>&nbsp;<span class="ident" id="6945623">c</span>&nbsp;<span class="op" id="6945625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945629">f</span>&nbsp;<span class="op" id="6945631">:=</span>&nbsp;<span class="ident" id="6945634">math</span><span class="op" id="6945638">.</span><span class="ident" id="6945639">Abs</span><span class="op" id="6945642">(</span><span class="ident" id="6945643">rand</span><span class="op" id="6945647">.</span><span class="ident" id="6945648">NormFloat64</span><span class="op" id="6945659">(</span><span class="op" id="6945660">)</span><span class="op" id="6945661">*</span><span class="num" id="6945662">64</span>&nbsp;<span class="op" id="6945665">+</span>&nbsp;<span class="num" id="6945667">32</span><span class="op" id="6945669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945673">if</span>&nbsp;<span class="ident" id="6945676">f</span>&nbsp;<span class="op" id="6945678">&gt;</span>&nbsp;<span class="num" id="6945680">0x10ffff</span>&nbsp;<span class="op" id="6945689">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945694">f</span>&nbsp;<span class="op" id="6945696">=</span>&nbsp;<span class="num" id="6945698">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945713">c</span><span class="op" id="6945714">[</span><span class="ident" id="6945715">i</span><span class="op" id="6945716">]</span>&nbsp;<span class="op" id="6945718">=</span>&nbsp;<span class="builtintype" id="6945720">rune</span><span class="op" id="6945724">(</span><span class="ident" id="6945725">f</span><span class="op" id="6945726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945732">return</span>&nbsp;<span class="builtintype" id="6945739">string</span><span class="op" id="6945745">(</span><span class="ident" id="6945746">c</span><span class="op" id="6945747">)</span><br>
<span class="lineno">285</span><span class="op" id="6945749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945752">func</span>&nbsp;<span class="ident" id="6945757">genArray</span><span class="op" id="6945765">(</span><span class="ident" id="6945766">n</span>&nbsp;<span class="builtintype" id="6945768">int</span><span class="op" id="6945771">)</span>&nbsp;<span class="op" id="6945773">[</span><span class="op" id="6945774">]</span><span class="keyword" id="6945775">interface</span><span class="op" id="6945784">{</span><span class="op" id="6945785">}</span>&nbsp;<span class="op" id="6945787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945790">f</span>&nbsp;<span class="op" id="6945792">:=</span>&nbsp;<span class="builtintype" id="6945795">int</span><span class="op" id="6945798">(</span><span class="ident" id="6945799">math</span><span class="op" id="6945803">.</span><span class="ident" id="6945804">Abs</span><span class="op" id="6945807">(</span><span class="ident" id="6945808">rand</span><span class="op" id="6945812">.</span><span class="ident" id="6945813">NormFloat64</span><span class="op" id="6945824">(</span><span class="op" id="6945825">)</span><span class="op" id="6945826">)</span>&nbsp;<span class="op" id="6945828">*</span>&nbsp;<span class="ident" id="6945830">math</span><span class="op" id="6945834">.</span><span class="ident" id="6945835">Min</span><span class="op" id="6945838">(</span><span class="num" id="6945839">10</span><span class="op" id="6945841">,</span>&nbsp;<span class="builtintype" id="6945843">float64</span><span class="op" id="6945850">(</span><span class="ident" id="6945851">n</span><span class="op" id="6945852">/</span><span class="num" id="6945853">2</span><span class="op" id="6945854">)</span><span class="op" id="6945855">)</span><span class="op" id="6945856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945859">if</span>&nbsp;<span class="ident" id="6945862">f</span>&nbsp;<span class="op" id="6945864">&gt;</span>&nbsp;<span class="ident" id="6945866">n</span>&nbsp;<span class="op" id="6945868">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945872">f</span>&nbsp;<span class="op" id="6945874">=</span>&nbsp;<span class="ident" id="6945876">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945882">if</span>&nbsp;<span class="ident" id="6945885">f</span>&nbsp;<span class="op" id="6945887">&lt;</span>&nbsp;<span class="num" id="6945889">1</span>&nbsp;<span class="op" id="6945891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945895">f</span>&nbsp;<span class="op" id="6945897">=</span>&nbsp;<span class="num" id="6945899">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945902">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945905">x</span>&nbsp;<span class="op" id="6945907">:=</span>&nbsp;<span class="builtinfunc" id="6945910">make</span><span class="op" id="6945914">(</span><span class="op" id="6945915">[</span><span class="op" id="6945916">]</span><span class="keyword" id="6945917">interface</span><span class="op" id="6945926">{</span><span class="op" id="6945927">}</span><span class="op" id="6945928">,</span>&nbsp;<span class="ident" id="6945930">f</span><span class="op" id="6945931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945934">for</span>&nbsp;<span class="ident" id="6945938">i</span>&nbsp;<span class="op" id="6945940">:=</span>&nbsp;<span class="keyword" id="6945943">range</span>&nbsp;<span class="ident" id="6945949">x</span>&nbsp;<span class="op" id="6945951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6945955">x</span><span class="op" id="6945956">[</span><span class="ident" id="6945957">i</span><span class="op" id="6945958">]</span>&nbsp;<span class="op" id="6945960">=</span>&nbsp;<span class="ident" id="6945962">genValue</span><span class="op" id="6945970">(</span><span class="op" id="6945971">(</span><span class="op" id="6945972">(</span><span class="ident" id="6945973">i</span><span class="op" id="6945974">+</span><span class="num" id="6945975">1</span><span class="op" id="6945976">)</span><span class="op" id="6945977">*</span><span class="ident" id="6945978">n</span><span class="op" id="6945979">)</span><span class="op" id="6945980">/</span><span class="ident" id="6945981">f</span>&nbsp;<span class="op" id="6945983">-</span>&nbsp;<span class="op" id="6945985">(</span><span class="ident" id="6945986">i</span><span class="op" id="6945987">*</span><span class="ident" id="6945988">n</span><span class="op" id="6945989">)</span><span class="op" id="6945990">/</span><span class="ident" id="6945991">f</span><span class="op" id="6945992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6945995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6945998">return</span>&nbsp;<span class="ident" id="6946005">x</span><br>
<span class="lineno">300</span><span class="op" id="6946007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6946010">func</span>&nbsp;<span class="ident" id="6946015">genMap</span><span class="op" id="6946021">(</span><span class="ident" id="6946022">n</span>&nbsp;<span class="builtintype" id="6946024">int</span><span class="op" id="6946027">)</span>&nbsp;<span class="keyword" id="6946029">map</span><span class="op" id="6946032">[</span><span class="builtintype" id="6946033">string</span><span class="op" id="6946039">]</span><span class="keyword" id="6946040">interface</span><span class="op" id="6946049">{</span><span class="op" id="6946050">}</span>&nbsp;<span class="op" id="6946052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946055">f</span>&nbsp;<span class="op" id="6946057">:=</span>&nbsp;<span class="builtintype" id="6946060">int</span><span class="op" id="6946063">(</span><span class="ident" id="6946064">math</span><span class="op" id="6946068">.</span><span class="ident" id="6946069">Abs</span><span class="op" id="6946072">(</span><span class="ident" id="6946073">rand</span><span class="op" id="6946077">.</span><span class="ident" id="6946078">NormFloat64</span><span class="op" id="6946089">(</span><span class="op" id="6946090">)</span><span class="op" id="6946091">)</span>&nbsp;<span class="op" id="6946093">*</span>&nbsp;<span class="ident" id="6946095">math</span><span class="op" id="6946099">.</span><span class="ident" id="6946100">Min</span><span class="op" id="6946103">(</span><span class="num" id="6946104">10</span><span class="op" id="6946106">,</span>&nbsp;<span class="builtintype" id="6946108">float64</span><span class="op" id="6946115">(</span><span class="ident" id="6946116">n</span><span class="op" id="6946117">/</span><span class="num" id="6946118">2</span><span class="op" id="6946119">)</span><span class="op" id="6946120">)</span><span class="op" id="6946121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6946124">if</span>&nbsp;<span class="ident" id="6946127">f</span>&nbsp;<span class="op" id="6946129">&gt;</span>&nbsp;<span class="ident" id="6946131">n</span>&nbsp;<span class="op" id="6946133">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946137">f</span>&nbsp;<span class="op" id="6946139">=</span>&nbsp;<span class="ident" id="6946141">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6946147">if</span>&nbsp;<span class="ident" id="6946150">n</span>&nbsp;<span class="op" id="6946152">&gt;</span>&nbsp;<span class="num" id="6946154">0</span>&nbsp;<span class="op" id="6946156">&amp;&amp;</span>&nbsp;<span class="ident" id="6946159">f</span>&nbsp;<span class="op" id="6946161">==</span>&nbsp;<span class="num" id="6946164">0</span>&nbsp;<span class="op" id="6946166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946170">f</span>&nbsp;<span class="op" id="6946172">=</span>&nbsp;<span class="num" id="6946174">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946177">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946180">x</span>&nbsp;<span class="op" id="6946182">:=</span>&nbsp;<span class="builtinfunc" id="6946185">make</span><span class="op" id="6946189">(</span><span class="keyword" id="6946190">map</span><span class="op" id="6946193">[</span><span class="builtintype" id="6946194">string</span><span class="op" id="6946200">]</span><span class="keyword" id="6946201">interface</span><span class="op" id="6946210">{</span><span class="op" id="6946211">}</span><span class="op" id="6946212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6946215">for</span>&nbsp;<span class="ident" id="6946219">i</span>&nbsp;<span class="op" id="6946221">:=</span>&nbsp;<span class="num" id="6946224">0</span><span class="op" id="6946225">;</span>&nbsp;<span class="ident" id="6946227">i</span>&nbsp;<span class="op" id="6946229">&lt;</span>&nbsp;<span class="ident" id="6946231">f</span><span class="op" id="6946232">;</span>&nbsp;<span class="ident" id="6946234">i</span><span class="op" id="6946235">++</span>&nbsp;<span class="op" id="6946238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6946242">x</span><span class="op" id="6946243">[</span><span class="ident" id="6946244">genString</span><span class="op" id="6946253">(</span><span class="num" id="6946254">10</span><span class="op" id="6946256">)</span><span class="op" id="6946257">]</span>&nbsp;<span class="op" id="6946259">=</span>&nbsp;<span class="ident" id="6946261">genValue</span><span class="op" id="6946269">(</span><span class="op" id="6946270">(</span><span class="op" id="6946271">(</span><span class="ident" id="6946272">i</span><span class="op" id="6946273">+</span><span class="num" id="6946274">1</span><span class="op" id="6946275">)</span><span class="op" id="6946276">*</span><span class="ident" id="6946277">n</span><span class="op" id="6946278">)</span><span class="op" id="6946279">/</span><span class="ident" id="6946280">f</span>&nbsp;<span class="op" id="6946282">-</span>&nbsp;<span class="op" id="6946284">(</span><span class="ident" id="6946285">i</span><span class="op" id="6946286">*</span><span class="ident" id="6946287">n</span><span class="op" id="6946288">)</span><span class="op" id="6946289">/</span><span class="ident" id="6946290">f</span><span class="op" id="6946291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6946294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6946297">return</span>&nbsp;<span class="ident" id="6946304">x</span><br>
<span class="lineno">315</span><span class="op" id="6946306">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
