<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8173687">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8173742">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8173796">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8173847">package</span>&nbsp;<span class="ident" id="8173855">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8173860">import</span>&nbsp;<span class="op" id="8173867">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173870">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173879">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8173889">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8173899">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8173902">var</span>&nbsp;<span class="ident" id="8173906">writeTests</span>&nbsp;<span class="op" id="8173917">=</span>&nbsp;<span class="op" id="8173919">[</span><span class="op" id="8173920">]</span><span class="keyword" id="8173921">struct</span>&nbsp;<span class="op" id="8173928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173931">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8173939">[</span><span class="op" id="8173940">]</span><span class="op" id="8173941">[</span><span class="op" id="8173942">]</span><span class="builtintype" id="8173943">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173951">Output</span>&nbsp;&nbsp;<span class="builtintype" id="8173959">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173967">UseCRLF</span>&nbsp;<span class="builtintype" id="8173975">bool</span><br>
<span class="lineno"></span><span class="op" id="8173980">}</span><span class="op" id="8173981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173984">{</span><span class="ident" id="8173985">Input</span><span class="op" id="8173990">:</span>&nbsp;<span class="op" id="8173992">[</span><span class="op" id="8173993">]</span><span class="op" id="8173994">[</span><span class="op" id="8173995">]</span><span class="builtintype" id="8173996">string</span><span class="op" id="8174002">{</span><span class="op" id="8174003">{</span><span class="string" id="8174004">&#34;abc&#34;</span><span class="op" id="8174009">}</span><span class="op" id="8174010">}</span><span class="op" id="8174011">,</span>&nbsp;<span class="ident" id="8174013">Output</span><span class="op" id="8174019">:</span>&nbsp;<span class="string" id="8174021">&#34;abc\n&#34;</span><span class="op" id="8174028">}</span><span class="op" id="8174029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174032">{</span><span class="ident" id="8174033">Input</span><span class="op" id="8174038">:</span>&nbsp;<span class="op" id="8174040">[</span><span class="op" id="8174041">]</span><span class="op" id="8174042">[</span><span class="op" id="8174043">]</span><span class="builtintype" id="8174044">string</span><span class="op" id="8174050">{</span><span class="op" id="8174051">{</span><span class="string" id="8174052">&#34;abc&#34;</span><span class="op" id="8174057">}</span><span class="op" id="8174058">}</span><span class="op" id="8174059">,</span>&nbsp;<span class="ident" id="8174061">Output</span><span class="op" id="8174067">:</span>&nbsp;<span class="string" id="8174069">&#34;abc\r\n&#34;</span><span class="op" id="8174078">,</span>&nbsp;<span class="ident" id="8174080">UseCRLF</span><span class="op" id="8174087">:</span>&nbsp;<span class="builtintype" id="8174089">true</span><span class="op" id="8174093">}</span><span class="op" id="8174094">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174097">{</span><span class="ident" id="8174098">Input</span><span class="op" id="8174103">:</span>&nbsp;<span class="op" id="8174105">[</span><span class="op" id="8174106">]</span><span class="op" id="8174107">[</span><span class="op" id="8174108">]</span><span class="builtintype" id="8174109">string</span><span class="op" id="8174115">{</span><span class="op" id="8174116">{</span><span class="string" id="8174117">`&#34;abc&#34;`</span><span class="op" id="8174124">}</span><span class="op" id="8174125">}</span><span class="op" id="8174126">,</span>&nbsp;<span class="ident" id="8174128">Output</span><span class="op" id="8174134">:</span>&nbsp;<span class="string" id="8174136">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8174148">+</span>&nbsp;<span class="string" id="8174150">&#34;\n&#34;</span><span class="op" id="8174154">}</span><span class="op" id="8174155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174158">{</span><span class="ident" id="8174159">Input</span><span class="op" id="8174164">:</span>&nbsp;<span class="op" id="8174166">[</span><span class="op" id="8174167">]</span><span class="op" id="8174168">[</span><span class="op" id="8174169">]</span><span class="builtintype" id="8174170">string</span><span class="op" id="8174176">{</span><span class="op" id="8174177">{</span><span class="string" id="8174178">`a&#34;b`</span><span class="op" id="8174183">}</span><span class="op" id="8174184">}</span><span class="op" id="8174185">,</span>&nbsp;<span class="ident" id="8174187">Output</span><span class="op" id="8174193">:</span>&nbsp;<span class="string" id="8174195">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="8174204">+</span>&nbsp;<span class="string" id="8174206">&#34;\n&#34;</span><span class="op" id="8174210">}</span><span class="op" id="8174211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174214">{</span><span class="ident" id="8174215">Input</span><span class="op" id="8174220">:</span>&nbsp;<span class="op" id="8174222">[</span><span class="op" id="8174223">]</span><span class="op" id="8174224">[</span><span class="op" id="8174225">]</span><span class="builtintype" id="8174226">string</span><span class="op" id="8174232">{</span><span class="op" id="8174233">{</span><span class="string" id="8174234">`&#34;a&#34;b&#34;`</span><span class="op" id="8174241">}</span><span class="op" id="8174242">}</span><span class="op" id="8174243">,</span>&nbsp;<span class="ident" id="8174245">Output</span><span class="op" id="8174251">:</span>&nbsp;<span class="string" id="8174253">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8174266">+</span>&nbsp;<span class="string" id="8174268">&#34;\n&#34;</span><span class="op" id="8174272">}</span><span class="op" id="8174273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174276">{</span><span class="ident" id="8174277">Input</span><span class="op" id="8174282">:</span>&nbsp;<span class="op" id="8174284">[</span><span class="op" id="8174285">]</span><span class="op" id="8174286">[</span><span class="op" id="8174287">]</span><span class="builtintype" id="8174288">string</span><span class="op" id="8174294">{</span><span class="op" id="8174295">{</span><span class="string" id="8174296">&#34;&nbsp;abc&#34;</span><span class="op" id="8174302">}</span><span class="op" id="8174303">}</span><span class="op" id="8174304">,</span>&nbsp;<span class="ident" id="8174306">Output</span><span class="op" id="8174312">:</span>&nbsp;<span class="string" id="8174314">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="8174323">+</span>&nbsp;<span class="string" id="8174325">&#34;\n&#34;</span><span class="op" id="8174329">}</span><span class="op" id="8174330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174333">{</span><span class="ident" id="8174334">Input</span><span class="op" id="8174339">:</span>&nbsp;<span class="op" id="8174341">[</span><span class="op" id="8174342">]</span><span class="op" id="8174343">[</span><span class="op" id="8174344">]</span><span class="builtintype" id="8174345">string</span><span class="op" id="8174351">{</span><span class="op" id="8174352">{</span><span class="string" id="8174353">&#34;abc,def&#34;</span><span class="op" id="8174362">}</span><span class="op" id="8174363">}</span><span class="op" id="8174364">,</span>&nbsp;<span class="ident" id="8174366">Output</span><span class="op" id="8174372">:</span>&nbsp;<span class="string" id="8174374">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="8174386">+</span>&nbsp;<span class="string" id="8174388">&#34;\n&#34;</span><span class="op" id="8174392">}</span><span class="op" id="8174393">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174396">{</span><span class="ident" id="8174397">Input</span><span class="op" id="8174402">:</span>&nbsp;<span class="op" id="8174404">[</span><span class="op" id="8174405">]</span><span class="op" id="8174406">[</span><span class="op" id="8174407">]</span><span class="builtintype" id="8174408">string</span><span class="op" id="8174414">{</span><span class="op" id="8174415">{</span><span class="string" id="8174416">&#34;abc&#34;</span><span class="op" id="8174421">,</span>&nbsp;<span class="string" id="8174423">&#34;def&#34;</span><span class="op" id="8174428">}</span><span class="op" id="8174429">}</span><span class="op" id="8174430">,</span>&nbsp;<span class="ident" id="8174432">Output</span><span class="op" id="8174438">:</span>&nbsp;<span class="string" id="8174440">&#34;abc,def\n&#34;</span><span class="op" id="8174451">}</span><span class="op" id="8174452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174455">{</span><span class="ident" id="8174456">Input</span><span class="op" id="8174461">:</span>&nbsp;<span class="op" id="8174463">[</span><span class="op" id="8174464">]</span><span class="op" id="8174465">[</span><span class="op" id="8174466">]</span><span class="builtintype" id="8174467">string</span><span class="op" id="8174473">{</span><span class="op" id="8174474">{</span><span class="string" id="8174475">&#34;abc&#34;</span><span class="op" id="8174480">}</span><span class="op" id="8174481">,</span>&nbsp;<span class="op" id="8174483">{</span><span class="string" id="8174484">&#34;def&#34;</span><span class="op" id="8174489">}</span><span class="op" id="8174490">}</span><span class="op" id="8174491">,</span>&nbsp;<span class="ident" id="8174493">Output</span><span class="op" id="8174499">:</span>&nbsp;<span class="string" id="8174501">&#34;abc\ndef\n&#34;</span><span class="op" id="8174513">}</span><span class="op" id="8174514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174517">{</span><span class="ident" id="8174518">Input</span><span class="op" id="8174523">:</span>&nbsp;<span class="op" id="8174525">[</span><span class="op" id="8174526">]</span><span class="op" id="8174527">[</span><span class="op" id="8174528">]</span><span class="builtintype" id="8174529">string</span><span class="op" id="8174535">{</span><span class="op" id="8174536">{</span><span class="string" id="8174537">&#34;abc\ndef&#34;</span><span class="op" id="8174547">}</span><span class="op" id="8174548">}</span><span class="op" id="8174549">,</span>&nbsp;<span class="ident" id="8174551">Output</span><span class="op" id="8174557">:</span>&nbsp;<span class="string" id="8174559">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="8174575">}</span><span class="op" id="8174576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174579">{</span><span class="ident" id="8174580">Input</span><span class="op" id="8174585">:</span>&nbsp;<span class="op" id="8174587">[</span><span class="op" id="8174588">]</span><span class="op" id="8174589">[</span><span class="op" id="8174590">]</span><span class="builtintype" id="8174591">string</span><span class="op" id="8174597">{</span><span class="op" id="8174598">{</span><span class="string" id="8174599">&#34;abc\ndef&#34;</span><span class="op" id="8174609">}</span><span class="op" id="8174610">}</span><span class="op" id="8174611">,</span>&nbsp;<span class="ident" id="8174613">Output</span><span class="op" id="8174619">:</span>&nbsp;<span class="string" id="8174621">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="8174641">,</span>&nbsp;<span class="ident" id="8174643">UseCRLF</span><span class="op" id="8174650">:</span>&nbsp;<span class="builtintype" id="8174652">true</span><span class="op" id="8174656">}</span><span class="op" id="8174657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174660">{</span><span class="ident" id="8174661">Input</span><span class="op" id="8174666">:</span>&nbsp;<span class="op" id="8174668">[</span><span class="op" id="8174669">]</span><span class="op" id="8174670">[</span><span class="op" id="8174671">]</span><span class="builtintype" id="8174672">string</span><span class="op" id="8174678">{</span><span class="op" id="8174679">{</span><span class="string" id="8174680">&#34;abc\rdef&#34;</span><span class="op" id="8174690">}</span><span class="op" id="8174691">}</span><span class="op" id="8174692">,</span>&nbsp;<span class="ident" id="8174694">Output</span><span class="op" id="8174700">:</span>&nbsp;<span class="string" id="8174702">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="8174718">,</span>&nbsp;<span class="ident" id="8174720">UseCRLF</span><span class="op" id="8174727">:</span>&nbsp;<span class="builtintype" id="8174729">true</span><span class="op" id="8174733">}</span><span class="op" id="8174734">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174737">{</span><span class="ident" id="8174738">Input</span><span class="op" id="8174743">:</span>&nbsp;<span class="op" id="8174745">[</span><span class="op" id="8174746">]</span><span class="op" id="8174747">[</span><span class="op" id="8174748">]</span><span class="builtintype" id="8174749">string</span><span class="op" id="8174755">{</span><span class="op" id="8174756">{</span><span class="string" id="8174757">&#34;abc\rdef&#34;</span><span class="op" id="8174767">}</span><span class="op" id="8174768">}</span><span class="op" id="8174769">,</span>&nbsp;<span class="ident" id="8174771">Output</span><span class="op" id="8174777">:</span>&nbsp;<span class="string" id="8174779">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="8174795">,</span>&nbsp;<span class="ident" id="8174797">UseCRLF</span><span class="op" id="8174804">:</span>&nbsp;<span class="builtintype" id="8174806">false</span><span class="op" id="8174811">}</span><span class="op" id="8174812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174815">{</span><span class="ident" id="8174816">Input</span><span class="op" id="8174821">:</span>&nbsp;<span class="op" id="8174823">[</span><span class="op" id="8174824">]</span><span class="op" id="8174825">[</span><span class="op" id="8174826">]</span><span class="builtintype" id="8174827">string</span><span class="op" id="8174833">{</span><span class="op" id="8174834">{</span><span class="string" id="8174835">&#34;&#34;</span><span class="op" id="8174837">}</span><span class="op" id="8174838">}</span><span class="op" id="8174839">,</span>&nbsp;<span class="ident" id="8174841">Output</span><span class="op" id="8174847">:</span>&nbsp;<span class="string" id="8174849">&#34;\n&#34;</span><span class="op" id="8174853">}</span><span class="op" id="8174854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174857">{</span><span class="ident" id="8174858">Input</span><span class="op" id="8174863">:</span>&nbsp;<span class="op" id="8174865">[</span><span class="op" id="8174866">]</span><span class="op" id="8174867">[</span><span class="op" id="8174868">]</span><span class="builtintype" id="8174869">string</span><span class="op" id="8174875">{</span><span class="op" id="8174876">{</span><span class="string" id="8174877">&#34;&#34;</span><span class="op" id="8174879">,</span>&nbsp;<span class="string" id="8174881">&#34;&#34;</span><span class="op" id="8174883">}</span><span class="op" id="8174884">}</span><span class="op" id="8174885">,</span>&nbsp;<span class="ident" id="8174887">Output</span><span class="op" id="8174893">:</span>&nbsp;<span class="string" id="8174895">&#34;,\n&#34;</span><span class="op" id="8174900">}</span><span class="op" id="8174901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174904">{</span><span class="ident" id="8174905">Input</span><span class="op" id="8174910">:</span>&nbsp;<span class="op" id="8174912">[</span><span class="op" id="8174913">]</span><span class="op" id="8174914">[</span><span class="op" id="8174915">]</span><span class="builtintype" id="8174916">string</span><span class="op" id="8174922">{</span><span class="op" id="8174923">{</span><span class="string" id="8174924">&#34;&#34;</span><span class="op" id="8174926">,</span>&nbsp;<span class="string" id="8174928">&#34;&#34;</span><span class="op" id="8174930">,</span>&nbsp;<span class="string" id="8174932">&#34;&#34;</span><span class="op" id="8174934">}</span><span class="op" id="8174935">}</span><span class="op" id="8174936">,</span>&nbsp;<span class="ident" id="8174938">Output</span><span class="op" id="8174944">:</span>&nbsp;<span class="string" id="8174946">&#34;,,\n&#34;</span><span class="op" id="8174952">}</span><span class="op" id="8174953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174956">{</span><span class="ident" id="8174957">Input</span><span class="op" id="8174962">:</span>&nbsp;<span class="op" id="8174964">[</span><span class="op" id="8174965">]</span><span class="op" id="8174966">[</span><span class="op" id="8174967">]</span><span class="builtintype" id="8174968">string</span><span class="op" id="8174974">{</span><span class="op" id="8174975">{</span><span class="string" id="8174976">&#34;&#34;</span><span class="op" id="8174978">,</span>&nbsp;<span class="string" id="8174980">&#34;&#34;</span><span class="op" id="8174982">,</span>&nbsp;<span class="string" id="8174984">&#34;a&#34;</span><span class="op" id="8174987">}</span><span class="op" id="8174988">}</span><span class="op" id="8174989">,</span>&nbsp;<span class="ident" id="8174991">Output</span><span class="op" id="8174997">:</span>&nbsp;<span class="string" id="8174999">&#34;,,a\n&#34;</span><span class="op" id="8175006">}</span><span class="op" id="8175007">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175010">{</span><span class="ident" id="8175011">Input</span><span class="op" id="8175016">:</span>&nbsp;<span class="op" id="8175018">[</span><span class="op" id="8175019">]</span><span class="op" id="8175020">[</span><span class="op" id="8175021">]</span><span class="builtintype" id="8175022">string</span><span class="op" id="8175028">{</span><span class="op" id="8175029">{</span><span class="string" id="8175030">&#34;&#34;</span><span class="op" id="8175032">,</span>&nbsp;<span class="string" id="8175034">&#34;a&#34;</span><span class="op" id="8175037">,</span>&nbsp;<span class="string" id="8175039">&#34;&#34;</span><span class="op" id="8175041">}</span><span class="op" id="8175042">}</span><span class="op" id="8175043">,</span>&nbsp;<span class="ident" id="8175045">Output</span><span class="op" id="8175051">:</span>&nbsp;<span class="string" id="8175053">&#34;,a,\n&#34;</span><span class="op" id="8175060">}</span><span class="op" id="8175061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175064">{</span><span class="ident" id="8175065">Input</span><span class="op" id="8175070">:</span>&nbsp;<span class="op" id="8175072">[</span><span class="op" id="8175073">]</span><span class="op" id="8175074">[</span><span class="op" id="8175075">]</span><span class="builtintype" id="8175076">string</span><span class="op" id="8175082">{</span><span class="op" id="8175083">{</span><span class="string" id="8175084">&#34;&#34;</span><span class="op" id="8175086">,</span>&nbsp;<span class="string" id="8175088">&#34;a&#34;</span><span class="op" id="8175091">,</span>&nbsp;<span class="string" id="8175093">&#34;a&#34;</span><span class="op" id="8175096">}</span><span class="op" id="8175097">}</span><span class="op" id="8175098">,</span>&nbsp;<span class="ident" id="8175100">Output</span><span class="op" id="8175106">:</span>&nbsp;<span class="string" id="8175108">&#34;,a,a\n&#34;</span><span class="op" id="8175116">}</span><span class="op" id="8175117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175120">{</span><span class="ident" id="8175121">Input</span><span class="op" id="8175126">:</span>&nbsp;<span class="op" id="8175128">[</span><span class="op" id="8175129">]</span><span class="op" id="8175130">[</span><span class="op" id="8175131">]</span><span class="builtintype" id="8175132">string</span><span class="op" id="8175138">{</span><span class="op" id="8175139">{</span><span class="string" id="8175140">&#34;a&#34;</span><span class="op" id="8175143">,</span>&nbsp;<span class="string" id="8175145">&#34;&#34;</span><span class="op" id="8175147">,</span>&nbsp;<span class="string" id="8175149">&#34;&#34;</span><span class="op" id="8175151">}</span><span class="op" id="8175152">}</span><span class="op" id="8175153">,</span>&nbsp;<span class="ident" id="8175155">Output</span><span class="op" id="8175161">:</span>&nbsp;<span class="string" id="8175163">&#34;a,,\n&#34;</span><span class="op" id="8175170">}</span><span class="op" id="8175171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175174">{</span><span class="ident" id="8175175">Input</span><span class="op" id="8175180">:</span>&nbsp;<span class="op" id="8175182">[</span><span class="op" id="8175183">]</span><span class="op" id="8175184">[</span><span class="op" id="8175185">]</span><span class="builtintype" id="8175186">string</span><span class="op" id="8175192">{</span><span class="op" id="8175193">{</span><span class="string" id="8175194">&#34;a&#34;</span><span class="op" id="8175197">,</span>&nbsp;<span class="string" id="8175199">&#34;&#34;</span><span class="op" id="8175201">,</span>&nbsp;<span class="string" id="8175203">&#34;a&#34;</span><span class="op" id="8175206">}</span><span class="op" id="8175207">}</span><span class="op" id="8175208">,</span>&nbsp;<span class="ident" id="8175210">Output</span><span class="op" id="8175216">:</span>&nbsp;<span class="string" id="8175218">&#34;a,,a\n&#34;</span><span class="op" id="8175226">}</span><span class="op" id="8175227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175230">{</span><span class="ident" id="8175231">Input</span><span class="op" id="8175236">:</span>&nbsp;<span class="op" id="8175238">[</span><span class="op" id="8175239">]</span><span class="op" id="8175240">[</span><span class="op" id="8175241">]</span><span class="builtintype" id="8175242">string</span><span class="op" id="8175248">{</span><span class="op" id="8175249">{</span><span class="string" id="8175250">&#34;a&#34;</span><span class="op" id="8175253">,</span>&nbsp;<span class="string" id="8175255">&#34;a&#34;</span><span class="op" id="8175258">,</span>&nbsp;<span class="string" id="8175260">&#34;&#34;</span><span class="op" id="8175262">}</span><span class="op" id="8175263">}</span><span class="op" id="8175264">,</span>&nbsp;<span class="ident" id="8175266">Output</span><span class="op" id="8175272">:</span>&nbsp;<span class="string" id="8175274">&#34;a,a,\n&#34;</span><span class="op" id="8175282">}</span><span class="op" id="8175283">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175286">{</span><span class="ident" id="8175287">Input</span><span class="op" id="8175292">:</span>&nbsp;<span class="op" id="8175294">[</span><span class="op" id="8175295">]</span><span class="op" id="8175296">[</span><span class="op" id="8175297">]</span><span class="builtintype" id="8175298">string</span><span class="op" id="8175304">{</span><span class="op" id="8175305">{</span><span class="string" id="8175306">&#34;a&#34;</span><span class="op" id="8175309">,</span>&nbsp;<span class="string" id="8175311">&#34;a&#34;</span><span class="op" id="8175314">,</span>&nbsp;<span class="string" id="8175316">&#34;a&#34;</span><span class="op" id="8175319">}</span><span class="op" id="8175320">}</span><span class="op" id="8175321">,</span>&nbsp;<span class="ident" id="8175323">Output</span><span class="op" id="8175329">:</span>&nbsp;<span class="string" id="8175331">&#34;a,a,a\n&#34;</span><span class="op" id="8175340">}</span><span class="op" id="8175341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175344">{</span><span class="ident" id="8175345">Input</span><span class="op" id="8175350">:</span>&nbsp;<span class="op" id="8175352">[</span><span class="op" id="8175353">]</span><span class="op" id="8175354">[</span><span class="op" id="8175355">]</span><span class="builtintype" id="8175356">string</span><span class="op" id="8175362">{</span><span class="op" id="8175363">{</span><span class="string" id="8175364">`\.`</span><span class="op" id="8175368">}</span><span class="op" id="8175369">}</span><span class="op" id="8175370">,</span>&nbsp;<span class="ident" id="8175372">Output</span><span class="op" id="8175378">:</span>&nbsp;<span class="string" id="8175380">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="8175391">}</span><span class="op" id="8175392">,</span><br>
<span class="lineno"></span><span class="op" id="8175394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175397">func</span>&nbsp;<span class="ident" id="8175402">TestWrite</span><span class="op" id="8175411">(</span><span class="ident" id="8175412">t</span>&nbsp;<span class="op" id="8175414">*</span><span class="ident" id="8175415">testing</span><span class="op" id="8175422">.</span><span class="ident" id="8175423">T</span><span class="op" id="8175424">)</span>&nbsp;<span class="op" id="8175426">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175429">for</span>&nbsp;<span class="ident" id="8175433">n</span><span class="op" id="8175434">,</span>&nbsp;<span class="ident" id="8175436">tt</span>&nbsp;<span class="op" id="8175439">:=</span>&nbsp;<span class="keyword" id="8175442">range</span>&nbsp;<span class="ident" id="8175448">writeTests</span>&nbsp;<span class="op" id="8175459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175463">b</span>&nbsp;<span class="op" id="8175465">:=</span>&nbsp;<span class="op" id="8175468">&amp;</span><span class="ident" id="8175469">bytes</span><span class="op" id="8175474">.</span><span class="ident" id="8175475">Buffer</span><span class="op" id="8175481">{</span><span class="op" id="8175482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175486">f</span>&nbsp;<span class="op" id="8175488">:=</span>&nbsp;<span class="ident" id="8175491">NewWriter</span><span class="op" id="8175500">(</span><span class="ident" id="8175501">b</span><span class="op" id="8175502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175506">f</span><span class="op" id="8175507">.</span><span class="ident" id="8175508">UseCRLF</span>&nbsp;<span class="op" id="8175516">=</span>&nbsp;<span class="ident" id="8175518">tt</span><span class="op" id="8175520">.</span><span class="ident" id="8175521">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175531">err</span>&nbsp;<span class="op" id="8175535">:=</span>&nbsp;<span class="ident" id="8175538">f</span><span class="op" id="8175539">.</span><span class="ident" id="8175540">WriteAll</span><span class="op" id="8175548">(</span><span class="ident" id="8175549">tt</span><span class="op" id="8175551">.</span><span class="ident" id="8175552">Input</span><span class="op" id="8175557">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175561">if</span>&nbsp;<span class="ident" id="8175564">err</span>&nbsp;<span class="op" id="8175568">!=</span>&nbsp;<span class="ident" id="8175571">nil</span>&nbsp;<span class="op" id="8175575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175580">t</span><span class="op" id="8175581">.</span><span class="ident" id="8175582">Errorf</span><span class="op" id="8175588">(</span><span class="string" id="8175589">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8175613">,</span>&nbsp;<span class="ident" id="8175615">err</span><span class="op" id="8175618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175626">out</span>&nbsp;<span class="op" id="8175630">:=</span>&nbsp;<span class="ident" id="8175633">b</span><span class="op" id="8175634">.</span><span class="ident" id="8175635">String</span><span class="op" id="8175641">(</span><span class="op" id="8175642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175646">if</span>&nbsp;<span class="ident" id="8175649">out</span>&nbsp;<span class="op" id="8175653">!=</span>&nbsp;<span class="ident" id="8175656">tt</span><span class="op" id="8175658">.</span><span class="ident" id="8175659">Output</span>&nbsp;<span class="op" id="8175666">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175671">t</span><span class="op" id="8175672">.</span><span class="ident" id="8175673">Errorf</span><span class="op" id="8175679">(</span><span class="string" id="8175680">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8175701">,</span>&nbsp;<span class="ident" id="8175703">n</span><span class="op" id="8175704">,</span>&nbsp;<span class="ident" id="8175706">out</span><span class="op" id="8175709">,</span>&nbsp;<span class="ident" id="8175711">tt</span><span class="op" id="8175713">.</span><span class="ident" id="8175714">Output</span><span class="op" id="8175720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175727">}</span><br>
<span class="lineno"></span><span class="op" id="8175729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8175732">type</span>&nbsp;<span class="ident" id="8175737">errorWriter</span>&nbsp;<span class="keyword" id="8175749">struct</span><span class="op" id="8175755">{</span><span class="op" id="8175756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175759">func</span>&nbsp;<span class="op" id="8175764">(</span><span class="ident" id="8175765">e</span>&nbsp;<span class="ident" id="8175767">errorWriter</span><span class="op" id="8175778">)</span>&nbsp;<span class="ident" id="8175780">Write</span><span class="op" id="8175785">(</span><span class="ident" id="8175786">b</span>&nbsp;<span class="op" id="8175788">[</span><span class="op" id="8175789">]</span><span class="builtintype" id="8175790">byte</span><span class="op" id="8175794">)</span>&nbsp;<span class="op" id="8175796">(</span><span class="builtintype" id="8175797">int</span><span class="op" id="8175800">,</span>&nbsp;<span class="builtintype" id="8175802">error</span><span class="op" id="8175807">)</span>&nbsp;<span class="op" id="8175809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175812">return</span>&nbsp;<span class="num" id="8175819">0</span><span class="op" id="8175820">,</span>&nbsp;<span class="ident" id="8175822">errors</span><span class="op" id="8175828">.</span><span class="ident" id="8175829">New</span><span class="op" id="8175832">(</span><span class="string" id="8175833">&#34;Test&#34;</span><span class="op" id="8175839">)</span><br>
<span class="lineno"></span><span class="op" id="8175841">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8175844">func</span>&nbsp;<span class="ident" id="8175849">TestError</span><span class="op" id="8175858">(</span><span class="ident" id="8175859">t</span>&nbsp;<span class="op" id="8175861">*</span><span class="ident" id="8175862">testing</span><span class="op" id="8175869">.</span><span class="ident" id="8175870">T</span><span class="op" id="8175871">)</span>&nbsp;<span class="op" id="8175873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175876">b</span>&nbsp;<span class="op" id="8175878">:=</span>&nbsp;<span class="op" id="8175881">&amp;</span><span class="ident" id="8175882">bytes</span><span class="op" id="8175887">.</span><span class="ident" id="8175888">Buffer</span><span class="op" id="8175894">{</span><span class="op" id="8175895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175898">f</span>&nbsp;<span class="op" id="8175900">:=</span>&nbsp;<span class="ident" id="8175903">NewWriter</span><span class="op" id="8175912">(</span><span class="ident" id="8175913">b</span><span class="op" id="8175914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175917">f</span><span class="op" id="8175918">.</span><span class="ident" id="8175919">Write</span><span class="op" id="8175924">(</span><span class="op" id="8175925">[</span><span class="op" id="8175926">]</span><span class="builtintype" id="8175927">string</span><span class="op" id="8175933">{</span><span class="string" id="8175934">&#34;abc&#34;</span><span class="op" id="8175939">}</span><span class="op" id="8175940">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175943">f</span><span class="op" id="8175944">.</span><span class="ident" id="8175945">Flush</span><span class="op" id="8175950">(</span><span class="op" id="8175951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175954">err</span>&nbsp;<span class="op" id="8175958">:=</span>&nbsp;<span class="ident" id="8175961">f</span><span class="op" id="8175962">.</span><span class="ident" id="8175963">Error</span><span class="op" id="8175968">(</span><span class="op" id="8175969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175973">if</span>&nbsp;<span class="ident" id="8175976">err</span>&nbsp;<span class="op" id="8175980">!=</span>&nbsp;<span class="ident" id="8175983">nil</span>&nbsp;<span class="op" id="8175987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175991">t</span><span class="op" id="8175992">.</span><span class="ident" id="8175993">Errorf</span><span class="op" id="8175999">(</span><span class="string" id="8176000">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8176024">,</span>&nbsp;<span class="ident" id="8176026">err</span><span class="op" id="8176029">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176036">f</span>&nbsp;<span class="op" id="8176038">=</span>&nbsp;<span class="ident" id="8176040">NewWriter</span><span class="op" id="8176049">(</span><span class="ident" id="8176050">errorWriter</span><span class="op" id="8176061">{</span><span class="op" id="8176062">}</span><span class="op" id="8176063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176066">f</span><span class="op" id="8176067">.</span><span class="ident" id="8176068">Write</span><span class="op" id="8176073">(</span><span class="op" id="8176074">[</span><span class="op" id="8176075">]</span><span class="builtintype" id="8176076">string</span><span class="op" id="8176082">{</span><span class="string" id="8176083">&#34;abc&#34;</span><span class="op" id="8176088">}</span><span class="op" id="8176089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176092">f</span><span class="op" id="8176093">.</span><span class="ident" id="8176094">Flush</span><span class="op" id="8176099">(</span><span class="op" id="8176100">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176103">err</span>&nbsp;<span class="op" id="8176107">=</span>&nbsp;<span class="ident" id="8176109">f</span><span class="op" id="8176110">.</span><span class="ident" id="8176111">Error</span><span class="op" id="8176116">(</span><span class="op" id="8176117">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176121">if</span>&nbsp;<span class="ident" id="8176124">err</span>&nbsp;<span class="op" id="8176128">==</span>&nbsp;<span class="ident" id="8176131">nil</span>&nbsp;<span class="op" id="8176135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176139">t</span><span class="op" id="8176140">.</span><span class="ident" id="8176141">Error</span><span class="op" id="8176146">(</span><span class="string" id="8176147">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="8176172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176175">}</span><br>
<span class="lineno">85</span><span class="op" id="8176177">}</span>
</div>
</body>
</html>
