<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httputil</h2>
<ul>
<li><a href="/gostd/net/http/httputil/dump.go.html">dump.go</a></li>
<li><a href="/gostd/net/http/httputil/dump_test.go.html" class="current">dump_test.go</a></li>
<li><a href="/gostd/net/http/httputil/httputil.go.html">httputil.go</a></li>
<li><a href="/gostd/net/http/httputil/persist.go.html">persist.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy.go.html">reverseproxy.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy_test.go.html">reverseproxy_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6489506">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6489561">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6489615">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6489666">package</span>&nbsp;<span class="ident" id="6489674">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6489684">import</span>&nbsp;<span class="op" id="6489691">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489694">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489703">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489710">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489716">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489729">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489741">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489752">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489763">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6489774">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6489784">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6489787">type</span>&nbsp;<span class="ident" id="6489792">dumpTest</span>&nbsp;<span class="keyword" id="6489801">struct</span>&nbsp;<span class="op" id="6489808">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6489811">Req</span>&nbsp;&nbsp;<span class="ident" id="6489816"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6489820">.</span><span class="ident" id="6489821"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6489830">Body</span>&nbsp;<span class="keyword" id="6489835">interface</span><span class="op" id="6489844">{</span><span class="op" id="6489845">}</span>&nbsp;<span class="comment" id="6489847">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6489913">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6489925">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6489933">WantDumpOut</span>&nbsp;<span class="builtintype" id="6489945">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6489953">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6489965">bool</span>&nbsp;<span class="comment" id="6489970">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="6490018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6490021">var</span>&nbsp;<span class="ident" id="6490025">dumpTests</span>&nbsp;<span class="op" id="6490035">=</span>&nbsp;<span class="op" id="6490037">[</span><span class="op" id="6490038">]</span><span class="ident" id="6490039"><a href="/gostd/net/http/httputil/dump_test.go.html#6489792">dumpTest</a></span><span class="op" id="6490047">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6490051">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490107"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6490110">:</span>&nbsp;<span class="ident" id="6490112"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6490116">.</span><span class="ident" id="6490117"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="6490124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490129"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="6490135">:</span>&nbsp;<span class="string" id="6490137">&#34;GET&#34;</span><span class="op" id="6490142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490147"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="6490150">:</span>&nbsp;<span class="op" id="6490152">&amp;</span><span class="ident" id="6490153"><a href="/gostd/net/http/httputil/dump_test.go.html#6489741">url</a></span><span class="op" id="6490156">.</span><span class="ident" id="6490157"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6490160">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490166"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="6490172">:</span>&nbsp;<span class="string" id="6490174">&#34;http&#34;</span><span class="op" id="6490180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490186"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="6490190">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6490194">&#34;www.google.com&#34;</span><span class="op" id="6490210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490216"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="6490220">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6490224">&#34;/search&#34;</span><span class="op" id="6490233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490238">}</span><span class="op" id="6490239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490244"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="6490254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490262">1</span><span class="op" id="6490263">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490268"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="6490278">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6490286">1</span><span class="op" id="6490287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490292"><a href="/gostd/net/http/request.go.html#4138599">TransferEncoding</a></span><span class="op" id="6490308">:</span>&nbsp;<span class="op" id="6490310">[</span><span class="op" id="6490311">]</span><span class="builtintype" id="6490312">string</span><span class="op" id="6490318">{</span><span class="string" id="6490319">&#34;chunked&#34;</span><span class="op" id="6490328">}</span><span class="op" id="6490329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490333">}</span><span class="op" id="6490334">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490339"><a href="/gostd/net/http/httputil/dump_test.go.html#6489830">Body</a></span><span class="op" id="6490343">:</span>&nbsp;<span class="op" id="6490345">[</span><span class="op" id="6490346">]</span><span class="builtintype" id="6490347">byte</span><span class="op" id="6490351">(</span><span class="string" id="6490352">&#34;abcdef&#34;</span><span class="op" id="6490360">)</span><span class="op" id="6490361">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490366"><a href="/gostd/net/http/httputil/dump_test.go.html#6489913">WantDump</a></span><span class="op" id="6490374">:</span>&nbsp;<span class="string" id="6490376">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6490403">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490408">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="6490435">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490440">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6490477">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490482"><a href="/gostd/net/http/httputil/dump_test.go.html#6493787">chunk</a></span><span class="op" id="6490487">(</span><span class="string" id="6490488">&#34;abcdef&#34;</span><span class="op" id="6490496">)</span>&nbsp;<span class="op" id="6490498">+</span>&nbsp;<span class="ident" id="6490500"><a href="/gostd/net/http/httputil/dump_test.go.html#6493787">chunk</a></span><span class="op" id="6490505">(</span><span class="string" id="6490506">&#34;&#34;</span><span class="op" id="6490508">)</span><span class="op" id="6490509">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490512">}</span><span class="op" id="6490513">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6490517">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6490600">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490634">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490638"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6490641">:</span>&nbsp;<span class="ident" id="6490643"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6490647">.</span><span class="ident" id="6490648"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="6490655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490660"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="6490666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490672">&#34;GET&#34;</span><span class="op" id="6490677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490682"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="6490685">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490694"><a href="/gostd/net/http/httputil/dump_test.go.html#6493867">mustParseURL</a></span><span class="op" id="6490706">(</span><span class="string" id="6490707">&#34;/foo&#34;</span><span class="op" id="6490713">)</span><span class="op" id="6490714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490719"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="6490729">:</span>&nbsp;<span class="num" id="6490731">1</span><span class="op" id="6490732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490737"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="6490747">:</span>&nbsp;<span class="num" id="6490749">0</span><span class="op" id="6490750">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490755"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="6490761">:</span>&nbsp;<span class="ident" id="6490763"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6490767">.</span><span class="ident" id="6490768"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="6490774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490780">&#34;X-Foo&#34;</span><span class="op" id="6490787">:</span>&nbsp;<span class="op" id="6490789">[</span><span class="op" id="6490790">]</span><span class="builtintype" id="6490791">string</span><span class="op" id="6490797">{</span><span class="string" id="6490798">&#34;X-Bar&#34;</span><span class="op" id="6490805">}</span><span class="op" id="6490806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490811">}</span><span class="op" id="6490812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490816">}</span><span class="op" id="6490817">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490822"><a href="/gostd/net/http/httputil/dump_test.go.html#6489913">WantDump</a></span><span class="op" id="6490830">:</span>&nbsp;<span class="string" id="6490832">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="6490856">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6490861">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="6490883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490886">}</span><span class="op" id="6490887">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6490891">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490895"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6490898">:</span>&nbsp;<span class="op" id="6490900">*</span><span class="ident" id="6490901"><a href="/gostd/net/http/httputil/dump_test.go.html#6494020">mustNewRequest</a></span><span class="op" id="6490915">(</span><span class="string" id="6490916">&#34;GET&#34;</span><span class="op" id="6490921">,</span>&nbsp;<span class="string" id="6490923">&#34;http://example.com/foo&#34;</span><span class="op" id="6490947">,</span>&nbsp;<span class="builtintype" id="6490949">nil</span><span class="op" id="6490952">)</span><span class="op" id="6490953">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6490958"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span><span class="op" id="6490969">:</span>&nbsp;<span class="string" id="6490971">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6490995">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491000">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6491024">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491029">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6491067">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491072">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="6491103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491106">}</span><span class="op" id="6491107">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6491111">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6491175">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6491232">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491250"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6491253">:</span>&nbsp;<span class="op" id="6491255">*</span><span class="ident" id="6491256"><a href="/gostd/net/http/httputil/dump_test.go.html#6494020">mustNewRequest</a></span><span class="op" id="6491270">(</span><span class="string" id="6491271">&#34;GET&#34;</span><span class="op" id="6491276">,</span>&nbsp;<span class="string" id="6491278">&#34;https://example.com/foo&#34;</span><span class="op" id="6491303">,</span>&nbsp;<span class="builtintype" id="6491305">nil</span><span class="op" id="6491308">)</span><span class="op" id="6491309">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491314"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span><span class="op" id="6491325">:</span>&nbsp;<span class="string" id="6491327">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6491351">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491356">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="6491380">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491385">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6491423">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491428">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="6491459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491462">}</span><span class="op" id="6491463">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6491467">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491525"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6491528">:</span>&nbsp;<span class="ident" id="6491530"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6491534">.</span><span class="ident" id="6491535"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="6491542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491547"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="6491553">:</span>&nbsp;<span class="string" id="6491555">&#34;POST&#34;</span><span class="op" id="6491561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491566"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="6491569">:</span>&nbsp;<span class="op" id="6491571">&amp;</span><span class="ident" id="6491572"><a href="/gostd/net/http/httputil/dump_test.go.html#6489741">url</a></span><span class="op" id="6491575">.</span><span class="ident" id="6491576"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6491579">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491585"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="6491591">:</span>&nbsp;<span class="string" id="6491593">&#34;http&#34;</span><span class="op" id="6491599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491605"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="6491609">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6491613">&#34;post.tld&#34;</span><span class="op" id="6491623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491629"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="6491633">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6491637">&#34;/&#34;</span><span class="op" id="6491640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491645">}</span><span class="op" id="6491646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491651"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="6491664">:</span>&nbsp;<span class="num" id="6491666">6</span><span class="op" id="6491667">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491672"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="6491682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6491687">1</span><span class="op" id="6491688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491693"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="6491703">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6491708">1</span><span class="op" id="6491709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491713">}</span><span class="op" id="6491714">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491719"><a href="/gostd/net/http/httputil/dump_test.go.html#6489830">Body</a></span><span class="op" id="6491723">:</span>&nbsp;<span class="op" id="6491725">[</span><span class="op" id="6491726">]</span><span class="builtintype" id="6491727">byte</span><span class="op" id="6491731">(</span><span class="string" id="6491732">&#34;abcdef&#34;</span><span class="op" id="6491740">)</span><span class="op" id="6491741">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491746"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span><span class="op" id="6491757">:</span>&nbsp;<span class="string" id="6491759">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6491781">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491786">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="6491807">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491812">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6491850">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491855">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="6491879">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6491884">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="6491915">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491920"><a href="/gostd/net/http/httputil/dump_test.go.html#6489953">NoBody</a></span><span class="op" id="6491926">:</span>&nbsp;<span class="builtintype" id="6491928">true</span><span class="op" id="6491932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491935">}</span><span class="op" id="6491936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6491940">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6491991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6491995"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6491998">:</span>&nbsp;<span class="ident" id="6492000"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6492004">.</span><span class="ident" id="6492005"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="6492012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492017"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="6492023">:</span>&nbsp;<span class="string" id="6492025">&#34;POST&#34;</span><span class="op" id="6492031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492036"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="6492039">:</span>&nbsp;<span class="op" id="6492041">&amp;</span><span class="ident" id="6492042"><a href="/gostd/net/http/httputil/dump_test.go.html#6489741">url</a></span><span class="op" id="6492045">.</span><span class="ident" id="6492046"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6492049">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492055"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="6492061">:</span>&nbsp;<span class="string" id="6492063">&#34;http&#34;</span><span class="op" id="6492069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492075"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="6492079">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6492083">&#34;post.tld&#34;</span><span class="op" id="6492093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492099"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="6492103">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6492107">&#34;/&#34;</span><span class="op" id="6492110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492115">}</span><span class="op" id="6492116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492121"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span><span class="op" id="6492134">:</span>&nbsp;<span class="num" id="6492136">8193</span><span class="op" id="6492140">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492145"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="6492155">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6492160">1</span><span class="op" id="6492161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492166"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="6492176">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6492181">1</span><span class="op" id="6492182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492186">}</span><span class="op" id="6492187">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492192"><a href="/gostd/net/http/httputil/dump_test.go.html#6489830">Body</a></span><span class="op" id="6492196">:</span>&nbsp;<span class="ident" id="6492198"><a href="/gostd/net/http/httputil/dump_test.go.html#6489694">bytes</a></span><span class="op" id="6492203">.</span><span class="ident" id="6492204"><a href="/gostd/bytes/bytes.go.html#1405494">Repeat</a></span><span class="op" id="6492210">(</span><span class="op" id="6492211">[</span><span class="op" id="6492212">]</span><span class="builtintype" id="6492213">byte</span><span class="op" id="6492217">(</span><span class="string" id="6492218">&#34;a&#34;</span><span class="op" id="6492221">)</span><span class="op" id="6492222">,</span>&nbsp;<span class="num" id="6492224">8193</span><span class="op" id="6492228">)</span><span class="op" id="6492229">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492234"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span><span class="op" id="6492245">:</span>&nbsp;<span class="string" id="6492247">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="6492269">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6492274">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="6492295">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6492300">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="6492338">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6492343">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="6492370">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6492375">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="6492407">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492412"><a href="/gostd/net/http/httputil/dump_test.go.html#6489763">strings</a></span><span class="op" id="6492419">.</span><span class="ident" id="6492420"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="6492426">(</span><span class="string" id="6492427">&#34;a&#34;</span><span class="op" id="6492430">,</span>&nbsp;<span class="num" id="6492432">8193</span><span class="op" id="6492436">)</span><span class="op" id="6492437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492440">}</span><span class="op" id="6492441">,</span><br>
<span class="lineno"></span><span class="op" id="6492443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="6492446">func</span>&nbsp;<span class="ident" id="6492451">TestDumpRequest</span><span class="op" id="6492466">(</span><span class="ident" id="6492467">t</span>&nbsp;<span class="op" id="6492469">*</span><span class="ident" id="6492470"><a href="/gostd/net/http/httputil/dump_test.go.html#6489774">testing</a></span><span class="op" id="6492477">.</span><span class="ident" id="6492478"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6492479">)</span>&nbsp;<span class="op" id="6492481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492484">numg0</span>&nbsp;<span class="op" id="6492490">:=</span>&nbsp;<span class="ident" id="6492493"><a href="/gostd/net/http/httputil/dump_test.go.html#6489752">runtime</a></span><span class="op" id="6492500">.</span><span class="ident" id="6492501"><a href="/gostd/runtime/debug.go.html#1522186">NumGoroutine</a></span><span class="op" id="6492513">(</span><span class="op" id="6492514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492517">for</span>&nbsp;<span class="ident" id="6492521">i</span><span class="op" id="6492522">,</span>&nbsp;<span class="ident" id="6492524">tt</span>&nbsp;<span class="op" id="6492527">:=</span>&nbsp;<span class="keyword" id="6492530">range</span>&nbsp;<span class="ident" id="6492536"><a href="/gostd/net/http/httputil/dump_test.go.html#6490025">dumpTests</a></span>&nbsp;<span class="op" id="6492546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492550">setBody</span>&nbsp;<span class="op" id="6492558">:=</span>&nbsp;<span class="keyword" id="6492561">func</span><span class="op" id="6492565">(</span><span class="op" id="6492566">)</span>&nbsp;<span class="op" id="6492568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492573">if</span>&nbsp;<span class="ident" id="6492576"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492578">.</span><span class="ident" id="6492579"><a href="/gostd/net/http/httputil/dump_test.go.html#6489830">Body</a></span>&nbsp;<span class="op" id="6492584">==</span>&nbsp;<span class="builtintype" id="6492587">nil</span>&nbsp;<span class="op" id="6492591">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492597">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492612">switch</span>&nbsp;<span class="ident" id="6492619">b</span>&nbsp;<span class="op" id="6492621">:=</span>&nbsp;<span class="ident" id="6492624"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492626">.</span><span class="ident" id="6492627"><a href="/gostd/net/http/httputil/dump_test.go.html#6489830">Body</a></span><span class="op" id="6492631">.</span><span class="op" id="6492632">(</span><span class="keyword" id="6492633">type</span><span class="op" id="6492637">)</span>&nbsp;<span class="op" id="6492639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492644">case</span>&nbsp;<span class="op" id="6492649">[</span><span class="op" id="6492650">]</span><span class="builtintype" id="6492651">byte</span><span class="op" id="6492655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492661"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492663">.</span><span class="ident" id="6492664"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6492667">.</span><span class="ident" id="6492668"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span>&nbsp;<span class="op" id="6492673">=</span>&nbsp;<span class="ident" id="6492675"><a href="/gostd/net/http/httputil/dump_test.go.html#6489716">ioutil</a></span><span class="op" id="6492681">.</span><span class="ident" id="6492682"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="6492691">(</span><span class="ident" id="6492692"><a href="/gostd/net/http/httputil/dump_test.go.html#6489694">bytes</a></span><span class="op" id="6492697">.</span><span class="ident" id="6492698"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="6492707">(</span><span class="ident" id="6492708"><a href="/gostd/net/http/httputil/dump_test.go.html#6492619">b</a></span><span class="op" id="6492709">)</span><span class="op" id="6492710">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492715">case</span>&nbsp;<span class="keyword" id="6492720">func</span><span class="op" id="6492724">(</span><span class="op" id="6492725">)</span>&nbsp;<span class="ident" id="6492727"><a href="/gostd/net/http/httputil/dump_test.go.html#6489710">io</a></span><span class="op" id="6492729">.</span><span class="ident" id="6492730"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="6492740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492746"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492748">.</span><span class="ident" id="6492749"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6492752">.</span><span class="ident" id="6492753"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span>&nbsp;<span class="op" id="6492758">=</span>&nbsp;<span class="ident" id="6492760"><a href="/gostd/net/http/httputil/dump_test.go.html#6492619">b</a></span><span class="op" id="6492761">(</span><span class="op" id="6492762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492767">default</span><span class="op" id="6492774">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492780"><a href="/gostd/net/http/httputil/dump_test.go.html#6492467">t</a></span><span class="op" id="6492781">.</span><span class="ident" id="6492782"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6492788">(</span><span class="string" id="6492789">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="6492822">,</span>&nbsp;<span class="ident" id="6492824"><a href="/gostd/net/http/httputil/dump_test.go.html#6492521">i</a></span><span class="op" id="6492825">,</span>&nbsp;<span class="ident" id="6492827"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492829">.</span><span class="ident" id="6492830"><a href="/gostd/net/http/httputil/dump_test.go.html#6489830">Body</a></span><span class="op" id="6492834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492839">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492847"><a href="/gostd/net/http/httputil/dump_test.go.html#6492550">setBody</a></span><span class="op" id="6492854">(</span><span class="op" id="6492855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492859">if</span>&nbsp;<span class="ident" id="6492862"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492864">.</span><span class="ident" id="6492865"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6492868">.</span><span class="ident" id="6492869"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="6492876">==</span>&nbsp;<span class="builtintype" id="6492879">nil</span>&nbsp;<span class="op" id="6492883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492888"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492890">.</span><span class="ident" id="6492891"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6492894">.</span><span class="ident" id="6492895"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="6492902">=</span>&nbsp;<span class="builtinfunc" id="6492904">make</span><span class="op" id="6492908">(</span><span class="ident" id="6492909"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6492913">.</span><span class="ident" id="6492914"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="6492920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6492924">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6492929">if</span>&nbsp;<span class="ident" id="6492932"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492934">.</span><span class="ident" id="6492935"><a href="/gostd/net/http/httputil/dump_test.go.html#6489913">WantDump</a></span>&nbsp;<span class="op" id="6492944">!=</span>&nbsp;<span class="string" id="6492947">&#34;&#34;</span>&nbsp;<span class="op" id="6492950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492955"><a href="/gostd/net/http/httputil/dump_test.go.html#6492550">setBody</a></span><span class="op" id="6492962">(</span><span class="op" id="6492963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6492968">dump</span><span class="op" id="6492972">,</span>&nbsp;<span class="ident" id="6492974">err</span>&nbsp;<span class="op" id="6492978">:=</span>&nbsp;<span class="ident" id="6492981"><a href="/gostd/net/http/httputil/dump.go.html#6383866">DumpRequest</a></span><span class="op" id="6492992">(</span><span class="op" id="6492993">&amp;</span><span class="ident" id="6492994"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6492996">.</span><span class="ident" id="6492997"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6493000">,</span>&nbsp;<span class="op" id="6493002">!</span><span class="ident" id="6493003"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493005">.</span><span class="ident" id="6493006"><a href="/gostd/net/http/httputil/dump_test.go.html#6489953">NoBody</a></span><span class="op" id="6493012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493017">if</span>&nbsp;<span class="ident" id="6493020"><a href="/gostd/net/http/httputil/dump_test.go.html#6492974">err</a></span>&nbsp;<span class="op" id="6493024">!=</span>&nbsp;<span class="builtintype" id="6493027">nil</span>&nbsp;<span class="op" id="6493031">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493037"><a href="/gostd/net/http/httputil/dump_test.go.html#6492467">t</a></span><span class="op" id="6493038">.</span><span class="ident" id="6493039"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6493045">(</span><span class="string" id="6493046">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="6493067">,</span>&nbsp;<span class="ident" id="6493069"><a href="/gostd/net/http/httputil/dump_test.go.html#6492521">i</a></span><span class="op" id="6493070">,</span>&nbsp;<span class="ident" id="6493072"><a href="/gostd/net/http/httputil/dump_test.go.html#6492974">err</a></span><span class="op" id="6493075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493081">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493098">if</span>&nbsp;<span class="builtintype" id="6493101">string</span><span class="op" id="6493107">(</span><span class="ident" id="6493108"><a href="/gostd/net/http/httputil/dump_test.go.html#6492968">dump</a></span><span class="op" id="6493112">)</span>&nbsp;<span class="op" id="6493114">!=</span>&nbsp;<span class="ident" id="6493117"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493119">.</span><span class="ident" id="6493120"><a href="/gostd/net/http/httputil/dump_test.go.html#6489913">WantDump</a></span>&nbsp;<span class="op" id="6493129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493135"><a href="/gostd/net/http/httputil/dump_test.go.html#6492467">t</a></span><span class="op" id="6493136">.</span><span class="ident" id="6493137"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6493143">(</span><span class="string" id="6493144">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="6493188">,</span>&nbsp;<span class="ident" id="6493190"><a href="/gostd/net/http/httputil/dump_test.go.html#6492521">i</a></span><span class="op" id="6493191">,</span>&nbsp;<span class="ident" id="6493193"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493195">.</span><span class="ident" id="6493196"><a href="/gostd/net/http/httputil/dump_test.go.html#6489913">WantDump</a></span><span class="op" id="6493204">,</span>&nbsp;<span class="builtintype" id="6493206">string</span><span class="op" id="6493212">(</span><span class="ident" id="6493213"><a href="/gostd/net/http/httputil/dump_test.go.html#6492968">dump</a></span><span class="op" id="6493217">)</span><span class="op" id="6493218">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493224">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493245">if</span>&nbsp;<span class="ident" id="6493248"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493250">.</span><span class="ident" id="6493251"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span>&nbsp;<span class="op" id="6493263">!=</span>&nbsp;<span class="string" id="6493266">&#34;&#34;</span>&nbsp;<span class="op" id="6493269">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493274"><a href="/gostd/net/http/httputil/dump_test.go.html#6492550">setBody</a></span><span class="op" id="6493281">(</span><span class="op" id="6493282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493287">dump</span><span class="op" id="6493291">,</span>&nbsp;<span class="ident" id="6493293">err</span>&nbsp;<span class="op" id="6493297">:=</span>&nbsp;<span class="ident" id="6493300"><a href="/gostd/net/http/httputil/dump.go.html#6380323">DumpRequestOut</a></span><span class="op" id="6493314">(</span><span class="op" id="6493315">&amp;</span><span class="ident" id="6493316"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493318">.</span><span class="ident" id="6493319"><a href="/gostd/net/http/httputil/dump_test.go.html#6489811">Req</a></span><span class="op" id="6493322">,</span>&nbsp;<span class="op" id="6493324">!</span><span class="ident" id="6493325"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493327">.</span><span class="ident" id="6493328"><a href="/gostd/net/http/httputil/dump_test.go.html#6489953">NoBody</a></span><span class="op" id="6493334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493339">if</span>&nbsp;<span class="ident" id="6493342"><a href="/gostd/net/http/httputil/dump_test.go.html#6493293">err</a></span>&nbsp;<span class="op" id="6493346">!=</span>&nbsp;<span class="builtintype" id="6493349">nil</span>&nbsp;<span class="op" id="6493353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493359"><a href="/gostd/net/http/httputil/dump_test.go.html#6492467">t</a></span><span class="op" id="6493360">.</span><span class="ident" id="6493361"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6493367">(</span><span class="string" id="6493368">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="6493392">,</span>&nbsp;<span class="ident" id="6493394"><a href="/gostd/net/http/httputil/dump_test.go.html#6492521">i</a></span><span class="op" id="6493395">,</span>&nbsp;<span class="ident" id="6493397"><a href="/gostd/net/http/httputil/dump_test.go.html#6493293">err</a></span><span class="op" id="6493400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493406">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493423">if</span>&nbsp;<span class="builtintype" id="6493426">string</span><span class="op" id="6493432">(</span><span class="ident" id="6493433"><a href="/gostd/net/http/httputil/dump_test.go.html#6493287">dump</a></span><span class="op" id="6493437">)</span>&nbsp;<span class="op" id="6493439">!=</span>&nbsp;<span class="ident" id="6493442"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493444">.</span><span class="ident" id="6493445"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span>&nbsp;<span class="op" id="6493457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493463"><a href="/gostd/net/http/httputil/dump_test.go.html#6492467">t</a></span><span class="op" id="6493464">.</span><span class="ident" id="6493465"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6493471">(</span><span class="string" id="6493472">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="6493519">,</span>&nbsp;<span class="ident" id="6493521"><a href="/gostd/net/http/httputil/dump_test.go.html#6492521">i</a></span><span class="op" id="6493522">,</span>&nbsp;<span class="ident" id="6493524"><a href="/gostd/net/http/httputil/dump_test.go.html#6492524">tt</a></span><span class="op" id="6493526">.</span><span class="ident" id="6493527"><a href="/gostd/net/http/httputil/dump_test.go.html#6489933">WantDumpOut</a></span><span class="op" id="6493538">,</span>&nbsp;<span class="builtintype" id="6493540">string</span><span class="op" id="6493546">(</span><span class="ident" id="6493547"><a href="/gostd/net/http/httputil/dump_test.go.html#6493287">dump</a></span><span class="op" id="6493551">)</span><span class="op" id="6493552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493558">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493570">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493580">if</span>&nbsp;<span class="ident" id="6493583">dg</span>&nbsp;<span class="op" id="6493586">:=</span>&nbsp;<span class="ident" id="6493589"><a href="/gostd/net/http/httputil/dump_test.go.html#6489752">runtime</a></span><span class="op" id="6493596">.</span><span class="ident" id="6493597"><a href="/gostd/runtime/debug.go.html#1522186">NumGoroutine</a></span><span class="op" id="6493609">(</span><span class="op" id="6493610">)</span>&nbsp;<span class="op" id="6493612">-</span>&nbsp;<span class="ident" id="6493614"><a href="/gostd/net/http/httputil/dump_test.go.html#6492484">numg0</a></span><span class="op" id="6493619">;</span>&nbsp;<span class="ident" id="6493621"><a href="/gostd/net/http/httputil/dump_test.go.html#6493583">dg</a></span>&nbsp;<span class="op" id="6493624">&gt;</span>&nbsp;<span class="num" id="6493626">4</span>&nbsp;<span class="op" id="6493628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493632">buf</span>&nbsp;<span class="op" id="6493636">:=</span>&nbsp;<span class="builtinfunc" id="6493639">make</span><span class="op" id="6493643">(</span><span class="op" id="6493644">[</span><span class="op" id="6493645">]</span><span class="builtintype" id="6493646">byte</span><span class="op" id="6493650">,</span>&nbsp;<span class="num" id="6493652">4096</span><span class="op" id="6493656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493660"><a href="/gostd/net/http/httputil/dump_test.go.html#6493632">buf</a></span>&nbsp;<span class="op" id="6493664">=</span>&nbsp;<span class="ident" id="6493666"><a href="/gostd/net/http/httputil/dump_test.go.html#6493632">buf</a></span><span class="op" id="6493669">[</span><span class="op" id="6493670">:</span><span class="ident" id="6493671"><a href="/gostd/net/http/httputil/dump_test.go.html#6489752">runtime</a></span><span class="op" id="6493678">.</span><span class="ident" id="6493679"><a href="/gostd/runtime/mprof.go.html#1634979">Stack</a></span><span class="op" id="6493684">(</span><span class="ident" id="6493685"><a href="/gostd/net/http/httputil/dump_test.go.html#6493632">buf</a></span><span class="op" id="6493688">,</span>&nbsp;<span class="builtintype" id="6493690">true</span><span class="op" id="6493694">)</span><span class="op" id="6493695">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493699"><a href="/gostd/net/http/httputil/dump_test.go.html#6492467">t</a></span><span class="op" id="6493700">.</span><span class="ident" id="6493701"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6493707">(</span><span class="string" id="6493708">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="6493765">,</span>&nbsp;<span class="ident" id="6493767"><a href="/gostd/net/http/httputil/dump_test.go.html#6493583">dg</a></span><span class="op" id="6493769">,</span>&nbsp;<span class="ident" id="6493771"><a href="/gostd/net/http/httputil/dump_test.go.html#6493632">buf</a></span><span class="op" id="6493774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6493777">}</span><br>
<span class="lineno"></span><span class="op" id="6493779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6493782">func</span>&nbsp;<span class="ident" id="6493787">chunk</span><span class="op" id="6493792">(</span><span class="ident" id="6493793">s</span>&nbsp;<span class="builtintype" id="6493795">string</span><span class="op" id="6493801">)</span>&nbsp;<span class="builtintype" id="6493803">string</span>&nbsp;<span class="op" id="6493810">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493813">return</span>&nbsp;<span class="ident" id="6493820"><a href="/gostd/net/http/httputil/dump_test.go.html#6489703">fmt</a></span><span class="op" id="6493823">.</span><span class="ident" id="6493824"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6493831">(</span><span class="string" id="6493832">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="6493846">,</span>&nbsp;<span class="builtinfunc" id="6493848">len</span><span class="op" id="6493851">(</span><span class="ident" id="6493852"><a href="/gostd/net/http/httputil/dump_test.go.html#6493793">s</a></span><span class="op" id="6493853">)</span><span class="op" id="6493854">,</span>&nbsp;<span class="ident" id="6493856"><a href="/gostd/net/http/httputil/dump_test.go.html#6493793">s</a></span><span class="op" id="6493857">)</span><br>
<span class="lineno"></span><span class="op" id="6493859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6493862">func</span>&nbsp;<span class="ident" id="6493867">mustParseURL</span><span class="op" id="6493879">(</span><span class="ident" id="6493880">s</span>&nbsp;<span class="builtintype" id="6493882">string</span><span class="op" id="6493888">)</span>&nbsp;<span class="op" id="6493890">*</span><span class="ident" id="6493891"><a href="/gostd/net/http/httputil/dump_test.go.html#6489741">url</a></span><span class="op" id="6493894">.</span><span class="ident" id="6493895"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span>&nbsp;<span class="op" id="6493899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6493902">u</span><span class="op" id="6493903">,</span>&nbsp;<span class="ident" id="6493905">err</span>&nbsp;<span class="op" id="6493909">:=</span>&nbsp;<span class="ident" id="6493912"><a href="/gostd/net/http/httputil/dump_test.go.html#6489741">url</a></span><span class="op" id="6493915">.</span><span class="ident" id="6493916"><a href="/gostd/net/url/url.go.html#3754169">Parse</a></span><span class="op" id="6493921">(</span><span class="ident" id="6493922"><a href="/gostd/net/http/httputil/dump_test.go.html#6493880">s</a></span><span class="op" id="6493923">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6493926">if</span>&nbsp;<span class="ident" id="6493929"><a href="/gostd/net/http/httputil/dump_test.go.html#6493905">err</a></span>&nbsp;<span class="op" id="6493933">!=</span>&nbsp;<span class="builtintype" id="6493936">nil</span>&nbsp;<span class="op" id="6493940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6493944">panic</span><span class="op" id="6493949">(</span><span class="ident" id="6493950"><a href="/gostd/net/http/httputil/dump_test.go.html#6489703">fmt</a></span><span class="op" id="6493953">.</span><span class="ident" id="6493954"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6493961">(</span><span class="string" id="6493962">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="6493988">,</span>&nbsp;<span class="ident" id="6493990"><a href="/gostd/net/http/httputil/dump_test.go.html#6493880">s</a></span><span class="op" id="6493991">,</span>&nbsp;<span class="ident" id="6493993"><a href="/gostd/net/http/httputil/dump_test.go.html#6493905">err</a></span><span class="op" id="6493996">)</span><span class="op" id="6493997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6494003">return</span>&nbsp;<span class="ident" id="6494010"><a href="/gostd/net/http/httputil/dump_test.go.html#6493902">u</a></span><br>
<span class="lineno"></span><span class="op" id="6494012">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="6494015">func</span>&nbsp;<span class="ident" id="6494020">mustNewRequest</span><span class="op" id="6494034">(</span><span class="ident" id="6494035">method</span><span class="op" id="6494041">,</span>&nbsp;<span class="ident" id="6494043">url</span>&nbsp;<span class="builtintype" id="6494047">string</span><span class="op" id="6494053">,</span>&nbsp;<span class="ident" id="6494055">body</span>&nbsp;<span class="ident" id="6494060"><a href="/gostd/net/http/httputil/dump_test.go.html#6489710">io</a></span><span class="op" id="6494062">.</span><span class="ident" id="6494063"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="6494069">)</span>&nbsp;<span class="op" id="6494071">*</span><span class="ident" id="6494072"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6494076">.</span><span class="ident" id="6494077"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span>&nbsp;<span class="op" id="6494085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494088">req</span><span class="op" id="6494091">,</span>&nbsp;<span class="ident" id="6494093">err</span>&nbsp;<span class="op" id="6494097">:=</span>&nbsp;<span class="ident" id="6494100"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6494104">.</span><span class="ident" id="6494105"><a href="/gostd/net/http/request.go.html#4149529">NewRequest</a></span><span class="op" id="6494115">(</span><span class="ident" id="6494116"><a href="/gostd/net/http/httputil/dump_test.go.html#6494035">method</a></span><span class="op" id="6494122">,</span>&nbsp;<span class="ident" id="6494124"><a href="/gostd/net/http/httputil/dump_test.go.html#6494043">url</a></span><span class="op" id="6494127">,</span>&nbsp;<span class="ident" id="6494129"><a href="/gostd/net/http/httputil/dump_test.go.html#6494055">body</a></span><span class="op" id="6494133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6494136">if</span>&nbsp;<span class="ident" id="6494139"><a href="/gostd/net/http/httputil/dump_test.go.html#6494093">err</a></span>&nbsp;<span class="op" id="6494143">!=</span>&nbsp;<span class="builtintype" id="6494146">nil</span>&nbsp;<span class="op" id="6494150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6494154">panic</span><span class="op" id="6494159">(</span><span class="ident" id="6494160"><a href="/gostd/net/http/httputil/dump_test.go.html#6489703">fmt</a></span><span class="op" id="6494163">.</span><span class="ident" id="6494164"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6494171">(</span><span class="string" id="6494172">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6494205">,</span>&nbsp;<span class="ident" id="6494207"><a href="/gostd/net/http/httputil/dump_test.go.html#6494035">method</a></span><span class="op" id="6494213">,</span>&nbsp;<span class="ident" id="6494215"><a href="/gostd/net/http/httputil/dump_test.go.html#6494043">url</a></span><span class="op" id="6494218">,</span>&nbsp;<span class="ident" id="6494220"><a href="/gostd/net/http/httputil/dump_test.go.html#6494055">body</a></span><span class="op" id="6494224">,</span>&nbsp;<span class="ident" id="6494226"><a href="/gostd/net/http/httputil/dump_test.go.html#6494093">err</a></span><span class="op" id="6494229">)</span><span class="op" id="6494230">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6494236">return</span>&nbsp;<span class="ident" id="6494243"><a href="/gostd/net/http/httputil/dump_test.go.html#6494088">req</a></span><br>
<span class="lineno"></span><span class="op" id="6494247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6494250">var</span>&nbsp;<span class="ident" id="6494254">dumpResTests</span>&nbsp;<span class="op" id="6494267">=</span>&nbsp;<span class="op" id="6494269">[</span><span class="op" id="6494270">]</span><span class="keyword" id="6494271">struct</span>&nbsp;<span class="op" id="6494278">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494281">res</span>&nbsp;&nbsp;<span class="op" id="6494286">*</span><span class="ident" id="6494287"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6494291">.</span><span class="ident" id="6494292"><a href="/gostd/net/http/response.go.html#4161509">Response</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494302">body</span>&nbsp;<span class="builtintype" id="6494307">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494313">want</span>&nbsp;<span class="builtintype" id="6494318">string</span><br>
<span class="lineno"></span><span class="op" id="6494325">}</span><span class="op" id="6494326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494329">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494333"><a href="/gostd/net/http/httputil/dump_test.go.html#6494281">res</a></span><span class="op" id="6494336">:</span>&nbsp;<span class="op" id="6494338">&amp;</span><span class="ident" id="6494339"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6494343">.</span><span class="ident" id="6494344"><a href="/gostd/net/http/response.go.html#4161509">Response</a></span><span class="op" id="6494352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494357"><a href="/gostd/net/http/response.go.html#4161528">Status</a></span><span class="op" id="6494363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6494372">&#34;200&nbsp;OK&#34;</span><span class="op" id="6494380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494385"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span><span class="op" id="6494395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6494400">200</span><span class="op" id="6494403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494408"><a href="/gostd/net/http/response.go.html#4161595">Proto</a></span><span class="op" id="6494413">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6494423">&#34;HTTP/1.1&#34;</span><span class="op" id="6494433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494438"><a href="/gostd/net/http/response.go.html#4161633">ProtoMajor</a></span><span class="op" id="6494448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6494453">1</span><span class="op" id="6494454">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494459"><a href="/gostd/net/http/response.go.html#4161662">ProtoMinor</a></span><span class="op" id="6494469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6494474">1</span><span class="op" id="6494475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494480"><a href="/gostd/net/http/response.go.html#4162765">ContentLength</a></span><span class="op" id="6494493">:</span>&nbsp;<span class="num" id="6494495">50</span><span class="op" id="6494497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494502"><a href="/gostd/net/http/response.go.html#4162137">Header</a></span><span class="op" id="6494508">:</span>&nbsp;<span class="ident" id="6494510"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6494514">.</span><span class="ident" id="6494515"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="6494521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6494527">&#34;Foo&#34;</span><span class="op" id="6494532">:</span>&nbsp;<span class="op" id="6494534">[</span><span class="op" id="6494535">]</span><span class="builtintype" id="6494536">string</span><span class="op" id="6494542">{</span><span class="string" id="6494543">&#34;Bar&#34;</span><span class="op" id="6494548">}</span><span class="op" id="6494549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494554">}</span><span class="op" id="6494555">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494560"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span><span class="op" id="6494564">:</span>&nbsp;<span class="ident" id="6494566"><a href="/gostd/net/http/httputil/dump_test.go.html#6489716">ioutil</a></span><span class="op" id="6494572">.</span><span class="ident" id="6494573"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="6494582">(</span><span class="ident" id="6494583"><a href="/gostd/net/http/httputil/dump_test.go.html#6489763">strings</a></span><span class="op" id="6494590">.</span><span class="ident" id="6494591"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="6494600">(</span><span class="string" id="6494601">&#34;foo&#34;</span><span class="op" id="6494606">)</span><span class="op" id="6494607">)</span><span class="op" id="6494608">,</span>&nbsp;<span class="comment" id="6494610">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494633">}</span><span class="op" id="6494634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494638"><a href="/gostd/net/http/httputil/dump_test.go.html#6494302">body</a></span><span class="op" id="6494642">:</span>&nbsp;<span class="builtintype" id="6494644">false</span><span class="op" id="6494649">,</span>&nbsp;<span class="comment" id="6494651">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494693"><a href="/gostd/net/http/httputil/dump_test.go.html#6494313">want</a></span><span class="op" id="6494697">:</span>&nbsp;<span class="string" id="6494699">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="6494744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494747">}</span><span class="op" id="6494748">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494756"><a href="/gostd/net/http/httputil/dump_test.go.html#6494281">res</a></span><span class="op" id="6494759">:</span>&nbsp;<span class="op" id="6494761">&amp;</span><span class="ident" id="6494762"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6494766">.</span><span class="ident" id="6494767"><a href="/gostd/net/http/response.go.html#4161509">Response</a></span><span class="op" id="6494775">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494780"><a href="/gostd/net/http/response.go.html#4161528">Status</a></span><span class="op" id="6494786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6494795">&#34;200&nbsp;OK&#34;</span><span class="op" id="6494803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494808"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span><span class="op" id="6494818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6494823">200</span><span class="op" id="6494826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494831"><a href="/gostd/net/http/response.go.html#4161595">Proto</a></span><span class="op" id="6494836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6494846">&#34;HTTP/1.1&#34;</span><span class="op" id="6494856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494861"><a href="/gostd/net/http/response.go.html#4161633">ProtoMajor</a></span><span class="op" id="6494871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6494876">1</span><span class="op" id="6494877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494882"><a href="/gostd/net/http/response.go.html#4161662">ProtoMinor</a></span><span class="op" id="6494892">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6494897">1</span><span class="op" id="6494898">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494903"><a href="/gostd/net/http/response.go.html#4162765">ContentLength</a></span><span class="op" id="6494916">:</span>&nbsp;<span class="num" id="6494918">3</span><span class="op" id="6494919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494924"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span><span class="op" id="6494928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494939"><a href="/gostd/net/http/httputil/dump_test.go.html#6489716">ioutil</a></span><span class="op" id="6494945">.</span><span class="ident" id="6494946"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="6494955">(</span><span class="ident" id="6494956"><a href="/gostd/net/http/httputil/dump_test.go.html#6489763">strings</a></span><span class="op" id="6494963">.</span><span class="ident" id="6494964"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="6494973">(</span><span class="string" id="6494974">&#34;foo&#34;</span><span class="op" id="6494979">)</span><span class="op" id="6494980">)</span><span class="op" id="6494981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6494985">}</span><span class="op" id="6494986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6494990"><a href="/gostd/net/http/httputil/dump_test.go.html#6494302">body</a></span><span class="op" id="6494994">:</span>&nbsp;<span class="builtintype" id="6494996">true</span><span class="op" id="6495000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495004"><a href="/gostd/net/http/httputil/dump_test.go.html#6494313">want</a></span><span class="op" id="6495008">:</span>&nbsp;<span class="string" id="6495010">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="6495050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495053">}</span><span class="op" id="6495054">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495062"><a href="/gostd/net/http/httputil/dump_test.go.html#6494281">res</a></span><span class="op" id="6495065">:</span>&nbsp;<span class="op" id="6495067">&amp;</span><span class="ident" id="6495068"><a href="/gostd/net/http/httputil/dump_test.go.html#6489729">http</a></span><span class="op" id="6495072">.</span><span class="ident" id="6495073"><a href="/gostd/net/http/response.go.html#4161509">Response</a></span><span class="op" id="6495081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495086"><a href="/gostd/net/http/response.go.html#4161528">Status</a></span><span class="op" id="6495092">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6495104">&#34;200&nbsp;OK&#34;</span><span class="op" id="6495112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495117"><a href="/gostd/net/http/response.go.html#4161564">StatusCode</a></span><span class="op" id="6495127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6495135">200</span><span class="op" id="6495138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495143"><a href="/gostd/net/http/response.go.html#4161595">Proto</a></span><span class="op" id="6495148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6495161">&#34;HTTP/1.1&#34;</span><span class="op" id="6495171">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495176"><a href="/gostd/net/http/response.go.html#4161633">ProtoMajor</a></span><span class="op" id="6495186">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6495194">1</span><span class="op" id="6495195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495200"><a href="/gostd/net/http/response.go.html#4161662">ProtoMinor</a></span><span class="op" id="6495210">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6495218">1</span><span class="op" id="6495219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495224"><a href="/gostd/net/http/response.go.html#4162765">ContentLength</a></span><span class="op" id="6495237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495242">-</span><span class="num" id="6495243">1</span><span class="op" id="6495244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495249"><a href="/gostd/net/http/response.go.html#4162507">Body</a></span><span class="op" id="6495253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495267"><a href="/gostd/net/http/httputil/dump_test.go.html#6489716">ioutil</a></span><span class="op" id="6495273">.</span><span class="ident" id="6495274"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="6495283">(</span><span class="ident" id="6495284"><a href="/gostd/net/http/httputil/dump_test.go.html#6489763">strings</a></span><span class="op" id="6495291">.</span><span class="ident" id="6495292"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="6495301">(</span><span class="string" id="6495302">&#34;foo&#34;</span><span class="op" id="6495307">)</span><span class="op" id="6495308">)</span><span class="op" id="6495309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495314"><a href="/gostd/net/http/response.go.html#4162908">TransferEncoding</a></span><span class="op" id="6495330">:</span>&nbsp;<span class="op" id="6495332">[</span><span class="op" id="6495333">]</span><span class="builtintype" id="6495334">string</span><span class="op" id="6495340">{</span><span class="string" id="6495341">&#34;chunked&#34;</span><span class="op" id="6495350">}</span><span class="op" id="6495351">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495355">}</span><span class="op" id="6495356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495360"><a href="/gostd/net/http/httputil/dump_test.go.html#6494302">body</a></span><span class="op" id="6495364">:</span>&nbsp;<span class="builtintype" id="6495366">true</span><span class="op" id="6495370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495374"><a href="/gostd/net/http/httputil/dump_test.go.html#6494313">want</a></span><span class="op" id="6495378">:</span>&nbsp;<span class="string" id="6495380">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="6495433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495436">}</span><span class="op" id="6495437">,</span><br>
<span class="lineno"></span><span class="op" id="6495439">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="6495442">func</span>&nbsp;<span class="ident" id="6495447">TestDumpResponse</span><span class="op" id="6495463">(</span><span class="ident" id="6495464">t</span>&nbsp;<span class="op" id="6495466">*</span><span class="ident" id="6495467"><a href="/gostd/net/http/httputil/dump_test.go.html#6489774">testing</a></span><span class="op" id="6495474">.</span><span class="ident" id="6495475"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6495476">)</span>&nbsp;<span class="op" id="6495478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6495481">for</span>&nbsp;<span class="ident" id="6495485">i</span><span class="op" id="6495486">,</span>&nbsp;<span class="ident" id="6495488">tt</span>&nbsp;<span class="op" id="6495491">:=</span>&nbsp;<span class="keyword" id="6495494">range</span>&nbsp;<span class="ident" id="6495500"><a href="/gostd/net/http/httputil/dump_test.go.html#6494254">dumpResTests</a></span>&nbsp;<span class="op" id="6495513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495517">gotb</span><span class="op" id="6495521">,</span>&nbsp;<span class="ident" id="6495523">err</span>&nbsp;<span class="op" id="6495527">:=</span>&nbsp;<span class="ident" id="6495530"><a href="/gostd/net/http/httputil/dump.go.html#6385777">DumpResponse</a></span><span class="op" id="6495542">(</span><span class="ident" id="6495543"><a href="/gostd/net/http/httputil/dump_test.go.html#6495488">tt</a></span><span class="op" id="6495545">.</span><span class="ident" id="6495546"><a href="/gostd/net/http/httputil/dump_test.go.html#6494281">res</a></span><span class="op" id="6495549">,</span>&nbsp;<span class="ident" id="6495551"><a href="/gostd/net/http/httputil/dump_test.go.html#6495488">tt</a></span><span class="op" id="6495553">.</span><span class="ident" id="6495554"><a href="/gostd/net/http/httputil/dump_test.go.html#6494302">body</a></span><span class="op" id="6495558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6495562">if</span>&nbsp;<span class="ident" id="6495565"><a href="/gostd/net/http/httputil/dump_test.go.html#6495523">err</a></span>&nbsp;<span class="op" id="6495569">!=</span>&nbsp;<span class="builtintype" id="6495572">nil</span>&nbsp;<span class="op" id="6495576">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495581"><a href="/gostd/net/http/httputil/dump_test.go.html#6495464">t</a></span><span class="op" id="6495582">.</span><span class="ident" id="6495583"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6495589">(</span><span class="string" id="6495590">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6495613">,</span>&nbsp;<span class="ident" id="6495615"><a href="/gostd/net/http/httputil/dump_test.go.html#6495485">i</a></span><span class="op" id="6495616">,</span>&nbsp;<span class="ident" id="6495618"><a href="/gostd/net/http/httputil/dump_test.go.html#6495523">err</a></span><span class="op" id="6495621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6495626">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495641">got</span>&nbsp;<span class="op" id="6495645">:=</span>&nbsp;<span class="builtintype" id="6495648">string</span><span class="op" id="6495654">(</span><span class="ident" id="6495655"><a href="/gostd/net/http/httputil/dump_test.go.html#6495517">gotb</a></span><span class="op" id="6495659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495663"><a href="/gostd/net/http/httputil/dump_test.go.html#6495641">got</a></span>&nbsp;<span class="op" id="6495667">=</span>&nbsp;<span class="ident" id="6495669"><a href="/gostd/net/http/httputil/dump_test.go.html#6489763">strings</a></span><span class="op" id="6495676">.</span><span class="ident" id="6495677"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="6495686">(</span><span class="ident" id="6495687"><a href="/gostd/net/http/httputil/dump_test.go.html#6495641">got</a></span><span class="op" id="6495690">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495694"><a href="/gostd/net/http/httputil/dump_test.go.html#6495641">got</a></span>&nbsp;<span class="op" id="6495698">=</span>&nbsp;<span class="ident" id="6495700"><a href="/gostd/net/http/httputil/dump_test.go.html#6489763">strings</a></span><span class="op" id="6495707">.</span><span class="ident" id="6495708"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="6495715">(</span><span class="ident" id="6495716"><a href="/gostd/net/http/httputil/dump_test.go.html#6495641">got</a></span><span class="op" id="6495719">,</span>&nbsp;<span class="string" id="6495721">&#34;\r&#34;</span><span class="op" id="6495725">,</span>&nbsp;<span class="string" id="6495727">&#34;&#34;</span><span class="op" id="6495729">,</span>&nbsp;<span class="op" id="6495731">-</span><span class="num" id="6495732">1</span><span class="op" id="6495733">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6495738">if</span>&nbsp;<span class="ident" id="6495741"><a href="/gostd/net/http/httputil/dump_test.go.html#6495641">got</a></span>&nbsp;<span class="op" id="6495745">!=</span>&nbsp;<span class="ident" id="6495748"><a href="/gostd/net/http/httputil/dump_test.go.html#6495488">tt</a></span><span class="op" id="6495750">.</span><span class="ident" id="6495751"><a href="/gostd/net/http/httputil/dump_test.go.html#6494313">want</a></span>&nbsp;<span class="op" id="6495756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6495761"><a href="/gostd/net/http/httputil/dump_test.go.html#6495464">t</a></span><span class="op" id="6495762">.</span><span class="ident" id="6495763"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6495769">(</span><span class="string" id="6495770">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="6495813">,</span>&nbsp;<span class="ident" id="6495815"><a href="/gostd/net/http/httputil/dump_test.go.html#6495485">i</a></span><span class="op" id="6495816">,</span>&nbsp;<span class="ident" id="6495818"><a href="/gostd/net/http/httputil/dump_test.go.html#6495641">got</a></span><span class="op" id="6495821">,</span>&nbsp;<span class="ident" id="6495823"><a href="/gostd/net/http/httputil/dump_test.go.html#6495488">tt</a></span><span class="op" id="6495825">.</span><span class="ident" id="6495826"><a href="/gostd/net/http/httputil/dump_test.go.html#6494313">want</a></span><span class="op" id="6495830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495834">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6495837">}</span><br>
<span class="lineno"></span><span class="op" id="6495839">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
