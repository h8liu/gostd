<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8552918">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8552973">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8553027">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8553078">package</span>&nbsp;<span class="ident" id="8553086">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8553092">import</span>&nbsp;<span class="op" id="8553099">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553102">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553111">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553117">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553128">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8553138">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8553141">func</span>&nbsp;<span class="ident" id="8553146">TestBodyReadBadTrailer</span><span class="op" id="8553168">(</span><span class="ident" id="8553169">t</span>&nbsp;<span class="op" id="8553171">*</span><span class="ident" id="8553172">testing</span><span class="op" id="8553179">.</span><span class="ident" id="8553180">T</span><span class="op" id="8553181">)</span>&nbsp;<span class="op" id="8553183">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553186">b</span>&nbsp;<span class="op" id="8553188">:=</span>&nbsp;<span class="op" id="8553191">&amp;</span><span class="ident" id="8553192">body</span><span class="op" id="8553196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553200">src</span><span class="op" id="8553203">:</span>&nbsp;<span class="ident" id="8553205">strings</span><span class="op" id="8553212">.</span><span class="ident" id="8553213">NewReader</span><span class="op" id="8553222">(</span><span class="string" id="8553223">&#34;foobar&#34;</span><span class="op" id="8553231">)</span><span class="op" id="8553232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553236">hdr</span><span class="op" id="8553239">:</span>&nbsp;<span class="builtintype" id="8553241">true</span><span class="op" id="8553245">,</span>&nbsp;<span class="comment" id="8553247">//&nbsp;force&nbsp;reading&nbsp;the&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553278">r</span><span class="op" id="8553279">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8553283">bufio</span><span class="op" id="8553288">.</span><span class="ident" id="8553289">NewReader</span><span class="op" id="8553298">(</span><span class="ident" id="8553299">strings</span><span class="op" id="8553306">.</span><span class="ident" id="8553307">NewReader</span><span class="op" id="8553316">(</span><span class="string" id="8553317">&#34;&#34;</span><span class="op" id="8553319">)</span><span class="op" id="8553320">)</span><span class="op" id="8553321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8553324">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553327">buf</span>&nbsp;<span class="op" id="8553331">:=</span>&nbsp;<span class="builtinfunc" id="8553334">make</span><span class="op" id="8553338">(</span><span class="op" id="8553339">[</span><span class="op" id="8553340">]</span><span class="builtintype" id="8553341">byte</span><span class="op" id="8553345">,</span>&nbsp;<span class="num" id="8553347">7</span><span class="op" id="8553348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553351">n</span><span class="op" id="8553352">,</span>&nbsp;<span class="ident" id="8553354">err</span>&nbsp;<span class="op" id="8553358">:=</span>&nbsp;<span class="ident" id="8553361">b</span><span class="op" id="8553362">.</span><span class="ident" id="8553363">Read</span><span class="op" id="8553367">(</span><span class="ident" id="8553368">buf</span><span class="op" id="8553371">[</span><span class="op" id="8553372">:</span><span class="num" id="8553373">3</span><span class="op" id="8553374">]</span><span class="op" id="8553375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553378">got</span>&nbsp;<span class="op" id="8553382">:=</span>&nbsp;<span class="builtintype" id="8553385">string</span><span class="op" id="8553391">(</span><span class="ident" id="8553392">buf</span><span class="op" id="8553395">[</span><span class="op" id="8553396">:</span><span class="ident" id="8553397">n</span><span class="op" id="8553398">]</span><span class="op" id="8553399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8553402">if</span>&nbsp;<span class="ident" id="8553405">got</span>&nbsp;<span class="op" id="8553409">!=</span>&nbsp;<span class="string" id="8553412">&#34;foo&#34;</span>&nbsp;<span class="op" id="8553418">||</span>&nbsp;<span class="ident" id="8553421">err</span>&nbsp;<span class="op" id="8553425">!=</span>&nbsp;<span class="ident" id="8553428">nil</span>&nbsp;<span class="op" id="8553432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553436">t</span><span class="op" id="8553437">.</span><span class="ident" id="8553438">Fatalf</span><span class="op" id="8553444">(</span><span class="string" id="8553445">`first&nbsp;Read&nbsp;=&nbsp;%d&nbsp;(%q),&nbsp;%v;&nbsp;want&nbsp;3&nbsp;(&#34;foo&#34;)`</span><span class="op" id="8553487">,</span>&nbsp;<span class="ident" id="8553489">n</span><span class="op" id="8553490">,</span>&nbsp;<span class="ident" id="8553492">got</span><span class="op" id="8553495">,</span>&nbsp;<span class="ident" id="8553497">err</span><span class="op" id="8553500">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8553503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553507">n</span><span class="op" id="8553508">,</span>&nbsp;<span class="ident" id="8553510">err</span>&nbsp;<span class="op" id="8553514">=</span>&nbsp;<span class="ident" id="8553516">b</span><span class="op" id="8553517">.</span><span class="ident" id="8553518">Read</span><span class="op" id="8553522">(</span><span class="ident" id="8553523">buf</span><span class="op" id="8553526">[</span><span class="op" id="8553527">:</span><span class="op" id="8553528">]</span><span class="op" id="8553529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553532">got</span>&nbsp;<span class="op" id="8553536">=</span>&nbsp;<span class="builtintype" id="8553538">string</span><span class="op" id="8553544">(</span><span class="ident" id="8553545">buf</span><span class="op" id="8553548">[</span><span class="op" id="8553549">:</span><span class="ident" id="8553550">n</span><span class="op" id="8553551">]</span><span class="op" id="8553552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8553555">if</span>&nbsp;<span class="ident" id="8553558">got</span>&nbsp;<span class="op" id="8553562">!=</span>&nbsp;<span class="string" id="8553565">&#34;bar&#34;</span>&nbsp;<span class="op" id="8553571">||</span>&nbsp;<span class="ident" id="8553574">err</span>&nbsp;<span class="op" id="8553578">!=</span>&nbsp;<span class="ident" id="8553581">nil</span>&nbsp;<span class="op" id="8553585">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553589">t</span><span class="op" id="8553590">.</span><span class="ident" id="8553591">Fatalf</span><span class="op" id="8553597">(</span><span class="string" id="8553598">`second&nbsp;Read&nbsp;=&nbsp;%d&nbsp;(%q),&nbsp;%v;&nbsp;want&nbsp;3&nbsp;(&#34;bar&#34;)`</span><span class="op" id="8553641">,</span>&nbsp;<span class="ident" id="8553643">n</span><span class="op" id="8553644">,</span>&nbsp;<span class="ident" id="8553646">got</span><span class="op" id="8553649">,</span>&nbsp;<span class="ident" id="8553651">err</span><span class="op" id="8553654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8553657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553661">n</span><span class="op" id="8553662">,</span>&nbsp;<span class="ident" id="8553664">err</span>&nbsp;<span class="op" id="8553668">=</span>&nbsp;<span class="ident" id="8553670">b</span><span class="op" id="8553671">.</span><span class="ident" id="8553672">Read</span><span class="op" id="8553676">(</span><span class="ident" id="8553677">buf</span><span class="op" id="8553680">[</span><span class="op" id="8553681">:</span><span class="op" id="8553682">]</span><span class="op" id="8553683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553686">got</span>&nbsp;<span class="op" id="8553690">=</span>&nbsp;<span class="builtintype" id="8553692">string</span><span class="op" id="8553698">(</span><span class="ident" id="8553699">buf</span><span class="op" id="8553702">[</span><span class="op" id="8553703">:</span><span class="ident" id="8553704">n</span><span class="op" id="8553705">]</span><span class="op" id="8553706">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8553709">if</span>&nbsp;<span class="ident" id="8553712">err</span>&nbsp;<span class="op" id="8553716">==</span>&nbsp;<span class="ident" id="8553719">nil</span>&nbsp;<span class="op" id="8553723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553727">t</span><span class="op" id="8553728">.</span><span class="ident" id="8553729">Errorf</span><span class="op" id="8553735">(</span><span class="string" id="8553736">&#34;final&nbsp;Read&nbsp;was&nbsp;successful&nbsp;(%q),&nbsp;expected&nbsp;error&nbsp;from&nbsp;trailer&nbsp;read&#34;</span><span class="op" id="8553802">,</span>&nbsp;<span class="ident" id="8553804">got</span><span class="op" id="8553807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8553810">}</span><br>
<span class="lineno"></span><span class="op" id="8553812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8553815">func</span>&nbsp;<span class="ident" id="8553820">TestFinalChunkedBodyReadEOF</span><span class="op" id="8553847">(</span><span class="ident" id="8553848">t</span>&nbsp;<span class="op" id="8553850">*</span><span class="ident" id="8553851">testing</span><span class="op" id="8553858">.</span><span class="ident" id="8553859">T</span><span class="op" id="8553860">)</span>&nbsp;<span class="op" id="8553862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8553865">res</span><span class="op" id="8553868">,</span>&nbsp;<span class="ident" id="8553870">err</span>&nbsp;<span class="op" id="8553874">:=</span>&nbsp;<span class="ident" id="8553877">ReadResponse</span><span class="op" id="8553889">(</span><span class="ident" id="8553890">bufio</span><span class="op" id="8553895">.</span><span class="ident" id="8553896">NewReader</span><span class="op" id="8553905">(</span><span class="ident" id="8553906">strings</span><span class="op" id="8553913">.</span><span class="ident" id="8553914">NewReader</span><span class="op" id="8553923">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553927">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="8553948">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553953">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="8553985">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8553990">&#34;\r\n&#34;</span><span class="op" id="8553996">+</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554001">&#34;0a\r\n&#34;</span><span class="op" id="8554009">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554014">&#34;Body&nbsp;here\n\r\n&#34;</span><span class="op" id="8554031">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554036">&#34;09\r\n&#34;</span><span class="op" id="8554044">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554049">&#34;continued\r\n&#34;</span><span class="op" id="8554064">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554069">&#34;0\r\n&#34;</span><span class="op" id="8554076">+</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8554081">&#34;\r\n&#34;</span><span class="op" id="8554087">)</span><span class="op" id="8554088">)</span><span class="op" id="8554089">,</span>&nbsp;<span class="ident" id="8554091">nil</span><span class="op" id="8554094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8554097">if</span>&nbsp;<span class="ident" id="8554100">err</span>&nbsp;<span class="op" id="8554104">!=</span>&nbsp;<span class="ident" id="8554107">nil</span>&nbsp;<span class="op" id="8554111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554115">t</span><span class="op" id="8554116">.</span><span class="ident" id="8554117">Fatal</span><span class="op" id="8554122">(</span><span class="ident" id="8554123">err</span><span class="op" id="8554126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8554129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554132">want</span>&nbsp;<span class="op" id="8554137">:=</span>&nbsp;<span class="string" id="8554140">&#34;Body&nbsp;here\ncontinued&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554164">buf</span>&nbsp;<span class="op" id="8554168">:=</span>&nbsp;<span class="builtinfunc" id="8554171">make</span><span class="op" id="8554175">(</span><span class="op" id="8554176">[</span><span class="op" id="8554177">]</span><span class="builtintype" id="8554178">byte</span><span class="op" id="8554182">,</span>&nbsp;<span class="builtinfunc" id="8554184">len</span><span class="op" id="8554187">(</span><span class="ident" id="8554188">want</span><span class="op" id="8554192">)</span><span class="op" id="8554193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554196">n</span><span class="op" id="8554197">,</span>&nbsp;<span class="ident" id="8554199">err</span>&nbsp;<span class="op" id="8554203">:=</span>&nbsp;<span class="ident" id="8554206">res</span><span class="op" id="8554209">.</span><span class="ident" id="8554210">Body</span><span class="op" id="8554214">.</span><span class="ident" id="8554215">Read</span><span class="op" id="8554219">(</span><span class="ident" id="8554220">buf</span><span class="op" id="8554223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8554226">if</span>&nbsp;<span class="ident" id="8554229">n</span>&nbsp;<span class="op" id="8554231">!=</span>&nbsp;<span class="builtinfunc" id="8554234">len</span><span class="op" id="8554237">(</span><span class="ident" id="8554238">want</span><span class="op" id="8554242">)</span>&nbsp;<span class="op" id="8554244">||</span>&nbsp;<span class="ident" id="8554247">err</span>&nbsp;<span class="op" id="8554251">!=</span>&nbsp;<span class="ident" id="8554254">io</span><span class="op" id="8554256">.</span><span class="ident" id="8554257">EOF</span>&nbsp;<span class="op" id="8554261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554265">t</span><span class="op" id="8554266">.</span><span class="ident" id="8554267">Logf</span><span class="op" id="8554271">(</span><span class="string" id="8554272">&#34;body&nbsp;=&nbsp;%#v&#34;</span><span class="op" id="8554284">,</span>&nbsp;<span class="ident" id="8554286">res</span><span class="op" id="8554289">.</span><span class="ident" id="8554290">Body</span><span class="op" id="8554294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554298">t</span><span class="op" id="8554299">.</span><span class="ident" id="8554300">Errorf</span><span class="op" id="8554306">(</span><span class="string" id="8554307">&#34;Read&nbsp;=&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%d,&nbsp;EOF&#34;</span><span class="op" id="8554336">,</span>&nbsp;<span class="ident" id="8554338">n</span><span class="op" id="8554339">,</span>&nbsp;<span class="ident" id="8554341">err</span><span class="op" id="8554344">,</span>&nbsp;<span class="builtinfunc" id="8554346">len</span><span class="op" id="8554349">(</span><span class="ident" id="8554350">want</span><span class="op" id="8554354">)</span><span class="op" id="8554355">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8554358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8554361">if</span>&nbsp;<span class="builtintype" id="8554364">string</span><span class="op" id="8554370">(</span><span class="ident" id="8554371">buf</span><span class="op" id="8554374">)</span>&nbsp;<span class="op" id="8554376">!=</span>&nbsp;<span class="ident" id="8554379">want</span>&nbsp;<span class="op" id="8554384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8554388">t</span><span class="op" id="8554389">.</span><span class="ident" id="8554390">Errorf</span><span class="op" id="8554396">(</span><span class="string" id="8554397">&#34;buf&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8554416">,</span>&nbsp;<span class="ident" id="8554418">buf</span><span class="op" id="8554421">,</span>&nbsp;<span class="ident" id="8554423">want</span><span class="op" id="8554427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8554430">}</span><br>
<span class="lineno"></span><span class="op" id="8554432">}</span>
</div>
</body>
</html>
