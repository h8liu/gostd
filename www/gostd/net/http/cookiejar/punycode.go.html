<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6060450">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6060505">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6060559">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6060610">package</span>&nbsp;<span class="ident" id="6060618">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6060629">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060692">import</span>&nbsp;<span class="op" id="6060699">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6060702">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6060709">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6060720">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6060735">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6060738">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="6060792">//</span><br>
<span class="lineno"></span><span class="comment" id="6060795">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="6060874">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="6060924">const</span>&nbsp;<span class="op" id="6060930">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6060933">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6060945">int32</span>&nbsp;<span class="op" id="6060951">=</span>&nbsp;<span class="num" id="6060953">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6060957">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6060969">int32</span>&nbsp;<span class="op" id="6060975">=</span>&nbsp;<span class="num" id="6060977">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6060982">initialBias</span>&nbsp;<span class="builtintype" id="6060994">int32</span>&nbsp;<span class="op" id="6061000">=</span>&nbsp;<span class="num" id="6061002">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061006">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6061018">int32</span>&nbsp;<span class="op" id="6061024">=</span>&nbsp;<span class="num" id="6061026">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061031">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6061043">int32</span>&nbsp;<span class="op" id="6061049">=</span>&nbsp;<span class="num" id="6061051">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061055">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6061067">int32</span>&nbsp;<span class="op" id="6061073">=</span>&nbsp;<span class="num" id="6061075">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061079">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6061091">int32</span>&nbsp;<span class="op" id="6061097">=</span>&nbsp;<span class="num" id="6061099">1</span><br>
<span class="lineno"></span><span class="op" id="6061101">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6061104">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="6061182">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="6061197">//</span><br>
<span class="lineno"></span><span class="comment" id="6061200">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="6061272">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="6061352">func</span>&nbsp;<span class="ident" id="6061357">encode</span><span class="op" id="6061363">(</span><span class="ident" id="6061364">prefix</span><span class="op" id="6061370">,</span>&nbsp;<span class="ident" id="6061372">s</span>&nbsp;<span class="builtintype" id="6061374">string</span><span class="op" id="6061380">)</span>&nbsp;<span class="op" id="6061382">(</span><span class="builtintype" id="6061383">string</span><span class="op" id="6061389">,</span>&nbsp;<span class="builtintype" id="6061391">error</span><span class="op" id="6061396">)</span>&nbsp;<span class="op" id="6061398">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061401">output</span>&nbsp;<span class="op" id="6061408">:=</span>&nbsp;<span class="builtinfunc" id="6061411">make</span><span class="op" id="6061415">(</span><span class="op" id="6061416">[</span><span class="op" id="6061417">]</span><span class="builtintype" id="6061418">byte</span><span class="op" id="6061422">,</span>&nbsp;<span class="builtinfunc" id="6061424">len</span><span class="op" id="6061427">(</span><span class="ident" id="6061428"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061364">prefix</a></span><span class="op" id="6061434">)</span><span class="op" id="6061435">,</span>&nbsp;<span class="builtinfunc" id="6061437">len</span><span class="op" id="6061440">(</span><span class="ident" id="6061441"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061364">prefix</a></span><span class="op" id="6061447">)</span><span class="op" id="6061448">+</span><span class="num" id="6061449">1</span><span class="op" id="6061450">+</span><span class="num" id="6061451">2</span><span class="op" id="6061452">*</span><span class="builtinfunc" id="6061453">len</span><span class="op" id="6061456">(</span><span class="ident" id="6061457"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061372">s</a></span><span class="op" id="6061458">)</span><span class="op" id="6061459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6061462">copy</span><span class="op" id="6061466">(</span><span class="ident" id="6061467"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span><span class="op" id="6061473">,</span>&nbsp;<span class="ident" id="6061475"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061364">prefix</a></span><span class="op" id="6061481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061484">delta</span><span class="op" id="6061489">,</span>&nbsp;<span class="ident" id="6061491">n</span><span class="op" id="6061492">,</span>&nbsp;<span class="ident" id="6061494">bias</span>&nbsp;<span class="op" id="6061499">:=</span>&nbsp;<span class="builtintype" id="6061502">int32</span><span class="op" id="6061507">(</span><span class="num" id="6061508">0</span><span class="op" id="6061509">)</span><span class="op" id="6061510">,</span>&nbsp;<span class="ident" id="6061512"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061006">initialN</a></span><span class="op" id="6061520">,</span>&nbsp;<span class="ident" id="6061522"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060982">initialBias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061535">b</span><span class="op" id="6061536">,</span>&nbsp;<span class="ident" id="6061538">remaining</span>&nbsp;<span class="op" id="6061548">:=</span>&nbsp;<span class="builtintype" id="6061551">int32</span><span class="op" id="6061556">(</span><span class="num" id="6061557">0</span><span class="op" id="6061558">)</span><span class="op" id="6061559">,</span>&nbsp;<span class="builtintype" id="6061561">int32</span><span class="op" id="6061566">(</span><span class="num" id="6061567">0</span><span class="op" id="6061568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061571">for</span>&nbsp;<span class="ident" id="6061575">_</span><span class="op" id="6061576">,</span>&nbsp;<span class="ident" id="6061578">r</span>&nbsp;<span class="op" id="6061580">:=</span>&nbsp;<span class="keyword" id="6061583">range</span>&nbsp;<span class="ident" id="6061589"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061372">s</a></span>&nbsp;<span class="op" id="6061591">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061595">if</span>&nbsp;<span class="ident" id="6061598"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061578">r</a></span>&nbsp;<span class="op" id="6061600">&lt;</span>&nbsp;<span class="num" id="6061602">0x80</span>&nbsp;<span class="op" id="6061607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061612"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061535">b</a></span><span class="op" id="6061613">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061619"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span>&nbsp;<span class="op" id="6061626">=</span>&nbsp;<span class="builtinfunc" id="6061628">append</span><span class="op" id="6061634">(</span><span class="ident" id="6061635"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span><span class="op" id="6061641">,</span>&nbsp;<span class="builtintype" id="6061643">byte</span><span class="op" id="6061647">(</span><span class="ident" id="6061648"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061578">r</a></span><span class="op" id="6061649">)</span><span class="op" id="6061650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061654">}</span>&nbsp;<span class="keyword" id="6061656">else</span>&nbsp;<span class="op" id="6061661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061666"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061538">remaining</a></span><span class="op" id="6061675">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061686">h</span>&nbsp;<span class="op" id="6061688">:=</span>&nbsp;<span class="ident" id="6061691"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061535">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061694">if</span>&nbsp;<span class="ident" id="6061697"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061535">b</a></span>&nbsp;<span class="op" id="6061699">&gt;</span>&nbsp;<span class="num" id="6061701">0</span>&nbsp;<span class="op" id="6061703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061707"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span>&nbsp;<span class="op" id="6061714">=</span>&nbsp;<span class="builtinfunc" id="6061716">append</span><span class="op" id="6061722">(</span><span class="ident" id="6061723"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span><span class="op" id="6061729">,</span>&nbsp;<span class="string" id="6061731">&#39;-&#39;</span><span class="op" id="6061734">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061740">for</span>&nbsp;<span class="ident" id="6061744"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061538">remaining</a></span>&nbsp;<span class="op" id="6061754">!=</span>&nbsp;<span class="num" id="6061757">0</span>&nbsp;<span class="op" id="6061759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061763">m</span>&nbsp;<span class="op" id="6061765">:=</span>&nbsp;<span class="builtintype" id="6061768">int32</span><span class="op" id="6061773">(</span><span class="num" id="6061774">0x7fffffff</span><span class="op" id="6061784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061788">for</span>&nbsp;<span class="ident" id="6061792">_</span><span class="op" id="6061793">,</span>&nbsp;<span class="ident" id="6061795">r</span>&nbsp;<span class="op" id="6061797">:=</span>&nbsp;<span class="keyword" id="6061800">range</span>&nbsp;<span class="ident" id="6061806"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061372">s</a></span>&nbsp;<span class="op" id="6061808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061813">if</span>&nbsp;<span class="ident" id="6061816"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061763">m</a></span>&nbsp;<span class="op" id="6061818">&gt;</span>&nbsp;<span class="ident" id="6061820"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061795">r</a></span>&nbsp;<span class="op" id="6061822">&amp;&amp;</span>&nbsp;<span class="ident" id="6061825"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061795">r</a></span>&nbsp;<span class="op" id="6061827">&gt;=</span>&nbsp;<span class="ident" id="6061830"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061491">n</a></span>&nbsp;<span class="op" id="6061832">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061838"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061763">m</a></span>&nbsp;<span class="op" id="6061840">=</span>&nbsp;<span class="ident" id="6061842"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061795">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061855"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span>&nbsp;<span class="op" id="6061861">+=</span>&nbsp;<span class="op" id="6061864">(</span><span class="ident" id="6061865"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061763">m</a></span>&nbsp;<span class="op" id="6061867">-</span>&nbsp;<span class="ident" id="6061869"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061491">n</a></span><span class="op" id="6061870">)</span>&nbsp;<span class="op" id="6061872">*</span>&nbsp;<span class="op" id="6061874">(</span><span class="ident" id="6061875"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061686">h</a></span>&nbsp;<span class="op" id="6061877">+</span>&nbsp;<span class="num" id="6061879">1</span><span class="op" id="6061880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061884">if</span>&nbsp;<span class="ident" id="6061887"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span>&nbsp;<span class="op" id="6061893">&lt;</span>&nbsp;<span class="num" id="6061895">0</span>&nbsp;<span class="op" id="6061897">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061902">return</span>&nbsp;<span class="string" id="6061909">&#34;&#34;</span><span class="op" id="6061911">,</span>&nbsp;<span class="ident" id="6061913"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060702">fmt</a></span><span class="op" id="6061916">.</span><span class="ident" id="6061917"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6061923">(</span><span class="string" id="6061924">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6061953">,</span>&nbsp;<span class="ident" id="6061955"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061372">s</a></span><span class="op" id="6061956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6061960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6061964"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061491">n</a></span>&nbsp;<span class="op" id="6061966">=</span>&nbsp;<span class="ident" id="6061968"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061763">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061972">for</span>&nbsp;<span class="ident" id="6061976">_</span><span class="op" id="6061977">,</span>&nbsp;<span class="ident" id="6061979">r</span>&nbsp;<span class="op" id="6061981">:=</span>&nbsp;<span class="keyword" id="6061984">range</span>&nbsp;<span class="ident" id="6061990"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061372">s</a></span>&nbsp;<span class="op" id="6061992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6061997">if</span>&nbsp;<span class="ident" id="6062000"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061979">r</a></span>&nbsp;<span class="op" id="6062002">&lt;</span>&nbsp;<span class="ident" id="6062004"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061491">n</a></span>&nbsp;<span class="op" id="6062006">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062012"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span><span class="op" id="6062017">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062024">if</span>&nbsp;<span class="ident" id="6062027"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span>&nbsp;<span class="op" id="6062033">&lt;</span>&nbsp;<span class="num" id="6062035">0</span>&nbsp;<span class="op" id="6062037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062044">return</span>&nbsp;<span class="string" id="6062051">&#34;&#34;</span><span class="op" id="6062053">,</span>&nbsp;<span class="ident" id="6062055"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060702">fmt</a></span><span class="op" id="6062058">.</span><span class="ident" id="6062059"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6062065">(</span><span class="string" id="6062066">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6062095">,</span>&nbsp;<span class="ident" id="6062097"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061372">s</a></span><span class="op" id="6062098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062110">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062127">if</span>&nbsp;<span class="ident" id="6062130"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061979">r</a></span>&nbsp;<span class="op" id="6062132">&gt;</span>&nbsp;<span class="ident" id="6062134"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061491">n</a></span>&nbsp;<span class="op" id="6062136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062142">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062159">q</span>&nbsp;<span class="op" id="6062161">:=</span>&nbsp;<span class="ident" id="6062164"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062173">for</span>&nbsp;<span class="ident" id="6062177">k</span>&nbsp;<span class="op" id="6062179">:=</span>&nbsp;<span class="ident" id="6062182"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span><span class="op" id="6062186">;</span>&nbsp;<span class="op" id="6062188">;</span>&nbsp;<span class="ident" id="6062190"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062177">k</a></span>&nbsp;<span class="op" id="6062192">+=</span>&nbsp;<span class="ident" id="6062195"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span>&nbsp;<span class="op" id="6062200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062206">t</span>&nbsp;<span class="op" id="6062208">:=</span>&nbsp;<span class="ident" id="6062211"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062177">k</a></span>&nbsp;<span class="op" id="6062213">-</span>&nbsp;<span class="ident" id="6062215"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061494">bias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062224">if</span>&nbsp;<span class="ident" id="6062227"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span>&nbsp;<span class="op" id="6062229">&lt;</span>&nbsp;<span class="ident" id="6062231"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061079">tmin</a></span>&nbsp;<span class="op" id="6062236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062243"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span>&nbsp;<span class="op" id="6062245">=</span>&nbsp;<span class="ident" id="6062247"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061079">tmin</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062256">}</span>&nbsp;<span class="keyword" id="6062258">else</span>&nbsp;<span class="keyword" id="6062263">if</span>&nbsp;<span class="ident" id="6062266"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span>&nbsp;<span class="op" id="6062268">&gt;</span>&nbsp;<span class="ident" id="6062270"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061055">tmax</a></span>&nbsp;<span class="op" id="6062275">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062282"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span>&nbsp;<span class="op" id="6062284">=</span>&nbsp;<span class="ident" id="6062286"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061055">tmax</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062301">if</span>&nbsp;<span class="ident" id="6062304"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062159">q</a></span>&nbsp;<span class="op" id="6062306">&lt;</span>&nbsp;<span class="ident" id="6062308"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span>&nbsp;<span class="op" id="6062310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062317">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062327">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062333"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span>&nbsp;<span class="op" id="6062340">=</span>&nbsp;<span class="builtinfunc" id="6062342">append</span><span class="op" id="6062348">(</span><span class="ident" id="6062349"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span><span class="op" id="6062355">,</span>&nbsp;<span class="ident" id="6062357"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062595">encodeDigit</a></span><span class="op" id="6062368">(</span><span class="ident" id="6062369"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span><span class="op" id="6062370">+</span><span class="op" id="6062371">(</span><span class="ident" id="6062372"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062159">q</a></span><span class="op" id="6062373">-</span><span class="ident" id="6062374"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span><span class="op" id="6062375">)</span><span class="op" id="6062376">%</span><span class="op" id="6062377">(</span><span class="ident" id="6062378"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span><span class="op" id="6062382">-</span><span class="ident" id="6062383"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span><span class="op" id="6062384">)</span><span class="op" id="6062385">)</span><span class="op" id="6062386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062392"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062159">q</a></span>&nbsp;<span class="op" id="6062394">=</span>&nbsp;<span class="op" id="6062396">(</span><span class="ident" id="6062397"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062159">q</a></span>&nbsp;<span class="op" id="6062399">-</span>&nbsp;<span class="ident" id="6062401"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span><span class="op" id="6062402">)</span>&nbsp;<span class="op" id="6062404">/</span>&nbsp;<span class="op" id="6062406">(</span><span class="ident" id="6062407"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span>&nbsp;<span class="op" id="6062412">-</span>&nbsp;<span class="ident" id="6062414"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062206">t</a></span><span class="op" id="6062415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062425"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span>&nbsp;<span class="op" id="6062432">=</span>&nbsp;<span class="builtinfunc" id="6062434">append</span><span class="op" id="6062440">(</span><span class="ident" id="6062441"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span><span class="op" id="6062447">,</span>&nbsp;<span class="ident" id="6062449"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062595">encodeDigit</a></span><span class="op" id="6062460">(</span><span class="ident" id="6062461"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062159">q</a></span><span class="op" id="6062462">)</span><span class="op" id="6062463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062468"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061494">bias</a></span>&nbsp;<span class="op" id="6062473">=</span>&nbsp;<span class="ident" id="6062475"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062898">adapt</a></span><span class="op" id="6062480">(</span><span class="ident" id="6062481"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span><span class="op" id="6062486">,</span>&nbsp;<span class="ident" id="6062488"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061686">h</a></span><span class="op" id="6062489">+</span><span class="num" id="6062490">1</span><span class="op" id="6062491">,</span>&nbsp;<span class="ident" id="6062493"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061686">h</a></span>&nbsp;<span class="op" id="6062495">==</span>&nbsp;<span class="ident" id="6062498"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061535">b</a></span><span class="op" id="6062499">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062504"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span>&nbsp;<span class="op" id="6062510">=</span>&nbsp;<span class="num" id="6062512">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062517"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061686">h</a></span><span class="op" id="6062518">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062524"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061538">remaining</a></span><span class="op" id="6062533">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062542"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061484">delta</a></span><span class="op" id="6062547">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062552"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061491">n</a></span><span class="op" id="6062553">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062560">return</span>&nbsp;<span class="builtintype" id="6062567">string</span><span class="op" id="6062573">(</span><span class="ident" id="6062574"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061401">output</a></span><span class="op" id="6062580">)</span><span class="op" id="6062581">,</span>&nbsp;<span class="builtintype" id="6062583">nil</span><br>
<span class="lineno"></span><span class="op" id="6062587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6062590">func</span>&nbsp;<span class="ident" id="6062595">encodeDigit</span><span class="op" id="6062606">(</span><span class="ident" id="6062607">digit</span>&nbsp;<span class="builtintype" id="6062613">int32</span><span class="op" id="6062618">)</span>&nbsp;<span class="builtintype" id="6062620">byte</span>&nbsp;<span class="op" id="6062625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062628">switch</span>&nbsp;<span class="op" id="6062635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062638">case</span>&nbsp;<span class="num" id="6062643">0</span>&nbsp;<span class="op" id="6062645">&lt;=</span>&nbsp;<span class="ident" id="6062648"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062607">digit</a></span>&nbsp;<span class="op" id="6062654">&amp;&amp;</span>&nbsp;<span class="ident" id="6062657"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062607">digit</a></span>&nbsp;<span class="op" id="6062663">&lt;</span>&nbsp;<span class="num" id="6062665">26</span><span class="op" id="6062667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062671">return</span>&nbsp;<span class="builtintype" id="6062678">byte</span><span class="op" id="6062682">(</span><span class="ident" id="6062683"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062607">digit</a></span>&nbsp;<span class="op" id="6062689">+</span>&nbsp;<span class="string" id="6062691">&#39;a&#39;</span><span class="op" id="6062694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062697">case</span>&nbsp;<span class="num" id="6062702">26</span>&nbsp;<span class="op" id="6062705">&lt;=</span>&nbsp;<span class="ident" id="6062708"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062607">digit</a></span>&nbsp;<span class="op" id="6062714">&amp;&amp;</span>&nbsp;<span class="ident" id="6062717"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062607">digit</a></span>&nbsp;<span class="op" id="6062723">&lt;</span>&nbsp;<span class="num" id="6062725">36</span><span class="op" id="6062727">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062731">return</span>&nbsp;<span class="builtintype" id="6062738">byte</span><span class="op" id="6062742">(</span><span class="ident" id="6062743"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062607">digit</a></span>&nbsp;<span class="op" id="6062749">+</span>&nbsp;<span class="op" id="6062751">(</span><span class="string" id="6062752">&#39;0&#39;</span>&nbsp;<span class="op" id="6062756">-</span>&nbsp;<span class="num" id="6062758">26</span><span class="op" id="6062760">)</span><span class="op" id="6062761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6062767">panic</span><span class="op" id="6062772">(</span><span class="string" id="6062773">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="6062821">)</span><br>
<span class="lineno"></span><span class="op" id="6062823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6062826">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="6062893">func</span>&nbsp;<span class="ident" id="6062898">adapt</span><span class="op" id="6062903">(</span><span class="ident" id="6062904">delta</span><span class="op" id="6062909">,</span>&nbsp;<span class="ident" id="6062911">numPoints</span>&nbsp;<span class="builtintype" id="6062921">int32</span><span class="op" id="6062926">,</span>&nbsp;<span class="ident" id="6062928">firstTime</span>&nbsp;<span class="builtintype" id="6062938">bool</span><span class="op" id="6062942">)</span>&nbsp;<span class="builtintype" id="6062944">int32</span>&nbsp;<span class="op" id="6062950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6062953">if</span>&nbsp;<span class="ident" id="6062956"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062928">firstTime</a></span>&nbsp;<span class="op" id="6062966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062970"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span>&nbsp;<span class="op" id="6062976">/=</span>&nbsp;<span class="ident" id="6062979"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060957">damp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6062985">}</span>&nbsp;<span class="keyword" id="6062987">else</span>&nbsp;<span class="op" id="6062992">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6062996"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span>&nbsp;<span class="op" id="6063002">/=</span>&nbsp;<span class="num" id="6063005">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063011"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span>&nbsp;<span class="op" id="6063017">+=</span>&nbsp;<span class="ident" id="6063020"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span>&nbsp;<span class="op" id="6063026">/</span>&nbsp;<span class="ident" id="6063028"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062911">numPoints</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063039">k</span>&nbsp;<span class="op" id="6063041">:=</span>&nbsp;<span class="builtintype" id="6063044">int32</span><span class="op" id="6063049">(</span><span class="num" id="6063050">0</span><span class="op" id="6063051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063054">for</span>&nbsp;<span class="ident" id="6063058"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span>&nbsp;<span class="op" id="6063064">&gt;</span>&nbsp;<span class="op" id="6063066">(</span><span class="op" id="6063067">(</span><span class="ident" id="6063068"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span><span class="op" id="6063072">-</span><span class="ident" id="6063073"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061079">tmin</a></span><span class="op" id="6063077">)</span><span class="op" id="6063078">*</span><span class="ident" id="6063079"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061055">tmax</a></span><span class="op" id="6063083">)</span><span class="op" id="6063084">/</span><span class="num" id="6063085">2</span>&nbsp;<span class="op" id="6063087">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063091"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span>&nbsp;<span class="op" id="6063097">/=</span>&nbsp;<span class="ident" id="6063100"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span>&nbsp;<span class="op" id="6063105">-</span>&nbsp;<span class="ident" id="6063107"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061079">tmin</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063114"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063039">k</a></span>&nbsp;<span class="op" id="6063116">+=</span>&nbsp;<span class="ident" id="6063119"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063128">return</span>&nbsp;<span class="ident" id="6063135"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063039">k</a></span>&nbsp;<span class="op" id="6063137">+</span>&nbsp;<span class="op" id="6063139">(</span><span class="ident" id="6063140"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060933">base</a></span><span class="op" id="6063144">-</span><span class="ident" id="6063145"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061079">tmin</a></span><span class="op" id="6063149">+</span><span class="num" id="6063150">1</span><span class="op" id="6063151">)</span><span class="op" id="6063152">*</span><span class="ident" id="6063153"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span><span class="op" id="6063158">/</span><span class="op" id="6063159">(</span><span class="ident" id="6063160"><a href="/gostd/net/http/cookiejar/punycode.go.html#6062904">delta</a></span><span class="op" id="6063165">+</span><span class="ident" id="6063166"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061031">skew</a></span><span class="op" id="6063170">)</span><br>
<span class="lineno"></span><span class="op" id="6063172">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6063175">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6063252">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6063301">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="6063355">const</span>&nbsp;<span class="ident" id="6063361">acePrefix</span>&nbsp;<span class="op" id="6063371">=</span>&nbsp;<span class="string" id="6063373">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6063381">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="6063458">//&nbsp;toASCII(&#34;bücher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6063528">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="6063562">func</span>&nbsp;<span class="ident" id="6063567">toASCII</span><span class="op" id="6063574">(</span><span class="ident" id="6063575">s</span>&nbsp;<span class="builtintype" id="6063577">string</span><span class="op" id="6063583">)</span>&nbsp;<span class="op" id="6063585">(</span><span class="builtintype" id="6063586">string</span><span class="op" id="6063592">,</span>&nbsp;<span class="builtintype" id="6063594">error</span><span class="op" id="6063599">)</span>&nbsp;<span class="op" id="6063601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063604">if</span>&nbsp;<span class="ident" id="6063607"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063875">ascii</a></span><span class="op" id="6063612">(</span><span class="ident" id="6063613"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063575">s</a></span><span class="op" id="6063614">)</span>&nbsp;<span class="op" id="6063616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063620">return</span>&nbsp;<span class="ident" id="6063627"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063575">s</a></span><span class="op" id="6063628">,</span>&nbsp;<span class="builtintype" id="6063630">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063638">labels</span>&nbsp;<span class="op" id="6063645">:=</span>&nbsp;<span class="ident" id="6063648"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060709">strings</a></span><span class="op" id="6063655">.</span><span class="ident" id="6063656"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="6063661">(</span><span class="ident" id="6063662"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063575">s</a></span><span class="op" id="6063663">,</span>&nbsp;<span class="string" id="6063665">&#34;.&#34;</span><span class="op" id="6063668">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063671">for</span>&nbsp;<span class="ident" id="6063675">i</span><span class="op" id="6063676">,</span>&nbsp;<span class="ident" id="6063678">label</span>&nbsp;<span class="op" id="6063684">:=</span>&nbsp;<span class="keyword" id="6063687">range</span>&nbsp;<span class="ident" id="6063693"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063638">labels</a></span>&nbsp;<span class="op" id="6063700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063704">if</span>&nbsp;<span class="op" id="6063707">!</span><span class="ident" id="6063708"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063875">ascii</a></span><span class="op" id="6063713">(</span><span class="ident" id="6063714"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063678">label</a></span><span class="op" id="6063719">)</span>&nbsp;<span class="op" id="6063721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063726">a</span><span class="op" id="6063727">,</span>&nbsp;<span class="ident" id="6063729">err</span>&nbsp;<span class="op" id="6063733">:=</span>&nbsp;<span class="ident" id="6063736"><a href="/gostd/net/http/cookiejar/punycode.go.html#6061357">encode</a></span><span class="op" id="6063742">(</span><span class="ident" id="6063743"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063361">acePrefix</a></span><span class="op" id="6063752">,</span>&nbsp;<span class="ident" id="6063754"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063678">label</a></span><span class="op" id="6063759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063764">if</span>&nbsp;<span class="ident" id="6063767"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063729">err</a></span>&nbsp;<span class="op" id="6063771">!=</span>&nbsp;<span class="builtintype" id="6063774">nil</span>&nbsp;<span class="op" id="6063778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063784">return</span>&nbsp;<span class="string" id="6063791">&#34;&#34;</span><span class="op" id="6063793">,</span>&nbsp;<span class="ident" id="6063795"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063729">err</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063807"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063638">labels</a></span><span class="op" id="6063813">[</span><span class="ident" id="6063814"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063675">i</a></span><span class="op" id="6063815">]</span>&nbsp;<span class="op" id="6063817">=</span>&nbsp;<span class="ident" id="6063819"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063726">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063829">return</span>&nbsp;<span class="ident" id="6063836"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060709">strings</a></span><span class="op" id="6063843">.</span><span class="ident" id="6063844"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="6063848">(</span><span class="ident" id="6063849"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063638">labels</a></span><span class="op" id="6063855">,</span>&nbsp;<span class="string" id="6063857">&#34;.&#34;</span><span class="op" id="6063860">)</span><span class="op" id="6063861">,</span>&nbsp;<span class="builtintype" id="6063863">nil</span><br>
<span class="lineno">150</span><span class="op" id="6063867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6063870">func</span>&nbsp;<span class="ident" id="6063875">ascii</span><span class="op" id="6063880">(</span><span class="ident" id="6063881">s</span>&nbsp;<span class="builtintype" id="6063883">string</span><span class="op" id="6063889">)</span>&nbsp;<span class="builtintype" id="6063891">bool</span>&nbsp;<span class="op" id="6063896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063899">for</span>&nbsp;<span class="ident" id="6063903">i</span>&nbsp;<span class="op" id="6063905">:=</span>&nbsp;<span class="num" id="6063908">0</span><span class="op" id="6063909">;</span>&nbsp;<span class="ident" id="6063911"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063903">i</a></span>&nbsp;<span class="op" id="6063913">&lt;</span>&nbsp;<span class="builtinfunc" id="6063915">len</span><span class="op" id="6063918">(</span><span class="ident" id="6063919"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063881">s</a></span><span class="op" id="6063920">)</span><span class="op" id="6063921">;</span>&nbsp;<span class="ident" id="6063923"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063903">i</a></span><span class="op" id="6063924">++</span>&nbsp;<span class="op" id="6063927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063931">if</span>&nbsp;<span class="ident" id="6063934"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063881">s</a></span><span class="op" id="6063935">[</span><span class="ident" id="6063936"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063903">i</a></span><span class="op" id="6063937">]</span>&nbsp;<span class="op" id="6063939">&gt;=</span>&nbsp;<span class="ident" id="6063942"><a href="/gostd/net/http/cookiejar/punycode.go.html#6060720">utf8</a></span><span class="op" id="6063946">.</span><span class="ident" id="6063947"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="6063956">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063961">return</span>&nbsp;<span class="builtintype" id="6063968">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6063979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6063982">return</span>&nbsp;<span class="builtintype" id="6063989">true</span><br>
<span class="lineno"></span><span class="op" id="6063994">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
