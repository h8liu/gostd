<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/httputil</h2>
<ul>
<li><a href="/gostd/net/http/httputil/dump.go.html">dump.go</a></li>
<li><a href="/gostd/net/http/httputil/dump_test.go.html" class="current">dump_test.go</a></li>
<li><a href="/gostd/net/http/httputil/httputil.go.html">httputil.go</a></li>
<li><a href="/gostd/net/http/httputil/persist.go.html">persist.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy.go.html">reverseproxy.go</a></li>
<li><a href="/gostd/net/http/httputil/reverseproxy_test.go.html">reverseproxy_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7325621">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7325676">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7325730">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7325781">package</span>&nbsp;<span class="ident" id="7325789">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7325799">import</span>&nbsp;<span class="op" id="7325806">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325809">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325818">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325825">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325831">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325844">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325856">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325867">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325878">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7325889">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7325899">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7325902">type</span>&nbsp;<span class="ident" id="7325907">dumpTest</span>&nbsp;<span class="keyword" id="7325916">struct</span>&nbsp;<span class="op" id="7325923">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325926">Req</span>&nbsp;&nbsp;<span class="ident" id="7325931">http</span><span class="op" id="7325935">.</span><span class="ident" id="7325936">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325945">Body</span>&nbsp;<span class="keyword" id="7325950">interface</span><span class="op" id="7325959">{</span><span class="op" id="7325960">}</span>&nbsp;<span class="comment" id="7325962">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326028">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7326040">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326048">WantDumpOut</span>&nbsp;<span class="builtintype" id="7326060">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326068">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7326080">bool</span>&nbsp;<span class="comment" id="7326085">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="7326133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7326136">var</span>&nbsp;<span class="ident" id="7326140">dumpTests</span>&nbsp;<span class="op" id="7326150">=</span>&nbsp;<span class="op" id="7326152">[</span><span class="op" id="7326153">]</span><span class="ident" id="7326154">dumpTest</span><span class="op" id="7326162">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7326166">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326222">Req</span><span class="op" id="7326225">:</span>&nbsp;<span class="ident" id="7326227">http</span><span class="op" id="7326231">.</span><span class="ident" id="7326232">Request</span><span class="op" id="7326239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326244">Method</span><span class="op" id="7326250">:</span>&nbsp;<span class="string" id="7326252">&#34;GET&#34;</span><span class="op" id="7326257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326262">URL</span><span class="op" id="7326265">:</span>&nbsp;<span class="op" id="7326267">&amp;</span><span class="ident" id="7326268">url</span><span class="op" id="7326271">.</span><span class="ident" id="7326272">URL</span><span class="op" id="7326275">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326281">Scheme</span><span class="op" id="7326287">:</span>&nbsp;<span class="string" id="7326289">&#34;http&#34;</span><span class="op" id="7326295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326301">Host</span><span class="op" id="7326305">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7326309">&#34;www.google.com&#34;</span><span class="op" id="7326325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326331">Path</span><span class="op" id="7326335">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7326339">&#34;/search&#34;</span><span class="op" id="7326348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326353">}</span><span class="op" id="7326354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326359">ProtoMajor</span><span class="op" id="7326369">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7326377">1</span><span class="op" id="7326378">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326383">ProtoMinor</span><span class="op" id="7326393">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7326401">1</span><span class="op" id="7326402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326407">TransferEncoding</span><span class="op" id="7326423">:</span>&nbsp;<span class="op" id="7326425">[</span><span class="op" id="7326426">]</span><span class="builtintype" id="7326427">string</span><span class="op" id="7326433">{</span><span class="string" id="7326434">&#34;chunked&#34;</span><span class="op" id="7326443">}</span><span class="op" id="7326444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326448">}</span><span class="op" id="7326449">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326454">Body</span><span class="op" id="7326458">:</span>&nbsp;<span class="op" id="7326460">[</span><span class="op" id="7326461">]</span><span class="builtintype" id="7326462">byte</span><span class="op" id="7326466">(</span><span class="string" id="7326467">&#34;abcdef&#34;</span><span class="op" id="7326475">)</span><span class="op" id="7326476">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326481">WantDump</span><span class="op" id="7326489">:</span>&nbsp;<span class="string" id="7326491">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7326518">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7326523">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7326550">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7326555">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7326592">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326597">chunk</span><span class="op" id="7326602">(</span><span class="string" id="7326603">&#34;abcdef&#34;</span><span class="op" id="7326611">)</span>&nbsp;<span class="op" id="7326613">+</span>&nbsp;<span class="ident" id="7326615">chunk</span><span class="op" id="7326620">(</span><span class="string" id="7326621">&#34;&#34;</span><span class="op" id="7326623">)</span><span class="op" id="7326624">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326627">}</span><span class="op" id="7326628">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7326632">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7326715">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326749">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326753">Req</span><span class="op" id="7326756">:</span>&nbsp;<span class="ident" id="7326758">http</span><span class="op" id="7326762">.</span><span class="ident" id="7326763">Request</span><span class="op" id="7326770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326775">Method</span><span class="op" id="7326781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7326787">&#34;GET&#34;</span><span class="op" id="7326792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326797">URL</span><span class="op" id="7326800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7326809">mustParseURL</span><span class="op" id="7326821">(</span><span class="string" id="7326822">&#34;/foo&#34;</span><span class="op" id="7326828">)</span><span class="op" id="7326829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326834">ProtoMajor</span><span class="op" id="7326844">:</span>&nbsp;<span class="num" id="7326846">1</span><span class="op" id="7326847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326852">ProtoMinor</span><span class="op" id="7326862">:</span>&nbsp;<span class="num" id="7326864">0</span><span class="op" id="7326865">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326870">Header</span><span class="op" id="7326876">:</span>&nbsp;<span class="ident" id="7326878">http</span><span class="op" id="7326882">.</span><span class="ident" id="7326883">Header</span><span class="op" id="7326889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7326895">&#34;X-Foo&#34;</span><span class="op" id="7326902">:</span>&nbsp;<span class="op" id="7326904">[</span><span class="op" id="7326905">]</span><span class="builtintype" id="7326906">string</span><span class="op" id="7326912">{</span><span class="string" id="7326913">&#34;X-Bar&#34;</span><span class="op" id="7326920">}</span><span class="op" id="7326921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326926">}</span><span class="op" id="7326927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326931">}</span><span class="op" id="7326932">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7326937">WantDump</span><span class="op" id="7326945">:</span>&nbsp;<span class="string" id="7326947">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="7326971">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7326976">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7326998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327001">}</span><span class="op" id="7327002">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327006">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327010">Req</span><span class="op" id="7327013">:</span>&nbsp;<span class="op" id="7327015">*</span><span class="ident" id="7327016">mustNewRequest</span><span class="op" id="7327030">(</span><span class="string" id="7327031">&#34;GET&#34;</span><span class="op" id="7327036">,</span>&nbsp;<span class="string" id="7327038">&#34;http://example.com/foo&#34;</span><span class="op" id="7327062">,</span>&nbsp;<span class="ident" id="7327064">nil</span><span class="op" id="7327067">)</span><span class="op" id="7327068">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327073">WantDumpOut</span><span class="op" id="7327084">:</span>&nbsp;<span class="string" id="7327086">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7327110">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327115">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7327139">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327144">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7327182">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327187">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7327218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327221">}</span><span class="op" id="7327222">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7327226">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7327290">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7327347">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327365">Req</span><span class="op" id="7327368">:</span>&nbsp;<span class="op" id="7327370">*</span><span class="ident" id="7327371">mustNewRequest</span><span class="op" id="7327385">(</span><span class="string" id="7327386">&#34;GET&#34;</span><span class="op" id="7327391">,</span>&nbsp;<span class="string" id="7327393">&#34;https://example.com/foo&#34;</span><span class="op" id="7327418">,</span>&nbsp;<span class="ident" id="7327420">nil</span><span class="op" id="7327423">)</span><span class="op" id="7327424">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327429">WantDumpOut</span><span class="op" id="7327440">:</span>&nbsp;<span class="string" id="7327442">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7327466">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327471">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7327495">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327500">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7327538">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327543">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7327574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327577">}</span><span class="op" id="7327578">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7327582">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327640">Req</span><span class="op" id="7327643">:</span>&nbsp;<span class="ident" id="7327645">http</span><span class="op" id="7327649">.</span><span class="ident" id="7327650">Request</span><span class="op" id="7327657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327662">Method</span><span class="op" id="7327668">:</span>&nbsp;<span class="string" id="7327670">&#34;POST&#34;</span><span class="op" id="7327676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327681">URL</span><span class="op" id="7327684">:</span>&nbsp;<span class="op" id="7327686">&amp;</span><span class="ident" id="7327687">url</span><span class="op" id="7327690">.</span><span class="ident" id="7327691">URL</span><span class="op" id="7327694">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327700">Scheme</span><span class="op" id="7327706">:</span>&nbsp;<span class="string" id="7327708">&#34;http&#34;</span><span class="op" id="7327714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327720">Host</span><span class="op" id="7327724">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7327728">&#34;post.tld&#34;</span><span class="op" id="7327738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327744">Path</span><span class="op" id="7327748">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7327752">&#34;/&#34;</span><span class="op" id="7327755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327760">}</span><span class="op" id="7327761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327766">ContentLength</span><span class="op" id="7327779">:</span>&nbsp;<span class="num" id="7327781">6</span><span class="op" id="7327782">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327787">ProtoMajor</span><span class="op" id="7327797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7327802">1</span><span class="op" id="7327803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327808">ProtoMinor</span><span class="op" id="7327818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7327823">1</span><span class="op" id="7327824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327828">}</span><span class="op" id="7327829">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327834">Body</span><span class="op" id="7327838">:</span>&nbsp;<span class="op" id="7327840">[</span><span class="op" id="7327841">]</span><span class="builtintype" id="7327842">byte</span><span class="op" id="7327846">(</span><span class="string" id="7327847">&#34;abcdef&#34;</span><span class="op" id="7327855">)</span><span class="op" id="7327856">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327861">WantDumpOut</span><span class="op" id="7327872">:</span>&nbsp;<span class="string" id="7327874">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7327896">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327901">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7327922">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327927">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7327965">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327970">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7327994">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7327999">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7328030">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328035">NoBody</span><span class="op" id="7328041">:</span>&nbsp;<span class="builtintype" id="7328043">true</span><span class="op" id="7328047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328050">}</span><span class="op" id="7328051">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7328055">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328110">Req</span><span class="op" id="7328113">:</span>&nbsp;<span class="ident" id="7328115">http</span><span class="op" id="7328119">.</span><span class="ident" id="7328120">Request</span><span class="op" id="7328127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328132">Method</span><span class="op" id="7328138">:</span>&nbsp;<span class="string" id="7328140">&#34;POST&#34;</span><span class="op" id="7328146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328151">URL</span><span class="op" id="7328154">:</span>&nbsp;<span class="op" id="7328156">&amp;</span><span class="ident" id="7328157">url</span><span class="op" id="7328160">.</span><span class="ident" id="7328161">URL</span><span class="op" id="7328164">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328170">Scheme</span><span class="op" id="7328176">:</span>&nbsp;<span class="string" id="7328178">&#34;http&#34;</span><span class="op" id="7328184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328190">Host</span><span class="op" id="7328194">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7328198">&#34;post.tld&#34;</span><span class="op" id="7328208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328214">Path</span><span class="op" id="7328218">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7328222">&#34;/&#34;</span><span class="op" id="7328225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328230">}</span><span class="op" id="7328231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328236">ContentLength</span><span class="op" id="7328249">:</span>&nbsp;<span class="num" id="7328251">8193</span><span class="op" id="7328255">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328260">ProtoMajor</span><span class="op" id="7328270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7328275">1</span><span class="op" id="7328276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328281">ProtoMinor</span><span class="op" id="7328291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7328296">1</span><span class="op" id="7328297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328301">}</span><span class="op" id="7328302">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328307">Body</span><span class="op" id="7328311">:</span>&nbsp;<span class="ident" id="7328313">bytes</span><span class="op" id="7328318">.</span><span class="ident" id="7328319">Repeat</span><span class="op" id="7328325">(</span><span class="op" id="7328326">[</span><span class="op" id="7328327">]</span><span class="builtintype" id="7328328">byte</span><span class="op" id="7328332">(</span><span class="string" id="7328333">&#34;a&#34;</span><span class="op" id="7328336">)</span><span class="op" id="7328337">,</span>&nbsp;<span class="num" id="7328339">8193</span><span class="op" id="7328343">)</span><span class="op" id="7328344">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328349">WantDumpOut</span><span class="op" id="7328360">:</span>&nbsp;<span class="string" id="7328362">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7328384">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7328389">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7328410">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7328415">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7328453">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7328458">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="7328485">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7328490">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7328522">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328527">strings</span><span class="op" id="7328534">.</span><span class="ident" id="7328535">Repeat</span><span class="op" id="7328541">(</span><span class="string" id="7328542">&#34;a&#34;</span><span class="op" id="7328545">,</span>&nbsp;<span class="num" id="7328547">8193</span><span class="op" id="7328551">)</span><span class="op" id="7328552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328555">}</span><span class="op" id="7328556">,</span><br>
<span class="lineno"></span><span class="op" id="7328558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7328561">func</span>&nbsp;<span class="ident" id="7328566">TestDumpRequest</span><span class="op" id="7328581">(</span><span class="ident" id="7328582">t</span>&nbsp;<span class="op" id="7328584">*</span><span class="ident" id="7328585">testing</span><span class="op" id="7328592">.</span><span class="ident" id="7328593">T</span><span class="op" id="7328594">)</span>&nbsp;<span class="op" id="7328596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328599">numg0</span>&nbsp;<span class="op" id="7328605">:=</span>&nbsp;<span class="ident" id="7328608">runtime</span><span class="op" id="7328615">.</span><span class="ident" id="7328616">NumGoroutine</span><span class="op" id="7328628">(</span><span class="op" id="7328629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328632">for</span>&nbsp;<span class="ident" id="7328636">i</span><span class="op" id="7328637">,</span>&nbsp;<span class="ident" id="7328639">tt</span>&nbsp;<span class="op" id="7328642">:=</span>&nbsp;<span class="keyword" id="7328645">range</span>&nbsp;<span class="ident" id="7328651">dumpTests</span>&nbsp;<span class="op" id="7328661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328665">setBody</span>&nbsp;<span class="op" id="7328673">:=</span>&nbsp;<span class="keyword" id="7328676">func</span><span class="op" id="7328680">(</span><span class="op" id="7328681">)</span>&nbsp;<span class="op" id="7328683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328688">if</span>&nbsp;<span class="ident" id="7328691">tt</span><span class="op" id="7328693">.</span><span class="ident" id="7328694">Body</span>&nbsp;<span class="op" id="7328699">==</span>&nbsp;<span class="ident" id="7328702">nil</span>&nbsp;<span class="op" id="7328706">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328712">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328727">switch</span>&nbsp;<span class="ident" id="7328734">b</span>&nbsp;<span class="op" id="7328736">:=</span>&nbsp;<span class="ident" id="7328739">tt</span><span class="op" id="7328741">.</span><span class="ident" id="7328742">Body</span><span class="op" id="7328746">.</span><span class="op" id="7328747">(</span><span class="keyword" id="7328748">type</span><span class="op" id="7328752">)</span>&nbsp;<span class="op" id="7328754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328759">case</span>&nbsp;<span class="op" id="7328764">[</span><span class="op" id="7328765">]</span><span class="builtintype" id="7328766">byte</span><span class="op" id="7328770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328776">tt</span><span class="op" id="7328778">.</span><span class="ident" id="7328779">Req</span><span class="op" id="7328782">.</span><span class="ident" id="7328783">Body</span>&nbsp;<span class="op" id="7328788">=</span>&nbsp;<span class="ident" id="7328790">ioutil</span><span class="op" id="7328796">.</span><span class="ident" id="7328797">NopCloser</span><span class="op" id="7328806">(</span><span class="ident" id="7328807">bytes</span><span class="op" id="7328812">.</span><span class="ident" id="7328813">NewReader</span><span class="op" id="7328822">(</span><span class="ident" id="7328823">b</span><span class="op" id="7328824">)</span><span class="op" id="7328825">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328830">case</span>&nbsp;<span class="keyword" id="7328835">func</span><span class="op" id="7328839">(</span><span class="op" id="7328840">)</span>&nbsp;<span class="ident" id="7328842">io</span><span class="op" id="7328844">.</span><span class="ident" id="7328845">ReadCloser</span><span class="op" id="7328855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328861">tt</span><span class="op" id="7328863">.</span><span class="ident" id="7328864">Req</span><span class="op" id="7328867">.</span><span class="ident" id="7328868">Body</span>&nbsp;<span class="op" id="7328873">=</span>&nbsp;<span class="ident" id="7328875">b</span><span class="op" id="7328876">(</span><span class="op" id="7328877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328882">default</span><span class="op" id="7328889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328895">t</span><span class="op" id="7328896">.</span><span class="ident" id="7328897">Fatalf</span><span class="op" id="7328903">(</span><span class="string" id="7328904">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="7328937">,</span>&nbsp;<span class="ident" id="7328939">i</span><span class="op" id="7328940">,</span>&nbsp;<span class="ident" id="7328942">tt</span><span class="op" id="7328944">.</span><span class="ident" id="7328945">Body</span><span class="op" id="7328949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328954">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328962">setBody</span><span class="op" id="7328969">(</span><span class="op" id="7328970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328974">if</span>&nbsp;<span class="ident" id="7328977">tt</span><span class="op" id="7328979">.</span><span class="ident" id="7328980">Req</span><span class="op" id="7328983">.</span><span class="ident" id="7328984">Header</span>&nbsp;<span class="op" id="7328991">==</span>&nbsp;<span class="ident" id="7328994">nil</span>&nbsp;<span class="op" id="7328998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329003">tt</span><span class="op" id="7329005">.</span><span class="ident" id="7329006">Req</span><span class="op" id="7329009">.</span><span class="ident" id="7329010">Header</span>&nbsp;<span class="op" id="7329017">=</span>&nbsp;<span class="builtinfunc" id="7329019">make</span><span class="op" id="7329023">(</span><span class="ident" id="7329024">http</span><span class="op" id="7329028">.</span><span class="ident" id="7329029">Header</span><span class="op" id="7329035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329039">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329044">if</span>&nbsp;<span class="ident" id="7329047">tt</span><span class="op" id="7329049">.</span><span class="ident" id="7329050">WantDump</span>&nbsp;<span class="op" id="7329059">!=</span>&nbsp;<span class="string" id="7329062">&#34;&#34;</span>&nbsp;<span class="op" id="7329065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329070">setBody</span><span class="op" id="7329077">(</span><span class="op" id="7329078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329083">dump</span><span class="op" id="7329087">,</span>&nbsp;<span class="ident" id="7329089">err</span>&nbsp;<span class="op" id="7329093">:=</span>&nbsp;<span class="ident" id="7329096">DumpRequest</span><span class="op" id="7329107">(</span><span class="op" id="7329108">&amp;</span><span class="ident" id="7329109">tt</span><span class="op" id="7329111">.</span><span class="ident" id="7329112">Req</span><span class="op" id="7329115">,</span>&nbsp;<span class="op" id="7329117">!</span><span class="ident" id="7329118">tt</span><span class="op" id="7329120">.</span><span class="ident" id="7329121">NoBody</span><span class="op" id="7329127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329132">if</span>&nbsp;<span class="ident" id="7329135">err</span>&nbsp;<span class="op" id="7329139">!=</span>&nbsp;<span class="ident" id="7329142">nil</span>&nbsp;<span class="op" id="7329146">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329152">t</span><span class="op" id="7329153">.</span><span class="ident" id="7329154">Errorf</span><span class="op" id="7329160">(</span><span class="string" id="7329161">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7329182">,</span>&nbsp;<span class="ident" id="7329184">i</span><span class="op" id="7329185">,</span>&nbsp;<span class="ident" id="7329187">err</span><span class="op" id="7329190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329196">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329213">if</span>&nbsp;<span class="builtintype" id="7329216">string</span><span class="op" id="7329222">(</span><span class="ident" id="7329223">dump</span><span class="op" id="7329227">)</span>&nbsp;<span class="op" id="7329229">!=</span>&nbsp;<span class="ident" id="7329232">tt</span><span class="op" id="7329234">.</span><span class="ident" id="7329235">WantDump</span>&nbsp;<span class="op" id="7329244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329250">t</span><span class="op" id="7329251">.</span><span class="ident" id="7329252">Errorf</span><span class="op" id="7329258">(</span><span class="string" id="7329259">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7329303">,</span>&nbsp;<span class="ident" id="7329305">i</span><span class="op" id="7329306">,</span>&nbsp;<span class="ident" id="7329308">tt</span><span class="op" id="7329310">.</span><span class="ident" id="7329311">WantDump</span><span class="op" id="7329319">,</span>&nbsp;<span class="builtintype" id="7329321">string</span><span class="op" id="7329327">(</span><span class="ident" id="7329328">dump</span><span class="op" id="7329332">)</span><span class="op" id="7329333">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329339">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329360">if</span>&nbsp;<span class="ident" id="7329363">tt</span><span class="op" id="7329365">.</span><span class="ident" id="7329366">WantDumpOut</span>&nbsp;<span class="op" id="7329378">!=</span>&nbsp;<span class="string" id="7329381">&#34;&#34;</span>&nbsp;<span class="op" id="7329384">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329389">setBody</span><span class="op" id="7329396">(</span><span class="op" id="7329397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329402">dump</span><span class="op" id="7329406">,</span>&nbsp;<span class="ident" id="7329408">err</span>&nbsp;<span class="op" id="7329412">:=</span>&nbsp;<span class="ident" id="7329415">DumpRequestOut</span><span class="op" id="7329429">(</span><span class="op" id="7329430">&amp;</span><span class="ident" id="7329431">tt</span><span class="op" id="7329433">.</span><span class="ident" id="7329434">Req</span><span class="op" id="7329437">,</span>&nbsp;<span class="op" id="7329439">!</span><span class="ident" id="7329440">tt</span><span class="op" id="7329442">.</span><span class="ident" id="7329443">NoBody</span><span class="op" id="7329449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329454">if</span>&nbsp;<span class="ident" id="7329457">err</span>&nbsp;<span class="op" id="7329461">!=</span>&nbsp;<span class="ident" id="7329464">nil</span>&nbsp;<span class="op" id="7329468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329474">t</span><span class="op" id="7329475">.</span><span class="ident" id="7329476">Errorf</span><span class="op" id="7329482">(</span><span class="string" id="7329483">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7329507">,</span>&nbsp;<span class="ident" id="7329509">i</span><span class="op" id="7329510">,</span>&nbsp;<span class="ident" id="7329512">err</span><span class="op" id="7329515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329521">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329538">if</span>&nbsp;<span class="builtintype" id="7329541">string</span><span class="op" id="7329547">(</span><span class="ident" id="7329548">dump</span><span class="op" id="7329552">)</span>&nbsp;<span class="op" id="7329554">!=</span>&nbsp;<span class="ident" id="7329557">tt</span><span class="op" id="7329559">.</span><span class="ident" id="7329560">WantDumpOut</span>&nbsp;<span class="op" id="7329572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329578">t</span><span class="op" id="7329579">.</span><span class="ident" id="7329580">Errorf</span><span class="op" id="7329586">(</span><span class="string" id="7329587">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7329634">,</span>&nbsp;<span class="ident" id="7329636">i</span><span class="op" id="7329637">,</span>&nbsp;<span class="ident" id="7329639">tt</span><span class="op" id="7329641">.</span><span class="ident" id="7329642">WantDumpOut</span><span class="op" id="7329653">,</span>&nbsp;<span class="builtintype" id="7329655">string</span><span class="op" id="7329661">(</span><span class="ident" id="7329662">dump</span><span class="op" id="7329666">)</span><span class="op" id="7329667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329673">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329685">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329695">if</span>&nbsp;<span class="ident" id="7329698">dg</span>&nbsp;<span class="op" id="7329701">:=</span>&nbsp;<span class="ident" id="7329704">runtime</span><span class="op" id="7329711">.</span><span class="ident" id="7329712">NumGoroutine</span><span class="op" id="7329724">(</span><span class="op" id="7329725">)</span>&nbsp;<span class="op" id="7329727">-</span>&nbsp;<span class="ident" id="7329729">numg0</span><span class="op" id="7329734">;</span>&nbsp;<span class="ident" id="7329736">dg</span>&nbsp;<span class="op" id="7329739">&gt;</span>&nbsp;<span class="num" id="7329741">4</span>&nbsp;<span class="op" id="7329743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329747">buf</span>&nbsp;<span class="op" id="7329751">:=</span>&nbsp;<span class="builtinfunc" id="7329754">make</span><span class="op" id="7329758">(</span><span class="op" id="7329759">[</span><span class="op" id="7329760">]</span><span class="builtintype" id="7329761">byte</span><span class="op" id="7329765">,</span>&nbsp;<span class="num" id="7329767">4096</span><span class="op" id="7329771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329775">buf</span>&nbsp;<span class="op" id="7329779">=</span>&nbsp;<span class="ident" id="7329781">buf</span><span class="op" id="7329784">[</span><span class="op" id="7329785">:</span><span class="ident" id="7329786">runtime</span><span class="op" id="7329793">.</span><span class="ident" id="7329794">Stack</span><span class="op" id="7329799">(</span><span class="ident" id="7329800">buf</span><span class="op" id="7329803">,</span>&nbsp;<span class="builtintype" id="7329805">true</span><span class="op" id="7329809">)</span><span class="op" id="7329810">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329814">t</span><span class="op" id="7329815">.</span><span class="ident" id="7329816">Errorf</span><span class="op" id="7329822">(</span><span class="string" id="7329823">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="7329880">,</span>&nbsp;<span class="ident" id="7329882">dg</span><span class="op" id="7329884">,</span>&nbsp;<span class="ident" id="7329886">buf</span><span class="op" id="7329889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329892">}</span><br>
<span class="lineno"></span><span class="op" id="7329894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7329897">func</span>&nbsp;<span class="ident" id="7329902">chunk</span><span class="op" id="7329907">(</span><span class="ident" id="7329908">s</span>&nbsp;<span class="builtintype" id="7329910">string</span><span class="op" id="7329916">)</span>&nbsp;<span class="builtintype" id="7329918">string</span>&nbsp;<span class="op" id="7329925">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329928">return</span>&nbsp;<span class="ident" id="7329935">fmt</span><span class="op" id="7329938">.</span><span class="ident" id="7329939">Sprintf</span><span class="op" id="7329946">(</span><span class="string" id="7329947">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7329961">,</span>&nbsp;<span class="builtinfunc" id="7329963">len</span><span class="op" id="7329966">(</span><span class="ident" id="7329967">s</span><span class="op" id="7329968">)</span><span class="op" id="7329969">,</span>&nbsp;<span class="ident" id="7329971">s</span><span class="op" id="7329972">)</span><br>
<span class="lineno"></span><span class="op" id="7329974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7329977">func</span>&nbsp;<span class="ident" id="7329982">mustParseURL</span><span class="op" id="7329994">(</span><span class="ident" id="7329995">s</span>&nbsp;<span class="builtintype" id="7329997">string</span><span class="op" id="7330003">)</span>&nbsp;<span class="op" id="7330005">*</span><span class="ident" id="7330006">url</span><span class="op" id="7330009">.</span><span class="ident" id="7330010">URL</span>&nbsp;<span class="op" id="7330014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330017">u</span><span class="op" id="7330018">,</span>&nbsp;<span class="ident" id="7330020">err</span>&nbsp;<span class="op" id="7330024">:=</span>&nbsp;<span class="ident" id="7330027">url</span><span class="op" id="7330030">.</span><span class="ident" id="7330031">Parse</span><span class="op" id="7330036">(</span><span class="ident" id="7330037">s</span><span class="op" id="7330038">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330041">if</span>&nbsp;<span class="ident" id="7330044">err</span>&nbsp;<span class="op" id="7330048">!=</span>&nbsp;<span class="ident" id="7330051">nil</span>&nbsp;<span class="op" id="7330055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7330059">panic</span><span class="op" id="7330064">(</span><span class="ident" id="7330065">fmt</span><span class="op" id="7330068">.</span><span class="ident" id="7330069">Sprintf</span><span class="op" id="7330076">(</span><span class="string" id="7330077">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7330103">,</span>&nbsp;<span class="ident" id="7330105">s</span><span class="op" id="7330106">,</span>&nbsp;<span class="ident" id="7330108">err</span><span class="op" id="7330111">)</span><span class="op" id="7330112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330118">return</span>&nbsp;<span class="ident" id="7330125">u</span><br>
<span class="lineno"></span><span class="op" id="7330127">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7330130">func</span>&nbsp;<span class="ident" id="7330135">mustNewRequest</span><span class="op" id="7330149">(</span><span class="ident" id="7330150">method</span><span class="op" id="7330156">,</span>&nbsp;<span class="ident" id="7330158">url</span>&nbsp;<span class="builtintype" id="7330162">string</span><span class="op" id="7330168">,</span>&nbsp;<span class="ident" id="7330170">body</span>&nbsp;<span class="ident" id="7330175">io</span><span class="op" id="7330177">.</span><span class="ident" id="7330178">Reader</span><span class="op" id="7330184">)</span>&nbsp;<span class="op" id="7330186">*</span><span class="ident" id="7330187">http</span><span class="op" id="7330191">.</span><span class="ident" id="7330192">Request</span>&nbsp;<span class="op" id="7330200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330203">req</span><span class="op" id="7330206">,</span>&nbsp;<span class="ident" id="7330208">err</span>&nbsp;<span class="op" id="7330212">:=</span>&nbsp;<span class="ident" id="7330215">http</span><span class="op" id="7330219">.</span><span class="ident" id="7330220">NewRequest</span><span class="op" id="7330230">(</span><span class="ident" id="7330231">method</span><span class="op" id="7330237">,</span>&nbsp;<span class="ident" id="7330239">url</span><span class="op" id="7330242">,</span>&nbsp;<span class="ident" id="7330244">body</span><span class="op" id="7330248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330251">if</span>&nbsp;<span class="ident" id="7330254">err</span>&nbsp;<span class="op" id="7330258">!=</span>&nbsp;<span class="ident" id="7330261">nil</span>&nbsp;<span class="op" id="7330265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7330269">panic</span><span class="op" id="7330274">(</span><span class="ident" id="7330275">fmt</span><span class="op" id="7330278">.</span><span class="ident" id="7330279">Sprintf</span><span class="op" id="7330286">(</span><span class="string" id="7330287">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7330320">,</span>&nbsp;<span class="ident" id="7330322">method</span><span class="op" id="7330328">,</span>&nbsp;<span class="ident" id="7330330">url</span><span class="op" id="7330333">,</span>&nbsp;<span class="ident" id="7330335">body</span><span class="op" id="7330339">,</span>&nbsp;<span class="ident" id="7330341">err</span><span class="op" id="7330344">)</span><span class="op" id="7330345">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330351">return</span>&nbsp;<span class="ident" id="7330358">req</span><br>
<span class="lineno"></span><span class="op" id="7330362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7330365">var</span>&nbsp;<span class="ident" id="7330369">dumpResTests</span>&nbsp;<span class="op" id="7330382">=</span>&nbsp;<span class="op" id="7330384">[</span><span class="op" id="7330385">]</span><span class="keyword" id="7330386">struct</span>&nbsp;<span class="op" id="7330393">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330396">res</span>&nbsp;&nbsp;<span class="op" id="7330401">*</span><span class="ident" id="7330402">http</span><span class="op" id="7330406">.</span><span class="ident" id="7330407">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330417">body</span>&nbsp;<span class="builtintype" id="7330422">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330428">want</span>&nbsp;<span class="builtintype" id="7330433">string</span><br>
<span class="lineno"></span><span class="op" id="7330440">}</span><span class="op" id="7330441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330444">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330448">res</span><span class="op" id="7330451">:</span>&nbsp;<span class="op" id="7330453">&amp;</span><span class="ident" id="7330454">http</span><span class="op" id="7330458">.</span><span class="ident" id="7330459">Response</span><span class="op" id="7330467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330472">Status</span><span class="op" id="7330478">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7330487">&#34;200&nbsp;OK&#34;</span><span class="op" id="7330495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330500">StatusCode</span><span class="op" id="7330510">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7330515">200</span><span class="op" id="7330518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330523">Proto</span><span class="op" id="7330528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7330538">&#34;HTTP/1.1&#34;</span><span class="op" id="7330548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330553">ProtoMajor</span><span class="op" id="7330563">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7330568">1</span><span class="op" id="7330569">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330574">ProtoMinor</span><span class="op" id="7330584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7330589">1</span><span class="op" id="7330590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330595">ContentLength</span><span class="op" id="7330608">:</span>&nbsp;<span class="num" id="7330610">50</span><span class="op" id="7330612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330617">Header</span><span class="op" id="7330623">:</span>&nbsp;<span class="ident" id="7330625">http</span><span class="op" id="7330629">.</span><span class="ident" id="7330630">Header</span><span class="op" id="7330636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330642">&#34;Foo&#34;</span><span class="op" id="7330647">:</span>&nbsp;<span class="op" id="7330649">[</span><span class="op" id="7330650">]</span><span class="builtintype" id="7330651">string</span><span class="op" id="7330657">{</span><span class="string" id="7330658">&#34;Bar&#34;</span><span class="op" id="7330663">}</span><span class="op" id="7330664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330669">}</span><span class="op" id="7330670">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330675">Body</span><span class="op" id="7330679">:</span>&nbsp;<span class="ident" id="7330681">ioutil</span><span class="op" id="7330687">.</span><span class="ident" id="7330688">NopCloser</span><span class="op" id="7330697">(</span><span class="ident" id="7330698">strings</span><span class="op" id="7330705">.</span><span class="ident" id="7330706">NewReader</span><span class="op" id="7330715">(</span><span class="string" id="7330716">&#34;foo&#34;</span><span class="op" id="7330721">)</span><span class="op" id="7330722">)</span><span class="op" id="7330723">,</span>&nbsp;<span class="comment" id="7330725">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330748">}</span><span class="op" id="7330749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330753">body</span><span class="op" id="7330757">:</span>&nbsp;<span class="builtintype" id="7330759">false</span><span class="op" id="7330764">,</span>&nbsp;<span class="comment" id="7330766">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330808">want</span><span class="op" id="7330812">:</span>&nbsp;<span class="string" id="7330814">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="7330859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330862">}</span><span class="op" id="7330863">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330871">res</span><span class="op" id="7330874">:</span>&nbsp;<span class="op" id="7330876">&amp;</span><span class="ident" id="7330877">http</span><span class="op" id="7330881">.</span><span class="ident" id="7330882">Response</span><span class="op" id="7330890">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330895">Status</span><span class="op" id="7330901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7330910">&#34;200&nbsp;OK&#34;</span><span class="op" id="7330918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330923">StatusCode</span><span class="op" id="7330933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7330938">200</span><span class="op" id="7330941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330946">Proto</span><span class="op" id="7330951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7330961">&#34;HTTP/1.1&#34;</span><span class="op" id="7330971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330976">ProtoMajor</span><span class="op" id="7330986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7330991">1</span><span class="op" id="7330992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330997">ProtoMinor</span><span class="op" id="7331007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7331012">1</span><span class="op" id="7331013">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331018">ContentLength</span><span class="op" id="7331031">:</span>&nbsp;<span class="num" id="7331033">3</span><span class="op" id="7331034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331039">Body</span><span class="op" id="7331043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7331054">ioutil</span><span class="op" id="7331060">.</span><span class="ident" id="7331061">NopCloser</span><span class="op" id="7331070">(</span><span class="ident" id="7331071">strings</span><span class="op" id="7331078">.</span><span class="ident" id="7331079">NewReader</span><span class="op" id="7331088">(</span><span class="string" id="7331089">&#34;foo&#34;</span><span class="op" id="7331094">)</span><span class="op" id="7331095">)</span><span class="op" id="7331096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331100">}</span><span class="op" id="7331101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331105">body</span><span class="op" id="7331109">:</span>&nbsp;<span class="builtintype" id="7331111">true</span><span class="op" id="7331115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331119">want</span><span class="op" id="7331123">:</span>&nbsp;<span class="string" id="7331125">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="7331165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331168">}</span><span class="op" id="7331169">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331177">res</span><span class="op" id="7331180">:</span>&nbsp;<span class="op" id="7331182">&amp;</span><span class="ident" id="7331183">http</span><span class="op" id="7331187">.</span><span class="ident" id="7331188">Response</span><span class="op" id="7331196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331201">Status</span><span class="op" id="7331207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7331219">&#34;200&nbsp;OK&#34;</span><span class="op" id="7331227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331232">StatusCode</span><span class="op" id="7331242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7331250">200</span><span class="op" id="7331253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331258">Proto</span><span class="op" id="7331263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7331276">&#34;HTTP/1.1&#34;</span><span class="op" id="7331286">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331291">ProtoMajor</span><span class="op" id="7331301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7331309">1</span><span class="op" id="7331310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331315">ProtoMinor</span><span class="op" id="7331325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7331333">1</span><span class="op" id="7331334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331339">ContentLength</span><span class="op" id="7331352">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7331357">-</span><span class="num" id="7331358">1</span><span class="op" id="7331359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331364">Body</span><span class="op" id="7331368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7331382">ioutil</span><span class="op" id="7331388">.</span><span class="ident" id="7331389">NopCloser</span><span class="op" id="7331398">(</span><span class="ident" id="7331399">strings</span><span class="op" id="7331406">.</span><span class="ident" id="7331407">NewReader</span><span class="op" id="7331416">(</span><span class="string" id="7331417">&#34;foo&#34;</span><span class="op" id="7331422">)</span><span class="op" id="7331423">)</span><span class="op" id="7331424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331429">TransferEncoding</span><span class="op" id="7331445">:</span>&nbsp;<span class="op" id="7331447">[</span><span class="op" id="7331448">]</span><span class="builtintype" id="7331449">string</span><span class="op" id="7331455">{</span><span class="string" id="7331456">&#34;chunked&#34;</span><span class="op" id="7331465">}</span><span class="op" id="7331466">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331470">}</span><span class="op" id="7331471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331475">body</span><span class="op" id="7331479">:</span>&nbsp;<span class="builtintype" id="7331481">true</span><span class="op" id="7331485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331489">want</span><span class="op" id="7331493">:</span>&nbsp;<span class="string" id="7331495">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="7331548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331551">}</span><span class="op" id="7331552">,</span><br>
<span class="lineno"></span><span class="op" id="7331554">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7331557">func</span>&nbsp;<span class="ident" id="7331562">TestDumpResponse</span><span class="op" id="7331578">(</span><span class="ident" id="7331579">t</span>&nbsp;<span class="op" id="7331581">*</span><span class="ident" id="7331582">testing</span><span class="op" id="7331589">.</span><span class="ident" id="7331590">T</span><span class="op" id="7331591">)</span>&nbsp;<span class="op" id="7331593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331596">for</span>&nbsp;<span class="ident" id="7331600">i</span><span class="op" id="7331601">,</span>&nbsp;<span class="ident" id="7331603">tt</span>&nbsp;<span class="op" id="7331606">:=</span>&nbsp;<span class="keyword" id="7331609">range</span>&nbsp;<span class="ident" id="7331615">dumpResTests</span>&nbsp;<span class="op" id="7331628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331632">gotb</span><span class="op" id="7331636">,</span>&nbsp;<span class="ident" id="7331638">err</span>&nbsp;<span class="op" id="7331642">:=</span>&nbsp;<span class="ident" id="7331645">DumpResponse</span><span class="op" id="7331657">(</span><span class="ident" id="7331658">tt</span><span class="op" id="7331660">.</span><span class="ident" id="7331661">res</span><span class="op" id="7331664">,</span>&nbsp;<span class="ident" id="7331666">tt</span><span class="op" id="7331668">.</span><span class="ident" id="7331669">body</span><span class="op" id="7331673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331677">if</span>&nbsp;<span class="ident" id="7331680">err</span>&nbsp;<span class="op" id="7331684">!=</span>&nbsp;<span class="ident" id="7331687">nil</span>&nbsp;<span class="op" id="7331691">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331696">t</span><span class="op" id="7331697">.</span><span class="ident" id="7331698">Errorf</span><span class="op" id="7331704">(</span><span class="string" id="7331705">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7331728">,</span>&nbsp;<span class="ident" id="7331730">i</span><span class="op" id="7331731">,</span>&nbsp;<span class="ident" id="7331733">err</span><span class="op" id="7331736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331741">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331756">got</span>&nbsp;<span class="op" id="7331760">:=</span>&nbsp;<span class="builtintype" id="7331763">string</span><span class="op" id="7331769">(</span><span class="ident" id="7331770">gotb</span><span class="op" id="7331774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331778">got</span>&nbsp;<span class="op" id="7331782">=</span>&nbsp;<span class="ident" id="7331784">strings</span><span class="op" id="7331791">.</span><span class="ident" id="7331792">TrimSpace</span><span class="op" id="7331801">(</span><span class="ident" id="7331802">got</span><span class="op" id="7331805">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331809">got</span>&nbsp;<span class="op" id="7331813">=</span>&nbsp;<span class="ident" id="7331815">strings</span><span class="op" id="7331822">.</span><span class="ident" id="7331823">Replace</span><span class="op" id="7331830">(</span><span class="ident" id="7331831">got</span><span class="op" id="7331834">,</span>&nbsp;<span class="string" id="7331836">&#34;\r&#34;</span><span class="op" id="7331840">,</span>&nbsp;<span class="string" id="7331842">&#34;&#34;</span><span class="op" id="7331844">,</span>&nbsp;<span class="op" id="7331846">-</span><span class="num" id="7331847">1</span><span class="op" id="7331848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331853">if</span>&nbsp;<span class="ident" id="7331856">got</span>&nbsp;<span class="op" id="7331860">!=</span>&nbsp;<span class="ident" id="7331863">tt</span><span class="op" id="7331865">.</span><span class="ident" id="7331866">want</span>&nbsp;<span class="op" id="7331871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331876">t</span><span class="op" id="7331877">.</span><span class="ident" id="7331878">Errorf</span><span class="op" id="7331884">(</span><span class="string" id="7331885">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="7331928">,</span>&nbsp;<span class="ident" id="7331930">i</span><span class="op" id="7331931">,</span>&nbsp;<span class="ident" id="7331933">got</span><span class="op" id="7331936">,</span>&nbsp;<span class="ident" id="7331938">tt</span><span class="op" id="7331940">.</span><span class="ident" id="7331941">want</span><span class="op" id="7331945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331949">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331952">}</span><br>
<span class="lineno"></span><span class="op" id="7331954">}</span>
</div>
</body>
</html>
