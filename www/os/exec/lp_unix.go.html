<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6166344">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6166400">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6166454">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6166505">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6166575">package</span>&nbsp;<span class="ident" id="6166583">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6166589">import</span>&nbsp;<span class="op" id="6166596">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6166599">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6166609">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6166615">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="6166625">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6166628">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6166718">var</span>&nbsp;<span class="ident" id="6166722">ErrNotFound</span>&nbsp;<span class="op" id="6166734">=</span>&nbsp;<span class="ident" id="6166736"><a href="/os/exec/lp_unix.go.html#6166599">errors</a></span><span class="op" id="6166742">.</span><span class="ident" id="6166743">New</span><span class="op" id="6166746">(</span><span class="string" id="6166747">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="6166783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6166786">func</span>&nbsp;<span class="ident" id="6166791">findExecutable</span><span class="op" id="6166805">(</span><span class="ident" id="6166806">file</span>&nbsp;<span class="builtintype" id="6166811">string</span><span class="op" id="6166817">)</span>&nbsp;<span class="builtintype" id="6166819">error</span>&nbsp;<span class="op" id="6166825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6166828">d</span><span class="op" id="6166829">,</span>&nbsp;<span class="ident" id="6166831">err</span>&nbsp;<span class="op" id="6166835">:=</span>&nbsp;<span class="ident" id="6166838"><a href="/os/exec/lp_unix.go.html#6166609">os</a></span><span class="op" id="6166840">.</span><span class="ident" id="6166841">Stat</span><span class="op" id="6166845">(</span><span class="ident" id="6166846"><a href="/os/exec/lp_unix.go.html#6166806">file</a></span><span class="op" id="6166850">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6166853">if</span>&nbsp;<span class="ident" id="6166856"><a href="/os/exec/lp_unix.go.html#6166831">err</a></span>&nbsp;<span class="op" id="6166860">!=</span>&nbsp;<span class="ident" id="6166863">nil</span>&nbsp;<span class="op" id="6166867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6166871">return</span>&nbsp;<span class="ident" id="6166878"><a href="/os/exec/lp_unix.go.html#6166831">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6166883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6166886">if</span>&nbsp;<span class="ident" id="6166889">m</span>&nbsp;<span class="op" id="6166891">:=</span>&nbsp;<span class="ident" id="6166894"><a href="/os/exec/lp_unix.go.html#6166828">d</a></span><span class="op" id="6166895">.</span><span class="ident" id="6166896">Mode</span><span class="op" id="6166900">(</span><span class="op" id="6166901">)</span><span class="op" id="6166902">;</span>&nbsp;<span class="op" id="6166904">!</span><span class="ident" id="6166905"><a href="/os/exec/lp_unix.go.html#6166889">m</a></span><span class="op" id="6166906">.</span><span class="ident" id="6166907">IsDir</span><span class="op" id="6166912">(</span><span class="op" id="6166913">)</span>&nbsp;<span class="op" id="6166915">&amp;&amp;</span>&nbsp;<span class="ident" id="6166918"><a href="/os/exec/lp_unix.go.html#6166889">m</a></span><span class="op" id="6166919">&amp;</span><span class="num" id="6166920">0111</span>&nbsp;<span class="op" id="6166925">!=</span>&nbsp;<span class="num" id="6166928">0</span>&nbsp;<span class="op" id="6166930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6166934">return</span>&nbsp;<span class="ident" id="6166941">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6166946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6166949">return</span>&nbsp;<span class="ident" id="6166956"><a href="/os/exec/lp_unix.go.html#6166609">os</a></span><span class="op" id="6166958">.</span><span class="ident" id="6166959">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="6166973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6166976">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="6167033">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="6167095">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="6167176">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="6167259">func</span>&nbsp;<span class="ident" id="6167264">LookPath</span><span class="op" id="6167272">(</span><span class="ident" id="6167273">file</span>&nbsp;<span class="builtintype" id="6167278">string</span><span class="op" id="6167284">)</span>&nbsp;<span class="op" id="6167286">(</span><span class="builtintype" id="6167287">string</span><span class="op" id="6167293">,</span>&nbsp;<span class="builtintype" id="6167295">error</span><span class="op" id="6167300">)</span>&nbsp;<span class="op" id="6167302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6167305">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6167365">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6167427">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167478">if</span>&nbsp;<span class="ident" id="6167481"><a href="/os/exec/lp_unix.go.html#6166615">strings</a></span><span class="op" id="6167488">.</span><span class="ident" id="6167489">Contains</span><span class="op" id="6167497">(</span><span class="ident" id="6167498"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><span class="op" id="6167502">,</span>&nbsp;<span class="string" id="6167504">&#34;/&#34;</span><span class="op" id="6167507">)</span>&nbsp;<span class="op" id="6167509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6167513">err</span>&nbsp;<span class="op" id="6167517">:=</span>&nbsp;<span class="ident" id="6167520"><a href="/os/exec/lp_unix.go.html#6166791">findExecutable</a></span><span class="op" id="6167534">(</span><span class="ident" id="6167535"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><span class="op" id="6167539">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167543">if</span>&nbsp;<span class="ident" id="6167546"><a href="/os/exec/lp_unix.go.html#6167513">err</a></span>&nbsp;<span class="op" id="6167550">==</span>&nbsp;<span class="ident" id="6167553">nil</span>&nbsp;<span class="op" id="6167557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167562">return</span>&nbsp;<span class="ident" id="6167569"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><span class="op" id="6167573">,</span>&nbsp;<span class="ident" id="6167575">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6167581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167585">return</span>&nbsp;<span class="string" id="6167592">&#34;&#34;</span><span class="op" id="6167594">,</span>&nbsp;<span class="op" id="6167596">&amp;</span><span class="ident" id="6167597"><a href="/os/exec/exec.go.html#6153543">Error</a></span><span class="op" id="6167602">{</span><span class="ident" id="6167603"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><span class="op" id="6167607">,</span>&nbsp;<span class="ident" id="6167609"><a href="/os/exec/lp_unix.go.html#6167513">err</a></span><span class="op" id="6167612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6167615">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6167618">pathenv</span>&nbsp;<span class="op" id="6167626">:=</span>&nbsp;<span class="ident" id="6167629"><a href="/os/exec/lp_unix.go.html#6166609">os</a></span><span class="op" id="6167631">.</span><span class="ident" id="6167632">Getenv</span><span class="op" id="6167638">(</span><span class="string" id="6167639">&#34;PATH&#34;</span><span class="op" id="6167645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167648">if</span>&nbsp;<span class="ident" id="6167651"><a href="/os/exec/lp_unix.go.html#6167618">pathenv</a></span>&nbsp;<span class="op" id="6167659">==</span>&nbsp;<span class="string" id="6167662">&#34;&#34;</span>&nbsp;<span class="op" id="6167665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167669">return</span>&nbsp;<span class="string" id="6167676">&#34;&#34;</span><span class="op" id="6167678">,</span>&nbsp;<span class="op" id="6167680">&amp;</span><span class="ident" id="6167681"><a href="/os/exec/exec.go.html#6153543">Error</a></span><span class="op" id="6167686">{</span><span class="ident" id="6167687"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><span class="op" id="6167691">,</span>&nbsp;<span class="ident" id="6167693"><a href="/os/exec/lp_unix.go.html#6166722">ErrNotFound</a></span><span class="op" id="6167704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6167707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167710">for</span>&nbsp;<span class="ident" id="6167714">_</span><span class="op" id="6167715">,</span>&nbsp;<span class="ident" id="6167717">dir</span>&nbsp;<span class="op" id="6167721">:=</span>&nbsp;<span class="keyword" id="6167724">range</span>&nbsp;<span class="ident" id="6167730"><a href="/os/exec/lp_unix.go.html#6166615">strings</a></span><span class="op" id="6167737">.</span><span class="ident" id="6167738">Split</span><span class="op" id="6167743">(</span><span class="ident" id="6167744"><a href="/os/exec/lp_unix.go.html#6167618">pathenv</a></span><span class="op" id="6167751">,</span>&nbsp;<span class="string" id="6167753">&#34;:&#34;</span><span class="op" id="6167756">)</span>&nbsp;<span class="op" id="6167758">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167762">if</span>&nbsp;<span class="ident" id="6167765"><a href="/os/exec/lp_unix.go.html#6167717">dir</a></span>&nbsp;<span class="op" id="6167769">==</span>&nbsp;<span class="string" id="6167772">&#34;&#34;</span>&nbsp;<span class="op" id="6167775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6167780">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6167834"><a href="/os/exec/lp_unix.go.html#6167717">dir</a></span>&nbsp;<span class="op" id="6167838">=</span>&nbsp;<span class="string" id="6167840">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6167846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6167850">path</span>&nbsp;<span class="op" id="6167855">:=</span>&nbsp;<span class="ident" id="6167858"><a href="/os/exec/lp_unix.go.html#6167717">dir</a></span>&nbsp;<span class="op" id="6167862">+</span>&nbsp;<span class="string" id="6167864">&#34;/&#34;</span>&nbsp;<span class="op" id="6167868">+</span>&nbsp;<span class="ident" id="6167870"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167877">if</span>&nbsp;<span class="ident" id="6167880">err</span>&nbsp;<span class="op" id="6167884">:=</span>&nbsp;<span class="ident" id="6167887"><a href="/os/exec/lp_unix.go.html#6166791">findExecutable</a></span><span class="op" id="6167901">(</span><span class="ident" id="6167902"><a href="/os/exec/lp_unix.go.html#6167850">path</a></span><span class="op" id="6167906">)</span><span class="op" id="6167907">;</span>&nbsp;<span class="ident" id="6167909"><a href="/os/exec/lp_unix.go.html#6167880">err</a></span>&nbsp;<span class="op" id="6167913">==</span>&nbsp;<span class="ident" id="6167916">nil</span>&nbsp;<span class="op" id="6167920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167925">return</span>&nbsp;<span class="ident" id="6167932"><a href="/os/exec/lp_unix.go.html#6167850">path</a></span><span class="op" id="6167936">,</span>&nbsp;<span class="ident" id="6167938">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6167944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6167947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6167950">return</span>&nbsp;<span class="string" id="6167957">&#34;&#34;</span><span class="op" id="6167959">,</span>&nbsp;<span class="op" id="6167961">&amp;</span><span class="ident" id="6167962"><a href="/os/exec/exec.go.html#6153543">Error</a></span><span class="op" id="6167967">{</span><span class="ident" id="6167968"><a href="/os/exec/lp_unix.go.html#6167273">file</a></span><span class="op" id="6167972">,</span>&nbsp;<span class="ident" id="6167974"><a href="/os/exec/lp_unix.go.html#6166722">ErrNotFound</a></span><span class="op" id="6167985">}</span><br>
<span class="lineno">60</span><span class="op" id="6167987">}</span>
</div>
</body>
</html>
