<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3962786">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3962841">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3962895">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3962946">package</span>&nbsp;<span class="ident" id="3962954">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3962965">import</span>&nbsp;<span class="op" id="3962972">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3962975">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3962984">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3962994">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3963000">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3963013">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3963030">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3963035">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3963038">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="3963114">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3963161">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="3963225">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3963266">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="3963329">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3963378">func</span>&nbsp;<span class="op" id="3963383">(</span><span class="ident" id="3963384">r</span>&nbsp;<span class="op" id="3963386">*</span><span class="ident" id="3963387"><a href="/mime/multipart/multipart.go.html#3972094">Reader</a></span><span class="op" id="3963393">)</span>&nbsp;<span class="ident" id="3963395">ReadForm</span><span class="op" id="3963403">(</span><span class="ident" id="3963404">maxMemory</span>&nbsp;<span class="ident" id="3963414">int64</span><span class="op" id="3963419">)</span>&nbsp;<span class="op" id="3963421">(</span><span class="ident" id="3963422">f</span>&nbsp;<span class="op" id="3963424">*</span><span class="ident" id="3963425"><a href="/mime/multipart/formdata.go.html#3965115">Form</a></span><span class="op" id="3963429">,</span>&nbsp;<span class="ident" id="3963431">err</span>&nbsp;<span class="builtintype" id="3963435">error</span><span class="op" id="3963440">)</span>&nbsp;<span class="op" id="3963442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963445">form</span>&nbsp;<span class="op" id="3963450">:=</span>&nbsp;<span class="op" id="3963453">&amp;</span><span class="ident" id="3963454"><a href="/mime/multipart/formdata.go.html#3965115">Form</a></span><span class="op" id="3963458">{</span><span class="builtinfunc" id="3963459">make</span><span class="op" id="3963463">(</span><span class="keyword" id="3963464">map</span><span class="op" id="3963467">[</span><span class="builtintype" id="3963468">string</span><span class="op" id="3963474">]</span><span class="op" id="3963475">[</span><span class="op" id="3963476">]</span><span class="builtintype" id="3963477">string</span><span class="op" id="3963483">)</span><span class="op" id="3963484">,</span>&nbsp;<span class="builtinfunc" id="3963486">make</span><span class="op" id="3963490">(</span><span class="keyword" id="3963491">map</span><span class="op" id="3963494">[</span><span class="builtintype" id="3963495">string</span><span class="op" id="3963501">]</span><span class="op" id="3963502">[</span><span class="op" id="3963503">]</span><span class="op" id="3963504">*</span><span class="ident" id="3963505"><a href="/mime/multipart/formdata.go.html#3965564">FileHeader</a></span><span class="op" id="3963515">)</span><span class="op" id="3963516">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963519">defer</span>&nbsp;<span class="keyword" id="3963525">func</span><span class="op" id="3963529">(</span><span class="op" id="3963530">)</span>&nbsp;<span class="op" id="3963532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963536">if</span>&nbsp;<span class="ident" id="3963539"><a href="/mime/multipart/formdata.go.html#3963431">err</a></span>&nbsp;<span class="op" id="3963543">!=</span>&nbsp;<span class="ident" id="3963546">nil</span>&nbsp;<span class="op" id="3963550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963555"><a href="/mime/multipart/formdata.go.html#3963445">form</a></span><span class="op" id="3963559">.</span><span class="ident" id="3963560">RemoveAll</span><span class="op" id="3963569">(</span><span class="op" id="3963570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3963574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3963577">}</span><span class="op" id="3963578">(</span><span class="op" id="3963579">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963583">maxValueBytes</span>&nbsp;<span class="op" id="3963597">:=</span>&nbsp;<span class="ident" id="3963600">int64</span><span class="op" id="3963605">(</span><span class="num" id="3963606">10</span>&nbsp;<span class="op" id="3963609">&lt;&lt;</span>&nbsp;<span class="num" id="3963612">20</span><span class="op" id="3963614">)</span>&nbsp;<span class="comment" id="3963616">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963644">for</span>&nbsp;<span class="op" id="3963648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963652">p</span><span class="op" id="3963653">,</span>&nbsp;<span class="ident" id="3963655">err</span>&nbsp;<span class="op" id="3963659">:=</span>&nbsp;<span class="ident" id="3963662"><a href="/mime/multipart/formdata.go.html#3963384">r</a></span><span class="op" id="3963663">.</span><span class="ident" id="3963664">NextPart</span><span class="op" id="3963672">(</span><span class="op" id="3963673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963677">if</span>&nbsp;<span class="ident" id="3963680"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span>&nbsp;<span class="op" id="3963684">==</span>&nbsp;<span class="ident" id="3963687"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3963689">.</span><span class="ident" id="3963690">EOF</span>&nbsp;<span class="op" id="3963694">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963699">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3963707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963711">if</span>&nbsp;<span class="ident" id="3963714"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span>&nbsp;<span class="op" id="3963718">!=</span>&nbsp;<span class="ident" id="3963721">nil</span>&nbsp;<span class="op" id="3963725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963730">return</span>&nbsp;<span class="ident" id="3963737">nil</span><span class="op" id="3963740">,</span>&nbsp;<span class="ident" id="3963742"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3963748">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963753">name</span>&nbsp;<span class="op" id="3963758">:=</span>&nbsp;<span class="ident" id="3963761"><a href="/mime/multipart/formdata.go.html#3963652">p</a></span><span class="op" id="3963762">.</span><span class="ident" id="3963763">FormName</span><span class="op" id="3963771">(</span><span class="op" id="3963772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963776">if</span>&nbsp;<span class="ident" id="3963779"><a href="/mime/multipart/formdata.go.html#3963753">name</a></span>&nbsp;<span class="op" id="3963784">==</span>&nbsp;<span class="string" id="3963787">&#34;&#34;</span>&nbsp;<span class="op" id="3963790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963795">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3963806">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963810">filename</span>&nbsp;<span class="op" id="3963819">:=</span>&nbsp;<span class="ident" id="3963822"><a href="/mime/multipart/formdata.go.html#3963652">p</a></span><span class="op" id="3963823">.</span><span class="ident" id="3963824">FileName</span><span class="op" id="3963832">(</span><span class="op" id="3963833">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963838">var</span>&nbsp;<span class="ident" id="3963842">b</span>&nbsp;<span class="ident" id="3963844"><a href="/mime/multipart/formdata.go.html#3962975">bytes</a></span><span class="op" id="3963849">.</span><span class="ident" id="3963850">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963860">if</span>&nbsp;<span class="ident" id="3963863"><a href="/mime/multipart/formdata.go.html#3963810">filename</a></span>&nbsp;<span class="op" id="3963872">==</span>&nbsp;<span class="string" id="3963875">&#34;&#34;</span>&nbsp;<span class="op" id="3963878">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3963883">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3963922">n</span><span class="op" id="3963923">,</span>&nbsp;<span class="ident" id="3963925">err</span>&nbsp;<span class="op" id="3963929">:=</span>&nbsp;<span class="ident" id="3963932"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3963934">.</span><span class="ident" id="3963935">CopyN</span><span class="op" id="3963940">(</span><span class="op" id="3963941">&amp;</span><span class="ident" id="3963942"><a href="/mime/multipart/formdata.go.html#3963842">b</a></span><span class="op" id="3963943">,</span>&nbsp;<span class="ident" id="3963945"><a href="/mime/multipart/formdata.go.html#3963652">p</a></span><span class="op" id="3963946">,</span>&nbsp;<span class="ident" id="3963948"><a href="/mime/multipart/formdata.go.html#3963583">maxValueBytes</a></span><span class="op" id="3963961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3963966">if</span>&nbsp;<span class="ident" id="3963969"><a href="/mime/multipart/formdata.go.html#3963925">err</a></span>&nbsp;<span class="op" id="3963973">!=</span>&nbsp;<span class="ident" id="3963976">nil</span>&nbsp;<span class="op" id="3963980">&amp;&amp;</span>&nbsp;<span class="ident" id="3963983"><a href="/mime/multipart/formdata.go.html#3963925">err</a></span>&nbsp;<span class="op" id="3963987">!=</span>&nbsp;<span class="ident" id="3963990"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3963992">.</span><span class="ident" id="3963993">EOF</span>&nbsp;<span class="op" id="3963997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964003">return</span>&nbsp;<span class="ident" id="3964010">nil</span><span class="op" id="3964013">,</span>&nbsp;<span class="ident" id="3964015"><a href="/mime/multipart/formdata.go.html#3963925">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964022">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964027"><a href="/mime/multipart/formdata.go.html#3963583">maxValueBytes</a></span>&nbsp;<span class="op" id="3964041">-=</span>&nbsp;<span class="ident" id="3964044"><a href="/mime/multipart/formdata.go.html#3963922">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964049">if</span>&nbsp;<span class="ident" id="3964052"><a href="/mime/multipart/formdata.go.html#3963583">maxValueBytes</a></span>&nbsp;<span class="op" id="3964066">==</span>&nbsp;<span class="num" id="3964069">0</span>&nbsp;<span class="op" id="3964071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964077">return</span>&nbsp;<span class="ident" id="3964084">nil</span><span class="op" id="3964087">,</span>&nbsp;<span class="ident" id="3964089"><a href="/mime/multipart/formdata.go.html#3962984">errors</a></span><span class="op" id="3964095">.</span><span class="ident" id="3964096">New</span><span class="op" id="3964099">(</span><span class="string" id="3964100">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="3964130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964140"><a href="/mime/multipart/formdata.go.html#3963445">form</a></span><span class="op" id="3964144">.</span><span class="ident" id="3964145">Value</span><span class="op" id="3964150">[</span><span class="ident" id="3964151"><a href="/mime/multipart/formdata.go.html#3963753">name</a></span><span class="op" id="3964155">]</span>&nbsp;<span class="op" id="3964157">=</span>&nbsp;<span class="builtinfunc" id="3964159">append</span><span class="op" id="3964165">(</span><span class="ident" id="3964166"><a href="/mime/multipart/formdata.go.html#3963445">form</a></span><span class="op" id="3964170">.</span><span class="ident" id="3964171">Value</span><span class="op" id="3964176">[</span><span class="ident" id="3964177"><a href="/mime/multipart/formdata.go.html#3963753">name</a></span><span class="op" id="3964181">]</span><span class="op" id="3964182">,</span>&nbsp;<span class="ident" id="3964184"><a href="/mime/multipart/formdata.go.html#3963842">b</a></span><span class="op" id="3964185">.</span><span class="ident" id="3964186">String</span><span class="op" id="3964192">(</span><span class="op" id="3964193">)</span><span class="op" id="3964194">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964199">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3964215">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964253">fh</span>&nbsp;<span class="op" id="3964256">:=</span>&nbsp;<span class="op" id="3964259">&amp;</span><span class="ident" id="3964260"><a href="/mime/multipart/formdata.go.html#3965564">FileHeader</a></span><span class="op" id="3964270">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964275">Filename</span><span class="op" id="3964283">:</span>&nbsp;<span class="ident" id="3964285"><a href="/mime/multipart/formdata.go.html#3963810">filename</a></span><span class="op" id="3964293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964298">Header</span><span class="op" id="3964304">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3964308"><a href="/mime/multipart/formdata.go.html#3963652">p</a></span><span class="op" id="3964309">.</span><span class="ident" id="3964310">Header</span><span class="op" id="3964316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964324">n</span><span class="op" id="3964325">,</span>&nbsp;<span class="ident" id="3964327"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span>&nbsp;<span class="op" id="3964331">:=</span>&nbsp;<span class="ident" id="3964334"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3964336">.</span><span class="ident" id="3964337">CopyN</span><span class="op" id="3964342">(</span><span class="op" id="3964343">&amp;</span><span class="ident" id="3964344"><a href="/mime/multipart/formdata.go.html#3963842">b</a></span><span class="op" id="3964345">,</span>&nbsp;<span class="ident" id="3964347"><a href="/mime/multipart/formdata.go.html#3963652">p</a></span><span class="op" id="3964348">,</span>&nbsp;<span class="ident" id="3964350"><a href="/mime/multipart/formdata.go.html#3963404">maxMemory</a></span><span class="op" id="3964359">+</span><span class="num" id="3964360">1</span><span class="op" id="3964361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964365">if</span>&nbsp;<span class="ident" id="3964368"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span>&nbsp;<span class="op" id="3964372">!=</span>&nbsp;<span class="ident" id="3964375">nil</span>&nbsp;<span class="op" id="3964379">&amp;&amp;</span>&nbsp;<span class="ident" id="3964382"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span>&nbsp;<span class="op" id="3964386">!=</span>&nbsp;<span class="ident" id="3964389"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3964391">.</span><span class="ident" id="3964392">EOF</span>&nbsp;<span class="op" id="3964396">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964401">return</span>&nbsp;<span class="ident" id="3964408">nil</span><span class="op" id="3964411">,</span>&nbsp;<span class="ident" id="3964413"><a href="/mime/multipart/formdata.go.html#3963655">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964423">if</span>&nbsp;<span class="ident" id="3964426"><a href="/mime/multipart/formdata.go.html#3964324">n</a></span>&nbsp;<span class="op" id="3964428">&gt;</span>&nbsp;<span class="ident" id="3964430"><a href="/mime/multipart/formdata.go.html#3963404">maxMemory</a></span>&nbsp;<span class="op" id="3964440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3964445">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964491">file</span><span class="op" id="3964495">,</span>&nbsp;<span class="ident" id="3964497">err</span>&nbsp;<span class="op" id="3964501">:=</span>&nbsp;<span class="ident" id="3964504"><a href="/mime/multipart/formdata.go.html#3963000">ioutil</a></span><span class="op" id="3964510">.</span><span class="ident" id="3964511">TempFile</span><span class="op" id="3964519">(</span><span class="string" id="3964520">&#34;&#34;</span><span class="op" id="3964522">,</span>&nbsp;<span class="string" id="3964524">&#34;multipart-&#34;</span><span class="op" id="3964536">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964541">if</span>&nbsp;<span class="ident" id="3964544"><a href="/mime/multipart/formdata.go.html#3964497">err</a></span>&nbsp;<span class="op" id="3964548">!=</span>&nbsp;<span class="ident" id="3964551">nil</span>&nbsp;<span class="op" id="3964555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964561">return</span>&nbsp;<span class="ident" id="3964568">nil</span><span class="op" id="3964571">,</span>&nbsp;<span class="ident" id="3964573"><a href="/mime/multipart/formdata.go.html#3964497">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964585">defer</span>&nbsp;<span class="ident" id="3964591"><a href="/mime/multipart/formdata.go.html#3964491">file</a></span><span class="op" id="3964595">.</span><span class="ident" id="3964596">Close</span><span class="op" id="3964601">(</span><span class="op" id="3964602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964607">_</span><span class="op" id="3964608">,</span>&nbsp;<span class="ident" id="3964610"><a href="/mime/multipart/formdata.go.html#3964497">err</a></span>&nbsp;<span class="op" id="3964614">=</span>&nbsp;<span class="ident" id="3964616"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3964618">.</span><span class="ident" id="3964619">Copy</span><span class="op" id="3964623">(</span><span class="ident" id="3964624"><a href="/mime/multipart/formdata.go.html#3964491">file</a></span><span class="op" id="3964628">,</span>&nbsp;<span class="ident" id="3964630"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3964632">.</span><span class="ident" id="3964633">MultiReader</span><span class="op" id="3964644">(</span><span class="op" id="3964645">&amp;</span><span class="ident" id="3964646"><a href="/mime/multipart/formdata.go.html#3963842">b</a></span><span class="op" id="3964647">,</span>&nbsp;<span class="ident" id="3964649"><a href="/mime/multipart/formdata.go.html#3963652">p</a></span><span class="op" id="3964650">)</span><span class="op" id="3964651">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964656">if</span>&nbsp;<span class="ident" id="3964659"><a href="/mime/multipart/formdata.go.html#3964497">err</a></span>&nbsp;<span class="op" id="3964663">!=</span>&nbsp;<span class="ident" id="3964666">nil</span>&nbsp;<span class="op" id="3964670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964676"><a href="/mime/multipart/formdata.go.html#3963030">os</a></span><span class="op" id="3964678">.</span><span class="ident" id="3964679">Remove</span><span class="op" id="3964685">(</span><span class="ident" id="3964686"><a href="/mime/multipart/formdata.go.html#3964491">file</a></span><span class="op" id="3964690">.</span><span class="ident" id="3964691">Name</span><span class="op" id="3964695">(</span><span class="op" id="3964696">)</span><span class="op" id="3964697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964703">return</span>&nbsp;<span class="ident" id="3964710">nil</span><span class="op" id="3964713">,</span>&nbsp;<span class="ident" id="3964715"><a href="/mime/multipart/formdata.go.html#3964497">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964727"><a href="/mime/multipart/formdata.go.html#3964253">fh</a></span><span class="op" id="3964729">.</span><span class="ident" id="3964730">tmpfile</span>&nbsp;<span class="op" id="3964738">=</span>&nbsp;<span class="ident" id="3964740"><a href="/mime/multipart/formdata.go.html#3964491">file</a></span><span class="op" id="3964744">.</span><span class="ident" id="3964745">Name</span><span class="op" id="3964749">(</span><span class="op" id="3964750">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964754">}</span>&nbsp;<span class="keyword" id="3964756">else</span>&nbsp;<span class="op" id="3964761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964766"><a href="/mime/multipart/formdata.go.html#3964253">fh</a></span><span class="op" id="3964768">.</span><span class="ident" id="3964769">content</span>&nbsp;<span class="op" id="3964777">=</span>&nbsp;<span class="ident" id="3964779"><a href="/mime/multipart/formdata.go.html#3963842">b</a></span><span class="op" id="3964780">.</span><span class="ident" id="3964781">Bytes</span><span class="op" id="3964786">(</span><span class="op" id="3964787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964792"><a href="/mime/multipart/formdata.go.html#3963404">maxMemory</a></span>&nbsp;<span class="op" id="3964802">-=</span>&nbsp;<span class="ident" id="3964805"><a href="/mime/multipart/formdata.go.html#3964324">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3964813"><a href="/mime/multipart/formdata.go.html#3963445">form</a></span><span class="op" id="3964817">.</span><span class="ident" id="3964818">File</span><span class="op" id="3964822">[</span><span class="ident" id="3964823"><a href="/mime/multipart/formdata.go.html#3963753">name</a></span><span class="op" id="3964827">]</span>&nbsp;<span class="op" id="3964829">=</span>&nbsp;<span class="builtinfunc" id="3964831">append</span><span class="op" id="3964837">(</span><span class="ident" id="3964838"><a href="/mime/multipart/formdata.go.html#3963445">form</a></span><span class="op" id="3964842">.</span><span class="ident" id="3964843">File</span><span class="op" id="3964847">[</span><span class="ident" id="3964848"><a href="/mime/multipart/formdata.go.html#3963753">name</a></span><span class="op" id="3964852">]</span><span class="op" id="3964853">,</span>&nbsp;<span class="ident" id="3964855"><a href="/mime/multipart/formdata.go.html#3964253">fh</a></span><span class="op" id="3964857">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3964860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3964864">return</span>&nbsp;<span class="ident" id="3964871"><a href="/mime/multipart/formdata.go.html#3963445">form</a></span><span class="op" id="3964875">,</span>&nbsp;<span class="ident" id="3964877">nil</span><br>
<span class="lineno"></span><span class="op" id="3964881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3964884">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3964920">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="3964978">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3965035">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3965077">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="3965110">type</span>&nbsp;<span class="ident" id="3965115">Form</span>&nbsp;<span class="keyword" id="3965120">struct</span>&nbsp;<span class="op" id="3965127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965130">Value</span>&nbsp;<span class="keyword" id="3965136">map</span><span class="op" id="3965139">[</span><span class="builtintype" id="3965140">string</span><span class="op" id="3965146">]</span><span class="op" id="3965147">[</span><span class="op" id="3965148">]</span><span class="builtintype" id="3965149">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965157">File</span>&nbsp;&nbsp;<span class="keyword" id="3965163">map</span><span class="op" id="3965166">[</span><span class="builtintype" id="3965167">string</span><span class="op" id="3965173">]</span><span class="op" id="3965174">[</span><span class="op" id="3965175">]</span><span class="op" id="3965176">*</span><span class="ident" id="3965177"><a href="/mime/multipart/formdata.go.html#3965564">FileHeader</a></span><br>
<span class="lineno"></span><span class="op" id="3965188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3965191">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="3965256">func</span>&nbsp;<span class="op" id="3965261">(</span><span class="ident" id="3965262">f</span>&nbsp;<span class="op" id="3965264">*</span><span class="ident" id="3965265"><a href="/mime/multipart/formdata.go.html#3965115">Form</a></span><span class="op" id="3965269">)</span>&nbsp;<span class="ident" id="3965271">RemoveAll</span><span class="op" id="3965280">(</span><span class="op" id="3965281">)</span>&nbsp;<span class="builtintype" id="3965283">error</span>&nbsp;<span class="op" id="3965289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965292">var</span>&nbsp;<span class="ident" id="3965296">err</span>&nbsp;<span class="builtintype" id="3965300">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965307">for</span>&nbsp;<span class="ident" id="3965311">_</span><span class="op" id="3965312">,</span>&nbsp;<span class="ident" id="3965314">fhs</span>&nbsp;<span class="op" id="3965318">:=</span>&nbsp;<span class="keyword" id="3965321">range</span>&nbsp;<span class="ident" id="3965327"><a href="/mime/multipart/formdata.go.html#3965262">f</a></span><span class="op" id="3965328">.</span><span class="ident" id="3965329">File</span>&nbsp;<span class="op" id="3965334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965338">for</span>&nbsp;<span class="ident" id="3965342">_</span><span class="op" id="3965343">,</span>&nbsp;<span class="ident" id="3965345">fh</span>&nbsp;<span class="op" id="3965348">:=</span>&nbsp;<span class="keyword" id="3965351">range</span>&nbsp;<span class="ident" id="3965357"><a href="/mime/multipart/formdata.go.html#3965314">fhs</a></span>&nbsp;<span class="op" id="3965361">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965366">if</span>&nbsp;<span class="ident" id="3965369"><a href="/mime/multipart/formdata.go.html#3965345">fh</a></span><span class="op" id="3965371">.</span><span class="ident" id="3965372">tmpfile</span>&nbsp;<span class="op" id="3965380">!=</span>&nbsp;<span class="string" id="3965383">&#34;&#34;</span>&nbsp;<span class="op" id="3965386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965392">e</span>&nbsp;<span class="op" id="3965394">:=</span>&nbsp;<span class="ident" id="3965397"><a href="/mime/multipart/formdata.go.html#3963030">os</a></span><span class="op" id="3965399">.</span><span class="ident" id="3965400">Remove</span><span class="op" id="3965406">(</span><span class="ident" id="3965407"><a href="/mime/multipart/formdata.go.html#3965345">fh</a></span><span class="op" id="3965409">.</span><span class="ident" id="3965410">tmpfile</span><span class="op" id="3965417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965423">if</span>&nbsp;<span class="ident" id="3965426"><a href="/mime/multipart/formdata.go.html#3965392">e</a></span>&nbsp;<span class="op" id="3965428">!=</span>&nbsp;<span class="ident" id="3965431">nil</span>&nbsp;<span class="op" id="3965435">&amp;&amp;</span>&nbsp;<span class="ident" id="3965438"><a href="/mime/multipart/formdata.go.html#3965296">err</a></span>&nbsp;<span class="op" id="3965442">==</span>&nbsp;<span class="ident" id="3965445">nil</span>&nbsp;<span class="op" id="3965449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965456"><a href="/mime/multipart/formdata.go.html#3965296">err</a></span>&nbsp;<span class="op" id="3965460">=</span>&nbsp;<span class="ident" id="3965462"><a href="/mime/multipart/formdata.go.html#3965392">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3965468">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3965473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3965477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3965480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965483">return</span>&nbsp;<span class="ident" id="3965490"><a href="/mime/multipart/formdata.go.html#3965296">err</a></span><br>
<span class="lineno"></span><span class="op" id="3965494">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3965497">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="3965559">type</span>&nbsp;<span class="ident" id="3965564">FileHeader</span>&nbsp;<span class="keyword" id="3965575">struct</span>&nbsp;<span class="op" id="3965582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965585">Filename</span>&nbsp;<span class="builtintype" id="3965594">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965602">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3965611"><a href="/mime/multipart/formdata.go.html#3963013">textproto</a></span><span class="op" id="3965620">.</span><span class="ident" id="3965621">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965634">content</span>&nbsp;<span class="op" id="3965642">[</span><span class="op" id="3965643">]</span><span class="builtintype" id="3965644">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965650">tmpfile</span>&nbsp;<span class="builtintype" id="3965658">string</span><br>
<span class="lineno"></span><span class="op" id="3965665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3965668">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="3965728">func</span>&nbsp;<span class="op" id="3965733">(</span><span class="ident" id="3965734">fh</span>&nbsp;<span class="op" id="3965737">*</span><span class="ident" id="3965738"><a href="/mime/multipart/formdata.go.html#3965564">FileHeader</a></span><span class="op" id="3965748">)</span>&nbsp;<span class="ident" id="3965750">Open</span><span class="op" id="3965754">(</span><span class="op" id="3965755">)</span>&nbsp;<span class="op" id="3965757">(</span><span class="ident" id="3965758"><a href="/mime/multipart/formdata.go.html#3966154">File</a></span><span class="op" id="3965762">,</span>&nbsp;<span class="builtintype" id="3965764">error</span><span class="op" id="3965769">)</span>&nbsp;<span class="op" id="3965771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965774">if</span>&nbsp;<span class="ident" id="3965777">b</span>&nbsp;<span class="op" id="3965779">:=</span>&nbsp;<span class="ident" id="3965782"><a href="/mime/multipart/formdata.go.html#3965734">fh</a></span><span class="op" id="3965784">.</span><span class="ident" id="3965785">content</span><span class="op" id="3965792">;</span>&nbsp;<span class="ident" id="3965794"><a href="/mime/multipart/formdata.go.html#3965777">b</a></span>&nbsp;<span class="op" id="3965796">!=</span>&nbsp;<span class="ident" id="3965799">nil</span>&nbsp;<span class="op" id="3965803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3965807">r</span>&nbsp;<span class="op" id="3965809">:=</span>&nbsp;<span class="ident" id="3965812"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3965814">.</span><span class="ident" id="3965815">NewSectionReader</span><span class="op" id="3965831">(</span><span class="ident" id="3965832"><a href="/mime/multipart/formdata.go.html#3962975">bytes</a></span><span class="op" id="3965837">.</span><span class="ident" id="3965838">NewReader</span><span class="op" id="3965847">(</span><span class="ident" id="3965848"><a href="/mime/multipart/formdata.go.html#3965777">b</a></span><span class="op" id="3965849">)</span><span class="op" id="3965850">,</span>&nbsp;<span class="num" id="3965852">0</span><span class="op" id="3965853">,</span>&nbsp;<span class="ident" id="3965855">int64</span><span class="op" id="3965860">(</span><span class="builtinfunc" id="3965861">len</span><span class="op" id="3965864">(</span><span class="ident" id="3965865"><a href="/mime/multipart/formdata.go.html#3965777">b</a></span><span class="op" id="3965866">)</span><span class="op" id="3965867">)</span><span class="op" id="3965868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965872">return</span>&nbsp;<span class="ident" id="3965879"><a href="/mime/multipart/formdata.go.html#3966271">sectionReadCloser</a></span><span class="op" id="3965896">{</span><span class="ident" id="3965897"><a href="/mime/multipart/formdata.go.html#3965807">r</a></span><span class="op" id="3965898">}</span><span class="op" id="3965899">,</span>&nbsp;<span class="ident" id="3965901">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3965906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3965909">return</span>&nbsp;<span class="ident" id="3965916"><a href="/mime/multipart/formdata.go.html#3963030">os</a></span><span class="op" id="3965918">.</span><span class="ident" id="3965919">Open</span><span class="op" id="3965923">(</span><span class="ident" id="3965924"><a href="/mime/multipart/formdata.go.html#3965734">fh</a></span><span class="op" id="3965926">.</span><span class="ident" id="3965927">tmpfile</span><span class="op" id="3965934">)</span><br>
<span class="lineno"></span><span class="op" id="3965936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3965939">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="3966011">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="3966070">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="3966149">type</span>&nbsp;<span class="ident" id="3966154">File</span>&nbsp;<span class="keyword" id="3966159">interface</span>&nbsp;<span class="op" id="3966169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3966172"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3966174">.</span><span class="ident" id="3966175">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3966183"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3966185">.</span><span class="ident" id="3966186">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3966196"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3966198">.</span><span class="ident" id="3966199">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3966207"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3966209">.</span><span class="ident" id="3966210">Closer</span><br>
<span class="lineno"></span><span class="op" id="3966217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3966220">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3966266">type</span>&nbsp;<span class="ident" id="3966271">sectionReadCloser</span>&nbsp;<span class="keyword" id="3966289">struct</span>&nbsp;<span class="op" id="3966296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3966299">*</span><span class="ident" id="3966300"><a href="/mime/multipart/formdata.go.html#3962994">io</a></span><span class="op" id="3966302">.</span><span class="ident" id="3966303">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="3966317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="3966320">func</span>&nbsp;<span class="op" id="3966325">(</span><span class="ident" id="3966326">rc</span>&nbsp;<span class="ident" id="3966329"><a href="/mime/multipart/formdata.go.html#3966271">sectionReadCloser</a></span><span class="op" id="3966346">)</span>&nbsp;<span class="ident" id="3966348">Close</span><span class="op" id="3966353">(</span><span class="op" id="3966354">)</span>&nbsp;<span class="builtintype" id="3966356">error</span>&nbsp;<span class="op" id="3966362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3966365">return</span>&nbsp;<span class="ident" id="3966372">nil</span><br>
<span class="lineno"></span><span class="op" id="3966376">}</span>
</div>
</body>
</html>
