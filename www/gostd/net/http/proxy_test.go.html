<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html" class="current">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8240787">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8240842">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8240896">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8240947">package</span>&nbsp;<span class="ident" id="8240955">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8240961">import</span>&nbsp;<span class="op" id="8240968">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8240971">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8240982">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8240988">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8240998">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8241001">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="8241017">//&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8241036">var</span>&nbsp;<span class="ident" id="8241040">UseProxyTests</span>&nbsp;<span class="op" id="8241054">=</span>&nbsp;<span class="op" id="8241056">[</span><span class="op" id="8241057">]</span><span class="keyword" id="8241058">struct</span>&nbsp;<span class="op" id="8241065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8241068">host</span>&nbsp;&nbsp;<span class="builtintype" id="8241074">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8241082">match</span>&nbsp;<span class="builtintype" id="8241088">bool</span><br>
<span class="lineno"></span><span class="op" id="8241093">}</span><span class="op" id="8241094">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8241097">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241124">{</span><span class="string" id="8241125">&#34;localhost:80&#34;</span><span class="op" id="8241139">,</span>&nbsp;<span class="builtintype" id="8241141">false</span><span class="op" id="8241146">}</span><span class="op" id="8241147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241150">{</span><span class="string" id="8241151">&#34;127.0.0.1&#34;</span><span class="op" id="8241162">,</span>&nbsp;<span class="builtintype" id="8241164">false</span><span class="op" id="8241169">}</span><span class="op" id="8241170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241173">{</span><span class="string" id="8241174">&#34;127.0.0.2&#34;</span><span class="op" id="8241185">,</span>&nbsp;<span class="builtintype" id="8241187">false</span><span class="op" id="8241192">}</span><span class="op" id="8241193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241196">{</span><span class="string" id="8241197">&#34;[::1]&#34;</span><span class="op" id="8241204">,</span>&nbsp;<span class="builtintype" id="8241206">false</span><span class="op" id="8241211">}</span><span class="op" id="8241212">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241215">{</span><span class="string" id="8241216">&#34;[::2]&#34;</span><span class="op" id="8241223">,</span>&nbsp;<span class="builtintype" id="8241225">true</span><span class="op" id="8241229">}</span><span class="op" id="8241230">,</span>&nbsp;<span class="comment" id="8241232">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241260">{</span><span class="string" id="8241261">&#34;barbaz.net&#34;</span><span class="op" id="8241273">,</span>&nbsp;<span class="builtintype" id="8241275">false</span><span class="op" id="8241280">}</span><span class="op" id="8241281">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8241287">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241312">{</span><span class="string" id="8241313">&#34;foobar.com&#34;</span><span class="op" id="8241325">,</span>&nbsp;<span class="builtintype" id="8241327">false</span><span class="op" id="8241332">}</span><span class="op" id="8241333">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8241339">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241365">{</span><span class="string" id="8241366">&#34;foofoobar.com&#34;</span><span class="op" id="8241381">,</span>&nbsp;<span class="builtintype" id="8241383">true</span><span class="op" id="8241387">}</span><span class="op" id="8241388">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8241392">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241430">{</span><span class="string" id="8241431">&#34;baz.com&#34;</span><span class="op" id="8241440">,</span>&nbsp;<span class="builtintype" id="8241442">true</span><span class="op" id="8241446">}</span><span class="op" id="8241447">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8241457">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241495">{</span><span class="string" id="8241496">&#34;localhost.net&#34;</span><span class="op" id="8241511">,</span>&nbsp;<span class="builtintype" id="8241513">true</span><span class="op" id="8241517">}</span><span class="op" id="8241518">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8241522">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241557">{</span><span class="string" id="8241558">&#34;local.localhost&#34;</span><span class="op" id="8241575">,</span>&nbsp;<span class="builtintype" id="8241577">true</span><span class="op" id="8241581">}</span><span class="op" id="8241582">,</span>&nbsp;<span class="comment" id="8241584">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241619">{</span><span class="string" id="8241620">&#34;barbarbaz.net&#34;</span><span class="op" id="8241635">,</span>&nbsp;<span class="builtintype" id="8241637">true</span><span class="op" id="8241641">}</span><span class="op" id="8241642">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8241646">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8241688">{</span><span class="string" id="8241689">&#34;www.foobar.com&#34;</span><span class="op" id="8241705">,</span>&nbsp;<span class="builtintype" id="8241707">false</span><span class="op" id="8241712">}</span><span class="op" id="8241713">,</span>&nbsp;<span class="comment" id="8241715">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="8241763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8241766">func</span>&nbsp;<span class="ident" id="8241771">TestUseProxy</span><span class="op" id="8241783">(</span><span class="ident" id="8241784">t</span>&nbsp;<span class="op" id="8241786">*</span><span class="ident" id="8241787">testing</span><span class="op" id="8241794">.</span><span class="ident" id="8241795">T</span><span class="op" id="8241796">)</span>&nbsp;<span class="op" id="8241798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8241801">ResetProxyEnv</span><span class="op" id="8241814">(</span><span class="op" id="8241815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8241818">os</span><span class="op" id="8241820">.</span><span class="ident" id="8241821">Setenv</span><span class="op" id="8241827">(</span><span class="string" id="8241828">&#34;NO_PROXY&#34;</span><span class="op" id="8241838">,</span>&nbsp;<span class="string" id="8241840">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="8241865">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8241868">for</span>&nbsp;<span class="ident" id="8241872">_</span><span class="op" id="8241873">,</span>&nbsp;<span class="ident" id="8241875">test</span>&nbsp;<span class="op" id="8241880">:=</span>&nbsp;<span class="keyword" id="8241883">range</span>&nbsp;<span class="ident" id="8241889">UseProxyTests</span>&nbsp;<span class="op" id="8241903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8241907">if</span>&nbsp;<span class="ident" id="8241910">useProxy</span><span class="op" id="8241918">(</span><span class="ident" id="8241919">test</span><span class="op" id="8241923">.</span><span class="ident" id="8241924">host</span><span class="op" id="8241928">+</span><span class="string" id="8241929">&#34;:80&#34;</span><span class="op" id="8241934">)</span>&nbsp;<span class="op" id="8241936">!=</span>&nbsp;<span class="ident" id="8241939">test</span><span class="op" id="8241943">.</span><span class="ident" id="8241944">match</span>&nbsp;<span class="op" id="8241950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8241955">t</span><span class="op" id="8241956">.</span><span class="ident" id="8241957">Errorf</span><span class="op" id="8241963">(</span><span class="string" id="8241964">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8241992">,</span>&nbsp;<span class="ident" id="8241994">test</span><span class="op" id="8241998">.</span><span class="ident" id="8241999">host</span><span class="op" id="8242003">,</span>&nbsp;<span class="op" id="8242005">!</span><span class="ident" id="8242006">test</span><span class="op" id="8242010">.</span><span class="ident" id="8242011">match</span><span class="op" id="8242016">,</span>&nbsp;<span class="ident" id="8242018">test</span><span class="op" id="8242022">.</span><span class="ident" id="8242023">match</span><span class="op" id="8242028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242035">}</span><br>
<span class="lineno">45</span><span class="op" id="8242037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8242040">var</span>&nbsp;<span class="ident" id="8242044">cacheKeysTests</span>&nbsp;<span class="op" id="8242059">=</span>&nbsp;<span class="op" id="8242061">[</span><span class="op" id="8242062">]</span><span class="keyword" id="8242063">struct</span>&nbsp;<span class="op" id="8242070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242073">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="8242080">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242088">scheme</span>&nbsp;<span class="builtintype" id="8242095">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242103">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8242110">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242118">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8242125">string</span><br>
<span class="lineno"></span><span class="op" id="8242132">}</span><span class="op" id="8242133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242136">{</span><span class="string" id="8242137">&#34;&#34;</span><span class="op" id="8242139">,</span>&nbsp;<span class="string" id="8242141">&#34;http&#34;</span><span class="op" id="8242147">,</span>&nbsp;<span class="string" id="8242149">&#34;foo.com&#34;</span><span class="op" id="8242158">,</span>&nbsp;<span class="string" id="8242160">&#34;|http|foo.com&#34;</span><span class="op" id="8242175">}</span><span class="op" id="8242176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242179">{</span><span class="string" id="8242180">&#34;&#34;</span><span class="op" id="8242182">,</span>&nbsp;<span class="string" id="8242184">&#34;https&#34;</span><span class="op" id="8242191">,</span>&nbsp;<span class="string" id="8242193">&#34;foo.com&#34;</span><span class="op" id="8242202">,</span>&nbsp;<span class="string" id="8242204">&#34;|https|foo.com&#34;</span><span class="op" id="8242220">}</span><span class="op" id="8242221">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242224">{</span><span class="string" id="8242225">&#34;http://foo.com&#34;</span><span class="op" id="8242241">,</span>&nbsp;<span class="string" id="8242243">&#34;http&#34;</span><span class="op" id="8242249">,</span>&nbsp;<span class="string" id="8242251">&#34;foo.com&#34;</span><span class="op" id="8242260">,</span>&nbsp;<span class="string" id="8242262">&#34;http://foo.com|http|&#34;</span><span class="op" id="8242284">}</span><span class="op" id="8242285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242288">{</span><span class="string" id="8242289">&#34;http://foo.com&#34;</span><span class="op" id="8242305">,</span>&nbsp;<span class="string" id="8242307">&#34;https&#34;</span><span class="op" id="8242314">,</span>&nbsp;<span class="string" id="8242316">&#34;foo.com&#34;</span><span class="op" id="8242325">,</span>&nbsp;<span class="string" id="8242327">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="8242357">}</span><span class="op" id="8242358">,</span><br>
<span class="lineno"></span><span class="op" id="8242360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8242363">func</span>&nbsp;<span class="ident" id="8242368">TestCacheKeys</span><span class="op" id="8242381">(</span><span class="ident" id="8242382">t</span>&nbsp;<span class="op" id="8242384">*</span><span class="ident" id="8242385">testing</span><span class="op" id="8242392">.</span><span class="ident" id="8242393">T</span><span class="op" id="8242394">)</span>&nbsp;<span class="op" id="8242396">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8242399">for</span>&nbsp;<span class="ident" id="8242403">_</span><span class="op" id="8242404">,</span>&nbsp;<span class="ident" id="8242406">tt</span>&nbsp;<span class="op" id="8242409">:=</span>&nbsp;<span class="keyword" id="8242412">range</span>&nbsp;<span class="ident" id="8242418">cacheKeysTests</span>&nbsp;<span class="op" id="8242433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8242437">var</span>&nbsp;<span class="ident" id="8242441">proxy</span>&nbsp;<span class="op" id="8242447">*</span><span class="ident" id="8242448">url</span><span class="op" id="8242451">.</span><span class="ident" id="8242452">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8242458">if</span>&nbsp;<span class="ident" id="8242461">tt</span><span class="op" id="8242463">.</span><span class="ident" id="8242464">proxy</span>&nbsp;<span class="op" id="8242470">!=</span>&nbsp;<span class="string" id="8242473">&#34;&#34;</span>&nbsp;<span class="op" id="8242476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242481">u</span><span class="op" id="8242482">,</span>&nbsp;<span class="ident" id="8242484">err</span>&nbsp;<span class="op" id="8242488">:=</span>&nbsp;<span class="ident" id="8242491">url</span><span class="op" id="8242494">.</span><span class="ident" id="8242495">Parse</span><span class="op" id="8242500">(</span><span class="ident" id="8242501">tt</span><span class="op" id="8242503">.</span><span class="ident" id="8242504">proxy</span><span class="op" id="8242509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8242514">if</span>&nbsp;<span class="ident" id="8242517">err</span>&nbsp;<span class="op" id="8242521">!=</span>&nbsp;<span class="ident" id="8242524">nil</span>&nbsp;<span class="op" id="8242528">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242534">t</span><span class="op" id="8242535">.</span><span class="ident" id="8242536">Fatal</span><span class="op" id="8242541">(</span><span class="ident" id="8242542">err</span><span class="op" id="8242545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242555">proxy</span>&nbsp;<span class="op" id="8242561">=</span>&nbsp;<span class="ident" id="8242563">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242571">cm</span>&nbsp;<span class="op" id="8242574">:=</span>&nbsp;<span class="ident" id="8242577">connectMethod</span><span class="op" id="8242590">{</span><span class="ident" id="8242591">proxy</span><span class="op" id="8242596">,</span>&nbsp;<span class="ident" id="8242598">tt</span><span class="op" id="8242600">.</span><span class="ident" id="8242601">scheme</span><span class="op" id="8242607">,</span>&nbsp;<span class="ident" id="8242609">tt</span><span class="op" id="8242611">.</span><span class="ident" id="8242612">addr</span><span class="op" id="8242616">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8242620">if</span>&nbsp;<span class="ident" id="8242623">got</span>&nbsp;<span class="op" id="8242627">:=</span>&nbsp;<span class="ident" id="8242630">cm</span><span class="op" id="8242632">.</span><span class="ident" id="8242633">key</span><span class="op" id="8242636">(</span><span class="op" id="8242637">)</span><span class="op" id="8242638">.</span><span class="ident" id="8242639">String</span><span class="op" id="8242645">(</span><span class="op" id="8242646">)</span><span class="op" id="8242647">;</span>&nbsp;<span class="ident" id="8242649">got</span>&nbsp;<span class="op" id="8242653">!=</span>&nbsp;<span class="ident" id="8242656">tt</span><span class="op" id="8242658">.</span><span class="ident" id="8242659">key</span>&nbsp;<span class="op" id="8242663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242668">t</span><span class="op" id="8242669">.</span><span class="ident" id="8242670">Fatalf</span><span class="op" id="8242676">(</span><span class="string" id="8242677">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8242715">,</span>&nbsp;<span class="ident" id="8242717">tt</span><span class="op" id="8242719">.</span><span class="ident" id="8242720">proxy</span><span class="op" id="8242725">,</span>&nbsp;<span class="ident" id="8242727">tt</span><span class="op" id="8242729">.</span><span class="ident" id="8242730">scheme</span><span class="op" id="8242736">,</span>&nbsp;<span class="ident" id="8242738">tt</span><span class="op" id="8242740">.</span><span class="ident" id="8242741">addr</span><span class="op" id="8242745">,</span>&nbsp;<span class="ident" id="8242747">got</span><span class="op" id="8242750">,</span>&nbsp;<span class="ident" id="8242752">tt</span><span class="op" id="8242754">.</span><span class="ident" id="8242755">key</span><span class="op" id="8242758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242765">}</span><br>
<span class="lineno"></span><span class="op" id="8242767">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="8242770">func</span>&nbsp;<span class="ident" id="8242775">ResetProxyEnv</span><span class="op" id="8242788">(</span><span class="op" id="8242789">)</span>&nbsp;<span class="op" id="8242791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8242794">for</span>&nbsp;<span class="ident" id="8242798">_</span><span class="op" id="8242799">,</span>&nbsp;<span class="ident" id="8242801">v</span>&nbsp;<span class="op" id="8242803">:=</span>&nbsp;<span class="keyword" id="8242806">range</span>&nbsp;<span class="op" id="8242812">[</span><span class="op" id="8242813">]</span><span class="builtintype" id="8242814">string</span><span class="op" id="8242820">{</span><span class="string" id="8242821">&#34;HTTP_PROXY&#34;</span><span class="op" id="8242833">,</span>&nbsp;<span class="string" id="8242835">&#34;http_proxy&#34;</span><span class="op" id="8242847">,</span>&nbsp;<span class="string" id="8242849">&#34;NO_PROXY&#34;</span><span class="op" id="8242859">,</span>&nbsp;<span class="string" id="8242861">&#34;no_proxy&#34;</span><span class="op" id="8242871">}</span>&nbsp;<span class="op" id="8242873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242877">os</span><span class="op" id="8242879">.</span><span class="ident" id="8242880">Setenv</span><span class="op" id="8242886">(</span><span class="ident" id="8242887">v</span><span class="op" id="8242888">,</span>&nbsp;<span class="string" id="8242890">&#34;&#34;</span><span class="op" id="8242892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8242895">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8242898">ResetCachedEnvironment</span><span class="op" id="8242920">(</span><span class="op" id="8242921">)</span><br>
<span class="lineno"></span><span class="op" id="8242923">}</span>
</div>
</body>
</html>
