<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7669552">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7669607">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7669661">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7669712">package</span>&nbsp;<span class="ident" id="7669720">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7669728">import</span>&nbsp;<span class="op" id="7669735">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669738">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669747">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669754">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669764">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669776">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669782">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669793">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7669803">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7669806">var</span>&nbsp;<span class="ident" id="7669810">fset</span>&nbsp;<span class="op" id="7669815">=</span>&nbsp;<span class="ident" id="7669817">token</span><span class="op" id="7669822">.</span><span class="ident" id="7669823">NewFileSet</span><span class="op" id="7669833">(</span><span class="op" id="7669834">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7669837">var</span>&nbsp;<span class="ident" id="7669841">validFiles</span>&nbsp;<span class="op" id="7669852">=</span>&nbsp;<span class="op" id="7669854">[</span><span class="op" id="7669855">]</span><span class="builtintype" id="7669856">string</span><span class="op" id="7669862">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669865">&#34;parser.go&#34;</span><span class="op" id="7669876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669879">&#34;parser_test.go&#34;</span><span class="op" id="7669895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669898">&#34;error_test.go&#34;</span><span class="op" id="7669913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669916">&#34;short_test.go&#34;</span><span class="op" id="7669931">,</span><br>
<span class="lineno"></span><span class="op" id="7669933">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7669936">func</span>&nbsp;<span class="ident" id="7669941">TestParse</span><span class="op" id="7669950">(</span><span class="ident" id="7669951">t</span>&nbsp;<span class="op" id="7669953">*</span><span class="ident" id="7669954">testing</span><span class="op" id="7669961">.</span><span class="ident" id="7669962">T</span><span class="op" id="7669963">)</span>&nbsp;<span class="op" id="7669965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7669968">for</span>&nbsp;<span class="ident" id="7669972">_</span><span class="op" id="7669973">,</span>&nbsp;<span class="ident" id="7669975">filename</span>&nbsp;<span class="op" id="7669984">:=</span>&nbsp;<span class="keyword" id="7669987">range</span>&nbsp;<span class="ident" id="7669993">validFiles</span>&nbsp;<span class="op" id="7670004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670008">_</span><span class="op" id="7670009">,</span>&nbsp;<span class="ident" id="7670011">err</span>&nbsp;<span class="op" id="7670015">:=</span>&nbsp;<span class="ident" id="7670018">ParseFile</span><span class="op" id="7670027">(</span><span class="ident" id="7670028">fset</span><span class="op" id="7670032">,</span>&nbsp;<span class="ident" id="7670034">filename</span><span class="op" id="7670042">,</span>&nbsp;<span class="ident" id="7670044">nil</span><span class="op" id="7670047">,</span>&nbsp;<span class="ident" id="7670049">DeclarationErrors</span><span class="op" id="7670066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670070">if</span>&nbsp;<span class="ident" id="7670073">err</span>&nbsp;<span class="op" id="7670077">!=</span>&nbsp;<span class="ident" id="7670080">nil</span>&nbsp;<span class="op" id="7670084">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670089">t</span><span class="op" id="7670090">.</span><span class="ident" id="7670091">Fatalf</span><span class="op" id="7670097">(</span><span class="string" id="7670098">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="7670117">,</span>&nbsp;<span class="ident" id="7670119">filename</span><span class="op" id="7670127">,</span>&nbsp;<span class="ident" id="7670129">err</span><span class="op" id="7670132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670139">}</span><br>
<span class="lineno"></span><span class="op" id="7670141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7670144">func</span>&nbsp;<span class="ident" id="7670149">nameFilter</span><span class="op" id="7670159">(</span><span class="ident" id="7670160">filename</span>&nbsp;<span class="builtintype" id="7670169">string</span><span class="op" id="7670175">)</span>&nbsp;<span class="builtintype" id="7670177">bool</span>&nbsp;<span class="op" id="7670182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670185">switch</span>&nbsp;<span class="ident" id="7670192">filename</span>&nbsp;<span class="op" id="7670201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670204">case</span>&nbsp;<span class="string" id="7670209">&#34;parser.go&#34;</span><span class="op" id="7670220">,</span>&nbsp;<span class="string" id="7670222">&#34;interface.go&#34;</span><span class="op" id="7670236">,</span>&nbsp;<span class="string" id="7670238">&#34;parser_test.go&#34;</span><span class="op" id="7670254">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670258">return</span>&nbsp;<span class="ident" id="7670265">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670271">case</span>&nbsp;<span class="string" id="7670276">&#34;parser.go.orig&#34;</span><span class="op" id="7670292">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670296">return</span>&nbsp;<span class="ident" id="7670303">true</span>&nbsp;<span class="comment" id="7670308">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670356">return</span>&nbsp;<span class="ident" id="7670363">false</span><br>
<span class="lineno"></span><span class="op" id="7670369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7670372">func</span>&nbsp;<span class="ident" id="7670377">dirFilter</span><span class="op" id="7670386">(</span><span class="ident" id="7670387">f</span>&nbsp;<span class="ident" id="7670389">os</span><span class="op" id="7670391">.</span><span class="ident" id="7670392">FileInfo</span><span class="op" id="7670400">)</span>&nbsp;<span class="builtintype" id="7670402">bool</span>&nbsp;<span class="op" id="7670407">{</span>&nbsp;<span class="keyword" id="7670409">return</span>&nbsp;<span class="ident" id="7670416">nameFilter</span><span class="op" id="7670426">(</span><span class="ident" id="7670427">f</span><span class="op" id="7670428">.</span><span class="ident" id="7670429">Name</span><span class="op" id="7670433">(</span><span class="op" id="7670434">)</span><span class="op" id="7670435">)</span>&nbsp;<span class="op" id="7670437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7670440">func</span>&nbsp;<span class="ident" id="7670445">TestParseDir</span><span class="op" id="7670457">(</span><span class="ident" id="7670458">t</span>&nbsp;<span class="op" id="7670460">*</span><span class="ident" id="7670461">testing</span><span class="op" id="7670468">.</span><span class="ident" id="7670469">T</span><span class="op" id="7670470">)</span>&nbsp;<span class="op" id="7670472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670475">path</span>&nbsp;<span class="op" id="7670480">:=</span>&nbsp;<span class="string" id="7670483">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670488">pkgs</span><span class="op" id="7670492">,</span>&nbsp;<span class="ident" id="7670494">err</span>&nbsp;<span class="op" id="7670498">:=</span>&nbsp;<span class="ident" id="7670501">ParseDir</span><span class="op" id="7670509">(</span><span class="ident" id="7670510">fset</span><span class="op" id="7670514">,</span>&nbsp;<span class="ident" id="7670516">path</span><span class="op" id="7670520">,</span>&nbsp;<span class="ident" id="7670522">dirFilter</span><span class="op" id="7670531">,</span>&nbsp;<span class="num" id="7670533">0</span><span class="op" id="7670534">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670537">if</span>&nbsp;<span class="ident" id="7670540">err</span>&nbsp;<span class="op" id="7670544">!=</span>&nbsp;<span class="ident" id="7670547">nil</span>&nbsp;<span class="op" id="7670551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670555">t</span><span class="op" id="7670556">.</span><span class="ident" id="7670557">Fatalf</span><span class="op" id="7670563">(</span><span class="string" id="7670564">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="7670582">,</span>&nbsp;<span class="ident" id="7670584">path</span><span class="op" id="7670588">,</span>&nbsp;<span class="ident" id="7670590">err</span><span class="op" id="7670593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670599">if</span>&nbsp;<span class="ident" id="7670602">n</span>&nbsp;<span class="op" id="7670604">:=</span>&nbsp;<span class="builtinfunc" id="7670607">len</span><span class="op" id="7670610">(</span><span class="ident" id="7670611">pkgs</span><span class="op" id="7670615">)</span><span class="op" id="7670616">;</span>&nbsp;<span class="ident" id="7670618">n</span>&nbsp;<span class="op" id="7670620">!=</span>&nbsp;<span class="num" id="7670623">1</span>&nbsp;<span class="op" id="7670625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670629">t</span><span class="op" id="7670630">.</span><span class="ident" id="7670631">Errorf</span><span class="op" id="7670637">(</span><span class="string" id="7670638">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="7670663">,</span>&nbsp;<span class="ident" id="7670665">n</span><span class="op" id="7670666">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670672">pkg</span>&nbsp;<span class="op" id="7670676">:=</span>&nbsp;<span class="ident" id="7670679">pkgs</span><span class="op" id="7670683">[</span><span class="string" id="7670684">&#34;parser&#34;</span><span class="op" id="7670692">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670695">if</span>&nbsp;<span class="ident" id="7670698">pkg</span>&nbsp;<span class="op" id="7670702">==</span>&nbsp;<span class="ident" id="7670705">nil</span>&nbsp;<span class="op" id="7670709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670713">t</span><span class="op" id="7670714">.</span><span class="ident" id="7670715">Errorf</span><span class="op" id="7670721">(</span><span class="string" id="7670722">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="7670750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670754">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670765">if</span>&nbsp;<span class="ident" id="7670768">n</span>&nbsp;<span class="op" id="7670770">:=</span>&nbsp;<span class="builtinfunc" id="7670773">len</span><span class="op" id="7670776">(</span><span class="ident" id="7670777">pkg</span><span class="op" id="7670780">.</span><span class="ident" id="7670781">Files</span><span class="op" id="7670786">)</span><span class="op" id="7670787">;</span>&nbsp;<span class="ident" id="7670789">n</span>&nbsp;<span class="op" id="7670791">!=</span>&nbsp;<span class="num" id="7670794">3</span>&nbsp;<span class="op" id="7670796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670800">t</span><span class="op" id="7670801">.</span><span class="ident" id="7670802">Errorf</span><span class="op" id="7670808">(</span><span class="string" id="7670809">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="7670839">,</span>&nbsp;<span class="ident" id="7670841">n</span><span class="op" id="7670842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670848">for</span>&nbsp;<span class="ident" id="7670852">filename</span>&nbsp;<span class="op" id="7670861">:=</span>&nbsp;<span class="keyword" id="7670864">range</span>&nbsp;<span class="ident" id="7670870">pkg</span><span class="op" id="7670873">.</span><span class="ident" id="7670874">Files</span>&nbsp;<span class="op" id="7670880">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670884">if</span>&nbsp;<span class="op" id="7670887">!</span><span class="ident" id="7670888">nameFilter</span><span class="op" id="7670898">(</span><span class="ident" id="7670899">filename</span><span class="op" id="7670907">)</span>&nbsp;<span class="op" id="7670909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670914">t</span><span class="op" id="7670915">.</span><span class="ident" id="7670916">Errorf</span><span class="op" id="7670922">(</span><span class="string" id="7670923">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="7670952">,</span>&nbsp;<span class="ident" id="7670954">filename</span><span class="op" id="7670962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670969">}</span><br>
<span class="lineno"></span><span class="op" id="7670971">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="7670974">func</span>&nbsp;<span class="ident" id="7670979">TestParseExpr</span><span class="op" id="7670992">(</span><span class="ident" id="7670993">t</span>&nbsp;<span class="op" id="7670995">*</span><span class="ident" id="7670996">testing</span><span class="op" id="7671003">.</span><span class="ident" id="7671004">T</span><span class="op" id="7671005">)</span>&nbsp;<span class="op" id="7671007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671010">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671038">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671072">src</span>&nbsp;<span class="op" id="7671076">:=</span>&nbsp;<span class="string" id="7671079">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671088">x</span><span class="op" id="7671089">,</span>&nbsp;<span class="ident" id="7671091">err</span>&nbsp;<span class="op" id="7671095">:=</span>&nbsp;<span class="ident" id="7671098">ParseExpr</span><span class="op" id="7671107">(</span><span class="ident" id="7671108">src</span><span class="op" id="7671111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671114">if</span>&nbsp;<span class="ident" id="7671117">err</span>&nbsp;<span class="op" id="7671121">!=</span>&nbsp;<span class="ident" id="7671124">nil</span>&nbsp;<span class="op" id="7671128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671132">t</span><span class="op" id="7671133">.</span><span class="ident" id="7671134">Errorf</span><span class="op" id="7671140">(</span><span class="string" id="7671141">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="7671160">,</span>&nbsp;<span class="ident" id="7671162">src</span><span class="op" id="7671165">,</span>&nbsp;<span class="ident" id="7671167">err</span><span class="op" id="7671170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671176">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671193">if</span>&nbsp;<span class="ident" id="7671196">_</span><span class="op" id="7671197">,</span>&nbsp;<span class="ident" id="7671199">ok</span>&nbsp;<span class="op" id="7671202">:=</span>&nbsp;<span class="ident" id="7671205">x</span><span class="op" id="7671206">.</span><span class="op" id="7671207">(</span><span class="op" id="7671208">*</span><span class="ident" id="7671209">ast</span><span class="op" id="7671212">.</span><span class="ident" id="7671213">BinaryExpr</span><span class="op" id="7671223">)</span><span class="op" id="7671224">;</span>&nbsp;<span class="op" id="7671226">!</span><span class="ident" id="7671227">ok</span>&nbsp;<span class="op" id="7671230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671234">t</span><span class="op" id="7671235">.</span><span class="ident" id="7671236">Errorf</span><span class="op" id="7671242">(</span><span class="string" id="7671243">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="7671288">,</span>&nbsp;<span class="ident" id="7671290">src</span><span class="op" id="7671293">,</span>&nbsp;<span class="ident" id="7671295">x</span><span class="op" id="7671296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671303">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671331">src</span>&nbsp;<span class="op" id="7671335">=</span>&nbsp;<span class="string" id="7671337">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671355">x</span><span class="op" id="7671356">,</span>&nbsp;<span class="ident" id="7671358">err</span>&nbsp;<span class="op" id="7671362">=</span>&nbsp;<span class="ident" id="7671364">ParseExpr</span><span class="op" id="7671373">(</span><span class="ident" id="7671374">src</span><span class="op" id="7671377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671380">if</span>&nbsp;<span class="ident" id="7671383">err</span>&nbsp;<span class="op" id="7671387">!=</span>&nbsp;<span class="ident" id="7671390">nil</span>&nbsp;<span class="op" id="7671394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671398">t</span><span class="op" id="7671399">.</span><span class="ident" id="7671400">Errorf</span><span class="op" id="7671406">(</span><span class="string" id="7671407">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="7671426">,</span>&nbsp;<span class="ident" id="7671428">src</span><span class="op" id="7671431">,</span>&nbsp;<span class="ident" id="7671433">err</span><span class="op" id="7671436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671439">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671442">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671459">if</span>&nbsp;<span class="ident" id="7671462">_</span><span class="op" id="7671463">,</span>&nbsp;<span class="ident" id="7671465">ok</span>&nbsp;<span class="op" id="7671468">:=</span>&nbsp;<span class="ident" id="7671471">x</span><span class="op" id="7671472">.</span><span class="op" id="7671473">(</span><span class="op" id="7671474">*</span><span class="ident" id="7671475">ast</span><span class="op" id="7671478">.</span><span class="ident" id="7671479">StructType</span><span class="op" id="7671489">)</span><span class="op" id="7671490">;</span>&nbsp;<span class="op" id="7671492">!</span><span class="ident" id="7671493">ok</span>&nbsp;<span class="op" id="7671496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671500">t</span><span class="op" id="7671501">.</span><span class="ident" id="7671502">Errorf</span><span class="op" id="7671508">(</span><span class="string" id="7671509">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="7671554">,</span>&nbsp;<span class="ident" id="7671556">src</span><span class="op" id="7671559">,</span>&nbsp;<span class="ident" id="7671561">x</span><span class="op" id="7671562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671569">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671595">src</span>&nbsp;<span class="op" id="7671599">=</span>&nbsp;<span class="string" id="7671601">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671610">if</span>&nbsp;<span class="ident" id="7671613">_</span><span class="op" id="7671614">,</span>&nbsp;<span class="ident" id="7671616">err</span>&nbsp;<span class="op" id="7671620">:=</span>&nbsp;<span class="ident" id="7671623">ParseExpr</span><span class="op" id="7671632">(</span><span class="ident" id="7671633">src</span><span class="op" id="7671636">)</span><span class="op" id="7671637">;</span>&nbsp;<span class="ident" id="7671639">err</span>&nbsp;<span class="op" id="7671643">==</span>&nbsp;<span class="ident" id="7671646">nil</span>&nbsp;<span class="op" id="7671650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671654">t</span><span class="op" id="7671655">.</span><span class="ident" id="7671656">Errorf</span><span class="op" id="7671662">(</span><span class="string" id="7671663">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7671692">,</span>&nbsp;<span class="ident" id="7671694">src</span><span class="op" id="7671697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671700">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671704">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671763">src</span>&nbsp;<span class="op" id="7671767">=</span>&nbsp;<span class="string" id="7671769">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671782">if</span>&nbsp;<span class="ident" id="7671785">_</span><span class="op" id="7671786">,</span>&nbsp;<span class="ident" id="7671788">err</span>&nbsp;<span class="op" id="7671792">:=</span>&nbsp;<span class="ident" id="7671795">ParseExpr</span><span class="op" id="7671804">(</span><span class="ident" id="7671805">src</span><span class="op" id="7671808">)</span><span class="op" id="7671809">;</span>&nbsp;<span class="ident" id="7671811">err</span>&nbsp;<span class="op" id="7671815">==</span>&nbsp;<span class="ident" id="7671818">nil</span>&nbsp;<span class="op" id="7671822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671826">t</span><span class="op" id="7671827">.</span><span class="ident" id="7671828">Errorf</span><span class="op" id="7671834">(</span><span class="string" id="7671835">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7671864">,</span>&nbsp;<span class="ident" id="7671866">src</span><span class="op" id="7671869">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7671876">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671939">src</span>&nbsp;<span class="op" id="7671943">=</span>&nbsp;<span class="string" id="7671945">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671956">if</span>&nbsp;<span class="ident" id="7671959">_</span><span class="op" id="7671960">,</span>&nbsp;<span class="ident" id="7671962">err</span>&nbsp;<span class="op" id="7671966">:=</span>&nbsp;<span class="ident" id="7671969">ParseExpr</span><span class="op" id="7671978">(</span><span class="ident" id="7671979">src</span><span class="op" id="7671982">)</span><span class="op" id="7671983">;</span>&nbsp;<span class="ident" id="7671985">err</span>&nbsp;<span class="op" id="7671989">!=</span>&nbsp;<span class="ident" id="7671992">nil</span>&nbsp;<span class="op" id="7671996">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672000">t</span><span class="op" id="7672001">.</span><span class="ident" id="7672002">Errorf</span><span class="op" id="7672008">(</span><span class="string" id="7672009">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7672038">,</span>&nbsp;<span class="ident" id="7672040">src</span><span class="op" id="7672043">,</span>&nbsp;<span class="ident" id="7672045">err</span><span class="op" id="7672048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672054">src</span>&nbsp;<span class="op" id="7672058">=</span>&nbsp;<span class="string" id="7672060">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672070">if</span>&nbsp;<span class="ident" id="7672073">_</span><span class="op" id="7672074">,</span>&nbsp;<span class="ident" id="7672076">err</span>&nbsp;<span class="op" id="7672080">:=</span>&nbsp;<span class="ident" id="7672083">ParseExpr</span><span class="op" id="7672092">(</span><span class="ident" id="7672093">src</span><span class="op" id="7672096">)</span><span class="op" id="7672097">;</span>&nbsp;<span class="ident" id="7672099">err</span>&nbsp;<span class="op" id="7672103">==</span>&nbsp;<span class="ident" id="7672106">nil</span>&nbsp;<span class="op" id="7672110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672114">t</span><span class="op" id="7672115">.</span><span class="ident" id="7672116">Errorf</span><span class="op" id="7672122">(</span><span class="string" id="7672123">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7672152">,</span>&nbsp;<span class="ident" id="7672154">src</span><span class="op" id="7672157">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7672164">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672217">const</span>&nbsp;<span class="ident" id="7672223">validExpr</span>&nbsp;<span class="op" id="7672233">=</span>&nbsp;<span class="string" id="7672235">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672244">const</span>&nbsp;<span class="ident" id="7672250">anything</span>&nbsp;<span class="op" id="7672259">=</span>&nbsp;<span class="string" id="7672261">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672274">for</span>&nbsp;<span class="ident" id="7672278">_</span><span class="op" id="7672279">,</span>&nbsp;<span class="ident" id="7672281">c</span>&nbsp;<span class="op" id="7672283">:=</span>&nbsp;<span class="keyword" id="7672286">range</span>&nbsp;<span class="string" id="7672292">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="7672301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672305">src</span>&nbsp;<span class="op" id="7672309">:=</span>&nbsp;<span class="ident" id="7672312">validExpr</span>&nbsp;<span class="op" id="7672322">+</span>&nbsp;<span class="builtintype" id="7672324">string</span><span class="op" id="7672330">(</span><span class="ident" id="7672331">c</span><span class="op" id="7672332">)</span>&nbsp;<span class="op" id="7672334">+</span>&nbsp;<span class="ident" id="7672336">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672347">if</span>&nbsp;<span class="ident" id="7672350">_</span><span class="op" id="7672351">,</span>&nbsp;<span class="ident" id="7672353">err</span>&nbsp;<span class="op" id="7672357">:=</span>&nbsp;<span class="ident" id="7672360">ParseExpr</span><span class="op" id="7672369">(</span><span class="ident" id="7672370">src</span><span class="op" id="7672373">)</span><span class="op" id="7672374">;</span>&nbsp;<span class="ident" id="7672376">err</span>&nbsp;<span class="op" id="7672380">==</span>&nbsp;<span class="ident" id="7672383">nil</span>&nbsp;<span class="op" id="7672387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672392">t</span><span class="op" id="7672393">.</span><span class="ident" id="7672394">Errorf</span><span class="op" id="7672400">(</span><span class="string" id="7672401">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="7672430">,</span>&nbsp;<span class="ident" id="7672432">src</span><span class="op" id="7672435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672439">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7672446">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672475">for</span>&nbsp;<span class="ident" id="7672479">_</span><span class="op" id="7672480">,</span>&nbsp;<span class="ident" id="7672482">src</span>&nbsp;<span class="op" id="7672486">:=</span>&nbsp;<span class="keyword" id="7672489">range</span>&nbsp;<span class="ident" id="7672495">valids</span>&nbsp;<span class="op" id="7672502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672506">ParseExpr</span><span class="op" id="7672515">(</span><span class="ident" id="7672516">src</span><span class="op" id="7672519">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672522">}</span><br>
<span class="lineno"></span><span class="op" id="7672524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7672527">func</span>&nbsp;<span class="ident" id="7672532">TestColonEqualsScope</span><span class="op" id="7672552">(</span><span class="ident" id="7672553">t</span>&nbsp;<span class="op" id="7672555">*</span><span class="ident" id="7672556">testing</span><span class="op" id="7672563">.</span><span class="ident" id="7672564">T</span><span class="op" id="7672565">)</span>&nbsp;<span class="op" id="7672567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672570">f</span><span class="op" id="7672571">,</span>&nbsp;<span class="ident" id="7672573">err</span>&nbsp;<span class="op" id="7672577">:=</span>&nbsp;<span class="ident" id="7672580">ParseFile</span><span class="op" id="7672589">(</span><span class="ident" id="7672590">fset</span><span class="op" id="7672594">,</span>&nbsp;<span class="string" id="7672596">&#34;&#34;</span><span class="op" id="7672598">,</span>&nbsp;<span class="string" id="7672600">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="7672644">,</span>&nbsp;<span class="num" id="7672646">0</span><span class="op" id="7672647">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672650">if</span>&nbsp;<span class="ident" id="7672653">err</span>&nbsp;<span class="op" id="7672657">!=</span>&nbsp;<span class="ident" id="7672660">nil</span>&nbsp;<span class="op" id="7672664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672668">t</span><span class="op" id="7672669">.</span><span class="ident" id="7672670">Fatal</span><span class="op" id="7672675">(</span><span class="ident" id="7672676">err</span><span class="op" id="7672679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7672686">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672737">as</span>&nbsp;<span class="op" id="7672740">:=</span>&nbsp;<span class="ident" id="7672743">f</span><span class="op" id="7672744">.</span><span class="ident" id="7672745">Decls</span><span class="op" id="7672750">[</span><span class="num" id="7672751">0</span><span class="op" id="7672752">]</span><span class="op" id="7672753">.</span><span class="op" id="7672754">(</span><span class="op" id="7672755">*</span><span class="ident" id="7672756">ast</span><span class="op" id="7672759">.</span><span class="ident" id="7672760">FuncDecl</span><span class="op" id="7672768">)</span><span class="op" id="7672769">.</span><span class="ident" id="7672770">Body</span><span class="op" id="7672774">.</span><span class="ident" id="7672775">List</span><span class="op" id="7672779">[</span><span class="num" id="7672780">0</span><span class="op" id="7672781">]</span><span class="op" id="7672782">.</span><span class="op" id="7672783">(</span><span class="op" id="7672784">*</span><span class="ident" id="7672785">ast</span><span class="op" id="7672788">.</span><span class="ident" id="7672789">AssignStmt</span><span class="op" id="7672799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672802">for</span>&nbsp;<span class="ident" id="7672806">_</span><span class="op" id="7672807">,</span>&nbsp;<span class="ident" id="7672809">v</span>&nbsp;<span class="op" id="7672811">:=</span>&nbsp;<span class="keyword" id="7672814">range</span>&nbsp;<span class="ident" id="7672820">as</span><span class="op" id="7672822">.</span><span class="ident" id="7672823">Rhs</span>&nbsp;<span class="op" id="7672827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672831">id</span>&nbsp;<span class="op" id="7672834">:=</span>&nbsp;<span class="ident" id="7672837">v</span><span class="op" id="7672838">.</span><span class="op" id="7672839">(</span><span class="op" id="7672840">*</span><span class="ident" id="7672841">ast</span><span class="op" id="7672844">.</span><span class="ident" id="7672845">Ident</span><span class="op" id="7672850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672854">if</span>&nbsp;<span class="ident" id="7672857">id</span><span class="op" id="7672859">.</span><span class="ident" id="7672860">Obj</span>&nbsp;<span class="op" id="7672864">!=</span>&nbsp;<span class="ident" id="7672867">nil</span>&nbsp;<span class="op" id="7672871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672876">t</span><span class="op" id="7672877">.</span><span class="ident" id="7672878">Errorf</span><span class="op" id="7672884">(</span><span class="string" id="7672885">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="7672913">,</span>&nbsp;<span class="ident" id="7672915">id</span><span class="op" id="7672917">.</span><span class="ident" id="7672918">Name</span><span class="op" id="7672922">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672932">for</span>&nbsp;<span class="ident" id="7672936">_</span><span class="op" id="7672937">,</span>&nbsp;<span class="ident" id="7672939">v</span>&nbsp;<span class="op" id="7672941">:=</span>&nbsp;<span class="keyword" id="7672944">range</span>&nbsp;<span class="ident" id="7672950">as</span><span class="op" id="7672952">.</span><span class="ident" id="7672953">Lhs</span>&nbsp;<span class="op" id="7672957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672961">id</span>&nbsp;<span class="op" id="7672964">:=</span>&nbsp;<span class="ident" id="7672967">v</span><span class="op" id="7672968">.</span><span class="op" id="7672969">(</span><span class="op" id="7672970">*</span><span class="ident" id="7672971">ast</span><span class="op" id="7672974">.</span><span class="ident" id="7672975">Ident</span><span class="op" id="7672980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672984">if</span>&nbsp;<span class="ident" id="7672987">id</span><span class="op" id="7672989">.</span><span class="ident" id="7672990">Obj</span>&nbsp;<span class="op" id="7672994">==</span>&nbsp;<span class="ident" id="7672997">nil</span>&nbsp;<span class="op" id="7673001">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673006">t</span><span class="op" id="7673007">.</span><span class="ident" id="7673008">Errorf</span><span class="op" id="7673014">(</span><span class="string" id="7673015">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="7673049">,</span>&nbsp;<span class="ident" id="7673051">id</span><span class="op" id="7673053">.</span><span class="ident" id="7673054">Name</span><span class="op" id="7673058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673065">}</span><br>
<span class="lineno"></span><span class="op" id="7673067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7673070">func</span>&nbsp;<span class="ident" id="7673075">TestVarScope</span><span class="op" id="7673087">(</span><span class="ident" id="7673088">t</span>&nbsp;<span class="op" id="7673090">*</span><span class="ident" id="7673091">testing</span><span class="op" id="7673098">.</span><span class="ident" id="7673099">T</span><span class="op" id="7673100">)</span>&nbsp;<span class="op" id="7673102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673105">f</span><span class="op" id="7673106">,</span>&nbsp;<span class="ident" id="7673108">err</span>&nbsp;<span class="op" id="7673112">:=</span>&nbsp;<span class="ident" id="7673115">ParseFile</span><span class="op" id="7673124">(</span><span class="ident" id="7673125">fset</span><span class="op" id="7673129">,</span>&nbsp;<span class="string" id="7673131">&#34;&#34;</span><span class="op" id="7673133">,</span>&nbsp;<span class="string" id="7673135">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="7673182">,</span>&nbsp;<span class="num" id="7673184">0</span><span class="op" id="7673185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673188">if</span>&nbsp;<span class="ident" id="7673191">err</span>&nbsp;<span class="op" id="7673195">!=</span>&nbsp;<span class="ident" id="7673198">nil</span>&nbsp;<span class="op" id="7673202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673206">t</span><span class="op" id="7673207">.</span><span class="ident" id="7673208">Fatal</span><span class="op" id="7673213">(</span><span class="ident" id="7673214">err</span><span class="op" id="7673217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673220">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7673224">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673275">as</span>&nbsp;<span class="op" id="7673278">:=</span>&nbsp;<span class="ident" id="7673281">f</span><span class="op" id="7673282">.</span><span class="ident" id="7673283">Decls</span><span class="op" id="7673288">[</span><span class="num" id="7673289">0</span><span class="op" id="7673290">]</span><span class="op" id="7673291">.</span><span class="op" id="7673292">(</span><span class="op" id="7673293">*</span><span class="ident" id="7673294">ast</span><span class="op" id="7673297">.</span><span class="ident" id="7673298">FuncDecl</span><span class="op" id="7673306">)</span><span class="op" id="7673307">.</span><span class="ident" id="7673308">Body</span><span class="op" id="7673312">.</span><span class="ident" id="7673313">List</span><span class="op" id="7673317">[</span><span class="num" id="7673318">0</span><span class="op" id="7673319">]</span><span class="op" id="7673320">.</span><span class="op" id="7673321">(</span><span class="op" id="7673322">*</span><span class="ident" id="7673323">ast</span><span class="op" id="7673326">.</span><span class="ident" id="7673327">DeclStmt</span><span class="op" id="7673335">)</span><span class="op" id="7673336">.</span><span class="ident" id="7673337">Decl</span><span class="op" id="7673341">.</span><span class="op" id="7673342">(</span><span class="op" id="7673343">*</span><span class="ident" id="7673344">ast</span><span class="op" id="7673347">.</span><span class="ident" id="7673348">GenDecl</span><span class="op" id="7673355">)</span><span class="op" id="7673356">.</span><span class="ident" id="7673357">Specs</span><span class="op" id="7673362">[</span><span class="num" id="7673363">0</span><span class="op" id="7673364">]</span><span class="op" id="7673365">.</span><span class="op" id="7673366">(</span><span class="op" id="7673367">*</span><span class="ident" id="7673368">ast</span><span class="op" id="7673371">.</span><span class="ident" id="7673372">ValueSpec</span><span class="op" id="7673381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673384">for</span>&nbsp;<span class="ident" id="7673388">_</span><span class="op" id="7673389">,</span>&nbsp;<span class="ident" id="7673391">v</span>&nbsp;<span class="op" id="7673393">:=</span>&nbsp;<span class="keyword" id="7673396">range</span>&nbsp;<span class="ident" id="7673402">as</span><span class="op" id="7673404">.</span><span class="ident" id="7673405">Values</span>&nbsp;<span class="op" id="7673412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673416">id</span>&nbsp;<span class="op" id="7673419">:=</span>&nbsp;<span class="ident" id="7673422">v</span><span class="op" id="7673423">.</span><span class="op" id="7673424">(</span><span class="op" id="7673425">*</span><span class="ident" id="7673426">ast</span><span class="op" id="7673429">.</span><span class="ident" id="7673430">Ident</span><span class="op" id="7673435">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673439">if</span>&nbsp;<span class="ident" id="7673442">id</span><span class="op" id="7673444">.</span><span class="ident" id="7673445">Obj</span>&nbsp;<span class="op" id="7673449">!=</span>&nbsp;<span class="ident" id="7673452">nil</span>&nbsp;<span class="op" id="7673456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673461">t</span><span class="op" id="7673462">.</span><span class="ident" id="7673463">Errorf</span><span class="op" id="7673469">(</span><span class="string" id="7673470">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="7673498">,</span>&nbsp;<span class="ident" id="7673500">id</span><span class="op" id="7673502">.</span><span class="ident" id="7673503">Name</span><span class="op" id="7673507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673517">for</span>&nbsp;<span class="ident" id="7673521">_</span><span class="op" id="7673522">,</span>&nbsp;<span class="ident" id="7673524">id</span>&nbsp;<span class="op" id="7673527">:=</span>&nbsp;<span class="keyword" id="7673530">range</span>&nbsp;<span class="ident" id="7673536">as</span><span class="op" id="7673538">.</span><span class="ident" id="7673539">Names</span>&nbsp;<span class="op" id="7673545">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673549">if</span>&nbsp;<span class="ident" id="7673552">id</span><span class="op" id="7673554">.</span><span class="ident" id="7673555">Obj</span>&nbsp;<span class="op" id="7673559">==</span>&nbsp;<span class="ident" id="7673562">nil</span>&nbsp;<span class="op" id="7673566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673571">t</span><span class="op" id="7673572">.</span><span class="ident" id="7673573">Errorf</span><span class="op" id="7673579">(</span><span class="string" id="7673580">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="7673614">,</span>&nbsp;<span class="ident" id="7673616">id</span><span class="op" id="7673618">.</span><span class="ident" id="7673619">Name</span><span class="op" id="7673623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673630">}</span><br>
<span class="lineno"></span><span class="op" id="7673632">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="7673635">func</span>&nbsp;<span class="ident" id="7673640">TestObjects</span><span class="op" id="7673651">(</span><span class="ident" id="7673652">t</span>&nbsp;<span class="op" id="7673654">*</span><span class="ident" id="7673655">testing</span><span class="op" id="7673662">.</span><span class="ident" id="7673663">T</span><span class="op" id="7673664">)</span>&nbsp;<span class="op" id="7673666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673669">const</span>&nbsp;<span class="ident" id="7673675">src</span>&nbsp;<span class="op" id="7673679">=</span>&nbsp;<span class="string" id="7673681">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673772">f</span><span class="op" id="7673773">,</span>&nbsp;<span class="ident" id="7673775">err</span>&nbsp;<span class="op" id="7673779">:=</span>&nbsp;<span class="ident" id="7673782">ParseFile</span><span class="op" id="7673791">(</span><span class="ident" id="7673792">fset</span><span class="op" id="7673796">,</span>&nbsp;<span class="string" id="7673798">&#34;&#34;</span><span class="op" id="7673800">,</span>&nbsp;<span class="ident" id="7673802">src</span><span class="op" id="7673805">,</span>&nbsp;<span class="num" id="7673807">0</span><span class="op" id="7673808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673811">if</span>&nbsp;<span class="ident" id="7673814">err</span>&nbsp;<span class="op" id="7673818">!=</span>&nbsp;<span class="ident" id="7673821">nil</span>&nbsp;<span class="op" id="7673825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673829">t</span><span class="op" id="7673830">.</span><span class="ident" id="7673831">Fatal</span><span class="op" id="7673836">(</span><span class="ident" id="7673837">err</span><span class="op" id="7673840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673843">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673847">objects</span>&nbsp;<span class="op" id="7673855">:=</span>&nbsp;<span class="keyword" id="7673858">map</span><span class="op" id="7673861">[</span><span class="builtintype" id="7673862">string</span><span class="op" id="7673868">]</span><span class="ident" id="7673869">ast</span><span class="op" id="7673872">.</span><span class="ident" id="7673873">ObjKind</span><span class="op" id="7673880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7673884">&#34;p&#34;</span><span class="op" id="7673887">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7673891">ast</span><span class="op" id="7673894">.</span><span class="ident" id="7673895">Bad</span><span class="op" id="7673898">,</span>&nbsp;<span class="comment" id="7673900">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7673920">&#34;fmt&#34;</span><span class="op" id="7673925">:</span>&nbsp;<span class="ident" id="7673927">ast</span><span class="op" id="7673930">.</span><span class="ident" id="7673931">Bad</span><span class="op" id="7673934">,</span>&nbsp;<span class="comment" id="7673936">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7673958">&#34;pi&#34;</span><span class="op" id="7673962">:</span>&nbsp;&nbsp;<span class="ident" id="7673965">ast</span><span class="op" id="7673968">.</span><span class="ident" id="7673969">Con</span><span class="op" id="7673972">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7673976">&#34;T&#34;</span><span class="op" id="7673979">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7673983">ast</span><span class="op" id="7673986">.</span><span class="ident" id="7673987">Typ</span><span class="op" id="7673990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7673994">&#34;x&#34;</span><span class="op" id="7673997">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7674001">ast</span><span class="op" id="7674004">.</span><span class="ident" id="7674005">Var</span><span class="op" id="7674008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7674012">&#34;int&#34;</span><span class="op" id="7674017">:</span>&nbsp;<span class="ident" id="7674019">ast</span><span class="op" id="7674022">.</span><span class="ident" id="7674023">Bad</span><span class="op" id="7674026">,</span>&nbsp;<span class="comment" id="7674028">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7674050">&#34;f&#34;</span><span class="op" id="7674053">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7674057">ast</span><span class="op" id="7674060">.</span><span class="ident" id="7674061">Fun</span><span class="op" id="7674064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7674068">&#34;L&#34;</span><span class="op" id="7674071">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7674075">ast</span><span class="op" id="7674078">.</span><span class="ident" id="7674079">Lbl</span><span class="op" id="7674082">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674089">ast</span><span class="op" id="7674092">.</span><span class="ident" id="7674093">Inspect</span><span class="op" id="7674100">(</span><span class="ident" id="7674101">f</span><span class="op" id="7674102">,</span>&nbsp;<span class="keyword" id="7674104">func</span><span class="op" id="7674108">(</span><span class="ident" id="7674109">n</span>&nbsp;<span class="ident" id="7674111">ast</span><span class="op" id="7674114">.</span><span class="ident" id="7674115">Node</span><span class="op" id="7674119">)</span>&nbsp;<span class="builtintype" id="7674121">bool</span>&nbsp;<span class="op" id="7674126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674130">if</span>&nbsp;<span class="ident" id="7674133">ident</span><span class="op" id="7674138">,</span>&nbsp;<span class="ident" id="7674140">ok</span>&nbsp;<span class="op" id="7674143">:=</span>&nbsp;<span class="ident" id="7674146">n</span><span class="op" id="7674147">.</span><span class="op" id="7674148">(</span><span class="op" id="7674149">*</span><span class="ident" id="7674150">ast</span><span class="op" id="7674153">.</span><span class="ident" id="7674154">Ident</span><span class="op" id="7674159">)</span><span class="op" id="7674160">;</span>&nbsp;<span class="ident" id="7674162">ok</span>&nbsp;<span class="op" id="7674165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674170">obj</span>&nbsp;<span class="op" id="7674174">:=</span>&nbsp;<span class="ident" id="7674177">ident</span><span class="op" id="7674182">.</span><span class="ident" id="7674183">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674190">if</span>&nbsp;<span class="ident" id="7674193">obj</span>&nbsp;<span class="op" id="7674197">==</span>&nbsp;<span class="ident" id="7674200">nil</span>&nbsp;<span class="op" id="7674204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674210">if</span>&nbsp;<span class="ident" id="7674213">objects</span><span class="op" id="7674220">[</span><span class="ident" id="7674221">ident</span><span class="op" id="7674226">.</span><span class="ident" id="7674227">Name</span><span class="op" id="7674231">]</span>&nbsp;<span class="op" id="7674233">!=</span>&nbsp;<span class="ident" id="7674236">ast</span><span class="op" id="7674239">.</span><span class="ident" id="7674240">Bad</span>&nbsp;<span class="op" id="7674244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674251">t</span><span class="op" id="7674252">.</span><span class="ident" id="7674253">Errorf</span><span class="op" id="7674259">(</span><span class="string" id="7674260">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="7674278">,</span>&nbsp;<span class="ident" id="7674280">ident</span><span class="op" id="7674285">.</span><span class="ident" id="7674286">Name</span><span class="op" id="7674290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674302">return</span>&nbsp;<span class="ident" id="7674309">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674322">if</span>&nbsp;<span class="ident" id="7674325">obj</span><span class="op" id="7674328">.</span><span class="ident" id="7674329">Name</span>&nbsp;<span class="op" id="7674334">!=</span>&nbsp;<span class="ident" id="7674337">ident</span><span class="op" id="7674342">.</span><span class="ident" id="7674343">Name</span>&nbsp;<span class="op" id="7674348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674354">t</span><span class="op" id="7674355">.</span><span class="ident" id="7674356">Errorf</span><span class="op" id="7674362">(</span><span class="string" id="7674363">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7674414">,</span>&nbsp;<span class="ident" id="7674416">obj</span><span class="op" id="7674419">.</span><span class="ident" id="7674420">Name</span><span class="op" id="7674424">,</span>&nbsp;<span class="ident" id="7674426">ident</span><span class="op" id="7674431">.</span><span class="ident" id="7674432">Name</span><span class="op" id="7674436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674446">kind</span>&nbsp;<span class="op" id="7674451">:=</span>&nbsp;<span class="ident" id="7674454">objects</span><span class="op" id="7674461">[</span><span class="ident" id="7674462">ident</span><span class="op" id="7674467">.</span><span class="ident" id="7674468">Name</span><span class="op" id="7674472">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674477">if</span>&nbsp;<span class="ident" id="7674480">obj</span><span class="op" id="7674483">.</span><span class="ident" id="7674484">Kind</span>&nbsp;<span class="op" id="7674489">!=</span>&nbsp;<span class="ident" id="7674492">kind</span>&nbsp;<span class="op" id="7674497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674503">t</span><span class="op" id="7674504">.</span><span class="ident" id="7674505">Errorf</span><span class="op" id="7674511">(</span><span class="string" id="7674512">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7674540">,</span>&nbsp;<span class="ident" id="7674542">ident</span><span class="op" id="7674547">.</span><span class="ident" id="7674548">Name</span><span class="op" id="7674552">,</span>&nbsp;<span class="ident" id="7674554">obj</span><span class="op" id="7674557">.</span><span class="ident" id="7674558">Kind</span><span class="op" id="7674562">,</span>&nbsp;<span class="ident" id="7674564">kind</span><span class="op" id="7674568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7674581">return</span>&nbsp;<span class="ident" id="7674588">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7674594">}</span><span class="op" id="7674595">)</span><br>
<span class="lineno"></span><span class="op" id="7674597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7674600">func</span>&nbsp;<span class="ident" id="7674605">TestUnresolved</span><span class="op" id="7674619">(</span><span class="ident" id="7674620">t</span>&nbsp;<span class="op" id="7674622">*</span><span class="ident" id="7674623">testing</span><span class="op" id="7674630">.</span><span class="ident" id="7674631">T</span><span class="op" id="7674632">)</span>&nbsp;<span class="op" id="7674634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7674637">f</span><span class="op" id="7674638">,</span>&nbsp;<span class="ident" id="7674640">err</span>&nbsp;<span class="op" id="7674644">:=</span>&nbsp;<span class="ident" id="7674647">ParseFile</span><span class="op" id="7674656">(</span><span class="ident" id="7674657">fset</span><span class="op" id="7674661">,</span>&nbsp;<span class="string" id="7674663">&#34;&#34;</span><span class="op" id="7674665">,</span>&nbsp;<span class="string" id="7674667">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="7675145">,</span>&nbsp;<span class="num" id="7675147">0</span><span class="op" id="7675148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7675151">if</span>&nbsp;<span class="ident" id="7675154">err</span>&nbsp;<span class="op" id="7675158">!=</span>&nbsp;<span class="ident" id="7675161">nil</span>&nbsp;<span class="op" id="7675165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7675169">t</span><span class="op" id="7675170">.</span><span class="ident" id="7675171">Fatal</span><span class="op" id="7675176">(</span><span class="ident" id="7675177">err</span><span class="op" id="7675180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7675183">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7675187">want</span>&nbsp;<span class="op" id="7675192">:=</span>&nbsp;<span class="string" id="7675195">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7675202">+</span>&nbsp;<span class="comment" id="7675204">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675213">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7675231">+</span>&nbsp;<span class="comment" id="7675233">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675242">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7675255">+</span>&nbsp;<span class="comment" id="7675257">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675266">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7675277">+</span>&nbsp;<span class="comment" id="7675279">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675288">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7675299">+</span>&nbsp;<span class="comment" id="7675301">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7675310">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675315">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7675322">+</span>&nbsp;<span class="comment" id="7675324">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675333">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7675351">+</span>&nbsp;<span class="comment" id="7675353">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675362">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7675375">+</span>&nbsp;<span class="comment" id="7675377">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675386">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7675397">+</span>&nbsp;<span class="comment" id="7675399">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675408">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="7675419">+</span>&nbsp;<span class="comment" id="7675421">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7675430">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675435">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7675442">+</span>&nbsp;<span class="comment" id="7675444">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675453">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7675465">+</span>&nbsp;<span class="comment" id="7675467">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675476">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7675489">+</span>&nbsp;<span class="comment" id="7675491">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7675500">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675505">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="7675512">+</span>&nbsp;<span class="comment" id="7675514">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675523">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="7675541">+</span>&nbsp;<span class="comment" id="7675543">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675552">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="7675561">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7675570">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7675605">var</span>&nbsp;<span class="ident" id="7675609">buf</span>&nbsp;<span class="ident" id="7675613">bytes</span><span class="op" id="7675618">.</span><span class="ident" id="7675619">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7675627">for</span>&nbsp;<span class="ident" id="7675631">_</span><span class="op" id="7675632">,</span>&nbsp;<span class="ident" id="7675634">u</span>&nbsp;<span class="op" id="7675636">:=</span>&nbsp;<span class="keyword" id="7675639">range</span>&nbsp;<span class="ident" id="7675645">f</span><span class="op" id="7675646">.</span><span class="ident" id="7675647">Unresolved</span>&nbsp;<span class="op" id="7675658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7675662">buf</span><span class="op" id="7675665">.</span><span class="ident" id="7675666">WriteString</span><span class="op" id="7675677">(</span><span class="ident" id="7675678">u</span><span class="op" id="7675679">.</span><span class="ident" id="7675680">Name</span><span class="op" id="7675684">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7675688">buf</span><span class="op" id="7675691">.</span><span class="ident" id="7675692">WriteByte</span><span class="op" id="7675701">(</span><span class="string" id="7675702">&#39;&nbsp;&#39;</span><span class="op" id="7675705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7675708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7675711">got</span>&nbsp;<span class="op" id="7675715">:=</span>&nbsp;<span class="ident" id="7675718">buf</span><span class="op" id="7675721">.</span><span class="ident" id="7675722">String</span><span class="op" id="7675728">(</span><span class="op" id="7675729">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7675733">if</span>&nbsp;<span class="ident" id="7675736">got</span>&nbsp;<span class="op" id="7675740">!=</span>&nbsp;<span class="ident" id="7675743">want</span>&nbsp;<span class="op" id="7675748">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7675752">t</span><span class="op" id="7675753">.</span><span class="ident" id="7675754">Errorf</span><span class="op" id="7675760">(</span><span class="string" id="7675761">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="7675783">,</span>&nbsp;<span class="ident" id="7675785">got</span><span class="op" id="7675788">,</span>&nbsp;<span class="ident" id="7675790">want</span><span class="op" id="7675794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7675797">}</span><br>
<span class="lineno"></span><span class="op" id="7675799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7675802">var</span>&nbsp;<span class="ident" id="7675806">imports</span>&nbsp;<span class="op" id="7675814">=</span>&nbsp;<span class="keyword" id="7675816">map</span><span class="op" id="7675819">[</span><span class="builtintype" id="7675820">string</span><span class="op" id="7675826">]</span><span class="builtintype" id="7675827">bool</span><span class="op" id="7675831">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675834">`&#34;a&#34;`</span><span class="op" id="7675839">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7675848">true</span><span class="op" id="7675852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675855">&#34;`a`&#34;</span><span class="op" id="7675860">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7675869">true</span><span class="op" id="7675873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675876">`&#34;a/b&#34;`</span><span class="op" id="7675883">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7675890">true</span><span class="op" id="7675894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675897">`&#34;a.b&#34;`</span><span class="op" id="7675904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7675911">true</span><span class="op" id="7675915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675918">`&#34;m\x61th&#34;`</span><span class="op" id="7675929">:</span>&nbsp;&nbsp;<span class="ident" id="7675932">true</span><span class="op" id="7675936">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675939">`&#34;greek/αβ&#34;`</span><span class="op" id="7675953">:</span>&nbsp;<span class="ident" id="7675955">true</span><span class="op" id="7675959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7675962">`&#34;&#34;`</span><span class="op" id="7675966">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7675976">false</span><span class="op" id="7675981">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7675985">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7676037">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7676091">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7676134">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7676179">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676232">`&#34;\x00&#34;`</span><span class="op" id="7676240">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676246">false</span><span class="op" id="7676251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676254">&#34;`\x00`&#34;</span><span class="op" id="7676262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676268">false</span><span class="op" id="7676273">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676276">`&#34;\x7f&#34;`</span><span class="op" id="7676284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676290">false</span><span class="op" id="7676295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676298">&#34;`\x7f`&#34;</span><span class="op" id="7676306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676312">false</span><span class="op" id="7676317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676320">`&#34;a!&#34;`</span><span class="op" id="7676326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676334">false</span><span class="op" id="7676339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676342">&#34;`a!`&#34;</span><span class="op" id="7676348">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676356">false</span><span class="op" id="7676361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676364">`&#34;a&nbsp;b&#34;`</span><span class="op" id="7676371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676378">false</span><span class="op" id="7676383">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676386">&#34;`a&nbsp;b`&#34;</span><span class="op" id="7676393">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676400">false</span><span class="op" id="7676405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676408">`&#34;a\\b&#34;`</span><span class="op" id="7676416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676422">false</span><span class="op" id="7676427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676430">&#34;`a\\b`&#34;</span><span class="op" id="7676438">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676444">false</span><span class="op" id="7676449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676452">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="7676461">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676466">false</span><span class="op" id="7676471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676474">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="7676483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7676488">false</span><span class="op" id="7676493">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676496">`&#34;\x80\x80&#34;`</span><span class="op" id="7676508">:</span>&nbsp;<span class="ident" id="7676510">false</span><span class="op" id="7676515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676518">&#34;`\x80\x80`&#34;</span><span class="op" id="7676530">:</span>&nbsp;<span class="ident" id="7676532">false</span><span class="op" id="7676537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676540">`&#34;\xFFFD&#34;`</span><span class="op" id="7676550">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7676554">false</span><span class="op" id="7676559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7676562">&#34;`\xFFFD`&#34;</span><span class="op" id="7676572">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7676576">false</span><span class="op" id="7676581">,</span><br>
<span class="lineno"></span><span class="op" id="7676583">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="7676586">func</span>&nbsp;<span class="ident" id="7676591">TestImports</span><span class="op" id="7676602">(</span><span class="ident" id="7676603">t</span>&nbsp;<span class="op" id="7676605">*</span><span class="ident" id="7676606">testing</span><span class="op" id="7676613">.</span><span class="ident" id="7676614">T</span><span class="op" id="7676615">)</span>&nbsp;<span class="op" id="7676617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7676620">for</span>&nbsp;<span class="ident" id="7676624">path</span><span class="op" id="7676628">,</span>&nbsp;<span class="ident" id="7676630">isValid</span>&nbsp;<span class="op" id="7676638">:=</span>&nbsp;<span class="keyword" id="7676641">range</span>&nbsp;<span class="ident" id="7676647">imports</span>&nbsp;<span class="op" id="7676655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7676659">src</span>&nbsp;<span class="op" id="7676663">:=</span>&nbsp;<span class="ident" id="7676666">fmt</span><span class="op" id="7676669">.</span><span class="ident" id="7676670">Sprintf</span><span class="op" id="7676677">(</span><span class="string" id="7676678">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="7676700">,</span>&nbsp;<span class="ident" id="7676702">path</span><span class="op" id="7676706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7676710">_</span><span class="op" id="7676711">,</span>&nbsp;<span class="ident" id="7676713">err</span>&nbsp;<span class="op" id="7676717">:=</span>&nbsp;<span class="ident" id="7676720">ParseFile</span><span class="op" id="7676729">(</span><span class="ident" id="7676730">fset</span><span class="op" id="7676734">,</span>&nbsp;<span class="string" id="7676736">&#34;&#34;</span><span class="op" id="7676738">,</span>&nbsp;<span class="ident" id="7676740">src</span><span class="op" id="7676743">,</span>&nbsp;<span class="num" id="7676745">0</span><span class="op" id="7676746">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7676750">switch</span>&nbsp;<span class="op" id="7676757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7676761">case</span>&nbsp;<span class="ident" id="7676766">err</span>&nbsp;<span class="op" id="7676770">!=</span>&nbsp;<span class="ident" id="7676773">nil</span>&nbsp;<span class="op" id="7676777">&amp;&amp;</span>&nbsp;<span class="ident" id="7676780">isValid</span><span class="op" id="7676787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7676792">t</span><span class="op" id="7676793">.</span><span class="ident" id="7676794">Errorf</span><span class="op" id="7676800">(</span><span class="string" id="7676801">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="7676843">,</span>&nbsp;<span class="ident" id="7676845">src</span><span class="op" id="7676848">,</span>&nbsp;<span class="ident" id="7676850">err</span><span class="op" id="7676853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7676857">case</span>&nbsp;<span class="ident" id="7676862">err</span>&nbsp;<span class="op" id="7676866">==</span>&nbsp;<span class="ident" id="7676869">nil</span>&nbsp;<span class="op" id="7676873">&amp;&amp;</span>&nbsp;<span class="op" id="7676876">!</span><span class="ident" id="7676877">isValid</span><span class="op" id="7676884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7676889">t</span><span class="op" id="7676890">.</span><span class="ident" id="7676891">Errorf</span><span class="op" id="7676897">(</span><span class="string" id="7676898">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="7676941">,</span>&nbsp;<span class="ident" id="7676943">src</span><span class="op" id="7676946">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7676950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7676953">}</span><br>
<span class="lineno"></span><span class="op" id="7676955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7676958">func</span>&nbsp;<span class="ident" id="7676963">TestCommentGroups</span><span class="op" id="7676980">(</span><span class="ident" id="7676981">t</span>&nbsp;<span class="op" id="7676983">*</span><span class="ident" id="7676984">testing</span><span class="op" id="7676991">.</span><span class="ident" id="7676992">T</span><span class="op" id="7676993">)</span>&nbsp;<span class="op" id="7676995">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7676998">f</span><span class="op" id="7676999">,</span>&nbsp;<span class="ident" id="7677001">err</span>&nbsp;<span class="op" id="7677005">:=</span>&nbsp;<span class="ident" id="7677008">ParseFile</span><span class="op" id="7677017">(</span><span class="ident" id="7677018">fset</span><span class="op" id="7677022">,</span>&nbsp;<span class="string" id="7677024">&#34;&#34;</span><span class="op" id="7677026">,</span>&nbsp;<span class="string" id="7677028">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="7677340">,</span>&nbsp;<span class="ident" id="7677342">ParseComments</span><span class="op" id="7677355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677358">if</span>&nbsp;<span class="ident" id="7677361">err</span>&nbsp;<span class="op" id="7677365">!=</span>&nbsp;<span class="ident" id="7677368">nil</span>&nbsp;<span class="op" id="7677372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677376">t</span><span class="op" id="7677377">.</span><span class="ident" id="7677378">Fatal</span><span class="op" id="7677383">(</span><span class="ident" id="7677384">err</span><span class="op" id="7677387">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677393">expected</span>&nbsp;<span class="op" id="7677402">:=</span>&nbsp;<span class="op" id="7677405">[</span><span class="op" id="7677406">]</span><span class="op" id="7677407">[</span><span class="op" id="7677408">]</span><span class="builtintype" id="7677409">string</span><span class="op" id="7677415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677419">{</span><span class="string" id="7677420">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="7677430">,</span>&nbsp;<span class="string" id="7677432">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="7677442">,</span>&nbsp;<span class="string" id="7677444">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="7677454">,</span>&nbsp;<span class="string" id="7677456">&#34;//&nbsp;1d&#34;</span><span class="op" id="7677463">}</span><span class="op" id="7677464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677468">{</span><span class="string" id="7677469">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="7677480">,</span>&nbsp;<span class="string" id="7677482">&#34;//&nbsp;2b&#34;</span><span class="op" id="7677489">}</span><span class="op" id="7677490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677494">{</span><span class="string" id="7677495">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="7677505">,</span>&nbsp;<span class="string" id="7677507">&#34;//&nbsp;3b&#34;</span><span class="op" id="7677514">,</span>&nbsp;<span class="string" id="7677516">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="7677526">}</span><span class="op" id="7677527">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677531">{</span><span class="string" id="7677532">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="7677560">}</span><span class="op" id="7677561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677565">{</span><span class="string" id="7677566">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="7677595">}</span><span class="op" id="7677596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677600">{</span><span class="string" id="7677601">&#34;//&nbsp;Output:&#34;</span><span class="op" id="7677613">,</span>&nbsp;<span class="string" id="7677615">&#34;//&nbsp;3&#34;</span><span class="op" id="7677621">,</span>&nbsp;<span class="string" id="7677623">&#34;//&nbsp;5&#34;</span><span class="op" id="7677629">}</span><span class="op" id="7677630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677636">if</span>&nbsp;<span class="builtinfunc" id="7677639">len</span><span class="op" id="7677642">(</span><span class="ident" id="7677643">f</span><span class="op" id="7677644">.</span><span class="ident" id="7677645">Comments</span><span class="op" id="7677653">)</span>&nbsp;<span class="op" id="7677655">!=</span>&nbsp;<span class="builtinfunc" id="7677658">len</span><span class="op" id="7677661">(</span><span class="ident" id="7677662">expected</span><span class="op" id="7677670">)</span>&nbsp;<span class="op" id="7677672">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677676">t</span><span class="op" id="7677677">.</span><span class="ident" id="7677678">Fatalf</span><span class="op" id="7677684">(</span><span class="string" id="7677685">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="7677721">,</span>&nbsp;<span class="builtinfunc" id="7677723">len</span><span class="op" id="7677726">(</span><span class="ident" id="7677727">f</span><span class="op" id="7677728">.</span><span class="ident" id="7677729">Comments</span><span class="op" id="7677737">)</span><span class="op" id="7677738">,</span>&nbsp;<span class="builtinfunc" id="7677740">len</span><span class="op" id="7677743">(</span><span class="ident" id="7677744">expected</span><span class="op" id="7677752">)</span><span class="op" id="7677753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677759">for</span>&nbsp;<span class="ident" id="7677763">i</span><span class="op" id="7677764">,</span>&nbsp;<span class="ident" id="7677766">exp</span>&nbsp;<span class="op" id="7677770">:=</span>&nbsp;<span class="keyword" id="7677773">range</span>&nbsp;<span class="ident" id="7677779">expected</span>&nbsp;<span class="op" id="7677788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677792">got</span>&nbsp;<span class="op" id="7677796">:=</span>&nbsp;<span class="ident" id="7677799">f</span><span class="op" id="7677800">.</span><span class="ident" id="7677801">Comments</span><span class="op" id="7677809">[</span><span class="ident" id="7677810">i</span><span class="op" id="7677811">]</span><span class="op" id="7677812">.</span><span class="ident" id="7677813">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677820">if</span>&nbsp;<span class="builtinfunc" id="7677823">len</span><span class="op" id="7677826">(</span><span class="ident" id="7677827">got</span><span class="op" id="7677830">)</span>&nbsp;<span class="op" id="7677832">!=</span>&nbsp;<span class="builtinfunc" id="7677835">len</span><span class="op" id="7677838">(</span><span class="ident" id="7677839">exp</span><span class="op" id="7677842">)</span>&nbsp;<span class="op" id="7677844">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677849">t</span><span class="op" id="7677850">.</span><span class="ident" id="7677851">Errorf</span><span class="op" id="7677857">(</span><span class="string" id="7677858">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="7677900">,</span>&nbsp;<span class="builtinfunc" id="7677902">len</span><span class="op" id="7677905">(</span><span class="ident" id="7677906">got</span><span class="op" id="7677909">)</span><span class="op" id="7677910">,</span>&nbsp;<span class="ident" id="7677912">i</span><span class="op" id="7677913">,</span>&nbsp;<span class="builtinfunc" id="7677915">len</span><span class="op" id="7677918">(</span><span class="ident" id="7677919">exp</span><span class="op" id="7677922">)</span><span class="op" id="7677923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677928">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677943">for</span>&nbsp;<span class="ident" id="7677947">j</span><span class="op" id="7677948">,</span>&nbsp;<span class="ident" id="7677950">exp</span>&nbsp;<span class="op" id="7677954">:=</span>&nbsp;<span class="keyword" id="7677957">range</span>&nbsp;<span class="ident" id="7677963">exp</span>&nbsp;<span class="op" id="7677967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677972">got</span>&nbsp;<span class="op" id="7677976">:=</span>&nbsp;<span class="ident" id="7677979">got</span><span class="op" id="7677982">[</span><span class="ident" id="7677983">j</span><span class="op" id="7677984">]</span><span class="op" id="7677985">.</span><span class="ident" id="7677986">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677994">if</span>&nbsp;<span class="ident" id="7677997">got</span>&nbsp;<span class="op" id="7678001">!=</span>&nbsp;<span class="ident" id="7678004">exp</span>&nbsp;<span class="op" id="7678008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678014">t</span><span class="op" id="7678015">.</span><span class="ident" id="7678016">Errorf</span><span class="op" id="7678022">(</span><span class="string" id="7678023">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7678056">,</span>&nbsp;<span class="ident" id="7678058">got</span><span class="op" id="7678061">,</span>&nbsp;<span class="ident" id="7678063">i</span><span class="op" id="7678064">,</span>&nbsp;<span class="ident" id="7678066">exp</span><span class="op" id="7678069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678081">}</span><br>
<span class="lineno">375</span><span class="op" id="7678083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7678086">func</span>&nbsp;<span class="ident" id="7678091">getField</span><span class="op" id="7678099">(</span><span class="ident" id="7678100">file</span>&nbsp;<span class="op" id="7678105">*</span><span class="ident" id="7678106">ast</span><span class="op" id="7678109">.</span><span class="ident" id="7678110">File</span><span class="op" id="7678114">,</span>&nbsp;<span class="ident" id="7678116">fieldname</span>&nbsp;<span class="builtintype" id="7678126">string</span><span class="op" id="7678132">)</span>&nbsp;<span class="op" id="7678134">*</span><span class="ident" id="7678135">ast</span><span class="op" id="7678138">.</span><span class="ident" id="7678139">Field</span>&nbsp;<span class="op" id="7678145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678148">parts</span>&nbsp;<span class="op" id="7678154">:=</span>&nbsp;<span class="ident" id="7678157">strings</span><span class="op" id="7678164">.</span><span class="ident" id="7678165">Split</span><span class="op" id="7678170">(</span><span class="ident" id="7678171">fieldname</span><span class="op" id="7678180">,</span>&nbsp;<span class="string" id="7678182">&#34;.&#34;</span><span class="op" id="7678185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678188">for</span>&nbsp;<span class="ident" id="7678192">_</span><span class="op" id="7678193">,</span>&nbsp;<span class="ident" id="7678195">d</span>&nbsp;<span class="op" id="7678197">:=</span>&nbsp;<span class="keyword" id="7678200">range</span>&nbsp;<span class="ident" id="7678206">file</span><span class="op" id="7678210">.</span><span class="ident" id="7678211">Decls</span>&nbsp;<span class="op" id="7678217">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678221">if</span>&nbsp;<span class="ident" id="7678224">d</span><span class="op" id="7678225">,</span>&nbsp;<span class="ident" id="7678227">ok</span>&nbsp;<span class="op" id="7678230">:=</span>&nbsp;<span class="ident" id="7678233">d</span><span class="op" id="7678234">.</span><span class="op" id="7678235">(</span><span class="op" id="7678236">*</span><span class="ident" id="7678237">ast</span><span class="op" id="7678240">.</span><span class="ident" id="7678241">GenDecl</span><span class="op" id="7678248">)</span><span class="op" id="7678249">;</span>&nbsp;<span class="ident" id="7678251">ok</span>&nbsp;<span class="op" id="7678254">&amp;&amp;</span>&nbsp;<span class="ident" id="7678257">d</span><span class="op" id="7678258">.</span><span class="ident" id="7678259">Tok</span>&nbsp;<span class="op" id="7678263">==</span>&nbsp;<span class="ident" id="7678266">token</span><span class="op" id="7678271">.</span><span class="ident" id="7678272">TYPE</span>&nbsp;<span class="op" id="7678277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678282">for</span>&nbsp;<span class="ident" id="7678286">_</span><span class="op" id="7678287">,</span>&nbsp;<span class="ident" id="7678289">s</span>&nbsp;<span class="op" id="7678291">:=</span>&nbsp;<span class="keyword" id="7678294">range</span>&nbsp;<span class="ident" id="7678300">d</span><span class="op" id="7678301">.</span><span class="ident" id="7678302">Specs</span>&nbsp;<span class="op" id="7678308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678314">if</span>&nbsp;<span class="ident" id="7678317">s</span><span class="op" id="7678318">,</span>&nbsp;<span class="ident" id="7678320">ok</span>&nbsp;<span class="op" id="7678323">:=</span>&nbsp;<span class="ident" id="7678326">s</span><span class="op" id="7678327">.</span><span class="op" id="7678328">(</span><span class="op" id="7678329">*</span><span class="ident" id="7678330">ast</span><span class="op" id="7678333">.</span><span class="ident" id="7678334">TypeSpec</span><span class="op" id="7678342">)</span><span class="op" id="7678343">;</span>&nbsp;<span class="ident" id="7678345">ok</span>&nbsp;<span class="op" id="7678348">&amp;&amp;</span>&nbsp;<span class="ident" id="7678351">s</span><span class="op" id="7678352">.</span><span class="ident" id="7678353">Name</span><span class="op" id="7678357">.</span><span class="ident" id="7678358">Name</span>&nbsp;<span class="op" id="7678363">==</span>&nbsp;<span class="ident" id="7678366">parts</span><span class="op" id="7678371">[</span><span class="num" id="7678372">0</span><span class="op" id="7678373">]</span>&nbsp;<span class="op" id="7678375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678382">if</span>&nbsp;<span class="ident" id="7678385">s</span><span class="op" id="7678386">,</span>&nbsp;<span class="ident" id="7678388">ok</span>&nbsp;<span class="op" id="7678391">:=</span>&nbsp;<span class="ident" id="7678394">s</span><span class="op" id="7678395">.</span><span class="ident" id="7678396">Type</span><span class="op" id="7678400">.</span><span class="op" id="7678401">(</span><span class="op" id="7678402">*</span><span class="ident" id="7678403">ast</span><span class="op" id="7678406">.</span><span class="ident" id="7678407">StructType</span><span class="op" id="7678417">)</span><span class="op" id="7678418">;</span>&nbsp;<span class="ident" id="7678420">ok</span>&nbsp;<span class="op" id="7678423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678431">for</span>&nbsp;<span class="ident" id="7678435">_</span><span class="op" id="7678436">,</span>&nbsp;<span class="ident" id="7678438">f</span>&nbsp;<span class="op" id="7678440">:=</span>&nbsp;<span class="keyword" id="7678443">range</span>&nbsp;<span class="ident" id="7678449">s</span><span class="op" id="7678450">.</span><span class="ident" id="7678451">Fields</span><span class="op" id="7678457">.</span><span class="ident" id="7678458">List</span>&nbsp;<span class="op" id="7678463">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678472">for</span>&nbsp;<span class="ident" id="7678476">_</span><span class="op" id="7678477">,</span>&nbsp;<span class="ident" id="7678479">name</span>&nbsp;<span class="op" id="7678484">:=</span>&nbsp;<span class="keyword" id="7678487">range</span>&nbsp;<span class="ident" id="7678493">f</span><span class="op" id="7678494">.</span><span class="ident" id="7678495">Names</span>&nbsp;<span class="op" id="7678501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678511">if</span>&nbsp;<span class="ident" id="7678514">name</span><span class="op" id="7678518">.</span><span class="ident" id="7678519">Name</span>&nbsp;<span class="op" id="7678524">==</span>&nbsp;<span class="ident" id="7678527">parts</span><span class="op" id="7678532">[</span><span class="num" id="7678533">1</span><span class="op" id="7678534">]</span>&nbsp;<span class="op" id="7678536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678547">return</span>&nbsp;<span class="ident" id="7678554">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678573">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678603">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678609">return</span>&nbsp;<span class="ident" id="7678616">nil</span><br>
<span class="lineno"></span><span class="op" id="7678620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7678623">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="7678697">func</span>&nbsp;<span class="ident" id="7678702">commentText</span><span class="op" id="7678713">(</span><span class="ident" id="7678714">c</span>&nbsp;<span class="op" id="7678716">*</span><span class="ident" id="7678717">ast</span><span class="op" id="7678720">.</span><span class="ident" id="7678721">CommentGroup</span><span class="op" id="7678733">)</span>&nbsp;<span class="builtintype" id="7678735">string</span>&nbsp;<span class="op" id="7678742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678745">var</span>&nbsp;<span class="ident" id="7678749">buf</span>&nbsp;<span class="ident" id="7678753">bytes</span><span class="op" id="7678758">.</span><span class="ident" id="7678759">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678767">if</span>&nbsp;<span class="ident" id="7678770">c</span>&nbsp;<span class="op" id="7678772">!=</span>&nbsp;<span class="ident" id="7678775">nil</span>&nbsp;<span class="op" id="7678779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678783">for</span>&nbsp;<span class="ident" id="7678787">_</span><span class="op" id="7678788">,</span>&nbsp;<span class="ident" id="7678790">c</span>&nbsp;<span class="op" id="7678792">:=</span>&nbsp;<span class="keyword" id="7678795">range</span>&nbsp;<span class="ident" id="7678801">c</span><span class="op" id="7678802">.</span><span class="ident" id="7678803">List</span>&nbsp;<span class="op" id="7678808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678813">buf</span><span class="op" id="7678816">.</span><span class="ident" id="7678817">WriteString</span><span class="op" id="7678828">(</span><span class="ident" id="7678829">c</span><span class="op" id="7678830">.</span><span class="ident" id="7678831">Text</span><span class="op" id="7678835">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678845">return</span>&nbsp;<span class="ident" id="7678852">buf</span><span class="op" id="7678855">.</span><span class="ident" id="7678856">String</span><span class="op" id="7678862">(</span><span class="op" id="7678863">)</span><br>
<span class="lineno"></span><span class="op" id="7678865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7678868">func</span>&nbsp;<span class="ident" id="7678873">checkFieldComments</span><span class="op" id="7678891">(</span><span class="ident" id="7678892">t</span>&nbsp;<span class="op" id="7678894">*</span><span class="ident" id="7678895">testing</span><span class="op" id="7678902">.</span><span class="ident" id="7678903">T</span><span class="op" id="7678904">,</span>&nbsp;<span class="ident" id="7678906">file</span>&nbsp;<span class="op" id="7678911">*</span><span class="ident" id="7678912">ast</span><span class="op" id="7678915">.</span><span class="ident" id="7678916">File</span><span class="op" id="7678920">,</span>&nbsp;<span class="ident" id="7678922">fieldname</span><span class="op" id="7678931">,</span>&nbsp;<span class="ident" id="7678933">lead</span><span class="op" id="7678937">,</span>&nbsp;<span class="ident" id="7678939">line</span>&nbsp;<span class="builtintype" id="7678944">string</span><span class="op" id="7678950">)</span>&nbsp;<span class="op" id="7678952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678955">f</span>&nbsp;<span class="op" id="7678957">:=</span>&nbsp;<span class="ident" id="7678960">getField</span><span class="op" id="7678968">(</span><span class="ident" id="7678969">file</span><span class="op" id="7678973">,</span>&nbsp;<span class="ident" id="7678975">fieldname</span><span class="op" id="7678984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678987">if</span>&nbsp;<span class="ident" id="7678990">f</span>&nbsp;<span class="op" id="7678992">==</span>&nbsp;<span class="ident" id="7678995">nil</span>&nbsp;<span class="op" id="7678999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679003">t</span><span class="op" id="7679004">.</span><span class="ident" id="7679005">Fatalf</span><span class="op" id="7679011">(</span><span class="string" id="7679012">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="7679033">,</span>&nbsp;<span class="ident" id="7679035">fieldname</span><span class="op" id="7679044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7679047">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7679050">if</span>&nbsp;<span class="ident" id="7679053">got</span>&nbsp;<span class="op" id="7679057">:=</span>&nbsp;<span class="ident" id="7679060">commentText</span><span class="op" id="7679071">(</span><span class="ident" id="7679072">f</span><span class="op" id="7679073">.</span><span class="ident" id="7679074">Doc</span><span class="op" id="7679077">)</span><span class="op" id="7679078">;</span>&nbsp;<span class="ident" id="7679080">got</span>&nbsp;<span class="op" id="7679084">!=</span>&nbsp;<span class="ident" id="7679087">lead</span>&nbsp;<span class="op" id="7679092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679096">t</span><span class="op" id="7679097">.</span><span class="ident" id="7679098">Errorf</span><span class="op" id="7679104">(</span><span class="string" id="7679105">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7679139">,</span>&nbsp;<span class="ident" id="7679141">got</span><span class="op" id="7679144">,</span>&nbsp;<span class="ident" id="7679146">lead</span><span class="op" id="7679150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7679153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7679156">if</span>&nbsp;<span class="ident" id="7679159">got</span>&nbsp;<span class="op" id="7679163">:=</span>&nbsp;<span class="ident" id="7679166">commentText</span><span class="op" id="7679177">(</span><span class="ident" id="7679178">f</span><span class="op" id="7679179">.</span><span class="ident" id="7679180">Comment</span><span class="op" id="7679187">)</span><span class="op" id="7679188">;</span>&nbsp;<span class="ident" id="7679190">got</span>&nbsp;<span class="op" id="7679194">!=</span>&nbsp;<span class="ident" id="7679197">line</span>&nbsp;<span class="op" id="7679202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679206">t</span><span class="op" id="7679207">.</span><span class="ident" id="7679208">Errorf</span><span class="op" id="7679214">(</span><span class="string" id="7679215">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7679249">,</span>&nbsp;<span class="ident" id="7679251">got</span><span class="op" id="7679254">,</span>&nbsp;<span class="ident" id="7679256">line</span><span class="op" id="7679260">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7679263">}</span><br>
<span class="lineno"></span><span class="op" id="7679265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7679268">func</span>&nbsp;<span class="ident" id="7679273">TestLeadAndLineComments</span><span class="op" id="7679296">(</span><span class="ident" id="7679297">t</span>&nbsp;<span class="op" id="7679299">*</span><span class="ident" id="7679300">testing</span><span class="op" id="7679307">.</span><span class="ident" id="7679308">T</span><span class="op" id="7679309">)</span>&nbsp;<span class="op" id="7679311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679314">f</span><span class="op" id="7679315">,</span>&nbsp;<span class="ident" id="7679317">err</span>&nbsp;<span class="op" id="7679321">:=</span>&nbsp;<span class="ident" id="7679324">ParseFile</span><span class="op" id="7679333">(</span><span class="ident" id="7679334">fset</span><span class="op" id="7679338">,</span>&nbsp;<span class="string" id="7679340">&#34;&#34;</span><span class="op" id="7679342">,</span>&nbsp;<span class="string" id="7679344">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="7679536">,</span>&nbsp;<span class="ident" id="7679538">ParseComments</span><span class="op" id="7679551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7679554">if</span>&nbsp;<span class="ident" id="7679557">err</span>&nbsp;<span class="op" id="7679561">!=</span>&nbsp;<span class="ident" id="7679564">nil</span>&nbsp;<span class="op" id="7679568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679572">t</span><span class="op" id="7679573">.</span><span class="ident" id="7679574">Fatal</span><span class="op" id="7679579">(</span><span class="ident" id="7679580">err</span><span class="op" id="7679583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7679586">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679589">checkFieldComments</span><span class="op" id="7679607">(</span><span class="ident" id="7679608">t</span><span class="op" id="7679609">,</span>&nbsp;<span class="ident" id="7679611">f</span><span class="op" id="7679612">,</span>&nbsp;<span class="string" id="7679614">&#34;T.F1&#34;</span><span class="op" id="7679620">,</span>&nbsp;<span class="string" id="7679622">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="7679647">,</span>&nbsp;<span class="string" id="7679649">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7679674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679677">checkFieldComments</span><span class="op" id="7679695">(</span><span class="ident" id="7679696">t</span><span class="op" id="7679697">,</span>&nbsp;<span class="ident" id="7679699">f</span><span class="op" id="7679700">,</span>&nbsp;<span class="string" id="7679702">&#34;T.F2&#34;</span><span class="op" id="7679708">,</span>&nbsp;<span class="string" id="7679710">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="7679732">,</span>&nbsp;<span class="string" id="7679734">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7679754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679757">checkFieldComments</span><span class="op" id="7679775">(</span><span class="ident" id="7679776">t</span><span class="op" id="7679777">,</span>&nbsp;<span class="ident" id="7679779">f</span><span class="op" id="7679780">,</span>&nbsp;<span class="string" id="7679782">&#34;T.f3&#34;</span><span class="op" id="7679788">,</span>&nbsp;<span class="string" id="7679790">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="7679810">,</span>&nbsp;<span class="string" id="7679812">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7679832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679835">ast</span><span class="op" id="7679838">.</span><span class="ident" id="7679839">FileExports</span><span class="op" id="7679850">(</span><span class="ident" id="7679851">f</span><span class="op" id="7679852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679855">checkFieldComments</span><span class="op" id="7679873">(</span><span class="ident" id="7679874">t</span><span class="op" id="7679875">,</span>&nbsp;<span class="ident" id="7679877">f</span><span class="op" id="7679878">,</span>&nbsp;<span class="string" id="7679880">&#34;T.F1&#34;</span><span class="op" id="7679886">,</span>&nbsp;<span class="string" id="7679888">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="7679913">,</span>&nbsp;<span class="string" id="7679915">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7679940">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7679943">checkFieldComments</span><span class="op" id="7679961">(</span><span class="ident" id="7679962">t</span><span class="op" id="7679963">,</span>&nbsp;<span class="ident" id="7679965">f</span><span class="op" id="7679966">,</span>&nbsp;<span class="string" id="7679968">&#34;T.F2&#34;</span><span class="op" id="7679974">,</span>&nbsp;<span class="string" id="7679976">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="7679998">,</span>&nbsp;<span class="string" id="7680000">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="7680020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7680023">if</span>&nbsp;<span class="ident" id="7680026">getField</span><span class="op" id="7680034">(</span><span class="ident" id="7680035">f</span><span class="op" id="7680036">,</span>&nbsp;<span class="string" id="7680038">&#34;T.f3&#34;</span><span class="op" id="7680044">)</span>&nbsp;<span class="op" id="7680046">!=</span>&nbsp;<span class="ident" id="7680049">nil</span>&nbsp;<span class="op" id="7680053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7680057">t</span><span class="op" id="7680058">.</span><span class="ident" id="7680059">Error</span><span class="op" id="7680064">(</span><span class="string" id="7680065">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="7680092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7680095">}</span><br>
<span class="lineno"></span><span class="op" id="7680097">}</span>
</div>
</body>
</html>
