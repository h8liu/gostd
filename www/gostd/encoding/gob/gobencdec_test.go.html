<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html" class="current">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8145931">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8145986">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8146040">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8146091">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146158">package</span>&nbsp;<span class="ident" id="8146166">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146171">import</span>&nbsp;<span class="op" id="8146178">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146181">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146190">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146200">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146207">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146213">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146220">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146231">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8146242">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8146249">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8146252">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146312">type</span>&nbsp;<span class="ident" id="8146317">ByteStruct</span>&nbsp;<span class="keyword" id="8146328">struct</span>&nbsp;<span class="op" id="8146335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146338">a</span>&nbsp;<span class="builtintype" id="8146340">byte</span>&nbsp;<span class="comment" id="8146345">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8146370">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8146373">type</span>&nbsp;<span class="ident" id="8146378">StringStruct</span>&nbsp;<span class="keyword" id="8146391">struct</span>&nbsp;<span class="op" id="8146398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146401">s</span>&nbsp;<span class="builtintype" id="8146403">string</span>&nbsp;<span class="comment" id="8146410">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8146435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8146438">type</span>&nbsp;<span class="ident" id="8146443">ArrayStruct</span>&nbsp;<span class="keyword" id="8146455">struct</span>&nbsp;<span class="op" id="8146462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146465">a</span>&nbsp;<span class="op" id="8146467">[</span><span class="num" id="8146468">8192</span><span class="op" id="8146472">]</span><span class="builtintype" id="8146473">byte</span>&nbsp;<span class="comment" id="8146478">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8146503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146506">type</span>&nbsp;<span class="ident" id="8146511">Gobber</span>&nbsp;<span class="builtintype" id="8146518">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8146523">type</span>&nbsp;<span class="ident" id="8146528">ValueGobber</span>&nbsp;<span class="builtintype" id="8146540">string</span>&nbsp;<span class="comment" id="8146547">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146597">type</span>&nbsp;<span class="ident" id="8146602">BinaryGobber</span>&nbsp;<span class="builtintype" id="8146615">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8146620">type</span>&nbsp;<span class="ident" id="8146625">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="8146643">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146651">type</span>&nbsp;<span class="ident" id="8146656">TextGobber</span>&nbsp;<span class="builtintype" id="8146667">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146672">type</span>&nbsp;<span class="ident" id="8146677">TextValueGobber</span>&nbsp;<span class="builtintype" id="8146693">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="8146701">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146726">func</span>&nbsp;<span class="op" id="8146731">(</span><span class="ident" id="8146732">g</span>&nbsp;<span class="op" id="8146734">*</span><span class="ident" id="8146735">ByteStruct</span><span class="op" id="8146745">)</span>&nbsp;<span class="ident" id="8146747">GobEncode</span><span class="op" id="8146756">(</span><span class="op" id="8146757">)</span>&nbsp;<span class="op" id="8146759">(</span><span class="op" id="8146760">[</span><span class="op" id="8146761">]</span><span class="builtintype" id="8146762">byte</span><span class="op" id="8146766">,</span>&nbsp;<span class="builtintype" id="8146768">error</span><span class="op" id="8146773">)</span>&nbsp;<span class="op" id="8146775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146778">b</span>&nbsp;<span class="op" id="8146780">:=</span>&nbsp;<span class="builtinfunc" id="8146783">make</span><span class="op" id="8146787">(</span><span class="op" id="8146788">[</span><span class="op" id="8146789">]</span><span class="builtintype" id="8146790">byte</span><span class="op" id="8146794">,</span>&nbsp;<span class="num" id="8146796">3</span><span class="op" id="8146797">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146800">b</span><span class="op" id="8146801">[</span><span class="num" id="8146802">0</span><span class="op" id="8146803">]</span>&nbsp;<span class="op" id="8146805">=</span>&nbsp;<span class="ident" id="8146807">g</span><span class="op" id="8146808">.</span><span class="ident" id="8146809">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146812">b</span><span class="op" id="8146813">[</span><span class="num" id="8146814">1</span><span class="op" id="8146815">]</span>&nbsp;<span class="op" id="8146817">=</span>&nbsp;<span class="ident" id="8146819">g</span><span class="op" id="8146820">.</span><span class="ident" id="8146821">a</span>&nbsp;<span class="op" id="8146823">+</span>&nbsp;<span class="num" id="8146825">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146828">b</span><span class="op" id="8146829">[</span><span class="num" id="8146830">2</span><span class="op" id="8146831">]</span>&nbsp;<span class="op" id="8146833">=</span>&nbsp;<span class="ident" id="8146835">g</span><span class="op" id="8146836">.</span><span class="ident" id="8146837">a</span>&nbsp;<span class="op" id="8146839">+</span>&nbsp;<span class="num" id="8146841">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146844">return</span>&nbsp;<span class="ident" id="8146851">b</span><span class="op" id="8146852">,</span>&nbsp;<span class="ident" id="8146854">nil</span><br>
<span class="lineno"></span><span class="op" id="8146858">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8146861">func</span>&nbsp;<span class="op" id="8146866">(</span><span class="ident" id="8146867">g</span>&nbsp;<span class="op" id="8146869">*</span><span class="ident" id="8146870">ByteStruct</span><span class="op" id="8146880">)</span>&nbsp;<span class="ident" id="8146882">GobDecode</span><span class="op" id="8146891">(</span><span class="ident" id="8146892">data</span>&nbsp;<span class="op" id="8146897">[</span><span class="op" id="8146898">]</span><span class="builtintype" id="8146899">byte</span><span class="op" id="8146903">)</span>&nbsp;<span class="builtintype" id="8146905">error</span>&nbsp;<span class="op" id="8146911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146914">if</span>&nbsp;<span class="ident" id="8146917">g</span>&nbsp;<span class="op" id="8146919">==</span>&nbsp;<span class="ident" id="8146922">nil</span>&nbsp;<span class="op" id="8146926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146930">return</span>&nbsp;<span class="ident" id="8146937">errors</span><span class="op" id="8146943">.</span><span class="ident" id="8146944">New</span><span class="op" id="8146947">(</span><span class="string" id="8146948">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="8146962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146965">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8146968">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147006">if</span>&nbsp;<span class="builtinfunc" id="8147009">len</span><span class="op" id="8147012">(</span><span class="ident" id="8147013">data</span><span class="op" id="8147017">)</span>&nbsp;<span class="op" id="8147019">==</span>&nbsp;<span class="num" id="8147022">0</span>&nbsp;<span class="op" id="8147024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147028">return</span>&nbsp;<span class="ident" id="8147035">io</span><span class="op" id="8147037">.</span><span class="ident" id="8147038">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147046">g</span><span class="op" id="8147047">.</span><span class="ident" id="8147048">a</span>&nbsp;<span class="op" id="8147050">=</span>&nbsp;<span class="ident" id="8147052">data</span><span class="op" id="8147056">[</span><span class="num" id="8147057">0</span><span class="op" id="8147058">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147061">for</span>&nbsp;<span class="ident" id="8147065">i</span><span class="op" id="8147066">,</span>&nbsp;<span class="ident" id="8147068">c</span>&nbsp;<span class="op" id="8147070">:=</span>&nbsp;<span class="keyword" id="8147073">range</span>&nbsp;<span class="ident" id="8147079">data</span>&nbsp;<span class="op" id="8147084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147088">if</span>&nbsp;<span class="ident" id="8147091">c</span>&nbsp;<span class="op" id="8147093">!=</span>&nbsp;<span class="ident" id="8147096">g</span><span class="op" id="8147097">.</span><span class="ident" id="8147098">a</span><span class="op" id="8147099">+</span><span class="builtintype" id="8147100">byte</span><span class="op" id="8147104">(</span><span class="ident" id="8147105">i</span><span class="op" id="8147106">)</span>&nbsp;<span class="op" id="8147108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147113">return</span>&nbsp;<span class="ident" id="8147120">errors</span><span class="op" id="8147126">.</span><span class="ident" id="8147127">New</span><span class="op" id="8147130">(</span><span class="string" id="8147131">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8147154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147161">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147164">return</span>&nbsp;<span class="ident" id="8147171">nil</span><br>
<span class="lineno"></span><span class="op" id="8147175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8147178">func</span>&nbsp;<span class="op" id="8147183">(</span><span class="ident" id="8147184">g</span>&nbsp;<span class="op" id="8147186">*</span><span class="ident" id="8147187">StringStruct</span><span class="op" id="8147199">)</span>&nbsp;<span class="ident" id="8147201">GobEncode</span><span class="op" id="8147210">(</span><span class="op" id="8147211">)</span>&nbsp;<span class="op" id="8147213">(</span><span class="op" id="8147214">[</span><span class="op" id="8147215">]</span><span class="builtintype" id="8147216">byte</span><span class="op" id="8147220">,</span>&nbsp;<span class="builtintype" id="8147222">error</span><span class="op" id="8147227">)</span>&nbsp;<span class="op" id="8147229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147232">return</span>&nbsp;<span class="op" id="8147239">[</span><span class="op" id="8147240">]</span><span class="builtintype" id="8147241">byte</span><span class="op" id="8147245">(</span><span class="ident" id="8147246">g</span><span class="op" id="8147247">.</span><span class="ident" id="8147248">s</span><span class="op" id="8147249">)</span><span class="op" id="8147250">,</span>&nbsp;<span class="ident" id="8147252">nil</span><br>
<span class="lineno">75</span><span class="op" id="8147256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8147259">func</span>&nbsp;<span class="op" id="8147264">(</span><span class="ident" id="8147265">g</span>&nbsp;<span class="op" id="8147267">*</span><span class="ident" id="8147268">StringStruct</span><span class="op" id="8147280">)</span>&nbsp;<span class="ident" id="8147282">GobDecode</span><span class="op" id="8147291">(</span><span class="ident" id="8147292">data</span>&nbsp;<span class="op" id="8147297">[</span><span class="op" id="8147298">]</span><span class="builtintype" id="8147299">byte</span><span class="op" id="8147303">)</span>&nbsp;<span class="builtintype" id="8147305">error</span>&nbsp;<span class="op" id="8147311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8147314">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147352">if</span>&nbsp;<span class="builtinfunc" id="8147355">len</span><span class="op" id="8147358">(</span><span class="ident" id="8147359">data</span><span class="op" id="8147363">)</span>&nbsp;<span class="op" id="8147365">==</span>&nbsp;<span class="num" id="8147368">0</span>&nbsp;<span class="op" id="8147370">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147374">return</span>&nbsp;<span class="ident" id="8147381">io</span><span class="op" id="8147383">.</span><span class="ident" id="8147384">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147392">a</span>&nbsp;<span class="op" id="8147394">:=</span>&nbsp;<span class="ident" id="8147397">data</span><span class="op" id="8147401">[</span><span class="num" id="8147402">0</span><span class="op" id="8147403">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147406">for</span>&nbsp;<span class="ident" id="8147410">i</span><span class="op" id="8147411">,</span>&nbsp;<span class="ident" id="8147413">c</span>&nbsp;<span class="op" id="8147415">:=</span>&nbsp;<span class="keyword" id="8147418">range</span>&nbsp;<span class="ident" id="8147424">data</span>&nbsp;<span class="op" id="8147429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147433">if</span>&nbsp;<span class="ident" id="8147436">c</span>&nbsp;<span class="op" id="8147438">!=</span>&nbsp;<span class="ident" id="8147441">a</span><span class="op" id="8147442">+</span><span class="builtintype" id="8147443">byte</span><span class="op" id="8147447">(</span><span class="ident" id="8147448">i</span><span class="op" id="8147449">)</span>&nbsp;<span class="op" id="8147451">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147456">return</span>&nbsp;<span class="ident" id="8147463">errors</span><span class="op" id="8147469">.</span><span class="ident" id="8147470">New</span><span class="op" id="8147473">(</span><span class="string" id="8147474">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8147497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147507">g</span><span class="op" id="8147508">.</span><span class="ident" id="8147509">s</span>&nbsp;<span class="op" id="8147511">=</span>&nbsp;<span class="builtintype" id="8147513">string</span><span class="op" id="8147519">(</span><span class="ident" id="8147520">data</span><span class="op" id="8147524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147527">return</span>&nbsp;<span class="ident" id="8147534">nil</span><br>
<span class="lineno">90</span><span class="op" id="8147538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8147541">func</span>&nbsp;<span class="op" id="8147546">(</span><span class="ident" id="8147547">a</span>&nbsp;<span class="op" id="8147549">*</span><span class="ident" id="8147550">ArrayStruct</span><span class="op" id="8147561">)</span>&nbsp;<span class="ident" id="8147563">GobEncode</span><span class="op" id="8147572">(</span><span class="op" id="8147573">)</span>&nbsp;<span class="op" id="8147575">(</span><span class="op" id="8147576">[</span><span class="op" id="8147577">]</span><span class="builtintype" id="8147578">byte</span><span class="op" id="8147582">,</span>&nbsp;<span class="builtintype" id="8147584">error</span><span class="op" id="8147589">)</span>&nbsp;<span class="op" id="8147591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147594">return</span>&nbsp;<span class="ident" id="8147601">a</span><span class="op" id="8147602">.</span><span class="ident" id="8147603">a</span><span class="op" id="8147604">[</span><span class="op" id="8147605">:</span><span class="op" id="8147606">]</span><span class="op" id="8147607">,</span>&nbsp;<span class="ident" id="8147609">nil</span><br>
<span class="lineno"></span><span class="op" id="8147613">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8147616">func</span>&nbsp;<span class="op" id="8147621">(</span><span class="ident" id="8147622">a</span>&nbsp;<span class="op" id="8147624">*</span><span class="ident" id="8147625">ArrayStruct</span><span class="op" id="8147636">)</span>&nbsp;<span class="ident" id="8147638">GobDecode</span><span class="op" id="8147647">(</span><span class="ident" id="8147648">data</span>&nbsp;<span class="op" id="8147653">[</span><span class="op" id="8147654">]</span><span class="builtintype" id="8147655">byte</span><span class="op" id="8147659">)</span>&nbsp;<span class="builtintype" id="8147661">error</span>&nbsp;<span class="op" id="8147667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147670">if</span>&nbsp;<span class="builtinfunc" id="8147673">len</span><span class="op" id="8147676">(</span><span class="ident" id="8147677">data</span><span class="op" id="8147681">)</span>&nbsp;<span class="op" id="8147683">!=</span>&nbsp;<span class="builtinfunc" id="8147686">len</span><span class="op" id="8147689">(</span><span class="ident" id="8147690">a</span><span class="op" id="8147691">.</span><span class="ident" id="8147692">a</span><span class="op" id="8147693">)</span>&nbsp;<span class="op" id="8147695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147699">return</span>&nbsp;<span class="ident" id="8147706">errors</span><span class="op" id="8147712">.</span><span class="ident" id="8147713">New</span><span class="op" id="8147716">(</span><span class="string" id="8147717">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="8147747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147750">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8147753">copy</span><span class="op" id="8147757">(</span><span class="ident" id="8147758">a</span><span class="op" id="8147759">.</span><span class="ident" id="8147760">a</span><span class="op" id="8147761">[</span><span class="op" id="8147762">:</span><span class="op" id="8147763">]</span><span class="op" id="8147764">,</span>&nbsp;<span class="ident" id="8147766">data</span><span class="op" id="8147770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147773">return</span>&nbsp;<span class="ident" id="8147780">nil</span><br>
<span class="lineno"></span><span class="op" id="8147784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8147787">func</span>&nbsp;<span class="op" id="8147792">(</span><span class="ident" id="8147793">g</span>&nbsp;<span class="op" id="8147795">*</span><span class="ident" id="8147796">Gobber</span><span class="op" id="8147802">)</span>&nbsp;<span class="ident" id="8147804">GobEncode</span><span class="op" id="8147813">(</span><span class="op" id="8147814">)</span>&nbsp;<span class="op" id="8147816">(</span><span class="op" id="8147817">[</span><span class="op" id="8147818">]</span><span class="builtintype" id="8147819">byte</span><span class="op" id="8147823">,</span>&nbsp;<span class="builtintype" id="8147825">error</span><span class="op" id="8147830">)</span>&nbsp;<span class="op" id="8147832">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147835">return</span>&nbsp;<span class="op" id="8147842">[</span><span class="op" id="8147843">]</span><span class="builtintype" id="8147844">byte</span><span class="op" id="8147848">(</span><span class="ident" id="8147849">fmt</span><span class="op" id="8147852">.</span><span class="ident" id="8147853">Sprintf</span><span class="op" id="8147860">(</span><span class="string" id="8147861">&#34;VALUE=%d&#34;</span><span class="op" id="8147871">,</span>&nbsp;<span class="op" id="8147873">*</span><span class="ident" id="8147874">g</span><span class="op" id="8147875">)</span><span class="op" id="8147876">)</span><span class="op" id="8147877">,</span>&nbsp;<span class="ident" id="8147879">nil</span><br>
<span class="lineno"></span><span class="op" id="8147883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8147886">func</span>&nbsp;<span class="op" id="8147891">(</span><span class="ident" id="8147892">g</span>&nbsp;<span class="op" id="8147894">*</span><span class="ident" id="8147895">Gobber</span><span class="op" id="8147901">)</span>&nbsp;<span class="ident" id="8147903">GobDecode</span><span class="op" id="8147912">(</span><span class="ident" id="8147913">data</span>&nbsp;<span class="op" id="8147918">[</span><span class="op" id="8147919">]</span><span class="builtintype" id="8147920">byte</span><span class="op" id="8147924">)</span>&nbsp;<span class="builtintype" id="8147926">error</span>&nbsp;<span class="op" id="8147932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147935">_</span><span class="op" id="8147936">,</span>&nbsp;<span class="ident" id="8147938">err</span>&nbsp;<span class="op" id="8147942">:=</span>&nbsp;<span class="ident" id="8147945">fmt</span><span class="op" id="8147948">.</span><span class="ident" id="8147949">Sscanf</span><span class="op" id="8147955">(</span><span class="builtintype" id="8147956">string</span><span class="op" id="8147962">(</span><span class="ident" id="8147963">data</span><span class="op" id="8147967">)</span><span class="op" id="8147968">,</span>&nbsp;<span class="string" id="8147970">&#34;VALUE=%d&#34;</span><span class="op" id="8147980">,</span>&nbsp;<span class="op" id="8147982">(</span><span class="op" id="8147983">*</span><span class="builtintype" id="8147984">int</span><span class="op" id="8147987">)</span><span class="op" id="8147988">(</span><span class="ident" id="8147989">g</span><span class="op" id="8147990">)</span><span class="op" id="8147991">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147994">return</span>&nbsp;<span class="ident" id="8148001">err</span><br>
<span class="lineno"></span><span class="op" id="8148005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8148008">func</span>&nbsp;<span class="op" id="8148013">(</span><span class="ident" id="8148014">g</span>&nbsp;<span class="op" id="8148016">*</span><span class="ident" id="8148017">BinaryGobber</span><span class="op" id="8148029">)</span>&nbsp;<span class="ident" id="8148031">MarshalBinary</span><span class="op" id="8148044">(</span><span class="op" id="8148045">)</span>&nbsp;<span class="op" id="8148047">(</span><span class="op" id="8148048">[</span><span class="op" id="8148049">]</span><span class="builtintype" id="8148050">byte</span><span class="op" id="8148054">,</span>&nbsp;<span class="builtintype" id="8148056">error</span><span class="op" id="8148061">)</span>&nbsp;<span class="op" id="8148063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148066">return</span>&nbsp;<span class="op" id="8148073">[</span><span class="op" id="8148074">]</span><span class="builtintype" id="8148075">byte</span><span class="op" id="8148079">(</span><span class="ident" id="8148080">fmt</span><span class="op" id="8148083">.</span><span class="ident" id="8148084">Sprintf</span><span class="op" id="8148091">(</span><span class="string" id="8148092">&#34;VALUE=%d&#34;</span><span class="op" id="8148102">,</span>&nbsp;<span class="op" id="8148104">*</span><span class="ident" id="8148105">g</span><span class="op" id="8148106">)</span><span class="op" id="8148107">)</span><span class="op" id="8148108">,</span>&nbsp;<span class="ident" id="8148110">nil</span><br>
<span class="lineno">115</span><span class="op" id="8148114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8148117">func</span>&nbsp;<span class="op" id="8148122">(</span><span class="ident" id="8148123">g</span>&nbsp;<span class="op" id="8148125">*</span><span class="ident" id="8148126">BinaryGobber</span><span class="op" id="8148138">)</span>&nbsp;<span class="ident" id="8148140">UnmarshalBinary</span><span class="op" id="8148155">(</span><span class="ident" id="8148156">data</span>&nbsp;<span class="op" id="8148161">[</span><span class="op" id="8148162">]</span><span class="builtintype" id="8148163">byte</span><span class="op" id="8148167">)</span>&nbsp;<span class="builtintype" id="8148169">error</span>&nbsp;<span class="op" id="8148175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148178">_</span><span class="op" id="8148179">,</span>&nbsp;<span class="ident" id="8148181">err</span>&nbsp;<span class="op" id="8148185">:=</span>&nbsp;<span class="ident" id="8148188">fmt</span><span class="op" id="8148191">.</span><span class="ident" id="8148192">Sscanf</span><span class="op" id="8148198">(</span><span class="builtintype" id="8148199">string</span><span class="op" id="8148205">(</span><span class="ident" id="8148206">data</span><span class="op" id="8148210">)</span><span class="op" id="8148211">,</span>&nbsp;<span class="string" id="8148213">&#34;VALUE=%d&#34;</span><span class="op" id="8148223">,</span>&nbsp;<span class="op" id="8148225">(</span><span class="op" id="8148226">*</span><span class="builtintype" id="8148227">int</span><span class="op" id="8148230">)</span><span class="op" id="8148231">(</span><span class="ident" id="8148232">g</span><span class="op" id="8148233">)</span><span class="op" id="8148234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148237">return</span>&nbsp;<span class="ident" id="8148244">err</span><br>
<span class="lineno">120</span><span class="op" id="8148248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8148251">func</span>&nbsp;<span class="op" id="8148256">(</span><span class="ident" id="8148257">g</span>&nbsp;<span class="op" id="8148259">*</span><span class="ident" id="8148260">TextGobber</span><span class="op" id="8148270">)</span>&nbsp;<span class="ident" id="8148272">MarshalText</span><span class="op" id="8148283">(</span><span class="op" id="8148284">)</span>&nbsp;<span class="op" id="8148286">(</span><span class="op" id="8148287">[</span><span class="op" id="8148288">]</span><span class="builtintype" id="8148289">byte</span><span class="op" id="8148293">,</span>&nbsp;<span class="builtintype" id="8148295">error</span><span class="op" id="8148300">)</span>&nbsp;<span class="op" id="8148302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148305">return</span>&nbsp;<span class="op" id="8148312">[</span><span class="op" id="8148313">]</span><span class="builtintype" id="8148314">byte</span><span class="op" id="8148318">(</span><span class="ident" id="8148319">fmt</span><span class="op" id="8148322">.</span><span class="ident" id="8148323">Sprintf</span><span class="op" id="8148330">(</span><span class="string" id="8148331">&#34;VALUE=%d&#34;</span><span class="op" id="8148341">,</span>&nbsp;<span class="op" id="8148343">*</span><span class="ident" id="8148344">g</span><span class="op" id="8148345">)</span><span class="op" id="8148346">)</span><span class="op" id="8148347">,</span>&nbsp;<span class="ident" id="8148349">nil</span><br>
<span class="lineno"></span><span class="op" id="8148353">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="8148356">func</span>&nbsp;<span class="op" id="8148361">(</span><span class="ident" id="8148362">g</span>&nbsp;<span class="op" id="8148364">*</span><span class="ident" id="8148365">TextGobber</span><span class="op" id="8148375">)</span>&nbsp;<span class="ident" id="8148377">UnmarshalText</span><span class="op" id="8148390">(</span><span class="ident" id="8148391">data</span>&nbsp;<span class="op" id="8148396">[</span><span class="op" id="8148397">]</span><span class="builtintype" id="8148398">byte</span><span class="op" id="8148402">)</span>&nbsp;<span class="builtintype" id="8148404">error</span>&nbsp;<span class="op" id="8148410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148413">_</span><span class="op" id="8148414">,</span>&nbsp;<span class="ident" id="8148416">err</span>&nbsp;<span class="op" id="8148420">:=</span>&nbsp;<span class="ident" id="8148423">fmt</span><span class="op" id="8148426">.</span><span class="ident" id="8148427">Sscanf</span><span class="op" id="8148433">(</span><span class="builtintype" id="8148434">string</span><span class="op" id="8148440">(</span><span class="ident" id="8148441">data</span><span class="op" id="8148445">)</span><span class="op" id="8148446">,</span>&nbsp;<span class="string" id="8148448">&#34;VALUE=%d&#34;</span><span class="op" id="8148458">,</span>&nbsp;<span class="op" id="8148460">(</span><span class="op" id="8148461">*</span><span class="builtintype" id="8148462">int</span><span class="op" id="8148465">)</span><span class="op" id="8148466">(</span><span class="ident" id="8148467">g</span><span class="op" id="8148468">)</span><span class="op" id="8148469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148472">return</span>&nbsp;<span class="ident" id="8148479">err</span><br>
<span class="lineno"></span><span class="op" id="8148483">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="8148486">func</span>&nbsp;<span class="op" id="8148491">(</span><span class="ident" id="8148492">v</span>&nbsp;<span class="ident" id="8148494">ValueGobber</span><span class="op" id="8148505">)</span>&nbsp;<span class="ident" id="8148507">GobEncode</span><span class="op" id="8148516">(</span><span class="op" id="8148517">)</span>&nbsp;<span class="op" id="8148519">(</span><span class="op" id="8148520">[</span><span class="op" id="8148521">]</span><span class="builtintype" id="8148522">byte</span><span class="op" id="8148526">,</span>&nbsp;<span class="builtintype" id="8148528">error</span><span class="op" id="8148533">)</span>&nbsp;<span class="op" id="8148535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148538">return</span>&nbsp;<span class="op" id="8148545">[</span><span class="op" id="8148546">]</span><span class="builtintype" id="8148547">byte</span><span class="op" id="8148551">(</span><span class="ident" id="8148552">fmt</span><span class="op" id="8148555">.</span><span class="ident" id="8148556">Sprintf</span><span class="op" id="8148563">(</span><span class="string" id="8148564">&#34;VALUE=%s&#34;</span><span class="op" id="8148574">,</span>&nbsp;<span class="ident" id="8148576">v</span><span class="op" id="8148577">)</span><span class="op" id="8148578">)</span><span class="op" id="8148579">,</span>&nbsp;<span class="ident" id="8148581">nil</span><br>
<span class="lineno"></span><span class="op" id="8148585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8148588">func</span>&nbsp;<span class="op" id="8148593">(</span><span class="ident" id="8148594">v</span>&nbsp;<span class="op" id="8148596">*</span><span class="ident" id="8148597">ValueGobber</span><span class="op" id="8148608">)</span>&nbsp;<span class="ident" id="8148610">GobDecode</span><span class="op" id="8148619">(</span><span class="ident" id="8148620">data</span>&nbsp;<span class="op" id="8148625">[</span><span class="op" id="8148626">]</span><span class="builtintype" id="8148627">byte</span><span class="op" id="8148631">)</span>&nbsp;<span class="builtintype" id="8148633">error</span>&nbsp;<span class="op" id="8148639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148642">_</span><span class="op" id="8148643">,</span>&nbsp;<span class="ident" id="8148645">err</span>&nbsp;<span class="op" id="8148649">:=</span>&nbsp;<span class="ident" id="8148652">fmt</span><span class="op" id="8148655">.</span><span class="ident" id="8148656">Sscanf</span><span class="op" id="8148662">(</span><span class="builtintype" id="8148663">string</span><span class="op" id="8148669">(</span><span class="ident" id="8148670">data</span><span class="op" id="8148674">)</span><span class="op" id="8148675">,</span>&nbsp;<span class="string" id="8148677">&#34;VALUE=%s&#34;</span><span class="op" id="8148687">,</span>&nbsp;<span class="op" id="8148689">(</span><span class="op" id="8148690">*</span><span class="builtintype" id="8148691">string</span><span class="op" id="8148697">)</span><span class="op" id="8148698">(</span><span class="ident" id="8148699">v</span><span class="op" id="8148700">)</span><span class="op" id="8148701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148704">return</span>&nbsp;<span class="ident" id="8148711">err</span><br>
<span class="lineno"></span><span class="op" id="8148715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8148718">func</span>&nbsp;<span class="op" id="8148723">(</span><span class="ident" id="8148724">v</span>&nbsp;<span class="ident" id="8148726">BinaryValueGobber</span><span class="op" id="8148743">)</span>&nbsp;<span class="ident" id="8148745">MarshalBinary</span><span class="op" id="8148758">(</span><span class="op" id="8148759">)</span>&nbsp;<span class="op" id="8148761">(</span><span class="op" id="8148762">[</span><span class="op" id="8148763">]</span><span class="builtintype" id="8148764">byte</span><span class="op" id="8148768">,</span>&nbsp;<span class="builtintype" id="8148770">error</span><span class="op" id="8148775">)</span>&nbsp;<span class="op" id="8148777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148780">return</span>&nbsp;<span class="op" id="8148787">[</span><span class="op" id="8148788">]</span><span class="builtintype" id="8148789">byte</span><span class="op" id="8148793">(</span><span class="ident" id="8148794">fmt</span><span class="op" id="8148797">.</span><span class="ident" id="8148798">Sprintf</span><span class="op" id="8148805">(</span><span class="string" id="8148806">&#34;VALUE=%s&#34;</span><span class="op" id="8148816">,</span>&nbsp;<span class="ident" id="8148818">v</span><span class="op" id="8148819">)</span><span class="op" id="8148820">)</span><span class="op" id="8148821">,</span>&nbsp;<span class="ident" id="8148823">nil</span><br>
<span class="lineno"></span><span class="op" id="8148827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8148830">func</span>&nbsp;<span class="op" id="8148835">(</span><span class="ident" id="8148836">v</span>&nbsp;<span class="op" id="8148838">*</span><span class="ident" id="8148839">BinaryValueGobber</span><span class="op" id="8148856">)</span>&nbsp;<span class="ident" id="8148858">UnmarshalBinary</span><span class="op" id="8148873">(</span><span class="ident" id="8148874">data</span>&nbsp;<span class="op" id="8148879">[</span><span class="op" id="8148880">]</span><span class="builtintype" id="8148881">byte</span><span class="op" id="8148885">)</span>&nbsp;<span class="builtintype" id="8148887">error</span>&nbsp;<span class="op" id="8148893">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8148896">_</span><span class="op" id="8148897">,</span>&nbsp;<span class="ident" id="8148899">err</span>&nbsp;<span class="op" id="8148903">:=</span>&nbsp;<span class="ident" id="8148906">fmt</span><span class="op" id="8148909">.</span><span class="ident" id="8148910">Sscanf</span><span class="op" id="8148916">(</span><span class="builtintype" id="8148917">string</span><span class="op" id="8148923">(</span><span class="ident" id="8148924">data</span><span class="op" id="8148928">)</span><span class="op" id="8148929">,</span>&nbsp;<span class="string" id="8148931">&#34;VALUE=%s&#34;</span><span class="op" id="8148941">,</span>&nbsp;<span class="op" id="8148943">(</span><span class="op" id="8148944">*</span><span class="builtintype" id="8148945">string</span><span class="op" id="8148951">)</span><span class="op" id="8148952">(</span><span class="ident" id="8148953">v</span><span class="op" id="8148954">)</span><span class="op" id="8148955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8148958">return</span>&nbsp;<span class="ident" id="8148965">err</span><br>
<span class="lineno"></span><span class="op" id="8148969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8148972">func</span>&nbsp;<span class="op" id="8148977">(</span><span class="ident" id="8148978">v</span>&nbsp;<span class="ident" id="8148980">TextValueGobber</span><span class="op" id="8148995">)</span>&nbsp;<span class="ident" id="8148997">MarshalText</span><span class="op" id="8149008">(</span><span class="op" id="8149009">)</span>&nbsp;<span class="op" id="8149011">(</span><span class="op" id="8149012">[</span><span class="op" id="8149013">]</span><span class="builtintype" id="8149014">byte</span><span class="op" id="8149018">,</span>&nbsp;<span class="builtintype" id="8149020">error</span><span class="op" id="8149025">)</span>&nbsp;<span class="op" id="8149027">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8149030">return</span>&nbsp;<span class="op" id="8149037">[</span><span class="op" id="8149038">]</span><span class="builtintype" id="8149039">byte</span><span class="op" id="8149043">(</span><span class="ident" id="8149044">fmt</span><span class="op" id="8149047">.</span><span class="ident" id="8149048">Sprintf</span><span class="op" id="8149055">(</span><span class="string" id="8149056">&#34;VALUE=%s&#34;</span><span class="op" id="8149066">,</span>&nbsp;<span class="ident" id="8149068">v</span><span class="op" id="8149069">)</span><span class="op" id="8149070">)</span><span class="op" id="8149071">,</span>&nbsp;<span class="ident" id="8149073">nil</span><br>
<span class="lineno"></span><span class="op" id="8149077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8149080">func</span>&nbsp;<span class="op" id="8149085">(</span><span class="ident" id="8149086">v</span>&nbsp;<span class="op" id="8149088">*</span><span class="ident" id="8149089">TextValueGobber</span><span class="op" id="8149104">)</span>&nbsp;<span class="ident" id="8149106">UnmarshalText</span><span class="op" id="8149119">(</span><span class="ident" id="8149120">data</span>&nbsp;<span class="op" id="8149125">[</span><span class="op" id="8149126">]</span><span class="builtintype" id="8149127">byte</span><span class="op" id="8149131">)</span>&nbsp;<span class="builtintype" id="8149133">error</span>&nbsp;<span class="op" id="8149139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149142">_</span><span class="op" id="8149143">,</span>&nbsp;<span class="ident" id="8149145">err</span>&nbsp;<span class="op" id="8149149">:=</span>&nbsp;<span class="ident" id="8149152">fmt</span><span class="op" id="8149155">.</span><span class="ident" id="8149156">Sscanf</span><span class="op" id="8149162">(</span><span class="builtintype" id="8149163">string</span><span class="op" id="8149169">(</span><span class="ident" id="8149170">data</span><span class="op" id="8149174">)</span><span class="op" id="8149175">,</span>&nbsp;<span class="string" id="8149177">&#34;VALUE=%s&#34;</span><span class="op" id="8149187">,</span>&nbsp;<span class="op" id="8149189">(</span><span class="op" id="8149190">*</span><span class="builtintype" id="8149191">string</span><span class="op" id="8149197">)</span><span class="op" id="8149198">(</span><span class="ident" id="8149199">v</span><span class="op" id="8149200">)</span><span class="op" id="8149201">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8149204">return</span>&nbsp;<span class="ident" id="8149211">err</span><br>
<span class="lineno"></span><span class="op" id="8149215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8149218">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8149264">type</span>&nbsp;<span class="ident" id="8149269">GobTest0</span>&nbsp;<span class="keyword" id="8149278">struct</span>&nbsp;<span class="op" id="8149285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149288">X</span>&nbsp;<span class="builtintype" id="8149290">int</span>&nbsp;<span class="comment" id="8149294">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149351">G</span>&nbsp;<span class="op" id="8149353">*</span><span class="ident" id="8149354">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="8149365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8149368">type</span>&nbsp;<span class="ident" id="8149373">GobTest1</span>&nbsp;<span class="keyword" id="8149382">struct</span>&nbsp;<span class="op" id="8149389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149392">X</span>&nbsp;<span class="builtintype" id="8149394">int</span>&nbsp;<span class="comment" id="8149398">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149455">G</span>&nbsp;<span class="op" id="8149457">*</span><span class="ident" id="8149458">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="8149471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8149474">type</span>&nbsp;<span class="ident" id="8149479">GobTest2</span>&nbsp;<span class="keyword" id="8149488">struct</span>&nbsp;<span class="op" id="8149495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149498">X</span>&nbsp;<span class="builtintype" id="8149500">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8149507">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149564">G</span>&nbsp;<span class="builtintype" id="8149566">string</span>&nbsp;<span class="comment" id="8149573">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="8149617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8149620">type</span>&nbsp;<span class="ident" id="8149625">GobTest3</span>&nbsp;<span class="keyword" id="8149634">struct</span>&nbsp;<span class="op" id="8149641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149644">X</span>&nbsp;<span class="builtintype" id="8149646">int</span>&nbsp;<span class="comment" id="8149650">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149707">G</span>&nbsp;<span class="op" id="8149709">*</span><span class="ident" id="8149710">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149718">B</span>&nbsp;<span class="op" id="8149720">*</span><span class="ident" id="8149721">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149735">T</span>&nbsp;<span class="op" id="8149737">*</span><span class="ident" id="8149738">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="8149749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8149752">type</span>&nbsp;<span class="ident" id="8149757">GobTest4</span>&nbsp;<span class="keyword" id="8149766">struct</span>&nbsp;<span class="op" id="8149773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149776">X</span>&nbsp;&nbsp;<span class="builtintype" id="8149779">int</span>&nbsp;<span class="comment" id="8149783">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149840">V</span>&nbsp;&nbsp;<span class="ident" id="8149843">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149856">BV</span>&nbsp;<span class="ident" id="8149859">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149878">TV</span>&nbsp;<span class="ident" id="8149881">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8149897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8149900">type</span>&nbsp;<span class="ident" id="8149905">GobTest5</span>&nbsp;<span class="keyword" id="8149914">struct</span>&nbsp;<span class="op" id="8149921">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149924">X</span>&nbsp;&nbsp;<span class="builtintype" id="8149927">int</span>&nbsp;<span class="comment" id="8149931">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149988">V</span>&nbsp;&nbsp;<span class="op" id="8149991">*</span><span class="ident" id="8149992">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150005">BV</span>&nbsp;<span class="op" id="8150008">*</span><span class="ident" id="8150009">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150028">TV</span>&nbsp;<span class="op" id="8150031">*</span><span class="ident" id="8150032">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8150048">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8150051">type</span>&nbsp;<span class="ident" id="8150056">GobTest6</span>&nbsp;<span class="keyword" id="8150065">struct</span>&nbsp;<span class="op" id="8150072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150075">X</span>&nbsp;&nbsp;<span class="builtintype" id="8150078">int</span>&nbsp;<span class="comment" id="8150082">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150139">V</span>&nbsp;&nbsp;<span class="ident" id="8150142">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150155">W</span>&nbsp;&nbsp;<span class="op" id="8150158">*</span><span class="ident" id="8150159">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150172">BV</span>&nbsp;<span class="ident" id="8150175">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150194">BW</span>&nbsp;<span class="op" id="8150197">*</span><span class="ident" id="8150198">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150217">TV</span>&nbsp;<span class="ident" id="8150220">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150237">TW</span>&nbsp;<span class="op" id="8150240">*</span><span class="ident" id="8150241">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8150257">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8150260">type</span>&nbsp;<span class="ident" id="8150265">GobTest7</span>&nbsp;<span class="keyword" id="8150274">struct</span>&nbsp;<span class="op" id="8150281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150284">X</span>&nbsp;&nbsp;<span class="builtintype" id="8150287">int</span>&nbsp;<span class="comment" id="8150291">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150348">V</span>&nbsp;&nbsp;<span class="op" id="8150351">*</span><span class="ident" id="8150352">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150365">W</span>&nbsp;&nbsp;<span class="ident" id="8150368">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150381">BV</span>&nbsp;<span class="op" id="8150384">*</span><span class="ident" id="8150385">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150404">BW</span>&nbsp;<span class="ident" id="8150407">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150426">TV</span>&nbsp;<span class="op" id="8150429">*</span><span class="ident" id="8150430">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150447">TW</span>&nbsp;<span class="ident" id="8150450">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8150466">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8150469">type</span>&nbsp;<span class="ident" id="8150474">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="8150495">struct</span>&nbsp;<span class="op" id="8150502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150505">X</span>&nbsp;<span class="builtintype" id="8150507">int</span>&nbsp;<span class="comment" id="8150511">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="8150567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="8150570">type</span>&nbsp;<span class="ident" id="8150575">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="8150594">struct</span>&nbsp;<span class="op" id="8150601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150604">X</span>&nbsp;<span class="builtintype" id="8150606">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8150619">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150676">G</span>&nbsp;<span class="ident" id="8150678">StringStruct</span>&nbsp;<span class="comment" id="8150691">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8150709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8150712">type</span>&nbsp;<span class="ident" id="8150717">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="8150739">struct</span>&nbsp;<span class="op" id="8150746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150749">X</span>&nbsp;<span class="builtintype" id="8150751">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8150767">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150824">G</span>&nbsp;<span class="op" id="8150826">*</span><span class="op" id="8150827">*</span><span class="op" id="8150828">*</span><span class="ident" id="8150829">StringStruct</span>&nbsp;<span class="comment" id="8150842">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8150875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="8150878">type</span>&nbsp;<span class="ident" id="8150883">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="8150902">struct</span>&nbsp;<span class="op" id="8150909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150912">X</span>&nbsp;<span class="builtintype" id="8150914">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8150926">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150983">A</span>&nbsp;<span class="ident" id="8150985">ArrayStruct</span>&nbsp;<span class="comment" id="8150997">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8151015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8151018">type</span>&nbsp;<span class="ident" id="8151023">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="8151050">struct</span>&nbsp;<span class="op" id="8151057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151060">X</span>&nbsp;<span class="builtintype" id="8151062">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8151077">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151134">A</span>&nbsp;<span class="op" id="8151136">*</span><span class="op" id="8151137">*</span><span class="op" id="8151138">*</span><span class="ident" id="8151139">ArrayStruct</span>&nbsp;<span class="comment" id="8151151">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8151188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8151191">func</span>&nbsp;<span class="ident" id="8151196">TestGobEncoderField</span><span class="op" id="8151215">(</span><span class="ident" id="8151216">t</span>&nbsp;<span class="op" id="8151218">*</span><span class="ident" id="8151219">testing</span><span class="op" id="8151226">.</span><span class="ident" id="8151227">T</span><span class="op" id="8151228">)</span>&nbsp;<span class="op" id="8151230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151233">b</span>&nbsp;<span class="op" id="8151235">:=</span>&nbsp;<span class="builtinfunc" id="8151238">new</span><span class="op" id="8151241">(</span><span class="ident" id="8151242">bytes</span><span class="op" id="8151247">.</span><span class="ident" id="8151248">Buffer</span><span class="op" id="8151254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8151257">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151295">enc</span>&nbsp;<span class="op" id="8151299">:=</span>&nbsp;<span class="ident" id="8151302">NewEncoder</span><span class="op" id="8151312">(</span><span class="ident" id="8151313">b</span><span class="op" id="8151314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151317">err</span>&nbsp;<span class="op" id="8151321">:=</span>&nbsp;<span class="ident" id="8151324">enc</span><span class="op" id="8151327">.</span><span class="ident" id="8151328">Encode</span><span class="op" id="8151334">(</span><span class="ident" id="8151335">GobTest0</span><span class="op" id="8151343">{</span><span class="num" id="8151344">17</span><span class="op" id="8151346">,</span>&nbsp;<span class="op" id="8151348">&amp;</span><span class="ident" id="8151349">ByteStruct</span><span class="op" id="8151359">{</span><span class="string" id="8151360">&#39;A&#39;</span><span class="op" id="8151363">}</span><span class="op" id="8151364">}</span><span class="op" id="8151365">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151368">if</span>&nbsp;<span class="ident" id="8151371">err</span>&nbsp;<span class="op" id="8151375">!=</span>&nbsp;<span class="ident" id="8151378">nil</span>&nbsp;<span class="op" id="8151382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151386">t</span><span class="op" id="8151387">.</span><span class="ident" id="8151388">Fatal</span><span class="op" id="8151393">(</span><span class="string" id="8151394">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8151409">,</span>&nbsp;<span class="ident" id="8151411">err</span><span class="op" id="8151414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151420">dec</span>&nbsp;<span class="op" id="8151424">:=</span>&nbsp;<span class="ident" id="8151427">NewDecoder</span><span class="op" id="8151437">(</span><span class="ident" id="8151438">b</span><span class="op" id="8151439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151442">x</span>&nbsp;<span class="op" id="8151444">:=</span>&nbsp;<span class="builtinfunc" id="8151447">new</span><span class="op" id="8151450">(</span><span class="ident" id="8151451">GobTest0</span><span class="op" id="8151459">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151462">err</span>&nbsp;<span class="op" id="8151466">=</span>&nbsp;<span class="ident" id="8151468">dec</span><span class="op" id="8151471">.</span><span class="ident" id="8151472">Decode</span><span class="op" id="8151478">(</span><span class="ident" id="8151479">x</span><span class="op" id="8151480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151483">if</span>&nbsp;<span class="ident" id="8151486">err</span>&nbsp;<span class="op" id="8151490">!=</span>&nbsp;<span class="ident" id="8151493">nil</span>&nbsp;<span class="op" id="8151497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151501">t</span><span class="op" id="8151502">.</span><span class="ident" id="8151503">Fatal</span><span class="op" id="8151508">(</span><span class="string" id="8151509">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8151524">,</span>&nbsp;<span class="ident" id="8151526">err</span><span class="op" id="8151529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151535">if</span>&nbsp;<span class="ident" id="8151538">x</span><span class="op" id="8151539">.</span><span class="ident" id="8151540">G</span><span class="op" id="8151541">.</span><span class="ident" id="8151542">a</span>&nbsp;<span class="op" id="8151544">!=</span>&nbsp;<span class="string" id="8151547">&#39;A&#39;</span>&nbsp;<span class="op" id="8151551">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151555">t</span><span class="op" id="8151556">.</span><span class="ident" id="8151557">Errorf</span><span class="op" id="8151563">(</span><span class="string" id="8151564">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8151585">,</span>&nbsp;<span class="ident" id="8151587">x</span><span class="op" id="8151588">.</span><span class="ident" id="8151589">G</span><span class="op" id="8151590">.</span><span class="ident" id="8151591">a</span><span class="op" id="8151592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8151598">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151638">b</span><span class="op" id="8151639">.</span><span class="ident" id="8151640">Reset</span><span class="op" id="8151645">(</span><span class="op" id="8151646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151649">gobber</span>&nbsp;<span class="op" id="8151656">:=</span>&nbsp;<span class="ident" id="8151659">Gobber</span><span class="op" id="8151665">(</span><span class="num" id="8151666">23</span><span class="op" id="8151668">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151671">bgobber</span>&nbsp;<span class="op" id="8151679">:=</span>&nbsp;<span class="ident" id="8151682">BinaryGobber</span><span class="op" id="8151694">(</span><span class="num" id="8151695">24</span><span class="op" id="8151697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151700">tgobber</span>&nbsp;<span class="op" id="8151708">:=</span>&nbsp;<span class="ident" id="8151711">TextGobber</span><span class="op" id="8151721">(</span><span class="num" id="8151722">25</span><span class="op" id="8151724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151727">err</span>&nbsp;<span class="op" id="8151731">=</span>&nbsp;<span class="ident" id="8151733">enc</span><span class="op" id="8151736">.</span><span class="ident" id="8151737">Encode</span><span class="op" id="8151743">(</span><span class="ident" id="8151744">GobTest3</span><span class="op" id="8151752">{</span><span class="num" id="8151753">17</span><span class="op" id="8151755">,</span>&nbsp;<span class="op" id="8151757">&amp;</span><span class="ident" id="8151758">gobber</span><span class="op" id="8151764">,</span>&nbsp;<span class="op" id="8151766">&amp;</span><span class="ident" id="8151767">bgobber</span><span class="op" id="8151774">,</span>&nbsp;<span class="op" id="8151776">&amp;</span><span class="ident" id="8151777">tgobber</span><span class="op" id="8151784">}</span><span class="op" id="8151785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151788">if</span>&nbsp;<span class="ident" id="8151791">err</span>&nbsp;<span class="op" id="8151795">!=</span>&nbsp;<span class="ident" id="8151798">nil</span>&nbsp;<span class="op" id="8151802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151806">t</span><span class="op" id="8151807">.</span><span class="ident" id="8151808">Fatal</span><span class="op" id="8151813">(</span><span class="string" id="8151814">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8151829">,</span>&nbsp;<span class="ident" id="8151831">err</span><span class="op" id="8151834">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151840">y</span>&nbsp;<span class="op" id="8151842">:=</span>&nbsp;<span class="builtinfunc" id="8151845">new</span><span class="op" id="8151848">(</span><span class="ident" id="8151849">GobTest3</span><span class="op" id="8151857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151860">err</span>&nbsp;<span class="op" id="8151864">=</span>&nbsp;<span class="ident" id="8151866">dec</span><span class="op" id="8151869">.</span><span class="ident" id="8151870">Decode</span><span class="op" id="8151876">(</span><span class="ident" id="8151877">y</span><span class="op" id="8151878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151881">if</span>&nbsp;<span class="ident" id="8151884">err</span>&nbsp;<span class="op" id="8151888">!=</span>&nbsp;<span class="ident" id="8151891">nil</span>&nbsp;<span class="op" id="8151895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151899">t</span><span class="op" id="8151900">.</span><span class="ident" id="8151901">Fatal</span><span class="op" id="8151906">(</span><span class="string" id="8151907">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8151922">,</span>&nbsp;<span class="ident" id="8151924">err</span><span class="op" id="8151927">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151933">if</span>&nbsp;<span class="op" id="8151936">*</span><span class="ident" id="8151937">y</span><span class="op" id="8151938">.</span><span class="ident" id="8151939">G</span>&nbsp;<span class="op" id="8151941">!=</span>&nbsp;<span class="num" id="8151944">23</span>&nbsp;<span class="op" id="8151947">||</span>&nbsp;<span class="op" id="8151950">*</span><span class="ident" id="8151951">y</span><span class="op" id="8151952">.</span><span class="ident" id="8151953">B</span>&nbsp;<span class="op" id="8151955">!=</span>&nbsp;<span class="num" id="8151958">24</span>&nbsp;<span class="op" id="8151961">||</span>&nbsp;<span class="op" id="8151964">*</span><span class="ident" id="8151965">y</span><span class="op" id="8151966">.</span><span class="ident" id="8151967">T</span>&nbsp;<span class="op" id="8151969">!=</span>&nbsp;<span class="num" id="8151972">25</span>&nbsp;<span class="op" id="8151975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151979">t</span><span class="op" id="8151980">.</span><span class="ident" id="8151981">Errorf</span><span class="op" id="8151987">(</span><span class="string" id="8151988">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8152009">,</span>&nbsp;<span class="op" id="8152011">*</span><span class="ident" id="8152012">y</span><span class="op" id="8152013">.</span><span class="ident" id="8152014">G</span><span class="op" id="8152015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152018">}</span><br>
<span class="lineno"></span><span class="op" id="8152020">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="8152023">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="8152090">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8152133">func</span>&nbsp;<span class="ident" id="8152138">TestGobEncoderValueField</span><span class="op" id="8152162">(</span><span class="ident" id="8152163">t</span>&nbsp;<span class="op" id="8152165">*</span><span class="ident" id="8152166">testing</span><span class="op" id="8152173">.</span><span class="ident" id="8152174">T</span><span class="op" id="8152175">)</span>&nbsp;<span class="op" id="8152177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152180">b</span>&nbsp;<span class="op" id="8152182">:=</span>&nbsp;<span class="builtinfunc" id="8152185">new</span><span class="op" id="8152188">(</span><span class="ident" id="8152189">bytes</span><span class="op" id="8152194">.</span><span class="ident" id="8152195">Buffer</span><span class="op" id="8152201">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8152204">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152242">enc</span>&nbsp;<span class="op" id="8152246">:=</span>&nbsp;<span class="ident" id="8152249">NewEncoder</span><span class="op" id="8152259">(</span><span class="ident" id="8152260">b</span><span class="op" id="8152261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152264">err</span>&nbsp;<span class="op" id="8152268">:=</span>&nbsp;<span class="ident" id="8152271">enc</span><span class="op" id="8152274">.</span><span class="ident" id="8152275">Encode</span><span class="op" id="8152281">(</span><span class="op" id="8152282">&amp;</span><span class="ident" id="8152283">GobTestValueEncDec</span><span class="op" id="8152301">{</span><span class="num" id="8152302">17</span><span class="op" id="8152304">,</span>&nbsp;<span class="ident" id="8152306">StringStruct</span><span class="op" id="8152318">{</span><span class="string" id="8152319">&#34;HIJKL&#34;</span><span class="op" id="8152326">}</span><span class="op" id="8152327">}</span><span class="op" id="8152328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152331">if</span>&nbsp;<span class="ident" id="8152334">err</span>&nbsp;<span class="op" id="8152338">!=</span>&nbsp;<span class="ident" id="8152341">nil</span>&nbsp;<span class="op" id="8152345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152349">t</span><span class="op" id="8152350">.</span><span class="ident" id="8152351">Fatal</span><span class="op" id="8152356">(</span><span class="string" id="8152357">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8152372">,</span>&nbsp;<span class="ident" id="8152374">err</span><span class="op" id="8152377">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152383">dec</span>&nbsp;<span class="op" id="8152387">:=</span>&nbsp;<span class="ident" id="8152390">NewDecoder</span><span class="op" id="8152400">(</span><span class="ident" id="8152401">b</span><span class="op" id="8152402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152405">x</span>&nbsp;<span class="op" id="8152407">:=</span>&nbsp;<span class="builtinfunc" id="8152410">new</span><span class="op" id="8152413">(</span><span class="ident" id="8152414">GobTestValueEncDec</span><span class="op" id="8152432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152435">err</span>&nbsp;<span class="op" id="8152439">=</span>&nbsp;<span class="ident" id="8152441">dec</span><span class="op" id="8152444">.</span><span class="ident" id="8152445">Decode</span><span class="op" id="8152451">(</span><span class="ident" id="8152452">x</span><span class="op" id="8152453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152456">if</span>&nbsp;<span class="ident" id="8152459">err</span>&nbsp;<span class="op" id="8152463">!=</span>&nbsp;<span class="ident" id="8152466">nil</span>&nbsp;<span class="op" id="8152470">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152474">t</span><span class="op" id="8152475">.</span><span class="ident" id="8152476">Fatal</span><span class="op" id="8152481">(</span><span class="string" id="8152482">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8152497">,</span>&nbsp;<span class="ident" id="8152499">err</span><span class="op" id="8152502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152508">if</span>&nbsp;<span class="ident" id="8152511">x</span><span class="op" id="8152512">.</span><span class="ident" id="8152513">G</span><span class="op" id="8152514">.</span><span class="ident" id="8152515">s</span>&nbsp;<span class="op" id="8152517">!=</span>&nbsp;<span class="string" id="8152520">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8152528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152532">t</span><span class="op" id="8152533">.</span><span class="ident" id="8152534">Errorf</span><span class="op" id="8152540">(</span><span class="string" id="8152541">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8152566">,</span>&nbsp;<span class="ident" id="8152568">x</span><span class="op" id="8152569">.</span><span class="ident" id="8152570">G</span><span class="op" id="8152571">.</span><span class="ident" id="8152572">s</span><span class="op" id="8152573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152576">}</span><br>
<span class="lineno">295</span><span class="op" id="8152578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8152581">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8152634">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="8152670">func</span>&nbsp;<span class="ident" id="8152675">TestGobEncoderIndirectField</span><span class="op" id="8152702">(</span><span class="ident" id="8152703">t</span>&nbsp;<span class="op" id="8152705">*</span><span class="ident" id="8152706">testing</span><span class="op" id="8152713">.</span><span class="ident" id="8152714">T</span><span class="op" id="8152715">)</span>&nbsp;<span class="op" id="8152717">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152720">b</span>&nbsp;<span class="op" id="8152722">:=</span>&nbsp;<span class="builtinfunc" id="8152725">new</span><span class="op" id="8152728">(</span><span class="ident" id="8152729">bytes</span><span class="op" id="8152734">.</span><span class="ident" id="8152735">Buffer</span><span class="op" id="8152741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8152744">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152782">enc</span>&nbsp;<span class="op" id="8152786">:=</span>&nbsp;<span class="ident" id="8152789">NewEncoder</span><span class="op" id="8152799">(</span><span class="ident" id="8152800">b</span><span class="op" id="8152801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152804">s</span>&nbsp;<span class="op" id="8152806">:=</span>&nbsp;<span class="op" id="8152809">&amp;</span><span class="ident" id="8152810">StringStruct</span><span class="op" id="8152822">{</span><span class="string" id="8152823">&#34;HIJKL&#34;</span><span class="op" id="8152830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152833">sp</span>&nbsp;<span class="op" id="8152836">:=</span>&nbsp;<span class="op" id="8152839">&amp;</span><span class="ident" id="8152840">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152843">err</span>&nbsp;<span class="op" id="8152847">:=</span>&nbsp;<span class="ident" id="8152850">enc</span><span class="op" id="8152853">.</span><span class="ident" id="8152854">Encode</span><span class="op" id="8152860">(</span><span class="ident" id="8152861">GobTestIndirectEncDec</span><span class="op" id="8152882">{</span><span class="num" id="8152883">17</span><span class="op" id="8152885">,</span>&nbsp;<span class="op" id="8152887">&amp;</span><span class="ident" id="8152888">sp</span><span class="op" id="8152890">}</span><span class="op" id="8152891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152894">if</span>&nbsp;<span class="ident" id="8152897">err</span>&nbsp;<span class="op" id="8152901">!=</span>&nbsp;<span class="ident" id="8152904">nil</span>&nbsp;<span class="op" id="8152908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152912">t</span><span class="op" id="8152913">.</span><span class="ident" id="8152914">Fatal</span><span class="op" id="8152919">(</span><span class="string" id="8152920">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8152935">,</span>&nbsp;<span class="ident" id="8152937">err</span><span class="op" id="8152940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152946">dec</span>&nbsp;<span class="op" id="8152950">:=</span>&nbsp;<span class="ident" id="8152953">NewDecoder</span><span class="op" id="8152963">(</span><span class="ident" id="8152964">b</span><span class="op" id="8152965">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152968">x</span>&nbsp;<span class="op" id="8152970">:=</span>&nbsp;<span class="builtinfunc" id="8152973">new</span><span class="op" id="8152976">(</span><span class="ident" id="8152977">GobTestIndirectEncDec</span><span class="op" id="8152998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153001">err</span>&nbsp;<span class="op" id="8153005">=</span>&nbsp;<span class="ident" id="8153007">dec</span><span class="op" id="8153010">.</span><span class="ident" id="8153011">Decode</span><span class="op" id="8153017">(</span><span class="ident" id="8153018">x</span><span class="op" id="8153019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153022">if</span>&nbsp;<span class="ident" id="8153025">err</span>&nbsp;<span class="op" id="8153029">!=</span>&nbsp;<span class="ident" id="8153032">nil</span>&nbsp;<span class="op" id="8153036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153040">t</span><span class="op" id="8153041">.</span><span class="ident" id="8153042">Fatal</span><span class="op" id="8153047">(</span><span class="string" id="8153048">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8153063">,</span>&nbsp;<span class="ident" id="8153065">err</span><span class="op" id="8153068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153071">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153074">if</span>&nbsp;<span class="op" id="8153077">(</span><span class="op" id="8153078">*</span><span class="op" id="8153079">*</span><span class="op" id="8153080">*</span><span class="ident" id="8153081">x</span><span class="op" id="8153082">.</span><span class="ident" id="8153083">G</span><span class="op" id="8153084">)</span><span class="op" id="8153085">.</span><span class="ident" id="8153086">s</span>&nbsp;<span class="op" id="8153088">!=</span>&nbsp;<span class="string" id="8153091">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8153099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153103">t</span><span class="op" id="8153104">.</span><span class="ident" id="8153105">Errorf</span><span class="op" id="8153111">(</span><span class="string" id="8153112">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8153137">,</span>&nbsp;<span class="op" id="8153139">(</span><span class="op" id="8153140">*</span><span class="op" id="8153141">*</span><span class="op" id="8153142">*</span><span class="ident" id="8153143">x</span><span class="op" id="8153144">.</span><span class="ident" id="8153145">G</span><span class="op" id="8153146">)</span><span class="op" id="8153147">.</span><span class="ident" id="8153148">s</span><span class="op" id="8153149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153152">}</span><br>
<span class="lineno"></span><span class="op" id="8153154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="8153157">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8153198">func</span>&nbsp;<span class="ident" id="8153203">TestGobEncoderArrayField</span><span class="op" id="8153227">(</span><span class="ident" id="8153228">t</span>&nbsp;<span class="op" id="8153230">*</span><span class="ident" id="8153231">testing</span><span class="op" id="8153238">.</span><span class="ident" id="8153239">T</span><span class="op" id="8153240">)</span>&nbsp;<span class="op" id="8153242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153245">b</span>&nbsp;<span class="op" id="8153247">:=</span>&nbsp;<span class="builtinfunc" id="8153250">new</span><span class="op" id="8153253">(</span><span class="ident" id="8153254">bytes</span><span class="op" id="8153259">.</span><span class="ident" id="8153260">Buffer</span><span class="op" id="8153266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153269">enc</span>&nbsp;<span class="op" id="8153273">:=</span>&nbsp;<span class="ident" id="8153276">NewEncoder</span><span class="op" id="8153286">(</span><span class="ident" id="8153287">b</span><span class="op" id="8153288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153291">var</span>&nbsp;<span class="ident" id="8153295">a</span>&nbsp;<span class="ident" id="8153297">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153317">a</span><span class="op" id="8153318">.</span><span class="ident" id="8153319">X</span>&nbsp;<span class="op" id="8153321">=</span>&nbsp;<span class="num" id="8153323">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153327">for</span>&nbsp;<span class="ident" id="8153331">i</span>&nbsp;<span class="op" id="8153333">:=</span>&nbsp;<span class="keyword" id="8153336">range</span>&nbsp;<span class="ident" id="8153342">a</span><span class="op" id="8153343">.</span><span class="ident" id="8153344">A</span><span class="op" id="8153345">.</span><span class="ident" id="8153346">a</span>&nbsp;<span class="op" id="8153348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153352">a</span><span class="op" id="8153353">.</span><span class="ident" id="8153354">A</span><span class="op" id="8153355">.</span><span class="ident" id="8153356">a</span><span class="op" id="8153357">[</span><span class="ident" id="8153358">i</span><span class="op" id="8153359">]</span>&nbsp;<span class="op" id="8153361">=</span>&nbsp;<span class="builtintype" id="8153363">byte</span><span class="op" id="8153367">(</span><span class="ident" id="8153368">i</span><span class="op" id="8153369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153375">err</span>&nbsp;<span class="op" id="8153379">:=</span>&nbsp;<span class="ident" id="8153382">enc</span><span class="op" id="8153385">.</span><span class="ident" id="8153386">Encode</span><span class="op" id="8153392">(</span><span class="op" id="8153393">&amp;</span><span class="ident" id="8153394">a</span><span class="op" id="8153395">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153398">if</span>&nbsp;<span class="ident" id="8153401">err</span>&nbsp;<span class="op" id="8153405">!=</span>&nbsp;<span class="ident" id="8153408">nil</span>&nbsp;<span class="op" id="8153412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153416">t</span><span class="op" id="8153417">.</span><span class="ident" id="8153418">Fatal</span><span class="op" id="8153423">(</span><span class="string" id="8153424">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8153439">,</span>&nbsp;<span class="ident" id="8153441">err</span><span class="op" id="8153444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153450">dec</span>&nbsp;<span class="op" id="8153454">:=</span>&nbsp;<span class="ident" id="8153457">NewDecoder</span><span class="op" id="8153467">(</span><span class="ident" id="8153468">b</span><span class="op" id="8153469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153472">x</span>&nbsp;<span class="op" id="8153474">:=</span>&nbsp;<span class="builtinfunc" id="8153477">new</span><span class="op" id="8153480">(</span><span class="ident" id="8153481">GobTestArrayEncDec</span><span class="op" id="8153499">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153502">err</span>&nbsp;<span class="op" id="8153506">=</span>&nbsp;<span class="ident" id="8153508">dec</span><span class="op" id="8153511">.</span><span class="ident" id="8153512">Decode</span><span class="op" id="8153518">(</span><span class="ident" id="8153519">x</span><span class="op" id="8153520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153523">if</span>&nbsp;<span class="ident" id="8153526">err</span>&nbsp;<span class="op" id="8153530">!=</span>&nbsp;<span class="ident" id="8153533">nil</span>&nbsp;<span class="op" id="8153537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153541">t</span><span class="op" id="8153542">.</span><span class="ident" id="8153543">Fatal</span><span class="op" id="8153548">(</span><span class="string" id="8153549">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8153564">,</span>&nbsp;<span class="ident" id="8153566">err</span><span class="op" id="8153569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153575">for</span>&nbsp;<span class="ident" id="8153579">i</span><span class="op" id="8153580">,</span>&nbsp;<span class="ident" id="8153582">v</span>&nbsp;<span class="op" id="8153584">:=</span>&nbsp;<span class="keyword" id="8153587">range</span>&nbsp;<span class="ident" id="8153593">x</span><span class="op" id="8153594">.</span><span class="ident" id="8153595">A</span><span class="op" id="8153596">.</span><span class="ident" id="8153597">a</span>&nbsp;<span class="op" id="8153599">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153603">if</span>&nbsp;<span class="ident" id="8153606">v</span>&nbsp;<span class="op" id="8153608">!=</span>&nbsp;<span class="builtintype" id="8153611">byte</span><span class="op" id="8153615">(</span><span class="ident" id="8153616">i</span><span class="op" id="8153617">)</span>&nbsp;<span class="op" id="8153619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153624">t</span><span class="op" id="8153625">.</span><span class="ident" id="8153626">Errorf</span><span class="op" id="8153632">(</span><span class="string" id="8153633">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8153653">,</span>&nbsp;<span class="builtintype" id="8153655">byte</span><span class="op" id="8153659">(</span><span class="ident" id="8153660">i</span><span class="op" id="8153661">)</span><span class="op" id="8153662">,</span>&nbsp;<span class="ident" id="8153664">v</span><span class="op" id="8153665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153670">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153681">}</span><br>
<span class="lineno">345</span><span class="op" id="8153683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8153686">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8153740">func</span>&nbsp;<span class="ident" id="8153745">TestGobEncoderIndirectArrayField</span><span class="op" id="8153777">(</span><span class="ident" id="8153778">t</span>&nbsp;<span class="op" id="8153780">*</span><span class="ident" id="8153781">testing</span><span class="op" id="8153788">.</span><span class="ident" id="8153789">T</span><span class="op" id="8153790">)</span>&nbsp;<span class="op" id="8153792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153795">b</span>&nbsp;<span class="op" id="8153797">:=</span>&nbsp;<span class="builtinfunc" id="8153800">new</span><span class="op" id="8153803">(</span><span class="ident" id="8153804">bytes</span><span class="op" id="8153809">.</span><span class="ident" id="8153810">Buffer</span><span class="op" id="8153816">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153819">enc</span>&nbsp;<span class="op" id="8153823">:=</span>&nbsp;<span class="ident" id="8153826">NewEncoder</span><span class="op" id="8153836">(</span><span class="ident" id="8153837">b</span><span class="op" id="8153838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153841">var</span>&nbsp;<span class="ident" id="8153845">a</span>&nbsp;<span class="ident" id="8153847">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153875">a</span><span class="op" id="8153876">.</span><span class="ident" id="8153877">X</span>&nbsp;<span class="op" id="8153879">=</span>&nbsp;<span class="num" id="8153881">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153885">var</span>&nbsp;<span class="ident" id="8153889">array</span>&nbsp;<span class="ident" id="8153895">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153908">ap</span>&nbsp;<span class="op" id="8153911">:=</span>&nbsp;<span class="op" id="8153914">&amp;</span><span class="ident" id="8153915">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153922">app</span>&nbsp;<span class="op" id="8153926">:=</span>&nbsp;<span class="op" id="8153929">&amp;</span><span class="ident" id="8153930">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153934">a</span><span class="op" id="8153935">.</span><span class="ident" id="8153936">A</span>&nbsp;<span class="op" id="8153938">=</span>&nbsp;<span class="op" id="8153940">&amp;</span><span class="ident" id="8153941">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153946">for</span>&nbsp;<span class="ident" id="8153950">i</span>&nbsp;<span class="op" id="8153952">:=</span>&nbsp;<span class="keyword" id="8153955">range</span>&nbsp;<span class="ident" id="8153961">array</span><span class="op" id="8153966">.</span><span class="ident" id="8153967">a</span>&nbsp;<span class="op" id="8153969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153973">array</span><span class="op" id="8153978">.</span><span class="ident" id="8153979">a</span><span class="op" id="8153980">[</span><span class="ident" id="8153981">i</span><span class="op" id="8153982">]</span>&nbsp;<span class="op" id="8153984">=</span>&nbsp;<span class="builtintype" id="8153986">byte</span><span class="op" id="8153990">(</span><span class="ident" id="8153991">i</span><span class="op" id="8153992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153995">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153998">err</span>&nbsp;<span class="op" id="8154002">:=</span>&nbsp;<span class="ident" id="8154005">enc</span><span class="op" id="8154008">.</span><span class="ident" id="8154009">Encode</span><span class="op" id="8154015">(</span><span class="ident" id="8154016">a</span><span class="op" id="8154017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154020">if</span>&nbsp;<span class="ident" id="8154023">err</span>&nbsp;<span class="op" id="8154027">!=</span>&nbsp;<span class="ident" id="8154030">nil</span>&nbsp;<span class="op" id="8154034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154038">t</span><span class="op" id="8154039">.</span><span class="ident" id="8154040">Fatal</span><span class="op" id="8154045">(</span><span class="string" id="8154046">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8154061">,</span>&nbsp;<span class="ident" id="8154063">err</span><span class="op" id="8154066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154072">dec</span>&nbsp;<span class="op" id="8154076">:=</span>&nbsp;<span class="ident" id="8154079">NewDecoder</span><span class="op" id="8154089">(</span><span class="ident" id="8154090">b</span><span class="op" id="8154091">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154094">x</span>&nbsp;<span class="op" id="8154096">:=</span>&nbsp;<span class="builtinfunc" id="8154099">new</span><span class="op" id="8154102">(</span><span class="ident" id="8154103">GobTestIndirectArrayEncDec</span><span class="op" id="8154129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154132">err</span>&nbsp;<span class="op" id="8154136">=</span>&nbsp;<span class="ident" id="8154138">dec</span><span class="op" id="8154141">.</span><span class="ident" id="8154142">Decode</span><span class="op" id="8154148">(</span><span class="ident" id="8154149">x</span><span class="op" id="8154150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154153">if</span>&nbsp;<span class="ident" id="8154156">err</span>&nbsp;<span class="op" id="8154160">!=</span>&nbsp;<span class="ident" id="8154163">nil</span>&nbsp;<span class="op" id="8154167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154171">t</span><span class="op" id="8154172">.</span><span class="ident" id="8154173">Fatal</span><span class="op" id="8154178">(</span><span class="string" id="8154179">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8154194">,</span>&nbsp;<span class="ident" id="8154196">err</span><span class="op" id="8154199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154202">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154205">for</span>&nbsp;<span class="ident" id="8154209">i</span><span class="op" id="8154210">,</span>&nbsp;<span class="ident" id="8154212">v</span>&nbsp;<span class="op" id="8154214">:=</span>&nbsp;<span class="keyword" id="8154217">range</span>&nbsp;<span class="op" id="8154223">(</span><span class="op" id="8154224">*</span><span class="op" id="8154225">*</span><span class="op" id="8154226">*</span><span class="ident" id="8154227">x</span><span class="op" id="8154228">.</span><span class="ident" id="8154229">A</span><span class="op" id="8154230">)</span><span class="op" id="8154231">.</span><span class="ident" id="8154232">a</span>&nbsp;<span class="op" id="8154234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154238">if</span>&nbsp;<span class="ident" id="8154241">v</span>&nbsp;<span class="op" id="8154243">!=</span>&nbsp;<span class="builtintype" id="8154246">byte</span><span class="op" id="8154250">(</span><span class="ident" id="8154251">i</span><span class="op" id="8154252">)</span>&nbsp;<span class="op" id="8154254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154259">t</span><span class="op" id="8154260">.</span><span class="ident" id="8154261">Errorf</span><span class="op" id="8154267">(</span><span class="string" id="8154268">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8154288">,</span>&nbsp;<span class="builtintype" id="8154290">byte</span><span class="op" id="8154294">(</span><span class="ident" id="8154295">i</span><span class="op" id="8154296">)</span><span class="op" id="8154297">,</span>&nbsp;<span class="ident" id="8154299">v</span><span class="op" id="8154300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154305">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154313">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154316">}</span><br>
<span class="lineno"></span><span class="op" id="8154318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8154321">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8154383">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="8154446">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="8154507">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="8154567">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="8154590">func</span>&nbsp;<span class="ident" id="8154595">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="8154630">(</span><span class="ident" id="8154631">t</span>&nbsp;<span class="op" id="8154633">*</span><span class="ident" id="8154634">testing</span><span class="op" id="8154641">.</span><span class="ident" id="8154642">T</span><span class="op" id="8154643">)</span>&nbsp;<span class="op" id="8154645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8154648">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154692">b</span>&nbsp;<span class="op" id="8154694">:=</span>&nbsp;<span class="builtinfunc" id="8154697">new</span><span class="op" id="8154700">(</span><span class="ident" id="8154701">bytes</span><span class="op" id="8154706">.</span><span class="ident" id="8154707">Buffer</span><span class="op" id="8154713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154716">enc</span>&nbsp;<span class="op" id="8154720">:=</span>&nbsp;<span class="ident" id="8154723">NewEncoder</span><span class="op" id="8154733">(</span><span class="ident" id="8154734">b</span><span class="op" id="8154735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154738">err</span>&nbsp;<span class="op" id="8154742">:=</span>&nbsp;<span class="ident" id="8154745">enc</span><span class="op" id="8154748">.</span><span class="ident" id="8154749">Encode</span><span class="op" id="8154755">(</span><span class="ident" id="8154756">GobTest1</span><span class="op" id="8154764">{</span><span class="num" id="8154765">17</span><span class="op" id="8154767">,</span>&nbsp;<span class="op" id="8154769">&amp;</span><span class="ident" id="8154770">StringStruct</span><span class="op" id="8154782">{</span><span class="string" id="8154783">&#34;ABC&#34;</span><span class="op" id="8154788">}</span><span class="op" id="8154789">}</span><span class="op" id="8154790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154793">if</span>&nbsp;<span class="ident" id="8154796">err</span>&nbsp;<span class="op" id="8154800">!=</span>&nbsp;<span class="ident" id="8154803">nil</span>&nbsp;<span class="op" id="8154807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154811">t</span><span class="op" id="8154812">.</span><span class="ident" id="8154813">Fatal</span><span class="op" id="8154818">(</span><span class="string" id="8154819">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8154834">,</span>&nbsp;<span class="ident" id="8154836">err</span><span class="op" id="8154839">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154845">dec</span>&nbsp;<span class="op" id="8154849">:=</span>&nbsp;<span class="ident" id="8154852">NewDecoder</span><span class="op" id="8154862">(</span><span class="ident" id="8154863">b</span><span class="op" id="8154864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154867">x</span>&nbsp;<span class="op" id="8154869">:=</span>&nbsp;<span class="builtinfunc" id="8154872">new</span><span class="op" id="8154875">(</span><span class="ident" id="8154876">GobTest0</span><span class="op" id="8154884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154887">err</span>&nbsp;<span class="op" id="8154891">=</span>&nbsp;<span class="ident" id="8154893">dec</span><span class="op" id="8154896">.</span><span class="ident" id="8154897">Decode</span><span class="op" id="8154903">(</span><span class="ident" id="8154904">x</span><span class="op" id="8154905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154908">if</span>&nbsp;<span class="ident" id="8154911">err</span>&nbsp;<span class="op" id="8154915">!=</span>&nbsp;<span class="ident" id="8154918">nil</span>&nbsp;<span class="op" id="8154922">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154926">t</span><span class="op" id="8154927">.</span><span class="ident" id="8154928">Fatal</span><span class="op" id="8154933">(</span><span class="string" id="8154934">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8154949">,</span>&nbsp;<span class="ident" id="8154951">err</span><span class="op" id="8154954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8154957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8154960">if</span>&nbsp;<span class="ident" id="8154963">x</span><span class="op" id="8154964">.</span><span class="ident" id="8154965">G</span><span class="op" id="8154966">.</span><span class="ident" id="8154967">a</span>&nbsp;<span class="op" id="8154969">!=</span>&nbsp;<span class="string" id="8154972">&#39;A&#39;</span>&nbsp;<span class="op" id="8154976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8154980">t</span><span class="op" id="8154981">.</span><span class="ident" id="8154982">Errorf</span><span class="op" id="8154988">(</span><span class="string" id="8154989">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8155010">,</span>&nbsp;<span class="ident" id="8155012">x</span><span class="op" id="8155013">.</span><span class="ident" id="8155014">G</span><span class="op" id="8155015">.</span><span class="ident" id="8155016">a</span><span class="op" id="8155017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155020">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8155023">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155085">b</span><span class="op" id="8155086">.</span><span class="ident" id="8155087">Reset</span><span class="op" id="8155092">(</span><span class="op" id="8155093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155096">err</span>&nbsp;<span class="op" id="8155100">=</span>&nbsp;<span class="ident" id="8155102">enc</span><span class="op" id="8155105">.</span><span class="ident" id="8155106">Encode</span><span class="op" id="8155112">(</span><span class="ident" id="8155113">GobTest0</span><span class="op" id="8155121">{</span><span class="num" id="8155122">17</span><span class="op" id="8155124">,</span>&nbsp;<span class="op" id="8155126">&amp;</span><span class="ident" id="8155127">ByteStruct</span><span class="op" id="8155137">{</span><span class="string" id="8155138">&#39;X&#39;</span><span class="op" id="8155141">}</span><span class="op" id="8155142">}</span><span class="op" id="8155143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155146">if</span>&nbsp;<span class="ident" id="8155149">err</span>&nbsp;<span class="op" id="8155153">!=</span>&nbsp;<span class="ident" id="8155156">nil</span>&nbsp;<span class="op" id="8155160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155164">t</span><span class="op" id="8155165">.</span><span class="ident" id="8155166">Fatal</span><span class="op" id="8155171">(</span><span class="string" id="8155172">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8155187">,</span>&nbsp;<span class="ident" id="8155189">err</span><span class="op" id="8155192">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155198">y</span>&nbsp;<span class="op" id="8155200">:=</span>&nbsp;<span class="builtinfunc" id="8155203">new</span><span class="op" id="8155206">(</span><span class="ident" id="8155207">GobTest1</span><span class="op" id="8155215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155218">err</span>&nbsp;<span class="op" id="8155222">=</span>&nbsp;<span class="ident" id="8155224">dec</span><span class="op" id="8155227">.</span><span class="ident" id="8155228">Decode</span><span class="op" id="8155234">(</span><span class="ident" id="8155235">y</span><span class="op" id="8155236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155239">if</span>&nbsp;<span class="ident" id="8155242">err</span>&nbsp;<span class="op" id="8155246">!=</span>&nbsp;<span class="ident" id="8155249">nil</span>&nbsp;<span class="op" id="8155253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155257">t</span><span class="op" id="8155258">.</span><span class="ident" id="8155259">Fatal</span><span class="op" id="8155264">(</span><span class="string" id="8155265">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8155280">,</span>&nbsp;<span class="ident" id="8155282">err</span><span class="op" id="8155285">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155291">if</span>&nbsp;<span class="ident" id="8155294">y</span><span class="op" id="8155295">.</span><span class="ident" id="8155296">G</span><span class="op" id="8155297">.</span><span class="ident" id="8155298">s</span>&nbsp;<span class="op" id="8155300">!=</span>&nbsp;<span class="string" id="8155303">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="8155309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155313">t</span><span class="op" id="8155314">.</span><span class="ident" id="8155315">Fatalf</span><span class="op" id="8155321">(</span><span class="string" id="8155322">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8155345">,</span>&nbsp;<span class="ident" id="8155347">y</span><span class="op" id="8155348">.</span><span class="ident" id="8155349">G</span><span class="op" id="8155350">.</span><span class="ident" id="8155351">s</span><span class="op" id="8155352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155355">}</span><br>
<span class="lineno"></span><span class="op" id="8155357">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="8155360">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="8155422">func</span>&nbsp;<span class="ident" id="8155427">TestGobEncoderValueEncoder</span><span class="op" id="8155453">(</span><span class="ident" id="8155454">t</span>&nbsp;<span class="op" id="8155456">*</span><span class="ident" id="8155457">testing</span><span class="op" id="8155464">.</span><span class="ident" id="8155465">T</span><span class="op" id="8155466">)</span>&nbsp;<span class="op" id="8155468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8155471">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155515">b</span>&nbsp;<span class="op" id="8155517">:=</span>&nbsp;<span class="builtinfunc" id="8155520">new</span><span class="op" id="8155523">(</span><span class="ident" id="8155524">bytes</span><span class="op" id="8155529">.</span><span class="ident" id="8155530">Buffer</span><span class="op" id="8155536">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155539">enc</span>&nbsp;<span class="op" id="8155543">:=</span>&nbsp;<span class="ident" id="8155546">NewEncoder</span><span class="op" id="8155556">(</span><span class="ident" id="8155557">b</span><span class="op" id="8155558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155561">err</span>&nbsp;<span class="op" id="8155565">:=</span>&nbsp;<span class="ident" id="8155568">enc</span><span class="op" id="8155571">.</span><span class="ident" id="8155572">Encode</span><span class="op" id="8155578">(</span><span class="ident" id="8155579">GobTest4</span><span class="op" id="8155587">{</span><span class="num" id="8155588">17</span><span class="op" id="8155590">,</span>&nbsp;<span class="ident" id="8155592">ValueGobber</span><span class="op" id="8155603">(</span><span class="string" id="8155604">&#34;hello&#34;</span><span class="op" id="8155611">)</span><span class="op" id="8155612">,</span>&nbsp;<span class="ident" id="8155614">BinaryValueGobber</span><span class="op" id="8155631">(</span><span class="string" id="8155632">&#34;Καλημέρα&#34;</span><span class="op" id="8155650">)</span><span class="op" id="8155651">,</span>&nbsp;<span class="ident" id="8155653">TextValueGobber</span><span class="op" id="8155668">(</span><span class="string" id="8155669">&#34;こんにちは&#34;</span><span class="op" id="8155686">)</span><span class="op" id="8155687">}</span><span class="op" id="8155688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155691">if</span>&nbsp;<span class="ident" id="8155694">err</span>&nbsp;<span class="op" id="8155698">!=</span>&nbsp;<span class="ident" id="8155701">nil</span>&nbsp;<span class="op" id="8155705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155709">t</span><span class="op" id="8155710">.</span><span class="ident" id="8155711">Fatal</span><span class="op" id="8155716">(</span><span class="string" id="8155717">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8155732">,</span>&nbsp;<span class="ident" id="8155734">err</span><span class="op" id="8155737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155740">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155743">dec</span>&nbsp;<span class="op" id="8155747">:=</span>&nbsp;<span class="ident" id="8155750">NewDecoder</span><span class="op" id="8155760">(</span><span class="ident" id="8155761">b</span><span class="op" id="8155762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155765">x</span>&nbsp;<span class="op" id="8155767">:=</span>&nbsp;<span class="builtinfunc" id="8155770">new</span><span class="op" id="8155773">(</span><span class="ident" id="8155774">GobTest5</span><span class="op" id="8155782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155785">err</span>&nbsp;<span class="op" id="8155789">=</span>&nbsp;<span class="ident" id="8155791">dec</span><span class="op" id="8155794">.</span><span class="ident" id="8155795">Decode</span><span class="op" id="8155801">(</span><span class="ident" id="8155802">x</span><span class="op" id="8155803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155806">if</span>&nbsp;<span class="ident" id="8155809">err</span>&nbsp;<span class="op" id="8155813">!=</span>&nbsp;<span class="ident" id="8155816">nil</span>&nbsp;<span class="op" id="8155820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155824">t</span><span class="op" id="8155825">.</span><span class="ident" id="8155826">Fatal</span><span class="op" id="8155831">(</span><span class="string" id="8155832">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8155847">,</span>&nbsp;<span class="ident" id="8155849">err</span><span class="op" id="8155852">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8155858">if</span>&nbsp;<span class="op" id="8155861">*</span><span class="ident" id="8155862">x</span><span class="op" id="8155863">.</span><span class="ident" id="8155864">V</span>&nbsp;<span class="op" id="8155866">!=</span>&nbsp;<span class="string" id="8155869">&#34;hello&#34;</span>&nbsp;<span class="op" id="8155877">||</span>&nbsp;<span class="op" id="8155880">*</span><span class="ident" id="8155881">x</span><span class="op" id="8155882">.</span><span class="ident" id="8155883">BV</span>&nbsp;<span class="op" id="8155886">!=</span>&nbsp;<span class="string" id="8155889">&#34;Καλημέρα&#34;</span>&nbsp;<span class="op" id="8155908">||</span>&nbsp;<span class="op" id="8155911">*</span><span class="ident" id="8155912">x</span><span class="op" id="8155913">.</span><span class="ident" id="8155914">TV</span>&nbsp;<span class="op" id="8155917">!=</span>&nbsp;<span class="string" id="8155920">&#34;こんにちは&#34;</span>&nbsp;<span class="op" id="8155938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8155942">t</span><span class="op" id="8155943">.</span><span class="ident" id="8155944">Errorf</span><span class="op" id="8155950">(</span><span class="string" id="8155951">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8155976">,</span>&nbsp;<span class="op" id="8155978">*</span><span class="ident" id="8155979">x</span><span class="op" id="8155980">.</span><span class="ident" id="8155981">V</span><span class="op" id="8155982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8155985">}</span><br>
<span class="lineno"></span><span class="op" id="8155987">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="8155990">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8156058">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="8156099">func</span>&nbsp;<span class="ident" id="8156104">TestGobEncoderValueThenPointer</span><span class="op" id="8156134">(</span><span class="ident" id="8156135">t</span>&nbsp;<span class="op" id="8156137">*</span><span class="ident" id="8156138">testing</span><span class="op" id="8156145">.</span><span class="ident" id="8156146">T</span><span class="op" id="8156147">)</span>&nbsp;<span class="op" id="8156149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156152">v</span>&nbsp;<span class="op" id="8156154">:=</span>&nbsp;<span class="ident" id="8156157">ValueGobber</span><span class="op" id="8156168">(</span><span class="string" id="8156169">&#34;forty-two&#34;</span><span class="op" id="8156180">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156183">w</span>&nbsp;<span class="op" id="8156185">:=</span>&nbsp;<span class="ident" id="8156188">ValueGobber</span><span class="op" id="8156199">(</span><span class="string" id="8156200">&#34;six-by-nine&#34;</span><span class="op" id="8156213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156216">bv</span>&nbsp;<span class="op" id="8156219">:=</span>&nbsp;<span class="ident" id="8156222">BinaryValueGobber</span><span class="op" id="8156239">(</span><span class="string" id="8156240">&#34;1nanocentury&#34;</span><span class="op" id="8156254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156257">bw</span>&nbsp;<span class="op" id="8156260">:=</span>&nbsp;<span class="ident" id="8156263">BinaryValueGobber</span><span class="op" id="8156280">(</span><span class="string" id="8156281">&#34;πseconds&#34;</span><span class="op" id="8156292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156295">tv</span>&nbsp;<span class="op" id="8156298">:=</span>&nbsp;<span class="ident" id="8156301">TextValueGobber</span><span class="op" id="8156316">(</span><span class="string" id="8156317">&#34;gravitationalacceleration&#34;</span><span class="op" id="8156344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156347">tw</span>&nbsp;<span class="op" id="8156350">:=</span>&nbsp;<span class="ident" id="8156353">TextValueGobber</span><span class="op" id="8156368">(</span><span class="string" id="8156369">&#34;π²ft/s²&#34;</span><span class="op" id="8156381">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8156385">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8156456">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156520">b</span>&nbsp;<span class="op" id="8156522">:=</span>&nbsp;<span class="builtinfunc" id="8156525">new</span><span class="op" id="8156528">(</span><span class="ident" id="8156529">bytes</span><span class="op" id="8156534">.</span><span class="ident" id="8156535">Buffer</span><span class="op" id="8156541">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156544">enc</span>&nbsp;<span class="op" id="8156548">:=</span>&nbsp;<span class="ident" id="8156551">NewEncoder</span><span class="op" id="8156561">(</span><span class="ident" id="8156562">b</span><span class="op" id="8156563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156566">if</span>&nbsp;<span class="ident" id="8156569">err</span>&nbsp;<span class="op" id="8156573">:=</span>&nbsp;<span class="ident" id="8156576">enc</span><span class="op" id="8156579">.</span><span class="ident" id="8156580">Encode</span><span class="op" id="8156586">(</span><span class="ident" id="8156587">GobTest6</span><span class="op" id="8156595">{</span><span class="num" id="8156596">42</span><span class="op" id="8156598">,</span>&nbsp;<span class="ident" id="8156600">v</span><span class="op" id="8156601">,</span>&nbsp;<span class="op" id="8156603">&amp;</span><span class="ident" id="8156604">w</span><span class="op" id="8156605">,</span>&nbsp;<span class="ident" id="8156607">bv</span><span class="op" id="8156609">,</span>&nbsp;<span class="op" id="8156611">&amp;</span><span class="ident" id="8156612">bw</span><span class="op" id="8156614">,</span>&nbsp;<span class="ident" id="8156616">tv</span><span class="op" id="8156618">,</span>&nbsp;<span class="op" id="8156620">&amp;</span><span class="ident" id="8156621">tw</span><span class="op" id="8156623">}</span><span class="op" id="8156624">)</span><span class="op" id="8156625">;</span>&nbsp;<span class="ident" id="8156627">err</span>&nbsp;<span class="op" id="8156631">!=</span>&nbsp;<span class="ident" id="8156634">nil</span>&nbsp;<span class="op" id="8156638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156642">t</span><span class="op" id="8156643">.</span><span class="ident" id="8156644">Fatal</span><span class="op" id="8156649">(</span><span class="string" id="8156650">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8156665">,</span>&nbsp;<span class="ident" id="8156667">err</span><span class="op" id="8156670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156676">dec</span>&nbsp;<span class="op" id="8156680">:=</span>&nbsp;<span class="ident" id="8156683">NewDecoder</span><span class="op" id="8156693">(</span><span class="ident" id="8156694">b</span><span class="op" id="8156695">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156698">x</span>&nbsp;<span class="op" id="8156700">:=</span>&nbsp;<span class="builtinfunc" id="8156703">new</span><span class="op" id="8156706">(</span><span class="ident" id="8156707">GobTest6</span><span class="op" id="8156715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156718">if</span>&nbsp;<span class="ident" id="8156721">err</span>&nbsp;<span class="op" id="8156725">:=</span>&nbsp;<span class="ident" id="8156728">dec</span><span class="op" id="8156731">.</span><span class="ident" id="8156732">Decode</span><span class="op" id="8156738">(</span><span class="ident" id="8156739">x</span><span class="op" id="8156740">)</span><span class="op" id="8156741">;</span>&nbsp;<span class="ident" id="8156743">err</span>&nbsp;<span class="op" id="8156747">!=</span>&nbsp;<span class="ident" id="8156750">nil</span>&nbsp;<span class="op" id="8156754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156758">t</span><span class="op" id="8156759">.</span><span class="ident" id="8156760">Fatal</span><span class="op" id="8156765">(</span><span class="string" id="8156766">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8156781">,</span>&nbsp;<span class="ident" id="8156783">err</span><span class="op" id="8156786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156793">if</span>&nbsp;<span class="ident" id="8156796">got</span><span class="op" id="8156799">,</span>&nbsp;<span class="ident" id="8156801">want</span>&nbsp;<span class="op" id="8156806">:=</span>&nbsp;<span class="ident" id="8156809">x</span><span class="op" id="8156810">.</span><span class="ident" id="8156811">V</span><span class="op" id="8156812">,</span>&nbsp;<span class="ident" id="8156814">v</span><span class="op" id="8156815">;</span>&nbsp;<span class="ident" id="8156817">got</span>&nbsp;<span class="op" id="8156821">!=</span>&nbsp;<span class="ident" id="8156824">want</span>&nbsp;<span class="op" id="8156829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156833">t</span><span class="op" id="8156834">.</span><span class="ident" id="8156835">Errorf</span><span class="op" id="8156841">(</span><span class="string" id="8156842">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8156859">,</span>&nbsp;<span class="ident" id="8156861">got</span><span class="op" id="8156864">,</span>&nbsp;<span class="ident" id="8156866">want</span><span class="op" id="8156870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8156876">if</span>&nbsp;<span class="ident" id="8156879">got</span><span class="op" id="8156882">,</span>&nbsp;<span class="ident" id="8156884">want</span>&nbsp;<span class="op" id="8156889">:=</span>&nbsp;<span class="ident" id="8156892">x</span><span class="op" id="8156893">.</span><span class="ident" id="8156894">W</span><span class="op" id="8156895">,</span>&nbsp;<span class="ident" id="8156897">w</span><span class="op" id="8156898">;</span>&nbsp;<span class="ident" id="8156900">got</span>&nbsp;<span class="op" id="8156904">==</span>&nbsp;<span class="ident" id="8156907">nil</span>&nbsp;<span class="op" id="8156911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156915">t</span><span class="op" id="8156916">.</span><span class="ident" id="8156917">Errorf</span><span class="op" id="8156923">(</span><span class="string" id="8156924">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8156942">,</span>&nbsp;<span class="ident" id="8156944">want</span><span class="op" id="8156948">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8156951">}</span>&nbsp;<span class="keyword" id="8156953">else</span>&nbsp;<span class="keyword" id="8156958">if</span>&nbsp;<span class="op" id="8156961">*</span><span class="ident" id="8156962">got</span>&nbsp;<span class="op" id="8156966">!=</span>&nbsp;<span class="ident" id="8156969">want</span>&nbsp;<span class="op" id="8156974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8156978">t</span><span class="op" id="8156979">.</span><span class="ident" id="8156980">Errorf</span><span class="op" id="8156986">(</span><span class="string" id="8156987">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157004">,</span>&nbsp;<span class="op" id="8157006">*</span><span class="ident" id="8157007">got</span><span class="op" id="8157010">,</span>&nbsp;<span class="ident" id="8157012">want</span><span class="op" id="8157016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8157023">if</span>&nbsp;<span class="ident" id="8157026">got</span><span class="op" id="8157029">,</span>&nbsp;<span class="ident" id="8157031">want</span>&nbsp;<span class="op" id="8157036">:=</span>&nbsp;<span class="ident" id="8157039">x</span><span class="op" id="8157040">.</span><span class="ident" id="8157041">BV</span><span class="op" id="8157043">,</span>&nbsp;<span class="ident" id="8157045">bv</span><span class="op" id="8157047">;</span>&nbsp;<span class="ident" id="8157049">got</span>&nbsp;<span class="op" id="8157053">!=</span>&nbsp;<span class="ident" id="8157056">want</span>&nbsp;<span class="op" id="8157061">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157065">t</span><span class="op" id="8157066">.</span><span class="ident" id="8157067">Errorf</span><span class="op" id="8157073">(</span><span class="string" id="8157074">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157092">,</span>&nbsp;<span class="ident" id="8157094">got</span><span class="op" id="8157097">,</span>&nbsp;<span class="ident" id="8157099">want</span><span class="op" id="8157103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8157109">if</span>&nbsp;<span class="ident" id="8157112">got</span><span class="op" id="8157115">,</span>&nbsp;<span class="ident" id="8157117">want</span>&nbsp;<span class="op" id="8157122">:=</span>&nbsp;<span class="ident" id="8157125">x</span><span class="op" id="8157126">.</span><span class="ident" id="8157127">BW</span><span class="op" id="8157129">,</span>&nbsp;<span class="ident" id="8157131">bw</span><span class="op" id="8157133">;</span>&nbsp;<span class="ident" id="8157135">got</span>&nbsp;<span class="op" id="8157139">==</span>&nbsp;<span class="ident" id="8157142">nil</span>&nbsp;<span class="op" id="8157146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157150">t</span><span class="op" id="8157151">.</span><span class="ident" id="8157152">Errorf</span><span class="op" id="8157158">(</span><span class="string" id="8157159">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157178">,</span>&nbsp;<span class="ident" id="8157180">want</span><span class="op" id="8157184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157187">}</span>&nbsp;<span class="keyword" id="8157189">else</span>&nbsp;<span class="keyword" id="8157194">if</span>&nbsp;<span class="op" id="8157197">*</span><span class="ident" id="8157198">got</span>&nbsp;<span class="op" id="8157202">!=</span>&nbsp;<span class="ident" id="8157205">want</span>&nbsp;<span class="op" id="8157210">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157214">t</span><span class="op" id="8157215">.</span><span class="ident" id="8157216">Errorf</span><span class="op" id="8157222">(</span><span class="string" id="8157223">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157241">,</span>&nbsp;<span class="op" id="8157243">*</span><span class="ident" id="8157244">got</span><span class="op" id="8157247">,</span>&nbsp;<span class="ident" id="8157249">want</span><span class="op" id="8157253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8157260">if</span>&nbsp;<span class="ident" id="8157263">got</span><span class="op" id="8157266">,</span>&nbsp;<span class="ident" id="8157268">want</span>&nbsp;<span class="op" id="8157273">:=</span>&nbsp;<span class="ident" id="8157276">x</span><span class="op" id="8157277">.</span><span class="ident" id="8157278">TV</span><span class="op" id="8157280">,</span>&nbsp;<span class="ident" id="8157282">tv</span><span class="op" id="8157284">;</span>&nbsp;<span class="ident" id="8157286">got</span>&nbsp;<span class="op" id="8157290">!=</span>&nbsp;<span class="ident" id="8157293">want</span>&nbsp;<span class="op" id="8157298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157302">t</span><span class="op" id="8157303">.</span><span class="ident" id="8157304">Errorf</span><span class="op" id="8157310">(</span><span class="string" id="8157311">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157329">,</span>&nbsp;<span class="ident" id="8157331">got</span><span class="op" id="8157334">,</span>&nbsp;<span class="ident" id="8157336">want</span><span class="op" id="8157340">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8157346">if</span>&nbsp;<span class="ident" id="8157349">got</span><span class="op" id="8157352">,</span>&nbsp;<span class="ident" id="8157354">want</span>&nbsp;<span class="op" id="8157359">:=</span>&nbsp;<span class="ident" id="8157362">x</span><span class="op" id="8157363">.</span><span class="ident" id="8157364">TW</span><span class="op" id="8157366">,</span>&nbsp;<span class="ident" id="8157368">tw</span><span class="op" id="8157370">;</span>&nbsp;<span class="ident" id="8157372">got</span>&nbsp;<span class="op" id="8157376">==</span>&nbsp;<span class="ident" id="8157379">nil</span>&nbsp;<span class="op" id="8157383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157387">t</span><span class="op" id="8157388">.</span><span class="ident" id="8157389">Errorf</span><span class="op" id="8157395">(</span><span class="string" id="8157396">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157415">,</span>&nbsp;<span class="ident" id="8157417">want</span><span class="op" id="8157421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157424">}</span>&nbsp;<span class="keyword" id="8157426">else</span>&nbsp;<span class="keyword" id="8157431">if</span>&nbsp;<span class="op" id="8157434">*</span><span class="ident" id="8157435">got</span>&nbsp;<span class="op" id="8157439">!=</span>&nbsp;<span class="ident" id="8157442">want</span>&nbsp;<span class="op" id="8157447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157451">t</span><span class="op" id="8157452">.</span><span class="ident" id="8157453">Errorf</span><span class="op" id="8157459">(</span><span class="string" id="8157460">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8157478">,</span>&nbsp;<span class="op" id="8157480">*</span><span class="ident" id="8157481">got</span><span class="op" id="8157484">,</span>&nbsp;<span class="ident" id="8157486">want</span><span class="op" id="8157490">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8157493">}</span><br>
<span class="lineno"></span><span class="op" id="8157495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8157498">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8157566">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="8157596">func</span>&nbsp;<span class="ident" id="8157601">TestGobEncoderPointerThenValue</span><span class="op" id="8157631">(</span><span class="ident" id="8157632">t</span>&nbsp;<span class="op" id="8157634">*</span><span class="ident" id="8157635">testing</span><span class="op" id="8157642">.</span><span class="ident" id="8157643">T</span><span class="op" id="8157644">)</span>&nbsp;<span class="op" id="8157646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157649">v</span>&nbsp;<span class="op" id="8157651">:=</span>&nbsp;<span class="ident" id="8157654">ValueGobber</span><span class="op" id="8157665">(</span><span class="string" id="8157666">&#34;forty-two&#34;</span><span class="op" id="8157677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157680">w</span>&nbsp;<span class="op" id="8157682">:=</span>&nbsp;<span class="ident" id="8157685">ValueGobber</span><span class="op" id="8157696">(</span><span class="string" id="8157697">&#34;six-by-nine&#34;</span><span class="op" id="8157710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157713">bv</span>&nbsp;<span class="op" id="8157716">:=</span>&nbsp;<span class="ident" id="8157719">BinaryValueGobber</span><span class="op" id="8157736">(</span><span class="string" id="8157737">&#34;1nanocentury&#34;</span><span class="op" id="8157751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157754">bw</span>&nbsp;<span class="op" id="8157757">:=</span>&nbsp;<span class="ident" id="8157760">BinaryValueGobber</span><span class="op" id="8157777">(</span><span class="string" id="8157778">&#34;πseconds&#34;</span><span class="op" id="8157789">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157792">tv</span>&nbsp;<span class="op" id="8157795">:=</span>&nbsp;<span class="ident" id="8157798">TextValueGobber</span><span class="op" id="8157813">(</span><span class="string" id="8157814">&#34;gravitationalacceleration&#34;</span><span class="op" id="8157841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157844">tw</span>&nbsp;<span class="op" id="8157847">:=</span>&nbsp;<span class="ident" id="8157850">TextValueGobber</span><span class="op" id="8157865">(</span><span class="string" id="8157866">&#34;π²ft/s²&#34;</span><span class="op" id="8157878">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157882">b</span>&nbsp;<span class="op" id="8157884">:=</span>&nbsp;<span class="builtinfunc" id="8157887">new</span><span class="op" id="8157890">(</span><span class="ident" id="8157891">bytes</span><span class="op" id="8157896">.</span><span class="ident" id="8157897">Buffer</span><span class="op" id="8157903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8157906">enc</span>&nbsp;<span class="op" id="8157910">:=</span>&nbsp;<span class="ident" id="8157913">NewEncoder</span><span class="op" id="8157923">(</span><span class="ident" id="8157924">b</span><span class="op" id="8157925">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8157928">if</span>&nbsp;<span class="ident" id="8157931">err</span>&nbsp;<span class="op" id="8157935">:=</span>&nbsp;<span class="ident" id="8157938">enc</span><span class="op" id="8157941">.</span><span class="ident" id="8157942">Encode</span><span class="op" id="8157948">(</span><span class="ident" id="8157949">GobTest7</span><span class="op" id="8157957">{</span><span class="num" id="8157958">42</span><span class="op" id="8157960">,</span>&nbsp;<span class="op" id="8157962">&amp;</span><span class="ident" id="8157963">v</span><span class="op" id="8157964">,</span>&nbsp;<span class="ident" id="8157966">w</span><span class="op" id="8157967">,</span>&nbsp;<span class="op" id="8157969">&amp;</span><span class="ident" id="8157970">bv</span><span class="op" id="8157972">,</span>&nbsp;<span class="ident" id="8157974">bw</span><span class="op" id="8157976">,</span>&nbsp;<span class="op" id="8157978">&amp;</span><span class="ident" id="8157979">tv</span><span class="op" id="8157981">,</span>&nbsp;<span class="ident" id="8157983">tw</span><span class="op" id="8157985">}</span><span class="op" id="8157986">)</span><span class="op" id="8157987">;</span>&nbsp;<span class="ident" id="8157989">err</span>&nbsp;<span class="op" id="8157993">!=</span>&nbsp;<span class="ident" id="8157996">nil</span>&nbsp;<span class="op" id="8158000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158004">t</span><span class="op" id="8158005">.</span><span class="ident" id="8158006">Fatal</span><span class="op" id="8158011">(</span><span class="string" id="8158012">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8158027">,</span>&nbsp;<span class="ident" id="8158029">err</span><span class="op" id="8158032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158038">dec</span>&nbsp;<span class="op" id="8158042">:=</span>&nbsp;<span class="ident" id="8158045">NewDecoder</span><span class="op" id="8158055">(</span><span class="ident" id="8158056">b</span><span class="op" id="8158057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158060">x</span>&nbsp;<span class="op" id="8158062">:=</span>&nbsp;<span class="builtinfunc" id="8158065">new</span><span class="op" id="8158068">(</span><span class="ident" id="8158069">GobTest7</span><span class="op" id="8158077">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158080">if</span>&nbsp;<span class="ident" id="8158083">err</span>&nbsp;<span class="op" id="8158087">:=</span>&nbsp;<span class="ident" id="8158090">dec</span><span class="op" id="8158093">.</span><span class="ident" id="8158094">Decode</span><span class="op" id="8158100">(</span><span class="ident" id="8158101">x</span><span class="op" id="8158102">)</span><span class="op" id="8158103">;</span>&nbsp;<span class="ident" id="8158105">err</span>&nbsp;<span class="op" id="8158109">!=</span>&nbsp;<span class="ident" id="8158112">nil</span>&nbsp;<span class="op" id="8158116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158120">t</span><span class="op" id="8158121">.</span><span class="ident" id="8158122">Fatal</span><span class="op" id="8158127">(</span><span class="string" id="8158128">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8158143">,</span>&nbsp;<span class="ident" id="8158145">err</span><span class="op" id="8158148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158155">if</span>&nbsp;<span class="ident" id="8158158">got</span><span class="op" id="8158161">,</span>&nbsp;<span class="ident" id="8158163">want</span>&nbsp;<span class="op" id="8158168">:=</span>&nbsp;<span class="ident" id="8158171">x</span><span class="op" id="8158172">.</span><span class="ident" id="8158173">V</span><span class="op" id="8158174">,</span>&nbsp;<span class="ident" id="8158176">v</span><span class="op" id="8158177">;</span>&nbsp;<span class="ident" id="8158179">got</span>&nbsp;<span class="op" id="8158183">==</span>&nbsp;<span class="ident" id="8158186">nil</span>&nbsp;<span class="op" id="8158190">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158194">t</span><span class="op" id="8158195">.</span><span class="ident" id="8158196">Errorf</span><span class="op" id="8158202">(</span><span class="string" id="8158203">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158221">,</span>&nbsp;<span class="ident" id="8158223">want</span><span class="op" id="8158227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158230">}</span>&nbsp;<span class="keyword" id="8158232">else</span>&nbsp;<span class="keyword" id="8158237">if</span>&nbsp;<span class="op" id="8158240">*</span><span class="ident" id="8158241">got</span>&nbsp;<span class="op" id="8158245">!=</span>&nbsp;<span class="ident" id="8158248">want</span>&nbsp;<span class="op" id="8158253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158257">t</span><span class="op" id="8158258">.</span><span class="ident" id="8158259">Errorf</span><span class="op" id="8158265">(</span><span class="string" id="8158266">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158283">,</span>&nbsp;<span class="op" id="8158285">*</span><span class="ident" id="8158286">got</span><span class="op" id="8158289">,</span>&nbsp;<span class="ident" id="8158291">want</span><span class="op" id="8158295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158301">if</span>&nbsp;<span class="ident" id="8158304">got</span><span class="op" id="8158307">,</span>&nbsp;<span class="ident" id="8158309">want</span>&nbsp;<span class="op" id="8158314">:=</span>&nbsp;<span class="ident" id="8158317">x</span><span class="op" id="8158318">.</span><span class="ident" id="8158319">W</span><span class="op" id="8158320">,</span>&nbsp;<span class="ident" id="8158322">w</span><span class="op" id="8158323">;</span>&nbsp;<span class="ident" id="8158325">got</span>&nbsp;<span class="op" id="8158329">!=</span>&nbsp;<span class="ident" id="8158332">want</span>&nbsp;<span class="op" id="8158337">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158341">t</span><span class="op" id="8158342">.</span><span class="ident" id="8158343">Errorf</span><span class="op" id="8158349">(</span><span class="string" id="8158350">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158367">,</span>&nbsp;<span class="ident" id="8158369">got</span><span class="op" id="8158372">,</span>&nbsp;<span class="ident" id="8158374">want</span><span class="op" id="8158378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158385">if</span>&nbsp;<span class="ident" id="8158388">got</span><span class="op" id="8158391">,</span>&nbsp;<span class="ident" id="8158393">want</span>&nbsp;<span class="op" id="8158398">:=</span>&nbsp;<span class="ident" id="8158401">x</span><span class="op" id="8158402">.</span><span class="ident" id="8158403">BV</span><span class="op" id="8158405">,</span>&nbsp;<span class="ident" id="8158407">bv</span><span class="op" id="8158409">;</span>&nbsp;<span class="ident" id="8158411">got</span>&nbsp;<span class="op" id="8158415">==</span>&nbsp;<span class="ident" id="8158418">nil</span>&nbsp;<span class="op" id="8158422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158426">t</span><span class="op" id="8158427">.</span><span class="ident" id="8158428">Errorf</span><span class="op" id="8158434">(</span><span class="string" id="8158435">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158454">,</span>&nbsp;<span class="ident" id="8158456">want</span><span class="op" id="8158460">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158463">}</span>&nbsp;<span class="keyword" id="8158465">else</span>&nbsp;<span class="keyword" id="8158470">if</span>&nbsp;<span class="op" id="8158473">*</span><span class="ident" id="8158474">got</span>&nbsp;<span class="op" id="8158478">!=</span>&nbsp;<span class="ident" id="8158481">want</span>&nbsp;<span class="op" id="8158486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158490">t</span><span class="op" id="8158491">.</span><span class="ident" id="8158492">Errorf</span><span class="op" id="8158498">(</span><span class="string" id="8158499">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158517">,</span>&nbsp;<span class="op" id="8158519">*</span><span class="ident" id="8158520">got</span><span class="op" id="8158523">,</span>&nbsp;<span class="ident" id="8158525">want</span><span class="op" id="8158529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158535">if</span>&nbsp;<span class="ident" id="8158538">got</span><span class="op" id="8158541">,</span>&nbsp;<span class="ident" id="8158543">want</span>&nbsp;<span class="op" id="8158548">:=</span>&nbsp;<span class="ident" id="8158551">x</span><span class="op" id="8158552">.</span><span class="ident" id="8158553">BW</span><span class="op" id="8158555">,</span>&nbsp;<span class="ident" id="8158557">bw</span><span class="op" id="8158559">;</span>&nbsp;<span class="ident" id="8158561">got</span>&nbsp;<span class="op" id="8158565">!=</span>&nbsp;<span class="ident" id="8158568">want</span>&nbsp;<span class="op" id="8158573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158577">t</span><span class="op" id="8158578">.</span><span class="ident" id="8158579">Errorf</span><span class="op" id="8158585">(</span><span class="string" id="8158586">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158604">,</span>&nbsp;<span class="ident" id="8158606">got</span><span class="op" id="8158609">,</span>&nbsp;<span class="ident" id="8158611">want</span><span class="op" id="8158615">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158622">if</span>&nbsp;<span class="ident" id="8158625">got</span><span class="op" id="8158628">,</span>&nbsp;<span class="ident" id="8158630">want</span>&nbsp;<span class="op" id="8158635">:=</span>&nbsp;<span class="ident" id="8158638">x</span><span class="op" id="8158639">.</span><span class="ident" id="8158640">TV</span><span class="op" id="8158642">,</span>&nbsp;<span class="ident" id="8158644">tv</span><span class="op" id="8158646">;</span>&nbsp;<span class="ident" id="8158648">got</span>&nbsp;<span class="op" id="8158652">==</span>&nbsp;<span class="ident" id="8158655">nil</span>&nbsp;<span class="op" id="8158659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158663">t</span><span class="op" id="8158664">.</span><span class="ident" id="8158665">Errorf</span><span class="op" id="8158671">(</span><span class="string" id="8158672">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158691">,</span>&nbsp;<span class="ident" id="8158693">want</span><span class="op" id="8158697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158700">}</span>&nbsp;<span class="keyword" id="8158702">else</span>&nbsp;<span class="keyword" id="8158707">if</span>&nbsp;<span class="op" id="8158710">*</span><span class="ident" id="8158711">got</span>&nbsp;<span class="op" id="8158715">!=</span>&nbsp;<span class="ident" id="8158718">want</span>&nbsp;<span class="op" id="8158723">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158727">t</span><span class="op" id="8158728">.</span><span class="ident" id="8158729">Errorf</span><span class="op" id="8158735">(</span><span class="string" id="8158736">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158754">,</span>&nbsp;<span class="op" id="8158756">*</span><span class="ident" id="8158757">got</span><span class="op" id="8158760">,</span>&nbsp;<span class="ident" id="8158762">want</span><span class="op" id="8158766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8158772">if</span>&nbsp;<span class="ident" id="8158775">got</span><span class="op" id="8158778">,</span>&nbsp;<span class="ident" id="8158780">want</span>&nbsp;<span class="op" id="8158785">:=</span>&nbsp;<span class="ident" id="8158788">x</span><span class="op" id="8158789">.</span><span class="ident" id="8158790">TW</span><span class="op" id="8158792">,</span>&nbsp;<span class="ident" id="8158794">tw</span><span class="op" id="8158796">;</span>&nbsp;<span class="ident" id="8158798">got</span>&nbsp;<span class="op" id="8158802">!=</span>&nbsp;<span class="ident" id="8158805">want</span>&nbsp;<span class="op" id="8158810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158814">t</span><span class="op" id="8158815">.</span><span class="ident" id="8158816">Errorf</span><span class="op" id="8158822">(</span><span class="string" id="8158823">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8158841">,</span>&nbsp;<span class="ident" id="8158843">got</span><span class="op" id="8158846">,</span>&nbsp;<span class="ident" id="8158848">want</span><span class="op" id="8158852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8158855">}</span><br>
<span class="lineno">535</span><span class="op" id="8158857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8158860">func</span>&nbsp;<span class="ident" id="8158865">TestGobEncoderFieldTypeError</span><span class="op" id="8158893">(</span><span class="ident" id="8158894">t</span>&nbsp;<span class="op" id="8158896">*</span><span class="ident" id="8158897">testing</span><span class="op" id="8158904">.</span><span class="ident" id="8158905">T</span><span class="op" id="8158906">)</span>&nbsp;<span class="op" id="8158908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8158911">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158948">b</span>&nbsp;<span class="op" id="8158950">:=</span>&nbsp;<span class="builtinfunc" id="8158953">new</span><span class="op" id="8158956">(</span><span class="ident" id="8158957">bytes</span><span class="op" id="8158962">.</span><span class="ident" id="8158963">Buffer</span><span class="op" id="8158969">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158972">enc</span>&nbsp;<span class="op" id="8158976">:=</span>&nbsp;<span class="ident" id="8158979">NewEncoder</span><span class="op" id="8158989">(</span><span class="ident" id="8158990">b</span><span class="op" id="8158991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8158994">err</span>&nbsp;<span class="op" id="8158998">:=</span>&nbsp;<span class="ident" id="8159001">enc</span><span class="op" id="8159004">.</span><span class="ident" id="8159005">Encode</span><span class="op" id="8159011">(</span><span class="ident" id="8159012">GobTest1</span><span class="op" id="8159020">{</span><span class="num" id="8159021">17</span><span class="op" id="8159023">,</span>&nbsp;<span class="op" id="8159025">&amp;</span><span class="ident" id="8159026">StringStruct</span><span class="op" id="8159038">{</span><span class="string" id="8159039">&#34;ABC&#34;</span><span class="op" id="8159044">}</span><span class="op" id="8159045">}</span><span class="op" id="8159046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159049">if</span>&nbsp;<span class="ident" id="8159052">err</span>&nbsp;<span class="op" id="8159056">!=</span>&nbsp;<span class="ident" id="8159059">nil</span>&nbsp;<span class="op" id="8159063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159067">t</span><span class="op" id="8159068">.</span><span class="ident" id="8159069">Fatal</span><span class="op" id="8159074">(</span><span class="string" id="8159075">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8159090">,</span>&nbsp;<span class="ident" id="8159092">err</span><span class="op" id="8159095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159098">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159101">dec</span>&nbsp;<span class="op" id="8159105">:=</span>&nbsp;<span class="ident" id="8159108">NewDecoder</span><span class="op" id="8159118">(</span><span class="ident" id="8159119">b</span><span class="op" id="8159120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159123">x</span>&nbsp;<span class="op" id="8159125">:=</span>&nbsp;<span class="op" id="8159128">&amp;</span><span class="ident" id="8159129">GobTest2</span><span class="op" id="8159137">{</span><span class="op" id="8159138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159141">err</span>&nbsp;<span class="op" id="8159145">=</span>&nbsp;<span class="ident" id="8159147">dec</span><span class="op" id="8159150">.</span><span class="ident" id="8159151">Decode</span><span class="op" id="8159157">(</span><span class="ident" id="8159158">x</span><span class="op" id="8159159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159162">if</span>&nbsp;<span class="ident" id="8159165">err</span>&nbsp;<span class="op" id="8159169">==</span>&nbsp;<span class="ident" id="8159172">nil</span>&nbsp;<span class="op" id="8159176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159180">t</span><span class="op" id="8159181">.</span><span class="ident" id="8159182">Fatal</span><span class="op" id="8159187">(</span><span class="string" id="8159188">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="8159258">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159264">if</span>&nbsp;<span class="ident" id="8159267">strings</span><span class="op" id="8159274">.</span><span class="ident" id="8159275">Index</span><span class="op" id="8159280">(</span><span class="ident" id="8159281">err</span><span class="op" id="8159284">.</span><span class="ident" id="8159285">Error</span><span class="op" id="8159290">(</span><span class="op" id="8159291">)</span><span class="op" id="8159292">,</span>&nbsp;<span class="string" id="8159294">&#34;type&#34;</span><span class="op" id="8159300">)</span>&nbsp;<span class="op" id="8159302">&lt;</span>&nbsp;<span class="num" id="8159304">0</span>&nbsp;<span class="op" id="8159306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159310">t</span><span class="op" id="8159311">.</span><span class="ident" id="8159312">Fatal</span><span class="op" id="8159317">(</span><span class="string" id="8159318">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8159344">,</span>&nbsp;<span class="ident" id="8159346">err</span><span class="op" id="8159349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8159355">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159392">b</span><span class="op" id="8159393">.</span><span class="ident" id="8159394">Reset</span><span class="op" id="8159399">(</span><span class="op" id="8159400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159403">err</span>&nbsp;<span class="op" id="8159407">=</span>&nbsp;<span class="ident" id="8159409">enc</span><span class="op" id="8159412">.</span><span class="ident" id="8159413">Encode</span><span class="op" id="8159419">(</span><span class="ident" id="8159420">GobTest2</span><span class="op" id="8159428">{</span><span class="num" id="8159429">17</span><span class="op" id="8159431">,</span>&nbsp;<span class="string" id="8159433">&#34;ABC&#34;</span><span class="op" id="8159438">}</span><span class="op" id="8159439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159442">if</span>&nbsp;<span class="ident" id="8159445">err</span>&nbsp;<span class="op" id="8159449">!=</span>&nbsp;<span class="ident" id="8159452">nil</span>&nbsp;<span class="op" id="8159456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159460">t</span><span class="op" id="8159461">.</span><span class="ident" id="8159462">Fatal</span><span class="op" id="8159467">(</span><span class="string" id="8159468">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8159483">,</span>&nbsp;<span class="ident" id="8159485">err</span><span class="op" id="8159488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159491">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159494">y</span>&nbsp;<span class="op" id="8159496">:=</span>&nbsp;<span class="op" id="8159499">&amp;</span><span class="ident" id="8159500">GobTest1</span><span class="op" id="8159508">{</span><span class="op" id="8159509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159512">err</span>&nbsp;<span class="op" id="8159516">=</span>&nbsp;<span class="ident" id="8159518">dec</span><span class="op" id="8159521">.</span><span class="ident" id="8159522">Decode</span><span class="op" id="8159528">(</span><span class="ident" id="8159529">y</span><span class="op" id="8159530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159533">if</span>&nbsp;<span class="ident" id="8159536">err</span>&nbsp;<span class="op" id="8159540">==</span>&nbsp;<span class="ident" id="8159543">nil</span>&nbsp;<span class="op" id="8159547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159551">t</span><span class="op" id="8159552">.</span><span class="ident" id="8159553">Fatal</span><span class="op" id="8159558">(</span><span class="string" id="8159559">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="8159629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159632">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159635">if</span>&nbsp;<span class="ident" id="8159638">strings</span><span class="op" id="8159645">.</span><span class="ident" id="8159646">Index</span><span class="op" id="8159651">(</span><span class="ident" id="8159652">err</span><span class="op" id="8159655">.</span><span class="ident" id="8159656">Error</span><span class="op" id="8159661">(</span><span class="op" id="8159662">)</span><span class="op" id="8159663">,</span>&nbsp;<span class="string" id="8159665">&#34;type&#34;</span><span class="op" id="8159671">)</span>&nbsp;<span class="op" id="8159673">&lt;</span>&nbsp;<span class="num" id="8159675">0</span>&nbsp;<span class="op" id="8159677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159681">t</span><span class="op" id="8159682">.</span><span class="ident" id="8159683">Fatal</span><span class="op" id="8159688">(</span><span class="string" id="8159689">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8159715">,</span>&nbsp;<span class="ident" id="8159717">err</span><span class="op" id="8159720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159723">}</span><br>
<span class="lineno"></span><span class="op" id="8159725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="8159728">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="8159813">func</span>&nbsp;<span class="ident" id="8159818">TestGobEncoderStructSingleton</span><span class="op" id="8159847">(</span><span class="ident" id="8159848">t</span>&nbsp;<span class="op" id="8159850">*</span><span class="ident" id="8159851">testing</span><span class="op" id="8159858">.</span><span class="ident" id="8159859">T</span><span class="op" id="8159860">)</span>&nbsp;<span class="op" id="8159862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159865">b</span>&nbsp;<span class="op" id="8159867">:=</span>&nbsp;<span class="builtinfunc" id="8159870">new</span><span class="op" id="8159873">(</span><span class="ident" id="8159874">bytes</span><span class="op" id="8159879">.</span><span class="ident" id="8159880">Buffer</span><span class="op" id="8159886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159889">enc</span>&nbsp;<span class="op" id="8159893">:=</span>&nbsp;<span class="ident" id="8159896">NewEncoder</span><span class="op" id="8159906">(</span><span class="ident" id="8159907">b</span><span class="op" id="8159908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159911">err</span>&nbsp;<span class="op" id="8159915">:=</span>&nbsp;<span class="ident" id="8159918">enc</span><span class="op" id="8159921">.</span><span class="ident" id="8159922">Encode</span><span class="op" id="8159928">(</span><span class="op" id="8159929">&amp;</span><span class="ident" id="8159930">ByteStruct</span><span class="op" id="8159940">{</span><span class="string" id="8159941">&#39;A&#39;</span><span class="op" id="8159944">}</span><span class="op" id="8159945">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8159948">if</span>&nbsp;<span class="ident" id="8159951">err</span>&nbsp;<span class="op" id="8159955">!=</span>&nbsp;<span class="ident" id="8159958">nil</span>&nbsp;<span class="op" id="8159962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8159966">t</span><span class="op" id="8159967">.</span><span class="ident" id="8159968">Fatal</span><span class="op" id="8159973">(</span><span class="string" id="8159974">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8159989">,</span>&nbsp;<span class="ident" id="8159991">err</span><span class="op" id="8159994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8159997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160000">dec</span>&nbsp;<span class="op" id="8160004">:=</span>&nbsp;<span class="ident" id="8160007">NewDecoder</span><span class="op" id="8160017">(</span><span class="ident" id="8160018">b</span><span class="op" id="8160019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160022">x</span>&nbsp;<span class="op" id="8160024">:=</span>&nbsp;<span class="builtinfunc" id="8160027">new</span><span class="op" id="8160030">(</span><span class="ident" id="8160031">ByteStruct</span><span class="op" id="8160041">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160044">err</span>&nbsp;<span class="op" id="8160048">=</span>&nbsp;<span class="ident" id="8160050">dec</span><span class="op" id="8160053">.</span><span class="ident" id="8160054">Decode</span><span class="op" id="8160060">(</span><span class="ident" id="8160061">x</span><span class="op" id="8160062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160065">if</span>&nbsp;<span class="ident" id="8160068">err</span>&nbsp;<span class="op" id="8160072">!=</span>&nbsp;<span class="ident" id="8160075">nil</span>&nbsp;<span class="op" id="8160079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160083">t</span><span class="op" id="8160084">.</span><span class="ident" id="8160085">Fatal</span><span class="op" id="8160090">(</span><span class="string" id="8160091">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8160106">,</span>&nbsp;<span class="ident" id="8160108">err</span><span class="op" id="8160111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160117">if</span>&nbsp;<span class="ident" id="8160120">x</span><span class="op" id="8160121">.</span><span class="ident" id="8160122">a</span>&nbsp;<span class="op" id="8160124">!=</span>&nbsp;<span class="string" id="8160127">&#39;A&#39;</span>&nbsp;<span class="op" id="8160131">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160135">t</span><span class="op" id="8160136">.</span><span class="ident" id="8160137">Errorf</span><span class="op" id="8160143">(</span><span class="string" id="8160144">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8160165">,</span>&nbsp;<span class="ident" id="8160167">x</span><span class="op" id="8160168">.</span><span class="ident" id="8160169">a</span><span class="op" id="8160170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160173">}</span><br>
<span class="lineno"></span><span class="op" id="8160175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8160178">func</span>&nbsp;<span class="ident" id="8160183">TestGobEncoderNonStructSingleton</span><span class="op" id="8160215">(</span><span class="ident" id="8160216">t</span>&nbsp;<span class="op" id="8160218">*</span><span class="ident" id="8160219">testing</span><span class="op" id="8160226">.</span><span class="ident" id="8160227">T</span><span class="op" id="8160228">)</span>&nbsp;<span class="op" id="8160230">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160233">b</span>&nbsp;<span class="op" id="8160235">:=</span>&nbsp;<span class="builtinfunc" id="8160238">new</span><span class="op" id="8160241">(</span><span class="ident" id="8160242">bytes</span><span class="op" id="8160247">.</span><span class="ident" id="8160248">Buffer</span><span class="op" id="8160254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160257">enc</span>&nbsp;<span class="op" id="8160261">:=</span>&nbsp;<span class="ident" id="8160264">NewEncoder</span><span class="op" id="8160274">(</span><span class="ident" id="8160275">b</span><span class="op" id="8160276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160279">var</span>&nbsp;<span class="ident" id="8160283">g</span>&nbsp;<span class="ident" id="8160285">Gobber</span>&nbsp;<span class="op" id="8160292">=</span>&nbsp;<span class="num" id="8160294">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160300">err</span>&nbsp;<span class="op" id="8160304">:=</span>&nbsp;<span class="ident" id="8160307">enc</span><span class="op" id="8160310">.</span><span class="ident" id="8160311">Encode</span><span class="op" id="8160317">(</span><span class="op" id="8160318">&amp;</span><span class="ident" id="8160319">g</span><span class="op" id="8160320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160323">if</span>&nbsp;<span class="ident" id="8160326">err</span>&nbsp;<span class="op" id="8160330">!=</span>&nbsp;<span class="ident" id="8160333">nil</span>&nbsp;<span class="op" id="8160337">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160341">t</span><span class="op" id="8160342">.</span><span class="ident" id="8160343">Fatal</span><span class="op" id="8160348">(</span><span class="string" id="8160349">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8160364">,</span>&nbsp;<span class="ident" id="8160366">err</span><span class="op" id="8160369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160375">dec</span>&nbsp;<span class="op" id="8160379">:=</span>&nbsp;<span class="ident" id="8160382">NewDecoder</span><span class="op" id="8160392">(</span><span class="ident" id="8160393">b</span><span class="op" id="8160394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160397">var</span>&nbsp;<span class="ident" id="8160401">x</span>&nbsp;<span class="ident" id="8160403">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160411">err</span>&nbsp;<span class="op" id="8160415">=</span>&nbsp;<span class="ident" id="8160417">dec</span><span class="op" id="8160420">.</span><span class="ident" id="8160421">Decode</span><span class="op" id="8160427">(</span><span class="op" id="8160428">&amp;</span><span class="ident" id="8160429">x</span><span class="op" id="8160430">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160433">if</span>&nbsp;<span class="ident" id="8160436">err</span>&nbsp;<span class="op" id="8160440">!=</span>&nbsp;<span class="ident" id="8160443">nil</span>&nbsp;<span class="op" id="8160447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160451">t</span><span class="op" id="8160452">.</span><span class="ident" id="8160453">Fatal</span><span class="op" id="8160458">(</span><span class="string" id="8160459">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8160474">,</span>&nbsp;<span class="ident" id="8160476">err</span><span class="op" id="8160479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160485">if</span>&nbsp;<span class="ident" id="8160488">x</span>&nbsp;<span class="op" id="8160490">!=</span>&nbsp;<span class="num" id="8160493">1234</span>&nbsp;<span class="op" id="8160498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160502">t</span><span class="op" id="8160503">.</span><span class="ident" id="8160504">Errorf</span><span class="op" id="8160510">(</span><span class="string" id="8160511">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8160533">,</span>&nbsp;<span class="ident" id="8160535">x</span><span class="op" id="8160536">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160539">}</span><br>
<span class="lineno"></span><span class="op" id="8160541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8160544">func</span>&nbsp;<span class="ident" id="8160549">TestGobEncoderIgnoreStructField</span><span class="op" id="8160580">(</span><span class="ident" id="8160581">t</span>&nbsp;<span class="op" id="8160583">*</span><span class="ident" id="8160584">testing</span><span class="op" id="8160591">.</span><span class="ident" id="8160592">T</span><span class="op" id="8160593">)</span>&nbsp;<span class="op" id="8160595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160598">b</span>&nbsp;<span class="op" id="8160600">:=</span>&nbsp;<span class="builtinfunc" id="8160603">new</span><span class="op" id="8160606">(</span><span class="ident" id="8160607">bytes</span><span class="op" id="8160612">.</span><span class="ident" id="8160613">Buffer</span><span class="op" id="8160619">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8160622">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160660">enc</span>&nbsp;<span class="op" id="8160664">:=</span>&nbsp;<span class="ident" id="8160667">NewEncoder</span><span class="op" id="8160677">(</span><span class="ident" id="8160678">b</span><span class="op" id="8160679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160682">err</span>&nbsp;<span class="op" id="8160686">:=</span>&nbsp;<span class="ident" id="8160689">enc</span><span class="op" id="8160692">.</span><span class="ident" id="8160693">Encode</span><span class="op" id="8160699">(</span><span class="ident" id="8160700">GobTest0</span><span class="op" id="8160708">{</span><span class="num" id="8160709">17</span><span class="op" id="8160711">,</span>&nbsp;<span class="op" id="8160713">&amp;</span><span class="ident" id="8160714">ByteStruct</span><span class="op" id="8160724">{</span><span class="string" id="8160725">&#39;A&#39;</span><span class="op" id="8160728">}</span><span class="op" id="8160729">}</span><span class="op" id="8160730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160733">if</span>&nbsp;<span class="ident" id="8160736">err</span>&nbsp;<span class="op" id="8160740">!=</span>&nbsp;<span class="ident" id="8160743">nil</span>&nbsp;<span class="op" id="8160747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160751">t</span><span class="op" id="8160752">.</span><span class="ident" id="8160753">Fatal</span><span class="op" id="8160758">(</span><span class="string" id="8160759">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8160774">,</span>&nbsp;<span class="ident" id="8160776">err</span><span class="op" id="8160779">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160785">dec</span>&nbsp;<span class="op" id="8160789">:=</span>&nbsp;<span class="ident" id="8160792">NewDecoder</span><span class="op" id="8160802">(</span><span class="ident" id="8160803">b</span><span class="op" id="8160804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160807">x</span>&nbsp;<span class="op" id="8160809">:=</span>&nbsp;<span class="builtinfunc" id="8160812">new</span><span class="op" id="8160815">(</span><span class="ident" id="8160816">GobTestIgnoreEncoder</span><span class="op" id="8160836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160839">err</span>&nbsp;<span class="op" id="8160843">=</span>&nbsp;<span class="ident" id="8160845">dec</span><span class="op" id="8160848">.</span><span class="ident" id="8160849">Decode</span><span class="op" id="8160855">(</span><span class="ident" id="8160856">x</span><span class="op" id="8160857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160860">if</span>&nbsp;<span class="ident" id="8160863">err</span>&nbsp;<span class="op" id="8160867">!=</span>&nbsp;<span class="ident" id="8160870">nil</span>&nbsp;<span class="op" id="8160874">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160878">t</span><span class="op" id="8160879">.</span><span class="ident" id="8160880">Fatal</span><span class="op" id="8160885">(</span><span class="string" id="8160886">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8160901">,</span>&nbsp;<span class="ident" id="8160903">err</span><span class="op" id="8160906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8160912">if</span>&nbsp;<span class="ident" id="8160915">x</span><span class="op" id="8160916">.</span><span class="ident" id="8160917">X</span>&nbsp;<span class="op" id="8160919">!=</span>&nbsp;<span class="num" id="8160922">17</span>&nbsp;<span class="op" id="8160925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8160929">t</span><span class="op" id="8160930">.</span><span class="ident" id="8160931">Errorf</span><span class="op" id="8160937">(</span><span class="string" id="8160938">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8160958">,</span>&nbsp;<span class="ident" id="8160960">x</span><span class="op" id="8160961">.</span><span class="ident" id="8160962">X</span><span class="op" id="8160963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160966">}</span><br>
<span class="lineno">625</span><span class="op" id="8160968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8160971">func</span>&nbsp;<span class="ident" id="8160976">TestGobEncoderIgnoreNonStructField</span><span class="op" id="8161010">(</span><span class="ident" id="8161011">t</span>&nbsp;<span class="op" id="8161013">*</span><span class="ident" id="8161014">testing</span><span class="op" id="8161021">.</span><span class="ident" id="8161022">T</span><span class="op" id="8161023">)</span>&nbsp;<span class="op" id="8161025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161028">b</span>&nbsp;<span class="op" id="8161030">:=</span>&nbsp;<span class="builtinfunc" id="8161033">new</span><span class="op" id="8161036">(</span><span class="ident" id="8161037">bytes</span><span class="op" id="8161042">.</span><span class="ident" id="8161043">Buffer</span><span class="op" id="8161049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8161052">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161090">enc</span>&nbsp;<span class="op" id="8161094">:=</span>&nbsp;<span class="ident" id="8161097">NewEncoder</span><span class="op" id="8161107">(</span><span class="ident" id="8161108">b</span><span class="op" id="8161109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161112">gobber</span>&nbsp;<span class="op" id="8161119">:=</span>&nbsp;<span class="ident" id="8161122">Gobber</span><span class="op" id="8161128">(</span><span class="num" id="8161129">23</span><span class="op" id="8161131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161134">bgobber</span>&nbsp;<span class="op" id="8161142">:=</span>&nbsp;<span class="ident" id="8161145">BinaryGobber</span><span class="op" id="8161157">(</span><span class="num" id="8161158">24</span><span class="op" id="8161160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161163">tgobber</span>&nbsp;<span class="op" id="8161171">:=</span>&nbsp;<span class="ident" id="8161174">TextGobber</span><span class="op" id="8161184">(</span><span class="num" id="8161185">25</span><span class="op" id="8161187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161190">err</span>&nbsp;<span class="op" id="8161194">:=</span>&nbsp;<span class="ident" id="8161197">enc</span><span class="op" id="8161200">.</span><span class="ident" id="8161201">Encode</span><span class="op" id="8161207">(</span><span class="ident" id="8161208">GobTest3</span><span class="op" id="8161216">{</span><span class="num" id="8161217">17</span><span class="op" id="8161219">,</span>&nbsp;<span class="op" id="8161221">&amp;</span><span class="ident" id="8161222">gobber</span><span class="op" id="8161228">,</span>&nbsp;<span class="op" id="8161230">&amp;</span><span class="ident" id="8161231">bgobber</span><span class="op" id="8161238">,</span>&nbsp;<span class="op" id="8161240">&amp;</span><span class="ident" id="8161241">tgobber</span><span class="op" id="8161248">}</span><span class="op" id="8161249">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161252">if</span>&nbsp;<span class="ident" id="8161255">err</span>&nbsp;<span class="op" id="8161259">!=</span>&nbsp;<span class="ident" id="8161262">nil</span>&nbsp;<span class="op" id="8161266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161270">t</span><span class="op" id="8161271">.</span><span class="ident" id="8161272">Fatal</span><span class="op" id="8161277">(</span><span class="string" id="8161278">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8161293">,</span>&nbsp;<span class="ident" id="8161295">err</span><span class="op" id="8161298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161304">dec</span>&nbsp;<span class="op" id="8161308">:=</span>&nbsp;<span class="ident" id="8161311">NewDecoder</span><span class="op" id="8161321">(</span><span class="ident" id="8161322">b</span><span class="op" id="8161323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161326">x</span>&nbsp;<span class="op" id="8161328">:=</span>&nbsp;<span class="builtinfunc" id="8161331">new</span><span class="op" id="8161334">(</span><span class="ident" id="8161335">GobTestIgnoreEncoder</span><span class="op" id="8161355">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161358">err</span>&nbsp;<span class="op" id="8161362">=</span>&nbsp;<span class="ident" id="8161364">dec</span><span class="op" id="8161367">.</span><span class="ident" id="8161368">Decode</span><span class="op" id="8161374">(</span><span class="ident" id="8161375">x</span><span class="op" id="8161376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161379">if</span>&nbsp;<span class="ident" id="8161382">err</span>&nbsp;<span class="op" id="8161386">!=</span>&nbsp;<span class="ident" id="8161389">nil</span>&nbsp;<span class="op" id="8161393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161397">t</span><span class="op" id="8161398">.</span><span class="ident" id="8161399">Fatal</span><span class="op" id="8161404">(</span><span class="string" id="8161405">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8161420">,</span>&nbsp;<span class="ident" id="8161422">err</span><span class="op" id="8161425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161431">if</span>&nbsp;<span class="ident" id="8161434">x</span><span class="op" id="8161435">.</span><span class="ident" id="8161436">X</span>&nbsp;<span class="op" id="8161438">!=</span>&nbsp;<span class="num" id="8161441">17</span>&nbsp;<span class="op" id="8161444">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161448">t</span><span class="op" id="8161449">.</span><span class="ident" id="8161450">Errorf</span><span class="op" id="8161456">(</span><span class="string" id="8161457">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8161477">,</span>&nbsp;<span class="ident" id="8161479">x</span><span class="op" id="8161480">.</span><span class="ident" id="8161481">X</span><span class="op" id="8161482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161485">}</span><br>
<span class="lineno"></span><span class="op" id="8161487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8161490">func</span>&nbsp;<span class="ident" id="8161495">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="8161525">(</span><span class="ident" id="8161526">t</span>&nbsp;<span class="op" id="8161528">*</span><span class="ident" id="8161529">testing</span><span class="op" id="8161536">.</span><span class="ident" id="8161537">T</span><span class="op" id="8161538">)</span>&nbsp;<span class="op" id="8161540">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161543">b</span>&nbsp;<span class="op" id="8161545">:=</span>&nbsp;<span class="builtinfunc" id="8161548">new</span><span class="op" id="8161551">(</span><span class="ident" id="8161552">bytes</span><span class="op" id="8161557">.</span><span class="ident" id="8161558">Buffer</span><span class="op" id="8161564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8161567">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161605">enc</span>&nbsp;<span class="op" id="8161609">:=</span>&nbsp;<span class="ident" id="8161612">NewEncoder</span><span class="op" id="8161622">(</span><span class="ident" id="8161623">b</span><span class="op" id="8161624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161627">err</span>&nbsp;<span class="op" id="8161631">:=</span>&nbsp;<span class="ident" id="8161634">enc</span><span class="op" id="8161637">.</span><span class="ident" id="8161638">Encode</span><span class="op" id="8161644">(</span><span class="ident" id="8161645">GobTest0</span><span class="op" id="8161653">{</span><span class="ident" id="8161654">X</span><span class="op" id="8161655">:</span>&nbsp;<span class="num" id="8161657">18</span><span class="op" id="8161659">}</span><span class="op" id="8161660">)</span>&nbsp;<span class="comment" id="8161662">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161675">if</span>&nbsp;<span class="ident" id="8161678">err</span>&nbsp;<span class="op" id="8161682">!=</span>&nbsp;<span class="ident" id="8161685">nil</span>&nbsp;<span class="op" id="8161689">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161693">t</span><span class="op" id="8161694">.</span><span class="ident" id="8161695">Fatal</span><span class="op" id="8161700">(</span><span class="string" id="8161701">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8161716">,</span>&nbsp;<span class="ident" id="8161718">err</span><span class="op" id="8161721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161727">dec</span>&nbsp;<span class="op" id="8161731">:=</span>&nbsp;<span class="ident" id="8161734">NewDecoder</span><span class="op" id="8161744">(</span><span class="ident" id="8161745">b</span><span class="op" id="8161746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161749">x</span>&nbsp;<span class="op" id="8161751">:=</span>&nbsp;<span class="builtinfunc" id="8161754">new</span><span class="op" id="8161757">(</span><span class="ident" id="8161758">GobTest0</span><span class="op" id="8161766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161769">err</span>&nbsp;<span class="op" id="8161773">=</span>&nbsp;<span class="ident" id="8161775">dec</span><span class="op" id="8161778">.</span><span class="ident" id="8161779">Decode</span><span class="op" id="8161785">(</span><span class="ident" id="8161786">x</span><span class="op" id="8161787">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161790">if</span>&nbsp;<span class="ident" id="8161793">err</span>&nbsp;<span class="op" id="8161797">!=</span>&nbsp;<span class="ident" id="8161800">nil</span>&nbsp;<span class="op" id="8161804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161808">t</span><span class="op" id="8161809">.</span><span class="ident" id="8161810">Fatal</span><span class="op" id="8161815">(</span><span class="string" id="8161816">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8161831">,</span>&nbsp;<span class="ident" id="8161833">err</span><span class="op" id="8161836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161842">if</span>&nbsp;<span class="ident" id="8161845">x</span><span class="op" id="8161846">.</span><span class="ident" id="8161847">X</span>&nbsp;<span class="op" id="8161849">!=</span>&nbsp;<span class="num" id="8161852">18</span>&nbsp;<span class="op" id="8161855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161859">t</span><span class="op" id="8161860">.</span><span class="ident" id="8161861">Errorf</span><span class="op" id="8161867">(</span><span class="string" id="8161868">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8161895">,</span>&nbsp;<span class="ident" id="8161897">x</span><span class="op" id="8161898">.</span><span class="ident" id="8161899">X</span><span class="op" id="8161900">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8161906">if</span>&nbsp;<span class="ident" id="8161909">x</span><span class="op" id="8161910">.</span><span class="ident" id="8161911">G</span>&nbsp;<span class="op" id="8161913">!=</span>&nbsp;<span class="ident" id="8161916">nil</span>&nbsp;<span class="op" id="8161920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8161924">t</span><span class="op" id="8161925">.</span><span class="ident" id="8161926">Errorf</span><span class="op" id="8161932">(</span><span class="string" id="8161933">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8161961">,</span>&nbsp;<span class="ident" id="8161963">x</span><span class="op" id="8161964">.</span><span class="ident" id="8161965">G</span><span class="op" id="8161966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8161969">}</span><br>
<span class="lineno"></span><span class="op" id="8161971">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="8161974">type</span>&nbsp;<span class="ident" id="8161979">gobDecoderBug0</span>&nbsp;<span class="keyword" id="8161994">struct</span>&nbsp;<span class="op" id="8162001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162004">foo</span><span class="op" id="8162007">,</span>&nbsp;<span class="ident" id="8162009">bar</span>&nbsp;<span class="builtintype" id="8162013">string</span><br>
<span class="lineno"></span><span class="op" id="8162020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8162023">func</span>&nbsp;<span class="op" id="8162028">(</span><span class="ident" id="8162029">br</span>&nbsp;<span class="op" id="8162032">*</span><span class="ident" id="8162033">gobDecoderBug0</span><span class="op" id="8162047">)</span>&nbsp;<span class="ident" id="8162049">String</span><span class="op" id="8162055">(</span><span class="op" id="8162056">)</span>&nbsp;<span class="builtintype" id="8162058">string</span>&nbsp;<span class="op" id="8162065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162068">return</span>&nbsp;<span class="ident" id="8162075">br</span><span class="op" id="8162077">.</span><span class="ident" id="8162078">foo</span>&nbsp;<span class="op" id="8162082">+</span>&nbsp;<span class="string" id="8162084">&#34;-&#34;</span>&nbsp;<span class="op" id="8162088">+</span>&nbsp;<span class="ident" id="8162090">br</span><span class="op" id="8162092">.</span><span class="ident" id="8162093">bar</span><br>
<span class="lineno"></span><span class="op" id="8162097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8162100">func</span>&nbsp;<span class="op" id="8162105">(</span><span class="ident" id="8162106">br</span>&nbsp;<span class="op" id="8162109">*</span><span class="ident" id="8162110">gobDecoderBug0</span><span class="op" id="8162124">)</span>&nbsp;<span class="ident" id="8162126">GobEncode</span><span class="op" id="8162135">(</span><span class="op" id="8162136">)</span>&nbsp;<span class="op" id="8162138">(</span><span class="op" id="8162139">[</span><span class="op" id="8162140">]</span><span class="builtintype" id="8162141">byte</span><span class="op" id="8162145">,</span>&nbsp;<span class="builtintype" id="8162147">error</span><span class="op" id="8162152">)</span>&nbsp;<span class="op" id="8162154">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162157">return</span>&nbsp;<span class="op" id="8162164">[</span><span class="op" id="8162165">]</span><span class="builtintype" id="8162166">byte</span><span class="op" id="8162170">(</span><span class="ident" id="8162171">br</span><span class="op" id="8162173">.</span><span class="ident" id="8162174">String</span><span class="op" id="8162180">(</span><span class="op" id="8162181">)</span><span class="op" id="8162182">)</span><span class="op" id="8162183">,</span>&nbsp;<span class="ident" id="8162185">nil</span><br>
<span class="lineno"></span><span class="op" id="8162189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8162192">func</span>&nbsp;<span class="op" id="8162197">(</span><span class="ident" id="8162198">br</span>&nbsp;<span class="op" id="8162201">*</span><span class="ident" id="8162202">gobDecoderBug0</span><span class="op" id="8162216">)</span>&nbsp;<span class="ident" id="8162218">GobDecode</span><span class="op" id="8162227">(</span><span class="ident" id="8162228">b</span>&nbsp;<span class="op" id="8162230">[</span><span class="op" id="8162231">]</span><span class="builtintype" id="8162232">byte</span><span class="op" id="8162236">)</span>&nbsp;<span class="builtintype" id="8162238">error</span>&nbsp;<span class="op" id="8162244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162247">br</span><span class="op" id="8162249">.</span><span class="ident" id="8162250">foo</span>&nbsp;<span class="op" id="8162254">=</span>&nbsp;<span class="string" id="8162256">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162263">br</span><span class="op" id="8162265">.</span><span class="ident" id="8162266">bar</span>&nbsp;<span class="op" id="8162270">=</span>&nbsp;<span class="string" id="8162272">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162279">return</span>&nbsp;<span class="ident" id="8162286">nil</span><br>
<span class="lineno"></span><span class="op" id="8162290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8162293">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="8162359">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="8162381">func</span>&nbsp;<span class="ident" id="8162386">TestGobEncoderExtraIndirect</span><span class="op" id="8162413">(</span><span class="ident" id="8162414">t</span>&nbsp;<span class="op" id="8162416">*</span><span class="ident" id="8162417">testing</span><span class="op" id="8162424">.</span><span class="ident" id="8162425">T</span><span class="op" id="8162426">)</span>&nbsp;<span class="op" id="8162428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162431">gdb</span>&nbsp;<span class="op" id="8162435">:=</span>&nbsp;<span class="op" id="8162438">&amp;</span><span class="ident" id="8162439">gobDecoderBug0</span><span class="op" id="8162453">{</span><span class="string" id="8162454">&#34;foo&#34;</span><span class="op" id="8162459">,</span>&nbsp;<span class="string" id="8162461">&#34;bar&#34;</span><span class="op" id="8162466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162469">buf</span>&nbsp;<span class="op" id="8162473">:=</span>&nbsp;<span class="builtinfunc" id="8162476">new</span><span class="op" id="8162479">(</span><span class="ident" id="8162480">bytes</span><span class="op" id="8162485">.</span><span class="ident" id="8162486">Buffer</span><span class="op" id="8162492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162495">e</span>&nbsp;<span class="op" id="8162497">:=</span>&nbsp;<span class="ident" id="8162500">NewEncoder</span><span class="op" id="8162510">(</span><span class="ident" id="8162511">buf</span><span class="op" id="8162514">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162517">if</span>&nbsp;<span class="ident" id="8162520">err</span>&nbsp;<span class="op" id="8162524">:=</span>&nbsp;<span class="ident" id="8162527">e</span><span class="op" id="8162528">.</span><span class="ident" id="8162529">Encode</span><span class="op" id="8162535">(</span><span class="ident" id="8162536">gdb</span><span class="op" id="8162539">)</span><span class="op" id="8162540">;</span>&nbsp;<span class="ident" id="8162542">err</span>&nbsp;<span class="op" id="8162546">!=</span>&nbsp;<span class="ident" id="8162549">nil</span>&nbsp;<span class="op" id="8162553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162557">t</span><span class="op" id="8162558">.</span><span class="ident" id="8162559">Fatalf</span><span class="op" id="8162565">(</span><span class="string" id="8162566">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8162578">,</span>&nbsp;<span class="ident" id="8162580">err</span><span class="op" id="8162583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8162586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162589">d</span>&nbsp;<span class="op" id="8162591">:=</span>&nbsp;<span class="ident" id="8162594">NewDecoder</span><span class="op" id="8162604">(</span><span class="ident" id="8162605">buf</span><span class="op" id="8162608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162611">var</span>&nbsp;<span class="ident" id="8162615">got</span>&nbsp;<span class="op" id="8162619">*</span><span class="ident" id="8162620">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162636">if</span>&nbsp;<span class="ident" id="8162639">err</span>&nbsp;<span class="op" id="8162643">:=</span>&nbsp;<span class="ident" id="8162646">d</span><span class="op" id="8162647">.</span><span class="ident" id="8162648">Decode</span><span class="op" id="8162654">(</span><span class="op" id="8162655">&amp;</span><span class="ident" id="8162656">got</span><span class="op" id="8162659">)</span><span class="op" id="8162660">;</span>&nbsp;<span class="ident" id="8162662">err</span>&nbsp;<span class="op" id="8162666">!=</span>&nbsp;<span class="ident" id="8162669">nil</span>&nbsp;<span class="op" id="8162673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162677">t</span><span class="op" id="8162678">.</span><span class="ident" id="8162679">Fatalf</span><span class="op" id="8162685">(</span><span class="string" id="8162686">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8162698">,</span>&nbsp;<span class="ident" id="8162700">err</span><span class="op" id="8162703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8162706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8162709">if</span>&nbsp;<span class="ident" id="8162712">got</span><span class="op" id="8162715">.</span><span class="ident" id="8162716">foo</span>&nbsp;<span class="op" id="8162720">!=</span>&nbsp;<span class="ident" id="8162723">gdb</span><span class="op" id="8162726">.</span><span class="ident" id="8162727">foo</span>&nbsp;<span class="op" id="8162731">||</span>&nbsp;<span class="ident" id="8162734">got</span><span class="op" id="8162737">.</span><span class="ident" id="8162738">bar</span>&nbsp;<span class="op" id="8162742">!=</span>&nbsp;<span class="ident" id="8162745">gdb</span><span class="op" id="8162748">.</span><span class="ident" id="8162749">bar</span>&nbsp;<span class="op" id="8162753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8162757">t</span><span class="op" id="8162758">.</span><span class="ident" id="8162759">Errorf</span><span class="op" id="8162765">(</span><span class="string" id="8162766">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8162785">,</span>&nbsp;<span class="ident" id="8162787">got</span><span class="op" id="8162790">,</span>&nbsp;<span class="ident" id="8162792">gdb</span><span class="op" id="8162795">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8162798">}</span><br>
<span class="lineno"></span><span class="op" id="8162800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8162803">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8162867">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="8162936">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="8162998">type</span>&nbsp;<span class="ident" id="8163003">isZeroBug</span>&nbsp;<span class="keyword" id="8163013">struct</span>&nbsp;<span class="op" id="8163020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163023">T</span>&nbsp;<span class="ident" id="8163025">time</span><span class="op" id="8163029">.</span><span class="ident" id="8163030">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163036">S</span>&nbsp;<span class="builtintype" id="8163038">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163046">I</span>&nbsp;<span class="builtintype" id="8163048">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163053">A</span>&nbsp;<span class="ident" id="8163055">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163071">F</span>&nbsp;<span class="ident" id="8163073">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="8163092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8163095">type</span>&nbsp;<span class="ident" id="8163100">isZeroBugArray</span>&nbsp;<span class="op" id="8163115">[</span><span class="num" id="8163116">2</span><span class="op" id="8163117">]</span><span class="builtintype" id="8163118">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="8163125">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="8163185">func</span>&nbsp;<span class="op" id="8163190">(</span><span class="ident" id="8163191">a</span>&nbsp;<span class="ident" id="8163193">isZeroBugArray</span><span class="op" id="8163207">)</span>&nbsp;<span class="ident" id="8163209">GobEncode</span><span class="op" id="8163218">(</span><span class="op" id="8163219">)</span>&nbsp;<span class="op" id="8163221">(</span><span class="ident" id="8163222">b</span>&nbsp;<span class="op" id="8163224">[</span><span class="op" id="8163225">]</span><span class="builtintype" id="8163226">byte</span><span class="op" id="8163230">,</span>&nbsp;<span class="ident" id="8163232">e</span>&nbsp;<span class="builtintype" id="8163234">error</span><span class="op" id="8163239">)</span>&nbsp;<span class="op" id="8163241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163244">b</span>&nbsp;<span class="op" id="8163246">=</span>&nbsp;<span class="builtinfunc" id="8163248">append</span><span class="op" id="8163254">(</span><span class="ident" id="8163255">b</span><span class="op" id="8163256">,</span>&nbsp;<span class="ident" id="8163258">a</span><span class="op" id="8163259">[</span><span class="op" id="8163260">:</span><span class="op" id="8163261">]</span><span class="op" id="8163262">...</span><span class="op" id="8163265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163268">return</span>&nbsp;<span class="ident" id="8163275">b</span><span class="op" id="8163276">,</span>&nbsp;<span class="ident" id="8163278">nil</span><br>
<span class="lineno">725</span><span class="op" id="8163282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8163285">func</span>&nbsp;<span class="op" id="8163290">(</span><span class="ident" id="8163291">a</span>&nbsp;<span class="op" id="8163293">*</span><span class="ident" id="8163294">isZeroBugArray</span><span class="op" id="8163308">)</span>&nbsp;<span class="ident" id="8163310">GobDecode</span><span class="op" id="8163319">(</span><span class="ident" id="8163320">data</span>&nbsp;<span class="op" id="8163325">[</span><span class="op" id="8163326">]</span><span class="builtintype" id="8163327">byte</span><span class="op" id="8163331">)</span>&nbsp;<span class="builtintype" id="8163333">error</span>&nbsp;<span class="op" id="8163339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163342">if</span>&nbsp;<span class="builtinfunc" id="8163345">len</span><span class="op" id="8163348">(</span><span class="ident" id="8163349">data</span><span class="op" id="8163353">)</span>&nbsp;<span class="op" id="8163355">!=</span>&nbsp;<span class="builtinfunc" id="8163358">len</span><span class="op" id="8163361">(</span><span class="ident" id="8163362">a</span><span class="op" id="8163363">)</span>&nbsp;<span class="op" id="8163365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163369">return</span>&nbsp;<span class="ident" id="8163376">io</span><span class="op" id="8163378">.</span><span class="ident" id="8163379">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8163384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163387">a</span><span class="op" id="8163388">[</span><span class="num" id="8163389">0</span><span class="op" id="8163390">]</span>&nbsp;<span class="op" id="8163392">=</span>&nbsp;<span class="ident" id="8163394">data</span><span class="op" id="8163398">[</span><span class="num" id="8163399">0</span><span class="op" id="8163400">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163403">a</span><span class="op" id="8163404">[</span><span class="num" id="8163405">1</span><span class="op" id="8163406">]</span>&nbsp;<span class="op" id="8163408">=</span>&nbsp;<span class="ident" id="8163410">data</span><span class="op" id="8163414">[</span><span class="num" id="8163415">1</span><span class="op" id="8163416">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163419">return</span>&nbsp;<span class="ident" id="8163426">nil</span><br>
<span class="lineno"></span><span class="op" id="8163430">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="8163433">type</span>&nbsp;<span class="ident" id="8163438">isZeroBugInterface</span>&nbsp;<span class="keyword" id="8163457">struct</span>&nbsp;<span class="op" id="8163464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163467">I</span>&nbsp;<span class="keyword" id="8163469">interface</span><span class="op" id="8163478">{</span><span class="op" id="8163479">}</span><br>
<span class="lineno"></span><span class="op" id="8163481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="8163484">func</span>&nbsp;<span class="op" id="8163489">(</span><span class="ident" id="8163490">i</span>&nbsp;<span class="ident" id="8163492">isZeroBugInterface</span><span class="op" id="8163510">)</span>&nbsp;<span class="ident" id="8163512">GobEncode</span><span class="op" id="8163521">(</span><span class="op" id="8163522">)</span>&nbsp;<span class="op" id="8163524">(</span><span class="ident" id="8163525">b</span>&nbsp;<span class="op" id="8163527">[</span><span class="op" id="8163528">]</span><span class="builtintype" id="8163529">byte</span><span class="op" id="8163533">,</span>&nbsp;<span class="ident" id="8163535">e</span>&nbsp;<span class="builtintype" id="8163537">error</span><span class="op" id="8163542">)</span>&nbsp;<span class="op" id="8163544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163547">return</span>&nbsp;<span class="op" id="8163554">[</span><span class="op" id="8163555">]</span><span class="builtintype" id="8163556">byte</span><span class="op" id="8163560">{</span><span class="op" id="8163561">}</span><span class="op" id="8163562">,</span>&nbsp;<span class="ident" id="8163564">nil</span><br>
<span class="lineno"></span><span class="op" id="8163568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8163571">func</span>&nbsp;<span class="op" id="8163576">(</span><span class="ident" id="8163577">i</span>&nbsp;<span class="op" id="8163579">*</span><span class="ident" id="8163580">isZeroBugInterface</span><span class="op" id="8163598">)</span>&nbsp;<span class="ident" id="8163600">GobDecode</span><span class="op" id="8163609">(</span><span class="ident" id="8163610">data</span>&nbsp;<span class="op" id="8163615">[</span><span class="op" id="8163616">]</span><span class="builtintype" id="8163617">byte</span><span class="op" id="8163621">)</span>&nbsp;<span class="builtintype" id="8163623">error</span>&nbsp;<span class="op" id="8163629">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163632">return</span>&nbsp;<span class="ident" id="8163639">nil</span><br>
<span class="lineno"></span><span class="op" id="8163643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8163646">func</span>&nbsp;<span class="ident" id="8163651">TestGobEncodeIsZero</span><span class="op" id="8163670">(</span><span class="ident" id="8163671">t</span>&nbsp;<span class="op" id="8163673">*</span><span class="ident" id="8163674">testing</span><span class="op" id="8163681">.</span><span class="ident" id="8163682">T</span><span class="op" id="8163683">)</span>&nbsp;<span class="op" id="8163685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163688">x</span>&nbsp;<span class="op" id="8163690">:=</span>&nbsp;<span class="ident" id="8163693">isZeroBug</span><span class="op" id="8163702">{</span><span class="ident" id="8163703">time</span><span class="op" id="8163707">.</span><span class="ident" id="8163708">Now</span><span class="op" id="8163711">(</span><span class="op" id="8163712">)</span><span class="op" id="8163713">,</span>&nbsp;<span class="string" id="8163715">&#34;hello&#34;</span><span class="op" id="8163722">,</span>&nbsp;<span class="op" id="8163724">-</span><span class="num" id="8163725">55</span><span class="op" id="8163727">,</span>&nbsp;<span class="ident" id="8163729">isZeroBugArray</span><span class="op" id="8163743">{</span><span class="num" id="8163744">1</span><span class="op" id="8163745">,</span>&nbsp;<span class="num" id="8163747">2</span><span class="op" id="8163748">}</span><span class="op" id="8163749">,</span>&nbsp;<span class="ident" id="8163751">isZeroBugInterface</span><span class="op" id="8163769">{</span><span class="op" id="8163770">}</span><span class="op" id="8163771">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163774">b</span>&nbsp;<span class="op" id="8163776">:=</span>&nbsp;<span class="builtinfunc" id="8163779">new</span><span class="op" id="8163782">(</span><span class="ident" id="8163783">bytes</span><span class="op" id="8163788">.</span><span class="ident" id="8163789">Buffer</span><span class="op" id="8163795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163798">enc</span>&nbsp;<span class="op" id="8163802">:=</span>&nbsp;<span class="ident" id="8163805">NewEncoder</span><span class="op" id="8163815">(</span><span class="ident" id="8163816">b</span><span class="op" id="8163817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163820">err</span>&nbsp;<span class="op" id="8163824">:=</span>&nbsp;<span class="ident" id="8163827">enc</span><span class="op" id="8163830">.</span><span class="ident" id="8163831">Encode</span><span class="op" id="8163837">(</span><span class="ident" id="8163838">x</span><span class="op" id="8163839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163842">if</span>&nbsp;<span class="ident" id="8163845">err</span>&nbsp;<span class="op" id="8163849">!=</span>&nbsp;<span class="ident" id="8163852">nil</span>&nbsp;<span class="op" id="8163856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163860">t</span><span class="op" id="8163861">.</span><span class="ident" id="8163862">Fatal</span><span class="op" id="8163867">(</span><span class="string" id="8163868">&#34;encode:&#34;</span><span class="op" id="8163877">,</span>&nbsp;<span class="ident" id="8163879">err</span><span class="op" id="8163882">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8163885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163888">var</span>&nbsp;<span class="ident" id="8163892">y</span>&nbsp;<span class="ident" id="8163894">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163905">dec</span>&nbsp;<span class="op" id="8163909">:=</span>&nbsp;<span class="ident" id="8163912">NewDecoder</span><span class="op" id="8163922">(</span><span class="ident" id="8163923">b</span><span class="op" id="8163924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163927">err</span>&nbsp;<span class="op" id="8163931">=</span>&nbsp;<span class="ident" id="8163933">dec</span><span class="op" id="8163936">.</span><span class="ident" id="8163937">Decode</span><span class="op" id="8163943">(</span><span class="op" id="8163944">&amp;</span><span class="ident" id="8163945">y</span><span class="op" id="8163946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163949">if</span>&nbsp;<span class="ident" id="8163952">err</span>&nbsp;<span class="op" id="8163956">!=</span>&nbsp;<span class="ident" id="8163959">nil</span>&nbsp;<span class="op" id="8163963">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8163967">t</span><span class="op" id="8163968">.</span><span class="ident" id="8163969">Fatal</span><span class="op" id="8163974">(</span><span class="string" id="8163975">&#34;decode:&#34;</span><span class="op" id="8163984">,</span>&nbsp;<span class="ident" id="8163986">err</span><span class="op" id="8163989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8163992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8163995">if</span>&nbsp;<span class="ident" id="8163998">x</span>&nbsp;<span class="op" id="8164000">!=</span>&nbsp;<span class="ident" id="8164003">y</span>&nbsp;<span class="op" id="8164005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164009">t</span><span class="op" id="8164010">.</span><span class="ident" id="8164011">Fatalf</span><span class="op" id="8164017">(</span><span class="string" id="8164018">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8164028">,</span>&nbsp;<span class="ident" id="8164030">x</span><span class="op" id="8164031">,</span>&nbsp;<span class="ident" id="8164033">y</span><span class="op" id="8164034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8164037">}</span><br>
<span class="lineno">765</span><span class="op" id="8164039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8164042">func</span>&nbsp;<span class="ident" id="8164047">TestGobEncodePtrError</span><span class="op" id="8164068">(</span><span class="ident" id="8164069">t</span>&nbsp;<span class="op" id="8164071">*</span><span class="ident" id="8164072">testing</span><span class="op" id="8164079">.</span><span class="ident" id="8164080">T</span><span class="op" id="8164081">)</span>&nbsp;<span class="op" id="8164083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164086">var</span>&nbsp;<span class="ident" id="8164090">err</span>&nbsp;<span class="builtintype" id="8164094">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164101">b</span>&nbsp;<span class="op" id="8164103">:=</span>&nbsp;<span class="builtinfunc" id="8164106">new</span><span class="op" id="8164109">(</span><span class="ident" id="8164110">bytes</span><span class="op" id="8164115">.</span><span class="ident" id="8164116">Buffer</span><span class="op" id="8164122">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164125">enc</span>&nbsp;<span class="op" id="8164129">:=</span>&nbsp;<span class="ident" id="8164132">NewEncoder</span><span class="op" id="8164142">(</span><span class="ident" id="8164143">b</span><span class="op" id="8164144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164147">err</span>&nbsp;<span class="op" id="8164151">=</span>&nbsp;<span class="ident" id="8164153">enc</span><span class="op" id="8164156">.</span><span class="ident" id="8164157">Encode</span><span class="op" id="8164163">(</span><span class="op" id="8164164">&amp;</span><span class="ident" id="8164165">err</span><span class="op" id="8164168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164171">if</span>&nbsp;<span class="ident" id="8164174">err</span>&nbsp;<span class="op" id="8164178">!=</span>&nbsp;<span class="ident" id="8164181">nil</span>&nbsp;<span class="op" id="8164185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164189">t</span><span class="op" id="8164190">.</span><span class="ident" id="8164191">Fatal</span><span class="op" id="8164196">(</span><span class="string" id="8164197">&#34;encode:&#34;</span><span class="op" id="8164206">,</span>&nbsp;<span class="ident" id="8164208">err</span><span class="op" id="8164211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8164214">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164217">dec</span>&nbsp;<span class="op" id="8164221">:=</span>&nbsp;<span class="ident" id="8164224">NewDecoder</span><span class="op" id="8164234">(</span><span class="ident" id="8164235">b</span><span class="op" id="8164236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164239">err2</span>&nbsp;<span class="op" id="8164244">:=</span>&nbsp;<span class="ident" id="8164247">fmt</span><span class="op" id="8164250">.</span><span class="ident" id="8164251">Errorf</span><span class="op" id="8164257">(</span><span class="string" id="8164258">&#34;foo&#34;</span><span class="op" id="8164263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164266">err</span>&nbsp;<span class="op" id="8164270">=</span>&nbsp;<span class="ident" id="8164272">dec</span><span class="op" id="8164275">.</span><span class="ident" id="8164276">Decode</span><span class="op" id="8164282">(</span><span class="op" id="8164283">&amp;</span><span class="ident" id="8164284">err2</span><span class="op" id="8164288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164291">if</span>&nbsp;<span class="ident" id="8164294">err</span>&nbsp;<span class="op" id="8164298">!=</span>&nbsp;<span class="ident" id="8164301">nil</span>&nbsp;<span class="op" id="8164305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164309">t</span><span class="op" id="8164310">.</span><span class="ident" id="8164311">Fatal</span><span class="op" id="8164316">(</span><span class="string" id="8164317">&#34;decode:&#34;</span><span class="op" id="8164326">,</span>&nbsp;<span class="ident" id="8164328">err</span><span class="op" id="8164331">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8164334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164337">if</span>&nbsp;<span class="ident" id="8164340">err2</span>&nbsp;<span class="op" id="8164345">!=</span>&nbsp;<span class="ident" id="8164348">nil</span>&nbsp;<span class="op" id="8164352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164356">t</span><span class="op" id="8164357">.</span><span class="ident" id="8164358">Fatalf</span><span class="op" id="8164364">(</span><span class="string" id="8164365">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8164387">,</span>&nbsp;<span class="ident" id="8164389">err2</span><span class="op" id="8164393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8164396">}</span><br>
<span class="lineno"></span><span class="op" id="8164398">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="8164401">func</span>&nbsp;<span class="ident" id="8164406">TestNetIP</span><span class="op" id="8164415">(</span><span class="ident" id="8164416">t</span>&nbsp;<span class="op" id="8164418">*</span><span class="ident" id="8164419">testing</span><span class="op" id="8164426">.</span><span class="ident" id="8164427">T</span><span class="op" id="8164428">)</span>&nbsp;<span class="op" id="8164430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8164433">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164476">enc</span>&nbsp;<span class="op" id="8164480">:=</span>&nbsp;<span class="op" id="8164483">[</span><span class="op" id="8164484">]</span><span class="builtintype" id="8164485">byte</span><span class="op" id="8164489">{</span><span class="num" id="8164490">0x07</span><span class="op" id="8164494">,</span>&nbsp;<span class="num" id="8164496">0x0a</span><span class="op" id="8164500">,</span>&nbsp;<span class="num" id="8164502">0x00</span><span class="op" id="8164506">,</span>&nbsp;<span class="num" id="8164508">0x04</span><span class="op" id="8164512">,</span>&nbsp;<span class="num" id="8164514">0x01</span><span class="op" id="8164518">,</span>&nbsp;<span class="num" id="8164520">0x02</span><span class="op" id="8164524">,</span>&nbsp;<span class="num" id="8164526">0x03</span><span class="op" id="8164530">,</span>&nbsp;<span class="num" id="8164532">0x04</span><span class="op" id="8164536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164540">var</span>&nbsp;<span class="ident" id="8164544">ip</span>&nbsp;<span class="ident" id="8164547">net</span><span class="op" id="8164550">.</span><span class="ident" id="8164551">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164555">err</span>&nbsp;<span class="op" id="8164559">:=</span>&nbsp;<span class="ident" id="8164562">NewDecoder</span><span class="op" id="8164572">(</span><span class="ident" id="8164573">bytes</span><span class="op" id="8164578">.</span><span class="ident" id="8164579">NewReader</span><span class="op" id="8164588">(</span><span class="ident" id="8164589">enc</span><span class="op" id="8164592">)</span><span class="op" id="8164593">)</span><span class="op" id="8164594">.</span><span class="ident" id="8164595">Decode</span><span class="op" id="8164601">(</span><span class="op" id="8164602">&amp;</span><span class="ident" id="8164603">ip</span><span class="op" id="8164605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164608">if</span>&nbsp;<span class="ident" id="8164611">err</span>&nbsp;<span class="op" id="8164615">!=</span>&nbsp;<span class="ident" id="8164618">nil</span>&nbsp;<span class="op" id="8164622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164626">t</span><span class="op" id="8164627">.</span><span class="ident" id="8164628">Fatalf</span><span class="op" id="8164634">(</span><span class="string" id="8164635">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8164647">,</span>&nbsp;<span class="ident" id="8164649">err</span><span class="op" id="8164652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8164655">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8164658">if</span>&nbsp;<span class="ident" id="8164661">ip</span><span class="op" id="8164663">.</span><span class="ident" id="8164664">String</span><span class="op" id="8164670">(</span><span class="op" id="8164671">)</span>&nbsp;<span class="op" id="8164673">!=</span>&nbsp;<span class="string" id="8164676">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="8164686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8164690">t</span><span class="op" id="8164691">.</span><span class="ident" id="8164692">Errorf</span><span class="op" id="8164698">(</span><span class="string" id="8164699">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="8164728">,</span>&nbsp;<span class="ident" id="8164730">ip</span><span class="op" id="8164732">.</span><span class="ident" id="8164733">String</span><span class="op" id="8164739">(</span><span class="op" id="8164740">)</span><span class="op" id="8164741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8164744">}</span><br>
<span class="lineno"></span><span class="op" id="8164746">}</span>
</div>
</body>
</html>
