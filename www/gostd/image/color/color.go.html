<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html" class="current">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2307846">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2307901">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2307955">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2308006">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="2308057">package</span>&nbsp;<span class="ident" id="2308065">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308072">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="2308149">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="2308181">type</span>&nbsp;<span class="ident" id="2308186">Color</span>&nbsp;<span class="keyword" id="2308192">interface</span>&nbsp;<span class="op" id="2308202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308205">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308280">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308356">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2308432">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308446">RGBA</span><span class="op" id="2308450">(</span><span class="op" id="2308451">)</span>&nbsp;<span class="op" id="2308453">(</span><span class="ident" id="2308454">r</span><span class="op" id="2308455">,</span>&nbsp;<span class="ident" id="2308457">g</span><span class="op" id="2308458">,</span>&nbsp;<span class="ident" id="2308460">b</span><span class="op" id="2308461">,</span>&nbsp;<span class="ident" id="2308463">a</span>&nbsp;<span class="builtintype" id="2308465">uint32</span><span class="op" id="2308471">)</span><br>
<span class="lineno"></span><span class="op" id="2308473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2308476">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="2308543">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="2308600">type</span>&nbsp;<span class="ident" id="2308605">RGBA</span>&nbsp;<span class="keyword" id="2308610">struct</span>&nbsp;<span class="op" id="2308617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308620">R</span><span class="op" id="2308621">,</span>&nbsp;<span class="ident" id="2308623">G</span><span class="op" id="2308624">,</span>&nbsp;<span class="ident" id="2308626">B</span><span class="op" id="2308627">,</span>&nbsp;<span class="ident" id="2308629">A</span>&nbsp;<span class="builtintype" id="2308631">uint8</span><br>
<span class="lineno"></span><span class="op" id="2308637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2308640">func</span>&nbsp;<span class="op" id="2308645">(</span><span class="ident" id="2308646">c</span>&nbsp;<span class="ident" id="2308648">RGBA</span><span class="op" id="2308652">)</span>&nbsp;<span class="ident" id="2308654">RGBA</span><span class="op" id="2308658">(</span><span class="op" id="2308659">)</span>&nbsp;<span class="op" id="2308661">(</span><span class="ident" id="2308662">r</span><span class="op" id="2308663">,</span>&nbsp;<span class="ident" id="2308665">g</span><span class="op" id="2308666">,</span>&nbsp;<span class="ident" id="2308668">b</span><span class="op" id="2308669">,</span>&nbsp;<span class="ident" id="2308671">a</span>&nbsp;<span class="builtintype" id="2308673">uint32</span><span class="op" id="2308679">)</span>&nbsp;<span class="op" id="2308681">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308684">r</span>&nbsp;<span class="op" id="2308686">=</span>&nbsp;<span class="builtintype" id="2308688">uint32</span><span class="op" id="2308694">(</span><span class="ident" id="2308695">c</span><span class="op" id="2308696">.</span><span class="ident" id="2308697">R</span><span class="op" id="2308698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308701">r</span>&nbsp;<span class="op" id="2308703">|=</span>&nbsp;<span class="ident" id="2308706">r</span>&nbsp;<span class="op" id="2308708">&lt;&lt;</span>&nbsp;<span class="num" id="2308711">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308714">g</span>&nbsp;<span class="op" id="2308716">=</span>&nbsp;<span class="builtintype" id="2308718">uint32</span><span class="op" id="2308724">(</span><span class="ident" id="2308725">c</span><span class="op" id="2308726">.</span><span class="ident" id="2308727">G</span><span class="op" id="2308728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308731">g</span>&nbsp;<span class="op" id="2308733">|=</span>&nbsp;<span class="ident" id="2308736">g</span>&nbsp;<span class="op" id="2308738">&lt;&lt;</span>&nbsp;<span class="num" id="2308741">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308744">b</span>&nbsp;<span class="op" id="2308746">=</span>&nbsp;<span class="builtintype" id="2308748">uint32</span><span class="op" id="2308754">(</span><span class="ident" id="2308755">c</span><span class="op" id="2308756">.</span><span class="ident" id="2308757">B</span><span class="op" id="2308758">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308761">b</span>&nbsp;<span class="op" id="2308763">|=</span>&nbsp;<span class="ident" id="2308766">b</span>&nbsp;<span class="op" id="2308768">&lt;&lt;</span>&nbsp;<span class="num" id="2308771">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308774">a</span>&nbsp;<span class="op" id="2308776">=</span>&nbsp;<span class="builtintype" id="2308778">uint32</span><span class="op" id="2308784">(</span><span class="ident" id="2308785">c</span><span class="op" id="2308786">.</span><span class="ident" id="2308787">A</span><span class="op" id="2308788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308791">a</span>&nbsp;<span class="op" id="2308793">|=</span>&nbsp;<span class="ident" id="2308796">a</span>&nbsp;<span class="op" id="2308798">&lt;&lt;</span>&nbsp;<span class="num" id="2308801">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2308804">return</span><br>
<span class="lineno"></span><span class="op" id="2308811">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2308814">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="2308871">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="2308929">type</span>&nbsp;<span class="ident" id="2308934">RGBA64</span>&nbsp;<span class="keyword" id="2308941">struct</span>&nbsp;<span class="op" id="2308948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2308951">R</span><span class="op" id="2308952">,</span>&nbsp;<span class="ident" id="2308954">G</span><span class="op" id="2308955">,</span>&nbsp;<span class="ident" id="2308957">B</span><span class="op" id="2308958">,</span>&nbsp;<span class="ident" id="2308960">A</span>&nbsp;<span class="builtintype" id="2308962">uint16</span><br>
<span class="lineno">40</span><span class="op" id="2308969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2308972">func</span>&nbsp;<span class="op" id="2308977">(</span><span class="ident" id="2308978">c</span>&nbsp;<span class="ident" id="2308980">RGBA64</span><span class="op" id="2308986">)</span>&nbsp;<span class="ident" id="2308988">RGBA</span><span class="op" id="2308992">(</span><span class="op" id="2308993">)</span>&nbsp;<span class="op" id="2308995">(</span><span class="ident" id="2308996">r</span><span class="op" id="2308997">,</span>&nbsp;<span class="ident" id="2308999">g</span><span class="op" id="2309000">,</span>&nbsp;<span class="ident" id="2309002">b</span><span class="op" id="2309003">,</span>&nbsp;<span class="ident" id="2309005">a</span>&nbsp;<span class="builtintype" id="2309007">uint32</span><span class="op" id="2309013">)</span>&nbsp;<span class="op" id="2309015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309018">return</span>&nbsp;<span class="builtintype" id="2309025">uint32</span><span class="op" id="2309031">(</span><span class="ident" id="2309032">c</span><span class="op" id="2309033">.</span><span class="ident" id="2309034">R</span><span class="op" id="2309035">)</span><span class="op" id="2309036">,</span>&nbsp;<span class="builtintype" id="2309038">uint32</span><span class="op" id="2309044">(</span><span class="ident" id="2309045">c</span><span class="op" id="2309046">.</span><span class="ident" id="2309047">G</span><span class="op" id="2309048">)</span><span class="op" id="2309049">,</span>&nbsp;<span class="builtintype" id="2309051">uint32</span><span class="op" id="2309057">(</span><span class="ident" id="2309058">c</span><span class="op" id="2309059">.</span><span class="ident" id="2309060">B</span><span class="op" id="2309061">)</span><span class="op" id="2309062">,</span>&nbsp;<span class="builtintype" id="2309064">uint32</span><span class="op" id="2309070">(</span><span class="ident" id="2309071">c</span><span class="op" id="2309072">.</span><span class="ident" id="2309073">A</span><span class="op" id="2309074">)</span><br>
<span class="lineno"></span><span class="op" id="2309076">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2309079">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2309139">type</span>&nbsp;<span class="ident" id="2309144">NRGBA</span>&nbsp;<span class="keyword" id="2309150">struct</span>&nbsp;<span class="op" id="2309157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309160">R</span><span class="op" id="2309161">,</span>&nbsp;<span class="ident" id="2309163">G</span><span class="op" id="2309164">,</span>&nbsp;<span class="ident" id="2309166">B</span><span class="op" id="2309167">,</span>&nbsp;<span class="ident" id="2309169">A</span>&nbsp;<span class="builtintype" id="2309171">uint8</span><br>
<span class="lineno"></span><span class="op" id="2309177">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="2309180">func</span>&nbsp;<span class="op" id="2309185">(</span><span class="ident" id="2309186">c</span>&nbsp;<span class="ident" id="2309188">NRGBA</span><span class="op" id="2309193">)</span>&nbsp;<span class="ident" id="2309195">RGBA</span><span class="op" id="2309199">(</span><span class="op" id="2309200">)</span>&nbsp;<span class="op" id="2309202">(</span><span class="ident" id="2309203">r</span><span class="op" id="2309204">,</span>&nbsp;<span class="ident" id="2309206">g</span><span class="op" id="2309207">,</span>&nbsp;<span class="ident" id="2309209">b</span><span class="op" id="2309210">,</span>&nbsp;<span class="ident" id="2309212">a</span>&nbsp;<span class="builtintype" id="2309214">uint32</span><span class="op" id="2309220">)</span>&nbsp;<span class="op" id="2309222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309225">r</span>&nbsp;<span class="op" id="2309227">=</span>&nbsp;<span class="builtintype" id="2309229">uint32</span><span class="op" id="2309235">(</span><span class="ident" id="2309236">c</span><span class="op" id="2309237">.</span><span class="ident" id="2309238">R</span><span class="op" id="2309239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309242">r</span>&nbsp;<span class="op" id="2309244">|=</span>&nbsp;<span class="ident" id="2309247">r</span>&nbsp;<span class="op" id="2309249">&lt;&lt;</span>&nbsp;<span class="num" id="2309252">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309255">r</span>&nbsp;<span class="op" id="2309257">*=</span>&nbsp;<span class="builtintype" id="2309260">uint32</span><span class="op" id="2309266">(</span><span class="ident" id="2309267">c</span><span class="op" id="2309268">.</span><span class="ident" id="2309269">A</span><span class="op" id="2309270">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309273">r</span>&nbsp;<span class="op" id="2309275">/=</span>&nbsp;<span class="num" id="2309278">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309284">g</span>&nbsp;<span class="op" id="2309286">=</span>&nbsp;<span class="builtintype" id="2309288">uint32</span><span class="op" id="2309294">(</span><span class="ident" id="2309295">c</span><span class="op" id="2309296">.</span><span class="ident" id="2309297">G</span><span class="op" id="2309298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309301">g</span>&nbsp;<span class="op" id="2309303">|=</span>&nbsp;<span class="ident" id="2309306">g</span>&nbsp;<span class="op" id="2309308">&lt;&lt;</span>&nbsp;<span class="num" id="2309311">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309314">g</span>&nbsp;<span class="op" id="2309316">*=</span>&nbsp;<span class="builtintype" id="2309319">uint32</span><span class="op" id="2309325">(</span><span class="ident" id="2309326">c</span><span class="op" id="2309327">.</span><span class="ident" id="2309328">A</span><span class="op" id="2309329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309332">g</span>&nbsp;<span class="op" id="2309334">/=</span>&nbsp;<span class="num" id="2309337">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309343">b</span>&nbsp;<span class="op" id="2309345">=</span>&nbsp;<span class="builtintype" id="2309347">uint32</span><span class="op" id="2309353">(</span><span class="ident" id="2309354">c</span><span class="op" id="2309355">.</span><span class="ident" id="2309356">B</span><span class="op" id="2309357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309360">b</span>&nbsp;<span class="op" id="2309362">|=</span>&nbsp;<span class="ident" id="2309365">b</span>&nbsp;<span class="op" id="2309367">&lt;&lt;</span>&nbsp;<span class="num" id="2309370">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309373">b</span>&nbsp;<span class="op" id="2309375">*=</span>&nbsp;<span class="builtintype" id="2309378">uint32</span><span class="op" id="2309384">(</span><span class="ident" id="2309385">c</span><span class="op" id="2309386">.</span><span class="ident" id="2309387">A</span><span class="op" id="2309388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309391">b</span>&nbsp;<span class="op" id="2309393">/=</span>&nbsp;<span class="num" id="2309396">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309402">a</span>&nbsp;<span class="op" id="2309404">=</span>&nbsp;<span class="builtintype" id="2309406">uint32</span><span class="op" id="2309412">(</span><span class="ident" id="2309413">c</span><span class="op" id="2309414">.</span><span class="ident" id="2309415">A</span><span class="op" id="2309416">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309419">a</span>&nbsp;<span class="op" id="2309421">|=</span>&nbsp;<span class="ident" id="2309424">a</span>&nbsp;<span class="op" id="2309426">&lt;&lt;</span>&nbsp;<span class="num" id="2309429">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309432">return</span><br>
<span class="lineno"></span><span class="op" id="2309439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309442">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="2309504">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="2309562">type</span>&nbsp;<span class="ident" id="2309567">NRGBA64</span>&nbsp;<span class="keyword" id="2309575">struct</span>&nbsp;<span class="op" id="2309582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309585">R</span><span class="op" id="2309586">,</span>&nbsp;<span class="ident" id="2309588">G</span><span class="op" id="2309589">,</span>&nbsp;<span class="ident" id="2309591">B</span><span class="op" id="2309592">,</span>&nbsp;<span class="ident" id="2309594">A</span>&nbsp;<span class="builtintype" id="2309596">uint16</span><br>
<span class="lineno"></span><span class="op" id="2309603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="2309606">func</span>&nbsp;<span class="op" id="2309611">(</span><span class="ident" id="2309612">c</span>&nbsp;<span class="ident" id="2309614">NRGBA64</span><span class="op" id="2309621">)</span>&nbsp;<span class="ident" id="2309623">RGBA</span><span class="op" id="2309627">(</span><span class="op" id="2309628">)</span>&nbsp;<span class="op" id="2309630">(</span><span class="ident" id="2309631">r</span><span class="op" id="2309632">,</span>&nbsp;<span class="ident" id="2309634">g</span><span class="op" id="2309635">,</span>&nbsp;<span class="ident" id="2309637">b</span><span class="op" id="2309638">,</span>&nbsp;<span class="ident" id="2309640">a</span>&nbsp;<span class="builtintype" id="2309642">uint32</span><span class="op" id="2309648">)</span>&nbsp;<span class="op" id="2309650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309653">r</span>&nbsp;<span class="op" id="2309655">=</span>&nbsp;<span class="builtintype" id="2309657">uint32</span><span class="op" id="2309663">(</span><span class="ident" id="2309664">c</span><span class="op" id="2309665">.</span><span class="ident" id="2309666">R</span><span class="op" id="2309667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309670">r</span>&nbsp;<span class="op" id="2309672">*=</span>&nbsp;<span class="builtintype" id="2309675">uint32</span><span class="op" id="2309681">(</span><span class="ident" id="2309682">c</span><span class="op" id="2309683">.</span><span class="ident" id="2309684">A</span><span class="op" id="2309685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309688">r</span>&nbsp;<span class="op" id="2309690">/=</span>&nbsp;<span class="num" id="2309693">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309701">g</span>&nbsp;<span class="op" id="2309703">=</span>&nbsp;<span class="builtintype" id="2309705">uint32</span><span class="op" id="2309711">(</span><span class="ident" id="2309712">c</span><span class="op" id="2309713">.</span><span class="ident" id="2309714">G</span><span class="op" id="2309715">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309718">g</span>&nbsp;<span class="op" id="2309720">*=</span>&nbsp;<span class="builtintype" id="2309723">uint32</span><span class="op" id="2309729">(</span><span class="ident" id="2309730">c</span><span class="op" id="2309731">.</span><span class="ident" id="2309732">A</span><span class="op" id="2309733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309736">g</span>&nbsp;<span class="op" id="2309738">/=</span>&nbsp;<span class="num" id="2309741">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309749">b</span>&nbsp;<span class="op" id="2309751">=</span>&nbsp;<span class="builtintype" id="2309753">uint32</span><span class="op" id="2309759">(</span><span class="ident" id="2309760">c</span><span class="op" id="2309761">.</span><span class="ident" id="2309762">B</span><span class="op" id="2309763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309766">b</span>&nbsp;<span class="op" id="2309768">*=</span>&nbsp;<span class="builtintype" id="2309771">uint32</span><span class="op" id="2309777">(</span><span class="ident" id="2309778">c</span><span class="op" id="2309779">.</span><span class="ident" id="2309780">A</span><span class="op" id="2309781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309784">b</span>&nbsp;<span class="op" id="2309786">/=</span>&nbsp;<span class="num" id="2309789">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309797">a</span>&nbsp;<span class="op" id="2309799">=</span>&nbsp;<span class="builtintype" id="2309801">uint32</span><span class="op" id="2309807">(</span><span class="ident" id="2309808">c</span><span class="op" id="2309809">.</span><span class="ident" id="2309810">A</span><span class="op" id="2309811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309814">return</span><br>
<span class="lineno"></span><span class="op" id="2309821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2309824">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="2309866">type</span>&nbsp;<span class="ident" id="2309871">Alpha</span>&nbsp;<span class="keyword" id="2309877">struct</span>&nbsp;<span class="op" id="2309884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309887">A</span>&nbsp;<span class="builtintype" id="2309889">uint8</span><br>
<span class="lineno"></span><span class="op" id="2309895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2309898">func</span>&nbsp;<span class="op" id="2309903">(</span><span class="ident" id="2309904">c</span>&nbsp;<span class="ident" id="2309906">Alpha</span><span class="op" id="2309911">)</span>&nbsp;<span class="ident" id="2309913">RGBA</span><span class="op" id="2309917">(</span><span class="op" id="2309918">)</span>&nbsp;<span class="op" id="2309920">(</span><span class="ident" id="2309921">r</span><span class="op" id="2309922">,</span>&nbsp;<span class="ident" id="2309924">g</span><span class="op" id="2309925">,</span>&nbsp;<span class="ident" id="2309927">b</span><span class="op" id="2309928">,</span>&nbsp;<span class="ident" id="2309930">a</span>&nbsp;<span class="builtintype" id="2309932">uint32</span><span class="op" id="2309938">)</span>&nbsp;<span class="op" id="2309940">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309943">a</span>&nbsp;<span class="op" id="2309945">=</span>&nbsp;<span class="builtintype" id="2309947">uint32</span><span class="op" id="2309953">(</span><span class="ident" id="2309954">c</span><span class="op" id="2309955">.</span><span class="ident" id="2309956">A</span><span class="op" id="2309957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2309960">a</span>&nbsp;<span class="op" id="2309962">|=</span>&nbsp;<span class="ident" id="2309965">a</span>&nbsp;<span class="op" id="2309967">&lt;&lt;</span>&nbsp;<span class="num" id="2309970">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2309973">return</span>&nbsp;<span class="ident" id="2309980">a</span><span class="op" id="2309981">,</span>&nbsp;<span class="ident" id="2309983">a</span><span class="op" id="2309984">,</span>&nbsp;<span class="ident" id="2309986">a</span><span class="op" id="2309987">,</span>&nbsp;<span class="ident" id="2309989">a</span><br>
<span class="lineno"></span><span class="op" id="2309991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="2309994">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2310038">type</span>&nbsp;<span class="ident" id="2310043">Alpha16</span>&nbsp;<span class="keyword" id="2310051">struct</span>&nbsp;<span class="op" id="2310058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310061">A</span>&nbsp;<span class="builtintype" id="2310063">uint16</span><br>
<span class="lineno"></span><span class="op" id="2310070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="2310073">func</span>&nbsp;<span class="op" id="2310078">(</span><span class="ident" id="2310079">c</span>&nbsp;<span class="ident" id="2310081">Alpha16</span><span class="op" id="2310088">)</span>&nbsp;<span class="ident" id="2310090">RGBA</span><span class="op" id="2310094">(</span><span class="op" id="2310095">)</span>&nbsp;<span class="op" id="2310097">(</span><span class="ident" id="2310098">r</span><span class="op" id="2310099">,</span>&nbsp;<span class="ident" id="2310101">g</span><span class="op" id="2310102">,</span>&nbsp;<span class="ident" id="2310104">b</span><span class="op" id="2310105">,</span>&nbsp;<span class="ident" id="2310107">a</span>&nbsp;<span class="builtintype" id="2310109">uint32</span><span class="op" id="2310115">)</span>&nbsp;<span class="op" id="2310117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310120">a</span>&nbsp;<span class="op" id="2310122">=</span>&nbsp;<span class="builtintype" id="2310124">uint32</span><span class="op" id="2310130">(</span><span class="ident" id="2310131">c</span><span class="op" id="2310132">.</span><span class="ident" id="2310133">A</span><span class="op" id="2310134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310137">return</span>&nbsp;<span class="ident" id="2310144">a</span><span class="op" id="2310145">,</span>&nbsp;<span class="ident" id="2310147">a</span><span class="op" id="2310148">,</span>&nbsp;<span class="ident" id="2310150">a</span><span class="op" id="2310151">,</span>&nbsp;<span class="ident" id="2310153">a</span><br>
<span class="lineno"></span><span class="op" id="2310155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="2310158">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2310203">type</span>&nbsp;<span class="ident" id="2310208">Gray</span>&nbsp;<span class="keyword" id="2310213">struct</span>&nbsp;<span class="op" id="2310220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310223">Y</span>&nbsp;<span class="builtintype" id="2310225">uint8</span><br>
<span class="lineno"></span><span class="op" id="2310231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2310234">func</span>&nbsp;<span class="op" id="2310239">(</span><span class="ident" id="2310240">c</span>&nbsp;<span class="ident" id="2310242">Gray</span><span class="op" id="2310246">)</span>&nbsp;<span class="ident" id="2310248">RGBA</span><span class="op" id="2310252">(</span><span class="op" id="2310253">)</span>&nbsp;<span class="op" id="2310255">(</span><span class="ident" id="2310256">r</span><span class="op" id="2310257">,</span>&nbsp;<span class="ident" id="2310259">g</span><span class="op" id="2310260">,</span>&nbsp;<span class="ident" id="2310262">b</span><span class="op" id="2310263">,</span>&nbsp;<span class="ident" id="2310265">a</span>&nbsp;<span class="builtintype" id="2310267">uint32</span><span class="op" id="2310273">)</span>&nbsp;<span class="op" id="2310275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310278">y</span>&nbsp;<span class="op" id="2310280">:=</span>&nbsp;<span class="builtintype" id="2310283">uint32</span><span class="op" id="2310289">(</span><span class="ident" id="2310290">c</span><span class="op" id="2310291">.</span><span class="ident" id="2310292">Y</span><span class="op" id="2310293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310296">y</span>&nbsp;<span class="op" id="2310298">|=</span>&nbsp;<span class="ident" id="2310301">y</span>&nbsp;<span class="op" id="2310303">&lt;&lt;</span>&nbsp;<span class="num" id="2310306">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310309">return</span>&nbsp;<span class="ident" id="2310316">y</span><span class="op" id="2310317">,</span>&nbsp;<span class="ident" id="2310319">y</span><span class="op" id="2310320">,</span>&nbsp;<span class="ident" id="2310322">y</span><span class="op" id="2310323">,</span>&nbsp;<span class="num" id="2310325">0xffff</span><br>
<span class="lineno"></span><span class="op" id="2310332">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="2310335">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2310382">type</span>&nbsp;<span class="ident" id="2310387">Gray16</span>&nbsp;<span class="keyword" id="2310394">struct</span>&nbsp;<span class="op" id="2310401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310404">Y</span>&nbsp;<span class="builtintype" id="2310406">uint16</span><br>
<span class="lineno"></span><span class="op" id="2310413">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="2310416">func</span>&nbsp;<span class="op" id="2310421">(</span><span class="ident" id="2310422">c</span>&nbsp;<span class="ident" id="2310424">Gray16</span><span class="op" id="2310430">)</span>&nbsp;<span class="ident" id="2310432">RGBA</span><span class="op" id="2310436">(</span><span class="op" id="2310437">)</span>&nbsp;<span class="op" id="2310439">(</span><span class="ident" id="2310440">r</span><span class="op" id="2310441">,</span>&nbsp;<span class="ident" id="2310443">g</span><span class="op" id="2310444">,</span>&nbsp;<span class="ident" id="2310446">b</span><span class="op" id="2310447">,</span>&nbsp;<span class="ident" id="2310449">a</span>&nbsp;<span class="builtintype" id="2310451">uint32</span><span class="op" id="2310457">)</span>&nbsp;<span class="op" id="2310459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310462">y</span>&nbsp;<span class="op" id="2310464">:=</span>&nbsp;<span class="builtintype" id="2310467">uint32</span><span class="op" id="2310473">(</span><span class="ident" id="2310474">c</span><span class="op" id="2310475">.</span><span class="ident" id="2310476">Y</span><span class="op" id="2310477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310480">return</span>&nbsp;<span class="ident" id="2310487">y</span><span class="op" id="2310488">,</span>&nbsp;<span class="ident" id="2310490">y</span><span class="op" id="2310491">,</span>&nbsp;<span class="ident" id="2310493">y</span><span class="op" id="2310494">,</span>&nbsp;<span class="num" id="2310496">0xffff</span><br>
<span class="lineno"></span><span class="op" id="2310503">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="2310506">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="2310585">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="2310602">type</span>&nbsp;<span class="ident" id="2310607">Model</span>&nbsp;<span class="keyword" id="2310613">interface</span>&nbsp;<span class="op" id="2310623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2310626">Convert</span><span class="op" id="2310633">(</span><span class="ident" id="2310634">c</span>&nbsp;<span class="ident" id="2310636">Color</span><span class="op" id="2310641">)</span>&nbsp;<span class="ident" id="2310643">Color</span><br>
<span class="lineno">135</span><span class="op" id="2310649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310652">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2310725">func</span>&nbsp;<span class="ident" id="2310730">ModelFunc</span><span class="op" id="2310739">(</span><span class="ident" id="2310740">f</span>&nbsp;<span class="keyword" id="2310742">func</span><span class="op" id="2310746">(</span><span class="ident" id="2310747">Color</span><span class="op" id="2310752">)</span>&nbsp;<span class="ident" id="2310754">Color</span><span class="op" id="2310759">)</span>&nbsp;<span class="ident" id="2310761">Model</span>&nbsp;<span class="op" id="2310767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310770">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310819">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310868">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310918">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2310968">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2310998">return</span>&nbsp;<span class="op" id="2311005">&amp;</span><span class="ident" id="2311006">modelFunc</span><span class="op" id="2311015">{</span><span class="ident" id="2311016">f</span><span class="op" id="2311017">}</span><br>
<span class="lineno">145</span><span class="op" id="2311019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2311022">type</span>&nbsp;<span class="ident" id="2311027">modelFunc</span>&nbsp;<span class="keyword" id="2311037">struct</span>&nbsp;<span class="op" id="2311044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311047">f</span>&nbsp;<span class="keyword" id="2311049">func</span><span class="op" id="2311053">(</span><span class="ident" id="2311054">Color</span><span class="op" id="2311059">)</span>&nbsp;<span class="ident" id="2311061">Color</span><br>
<span class="lineno"></span><span class="op" id="2311067">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="2311070">func</span>&nbsp;<span class="op" id="2311075">(</span><span class="ident" id="2311076">m</span>&nbsp;<span class="op" id="2311078">*</span><span class="ident" id="2311079">modelFunc</span><span class="op" id="2311088">)</span>&nbsp;<span class="ident" id="2311090">Convert</span><span class="op" id="2311097">(</span><span class="ident" id="2311098">c</span>&nbsp;<span class="ident" id="2311100">Color</span><span class="op" id="2311105">)</span>&nbsp;<span class="ident" id="2311107">Color</span>&nbsp;<span class="op" id="2311113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311116">return</span>&nbsp;<span class="ident" id="2311123">m</span><span class="op" id="2311124">.</span><span class="ident" id="2311125">f</span><span class="op" id="2311126">(</span><span class="ident" id="2311127">c</span><span class="op" id="2311128">)</span><br>
<span class="lineno"></span><span class="op" id="2311130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2311133">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2311173">var</span>&nbsp;<span class="op" id="2311177">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311180">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311193">Model</span>&nbsp;<span class="op" id="2311199">=</span>&nbsp;<span class="ident" id="2311201">ModelFunc</span><span class="op" id="2311210">(</span><span class="ident" id="2311211">rgbaModel</span><span class="op" id="2311220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311223">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="2311236">Model</span>&nbsp;<span class="op" id="2311242">=</span>&nbsp;<span class="ident" id="2311244">ModelFunc</span><span class="op" id="2311253">(</span><span class="ident" id="2311254">rgba64Model</span><span class="op" id="2311265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311268">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2311281">Model</span>&nbsp;<span class="op" id="2311287">=</span>&nbsp;<span class="ident" id="2311289">ModelFunc</span><span class="op" id="2311298">(</span><span class="ident" id="2311299">nrgbaModel</span><span class="op" id="2311309">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311312">NRGBA64Model</span>&nbsp;<span class="ident" id="2311325">Model</span>&nbsp;<span class="op" id="2311331">=</span>&nbsp;<span class="ident" id="2311333">ModelFunc</span><span class="op" id="2311342">(</span><span class="ident" id="2311343">nrgba64Model</span><span class="op" id="2311355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311358">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2311371">Model</span>&nbsp;<span class="op" id="2311377">=</span>&nbsp;<span class="ident" id="2311379">ModelFunc</span><span class="op" id="2311388">(</span><span class="ident" id="2311389">alphaModel</span><span class="op" id="2311399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311402">Alpha16Model</span>&nbsp;<span class="ident" id="2311415">Model</span>&nbsp;<span class="op" id="2311421">=</span>&nbsp;<span class="ident" id="2311423">ModelFunc</span><span class="op" id="2311432">(</span><span class="ident" id="2311433">alpha16Model</span><span class="op" id="2311445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311448">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311461">Model</span>&nbsp;<span class="op" id="2311467">=</span>&nbsp;<span class="ident" id="2311469">ModelFunc</span><span class="op" id="2311478">(</span><span class="ident" id="2311479">grayModel</span><span class="op" id="2311488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311491">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="2311504">Model</span>&nbsp;<span class="op" id="2311510">=</span>&nbsp;<span class="ident" id="2311512">ModelFunc</span><span class="op" id="2311521">(</span><span class="ident" id="2311522">gray16Model</span><span class="op" id="2311533">)</span><br>
<span class="lineno">165</span><span class="op" id="2311535">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2311538">func</span>&nbsp;<span class="ident" id="2311543">rgbaModel</span><span class="op" id="2311552">(</span><span class="ident" id="2311553">c</span>&nbsp;<span class="ident" id="2311555">Color</span><span class="op" id="2311560">)</span>&nbsp;<span class="ident" id="2311562">Color</span>&nbsp;<span class="op" id="2311568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311571">if</span>&nbsp;<span class="ident" id="2311574">_</span><span class="op" id="2311575">,</span>&nbsp;<span class="ident" id="2311577">ok</span>&nbsp;<span class="op" id="2311580">:=</span>&nbsp;<span class="ident" id="2311583">c</span><span class="op" id="2311584">.</span><span class="op" id="2311585">(</span><span class="ident" id="2311586">RGBA</span><span class="op" id="2311590">)</span><span class="op" id="2311591">;</span>&nbsp;<span class="ident" id="2311593">ok</span>&nbsp;<span class="op" id="2311596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311600">return</span>&nbsp;<span class="ident" id="2311607">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311613">r</span><span class="op" id="2311614">,</span>&nbsp;<span class="ident" id="2311616">g</span><span class="op" id="2311617">,</span>&nbsp;<span class="ident" id="2311619">b</span><span class="op" id="2311620">,</span>&nbsp;<span class="ident" id="2311622">a</span>&nbsp;<span class="op" id="2311624">:=</span>&nbsp;<span class="ident" id="2311627">c</span><span class="op" id="2311628">.</span><span class="ident" id="2311629">RGBA</span><span class="op" id="2311633">(</span><span class="op" id="2311634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311637">return</span>&nbsp;<span class="ident" id="2311644">RGBA</span><span class="op" id="2311648">{</span><span class="builtintype" id="2311649">uint8</span><span class="op" id="2311654">(</span><span class="ident" id="2311655">r</span>&nbsp;<span class="op" id="2311657">&gt;&gt;</span>&nbsp;<span class="num" id="2311660">8</span><span class="op" id="2311661">)</span><span class="op" id="2311662">,</span>&nbsp;<span class="builtintype" id="2311664">uint8</span><span class="op" id="2311669">(</span><span class="ident" id="2311670">g</span>&nbsp;<span class="op" id="2311672">&gt;&gt;</span>&nbsp;<span class="num" id="2311675">8</span><span class="op" id="2311676">)</span><span class="op" id="2311677">,</span>&nbsp;<span class="builtintype" id="2311679">uint8</span><span class="op" id="2311684">(</span><span class="ident" id="2311685">b</span>&nbsp;<span class="op" id="2311687">&gt;&gt;</span>&nbsp;<span class="num" id="2311690">8</span><span class="op" id="2311691">)</span><span class="op" id="2311692">,</span>&nbsp;<span class="builtintype" id="2311694">uint8</span><span class="op" id="2311699">(</span><span class="ident" id="2311700">a</span>&nbsp;<span class="op" id="2311702">&gt;&gt;</span>&nbsp;<span class="num" id="2311705">8</span><span class="op" id="2311706">)</span><span class="op" id="2311707">}</span><br>
<span class="lineno"></span><span class="op" id="2311709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2311712">func</span>&nbsp;<span class="ident" id="2311717">rgba64Model</span><span class="op" id="2311728">(</span><span class="ident" id="2311729">c</span>&nbsp;<span class="ident" id="2311731">Color</span><span class="op" id="2311736">)</span>&nbsp;<span class="ident" id="2311738">Color</span>&nbsp;<span class="op" id="2311744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311747">if</span>&nbsp;<span class="ident" id="2311750">_</span><span class="op" id="2311751">,</span>&nbsp;<span class="ident" id="2311753">ok</span>&nbsp;<span class="op" id="2311756">:=</span>&nbsp;<span class="ident" id="2311759">c</span><span class="op" id="2311760">.</span><span class="op" id="2311761">(</span><span class="ident" id="2311762">RGBA64</span><span class="op" id="2311768">)</span><span class="op" id="2311769">;</span>&nbsp;<span class="ident" id="2311771">ok</span>&nbsp;<span class="op" id="2311774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311778">return</span>&nbsp;<span class="ident" id="2311785">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311791">r</span><span class="op" id="2311792">,</span>&nbsp;<span class="ident" id="2311794">g</span><span class="op" id="2311795">,</span>&nbsp;<span class="ident" id="2311797">b</span><span class="op" id="2311798">,</span>&nbsp;<span class="ident" id="2311800">a</span>&nbsp;<span class="op" id="2311802">:=</span>&nbsp;<span class="ident" id="2311805">c</span><span class="op" id="2311806">.</span><span class="ident" id="2311807">RGBA</span><span class="op" id="2311811">(</span><span class="op" id="2311812">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311815">return</span>&nbsp;<span class="ident" id="2311822">RGBA64</span><span class="op" id="2311828">{</span><span class="builtintype" id="2311829">uint16</span><span class="op" id="2311835">(</span><span class="ident" id="2311836">r</span><span class="op" id="2311837">)</span><span class="op" id="2311838">,</span>&nbsp;<span class="builtintype" id="2311840">uint16</span><span class="op" id="2311846">(</span><span class="ident" id="2311847">g</span><span class="op" id="2311848">)</span><span class="op" id="2311849">,</span>&nbsp;<span class="builtintype" id="2311851">uint16</span><span class="op" id="2311857">(</span><span class="ident" id="2311858">b</span><span class="op" id="2311859">)</span><span class="op" id="2311860">,</span>&nbsp;<span class="builtintype" id="2311862">uint16</span><span class="op" id="2311868">(</span><span class="ident" id="2311869">a</span><span class="op" id="2311870">)</span><span class="op" id="2311871">}</span><br>
<span class="lineno"></span><span class="op" id="2311873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2311876">func</span>&nbsp;<span class="ident" id="2311881">nrgbaModel</span><span class="op" id="2311891">(</span><span class="ident" id="2311892">c</span>&nbsp;<span class="ident" id="2311894">Color</span><span class="op" id="2311899">)</span>&nbsp;<span class="ident" id="2311901">Color</span>&nbsp;<span class="op" id="2311907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311910">if</span>&nbsp;<span class="ident" id="2311913">_</span><span class="op" id="2311914">,</span>&nbsp;<span class="ident" id="2311916">ok</span>&nbsp;<span class="op" id="2311919">:=</span>&nbsp;<span class="ident" id="2311922">c</span><span class="op" id="2311923">.</span><span class="op" id="2311924">(</span><span class="ident" id="2311925">NRGBA</span><span class="op" id="2311930">)</span><span class="op" id="2311931">;</span>&nbsp;<span class="ident" id="2311933">ok</span>&nbsp;<span class="op" id="2311936">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311940">return</span>&nbsp;<span class="ident" id="2311947">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2311950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2311953">r</span><span class="op" id="2311954">,</span>&nbsp;<span class="ident" id="2311956">g</span><span class="op" id="2311957">,</span>&nbsp;<span class="ident" id="2311959">b</span><span class="op" id="2311960">,</span>&nbsp;<span class="ident" id="2311962">a</span>&nbsp;<span class="op" id="2311964">:=</span>&nbsp;<span class="ident" id="2311967">c</span><span class="op" id="2311968">.</span><span class="ident" id="2311969">RGBA</span><span class="op" id="2311973">(</span><span class="op" id="2311974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311977">if</span>&nbsp;<span class="ident" id="2311980">a</span>&nbsp;<span class="op" id="2311982">==</span>&nbsp;<span class="num" id="2311985">0xffff</span>&nbsp;<span class="op" id="2311992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2311996">return</span>&nbsp;<span class="ident" id="2312003">NRGBA</span><span class="op" id="2312008">{</span><span class="builtintype" id="2312009">uint8</span><span class="op" id="2312014">(</span><span class="ident" id="2312015">r</span>&nbsp;<span class="op" id="2312017">&gt;&gt;</span>&nbsp;<span class="num" id="2312020">8</span><span class="op" id="2312021">)</span><span class="op" id="2312022">,</span>&nbsp;<span class="builtintype" id="2312024">uint8</span><span class="op" id="2312029">(</span><span class="ident" id="2312030">g</span>&nbsp;<span class="op" id="2312032">&gt;&gt;</span>&nbsp;<span class="num" id="2312035">8</span><span class="op" id="2312036">)</span><span class="op" id="2312037">,</span>&nbsp;<span class="builtintype" id="2312039">uint8</span><span class="op" id="2312044">(</span><span class="ident" id="2312045">b</span>&nbsp;<span class="op" id="2312047">&gt;&gt;</span>&nbsp;<span class="num" id="2312050">8</span><span class="op" id="2312051">)</span><span class="op" id="2312052">,</span>&nbsp;<span class="num" id="2312054">0xff</span><span class="op" id="2312058">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312064">if</span>&nbsp;<span class="ident" id="2312067">a</span>&nbsp;<span class="op" id="2312069">==</span>&nbsp;<span class="num" id="2312072">0</span>&nbsp;<span class="op" id="2312074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312078">return</span>&nbsp;<span class="ident" id="2312085">NRGBA</span><span class="op" id="2312090">{</span><span class="num" id="2312091">0</span><span class="op" id="2312092">,</span>&nbsp;<span class="num" id="2312094">0</span><span class="op" id="2312095">,</span>&nbsp;<span class="num" id="2312097">0</span><span class="op" id="2312098">,</span>&nbsp;<span class="num" id="2312100">0</span><span class="op" id="2312101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2312107">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312208">r</span>&nbsp;<span class="op" id="2312210">=</span>&nbsp;<span class="op" id="2312212">(</span><span class="ident" id="2312213">r</span>&nbsp;<span class="op" id="2312215">*</span>&nbsp;<span class="num" id="2312217">0xffff</span><span class="op" id="2312223">)</span>&nbsp;<span class="op" id="2312225">/</span>&nbsp;<span class="ident" id="2312227">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312230">g</span>&nbsp;<span class="op" id="2312232">=</span>&nbsp;<span class="op" id="2312234">(</span><span class="ident" id="2312235">g</span>&nbsp;<span class="op" id="2312237">*</span>&nbsp;<span class="num" id="2312239">0xffff</span><span class="op" id="2312245">)</span>&nbsp;<span class="op" id="2312247">/</span>&nbsp;<span class="ident" id="2312249">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312252">b</span>&nbsp;<span class="op" id="2312254">=</span>&nbsp;<span class="op" id="2312256">(</span><span class="ident" id="2312257">b</span>&nbsp;<span class="op" id="2312259">*</span>&nbsp;<span class="num" id="2312261">0xffff</span><span class="op" id="2312267">)</span>&nbsp;<span class="op" id="2312269">/</span>&nbsp;<span class="ident" id="2312271">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312274">return</span>&nbsp;<span class="ident" id="2312281">NRGBA</span><span class="op" id="2312286">{</span><span class="builtintype" id="2312287">uint8</span><span class="op" id="2312292">(</span><span class="ident" id="2312293">r</span>&nbsp;<span class="op" id="2312295">&gt;&gt;</span>&nbsp;<span class="num" id="2312298">8</span><span class="op" id="2312299">)</span><span class="op" id="2312300">,</span>&nbsp;<span class="builtintype" id="2312302">uint8</span><span class="op" id="2312307">(</span><span class="ident" id="2312308">g</span>&nbsp;<span class="op" id="2312310">&gt;&gt;</span>&nbsp;<span class="num" id="2312313">8</span><span class="op" id="2312314">)</span><span class="op" id="2312315">,</span>&nbsp;<span class="builtintype" id="2312317">uint8</span><span class="op" id="2312322">(</span><span class="ident" id="2312323">b</span>&nbsp;<span class="op" id="2312325">&gt;&gt;</span>&nbsp;<span class="num" id="2312328">8</span><span class="op" id="2312329">)</span><span class="op" id="2312330">,</span>&nbsp;<span class="builtintype" id="2312332">uint8</span><span class="op" id="2312337">(</span><span class="ident" id="2312338">a</span>&nbsp;<span class="op" id="2312340">&gt;&gt;</span>&nbsp;<span class="num" id="2312343">8</span><span class="op" id="2312344">)</span><span class="op" id="2312345">}</span><br>
<span class="lineno"></span><span class="op" id="2312347">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="2312350">func</span>&nbsp;<span class="ident" id="2312355">nrgba64Model</span><span class="op" id="2312367">(</span><span class="ident" id="2312368">c</span>&nbsp;<span class="ident" id="2312370">Color</span><span class="op" id="2312375">)</span>&nbsp;<span class="ident" id="2312377">Color</span>&nbsp;<span class="op" id="2312383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312386">if</span>&nbsp;<span class="ident" id="2312389">_</span><span class="op" id="2312390">,</span>&nbsp;<span class="ident" id="2312392">ok</span>&nbsp;<span class="op" id="2312395">:=</span>&nbsp;<span class="ident" id="2312398">c</span><span class="op" id="2312399">.</span><span class="op" id="2312400">(</span><span class="ident" id="2312401">NRGBA64</span><span class="op" id="2312408">)</span><span class="op" id="2312409">;</span>&nbsp;<span class="ident" id="2312411">ok</span>&nbsp;<span class="op" id="2312414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312418">return</span>&nbsp;<span class="ident" id="2312425">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312428">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312431">r</span><span class="op" id="2312432">,</span>&nbsp;<span class="ident" id="2312434">g</span><span class="op" id="2312435">,</span>&nbsp;<span class="ident" id="2312437">b</span><span class="op" id="2312438">,</span>&nbsp;<span class="ident" id="2312440">a</span>&nbsp;<span class="op" id="2312442">:=</span>&nbsp;<span class="ident" id="2312445">c</span><span class="op" id="2312446">.</span><span class="ident" id="2312447">RGBA</span><span class="op" id="2312451">(</span><span class="op" id="2312452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312455">if</span>&nbsp;<span class="ident" id="2312458">a</span>&nbsp;<span class="op" id="2312460">==</span>&nbsp;<span class="num" id="2312463">0xffff</span>&nbsp;<span class="op" id="2312470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312474">return</span>&nbsp;<span class="ident" id="2312481">NRGBA64</span><span class="op" id="2312488">{</span><span class="builtintype" id="2312489">uint16</span><span class="op" id="2312495">(</span><span class="ident" id="2312496">r</span><span class="op" id="2312497">)</span><span class="op" id="2312498">,</span>&nbsp;<span class="builtintype" id="2312500">uint16</span><span class="op" id="2312506">(</span><span class="ident" id="2312507">g</span><span class="op" id="2312508">)</span><span class="op" id="2312509">,</span>&nbsp;<span class="builtintype" id="2312511">uint16</span><span class="op" id="2312517">(</span><span class="ident" id="2312518">b</span><span class="op" id="2312519">)</span><span class="op" id="2312520">,</span>&nbsp;<span class="num" id="2312522">0xffff</span><span class="op" id="2312528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312534">if</span>&nbsp;<span class="ident" id="2312537">a</span>&nbsp;<span class="op" id="2312539">==</span>&nbsp;<span class="num" id="2312542">0</span>&nbsp;<span class="op" id="2312544">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312548">return</span>&nbsp;<span class="ident" id="2312555">NRGBA64</span><span class="op" id="2312562">{</span><span class="num" id="2312563">0</span><span class="op" id="2312564">,</span>&nbsp;<span class="num" id="2312566">0</span><span class="op" id="2312567">,</span>&nbsp;<span class="num" id="2312569">0</span><span class="op" id="2312570">,</span>&nbsp;<span class="num" id="2312572">0</span><span class="op" id="2312573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2312579">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312680">r</span>&nbsp;<span class="op" id="2312682">=</span>&nbsp;<span class="op" id="2312684">(</span><span class="ident" id="2312685">r</span>&nbsp;<span class="op" id="2312687">*</span>&nbsp;<span class="num" id="2312689">0xffff</span><span class="op" id="2312695">)</span>&nbsp;<span class="op" id="2312697">/</span>&nbsp;<span class="ident" id="2312699">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312702">g</span>&nbsp;<span class="op" id="2312704">=</span>&nbsp;<span class="op" id="2312706">(</span><span class="ident" id="2312707">g</span>&nbsp;<span class="op" id="2312709">*</span>&nbsp;<span class="num" id="2312711">0xffff</span><span class="op" id="2312717">)</span>&nbsp;<span class="op" id="2312719">/</span>&nbsp;<span class="ident" id="2312721">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312724">b</span>&nbsp;<span class="op" id="2312726">=</span>&nbsp;<span class="op" id="2312728">(</span><span class="ident" id="2312729">b</span>&nbsp;<span class="op" id="2312731">*</span>&nbsp;<span class="num" id="2312733">0xffff</span><span class="op" id="2312739">)</span>&nbsp;<span class="op" id="2312741">/</span>&nbsp;<span class="ident" id="2312743">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312746">return</span>&nbsp;<span class="ident" id="2312753">NRGBA64</span><span class="op" id="2312760">{</span><span class="builtintype" id="2312761">uint16</span><span class="op" id="2312767">(</span><span class="ident" id="2312768">r</span><span class="op" id="2312769">)</span><span class="op" id="2312770">,</span>&nbsp;<span class="builtintype" id="2312772">uint16</span><span class="op" id="2312778">(</span><span class="ident" id="2312779">g</span><span class="op" id="2312780">)</span><span class="op" id="2312781">,</span>&nbsp;<span class="builtintype" id="2312783">uint16</span><span class="op" id="2312789">(</span><span class="ident" id="2312790">b</span><span class="op" id="2312791">)</span><span class="op" id="2312792">,</span>&nbsp;<span class="builtintype" id="2312794">uint16</span><span class="op" id="2312800">(</span><span class="ident" id="2312801">a</span><span class="op" id="2312802">)</span><span class="op" id="2312803">}</span><br>
<span class="lineno"></span><span class="op" id="2312805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2312808">func</span>&nbsp;<span class="ident" id="2312813">alphaModel</span><span class="op" id="2312823">(</span><span class="ident" id="2312824">c</span>&nbsp;<span class="ident" id="2312826">Color</span><span class="op" id="2312831">)</span>&nbsp;<span class="ident" id="2312833">Color</span>&nbsp;<span class="op" id="2312839">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312842">if</span>&nbsp;<span class="ident" id="2312845">_</span><span class="op" id="2312846">,</span>&nbsp;<span class="ident" id="2312848">ok</span>&nbsp;<span class="op" id="2312851">:=</span>&nbsp;<span class="ident" id="2312854">c</span><span class="op" id="2312855">.</span><span class="op" id="2312856">(</span><span class="ident" id="2312857">Alpha</span><span class="op" id="2312862">)</span><span class="op" id="2312863">;</span>&nbsp;<span class="ident" id="2312865">ok</span>&nbsp;<span class="op" id="2312868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312872">return</span>&nbsp;<span class="ident" id="2312879">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2312882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2312885">_</span><span class="op" id="2312886">,</span>&nbsp;<span class="ident" id="2312888">_</span><span class="op" id="2312889">,</span>&nbsp;<span class="ident" id="2312891">_</span><span class="op" id="2312892">,</span>&nbsp;<span class="ident" id="2312894">a</span>&nbsp;<span class="op" id="2312896">:=</span>&nbsp;<span class="ident" id="2312899">c</span><span class="op" id="2312900">.</span><span class="ident" id="2312901">RGBA</span><span class="op" id="2312905">(</span><span class="op" id="2312906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312909">return</span>&nbsp;<span class="ident" id="2312916">Alpha</span><span class="op" id="2312921">{</span><span class="builtintype" id="2312922">uint8</span><span class="op" id="2312927">(</span><span class="ident" id="2312928">a</span>&nbsp;<span class="op" id="2312930">&gt;&gt;</span>&nbsp;<span class="num" id="2312933">8</span><span class="op" id="2312934">)</span><span class="op" id="2312935">}</span><br>
<span class="lineno">225</span><span class="op" id="2312937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2312940">func</span>&nbsp;<span class="ident" id="2312945">alpha16Model</span><span class="op" id="2312957">(</span><span class="ident" id="2312958">c</span>&nbsp;<span class="ident" id="2312960">Color</span><span class="op" id="2312965">)</span>&nbsp;<span class="ident" id="2312967">Color</span>&nbsp;<span class="op" id="2312973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2312976">if</span>&nbsp;<span class="ident" id="2312979">_</span><span class="op" id="2312980">,</span>&nbsp;<span class="ident" id="2312982">ok</span>&nbsp;<span class="op" id="2312985">:=</span>&nbsp;<span class="ident" id="2312988">c</span><span class="op" id="2312989">.</span><span class="op" id="2312990">(</span><span class="ident" id="2312991">Alpha16</span><span class="op" id="2312998">)</span><span class="op" id="2312999">;</span>&nbsp;<span class="ident" id="2313001">ok</span>&nbsp;<span class="op" id="2313004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313008">return</span>&nbsp;<span class="ident" id="2313015">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2313018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313021">_</span><span class="op" id="2313022">,</span>&nbsp;<span class="ident" id="2313024">_</span><span class="op" id="2313025">,</span>&nbsp;<span class="ident" id="2313027">_</span><span class="op" id="2313028">,</span>&nbsp;<span class="ident" id="2313030">a</span>&nbsp;<span class="op" id="2313032">:=</span>&nbsp;<span class="ident" id="2313035">c</span><span class="op" id="2313036">.</span><span class="ident" id="2313037">RGBA</span><span class="op" id="2313041">(</span><span class="op" id="2313042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313045">return</span>&nbsp;<span class="ident" id="2313052">Alpha16</span><span class="op" id="2313059">{</span><span class="builtintype" id="2313060">uint16</span><span class="op" id="2313066">(</span><span class="ident" id="2313067">a</span><span class="op" id="2313068">)</span><span class="op" id="2313069">}</span><br>
<span class="lineno"></span><span class="op" id="2313071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2313074">func</span>&nbsp;<span class="ident" id="2313079">grayModel</span><span class="op" id="2313088">(</span><span class="ident" id="2313089">c</span>&nbsp;<span class="ident" id="2313091">Color</span><span class="op" id="2313096">)</span>&nbsp;<span class="ident" id="2313098">Color</span>&nbsp;<span class="op" id="2313104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313107">if</span>&nbsp;<span class="ident" id="2313110">_</span><span class="op" id="2313111">,</span>&nbsp;<span class="ident" id="2313113">ok</span>&nbsp;<span class="op" id="2313116">:=</span>&nbsp;<span class="ident" id="2313119">c</span><span class="op" id="2313120">.</span><span class="op" id="2313121">(</span><span class="ident" id="2313122">Gray</span><span class="op" id="2313126">)</span><span class="op" id="2313127">;</span>&nbsp;<span class="ident" id="2313129">ok</span>&nbsp;<span class="op" id="2313132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313136">return</span>&nbsp;<span class="ident" id="2313143">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2313146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313149">r</span><span class="op" id="2313150">,</span>&nbsp;<span class="ident" id="2313152">g</span><span class="op" id="2313153">,</span>&nbsp;<span class="ident" id="2313155">b</span><span class="op" id="2313156">,</span>&nbsp;<span class="ident" id="2313158">_</span>&nbsp;<span class="op" id="2313160">:=</span>&nbsp;<span class="ident" id="2313163">c</span><span class="op" id="2313164">.</span><span class="ident" id="2313165">RGBA</span><span class="op" id="2313169">(</span><span class="op" id="2313170">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313173">y</span>&nbsp;<span class="op" id="2313175">:=</span>&nbsp;<span class="op" id="2313178">(</span><span class="num" id="2313179">299</span><span class="op" id="2313182">*</span><span class="ident" id="2313183">r</span>&nbsp;<span class="op" id="2313185">+</span>&nbsp;<span class="num" id="2313187">587</span><span class="op" id="2313190">*</span><span class="ident" id="2313191">g</span>&nbsp;<span class="op" id="2313193">+</span>&nbsp;<span class="num" id="2313195">114</span><span class="op" id="2313198">*</span><span class="ident" id="2313199">b</span>&nbsp;<span class="op" id="2313201">+</span>&nbsp;<span class="num" id="2313203">500</span><span class="op" id="2313206">)</span>&nbsp;<span class="op" id="2313208">/</span>&nbsp;<span class="num" id="2313210">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313216">return</span>&nbsp;<span class="ident" id="2313223">Gray</span><span class="op" id="2313227">{</span><span class="builtintype" id="2313228">uint8</span><span class="op" id="2313233">(</span><span class="ident" id="2313234">y</span>&nbsp;<span class="op" id="2313236">&gt;&gt;</span>&nbsp;<span class="num" id="2313239">8</span><span class="op" id="2313240">)</span><span class="op" id="2313241">}</span><br>
<span class="lineno"></span><span class="op" id="2313243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2313246">func</span>&nbsp;<span class="ident" id="2313251">gray16Model</span><span class="op" id="2313262">(</span><span class="ident" id="2313263">c</span>&nbsp;<span class="ident" id="2313265">Color</span><span class="op" id="2313270">)</span>&nbsp;<span class="ident" id="2313272">Color</span>&nbsp;<span class="op" id="2313278">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313281">if</span>&nbsp;<span class="ident" id="2313284">_</span><span class="op" id="2313285">,</span>&nbsp;<span class="ident" id="2313287">ok</span>&nbsp;<span class="op" id="2313290">:=</span>&nbsp;<span class="ident" id="2313293">c</span><span class="op" id="2313294">.</span><span class="op" id="2313295">(</span><span class="ident" id="2313296">Gray16</span><span class="op" id="2313302">)</span><span class="op" id="2313303">;</span>&nbsp;<span class="ident" id="2313305">ok</span>&nbsp;<span class="op" id="2313308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313312">return</span>&nbsp;<span class="ident" id="2313319">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2313322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313325">r</span><span class="op" id="2313326">,</span>&nbsp;<span class="ident" id="2313328">g</span><span class="op" id="2313329">,</span>&nbsp;<span class="ident" id="2313331">b</span><span class="op" id="2313332">,</span>&nbsp;<span class="ident" id="2313334">_</span>&nbsp;<span class="op" id="2313336">:=</span>&nbsp;<span class="ident" id="2313339">c</span><span class="op" id="2313340">.</span><span class="ident" id="2313341">RGBA</span><span class="op" id="2313345">(</span><span class="op" id="2313346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313349">y</span>&nbsp;<span class="op" id="2313351">:=</span>&nbsp;<span class="op" id="2313354">(</span><span class="num" id="2313355">299</span><span class="op" id="2313358">*</span><span class="ident" id="2313359">r</span>&nbsp;<span class="op" id="2313361">+</span>&nbsp;<span class="num" id="2313363">587</span><span class="op" id="2313366">*</span><span class="ident" id="2313367">g</span>&nbsp;<span class="op" id="2313369">+</span>&nbsp;<span class="num" id="2313371">114</span><span class="op" id="2313374">*</span><span class="ident" id="2313375">b</span>&nbsp;<span class="op" id="2313377">+</span>&nbsp;<span class="num" id="2313379">500</span><span class="op" id="2313382">)</span>&nbsp;<span class="op" id="2313384">/</span>&nbsp;<span class="num" id="2313386">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313392">return</span>&nbsp;<span class="ident" id="2313399">Gray16</span><span class="op" id="2313405">{</span><span class="builtintype" id="2313406">uint16</span><span class="op" id="2313412">(</span><span class="ident" id="2313413">y</span><span class="op" id="2313414">)</span><span class="op" id="2313415">}</span><br>
<span class="lineno"></span><span class="op" id="2313417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2313420">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="2313455">type</span>&nbsp;<span class="ident" id="2313460">Palette</span>&nbsp;<span class="op" id="2313468">[</span><span class="op" id="2313469">]</span><span class="ident" id="2313470">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2313477">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2313553">func</span>&nbsp;<span class="op" id="2313558">(</span><span class="ident" id="2313559">p</span>&nbsp;<span class="ident" id="2313561">Palette</span><span class="op" id="2313568">)</span>&nbsp;<span class="ident" id="2313570">Convert</span><span class="op" id="2313577">(</span><span class="ident" id="2313578">c</span>&nbsp;<span class="ident" id="2313580">Color</span><span class="op" id="2313585">)</span>&nbsp;<span class="ident" id="2313587">Color</span>&nbsp;<span class="op" id="2313593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313596">if</span>&nbsp;<span class="builtinfunc" id="2313599">len</span><span class="op" id="2313602">(</span><span class="ident" id="2313603">p</span><span class="op" id="2313604">)</span>&nbsp;<span class="op" id="2313606">==</span>&nbsp;<span class="num" id="2313609">0</span>&nbsp;<span class="op" id="2313611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313615">return</span>&nbsp;<span class="builtintype" id="2313622">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2313627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313630">return</span>&nbsp;<span class="ident" id="2313637">p</span><span class="op" id="2313638">[</span><span class="ident" id="2313639">p</span><span class="op" id="2313640">.</span><span class="ident" id="2313641">Index</span><span class="op" id="2313646">(</span><span class="ident" id="2313647">c</span><span class="op" id="2313648">)</span><span class="op" id="2313649">]</span><br>
<span class="lineno"></span><span class="op" id="2313651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2313654">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="2313728">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2313744">func</span>&nbsp;<span class="op" id="2313749">(</span><span class="ident" id="2313750">p</span>&nbsp;<span class="ident" id="2313752">Palette</span><span class="op" id="2313759">)</span>&nbsp;<span class="ident" id="2313761">Index</span><span class="op" id="2313766">(</span><span class="ident" id="2313767">c</span>&nbsp;<span class="ident" id="2313769">Color</span><span class="op" id="2313774">)</span>&nbsp;<span class="builtintype" id="2313776">int</span>&nbsp;<span class="op" id="2313780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2313783">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313850">cr</span><span class="op" id="2313852">,</span>&nbsp;<span class="ident" id="2313854">cg</span><span class="op" id="2313856">,</span>&nbsp;<span class="ident" id="2313858">cb</span><span class="op" id="2313860">,</span>&nbsp;<span class="ident" id="2313862">_</span>&nbsp;<span class="op" id="2313864">:=</span>&nbsp;<span class="ident" id="2313867">c</span><span class="op" id="2313868">.</span><span class="ident" id="2313869">RGBA</span><span class="op" id="2313873">(</span><span class="op" id="2313874">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313877">ret</span><span class="op" id="2313880">,</span>&nbsp;<span class="ident" id="2313882">bestSSD</span>&nbsp;<span class="op" id="2313890">:=</span>&nbsp;<span class="num" id="2313893">0</span><span class="op" id="2313894">,</span>&nbsp;<span class="builtintype" id="2313896">uint32</span><span class="op" id="2313902">(</span><span class="num" id="2313903">1</span><span class="op" id="2313904">&lt;&lt;</span><span class="num" id="2313906">32</span><span class="op" id="2313908">-</span><span class="num" id="2313909">1</span><span class="op" id="2313910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2313913">for</span>&nbsp;<span class="ident" id="2313917">i</span><span class="op" id="2313918">,</span>&nbsp;<span class="ident" id="2313920">v</span>&nbsp;<span class="op" id="2313922">:=</span>&nbsp;<span class="keyword" id="2313925">range</span>&nbsp;<span class="ident" id="2313931">p</span>&nbsp;<span class="op" id="2313933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2313937">vr</span><span class="op" id="2313939">,</span>&nbsp;<span class="ident" id="2313941">vg</span><span class="op" id="2313943">,</span>&nbsp;<span class="ident" id="2313945">vb</span><span class="op" id="2313947">,</span>&nbsp;<span class="ident" id="2313949">_</span>&nbsp;<span class="op" id="2313951">:=</span>&nbsp;<span class="ident" id="2313954">v</span><span class="op" id="2313955">.</span><span class="ident" id="2313956">RGBA</span><span class="op" id="2313960">(</span><span class="op" id="2313961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2313965">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2314026">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314055">delta</span>&nbsp;<span class="op" id="2314061">:=</span>&nbsp;<span class="op" id="2314064">(</span><span class="builtintype" id="2314065">int32</span><span class="op" id="2314070">(</span><span class="ident" id="2314071">cr</span><span class="op" id="2314073">)</span>&nbsp;<span class="op" id="2314075">-</span>&nbsp;<span class="builtintype" id="2314077">int32</span><span class="op" id="2314082">(</span><span class="ident" id="2314083">vr</span><span class="op" id="2314085">)</span><span class="op" id="2314086">)</span>&nbsp;<span class="op" id="2314088">&gt;&gt;</span>&nbsp;<span class="num" id="2314091">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314095">ssd</span>&nbsp;<span class="op" id="2314099">:=</span>&nbsp;<span class="builtintype" id="2314102">uint32</span><span class="op" id="2314108">(</span><span class="ident" id="2314109">delta</span>&nbsp;<span class="op" id="2314115">*</span>&nbsp;<span class="ident" id="2314117">delta</span><span class="op" id="2314122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314126">delta</span>&nbsp;<span class="op" id="2314132">=</span>&nbsp;<span class="op" id="2314134">(</span><span class="builtintype" id="2314135">int32</span><span class="op" id="2314140">(</span><span class="ident" id="2314141">cg</span><span class="op" id="2314143">)</span>&nbsp;<span class="op" id="2314145">-</span>&nbsp;<span class="builtintype" id="2314147">int32</span><span class="op" id="2314152">(</span><span class="ident" id="2314153">vg</span><span class="op" id="2314155">)</span><span class="op" id="2314156">)</span>&nbsp;<span class="op" id="2314158">&gt;&gt;</span>&nbsp;<span class="num" id="2314161">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314165">ssd</span>&nbsp;<span class="op" id="2314169">+=</span>&nbsp;<span class="builtintype" id="2314172">uint32</span><span class="op" id="2314178">(</span><span class="ident" id="2314179">delta</span>&nbsp;<span class="op" id="2314185">*</span>&nbsp;<span class="ident" id="2314187">delta</span><span class="op" id="2314192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314196">delta</span>&nbsp;<span class="op" id="2314202">=</span>&nbsp;<span class="op" id="2314204">(</span><span class="builtintype" id="2314205">int32</span><span class="op" id="2314210">(</span><span class="ident" id="2314211">cb</span><span class="op" id="2314213">)</span>&nbsp;<span class="op" id="2314215">-</span>&nbsp;<span class="builtintype" id="2314217">int32</span><span class="op" id="2314222">(</span><span class="ident" id="2314223">vb</span><span class="op" id="2314225">)</span><span class="op" id="2314226">)</span>&nbsp;<span class="op" id="2314228">&gt;&gt;</span>&nbsp;<span class="num" id="2314231">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314235">ssd</span>&nbsp;<span class="op" id="2314239">+=</span>&nbsp;<span class="builtintype" id="2314242">uint32</span><span class="op" id="2314248">(</span><span class="ident" id="2314249">delta</span>&nbsp;<span class="op" id="2314255">*</span>&nbsp;<span class="ident" id="2314257">delta</span><span class="op" id="2314262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2314266">if</span>&nbsp;<span class="ident" id="2314269">ssd</span>&nbsp;<span class="op" id="2314273">&lt;</span>&nbsp;<span class="ident" id="2314275">bestSSD</span>&nbsp;<span class="op" id="2314283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2314288">if</span>&nbsp;<span class="ident" id="2314291">ssd</span>&nbsp;<span class="op" id="2314295">==</span>&nbsp;<span class="num" id="2314298">0</span>&nbsp;<span class="op" id="2314300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2314306">return</span>&nbsp;<span class="ident" id="2314313">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2314318">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314323">ret</span><span class="op" id="2314326">,</span>&nbsp;<span class="ident" id="2314328">bestSSD</span>&nbsp;<span class="op" id="2314336">=</span>&nbsp;<span class="ident" id="2314338">i</span><span class="op" id="2314339">,</span>&nbsp;<span class="ident" id="2314341">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2314347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2314350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2314353">return</span>&nbsp;<span class="ident" id="2314360">ret</span><br>
<span class="lineno"></span><span class="op" id="2314364">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="2314367">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="2314387">var</span>&nbsp;<span class="op" id="2314391">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314394">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2314406">=</span>&nbsp;<span class="ident" id="2314408">Gray16</span><span class="op" id="2314414">{</span><span class="num" id="2314415">0</span><span class="op" id="2314416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314419">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2314431">=</span>&nbsp;<span class="ident" id="2314433">Gray16</span><span class="op" id="2314439">{</span><span class="num" id="2314440">0xffff</span><span class="op" id="2314446">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314449">Transparent</span>&nbsp;<span class="op" id="2314461">=</span>&nbsp;<span class="ident" id="2314463">Alpha16</span><span class="op" id="2314470">{</span><span class="num" id="2314471">0</span><span class="op" id="2314472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2314475">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2314487">=</span>&nbsp;<span class="ident" id="2314489">Alpha16</span><span class="op" id="2314496">{</span><span class="num" id="2314497">0xffff</span><span class="op" id="2314503">}</span><br>
<span class="lineno"></span><span class="op" id="2314505">)</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
