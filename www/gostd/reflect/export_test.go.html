<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html" class="current">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6798776">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6798832">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6798886">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6798937">package</span>&nbsp;<span class="ident" id="6798945">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6798954">//&nbsp;MakeRO&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;read-only&nbsp;flag&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6799013">func</span>&nbsp;<span class="ident" id="6799018">MakeRO</span><span class="op" id="6799024">(</span><span class="ident" id="6799025">v</span>&nbsp;<span class="ident" id="6799027">Value</span><span class="op" id="6799032">)</span>&nbsp;<span class="ident" id="6799034">Value</span>&nbsp;<span class="op" id="6799040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799043">v</span><span class="op" id="6799044">.</span><span class="ident" id="6799045">flag</span>&nbsp;<span class="op" id="6799050">|=</span>&nbsp;<span class="ident" id="6799053">flagRO</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799061">return</span>&nbsp;<span class="ident" id="6799068">v</span><br>
<span class="lineno"></span><span class="op" id="6799070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6799073">//&nbsp;IsRO&nbsp;reports&nbsp;whether&nbsp;v&#39;s&nbsp;read-only&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6799124">func</span>&nbsp;<span class="ident" id="6799129">IsRO</span><span class="op" id="6799133">(</span><span class="ident" id="6799134">v</span>&nbsp;<span class="ident" id="6799136">Value</span><span class="op" id="6799141">)</span>&nbsp;<span class="builtintype" id="6799143">bool</span>&nbsp;<span class="op" id="6799148">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799151">return</span>&nbsp;<span class="ident" id="6799158">v</span><span class="op" id="6799159">.</span><span class="ident" id="6799160">flag</span><span class="op" id="6799164">&amp;</span><span class="ident" id="6799165">flagRO</span>&nbsp;<span class="op" id="6799172">!=</span>&nbsp;<span class="num" id="6799175">0</span><br>
<span class="lineno"></span><span class="op" id="6799177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6799180">var</span>&nbsp;<span class="ident" id="6799184">ArrayOf</span>&nbsp;<span class="op" id="6799192">=</span>&nbsp;<span class="ident" id="6799194">arrayOf</span><br>
<span class="lineno"></span><span class="keyword" id="6799202">var</span>&nbsp;<span class="ident" id="6799206">CallGC</span>&nbsp;<span class="op" id="6799213">=</span>&nbsp;<span class="op" id="6799215">&amp;</span><span class="ident" id="6799216">callGC</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6799224">const</span>&nbsp;<span class="ident" id="6799230">PtrSize</span>&nbsp;<span class="op" id="6799238">=</span>&nbsp;<span class="ident" id="6799240">ptrSize</span><br>
<span class="lineno"></span><span class="keyword" id="6799248">const</span>&nbsp;<span class="ident" id="6799254">BitsPointer</span>&nbsp;<span class="op" id="6799266">=</span>&nbsp;<span class="ident" id="6799268">bitsPointer</span><br>
<span class="lineno"></span><span class="keyword" id="6799280">const</span>&nbsp;<span class="ident" id="6799286">BitsScalar</span>&nbsp;<span class="op" id="6799297">=</span>&nbsp;<span class="ident" id="6799299">bitsScalar</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6799311">func</span>&nbsp;<span class="ident" id="6799316">FuncLayout</span><span class="op" id="6799326">(</span><span class="ident" id="6799327">t</span>&nbsp;<span class="ident" id="6799329">Type</span><span class="op" id="6799333">,</span>&nbsp;<span class="ident" id="6799335">rcvr</span>&nbsp;<span class="ident" id="6799340">Type</span><span class="op" id="6799344">)</span>&nbsp;<span class="op" id="6799346">(</span><span class="ident" id="6799347">frametype</span>&nbsp;<span class="ident" id="6799357">Type</span><span class="op" id="6799361">,</span>&nbsp;<span class="ident" id="6799363">argSize</span><span class="op" id="6799370">,</span>&nbsp;<span class="ident" id="6799372">retOffset</span>&nbsp;<span class="builtintype" id="6799382">uintptr</span><span class="op" id="6799389">,</span>&nbsp;<span class="ident" id="6799391">stack</span>&nbsp;<span class="op" id="6799397">[</span><span class="op" id="6799398">]</span><span class="builtintype" id="6799399">byte</span><span class="op" id="6799403">)</span>&nbsp;<span class="op" id="6799405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799408">var</span>&nbsp;<span class="ident" id="6799412">ft</span>&nbsp;<span class="op" id="6799415">*</span><span class="ident" id="6799416">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799423">var</span>&nbsp;<span class="ident" id="6799427">s</span>&nbsp;<span class="op" id="6799429">*</span><span class="ident" id="6799430">bitVector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799441">if</span>&nbsp;<span class="ident" id="6799444">rcvr</span>&nbsp;<span class="op" id="6799449">!=</span>&nbsp;<span class="ident" id="6799452">nil</span>&nbsp;<span class="op" id="6799456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799460">ft</span><span class="op" id="6799462">,</span>&nbsp;<span class="ident" id="6799464">argSize</span><span class="op" id="6799471">,</span>&nbsp;<span class="ident" id="6799473">retOffset</span><span class="op" id="6799482">,</span>&nbsp;<span class="ident" id="6799484">s</span>&nbsp;<span class="op" id="6799486">=</span>&nbsp;<span class="ident" id="6799488">funcLayout</span><span class="op" id="6799498">(</span><span class="ident" id="6799499">t</span><span class="op" id="6799500">.</span><span class="op" id="6799501">(</span><span class="op" id="6799502">*</span><span class="ident" id="6799503">rtype</span><span class="op" id="6799508">)</span><span class="op" id="6799509">,</span>&nbsp;<span class="ident" id="6799511">rcvr</span><span class="op" id="6799515">.</span><span class="op" id="6799516">(</span><span class="op" id="6799517">*</span><span class="ident" id="6799518">rtype</span><span class="op" id="6799523">)</span><span class="op" id="6799524">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799527">}</span>&nbsp;<span class="keyword" id="6799529">else</span>&nbsp;<span class="op" id="6799534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799538">ft</span><span class="op" id="6799540">,</span>&nbsp;<span class="ident" id="6799542">argSize</span><span class="op" id="6799549">,</span>&nbsp;<span class="ident" id="6799551">retOffset</span><span class="op" id="6799560">,</span>&nbsp;<span class="ident" id="6799562">s</span>&nbsp;<span class="op" id="6799564">=</span>&nbsp;<span class="ident" id="6799566">funcLayout</span><span class="op" id="6799576">(</span><span class="ident" id="6799577">t</span><span class="op" id="6799578">.</span><span class="op" id="6799579">(</span><span class="op" id="6799580">*</span><span class="ident" id="6799581">rtype</span><span class="op" id="6799586">)</span><span class="op" id="6799587">,</span>&nbsp;<span class="ident" id="6799589">nil</span><span class="op" id="6799592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799598">frametype</span>&nbsp;<span class="op" id="6799608">=</span>&nbsp;<span class="ident" id="6799610">ft</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799614">for</span>&nbsp;<span class="ident" id="6799618">i</span>&nbsp;<span class="op" id="6799620">:=</span>&nbsp;<span class="builtintype" id="6799623">uint32</span><span class="op" id="6799629">(</span><span class="num" id="6799630">0</span><span class="op" id="6799631">)</span><span class="op" id="6799632">;</span>&nbsp;<span class="ident" id="6799634">i</span>&nbsp;<span class="op" id="6799636">&lt;</span>&nbsp;<span class="ident" id="6799638">s</span><span class="op" id="6799639">.</span><span class="ident" id="6799640">n</span><span class="op" id="6799641">;</span>&nbsp;<span class="ident" id="6799643">i</span>&nbsp;<span class="op" id="6799645">+=</span>&nbsp;<span class="num" id="6799648">2</span>&nbsp;<span class="op" id="6799650">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6799654">stack</span>&nbsp;<span class="op" id="6799660">=</span>&nbsp;<span class="builtinfunc" id="6799662">append</span><span class="op" id="6799668">(</span><span class="ident" id="6799669">stack</span><span class="op" id="6799674">,</span>&nbsp;<span class="ident" id="6799676">s</span><span class="op" id="6799677">.</span><span class="ident" id="6799678">data</span><span class="op" id="6799682">[</span><span class="ident" id="6799683">i</span><span class="op" id="6799684">/</span><span class="num" id="6799685">8</span><span class="op" id="6799686">]</span><span class="op" id="6799687">&gt;&gt;</span><span class="op" id="6799689">(</span><span class="ident" id="6799690">i</span><span class="op" id="6799691">%</span><span class="num" id="6799692">8</span><span class="op" id="6799693">)</span><span class="op" id="6799694">&amp;</span><span class="num" id="6799695">3</span><span class="op" id="6799696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6799699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6799702">return</span><br>
<span class="lineno"></span><span class="op" id="6799709">}</span>
</div>
</body>
</html>
