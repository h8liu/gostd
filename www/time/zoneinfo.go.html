<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1614413">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1614468">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1614522">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1614573">package</span>&nbsp;<span class="ident" id="1614581">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1614587">import</span>&nbsp;<span class="op" id="1614594">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1614597">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1614605">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="1614615">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1614618">//&nbsp;A&nbsp;Location&nbsp;maps&nbsp;time&nbsp;instants&nbsp;to&nbsp;the&nbsp;zone&nbsp;in&nbsp;use&nbsp;at&nbsp;that&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="1614684">//&nbsp;Typically,&nbsp;the&nbsp;Location&nbsp;represents&nbsp;the&nbsp;collection&nbsp;of&nbsp;time&nbsp;offsets</span><br>
<span class="lineno"></span><span class="comment" id="1614753">//&nbsp;in&nbsp;use&nbsp;in&nbsp;a&nbsp;geographical&nbsp;area,&nbsp;such&nbsp;as&nbsp;CEST&nbsp;and&nbsp;CET&nbsp;for&nbsp;central&nbsp;Europe.</span><br>
<span class="lineno">15</span><span class="keyword" id="1614828">type</span>&nbsp;<span class="ident" id="1614833">Location</span>&nbsp;<span class="keyword" id="1614842">struct</span>&nbsp;<span class="op" id="1614849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1614852">name</span>&nbsp;<span class="builtintype" id="1614857">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1614865">zone</span>&nbsp;<span class="op" id="1614870">[</span><span class="op" id="1614871">]</span><span class="ident" id="1614872"><a href="/time/zoneinfo.go.html#1615412">zone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1614878">tx</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1614883">[</span><span class="op" id="1614884">]</span><span class="ident" id="1614885"><a href="/time/zoneinfo.go.html#1615625">zoneTrans</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1614897">//&nbsp;Most&nbsp;lookups&nbsp;will&nbsp;be&nbsp;for&nbsp;the&nbsp;current&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1614944">//&nbsp;To&nbsp;avoid&nbsp;the&nbsp;binary&nbsp;search&nbsp;through&nbsp;tx,&nbsp;keep&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1614994">//&nbsp;static&nbsp;one-element&nbsp;cache&nbsp;that&nbsp;gives&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1615046">//&nbsp;zone&nbsp;for&nbsp;the&nbsp;time&nbsp;when&nbsp;the&nbsp;Location&nbsp;was&nbsp;created.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1615099">//&nbsp;if&nbsp;cacheStart&nbsp;&lt;=&nbsp;t&nbsp;&lt;=&nbsp;cacheEnd,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1615135">//&nbsp;lookup&nbsp;can&nbsp;return&nbsp;cacheZone.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1615168">//&nbsp;The&nbsp;units&nbsp;for&nbsp;cacheStart&nbsp;and&nbsp;cacheEnd&nbsp;are&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1615222">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC,&nbsp;to&nbsp;match&nbsp;the&nbsp;argument</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1615275">//&nbsp;to&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615290">cacheStart</span>&nbsp;<span class="ident" id="1615301">int64</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615308">cacheEnd</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1615319">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615326">cacheZone</span>&nbsp;&nbsp;<span class="op" id="1615337">*</span><span class="ident" id="1615338"><a href="/time/zoneinfo.go.html#1615412">zone</a></span><br>
<span class="lineno"></span><span class="op" id="1615343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1615346">//&nbsp;A&nbsp;zone&nbsp;represents&nbsp;a&nbsp;single&nbsp;time&nbsp;zone&nbsp;such&nbsp;as&nbsp;CEST&nbsp;or&nbsp;CET.</span><br>
<span class="lineno">35</span><span class="keyword" id="1615407">type</span>&nbsp;<span class="ident" id="1615412">zone</span>&nbsp;<span class="keyword" id="1615417">struct</span>&nbsp;<span class="op" id="1615424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615427">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1615434">string</span>&nbsp;<span class="comment" id="1615441">//&nbsp;abbreviated&nbsp;name,&nbsp;&#34;CET&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615469">offset</span>&nbsp;<span class="builtintype" id="1615476">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1615483">//&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615507">isDST</span>&nbsp;&nbsp;<span class="builtintype" id="1615514">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1615521">//&nbsp;is&nbsp;this&nbsp;zone&nbsp;Daylight&nbsp;Savings&nbsp;Time?</span><br>
<span class="lineno"></span><span class="op" id="1615560">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="1615563">//&nbsp;A&nbsp;zoneTrans&nbsp;represents&nbsp;a&nbsp;single&nbsp;time&nbsp;zone&nbsp;transition.</span><br>
<span class="lineno"></span><span class="keyword" id="1615620">type</span>&nbsp;<span class="ident" id="1615625">zoneTrans</span>&nbsp;<span class="keyword" id="1615635">struct</span>&nbsp;<span class="op" id="1615642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615645">when</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1615658">int64</span>&nbsp;<span class="comment" id="1615664">//&nbsp;transition&nbsp;time,&nbsp;in&nbsp;seconds&nbsp;since&nbsp;1970&nbsp;GMT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615711">index</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1615724">uint8</span>&nbsp;<span class="comment" id="1615730">//&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;zone&nbsp;that&nbsp;goes&nbsp;into&nbsp;effect&nbsp;at&nbsp;that&nbsp;time</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615791">isstd</span><span class="op" id="1615796">,</span>&nbsp;<span class="ident" id="1615798">isutc</span>&nbsp;<span class="builtintype" id="1615804">bool</span>&nbsp;&nbsp;<span class="comment" id="1615810">//&nbsp;ignored&nbsp;-&nbsp;no&nbsp;idea&nbsp;what&nbsp;these&nbsp;mean</span><br>
<span class="lineno"></span><span class="op" id="1615847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1615850">//&nbsp;alpha&nbsp;and&nbsp;omega&nbsp;are&nbsp;the&nbsp;beginning&nbsp;and&nbsp;end&nbsp;of&nbsp;time&nbsp;for&nbsp;zone</span><br>
<span class="lineno"></span><span class="comment" id="1615912">//&nbsp;transitions.</span><br>
<span class="lineno">50</span><span class="keyword" id="1615928">const</span>&nbsp;<span class="op" id="1615934">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615937">alpha</span>&nbsp;<span class="op" id="1615943">=</span>&nbsp;<span class="op" id="1615945">-</span><span class="num" id="1615946">1</span>&nbsp;<span class="op" id="1615948">&lt;&lt;</span>&nbsp;<span class="num" id="1615951">63</span>&nbsp;&nbsp;<span class="comment" id="1615955">//&nbsp;math.MinInt64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1615973">omega</span>&nbsp;<span class="op" id="1615979">=</span>&nbsp;<span class="num" id="1615981">1</span><span class="op" id="1615982">&lt;&lt;</span><span class="num" id="1615984">63</span>&nbsp;<span class="op" id="1615987">-</span>&nbsp;<span class="num" id="1615989">1</span>&nbsp;<span class="comment" id="1615991">//&nbsp;math.MaxInt64</span><br>
<span class="lineno"></span><span class="op" id="1616008">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="1616011">//&nbsp;UTC&nbsp;represents&nbsp;Universal&nbsp;Coordinated&nbsp;Time&nbsp;(UTC).</span><br>
<span class="lineno"></span><span class="keyword" id="1616063">var</span>&nbsp;<span class="ident" id="1616067">UTC</span>&nbsp;<span class="op" id="1616071">*</span><span class="ident" id="1616072"><a href="/time/zoneinfo.go.html#1614833">Location</a></span>&nbsp;<span class="op" id="1616081">=</span>&nbsp;<span class="op" id="1616083">&amp;</span><span class="ident" id="1616084"><a href="/time/zoneinfo.go.html#1616255">utcLoc</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1616092">//&nbsp;utcLoc&nbsp;is&nbsp;separate&nbsp;so&nbsp;that&nbsp;get&nbsp;can&nbsp;refer&nbsp;to&nbsp;&amp;utcLoc</span><br>
<span class="lineno"></span><span class="comment" id="1616147">//&nbsp;and&nbsp;ensure&nbsp;that&nbsp;it&nbsp;never&nbsp;returns&nbsp;a&nbsp;nil&nbsp;*Location,</span><br>
<span class="lineno">60</span><span class="comment" id="1616200">//&nbsp;even&nbsp;if&nbsp;a&nbsp;badly&nbsp;behaved&nbsp;client&nbsp;has&nbsp;changed&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="1616251">var</span>&nbsp;<span class="ident" id="1616255">utcLoc</span>&nbsp;<span class="op" id="1616262">=</span>&nbsp;<span class="ident" id="1616264"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1616272">{</span><span class="ident" id="1616273">name</span><span class="op" id="1616277">:</span>&nbsp;<span class="string" id="1616279">&#34;UTC&#34;</span><span class="op" id="1616284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1616287">//&nbsp;Local&nbsp;represents&nbsp;the&nbsp;system&#39;s&nbsp;local&nbsp;time&nbsp;zone.</span><br>
<span class="lineno"></span><span class="keyword" id="1616337">var</span>&nbsp;<span class="ident" id="1616341">Local</span>&nbsp;<span class="op" id="1616347">*</span><span class="ident" id="1616348"><a href="/time/zoneinfo.go.html#1614833">Location</a></span>&nbsp;<span class="op" id="1616357">=</span>&nbsp;<span class="op" id="1616359">&amp;</span><span class="ident" id="1616360"><a href="/time/zoneinfo.go.html#1616473">localLoc</a></span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="1616370">//&nbsp;localLoc&nbsp;is&nbsp;separate&nbsp;so&nbsp;that&nbsp;initLocal&nbsp;can&nbsp;initialize</span><br>
<span class="lineno"></span><span class="comment" id="1616427">//&nbsp;it&nbsp;even&nbsp;if&nbsp;a&nbsp;client&nbsp;has&nbsp;changed&nbsp;Local.</span><br>
<span class="lineno"></span><span class="keyword" id="1616469">var</span>&nbsp;<span class="ident" id="1616473">localLoc</span>&nbsp;<span class="ident" id="1616482"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><br>
<span class="lineno"></span><span class="keyword" id="1616491">var</span>&nbsp;<span class="ident" id="1616495">localOnce</span>&nbsp;<span class="ident" id="1616505"><a href="/time/zoneinfo.go.html#1614597">sync</a></span><span class="op" id="1616509">.</span><span class="ident" id="1616510">Once</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="1616516">func</span>&nbsp;<span class="op" id="1616521">(</span><span class="ident" id="1616522">l</span>&nbsp;<span class="op" id="1616524">*</span><span class="ident" id="1616525"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1616533">)</span>&nbsp;<span class="ident" id="1616535">get</span><span class="op" id="1616538">(</span><span class="op" id="1616539">)</span>&nbsp;<span class="op" id="1616541">*</span><span class="ident" id="1616542"><a href="/time/zoneinfo.go.html#1614833">Location</a></span>&nbsp;<span class="op" id="1616551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1616554">if</span>&nbsp;<span class="ident" id="1616557"><a href="/time/zoneinfo.go.html#1616522">l</a></span>&nbsp;<span class="op" id="1616559">==</span>&nbsp;<span class="ident" id="1616562">nil</span>&nbsp;<span class="op" id="1616566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1616570">return</span>&nbsp;<span class="op" id="1616577">&amp;</span><span class="ident" id="1616578"><a href="/time/zoneinfo.go.html#1616255">utcLoc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1616586">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1616589">if</span>&nbsp;<span class="ident" id="1616592"><a href="/time/zoneinfo.go.html#1616522">l</a></span>&nbsp;<span class="op" id="1616594">==</span>&nbsp;<span class="op" id="1616597">&amp;</span><span class="ident" id="1616598"><a href="/time/zoneinfo.go.html#1616473">localLoc</a></span>&nbsp;<span class="op" id="1616607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1616611"><a href="/time/zoneinfo.go.html#1616495">localOnce</a></span><span class="op" id="1616620">.</span><span class="ident" id="1616621">Do</span><span class="op" id="1616623">(</span><span class="ident" id="1616624"><a href="/time/zoneinfo_unix.go.html#1631330">initLocal</a></span><span class="op" id="1616633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1616636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1616639">return</span>&nbsp;<span class="ident" id="1616646"><a href="/time/zoneinfo.go.html#1616522">l</a></span><br>
<span class="lineno"></span><span class="op" id="1616648">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="1616651">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;descriptive&nbsp;name&nbsp;for&nbsp;the&nbsp;time&nbsp;zone&nbsp;information,</span><br>
<span class="lineno"></span><span class="comment" id="1616719">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;argument&nbsp;to&nbsp;LoadLocation.</span><br>
<span class="lineno"></span><span class="keyword" id="1616769">func</span>&nbsp;<span class="op" id="1616774">(</span><span class="ident" id="1616775">l</span>&nbsp;<span class="op" id="1616777">*</span><span class="ident" id="1616778"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1616786">)</span>&nbsp;<span class="ident" id="1616788">String</span><span class="op" id="1616794">(</span><span class="op" id="1616795">)</span>&nbsp;<span class="builtintype" id="1616797">string</span>&nbsp;<span class="op" id="1616804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1616807">return</span>&nbsp;<span class="ident" id="1616814"><a href="/time/zoneinfo.go.html#1616775">l</a></span><span class="op" id="1616815">.</span><span class="ident" id="1616816">get</span><span class="op" id="1616819">(</span><span class="op" id="1616820">)</span><span class="op" id="1616821">.</span><span class="ident" id="1616822">name</span><br>
<span class="lineno">85</span><span class="op" id="1616827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1616830">//&nbsp;FixedZone&nbsp;returns&nbsp;a&nbsp;Location&nbsp;that&nbsp;always&nbsp;uses</span><br>
<span class="lineno"></span><span class="comment" id="1616879">//&nbsp;the&nbsp;given&nbsp;zone&nbsp;name&nbsp;and&nbsp;offset&nbsp;(seconds&nbsp;east&nbsp;of&nbsp;UTC).</span><br>
<span class="lineno"></span><span class="keyword" id="1616936">func</span>&nbsp;<span class="ident" id="1616941">FixedZone</span><span class="op" id="1616950">(</span><span class="ident" id="1616951">name</span>&nbsp;<span class="builtintype" id="1616956">string</span><span class="op" id="1616962">,</span>&nbsp;<span class="ident" id="1616964">offset</span>&nbsp;<span class="builtintype" id="1616971">int</span><span class="op" id="1616974">)</span>&nbsp;<span class="op" id="1616976">*</span><span class="ident" id="1616977"><a href="/time/zoneinfo.go.html#1614833">Location</a></span>&nbsp;<span class="op" id="1616986">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1616989">l</span>&nbsp;<span class="op" id="1616991">:=</span>&nbsp;<span class="op" id="1616994">&amp;</span><span class="ident" id="1616995"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1617003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617007">name</span><span class="op" id="1617011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1617019"><a href="/time/zoneinfo.go.html#1616951">name</a></span><span class="op" id="1617023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617027">zone</span><span class="op" id="1617031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1617039">[</span><span class="op" id="1617040">]</span><span class="ident" id="1617041"><a href="/time/zoneinfo.go.html#1615412">zone</a></span><span class="op" id="1617045">{</span><span class="op" id="1617046">{</span><span class="ident" id="1617047"><a href="/time/zoneinfo.go.html#1616951">name</a></span><span class="op" id="1617051">,</span>&nbsp;<span class="ident" id="1617053"><a href="/time/zoneinfo.go.html#1616964">offset</a></span><span class="op" id="1617059">,</span>&nbsp;<span class="builtintype" id="1617061">false</span><span class="op" id="1617066">}</span><span class="op" id="1617067">}</span><span class="op" id="1617068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617072">tx</span><span class="op" id="1617074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1617084">[</span><span class="op" id="1617085">]</span><span class="ident" id="1617086"><a href="/time/zoneinfo.go.html#1615625">zoneTrans</a></span><span class="op" id="1617095">{</span><span class="op" id="1617096">{</span><span class="ident" id="1617097"><a href="/time/zoneinfo.go.html#1615937">alpha</a></span><span class="op" id="1617102">,</span>&nbsp;<span class="num" id="1617104">0</span><span class="op" id="1617105">,</span>&nbsp;<span class="builtintype" id="1617107">false</span><span class="op" id="1617112">,</span>&nbsp;<span class="builtintype" id="1617114">false</span><span class="op" id="1617119">}</span><span class="op" id="1617120">}</span><span class="op" id="1617121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617125">cacheStart</span><span class="op" id="1617135">:</span>&nbsp;<span class="ident" id="1617137"><a href="/time/zoneinfo.go.html#1615937">alpha</a></span><span class="op" id="1617142">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617146">cacheEnd</span><span class="op" id="1617154">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1617158"><a href="/time/zoneinfo.go.html#1615973">omega</a></span><span class="op" id="1617163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1617166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617169"><a href="/time/zoneinfo.go.html#1616989">l</a></span><span class="op" id="1617170">.</span><span class="ident" id="1617171">cacheZone</span>&nbsp;<span class="op" id="1617181">=</span>&nbsp;<span class="op" id="1617183">&amp;</span><span class="ident" id="1617184"><a href="/time/zoneinfo.go.html#1616989">l</a></span><span class="op" id="1617185">.</span><span class="ident" id="1617186">zone</span><span class="op" id="1617190">[</span><span class="num" id="1617191">0</span><span class="op" id="1617192">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1617195">return</span>&nbsp;<span class="ident" id="1617202"><a href="/time/zoneinfo.go.html#1616989">l</a></span><br>
<span class="lineno"></span><span class="op" id="1617204">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="1617207">//&nbsp;lookup&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;use&nbsp;at&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="1617270">//&nbsp;instant&nbsp;in&nbsp;time&nbsp;expressed&nbsp;as&nbsp;seconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="1617346">//</span><br>
<span class="lineno"></span><span class="comment" id="1617349">//&nbsp;The&nbsp;returned&nbsp;information&nbsp;gives&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;),</span><br>
<span class="lineno">105</span><span class="comment" id="1617421">//&nbsp;the&nbsp;start&nbsp;and&nbsp;end&nbsp;times&nbsp;bracketing&nbsp;sec&nbsp;when&nbsp;that&nbsp;zone&nbsp;is&nbsp;in&nbsp;effect,</span><br>
<span class="lineno"></span><span class="comment" id="1617492">//&nbsp;the&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC&nbsp;(such&nbsp;as&nbsp;-5*60*60),&nbsp;and&nbsp;whether</span><br>
<span class="lineno"></span><span class="comment" id="1617561">//&nbsp;the&nbsp;daylight&nbsp;savings&nbsp;is&nbsp;being&nbsp;observed&nbsp;at&nbsp;that&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="1617617">func</span>&nbsp;<span class="op" id="1617622">(</span><span class="ident" id="1617623">l</span>&nbsp;<span class="op" id="1617625">*</span><span class="ident" id="1617626"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1617634">)</span>&nbsp;<span class="ident" id="1617636">lookup</span><span class="op" id="1617642">(</span><span class="ident" id="1617643">sec</span>&nbsp;<span class="ident" id="1617647">int64</span><span class="op" id="1617652">)</span>&nbsp;<span class="op" id="1617654">(</span><span class="ident" id="1617655">name</span>&nbsp;<span class="builtintype" id="1617660">string</span><span class="op" id="1617666">,</span>&nbsp;<span class="ident" id="1617668">offset</span>&nbsp;<span class="builtintype" id="1617675">int</span><span class="op" id="1617678">,</span>&nbsp;<span class="ident" id="1617680">isDST</span>&nbsp;<span class="builtintype" id="1617686">bool</span><span class="op" id="1617690">,</span>&nbsp;<span class="ident" id="1617692">start</span><span class="op" id="1617697">,</span>&nbsp;<span class="ident" id="1617699">end</span>&nbsp;<span class="ident" id="1617703">int64</span><span class="op" id="1617708">)</span>&nbsp;<span class="op" id="1617710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617713"><a href="/time/zoneinfo.go.html#1617623">l</a></span>&nbsp;<span class="op" id="1617715">=</span>&nbsp;<span class="ident" id="1617717"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1617718">.</span><span class="ident" id="1617719">get</span><span class="op" id="1617722">(</span><span class="op" id="1617723">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1617727">if</span>&nbsp;<span class="builtinfunc" id="1617730">len</span><span class="op" id="1617733">(</span><span class="ident" id="1617734"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1617735">.</span><span class="ident" id="1617736">zone</span><span class="op" id="1617740">)</span>&nbsp;<span class="op" id="1617742">==</span>&nbsp;<span class="num" id="1617745">0</span>&nbsp;<span class="op" id="1617747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617751"><a href="/time/zoneinfo.go.html#1617655">name</a></span>&nbsp;<span class="op" id="1617756">=</span>&nbsp;<span class="string" id="1617758">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617766"><a href="/time/zoneinfo.go.html#1617668">offset</a></span>&nbsp;<span class="op" id="1617773">=</span>&nbsp;<span class="num" id="1617775">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617779"><a href="/time/zoneinfo.go.html#1617680">isDST</a></span>&nbsp;<span class="op" id="1617785">=</span>&nbsp;<span class="builtintype" id="1617787">false</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617795"><a href="/time/zoneinfo.go.html#1617692">start</a></span>&nbsp;<span class="op" id="1617801">=</span>&nbsp;<span class="ident" id="1617803"><a href="/time/zoneinfo.go.html#1615937">alpha</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617811"><a href="/time/zoneinfo.go.html#1617699">end</a></span>&nbsp;<span class="op" id="1617815">=</span>&nbsp;<span class="ident" id="1617817"><a href="/time/zoneinfo.go.html#1615973">omega</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1617825">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1617833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1617837">if</span>&nbsp;<span class="ident" id="1617840">zone</span>&nbsp;<span class="op" id="1617845">:=</span>&nbsp;<span class="ident" id="1617848"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1617849">.</span><span class="ident" id="1617850">cacheZone</span><span class="op" id="1617859">;</span>&nbsp;<span class="ident" id="1617861"><a href="/time/zoneinfo.go.html#1617840">zone</a></span>&nbsp;<span class="op" id="1617866">!=</span>&nbsp;<span class="ident" id="1617869">nil</span>&nbsp;<span class="op" id="1617873">&amp;&amp;</span>&nbsp;<span class="ident" id="1617876"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1617877">.</span><span class="ident" id="1617878">cacheStart</span>&nbsp;<span class="op" id="1617889">&lt;=</span>&nbsp;<span class="ident" id="1617892"><a href="/time/zoneinfo.go.html#1617643">sec</a></span>&nbsp;<span class="op" id="1617896">&amp;&amp;</span>&nbsp;<span class="ident" id="1617899"><a href="/time/zoneinfo.go.html#1617643">sec</a></span>&nbsp;<span class="op" id="1617903">&lt;</span>&nbsp;<span class="ident" id="1617905"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1617906">.</span><span class="ident" id="1617907">cacheEnd</span>&nbsp;<span class="op" id="1617916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617920"><a href="/time/zoneinfo.go.html#1617655">name</a></span>&nbsp;<span class="op" id="1617925">=</span>&nbsp;<span class="ident" id="1617927"><a href="/time/zoneinfo.go.html#1617840">zone</a></span><span class="op" id="1617931">.</span><span class="ident" id="1617932">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617939"><a href="/time/zoneinfo.go.html#1617668">offset</a></span>&nbsp;<span class="op" id="1617946">=</span>&nbsp;<span class="ident" id="1617948"><a href="/time/zoneinfo.go.html#1617840">zone</a></span><span class="op" id="1617952">.</span><span class="ident" id="1617953">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617962"><a href="/time/zoneinfo.go.html#1617680">isDST</a></span>&nbsp;<span class="op" id="1617968">=</span>&nbsp;<span class="ident" id="1617970"><a href="/time/zoneinfo.go.html#1617840">zone</a></span><span class="op" id="1617974">.</span><span class="ident" id="1617975">isDST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1617983"><a href="/time/zoneinfo.go.html#1617692">start</a></span>&nbsp;<span class="op" id="1617989">=</span>&nbsp;<span class="ident" id="1617991"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1617992">.</span><span class="ident" id="1617993">cacheStart</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618006"><a href="/time/zoneinfo.go.html#1617699">end</a></span>&nbsp;<span class="op" id="1618010">=</span>&nbsp;<span class="ident" id="1618012"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618013">.</span><span class="ident" id="1618014">cacheEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618025">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618037">if</span>&nbsp;<span class="builtinfunc" id="1618040">len</span><span class="op" id="1618043">(</span><span class="ident" id="1618044"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618045">.</span><span class="ident" id="1618046">tx</span><span class="op" id="1618048">)</span>&nbsp;<span class="op" id="1618050">==</span>&nbsp;<span class="num" id="1618053">0</span>&nbsp;<span class="op" id="1618055">||</span>&nbsp;<span class="ident" id="1618058"><a href="/time/zoneinfo.go.html#1617643">sec</a></span>&nbsp;<span class="op" id="1618062">&lt;</span>&nbsp;<span class="ident" id="1618064"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618065">.</span><span class="ident" id="1618066">tx</span><span class="op" id="1618068">[</span><span class="num" id="1618069">0</span><span class="op" id="1618070">]</span><span class="op" id="1618071">.</span><span class="ident" id="1618072">when</span>&nbsp;<span class="op" id="1618077">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618081">zone</span>&nbsp;<span class="op" id="1618086">:=</span>&nbsp;<span class="op" id="1618089">&amp;</span><span class="ident" id="1618090"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618091">.</span><span class="ident" id="1618092">zone</span><span class="op" id="1618096">[</span><span class="ident" id="1618097"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618098">.</span><span class="ident" id="1618099">lookupFirstZone</span><span class="op" id="1618114">(</span><span class="op" id="1618115">)</span><span class="op" id="1618116">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618120"><a href="/time/zoneinfo.go.html#1617655">name</a></span>&nbsp;<span class="op" id="1618125">=</span>&nbsp;<span class="ident" id="1618127"><a href="/time/zoneinfo.go.html#1618081">zone</a></span><span class="op" id="1618131">.</span><span class="ident" id="1618132">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618139"><a href="/time/zoneinfo.go.html#1617668">offset</a></span>&nbsp;<span class="op" id="1618146">=</span>&nbsp;<span class="ident" id="1618148"><a href="/time/zoneinfo.go.html#1618081">zone</a></span><span class="op" id="1618152">.</span><span class="ident" id="1618153">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618162"><a href="/time/zoneinfo.go.html#1617680">isDST</a></span>&nbsp;<span class="op" id="1618168">=</span>&nbsp;<span class="ident" id="1618170"><a href="/time/zoneinfo.go.html#1618081">zone</a></span><span class="op" id="1618174">.</span><span class="ident" id="1618175">isDST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618183"><a href="/time/zoneinfo.go.html#1617692">start</a></span>&nbsp;<span class="op" id="1618189">=</span>&nbsp;<span class="ident" id="1618191"><a href="/time/zoneinfo.go.html#1615937">alpha</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618199">if</span>&nbsp;<span class="builtinfunc" id="1618202">len</span><span class="op" id="1618205">(</span><span class="ident" id="1618206"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618207">.</span><span class="ident" id="1618208">tx</span><span class="op" id="1618210">)</span>&nbsp;<span class="op" id="1618212">&gt;</span>&nbsp;<span class="num" id="1618214">0</span>&nbsp;<span class="op" id="1618216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618221"><a href="/time/zoneinfo.go.html#1617699">end</a></span>&nbsp;<span class="op" id="1618225">=</span>&nbsp;<span class="ident" id="1618227"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618228">.</span><span class="ident" id="1618229">tx</span><span class="op" id="1618231">[</span><span class="num" id="1618232">0</span><span class="op" id="1618233">]</span><span class="op" id="1618234">.</span><span class="ident" id="1618235">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618242">}</span>&nbsp;<span class="keyword" id="1618244">else</span>&nbsp;<span class="op" id="1618249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618254"><a href="/time/zoneinfo.go.html#1617699">end</a></span>&nbsp;<span class="op" id="1618258">=</span>&nbsp;<span class="ident" id="1618260"><a href="/time/zoneinfo.go.html#1615973">omega</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618268">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618272">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1618284">//&nbsp;Binary&nbsp;search&nbsp;for&nbsp;entry&nbsp;with&nbsp;largest&nbsp;time&nbsp;&lt;=&nbsp;sec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1618338">//&nbsp;Not&nbsp;using&nbsp;sort.Search&nbsp;to&nbsp;avoid&nbsp;dependencies.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618387">tx</span>&nbsp;<span class="op" id="1618390">:=</span>&nbsp;<span class="ident" id="1618393"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618394">.</span><span class="ident" id="1618395">tx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618399"><a href="/time/zoneinfo.go.html#1617699">end</a></span>&nbsp;<span class="op" id="1618403">=</span>&nbsp;<span class="ident" id="1618405"><a href="/time/zoneinfo.go.html#1615973">omega</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618412">lo</span>&nbsp;<span class="op" id="1618415">:=</span>&nbsp;<span class="num" id="1618418">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618421">hi</span>&nbsp;<span class="op" id="1618424">:=</span>&nbsp;<span class="builtinfunc" id="1618427">len</span><span class="op" id="1618430">(</span><span class="ident" id="1618431"><a href="/time/zoneinfo.go.html#1618387">tx</a></span><span class="op" id="1618433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618436">for</span>&nbsp;<span class="ident" id="1618440"><a href="/time/zoneinfo.go.html#1618421">hi</a></span><span class="op" id="1618442">-</span><span class="ident" id="1618443"><a href="/time/zoneinfo.go.html#1618412">lo</a></span>&nbsp;<span class="op" id="1618446">&gt;</span>&nbsp;<span class="num" id="1618448">1</span>&nbsp;<span class="op" id="1618450">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618454">m</span>&nbsp;<span class="op" id="1618456">:=</span>&nbsp;<span class="ident" id="1618459"><a href="/time/zoneinfo.go.html#1618412">lo</a></span>&nbsp;<span class="op" id="1618462">+</span>&nbsp;<span class="op" id="1618464">(</span><span class="ident" id="1618465"><a href="/time/zoneinfo.go.html#1618421">hi</a></span><span class="op" id="1618467">-</span><span class="ident" id="1618468"><a href="/time/zoneinfo.go.html#1618412">lo</a></span><span class="op" id="1618470">)</span><span class="op" id="1618471">/</span><span class="num" id="1618472">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618476">lim</span>&nbsp;<span class="op" id="1618480">:=</span>&nbsp;<span class="ident" id="1618483"><a href="/time/zoneinfo.go.html#1618387">tx</a></span><span class="op" id="1618485">[</span><span class="ident" id="1618486"><a href="/time/zoneinfo.go.html#1618454">m</a></span><span class="op" id="1618487">]</span><span class="op" id="1618488">.</span><span class="ident" id="1618489">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618496">if</span>&nbsp;<span class="ident" id="1618499"><a href="/time/zoneinfo.go.html#1617643">sec</a></span>&nbsp;<span class="op" id="1618503">&lt;</span>&nbsp;<span class="ident" id="1618505"><a href="/time/zoneinfo.go.html#1618476">lim</a></span>&nbsp;<span class="op" id="1618509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618514"><a href="/time/zoneinfo.go.html#1617699">end</a></span>&nbsp;<span class="op" id="1618518">=</span>&nbsp;<span class="ident" id="1618520"><a href="/time/zoneinfo.go.html#1618476">lim</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618527"><a href="/time/zoneinfo.go.html#1618421">hi</a></span>&nbsp;<span class="op" id="1618530">=</span>&nbsp;<span class="ident" id="1618532"><a href="/time/zoneinfo.go.html#1618454">m</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618536">}</span>&nbsp;<span class="keyword" id="1618538">else</span>&nbsp;<span class="op" id="1618543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618548"><a href="/time/zoneinfo.go.html#1618412">lo</a></span>&nbsp;<span class="op" id="1618551">=</span>&nbsp;<span class="ident" id="1618553"><a href="/time/zoneinfo.go.html#1618454">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1618560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618563">zone</span>&nbsp;<span class="op" id="1618568">:=</span>&nbsp;<span class="op" id="1618571">&amp;</span><span class="ident" id="1618572"><a href="/time/zoneinfo.go.html#1617623">l</a></span><span class="op" id="1618573">.</span><span class="ident" id="1618574">zone</span><span class="op" id="1618578">[</span><span class="ident" id="1618579"><a href="/time/zoneinfo.go.html#1618387">tx</a></span><span class="op" id="1618581">[</span><span class="ident" id="1618582"><a href="/time/zoneinfo.go.html#1618412">lo</a></span><span class="op" id="1618584">]</span><span class="op" id="1618585">.</span><span class="ident" id="1618586">index</span><span class="op" id="1618591">]</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618594"><a href="/time/zoneinfo.go.html#1617655">name</a></span>&nbsp;<span class="op" id="1618599">=</span>&nbsp;<span class="ident" id="1618601"><a href="/time/zoneinfo.go.html#1618563">zone</a></span><span class="op" id="1618605">.</span><span class="ident" id="1618606">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618612"><a href="/time/zoneinfo.go.html#1617668">offset</a></span>&nbsp;<span class="op" id="1618619">=</span>&nbsp;<span class="ident" id="1618621"><a href="/time/zoneinfo.go.html#1618563">zone</a></span><span class="op" id="1618625">.</span><span class="ident" id="1618626">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618634"><a href="/time/zoneinfo.go.html#1617680">isDST</a></span>&nbsp;<span class="op" id="1618640">=</span>&nbsp;<span class="ident" id="1618642"><a href="/time/zoneinfo.go.html#1618563">zone</a></span><span class="op" id="1618646">.</span><span class="ident" id="1618647">isDST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1618654"><a href="/time/zoneinfo.go.html#1617692">start</a></span>&nbsp;<span class="op" id="1618660">=</span>&nbsp;<span class="ident" id="1618662"><a href="/time/zoneinfo.go.html#1618387">tx</a></span><span class="op" id="1618664">[</span><span class="ident" id="1618665"><a href="/time/zoneinfo.go.html#1618412">lo</a></span><span class="op" id="1618667">]</span><span class="op" id="1618668">.</span><span class="ident" id="1618669">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1618675">//&nbsp;end&nbsp;=&nbsp;maintained&nbsp;during&nbsp;the&nbsp;search</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1618714">return</span><br>
<span class="lineno"></span><span class="op" id="1618721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1618724">//&nbsp;lookupFirstZone&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;time&nbsp;zone&nbsp;to&nbsp;use&nbsp;for&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="1618795">//&nbsp;before&nbsp;the&nbsp;first&nbsp;transition&nbsp;time,&nbsp;or&nbsp;when&nbsp;there&nbsp;are&nbsp;no&nbsp;transition</span><br>
<span class="lineno">170</span><span class="comment" id="1618864">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="1618874">//</span><br>
<span class="lineno"></span><span class="comment" id="1618877">//&nbsp;The&nbsp;reference&nbsp;implementation&nbsp;in&nbsp;localtime.c&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="1618929">//&nbsp;http://www.iana.org/time-zones/repository/releases/tzcode2013g.tar.gz</span><br>
<span class="lineno"></span><span class="comment" id="1619002">//&nbsp;implements&nbsp;the&nbsp;following&nbsp;algorithm&nbsp;for&nbsp;these&nbsp;cases:</span><br>
<span class="lineno">175</span><span class="comment" id="1619057">//&nbsp;1)&nbsp;If&nbsp;the&nbsp;first&nbsp;zone&nbsp;is&nbsp;unused&nbsp;by&nbsp;the&nbsp;transitions,&nbsp;use&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="1619119">//&nbsp;2)&nbsp;Otherwise,&nbsp;if&nbsp;there&nbsp;are&nbsp;transition&nbsp;times,&nbsp;and&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="1619181">//&nbsp;&nbsp;&nbsp;&nbsp;transition&nbsp;is&nbsp;to&nbsp;a&nbsp;zone&nbsp;in&nbsp;daylight&nbsp;time,&nbsp;find&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="1619244">//&nbsp;&nbsp;&nbsp;&nbsp;non-daylight-time&nbsp;zone&nbsp;before&nbsp;and&nbsp;closest&nbsp;to&nbsp;the&nbsp;first&nbsp;transition</span><br>
<span class="lineno"></span><span class="comment" id="1619316">//&nbsp;&nbsp;&nbsp;&nbsp;zone.</span><br>
<span class="lineno">180</span><span class="comment" id="1619328">//&nbsp;3)&nbsp;Otherwise,&nbsp;use&nbsp;the&nbsp;first&nbsp;zone&nbsp;that&nbsp;is&nbsp;not&nbsp;daylight&nbsp;time,&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1619394">//&nbsp;&nbsp;&nbsp;&nbsp;there&nbsp;is&nbsp;one.</span><br>
<span class="lineno"></span><span class="comment" id="1619414">//&nbsp;4)&nbsp;Otherwise,&nbsp;use&nbsp;the&nbsp;first&nbsp;zone.</span><br>
<span class="lineno"></span><span class="keyword" id="1619451">func</span>&nbsp;<span class="op" id="1619456">(</span><span class="ident" id="1619457">l</span>&nbsp;<span class="op" id="1619459">*</span><span class="ident" id="1619460"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1619468">)</span>&nbsp;<span class="ident" id="1619470">lookupFirstZone</span><span class="op" id="1619485">(</span><span class="op" id="1619486">)</span>&nbsp;<span class="builtintype" id="1619488">int</span>&nbsp;<span class="op" id="1619492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1619495">//&nbsp;Case&nbsp;1.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619507">if</span>&nbsp;<span class="op" id="1619510">!</span><span class="ident" id="1619511"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619512">.</span><span class="ident" id="1619513">firstZoneUsed</span><span class="op" id="1619526">(</span><span class="op" id="1619527">)</span>&nbsp;<span class="op" id="1619529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619533">return</span>&nbsp;<span class="num" id="1619540">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1619543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1619547">//&nbsp;Case&nbsp;2.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619559">if</span>&nbsp;<span class="builtinfunc" id="1619562">len</span><span class="op" id="1619565">(</span><span class="ident" id="1619566"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619567">.</span><span class="ident" id="1619568">tx</span><span class="op" id="1619570">)</span>&nbsp;<span class="op" id="1619572">&gt;</span>&nbsp;<span class="num" id="1619574">0</span>&nbsp;<span class="op" id="1619576">&amp;&amp;</span>&nbsp;<span class="ident" id="1619579"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619580">.</span><span class="ident" id="1619581">zone</span><span class="op" id="1619585">[</span><span class="ident" id="1619586"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619587">.</span><span class="ident" id="1619588">tx</span><span class="op" id="1619590">[</span><span class="num" id="1619591">0</span><span class="op" id="1619592">]</span><span class="op" id="1619593">.</span><span class="ident" id="1619594">index</span><span class="op" id="1619599">]</span><span class="op" id="1619600">.</span><span class="ident" id="1619601">isDST</span>&nbsp;<span class="op" id="1619607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619611">for</span>&nbsp;<span class="ident" id="1619615">zi</span>&nbsp;<span class="op" id="1619618">:=</span>&nbsp;<span class="builtintype" id="1619621">int</span><span class="op" id="1619624">(</span><span class="ident" id="1619625"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619626">.</span><span class="ident" id="1619627">tx</span><span class="op" id="1619629">[</span><span class="num" id="1619630">0</span><span class="op" id="1619631">]</span><span class="op" id="1619632">.</span><span class="ident" id="1619633">index</span><span class="op" id="1619638">)</span>&nbsp;<span class="op" id="1619640">-</span>&nbsp;<span class="num" id="1619642">1</span><span class="op" id="1619643">;</span>&nbsp;<span class="ident" id="1619645"><a href="/time/zoneinfo.go.html#1619615">zi</a></span>&nbsp;<span class="op" id="1619648">&gt;=</span>&nbsp;<span class="num" id="1619651">0</span><span class="op" id="1619652">;</span>&nbsp;<span class="ident" id="1619654"><a href="/time/zoneinfo.go.html#1619615">zi</a></span><span class="op" id="1619656">--</span>&nbsp;<span class="op" id="1619659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619664">if</span>&nbsp;<span class="op" id="1619667">!</span><span class="ident" id="1619668"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619669">.</span><span class="ident" id="1619670">zone</span><span class="op" id="1619674">[</span><span class="ident" id="1619675"><a href="/time/zoneinfo.go.html#1619615">zi</a></span><span class="op" id="1619677">]</span><span class="op" id="1619678">.</span><span class="ident" id="1619679">isDST</span>&nbsp;<span class="op" id="1619685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619691">return</span>&nbsp;<span class="ident" id="1619698"><a href="/time/zoneinfo.go.html#1619615">zi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1619704">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1619708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1619711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1619715">//&nbsp;Case&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619727">for</span>&nbsp;<span class="ident" id="1619731">zi</span>&nbsp;<span class="op" id="1619734">:=</span>&nbsp;<span class="keyword" id="1619737">range</span>&nbsp;<span class="ident" id="1619743"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619744">.</span><span class="ident" id="1619745">zone</span>&nbsp;<span class="op" id="1619750">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619754">if</span>&nbsp;<span class="op" id="1619757">!</span><span class="ident" id="1619758"><a href="/time/zoneinfo.go.html#1619457">l</a></span><span class="op" id="1619759">.</span><span class="ident" id="1619760">zone</span><span class="op" id="1619764">[</span><span class="ident" id="1619765"><a href="/time/zoneinfo.go.html#1619731">zi</a></span><span class="op" id="1619767">]</span><span class="op" id="1619768">.</span><span class="ident" id="1619769">isDST</span>&nbsp;<span class="op" id="1619775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619780">return</span>&nbsp;<span class="ident" id="1619787"><a href="/time/zoneinfo.go.html#1619731">zi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1619792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1619795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1619799">//&nbsp;Case&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619811">return</span>&nbsp;<span class="num" id="1619818">0</span><br>
<span class="lineno"></span><span class="op" id="1619820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1619823">//&nbsp;firstZoneUsed&nbsp;returns&nbsp;whether&nbsp;the&nbsp;first&nbsp;zone&nbsp;is&nbsp;used&nbsp;by&nbsp;some</span><br>
<span class="lineno">210</span><span class="comment" id="1619887">//&nbsp;transition.</span><br>
<span class="lineno"></span><span class="keyword" id="1619902">func</span>&nbsp;<span class="op" id="1619907">(</span><span class="ident" id="1619908">l</span>&nbsp;<span class="op" id="1619910">*</span><span class="ident" id="1619911"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1619919">)</span>&nbsp;<span class="ident" id="1619921">firstZoneUsed</span><span class="op" id="1619934">(</span><span class="op" id="1619935">)</span>&nbsp;<span class="builtintype" id="1619937">bool</span>&nbsp;<span class="op" id="1619942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619945">for</span>&nbsp;<span class="ident" id="1619949">_</span><span class="op" id="1619950">,</span>&nbsp;<span class="ident" id="1619952">tx</span>&nbsp;<span class="op" id="1619955">:=</span>&nbsp;<span class="keyword" id="1619958">range</span>&nbsp;<span class="ident" id="1619964"><a href="/time/zoneinfo.go.html#1619908">l</a></span><span class="op" id="1619965">.</span><span class="ident" id="1619966">tx</span>&nbsp;<span class="op" id="1619969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619973">if</span>&nbsp;<span class="ident" id="1619976"><a href="/time/zoneinfo.go.html#1619952">tx</a></span><span class="op" id="1619978">.</span><span class="ident" id="1619979">index</span>&nbsp;<span class="op" id="1619985">==</span>&nbsp;<span class="num" id="1619988">0</span>&nbsp;<span class="op" id="1619990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1619995">return</span>&nbsp;<span class="builtintype" id="1620002">true</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1620009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1620012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620015">return</span>&nbsp;<span class="builtintype" id="1620022">false</span><br>
<span class="lineno"></span><span class="op" id="1620028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="1620031">//&nbsp;lookupName&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;time&nbsp;zone&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1620090">//&nbsp;the&nbsp;given&nbsp;name&nbsp;(such&nbsp;as&nbsp;&#34;EST&#34;)&nbsp;at&nbsp;the&nbsp;given&nbsp;pseudo-Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="1620154">//&nbsp;(what&nbsp;the&nbsp;given&nbsp;time&nbsp;of&nbsp;day&nbsp;would&nbsp;be&nbsp;in&nbsp;UTC).</span><br>
<span class="lineno"></span><span class="keyword" id="1620203">func</span>&nbsp;<span class="op" id="1620208">(</span><span class="ident" id="1620209">l</span>&nbsp;<span class="op" id="1620211">*</span><span class="ident" id="1620212"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1620220">)</span>&nbsp;<span class="ident" id="1620222">lookupName</span><span class="op" id="1620232">(</span><span class="ident" id="1620233">name</span>&nbsp;<span class="builtintype" id="1620238">string</span><span class="op" id="1620244">,</span>&nbsp;<span class="ident" id="1620246">unix</span>&nbsp;<span class="ident" id="1620251">int64</span><span class="op" id="1620256">)</span>&nbsp;<span class="op" id="1620258">(</span><span class="ident" id="1620259">offset</span>&nbsp;<span class="builtintype" id="1620266">int</span><span class="op" id="1620269">,</span>&nbsp;<span class="ident" id="1620271">isDST</span>&nbsp;<span class="builtintype" id="1620277">bool</span><span class="op" id="1620281">,</span>&nbsp;<span class="ident" id="1620283">ok</span>&nbsp;<span class="builtintype" id="1620286">bool</span><span class="op" id="1620290">)</span>&nbsp;<span class="op" id="1620292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1620295"><a href="/time/zoneinfo.go.html#1620209">l</a></span>&nbsp;<span class="op" id="1620297">=</span>&nbsp;<span class="ident" id="1620299"><a href="/time/zoneinfo.go.html#1620209">l</a></span><span class="op" id="1620300">.</span><span class="ident" id="1620301">get</span><span class="op" id="1620304">(</span><span class="op" id="1620305">)</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620309">//&nbsp;First&nbsp;try&nbsp;for&nbsp;a&nbsp;zone&nbsp;with&nbsp;the&nbsp;right&nbsp;name&nbsp;that&nbsp;was&nbsp;actually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620372">//&nbsp;in&nbsp;effect&nbsp;at&nbsp;the&nbsp;given&nbsp;time.&nbsp;(In&nbsp;Sydney,&nbsp;Australia,&nbsp;both&nbsp;standard</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620442">//&nbsp;and&nbsp;daylight-savings&nbsp;time&nbsp;are&nbsp;abbreviated&nbsp;&#34;EST&#34;.&nbsp;Using&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620505">//&nbsp;offset&nbsp;helps&nbsp;us&nbsp;pick&nbsp;the&nbsp;right&nbsp;one&nbsp;for&nbsp;the&nbsp;given&nbsp;time.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620564">//&nbsp;It&#39;s&nbsp;not&nbsp;perfect:&nbsp;during&nbsp;the&nbsp;backward&nbsp;transition&nbsp;we&nbsp;might&nbsp;pick</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620631">//&nbsp;either&nbsp;one.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620648">for</span>&nbsp;<span class="ident" id="1620652">i</span>&nbsp;<span class="op" id="1620654">:=</span>&nbsp;<span class="keyword" id="1620657">range</span>&nbsp;<span class="ident" id="1620663"><a href="/time/zoneinfo.go.html#1620209">l</a></span><span class="op" id="1620664">.</span><span class="ident" id="1620665">zone</span>&nbsp;<span class="op" id="1620670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1620674">zone</span>&nbsp;<span class="op" id="1620679">:=</span>&nbsp;<span class="op" id="1620682">&amp;</span><span class="ident" id="1620683"><a href="/time/zoneinfo.go.html#1620209">l</a></span><span class="op" id="1620684">.</span><span class="ident" id="1620685">zone</span><span class="op" id="1620689">[</span><span class="ident" id="1620690"><a href="/time/zoneinfo.go.html#1620652">i</a></span><span class="op" id="1620691">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620695">if</span>&nbsp;<span class="ident" id="1620698"><a href="/time/zoneinfo.go.html#1620674">zone</a></span><span class="op" id="1620702">.</span><span class="ident" id="1620703">name</span>&nbsp;<span class="op" id="1620708">==</span>&nbsp;<span class="ident" id="1620711"><a href="/time/zoneinfo.go.html#1620233">name</a></span>&nbsp;<span class="op" id="1620716">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1620721">nam</span><span class="op" id="1620724">,</span>&nbsp;<span class="ident" id="1620726">offset</span><span class="op" id="1620732">,</span>&nbsp;<span class="ident" id="1620734">isDST</span><span class="op" id="1620739">,</span>&nbsp;<span class="ident" id="1620741">_</span><span class="op" id="1620742">,</span>&nbsp;<span class="ident" id="1620744">_</span>&nbsp;<span class="op" id="1620746">:=</span>&nbsp;<span class="ident" id="1620749"><a href="/time/zoneinfo.go.html#1620209">l</a></span><span class="op" id="1620750">.</span><span class="ident" id="1620751">lookup</span><span class="op" id="1620757">(</span><span class="ident" id="1620758"><a href="/time/zoneinfo.go.html#1620246">unix</a></span>&nbsp;<span class="op" id="1620763">-</span>&nbsp;<span class="ident" id="1620765">int64</span><span class="op" id="1620770">(</span><span class="ident" id="1620771"><a href="/time/zoneinfo.go.html#1620674">zone</a></span><span class="op" id="1620775">.</span><span class="ident" id="1620776">offset</span><span class="op" id="1620782">)</span><span class="op" id="1620783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620788">if</span>&nbsp;<span class="ident" id="1620791"><a href="/time/zoneinfo.go.html#1620721">nam</a></span>&nbsp;<span class="op" id="1620795">==</span>&nbsp;<span class="ident" id="1620798"><a href="/time/zoneinfo.go.html#1620674">zone</a></span><span class="op" id="1620802">.</span><span class="ident" id="1620803">name</span>&nbsp;<span class="op" id="1620808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620814">return</span>&nbsp;<span class="ident" id="1620821"><a href="/time/zoneinfo.go.html#1620726">offset</a></span><span class="op" id="1620827">,</span>&nbsp;<span class="ident" id="1620829"><a href="/time/zoneinfo.go.html#1620734">isDST</a></span><span class="op" id="1620834">,</span>&nbsp;<span class="builtintype" id="1620836">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1620844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1620848">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1620851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1620855">//&nbsp;Otherwise&nbsp;fall&nbsp;back&nbsp;to&nbsp;an&nbsp;ordinary&nbsp;name&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620906">for</span>&nbsp;<span class="ident" id="1620910">i</span>&nbsp;<span class="op" id="1620912">:=</span>&nbsp;<span class="keyword" id="1620915">range</span>&nbsp;<span class="ident" id="1620921"><a href="/time/zoneinfo.go.html#1620209">l</a></span><span class="op" id="1620922">.</span><span class="ident" id="1620923">zone</span>&nbsp;<span class="op" id="1620928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1620932">zone</span>&nbsp;<span class="op" id="1620937">:=</span>&nbsp;<span class="op" id="1620940">&amp;</span><span class="ident" id="1620941"><a href="/time/zoneinfo.go.html#1620209">l</a></span><span class="op" id="1620942">.</span><span class="ident" id="1620943">zone</span><span class="op" id="1620947">[</span><span class="ident" id="1620948"><a href="/time/zoneinfo.go.html#1620910">i</a></span><span class="op" id="1620949">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620953">if</span>&nbsp;<span class="ident" id="1620956"><a href="/time/zoneinfo.go.html#1620932">zone</a></span><span class="op" id="1620960">.</span><span class="ident" id="1620961">name</span>&nbsp;<span class="op" id="1620966">==</span>&nbsp;<span class="ident" id="1620969"><a href="/time/zoneinfo.go.html#1620233">name</a></span>&nbsp;<span class="op" id="1620974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1620979">return</span>&nbsp;<span class="ident" id="1620986"><a href="/time/zoneinfo.go.html#1620932">zone</a></span><span class="op" id="1620990">.</span><span class="ident" id="1620991">offset</span><span class="op" id="1620997">,</span>&nbsp;<span class="ident" id="1620999"><a href="/time/zoneinfo.go.html#1620932">zone</a></span><span class="op" id="1621003">.</span><span class="ident" id="1621004">isDST</span><span class="op" id="1621009">,</span>&nbsp;<span class="builtintype" id="1621011">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1621018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1621021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1621025">//&nbsp;Otherwise,&nbsp;give&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1621049">return</span><br>
<span class="lineno"></span><span class="op" id="1621056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1621059">//&nbsp;NOTE(rsc):&nbsp;Eventually&nbsp;we&nbsp;will&nbsp;need&nbsp;to&nbsp;accept&nbsp;the&nbsp;POSIX&nbsp;TZ&nbsp;environment</span><br>
<span class="lineno">255</span><span class="comment" id="1621132">//&nbsp;syntax&nbsp;too,&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;feel&nbsp;like&nbsp;implementing&nbsp;it&nbsp;today.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1621193">var</span>&nbsp;<span class="ident" id="1621197">zoneinfo</span><span class="op" id="1621205">,</span>&nbsp;<span class="ident" id="1621207">_</span>&nbsp;<span class="op" id="1621209">=</span>&nbsp;<span class="ident" id="1621211"><a href="/time/zoneinfo.go.html#1614605">syscall</a></span><span class="op" id="1621218">.</span><span class="ident" id="1621219">Getenv</span><span class="op" id="1621225">(</span><span class="string" id="1621226">&#34;ZONEINFO&#34;</span><span class="op" id="1621236">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1621239">//&nbsp;LoadLocation&nbsp;returns&nbsp;the&nbsp;Location&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno">260</span><span class="comment" id="1621297">//</span><br>
<span class="lineno"></span><span class="comment" id="1621300">//&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;&#34;&#34;&nbsp;or&nbsp;&#34;UTC&#34;,&nbsp;LoadLocation&nbsp;returns&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="1621357">//&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;&#34;Local&#34;,&nbsp;LoadLocation&nbsp;returns&nbsp;Local.</span><br>
<span class="lineno"></span><span class="comment" id="1621412">//</span><br>
<span class="lineno"></span><span class="comment" id="1621415">//&nbsp;Otherwise,&nbsp;the&nbsp;name&nbsp;is&nbsp;taken&nbsp;to&nbsp;be&nbsp;a&nbsp;location&nbsp;name&nbsp;corresponding&nbsp;to&nbsp;a&nbsp;file</span><br>
<span class="lineno">265</span><span class="comment" id="1621493">//&nbsp;in&nbsp;the&nbsp;IANA&nbsp;Time&nbsp;Zone&nbsp;database,&nbsp;such&nbsp;as&nbsp;&#34;America/New_York&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1621556">//</span><br>
<span class="lineno"></span><span class="comment" id="1621559">//&nbsp;The&nbsp;time&nbsp;zone&nbsp;database&nbsp;needed&nbsp;by&nbsp;LoadLocation&nbsp;may&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="1621619">//&nbsp;present&nbsp;on&nbsp;all&nbsp;systems,&nbsp;especially&nbsp;non-Unix&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="1621675">//&nbsp;LoadLocation&nbsp;looks&nbsp;in&nbsp;the&nbsp;directory&nbsp;or&nbsp;uncompressed&nbsp;zip&nbsp;file</span><br>
<span class="lineno">270</span><span class="comment" id="1621739">//&nbsp;named&nbsp;by&nbsp;the&nbsp;ZONEINFO&nbsp;environment&nbsp;variable,&nbsp;if&nbsp;any,&nbsp;then&nbsp;looks&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1621808">//&nbsp;known&nbsp;installation&nbsp;locations&nbsp;on&nbsp;Unix&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="1621857">//&nbsp;and&nbsp;finally&nbsp;looks&nbsp;in&nbsp;$GOROOT/lib/time/zoneinfo.zip.</span><br>
<span class="lineno"></span><span class="keyword" id="1621912">func</span>&nbsp;<span class="ident" id="1621917">LoadLocation</span><span class="op" id="1621929">(</span><span class="ident" id="1621930">name</span>&nbsp;<span class="builtintype" id="1621935">string</span><span class="op" id="1621941">)</span>&nbsp;<span class="op" id="1621943">(</span><span class="op" id="1621944">*</span><span class="ident" id="1621945"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1621953">,</span>&nbsp;<span class="builtintype" id="1621955">error</span><span class="op" id="1621960">)</span>&nbsp;<span class="op" id="1621962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1621965">if</span>&nbsp;<span class="ident" id="1621968"><a href="/time/zoneinfo.go.html#1621930">name</a></span>&nbsp;<span class="op" id="1621973">==</span>&nbsp;<span class="string" id="1621976">&#34;&#34;</span>&nbsp;<span class="op" id="1621979">||</span>&nbsp;<span class="ident" id="1621982"><a href="/time/zoneinfo.go.html#1621930">name</a></span>&nbsp;<span class="op" id="1621987">==</span>&nbsp;<span class="string" id="1621990">&#34;UTC&#34;</span>&nbsp;<span class="op" id="1621996">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622000">return</span>&nbsp;<span class="ident" id="1622007"><a href="/time/zoneinfo.go.html#1616067">UTC</a></span><span class="op" id="1622010">,</span>&nbsp;<span class="ident" id="1622012">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1622017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622020">if</span>&nbsp;<span class="ident" id="1622023"><a href="/time/zoneinfo.go.html#1621930">name</a></span>&nbsp;<span class="op" id="1622028">==</span>&nbsp;<span class="string" id="1622031">&#34;Local&#34;</span>&nbsp;<span class="op" id="1622039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622043">return</span>&nbsp;<span class="ident" id="1622050"><a href="/time/zoneinfo.go.html#1616341">Local</a></span><span class="op" id="1622055">,</span>&nbsp;<span class="ident" id="1622057">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1622062">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622065">if</span>&nbsp;<span class="ident" id="1622068"><a href="/time/zoneinfo.go.html#1621197">zoneinfo</a></span>&nbsp;<span class="op" id="1622077">!=</span>&nbsp;<span class="string" id="1622080">&#34;&#34;</span>&nbsp;<span class="op" id="1622083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622087">if</span>&nbsp;<span class="ident" id="1622090">z</span><span class="op" id="1622091">,</span>&nbsp;<span class="ident" id="1622093">err</span>&nbsp;<span class="op" id="1622097">:=</span>&nbsp;<span class="ident" id="1622100"><a href="/time/zoneinfo_read.go.html#1626598">loadZoneFile</a></span><span class="op" id="1622112">(</span><span class="ident" id="1622113"><a href="/time/zoneinfo.go.html#1621197">zoneinfo</a></span><span class="op" id="1622121">,</span>&nbsp;<span class="ident" id="1622123"><a href="/time/zoneinfo.go.html#1621930">name</a></span><span class="op" id="1622127">)</span><span class="op" id="1622128">;</span>&nbsp;<span class="ident" id="1622130"><a href="/time/zoneinfo.go.html#1622093">err</a></span>&nbsp;<span class="op" id="1622134">==</span>&nbsp;<span class="ident" id="1622137">nil</span>&nbsp;<span class="op" id="1622141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622146"><a href="/time/zoneinfo.go.html#1622090">z</a></span><span class="op" id="1622147">.</span><span class="ident" id="1622148">name</span>&nbsp;<span class="op" id="1622153">=</span>&nbsp;<span class="ident" id="1622155"><a href="/time/zoneinfo.go.html#1621930">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622163">return</span>&nbsp;<span class="ident" id="1622170"><a href="/time/zoneinfo.go.html#1622090">z</a></span><span class="op" id="1622171">,</span>&nbsp;<span class="ident" id="1622173">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1622179">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1622182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622185">return</span>&nbsp;<span class="ident" id="1622192"><a href="/time/zoneinfo_unix.go.html#1631863">loadLocation</a></span><span class="op" id="1622204">(</span><span class="ident" id="1622205"><a href="/time/zoneinfo.go.html#1621930">name</a></span><span class="op" id="1622209">)</span><br>
<span class="lineno"></span><span class="op" id="1622211">}</span>
</div>
</body>
</html>
