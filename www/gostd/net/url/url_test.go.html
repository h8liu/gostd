<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7713132">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7713187">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7713241">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7713292">package</span>&nbsp;<span class="ident" id="7713300">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7713305">import</span>&nbsp;<span class="op" id="7713312">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713315">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713322">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713333">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713344">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7713354">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7713357">type</span>&nbsp;<span class="ident" id="7713362">URLTest</span>&nbsp;<span class="keyword" id="7713370">struct</span>&nbsp;<span class="op" id="7713377">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713380">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7713390">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713398">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713408">*</span><span class="ident" id="7713409">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713414">roundtrip</span>&nbsp;<span class="builtintype" id="7713424">string</span>&nbsp;<span class="comment" id="7713431">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7713502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7713505">var</span>&nbsp;<span class="ident" id="7713509">urltests</span>&nbsp;<span class="op" id="7713518">=</span>&nbsp;<span class="op" id="7713520">[</span><span class="op" id="7713521">]</span><span class="ident" id="7713522">URLTest</span><span class="op" id="7713529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713532">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713548">&#34;http://www.google.com&#34;</span><span class="op" id="7713571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713575">&amp;</span><span class="ident" id="7713576">URL</span><span class="op" id="7713579">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713584">Scheme</span><span class="op" id="7713590">:</span>&nbsp;<span class="string" id="7713592">&#34;http&#34;</span><span class="op" id="7713598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713603">Host</span><span class="op" id="7713607">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7713611">&#34;www.google.com&#34;</span><span class="op" id="7713627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713631">}</span><span class="op" id="7713632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713636">&#34;&#34;</span><span class="op" id="7713638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713641">}</span><span class="op" id="7713642">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713645">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713658">&#34;http://www.google.com/&#34;</span><span class="op" id="7713682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713686">&amp;</span><span class="ident" id="7713687">URL</span><span class="op" id="7713690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713695">Scheme</span><span class="op" id="7713701">:</span>&nbsp;<span class="string" id="7713703">&#34;http&#34;</span><span class="op" id="7713709">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713714">Host</span><span class="op" id="7713718">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7713722">&#34;www.google.com&#34;</span><span class="op" id="7713738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713743">Path</span><span class="op" id="7713747">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7713751">&#34;/&#34;</span><span class="op" id="7713754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713758">}</span><span class="op" id="7713759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713763">&#34;&#34;</span><span class="op" id="7713765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713768">}</span><span class="op" id="7713769">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713772">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713803">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7713843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713847">&amp;</span><span class="ident" id="7713848">URL</span><span class="op" id="7713851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713856">Scheme</span><span class="op" id="7713862">:</span>&nbsp;<span class="string" id="7713864">&#34;http&#34;</span><span class="op" id="7713870">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713875">Host</span><span class="op" id="7713879">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7713883">&#34;www.google.com&#34;</span><span class="op" id="7713899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713904">Path</span><span class="op" id="7713908">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7713912">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7713927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713931">}</span><span class="op" id="7713932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713936">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7713974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713977">}</span><span class="op" id="7713978">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713981">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7713994">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7714027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714031">&amp;</span><span class="ident" id="7714032">URL</span><span class="op" id="7714035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714040">Scheme</span><span class="op" id="7714046">:</span>&nbsp;<span class="string" id="7714048">&#34;ftp&#34;</span><span class="op" id="7714053">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714058">User</span><span class="op" id="7714062">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7714066">User</span><span class="op" id="7714070">(</span><span class="string" id="7714071">&#34;webmaster&#34;</span><span class="op" id="7714082">)</span><span class="op" id="7714083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714088">Host</span><span class="op" id="7714092">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714096">&#34;www.google.com&#34;</span><span class="op" id="7714112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714117">Path</span><span class="op" id="7714121">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714125">&#34;/&#34;</span><span class="op" id="7714128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714132">}</span><span class="op" id="7714133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714137">&#34;&#34;</span><span class="op" id="7714139">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714142">}</span><span class="op" id="7714143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714146">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714182">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7714216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714220">&amp;</span><span class="ident" id="7714221">URL</span><span class="op" id="7714224">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714229">Scheme</span><span class="op" id="7714235">:</span>&nbsp;<span class="string" id="7714237">&#34;ftp&#34;</span><span class="op" id="7714242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714247">User</span><span class="op" id="7714251">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7714255">User</span><span class="op" id="7714259">(</span><span class="string" id="7714260">&#34;john&nbsp;doe&#34;</span><span class="op" id="7714270">)</span><span class="op" id="7714271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714276">Host</span><span class="op" id="7714280">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714284">&#34;www.google.com&#34;</span><span class="op" id="7714300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714305">Path</span><span class="op" id="7714309">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714313">&#34;/&#34;</span><span class="op" id="7714316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714320">}</span><span class="op" id="7714321">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714325">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7714359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714362">}</span><span class="op" id="7714363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714366">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714380">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7714418">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714422">&amp;</span><span class="ident" id="7714423">URL</span><span class="op" id="7714426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714431">Scheme</span><span class="op" id="7714437">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714441">&#34;http&#34;</span><span class="op" id="7714447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714452">Host</span><span class="op" id="7714456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714462">&#34;www.google.com&#34;</span><span class="op" id="7714478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714483">Path</span><span class="op" id="7714487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714493">&#34;/&#34;</span><span class="op" id="7714496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714501">RawQuery</span><span class="op" id="7714509">:</span>&nbsp;<span class="string" id="7714511">&#34;q=go+language&#34;</span><span class="op" id="7714526">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714530">}</span><span class="op" id="7714531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714535">&#34;&#34;</span><span class="op" id="7714537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714540">}</span><span class="op" id="7714541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714544">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714584">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714588">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7714628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714632">&amp;</span><span class="ident" id="7714633">URL</span><span class="op" id="7714636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714641">Scheme</span><span class="op" id="7714647">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714651">&#34;http&#34;</span><span class="op" id="7714657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714662">Host</span><span class="op" id="7714666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714672">&#34;www.google.com&#34;</span><span class="op" id="7714688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714693">Path</span><span class="op" id="7714697">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714703">&#34;/&#34;</span><span class="op" id="7714706">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714711">RawQuery</span><span class="op" id="7714719">:</span>&nbsp;<span class="string" id="7714721">&#34;q=go%20language&#34;</span><span class="op" id="7714738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714742">}</span><span class="op" id="7714743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714747">&#34;&#34;</span><span class="op" id="7714749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714752">}</span><span class="op" id="7714753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714756">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714782">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7714817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714821">&amp;</span><span class="ident" id="7714822">URL</span><span class="op" id="7714825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714830">Scheme</span><span class="op" id="7714836">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7714840">&#34;http&#34;</span><span class="op" id="7714846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714851">Host</span><span class="op" id="7714855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714861">&#34;www.google.com&#34;</span><span class="op" id="7714877">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714882">Path</span><span class="op" id="7714886">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7714892">&#34;/a&nbsp;b&#34;</span><span class="op" id="7714898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714903">RawQuery</span><span class="op" id="7714911">:</span>&nbsp;<span class="string" id="7714913">&#34;q=c+d&#34;</span><span class="op" id="7714920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714924">}</span><span class="op" id="7714925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714929">&#34;&#34;</span><span class="op" id="7714931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714934">}</span><span class="op" id="7714935">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714938">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7714984">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7715020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715024">&amp;</span><span class="ident" id="7715025">URL</span><span class="op" id="7715028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715033">Scheme</span><span class="op" id="7715039">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7715043">&#34;http&#34;</span><span class="op" id="7715049">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715054">Opaque</span><span class="op" id="7715060">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7715064">&#34;www.google.com/&#34;</span><span class="op" id="7715081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715086">RawQuery</span><span class="op" id="7715094">:</span>&nbsp;<span class="string" id="7715096">&#34;q=go+language&#34;</span><span class="op" id="7715111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715115">}</span><span class="op" id="7715116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715120">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7715156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715159">}</span><span class="op" id="7715160">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715163">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715209">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7715251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715255">&amp;</span><span class="ident" id="7715256">URL</span><span class="op" id="7715259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715264">Scheme</span><span class="op" id="7715270">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7715274">&#34;http&#34;</span><span class="op" id="7715280">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715285">Opaque</span><span class="op" id="7715291">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7715295">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7715318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715323">RawQuery</span><span class="op" id="7715331">:</span>&nbsp;<span class="string" id="7715333">&#34;q=go+language&#34;</span><span class="op" id="7715348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715352">}</span><span class="op" id="7715353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715357">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7715399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715402">}</span><span class="op" id="7715403">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715406">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715438">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7715468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715472">&amp;</span><span class="ident" id="7715473">URL</span><span class="op" id="7715476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715481">Scheme</span><span class="op" id="7715487">:</span>&nbsp;<span class="string" id="7715489">&#34;mailto&#34;</span><span class="op" id="7715497">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715502">Path</span><span class="op" id="7715506">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7715510">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7715533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715537">}</span><span class="op" id="7715538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715542">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7715574">,</span>&nbsp;<span class="comment" id="7715576">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715603">}</span><span class="op" id="7715604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715607">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715629">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7715658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715662">&amp;</span><span class="ident" id="7715663">URL</span><span class="op" id="7715666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715671">Scheme</span><span class="op" id="7715677">:</span>&nbsp;<span class="string" id="7715679">&#34;mailto&#34;</span><span class="op" id="7715687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715692">Opaque</span><span class="op" id="7715698">:</span>&nbsp;<span class="string" id="7715700">&#34;webmaster@golang.org&#34;</span><span class="op" id="7715722">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715726">}</span><span class="op" id="7715727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715731">&#34;&#34;</span><span class="op" id="7715733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715736">}</span><span class="op" id="7715737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715740">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715794">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715798">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7715821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715825">&amp;</span><span class="ident" id="7715826">URL</span><span class="op" id="7715829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715834">Path</span><span class="op" id="7715838">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7715844">&#34;/foo&#34;</span><span class="op" id="7715850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715855">RawQuery</span><span class="op" id="7715863">:</span>&nbsp;<span class="string" id="7715865">&#34;query=http://bad&#34;</span><span class="op" id="7715883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715887">}</span><span class="op" id="7715888">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715892">&#34;&#34;</span><span class="op" id="7715894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715897">}</span><span class="op" id="7715898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7715901">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7715962">&#34;//foo&#34;</span><span class="op" id="7715969">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715973">&amp;</span><span class="ident" id="7715974">URL</span><span class="op" id="7715977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715982">Host</span><span class="op" id="7715986">:</span>&nbsp;<span class="string" id="7715988">&#34;foo&#34;</span><span class="op" id="7715993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715997">}</span><span class="op" id="7715998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716002">&#34;&#34;</span><span class="op" id="7716004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716007">}</span><span class="op" id="7716008">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716011">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716077">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7716098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716102">&amp;</span><span class="ident" id="7716103">URL</span><span class="op" id="7716106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716111">User</span><span class="op" id="7716115">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716121">User</span><span class="op" id="7716125">(</span><span class="string" id="7716126">&#34;user&#34;</span><span class="op" id="7716132">)</span><span class="op" id="7716133">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716138">Host</span><span class="op" id="7716142">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7716148">&#34;foo&#34;</span><span class="op" id="7716153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716158">Path</span><span class="op" id="7716162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7716168">&#34;/path&#34;</span><span class="op" id="7716175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716180">RawQuery</span><span class="op" id="7716188">:</span>&nbsp;<span class="string" id="7716190">&#34;a=b&#34;</span><span class="op" id="7716195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716199">}</span><span class="op" id="7716200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716204">&#34;&#34;</span><span class="op" id="7716206">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716209">}</span><span class="op" id="7716210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716213">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716288">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716349">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716408">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716468">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716491">&#34;///threeslashes&#34;</span><span class="op" id="7716508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716512">&amp;</span><span class="ident" id="7716513">URL</span><span class="op" id="7716516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716521">Path</span><span class="op" id="7716525">:</span>&nbsp;<span class="string" id="7716527">&#34;///threeslashes&#34;</span><span class="op" id="7716544">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716548">}</span><span class="op" id="7716549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716553">&#34;&#34;</span><span class="op" id="7716555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716558">}</span><span class="op" id="7716559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716566">&#34;http://user:password@google.com&#34;</span><span class="op" id="7716599">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716603">&amp;</span><span class="ident" id="7716604">URL</span><span class="op" id="7716607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716612">Scheme</span><span class="op" id="7716618">:</span>&nbsp;<span class="string" id="7716620">&#34;http&#34;</span><span class="op" id="7716626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716631">User</span><span class="op" id="7716635">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7716639">UserPassword</span><span class="op" id="7716651">(</span><span class="string" id="7716652">&#34;user&#34;</span><span class="op" id="7716658">,</span>&nbsp;<span class="string" id="7716660">&#34;password&#34;</span><span class="op" id="7716670">)</span><span class="op" id="7716671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716676">Host</span><span class="op" id="7716680">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7716684">&#34;google.com&#34;</span><span class="op" id="7716696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716700">}</span><span class="op" id="7716701">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716705">&#34;http://user:password@google.com&#34;</span><span class="op" id="7716738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716741">}</span><span class="op" id="7716742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716745">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716801">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7716834">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716838">&amp;</span><span class="ident" id="7716839">URL</span><span class="op" id="7716842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716847">Scheme</span><span class="op" id="7716853">:</span>&nbsp;<span class="string" id="7716855">&#34;http&#34;</span><span class="op" id="7716861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716866">User</span><span class="op" id="7716870">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7716874">UserPassword</span><span class="op" id="7716886">(</span><span class="string" id="7716887">&#34;j@ne&#34;</span><span class="op" id="7716893">,</span>&nbsp;<span class="string" id="7716895">&#34;password&#34;</span><span class="op" id="7716905">)</span><span class="op" id="7716906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716911">Host</span><span class="op" id="7716915">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7716919">&#34;google.com&#34;</span><span class="op" id="7716931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716935">}</span><span class="op" id="7716936">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7716940">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7716975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716978">}</span><span class="op" id="7716979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716982">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717038">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7717071">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717075">&amp;</span><span class="ident" id="7717076">URL</span><span class="op" id="7717079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717084">Scheme</span><span class="op" id="7717090">:</span>&nbsp;<span class="string" id="7717092">&#34;http&#34;</span><span class="op" id="7717098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717103">User</span><span class="op" id="7717107">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7717111">UserPassword</span><span class="op" id="7717123">(</span><span class="string" id="7717124">&#34;jane&#34;</span><span class="op" id="7717130">,</span>&nbsp;<span class="string" id="7717132">&#34;p@ssword&#34;</span><span class="op" id="7717142">)</span><span class="op" id="7717143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717148">Host</span><span class="op" id="7717152">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7717156">&#34;google.com&#34;</span><span class="op" id="7717168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717172">}</span><span class="op" id="7717173">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717177">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7717212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717215">}</span><span class="op" id="7717216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717223">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7717267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717271">&amp;</span><span class="ident" id="7717272">URL</span><span class="op" id="7717275">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717280">Scheme</span><span class="op" id="7717286">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7717290">&#34;http&#34;</span><span class="op" id="7717296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717301">User</span><span class="op" id="7717305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717311">UserPassword</span><span class="op" id="7717323">(</span><span class="string" id="7717324">&#34;j@ne&#34;</span><span class="op" id="7717330">,</span>&nbsp;<span class="string" id="7717332">&#34;password&#34;</span><span class="op" id="7717342">)</span><span class="op" id="7717343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717348">Host</span><span class="op" id="7717352">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7717358">&#34;google.com&#34;</span><span class="op" id="7717370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717375">Path</span><span class="op" id="7717379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7717385">&#34;/p@th&#34;</span><span class="op" id="7717392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717397">RawQuery</span><span class="op" id="7717405">:</span>&nbsp;<span class="string" id="7717407">&#34;q=@go&#34;</span><span class="op" id="7717414">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717418">}</span><span class="op" id="7717419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717423">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7717469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717472">}</span><span class="op" id="7717473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717480">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7717522">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717526">&amp;</span><span class="ident" id="7717527">URL</span><span class="op" id="7717530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717535">Scheme</span><span class="op" id="7717541">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7717545">&#34;http&#34;</span><span class="op" id="7717551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717556">Host</span><span class="op" id="7717560">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7717566">&#34;www.google.com&#34;</span><span class="op" id="7717582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717587">Path</span><span class="op" id="7717591">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7717597">&#34;/&#34;</span><span class="op" id="7717600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717605">RawQuery</span><span class="op" id="7717613">:</span>&nbsp;<span class="string" id="7717615">&#34;q=go+language&#34;</span><span class="op" id="7717630">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717635">Fragment</span><span class="op" id="7717643">:</span>&nbsp;<span class="string" id="7717645">&#34;foo&#34;</span><span class="op" id="7717650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717654">}</span><span class="op" id="7717655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717659">&#34;&#34;</span><span class="op" id="7717661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717664">}</span><span class="op" id="7717665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717668">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717672">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7717720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717724">&amp;</span><span class="ident" id="7717725">URL</span><span class="op" id="7717728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717733">Scheme</span><span class="op" id="7717739">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7717743">&#34;http&#34;</span><span class="op" id="7717749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717754">Host</span><span class="op" id="7717758">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7717764">&#34;www.google.com&#34;</span><span class="op" id="7717780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717785">Path</span><span class="op" id="7717789">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7717795">&#34;/&#34;</span><span class="op" id="7717798">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717803">RawQuery</span><span class="op" id="7717811">:</span>&nbsp;<span class="string" id="7717813">&#34;q=go+language&#34;</span><span class="op" id="7717828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717833">Fragment</span><span class="op" id="7717841">:</span>&nbsp;<span class="string" id="7717843">&#34;foo&amp;bar&#34;</span><span class="op" id="7717852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717856">}</span><span class="op" id="7717857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717861">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7717907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717910">}</span><span class="op" id="7717911">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717918">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7717944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717948">&amp;</span><span class="ident" id="7717949">URL</span><span class="op" id="7717952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717957">Scheme</span><span class="op" id="7717963">:</span>&nbsp;<span class="string" id="7717965">&#34;file&#34;</span><span class="op" id="7717971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717976">Host</span><span class="op" id="7717980">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7717984">&#34;&#34;</span><span class="op" id="7717986">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717991">Path</span><span class="op" id="7717995">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7717999">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7718018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718022">}</span><span class="op" id="7718023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718027">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7718053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718056">}</span><span class="op" id="7718057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718060">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718110">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718168">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7718195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718199">&amp;</span><span class="ident" id="7718200">URL</span><span class="op" id="7718203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718208">Scheme</span><span class="op" id="7718214">:</span>&nbsp;<span class="string" id="7718216">&#34;file&#34;</span><span class="op" id="7718222">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718227">Host</span><span class="op" id="7718231">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7718235">&#34;&#34;</span><span class="op" id="7718237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718242">Path</span><span class="op" id="7718246">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7718250">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7718270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718274">}</span><span class="op" id="7718275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718279">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7718306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718309">}</span><span class="op" id="7718310">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718313">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718345">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7718374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718378">&amp;</span><span class="ident" id="7718379">URL</span><span class="op" id="7718382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718387">Scheme</span><span class="op" id="7718393">:</span>&nbsp;<span class="string" id="7718395">&#34;mailto&#34;</span><span class="op" id="7718403">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718408">Opaque</span><span class="op" id="7718414">:</span>&nbsp;<span class="string" id="7718416">&#34;webmaster@golang.org&#34;</span><span class="op" id="7718438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718442">}</span><span class="op" id="7718443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718447">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7718476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718479">}</span><span class="op" id="7718480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718483">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718505">&#34;a/b/c&#34;</span><span class="op" id="7718512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718516">&amp;</span><span class="ident" id="7718517">URL</span><span class="op" id="7718520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718525">Path</span><span class="op" id="7718529">:</span>&nbsp;<span class="string" id="7718531">&#34;a/b/c&#34;</span><span class="op" id="7718538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718542">}</span><span class="op" id="7718543">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718547">&#34;a/b/c&#34;</span><span class="op" id="7718554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718557">}</span><span class="op" id="7718558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718561">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718606">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7718642">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718646">&amp;</span><span class="ident" id="7718647">URL</span><span class="op" id="7718650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718655">Scheme</span><span class="op" id="7718661">:</span>&nbsp;<span class="string" id="7718663">&#34;http&#34;</span><span class="op" id="7718669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718674">User</span><span class="op" id="7718678">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7718682">UserPassword</span><span class="op" id="7718694">(</span><span class="string" id="7718695">&#34;?am&#34;</span><span class="op" id="7718700">,</span>&nbsp;<span class="string" id="7718702">&#34;pa?sword&#34;</span><span class="op" id="7718712">)</span><span class="op" id="7718713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718718">Host</span><span class="op" id="7718722">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7718726">&#34;google.com&#34;</span><span class="op" id="7718738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718742">}</span><span class="op" id="7718743">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7718747">&#34;&#34;</span><span class="op" id="7718749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718752">}</span><span class="op" id="7718753">,</span><br>
<span class="lineno"></span><span class="op" id="7718755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7718758">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7718820">func</span>&nbsp;<span class="ident" id="7718825">ufmt</span><span class="op" id="7718829">(</span><span class="ident" id="7718830">u</span>&nbsp;<span class="op" id="7718832">*</span><span class="ident" id="7718833">URL</span><span class="op" id="7718836">)</span>&nbsp;<span class="builtintype" id="7718838">string</span>&nbsp;<span class="op" id="7718845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718848">var</span>&nbsp;<span class="ident" id="7718852">user</span><span class="op" id="7718856">,</span>&nbsp;<span class="ident" id="7718858">pass</span>&nbsp;<span class="keyword" id="7718863">interface</span><span class="op" id="7718872">{</span><span class="op" id="7718873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718876">if</span>&nbsp;<span class="ident" id="7718879">u</span><span class="op" id="7718880">.</span><span class="ident" id="7718881">User</span>&nbsp;<span class="op" id="7718886">!=</span>&nbsp;<span class="ident" id="7718889">nil</span>&nbsp;<span class="op" id="7718893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718897">user</span>&nbsp;<span class="op" id="7718902">=</span>&nbsp;<span class="ident" id="7718904">u</span><span class="op" id="7718905">.</span><span class="ident" id="7718906">User</span><span class="op" id="7718910">.</span><span class="ident" id="7718911">Username</span><span class="op" id="7718919">(</span><span class="op" id="7718920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718924">if</span>&nbsp;<span class="ident" id="7718927">p</span><span class="op" id="7718928">,</span>&nbsp;<span class="ident" id="7718930">ok</span>&nbsp;<span class="op" id="7718933">:=</span>&nbsp;<span class="ident" id="7718936">u</span><span class="op" id="7718937">.</span><span class="ident" id="7718938">User</span><span class="op" id="7718942">.</span><span class="ident" id="7718943">Password</span><span class="op" id="7718951">(</span><span class="op" id="7718952">)</span><span class="op" id="7718953">;</span>&nbsp;<span class="ident" id="7718955">ok</span>&nbsp;<span class="op" id="7718958">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718963">pass</span>&nbsp;<span class="op" id="7718968">=</span>&nbsp;<span class="ident" id="7718970">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718980">return</span>&nbsp;<span class="ident" id="7718987">fmt</span><span class="op" id="7718990">.</span><span class="ident" id="7718991">Sprintf</span><span class="op" id="7718998">(</span><span class="string" id="7718999">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7719077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719081">u</span><span class="op" id="7719082">.</span><span class="ident" id="7719083">Opaque</span><span class="op" id="7719089">,</span>&nbsp;<span class="ident" id="7719091">u</span><span class="op" id="7719092">.</span><span class="ident" id="7719093">Scheme</span><span class="op" id="7719099">,</span>&nbsp;<span class="ident" id="7719101">user</span><span class="op" id="7719105">,</span>&nbsp;<span class="ident" id="7719107">pass</span><span class="op" id="7719111">,</span>&nbsp;<span class="ident" id="7719113">u</span><span class="op" id="7719114">.</span><span class="ident" id="7719115">Host</span><span class="op" id="7719119">,</span>&nbsp;<span class="ident" id="7719121">u</span><span class="op" id="7719122">.</span><span class="ident" id="7719123">Path</span><span class="op" id="7719127">,</span>&nbsp;<span class="ident" id="7719129">u</span><span class="op" id="7719130">.</span><span class="ident" id="7719131">RawQuery</span><span class="op" id="7719139">,</span>&nbsp;<span class="ident" id="7719141">u</span><span class="op" id="7719142">.</span><span class="ident" id="7719143">Fragment</span><span class="op" id="7719151">)</span><br>
<span class="lineno">305</span><span class="op" id="7719153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7719156">func</span>&nbsp;<span class="ident" id="7719161">DoTest</span><span class="op" id="7719167">(</span><span class="ident" id="7719168">t</span>&nbsp;<span class="op" id="7719170">*</span><span class="ident" id="7719171">testing</span><span class="op" id="7719178">.</span><span class="ident" id="7719179">T</span><span class="op" id="7719180">,</span>&nbsp;<span class="ident" id="7719182">parse</span>&nbsp;<span class="keyword" id="7719188">func</span><span class="op" id="7719192">(</span><span class="builtintype" id="7719193">string</span><span class="op" id="7719199">)</span>&nbsp;<span class="op" id="7719201">(</span><span class="op" id="7719202">*</span><span class="ident" id="7719203">URL</span><span class="op" id="7719206">,</span>&nbsp;<span class="builtintype" id="7719208">error</span><span class="op" id="7719213">)</span><span class="op" id="7719214">,</span>&nbsp;<span class="ident" id="7719216">name</span>&nbsp;<span class="builtintype" id="7719221">string</span><span class="op" id="7719227">,</span>&nbsp;<span class="ident" id="7719229">tests</span>&nbsp;<span class="op" id="7719235">[</span><span class="op" id="7719236">]</span><span class="ident" id="7719237">URLTest</span><span class="op" id="7719244">)</span>&nbsp;<span class="op" id="7719246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719249">for</span>&nbsp;<span class="ident" id="7719253">_</span><span class="op" id="7719254">,</span>&nbsp;<span class="ident" id="7719256">tt</span>&nbsp;<span class="op" id="7719259">:=</span>&nbsp;<span class="keyword" id="7719262">range</span>&nbsp;<span class="ident" id="7719268">tests</span>&nbsp;<span class="op" id="7719274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719278">u</span><span class="op" id="7719279">,</span>&nbsp;<span class="ident" id="7719281">err</span>&nbsp;<span class="op" id="7719285">:=</span>&nbsp;<span class="ident" id="7719288">parse</span><span class="op" id="7719293">(</span><span class="ident" id="7719294">tt</span><span class="op" id="7719296">.</span><span class="ident" id="7719297">in</span><span class="op" id="7719299">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719303">if</span>&nbsp;<span class="ident" id="7719306">err</span>&nbsp;<span class="op" id="7719310">!=</span>&nbsp;<span class="ident" id="7719313">nil</span>&nbsp;<span class="op" id="7719317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719322">t</span><span class="op" id="7719323">.</span><span class="ident" id="7719324">Errorf</span><span class="op" id="7719330">(</span><span class="string" id="7719331">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7719357">,</span>&nbsp;<span class="ident" id="7719359">name</span><span class="op" id="7719363">,</span>&nbsp;<span class="ident" id="7719365">tt</span><span class="op" id="7719367">.</span><span class="ident" id="7719368">in</span><span class="op" id="7719370">,</span>&nbsp;<span class="ident" id="7719372">err</span><span class="op" id="7719375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719380">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719395">if</span>&nbsp;<span class="op" id="7719398">!</span><span class="ident" id="7719399">reflect</span><span class="op" id="7719406">.</span><span class="ident" id="7719407">DeepEqual</span><span class="op" id="7719416">(</span><span class="ident" id="7719417">u</span><span class="op" id="7719418">,</span>&nbsp;<span class="ident" id="7719420">tt</span><span class="op" id="7719422">.</span><span class="ident" id="7719423">out</span><span class="op" id="7719426">)</span>&nbsp;<span class="op" id="7719428">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719433">t</span><span class="op" id="7719434">.</span><span class="ident" id="7719435">Errorf</span><span class="op" id="7719441">(</span><span class="string" id="7719442">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7719475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719481">name</span><span class="op" id="7719485">,</span>&nbsp;<span class="ident" id="7719487">tt</span><span class="op" id="7719489">.</span><span class="ident" id="7719490">in</span><span class="op" id="7719492">,</span>&nbsp;<span class="ident" id="7719494">ufmt</span><span class="op" id="7719498">(</span><span class="ident" id="7719499">u</span><span class="op" id="7719500">)</span><span class="op" id="7719501">,</span>&nbsp;<span class="ident" id="7719503">ufmt</span><span class="op" id="7719507">(</span><span class="ident" id="7719508">tt</span><span class="op" id="7719510">.</span><span class="ident" id="7719511">out</span><span class="op" id="7719514">)</span><span class="op" id="7719515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719522">}</span><br>
<span class="lineno"></span><span class="op" id="7719524">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7719527">func</span>&nbsp;<span class="ident" id="7719532">BenchmarkString</span><span class="op" id="7719547">(</span><span class="ident" id="7719548">b</span>&nbsp;<span class="op" id="7719550">*</span><span class="ident" id="7719551">testing</span><span class="op" id="7719558">.</span><span class="ident" id="7719559">B</span><span class="op" id="7719560">)</span>&nbsp;<span class="op" id="7719562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719565">b</span><span class="op" id="7719566">.</span><span class="ident" id="7719567">StopTimer</span><span class="op" id="7719576">(</span><span class="op" id="7719577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719580">b</span><span class="op" id="7719581">.</span><span class="ident" id="7719582">ReportAllocs</span><span class="op" id="7719594">(</span><span class="op" id="7719595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719598">for</span>&nbsp;<span class="ident" id="7719602">_</span><span class="op" id="7719603">,</span>&nbsp;<span class="ident" id="7719605">tt</span>&nbsp;<span class="op" id="7719608">:=</span>&nbsp;<span class="keyword" id="7719611">range</span>&nbsp;<span class="ident" id="7719617">urltests</span>&nbsp;<span class="op" id="7719626">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719630">u</span><span class="op" id="7719631">,</span>&nbsp;<span class="ident" id="7719633">err</span>&nbsp;<span class="op" id="7719637">:=</span>&nbsp;<span class="ident" id="7719640">Parse</span><span class="op" id="7719645">(</span><span class="ident" id="7719646">tt</span><span class="op" id="7719648">.</span><span class="ident" id="7719649">in</span><span class="op" id="7719651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719655">if</span>&nbsp;<span class="ident" id="7719658">err</span>&nbsp;<span class="op" id="7719662">!=</span>&nbsp;<span class="ident" id="7719665">nil</span>&nbsp;<span class="op" id="7719669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719674">b</span><span class="op" id="7719675">.</span><span class="ident" id="7719676">Errorf</span><span class="op" id="7719682">(</span><span class="string" id="7719683">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7719712">,</span>&nbsp;<span class="ident" id="7719714">tt</span><span class="op" id="7719716">.</span><span class="ident" id="7719717">in</span><span class="op" id="7719719">,</span>&nbsp;<span class="ident" id="7719721">err</span><span class="op" id="7719724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719729">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719740">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719744">if</span>&nbsp;<span class="ident" id="7719747">tt</span><span class="op" id="7719749">.</span><span class="ident" id="7719750">roundtrip</span>&nbsp;<span class="op" id="7719760">==</span>&nbsp;<span class="string" id="7719763">&#34;&#34;</span>&nbsp;<span class="op" id="7719766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719771">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719786">b</span><span class="op" id="7719787">.</span><span class="ident" id="7719788">StartTimer</span><span class="op" id="7719798">(</span><span class="op" id="7719799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719803">var</span>&nbsp;<span class="ident" id="7719807">g</span>&nbsp;<span class="builtintype" id="7719809">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719818">for</span>&nbsp;<span class="ident" id="7719822">i</span>&nbsp;<span class="op" id="7719824">:=</span>&nbsp;<span class="num" id="7719827">0</span><span class="op" id="7719828">;</span>&nbsp;<span class="ident" id="7719830">i</span>&nbsp;<span class="op" id="7719832">&lt;</span>&nbsp;<span class="ident" id="7719834">b</span><span class="op" id="7719835">.</span><span class="ident" id="7719836">N</span><span class="op" id="7719837">;</span>&nbsp;<span class="ident" id="7719839">i</span><span class="op" id="7719840">++</span>&nbsp;<span class="op" id="7719843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719848">g</span>&nbsp;<span class="op" id="7719850">=</span>&nbsp;<span class="ident" id="7719852">u</span><span class="op" id="7719853">.</span><span class="ident" id="7719854">String</span><span class="op" id="7719860">(</span><span class="op" id="7719861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719869">b</span><span class="op" id="7719870">.</span><span class="ident" id="7719871">StopTimer</span><span class="op" id="7719880">(</span><span class="op" id="7719881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719885">if</span>&nbsp;<span class="ident" id="7719888">w</span>&nbsp;<span class="op" id="7719890">:=</span>&nbsp;<span class="ident" id="7719893">tt</span><span class="op" id="7719895">.</span><span class="ident" id="7719896">roundtrip</span><span class="op" id="7719905">;</span>&nbsp;<span class="ident" id="7719907">g</span>&nbsp;<span class="op" id="7719909">!=</span>&nbsp;<span class="ident" id="7719912">w</span>&nbsp;<span class="op" id="7719914">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719919">b</span><span class="op" id="7719920">.</span><span class="ident" id="7719921">Errorf</span><span class="op" id="7719927">(</span><span class="string" id="7719928">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719963">,</span>&nbsp;<span class="ident" id="7719965">tt</span><span class="op" id="7719967">.</span><span class="ident" id="7719968">in</span><span class="op" id="7719970">,</span>&nbsp;<span class="ident" id="7719972">g</span><span class="op" id="7719973">,</span>&nbsp;<span class="ident" id="7719975">w</span><span class="op" id="7719976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719983">}</span><br>
<span class="lineno"></span><span class="op" id="7719985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7719988">func</span>&nbsp;<span class="ident" id="7719993">TestParse</span><span class="op" id="7720002">(</span><span class="ident" id="7720003">t</span>&nbsp;<span class="op" id="7720005">*</span><span class="ident" id="7720006">testing</span><span class="op" id="7720013">.</span><span class="ident" id="7720014">T</span><span class="op" id="7720015">)</span>&nbsp;<span class="op" id="7720017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720020">DoTest</span><span class="op" id="7720026">(</span><span class="ident" id="7720027">t</span><span class="op" id="7720028">,</span>&nbsp;<span class="ident" id="7720030">Parse</span><span class="op" id="7720035">,</span>&nbsp;<span class="string" id="7720037">&#34;Parse&#34;</span><span class="op" id="7720044">,</span>&nbsp;<span class="ident" id="7720046">urltests</span><span class="op" id="7720054">)</span><br>
<span class="lineno"></span><span class="op" id="7720056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720059">const</span>&nbsp;<span class="ident" id="7720065">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7720093">=</span>&nbsp;<span class="string" id="7720095">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7720134">var</span>&nbsp;<span class="ident" id="7720138">parseRequestURLTests</span>&nbsp;<span class="op" id="7720159">=</span>&nbsp;<span class="op" id="7720161">[</span><span class="op" id="7720162">]</span><span class="keyword" id="7720163">struct</span>&nbsp;<span class="op" id="7720170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720173">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7720187">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720195">expectedValid</span>&nbsp;<span class="builtintype" id="7720209">bool</span><br>
<span class="lineno"></span><span class="op" id="7720214">}</span><span class="op" id="7720215">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720218">{</span><span class="string" id="7720219">&#34;http://foo.com&#34;</span><span class="op" id="7720235">,</span>&nbsp;<span class="builtintype" id="7720237">true</span><span class="op" id="7720241">}</span><span class="op" id="7720242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720245">{</span><span class="string" id="7720246">&#34;http://foo.com/&#34;</span><span class="op" id="7720263">,</span>&nbsp;<span class="builtintype" id="7720265">true</span><span class="op" id="7720269">}</span><span class="op" id="7720270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720273">{</span><span class="string" id="7720274">&#34;http://foo.com/path&#34;</span><span class="op" id="7720295">,</span>&nbsp;<span class="builtintype" id="7720297">true</span><span class="op" id="7720301">}</span><span class="op" id="7720302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720305">{</span><span class="string" id="7720306">&#34;/&#34;</span><span class="op" id="7720309">,</span>&nbsp;<span class="builtintype" id="7720311">true</span><span class="op" id="7720315">}</span><span class="op" id="7720316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720319">{</span><span class="ident" id="7720320">pathThatLooksSchemeRelative</span><span class="op" id="7720347">,</span>&nbsp;<span class="builtintype" id="7720349">true</span><span class="op" id="7720353">}</span><span class="op" id="7720354">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720357">{</span><span class="string" id="7720358">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7720403">,</span>&nbsp;<span class="builtintype" id="7720405">true</span><span class="op" id="7720409">}</span><span class="op" id="7720410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720413">{</span><span class="string" id="7720414">&#34;foo.html&#34;</span><span class="op" id="7720424">,</span>&nbsp;<span class="builtintype" id="7720426">false</span><span class="op" id="7720431">}</span><span class="op" id="7720432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720435">{</span><span class="string" id="7720436">&#34;../dir/&#34;</span><span class="op" id="7720445">,</span>&nbsp;<span class="builtintype" id="7720447">false</span><span class="op" id="7720452">}</span><span class="op" id="7720453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720456">{</span><span class="string" id="7720457">&#34;*&#34;</span><span class="op" id="7720460">,</span>&nbsp;<span class="builtintype" id="7720462">true</span><span class="op" id="7720466">}</span><span class="op" id="7720467">,</span><br>
<span class="lineno"></span><span class="op" id="7720469">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7720472">func</span>&nbsp;<span class="ident" id="7720477">TestParseRequestURI</span><span class="op" id="7720496">(</span><span class="ident" id="7720497">t</span>&nbsp;<span class="op" id="7720499">*</span><span class="ident" id="7720500">testing</span><span class="op" id="7720507">.</span><span class="ident" id="7720508">T</span><span class="op" id="7720509">)</span>&nbsp;<span class="op" id="7720511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720514">for</span>&nbsp;<span class="ident" id="7720518">_</span><span class="op" id="7720519">,</span>&nbsp;<span class="ident" id="7720521">test</span>&nbsp;<span class="op" id="7720526">:=</span>&nbsp;<span class="keyword" id="7720529">range</span>&nbsp;<span class="ident" id="7720535">parseRequestURLTests</span>&nbsp;<span class="op" id="7720556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720560">_</span><span class="op" id="7720561">,</span>&nbsp;<span class="ident" id="7720563">err</span>&nbsp;<span class="op" id="7720567">:=</span>&nbsp;<span class="ident" id="7720570">ParseRequestURI</span><span class="op" id="7720585">(</span><span class="ident" id="7720586">test</span><span class="op" id="7720590">.</span><span class="ident" id="7720591">url</span><span class="op" id="7720594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720598">valid</span>&nbsp;<span class="op" id="7720604">:=</span>&nbsp;<span class="ident" id="7720607">err</span>&nbsp;<span class="op" id="7720611">==</span>&nbsp;<span class="ident" id="7720614">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720620">if</span>&nbsp;<span class="ident" id="7720623">valid</span>&nbsp;<span class="op" id="7720629">!=</span>&nbsp;<span class="ident" id="7720632">test</span><span class="op" id="7720636">.</span><span class="ident" id="7720637">expectedValid</span>&nbsp;<span class="op" id="7720651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720656">t</span><span class="op" id="7720657">.</span><span class="ident" id="7720658">Errorf</span><span class="op" id="7720664">(</span><span class="string" id="7720665">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7720699">,</span>&nbsp;<span class="ident" id="7720701">test</span><span class="op" id="7720705">.</span><span class="ident" id="7720706">expectedValid</span><span class="op" id="7720719">,</span>&nbsp;<span class="ident" id="7720721">test</span><span class="op" id="7720725">.</span><span class="ident" id="7720726">url</span><span class="op" id="7720729">,</span>&nbsp;<span class="ident" id="7720731">valid</span><span class="op" id="7720736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720747">url</span><span class="op" id="7720750">,</span>&nbsp;<span class="ident" id="7720752">err</span>&nbsp;<span class="op" id="7720756">:=</span>&nbsp;<span class="ident" id="7720759">ParseRequestURI</span><span class="op" id="7720774">(</span><span class="ident" id="7720775">pathThatLooksSchemeRelative</span><span class="op" id="7720802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720805">if</span>&nbsp;<span class="ident" id="7720808">err</span>&nbsp;<span class="op" id="7720812">!=</span>&nbsp;<span class="ident" id="7720815">nil</span>&nbsp;<span class="op" id="7720819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720823">t</span><span class="op" id="7720824">.</span><span class="ident" id="7720825">Fatalf</span><span class="op" id="7720831">(</span><span class="string" id="7720832">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7720853">,</span>&nbsp;<span class="ident" id="7720855">err</span><span class="op" id="7720858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720864">if</span>&nbsp;<span class="ident" id="7720867">url</span><span class="op" id="7720870">.</span><span class="ident" id="7720871">Path</span>&nbsp;<span class="op" id="7720876">!=</span>&nbsp;<span class="ident" id="7720879">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7720907">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720911">t</span><span class="op" id="7720912">.</span><span class="ident" id="7720913">Errorf</span><span class="op" id="7720919">(</span><span class="string" id="7720920">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7720946">,</span>&nbsp;<span class="ident" id="7720948">pathThatLooksSchemeRelative</span><span class="op" id="7720975">,</span>&nbsp;<span class="ident" id="7720977">url</span><span class="op" id="7720980">.</span><span class="ident" id="7720981">Path</span><span class="op" id="7720985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720988">}</span><br>
<span class="lineno"></span><span class="op" id="7720990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720993">func</span>&nbsp;<span class="ident" id="7720998">DoTestString</span><span class="op" id="7721010">(</span><span class="ident" id="7721011">t</span>&nbsp;<span class="op" id="7721013">*</span><span class="ident" id="7721014">testing</span><span class="op" id="7721021">.</span><span class="ident" id="7721022">T</span><span class="op" id="7721023">,</span>&nbsp;<span class="ident" id="7721025">parse</span>&nbsp;<span class="keyword" id="7721031">func</span><span class="op" id="7721035">(</span><span class="builtintype" id="7721036">string</span><span class="op" id="7721042">)</span>&nbsp;<span class="op" id="7721044">(</span><span class="op" id="7721045">*</span><span class="ident" id="7721046">URL</span><span class="op" id="7721049">,</span>&nbsp;<span class="builtintype" id="7721051">error</span><span class="op" id="7721056">)</span><span class="op" id="7721057">,</span>&nbsp;<span class="ident" id="7721059">name</span>&nbsp;<span class="builtintype" id="7721064">string</span><span class="op" id="7721070">,</span>&nbsp;<span class="ident" id="7721072">tests</span>&nbsp;<span class="op" id="7721078">[</span><span class="op" id="7721079">]</span><span class="ident" id="7721080">URLTest</span><span class="op" id="7721087">)</span>&nbsp;<span class="op" id="7721089">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721092">for</span>&nbsp;<span class="ident" id="7721096">_</span><span class="op" id="7721097">,</span>&nbsp;<span class="ident" id="7721099">tt</span>&nbsp;<span class="op" id="7721102">:=</span>&nbsp;<span class="keyword" id="7721105">range</span>&nbsp;<span class="ident" id="7721111">tests</span>&nbsp;<span class="op" id="7721117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721121">u</span><span class="op" id="7721122">,</span>&nbsp;<span class="ident" id="7721124">err</span>&nbsp;<span class="op" id="7721128">:=</span>&nbsp;<span class="ident" id="7721131">parse</span><span class="op" id="7721136">(</span><span class="ident" id="7721137">tt</span><span class="op" id="7721139">.</span><span class="ident" id="7721140">in</span><span class="op" id="7721142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721146">if</span>&nbsp;<span class="ident" id="7721149">err</span>&nbsp;<span class="op" id="7721153">!=</span>&nbsp;<span class="ident" id="7721156">nil</span>&nbsp;<span class="op" id="7721160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721165">t</span><span class="op" id="7721166">.</span><span class="ident" id="7721167">Errorf</span><span class="op" id="7721173">(</span><span class="string" id="7721174">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7721200">,</span>&nbsp;<span class="ident" id="7721202">name</span><span class="op" id="7721206">,</span>&nbsp;<span class="ident" id="7721208">tt</span><span class="op" id="7721210">.</span><span class="ident" id="7721211">in</span><span class="op" id="7721213">,</span>&nbsp;<span class="ident" id="7721215">err</span><span class="op" id="7721218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721223">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721238">expected</span>&nbsp;<span class="op" id="7721247">:=</span>&nbsp;<span class="ident" id="7721250">tt</span><span class="op" id="7721252">.</span><span class="ident" id="7721253">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721258">if</span>&nbsp;<span class="builtinfunc" id="7721261">len</span><span class="op" id="7721264">(</span><span class="ident" id="7721265">tt</span><span class="op" id="7721267">.</span><span class="ident" id="7721268">roundtrip</span><span class="op" id="7721277">)</span>&nbsp;<span class="op" id="7721279">&gt;</span>&nbsp;<span class="num" id="7721281">0</span>&nbsp;<span class="op" id="7721283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721288">expected</span>&nbsp;<span class="op" id="7721297">=</span>&nbsp;<span class="ident" id="7721299">tt</span><span class="op" id="7721301">.</span><span class="ident" id="7721302">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721314">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721318">s</span>&nbsp;<span class="op" id="7721320">:=</span>&nbsp;<span class="ident" id="7721323">u</span><span class="op" id="7721324">.</span><span class="ident" id="7721325">String</span><span class="op" id="7721331">(</span><span class="op" id="7721332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721336">if</span>&nbsp;<span class="ident" id="7721339">s</span>&nbsp;<span class="op" id="7721341">!=</span>&nbsp;<span class="ident" id="7721344">expected</span>&nbsp;<span class="op" id="7721353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721358">t</span><span class="op" id="7721359">.</span><span class="ident" id="7721360">Errorf</span><span class="op" id="7721366">(</span><span class="string" id="7721367">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7721404">,</span>&nbsp;<span class="ident" id="7721406">name</span><span class="op" id="7721410">,</span>&nbsp;<span class="ident" id="7721412">tt</span><span class="op" id="7721414">.</span><span class="ident" id="7721415">in</span><span class="op" id="7721417">,</span>&nbsp;<span class="ident" id="7721419">s</span><span class="op" id="7721420">,</span>&nbsp;<span class="ident" id="7721422">expected</span><span class="op" id="7721430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721437">}</span><br>
<span class="lineno">400</span><span class="op" id="7721439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721442">func</span>&nbsp;<span class="ident" id="7721447">TestURLString</span><span class="op" id="7721460">(</span><span class="ident" id="7721461">t</span>&nbsp;<span class="op" id="7721463">*</span><span class="ident" id="7721464">testing</span><span class="op" id="7721471">.</span><span class="ident" id="7721472">T</span><span class="op" id="7721473">)</span>&nbsp;<span class="op" id="7721475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721478">DoTestString</span><span class="op" id="7721490">(</span><span class="ident" id="7721491">t</span><span class="op" id="7721492">,</span>&nbsp;<span class="ident" id="7721494">Parse</span><span class="op" id="7721499">,</span>&nbsp;<span class="string" id="7721501">&#34;Parse&#34;</span><span class="op" id="7721508">,</span>&nbsp;<span class="ident" id="7721510">urltests</span><span class="op" id="7721518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721522">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721566">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721593">noslash</span>&nbsp;<span class="op" id="7721601">:=</span>&nbsp;<span class="ident" id="7721604">URLTest</span><span class="op" id="7721611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721615">&#34;http://www.google.com/search&#34;</span><span class="op" id="7721645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721649">&amp;</span><span class="ident" id="7721650">URL</span><span class="op" id="7721653">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721658">Scheme</span><span class="op" id="7721664">:</span>&nbsp;<span class="string" id="7721666">&#34;http&#34;</span><span class="op" id="7721672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721677">Host</span><span class="op" id="7721681">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7721685">&#34;www.google.com&#34;</span><span class="op" id="7721701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721706">Path</span><span class="op" id="7721710">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7721714">&#34;search&#34;</span><span class="op" id="7721722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721726">}</span><span class="op" id="7721727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721731">&#34;&#34;</span><span class="op" id="7721733">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721739">s</span>&nbsp;<span class="op" id="7721741">:=</span>&nbsp;<span class="ident" id="7721744">noslash</span><span class="op" id="7721751">.</span><span class="ident" id="7721752">out</span><span class="op" id="7721755">.</span><span class="ident" id="7721756">String</span><span class="op" id="7721762">(</span><span class="op" id="7721763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721766">if</span>&nbsp;<span class="ident" id="7721769">s</span>&nbsp;<span class="op" id="7721771">!=</span>&nbsp;<span class="ident" id="7721774">noslash</span><span class="op" id="7721781">.</span><span class="ident" id="7721782">in</span>&nbsp;<span class="op" id="7721785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721789">t</span><span class="op" id="7721790">.</span><span class="ident" id="7721791">Errorf</span><span class="op" id="7721797">(</span><span class="string" id="7721798">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7721818">,</span>&nbsp;<span class="ident" id="7721820">noslash</span><span class="op" id="7721827">.</span><span class="ident" id="7721828">in</span><span class="op" id="7721830">,</span>&nbsp;<span class="ident" id="7721832">s</span><span class="op" id="7721833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721836">}</span><br>
<span class="lineno">420</span><span class="op" id="7721838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721841">type</span>&nbsp;<span class="ident" id="7721846">EscapeTest</span>&nbsp;<span class="keyword" id="7721857">struct</span>&nbsp;<span class="op" id="7721864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721867">in</span>&nbsp;&nbsp;<span class="builtintype" id="7721871">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721879">out</span>&nbsp;<span class="builtintype" id="7721883">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721891">err</span>&nbsp;<span class="builtintype" id="7721895">error</span><br>
<span class="lineno"></span><span class="op" id="7721901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721904">var</span>&nbsp;<span class="ident" id="7721908">unescapeTests</span>&nbsp;<span class="op" id="7721922">=</span>&nbsp;<span class="op" id="7721924">[</span><span class="op" id="7721925">]</span><span class="ident" id="7721926">EscapeTest</span><span class="op" id="7721936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721939">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721943">&#34;&#34;</span><span class="op" id="7721945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721949">&#34;&#34;</span><span class="op" id="7721951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721955">nil</span><span class="op" id="7721958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721961">}</span><span class="op" id="7721962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721965">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721969">&#34;abc&#34;</span><span class="op" id="7721974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7721978">&#34;abc&#34;</span><span class="op" id="7721983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721987">nil</span><span class="op" id="7721990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721993">}</span><span class="op" id="7721994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721997">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722001">&#34;1%41&#34;</span><span class="op" id="7722007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722011">&#34;1A&#34;</span><span class="op" id="7722015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722019">nil</span><span class="op" id="7722022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722025">}</span><span class="op" id="7722026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722029">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722033">&#34;1%41%42%43&#34;</span><span class="op" id="7722045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722049">&#34;1ABC&#34;</span><span class="op" id="7722055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722059">nil</span><span class="op" id="7722062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722065">}</span><span class="op" id="7722066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722069">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722073">&#34;%4a&#34;</span><span class="op" id="7722078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722082">&#34;J&#34;</span><span class="op" id="7722085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722089">nil</span><span class="op" id="7722092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722095">}</span><span class="op" id="7722096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722099">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722103">&#34;%6F&#34;</span><span class="op" id="7722108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722112">&#34;o&#34;</span><span class="op" id="7722115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722119">nil</span><span class="op" id="7722122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722125">}</span><span class="op" id="7722126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722129">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722133">&#34;%&#34;</span><span class="op" id="7722136">,</span>&nbsp;<span class="comment" id="7722138">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722173">&#34;&#34;</span><span class="op" id="7722175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722179">EscapeError</span><span class="op" id="7722190">(</span><span class="string" id="7722191">&#34;%&#34;</span><span class="op" id="7722194">)</span><span class="op" id="7722195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722198">}</span><span class="op" id="7722199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722202">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722206">&#34;%a&#34;</span><span class="op" id="7722210">,</span>&nbsp;<span class="comment" id="7722212">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722247">&#34;&#34;</span><span class="op" id="7722249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722253">EscapeError</span><span class="op" id="7722264">(</span><span class="string" id="7722265">&#34;%a&#34;</span><span class="op" id="7722269">)</span><span class="op" id="7722270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722273">}</span><span class="op" id="7722274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722277">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722281">&#34;%1&#34;</span><span class="op" id="7722285">,</span>&nbsp;<span class="comment" id="7722287">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722322">&#34;&#34;</span><span class="op" id="7722324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722328">EscapeError</span><span class="op" id="7722339">(</span><span class="string" id="7722340">&#34;%1&#34;</span><span class="op" id="7722344">)</span><span class="op" id="7722345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722348">}</span><span class="op" id="7722349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722352">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722356">&#34;123%45%6&#34;</span><span class="op" id="7722366">,</span>&nbsp;<span class="comment" id="7722368">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722403">&#34;&#34;</span><span class="op" id="7722405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722409">EscapeError</span><span class="op" id="7722420">(</span><span class="string" id="7722421">&#34;%6&#34;</span><span class="op" id="7722425">)</span><span class="op" id="7722426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722429">}</span><span class="op" id="7722430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722433">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722437">&#34;%zzzzz&#34;</span><span class="op" id="7722445">,</span>&nbsp;<span class="comment" id="7722447">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722471">&#34;&#34;</span><span class="op" id="7722473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722477">EscapeError</span><span class="op" id="7722488">(</span><span class="string" id="7722489">&#34;%zz&#34;</span><span class="op" id="7722494">)</span><span class="op" id="7722495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722498">}</span><span class="op" id="7722499">,</span><br>
<span class="lineno"></span><span class="op" id="7722501">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7722504">func</span>&nbsp;<span class="ident" id="7722509">TestUnescape</span><span class="op" id="7722521">(</span><span class="ident" id="7722522">t</span>&nbsp;<span class="op" id="7722524">*</span><span class="ident" id="7722525">testing</span><span class="op" id="7722532">.</span><span class="ident" id="7722533">T</span><span class="op" id="7722534">)</span>&nbsp;<span class="op" id="7722536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722539">for</span>&nbsp;<span class="ident" id="7722543">_</span><span class="op" id="7722544">,</span>&nbsp;<span class="ident" id="7722546">tt</span>&nbsp;<span class="op" id="7722549">:=</span>&nbsp;<span class="keyword" id="7722552">range</span>&nbsp;<span class="ident" id="7722558">unescapeTests</span>&nbsp;<span class="op" id="7722572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722576">actual</span><span class="op" id="7722582">,</span>&nbsp;<span class="ident" id="7722584">err</span>&nbsp;<span class="op" id="7722588">:=</span>&nbsp;<span class="ident" id="7722591">QueryUnescape</span><span class="op" id="7722604">(</span><span class="ident" id="7722605">tt</span><span class="op" id="7722607">.</span><span class="ident" id="7722608">in</span><span class="op" id="7722610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722614">if</span>&nbsp;<span class="ident" id="7722617">actual</span>&nbsp;<span class="op" id="7722624">!=</span>&nbsp;<span class="ident" id="7722627">tt</span><span class="op" id="7722629">.</span><span class="ident" id="7722630">out</span>&nbsp;<span class="op" id="7722634">||</span>&nbsp;<span class="op" id="7722637">(</span><span class="ident" id="7722638">err</span>&nbsp;<span class="op" id="7722642">!=</span>&nbsp;<span class="ident" id="7722645">nil</span><span class="op" id="7722648">)</span>&nbsp;<span class="op" id="7722650">!=</span>&nbsp;<span class="op" id="7722653">(</span><span class="ident" id="7722654">tt</span><span class="op" id="7722656">.</span><span class="ident" id="7722657">err</span>&nbsp;<span class="op" id="7722661">!=</span>&nbsp;<span class="ident" id="7722664">nil</span><span class="op" id="7722667">)</span>&nbsp;<span class="op" id="7722669">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722674">t</span><span class="op" id="7722675">.</span><span class="ident" id="7722676">Errorf</span><span class="op" id="7722682">(</span><span class="string" id="7722683">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7722724">,</span>&nbsp;<span class="ident" id="7722726">tt</span><span class="op" id="7722728">.</span><span class="ident" id="7722729">in</span><span class="op" id="7722731">,</span>&nbsp;<span class="ident" id="7722733">actual</span><span class="op" id="7722739">,</span>&nbsp;<span class="ident" id="7722741">err</span><span class="op" id="7722744">,</span>&nbsp;<span class="ident" id="7722746">tt</span><span class="op" id="7722748">.</span><span class="ident" id="7722749">out</span><span class="op" id="7722752">,</span>&nbsp;<span class="ident" id="7722754">tt</span><span class="op" id="7722756">.</span><span class="ident" id="7722757">err</span><span class="op" id="7722760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722767">}</span><br>
<span class="lineno"></span><span class="op" id="7722769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7722772">var</span>&nbsp;<span class="ident" id="7722776">escapeTests</span>&nbsp;<span class="op" id="7722788">=</span>&nbsp;<span class="op" id="7722790">[</span><span class="op" id="7722791">]</span><span class="ident" id="7722792">EscapeTest</span><span class="op" id="7722802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722809">&#34;&#34;</span><span class="op" id="7722811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722815">&#34;&#34;</span><span class="op" id="7722817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722821">nil</span><span class="op" id="7722824">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722827">}</span><span class="op" id="7722828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722835">&#34;abc&#34;</span><span class="op" id="7722840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722844">&#34;abc&#34;</span><span class="op" id="7722849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722853">nil</span><span class="op" id="7722856">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722859">}</span><span class="op" id="7722860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722867">&#34;one&nbsp;two&#34;</span><span class="op" id="7722876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722880">&#34;one+two&#34;</span><span class="op" id="7722889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722893">nil</span><span class="op" id="7722896">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722899">}</span><span class="op" id="7722900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722907">&#34;10%&#34;</span><span class="op" id="7722912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722916">&#34;10%25&#34;</span><span class="op" id="7722923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722927">nil</span><span class="op" id="7722930">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722933">}</span><span class="op" id="7722934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722941">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7722980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7722984">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7723086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723090">nil</span><span class="op" id="7723093">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723096">}</span><span class="op" id="7723097">,</span><br>
<span class="lineno"></span><span class="op" id="7723099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723102">func</span>&nbsp;<span class="ident" id="7723107">TestEscape</span><span class="op" id="7723117">(</span><span class="ident" id="7723118">t</span>&nbsp;<span class="op" id="7723120">*</span><span class="ident" id="7723121">testing</span><span class="op" id="7723128">.</span><span class="ident" id="7723129">T</span><span class="op" id="7723130">)</span>&nbsp;<span class="op" id="7723132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723135">for</span>&nbsp;<span class="ident" id="7723139">_</span><span class="op" id="7723140">,</span>&nbsp;<span class="ident" id="7723142">tt</span>&nbsp;<span class="op" id="7723145">:=</span>&nbsp;<span class="keyword" id="7723148">range</span>&nbsp;<span class="ident" id="7723154">escapeTests</span>&nbsp;<span class="op" id="7723166">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723170">actual</span>&nbsp;<span class="op" id="7723177">:=</span>&nbsp;<span class="ident" id="7723180">QueryEscape</span><span class="op" id="7723191">(</span><span class="ident" id="7723192">tt</span><span class="op" id="7723194">.</span><span class="ident" id="7723195">in</span><span class="op" id="7723197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723201">if</span>&nbsp;<span class="ident" id="7723204">tt</span><span class="op" id="7723206">.</span><span class="ident" id="7723207">out</span>&nbsp;<span class="op" id="7723211">!=</span>&nbsp;<span class="ident" id="7723214">actual</span>&nbsp;<span class="op" id="7723221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723226">t</span><span class="op" id="7723227">.</span><span class="ident" id="7723228">Errorf</span><span class="op" id="7723234">(</span><span class="string" id="7723235">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7723266">,</span>&nbsp;<span class="ident" id="7723268">tt</span><span class="op" id="7723270">.</span><span class="ident" id="7723271">in</span><span class="op" id="7723273">,</span>&nbsp;<span class="ident" id="7723275">actual</span><span class="op" id="7723281">,</span>&nbsp;<span class="ident" id="7723283">tt</span><span class="op" id="7723285">.</span><span class="ident" id="7723286">out</span><span class="op" id="7723289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723298">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723365">roundtrip</span><span class="op" id="7723374">,</span>&nbsp;<span class="ident" id="7723376">err</span>&nbsp;<span class="op" id="7723380">:=</span>&nbsp;<span class="ident" id="7723383">QueryUnescape</span><span class="op" id="7723396">(</span><span class="ident" id="7723397">actual</span><span class="op" id="7723403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723407">if</span>&nbsp;<span class="ident" id="7723410">roundtrip</span>&nbsp;<span class="op" id="7723420">!=</span>&nbsp;<span class="ident" id="7723423">tt</span><span class="op" id="7723425">.</span><span class="ident" id="7723426">in</span>&nbsp;<span class="op" id="7723429">||</span>&nbsp;<span class="ident" id="7723432">err</span>&nbsp;<span class="op" id="7723436">!=</span>&nbsp;<span class="ident" id="7723439">nil</span>&nbsp;<span class="op" id="7723443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723448">t</span><span class="op" id="7723449">.</span><span class="ident" id="7723450">Errorf</span><span class="op" id="7723456">(</span><span class="string" id="7723457">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7723498">,</span>&nbsp;<span class="ident" id="7723500">actual</span><span class="op" id="7723506">,</span>&nbsp;<span class="ident" id="7723508">roundtrip</span><span class="op" id="7723517">,</span>&nbsp;<span class="ident" id="7723519">err</span><span class="op" id="7723522">,</span>&nbsp;<span class="ident" id="7723524">tt</span><span class="op" id="7723526">.</span><span class="ident" id="7723527">in</span><span class="op" id="7723529">,</span>&nbsp;<span class="string" id="7723531">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7723543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723547">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723550">}</span><br>
<span class="lineno"></span><span class="op" id="7723552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7723555">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7723593">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7723635">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7723688">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7723771">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723776">type</span>&nbsp;<span class="ident" id="7723781">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7723797">struct</span>&nbsp;<span class="op" id="7723804">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723807">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7723816">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723824">expected</span>&nbsp;<span class="builtintype" id="7723833">string</span><br>
<span class="lineno"></span><span class="op" id="7723840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723843">var</span>&nbsp;<span class="ident" id="7723847">encodeQueryTests</span>&nbsp;<span class="op" id="7723864">=</span>&nbsp;<span class="op" id="7723866">[</span><span class="op" id="7723867">]</span><span class="ident" id="7723868">EncodeQueryTest</span><span class="op" id="7723883">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723886">{</span><span class="ident" id="7723887">nil</span><span class="op" id="7723890">,</span>&nbsp;<span class="string" id="7723892">&#34;&#34;</span><span class="op" id="7723894">}</span><span class="op" id="7723895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723898">{</span><span class="ident" id="7723899">Values</span><span class="op" id="7723905">{</span><span class="string" id="7723906">&#34;q&#34;</span><span class="op" id="7723909">:</span>&nbsp;<span class="op" id="7723911">{</span><span class="string" id="7723912">&#34;puppies&#34;</span><span class="op" id="7723921">}</span><span class="op" id="7723922">,</span>&nbsp;<span class="string" id="7723924">&#34;oe&#34;</span><span class="op" id="7723928">:</span>&nbsp;<span class="op" id="7723930">{</span><span class="string" id="7723931">&#34;utf8&#34;</span><span class="op" id="7723937">}</span><span class="op" id="7723938">}</span><span class="op" id="7723939">,</span>&nbsp;<span class="string" id="7723941">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7723960">}</span><span class="op" id="7723961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723964">{</span><span class="ident" id="7723965">Values</span><span class="op" id="7723971">{</span><span class="string" id="7723972">&#34;q&#34;</span><span class="op" id="7723975">:</span>&nbsp;<span class="op" id="7723977">{</span><span class="string" id="7723978">&#34;dogs&#34;</span><span class="op" id="7723984">,</span>&nbsp;<span class="string" id="7723986">&#34;&amp;&#34;</span><span class="op" id="7723989">,</span>&nbsp;<span class="string" id="7723991">&#34;7&#34;</span><span class="op" id="7723994">}</span><span class="op" id="7723995">}</span><span class="op" id="7723996">,</span>&nbsp;<span class="string" id="7723998">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7724016">}</span><span class="op" id="7724017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724020">{</span><span class="ident" id="7724021">Values</span><span class="op" id="7724027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7724031">&#34;a&#34;</span><span class="op" id="7724034">:</span>&nbsp;<span class="op" id="7724036">{</span><span class="string" id="7724037">&#34;a1&#34;</span><span class="op" id="7724041">,</span>&nbsp;<span class="string" id="7724043">&#34;a2&#34;</span><span class="op" id="7724047">,</span>&nbsp;<span class="string" id="7724049">&#34;a3&#34;</span><span class="op" id="7724053">}</span><span class="op" id="7724054">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7724058">&#34;b&#34;</span><span class="op" id="7724061">:</span>&nbsp;<span class="op" id="7724063">{</span><span class="string" id="7724064">&#34;b1&#34;</span><span class="op" id="7724068">,</span>&nbsp;<span class="string" id="7724070">&#34;b2&#34;</span><span class="op" id="7724074">,</span>&nbsp;<span class="string" id="7724076">&#34;b3&#34;</span><span class="op" id="7724080">}</span><span class="op" id="7724081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7724085">&#34;c&#34;</span><span class="op" id="7724088">:</span>&nbsp;<span class="op" id="7724090">{</span><span class="string" id="7724091">&#34;c1&#34;</span><span class="op" id="7724095">,</span>&nbsp;<span class="string" id="7724097">&#34;c2&#34;</span><span class="op" id="7724101">,</span>&nbsp;<span class="string" id="7724103">&#34;c3&#34;</span><span class="op" id="7724107">}</span><span class="op" id="7724108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724111">}</span><span class="op" id="7724112">,</span>&nbsp;<span class="string" id="7724114">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7724160">}</span><span class="op" id="7724161">,</span><br>
<span class="lineno"></span><span class="op" id="7724163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7724166">func</span>&nbsp;<span class="ident" id="7724171">TestEncodeQuery</span><span class="op" id="7724186">(</span><span class="ident" id="7724187">t</span>&nbsp;<span class="op" id="7724189">*</span><span class="ident" id="7724190">testing</span><span class="op" id="7724197">.</span><span class="ident" id="7724198">T</span><span class="op" id="7724199">)</span>&nbsp;<span class="op" id="7724201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724204">for</span>&nbsp;<span class="ident" id="7724208">_</span><span class="op" id="7724209">,</span>&nbsp;<span class="ident" id="7724211">tt</span>&nbsp;<span class="op" id="7724214">:=</span>&nbsp;<span class="keyword" id="7724217">range</span>&nbsp;<span class="ident" id="7724223">encodeQueryTests</span>&nbsp;<span class="op" id="7724240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724244">if</span>&nbsp;<span class="ident" id="7724247">q</span>&nbsp;<span class="op" id="7724249">:=</span>&nbsp;<span class="ident" id="7724252">tt</span><span class="op" id="7724254">.</span><span class="ident" id="7724255">m</span><span class="op" id="7724256">.</span><span class="ident" id="7724257">Encode</span><span class="op" id="7724263">(</span><span class="op" id="7724264">)</span><span class="op" id="7724265">;</span>&nbsp;<span class="ident" id="7724267">q</span>&nbsp;<span class="op" id="7724269">!=</span>&nbsp;<span class="ident" id="7724272">tt</span><span class="op" id="7724274">.</span><span class="ident" id="7724275">expected</span>&nbsp;<span class="op" id="7724284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724289">t</span><span class="op" id="7724290">.</span><span class="ident" id="7724291">Errorf</span><span class="op" id="7724297">(</span><span class="string" id="7724298">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7724330">,</span>&nbsp;<span class="ident" id="7724332">tt</span><span class="op" id="7724334">.</span><span class="ident" id="7724335">m</span><span class="op" id="7724336">,</span>&nbsp;<span class="ident" id="7724338">q</span><span class="op" id="7724339">,</span>&nbsp;<span class="ident" id="7724341">tt</span><span class="op" id="7724343">.</span><span class="ident" id="7724344">expected</span><span class="op" id="7724352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724356">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724359">}</span><br>
<span class="lineno"></span><span class="op" id="7724361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7724364">var</span>&nbsp;<span class="ident" id="7724368">resolvePathTests</span>&nbsp;<span class="op" id="7724385">=</span>&nbsp;<span class="op" id="7724387">[</span><span class="op" id="7724388">]</span><span class="keyword" id="7724389">struct</span>&nbsp;<span class="op" id="7724396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724399">base</span><span class="op" id="7724403">,</span>&nbsp;<span class="ident" id="7724405">ref</span><span class="op" id="7724408">,</span>&nbsp;<span class="ident" id="7724410">expected</span>&nbsp;<span class="builtintype" id="7724419">string</span><br>
<span class="lineno">570</span><span class="op" id="7724426">}</span><span class="op" id="7724427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724430">{</span><span class="string" id="7724431">&#34;a/b&#34;</span><span class="op" id="7724436">,</span>&nbsp;<span class="string" id="7724438">&#34;.&#34;</span><span class="op" id="7724441">,</span>&nbsp;<span class="string" id="7724443">&#34;/a/&#34;</span><span class="op" id="7724448">}</span><span class="op" id="7724449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724452">{</span><span class="string" id="7724453">&#34;a/b&#34;</span><span class="op" id="7724458">,</span>&nbsp;<span class="string" id="7724460">&#34;c&#34;</span><span class="op" id="7724463">,</span>&nbsp;<span class="string" id="7724465">&#34;/a/c&#34;</span><span class="op" id="7724471">}</span><span class="op" id="7724472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724475">{</span><span class="string" id="7724476">&#34;a/b&#34;</span><span class="op" id="7724481">,</span>&nbsp;<span class="string" id="7724483">&#34;..&#34;</span><span class="op" id="7724487">,</span>&nbsp;<span class="string" id="7724489">&#34;/&#34;</span><span class="op" id="7724492">}</span><span class="op" id="7724493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724496">{</span><span class="string" id="7724497">&#34;a/&#34;</span><span class="op" id="7724501">,</span>&nbsp;<span class="string" id="7724503">&#34;..&#34;</span><span class="op" id="7724507">,</span>&nbsp;<span class="string" id="7724509">&#34;/&#34;</span><span class="op" id="7724512">}</span><span class="op" id="7724513">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724516">{</span><span class="string" id="7724517">&#34;a/&#34;</span><span class="op" id="7724521">,</span>&nbsp;<span class="string" id="7724523">&#34;../..&#34;</span><span class="op" id="7724530">,</span>&nbsp;<span class="string" id="7724532">&#34;/&#34;</span><span class="op" id="7724535">}</span><span class="op" id="7724536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724539">{</span><span class="string" id="7724540">&#34;a/b/c&#34;</span><span class="op" id="7724547">,</span>&nbsp;<span class="string" id="7724549">&#34;..&#34;</span><span class="op" id="7724553">,</span>&nbsp;<span class="string" id="7724555">&#34;/a/&#34;</span><span class="op" id="7724560">}</span><span class="op" id="7724561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724564">{</span><span class="string" id="7724565">&#34;a/b/c&#34;</span><span class="op" id="7724572">,</span>&nbsp;<span class="string" id="7724574">&#34;../d&#34;</span><span class="op" id="7724580">,</span>&nbsp;<span class="string" id="7724582">&#34;/a/d&#34;</span><span class="op" id="7724588">}</span><span class="op" id="7724589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724592">{</span><span class="string" id="7724593">&#34;a/b/c&#34;</span><span class="op" id="7724600">,</span>&nbsp;<span class="string" id="7724602">&#34;.././d&#34;</span><span class="op" id="7724610">,</span>&nbsp;<span class="string" id="7724612">&#34;/a/d&#34;</span><span class="op" id="7724618">}</span><span class="op" id="7724619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724622">{</span><span class="string" id="7724623">&#34;a/b&#34;</span><span class="op" id="7724628">,</span>&nbsp;<span class="string" id="7724630">&#34;./..&#34;</span><span class="op" id="7724636">,</span>&nbsp;<span class="string" id="7724638">&#34;/&#34;</span><span class="op" id="7724641">}</span><span class="op" id="7724642">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724645">{</span><span class="string" id="7724646">&#34;a/./b&#34;</span><span class="op" id="7724653">,</span>&nbsp;<span class="string" id="7724655">&#34;.&#34;</span><span class="op" id="7724658">,</span>&nbsp;<span class="string" id="7724660">&#34;/a/&#34;</span><span class="op" id="7724665">}</span><span class="op" id="7724666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724669">{</span><span class="string" id="7724670">&#34;a/../&#34;</span><span class="op" id="7724677">,</span>&nbsp;<span class="string" id="7724679">&#34;.&#34;</span><span class="op" id="7724682">,</span>&nbsp;<span class="string" id="7724684">&#34;/&#34;</span><span class="op" id="7724687">}</span><span class="op" id="7724688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724691">{</span><span class="string" id="7724692">&#34;a/.././b&#34;</span><span class="op" id="7724702">,</span>&nbsp;<span class="string" id="7724704">&#34;c&#34;</span><span class="op" id="7724707">,</span>&nbsp;<span class="string" id="7724709">&#34;/c&#34;</span><span class="op" id="7724713">}</span><span class="op" id="7724714">,</span><br>
<span class="lineno"></span><span class="op" id="7724716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7724719">func</span>&nbsp;<span class="ident" id="7724724">TestResolvePath</span><span class="op" id="7724739">(</span><span class="ident" id="7724740">t</span>&nbsp;<span class="op" id="7724742">*</span><span class="ident" id="7724743">testing</span><span class="op" id="7724750">.</span><span class="ident" id="7724751">T</span><span class="op" id="7724752">)</span>&nbsp;<span class="op" id="7724754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724757">for</span>&nbsp;<span class="ident" id="7724761">_</span><span class="op" id="7724762">,</span>&nbsp;<span class="ident" id="7724764">test</span>&nbsp;<span class="op" id="7724769">:=</span>&nbsp;<span class="keyword" id="7724772">range</span>&nbsp;<span class="ident" id="7724778">resolvePathTests</span>&nbsp;<span class="op" id="7724795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724799">got</span>&nbsp;<span class="op" id="7724803">:=</span>&nbsp;<span class="ident" id="7724806">resolvePath</span><span class="op" id="7724817">(</span><span class="ident" id="7724818">test</span><span class="op" id="7724822">.</span><span class="ident" id="7724823">base</span><span class="op" id="7724827">,</span>&nbsp;<span class="ident" id="7724829">test</span><span class="op" id="7724833">.</span><span class="ident" id="7724834">ref</span><span class="op" id="7724837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724841">if</span>&nbsp;<span class="ident" id="7724844">got</span>&nbsp;<span class="op" id="7724848">!=</span>&nbsp;<span class="ident" id="7724851">test</span><span class="op" id="7724855">.</span><span class="ident" id="7724856">expected</span>&nbsp;<span class="op" id="7724865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724870">t</span><span class="op" id="7724871">.</span><span class="ident" id="7724872">Errorf</span><span class="op" id="7724878">(</span><span class="string" id="7724879">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7724912">,</span>&nbsp;<span class="ident" id="7724914">test</span><span class="op" id="7724918">.</span><span class="ident" id="7724919">base</span><span class="op" id="7724923">,</span>&nbsp;<span class="ident" id="7724925">test</span><span class="op" id="7724929">.</span><span class="ident" id="7724930">ref</span><span class="op" id="7724933">,</span>&nbsp;<span class="ident" id="7724935">got</span><span class="op" id="7724938">,</span>&nbsp;<span class="ident" id="7724940">test</span><span class="op" id="7724944">.</span><span class="ident" id="7724945">expected</span><span class="op" id="7724953">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724960">}</span><br>
<span class="lineno"></span><span class="op" id="7724962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7724965">var</span>&nbsp;<span class="ident" id="7724969">resolveReferenceTests</span>&nbsp;<span class="op" id="7724991">=</span>&nbsp;<span class="op" id="7724993">[</span><span class="op" id="7724994">]</span><span class="keyword" id="7724995">struct</span>&nbsp;<span class="op" id="7725002">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725005">base</span><span class="op" id="7725009">,</span>&nbsp;<span class="ident" id="7725011">rel</span><span class="op" id="7725014">,</span>&nbsp;<span class="ident" id="7725016">expected</span>&nbsp;<span class="builtintype" id="7725025">string</span><br>
<span class="lineno"></span><span class="op" id="7725032">}</span><span class="op" id="7725033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725036">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725064">{</span><span class="string" id="7725065">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7725085">,</span>&nbsp;<span class="string" id="7725087">&#34;https://bar.com/&#34;</span><span class="op" id="7725105">,</span>&nbsp;<span class="string" id="7725107">&#34;https://bar.com/&#34;</span><span class="op" id="7725125">}</span><span class="op" id="7725126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725129">{</span><span class="string" id="7725130">&#34;http://foo.com/&#34;</span><span class="op" id="7725147">,</span>&nbsp;<span class="string" id="7725149">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7725171">,</span>&nbsp;<span class="string" id="7725173">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7725195">}</span><span class="op" id="7725196">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725199">{</span><span class="string" id="7725200">&#34;http://foo.com/bar&#34;</span><span class="op" id="7725220">,</span>&nbsp;<span class="string" id="7725222">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7725246">,</span>&nbsp;<span class="string" id="7725248">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7725272">}</span><span class="op" id="7725273">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725277">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725306">{</span><span class="string" id="7725307">&#34;http://foo.com/bar&#34;</span><span class="op" id="7725327">,</span>&nbsp;<span class="string" id="7725329">&#34;/baz&#34;</span><span class="op" id="7725335">,</span>&nbsp;<span class="string" id="7725337">&#34;http://foo.com/baz&#34;</span><span class="op" id="7725357">}</span><span class="op" id="7725358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725361">{</span><span class="string" id="7725362">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7725388">,</span>&nbsp;<span class="string" id="7725390">&#34;/baz&#34;</span><span class="op" id="7725396">,</span>&nbsp;<span class="string" id="7725398">&#34;http://foo.com/baz&#34;</span><span class="op" id="7725418">}</span><span class="op" id="7725419">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725422">{</span><span class="string" id="7725423">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7725447">,</span>&nbsp;<span class="string" id="7725449">&#34;/baz?c=d&#34;</span><span class="op" id="7725459">,</span>&nbsp;<span class="string" id="7725461">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7725485">}</span><span class="op" id="7725486">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725490">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725510">{</span><span class="string" id="7725511">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7725536">,</span>&nbsp;<span class="string" id="7725538">&#34;//bar.com/quux&#34;</span><span class="op" id="7725554">,</span>&nbsp;<span class="string" id="7725556">&#34;https://bar.com/quux&#34;</span><span class="op" id="7725578">}</span><span class="op" id="7725579">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725583">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725614">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725640">{</span><span class="string" id="7725641">&#34;http://foo.com&#34;</span><span class="op" id="7725657">,</span>&nbsp;<span class="string" id="7725659">&#34;.&#34;</span><span class="op" id="7725662">,</span>&nbsp;<span class="string" id="7725664">&#34;http://foo.com/&#34;</span><span class="op" id="7725681">}</span><span class="op" id="7725682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725685">{</span><span class="string" id="7725686">&#34;http://foo.com/bar&#34;</span><span class="op" id="7725706">,</span>&nbsp;<span class="string" id="7725708">&#34;.&#34;</span><span class="op" id="7725711">,</span>&nbsp;<span class="string" id="7725713">&#34;http://foo.com/&#34;</span><span class="op" id="7725730">}</span><span class="op" id="7725731">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725734">{</span><span class="string" id="7725735">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7725756">,</span>&nbsp;<span class="string" id="7725758">&#34;.&#34;</span><span class="op" id="7725761">,</span>&nbsp;<span class="string" id="7725763">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7725784">}</span><span class="op" id="7725785">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725789">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725808">{</span><span class="string" id="7725809">&#34;http://foo.com&#34;</span><span class="op" id="7725825">,</span>&nbsp;<span class="string" id="7725827">&#34;bar&#34;</span><span class="op" id="7725832">,</span>&nbsp;<span class="string" id="7725834">&#34;http://foo.com/bar&#34;</span><span class="op" id="7725854">}</span><span class="op" id="7725855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725858">{</span><span class="string" id="7725859">&#34;http://foo.com/&#34;</span><span class="op" id="7725876">,</span>&nbsp;<span class="string" id="7725878">&#34;bar&#34;</span><span class="op" id="7725883">,</span>&nbsp;<span class="string" id="7725885">&#34;http://foo.com/bar&#34;</span><span class="op" id="7725905">}</span><span class="op" id="7725906">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725909">{</span><span class="string" id="7725910">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7725934">,</span>&nbsp;<span class="string" id="7725936">&#34;quux&#34;</span><span class="op" id="7725942">,</span>&nbsp;<span class="string" id="7725944">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7725969">}</span><span class="op" id="7725970">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7725974">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725991">{</span><span class="string" id="7725992">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726016">,</span>&nbsp;<span class="string" id="7726018">&#34;../quux&#34;</span><span class="op" id="7726027">,</span>&nbsp;<span class="string" id="7726029">&#34;http://foo.com/quux&#34;</span><span class="op" id="7726050">}</span><span class="op" id="7726051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726054">{</span><span class="string" id="7726055">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726079">,</span>&nbsp;<span class="string" id="7726081">&#34;../../../../../quux&#34;</span><span class="op" id="7726102">,</span>&nbsp;<span class="string" id="7726104">&#34;http://foo.com/quux&#34;</span><span class="op" id="7726125">}</span><span class="op" id="7726126">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726129">{</span><span class="string" id="7726130">&#34;http://foo.com/bar&#34;</span><span class="op" id="7726150">,</span>&nbsp;<span class="string" id="7726152">&#34;..&#34;</span><span class="op" id="7726156">,</span>&nbsp;<span class="string" id="7726158">&#34;http://foo.com/&#34;</span><span class="op" id="7726175">}</span><span class="op" id="7726176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726179">{</span><span class="string" id="7726180">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726204">,</span>&nbsp;<span class="string" id="7726206">&#34;./..&#34;</span><span class="op" id="7726212">,</span>&nbsp;<span class="string" id="7726214">&#34;http://foo.com/&#34;</span><span class="op" id="7726231">}</span><span class="op" id="7726232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7726235">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726271">{</span><span class="string" id="7726272">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726296">,</span>&nbsp;<span class="string" id="7726298">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7726319">,</span>&nbsp;<span class="string" id="7726321">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726351">}</span><span class="op" id="7726352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726355">{</span><span class="string" id="7726356">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726380">,</span>&nbsp;<span class="string" id="7726382">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7726405">,</span>&nbsp;<span class="string" id="7726407">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726437">}</span><span class="op" id="7726438">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726441">{</span><span class="string" id="7726442">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726466">,</span>&nbsp;<span class="string" id="7726468">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7726493">,</span>&nbsp;<span class="string" id="7726495">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726525">}</span><span class="op" id="7726526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726529">{</span><span class="string" id="7726530">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726554">,</span>&nbsp;<span class="string" id="7726556">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7726581">,</span>&nbsp;<span class="string" id="7726583">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726613">}</span><span class="op" id="7726614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726617">{</span><span class="string" id="7726618">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726642">,</span>&nbsp;<span class="string" id="7726644">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7726681">,</span>&nbsp;<span class="string" id="7726683">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726713">}</span><span class="op" id="7726714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726717">{</span><span class="string" id="7726718">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726742">,</span>&nbsp;<span class="string" id="7726744">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7726781">,</span>&nbsp;<span class="string" id="7726783">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726813">}</span><span class="op" id="7726814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726817">{</span><span class="string" id="7726818">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726842">,</span>&nbsp;<span class="string" id="7726844">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7726895">,</span>&nbsp;<span class="string" id="7726897">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7726927">}</span><span class="op" id="7726928">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726931">{</span><span class="string" id="7726932">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7726956">,</span>&nbsp;<span class="string" id="7726958">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7727000">,</span>&nbsp;<span class="string" id="7727002">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7727032">}</span><span class="op" id="7727033">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727037">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727098">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727151">{</span><span class="string" id="7727152">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7727192">,</span>&nbsp;<span class="string" id="7727194">&#34;../baz&#34;</span><span class="op" id="7727202">,</span>&nbsp;<span class="string" id="7727204">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7727228">}</span><span class="op" id="7727229">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727233">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727262">{</span><span class="string" id="7727263">&#34;http://foo.com/bar&#34;</span><span class="op" id="7727283">,</span>&nbsp;<span class="string" id="7727285">&#34;...&#34;</span><span class="op" id="7727290">,</span>&nbsp;<span class="string" id="7727292">&#34;http://foo.com/...&#34;</span><span class="op" id="7727312">}</span><span class="op" id="7727313">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727317">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727330">{</span><span class="string" id="7727331">&#34;http://foo.com/bar&#34;</span><span class="op" id="7727351">,</span>&nbsp;<span class="string" id="7727353">&#34;.#frag&#34;</span><span class="op" id="7727361">,</span>&nbsp;<span class="string" id="7727363">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7727385">}</span><span class="op" id="7727386">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727390">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7727420">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727473">{</span><span class="string" id="7727474">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727494">,</span>&nbsp;<span class="string" id="7727496">&#34;g:h&#34;</span><span class="op" id="7727501">,</span>&nbsp;<span class="string" id="7727503">&#34;g:h&#34;</span><span class="op" id="7727508">}</span><span class="op" id="7727509">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727512">{</span><span class="string" id="7727513">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727533">,</span>&nbsp;<span class="string" id="7727535">&#34;g&#34;</span><span class="op" id="7727538">,</span>&nbsp;<span class="string" id="7727540">&#34;http://a/b/c/g&#34;</span><span class="op" id="7727556">}</span><span class="op" id="7727557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727560">{</span><span class="string" id="7727561">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727581">,</span>&nbsp;<span class="string" id="7727583">&#34;./g&#34;</span><span class="op" id="7727588">,</span>&nbsp;<span class="string" id="7727590">&#34;http://a/b/c/g&#34;</span><span class="op" id="7727606">}</span><span class="op" id="7727607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727610">{</span><span class="string" id="7727611">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727631">,</span>&nbsp;<span class="string" id="7727633">&#34;g/&#34;</span><span class="op" id="7727637">,</span>&nbsp;<span class="string" id="7727639">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7727656">}</span><span class="op" id="7727657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727660">{</span><span class="string" id="7727661">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727681">,</span>&nbsp;<span class="string" id="7727683">&#34;/g&#34;</span><span class="op" id="7727687">,</span>&nbsp;<span class="string" id="7727689">&#34;http://a/g&#34;</span><span class="op" id="7727701">}</span><span class="op" id="7727702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727705">{</span><span class="string" id="7727706">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727726">,</span>&nbsp;<span class="string" id="7727728">&#34;//g&#34;</span><span class="op" id="7727733">,</span>&nbsp;<span class="string" id="7727735">&#34;http://g&#34;</span><span class="op" id="7727745">}</span><span class="op" id="7727746">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727749">{</span><span class="string" id="7727750">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727770">,</span>&nbsp;<span class="string" id="7727772">&#34;?y&#34;</span><span class="op" id="7727776">,</span>&nbsp;<span class="string" id="7727778">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7727798">}</span><span class="op" id="7727799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727802">{</span><span class="string" id="7727803">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727823">,</span>&nbsp;<span class="string" id="7727825">&#34;g?y&#34;</span><span class="op" id="7727830">,</span>&nbsp;<span class="string" id="7727832">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7727850">}</span><span class="op" id="7727851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727854">{</span><span class="string" id="7727855">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727875">,</span>&nbsp;<span class="string" id="7727877">&#34;#s&#34;</span><span class="op" id="7727881">,</span>&nbsp;<span class="string" id="7727883">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7727905">}</span><span class="op" id="7727906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727909">{</span><span class="string" id="7727910">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727930">,</span>&nbsp;<span class="string" id="7727932">&#34;g#s&#34;</span><span class="op" id="7727937">,</span>&nbsp;<span class="string" id="7727939">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7727957">}</span><span class="op" id="7727958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727961">{</span><span class="string" id="7727962">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7727982">,</span>&nbsp;<span class="string" id="7727984">&#34;g?y#s&#34;</span><span class="op" id="7727991">,</span>&nbsp;<span class="string" id="7727993">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7728013">}</span><span class="op" id="7728014">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728017">{</span><span class="string" id="7728018">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728038">,</span>&nbsp;<span class="string" id="7728040">&#34;;x&#34;</span><span class="op" id="7728044">,</span>&nbsp;<span class="string" id="7728046">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7728063">}</span><span class="op" id="7728064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728067">{</span><span class="string" id="7728068">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728088">,</span>&nbsp;<span class="string" id="7728090">&#34;g;x&#34;</span><span class="op" id="7728095">,</span>&nbsp;<span class="string" id="7728097">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7728115">}</span><span class="op" id="7728116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728119">{</span><span class="string" id="7728120">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728140">,</span>&nbsp;<span class="string" id="7728142">&#34;g;x?y#s&#34;</span><span class="op" id="7728151">,</span>&nbsp;<span class="string" id="7728153">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7728175">}</span><span class="op" id="7728176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728179">{</span><span class="string" id="7728180">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728200">,</span>&nbsp;<span class="string" id="7728202">&#34;&#34;</span><span class="op" id="7728204">,</span>&nbsp;<span class="string" id="7728206">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728226">}</span><span class="op" id="7728227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728230">{</span><span class="string" id="7728231">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728251">,</span>&nbsp;<span class="string" id="7728253">&#34;.&#34;</span><span class="op" id="7728256">,</span>&nbsp;<span class="string" id="7728258">&#34;http://a/b/c/&#34;</span><span class="op" id="7728273">}</span><span class="op" id="7728274">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728277">{</span><span class="string" id="7728278">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728298">,</span>&nbsp;<span class="string" id="7728300">&#34;./&#34;</span><span class="op" id="7728304">,</span>&nbsp;<span class="string" id="7728306">&#34;http://a/b/c/&#34;</span><span class="op" id="7728321">}</span><span class="op" id="7728322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728325">{</span><span class="string" id="7728326">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728346">,</span>&nbsp;<span class="string" id="7728348">&#34;..&#34;</span><span class="op" id="7728352">,</span>&nbsp;<span class="string" id="7728354">&#34;http://a/b/&#34;</span><span class="op" id="7728367">}</span><span class="op" id="7728368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728371">{</span><span class="string" id="7728372">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728392">,</span>&nbsp;<span class="string" id="7728394">&#34;../&#34;</span><span class="op" id="7728399">,</span>&nbsp;<span class="string" id="7728401">&#34;http://a/b/&#34;</span><span class="op" id="7728414">}</span><span class="op" id="7728415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728418">{</span><span class="string" id="7728419">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728439">,</span>&nbsp;<span class="string" id="7728441">&#34;../g&#34;</span><span class="op" id="7728447">,</span>&nbsp;<span class="string" id="7728449">&#34;http://a/b/g&#34;</span><span class="op" id="7728463">}</span><span class="op" id="7728464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728467">{</span><span class="string" id="7728468">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728488">,</span>&nbsp;<span class="string" id="7728490">&#34;../..&#34;</span><span class="op" id="7728497">,</span>&nbsp;<span class="string" id="7728499">&#34;http://a/&#34;</span><span class="op" id="7728510">}</span><span class="op" id="7728511">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728514">{</span><span class="string" id="7728515">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728535">,</span>&nbsp;<span class="string" id="7728537">&#34;../../&#34;</span><span class="op" id="7728545">,</span>&nbsp;<span class="string" id="7728547">&#34;http://a/&#34;</span><span class="op" id="7728558">}</span><span class="op" id="7728559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728562">{</span><span class="string" id="7728563">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728583">,</span>&nbsp;<span class="string" id="7728585">&#34;../../g&#34;</span><span class="op" id="7728594">,</span>&nbsp;<span class="string" id="7728596">&#34;http://a/g&#34;</span><span class="op" id="7728608">}</span><span class="op" id="7728609">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7728613">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7728645">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728698">{</span><span class="string" id="7728699">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728719">,</span>&nbsp;<span class="string" id="7728721">&#34;../../../g&#34;</span><span class="op" id="7728733">,</span>&nbsp;<span class="string" id="7728735">&#34;http://a/g&#34;</span><span class="op" id="7728747">}</span><span class="op" id="7728748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728751">{</span><span class="string" id="7728752">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728772">,</span>&nbsp;<span class="string" id="7728774">&#34;../../../../g&#34;</span><span class="op" id="7728789">,</span>&nbsp;<span class="string" id="7728791">&#34;http://a/g&#34;</span><span class="op" id="7728803">}</span><span class="op" id="7728804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728807">{</span><span class="string" id="7728808">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728828">,</span>&nbsp;<span class="string" id="7728830">&#34;/./g&#34;</span><span class="op" id="7728836">,</span>&nbsp;<span class="string" id="7728838">&#34;http://a/g&#34;</span><span class="op" id="7728850">}</span><span class="op" id="7728851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728854">{</span><span class="string" id="7728855">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728875">,</span>&nbsp;<span class="string" id="7728877">&#34;/../g&#34;</span><span class="op" id="7728884">,</span>&nbsp;<span class="string" id="7728886">&#34;http://a/g&#34;</span><span class="op" id="7728898">}</span><span class="op" id="7728899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728902">{</span><span class="string" id="7728903">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728923">,</span>&nbsp;<span class="string" id="7728925">&#34;g.&#34;</span><span class="op" id="7728929">,</span>&nbsp;<span class="string" id="7728931">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7728948">}</span><span class="op" id="7728949">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728952">{</span><span class="string" id="7728953">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7728973">,</span>&nbsp;<span class="string" id="7728975">&#34;.g&#34;</span><span class="op" id="7728979">,</span>&nbsp;<span class="string" id="7728981">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7728998">}</span><span class="op" id="7728999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729002">{</span><span class="string" id="7729003">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729023">,</span>&nbsp;<span class="string" id="7729025">&#34;g..&#34;</span><span class="op" id="7729030">,</span>&nbsp;<span class="string" id="7729032">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7729050">}</span><span class="op" id="7729051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729054">{</span><span class="string" id="7729055">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729075">,</span>&nbsp;<span class="string" id="7729077">&#34;..g&#34;</span><span class="op" id="7729082">,</span>&nbsp;<span class="string" id="7729084">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7729102">}</span><span class="op" id="7729103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729106">{</span><span class="string" id="7729107">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729127">,</span>&nbsp;<span class="string" id="7729129">&#34;./../g&#34;</span><span class="op" id="7729137">,</span>&nbsp;<span class="string" id="7729139">&#34;http://a/b/g&#34;</span><span class="op" id="7729153">}</span><span class="op" id="7729154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729157">{</span><span class="string" id="7729158">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729178">,</span>&nbsp;<span class="string" id="7729180">&#34;./g/.&#34;</span><span class="op" id="7729187">,</span>&nbsp;<span class="string" id="7729189">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7729206">}</span><span class="op" id="7729207">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729210">{</span><span class="string" id="7729211">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729231">,</span>&nbsp;<span class="string" id="7729233">&#34;g/./h&#34;</span><span class="op" id="7729240">,</span>&nbsp;<span class="string" id="7729242">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7729260">}</span><span class="op" id="7729261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729264">{</span><span class="string" id="7729265">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729285">,</span>&nbsp;<span class="string" id="7729287">&#34;g/../h&#34;</span><span class="op" id="7729295">,</span>&nbsp;<span class="string" id="7729297">&#34;http://a/b/c/h&#34;</span><span class="op" id="7729313">}</span><span class="op" id="7729314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729317">{</span><span class="string" id="7729318">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729338">,</span>&nbsp;<span class="string" id="7729340">&#34;g;x=1/./y&#34;</span><span class="op" id="7729351">,</span>&nbsp;<span class="string" id="7729353">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7729375">}</span><span class="op" id="7729376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729379">{</span><span class="string" id="7729380">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729400">,</span>&nbsp;<span class="string" id="7729402">&#34;g;x=1/../y&#34;</span><span class="op" id="7729414">,</span>&nbsp;<span class="string" id="7729416">&#34;http://a/b/c/y&#34;</span><span class="op" id="7729432">}</span><span class="op" id="7729433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729436">{</span><span class="string" id="7729437">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729457">,</span>&nbsp;<span class="string" id="7729459">&#34;g?y/./x&#34;</span><span class="op" id="7729468">,</span>&nbsp;<span class="string" id="7729470">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7729492">}</span><span class="op" id="7729493">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729496">{</span><span class="string" id="7729497">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729517">,</span>&nbsp;<span class="string" id="7729519">&#34;g?y/../x&#34;</span><span class="op" id="7729529">,</span>&nbsp;<span class="string" id="7729531">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7729554">}</span><span class="op" id="7729555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729558">{</span><span class="string" id="7729559">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729579">,</span>&nbsp;<span class="string" id="7729581">&#34;g#s/./x&#34;</span><span class="op" id="7729590">,</span>&nbsp;<span class="string" id="7729592">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7729614">}</span><span class="op" id="7729615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729618">{</span><span class="string" id="7729619">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7729639">,</span>&nbsp;<span class="string" id="7729641">&#34;g#s/../x&#34;</span><span class="op" id="7729651">,</span>&nbsp;<span class="string" id="7729653">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7729676">}</span><span class="op" id="7729677">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7729681">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729693">{</span><span class="string" id="7729694">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7729715">,</span>&nbsp;<span class="string" id="7729717">&#34;//g?q&#34;</span><span class="op" id="7729724">,</span>&nbsp;<span class="string" id="7729726">&#34;https://g?q&#34;</span><span class="op" id="7729739">}</span><span class="op" id="7729740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729743">{</span><span class="string" id="7729744">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7729765">,</span>&nbsp;<span class="string" id="7729767">&#34;//g#s&#34;</span><span class="op" id="7729774">,</span>&nbsp;<span class="string" id="7729776">&#34;https://g#s&#34;</span><span class="op" id="7729789">}</span><span class="op" id="7729790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729793">{</span><span class="string" id="7729794">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7729815">,</span>&nbsp;<span class="string" id="7729817">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7729832">,</span>&nbsp;<span class="string" id="7729834">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7729855">}</span><span class="op" id="7729856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729859">{</span><span class="string" id="7729860">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7729881">,</span>&nbsp;<span class="string" id="7729883">&#34;?y&#34;</span><span class="op" id="7729887">,</span>&nbsp;<span class="string" id="7729889">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7729910">}</span><span class="op" id="7729911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729914">{</span><span class="string" id="7729915">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7729938">,</span>&nbsp;<span class="string" id="7729940">&#34;?y&#34;</span><span class="op" id="7729944">,</span>&nbsp;<span class="string" id="7729946">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7729967">}</span><span class="op" id="7729968">,</span><br>
<span class="lineno">700</span><span class="op" id="7729970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7729973">func</span>&nbsp;<span class="ident" id="7729978">TestResolveReference</span><span class="op" id="7729998">(</span><span class="ident" id="7729999">t</span>&nbsp;<span class="op" id="7730001">*</span><span class="ident" id="7730002">testing</span><span class="op" id="7730009">.</span><span class="ident" id="7730010">T</span><span class="op" id="7730011">)</span>&nbsp;<span class="op" id="7730013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730016">mustParse</span>&nbsp;<span class="op" id="7730026">:=</span>&nbsp;<span class="keyword" id="7730029">func</span><span class="op" id="7730033">(</span><span class="ident" id="7730034">url</span>&nbsp;<span class="builtintype" id="7730038">string</span><span class="op" id="7730044">)</span>&nbsp;<span class="op" id="7730046">*</span><span class="ident" id="7730047">URL</span>&nbsp;<span class="op" id="7730051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730055">u</span><span class="op" id="7730056">,</span>&nbsp;<span class="ident" id="7730058">err</span>&nbsp;<span class="op" id="7730062">:=</span>&nbsp;<span class="ident" id="7730065">Parse</span><span class="op" id="7730070">(</span><span class="ident" id="7730071">url</span><span class="op" id="7730074">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730078">if</span>&nbsp;<span class="ident" id="7730081">err</span>&nbsp;<span class="op" id="7730085">!=</span>&nbsp;<span class="ident" id="7730088">nil</span>&nbsp;<span class="op" id="7730092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730097">t</span><span class="op" id="7730098">.</span><span class="ident" id="7730099">Fatalf</span><span class="op" id="7730105">(</span><span class="string" id="7730106">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7730148">,</span>&nbsp;<span class="ident" id="7730150">url</span><span class="op" id="7730153">,</span>&nbsp;<span class="ident" id="7730155">err</span><span class="op" id="7730158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730166">return</span>&nbsp;<span class="ident" id="7730173">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730176">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730179">opaque</span>&nbsp;<span class="op" id="7730186">:=</span>&nbsp;<span class="op" id="7730189">&amp;</span><span class="ident" id="7730190">URL</span><span class="op" id="7730193">{</span><span class="ident" id="7730194">Scheme</span><span class="op" id="7730200">:</span>&nbsp;<span class="string" id="7730202">&#34;scheme&#34;</span><span class="op" id="7730210">,</span>&nbsp;<span class="ident" id="7730212">Opaque</span><span class="op" id="7730218">:</span>&nbsp;<span class="string" id="7730220">&#34;opaque&#34;</span><span class="op" id="7730228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730231">for</span>&nbsp;<span class="ident" id="7730235">_</span><span class="op" id="7730236">,</span>&nbsp;<span class="ident" id="7730238">test</span>&nbsp;<span class="op" id="7730243">:=</span>&nbsp;<span class="keyword" id="7730246">range</span>&nbsp;<span class="ident" id="7730252">resolveReferenceTests</span>&nbsp;<span class="op" id="7730274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730278">base</span>&nbsp;<span class="op" id="7730283">:=</span>&nbsp;<span class="ident" id="7730286">mustParse</span><span class="op" id="7730295">(</span><span class="ident" id="7730296">test</span><span class="op" id="7730300">.</span><span class="ident" id="7730301">base</span><span class="op" id="7730305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730309">rel</span>&nbsp;<span class="op" id="7730313">:=</span>&nbsp;<span class="ident" id="7730316">mustParse</span><span class="op" id="7730325">(</span><span class="ident" id="7730326">test</span><span class="op" id="7730330">.</span><span class="ident" id="7730331">rel</span><span class="op" id="7730334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730338">url</span>&nbsp;<span class="op" id="7730342">:=</span>&nbsp;<span class="ident" id="7730345">base</span><span class="op" id="7730349">.</span><span class="ident" id="7730350">ResolveReference</span><span class="op" id="7730366">(</span><span class="ident" id="7730367">rel</span><span class="op" id="7730370">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730374">if</span>&nbsp;<span class="ident" id="7730377">url</span><span class="op" id="7730380">.</span><span class="ident" id="7730381">String</span><span class="op" id="7730387">(</span><span class="op" id="7730388">)</span>&nbsp;<span class="op" id="7730390">!=</span>&nbsp;<span class="ident" id="7730393">test</span><span class="op" id="7730397">.</span><span class="ident" id="7730398">expected</span>&nbsp;<span class="op" id="7730407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730412">t</span><span class="op" id="7730413">.</span><span class="ident" id="7730414">Errorf</span><span class="op" id="7730420">(</span><span class="string" id="7730421">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7730465">,</span>&nbsp;<span class="ident" id="7730467">test</span><span class="op" id="7730471">.</span><span class="ident" id="7730472">base</span><span class="op" id="7730476">,</span>&nbsp;<span class="ident" id="7730478">test</span><span class="op" id="7730482">.</span><span class="ident" id="7730483">rel</span><span class="op" id="7730486">,</span>&nbsp;<span class="ident" id="7730488">test</span><span class="op" id="7730492">.</span><span class="ident" id="7730493">expected</span><span class="op" id="7730501">,</span>&nbsp;<span class="ident" id="7730503">url</span><span class="op" id="7730506">.</span><span class="ident" id="7730507">String</span><span class="op" id="7730513">(</span><span class="op" id="7730514">)</span><span class="op" id="7730515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730523">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730568">if</span>&nbsp;<span class="ident" id="7730571">base</span>&nbsp;<span class="op" id="7730576">==</span>&nbsp;<span class="ident" id="7730579">url</span>&nbsp;<span class="op" id="7730583">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730588">t</span><span class="op" id="7730589">.</span><span class="ident" id="7730590">Errorf</span><span class="op" id="7730596">(</span><span class="string" id="7730597">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7730656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730664">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730703">url</span><span class="op" id="7730706">,</span>&nbsp;<span class="ident" id="7730708">err</span>&nbsp;<span class="op" id="7730712">:=</span>&nbsp;<span class="ident" id="7730715">base</span><span class="op" id="7730719">.</span><span class="ident" id="7730720">Parse</span><span class="op" id="7730725">(</span><span class="ident" id="7730726">test</span><span class="op" id="7730730">.</span><span class="ident" id="7730731">rel</span><span class="op" id="7730734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730738">if</span>&nbsp;<span class="ident" id="7730741">err</span>&nbsp;<span class="op" id="7730745">!=</span>&nbsp;<span class="ident" id="7730748">nil</span>&nbsp;<span class="op" id="7730752">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730757">t</span><span class="op" id="7730758">.</span><span class="ident" id="7730759">Errorf</span><span class="op" id="7730765">(</span><span class="string" id="7730766">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7730796">,</span>&nbsp;<span class="ident" id="7730798">test</span><span class="op" id="7730802">.</span><span class="ident" id="7730803">base</span><span class="op" id="7730807">,</span>&nbsp;<span class="ident" id="7730809">test</span><span class="op" id="7730813">.</span><span class="ident" id="7730814">rel</span><span class="op" id="7730817">,</span>&nbsp;<span class="ident" id="7730819">err</span><span class="op" id="7730822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730826">}</span>&nbsp;<span class="keyword" id="7730828">else</span>&nbsp;<span class="keyword" id="7730833">if</span>&nbsp;<span class="ident" id="7730836">url</span><span class="op" id="7730839">.</span><span class="ident" id="7730840">String</span><span class="op" id="7730846">(</span><span class="op" id="7730847">)</span>&nbsp;<span class="op" id="7730849">!=</span>&nbsp;<span class="ident" id="7730852">test</span><span class="op" id="7730856">.</span><span class="ident" id="7730857">expected</span>&nbsp;<span class="op" id="7730866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730871">t</span><span class="op" id="7730872">.</span><span class="ident" id="7730873">Errorf</span><span class="op" id="7730879">(</span><span class="string" id="7730880">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7730913">,</span>&nbsp;<span class="ident" id="7730915">test</span><span class="op" id="7730919">.</span><span class="ident" id="7730920">base</span><span class="op" id="7730924">,</span>&nbsp;<span class="ident" id="7730926">test</span><span class="op" id="7730930">.</span><span class="ident" id="7730931">rel</span><span class="op" id="7730934">,</span>&nbsp;<span class="ident" id="7730936">test</span><span class="op" id="7730940">.</span><span class="ident" id="7730941">expected</span><span class="op" id="7730949">,</span>&nbsp;<span class="ident" id="7730951">url</span><span class="op" id="7730954">.</span><span class="ident" id="7730955">String</span><span class="op" id="7730961">(</span><span class="op" id="7730962">)</span><span class="op" id="7730963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730967">}</span>&nbsp;<span class="keyword" id="7730969">else</span>&nbsp;<span class="keyword" id="7730974">if</span>&nbsp;<span class="ident" id="7730977">base</span>&nbsp;<span class="op" id="7730982">==</span>&nbsp;<span class="ident" id="7730985">url</span>&nbsp;<span class="op" id="7730989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7730994">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731060">t</span><span class="op" id="7731061">.</span><span class="ident" id="7731062">Errorf</span><span class="op" id="7731068">(</span><span class="string" id="7731069">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7731117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7731125">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731160">url</span>&nbsp;<span class="op" id="7731164">=</span>&nbsp;<span class="ident" id="7731166">base</span><span class="op" id="7731170">.</span><span class="ident" id="7731171">ResolveReference</span><span class="op" id="7731187">(</span><span class="ident" id="7731188">opaque</span><span class="op" id="7731194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731198">if</span>&nbsp;<span class="op" id="7731201">*</span><span class="ident" id="7731202">url</span>&nbsp;<span class="op" id="7731206">!=</span>&nbsp;<span class="op" id="7731209">*</span><span class="ident" id="7731210">opaque</span>&nbsp;<span class="op" id="7731217">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731222">t</span><span class="op" id="7731223">.</span><span class="ident" id="7731224">Errorf</span><span class="op" id="7731230">(</span><span class="string" id="7731231">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7731297">,</span>&nbsp;<span class="ident" id="7731299">url</span><span class="op" id="7731302">,</span>&nbsp;<span class="ident" id="7731304">opaque</span><span class="op" id="7731310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7731318">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731376">url</span><span class="op" id="7731379">,</span>&nbsp;<span class="ident" id="7731381">err</span>&nbsp;<span class="op" id="7731385">=</span>&nbsp;<span class="ident" id="7731387">base</span><span class="op" id="7731391">.</span><span class="ident" id="7731392">Parse</span><span class="op" id="7731397">(</span><span class="string" id="7731398">&#34;scheme:opaque&#34;</span><span class="op" id="7731413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731417">if</span>&nbsp;<span class="ident" id="7731420">err</span>&nbsp;<span class="op" id="7731424">!=</span>&nbsp;<span class="ident" id="7731427">nil</span>&nbsp;<span class="op" id="7731431">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731436">t</span><span class="op" id="7731437">.</span><span class="ident" id="7731438">Errorf</span><span class="op" id="7731444">(</span><span class="string" id="7731445">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7731488">,</span>&nbsp;<span class="ident" id="7731490">test</span><span class="op" id="7731494">.</span><span class="ident" id="7731495">base</span><span class="op" id="7731499">,</span>&nbsp;<span class="ident" id="7731501">err</span><span class="op" id="7731504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731508">}</span>&nbsp;<span class="keyword" id="7731510">else</span>&nbsp;<span class="keyword" id="7731515">if</span>&nbsp;<span class="op" id="7731518">*</span><span class="ident" id="7731519">url</span>&nbsp;<span class="op" id="7731523">!=</span>&nbsp;<span class="op" id="7731526">*</span><span class="ident" id="7731527">opaque</span>&nbsp;<span class="op" id="7731534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731539">t</span><span class="op" id="7731540">.</span><span class="ident" id="7731541">Errorf</span><span class="op" id="7731547">(</span><span class="string" id="7731548">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7731603">,</span>&nbsp;<span class="ident" id="7731605">url</span><span class="op" id="7731608">,</span>&nbsp;<span class="ident" id="7731610">opaque</span><span class="op" id="7731616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731620">}</span>&nbsp;<span class="keyword" id="7731622">else</span>&nbsp;<span class="keyword" id="7731627">if</span>&nbsp;<span class="ident" id="7731630">base</span>&nbsp;<span class="op" id="7731635">==</span>&nbsp;<span class="ident" id="7731638">url</span>&nbsp;<span class="op" id="7731642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7731647">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731700">t</span><span class="op" id="7731701">.</span><span class="ident" id="7731702">Errorf</span><span class="op" id="7731708">(</span><span class="string" id="7731709">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7731757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731764">}</span><br>
<span class="lineno"></span><span class="op" id="7731766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7731769">func</span>&nbsp;<span class="ident" id="7731774">TestQueryValues</span><span class="op" id="7731789">(</span><span class="ident" id="7731790">t</span>&nbsp;<span class="op" id="7731792">*</span><span class="ident" id="7731793">testing</span><span class="op" id="7731800">.</span><span class="ident" id="7731801">T</span><span class="op" id="7731802">)</span>&nbsp;<span class="op" id="7731804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731807">u</span><span class="op" id="7731808">,</span>&nbsp;<span class="ident" id="7731810">_</span>&nbsp;<span class="op" id="7731812">:=</span>&nbsp;<span class="ident" id="7731815">Parse</span><span class="op" id="7731820">(</span><span class="string" id="7731821">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7731855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731858">v</span>&nbsp;<span class="op" id="7731860">:=</span>&nbsp;<span class="ident" id="7731863">u</span><span class="op" id="7731864">.</span><span class="ident" id="7731865">Query</span><span class="op" id="7731870">(</span><span class="op" id="7731871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731874">if</span>&nbsp;<span class="builtinfunc" id="7731877">len</span><span class="op" id="7731880">(</span><span class="ident" id="7731881">v</span><span class="op" id="7731882">)</span>&nbsp;<span class="op" id="7731884">!=</span>&nbsp;<span class="num" id="7731887">2</span>&nbsp;<span class="op" id="7731889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731893">t</span><span class="op" id="7731894">.</span><span class="ident" id="7731895">Errorf</span><span class="op" id="7731901">(</span><span class="string" id="7731902">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7731939">,</span>&nbsp;<span class="builtinfunc" id="7731941">len</span><span class="op" id="7731944">(</span><span class="ident" id="7731945">v</span><span class="op" id="7731946">)</span><span class="op" id="7731947">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731953">if</span>&nbsp;<span class="ident" id="7731956">g</span><span class="op" id="7731957">,</span>&nbsp;<span class="ident" id="7731959">e</span>&nbsp;<span class="op" id="7731961">:=</span>&nbsp;<span class="ident" id="7731964">v</span><span class="op" id="7731965">.</span><span class="ident" id="7731966">Get</span><span class="op" id="7731969">(</span><span class="string" id="7731970">&#34;foo&#34;</span><span class="op" id="7731975">)</span><span class="op" id="7731976">,</span>&nbsp;<span class="string" id="7731978">&#34;bar&#34;</span><span class="op" id="7731983">;</span>&nbsp;<span class="ident" id="7731985">g</span>&nbsp;<span class="op" id="7731987">!=</span>&nbsp;<span class="ident" id="7731990">e</span>&nbsp;<span class="op" id="7731992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731996">t</span><span class="op" id="7731997">.</span><span class="ident" id="7731998">Errorf</span><span class="op" id="7732004">(</span><span class="string" id="7732005">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7732029">,</span>&nbsp;<span class="ident" id="7732031">g</span><span class="op" id="7732032">,</span>&nbsp;<span class="ident" id="7732034">e</span><span class="op" id="7732035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7732041">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732061">if</span>&nbsp;<span class="ident" id="7732064">g</span><span class="op" id="7732065">,</span>&nbsp;<span class="ident" id="7732067">e</span>&nbsp;<span class="op" id="7732069">:=</span>&nbsp;<span class="ident" id="7732072">v</span><span class="op" id="7732073">.</span><span class="ident" id="7732074">Get</span><span class="op" id="7732077">(</span><span class="string" id="7732078">&#34;Foo&#34;</span><span class="op" id="7732083">)</span><span class="op" id="7732084">,</span>&nbsp;<span class="string" id="7732086">&#34;&#34;</span><span class="op" id="7732088">;</span>&nbsp;<span class="ident" id="7732090">g</span>&nbsp;<span class="op" id="7732092">!=</span>&nbsp;<span class="ident" id="7732095">e</span>&nbsp;<span class="op" id="7732097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732101">t</span><span class="op" id="7732102">.</span><span class="ident" id="7732103">Errorf</span><span class="op" id="7732109">(</span><span class="string" id="7732110">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7732134">,</span>&nbsp;<span class="ident" id="7732136">g</span><span class="op" id="7732137">,</span>&nbsp;<span class="ident" id="7732139">e</span><span class="op" id="7732140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732146">if</span>&nbsp;<span class="ident" id="7732149">g</span><span class="op" id="7732150">,</span>&nbsp;<span class="ident" id="7732152">e</span>&nbsp;<span class="op" id="7732154">:=</span>&nbsp;<span class="ident" id="7732157">v</span><span class="op" id="7732158">.</span><span class="ident" id="7732159">Get</span><span class="op" id="7732162">(</span><span class="string" id="7732163">&#34;bar&#34;</span><span class="op" id="7732168">)</span><span class="op" id="7732169">,</span>&nbsp;<span class="string" id="7732171">&#34;1&#34;</span><span class="op" id="7732174">;</span>&nbsp;<span class="ident" id="7732176">g</span>&nbsp;<span class="op" id="7732178">!=</span>&nbsp;<span class="ident" id="7732181">e</span>&nbsp;<span class="op" id="7732183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732187">t</span><span class="op" id="7732188">.</span><span class="ident" id="7732189">Errorf</span><span class="op" id="7732195">(</span><span class="string" id="7732196">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7732220">,</span>&nbsp;<span class="ident" id="7732222">g</span><span class="op" id="7732223">,</span>&nbsp;<span class="ident" id="7732225">e</span><span class="op" id="7732226">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732232">if</span>&nbsp;<span class="ident" id="7732235">g</span><span class="op" id="7732236">,</span>&nbsp;<span class="ident" id="7732238">e</span>&nbsp;<span class="op" id="7732240">:=</span>&nbsp;<span class="ident" id="7732243">v</span><span class="op" id="7732244">.</span><span class="ident" id="7732245">Get</span><span class="op" id="7732248">(</span><span class="string" id="7732249">&#34;baz&#34;</span><span class="op" id="7732254">)</span><span class="op" id="7732255">,</span>&nbsp;<span class="string" id="7732257">&#34;&#34;</span><span class="op" id="7732259">;</span>&nbsp;<span class="ident" id="7732261">g</span>&nbsp;<span class="op" id="7732263">!=</span>&nbsp;<span class="ident" id="7732266">e</span>&nbsp;<span class="op" id="7732268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732272">t</span><span class="op" id="7732273">.</span><span class="ident" id="7732274">Errorf</span><span class="op" id="7732280">(</span><span class="string" id="7732281">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7732305">,</span>&nbsp;<span class="ident" id="7732307">g</span><span class="op" id="7732308">,</span>&nbsp;<span class="ident" id="7732310">e</span><span class="op" id="7732311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732317">v</span><span class="op" id="7732318">.</span><span class="ident" id="7732319">Del</span><span class="op" id="7732322">(</span><span class="string" id="7732323">&#34;bar&#34;</span><span class="op" id="7732328">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732331">if</span>&nbsp;<span class="ident" id="7732334">g</span><span class="op" id="7732335">,</span>&nbsp;<span class="ident" id="7732337">e</span>&nbsp;<span class="op" id="7732339">:=</span>&nbsp;<span class="ident" id="7732342">v</span><span class="op" id="7732343">.</span><span class="ident" id="7732344">Get</span><span class="op" id="7732347">(</span><span class="string" id="7732348">&#34;bar&#34;</span><span class="op" id="7732353">)</span><span class="op" id="7732354">,</span>&nbsp;<span class="string" id="7732356">&#34;&#34;</span><span class="op" id="7732358">;</span>&nbsp;<span class="ident" id="7732360">g</span>&nbsp;<span class="op" id="7732362">!=</span>&nbsp;<span class="ident" id="7732365">e</span>&nbsp;<span class="op" id="7732367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732371">t</span><span class="op" id="7732372">.</span><span class="ident" id="7732373">Errorf</span><span class="op" id="7732379">(</span><span class="string" id="7732380">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7732411">,</span>&nbsp;<span class="ident" id="7732413">g</span><span class="op" id="7732414">,</span>&nbsp;<span class="ident" id="7732416">e</span><span class="op" id="7732417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732420">}</span><br>
<span class="lineno"></span><span class="op" id="7732422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="7732425">type</span>&nbsp;<span class="ident" id="7732430">parseTest</span>&nbsp;<span class="keyword" id="7732440">struct</span>&nbsp;<span class="op" id="7732447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732450">query</span>&nbsp;<span class="builtintype" id="7732456">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732464">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7732470">Values</span><br>
<span class="lineno"></span><span class="op" id="7732477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="7732480">var</span>&nbsp;<span class="ident" id="7732484">parseTests</span>&nbsp;<span class="op" id="7732495">=</span>&nbsp;<span class="op" id="7732497">[</span><span class="op" id="7732498">]</span><span class="ident" id="7732499">parseTest</span><span class="op" id="7732508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732515">query</span><span class="op" id="7732520">:</span>&nbsp;<span class="string" id="7732522">&#34;a=1&amp;b=2&#34;</span><span class="op" id="7732531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732535">out</span><span class="op" id="7732538">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7732542">Values</span><span class="op" id="7732548">{</span><span class="string" id="7732549">&#34;a&#34;</span><span class="op" id="7732552">:</span>&nbsp;<span class="op" id="7732554">[</span><span class="op" id="7732555">]</span><span class="builtintype" id="7732556">string</span><span class="op" id="7732562">{</span><span class="string" id="7732563">&#34;1&#34;</span><span class="op" id="7732566">}</span><span class="op" id="7732567">,</span>&nbsp;<span class="string" id="7732569">&#34;b&#34;</span><span class="op" id="7732572">:</span>&nbsp;<span class="op" id="7732574">[</span><span class="op" id="7732575">]</span><span class="builtintype" id="7732576">string</span><span class="op" id="7732582">{</span><span class="string" id="7732583">&#34;2&#34;</span><span class="op" id="7732586">}</span><span class="op" id="7732587">}</span><span class="op" id="7732588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732591">}</span><span class="op" id="7732592">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732599">query</span><span class="op" id="7732604">:</span>&nbsp;<span class="string" id="7732606">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="7732624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732628">out</span><span class="op" id="7732631">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7732635">Values</span><span class="op" id="7732641">{</span><span class="string" id="7732642">&#34;a&#34;</span><span class="op" id="7732645">:</span>&nbsp;<span class="op" id="7732647">[</span><span class="op" id="7732648">]</span><span class="builtintype" id="7732649">string</span><span class="op" id="7732655">{</span><span class="string" id="7732656">&#34;1&#34;</span><span class="op" id="7732659">,</span>&nbsp;<span class="string" id="7732661">&#34;2&#34;</span><span class="op" id="7732664">,</span>&nbsp;<span class="string" id="7732666">&#34;banana&#34;</span><span class="op" id="7732674">}</span><span class="op" id="7732675">}</span><span class="op" id="7732676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732679">}</span><span class="op" id="7732680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732683">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732687">query</span><span class="op" id="7732692">:</span>&nbsp;<span class="string" id="7732694">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="7732719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732723">out</span><span class="op" id="7732726">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7732730">Values</span><span class="op" id="7732736">{</span><span class="string" id="7732737">&#34;ascii&#34;</span><span class="op" id="7732744">:</span>&nbsp;<span class="op" id="7732746">[</span><span class="op" id="7732747">]</span><span class="builtintype" id="7732748">string</span><span class="op" id="7732754">{</span><span class="string" id="7732755">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="7732768">}</span><span class="op" id="7732769">}</span><span class="op" id="7732770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732773">}</span><span class="op" id="7732774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732781">query</span><span class="op" id="7732786">:</span>&nbsp;<span class="string" id="7732788">&#34;a=1;b=2&#34;</span><span class="op" id="7732797">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732801">out</span><span class="op" id="7732804">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7732808">Values</span><span class="op" id="7732814">{</span><span class="string" id="7732815">&#34;a&#34;</span><span class="op" id="7732818">:</span>&nbsp;<span class="op" id="7732820">[</span><span class="op" id="7732821">]</span><span class="builtintype" id="7732822">string</span><span class="op" id="7732828">{</span><span class="string" id="7732829">&#34;1&#34;</span><span class="op" id="7732832">}</span><span class="op" id="7732833">,</span>&nbsp;<span class="string" id="7732835">&#34;b&#34;</span><span class="op" id="7732838">:</span>&nbsp;<span class="op" id="7732840">[</span><span class="op" id="7732841">]</span><span class="builtintype" id="7732842">string</span><span class="op" id="7732848">{</span><span class="string" id="7732849">&#34;2&#34;</span><span class="op" id="7732852">}</span><span class="op" id="7732853">}</span><span class="op" id="7732854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732857">}</span><span class="op" id="7732858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732865">query</span><span class="op" id="7732870">:</span>&nbsp;<span class="string" id="7732872">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="7732890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732894">out</span><span class="op" id="7732897">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7732901">Values</span><span class="op" id="7732907">{</span><span class="string" id="7732908">&#34;a&#34;</span><span class="op" id="7732911">:</span>&nbsp;<span class="op" id="7732913">[</span><span class="op" id="7732914">]</span><span class="builtintype" id="7732915">string</span><span class="op" id="7732921">{</span><span class="string" id="7732922">&#34;1&#34;</span><span class="op" id="7732925">,</span>&nbsp;<span class="string" id="7732927">&#34;2&#34;</span><span class="op" id="7732930">,</span>&nbsp;<span class="string" id="7732932">&#34;banana&#34;</span><span class="op" id="7732940">}</span><span class="op" id="7732941">}</span><span class="op" id="7732942">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732945">}</span><span class="op" id="7732946">,</span><br>
<span class="lineno"></span><span class="op" id="7732948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732951">func</span>&nbsp;<span class="ident" id="7732956">TestParseQuery</span><span class="op" id="7732970">(</span><span class="ident" id="7732971">t</span>&nbsp;<span class="op" id="7732973">*</span><span class="ident" id="7732974">testing</span><span class="op" id="7732981">.</span><span class="ident" id="7732982">T</span><span class="op" id="7732983">)</span>&nbsp;<span class="op" id="7732985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732988">for</span>&nbsp;<span class="ident" id="7732992">i</span><span class="op" id="7732993">,</span>&nbsp;<span class="ident" id="7732995">test</span>&nbsp;<span class="op" id="7733000">:=</span>&nbsp;<span class="keyword" id="7733003">range</span>&nbsp;<span class="ident" id="7733009">parseTests</span>&nbsp;<span class="op" id="7733020">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733024">form</span><span class="op" id="7733028">,</span>&nbsp;<span class="ident" id="7733030">err</span>&nbsp;<span class="op" id="7733034">:=</span>&nbsp;<span class="ident" id="7733037">ParseQuery</span><span class="op" id="7733047">(</span><span class="ident" id="7733048">test</span><span class="op" id="7733052">.</span><span class="ident" id="7733053">query</span><span class="op" id="7733058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733062">if</span>&nbsp;<span class="ident" id="7733065">err</span>&nbsp;<span class="op" id="7733069">!=</span>&nbsp;<span class="ident" id="7733072">nil</span>&nbsp;<span class="op" id="7733076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733081">t</span><span class="op" id="7733082">.</span><span class="ident" id="7733083">Errorf</span><span class="op" id="7733089">(</span><span class="string" id="7733090">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7733121">,</span>&nbsp;<span class="ident" id="7733123">i</span><span class="op" id="7733124">,</span>&nbsp;<span class="ident" id="7733126">err</span><span class="op" id="7733129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733134">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733145">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733149">if</span>&nbsp;<span class="builtinfunc" id="7733152">len</span><span class="op" id="7733155">(</span><span class="ident" id="7733156">form</span><span class="op" id="7733160">)</span>&nbsp;<span class="op" id="7733162">!=</span>&nbsp;<span class="builtinfunc" id="7733165">len</span><span class="op" id="7733168">(</span><span class="ident" id="7733169">test</span><span class="op" id="7733173">.</span><span class="ident" id="7733174">out</span><span class="op" id="7733177">)</span>&nbsp;<span class="op" id="7733179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733184">t</span><span class="op" id="7733185">.</span><span class="ident" id="7733186">Errorf</span><span class="op" id="7733192">(</span><span class="string" id="7733193">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7733227">,</span>&nbsp;<span class="ident" id="7733229">i</span><span class="op" id="7733230">,</span>&nbsp;<span class="builtinfunc" id="7733232">len</span><span class="op" id="7733235">(</span><span class="ident" id="7733236">form</span><span class="op" id="7733240">)</span><span class="op" id="7733241">,</span>&nbsp;<span class="builtinfunc" id="7733243">len</span><span class="op" id="7733246">(</span><span class="ident" id="7733247">test</span><span class="op" id="7733251">.</span><span class="ident" id="7733252">out</span><span class="op" id="7733255">)</span><span class="op" id="7733256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733264">for</span>&nbsp;<span class="ident" id="7733268">k</span><span class="op" id="7733269">,</span>&nbsp;<span class="ident" id="7733271">evs</span>&nbsp;<span class="op" id="7733275">:=</span>&nbsp;<span class="keyword" id="7733278">range</span>&nbsp;<span class="ident" id="7733284">test</span><span class="op" id="7733288">.</span><span class="ident" id="7733289">out</span>&nbsp;<span class="op" id="7733293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733298">vs</span><span class="op" id="7733300">,</span>&nbsp;<span class="ident" id="7733302">ok</span>&nbsp;<span class="op" id="7733305">:=</span>&nbsp;<span class="ident" id="7733308">form</span><span class="op" id="7733312">[</span><span class="ident" id="7733313">k</span><span class="op" id="7733314">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733319">if</span>&nbsp;<span class="op" id="7733322">!</span><span class="ident" id="7733323">ok</span>&nbsp;<span class="op" id="7733326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733332">t</span><span class="op" id="7733333">.</span><span class="ident" id="7733334">Errorf</span><span class="op" id="7733340">(</span><span class="string" id="7733341">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="7733366">,</span>&nbsp;<span class="ident" id="7733368">i</span><span class="op" id="7733369">,</span>&nbsp;<span class="ident" id="7733371">k</span><span class="op" id="7733372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733378">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733395">if</span>&nbsp;<span class="builtinfunc" id="7733398">len</span><span class="op" id="7733401">(</span><span class="ident" id="7733402">vs</span><span class="op" id="7733404">)</span>&nbsp;<span class="op" id="7733406">!=</span>&nbsp;<span class="builtinfunc" id="7733409">len</span><span class="op" id="7733412">(</span><span class="ident" id="7733413">evs</span><span class="op" id="7733416">)</span>&nbsp;<span class="op" id="7733418">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733424">t</span><span class="op" id="7733425">.</span><span class="ident" id="7733426">Errorf</span><span class="op" id="7733432">(</span><span class="string" id="7733433">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7733471">,</span>&nbsp;<span class="ident" id="7733473">i</span><span class="op" id="7733474">,</span>&nbsp;<span class="ident" id="7733476">k</span><span class="op" id="7733477">,</span>&nbsp;<span class="builtinfunc" id="7733479">len</span><span class="op" id="7733482">(</span><span class="ident" id="7733483">vs</span><span class="op" id="7733485">)</span><span class="op" id="7733486">,</span>&nbsp;<span class="builtinfunc" id="7733488">len</span><span class="op" id="7733491">(</span><span class="ident" id="7733492">evs</span><span class="op" id="7733495">)</span><span class="op" id="7733496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733519">for</span>&nbsp;<span class="ident" id="7733523">j</span><span class="op" id="7733524">,</span>&nbsp;<span class="ident" id="7733526">ev</span>&nbsp;<span class="op" id="7733529">:=</span>&nbsp;<span class="keyword" id="7733532">range</span>&nbsp;<span class="ident" id="7733538">evs</span>&nbsp;<span class="op" id="7733542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7733548">if</span>&nbsp;<span class="ident" id="7733551">v</span>&nbsp;<span class="op" id="7733553">:=</span>&nbsp;<span class="ident" id="7733556">vs</span><span class="op" id="7733558">[</span><span class="ident" id="7733559">j</span><span class="op" id="7733560">]</span><span class="op" id="7733561">;</span>&nbsp;<span class="ident" id="7733563">v</span>&nbsp;<span class="op" id="7733565">!=</span>&nbsp;<span class="ident" id="7733568">ev</span>&nbsp;<span class="op" id="7733571">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733578">t</span><span class="op" id="7733579">.</span><span class="ident" id="7733580">Errorf</span><span class="op" id="7733586">(</span><span class="string" id="7733587">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7733624">,</span>&nbsp;<span class="ident" id="7733626">i</span><span class="op" id="7733627">,</span>&nbsp;<span class="ident" id="7733629">k</span><span class="op" id="7733630">,</span>&nbsp;<span class="ident" id="7733632">j</span><span class="op" id="7733633">,</span>&nbsp;<span class="ident" id="7733635">v</span><span class="op" id="7733636">,</span>&nbsp;<span class="ident" id="7733638">ev</span><span class="op" id="7733640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733658">}</span><br>
<span class="lineno">830</span><span class="op" id="7733660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733663">type</span>&nbsp;<span class="ident" id="7733668">RequestURITest</span>&nbsp;<span class="keyword" id="7733683">struct</span>&nbsp;<span class="op" id="7733690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733693">url</span>&nbsp;<span class="op" id="7733697">*</span><span class="ident" id="7733698">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733703">out</span>&nbsp;<span class="builtintype" id="7733707">string</span><br>
<span class="lineno">835</span><span class="op" id="7733714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7733717">var</span>&nbsp;<span class="ident" id="7733721">requritests</span>&nbsp;<span class="op" id="7733733">=</span>&nbsp;<span class="op" id="7733735">[</span><span class="op" id="7733736">]</span><span class="ident" id="7733737">RequestURITest</span><span class="op" id="7733751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733758">&amp;</span><span class="ident" id="7733759">URL</span><span class="op" id="7733762">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733767">Scheme</span><span class="op" id="7733773">:</span>&nbsp;<span class="string" id="7733775">&#34;http&#34;</span><span class="op" id="7733781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733786">Host</span><span class="op" id="7733790">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7733794">&#34;example.com&#34;</span><span class="op" id="7733807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733812">Path</span><span class="op" id="7733816">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7733820">&#34;&#34;</span><span class="op" id="7733822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733826">}</span><span class="op" id="7733827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733831">&#34;/&#34;</span><span class="op" id="7733834">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733837">}</span><span class="op" id="7733838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733845">&amp;</span><span class="ident" id="7733846">URL</span><span class="op" id="7733849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733854">Scheme</span><span class="op" id="7733860">:</span>&nbsp;<span class="string" id="7733862">&#34;http&#34;</span><span class="op" id="7733868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733873">Host</span><span class="op" id="7733877">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7733881">&#34;example.com&#34;</span><span class="op" id="7733894">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733899">Path</span><span class="op" id="7733903">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7733907">&#34;/a&nbsp;b&#34;</span><span class="op" id="7733913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733917">}</span><span class="op" id="7733918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7733922">&#34;/a%20b&#34;</span><span class="op" id="7733930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733933">}</span><span class="op" id="7733934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7733937">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7733977">&amp;</span><span class="ident" id="7733978">URL</span><span class="op" id="7733981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7733986">Scheme</span><span class="op" id="7733992">:</span>&nbsp;<span class="string" id="7733994">&#34;http&#34;</span><span class="op" id="7734000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734005">Host</span><span class="op" id="7734009">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734013">&#34;example.com&#34;</span><span class="op" id="7734026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734031">Opaque</span><span class="op" id="7734037">:</span>&nbsp;<span class="string" id="7734039">&#34;/%2F/%2F/&#34;</span><span class="op" id="7734050">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734054">}</span><span class="op" id="7734055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734059">&#34;/%2F/%2F/&#34;</span><span class="op" id="7734070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734073">}</span><span class="op" id="7734074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7734077">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734113">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734117">&amp;</span><span class="ident" id="7734118">URL</span><span class="op" id="7734121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734126">Scheme</span><span class="op" id="7734132">:</span>&nbsp;<span class="string" id="7734134">&#34;http&#34;</span><span class="op" id="7734140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734145">Host</span><span class="op" id="7734149">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734153">&#34;example.com&#34;</span><span class="op" id="7734166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734171">Opaque</span><span class="op" id="7734177">:</span>&nbsp;<span class="string" id="7734179">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="7734209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734213">}</span><span class="op" id="7734214">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734218">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="7734253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734256">}</span><span class="op" id="7734257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734264">&amp;</span><span class="ident" id="7734265">URL</span><span class="op" id="7734268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734273">Scheme</span><span class="op" id="7734279">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734283">&#34;http&#34;</span><span class="op" id="7734289">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734294">Host</span><span class="op" id="7734298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734304">&#34;example.com&#34;</span><span class="op" id="7734317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734322">Path</span><span class="op" id="7734326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7734332">&#34;/a&nbsp;b&#34;</span><span class="op" id="7734338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734343">RawQuery</span><span class="op" id="7734351">:</span>&nbsp;<span class="string" id="7734353">&#34;q=go+language&#34;</span><span class="op" id="7734368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734372">}</span><span class="op" id="7734373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734377">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="7734399">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734402">}</span><span class="op" id="7734403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734410">&amp;</span><span class="ident" id="7734411">URL</span><span class="op" id="7734414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734419">Scheme</span><span class="op" id="7734425">:</span>&nbsp;<span class="string" id="7734427">&#34;myschema&#34;</span><span class="op" id="7734437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734442">Opaque</span><span class="op" id="7734448">:</span>&nbsp;<span class="string" id="7734450">&#34;opaque&#34;</span><span class="op" id="7734458">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734462">}</span><span class="op" id="7734463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734467">&#34;opaque&#34;</span><span class="op" id="7734475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734478">}</span><span class="op" id="7734479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734486">&amp;</span><span class="ident" id="7734487">URL</span><span class="op" id="7734490">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734495">Scheme</span><span class="op" id="7734501">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734505">&#34;myschema&#34;</span><span class="op" id="7734515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734520">Opaque</span><span class="op" id="7734526">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7734530">&#34;opaque&#34;</span><span class="op" id="7734538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734543">RawQuery</span><span class="op" id="7734551">:</span>&nbsp;<span class="string" id="7734553">&#34;q=go+language&#34;</span><span class="op" id="7734568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734572">}</span><span class="op" id="7734573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7734577">&#34;opaque?q=go+language&#34;</span><span class="op" id="7734599">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734602">}</span><span class="op" id="7734603">,</span><br>
<span class="lineno"></span><span class="op" id="7734605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7734608">func</span>&nbsp;<span class="ident" id="7734613">TestRequestURI</span><span class="op" id="7734627">(</span><span class="ident" id="7734628">t</span>&nbsp;<span class="op" id="7734630">*</span><span class="ident" id="7734631">testing</span><span class="op" id="7734638">.</span><span class="ident" id="7734639">T</span><span class="op" id="7734640">)</span>&nbsp;<span class="op" id="7734642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734645">for</span>&nbsp;<span class="ident" id="7734649">_</span><span class="op" id="7734650">,</span>&nbsp;<span class="ident" id="7734652">tt</span>&nbsp;<span class="op" id="7734655">:=</span>&nbsp;<span class="keyword" id="7734658">range</span>&nbsp;<span class="ident" id="7734664">requritests</span>&nbsp;<span class="op" id="7734676">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734680">s</span>&nbsp;<span class="op" id="7734682">:=</span>&nbsp;<span class="ident" id="7734685">tt</span><span class="op" id="7734687">.</span><span class="ident" id="7734688">url</span><span class="op" id="7734691">.</span><span class="ident" id="7734692">RequestURI</span><span class="op" id="7734702">(</span><span class="op" id="7734703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734707">if</span>&nbsp;<span class="ident" id="7734710">s</span>&nbsp;<span class="op" id="7734712">!=</span>&nbsp;<span class="ident" id="7734715">tt</span><span class="op" id="7734717">.</span><span class="ident" id="7734718">out</span>&nbsp;<span class="op" id="7734722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734727">t</span><span class="op" id="7734728">.</span><span class="ident" id="7734729">Errorf</span><span class="op" id="7734735">(</span><span class="string" id="7734736">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7734774">,</span>&nbsp;<span class="ident" id="7734776">tt</span><span class="op" id="7734778">.</span><span class="ident" id="7734779">url</span><span class="op" id="7734782">,</span>&nbsp;<span class="ident" id="7734784">s</span><span class="op" id="7734785">,</span>&nbsp;<span class="ident" id="7734787">tt</span><span class="op" id="7734789">.</span><span class="ident" id="7734790">out</span><span class="op" id="7734793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7734800">}</span><br>
<span class="lineno">905</span><span class="op" id="7734802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7734805">func</span>&nbsp;<span class="ident" id="7734810">TestParseFailure</span><span class="op" id="7734826">(</span><span class="ident" id="7734827">t</span>&nbsp;<span class="op" id="7734829">*</span><span class="ident" id="7734830">testing</span><span class="op" id="7734837">.</span><span class="ident" id="7734838">T</span><span class="op" id="7734839">)</span>&nbsp;<span class="op" id="7734841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7734844">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734893">const</span>&nbsp;<span class="ident" id="7734899">url</span>&nbsp;<span class="op" id="7734903">=</span>&nbsp;<span class="string" id="7734905">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734916">_</span><span class="op" id="7734917">,</span>&nbsp;<span class="ident" id="7734919">err</span>&nbsp;<span class="op" id="7734923">:=</span>&nbsp;<span class="ident" id="7734926">ParseQuery</span><span class="op" id="7734936">(</span><span class="ident" id="7734937">url</span><span class="op" id="7734940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7734943">errStr</span>&nbsp;<span class="op" id="7734950">:=</span>&nbsp;<span class="ident" id="7734953">fmt</span><span class="op" id="7734956">.</span><span class="ident" id="7734957">Sprint</span><span class="op" id="7734963">(</span><span class="ident" id="7734964">err</span><span class="op" id="7734967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7734970">if</span>&nbsp;<span class="op" id="7734973">!</span><span class="ident" id="7734974">strings</span><span class="op" id="7734981">.</span><span class="ident" id="7734982">Contains</span><span class="op" id="7734990">(</span><span class="ident" id="7734991">errStr</span><span class="op" id="7734997">,</span>&nbsp;<span class="string" id="7734999">&#34;%gh&#34;</span><span class="op" id="7735004">)</span>&nbsp;<span class="op" id="7735006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735010">t</span><span class="op" id="7735011">.</span><span class="ident" id="7735012">Errorf</span><span class="op" id="7735018">(</span><span class="string" id="7735019">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="7735084">,</span>&nbsp;<span class="ident" id="7735086">url</span><span class="op" id="7735089">,</span>&nbsp;<span class="ident" id="7735091">errStr</span><span class="op" id="7735097">,</span>&nbsp;<span class="string" id="7735099">&#34;%gh&#34;</span><span class="op" id="7735104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735107">}</span><br>
<span class="lineno">915</span><span class="op" id="7735109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7735112">type</span>&nbsp;<span class="ident" id="7735117">shouldEscapeTest</span>&nbsp;<span class="keyword" id="7735134">struct</span>&nbsp;<span class="op" id="7735141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735144">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7735151">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735157">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7735164">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7735174">escape</span>&nbsp;<span class="builtintype" id="7735181">bool</span><br>
<span class="lineno"></span><span class="op" id="7735186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7735189">var</span>&nbsp;<span class="ident" id="7735193">shouldEscapeTests</span>&nbsp;<span class="op" id="7735211">=</span>&nbsp;<span class="op" id="7735213">[</span><span class="op" id="7735214">]</span><span class="ident" id="7735215">shouldEscapeTest</span><span class="op" id="7735231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7735234">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735268">{</span><span class="string" id="7735269">&#39;a&#39;</span><span class="op" id="7735272">,</span>&nbsp;<span class="ident" id="7735274">encodePath</span><span class="op" id="7735284">,</span>&nbsp;<span class="builtintype" id="7735286">false</span><span class="op" id="7735291">}</span><span class="op" id="7735292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735295">{</span><span class="string" id="7735296">&#39;a&#39;</span><span class="op" id="7735299">,</span>&nbsp;<span class="ident" id="7735301">encodeUserPassword</span><span class="op" id="7735319">,</span>&nbsp;<span class="builtintype" id="7735321">false</span><span class="op" id="7735326">}</span><span class="op" id="7735327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735330">{</span><span class="string" id="7735331">&#39;a&#39;</span><span class="op" id="7735334">,</span>&nbsp;<span class="ident" id="7735336">encodeQueryComponent</span><span class="op" id="7735356">,</span>&nbsp;<span class="builtintype" id="7735358">false</span><span class="op" id="7735363">}</span><span class="op" id="7735364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735367">{</span><span class="string" id="7735368">&#39;a&#39;</span><span class="op" id="7735371">,</span>&nbsp;<span class="ident" id="7735373">encodeFragment</span><span class="op" id="7735387">,</span>&nbsp;<span class="builtintype" id="7735389">false</span><span class="op" id="7735394">}</span><span class="op" id="7735395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735398">{</span><span class="string" id="7735399">&#39;z&#39;</span><span class="op" id="7735402">,</span>&nbsp;<span class="ident" id="7735404">encodePath</span><span class="op" id="7735414">,</span>&nbsp;<span class="builtintype" id="7735416">false</span><span class="op" id="7735421">}</span><span class="op" id="7735422">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735425">{</span><span class="string" id="7735426">&#39;A&#39;</span><span class="op" id="7735429">,</span>&nbsp;<span class="ident" id="7735431">encodePath</span><span class="op" id="7735441">,</span>&nbsp;<span class="builtintype" id="7735443">false</span><span class="op" id="7735448">}</span><span class="op" id="7735449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735452">{</span><span class="string" id="7735453">&#39;Z&#39;</span><span class="op" id="7735456">,</span>&nbsp;<span class="ident" id="7735458">encodePath</span><span class="op" id="7735468">,</span>&nbsp;<span class="builtintype" id="7735470">false</span><span class="op" id="7735475">}</span><span class="op" id="7735476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735479">{</span><span class="string" id="7735480">&#39;0&#39;</span><span class="op" id="7735483">,</span>&nbsp;<span class="ident" id="7735485">encodePath</span><span class="op" id="7735495">,</span>&nbsp;<span class="builtintype" id="7735497">false</span><span class="op" id="7735502">}</span><span class="op" id="7735503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735506">{</span><span class="string" id="7735507">&#39;9&#39;</span><span class="op" id="7735510">,</span>&nbsp;<span class="ident" id="7735512">encodePath</span><span class="op" id="7735522">,</span>&nbsp;<span class="builtintype" id="7735524">false</span><span class="op" id="7735529">}</span><span class="op" id="7735530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735533">{</span><span class="string" id="7735534">&#39;-&#39;</span><span class="op" id="7735537">,</span>&nbsp;<span class="ident" id="7735539">encodePath</span><span class="op" id="7735549">,</span>&nbsp;<span class="builtintype" id="7735551">false</span><span class="op" id="7735556">}</span><span class="op" id="7735557">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735560">{</span><span class="string" id="7735561">&#39;-&#39;</span><span class="op" id="7735564">,</span>&nbsp;<span class="ident" id="7735566">encodeUserPassword</span><span class="op" id="7735584">,</span>&nbsp;<span class="builtintype" id="7735586">false</span><span class="op" id="7735591">}</span><span class="op" id="7735592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735595">{</span><span class="string" id="7735596">&#39;-&#39;</span><span class="op" id="7735599">,</span>&nbsp;<span class="ident" id="7735601">encodeQueryComponent</span><span class="op" id="7735621">,</span>&nbsp;<span class="builtintype" id="7735623">false</span><span class="op" id="7735628">}</span><span class="op" id="7735629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735632">{</span><span class="string" id="7735633">&#39;-&#39;</span><span class="op" id="7735636">,</span>&nbsp;<span class="ident" id="7735638">encodeFragment</span><span class="op" id="7735652">,</span>&nbsp;<span class="builtintype" id="7735654">false</span><span class="op" id="7735659">}</span><span class="op" id="7735660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735663">{</span><span class="string" id="7735664">&#39;.&#39;</span><span class="op" id="7735667">,</span>&nbsp;<span class="ident" id="7735669">encodePath</span><span class="op" id="7735679">,</span>&nbsp;<span class="builtintype" id="7735681">false</span><span class="op" id="7735686">}</span><span class="op" id="7735687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735690">{</span><span class="string" id="7735691">&#39;_&#39;</span><span class="op" id="7735694">,</span>&nbsp;<span class="ident" id="7735696">encodePath</span><span class="op" id="7735706">,</span>&nbsp;<span class="builtintype" id="7735708">false</span><span class="op" id="7735713">}</span><span class="op" id="7735714">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735717">{</span><span class="string" id="7735718">&#39;~&#39;</span><span class="op" id="7735721">,</span>&nbsp;<span class="ident" id="7735723">encodePath</span><span class="op" id="7735733">,</span>&nbsp;<span class="builtintype" id="7735735">false</span><span class="op" id="7735740">}</span><span class="op" id="7735741">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7735745">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735776">{</span><span class="string" id="7735777">&#39;:&#39;</span><span class="op" id="7735780">,</span>&nbsp;<span class="ident" id="7735782">encodeUserPassword</span><span class="op" id="7735800">,</span>&nbsp;<span class="builtintype" id="7735802">true</span><span class="op" id="7735806">}</span><span class="op" id="7735807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735810">{</span><span class="string" id="7735811">&#39;/&#39;</span><span class="op" id="7735814">,</span>&nbsp;<span class="ident" id="7735816">encodeUserPassword</span><span class="op" id="7735834">,</span>&nbsp;<span class="builtintype" id="7735836">true</span><span class="op" id="7735840">}</span><span class="op" id="7735841">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735844">{</span><span class="string" id="7735845">&#39;?&#39;</span><span class="op" id="7735848">,</span>&nbsp;<span class="ident" id="7735850">encodeUserPassword</span><span class="op" id="7735868">,</span>&nbsp;<span class="builtintype" id="7735870">true</span><span class="op" id="7735874">}</span><span class="op" id="7735875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735878">{</span><span class="string" id="7735879">&#39;@&#39;</span><span class="op" id="7735882">,</span>&nbsp;<span class="ident" id="7735884">encodeUserPassword</span><span class="op" id="7735902">,</span>&nbsp;<span class="builtintype" id="7735904">true</span><span class="op" id="7735908">}</span><span class="op" id="7735909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735912">{</span><span class="string" id="7735913">&#39;$&#39;</span><span class="op" id="7735916">,</span>&nbsp;<span class="ident" id="7735918">encodeUserPassword</span><span class="op" id="7735936">,</span>&nbsp;<span class="builtintype" id="7735938">false</span><span class="op" id="7735943">}</span><span class="op" id="7735944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735947">{</span><span class="string" id="7735948">&#39;&amp;&#39;</span><span class="op" id="7735951">,</span>&nbsp;<span class="ident" id="7735953">encodeUserPassword</span><span class="op" id="7735971">,</span>&nbsp;<span class="builtintype" id="7735973">false</span><span class="op" id="7735978">}</span><span class="op" id="7735979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7735982">{</span><span class="string" id="7735983">&#39;+&#39;</span><span class="op" id="7735986">,</span>&nbsp;<span class="ident" id="7735988">encodeUserPassword</span><span class="op" id="7736006">,</span>&nbsp;<span class="builtintype" id="7736008">false</span><span class="op" id="7736013">}</span><span class="op" id="7736014">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736017">{</span><span class="string" id="7736018">&#39;,&#39;</span><span class="op" id="7736021">,</span>&nbsp;<span class="ident" id="7736023">encodeUserPassword</span><span class="op" id="7736041">,</span>&nbsp;<span class="builtintype" id="7736043">false</span><span class="op" id="7736048">}</span><span class="op" id="7736049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736052">{</span><span class="string" id="7736053">&#39;;&#39;</span><span class="op" id="7736056">,</span>&nbsp;<span class="ident" id="7736058">encodeUserPassword</span><span class="op" id="7736076">,</span>&nbsp;<span class="builtintype" id="7736078">false</span><span class="op" id="7736083">}</span><span class="op" id="7736084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736087">{</span><span class="string" id="7736088">&#39;=&#39;</span><span class="op" id="7736091">,</span>&nbsp;<span class="ident" id="7736093">encodeUserPassword</span><span class="op" id="7736111">,</span>&nbsp;<span class="builtintype" id="7736113">false</span><span class="op" id="7736118">}</span><span class="op" id="7736119">,</span><br>
<span class="lineno"></span><span class="op" id="7736121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="7736124">func</span>&nbsp;<span class="ident" id="7736129">TestShouldEscape</span><span class="op" id="7736145">(</span><span class="ident" id="7736146">t</span>&nbsp;<span class="op" id="7736148">*</span><span class="ident" id="7736149">testing</span><span class="op" id="7736156">.</span><span class="ident" id="7736157">T</span><span class="op" id="7736158">)</span>&nbsp;<span class="op" id="7736160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736163">for</span>&nbsp;<span class="ident" id="7736167">_</span><span class="op" id="7736168">,</span>&nbsp;<span class="ident" id="7736170">tt</span>&nbsp;<span class="op" id="7736173">:=</span>&nbsp;<span class="keyword" id="7736176">range</span>&nbsp;<span class="ident" id="7736182">shouldEscapeTests</span>&nbsp;<span class="op" id="7736200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7736204">if</span>&nbsp;<span class="ident" id="7736207">shouldEscape</span><span class="op" id="7736219">(</span><span class="ident" id="7736220">tt</span><span class="op" id="7736222">.</span><span class="ident" id="7736223">in</span><span class="op" id="7736225">,</span>&nbsp;<span class="ident" id="7736227">tt</span><span class="op" id="7736229">.</span><span class="ident" id="7736230">mode</span><span class="op" id="7736234">)</span>&nbsp;<span class="op" id="7736236">!=</span>&nbsp;<span class="ident" id="7736239">tt</span><span class="op" id="7736241">.</span><span class="ident" id="7736242">escape</span>&nbsp;<span class="op" id="7736249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736254">t</span><span class="op" id="7736255">.</span><span class="ident" id="7736256">Errorf</span><span class="op" id="7736262">(</span><span class="string" id="7736263">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7736310">,</span>&nbsp;<span class="ident" id="7736312">tt</span><span class="op" id="7736314">.</span><span class="ident" id="7736315">in</span><span class="op" id="7736317">,</span>&nbsp;<span class="ident" id="7736319">tt</span><span class="op" id="7736321">.</span><span class="ident" id="7736322">mode</span><span class="op" id="7736326">,</span>&nbsp;<span class="op" id="7736328">!</span><span class="ident" id="7736329">tt</span><span class="op" id="7736331">.</span><span class="ident" id="7736332">escape</span><span class="op" id="7736338">,</span>&nbsp;<span class="ident" id="7736340">tt</span><span class="op" id="7736342">.</span><span class="ident" id="7736343">escape</span><span class="op" id="7736349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736353">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7736356">}</span><br>
<span class="lineno"></span><span class="op" id="7736358">}</span>
</div>
</body>
</html>
