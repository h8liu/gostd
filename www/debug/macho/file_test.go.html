<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword">package</span>&nbsp;<span class="ident">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">import</span>&nbsp;<span class="op">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">fileTest</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">segments</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SegmentHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">sections</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SectionHeader</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">fileTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">fileTest</span><span class="op">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;testdata/gcc-386-darwin-exec&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">FileHeader</span><span class="op">{</span><span class="num">0xfeedface</span><span class="op">,</span>&nbsp;<span class="ident">Cpu386</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0xc</span><span class="op">,</span>&nbsp;<span class="num">0x3c0</span><span class="op">,</span>&nbsp;<span class="num">0x85</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SegmentHeader</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment</span><span class="op">,</span>&nbsp;<span class="num">0x38</span><span class="op">,</span>&nbsp;<span class="string">&#34;__PAGEZERO&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment</span><span class="op">,</span>&nbsp;<span class="num">0xc0</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x5</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment</span><span class="op">,</span>&nbsp;<span class="num">0xc0</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x2000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment</span><span class="op">,</span>&nbsp;<span class="num">0x7c</span><span class="op">,</span>&nbsp;<span class="string">&#34;__IMPORT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x3000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x2000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x1</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment</span><span class="op">,</span>&nbsp;<span class="num">0x38</span><span class="op">,</span>&nbsp;<span class="string">&#34;__LINKEDIT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x4000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x3000</span><span class="op">,</span>&nbsp;<span class="num">0x12c</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x1</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SectionHeader</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__text&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x1f68</span><span class="op">,</span>&nbsp;<span class="num">0x88</span><span class="op">,</span>&nbsp;<span class="num">0xf68</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x80000400</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__cstring&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x1ff0</span><span class="op">,</span>&nbsp;<span class="num">0xd</span><span class="op">,</span>&nbsp;<span class="num">0xff0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__data&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x2000</span><span class="op">,</span>&nbsp;<span class="num">0x14</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__dyld&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x2014</span><span class="op">,</span>&nbsp;<span class="num">0x1c</span><span class="op">,</span>&nbsp;<span class="num">0x1014</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__jump_table&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__IMPORT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x3000</span><span class="op">,</span>&nbsp;<span class="num">0xa</span><span class="op">,</span>&nbsp;<span class="num">0x2000</span><span class="op">,</span>&nbsp;<span class="num">0x6</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x4000008</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;testdata/gcc-amd64-darwin-exec&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">FileHeader</span><span class="op">{</span><span class="num">0xfeedfacf</span><span class="op">,</span>&nbsp;<span class="ident">CpuAmd64</span><span class="op">,</span>&nbsp;<span class="num">0x80000003</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0xb</span><span class="op">,</span>&nbsp;<span class="num">0x568</span><span class="op">,</span>&nbsp;<span class="num">0x85</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SegmentHeader</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x48</span><span class="op">,</span>&nbsp;<span class="string">&#34;__PAGEZERO&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x100000000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x1d8</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x5</span><span class="op">,</span>&nbsp;<span class="num">0x5</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x138</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x48</span><span class="op">,</span>&nbsp;<span class="string">&#34;__LINKEDIT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100002000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x2000</span><span class="op">,</span>&nbsp;<span class="num">0x140</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x1</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SectionHeader</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__text&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000f14</span><span class="op">,</span>&nbsp;<span class="num">0x6d</span><span class="op">,</span>&nbsp;<span class="num">0xf14</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x80000400</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__symbol_stub1&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000f81</span><span class="op">,</span>&nbsp;<span class="num">0xc</span><span class="op">,</span>&nbsp;<span class="num">0xf81</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x80000408</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__stub_helper&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000f90</span><span class="op">,</span>&nbsp;<span class="num">0x18</span><span class="op">,</span>&nbsp;<span class="num">0xf90</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__cstring&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000fa8</span><span class="op">,</span>&nbsp;<span class="num">0xd</span><span class="op">,</span>&nbsp;<span class="num">0xfa8</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__eh_frame&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000fb8</span><span class="op">,</span>&nbsp;<span class="num">0x48</span><span class="op">,</span>&nbsp;<span class="num">0xfb8</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x6000000b</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__data&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001000</span><span class="op">,</span>&nbsp;<span class="num">0x1c</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__dyld&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001020</span><span class="op">,</span>&nbsp;<span class="num">0x38</span><span class="op">,</span>&nbsp;<span class="num">0x1020</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__la_symbol_ptr&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001058</span><span class="op">,</span>&nbsp;<span class="num">0x10</span><span class="op">,</span>&nbsp;<span class="num">0x1058</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;testdata/gcc-amd64-darwin-exec-debug&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">FileHeader</span><span class="op">{</span><span class="num">0xfeedfacf</span><span class="op">,</span>&nbsp;<span class="ident">CpuAmd64</span><span class="op">,</span>&nbsp;<span class="num">0x80000003</span><span class="op">,</span>&nbsp;<span class="num">0xa</span><span class="op">,</span>&nbsp;<span class="num">0x4</span><span class="op">,</span>&nbsp;<span class="num">0x5a0</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SegmentHeader</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x1d8</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x5</span><span class="op">,</span>&nbsp;<span class="num">0x5</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x138</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">LoadCmdSegment64</span><span class="op">,</span>&nbsp;<span class="num">0x278</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100002000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x1bc</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">SectionHeader</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__text&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000f14</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x80000400</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__symbol_stub1&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000f81</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x80000408</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__stub_helper&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000f90</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__cstring&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000fa8</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__eh_frame&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__TEXT&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100000fb8</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x6000000b</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__data&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__dyld&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001020</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x3</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__la_symbol_ptr&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DATA&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100001058</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x2</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x7</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_abbrev&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100002000</span><span class="op">,</span>&nbsp;<span class="num">0x36</span><span class="op">,</span>&nbsp;<span class="num">0x1000</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_aranges&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100002036</span><span class="op">,</span>&nbsp;<span class="num">0x30</span><span class="op">,</span>&nbsp;<span class="num">0x1036</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_frame&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100002066</span><span class="op">,</span>&nbsp;<span class="num">0x40</span><span class="op">,</span>&nbsp;<span class="num">0x1066</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_info&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x1000020a6</span><span class="op">,</span>&nbsp;<span class="num">0x54</span><span class="op">,</span>&nbsp;<span class="num">0x10a6</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_line&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x1000020fa</span><span class="op">,</span>&nbsp;<span class="num">0x47</span><span class="op">,</span>&nbsp;<span class="num">0x10fa</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_pubnames&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x100002141</span><span class="op">,</span>&nbsp;<span class="num">0x1b</span><span class="op">,</span>&nbsp;<span class="num">0x1141</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;__debug_str&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;__DWARF&#34;</span><span class="op">,</span>&nbsp;<span class="num">0x10000215c</span><span class="op">,</span>&nbsp;<span class="num">0x60</span><span class="op">,</span>&nbsp;<span class="num">0x115c</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">,</span>&nbsp;<span class="num">0x0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestOpen</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">fileTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">fileTests</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">f</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Open</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Error</span><span class="op">(</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">f</span><span class="op">.</span><span class="ident">FileHeader</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">hdr</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">f</span><span class="op">.</span><span class="ident">FileHeader</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">hdr</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">l</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">f</span><span class="op">.</span><span class="ident">Loads</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">&gt;=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">segments</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">sh</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">segments</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">,</span>&nbsp;<span class="ident">ok</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">l</span><span class="op">.</span><span class="op">(</span><span class="op">*</span><span class="ident">Segment</span><span class="op">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">sh</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">ok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:&nbsp;skipping&nbsp;%#v\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">s</span><span class="op">.</span><span class="ident">SegmentHeader</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">ok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:&nbsp;not&nbsp;*Segment\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">have</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">s</span><span class="op">.</span><span class="ident">SegmentHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">want</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">sh</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">have</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s,&nbsp;segment&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">have</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">tn</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">segments</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">fn</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">f</span><span class="op">.</span><span class="ident">Loads</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tn</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">fn</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s:&nbsp;len(Loads)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">fn</span><span class="op">,</span>&nbsp;<span class="ident">tn</span><span class="op">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">sh</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">f</span><span class="op">.</span><span class="ident">Sections</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">&gt;=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">sections</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">break</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">have</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">sh</span><span class="op">.</span><span class="ident">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">want</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">sections</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">have</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">have</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">tn</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">sections</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">fn</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">f</span><span class="op">.</span><span class="ident">Sections</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tn</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">fn</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">fn</span><span class="op">,</span>&nbsp;<span class="ident">tn</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestOpenFailure</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">filename</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;not&nbsp;a&nbsp;Mach-O&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Open</span><span class="op">(</span><span class="ident">filename</span><span class="op">)</span>&nbsp;<span class="comment">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filename</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestOpenFat</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ff</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">OpenFat</span><span class="op">(</span><span class="string">&#34;testdata/fat-gcc-386-amd64-darwin-exec&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatal</span><span class="op">(</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">ff</span><span class="op">.</span><span class="ident">Magic</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">MagicFat</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat:&nbsp;got&nbsp;magic&nbsp;number&nbsp;%#x,&nbsp;want&nbsp;%#x&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ff</span><span class="op">.</span><span class="ident">Magic</span><span class="op">,</span>&nbsp;<span class="ident">MagicFat</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">ff</span><span class="op">.</span><span class="ident">Arches</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">2</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat:&nbsp;got&nbsp;%d&nbsp;architectures,&nbsp;want&nbsp;2&#34;</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">ff</span><span class="op">.</span><span class="ident">Arches</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">ff</span><span class="op">.</span><span class="ident">Arches</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">arch</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">ff</span><span class="op">.</span><span class="ident">Arches</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ftArch</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">fileTests</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">arch</span><span class="op">.</span><span class="ident">Cpu</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">ftArch</span><span class="op">.</span><span class="ident">hdr</span><span class="op">.</span><span class="ident">Cpu</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">arch</span><span class="op">.</span><span class="ident">SubCpu</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">ftArch</span><span class="op">.</span><span class="ident">hdr</span><span class="op">.</span><span class="ident">SubCpu</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat:&nbsp;architecture&nbsp;#%d&nbsp;got&nbsp;cpu=%#x&nbsp;subtype=%#x,&nbsp;expected&nbsp;cpu=%#x,&nbsp;subtype=%#x&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">arch</span><span class="op">.</span><span class="ident">Cpu</span><span class="op">,</span>&nbsp;<span class="ident">arch</span><span class="op">.</span><span class="ident">SubCpu</span><span class="op">,</span>&nbsp;<span class="ident">ftArch</span><span class="op">.</span><span class="ident">hdr</span><span class="op">.</span><span class="ident">Cpu</span><span class="op">,</span>&nbsp;<span class="ident">ftArch</span><span class="op">.</span><span class="ident">hdr</span><span class="op">.</span><span class="ident">SubCpu</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">arch</span><span class="op">.</span><span class="ident">FileHeader</span><span class="op">,</span>&nbsp;<span class="ident">ftArch</span><span class="op">.</span><span class="ident">hdr</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat&nbsp;header:\n\tgot&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">arch</span><span class="op">.</span><span class="ident">FileHeader</span><span class="op">,</span>&nbsp;<span class="ident">ftArch</span><span class="op">.</span><span class="ident">hdr</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestOpenFatFailure</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">filename</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;file.go&#34;</span>&nbsp;<span class="comment">//&nbsp;not&nbsp;a&nbsp;Mach-O&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">OpenFat</span><span class="op">(</span><span class="ident">filename</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filename</span><span class="op">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">filename</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">&#34;testdata/gcc-386-darwin-exec&#34;</span>&nbsp;<span class="comment">//&nbsp;not&nbsp;a&nbsp;fat&nbsp;Mach-O</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ff</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">OpenFat</span><span class="op">(</span><span class="ident">filename</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">ErrNotFat</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat&nbsp;%s:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;ErrNotFat&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filename</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">ff</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;OpenFat&nbsp;%s:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filename</span><span class="op">,</span>&nbsp;<span class="ident">ff</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">210</span><span class="op">}</span>
</div>
</body>
</html>
