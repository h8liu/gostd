<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html" class="current">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4867921">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4867976">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4868030">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4868081">package</span>&nbsp;<span class="ident" id="4868089">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4868099">import</span>&nbsp;<span class="op" id="4868106">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4868109">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4868116">&#34;reflect&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4868126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4868129">//&nbsp;Strings&nbsp;of&nbsp;content&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="4868174">type</span>&nbsp;<span class="op" id="4868179">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868182">//&nbsp;CSS&nbsp;encapsulates&nbsp;known&nbsp;safe&nbsp;content&nbsp;that&nbsp;matches&nbsp;any&nbsp;of:</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868243">//&nbsp;&nbsp;&nbsp;1.&nbsp;The&nbsp;CSS3&nbsp;stylesheet&nbsp;production,&nbsp;such&nbsp;as&nbsp;`p&nbsp;{&nbsp;color:&nbsp;purple&nbsp;}`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868315">//&nbsp;&nbsp;&nbsp;2.&nbsp;The&nbsp;CSS3&nbsp;rule&nbsp;production,&nbsp;such&nbsp;as&nbsp;`a[href=~&#34;https:&#34;].foo#bar`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868387">//&nbsp;&nbsp;&nbsp;3.&nbsp;CSS3&nbsp;declaration&nbsp;productions,&nbsp;such&nbsp;as&nbsp;`color:&nbsp;red;&nbsp;margin:&nbsp;2px`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868461">//&nbsp;&nbsp;&nbsp;4.&nbsp;The&nbsp;CSS3&nbsp;value&nbsp;production,&nbsp;such&nbsp;as&nbsp;`rgba(0,&nbsp;0,&nbsp;255,&nbsp;127)`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868529">//&nbsp;See&nbsp;http://www.w3.org/TR/css3-syntax/#parsing&nbsp;and</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868583">//&nbsp;https://web.archive.org/web/20090211114933/http://w3.org/TR/css3-syntax#style</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4868665">CSS</span>&nbsp;<span class="builtintype" id="4868669">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868678">//&nbsp;HTML&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;HTML&nbsp;document&nbsp;fragment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868737">//&nbsp;It&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;for&nbsp;HTML&nbsp;from&nbsp;a&nbsp;third-party,&nbsp;or&nbsp;HTML&nbsp;with</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868805">//&nbsp;unclosed&nbsp;tags&nbsp;or&nbsp;comments.&nbsp;The&nbsp;outputs&nbsp;of&nbsp;a&nbsp;sound&nbsp;HTML&nbsp;sanitizer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868874">//&nbsp;and&nbsp;a&nbsp;template&nbsp;escaped&nbsp;by&nbsp;this&nbsp;package&nbsp;are&nbsp;fine&nbsp;for&nbsp;use&nbsp;with&nbsp;HTML.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4868945">HTML</span>&nbsp;<span class="builtintype" id="4868950">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4868959">//&nbsp;HTMLAttr&nbsp;encapsulates&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869026">//&nbsp;for&nbsp;example,&nbsp;`&nbsp;dir=&#34;ltr&#34;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4869057">HTMLAttr</span>&nbsp;<span class="builtintype" id="4869066">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869075">//&nbsp;JS&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;EcmaScript5&nbsp;Expression,&nbsp;for&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869145">//&nbsp;`(x&nbsp;+&nbsp;y&nbsp;*&nbsp;z())`.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869166">//&nbsp;Template&nbsp;authors&nbsp;are&nbsp;responsible&nbsp;for&nbsp;ensuring&nbsp;that&nbsp;typed&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869239">//&nbsp;do&nbsp;not&nbsp;break&nbsp;the&nbsp;intended&nbsp;precedence&nbsp;and&nbsp;that&nbsp;there&nbsp;is&nbsp;no</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869301">//&nbsp;statement/expression&nbsp;ambiguity&nbsp;as&nbsp;when&nbsp;passing&nbsp;an&nbsp;expression&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869371">//&nbsp;&#34;{&nbsp;foo:&nbsp;bar()&nbsp;}\n[&#39;foo&#39;]()&#34;,&nbsp;which&nbsp;is&nbsp;both&nbsp;a&nbsp;valid&nbsp;Expression&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869443">//&nbsp;valid&nbsp;Program&nbsp;with&nbsp;a&nbsp;very&nbsp;different&nbsp;meaning.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4869492">JS</span>&nbsp;<span class="builtintype" id="4869495">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869504">//&nbsp;JSStr&nbsp;encapsulates&nbsp;a&nbsp;sequence&nbsp;of&nbsp;characters&nbsp;meant&nbsp;to&nbsp;be&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869573">//&nbsp;between&nbsp;quotes&nbsp;in&nbsp;a&nbsp;JavaScript&nbsp;expression.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869620">//&nbsp;The&nbsp;string&nbsp;must&nbsp;match&nbsp;a&nbsp;series&nbsp;of&nbsp;StringCharacters:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869676">//&nbsp;&nbsp;&nbsp;StringCharacter&nbsp;::&nbsp;SourceCharacter&nbsp;but&nbsp;not&nbsp;`\`&nbsp;or&nbsp;LineTerminator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869747">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;EscapeSequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869787">//&nbsp;Note&nbsp;that&nbsp;LineContinuations&nbsp;are&nbsp;not&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869836">//&nbsp;JSStr(&#34;foo\\nbar&#34;)&nbsp;is&nbsp;fine,&nbsp;but&nbsp;JSStr(&#34;foo\\\nbar&#34;)&nbsp;is&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4869900">JSStr</span>&nbsp;<span class="builtintype" id="4869906">string</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869915">//&nbsp;URL&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;URL&nbsp;or&nbsp;URL&nbsp;substring&nbsp;(see&nbsp;RFC&nbsp;3986).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4869986">//&nbsp;A&nbsp;URL&nbsp;like&nbsp;`javascript:checkThatFormNotEditedBeforeLeavingPage()`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870056">//&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source&nbsp;should&nbsp;go&nbsp;in&nbsp;the&nbsp;page,&nbsp;but&nbsp;by&nbsp;default&nbsp;dynamic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870128">//&nbsp;`javascript:`&nbsp;URLs&nbsp;are&nbsp;filtered&nbsp;out&nbsp;since&nbsp;they&nbsp;are&nbsp;a&nbsp;frequently</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870196">//&nbsp;exploited&nbsp;injection&nbsp;vector.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870228">URL</span>&nbsp;<span class="builtintype" id="4870232">string</span><br>
<span class="lineno"></span><span class="op" id="4870239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4870242">type</span>&nbsp;<span class="ident" id="4870247">contentType</span>&nbsp;<span class="builtintype" id="4870259">uint8</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="4870266">const</span>&nbsp;<span class="op" id="4870272">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870275">contentTypePlain</span>&nbsp;<span class="ident" id="4870292"><a href="/gostd/html/template/content.go.html#4870247">contentType</a></span>&nbsp;<span class="op" id="4870304">=</span>&nbsp;<span class="ident" id="4870306">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870312">contentTypeCSS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870328">contentTypeHTML</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870345">contentTypeHTMLAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870366">contentTypeJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870381">contentTypeJSStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870399">contentTypeURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870415">//&nbsp;contentTypeUnsafe&nbsp;is&nbsp;used&nbsp;in&nbsp;attr.go&nbsp;for&nbsp;values&nbsp;that&nbsp;affect&nbsp;how</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870483">//&nbsp;embedded&nbsp;content&nbsp;and&nbsp;network&nbsp;messages&nbsp;are&nbsp;formed,&nbsp;vetted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870545">//&nbsp;or&nbsp;interpreted;&nbsp;or&nbsp;which&nbsp;credentials&nbsp;network&nbsp;messages&nbsp;carry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870610">contentTypeUnsafe</span><br>
<span class="lineno"></span><span class="op" id="4870628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="4870631">//&nbsp;indirect&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="4870696">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil).</span><br>
<span class="lineno"></span><span class="keyword" id="4870745">func</span>&nbsp;<span class="ident" id="4870750">indirect</span><span class="op" id="4870758">(</span><span class="ident" id="4870759">a</span>&nbsp;<span class="keyword" id="4870761">interface</span><span class="op" id="4870770">{</span><span class="op" id="4870771">}</span><span class="op" id="4870772">)</span>&nbsp;<span class="keyword" id="4870774">interface</span><span class="op" id="4870783">{</span><span class="op" id="4870784">}</span>&nbsp;<span class="op" id="4870786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4870789">if</span>&nbsp;<span class="ident" id="4870792"><a href="/gostd/html/template/content.go.html#4870759">a</a></span>&nbsp;<span class="op" id="4870794">==</span>&nbsp;<span class="builtintype" id="4870797">nil</span>&nbsp;<span class="op" id="4870801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4870805">return</span>&nbsp;<span class="builtintype" id="4870812">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4870817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4870820">if</span>&nbsp;<span class="ident" id="4870823">t</span>&nbsp;<span class="op" id="4870825">:=</span>&nbsp;<span class="ident" id="4870828"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4870835">.</span><span class="ident" id="4870836"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="4870842">(</span><span class="ident" id="4870843"><a href="/gostd/html/template/content.go.html#4870759">a</a></span><span class="op" id="4870844">)</span><span class="op" id="4870845">;</span>&nbsp;<span class="ident" id="4870847"><a href="/gostd/html/template/content.go.html#4870823">t</a></span><span class="op" id="4870848">.</span><span class="ident" id="4870849"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="4870853">(</span><span class="op" id="4870854">)</span>&nbsp;<span class="op" id="4870856">!=</span>&nbsp;<span class="ident" id="4870859"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4870866">.</span><span class="ident" id="4870867"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="4870871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4870875">//&nbsp;Avoid&nbsp;creating&nbsp;a&nbsp;reflect.Value&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4870934">return</span>&nbsp;<span class="ident" id="4870941"><a href="/gostd/html/template/content.go.html#4870759">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4870944">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4870947">v</span>&nbsp;<span class="op" id="4870949">:=</span>&nbsp;<span class="ident" id="4870952"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4870959">.</span><span class="ident" id="4870960"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="4870967">(</span><span class="ident" id="4870968"><a href="/gostd/html/template/content.go.html#4870759">a</a></span><span class="op" id="4870969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4870972">for</span>&nbsp;<span class="ident" id="4870976"><a href="/gostd/html/template/content.go.html#4870947">v</a></span><span class="op" id="4870977">.</span><span class="ident" id="4870978"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="4870982">(</span><span class="op" id="4870983">)</span>&nbsp;<span class="op" id="4870985">==</span>&nbsp;<span class="ident" id="4870988"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4870995">.</span><span class="ident" id="4870996"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="4871000">&amp;&amp;</span>&nbsp;<span class="op" id="4871003">!</span><span class="ident" id="4871004"><a href="/gostd/html/template/content.go.html#4870947">v</a></span><span class="op" id="4871005">.</span><span class="ident" id="4871006"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="4871011">(</span><span class="op" id="4871012">)</span>&nbsp;<span class="op" id="4871014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4871018"><a href="/gostd/html/template/content.go.html#4870947">v</a></span>&nbsp;<span class="op" id="4871020">=</span>&nbsp;<span class="ident" id="4871022"><a href="/gostd/html/template/content.go.html#4870947">v</a></span><span class="op" id="4871023">.</span><span class="ident" id="4871024"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="4871028">(</span><span class="op" id="4871029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4871032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871035">return</span>&nbsp;<span class="ident" id="4871042"><a href="/gostd/html/template/content.go.html#4870947">v</a></span><span class="op" id="4871043">.</span><span class="ident" id="4871044"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="4871053">(</span><span class="op" id="4871054">)</span><br>
<span class="lineno">90</span><span class="op" id="4871056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4871059">var</span>&nbsp;<span class="op" id="4871063">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4871066">errorType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4871082">=</span>&nbsp;<span class="ident" id="4871084"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4871091">.</span><span class="ident" id="4871092"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="4871098">(</span><span class="op" id="4871099">(</span><span class="op" id="4871100">*</span><span class="builtintype" id="4871101">error</span><span class="op" id="4871106">)</span><span class="op" id="4871107">(</span><span class="builtintype" id="4871108">nil</span><span class="op" id="4871111">)</span><span class="op" id="4871112">)</span><span class="op" id="4871113">.</span><span class="ident" id="4871114"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="4871118">(</span><span class="op" id="4871119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4871122">fmtStringerType</span>&nbsp;<span class="op" id="4871138">=</span>&nbsp;<span class="ident" id="4871140"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4871147">.</span><span class="ident" id="4871148"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="4871154">(</span><span class="op" id="4871155">(</span><span class="op" id="4871156">*</span><span class="ident" id="4871157"><a href="/gostd/html/template/content.go.html#4868109">fmt</a></span><span class="op" id="4871160">.</span><span class="ident" id="4871161"><a href="/gostd/fmt/print.go.html#2140275">Stringer</a></span><span class="op" id="4871169">)</span><span class="op" id="4871170">(</span><span class="builtintype" id="4871171">nil</span><span class="op" id="4871174">)</span><span class="op" id="4871175">)</span><span class="op" id="4871176">.</span><span class="ident" id="4871177"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="4871181">(</span><span class="op" id="4871182">)</span><br>
<span class="lineno">95</span><span class="op" id="4871184">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4871187">//&nbsp;indirectToStringerOrError&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="4871269">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil)&nbsp;or&nbsp;an&nbsp;implementation&nbsp;of&nbsp;fmt.Stringer</span><br>
<span class="lineno"></span><span class="comment" id="4871354">//&nbsp;or&nbsp;error,</span><br>
<span class="lineno">100</span><span class="keyword" id="4871367">func</span>&nbsp;<span class="ident" id="4871372">indirectToStringerOrError</span><span class="op" id="4871397">(</span><span class="ident" id="4871398">a</span>&nbsp;<span class="keyword" id="4871400">interface</span><span class="op" id="4871409">{</span><span class="op" id="4871410">}</span><span class="op" id="4871411">)</span>&nbsp;<span class="keyword" id="4871413">interface</span><span class="op" id="4871422">{</span><span class="op" id="4871423">}</span>&nbsp;<span class="op" id="4871425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871428">if</span>&nbsp;<span class="ident" id="4871431"><a href="/gostd/html/template/content.go.html#4871398">a</a></span>&nbsp;<span class="op" id="4871433">==</span>&nbsp;<span class="builtintype" id="4871436">nil</span>&nbsp;<span class="op" id="4871440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871444">return</span>&nbsp;<span class="builtintype" id="4871451">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4871456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4871459">v</span>&nbsp;<span class="op" id="4871461">:=</span>&nbsp;<span class="ident" id="4871464"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4871471">.</span><span class="ident" id="4871472"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="4871479">(</span><span class="ident" id="4871480"><a href="/gostd/html/template/content.go.html#4871398">a</a></span><span class="op" id="4871481">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871484">for</span>&nbsp;<span class="op" id="4871488">!</span><span class="ident" id="4871489"><a href="/gostd/html/template/content.go.html#4871459">v</a></span><span class="op" id="4871490">.</span><span class="ident" id="4871491"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="4871495">(</span><span class="op" id="4871496">)</span><span class="op" id="4871497">.</span><span class="ident" id="4871498"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="4871508">(</span><span class="ident" id="4871509"><a href="/gostd/html/template/content.go.html#4871122">fmtStringerType</a></span><span class="op" id="4871524">)</span>&nbsp;<span class="op" id="4871526">&amp;&amp;</span>&nbsp;<span class="op" id="4871529">!</span><span class="ident" id="4871530"><a href="/gostd/html/template/content.go.html#4871459">v</a></span><span class="op" id="4871531">.</span><span class="ident" id="4871532"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="4871536">(</span><span class="op" id="4871537">)</span><span class="op" id="4871538">.</span><span class="ident" id="4871539"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="4871549">(</span><span class="ident" id="4871550"><a href="/gostd/html/template/content.go.html#4871066">errorType</a></span><span class="op" id="4871559">)</span>&nbsp;<span class="op" id="4871561">&amp;&amp;</span>&nbsp;<span class="ident" id="4871564"><a href="/gostd/html/template/content.go.html#4871459">v</a></span><span class="op" id="4871565">.</span><span class="ident" id="4871566"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="4871570">(</span><span class="op" id="4871571">)</span>&nbsp;<span class="op" id="4871573">==</span>&nbsp;<span class="ident" id="4871576"><a href="/gostd/html/template/content.go.html#4868116">reflect</a></span><span class="op" id="4871583">.</span><span class="ident" id="4871584"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="4871588">&amp;&amp;</span>&nbsp;<span class="op" id="4871591">!</span><span class="ident" id="4871592"><a href="/gostd/html/template/content.go.html#4871459">v</a></span><span class="op" id="4871593">.</span><span class="ident" id="4871594"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="4871599">(</span><span class="op" id="4871600">)</span>&nbsp;<span class="op" id="4871602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4871606"><a href="/gostd/html/template/content.go.html#4871459">v</a></span>&nbsp;<span class="op" id="4871608">=</span>&nbsp;<span class="ident" id="4871610"><a href="/gostd/html/template/content.go.html#4871459">v</a></span><span class="op" id="4871611">.</span><span class="ident" id="4871612"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="4871616">(</span><span class="op" id="4871617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4871620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871623">return</span>&nbsp;<span class="ident" id="4871630"><a href="/gostd/html/template/content.go.html#4871459">v</a></span><span class="op" id="4871631">.</span><span class="ident" id="4871632"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="4871641">(</span><span class="op" id="4871642">)</span><br>
<span class="lineno"></span><span class="op" id="4871644">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="4871647">//&nbsp;stringify&nbsp;converts&nbsp;its&nbsp;arguments&nbsp;to&nbsp;a&nbsp;string&nbsp;and&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="4871724">//&nbsp;All&nbsp;pointers&nbsp;are&nbsp;dereferenced,&nbsp;as&nbsp;in&nbsp;the&nbsp;text/template&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="4871791">func</span>&nbsp;<span class="ident" id="4871796">stringify</span><span class="op" id="4871805">(</span><span class="ident" id="4871806">args</span>&nbsp;<span class="op" id="4871811">...</span><span class="keyword" id="4871814">interface</span><span class="op" id="4871823">{</span><span class="op" id="4871824">}</span><span class="op" id="4871825">)</span>&nbsp;<span class="op" id="4871827">(</span><span class="builtintype" id="4871828">string</span><span class="op" id="4871834">,</span>&nbsp;<span class="ident" id="4871836"><a href="/gostd/html/template/content.go.html#4870247">contentType</a></span><span class="op" id="4871847">)</span>&nbsp;<span class="op" id="4871849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871852">if</span>&nbsp;<span class="builtinfunc" id="4871855">len</span><span class="op" id="4871858">(</span><span class="ident" id="4871859"><a href="/gostd/html/template/content.go.html#4871806">args</a></span><span class="op" id="4871863">)</span>&nbsp;<span class="op" id="4871865">==</span>&nbsp;<span class="num" id="4871868">1</span>&nbsp;<span class="op" id="4871870">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871874">switch</span>&nbsp;<span class="ident" id="4871881">s</span>&nbsp;<span class="op" id="4871883">:=</span>&nbsp;<span class="ident" id="4871886"><a href="/gostd/html/template/content.go.html#4870750">indirect</a></span><span class="op" id="4871894">(</span><span class="ident" id="4871895"><a href="/gostd/html/template/content.go.html#4871806">args</a></span><span class="op" id="4871899">[</span><span class="num" id="4871900">0</span><span class="op" id="4871901">]</span><span class="op" id="4871902">)</span><span class="op" id="4871903">.</span><span class="op" id="4871904">(</span><span class="keyword" id="4871905">type</span><span class="op" id="4871909">)</span>&nbsp;<span class="op" id="4871911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871915">case</span>&nbsp;<span class="builtintype" id="4871920">string</span><span class="op" id="4871926">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871931">return</span>&nbsp;<span class="ident" id="4871938"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4871939">,</span>&nbsp;<span class="ident" id="4871941"><a href="/gostd/html/template/content.go.html#4870275">contentTypePlain</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871960">case</span>&nbsp;<span class="ident" id="4871965"><a href="/gostd/html/template/content.go.html#4868665">CSS</a></span><span class="op" id="4871968">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4871973">return</span>&nbsp;<span class="builtintype" id="4871980">string</span><span class="op" id="4871986">(</span><span class="ident" id="4871987"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4871988">)</span><span class="op" id="4871989">,</span>&nbsp;<span class="ident" id="4871991"><a href="/gostd/html/template/content.go.html#4870312">contentTypeCSS</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872008">case</span>&nbsp;<span class="ident" id="4872013"><a href="/gostd/html/template/content.go.html#4868945">HTML</a></span><span class="op" id="4872017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872022">return</span>&nbsp;<span class="builtintype" id="4872029">string</span><span class="op" id="4872035">(</span><span class="ident" id="4872036"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4872037">)</span><span class="op" id="4872038">,</span>&nbsp;<span class="ident" id="4872040"><a href="/gostd/html/template/content.go.html#4870328">contentTypeHTML</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872058">case</span>&nbsp;<span class="ident" id="4872063"><a href="/gostd/html/template/content.go.html#4869057">HTMLAttr</a></span><span class="op" id="4872071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872076">return</span>&nbsp;<span class="builtintype" id="4872083">string</span><span class="op" id="4872089">(</span><span class="ident" id="4872090"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4872091">)</span><span class="op" id="4872092">,</span>&nbsp;<span class="ident" id="4872094"><a href="/gostd/html/template/content.go.html#4870345">contentTypeHTMLAttr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872116">case</span>&nbsp;<span class="ident" id="4872121"><a href="/gostd/html/template/content.go.html#4869492">JS</a></span><span class="op" id="4872123">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872128">return</span>&nbsp;<span class="builtintype" id="4872135">string</span><span class="op" id="4872141">(</span><span class="ident" id="4872142"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4872143">)</span><span class="op" id="4872144">,</span>&nbsp;<span class="ident" id="4872146"><a href="/gostd/html/template/content.go.html#4870366">contentTypeJS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872162">case</span>&nbsp;<span class="ident" id="4872167"><a href="/gostd/html/template/content.go.html#4869900">JSStr</a></span><span class="op" id="4872172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872177">return</span>&nbsp;<span class="builtintype" id="4872184">string</span><span class="op" id="4872190">(</span><span class="ident" id="4872191"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4872192">)</span><span class="op" id="4872193">,</span>&nbsp;<span class="ident" id="4872195"><a href="/gostd/html/template/content.go.html#4870381">contentTypeJSStr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872214">case</span>&nbsp;<span class="ident" id="4872219"><a href="/gostd/html/template/content.go.html#4870228">URL</a></span><span class="op" id="4872222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872227">return</span>&nbsp;<span class="builtintype" id="4872234">string</span><span class="op" id="4872240">(</span><span class="ident" id="4872241"><a href="/gostd/html/template/content.go.html#4871881">s</a></span><span class="op" id="4872242">)</span><span class="op" id="4872243">,</span>&nbsp;<span class="ident" id="4872245"><a href="/gostd/html/template/content.go.html#4870399">contentTypeURL</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4872262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4872265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872268">for</span>&nbsp;<span class="ident" id="4872272">i</span><span class="op" id="4872273">,</span>&nbsp;<span class="ident" id="4872275">arg</span>&nbsp;<span class="op" id="4872279">:=</span>&nbsp;<span class="keyword" id="4872282">range</span>&nbsp;<span class="ident" id="4872288"><a href="/gostd/html/template/content.go.html#4871806">args</a></span>&nbsp;<span class="op" id="4872293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4872297"><a href="/gostd/html/template/content.go.html#4871806">args</a></span><span class="op" id="4872301">[</span><span class="ident" id="4872302"><a href="/gostd/html/template/content.go.html#4872272">i</a></span><span class="op" id="4872303">]</span>&nbsp;<span class="op" id="4872305">=</span>&nbsp;<span class="ident" id="4872307"><a href="/gostd/html/template/content.go.html#4871372">indirectToStringerOrError</a></span><span class="op" id="4872332">(</span><span class="ident" id="4872333"><a href="/gostd/html/template/content.go.html#4872275">arg</a></span><span class="op" id="4872336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4872339">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4872342">return</span>&nbsp;<span class="ident" id="4872349"><a href="/gostd/html/template/content.go.html#4868109">fmt</a></span><span class="op" id="4872352">.</span><span class="ident" id="4872353"><a href="/gostd/fmt/print.go.html#2144876">Sprint</a></span><span class="op" id="4872359">(</span><span class="ident" id="4872360"><a href="/gostd/html/template/content.go.html#4871806">args</a></span><span class="op" id="4872364">...</span><span class="op" id="4872367">)</span><span class="op" id="4872368">,</span>&nbsp;<span class="ident" id="4872370"><a href="/gostd/html/template/content.go.html#4870275">contentTypePlain</a></span><br>
<span class="lineno"></span><span class="op" id="4872387">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
