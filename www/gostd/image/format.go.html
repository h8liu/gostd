<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html" class="current">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5145271">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5145326">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5145380">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5145431">package</span>&nbsp;<span class="ident" id="5145439">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5145446">import</span>&nbsp;<span class="op" id="5145453">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5145456">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5145465">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5145475">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5145480">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5145483">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5145551">var</span>&nbsp;<span class="ident" id="5145555">ErrFormat</span>&nbsp;<span class="op" id="5145565">=</span>&nbsp;<span class="ident" id="5145567"><a href="/gostd/image/format.go.html#5145465">errors</a></span><span class="op" id="5145573">.</span><span class="ident" id="5145574"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5145577">(</span><span class="string" id="5145578">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5145601">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5145604">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5145681">type</span>&nbsp;<span class="ident" id="5145686">format</span>&nbsp;<span class="keyword" id="5145693">struct</span>&nbsp;<span class="op" id="5145700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5145703">name</span><span class="op" id="5145707">,</span>&nbsp;<span class="ident" id="5145709">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5145716">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5145724">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5145737">func</span><span class="op" id="5145741">(</span><span class="ident" id="5145742"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5145744">.</span><span class="ident" id="5145745"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5145751">)</span>&nbsp;<span class="op" id="5145753">(</span><span class="ident" id="5145754"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5145759">,</span>&nbsp;<span class="builtintype" id="5145761">error</span><span class="op" id="5145766">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5145769">decodeConfig</span>&nbsp;<span class="keyword" id="5145782">func</span><span class="op" id="5145786">(</span><span class="ident" id="5145787"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5145789">.</span><span class="ident" id="5145790"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5145796">)</span>&nbsp;<span class="op" id="5145798">(</span><span class="ident" id="5145799"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="5145805">,</span>&nbsp;<span class="builtintype" id="5145807">error</span><span class="op" id="5145812">)</span><br>
<span class="lineno"></span><span class="op" id="5145814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5145817">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5145863">var</span>&nbsp;<span class="ident" id="5145867">formats</span>&nbsp;<span class="op" id="5145875">[</span><span class="op" id="5145876">]</span><span class="ident" id="5145877"><a href="/gostd/image/format.go.html#5145686">format</a></span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5145885">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5145948">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5146005">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5146083">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5146149">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5146207">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5146276">func</span>&nbsp;<span class="ident" id="5146281">RegisterFormat</span><span class="op" id="5146295">(</span><span class="ident" id="5146296">name</span><span class="op" id="5146300">,</span>&nbsp;<span class="ident" id="5146302">magic</span>&nbsp;<span class="builtintype" id="5146308">string</span><span class="op" id="5146314">,</span>&nbsp;<span class="ident" id="5146316">decode</span>&nbsp;<span class="keyword" id="5146323">func</span><span class="op" id="5146327">(</span><span class="ident" id="5146328"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5146330">.</span><span class="ident" id="5146331"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5146337">)</span>&nbsp;<span class="op" id="5146339">(</span><span class="ident" id="5146340"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5146345">,</span>&nbsp;<span class="builtintype" id="5146347">error</span><span class="op" id="5146352">)</span><span class="op" id="5146353">,</span>&nbsp;<span class="ident" id="5146355">decodeConfig</span>&nbsp;<span class="keyword" id="5146368">func</span><span class="op" id="5146372">(</span><span class="ident" id="5146373"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5146375">.</span><span class="ident" id="5146376"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5146382">)</span>&nbsp;<span class="op" id="5146384">(</span><span class="ident" id="5146385"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="5146391">,</span>&nbsp;<span class="builtintype" id="5146393">error</span><span class="op" id="5146398">)</span><span class="op" id="5146399">)</span>&nbsp;<span class="op" id="5146401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5146404"><a href="/gostd/image/format.go.html#5145867">formats</a></span>&nbsp;<span class="op" id="5146412">=</span>&nbsp;<span class="builtinfunc" id="5146414">append</span><span class="op" id="5146420">(</span><span class="ident" id="5146421"><a href="/gostd/image/format.go.html#5145867">formats</a></span><span class="op" id="5146428">,</span>&nbsp;<span class="ident" id="5146430"><a href="/gostd/image/format.go.html#5145686">format</a></span><span class="op" id="5146436">{</span><span class="ident" id="5146437"><a href="/gostd/image/format.go.html#5146296">name</a></span><span class="op" id="5146441">,</span>&nbsp;<span class="ident" id="5146443"><a href="/gostd/image/format.go.html#5146302">magic</a></span><span class="op" id="5146448">,</span>&nbsp;<span class="ident" id="5146450"><a href="/gostd/image/format.go.html#5146316">decode</a></span><span class="op" id="5146456">,</span>&nbsp;<span class="ident" id="5146458"><a href="/gostd/image/format.go.html#5146355">decodeConfig</a></span><span class="op" id="5146470">}</span><span class="op" id="5146471">)</span><br>
<span class="lineno"></span><span class="op" id="5146473">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5146476">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5146530">type</span>&nbsp;<span class="ident" id="5146535">reader</span>&nbsp;<span class="keyword" id="5146542">interface</span>&nbsp;<span class="op" id="5146552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5146555"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5146557">.</span><span class="ident" id="5146558"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5146566">Peek</span><span class="op" id="5146570">(</span><span class="builtintype" id="5146571">int</span><span class="op" id="5146574">)</span>&nbsp;<span class="op" id="5146576">(</span><span class="op" id="5146577">[</span><span class="op" id="5146578">]</span><span class="builtintype" id="5146579">byte</span><span class="op" id="5146583">,</span>&nbsp;<span class="builtintype" id="5146585">error</span><span class="op" id="5146590">)</span><br>
<span class="lineno">40</span><span class="op" id="5146592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5146595">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5146642">func</span>&nbsp;<span class="ident" id="5146647">asReader</span><span class="op" id="5146655">(</span><span class="ident" id="5146656">r</span>&nbsp;<span class="ident" id="5146658"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5146660">.</span><span class="ident" id="5146661"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5146667">)</span>&nbsp;<span class="ident" id="5146669"><a href="/gostd/image/format.go.html#5146535">reader</a></span>&nbsp;<span class="op" id="5146676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146679">if</span>&nbsp;<span class="ident" id="5146682">rr</span><span class="op" id="5146684">,</span>&nbsp;<span class="ident" id="5146686">ok</span>&nbsp;<span class="op" id="5146689">:=</span>&nbsp;<span class="ident" id="5146692"><a href="/gostd/image/format.go.html#5146656">r</a></span><span class="op" id="5146693">.</span><span class="op" id="5146694">(</span><span class="ident" id="5146695"><a href="/gostd/image/format.go.html#5146535">reader</a></span><span class="op" id="5146701">)</span><span class="op" id="5146702">;</span>&nbsp;<span class="ident" id="5146704"><a href="/gostd/image/format.go.html#5146686">ok</a></span>&nbsp;<span class="op" id="5146707">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146711">return</span>&nbsp;<span class="ident" id="5146718"><a href="/gostd/image/format.go.html#5146682">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5146722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146725">return</span>&nbsp;<span class="ident" id="5146732"><a href="/gostd/image/format.go.html#5145456">bufio</a></span><span class="op" id="5146737">.</span><span class="ident" id="5146738"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="5146747">(</span><span class="ident" id="5146748"><a href="/gostd/image/format.go.html#5146656">r</a></span><span class="op" id="5146749">)</span><br>
<span class="lineno"></span><span class="op" id="5146751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5146754">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5146829">func</span>&nbsp;<span class="ident" id="5146834">match</span><span class="op" id="5146839">(</span><span class="ident" id="5146840">magic</span>&nbsp;<span class="builtintype" id="5146846">string</span><span class="op" id="5146852">,</span>&nbsp;<span class="ident" id="5146854">b</span>&nbsp;<span class="op" id="5146856">[</span><span class="op" id="5146857">]</span><span class="builtintype" id="5146858">byte</span><span class="op" id="5146862">)</span>&nbsp;<span class="builtintype" id="5146864">bool</span>&nbsp;<span class="op" id="5146869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146872">if</span>&nbsp;<span class="builtinfunc" id="5146875">len</span><span class="op" id="5146878">(</span><span class="ident" id="5146879"><a href="/gostd/image/format.go.html#5146840">magic</a></span><span class="op" id="5146884">)</span>&nbsp;<span class="op" id="5146886">!=</span>&nbsp;<span class="builtinfunc" id="5146889">len</span><span class="op" id="5146892">(</span><span class="ident" id="5146893"><a href="/gostd/image/format.go.html#5146854">b</a></span><span class="op" id="5146894">)</span>&nbsp;<span class="op" id="5146896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146900">return</span>&nbsp;<span class="builtintype" id="5146907">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5146914">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146917">for</span>&nbsp;<span class="ident" id="5146921">i</span><span class="op" id="5146922">,</span>&nbsp;<span class="ident" id="5146924">c</span>&nbsp;<span class="op" id="5146926">:=</span>&nbsp;<span class="keyword" id="5146929">range</span>&nbsp;<span class="ident" id="5146935"><a href="/gostd/image/format.go.html#5146854">b</a></span>&nbsp;<span class="op" id="5146937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146941">if</span>&nbsp;<span class="ident" id="5146944"><a href="/gostd/image/format.go.html#5146840">magic</a></span><span class="op" id="5146949">[</span><span class="ident" id="5146950"><a href="/gostd/image/format.go.html#5146921">i</a></span><span class="op" id="5146951">]</span>&nbsp;<span class="op" id="5146953">!=</span>&nbsp;<span class="ident" id="5146956"><a href="/gostd/image/format.go.html#5146924">c</a></span>&nbsp;<span class="op" id="5146958">&amp;&amp;</span>&nbsp;<span class="ident" id="5146961"><a href="/gostd/image/format.go.html#5146840">magic</a></span><span class="op" id="5146966">[</span><span class="ident" id="5146967"><a href="/gostd/image/format.go.html#5146921">i</a></span><span class="op" id="5146968">]</span>&nbsp;<span class="op" id="5146970">!=</span>&nbsp;<span class="string" id="5146973">&#39;?&#39;</span>&nbsp;<span class="op" id="5146977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5146982">return</span>&nbsp;<span class="builtintype" id="5146989">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5146997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5147000">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147003">return</span>&nbsp;<span class="builtintype" id="5147010">true</span><br>
<span class="lineno"></span><span class="op" id="5147015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5147018">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5147062">func</span>&nbsp;<span class="ident" id="5147067">sniff</span><span class="op" id="5147072">(</span><span class="ident" id="5147073">r</span>&nbsp;<span class="ident" id="5147075"><a href="/gostd/image/format.go.html#5146535">reader</a></span><span class="op" id="5147081">)</span>&nbsp;<span class="ident" id="5147083"><a href="/gostd/image/format.go.html#5145686">format</a></span>&nbsp;<span class="op" id="5147090">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147093">for</span>&nbsp;<span class="ident" id="5147097">_</span><span class="op" id="5147098">,</span>&nbsp;<span class="ident" id="5147100">f</span>&nbsp;<span class="op" id="5147102">:=</span>&nbsp;<span class="keyword" id="5147105">range</span>&nbsp;<span class="ident" id="5147111"><a href="/gostd/image/format.go.html#5145867">formats</a></span>&nbsp;<span class="op" id="5147119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5147123">b</span><span class="op" id="5147124">,</span>&nbsp;<span class="ident" id="5147126">err</span>&nbsp;<span class="op" id="5147130">:=</span>&nbsp;<span class="ident" id="5147133"><a href="/gostd/image/format.go.html#5147073">r</a></span><span class="op" id="5147134">.</span><span class="ident" id="5147135"><a href="/gostd/image/format.go.html#5146566">Peek</a></span><span class="op" id="5147139">(</span><span class="builtinfunc" id="5147140">len</span><span class="op" id="5147143">(</span><span class="ident" id="5147144"><a href="/gostd/image/format.go.html#5147100">f</a></span><span class="op" id="5147145">.</span><span class="ident" id="5147146"><a href="/gostd/image/format.go.html#5145709">magic</a></span><span class="op" id="5147151">)</span><span class="op" id="5147152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147156">if</span>&nbsp;<span class="ident" id="5147159"><a href="/gostd/image/format.go.html#5147126">err</a></span>&nbsp;<span class="op" id="5147163">==</span>&nbsp;<span class="builtintype" id="5147166">nil</span>&nbsp;<span class="op" id="5147170">&amp;&amp;</span>&nbsp;<span class="ident" id="5147173"><a href="/gostd/image/format.go.html#5146834">match</a></span><span class="op" id="5147178">(</span><span class="ident" id="5147179"><a href="/gostd/image/format.go.html#5147100">f</a></span><span class="op" id="5147180">.</span><span class="ident" id="5147181"><a href="/gostd/image/format.go.html#5145709">magic</a></span><span class="op" id="5147186">,</span>&nbsp;<span class="ident" id="5147188"><a href="/gostd/image/format.go.html#5147123">b</a></span><span class="op" id="5147189">)</span>&nbsp;<span class="op" id="5147191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147196">return</span>&nbsp;<span class="ident" id="5147203"><a href="/gostd/image/format.go.html#5147100">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5147207">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5147210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147213">return</span>&nbsp;<span class="ident" id="5147220"><a href="/gostd/image/format.go.html#5145686">format</a></span><span class="op" id="5147226">{</span><span class="op" id="5147227">}</span><br>
<span class="lineno"></span><span class="op" id="5147229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5147232">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5147305">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5147380">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5147455">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5147476">func</span>&nbsp;<span class="ident" id="5147481">Decode</span><span class="op" id="5147487">(</span><span class="ident" id="5147488">r</span>&nbsp;<span class="ident" id="5147490"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5147492">.</span><span class="ident" id="5147493"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5147499">)</span>&nbsp;<span class="op" id="5147501">(</span><span class="ident" id="5147502"><a href="/gostd/image/image.go.html#5154907">Image</a></span><span class="op" id="5147507">,</span>&nbsp;<span class="builtintype" id="5147509">string</span><span class="op" id="5147515">,</span>&nbsp;<span class="builtintype" id="5147517">error</span><span class="op" id="5147522">)</span>&nbsp;<span class="op" id="5147524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5147527">rr</span>&nbsp;<span class="op" id="5147530">:=</span>&nbsp;<span class="ident" id="5147533"><a href="/gostd/image/format.go.html#5146647">asReader</a></span><span class="op" id="5147541">(</span><span class="ident" id="5147542"><a href="/gostd/image/format.go.html#5147488">r</a></span><span class="op" id="5147543">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5147546">f</span>&nbsp;<span class="op" id="5147548">:=</span>&nbsp;<span class="ident" id="5147551"><a href="/gostd/image/format.go.html#5147067">sniff</a></span><span class="op" id="5147556">(</span><span class="ident" id="5147557"><a href="/gostd/image/format.go.html#5147527">rr</a></span><span class="op" id="5147559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147562">if</span>&nbsp;<span class="ident" id="5147565"><a href="/gostd/image/format.go.html#5147546">f</a></span><span class="op" id="5147566">.</span><span class="ident" id="5147567"><a href="/gostd/image/format.go.html#5145724">decode</a></span>&nbsp;<span class="op" id="5147574">==</span>&nbsp;<span class="builtintype" id="5147577">nil</span>&nbsp;<span class="op" id="5147581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147585">return</span>&nbsp;<span class="builtintype" id="5147592">nil</span><span class="op" id="5147595">,</span>&nbsp;<span class="string" id="5147597">&#34;&#34;</span><span class="op" id="5147599">,</span>&nbsp;<span class="ident" id="5147601"><a href="/gostd/image/format.go.html#5145555">ErrFormat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5147612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5147615">m</span><span class="op" id="5147616">,</span>&nbsp;<span class="ident" id="5147618">err</span>&nbsp;<span class="op" id="5147622">:=</span>&nbsp;<span class="ident" id="5147625"><a href="/gostd/image/format.go.html#5147546">f</a></span><span class="op" id="5147626">.</span><span class="ident" id="5147627"><a href="/gostd/image/format.go.html#5145724">decode</a></span><span class="op" id="5147633">(</span><span class="ident" id="5147634"><a href="/gostd/image/format.go.html#5147527">rr</a></span><span class="op" id="5147636">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5147639">return</span>&nbsp;<span class="ident" id="5147646"><a href="/gostd/image/format.go.html#5147615">m</a></span><span class="op" id="5147647">,</span>&nbsp;<span class="ident" id="5147649"><a href="/gostd/image/format.go.html#5147546">f</a></span><span class="op" id="5147650">.</span><span class="ident" id="5147651"><a href="/gostd/image/format.go.html#5145703">name</a></span><span class="op" id="5147655">,</span>&nbsp;<span class="ident" id="5147657"><a href="/gostd/image/format.go.html#5147618">err</a></span><br>
<span class="lineno"></span><span class="op" id="5147661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5147664">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5147740">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5147819">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5147896">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5147947">func</span>&nbsp;<span class="ident" id="5147952">DecodeConfig</span><span class="op" id="5147964">(</span><span class="ident" id="5147965">r</span>&nbsp;<span class="ident" id="5147967"><a href="/gostd/image/format.go.html#5145475">io</a></span><span class="op" id="5147969">.</span><span class="ident" id="5147970"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5147976">)</span>&nbsp;<span class="op" id="5147978">(</span><span class="ident" id="5147979"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="5147985">,</span>&nbsp;<span class="builtintype" id="5147987">string</span><span class="op" id="5147993">,</span>&nbsp;<span class="builtintype" id="5147995">error</span><span class="op" id="5148000">)</span>&nbsp;<span class="op" id="5148002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5148005">rr</span>&nbsp;<span class="op" id="5148008">:=</span>&nbsp;<span class="ident" id="5148011"><a href="/gostd/image/format.go.html#5146647">asReader</a></span><span class="op" id="5148019">(</span><span class="ident" id="5148020"><a href="/gostd/image/format.go.html#5147965">r</a></span><span class="op" id="5148021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5148024">f</span>&nbsp;<span class="op" id="5148026">:=</span>&nbsp;<span class="ident" id="5148029"><a href="/gostd/image/format.go.html#5147067">sniff</a></span><span class="op" id="5148034">(</span><span class="ident" id="5148035"><a href="/gostd/image/format.go.html#5148005">rr</a></span><span class="op" id="5148037">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5148040">if</span>&nbsp;<span class="ident" id="5148043"><a href="/gostd/image/format.go.html#5148024">f</a></span><span class="op" id="5148044">.</span><span class="ident" id="5148045"><a href="/gostd/image/format.go.html#5145769">decodeConfig</a></span>&nbsp;<span class="op" id="5148058">==</span>&nbsp;<span class="builtintype" id="5148061">nil</span>&nbsp;<span class="op" id="5148065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5148069">return</span>&nbsp;<span class="ident" id="5148076"><a href="/gostd/image/image.go.html#5154748">Config</a></span><span class="op" id="5148082">{</span><span class="op" id="5148083">}</span><span class="op" id="5148084">,</span>&nbsp;<span class="string" id="5148086">&#34;&#34;</span><span class="op" id="5148088">,</span>&nbsp;<span class="ident" id="5148090"><a href="/gostd/image/format.go.html#5145555">ErrFormat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5148101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5148104">c</span><span class="op" id="5148105">,</span>&nbsp;<span class="ident" id="5148107">err</span>&nbsp;<span class="op" id="5148111">:=</span>&nbsp;<span class="ident" id="5148114"><a href="/gostd/image/format.go.html#5148024">f</a></span><span class="op" id="5148115">.</span><span class="ident" id="5148116"><a href="/gostd/image/format.go.html#5145769">decodeConfig</a></span><span class="op" id="5148128">(</span><span class="ident" id="5148129"><a href="/gostd/image/format.go.html#5148005">rr</a></span><span class="op" id="5148131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5148134">return</span>&nbsp;<span class="ident" id="5148141"><a href="/gostd/image/format.go.html#5148104">c</a></span><span class="op" id="5148142">,</span>&nbsp;<span class="ident" id="5148144"><a href="/gostd/image/format.go.html#5148024">f</a></span><span class="op" id="5148145">.</span><span class="ident" id="5148146"><a href="/gostd/image/format.go.html#5145703">name</a></span><span class="op" id="5148150">,</span>&nbsp;<span class="ident" id="5148152"><a href="/gostd/image/format.go.html#5148107">err</a></span><br>
<span class="lineno">100</span><span class="op" id="5148156">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
