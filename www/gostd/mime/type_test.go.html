<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime</h2>
<ul>
<li><a href="/gostd/mime/grammar.go.html">grammar.go</a></li>
<li><a href="/gostd/mime/mediatype.go.html">mediatype.go</a></li>
<li><a href="/gostd/mime/mediatype_test.go.html">mediatype_test.go</a></li>
<li><a href="/gostd/mime/type.go.html">type.go</a></li>
<li><a href="/gostd/mime/type_test.go.html" class="current">type_test.go</a></li>
<li><a href="/gostd/mime/type_unix.go.html">type_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6414525">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6414580">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6414634">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6414685">package</span>&nbsp;<span class="ident" id="6414693">mime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6414699">import</span>&nbsp;<span class="op" id="6414706">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6414709">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6414719">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6414722">var</span>&nbsp;<span class="ident" id="6414726">typeTests</span>&nbsp;<span class="op" id="6414736">=</span>&nbsp;<span class="ident" id="6414738"><a href="/gostd/mime/type_unix.go.html#4307114">initMimeForTests</a></span><span class="op" id="6414754">(</span><span class="op" id="6414755">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6414758">func</span>&nbsp;<span class="ident" id="6414763">TestTypeByExtension</span><span class="op" id="6414782">(</span><span class="ident" id="6414783">t</span>&nbsp;<span class="op" id="6414785">*</span><span class="ident" id="6414786"><a href="/gostd/mime/type_test.go.html#6414709">testing</a></span><span class="op" id="6414793">.</span><span class="ident" id="6414794"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6414795">)</span>&nbsp;<span class="op" id="6414797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414800">for</span>&nbsp;<span class="ident" id="6414804">ext</span><span class="op" id="6414807">,</span>&nbsp;<span class="ident" id="6414809">want</span>&nbsp;<span class="op" id="6414814">:=</span>&nbsp;<span class="keyword" id="6414817">range</span>&nbsp;<span class="ident" id="6414823"><a href="/gostd/mime/type_test.go.html#6414726">typeTests</a></span>&nbsp;<span class="op" id="6414833">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414837">val</span>&nbsp;<span class="op" id="6414841">:=</span>&nbsp;<span class="ident" id="6414844"><a href="/gostd/mime/type.go.html#4304594">TypeByExtension</a></span><span class="op" id="6414859">(</span><span class="ident" id="6414860"><a href="/gostd/mime/type_test.go.html#6414804">ext</a></span><span class="op" id="6414863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6414867">if</span>&nbsp;<span class="ident" id="6414870"><a href="/gostd/mime/type_test.go.html#6414837">val</a></span>&nbsp;<span class="op" id="6414874">!=</span>&nbsp;<span class="ident" id="6414877"><a href="/gostd/mime/type_test.go.html#6414809">want</a></span>&nbsp;<span class="op" id="6414882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414887"><a href="/gostd/mime/type_test.go.html#6414783">t</a></span><span class="op" id="6414888">.</span><span class="ident" id="6414889"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6414895">(</span><span class="string" id="6414896">&#34;TypeByExtension(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6414931">,</span>&nbsp;<span class="ident" id="6414933"><a href="/gostd/mime/type_test.go.html#6414804">ext</a></span><span class="op" id="6414936">,</span>&nbsp;<span class="ident" id="6414938"><a href="/gostd/mime/type_test.go.html#6414837">val</a></span><span class="op" id="6414941">,</span>&nbsp;<span class="ident" id="6414943"><a href="/gostd/mime/type_test.go.html#6414809">want</a></span><span class="op" id="6414947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414954">}</span><br>
<span class="lineno">20</span><span class="op" id="6414956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6414959">func</span>&nbsp;<span class="ident" id="6414964">TestTypeByExtensionCase</span><span class="op" id="6414987">(</span><span class="ident" id="6414988">t</span>&nbsp;<span class="op" id="6414990">*</span><span class="ident" id="6414991"><a href="/gostd/mime/type_test.go.html#6414709">testing</a></span><span class="op" id="6414998">.</span><span class="ident" id="6414999"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6415000">)</span>&nbsp;<span class="op" id="6415002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415005">const</span>&nbsp;<span class="ident" id="6415011">custom</span>&nbsp;<span class="op" id="6415018">=</span>&nbsp;<span class="string" id="6415020">&#34;test/test;&nbsp;charset=iso-8859-1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415053">const</span>&nbsp;<span class="ident" id="6415059">caps</span>&nbsp;<span class="op" id="6415064">=</span>&nbsp;<span class="string" id="6415066">&#34;test/test;&nbsp;WAS=ALLCAPS&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415092">if</span>&nbsp;<span class="ident" id="6415095">err</span>&nbsp;<span class="op" id="6415099">:=</span>&nbsp;<span class="ident" id="6415102"><a href="/gostd/mime/type.go.html#4305525">AddExtensionType</a></span><span class="op" id="6415118">(</span><span class="string" id="6415119">&#34;.TEST&#34;</span><span class="op" id="6415126">,</span>&nbsp;<span class="ident" id="6415128"><a href="/gostd/mime/type_test.go.html#6415059">caps</a></span><span class="op" id="6415132">)</span><span class="op" id="6415133">;</span>&nbsp;<span class="ident" id="6415135"><a href="/gostd/mime/type_test.go.html#6415095">err</a></span>&nbsp;<span class="op" id="6415139">!=</span>&nbsp;<span class="builtintype" id="6415142">nil</span>&nbsp;<span class="op" id="6415146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415150"><a href="/gostd/mime/type_test.go.html#6414988">t</a></span><span class="op" id="6415151">.</span><span class="ident" id="6415152"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6415158">(</span><span class="string" id="6415159">&#34;error&nbsp;%s&nbsp;for&nbsp;AddExtension(%s)&#34;</span><span class="op" id="6415190">,</span>&nbsp;<span class="ident" id="6415192"><a href="/gostd/mime/type_test.go.html#6415095">err</a></span><span class="op" id="6415195">,</span>&nbsp;<span class="ident" id="6415197"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span><span class="op" id="6415203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415209">if</span>&nbsp;<span class="ident" id="6415212">err</span>&nbsp;<span class="op" id="6415216">:=</span>&nbsp;<span class="ident" id="6415219"><a href="/gostd/mime/type.go.html#4305525">AddExtensionType</a></span><span class="op" id="6415235">(</span><span class="string" id="6415236">&#34;.tesT&#34;</span><span class="op" id="6415243">,</span>&nbsp;<span class="ident" id="6415245"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span><span class="op" id="6415251">)</span><span class="op" id="6415252">;</span>&nbsp;<span class="ident" id="6415254"><a href="/gostd/mime/type_test.go.html#6415212">err</a></span>&nbsp;<span class="op" id="6415258">!=</span>&nbsp;<span class="builtintype" id="6415261">nil</span>&nbsp;<span class="op" id="6415265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415269"><a href="/gostd/mime/type_test.go.html#6414988">t</a></span><span class="op" id="6415270">.</span><span class="ident" id="6415271"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6415277">(</span><span class="string" id="6415278">&#34;error&nbsp;%s&nbsp;for&nbsp;AddExtension(%s)&#34;</span><span class="op" id="6415309">,</span>&nbsp;<span class="ident" id="6415311"><a href="/gostd/mime/type_test.go.html#6415212">err</a></span><span class="op" id="6415314">,</span>&nbsp;<span class="ident" id="6415316"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span><span class="op" id="6415322">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415329">//&nbsp;case-sensitive&nbsp;lookup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415355">if</span>&nbsp;<span class="ident" id="6415358">got</span>&nbsp;<span class="op" id="6415362">:=</span>&nbsp;<span class="ident" id="6415365"><a href="/gostd/mime/type.go.html#4304594">TypeByExtension</a></span><span class="op" id="6415380">(</span><span class="string" id="6415381">&#34;.tesT&#34;</span><span class="op" id="6415388">)</span><span class="op" id="6415389">;</span>&nbsp;<span class="ident" id="6415391"><a href="/gostd/mime/type_test.go.html#6415358">got</a></span>&nbsp;<span class="op" id="6415395">!=</span>&nbsp;<span class="ident" id="6415398"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span>&nbsp;<span class="op" id="6415405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415409"><a href="/gostd/mime/type_test.go.html#6414988">t</a></span><span class="op" id="6415410">.</span><span class="ident" id="6415411"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6415417">(</span><span class="string" id="6415418">&#34;for&nbsp;.tesT,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6415446">,</span>&nbsp;<span class="ident" id="6415448"><a href="/gostd/mime/type_test.go.html#6415358">got</a></span><span class="op" id="6415451">,</span>&nbsp;<span class="ident" id="6415453"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span><span class="op" id="6415459">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415465">if</span>&nbsp;<span class="ident" id="6415468">got</span>&nbsp;<span class="op" id="6415472">:=</span>&nbsp;<span class="ident" id="6415475"><a href="/gostd/mime/type.go.html#4304594">TypeByExtension</a></span><span class="op" id="6415490">(</span><span class="string" id="6415491">&#34;.TEST&#34;</span><span class="op" id="6415498">)</span><span class="op" id="6415499">;</span>&nbsp;<span class="ident" id="6415501"><a href="/gostd/mime/type_test.go.html#6415468">got</a></span>&nbsp;<span class="op" id="6415505">!=</span>&nbsp;<span class="ident" id="6415508"><a href="/gostd/mime/type_test.go.html#6415059">caps</a></span>&nbsp;<span class="op" id="6415513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415517"><a href="/gostd/mime/type_test.go.html#6414988">t</a></span><span class="op" id="6415518">.</span><span class="ident" id="6415519"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6415525">(</span><span class="string" id="6415526">&#34;for&nbsp;.TEST,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6415554">,</span>&nbsp;<span class="ident" id="6415556"><a href="/gostd/mime/type_test.go.html#6415468">got</a></span><span class="op" id="6415559">,</span>&nbsp;<span class="ident" id="6415561"><a href="/gostd/mime/type_test.go.html#6415059">caps</a></span><span class="op" id="6415565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6415572">//&nbsp;case-insensitive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415593">if</span>&nbsp;<span class="ident" id="6415596">got</span>&nbsp;<span class="op" id="6415600">:=</span>&nbsp;<span class="ident" id="6415603"><a href="/gostd/mime/type.go.html#4304594">TypeByExtension</a></span><span class="op" id="6415618">(</span><span class="string" id="6415619">&#34;.TesT&#34;</span><span class="op" id="6415626">)</span><span class="op" id="6415627">;</span>&nbsp;<span class="ident" id="6415629"><a href="/gostd/mime/type_test.go.html#6415596">got</a></span>&nbsp;<span class="op" id="6415633">!=</span>&nbsp;<span class="ident" id="6415636"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span>&nbsp;<span class="op" id="6415643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415647"><a href="/gostd/mime/type_test.go.html#6414988">t</a></span><span class="op" id="6415648">.</span><span class="ident" id="6415649"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6415655">(</span><span class="string" id="6415656">&#34;for&nbsp;.TesT,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6415684">,</span>&nbsp;<span class="ident" id="6415686"><a href="/gostd/mime/type_test.go.html#6415596">got</a></span><span class="op" id="6415689">,</span>&nbsp;<span class="ident" id="6415691"><a href="/gostd/mime/type_test.go.html#6415011">custom</a></span><span class="op" id="6415697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415700">}</span><br>
<span class="lineno"></span><span class="op" id="6415702">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6415705">func</span>&nbsp;<span class="ident" id="6415710">TestLookupMallocs</span><span class="op" id="6415727">(</span><span class="ident" id="6415728">t</span>&nbsp;<span class="op" id="6415730">*</span><span class="ident" id="6415731"><a href="/gostd/mime/type_test.go.html#6414709">testing</a></span><span class="op" id="6415738">.</span><span class="ident" id="6415739"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6415740">)</span>&nbsp;<span class="op" id="6415742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415745">n</span>&nbsp;<span class="op" id="6415747">:=</span>&nbsp;<span class="ident" id="6415750"><a href="/gostd/mime/type_test.go.html#6414709">testing</a></span><span class="op" id="6415757">.</span><span class="ident" id="6415758"><a href="/gostd/testing/allocs.go.html#5449197">AllocsPerRun</a></span><span class="op" id="6415770">(</span><span class="num" id="6415771">10000</span><span class="op" id="6415776">,</span>&nbsp;<span class="keyword" id="6415778">func</span><span class="op" id="6415782">(</span><span class="op" id="6415783">)</span>&nbsp;<span class="op" id="6415785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415789"><a href="/gostd/mime/type.go.html#4304594">TypeByExtension</a></span><span class="op" id="6415804">(</span><span class="string" id="6415805">&#34;.html&#34;</span><span class="op" id="6415812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415816"><a href="/gostd/mime/type.go.html#4304594">TypeByExtension</a></span><span class="op" id="6415831">(</span><span class="string" id="6415832">&#34;.HtML&#34;</span><span class="op" id="6415839">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415842">}</span><span class="op" id="6415843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6415846">if</span>&nbsp;<span class="ident" id="6415849"><a href="/gostd/mime/type_test.go.html#6415745">n</a></span>&nbsp;<span class="op" id="6415851">&gt;</span>&nbsp;<span class="num" id="6415853">0</span>&nbsp;<span class="op" id="6415855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6415859"><a href="/gostd/mime/type_test.go.html#6415728">t</a></span><span class="op" id="6415860">.</span><span class="ident" id="6415861"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6415867">(</span><span class="string" id="6415868">&#34;allocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;0&#34;</span><span class="op" id="6415889">,</span>&nbsp;<span class="ident" id="6415891"><a href="/gostd/mime/type_test.go.html#6415745">n</a></span><span class="op" id="6415892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6415895">}</span><br>
<span class="lineno"></span><span class="op" id="6415897">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
