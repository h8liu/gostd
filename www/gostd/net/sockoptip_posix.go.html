<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3731696">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3731752">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3731806">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3731857">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731922">package</span>&nbsp;<span class="ident" id="3731930">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731935">import</span>&nbsp;<span class="op" id="3731942">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3731945">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3731951">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3731961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3731964">func</span>&nbsp;<span class="ident" id="3731969">joinIPv4Group</span><span class="op" id="3731982">(</span><span class="ident" id="3731983">fd</span>&nbsp;<span class="op" id="3731986">*</span><span class="ident" id="3731987">netFD</span><span class="op" id="3731992">,</span>&nbsp;<span class="ident" id="3731994">ifi</span>&nbsp;<span class="op" id="3731998">*</span><span class="ident" id="3731999">Interface</span><span class="op" id="3732008">,</span>&nbsp;<span class="ident" id="3732010">ip</span>&nbsp;<span class="ident" id="3732013">IP</span><span class="op" id="3732015">)</span>&nbsp;<span class="builtintype" id="3732017">error</span>&nbsp;<span class="op" id="3732023">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3732026">mreq</span>&nbsp;<span class="op" id="3732031">:=</span>&nbsp;<span class="op" id="3732034">&amp;</span><span class="ident" id="3732035">syscall</span><span class="op" id="3732042">.</span><span class="ident" id="3732043">IPMreq</span><span class="op" id="3732049">{</span><span class="ident" id="3732050">Multiaddr</span><span class="op" id="3732059">:</span>&nbsp;<span class="op" id="3732061">[</span><span class="num" id="3732062">4</span><span class="op" id="3732063">]</span><span class="builtintype" id="3732064">byte</span><span class="op" id="3732068">{</span><span class="ident" id="3732069">ip</span><span class="op" id="3732071">[</span><span class="num" id="3732072">0</span><span class="op" id="3732073">]</span><span class="op" id="3732074">,</span>&nbsp;<span class="ident" id="3732076">ip</span><span class="op" id="3732078">[</span><span class="num" id="3732079">1</span><span class="op" id="3732080">]</span><span class="op" id="3732081">,</span>&nbsp;<span class="ident" id="3732083">ip</span><span class="op" id="3732085">[</span><span class="num" id="3732086">2</span><span class="op" id="3732087">]</span><span class="op" id="3732088">,</span>&nbsp;<span class="ident" id="3732090">ip</span><span class="op" id="3732092">[</span><span class="num" id="3732093">3</span><span class="op" id="3732094">]</span><span class="op" id="3732095">}</span><span class="op" id="3732096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732099">if</span>&nbsp;<span class="ident" id="3732102">err</span>&nbsp;<span class="op" id="3732106">:=</span>&nbsp;<span class="ident" id="3732109">setIPv4MreqToInterface</span><span class="op" id="3732131">(</span><span class="ident" id="3732132">mreq</span><span class="op" id="3732136">,</span>&nbsp;<span class="ident" id="3732138">ifi</span><span class="op" id="3732141">)</span><span class="op" id="3732142">;</span>&nbsp;<span class="ident" id="3732144">err</span>&nbsp;<span class="op" id="3732148">!=</span>&nbsp;<span class="ident" id="3732151">nil</span>&nbsp;<span class="op" id="3732155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732159">return</span>&nbsp;<span class="ident" id="3732166">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3732171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732174">if</span>&nbsp;<span class="ident" id="3732177">err</span>&nbsp;<span class="op" id="3732181">:=</span>&nbsp;<span class="ident" id="3732184">fd</span><span class="op" id="3732186">.</span><span class="ident" id="3732187">incref</span><span class="op" id="3732193">(</span><span class="op" id="3732194">)</span><span class="op" id="3732195">;</span>&nbsp;<span class="ident" id="3732197">err</span>&nbsp;<span class="op" id="3732201">!=</span>&nbsp;<span class="ident" id="3732204">nil</span>&nbsp;<span class="op" id="3732208">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732212">return</span>&nbsp;<span class="ident" id="3732219">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3732224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732227">defer</span>&nbsp;<span class="ident" id="3732233">fd</span><span class="op" id="3732235">.</span><span class="ident" id="3732236">decref</span><span class="op" id="3732242">(</span><span class="op" id="3732243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732246">return</span>&nbsp;<span class="ident" id="3732253">os</span><span class="op" id="3732255">.</span><span class="ident" id="3732256">NewSyscallError</span><span class="op" id="3732271">(</span><span class="string" id="3732272">&#34;setsockopt&#34;</span><span class="op" id="3732284">,</span>&nbsp;<span class="ident" id="3732286">syscall</span><span class="op" id="3732293">.</span><span class="ident" id="3732294">SetsockoptIPMreq</span><span class="op" id="3732310">(</span><span class="ident" id="3732311">fd</span><span class="op" id="3732313">.</span><span class="ident" id="3732314">sysfd</span><span class="op" id="3732319">,</span>&nbsp;<span class="ident" id="3732321">syscall</span><span class="op" id="3732328">.</span><span class="ident" id="3732329">IPPROTO_IP</span><span class="op" id="3732339">,</span>&nbsp;<span class="ident" id="3732341">syscall</span><span class="op" id="3732348">.</span><span class="ident" id="3732349">IP_ADD_MEMBERSHIP</span><span class="op" id="3732366">,</span>&nbsp;<span class="ident" id="3732368">mreq</span><span class="op" id="3732372">)</span><span class="op" id="3732373">)</span><br>
<span class="lineno"></span><span class="op" id="3732375">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3732378">func</span>&nbsp;<span class="ident" id="3732383">setIPv6MulticastInterface</span><span class="op" id="3732408">(</span><span class="ident" id="3732409">fd</span>&nbsp;<span class="op" id="3732412">*</span><span class="ident" id="3732413">netFD</span><span class="op" id="3732418">,</span>&nbsp;<span class="ident" id="3732420">ifi</span>&nbsp;<span class="op" id="3732424">*</span><span class="ident" id="3732425">Interface</span><span class="op" id="3732434">)</span>&nbsp;<span class="builtintype" id="3732436">error</span>&nbsp;<span class="op" id="3732442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732445">var</span>&nbsp;<span class="ident" id="3732449">v</span>&nbsp;<span class="builtintype" id="3732451">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732456">if</span>&nbsp;<span class="ident" id="3732459">ifi</span>&nbsp;<span class="op" id="3732463">!=</span>&nbsp;<span class="ident" id="3732466">nil</span>&nbsp;<span class="op" id="3732470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3732474">v</span>&nbsp;<span class="op" id="3732476">=</span>&nbsp;<span class="ident" id="3732478">ifi</span><span class="op" id="3732481">.</span><span class="ident" id="3732482">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3732489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732492">if</span>&nbsp;<span class="ident" id="3732495">err</span>&nbsp;<span class="op" id="3732499">:=</span>&nbsp;<span class="ident" id="3732502">fd</span><span class="op" id="3732504">.</span><span class="ident" id="3732505">incref</span><span class="op" id="3732511">(</span><span class="op" id="3732512">)</span><span class="op" id="3732513">;</span>&nbsp;<span class="ident" id="3732515">err</span>&nbsp;<span class="op" id="3732519">!=</span>&nbsp;<span class="ident" id="3732522">nil</span>&nbsp;<span class="op" id="3732526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732530">return</span>&nbsp;<span class="ident" id="3732537">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3732542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732545">defer</span>&nbsp;<span class="ident" id="3732551">fd</span><span class="op" id="3732553">.</span><span class="ident" id="3732554">decref</span><span class="op" id="3732560">(</span><span class="op" id="3732561">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732564">return</span>&nbsp;<span class="ident" id="3732571">os</span><span class="op" id="3732573">.</span><span class="ident" id="3732574">NewSyscallError</span><span class="op" id="3732589">(</span><span class="string" id="3732590">&#34;setsockopt&#34;</span><span class="op" id="3732602">,</span>&nbsp;<span class="ident" id="3732604">syscall</span><span class="op" id="3732611">.</span><span class="ident" id="3732612">SetsockoptInt</span><span class="op" id="3732625">(</span><span class="ident" id="3732626">fd</span><span class="op" id="3732628">.</span><span class="ident" id="3732629">sysfd</span><span class="op" id="3732634">,</span>&nbsp;<span class="ident" id="3732636">syscall</span><span class="op" id="3732643">.</span><span class="ident" id="3732644">IPPROTO_IPV6</span><span class="op" id="3732656">,</span>&nbsp;<span class="ident" id="3732658">syscall</span><span class="op" id="3732665">.</span><span class="ident" id="3732666">IPV6_MULTICAST_IF</span><span class="op" id="3732683">,</span>&nbsp;<span class="ident" id="3732685">v</span><span class="op" id="3732686">)</span><span class="op" id="3732687">)</span><br>
<span class="lineno"></span><span class="op" id="3732689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3732692">func</span>&nbsp;<span class="ident" id="3732697">setIPv6MulticastLoopback</span><span class="op" id="3732721">(</span><span class="ident" id="3732722">fd</span>&nbsp;<span class="op" id="3732725">*</span><span class="ident" id="3732726">netFD</span><span class="op" id="3732731">,</span>&nbsp;<span class="ident" id="3732733">v</span>&nbsp;<span class="builtintype" id="3732735">bool</span><span class="op" id="3732739">)</span>&nbsp;<span class="builtintype" id="3732741">error</span>&nbsp;<span class="op" id="3732747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732750">if</span>&nbsp;<span class="ident" id="3732753">err</span>&nbsp;<span class="op" id="3732757">:=</span>&nbsp;<span class="ident" id="3732760">fd</span><span class="op" id="3732762">.</span><span class="ident" id="3732763">incref</span><span class="op" id="3732769">(</span><span class="op" id="3732770">)</span><span class="op" id="3732771">;</span>&nbsp;<span class="ident" id="3732773">err</span>&nbsp;<span class="op" id="3732777">!=</span>&nbsp;<span class="ident" id="3732780">nil</span>&nbsp;<span class="op" id="3732784">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732788">return</span>&nbsp;<span class="ident" id="3732795">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3732800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732803">defer</span>&nbsp;<span class="ident" id="3732809">fd</span><span class="op" id="3732811">.</span><span class="ident" id="3732812">decref</span><span class="op" id="3732818">(</span><span class="op" id="3732819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3732822">return</span>&nbsp;<span class="ident" id="3732829">os</span><span class="op" id="3732831">.</span><span class="ident" id="3732832">NewSyscallError</span><span class="op" id="3732847">(</span><span class="string" id="3732848">&#34;setsockopt&#34;</span><span class="op" id="3732860">,</span>&nbsp;<span class="ident" id="3732862">syscall</span><span class="op" id="3732869">.</span><span class="ident" id="3732870">SetsockoptInt</span><span class="op" id="3732883">(</span><span class="ident" id="3732884">fd</span><span class="op" id="3732886">.</span><span class="ident" id="3732887">sysfd</span><span class="op" id="3732892">,</span>&nbsp;<span class="ident" id="3732894">syscall</span><span class="op" id="3732901">.</span><span class="ident" id="3732902">IPPROTO_IPV6</span><span class="op" id="3732914">,</span>&nbsp;<span class="ident" id="3732916">syscall</span><span class="op" id="3732923">.</span><span class="ident" id="3732924">IPV6_MULTICAST_LOOP</span><span class="op" id="3732943">,</span>&nbsp;<span class="ident" id="3732945">boolint</span><span class="op" id="3732952">(</span><span class="ident" id="3732953">v</span><span class="op" id="3732954">)</span><span class="op" id="3732955">)</span><span class="op" id="3732956">)</span><br>
<span class="lineno"></span><span class="op" id="3732958">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3732961">func</span>&nbsp;<span class="ident" id="3732966">joinIPv6Group</span><span class="op" id="3732979">(</span><span class="ident" id="3732980">fd</span>&nbsp;<span class="op" id="3732983">*</span><span class="ident" id="3732984">netFD</span><span class="op" id="3732989">,</span>&nbsp;<span class="ident" id="3732991">ifi</span>&nbsp;<span class="op" id="3732995">*</span><span class="ident" id="3732996">Interface</span><span class="op" id="3733005">,</span>&nbsp;<span class="ident" id="3733007">ip</span>&nbsp;<span class="ident" id="3733010">IP</span><span class="op" id="3733012">)</span>&nbsp;<span class="builtintype" id="3733014">error</span>&nbsp;<span class="op" id="3733020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3733023">mreq</span>&nbsp;<span class="op" id="3733028">:=</span>&nbsp;<span class="op" id="3733031">&amp;</span><span class="ident" id="3733032">syscall</span><span class="op" id="3733039">.</span><span class="ident" id="3733040">IPv6Mreq</span><span class="op" id="3733048">{</span><span class="op" id="3733049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3733052">copy</span><span class="op" id="3733056">(</span><span class="ident" id="3733057">mreq</span><span class="op" id="3733061">.</span><span class="ident" id="3733062">Multiaddr</span><span class="op" id="3733071">[</span><span class="op" id="3733072">:</span><span class="op" id="3733073">]</span><span class="op" id="3733074">,</span>&nbsp;<span class="ident" id="3733076">ip</span><span class="op" id="3733078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3733081">if</span>&nbsp;<span class="ident" id="3733084">ifi</span>&nbsp;<span class="op" id="3733088">!=</span>&nbsp;<span class="ident" id="3733091">nil</span>&nbsp;<span class="op" id="3733095">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3733099">mreq</span><span class="op" id="3733103">.</span><span class="ident" id="3733104">Interface</span>&nbsp;<span class="op" id="3733114">=</span>&nbsp;<span class="builtintype" id="3733116">uint32</span><span class="op" id="3733122">(</span><span class="ident" id="3733123">ifi</span><span class="op" id="3733126">.</span><span class="ident" id="3733127">Index</span><span class="op" id="3733132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3733135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3733138">if</span>&nbsp;<span class="ident" id="3733141">err</span>&nbsp;<span class="op" id="3733145">:=</span>&nbsp;<span class="ident" id="3733148">fd</span><span class="op" id="3733150">.</span><span class="ident" id="3733151">incref</span><span class="op" id="3733157">(</span><span class="op" id="3733158">)</span><span class="op" id="3733159">;</span>&nbsp;<span class="ident" id="3733161">err</span>&nbsp;<span class="op" id="3733165">!=</span>&nbsp;<span class="ident" id="3733168">nil</span>&nbsp;<span class="op" id="3733172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3733176">return</span>&nbsp;<span class="ident" id="3733183">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3733188">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3733191">defer</span>&nbsp;<span class="ident" id="3733197">fd</span><span class="op" id="3733199">.</span><span class="ident" id="3733200">decref</span><span class="op" id="3733206">(</span><span class="op" id="3733207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3733210">return</span>&nbsp;<span class="ident" id="3733217">os</span><span class="op" id="3733219">.</span><span class="ident" id="3733220">NewSyscallError</span><span class="op" id="3733235">(</span><span class="string" id="3733236">&#34;setsockopt&#34;</span><span class="op" id="3733248">,</span>&nbsp;<span class="ident" id="3733250">syscall</span><span class="op" id="3733257">.</span><span class="ident" id="3733258">SetsockoptIPv6Mreq</span><span class="op" id="3733276">(</span><span class="ident" id="3733277">fd</span><span class="op" id="3733279">.</span><span class="ident" id="3733280">sysfd</span><span class="op" id="3733285">,</span>&nbsp;<span class="ident" id="3733287">syscall</span><span class="op" id="3733294">.</span><span class="ident" id="3733295">IPPROTO_IPV6</span><span class="op" id="3733307">,</span>&nbsp;<span class="ident" id="3733309">syscall</span><span class="op" id="3733316">.</span><span class="ident" id="3733317">IPV6_JOIN_GROUP</span><span class="op" id="3733332">,</span>&nbsp;<span class="ident" id="3733334">mreq</span><span class="op" id="3733338">)</span><span class="op" id="3733339">)</span><br>
<span class="lineno"></span><span class="op" id="3733341">}</span>
</div>
</body>
</html>
