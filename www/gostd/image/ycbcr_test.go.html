<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html" class="current">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7368654">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7368709">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7368763">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7368814">package</span>&nbsp;<span class="ident" id="7368822">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368829">import</span>&nbsp;<span class="op" id="7368836">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368839">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368854">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7368864">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368867">func</span>&nbsp;<span class="ident" id="7368872">TestYCbCr</span><span class="op" id="7368881">(</span><span class="ident" id="7368882">t</span>&nbsp;<span class="op" id="7368884">*</span><span class="ident" id="7368885">testing</span><span class="op" id="7368892">.</span><span class="ident" id="7368893">T</span><span class="op" id="7368894">)</span>&nbsp;<span class="op" id="7368896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368899">rects</span>&nbsp;<span class="op" id="7368905">:=</span>&nbsp;<span class="op" id="7368908">[</span><span class="op" id="7368909">]</span><span class="ident" id="7368910">Rectangle</span><span class="op" id="7368919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368923">Rect</span><span class="op" id="7368927">(</span><span class="num" id="7368928">0</span><span class="op" id="7368929">,</span>&nbsp;<span class="num" id="7368931">0</span><span class="op" id="7368932">,</span>&nbsp;<span class="num" id="7368934">16</span><span class="op" id="7368936">,</span>&nbsp;<span class="num" id="7368938">16</span><span class="op" id="7368940">)</span><span class="op" id="7368941">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368945">Rect</span><span class="op" id="7368949">(</span><span class="num" id="7368950">1</span><span class="op" id="7368951">,</span>&nbsp;<span class="num" id="7368953">0</span><span class="op" id="7368954">,</span>&nbsp;<span class="num" id="7368956">16</span><span class="op" id="7368958">,</span>&nbsp;<span class="num" id="7368960">16</span><span class="op" id="7368962">)</span><span class="op" id="7368963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368967">Rect</span><span class="op" id="7368971">(</span><span class="num" id="7368972">0</span><span class="op" id="7368973">,</span>&nbsp;<span class="num" id="7368975">1</span><span class="op" id="7368976">,</span>&nbsp;<span class="num" id="7368978">16</span><span class="op" id="7368980">,</span>&nbsp;<span class="num" id="7368982">16</span><span class="op" id="7368984">)</span><span class="op" id="7368985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368989">Rect</span><span class="op" id="7368993">(</span><span class="num" id="7368994">1</span><span class="op" id="7368995">,</span>&nbsp;<span class="num" id="7368997">1</span><span class="op" id="7368998">,</span>&nbsp;<span class="num" id="7369000">16</span><span class="op" id="7369002">,</span>&nbsp;<span class="num" id="7369004">16</span><span class="op" id="7369006">)</span><span class="op" id="7369007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369011">Rect</span><span class="op" id="7369015">(</span><span class="num" id="7369016">1</span><span class="op" id="7369017">,</span>&nbsp;<span class="num" id="7369019">1</span><span class="op" id="7369020">,</span>&nbsp;<span class="num" id="7369022">15</span><span class="op" id="7369024">,</span>&nbsp;<span class="num" id="7369026">16</span><span class="op" id="7369028">)</span><span class="op" id="7369029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369033">Rect</span><span class="op" id="7369037">(</span><span class="num" id="7369038">1</span><span class="op" id="7369039">,</span>&nbsp;<span class="num" id="7369041">1</span><span class="op" id="7369042">,</span>&nbsp;<span class="num" id="7369044">16</span><span class="op" id="7369046">,</span>&nbsp;<span class="num" id="7369048">15</span><span class="op" id="7369050">)</span><span class="op" id="7369051">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369055">Rect</span><span class="op" id="7369059">(</span><span class="num" id="7369060">1</span><span class="op" id="7369061">,</span>&nbsp;<span class="num" id="7369063">1</span><span class="op" id="7369064">,</span>&nbsp;<span class="num" id="7369066">15</span><span class="op" id="7369068">,</span>&nbsp;<span class="num" id="7369070">15</span><span class="op" id="7369072">)</span><span class="op" id="7369073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369077">Rect</span><span class="op" id="7369081">(</span><span class="num" id="7369082">2</span><span class="op" id="7369083">,</span>&nbsp;<span class="num" id="7369085">3</span><span class="op" id="7369086">,</span>&nbsp;<span class="num" id="7369088">14</span><span class="op" id="7369090">,</span>&nbsp;<span class="num" id="7369092">15</span><span class="op" id="7369094">)</span><span class="op" id="7369095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369099">Rect</span><span class="op" id="7369103">(</span><span class="num" id="7369104">7</span><span class="op" id="7369105">,</span>&nbsp;<span class="num" id="7369107">0</span><span class="op" id="7369108">,</span>&nbsp;<span class="num" id="7369110">7</span><span class="op" id="7369111">,</span>&nbsp;<span class="num" id="7369113">16</span><span class="op" id="7369115">)</span><span class="op" id="7369116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369120">Rect</span><span class="op" id="7369124">(</span><span class="num" id="7369125">0</span><span class="op" id="7369126">,</span>&nbsp;<span class="num" id="7369128">8</span><span class="op" id="7369129">,</span>&nbsp;<span class="num" id="7369131">16</span><span class="op" id="7369133">,</span>&nbsp;<span class="num" id="7369135">8</span><span class="op" id="7369136">)</span><span class="op" id="7369137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369141">Rect</span><span class="op" id="7369145">(</span><span class="num" id="7369146">0</span><span class="op" id="7369147">,</span>&nbsp;<span class="num" id="7369149">0</span><span class="op" id="7369150">,</span>&nbsp;<span class="num" id="7369152">10</span><span class="op" id="7369154">,</span>&nbsp;<span class="num" id="7369156">11</span><span class="op" id="7369158">)</span><span class="op" id="7369159">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369163">Rect</span><span class="op" id="7369167">(</span><span class="num" id="7369168">5</span><span class="op" id="7369169">,</span>&nbsp;<span class="num" id="7369171">6</span><span class="op" id="7369172">,</span>&nbsp;<span class="num" id="7369174">16</span><span class="op" id="7369176">,</span>&nbsp;<span class="num" id="7369178">16</span><span class="op" id="7369180">)</span><span class="op" id="7369181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369185">Rect</span><span class="op" id="7369189">(</span><span class="num" id="7369190">7</span><span class="op" id="7369191">,</span>&nbsp;<span class="num" id="7369193">7</span><span class="op" id="7369194">,</span>&nbsp;<span class="num" id="7369196">8</span><span class="op" id="7369197">,</span>&nbsp;<span class="num" id="7369199">8</span><span class="op" id="7369200">)</span><span class="op" id="7369201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369205">Rect</span><span class="op" id="7369209">(</span><span class="num" id="7369210">7</span><span class="op" id="7369211">,</span>&nbsp;<span class="num" id="7369213">8</span><span class="op" id="7369214">,</span>&nbsp;<span class="num" id="7369216">8</span><span class="op" id="7369217">,</span>&nbsp;<span class="num" id="7369219">9</span><span class="op" id="7369220">)</span><span class="op" id="7369221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369225">Rect</span><span class="op" id="7369229">(</span><span class="num" id="7369230">8</span><span class="op" id="7369231">,</span>&nbsp;<span class="num" id="7369233">7</span><span class="op" id="7369234">,</span>&nbsp;<span class="num" id="7369236">9</span><span class="op" id="7369237">,</span>&nbsp;<span class="num" id="7369239">8</span><span class="op" id="7369240">)</span><span class="op" id="7369241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369245">Rect</span><span class="op" id="7369249">(</span><span class="num" id="7369250">8</span><span class="op" id="7369251">,</span>&nbsp;<span class="num" id="7369253">8</span><span class="op" id="7369254">,</span>&nbsp;<span class="num" id="7369256">9</span><span class="op" id="7369257">,</span>&nbsp;<span class="num" id="7369259">9</span><span class="op" id="7369260">)</span><span class="op" id="7369261">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369265">Rect</span><span class="op" id="7369269">(</span><span class="num" id="7369270">7</span><span class="op" id="7369271">,</span>&nbsp;<span class="num" id="7369273">7</span><span class="op" id="7369274">,</span>&nbsp;<span class="num" id="7369276">17</span><span class="op" id="7369278">,</span>&nbsp;<span class="num" id="7369280">17</span><span class="op" id="7369282">)</span><span class="op" id="7369283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369287">Rect</span><span class="op" id="7369291">(</span><span class="num" id="7369292">8</span><span class="op" id="7369293">,</span>&nbsp;<span class="num" id="7369295">8</span><span class="op" id="7369296">,</span>&nbsp;<span class="num" id="7369298">17</span><span class="op" id="7369300">,</span>&nbsp;<span class="num" id="7369302">17</span><span class="op" id="7369304">)</span><span class="op" id="7369305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369309">Rect</span><span class="op" id="7369313">(</span><span class="num" id="7369314">9</span><span class="op" id="7369315">,</span>&nbsp;<span class="num" id="7369317">9</span><span class="op" id="7369318">,</span>&nbsp;<span class="num" id="7369320">17</span><span class="op" id="7369322">,</span>&nbsp;<span class="num" id="7369324">17</span><span class="op" id="7369326">)</span><span class="op" id="7369327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369331">Rect</span><span class="op" id="7369335">(</span><span class="num" id="7369336">10</span><span class="op" id="7369338">,</span>&nbsp;<span class="num" id="7369340">10</span><span class="op" id="7369342">,</span>&nbsp;<span class="num" id="7369344">17</span><span class="op" id="7369346">,</span>&nbsp;<span class="num" id="7369348">17</span><span class="op" id="7369350">)</span><span class="op" id="7369351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369354">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369357">subsampleRatios</span>&nbsp;<span class="op" id="7369373">:=</span>&nbsp;<span class="op" id="7369376">[</span><span class="op" id="7369377">]</span><span class="ident" id="7369378">YCbCrSubsampleRatio</span><span class="op" id="7369397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369401">YCbCrSubsampleRatio444</span><span class="op" id="7369423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369427">YCbCrSubsampleRatio422</span><span class="op" id="7369449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369453">YCbCrSubsampleRatio420</span><span class="op" id="7369475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369479">YCbCrSubsampleRatio440</span><span class="op" id="7369501">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369507">deltas</span>&nbsp;<span class="op" id="7369514">:=</span>&nbsp;<span class="op" id="7369517">[</span><span class="op" id="7369518">]</span><span class="ident" id="7369519">Point</span><span class="op" id="7369524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369528">Pt</span><span class="op" id="7369530">(</span><span class="num" id="7369531">0</span><span class="op" id="7369532">,</span>&nbsp;<span class="num" id="7369534">0</span><span class="op" id="7369535">)</span><span class="op" id="7369536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369540">Pt</span><span class="op" id="7369542">(</span><span class="num" id="7369543">1000</span><span class="op" id="7369547">,</span>&nbsp;<span class="num" id="7369549">1001</span><span class="op" id="7369553">)</span><span class="op" id="7369554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369558">Pt</span><span class="op" id="7369560">(</span><span class="num" id="7369561">5001</span><span class="op" id="7369565">,</span>&nbsp;<span class="op" id="7369567">-</span><span class="num" id="7369568">400</span><span class="op" id="7369571">)</span><span class="op" id="7369572">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369576">Pt</span><span class="op" id="7369578">(</span><span class="op" id="7369579">-</span><span class="num" id="7369580">701</span><span class="op" id="7369583">,</span>&nbsp;<span class="op" id="7369585">-</span><span class="num" id="7369586">801</span><span class="op" id="7369589">)</span><span class="op" id="7369590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369596">for</span>&nbsp;<span class="ident" id="7369600">_</span><span class="op" id="7369601">,</span>&nbsp;<span class="ident" id="7369603">r</span>&nbsp;<span class="op" id="7369605">:=</span>&nbsp;<span class="keyword" id="7369608">range</span>&nbsp;<span class="ident" id="7369614">rects</span>&nbsp;<span class="op" id="7369620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369624">for</span>&nbsp;<span class="ident" id="7369628">_</span><span class="op" id="7369629">,</span>&nbsp;<span class="ident" id="7369631">subsampleRatio</span>&nbsp;<span class="op" id="7369646">:=</span>&nbsp;<span class="keyword" id="7369649">range</span>&nbsp;<span class="ident" id="7369655">subsampleRatios</span>&nbsp;<span class="op" id="7369671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369676">for</span>&nbsp;<span class="ident" id="7369680">_</span><span class="op" id="7369681">,</span>&nbsp;<span class="ident" id="7369683">delta</span>&nbsp;<span class="op" id="7369689">:=</span>&nbsp;<span class="keyword" id="7369692">range</span>&nbsp;<span class="ident" id="7369698">deltas</span>&nbsp;<span class="op" id="7369705">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369711">testYCbCr</span><span class="op" id="7369720">(</span><span class="ident" id="7369721">t</span><span class="op" id="7369722">,</span>&nbsp;<span class="ident" id="7369724">r</span><span class="op" id="7369725">,</span>&nbsp;<span class="ident" id="7369727">subsampleRatio</span><span class="op" id="7369741">,</span>&nbsp;<span class="ident" id="7369743">delta</span><span class="op" id="7369748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369761">if</span>&nbsp;<span class="ident" id="7369764">testing</span><span class="op" id="7369771">.</span><span class="ident" id="7369772">Short</span><span class="op" id="7369777">(</span><span class="op" id="7369778">)</span>&nbsp;<span class="op" id="7369780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369785">break</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369796">}</span><br>
<span class="lineno"></span><span class="op" id="7369798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369801">func</span>&nbsp;<span class="ident" id="7369806">testYCbCr</span><span class="op" id="7369815">(</span><span class="ident" id="7369816">t</span>&nbsp;<span class="op" id="7369818">*</span><span class="ident" id="7369819">testing</span><span class="op" id="7369826">.</span><span class="ident" id="7369827">T</span><span class="op" id="7369828">,</span>&nbsp;<span class="ident" id="7369830">r</span>&nbsp;<span class="ident" id="7369832">Rectangle</span><span class="op" id="7369841">,</span>&nbsp;<span class="ident" id="7369843">subsampleRatio</span>&nbsp;<span class="ident" id="7369858">YCbCrSubsampleRatio</span><span class="op" id="7369877">,</span>&nbsp;<span class="ident" id="7369879">delta</span>&nbsp;<span class="ident" id="7369885">Point</span><span class="op" id="7369890">)</span>&nbsp;<span class="op" id="7369892">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369895">//&nbsp;Create&nbsp;a&nbsp;YCbCr&nbsp;image&nbsp;m,&nbsp;whose&nbsp;bounds&nbsp;are&nbsp;r&nbsp;translated&nbsp;by&nbsp;(delta.X,&nbsp;delta.Y).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369976">r1</span>&nbsp;<span class="op" id="7369979">:=</span>&nbsp;<span class="ident" id="7369982">r</span><span class="op" id="7369983">.</span><span class="ident" id="7369984">Add</span><span class="op" id="7369987">(</span><span class="ident" id="7369988">delta</span><span class="op" id="7369993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369996">m</span>&nbsp;<span class="op" id="7369998">:=</span>&nbsp;<span class="ident" id="7370001">NewYCbCr</span><span class="op" id="7370009">(</span><span class="ident" id="7370010">r1</span><span class="op" id="7370012">,</span>&nbsp;<span class="ident" id="7370014">subsampleRatio</span><span class="op" id="7370028">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370032">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;image&nbsp;buffer&nbsp;is&nbsp;reasonably&nbsp;small&nbsp;even&nbsp;if&nbsp;(delta.X,&nbsp;delta.Y)&nbsp;is&nbsp;far&nbsp;from&nbsp;the&nbsp;origin.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370134">if</span>&nbsp;<span class="builtinfunc" id="7370137">len</span><span class="op" id="7370140">(</span><span class="ident" id="7370141">m</span><span class="op" id="7370142">.</span><span class="ident" id="7370143">Y</span><span class="op" id="7370144">)</span>&nbsp;<span class="op" id="7370146">&gt;</span>&nbsp;<span class="num" id="7370148">100</span><span class="op" id="7370151">*</span><span class="num" id="7370152">100</span>&nbsp;<span class="op" id="7370156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370160">t</span><span class="op" id="7370161">.</span><span class="ident" id="7370162">Errorf</span><span class="op" id="7370168">(</span><span class="string" id="7370169">&#34;r=%v,&nbsp;subsampleRatio=%v,&nbsp;delta=%v:&nbsp;image&nbsp;buffer&nbsp;is&nbsp;too&nbsp;large&#34;</span><span class="op" id="7370231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370236">r</span><span class="op" id="7370237">,</span>&nbsp;<span class="ident" id="7370239">subsampleRatio</span><span class="op" id="7370253">,</span>&nbsp;<span class="ident" id="7370255">delta</span><span class="op" id="7370260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370264">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370272">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370276">//&nbsp;Initialize&nbsp;m&#39;s&nbsp;pixels.&nbsp;For&nbsp;422&nbsp;and&nbsp;420&nbsp;subsampling,&nbsp;some&nbsp;of&nbsp;the&nbsp;Cb&nbsp;and&nbsp;Cr&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370363">//&nbsp;will&nbsp;be&nbsp;set&nbsp;multiple&nbsp;times.&nbsp;That&#39;s&nbsp;OK.&nbsp;We&nbsp;just&nbsp;want&nbsp;to&nbsp;avoid&nbsp;a&nbsp;uniform&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370445">for</span>&nbsp;<span class="ident" id="7370449">y</span>&nbsp;<span class="op" id="7370451">:=</span>&nbsp;<span class="ident" id="7370454">r1</span><span class="op" id="7370456">.</span><span class="ident" id="7370457">Min</span><span class="op" id="7370460">.</span><span class="ident" id="7370461">Y</span><span class="op" id="7370462">;</span>&nbsp;<span class="ident" id="7370464">y</span>&nbsp;<span class="op" id="7370466">&lt;</span>&nbsp;<span class="ident" id="7370468">r1</span><span class="op" id="7370470">.</span><span class="ident" id="7370471">Max</span><span class="op" id="7370474">.</span><span class="ident" id="7370475">Y</span><span class="op" id="7370476">;</span>&nbsp;<span class="ident" id="7370478">y</span><span class="op" id="7370479">++</span>&nbsp;<span class="op" id="7370482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370486">for</span>&nbsp;<span class="ident" id="7370490">x</span>&nbsp;<span class="op" id="7370492">:=</span>&nbsp;<span class="ident" id="7370495">r1</span><span class="op" id="7370497">.</span><span class="ident" id="7370498">Min</span><span class="op" id="7370501">.</span><span class="ident" id="7370502">X</span><span class="op" id="7370503">;</span>&nbsp;<span class="ident" id="7370505">x</span>&nbsp;<span class="op" id="7370507">&lt;</span>&nbsp;<span class="ident" id="7370509">r1</span><span class="op" id="7370511">.</span><span class="ident" id="7370512">Max</span><span class="op" id="7370515">.</span><span class="ident" id="7370516">X</span><span class="op" id="7370517">;</span>&nbsp;<span class="ident" id="7370519">x</span><span class="op" id="7370520">++</span>&nbsp;<span class="op" id="7370523">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370528">yi</span>&nbsp;<span class="op" id="7370531">:=</span>&nbsp;<span class="ident" id="7370534">m</span><span class="op" id="7370535">.</span><span class="ident" id="7370536">YOffset</span><span class="op" id="7370543">(</span><span class="ident" id="7370544">x</span><span class="op" id="7370545">,</span>&nbsp;<span class="ident" id="7370547">y</span><span class="op" id="7370548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370553">ci</span>&nbsp;<span class="op" id="7370556">:=</span>&nbsp;<span class="ident" id="7370559">m</span><span class="op" id="7370560">.</span><span class="ident" id="7370561">COffset</span><span class="op" id="7370568">(</span><span class="ident" id="7370569">x</span><span class="op" id="7370570">,</span>&nbsp;<span class="ident" id="7370572">y</span><span class="op" id="7370573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370578">m</span><span class="op" id="7370579">.</span><span class="ident" id="7370580">Y</span><span class="op" id="7370581">[</span><span class="ident" id="7370582">yi</span><span class="op" id="7370584">]</span>&nbsp;<span class="op" id="7370586">=</span>&nbsp;<span class="builtintype" id="7370588">uint8</span><span class="op" id="7370593">(</span><span class="num" id="7370594">16</span><span class="op" id="7370596">*</span><span class="ident" id="7370597">y</span>&nbsp;<span class="op" id="7370599">+</span>&nbsp;<span class="ident" id="7370601">x</span><span class="op" id="7370602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370607">m</span><span class="op" id="7370608">.</span><span class="ident" id="7370609">Cb</span><span class="op" id="7370611">[</span><span class="ident" id="7370612">ci</span><span class="op" id="7370614">]</span>&nbsp;<span class="op" id="7370616">=</span>&nbsp;<span class="builtintype" id="7370618">uint8</span><span class="op" id="7370623">(</span><span class="ident" id="7370624">y</span>&nbsp;<span class="op" id="7370626">+</span>&nbsp;<span class="num" id="7370628">16</span><span class="op" id="7370630">*</span><span class="ident" id="7370631">x</span><span class="op" id="7370632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370637">m</span><span class="op" id="7370638">.</span><span class="ident" id="7370639">Cr</span><span class="op" id="7370641">[</span><span class="ident" id="7370642">ci</span><span class="op" id="7370644">]</span>&nbsp;<span class="op" id="7370646">=</span>&nbsp;<span class="builtintype" id="7370648">uint8</span><span class="op" id="7370653">(</span><span class="ident" id="7370654">y</span>&nbsp;<span class="op" id="7370656">+</span>&nbsp;<span class="num" id="7370658">16</span><span class="op" id="7370660">*</span><span class="ident" id="7370661">x</span><span class="op" id="7370662">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370673">//&nbsp;Make&nbsp;various&nbsp;sub-images&nbsp;of&nbsp;m.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370707">for</span>&nbsp;<span class="ident" id="7370711">y0</span>&nbsp;<span class="op" id="7370714">:=</span>&nbsp;<span class="ident" id="7370717">delta</span><span class="op" id="7370722">.</span><span class="ident" id="7370723">Y</span>&nbsp;<span class="op" id="7370725">+</span>&nbsp;<span class="num" id="7370727">3</span><span class="op" id="7370728">;</span>&nbsp;<span class="ident" id="7370730">y0</span>&nbsp;<span class="op" id="7370733">&lt;</span>&nbsp;<span class="ident" id="7370735">delta</span><span class="op" id="7370740">.</span><span class="ident" id="7370741">Y</span><span class="op" id="7370742">+</span><span class="num" id="7370743">7</span><span class="op" id="7370744">;</span>&nbsp;<span class="ident" id="7370746">y0</span><span class="op" id="7370748">++</span>&nbsp;<span class="op" id="7370751">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370755">for</span>&nbsp;<span class="ident" id="7370759">y1</span>&nbsp;<span class="op" id="7370762">:=</span>&nbsp;<span class="ident" id="7370765">delta</span><span class="op" id="7370770">.</span><span class="ident" id="7370771">Y</span>&nbsp;<span class="op" id="7370773">+</span>&nbsp;<span class="num" id="7370775">8</span><span class="op" id="7370776">;</span>&nbsp;<span class="ident" id="7370778">y1</span>&nbsp;<span class="op" id="7370781">&lt;</span>&nbsp;<span class="ident" id="7370783">delta</span><span class="op" id="7370788">.</span><span class="ident" id="7370789">Y</span><span class="op" id="7370790">+</span><span class="num" id="7370791">13</span><span class="op" id="7370793">;</span>&nbsp;<span class="ident" id="7370795">y1</span><span class="op" id="7370797">++</span>&nbsp;<span class="op" id="7370800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370805">for</span>&nbsp;<span class="ident" id="7370809">x0</span>&nbsp;<span class="op" id="7370812">:=</span>&nbsp;<span class="ident" id="7370815">delta</span><span class="op" id="7370820">.</span><span class="ident" id="7370821">X</span>&nbsp;<span class="op" id="7370823">+</span>&nbsp;<span class="num" id="7370825">3</span><span class="op" id="7370826">;</span>&nbsp;<span class="ident" id="7370828">x0</span>&nbsp;<span class="op" id="7370831">&lt;</span>&nbsp;<span class="ident" id="7370833">delta</span><span class="op" id="7370838">.</span><span class="ident" id="7370839">X</span><span class="op" id="7370840">+</span><span class="num" id="7370841">7</span><span class="op" id="7370842">;</span>&nbsp;<span class="ident" id="7370844">x0</span><span class="op" id="7370846">++</span>&nbsp;<span class="op" id="7370849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370855">for</span>&nbsp;<span class="ident" id="7370859">x1</span>&nbsp;<span class="op" id="7370862">:=</span>&nbsp;<span class="ident" id="7370865">delta</span><span class="op" id="7370870">.</span><span class="ident" id="7370871">X</span>&nbsp;<span class="op" id="7370873">+</span>&nbsp;<span class="num" id="7370875">8</span><span class="op" id="7370876">;</span>&nbsp;<span class="ident" id="7370878">x1</span>&nbsp;<span class="op" id="7370881">&lt;</span>&nbsp;<span class="ident" id="7370883">delta</span><span class="op" id="7370888">.</span><span class="ident" id="7370889">X</span><span class="op" id="7370890">+</span><span class="num" id="7370891">13</span><span class="op" id="7370893">;</span>&nbsp;<span class="ident" id="7370895">x1</span><span class="op" id="7370897">++</span>&nbsp;<span class="op" id="7370900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370907">subRect</span>&nbsp;<span class="op" id="7370915">:=</span>&nbsp;<span class="ident" id="7370918">Rect</span><span class="op" id="7370922">(</span><span class="ident" id="7370923">x0</span><span class="op" id="7370925">,</span>&nbsp;<span class="ident" id="7370927">y0</span><span class="op" id="7370929">,</span>&nbsp;<span class="ident" id="7370931">x1</span><span class="op" id="7370933">,</span>&nbsp;<span class="ident" id="7370935">y1</span><span class="op" id="7370937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370944">sub</span>&nbsp;<span class="op" id="7370948">:=</span>&nbsp;<span class="ident" id="7370951">m</span><span class="op" id="7370952">.</span><span class="ident" id="7370953">SubImage</span><span class="op" id="7370961">(</span><span class="ident" id="7370962">subRect</span><span class="op" id="7370969">)</span><span class="op" id="7370970">.</span><span class="op" id="7370971">(</span><span class="op" id="7370972">*</span><span class="ident" id="7370973">YCbCr</span><span class="op" id="7370978">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370986">//&nbsp;For&nbsp;each&nbsp;point&nbsp;in&nbsp;the&nbsp;sub-image&#39;s&nbsp;bounds,&nbsp;check&nbsp;that&nbsp;m.At(x,&nbsp;y)&nbsp;equals&nbsp;sub.At(x,&nbsp;y).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371079">for</span>&nbsp;<span class="ident" id="7371083">y</span>&nbsp;<span class="op" id="7371085">:=</span>&nbsp;<span class="ident" id="7371088">sub</span><span class="op" id="7371091">.</span><span class="ident" id="7371092">Rect</span><span class="op" id="7371096">.</span><span class="ident" id="7371097">Min</span><span class="op" id="7371100">.</span><span class="ident" id="7371101">Y</span><span class="op" id="7371102">;</span>&nbsp;<span class="ident" id="7371104">y</span>&nbsp;<span class="op" id="7371106">&lt;</span>&nbsp;<span class="ident" id="7371108">sub</span><span class="op" id="7371111">.</span><span class="ident" id="7371112">Rect</span><span class="op" id="7371116">.</span><span class="ident" id="7371117">Max</span><span class="op" id="7371120">.</span><span class="ident" id="7371121">Y</span><span class="op" id="7371122">;</span>&nbsp;<span class="ident" id="7371124">y</span><span class="op" id="7371125">++</span>&nbsp;<span class="op" id="7371128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371136">for</span>&nbsp;<span class="ident" id="7371140">x</span>&nbsp;<span class="op" id="7371142">:=</span>&nbsp;<span class="ident" id="7371145">sub</span><span class="op" id="7371148">.</span><span class="ident" id="7371149">Rect</span><span class="op" id="7371153">.</span><span class="ident" id="7371154">Min</span><span class="op" id="7371157">.</span><span class="ident" id="7371158">X</span><span class="op" id="7371159">;</span>&nbsp;<span class="ident" id="7371161">x</span>&nbsp;<span class="op" id="7371163">&lt;</span>&nbsp;<span class="ident" id="7371165">sub</span><span class="op" id="7371168">.</span><span class="ident" id="7371169">Rect</span><span class="op" id="7371173">.</span><span class="ident" id="7371174">Max</span><span class="op" id="7371177">.</span><span class="ident" id="7371178">X</span><span class="op" id="7371179">;</span>&nbsp;<span class="ident" id="7371181">x</span><span class="op" id="7371182">++</span>&nbsp;<span class="op" id="7371185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371194">color0</span>&nbsp;<span class="op" id="7371201">:=</span>&nbsp;<span class="ident" id="7371204">m</span><span class="op" id="7371205">.</span><span class="ident" id="7371206">At</span><span class="op" id="7371208">(</span><span class="ident" id="7371209">x</span><span class="op" id="7371210">,</span>&nbsp;<span class="ident" id="7371212">y</span><span class="op" id="7371213">)</span><span class="op" id="7371214">.</span><span class="op" id="7371215">(</span><span class="ident" id="7371216">color</span><span class="op" id="7371221">.</span><span class="ident" id="7371222">YCbCr</span><span class="op" id="7371227">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371236">color1</span>&nbsp;<span class="op" id="7371243">:=</span>&nbsp;<span class="ident" id="7371246">sub</span><span class="op" id="7371249">.</span><span class="ident" id="7371250">At</span><span class="op" id="7371252">(</span><span class="ident" id="7371253">x</span><span class="op" id="7371254">,</span>&nbsp;<span class="ident" id="7371256">y</span><span class="op" id="7371257">)</span><span class="op" id="7371258">.</span><span class="op" id="7371259">(</span><span class="ident" id="7371260">color</span><span class="op" id="7371265">.</span><span class="ident" id="7371266">YCbCr</span><span class="op" id="7371271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371280">if</span>&nbsp;<span class="ident" id="7371283">color0</span>&nbsp;<span class="op" id="7371290">!=</span>&nbsp;<span class="ident" id="7371293">color1</span>&nbsp;<span class="op" id="7371300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371310">t</span><span class="op" id="7371311">.</span><span class="ident" id="7371312">Errorf</span><span class="op" id="7371318">(</span><span class="string" id="7371319">&#34;r=%v,&nbsp;subsampleRatio=%v,&nbsp;delta=%v,&nbsp;x=%d,&nbsp;y=%d,&nbsp;color0=%v,&nbsp;color1=%v&#34;</span><span class="op" id="7371388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371399">r</span><span class="op" id="7371400">,</span>&nbsp;<span class="ident" id="7371402">subsampleRatio</span><span class="op" id="7371416">,</span>&nbsp;<span class="ident" id="7371418">delta</span><span class="op" id="7371423">,</span>&nbsp;<span class="ident" id="7371425">x</span><span class="op" id="7371426">,</span>&nbsp;<span class="ident" id="7371428">y</span><span class="op" id="7371429">,</span>&nbsp;<span class="ident" id="7371431">color0</span><span class="op" id="7371437">,</span>&nbsp;<span class="ident" id="7371439">color1</span><span class="op" id="7371445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371455">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371495">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371502">}</span><br>
<span class="lineno"></span><span class="op" id="7371504">}</span>
</div>
</body>
</html>
