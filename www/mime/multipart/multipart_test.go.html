<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6944280">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6944335">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6944389">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6944440">package</span>&nbsp;<span class="ident" id="6944448">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6944459">import</span>&nbsp;<span class="op" id="6944466">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944469">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944478">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944495">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944502">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944508">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944521">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944538">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944544">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944555">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6944566">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6944576">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6944579">func</span>&nbsp;<span class="ident" id="6944584">TestBoundaryLine</span><span class="op" id="6944600">(</span><span class="ident" id="6944601">t</span>&nbsp;<span class="op" id="6944603">*</span><span class="ident" id="6944604"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6944611">.</span><span class="ident" id="6944612">T</span><span class="op" id="6944613">)</span>&nbsp;<span class="op" id="6944615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944618">mr</span>&nbsp;<span class="op" id="6944621">:=</span>&nbsp;<span class="ident" id="6944624"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6944633">(</span><span class="ident" id="6944634"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6944641">.</span><span class="ident" id="6944642">NewReader</span><span class="op" id="6944651">(</span><span class="string" id="6944652">&#34;&#34;</span><span class="op" id="6944654">)</span><span class="op" id="6944655">,</span>&nbsp;<span class="string" id="6944657">&#34;myBoundary&#34;</span><span class="op" id="6944669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944672">if</span>&nbsp;<span class="op" id="6944675">!</span><span class="ident" id="6944676"><a href="/mime/multipart/multipart_test.go.html#6944618">mr</a></span><span class="op" id="6944678">.</span><span class="ident" id="6944679">isBoundaryDelimiterLine</span><span class="op" id="6944702">(</span><span class="op" id="6944703">[</span><span class="op" id="6944704">]</span><span class="builtintype" id="6944705">byte</span><span class="op" id="6944709">(</span><span class="string" id="6944710">&#34;--myBoundary\r\n&#34;</span><span class="op" id="6944728">)</span><span class="op" id="6944729">)</span>&nbsp;<span class="op" id="6944731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944735"><a href="/mime/multipart/multipart_test.go.html#6944601">t</a></span><span class="op" id="6944736">.</span><span class="ident" id="6944737">Error</span><span class="op" id="6944742">(</span><span class="string" id="6944743">&#34;expected&#34;</span><span class="op" id="6944753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944756">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944759">if</span>&nbsp;<span class="op" id="6944762">!</span><span class="ident" id="6944763"><a href="/mime/multipart/multipart_test.go.html#6944618">mr</a></span><span class="op" id="6944765">.</span><span class="ident" id="6944766">isBoundaryDelimiterLine</span><span class="op" id="6944789">(</span><span class="op" id="6944790">[</span><span class="op" id="6944791">]</span><span class="builtintype" id="6944792">byte</span><span class="op" id="6944796">(</span><span class="string" id="6944797">&#34;--myBoundary&nbsp;\r\n&#34;</span><span class="op" id="6944816">)</span><span class="op" id="6944817">)</span>&nbsp;<span class="op" id="6944819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944823"><a href="/mime/multipart/multipart_test.go.html#6944601">t</a></span><span class="op" id="6944824">.</span><span class="ident" id="6944825">Error</span><span class="op" id="6944830">(</span><span class="string" id="6944831">&#34;expected&#34;</span><span class="op" id="6944841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944847">if</span>&nbsp;<span class="op" id="6944850">!</span><span class="ident" id="6944851"><a href="/mime/multipart/multipart_test.go.html#6944618">mr</a></span><span class="op" id="6944853">.</span><span class="ident" id="6944854">isBoundaryDelimiterLine</span><span class="op" id="6944877">(</span><span class="op" id="6944878">[</span><span class="op" id="6944879">]</span><span class="builtintype" id="6944880">byte</span><span class="op" id="6944884">(</span><span class="string" id="6944885">&#34;--myBoundary&nbsp;\n&#34;</span><span class="op" id="6944902">)</span><span class="op" id="6944903">)</span>&nbsp;<span class="op" id="6944905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6944909"><a href="/mime/multipart/multipart_test.go.html#6944601">t</a></span><span class="op" id="6944910">.</span><span class="ident" id="6944911">Error</span><span class="op" id="6944916">(</span><span class="string" id="6944917">&#34;expected&#34;</span><span class="op" id="6944927">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6944930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6944933">if</span>&nbsp;<span class="ident" id="6944936"><a href="/mime/multipart/multipart_test.go.html#6944618">mr</a></span><span class="op" id="6944938">.</span><span class="ident" id="6944939">isBoundaryDelimiterLine</span><span class="op" id="6944962">(</span><span class="op" id="6944963">[</span><span class="op" id="6944964">]</span><span class="builtintype" id="6944965">byte</span><span class="op" id="6944969">(</span><span class="string" id="6944970">&#34;--myBoundary&nbsp;bogus&nbsp;\n&#34;</span><span class="op" id="6944993">)</span><span class="op" id="6944994">)</span>&nbsp;<span class="op" id="6944996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945000"><a href="/mime/multipart/multipart_test.go.html#6944601">t</a></span><span class="op" id="6945001">.</span><span class="ident" id="6945002">Error</span><span class="op" id="6945007">(</span><span class="string" id="6945008">&#34;expected&nbsp;fail&#34;</span><span class="op" id="6945023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945029">if</span>&nbsp;<span class="ident" id="6945032"><a href="/mime/multipart/multipart_test.go.html#6944618">mr</a></span><span class="op" id="6945034">.</span><span class="ident" id="6945035">isBoundaryDelimiterLine</span><span class="op" id="6945058">(</span><span class="op" id="6945059">[</span><span class="op" id="6945060">]</span><span class="builtintype" id="6945061">byte</span><span class="op" id="6945065">(</span><span class="string" id="6945066">&#34;--myBoundary&nbsp;bogus--&#34;</span><span class="op" id="6945088">)</span><span class="op" id="6945089">)</span>&nbsp;<span class="op" id="6945091">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945095"><a href="/mime/multipart/multipart_test.go.html#6944601">t</a></span><span class="op" id="6945096">.</span><span class="ident" id="6945097">Error</span><span class="op" id="6945102">(</span><span class="string" id="6945103">&#34;expected&nbsp;fail&#34;</span><span class="op" id="6945118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945121">}</span><br>
<span class="lineno"></span><span class="op" id="6945123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945126">func</span>&nbsp;<span class="ident" id="6945131">escapeString</span><span class="op" id="6945143">(</span><span class="ident" id="6945144">v</span>&nbsp;<span class="builtintype" id="6945146">string</span><span class="op" id="6945152">)</span>&nbsp;<span class="builtintype" id="6945154">string</span>&nbsp;<span class="op" id="6945161">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945164">bytes</span><span class="op" id="6945169">,</span>&nbsp;<span class="ident" id="6945171">_</span>&nbsp;<span class="op" id="6945173">:=</span>&nbsp;<span class="ident" id="6945176"><a href="/mime/multipart/multipart_test.go.html#6944478">json</a></span><span class="op" id="6945180">.</span><span class="ident" id="6945181">Marshal</span><span class="op" id="6945188">(</span><span class="ident" id="6945189"><a href="/mime/multipart/multipart_test.go.html#6945144">v</a></span><span class="op" id="6945190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945193">return</span>&nbsp;<span class="builtintype" id="6945200">string</span><span class="op" id="6945206">(</span><span class="ident" id="6945207"><a href="/mime/multipart/multipart_test.go.html#6945164">bytes</a></span><span class="op" id="6945212">)</span><br>
<span class="lineno"></span><span class="op" id="6945214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945217">func</span>&nbsp;<span class="ident" id="6945222">expectEq</span><span class="op" id="6945230">(</span><span class="ident" id="6945231">t</span>&nbsp;<span class="op" id="6945233">*</span><span class="ident" id="6945234"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6945241">.</span><span class="ident" id="6945242">T</span><span class="op" id="6945243">,</span>&nbsp;<span class="ident" id="6945245">expected</span><span class="op" id="6945253">,</span>&nbsp;<span class="ident" id="6945255">actual</span><span class="op" id="6945261">,</span>&nbsp;<span class="ident" id="6945263">what</span>&nbsp;<span class="builtintype" id="6945268">string</span><span class="op" id="6945274">)</span>&nbsp;<span class="op" id="6945276">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945279">if</span>&nbsp;<span class="ident" id="6945282"><a href="/mime/multipart/multipart_test.go.html#6945245">expected</a></span>&nbsp;<span class="op" id="6945291">==</span>&nbsp;<span class="ident" id="6945294"><a href="/mime/multipart/multipart_test.go.html#6945255">actual</a></span>&nbsp;<span class="op" id="6945301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945305">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945316"><a href="/mime/multipart/multipart_test.go.html#6945231">t</a></span><span class="op" id="6945317">.</span><span class="ident" id="6945318">Errorf</span><span class="op" id="6945324">(</span><span class="string" id="6945325">&#34;Unexpected&nbsp;value&nbsp;for&nbsp;%s;&nbsp;got&nbsp;%s&nbsp;(len&nbsp;%d)&nbsp;but&nbsp;expected:&nbsp;%s&nbsp;(len&nbsp;%d)&#34;</span><span class="op" id="6945393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945397"><a href="/mime/multipart/multipart_test.go.html#6945263">what</a></span><span class="op" id="6945401">,</span>&nbsp;<span class="ident" id="6945403"><a href="/mime/multipart/multipart_test.go.html#6945131">escapeString</a></span><span class="op" id="6945415">(</span><span class="ident" id="6945416"><a href="/mime/multipart/multipart_test.go.html#6945255">actual</a></span><span class="op" id="6945422">)</span><span class="op" id="6945423">,</span>&nbsp;<span class="builtinfunc" id="6945425">len</span><span class="op" id="6945428">(</span><span class="ident" id="6945429"><a href="/mime/multipart/multipart_test.go.html#6945255">actual</a></span><span class="op" id="6945435">)</span><span class="op" id="6945436">,</span>&nbsp;<span class="ident" id="6945438"><a href="/mime/multipart/multipart_test.go.html#6945131">escapeString</a></span><span class="op" id="6945450">(</span><span class="ident" id="6945451"><a href="/mime/multipart/multipart_test.go.html#6945245">expected</a></span><span class="op" id="6945459">)</span><span class="op" id="6945460">,</span>&nbsp;<span class="builtinfunc" id="6945462">len</span><span class="op" id="6945465">(</span><span class="ident" id="6945466"><a href="/mime/multipart/multipart_test.go.html#6945245">expected</a></span><span class="op" id="6945474">)</span><span class="op" id="6945475">)</span><br>
<span class="lineno">50</span><span class="op" id="6945477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6945480">func</span>&nbsp;<span class="ident" id="6945485">TestNameAccessors</span><span class="op" id="6945502">(</span><span class="ident" id="6945503">t</span>&nbsp;<span class="op" id="6945505">*</span><span class="ident" id="6945506"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6945513">.</span><span class="ident" id="6945514">T</span><span class="op" id="6945515">)</span>&nbsp;<span class="op" id="6945517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945520">tests</span>&nbsp;<span class="op" id="6945526">:=</span>&nbsp;<span class="op" id="6945529">[</span><span class="op" id="6945530">...</span><span class="op" id="6945533">]</span><span class="op" id="6945534">[</span><span class="num" id="6945535">3</span><span class="op" id="6945536">]</span><span class="builtintype" id="6945537">string</span><span class="op" id="6945543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945547">{</span><span class="string" id="6945548">`form-data;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="6945571">,</span>&nbsp;<span class="string" id="6945573">&#34;foo&#34;</span><span class="op" id="6945578">,</span>&nbsp;<span class="string" id="6945580">&#34;&#34;</span><span class="op" id="6945582">}</span><span class="op" id="6945583">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945587">{</span><span class="string" id="6945588">`&nbsp;form-data&nbsp;;&nbsp;name=foo`</span><span class="op" id="6945611">,</span>&nbsp;<span class="string" id="6945613">&#34;foo&#34;</span><span class="op" id="6945618">,</span>&nbsp;<span class="string" id="6945620">&#34;&#34;</span><span class="op" id="6945622">}</span><span class="op" id="6945623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945627">{</span><span class="string" id="6945628">`FORM-DATA;name=&#34;foo&#34;`</span><span class="op" id="6945650">,</span>&nbsp;<span class="string" id="6945652">&#34;foo&#34;</span><span class="op" id="6945657">,</span>&nbsp;<span class="string" id="6945659">&#34;&#34;</span><span class="op" id="6945661">}</span><span class="op" id="6945662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945666">{</span><span class="string" id="6945667">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="6945692">,</span>&nbsp;<span class="string" id="6945694">&#34;foo&#34;</span><span class="op" id="6945699">,</span>&nbsp;<span class="string" id="6945701">&#34;&#34;</span><span class="op" id="6945703">}</span><span class="op" id="6945704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945708">{</span><span class="string" id="6945709">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="6945734">,</span>&nbsp;<span class="string" id="6945736">&#34;foo&#34;</span><span class="op" id="6945741">,</span>&nbsp;<span class="string" id="6945743">&#34;&#34;</span><span class="op" id="6945745">}</span><span class="op" id="6945746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945750">{</span><span class="string" id="6945751">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=foo`</span><span class="op" id="6945774">,</span>&nbsp;<span class="string" id="6945776">&#34;foo&#34;</span><span class="op" id="6945781">,</span>&nbsp;<span class="string" id="6945783">&#34;&#34;</span><span class="op" id="6945785">}</span><span class="op" id="6945786">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945790">{</span><span class="string" id="6945791">`&nbsp;FORM-DATA&nbsp;;&nbsp;filename=&#34;foo.txt&#34;;&nbsp;name=foo;&nbsp;baz=quux`</span><span class="op" id="6945844">,</span>&nbsp;<span class="string" id="6945846">&#34;foo&#34;</span><span class="op" id="6945851">,</span>&nbsp;<span class="string" id="6945853">&#34;foo.txt&#34;</span><span class="op" id="6945862">}</span><span class="op" id="6945863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945867">{</span><span class="string" id="6945868">`&nbsp;not-form-data&nbsp;;&nbsp;filename=&#34;bar.txt&#34;;&nbsp;name=foo;&nbsp;baz=quux`</span><span class="op" id="6945925">,</span>&nbsp;<span class="string" id="6945927">&#34;&#34;</span><span class="op" id="6945929">,</span>&nbsp;<span class="string" id="6945931">&#34;bar.txt&#34;</span><span class="op" id="6945940">}</span><span class="op" id="6945941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6945944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6945947">for</span>&nbsp;<span class="ident" id="6945951">i</span><span class="op" id="6945952">,</span>&nbsp;<span class="ident" id="6945954">test</span>&nbsp;<span class="op" id="6945959">:=</span>&nbsp;<span class="keyword" id="6945962">range</span>&nbsp;<span class="ident" id="6945968"><a href="/mime/multipart/multipart_test.go.html#6945520">tests</a></span>&nbsp;<span class="op" id="6945974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6945978">p</span>&nbsp;<span class="op" id="6945980">:=</span>&nbsp;<span class="op" id="6945983">&amp;</span><span class="ident" id="6945984"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="6945988">{</span><span class="ident" id="6945989">Header</span><span class="op" id="6945995">:</span>&nbsp;<span class="builtinfunc" id="6945997">make</span><span class="op" id="6946001">(</span><span class="keyword" id="6946002">map</span><span class="op" id="6946005">[</span><span class="builtintype" id="6946006">string</span><span class="op" id="6946012">]</span><span class="op" id="6946013">[</span><span class="op" id="6946014">]</span><span class="builtintype" id="6946015">string</span><span class="op" id="6946021">)</span><span class="op" id="6946022">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946026"><a href="/mime/multipart/multipart_test.go.html#6945978">p</a></span><span class="op" id="6946027">.</span><span class="ident" id="6946028">Header</span><span class="op" id="6946034">.</span><span class="ident" id="6946035">Set</span><span class="op" id="6946038">(</span><span class="string" id="6946039">&#34;Content-Disposition&#34;</span><span class="op" id="6946060">,</span>&nbsp;<span class="ident" id="6946062"><a href="/mime/multipart/multipart_test.go.html#6945954">test</a></span><span class="op" id="6946066">[</span><span class="num" id="6946067">0</span><span class="op" id="6946068">]</span><span class="op" id="6946069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946073">if</span>&nbsp;<span class="ident" id="6946076">g</span><span class="op" id="6946077">,</span>&nbsp;<span class="ident" id="6946079">e</span>&nbsp;<span class="op" id="6946081">:=</span>&nbsp;<span class="ident" id="6946084"><a href="/mime/multipart/multipart_test.go.html#6945978">p</a></span><span class="op" id="6946085">.</span><span class="ident" id="6946086">FormName</span><span class="op" id="6946094">(</span><span class="op" id="6946095">)</span><span class="op" id="6946096">,</span>&nbsp;<span class="ident" id="6946098"><a href="/mime/multipart/multipart_test.go.html#6945954">test</a></span><span class="op" id="6946102">[</span><span class="num" id="6946103">1</span><span class="op" id="6946104">]</span><span class="op" id="6946105">;</span>&nbsp;<span class="ident" id="6946107"><a href="/mime/multipart/multipart_test.go.html#6946076">g</a></span>&nbsp;<span class="op" id="6946109">!=</span>&nbsp;<span class="ident" id="6946112"><a href="/mime/multipart/multipart_test.go.html#6946079">e</a></span>&nbsp;<span class="op" id="6946114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946119"><a href="/mime/multipart/multipart_test.go.html#6945503">t</a></span><span class="op" id="6946120">.</span><span class="ident" id="6946121">Errorf</span><span class="op" id="6946127">(</span><span class="string" id="6946128">&#34;test&nbsp;%d:&nbsp;FormName()&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6946163">,</span>&nbsp;<span class="ident" id="6946165"><a href="/mime/multipart/multipart_test.go.html#6945951">i</a></span><span class="op" id="6946166">,</span>&nbsp;<span class="ident" id="6946168"><a href="/mime/multipart/multipart_test.go.html#6946076">g</a></span><span class="op" id="6946169">,</span>&nbsp;<span class="ident" id="6946171"><a href="/mime/multipart/multipart_test.go.html#6946079">e</a></span><span class="op" id="6946172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946180">if</span>&nbsp;<span class="ident" id="6946183">g</span><span class="op" id="6946184">,</span>&nbsp;<span class="ident" id="6946186">e</span>&nbsp;<span class="op" id="6946188">:=</span>&nbsp;<span class="ident" id="6946191"><a href="/mime/multipart/multipart_test.go.html#6945978">p</a></span><span class="op" id="6946192">.</span><span class="ident" id="6946193">FileName</span><span class="op" id="6946201">(</span><span class="op" id="6946202">)</span><span class="op" id="6946203">,</span>&nbsp;<span class="ident" id="6946205"><a href="/mime/multipart/multipart_test.go.html#6945954">test</a></span><span class="op" id="6946209">[</span><span class="num" id="6946210">2</span><span class="op" id="6946211">]</span><span class="op" id="6946212">;</span>&nbsp;<span class="ident" id="6946214"><a href="/mime/multipart/multipart_test.go.html#6946183">g</a></span>&nbsp;<span class="op" id="6946216">!=</span>&nbsp;<span class="ident" id="6946219"><a href="/mime/multipart/multipart_test.go.html#6946186">e</a></span>&nbsp;<span class="op" id="6946221">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946226"><a href="/mime/multipart/multipart_test.go.html#6945503">t</a></span><span class="op" id="6946227">.</span><span class="ident" id="6946228">Errorf</span><span class="op" id="6946234">(</span><span class="string" id="6946235">&#34;test&nbsp;%d:&nbsp;FileName()&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6946270">,</span>&nbsp;<span class="ident" id="6946272"><a href="/mime/multipart/multipart_test.go.html#6945951">i</a></span><span class="op" id="6946273">,</span>&nbsp;<span class="ident" id="6946275"><a href="/mime/multipart/multipart_test.go.html#6946183">g</a></span><span class="op" id="6946276">,</span>&nbsp;<span class="ident" id="6946278"><a href="/mime/multipart/multipart_test.go.html#6946186">e</a></span><span class="op" id="6946279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6946286">}</span><br>
<span class="lineno"></span><span class="op" id="6946288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6946291">var</span>&nbsp;<span class="ident" id="6946295">longLine</span>&nbsp;<span class="op" id="6946304">=</span>&nbsp;<span class="ident" id="6946306"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6946313">.</span><span class="ident" id="6946314">Repeat</span><span class="op" id="6946320">(</span><span class="string" id="6946321">&#34;\n\n\r\r\r\n\r\000&#34;</span><span class="op" id="6946341">,</span>&nbsp;<span class="op" id="6946343">(</span><span class="num" id="6946344">1</span><span class="op" id="6946345">&lt;&lt;</span><span class="num" id="6946347">20</span><span class="op" id="6946349">)</span><span class="op" id="6946350">/</span><span class="num" id="6946351">8</span><span class="op" id="6946352">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6946355">func</span>&nbsp;<span class="ident" id="6946360">testMultipartBody</span><span class="op" id="6946377">(</span><span class="ident" id="6946378">sep</span>&nbsp;<span class="builtintype" id="6946382">string</span><span class="op" id="6946388">)</span>&nbsp;<span class="builtintype" id="6946390">string</span>&nbsp;<span class="op" id="6946397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946400">testBody</span>&nbsp;<span class="op" id="6946409">:=</span>&nbsp;<span class="string" id="6946412">`<br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno">80</span>--MyBoundary<br>
<span class="lineno"></span>Header1:&nbsp;value1<br>
<span class="lineno"></span>HEADER2:&nbsp;value2<br>
<span class="lineno"></span>foo-bar:&nbsp;baz<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>My&nbsp;value<br>
<span class="lineno"></span>The&nbsp;end.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>name:&nbsp;bigsection<br>
<span class="lineno"></span><br>
<span class="lineno">90</span>[longline]<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Header1:&nbsp;value1b<br>
<span class="lineno"></span>HEADER2:&nbsp;value2b<br>
<span class="lineno"></span>foo-bar:&nbsp;bazb<br>
<span class="lineno">95</span><br>
<span class="lineno"></span>Line&nbsp;1<br>
<span class="lineno"></span>Line&nbsp;2<br>
<span class="lineno"></span>Line&nbsp;3&nbsp;ends&nbsp;in&nbsp;a&nbsp;newline,&nbsp;but&nbsp;just&nbsp;one.<br>
<span class="lineno"></span><br>
<span class="lineno">100</span>--MyBoundary<br>
<span class="lineno"></span><br>
<span class="lineno"></span>never&nbsp;read&nbsp;data<br>
<span class="lineno"></span>--MyBoundary--<br>
<span class="lineno"></span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>useless&nbsp;trailer<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946769"><a href="/mime/multipart/multipart_test.go.html#6946400">testBody</a></span>&nbsp;<span class="op" id="6946778">=</span>&nbsp;<span class="ident" id="6946780"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6946787">.</span><span class="ident" id="6946788">Replace</span><span class="op" id="6946795">(</span><span class="ident" id="6946796"><a href="/mime/multipart/multipart_test.go.html#6946400">testBody</a></span><span class="op" id="6946804">,</span>&nbsp;<span class="string" id="6946806">&#34;\n&#34;</span><span class="op" id="6946810">,</span>&nbsp;<span class="ident" id="6946812"><a href="/mime/multipart/multipart_test.go.html#6946378">sep</a></span><span class="op" id="6946815">,</span>&nbsp;<span class="op" id="6946817">-</span><span class="num" id="6946818">1</span><span class="op" id="6946819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6946822">return</span>&nbsp;<span class="ident" id="6946829"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6946836">.</span><span class="ident" id="6946837">Replace</span><span class="op" id="6946844">(</span><span class="ident" id="6946845"><a href="/mime/multipart/multipart_test.go.html#6946400">testBody</a></span><span class="op" id="6946853">,</span>&nbsp;<span class="string" id="6946855">&#34;[longline]&#34;</span><span class="op" id="6946867">,</span>&nbsp;<span class="ident" id="6946869"><a href="/mime/multipart/multipart_test.go.html#6946295">longLine</a></span><span class="op" id="6946877">,</span>&nbsp;<span class="num" id="6946879">1</span><span class="op" id="6946880">)</span><br>
<span class="lineno">110</span><span class="op" id="6946882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6946885">func</span>&nbsp;<span class="ident" id="6946890">TestMultipart</span><span class="op" id="6946903">(</span><span class="ident" id="6946904">t</span>&nbsp;<span class="op" id="6946906">*</span><span class="ident" id="6946907"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6946914">.</span><span class="ident" id="6946915">T</span><span class="op" id="6946916">)</span>&nbsp;<span class="op" id="6946918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946921">bodyReader</span>&nbsp;<span class="op" id="6946932">:=</span>&nbsp;<span class="ident" id="6946935"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6946942">.</span><span class="ident" id="6946943">NewReader</span><span class="op" id="6946952">(</span><span class="ident" id="6946953"><a href="/mime/multipart/multipart_test.go.html#6946360">testMultipartBody</a></span><span class="op" id="6946970">(</span><span class="string" id="6946971">&#34;\r\n&#34;</span><span class="op" id="6946977">)</span><span class="op" id="6946978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6946981"><a href="/mime/multipart/multipart_test.go.html#6947326">testMultipart</a></span><span class="op" id="6946994">(</span><span class="ident" id="6946995"><a href="/mime/multipart/multipart_test.go.html#6946904">t</a></span><span class="op" id="6946996">,</span>&nbsp;<span class="ident" id="6946998"><a href="/mime/multipart/multipart_test.go.html#6946921">bodyReader</a></span><span class="op" id="6947008">,</span>&nbsp;<span class="builtintype" id="6947010">false</span><span class="op" id="6947015">)</span><br>
<span class="lineno">115</span><span class="op" id="6947017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6947020">func</span>&nbsp;<span class="ident" id="6947025">TestMultipartOnlyNewlines</span><span class="op" id="6947050">(</span><span class="ident" id="6947051">t</span>&nbsp;<span class="op" id="6947053">*</span><span class="ident" id="6947054"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6947061">.</span><span class="ident" id="6947062">T</span><span class="op" id="6947063">)</span>&nbsp;<span class="op" id="6947065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947068">bodyReader</span>&nbsp;<span class="op" id="6947079">:=</span>&nbsp;<span class="ident" id="6947082"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6947089">.</span><span class="ident" id="6947090">NewReader</span><span class="op" id="6947099">(</span><span class="ident" id="6947100"><a href="/mime/multipart/multipart_test.go.html#6946360">testMultipartBody</a></span><span class="op" id="6947117">(</span><span class="string" id="6947118">&#34;\n&#34;</span><span class="op" id="6947122">)</span><span class="op" id="6947123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947126"><a href="/mime/multipart/multipart_test.go.html#6947326">testMultipart</a></span><span class="op" id="6947139">(</span><span class="ident" id="6947140"><a href="/mime/multipart/multipart_test.go.html#6947051">t</a></span><span class="op" id="6947141">,</span>&nbsp;<span class="ident" id="6947143"><a href="/mime/multipart/multipart_test.go.html#6947068">bodyReader</a></span><span class="op" id="6947153">,</span>&nbsp;<span class="builtintype" id="6947155">true</span><span class="op" id="6947159">)</span><br>
<span class="lineno">120</span><span class="op" id="6947161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6947164">func</span>&nbsp;<span class="ident" id="6947169">TestMultipartSlowInput</span><span class="op" id="6947191">(</span><span class="ident" id="6947192">t</span>&nbsp;<span class="op" id="6947194">*</span><span class="ident" id="6947195"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6947202">.</span><span class="ident" id="6947203">T</span><span class="op" id="6947204">)</span>&nbsp;<span class="op" id="6947206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947209">bodyReader</span>&nbsp;<span class="op" id="6947220">:=</span>&nbsp;<span class="ident" id="6947223"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6947230">.</span><span class="ident" id="6947231">NewReader</span><span class="op" id="6947240">(</span><span class="ident" id="6947241"><a href="/mime/multipart/multipart_test.go.html#6946360">testMultipartBody</a></span><span class="op" id="6947258">(</span><span class="string" id="6947259">&#34;\r\n&#34;</span><span class="op" id="6947265">)</span><span class="op" id="6947266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947269"><a href="/mime/multipart/multipart_test.go.html#6947326">testMultipart</a></span><span class="op" id="6947282">(</span><span class="ident" id="6947283"><a href="/mime/multipart/multipart_test.go.html#6947192">t</a></span><span class="op" id="6947284">,</span>&nbsp;<span class="op" id="6947286">&amp;</span><span class="ident" id="6947287"><a href="/mime/multipart/multipart_test.go.html#6951861">slowReader</a></span><span class="op" id="6947297">{</span><span class="ident" id="6947298"><a href="/mime/multipart/multipart_test.go.html#6947209">bodyReader</a></span><span class="op" id="6947308">}</span><span class="op" id="6947309">,</span>&nbsp;<span class="builtintype" id="6947311">false</span><span class="op" id="6947316">)</span><br>
<span class="lineno">125</span><span class="op" id="6947318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6947321">func</span>&nbsp;<span class="ident" id="6947326">testMultipart</span><span class="op" id="6947339">(</span><span class="ident" id="6947340">t</span>&nbsp;<span class="op" id="6947342">*</span><span class="ident" id="6947343"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6947350">.</span><span class="ident" id="6947351">T</span><span class="op" id="6947352">,</span>&nbsp;<span class="ident" id="6947354">r</span>&nbsp;<span class="ident" id="6947356"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6947358">.</span><span class="ident" id="6947359">Reader</span><span class="op" id="6947365">,</span>&nbsp;<span class="ident" id="6947367">onlyNewlines</span>&nbsp;<span class="builtintype" id="6947380">bool</span><span class="op" id="6947384">)</span>&nbsp;<span class="op" id="6947386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947389">reader</span>&nbsp;<span class="op" id="6947396">:=</span>&nbsp;<span class="ident" id="6947399"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6947408">(</span><span class="ident" id="6947409"><a href="/mime/multipart/multipart_test.go.html#6947354">r</a></span><span class="op" id="6947410">,</span>&nbsp;<span class="string" id="6947412">&#34;MyBoundary&#34;</span><span class="op" id="6947424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947427">buf</span>&nbsp;<span class="op" id="6947431">:=</span>&nbsp;<span class="builtinfunc" id="6947434">new</span><span class="op" id="6947437">(</span><span class="ident" id="6947438"><a href="/mime/multipart/multipart_test.go.html#6944469">bytes</a></span><span class="op" id="6947443">.</span><span class="ident" id="6947444">Buffer</span><span class="op" id="6947450">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6947454">//&nbsp;Part1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947464">part</span><span class="op" id="6947468">,</span>&nbsp;<span class="ident" id="6947470">err</span>&nbsp;<span class="op" id="6947474">:=</span>&nbsp;<span class="ident" id="6947477"><a href="/mime/multipart/multipart_test.go.html#6947389">reader</a></span><span class="op" id="6947483">.</span><span class="ident" id="6947484">NextPart</span><span class="op" id="6947492">(</span><span class="op" id="6947493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947496">if</span>&nbsp;<span class="ident" id="6947499"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span>&nbsp;<span class="op" id="6947504">==</span>&nbsp;<span class="ident" id="6947507">nil</span>&nbsp;<span class="op" id="6947511">||</span>&nbsp;<span class="ident" id="6947514"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6947518">!=</span>&nbsp;<span class="ident" id="6947521">nil</span>&nbsp;<span class="op" id="6947525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947529"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6947530">.</span><span class="ident" id="6947531">Error</span><span class="op" id="6947536">(</span><span class="string" id="6947537">&#34;Expected&nbsp;part1&#34;</span><span class="op" id="6947553">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947557">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947568">if</span>&nbsp;<span class="ident" id="6947571">x</span>&nbsp;<span class="op" id="6947573">:=</span>&nbsp;<span class="ident" id="6947576"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6947580">.</span><span class="ident" id="6947581">Header</span><span class="op" id="6947587">.</span><span class="ident" id="6947588">Get</span><span class="op" id="6947591">(</span><span class="string" id="6947592">&#34;Header1&#34;</span><span class="op" id="6947601">)</span><span class="op" id="6947602">;</span>&nbsp;<span class="ident" id="6947604"><a href="/mime/multipart/multipart_test.go.html#6947571">x</a></span>&nbsp;<span class="op" id="6947606">!=</span>&nbsp;<span class="string" id="6947609">&#34;value1&#34;</span>&nbsp;<span class="op" id="6947618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947622"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6947623">.</span><span class="ident" id="6947624">Errorf</span><span class="op" id="6947630">(</span><span class="string" id="6947631">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6947666">,</span>&nbsp;<span class="string" id="6947668">&#34;Header1&#34;</span><span class="op" id="6947677">,</span>&nbsp;<span class="ident" id="6947679"><a href="/mime/multipart/multipart_test.go.html#6947571">x</a></span><span class="op" id="6947680">,</span>&nbsp;<span class="string" id="6947682">&#34;value1&#34;</span><span class="op" id="6947690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947693">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947696">if</span>&nbsp;<span class="ident" id="6947699">x</span>&nbsp;<span class="op" id="6947701">:=</span>&nbsp;<span class="ident" id="6947704"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6947708">.</span><span class="ident" id="6947709">Header</span><span class="op" id="6947715">.</span><span class="ident" id="6947716">Get</span><span class="op" id="6947719">(</span><span class="string" id="6947720">&#34;foo-bar&#34;</span><span class="op" id="6947729">)</span><span class="op" id="6947730">;</span>&nbsp;<span class="ident" id="6947732"><a href="/mime/multipart/multipart_test.go.html#6947699">x</a></span>&nbsp;<span class="op" id="6947734">!=</span>&nbsp;<span class="string" id="6947737">&#34;baz&#34;</span>&nbsp;<span class="op" id="6947743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947747"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6947748">.</span><span class="ident" id="6947749">Errorf</span><span class="op" id="6947755">(</span><span class="string" id="6947756">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6947791">,</span>&nbsp;<span class="string" id="6947793">&#34;foo-bar&#34;</span><span class="op" id="6947802">,</span>&nbsp;<span class="ident" id="6947804"><a href="/mime/multipart/multipart_test.go.html#6947699">x</a></span><span class="op" id="6947805">,</span>&nbsp;<span class="string" id="6947807">&#34;baz&#34;</span><span class="op" id="6947812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947818">if</span>&nbsp;<span class="ident" id="6947821">x</span>&nbsp;<span class="op" id="6947823">:=</span>&nbsp;<span class="ident" id="6947826"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6947830">.</span><span class="ident" id="6947831">Header</span><span class="op" id="6947837">.</span><span class="ident" id="6947838">Get</span><span class="op" id="6947841">(</span><span class="string" id="6947842">&#34;Foo-Bar&#34;</span><span class="op" id="6947851">)</span><span class="op" id="6947852">;</span>&nbsp;<span class="ident" id="6947854"><a href="/mime/multipart/multipart_test.go.html#6947821">x</a></span>&nbsp;<span class="op" id="6947856">!=</span>&nbsp;<span class="string" id="6947859">&#34;baz&#34;</span>&nbsp;<span class="op" id="6947865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947869"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6947870">.</span><span class="ident" id="6947871">Errorf</span><span class="op" id="6947877">(</span><span class="string" id="6947878">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6947913">,</span>&nbsp;<span class="string" id="6947915">&#34;Foo-Bar&#34;</span><span class="op" id="6947924">,</span>&nbsp;<span class="ident" id="6947926"><a href="/mime/multipart/multipart_test.go.html#6947821">x</a></span><span class="op" id="6947927">,</span>&nbsp;<span class="string" id="6947929">&#34;baz&#34;</span><span class="op" id="6947934">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6947937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6947940"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6947943">.</span><span class="ident" id="6947944">Reset</span><span class="op" id="6947949">(</span><span class="op" id="6947950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6947953">if</span>&nbsp;<span class="ident" id="6947956">_</span><span class="op" id="6947957">,</span>&nbsp;<span class="ident" id="6947959">err</span>&nbsp;<span class="op" id="6947963">:=</span>&nbsp;<span class="ident" id="6947966"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6947968">.</span><span class="ident" id="6947969">Copy</span><span class="op" id="6947973">(</span><span class="ident" id="6947974"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6947977">,</span>&nbsp;<span class="ident" id="6947979"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6947983">)</span><span class="op" id="6947984">;</span>&nbsp;<span class="ident" id="6947986"><a href="/mime/multipart/multipart_test.go.html#6947959">err</a></span>&nbsp;<span class="op" id="6947990">!=</span>&nbsp;<span class="ident" id="6947993">nil</span>&nbsp;<span class="op" id="6947997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948001"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948002">.</span><span class="ident" id="6948003">Errorf</span><span class="op" id="6948009">(</span><span class="string" id="6948010">&#34;part&nbsp;1&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="6948027">,</span>&nbsp;<span class="ident" id="6948029"><a href="/mime/multipart/multipart_test.go.html#6947959">err</a></span><span class="op" id="6948032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948035">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948039">adjustNewlines</span>&nbsp;<span class="op" id="6948054">:=</span>&nbsp;<span class="keyword" id="6948057">func</span><span class="op" id="6948061">(</span><span class="ident" id="6948062">s</span>&nbsp;<span class="builtintype" id="6948064">string</span><span class="op" id="6948070">)</span>&nbsp;<span class="builtintype" id="6948072">string</span>&nbsp;<span class="op" id="6948079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948083">if</span>&nbsp;<span class="ident" id="6948086"><a href="/mime/multipart/multipart_test.go.html#6947367">onlyNewlines</a></span>&nbsp;<span class="op" id="6948099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948104">return</span>&nbsp;<span class="ident" id="6948111"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6948118">.</span><span class="ident" id="6948119">Replace</span><span class="op" id="6948126">(</span><span class="ident" id="6948127"><a href="/mime/multipart/multipart_test.go.html#6948062">s</a></span><span class="op" id="6948128">,</span>&nbsp;<span class="string" id="6948130">&#34;\r\n&#34;</span><span class="op" id="6948136">,</span>&nbsp;<span class="string" id="6948138">&#34;\n&#34;</span><span class="op" id="6948142">,</span>&nbsp;<span class="op" id="6948144">-</span><span class="num" id="6948145">1</span><span class="op" id="6948146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948150">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948154">return</span>&nbsp;<span class="ident" id="6948161"><a href="/mime/multipart/multipart_test.go.html#6948062">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948168"><a href="/mime/multipart/multipart_test.go.html#6945222">expectEq</a></span><span class="op" id="6948176">(</span><span class="ident" id="6948177"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948178">,</span>&nbsp;<span class="ident" id="6948180"><a href="/mime/multipart/multipart_test.go.html#6948039">adjustNewlines</a></span><span class="op" id="6948194">(</span><span class="string" id="6948195">&#34;My&nbsp;value\r\nThe&nbsp;end.&#34;</span><span class="op" id="6948217">)</span><span class="op" id="6948218">,</span>&nbsp;<span class="ident" id="6948220"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6948223">.</span><span class="ident" id="6948224">String</span><span class="op" id="6948230">(</span><span class="op" id="6948231">)</span><span class="op" id="6948232">,</span>&nbsp;<span class="string" id="6948234">&#34;Value&nbsp;of&nbsp;first&nbsp;part&#34;</span><span class="op" id="6948255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6948259">//&nbsp;Part2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948269"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6948273">,</span>&nbsp;<span class="ident" id="6948275"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6948279">=</span>&nbsp;<span class="ident" id="6948281"><a href="/mime/multipart/multipart_test.go.html#6947389">reader</a></span><span class="op" id="6948287">.</span><span class="ident" id="6948288">NextPart</span><span class="op" id="6948296">(</span><span class="op" id="6948297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948300">if</span>&nbsp;<span class="ident" id="6948303"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6948307">!=</span>&nbsp;<span class="ident" id="6948310">nil</span>&nbsp;<span class="op" id="6948314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948318"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948319">.</span><span class="ident" id="6948320">Fatalf</span><span class="op" id="6948326">(</span><span class="string" id="6948327">&#34;Expected&nbsp;part2;&nbsp;got:&nbsp;%v&#34;</span><span class="op" id="6948352">,</span>&nbsp;<span class="ident" id="6948354"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span><span class="op" id="6948357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948361">return</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948372">if</span>&nbsp;<span class="ident" id="6948375">e</span><span class="op" id="6948376">,</span>&nbsp;<span class="ident" id="6948378">g</span>&nbsp;<span class="op" id="6948380">:=</span>&nbsp;<span class="string" id="6948383">&#34;bigsection&#34;</span><span class="op" id="6948395">,</span>&nbsp;<span class="ident" id="6948397"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6948401">.</span><span class="ident" id="6948402">Header</span><span class="op" id="6948408">.</span><span class="ident" id="6948409">Get</span><span class="op" id="6948412">(</span><span class="string" id="6948413">&#34;name&#34;</span><span class="op" id="6948419">)</span><span class="op" id="6948420">;</span>&nbsp;<span class="ident" id="6948422"><a href="/mime/multipart/multipart_test.go.html#6948375">e</a></span>&nbsp;<span class="op" id="6948424">!=</span>&nbsp;<span class="ident" id="6948427"><a href="/mime/multipart/multipart_test.go.html#6948378">g</a></span>&nbsp;<span class="op" id="6948429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948433"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948434">.</span><span class="ident" id="6948435">Errorf</span><span class="op" id="6948441">(</span><span class="string" id="6948442">&#34;part2&#39;s&nbsp;name&nbsp;header:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6948484">,</span>&nbsp;<span class="ident" id="6948486"><a href="/mime/multipart/multipart_test.go.html#6948375">e</a></span><span class="op" id="6948487">,</span>&nbsp;<span class="ident" id="6948489"><a href="/mime/multipart/multipart_test.go.html#6948378">g</a></span><span class="op" id="6948490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948496"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6948499">.</span><span class="ident" id="6948500">Reset</span><span class="op" id="6948505">(</span><span class="op" id="6948506">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948509">if</span>&nbsp;<span class="ident" id="6948512">_</span><span class="op" id="6948513">,</span>&nbsp;<span class="ident" id="6948515">err</span>&nbsp;<span class="op" id="6948519">:=</span>&nbsp;<span class="ident" id="6948522"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6948524">.</span><span class="ident" id="6948525">Copy</span><span class="op" id="6948529">(</span><span class="ident" id="6948530"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6948533">,</span>&nbsp;<span class="ident" id="6948535"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6948539">)</span><span class="op" id="6948540">;</span>&nbsp;<span class="ident" id="6948542"><a href="/mime/multipart/multipart_test.go.html#6948515">err</a></span>&nbsp;<span class="op" id="6948546">!=</span>&nbsp;<span class="ident" id="6948549">nil</span>&nbsp;<span class="op" id="6948553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948557"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948558">.</span><span class="ident" id="6948559">Errorf</span><span class="op" id="6948565">(</span><span class="string" id="6948566">&#34;part&nbsp;2&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="6948583">,</span>&nbsp;<span class="ident" id="6948585"><a href="/mime/multipart/multipart_test.go.html#6948515">err</a></span><span class="op" id="6948588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948594">s</span>&nbsp;<span class="op" id="6948596">:=</span>&nbsp;<span class="ident" id="6948599"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6948602">.</span><span class="ident" id="6948603">String</span><span class="op" id="6948609">(</span><span class="op" id="6948610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948613">if</span>&nbsp;<span class="builtinfunc" id="6948616">len</span><span class="op" id="6948619">(</span><span class="ident" id="6948620"><a href="/mime/multipart/multipart_test.go.html#6948594">s</a></span><span class="op" id="6948621">)</span>&nbsp;<span class="op" id="6948623">!=</span>&nbsp;<span class="builtinfunc" id="6948626">len</span><span class="op" id="6948629">(</span><span class="ident" id="6948630"><a href="/mime/multipart/multipart_test.go.html#6946295">longLine</a></span><span class="op" id="6948638">)</span>&nbsp;<span class="op" id="6948640">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948644"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948645">.</span><span class="ident" id="6948646">Errorf</span><span class="op" id="6948652">(</span><span class="string" id="6948653">&#34;part2&nbsp;body&nbsp;expected&nbsp;long&nbsp;line&nbsp;of&nbsp;length&nbsp;%d;&nbsp;got&nbsp;length&nbsp;%d&#34;</span><span class="op" id="6948712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6948717">len</span><span class="op" id="6948720">(</span><span class="ident" id="6948721"><a href="/mime/multipart/multipart_test.go.html#6946295">longLine</a></span><span class="op" id="6948729">)</span><span class="op" id="6948730">,</span>&nbsp;<span class="builtinfunc" id="6948732">len</span><span class="op" id="6948735">(</span><span class="ident" id="6948736"><a href="/mime/multipart/multipart_test.go.html#6948594">s</a></span><span class="op" id="6948737">)</span><span class="op" id="6948738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948744">if</span>&nbsp;<span class="ident" id="6948747"><a href="/mime/multipart/multipart_test.go.html#6948594">s</a></span>&nbsp;<span class="op" id="6948749">!=</span>&nbsp;<span class="ident" id="6948752"><a href="/mime/multipart/multipart_test.go.html#6946295">longLine</a></span>&nbsp;<span class="op" id="6948761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948765"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948766">.</span><span class="ident" id="6948767">Errorf</span><span class="op" id="6948773">(</span><span class="string" id="6948774">&#34;part2&nbsp;long&nbsp;body&nbsp;didn&#39;t&nbsp;match&#34;</span><span class="op" id="6948804">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6948811">//&nbsp;Part3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948821"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6948825">,</span>&nbsp;<span class="ident" id="6948827"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6948831">=</span>&nbsp;<span class="ident" id="6948833"><a href="/mime/multipart/multipart_test.go.html#6947389">reader</a></span><span class="op" id="6948839">.</span><span class="ident" id="6948840">NextPart</span><span class="op" id="6948848">(</span><span class="op" id="6948849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948852">if</span>&nbsp;<span class="ident" id="6948855"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span>&nbsp;<span class="op" id="6948860">==</span>&nbsp;<span class="ident" id="6948863">nil</span>&nbsp;<span class="op" id="6948867">||</span>&nbsp;<span class="ident" id="6948870"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6948874">!=</span>&nbsp;<span class="ident" id="6948877">nil</span>&nbsp;<span class="op" id="6948881">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948885"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948886">.</span><span class="ident" id="6948887">Error</span><span class="op" id="6948892">(</span><span class="string" id="6948893">&#34;Expected&nbsp;part3&#34;</span><span class="op" id="6948909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948913">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6948921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6948924">if</span>&nbsp;<span class="ident" id="6948927"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6948931">.</span><span class="ident" id="6948932">Header</span><span class="op" id="6948938">.</span><span class="ident" id="6948939">Get</span><span class="op" id="6948942">(</span><span class="string" id="6948943">&#34;foo-bar&#34;</span><span class="op" id="6948952">)</span>&nbsp;<span class="op" id="6948954">!=</span>&nbsp;<span class="string" id="6948957">&#34;bazb&#34;</span>&nbsp;<span class="op" id="6948964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6948968"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6948969">.</span><span class="ident" id="6948970">Error</span><span class="op" id="6948975">(</span><span class="string" id="6948976">&#34;Expected&nbsp;foo-bar:&nbsp;bazb&#34;</span><span class="op" id="6949000">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949006"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6949009">.</span><span class="ident" id="6949010">Reset</span><span class="op" id="6949015">(</span><span class="op" id="6949016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949019">if</span>&nbsp;<span class="ident" id="6949022">_</span><span class="op" id="6949023">,</span>&nbsp;<span class="ident" id="6949025">err</span>&nbsp;<span class="op" id="6949029">:=</span>&nbsp;<span class="ident" id="6949032"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6949034">.</span><span class="ident" id="6949035">Copy</span><span class="op" id="6949039">(</span><span class="ident" id="6949040"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6949043">,</span>&nbsp;<span class="ident" id="6949045"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6949049">)</span><span class="op" id="6949050">;</span>&nbsp;<span class="ident" id="6949052"><a href="/mime/multipart/multipart_test.go.html#6949025">err</a></span>&nbsp;<span class="op" id="6949056">!=</span>&nbsp;<span class="ident" id="6949059">nil</span>&nbsp;<span class="op" id="6949063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949067"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6949068">.</span><span class="ident" id="6949069">Errorf</span><span class="op" id="6949075">(</span><span class="string" id="6949076">&#34;part&nbsp;3&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="6949093">,</span>&nbsp;<span class="ident" id="6949095"><a href="/mime/multipart/multipart_test.go.html#6949025">err</a></span><span class="op" id="6949098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949101">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949104"><a href="/mime/multipart/multipart_test.go.html#6945222">expectEq</a></span><span class="op" id="6949112">(</span><span class="ident" id="6949113"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6949114">,</span>&nbsp;<span class="ident" id="6949116"><a href="/mime/multipart/multipart_test.go.html#6948039">adjustNewlines</a></span><span class="op" id="6949130">(</span><span class="string" id="6949131">&#34;Line&nbsp;1\r\nLine&nbsp;2\r\nLine&nbsp;3&nbsp;ends&nbsp;in&nbsp;a&nbsp;newline,&nbsp;but&nbsp;just&nbsp;one.\r\n&#34;</span><span class="op" id="6949196">)</span><span class="op" id="6949197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949201"><a href="/mime/multipart/multipart_test.go.html#6947427">buf</a></span><span class="op" id="6949204">.</span><span class="ident" id="6949205">String</span><span class="op" id="6949211">(</span><span class="op" id="6949212">)</span><span class="op" id="6949213">,</span>&nbsp;<span class="string" id="6949215">&#34;body&nbsp;of&nbsp;part&nbsp;3&#34;</span><span class="op" id="6949231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6949235">//&nbsp;Part4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949245"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6949249">,</span>&nbsp;<span class="ident" id="6949251"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6949255">=</span>&nbsp;<span class="ident" id="6949257"><a href="/mime/multipart/multipart_test.go.html#6947389">reader</a></span><span class="op" id="6949263">.</span><span class="ident" id="6949264">NextPart</span><span class="op" id="6949272">(</span><span class="op" id="6949273">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949276">if</span>&nbsp;<span class="ident" id="6949279"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span>&nbsp;<span class="op" id="6949284">==</span>&nbsp;<span class="ident" id="6949287">nil</span>&nbsp;<span class="op" id="6949291">||</span>&nbsp;<span class="ident" id="6949294"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6949298">!=</span>&nbsp;<span class="ident" id="6949301">nil</span>&nbsp;<span class="op" id="6949305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949309"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6949310">.</span><span class="ident" id="6949311">Error</span><span class="op" id="6949316">(</span><span class="string" id="6949317">&#34;Expected&nbsp;part&nbsp;4&nbsp;without&nbsp;errors&#34;</span><span class="op" id="6949349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949353">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6949365">//&nbsp;Non-existent&nbsp;part5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949388"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span><span class="op" id="6949392">,</span>&nbsp;<span class="ident" id="6949394"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6949398">=</span>&nbsp;<span class="ident" id="6949400"><a href="/mime/multipart/multipart_test.go.html#6947389">reader</a></span><span class="op" id="6949406">.</span><span class="ident" id="6949407">NextPart</span><span class="op" id="6949415">(</span><span class="op" id="6949416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949419">if</span>&nbsp;<span class="ident" id="6949422"><a href="/mime/multipart/multipart_test.go.html#6947464">part</a></span>&nbsp;<span class="op" id="6949427">!=</span>&nbsp;<span class="ident" id="6949430">nil</span>&nbsp;<span class="op" id="6949434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949438"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6949439">.</span><span class="ident" id="6949440">Error</span><span class="op" id="6949445">(</span><span class="string" id="6949446">&#34;Didn&#39;t&nbsp;expect&nbsp;a&nbsp;fifth&nbsp;part.&#34;</span><span class="op" id="6949475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949478">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949481">if</span>&nbsp;<span class="ident" id="6949484"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span>&nbsp;<span class="op" id="6949488">!=</span>&nbsp;<span class="ident" id="6949491"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6949493">.</span><span class="ident" id="6949494">EOF</span>&nbsp;<span class="op" id="6949498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949502"><a href="/mime/multipart/multipart_test.go.html#6947340">t</a></span><span class="op" id="6949503">.</span><span class="ident" id="6949504">Errorf</span><span class="op" id="6949510">(</span><span class="string" id="6949511">&#34;On&nbsp;fifth&nbsp;part&nbsp;expected&nbsp;io.EOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6949550">,</span>&nbsp;<span class="ident" id="6949552"><a href="/mime/multipart/multipart_test.go.html#6947470">err</a></span><span class="op" id="6949555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949558">}</span><br>
<span class="lineno"></span><span class="op" id="6949560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="6949563">func</span>&nbsp;<span class="ident" id="6949568">TestVariousTextLineEndings</span><span class="op" id="6949594">(</span><span class="ident" id="6949595">t</span>&nbsp;<span class="op" id="6949597">*</span><span class="ident" id="6949598"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6949605">.</span><span class="ident" id="6949606">T</span><span class="op" id="6949607">)</span>&nbsp;<span class="op" id="6949609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949612">tests</span>&nbsp;<span class="op" id="6949618">:=</span>&nbsp;<span class="op" id="6949621">[</span><span class="op" id="6949622">...</span><span class="op" id="6949625">]</span><span class="builtintype" id="6949626">string</span><span class="op" id="6949632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949636">&#34;Foo\nBar&#34;</span><span class="op" id="6949646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949650">&#34;Foo\nBar\n&#34;</span><span class="op" id="6949662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949666">&#34;Foo\r\nBar&#34;</span><span class="op" id="6949678">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949682">&#34;Foo\r\nBar\r\n&#34;</span><span class="op" id="6949698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949702">&#34;Foo\rBar&#34;</span><span class="op" id="6949712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949716">&#34;Foo\rBar\r&#34;</span><span class="op" id="6949728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949732">&#34;\x00\x01\x02\x09\x0a\x0b\x0c\x0d\x0e\x0f\x10&#34;</span><span class="op" id="6949778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6949781">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6949785">for</span>&nbsp;<span class="ident" id="6949789">testNum</span><span class="op" id="6949796">,</span>&nbsp;<span class="ident" id="6949798">expectedBody</span>&nbsp;<span class="op" id="6949811">:=</span>&nbsp;<span class="keyword" id="6949814">range</span>&nbsp;<span class="ident" id="6949820"><a href="/mime/multipart/multipart_test.go.html#6949612">tests</a></span>&nbsp;<span class="op" id="6949826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949830">body</span>&nbsp;<span class="op" id="6949835">:=</span>&nbsp;<span class="string" id="6949838">&#34;--BOUNDARY\r\n&#34;</span>&nbsp;<span class="op" id="6949855">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949860">&#34;Content-Disposition:&nbsp;form-data;&nbsp;name=\&#34;value\&#34;\r\n&#34;</span>&nbsp;<span class="op" id="6949913">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949918">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="6949925">+</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949930"><a href="/mime/multipart/multipart_test.go.html#6949798">expectedBody</a></span>&nbsp;<span class="op" id="6949943">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6949948">&#34;\r\n--BOUNDARY--\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6949973">bodyReader</span>&nbsp;<span class="op" id="6949984">:=</span>&nbsp;<span class="ident" id="6949987"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6949994">.</span><span class="ident" id="6949995">NewReader</span><span class="op" id="6950004">(</span><span class="ident" id="6950005"><a href="/mime/multipart/multipart_test.go.html#6949830">body</a></span><span class="op" id="6950009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950014">reader</span>&nbsp;<span class="op" id="6950021">:=</span>&nbsp;<span class="ident" id="6950024"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6950033">(</span><span class="ident" id="6950034"><a href="/mime/multipart/multipart_test.go.html#6949973">bodyReader</a></span><span class="op" id="6950044">,</span>&nbsp;<span class="string" id="6950046">&#34;BOUNDARY&#34;</span><span class="op" id="6950056">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950060">buf</span>&nbsp;<span class="op" id="6950064">:=</span>&nbsp;<span class="builtinfunc" id="6950067">new</span><span class="op" id="6950070">(</span><span class="ident" id="6950071"><a href="/mime/multipart/multipart_test.go.html#6944469">bytes</a></span><span class="op" id="6950076">.</span><span class="ident" id="6950077">Buffer</span><span class="op" id="6950083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950087">part</span><span class="op" id="6950091">,</span>&nbsp;<span class="ident" id="6950093">err</span>&nbsp;<span class="op" id="6950097">:=</span>&nbsp;<span class="ident" id="6950100"><a href="/mime/multipart/multipart_test.go.html#6950014">reader</a></span><span class="op" id="6950106">.</span><span class="ident" id="6950107">NextPart</span><span class="op" id="6950115">(</span><span class="op" id="6950116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950120">if</span>&nbsp;<span class="ident" id="6950123"><a href="/mime/multipart/multipart_test.go.html#6950087">part</a></span>&nbsp;<span class="op" id="6950128">==</span>&nbsp;<span class="ident" id="6950131">nil</span>&nbsp;<span class="op" id="6950135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950140"><a href="/mime/multipart/multipart_test.go.html#6949595">t</a></span><span class="op" id="6950141">.</span><span class="ident" id="6950142">Errorf</span><span class="op" id="6950148">(</span><span class="string" id="6950149">&#34;Expected&nbsp;a&nbsp;body&nbsp;part&nbsp;on&nbsp;text&nbsp;%d&#34;</span><span class="op" id="6950182">,</span>&nbsp;<span class="ident" id="6950184"><a href="/mime/multipart/multipart_test.go.html#6949789">testNum</a></span><span class="op" id="6950191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950196">continue</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950211">if</span>&nbsp;<span class="ident" id="6950214"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span>&nbsp;<span class="op" id="6950218">!=</span>&nbsp;<span class="ident" id="6950221">nil</span>&nbsp;<span class="op" id="6950225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950230"><a href="/mime/multipart/multipart_test.go.html#6949595">t</a></span><span class="op" id="6950231">.</span><span class="ident" id="6950232">Errorf</span><span class="op" id="6950238">(</span><span class="string" id="6950239">&#34;Unexpected&nbsp;error&nbsp;on&nbsp;text&nbsp;%d:&nbsp;%v&#34;</span><span class="op" id="6950272">,</span>&nbsp;<span class="ident" id="6950274"><a href="/mime/multipart/multipart_test.go.html#6949789">testNum</a></span><span class="op" id="6950281">,</span>&nbsp;<span class="ident" id="6950283"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span><span class="op" id="6950286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950291">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950302">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950306">written</span><span class="op" id="6950313">,</span>&nbsp;<span class="ident" id="6950315"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span>&nbsp;<span class="op" id="6950319">:=</span>&nbsp;<span class="ident" id="6950322"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6950324">.</span><span class="ident" id="6950325">Copy</span><span class="op" id="6950329">(</span><span class="ident" id="6950330"><a href="/mime/multipart/multipart_test.go.html#6950060">buf</a></span><span class="op" id="6950333">,</span>&nbsp;<span class="ident" id="6950335"><a href="/mime/multipart/multipart_test.go.html#6950087">part</a></span><span class="op" id="6950339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950343"><a href="/mime/multipart/multipart_test.go.html#6945222">expectEq</a></span><span class="op" id="6950351">(</span><span class="ident" id="6950352"><a href="/mime/multipart/multipart_test.go.html#6949595">t</a></span><span class="op" id="6950353">,</span>&nbsp;<span class="ident" id="6950355"><a href="/mime/multipart/multipart_test.go.html#6949798">expectedBody</a></span><span class="op" id="6950367">,</span>&nbsp;<span class="ident" id="6950369"><a href="/mime/multipart/multipart_test.go.html#6950060">buf</a></span><span class="op" id="6950372">.</span><span class="ident" id="6950373">String</span><span class="op" id="6950379">(</span><span class="op" id="6950380">)</span><span class="op" id="6950381">,</span>&nbsp;<span class="ident" id="6950383"><a href="/mime/multipart/multipart_test.go.html#6944495">fmt</a></span><span class="op" id="6950386">.</span><span class="ident" id="6950387">Sprintf</span><span class="op" id="6950394">(</span><span class="string" id="6950395">&#34;test&nbsp;%d&#34;</span><span class="op" id="6950404">,</span>&nbsp;<span class="ident" id="6950406"><a href="/mime/multipart/multipart_test.go.html#6949789">testNum</a></span><span class="op" id="6950413">)</span><span class="op" id="6950414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950418">if</span>&nbsp;<span class="ident" id="6950421"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span>&nbsp;<span class="op" id="6950425">!=</span>&nbsp;<span class="ident" id="6950428">nil</span>&nbsp;<span class="op" id="6950432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950437"><a href="/mime/multipart/multipart_test.go.html#6949595">t</a></span><span class="op" id="6950438">.</span><span class="ident" id="6950439">Errorf</span><span class="op" id="6950445">(</span><span class="string" id="6950446">&#34;Error&nbsp;copying&nbsp;multipart;&nbsp;bytes=%v,&nbsp;error=%v&#34;</span><span class="op" id="6950491">,</span>&nbsp;<span class="ident" id="6950493"><a href="/mime/multipart/multipart_test.go.html#6950306">written</a></span><span class="op" id="6950500">,</span>&nbsp;<span class="ident" id="6950502"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span><span class="op" id="6950505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950509">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950514"><a href="/mime/multipart/multipart_test.go.html#6950087">part</a></span><span class="op" id="6950518">,</span>&nbsp;<span class="ident" id="6950520"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span>&nbsp;<span class="op" id="6950524">=</span>&nbsp;<span class="ident" id="6950526"><a href="/mime/multipart/multipart_test.go.html#6950014">reader</a></span><span class="op" id="6950532">.</span><span class="ident" id="6950533">NextPart</span><span class="op" id="6950541">(</span><span class="op" id="6950542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950546">if</span>&nbsp;<span class="ident" id="6950549"><a href="/mime/multipart/multipart_test.go.html#6950087">part</a></span>&nbsp;<span class="op" id="6950554">!=</span>&nbsp;<span class="ident" id="6950557">nil</span>&nbsp;<span class="op" id="6950561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950566"><a href="/mime/multipart/multipart_test.go.html#6949595">t</a></span><span class="op" id="6950567">.</span><span class="ident" id="6950568">Errorf</span><span class="op" id="6950574">(</span><span class="string" id="6950575">&#34;Unexpected&nbsp;part&nbsp;in&nbsp;test&nbsp;%d&#34;</span><span class="op" id="6950603">,</span>&nbsp;<span class="ident" id="6950605"><a href="/mime/multipart/multipart_test.go.html#6949789">testNum</a></span><span class="op" id="6950612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950616">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950620">if</span>&nbsp;<span class="ident" id="6950623"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span>&nbsp;<span class="op" id="6950627">!=</span>&nbsp;<span class="ident" id="6950630"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6950632">.</span><span class="ident" id="6950633">EOF</span>&nbsp;<span class="op" id="6950637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950642"><a href="/mime/multipart/multipart_test.go.html#6949595">t</a></span><span class="op" id="6950643">.</span><span class="ident" id="6950644">Errorf</span><span class="op" id="6950650">(</span><span class="string" id="6950651">&#34;On&nbsp;test&nbsp;%d&nbsp;expected&nbsp;io.EOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6950687">,</span>&nbsp;<span class="ident" id="6950689"><a href="/mime/multipart/multipart_test.go.html#6949789">testNum</a></span><span class="op" id="6950696">,</span>&nbsp;<span class="ident" id="6950698"><a href="/mime/multipart/multipart_test.go.html#6950093">err</a></span><span class="op" id="6950701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950709">}</span><br>
<span class="lineno">260</span><span class="op" id="6950711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6950714">type</span>&nbsp;<span class="ident" id="6950719">maliciousReader</span>&nbsp;<span class="keyword" id="6950735">struct</span>&nbsp;<span class="op" id="6950742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950745">t</span>&nbsp;<span class="op" id="6950747">*</span><span class="ident" id="6950748"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6950755">.</span><span class="ident" id="6950756">T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950759">n</span>&nbsp;<span class="builtintype" id="6950761">int</span><br>
<span class="lineno">265</span><span class="op" id="6950765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6950768">const</span>&nbsp;<span class="ident" id="6950774">maxReadThreshold</span>&nbsp;<span class="op" id="6950791">=</span>&nbsp;<span class="num" id="6950793">1</span>&nbsp;<span class="op" id="6950795">&lt;&lt;</span>&nbsp;<span class="num" id="6950798">20</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6950802">func</span>&nbsp;<span class="op" id="6950807">(</span><span class="ident" id="6950808">mr</span>&nbsp;<span class="op" id="6950811">*</span><span class="ident" id="6950812"><a href="/mime/multipart/multipart_test.go.html#6950719">maliciousReader</a></span><span class="op" id="6950827">)</span>&nbsp;<span class="ident" id="6950829">Read</span><span class="op" id="6950833">(</span><span class="ident" id="6950834">b</span>&nbsp;<span class="op" id="6950836">[</span><span class="op" id="6950837">]</span><span class="builtintype" id="6950838">byte</span><span class="op" id="6950842">)</span>&nbsp;<span class="op" id="6950844">(</span><span class="ident" id="6950845">n</span>&nbsp;<span class="builtintype" id="6950847">int</span><span class="op" id="6950850">,</span>&nbsp;<span class="ident" id="6950852">err</span>&nbsp;<span class="builtintype" id="6950856">error</span><span class="op" id="6950861">)</span>&nbsp;<span class="op" id="6950863">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950866"><a href="/mime/multipart/multipart_test.go.html#6950808">mr</a></span><span class="op" id="6950868">.</span><span class="ident" id="6950869">n</span>&nbsp;<span class="op" id="6950871">+=</span>&nbsp;<span class="builtinfunc" id="6950874">len</span><span class="op" id="6950877">(</span><span class="ident" id="6950878"><a href="/mime/multipart/multipart_test.go.html#6950834">b</a></span><span class="op" id="6950879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950882">if</span>&nbsp;<span class="ident" id="6950885"><a href="/mime/multipart/multipart_test.go.html#6950808">mr</a></span><span class="op" id="6950887">.</span><span class="ident" id="6950888">n</span>&nbsp;<span class="op" id="6950890">&gt;=</span>&nbsp;<span class="ident" id="6950893"><a href="/mime/multipart/multipart_test.go.html#6950774">maxReadThreshold</a></span>&nbsp;<span class="op" id="6950910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6950914"><a href="/mime/multipart/multipart_test.go.html#6950808">mr</a></span><span class="op" id="6950916">.</span><span class="ident" id="6950917">t</span><span class="op" id="6950918">.</span><span class="ident" id="6950919">Fatal</span><span class="op" id="6950924">(</span><span class="string" id="6950925">&#34;too&nbsp;much&nbsp;was&nbsp;read&#34;</span><span class="op" id="6950944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950948">return</span>&nbsp;<span class="num" id="6950955">0</span><span class="op" id="6950956">,</span>&nbsp;<span class="ident" id="6950958"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6950960">.</span><span class="ident" id="6950961">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6950966">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6950969">return</span>&nbsp;<span class="builtinfunc" id="6950976">len</span><span class="op" id="6950979">(</span><span class="ident" id="6950980"><a href="/mime/multipart/multipart_test.go.html#6950834">b</a></span><span class="op" id="6950981">)</span><span class="op" id="6950982">,</span>&nbsp;<span class="ident" id="6950984">nil</span><br>
<span class="lineno"></span><span class="op" id="6950988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6950991">func</span>&nbsp;<span class="ident" id="6950996">TestLineLimit</span><span class="op" id="6951009">(</span><span class="ident" id="6951010">t</span>&nbsp;<span class="op" id="6951012">*</span><span class="ident" id="6951013"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6951020">.</span><span class="ident" id="6951021">T</span><span class="op" id="6951022">)</span>&nbsp;<span class="op" id="6951024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951027">mr</span>&nbsp;<span class="op" id="6951030">:=</span>&nbsp;<span class="op" id="6951033">&amp;</span><span class="ident" id="6951034"><a href="/mime/multipart/multipart_test.go.html#6950719">maliciousReader</a></span><span class="op" id="6951049">{</span><span class="ident" id="6951050">t</span><span class="op" id="6951051">:</span>&nbsp;<span class="ident" id="6951053"><a href="/mime/multipart/multipart_test.go.html#6951010">t</a></span><span class="op" id="6951054">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951057">r</span>&nbsp;<span class="op" id="6951059">:=</span>&nbsp;<span class="ident" id="6951062"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6951071">(</span><span class="ident" id="6951072"><a href="/mime/multipart/multipart_test.go.html#6951027">mr</a></span><span class="op" id="6951074">,</span>&nbsp;<span class="string" id="6951076">&#34;fooBoundary&#34;</span><span class="op" id="6951089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951092">part</span><span class="op" id="6951096">,</span>&nbsp;<span class="ident" id="6951098">err</span>&nbsp;<span class="op" id="6951102">:=</span>&nbsp;<span class="ident" id="6951105"><a href="/mime/multipart/multipart_test.go.html#6951057">r</a></span><span class="op" id="6951106">.</span><span class="ident" id="6951107">NextPart</span><span class="op" id="6951115">(</span><span class="op" id="6951116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951119">if</span>&nbsp;<span class="ident" id="6951122"><a href="/mime/multipart/multipart_test.go.html#6951092">part</a></span>&nbsp;<span class="op" id="6951127">!=</span>&nbsp;<span class="ident" id="6951130">nil</span>&nbsp;<span class="op" id="6951134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951138"><a href="/mime/multipart/multipart_test.go.html#6951010">t</a></span><span class="op" id="6951139">.</span><span class="ident" id="6951140">Errorf</span><span class="op" id="6951146">(</span><span class="string" id="6951147">&#34;unexpected&nbsp;part&nbsp;read&#34;</span><span class="op" id="6951169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951172">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951175">if</span>&nbsp;<span class="ident" id="6951178"><a href="/mime/multipart/multipart_test.go.html#6951098">err</a></span>&nbsp;<span class="op" id="6951182">==</span>&nbsp;<span class="ident" id="6951185">nil</span>&nbsp;<span class="op" id="6951189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951193"><a href="/mime/multipart/multipart_test.go.html#6951010">t</a></span><span class="op" id="6951194">.</span><span class="ident" id="6951195">Errorf</span><span class="op" id="6951201">(</span><span class="string" id="6951202">&#34;expected&nbsp;an&nbsp;error&#34;</span><span class="op" id="6951221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951227">if</span>&nbsp;<span class="ident" id="6951230"><a href="/mime/multipart/multipart_test.go.html#6951027">mr</a></span><span class="op" id="6951232">.</span><span class="ident" id="6951233">n</span>&nbsp;<span class="op" id="6951235">&gt;=</span>&nbsp;<span class="ident" id="6951238"><a href="/mime/multipart/multipart_test.go.html#6950774">maxReadThreshold</a></span>&nbsp;<span class="op" id="6951255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951259"><a href="/mime/multipart/multipart_test.go.html#6951010">t</a></span><span class="op" id="6951260">.</span><span class="ident" id="6951261">Errorf</span><span class="op" id="6951267">(</span><span class="string" id="6951268">&#34;expected&nbsp;to&nbsp;read&nbsp;&lt;&nbsp;%d&nbsp;bytes;&nbsp;read&nbsp;%d&#34;</span><span class="op" id="6951306">,</span>&nbsp;<span class="ident" id="6951308"><a href="/mime/multipart/multipart_test.go.html#6950774">maxReadThreshold</a></span><span class="op" id="6951324">,</span>&nbsp;<span class="ident" id="6951326"><a href="/mime/multipart/multipart_test.go.html#6951027">mr</a></span><span class="op" id="6951328">.</span><span class="ident" id="6951329">n</span><span class="op" id="6951330">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951333">}</span><br>
<span class="lineno"></span><span class="op" id="6951335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951338">func</span>&nbsp;<span class="ident" id="6951343">TestMultipartTruncated</span><span class="op" id="6951365">(</span><span class="ident" id="6951366">t</span>&nbsp;<span class="op" id="6951368">*</span><span class="ident" id="6951369"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6951376">.</span><span class="ident" id="6951377">T</span><span class="op" id="6951378">)</span>&nbsp;<span class="op" id="6951380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951383">testBody</span>&nbsp;<span class="op" id="6951392">:=</span>&nbsp;<span class="string" id="6951395">`<br>
<span class="lineno">295</span>This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>foo-bar:&nbsp;baz<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Oh&nbsp;no,&nbsp;premature&nbsp;EOF!<br>
<span class="lineno">300</span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951502">body</span>&nbsp;<span class="op" id="6951507">:=</span>&nbsp;<span class="ident" id="6951510"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6951517">.</span><span class="ident" id="6951518">Replace</span><span class="op" id="6951525">(</span><span class="ident" id="6951526"><a href="/mime/multipart/multipart_test.go.html#6951383">testBody</a></span><span class="op" id="6951534">,</span>&nbsp;<span class="string" id="6951536">&#34;\n&#34;</span><span class="op" id="6951540">,</span>&nbsp;<span class="string" id="6951542">&#34;\r\n&#34;</span><span class="op" id="6951548">,</span>&nbsp;<span class="op" id="6951550">-</span><span class="num" id="6951551">1</span><span class="op" id="6951552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951555">bodyReader</span>&nbsp;<span class="op" id="6951566">:=</span>&nbsp;<span class="ident" id="6951569"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6951576">.</span><span class="ident" id="6951577">NewReader</span><span class="op" id="6951586">(</span><span class="ident" id="6951587"><a href="/mime/multipart/multipart_test.go.html#6951502">body</a></span><span class="op" id="6951591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951594">r</span>&nbsp;<span class="op" id="6951596">:=</span>&nbsp;<span class="ident" id="6951599"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6951608">(</span><span class="ident" id="6951609"><a href="/mime/multipart/multipart_test.go.html#6951555">bodyReader</a></span><span class="op" id="6951619">,</span>&nbsp;<span class="string" id="6951621">&#34;MyBoundary&#34;</span><span class="op" id="6951633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951637">part</span><span class="op" id="6951641">,</span>&nbsp;<span class="ident" id="6951643">err</span>&nbsp;<span class="op" id="6951647">:=</span>&nbsp;<span class="ident" id="6951650"><a href="/mime/multipart/multipart_test.go.html#6951594">r</a></span><span class="op" id="6951651">.</span><span class="ident" id="6951652">NextPart</span><span class="op" id="6951660">(</span><span class="op" id="6951661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951664">if</span>&nbsp;<span class="ident" id="6951667"><a href="/mime/multipart/multipart_test.go.html#6951643">err</a></span>&nbsp;<span class="op" id="6951671">!=</span>&nbsp;<span class="ident" id="6951674">nil</span>&nbsp;<span class="op" id="6951678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951682"><a href="/mime/multipart/multipart_test.go.html#6951366">t</a></span><span class="op" id="6951683">.</span><span class="ident" id="6951684">Fatalf</span><span class="op" id="6951690">(</span><span class="string" id="6951691">&#34;didn&#39;t&nbsp;get&nbsp;a&nbsp;part&#34;</span><span class="op" id="6951710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951716">_</span><span class="op" id="6951717">,</span>&nbsp;<span class="ident" id="6951719"><a href="/mime/multipart/multipart_test.go.html#6951643">err</a></span>&nbsp;<span class="op" id="6951723">=</span>&nbsp;<span class="ident" id="6951725"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6951727">.</span><span class="ident" id="6951728">Copy</span><span class="op" id="6951732">(</span><span class="ident" id="6951733"><a href="/mime/multipart/multipart_test.go.html#6944508">ioutil</a></span><span class="op" id="6951739">.</span><span class="ident" id="6951740">Discard</span><span class="op" id="6951747">,</span>&nbsp;<span class="ident" id="6951749"><a href="/mime/multipart/multipart_test.go.html#6951637">part</a></span><span class="op" id="6951753">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951756">if</span>&nbsp;<span class="ident" id="6951759"><a href="/mime/multipart/multipart_test.go.html#6951643">err</a></span>&nbsp;<span class="op" id="6951763">!=</span>&nbsp;<span class="ident" id="6951766"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6951768">.</span><span class="ident" id="6951769">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="6951786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951790"><a href="/mime/multipart/multipart_test.go.html#6951366">t</a></span><span class="op" id="6951791">.</span><span class="ident" id="6951792">Fatalf</span><span class="op" id="6951798">(</span><span class="string" id="6951799">&#34;expected&nbsp;error&nbsp;io.ErrUnexpectedEOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6951843">,</span>&nbsp;<span class="ident" id="6951845"><a href="/mime/multipart/multipart_test.go.html#6951643">err</a></span><span class="op" id="6951848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951851">}</span><br>
<span class="lineno"></span><span class="op" id="6951853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="6951856">type</span>&nbsp;<span class="ident" id="6951861">slowReader</span>&nbsp;<span class="keyword" id="6951872">struct</span>&nbsp;<span class="op" id="6951879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6951882">r</span>&nbsp;<span class="ident" id="6951884"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6951886">.</span><span class="ident" id="6951887">Reader</span><br>
<span class="lineno"></span><span class="op" id="6951894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6951897">func</span>&nbsp;<span class="op" id="6951902">(</span><span class="ident" id="6951903">s</span>&nbsp;<span class="op" id="6951905">*</span><span class="ident" id="6951906"><a href="/mime/multipart/multipart_test.go.html#6951861">slowReader</a></span><span class="op" id="6951916">)</span>&nbsp;<span class="ident" id="6951918">Read</span><span class="op" id="6951922">(</span><span class="ident" id="6951923">p</span>&nbsp;<span class="op" id="6951925">[</span><span class="op" id="6951926">]</span><span class="builtintype" id="6951927">byte</span><span class="op" id="6951931">)</span>&nbsp;<span class="op" id="6951933">(</span><span class="builtintype" id="6951934">int</span><span class="op" id="6951937">,</span>&nbsp;<span class="builtintype" id="6951939">error</span><span class="op" id="6951944">)</span>&nbsp;<span class="op" id="6951946">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951949">if</span>&nbsp;<span class="builtinfunc" id="6951952">len</span><span class="op" id="6951955">(</span><span class="ident" id="6951956"><a href="/mime/multipart/multipart_test.go.html#6951923">p</a></span><span class="op" id="6951957">)</span>&nbsp;<span class="op" id="6951959">==</span>&nbsp;<span class="num" id="6951962">0</span>&nbsp;<span class="op" id="6951964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951968">return</span>&nbsp;<span class="ident" id="6951975"><a href="/mime/multipart/multipart_test.go.html#6951903">s</a></span><span class="op" id="6951976">.</span><span class="ident" id="6951977">r</span><span class="op" id="6951978">.</span><span class="ident" id="6951979">Read</span><span class="op" id="6951983">(</span><span class="ident" id="6951984"><a href="/mime/multipart/multipart_test.go.html#6951923">p</a></span><span class="op" id="6951985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6951988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6951991">return</span>&nbsp;<span class="ident" id="6951998"><a href="/mime/multipart/multipart_test.go.html#6951903">s</a></span><span class="op" id="6951999">.</span><span class="ident" id="6952000">r</span><span class="op" id="6952001">.</span><span class="ident" id="6952002">Read</span><span class="op" id="6952006">(</span><span class="ident" id="6952007"><a href="/mime/multipart/multipart_test.go.html#6951923">p</a></span><span class="op" id="6952008">[</span><span class="op" id="6952009">:</span><span class="num" id="6952010">1</span><span class="op" id="6952011">]</span><span class="op" id="6952012">)</span><br>
<span class="lineno"></span><span class="op" id="6952014">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="6952017">func</span>&nbsp;<span class="ident" id="6952022">TestLineContinuation</span><span class="op" id="6952042">(</span><span class="ident" id="6952043">t</span>&nbsp;<span class="op" id="6952045">*</span><span class="ident" id="6952046"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6952053">.</span><span class="ident" id="6952054">T</span><span class="op" id="6952055">)</span>&nbsp;<span class="op" id="6952057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6952060">//&nbsp;This&nbsp;body,&nbsp;extracted&nbsp;from&nbsp;an&nbsp;email,&nbsp;contains&nbsp;headers&nbsp;that&nbsp;span&nbsp;multiple</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6952136">//&nbsp;lines.</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6952148">//&nbsp;TODO:&nbsp;The&nbsp;original&nbsp;mail&nbsp;ended&nbsp;with&nbsp;a&nbsp;double-newline&nbsp;before&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6952215">//&nbsp;final&nbsp;delimiter;&nbsp;this&nbsp;was&nbsp;manually&nbsp;edited&nbsp;to&nbsp;use&nbsp;a&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952276">testBody</span>&nbsp;<span class="op" id="6952285">:=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6952290">&#34;\n--Apple-Mail-2-292336769\nContent-Transfer-Encoding:&nbsp;7bit\nContent-Type:&nbsp;text/plain;\n\tcharset=US-ASCII;\n\tdelsp=yes;\n\tformat=flowed\n\nI&#39;m&nbsp;finding&nbsp;the&nbsp;same&nbsp;thing&nbsp;happening&nbsp;on&nbsp;my&nbsp;system&nbsp;(10.4.1).\n\n\n--Apple-Mail-2-292336769\nContent-Transfer-Encoding:&nbsp;quoted-printable\nContent-Type:&nbsp;text/html;\n\tcharset=ISO-8859-1\n\n&lt;HTML&gt;&lt;BODY&gt;I&#39;m&nbsp;finding&nbsp;the&nbsp;same&nbsp;thing&nbsp;=\nhappening&nbsp;on&nbsp;my&nbsp;system&nbsp;(10.4.1).=A0&nbsp;But&nbsp;I&nbsp;built&nbsp;it&nbsp;with&nbsp;XCode&nbsp;=\n2.0.&lt;/BODY&gt;&lt;/=\nHTML&gt;=\n\r\n--Apple-Mail-2-292336769--\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952786">r</span>&nbsp;<span class="op" id="6952788">:=</span>&nbsp;<span class="ident" id="6952791"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6952800">(</span><span class="ident" id="6952801"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6952808">.</span><span class="ident" id="6952809">NewReader</span><span class="op" id="6952818">(</span><span class="ident" id="6952819"><a href="/mime/multipart/multipart_test.go.html#6952276">testBody</a></span><span class="op" id="6952827">)</span><span class="op" id="6952828">,</span>&nbsp;<span class="string" id="6952830">&#34;Apple-Mail-2-292336769&#34;</span><span class="op" id="6952854">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952858">for</span>&nbsp;<span class="ident" id="6952862">i</span>&nbsp;<span class="op" id="6952864">:=</span>&nbsp;<span class="num" id="6952867">0</span><span class="op" id="6952868">;</span>&nbsp;<span class="ident" id="6952870"><a href="/mime/multipart/multipart_test.go.html#6952862">i</a></span>&nbsp;<span class="op" id="6952872">&lt;</span>&nbsp;<span class="num" id="6952874">2</span><span class="op" id="6952875">;</span>&nbsp;<span class="ident" id="6952877"><a href="/mime/multipart/multipart_test.go.html#6952862">i</a></span><span class="op" id="6952878">++</span>&nbsp;<span class="op" id="6952881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952885">part</span><span class="op" id="6952889">,</span>&nbsp;<span class="ident" id="6952891">err</span>&nbsp;<span class="op" id="6952895">:=</span>&nbsp;<span class="ident" id="6952898"><a href="/mime/multipart/multipart_test.go.html#6952786">r</a></span><span class="op" id="6952899">.</span><span class="ident" id="6952900">NextPart</span><span class="op" id="6952908">(</span><span class="op" id="6952909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952913">if</span>&nbsp;<span class="ident" id="6952916"><a href="/mime/multipart/multipart_test.go.html#6952891">err</a></span>&nbsp;<span class="op" id="6952920">!=</span>&nbsp;<span class="ident" id="6952923">nil</span>&nbsp;<span class="op" id="6952927">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952932"><a href="/mime/multipart/multipart_test.go.html#6952043">t</a></span><span class="op" id="6952933">.</span><span class="ident" id="6952934">Fatalf</span><span class="op" id="6952940">(</span><span class="string" id="6952941">&#34;didn&#39;t&nbsp;get&nbsp;a&nbsp;part&#34;</span><span class="op" id="6952960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6952964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6952968">var</span>&nbsp;<span class="ident" id="6952972">buf</span>&nbsp;<span class="ident" id="6952976"><a href="/mime/multipart/multipart_test.go.html#6944469">bytes</a></span><span class="op" id="6952981">.</span><span class="ident" id="6952982">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6952991">n</span><span class="op" id="6952992">,</span>&nbsp;<span class="ident" id="6952994"><a href="/mime/multipart/multipart_test.go.html#6952891">err</a></span>&nbsp;<span class="op" id="6952998">:=</span>&nbsp;<span class="ident" id="6953001"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6953003">.</span><span class="ident" id="6953004">Copy</span><span class="op" id="6953008">(</span><span class="op" id="6953009">&amp;</span><span class="ident" id="6953010"><a href="/mime/multipart/multipart_test.go.html#6952972">buf</a></span><span class="op" id="6953013">,</span>&nbsp;<span class="ident" id="6953015"><a href="/mime/multipart/multipart_test.go.html#6952885">part</a></span><span class="op" id="6953019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953023">if</span>&nbsp;<span class="ident" id="6953026"><a href="/mime/multipart/multipart_test.go.html#6952891">err</a></span>&nbsp;<span class="op" id="6953030">!=</span>&nbsp;<span class="ident" id="6953033">nil</span>&nbsp;<span class="op" id="6953037">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953042"><a href="/mime/multipart/multipart_test.go.html#6952043">t</a></span><span class="op" id="6953043">.</span><span class="ident" id="6953044">Errorf</span><span class="op" id="6953050">(</span><span class="string" id="6953051">&#34;error&nbsp;reading&nbsp;part:&nbsp;%v\nread&nbsp;so&nbsp;far:&nbsp;%q&#34;</span><span class="op" id="6953092">,</span>&nbsp;<span class="ident" id="6953094"><a href="/mime/multipart/multipart_test.go.html#6952891">err</a></span><span class="op" id="6953097">,</span>&nbsp;<span class="ident" id="6953099"><a href="/mime/multipart/multipart_test.go.html#6952972">buf</a></span><span class="op" id="6953102">.</span><span class="ident" id="6953103">String</span><span class="op" id="6953109">(</span><span class="op" id="6953110">)</span><span class="op" id="6953111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6953119">if</span>&nbsp;<span class="ident" id="6953122"><a href="/mime/multipart/multipart_test.go.html#6952991">n</a></span>&nbsp;<span class="op" id="6953124">&lt;=</span>&nbsp;<span class="num" id="6953127">0</span>&nbsp;<span class="op" id="6953129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953134"><a href="/mime/multipart/multipart_test.go.html#6952043">t</a></span><span class="op" id="6953135">.</span><span class="ident" id="6953136">Errorf</span><span class="op" id="6953142">(</span><span class="string" id="6953143">&#34;read&nbsp;%d&nbsp;bytes;&nbsp;expected&nbsp;&gt;0&#34;</span><span class="op" id="6953171">,</span>&nbsp;<span class="ident" id="6953173"><a href="/mime/multipart/multipart_test.go.html#6952991">n</a></span><span class="op" id="6953174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953178">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6953181">}</span><br>
<span class="lineno"></span><span class="op" id="6953183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6953186">func</span>&nbsp;<span class="ident" id="6953191">TestQuotedPrintableEncoding</span><span class="op" id="6953218">(</span><span class="ident" id="6953219">t</span>&nbsp;<span class="op" id="6953221">*</span><span class="ident" id="6953222"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6953229">.</span><span class="ident" id="6953230">T</span><span class="op" id="6953231">)</span>&nbsp;<span class="op" id="6953233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6953236">//&nbsp;From&nbsp;http://golang.org/issue/4411</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6953274">body</span>&nbsp;<span class="op" id="6953279">:=</span>&nbsp;<span class="string" id="6953282">&#34;--0016e68ee29c5d515f04cedf6733\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=text\r\nContent-Transfer-Encoding:&nbsp;quoted-printable\r\n\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;wor=\r\nds&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;=\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;wor=\r\nds&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;=\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words\r\n--0016e68ee29c5d515f04cedf6733\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=submit\r\n\r\nSubmit\r\n--0016e68ee29c5d515f04cedf6733--&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954016">r</span>&nbsp;<span class="op" id="6954018">:=</span>&nbsp;<span class="ident" id="6954021"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6954030">(</span><span class="ident" id="6954031"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6954038">.</span><span class="ident" id="6954039">NewReader</span><span class="op" id="6954048">(</span><span class="ident" id="6954049"><a href="/mime/multipart/multipart_test.go.html#6953274">body</a></span><span class="op" id="6954053">)</span><span class="op" id="6954054">,</span>&nbsp;<span class="string" id="6954056">&#34;0016e68ee29c5d515f04cedf6733&#34;</span><span class="op" id="6954086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954089">part</span><span class="op" id="6954093">,</span>&nbsp;<span class="ident" id="6954095">err</span>&nbsp;<span class="op" id="6954099">:=</span>&nbsp;<span class="ident" id="6954102"><a href="/mime/multipart/multipart_test.go.html#6954016">r</a></span><span class="op" id="6954103">.</span><span class="ident" id="6954104">NextPart</span><span class="op" id="6954112">(</span><span class="op" id="6954113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6954116">if</span>&nbsp;<span class="ident" id="6954119"><a href="/mime/multipart/multipart_test.go.html#6954095">err</a></span>&nbsp;<span class="op" id="6954123">!=</span>&nbsp;<span class="ident" id="6954126">nil</span>&nbsp;<span class="op" id="6954130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954134"><a href="/mime/multipart/multipart_test.go.html#6953219">t</a></span><span class="op" id="6954135">.</span><span class="ident" id="6954136">Fatal</span><span class="op" id="6954141">(</span><span class="ident" id="6954142"><a href="/mime/multipart/multipart_test.go.html#6954095">err</a></span><span class="op" id="6954145">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6954151">if</span>&nbsp;<span class="ident" id="6954154">te</span><span class="op" id="6954156">,</span>&nbsp;<span class="ident" id="6954158">ok</span>&nbsp;<span class="op" id="6954161">:=</span>&nbsp;<span class="ident" id="6954164"><a href="/mime/multipart/multipart_test.go.html#6954089">part</a></span><span class="op" id="6954168">.</span><span class="ident" id="6954169">Header</span><span class="op" id="6954175">[</span><span class="string" id="6954176">&#34;Content-Transfer-Encoding&#34;</span><span class="op" id="6954203">]</span><span class="op" id="6954204">;</span>&nbsp;<span class="ident" id="6954206"><a href="/mime/multipart/multipart_test.go.html#6954158">ok</a></span>&nbsp;<span class="op" id="6954209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954213"><a href="/mime/multipart/multipart_test.go.html#6953219">t</a></span><span class="op" id="6954214">.</span><span class="ident" id="6954215">Errorf</span><span class="op" id="6954221">(</span><span class="string" id="6954222">&#34;unexpected&nbsp;Content-Transfer-Encoding&nbsp;of&nbsp;%q&#34;</span><span class="op" id="6954266">,</span>&nbsp;<span class="ident" id="6954268"><a href="/mime/multipart/multipart_test.go.html#6954154">te</a></span><span class="op" id="6954270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6954276">var</span>&nbsp;<span class="ident" id="6954280">buf</span>&nbsp;<span class="ident" id="6954284"><a href="/mime/multipart/multipart_test.go.html#6944469">bytes</a></span><span class="op" id="6954289">.</span><span class="ident" id="6954290">Buffer</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954298">_</span><span class="op" id="6954299">,</span>&nbsp;<span class="ident" id="6954301"><a href="/mime/multipart/multipart_test.go.html#6954095">err</a></span>&nbsp;<span class="op" id="6954305">=</span>&nbsp;<span class="ident" id="6954307"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6954309">.</span><span class="ident" id="6954310">Copy</span><span class="op" id="6954314">(</span><span class="op" id="6954315">&amp;</span><span class="ident" id="6954316"><a href="/mime/multipart/multipart_test.go.html#6954280">buf</a></span><span class="op" id="6954319">,</span>&nbsp;<span class="ident" id="6954321"><a href="/mime/multipart/multipart_test.go.html#6954089">part</a></span><span class="op" id="6954325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6954328">if</span>&nbsp;<span class="ident" id="6954331"><a href="/mime/multipart/multipart_test.go.html#6954095">err</a></span>&nbsp;<span class="op" id="6954335">!=</span>&nbsp;<span class="ident" id="6954338">nil</span>&nbsp;<span class="op" id="6954342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954346"><a href="/mime/multipart/multipart_test.go.html#6953219">t</a></span><span class="op" id="6954347">.</span><span class="ident" id="6954348">Error</span><span class="op" id="6954353">(</span><span class="ident" id="6954354"><a href="/mime/multipart/multipart_test.go.html#6954095">err</a></span><span class="op" id="6954357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954363">got</span>&nbsp;<span class="op" id="6954367">:=</span>&nbsp;<span class="ident" id="6954370"><a href="/mime/multipart/multipart_test.go.html#6954280">buf</a></span><span class="op" id="6954373">.</span><span class="ident" id="6954374">String</span><span class="op" id="6954380">(</span><span class="op" id="6954381">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954384">want</span>&nbsp;<span class="op" id="6954389">:=</span>&nbsp;<span class="string" id="6954392">&#34;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6954749">if</span>&nbsp;<span class="ident" id="6954752"><a href="/mime/multipart/multipart_test.go.html#6954363">got</a></span>&nbsp;<span class="op" id="6954756">!=</span>&nbsp;<span class="ident" id="6954759"><a href="/mime/multipart/multipart_test.go.html#6954384">want</a></span>&nbsp;<span class="op" id="6954764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6954768"><a href="/mime/multipart/multipart_test.go.html#6953219">t</a></span><span class="op" id="6954769">.</span><span class="ident" id="6954770">Errorf</span><span class="op" id="6954776">(</span><span class="string" id="6954777">&#34;wrong&nbsp;part&nbsp;value:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="6954816">,</span>&nbsp;<span class="ident" id="6954818"><a href="/mime/multipart/multipart_test.go.html#6954363">got</a></span><span class="op" id="6954821">,</span>&nbsp;<span class="ident" id="6954823"><a href="/mime/multipart/multipart_test.go.html#6954384">want</a></span><span class="op" id="6954827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6954830">}</span><br>
<span class="lineno"></span><span class="op" id="6954832">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="comment" id="6954835">//&nbsp;Test&nbsp;parsing&nbsp;an&nbsp;image&nbsp;attachment&nbsp;from&nbsp;gmail,&nbsp;which&nbsp;previously&nbsp;failed.</span><br>
<span class="lineno"></span><span class="keyword" id="6954908">func</span>&nbsp;<span class="ident" id="6954913">TestNested</span><span class="op" id="6954923">(</span><span class="ident" id="6954924">t</span>&nbsp;<span class="op" id="6954926">*</span><span class="ident" id="6954927"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6954934">.</span><span class="ident" id="6954935">T</span><span class="op" id="6954936">)</span>&nbsp;<span class="op" id="6954938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6954941">//&nbsp;nested-mime&nbsp;is&nbsp;the&nbsp;body&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart/mixed&nbsp;email</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6955001">//&nbsp;with&nbsp;boundary&nbsp;e89a8ff1c1e83553e304be640612</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955048">f</span><span class="op" id="6955049">,</span>&nbsp;<span class="ident" id="6955051">err</span>&nbsp;<span class="op" id="6955055">:=</span>&nbsp;<span class="ident" id="6955058"><a href="/mime/multipart/multipart_test.go.html#6944538">os</a></span><span class="op" id="6955060">.</span><span class="ident" id="6955061">Open</span><span class="op" id="6955065">(</span><span class="string" id="6955066">&#34;testdata/nested-mime&#34;</span><span class="op" id="6955088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955091">if</span>&nbsp;<span class="ident" id="6955094"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955098">!=</span>&nbsp;<span class="ident" id="6955101">nil</span>&nbsp;<span class="op" id="6955105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955109"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955110">.</span><span class="ident" id="6955111">Fatal</span><span class="op" id="6955116">(</span><span class="ident" id="6955117"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6955120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955126">defer</span>&nbsp;<span class="ident" id="6955132"><a href="/mime/multipart/multipart_test.go.html#6955048">f</a></span><span class="op" id="6955133">.</span><span class="ident" id="6955134">Close</span><span class="op" id="6955139">(</span><span class="op" id="6955140">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955143">mr</span>&nbsp;<span class="op" id="6955146">:=</span>&nbsp;<span class="ident" id="6955149"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6955158">(</span><span class="ident" id="6955159"><a href="/mime/multipart/multipart_test.go.html#6955048">f</a></span><span class="op" id="6955160">,</span>&nbsp;<span class="string" id="6955162">&#34;e89a8ff1c1e83553e304be640612&#34;</span><span class="op" id="6955192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955195">p</span><span class="op" id="6955196">,</span>&nbsp;<span class="ident" id="6955198"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955202">:=</span>&nbsp;<span class="ident" id="6955205"><a href="/mime/multipart/multipart_test.go.html#6955143">mr</a></span><span class="op" id="6955207">.</span><span class="ident" id="6955208">NextPart</span><span class="op" id="6955216">(</span><span class="op" id="6955217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955220">if</span>&nbsp;<span class="ident" id="6955223"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955227">!=</span>&nbsp;<span class="ident" id="6955230">nil</span>&nbsp;<span class="op" id="6955234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955238"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955239">.</span><span class="ident" id="6955240">Fatalf</span><span class="op" id="6955246">(</span><span class="string" id="6955247">&#34;error&nbsp;reading&nbsp;first&nbsp;section&nbsp;(alternative):&nbsp;%v&#34;</span><span class="op" id="6955294">,</span>&nbsp;<span class="ident" id="6955296"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6955299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955302">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6955306">//&nbsp;Read&nbsp;the&nbsp;inner&nbsp;text/plain&nbsp;and&nbsp;text/html&nbsp;sections&nbsp;of&nbsp;the&nbsp;multipart/alternative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955389">mr2</span>&nbsp;<span class="op" id="6955393">:=</span>&nbsp;<span class="ident" id="6955396"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6955405">(</span><span class="ident" id="6955406"><a href="/mime/multipart/multipart_test.go.html#6955195">p</a></span><span class="op" id="6955407">,</span>&nbsp;<span class="string" id="6955409">&#34;e89a8ff1c1e83553e004be640610&#34;</span><span class="op" id="6955439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955442"><a href="/mime/multipart/multipart_test.go.html#6955195">p</a></span><span class="op" id="6955443">,</span>&nbsp;<span class="ident" id="6955445"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955449">=</span>&nbsp;<span class="ident" id="6955451"><a href="/mime/multipart/multipart_test.go.html#6955389">mr2</a></span><span class="op" id="6955454">.</span><span class="ident" id="6955455">NextPart</span><span class="op" id="6955463">(</span><span class="op" id="6955464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955467">if</span>&nbsp;<span class="ident" id="6955470"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955474">!=</span>&nbsp;<span class="ident" id="6955477">nil</span>&nbsp;<span class="op" id="6955481">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955485"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955486">.</span><span class="ident" id="6955487">Fatalf</span><span class="op" id="6955493">(</span><span class="string" id="6955494">&#34;reading&nbsp;text/plain&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="6955523">,</span>&nbsp;<span class="ident" id="6955525"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6955528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955534">if</span>&nbsp;<span class="ident" id="6955537">b</span><span class="op" id="6955538">,</span>&nbsp;<span class="ident" id="6955540">err</span>&nbsp;<span class="op" id="6955544">:=</span>&nbsp;<span class="ident" id="6955547"><a href="/mime/multipart/multipart_test.go.html#6944508">ioutil</a></span><span class="op" id="6955553">.</span><span class="ident" id="6955554">ReadAll</span><span class="op" id="6955561">(</span><span class="ident" id="6955562"><a href="/mime/multipart/multipart_test.go.html#6955195">p</a></span><span class="op" id="6955563">)</span><span class="op" id="6955564">;</span>&nbsp;<span class="builtintype" id="6955566">string</span><span class="op" id="6955572">(</span><span class="ident" id="6955573"><a href="/mime/multipart/multipart_test.go.html#6955537">b</a></span><span class="op" id="6955574">)</span>&nbsp;<span class="op" id="6955576">!=</span>&nbsp;<span class="string" id="6955579">&#34;*body*\r\n&#34;</span>&nbsp;<span class="op" id="6955592">||</span>&nbsp;<span class="ident" id="6955595"><a href="/mime/multipart/multipart_test.go.html#6955540">err</a></span>&nbsp;<span class="op" id="6955599">!=</span>&nbsp;<span class="ident" id="6955602">nil</span>&nbsp;<span class="op" id="6955606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955610"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955611">.</span><span class="ident" id="6955612">Fatalf</span><span class="op" id="6955618">(</span><span class="string" id="6955619">&#34;reading&nbsp;text/plain&nbsp;part:&nbsp;got&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="6955656">,</span>&nbsp;<span class="ident" id="6955658"><a href="/mime/multipart/multipart_test.go.html#6955537">b</a></span><span class="op" id="6955659">,</span>&nbsp;<span class="ident" id="6955661"><a href="/mime/multipart/multipart_test.go.html#6955540">err</a></span><span class="op" id="6955664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955667">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955670"><a href="/mime/multipart/multipart_test.go.html#6955195">p</a></span><span class="op" id="6955671">,</span>&nbsp;<span class="ident" id="6955673"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955677">=</span>&nbsp;<span class="ident" id="6955679"><a href="/mime/multipart/multipart_test.go.html#6955389">mr2</a></span><span class="op" id="6955682">.</span><span class="ident" id="6955683">NextPart</span><span class="op" id="6955691">(</span><span class="op" id="6955692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955695">if</span>&nbsp;<span class="ident" id="6955698"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955702">!=</span>&nbsp;<span class="ident" id="6955705">nil</span>&nbsp;<span class="op" id="6955709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955713"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955714">.</span><span class="ident" id="6955715">Fatalf</span><span class="op" id="6955721">(</span><span class="string" id="6955722">&#34;reading&nbsp;text/html&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="6955750">,</span>&nbsp;<span class="ident" id="6955752"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6955755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955761">if</span>&nbsp;<span class="ident" id="6955764">b</span><span class="op" id="6955765">,</span>&nbsp;<span class="ident" id="6955767">err</span>&nbsp;<span class="op" id="6955771">:=</span>&nbsp;<span class="ident" id="6955774"><a href="/mime/multipart/multipart_test.go.html#6944508">ioutil</a></span><span class="op" id="6955780">.</span><span class="ident" id="6955781">ReadAll</span><span class="op" id="6955788">(</span><span class="ident" id="6955789"><a href="/mime/multipart/multipart_test.go.html#6955195">p</a></span><span class="op" id="6955790">)</span><span class="op" id="6955791">;</span>&nbsp;<span class="builtintype" id="6955793">string</span><span class="op" id="6955799">(</span><span class="ident" id="6955800"><a href="/mime/multipart/multipart_test.go.html#6955764">b</a></span><span class="op" id="6955801">)</span>&nbsp;<span class="op" id="6955803">!=</span>&nbsp;<span class="string" id="6955806">&#34;&lt;b&gt;body&lt;/b&gt;\r\n&#34;</span>&nbsp;<span class="op" id="6955824">||</span>&nbsp;<span class="ident" id="6955827"><a href="/mime/multipart/multipart_test.go.html#6955767">err</a></span>&nbsp;<span class="op" id="6955831">!=</span>&nbsp;<span class="ident" id="6955834">nil</span>&nbsp;<span class="op" id="6955838">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955842"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955843">.</span><span class="ident" id="6955844">Fatalf</span><span class="op" id="6955850">(</span><span class="string" id="6955851">&#34;reading&nbsp;text/html&nbsp;part:&nbsp;got&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="6955887">,</span>&nbsp;<span class="ident" id="6955889"><a href="/mime/multipart/multipart_test.go.html#6955764">b</a></span><span class="op" id="6955890">,</span>&nbsp;<span class="ident" id="6955892"><a href="/mime/multipart/multipart_test.go.html#6955767">err</a></span><span class="op" id="6955895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6955898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955902"><a href="/mime/multipart/multipart_test.go.html#6955195">p</a></span><span class="op" id="6955903">,</span>&nbsp;<span class="ident" id="6955905"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955909">=</span>&nbsp;<span class="ident" id="6955911"><a href="/mime/multipart/multipart_test.go.html#6955389">mr2</a></span><span class="op" id="6955914">.</span><span class="ident" id="6955915">NextPart</span><span class="op" id="6955923">(</span><span class="op" id="6955924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6955927">if</span>&nbsp;<span class="ident" id="6955930"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6955934">!=</span>&nbsp;<span class="ident" id="6955937"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6955939">.</span><span class="ident" id="6955940">EOF</span>&nbsp;<span class="op" id="6955944">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6955948"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6955949">.</span><span class="ident" id="6955950">Fatalf</span><span class="op" id="6955956">(</span><span class="string" id="6955957">&#34;final&nbsp;inner&nbsp;NextPart&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.EOF&#34;</span><span class="op" id="6955997">,</span>&nbsp;<span class="ident" id="6955999"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6956002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956009">//&nbsp;Back&nbsp;to&nbsp;the&nbsp;outer&nbsp;multipart/mixed,&nbsp;reading&nbsp;the&nbsp;image&nbsp;attachment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956078">_</span><span class="op" id="6956079">,</span>&nbsp;<span class="ident" id="6956081"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6956085">=</span>&nbsp;<span class="ident" id="6956087"><a href="/mime/multipart/multipart_test.go.html#6955143">mr</a></span><span class="op" id="6956089">.</span><span class="ident" id="6956090">NextPart</span><span class="op" id="6956098">(</span><span class="op" id="6956099">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6956102">if</span>&nbsp;<span class="ident" id="6956105"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6956109">!=</span>&nbsp;<span class="ident" id="6956112">nil</span>&nbsp;<span class="op" id="6956116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956120"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6956121">.</span><span class="ident" id="6956122">Fatalf</span><span class="op" id="6956128">(</span><span class="string" id="6956129">&#34;error&nbsp;reading&nbsp;the&nbsp;image&nbsp;attachment&nbsp;at&nbsp;the&nbsp;end:&nbsp;%v&#34;</span><span class="op" id="6956180">,</span>&nbsp;<span class="ident" id="6956182"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6956185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956192">_</span><span class="op" id="6956193">,</span>&nbsp;<span class="ident" id="6956195"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6956199">=</span>&nbsp;<span class="ident" id="6956201"><a href="/mime/multipart/multipart_test.go.html#6955143">mr</a></span><span class="op" id="6956203">.</span><span class="ident" id="6956204">NextPart</span><span class="op" id="6956212">(</span><span class="op" id="6956213">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6956216">if</span>&nbsp;<span class="ident" id="6956219"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span>&nbsp;<span class="op" id="6956223">!=</span>&nbsp;<span class="ident" id="6956226"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6956228">.</span><span class="ident" id="6956229">EOF</span>&nbsp;<span class="op" id="6956233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956237"><a href="/mime/multipart/multipart_test.go.html#6954924">t</a></span><span class="op" id="6956238">.</span><span class="ident" id="6956239">Fatalf</span><span class="op" id="6956245">(</span><span class="string" id="6956246">&#34;final&nbsp;outer&nbsp;NextPart&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.EOF&#34;</span><span class="op" id="6956286">,</span>&nbsp;<span class="ident" id="6956288"><a href="/mime/multipart/multipart_test.go.html#6955051">err</a></span><span class="op" id="6956291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956294">}</span><br>
<span class="lineno"></span><span class="op" id="6956296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span><span class="keyword" id="6956299">type</span>&nbsp;<span class="ident" id="6956304">headerBody</span>&nbsp;<span class="keyword" id="6956315">struct</span>&nbsp;<span class="op" id="6956322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956325">header</span>&nbsp;<span class="ident" id="6956332"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6956341">.</span><span class="ident" id="6956342">MIMEHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956354">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6956361">string</span><br>
<span class="lineno"></span><span class="op" id="6956368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="keyword" id="6956371">func</span>&nbsp;<span class="ident" id="6956376">formData</span><span class="op" id="6956384">(</span><span class="ident" id="6956385">key</span><span class="op" id="6956388">,</span>&nbsp;<span class="ident" id="6956390">value</span>&nbsp;<span class="builtintype" id="6956396">string</span><span class="op" id="6956402">)</span>&nbsp;<span class="ident" id="6956404"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span>&nbsp;<span class="op" id="6956415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6956418">return</span>&nbsp;<span class="ident" id="6956425"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6956435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956439"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6956448">.</span><span class="ident" id="6956449">MIMEHeader</span><span class="op" id="6956459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6956464">&#34;Content-Type&#34;</span><span class="op" id="6956478">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6956487">{</span><span class="string" id="6956488">&#34;text/plain;&nbsp;charset=ISO-8859-1&#34;</span><span class="op" id="6956520">}</span><span class="op" id="6956521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6956526">&#34;Content-Disposition&#34;</span><span class="op" id="6956547">:</span>&nbsp;<span class="op" id="6956549">{</span><span class="string" id="6956550">&#34;form-data;&nbsp;name=&#34;</span>&nbsp;<span class="op" id="6956569">+</span>&nbsp;<span class="ident" id="6956571"><a href="/mime/multipart/multipart_test.go.html#6956385">key</a></span><span class="op" id="6956574">}</span><span class="op" id="6956575">,</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956579">}</span><span class="op" id="6956580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956584"><a href="/mime/multipart/multipart_test.go.html#6956390">value</a></span><span class="op" id="6956589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6956592">}</span><br>
<span class="lineno"></span><span class="op" id="6956594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword" id="6956597">type</span>&nbsp;<span class="ident" id="6956602">parseTest</span>&nbsp;<span class="keyword" id="6956612">struct</span>&nbsp;<span class="op" id="6956619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956622">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6956630">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956638">in</span><span class="op" id="6956640">,</span>&nbsp;<span class="ident" id="6956642">sep</span>&nbsp;<span class="builtintype" id="6956646">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6956654">want</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6956662">[</span><span class="op" id="6956663">]</span><span class="ident" id="6956664"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><br>
<span class="lineno"></span><span class="op" id="6956675">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span><span class="keyword" id="6956678">var</span>&nbsp;<span class="ident" id="6956682">parseTests</span>&nbsp;<span class="op" id="6956693">=</span>&nbsp;<span class="op" id="6956695">[</span><span class="op" id="6956696">]</span><span class="ident" id="6956697"><a href="/mime/multipart/multipart_test.go.html#6956602">parseTest</a></span><span class="op" id="6956706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956709">//&nbsp;Actual&nbsp;body&nbsp;from&nbsp;App&nbsp;Engine&nbsp;on&nbsp;a&nbsp;blob&nbsp;upload.&nbsp;The&nbsp;final&nbsp;part&nbsp;(the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956779">//&nbsp;Content-Type:&nbsp;message/external-body)&nbsp;is&nbsp;what&nbsp;App&nbsp;Engine&nbsp;replaces</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956848">//&nbsp;the&nbsp;uploaded&nbsp;file&nbsp;with.&nbsp;&nbsp;The&nbsp;other&nbsp;form&nbsp;fields&nbsp;(prefixed&nbsp;with</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956914">//&nbsp;&#34;other&#34;&nbsp;in&nbsp;their&nbsp;form-data&nbsp;name)&nbsp;are&nbsp;unchanged.&nbsp;&nbsp;A&nbsp;bug&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6956977">//&nbsp;reported&nbsp;with&nbsp;blob&nbsp;uploads&nbsp;failing&nbsp;when&nbsp;the&nbsp;other&nbsp;fields&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6957043">//&nbsp;empty.&nbsp;This&nbsp;was&nbsp;the&nbsp;MIME&nbsp;POST&nbsp;body&nbsp;that&nbsp;previously&nbsp;failed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6957106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6957110">name</span><span class="op" id="6957114">:</span>&nbsp;<span class="string" id="6957116">&#34;App&nbsp;Engine&nbsp;post&#34;</span><span class="op" id="6957133">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6957137">sep</span><span class="op" id="6957140">:</span>&nbsp;&nbsp;<span class="string" id="6957143">&#34;00151757727e9583fd04bfbca4c6&#34;</span><span class="op" id="6957173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6957177">in</span><span class="op" id="6957179">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6957183">&#34;--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherEmpty1\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherFoo1\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherFoo2\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherEmpty2\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatFoo\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatFoo\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatEmpty\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatEmpty\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=submit\r\n\r\nSubmit\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;message/external-body;&nbsp;charset=ISO-8859-1;&nbsp;blob-key=AHAZQqG84qllx7HUqO_oou5EvdYQNS3Mbbkb0RjjBoM_Kc1UqEN2ygDxWiyCPulIhpHRPx-VbpB6RX4MrsqhWAi_ZxJ48O9P2cTIACbvATHvg7IgbvZytyGMpL7xO1tlIvgwcM47JNfv_tGhy1XwyEUO8oldjPqg5Q\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\nContent-Type:&nbsp;image/png\r\nContent-Length:&nbsp;232303\r\nX-AppEngine-Upload-Creation:&nbsp;2012-05-10&nbsp;23:14:02.715173\r\nContent-MD5:&nbsp;MzRjODU1ZDZhZGU1NmRlOWEwZmMwMDdlODBmZTA0NzA=\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\n\r\n--00151757727e9583fd04bfbca4c6--&#34;</span><span class="op" id="6959091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959095">want</span><span class="op" id="6959099">:</span>&nbsp;<span class="op" id="6959101">[</span><span class="op" id="6959102">]</span><span class="ident" id="6959103"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6959113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959118"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959126">(</span><span class="string" id="6959127">&#34;otherEmpty1&#34;</span><span class="op" id="6959140">,</span>&nbsp;<span class="string" id="6959142">&#34;&#34;</span><span class="op" id="6959144">)</span><span class="op" id="6959145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959150"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959158">(</span><span class="string" id="6959159">&#34;otherFoo1&#34;</span><span class="op" id="6959170">,</span>&nbsp;<span class="string" id="6959172">&#34;foo&#34;</span><span class="op" id="6959177">)</span><span class="op" id="6959178">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959183"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959191">(</span><span class="string" id="6959192">&#34;otherFoo2&#34;</span><span class="op" id="6959203">,</span>&nbsp;<span class="string" id="6959205">&#34;foo&#34;</span><span class="op" id="6959210">)</span><span class="op" id="6959211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959216"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959224">(</span><span class="string" id="6959225">&#34;otherEmpty2&#34;</span><span class="op" id="6959238">,</span>&nbsp;<span class="string" id="6959240">&#34;&#34;</span><span class="op" id="6959242">)</span><span class="op" id="6959243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959248"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959256">(</span><span class="string" id="6959257">&#34;otherRepeatFoo&#34;</span><span class="op" id="6959273">,</span>&nbsp;<span class="string" id="6959275">&#34;foo&#34;</span><span class="op" id="6959280">)</span><span class="op" id="6959281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959286"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959294">(</span><span class="string" id="6959295">&#34;otherRepeatFoo&#34;</span><span class="op" id="6959311">,</span>&nbsp;<span class="string" id="6959313">&#34;foo&#34;</span><span class="op" id="6959318">)</span><span class="op" id="6959319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959324"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959332">(</span><span class="string" id="6959333">&#34;otherRepeatEmpty&#34;</span><span class="op" id="6959351">,</span>&nbsp;<span class="string" id="6959353">&#34;&#34;</span><span class="op" id="6959355">)</span><span class="op" id="6959356">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959361"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959369">(</span><span class="string" id="6959370">&#34;otherRepeatEmpty&#34;</span><span class="op" id="6959388">,</span>&nbsp;<span class="string" id="6959390">&#34;&#34;</span><span class="op" id="6959392">)</span><span class="op" id="6959393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6959398"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6959406">(</span><span class="string" id="6959407">&#34;submit&#34;</span><span class="op" id="6959415">,</span>&nbsp;<span class="string" id="6959417">&#34;Submit&#34;</span><span class="op" id="6959425">)</span><span class="op" id="6959426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6959431">{</span><span class="ident" id="6959432"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6959441">.</span><span class="ident" id="6959442">MIMEHeader</span><span class="op" id="6959452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6959458">&#34;Content-Type&#34;</span><span class="op" id="6959472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6959481">{</span><span class="string" id="6959482">&#34;message/external-body;&nbsp;charset=ISO-8859-1;&nbsp;blob-key=AHAZQqG84qllx7HUqO_oou5EvdYQNS3Mbbkb0RjjBoM_Kc1UqEN2ygDxWiyCPulIhpHRPx-VbpB6RX4MrsqhWAi_ZxJ48O9P2cTIACbvATHvg7IgbvZytyGMpL7xO1tlIvgwcM47JNfv_tGhy1XwyEUO8oldjPqg5Q&#34;</span><span class="op" id="6959698">}</span><span class="op" id="6959699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6959705">&#34;Content-Disposition&#34;</span><span class="op" id="6959726">:</span>&nbsp;<span class="op" id="6959728">{</span><span class="string" id="6959729">&#34;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;&#34;</span><span class="op" id="6959774">}</span><span class="op" id="6959775">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6959780">}</span><span class="op" id="6959781">,</span>&nbsp;<span class="string" id="6959783">&#34;Content-Type:&nbsp;image/png\r\nContent-Length:&nbsp;232303\r\nX-AppEngine-Upload-Creation:&nbsp;2012-05-10&nbsp;23:14:02.715173\r\nContent-MD5:&nbsp;MzRjODU1ZDZhZGU1NmRlOWEwZmMwMDdlODBmZTA0NzA=\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\n&#34;</span><span class="op" id="6960030">}</span><span class="op" id="6960031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960035">}</span><span class="op" id="6960036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960039">}</span><span class="op" id="6960040">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6960044">//&nbsp;Single&nbsp;empty&nbsp;part,&nbsp;ended&nbsp;with&nbsp;--boundary&nbsp;immediately&nbsp;after&nbsp;headers.</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960120">name</span><span class="op" id="6960124">:</span>&nbsp;<span class="string" id="6960126">&#34;single&nbsp;empty&nbsp;part,&nbsp;--boundary&#34;</span><span class="op" id="6960157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960161">sep</span><span class="op" id="6960164">:</span>&nbsp;&nbsp;<span class="string" id="6960167">&#34;abc&#34;</span><span class="op" id="6960172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960176">in</span><span class="op" id="6960178">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6960182">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--&#34;</span><span class="op" id="6960216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960220">want</span><span class="op" id="6960224">:</span>&nbsp;<span class="op" id="6960226">[</span><span class="op" id="6960227">]</span><span class="ident" id="6960228"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6960238">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960243">{</span><span class="ident" id="6960244"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6960253">.</span><span class="ident" id="6960254">MIMEHeader</span><span class="op" id="6960264">{</span><span class="string" id="6960265">&#34;Foo&#34;</span><span class="op" id="6960270">:</span>&nbsp;<span class="op" id="6960272">{</span><span class="string" id="6960273">&#34;bar&#34;</span><span class="op" id="6960278">}</span><span class="op" id="6960279">}</span><span class="op" id="6960280">,</span>&nbsp;<span class="string" id="6960282">&#34;&#34;</span><span class="op" id="6960284">}</span><span class="op" id="6960285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960289">}</span><span class="op" id="6960290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960293">}</span><span class="op" id="6960294">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6960298">//&nbsp;Single&nbsp;empty&nbsp;part,&nbsp;ended&nbsp;with&nbsp;\r\n--boundary&nbsp;immediately&nbsp;after&nbsp;headers.</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960378">name</span><span class="op" id="6960382">:</span>&nbsp;<span class="string" id="6960384">&#34;single&nbsp;empty&nbsp;part,&nbsp;\r\n--boundary&#34;</span><span class="op" id="6960419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960423">sep</span><span class="op" id="6960426">:</span>&nbsp;&nbsp;<span class="string" id="6960429">&#34;abc&#34;</span><span class="op" id="6960434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960438">in</span><span class="op" id="6960440">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6960444">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n\r\n--abc--&#34;</span><span class="op" id="6960482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960486">want</span><span class="op" id="6960490">:</span>&nbsp;<span class="op" id="6960492">[</span><span class="op" id="6960493">]</span><span class="ident" id="6960494"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6960504">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960509">{</span><span class="ident" id="6960510"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6960519">.</span><span class="ident" id="6960520">MIMEHeader</span><span class="op" id="6960530">{</span><span class="string" id="6960531">&#34;Foo&#34;</span><span class="op" id="6960536">:</span>&nbsp;<span class="op" id="6960538">{</span><span class="string" id="6960539">&#34;bar&#34;</span><span class="op" id="6960544">}</span><span class="op" id="6960545">}</span><span class="op" id="6960546">,</span>&nbsp;<span class="string" id="6960548">&#34;&#34;</span><span class="op" id="6960550">}</span><span class="op" id="6960551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960555">}</span><span class="op" id="6960556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960559">}</span><span class="op" id="6960560">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6960564">//&nbsp;Final&nbsp;part&nbsp;empty.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960590">name</span><span class="op" id="6960594">:</span>&nbsp;<span class="string" id="6960596">&#34;final&nbsp;part&nbsp;empty&#34;</span><span class="op" id="6960614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960618">sep</span><span class="op" id="6960621">:</span>&nbsp;&nbsp;<span class="string" id="6960624">&#34;abc&#34;</span><span class="op" id="6960629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960633">in</span><span class="op" id="6960635">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6960639">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc\r\nFoo2:&nbsp;bar2\r\n\r\n--abc--&#34;</span><span class="op" id="6960700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960704">want</span><span class="op" id="6960708">:</span>&nbsp;<span class="op" id="6960710">[</span><span class="op" id="6960711">]</span><span class="ident" id="6960712"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6960722">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960727">{</span><span class="ident" id="6960728"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6960737">.</span><span class="ident" id="6960738">MIMEHeader</span><span class="op" id="6960748">{</span><span class="string" id="6960749">&#34;Foo&#34;</span><span class="op" id="6960754">:</span>&nbsp;<span class="op" id="6960756">{</span><span class="string" id="6960757">&#34;bar&#34;</span><span class="op" id="6960762">}</span><span class="op" id="6960763">}</span><span class="op" id="6960764">,</span>&nbsp;<span class="string" id="6960766">&#34;&#34;</span><span class="op" id="6960768">}</span><span class="op" id="6960769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960774">{</span><span class="ident" id="6960775"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6960784">.</span><span class="ident" id="6960785">MIMEHeader</span><span class="op" id="6960795">{</span><span class="string" id="6960796">&#34;Foo2&#34;</span><span class="op" id="6960802">:</span>&nbsp;<span class="op" id="6960804">{</span><span class="string" id="6960805">&#34;bar2&#34;</span><span class="op" id="6960811">}</span><span class="op" id="6960812">}</span><span class="op" id="6960813">,</span>&nbsp;<span class="string" id="6960815">&#34;&#34;</span><span class="op" id="6960817">}</span><span class="op" id="6960818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960822">}</span><span class="op" id="6960823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960826">}</span><span class="op" id="6960827">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6960831">//&nbsp;Final&nbsp;part&nbsp;empty&nbsp;with&nbsp;newlines&nbsp;after&nbsp;final&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6960889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960893">name</span><span class="op" id="6960897">:</span>&nbsp;<span class="string" id="6960899">&#34;final&nbsp;part&nbsp;empty&nbsp;then&nbsp;crlf&#34;</span><span class="op" id="6960927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960931">sep</span><span class="op" id="6960934">:</span>&nbsp;&nbsp;<span class="string" id="6960937">&#34;abc&#34;</span><span class="op" id="6960942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960946">in</span><span class="op" id="6960948">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6960952">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--\r\n&#34;</span><span class="op" id="6960990">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6960994">want</span><span class="op" id="6960998">:</span>&nbsp;<span class="op" id="6961000">[</span><span class="op" id="6961001">]</span><span class="ident" id="6961002"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6961012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961017">{</span><span class="ident" id="6961018"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6961027">.</span><span class="ident" id="6961028">MIMEHeader</span><span class="op" id="6961038">{</span><span class="string" id="6961039">&#34;Foo&#34;</span><span class="op" id="6961044">:</span>&nbsp;<span class="op" id="6961046">{</span><span class="string" id="6961047">&#34;bar&#34;</span><span class="op" id="6961052">}</span><span class="op" id="6961053">}</span><span class="op" id="6961054">,</span>&nbsp;<span class="string" id="6961056">&#34;&#34;</span><span class="op" id="6961058">}</span><span class="op" id="6961059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961063">}</span><span class="op" id="6961064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961067">}</span><span class="op" id="6961068">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6961072">//&nbsp;Final&nbsp;part&nbsp;empty&nbsp;with&nbsp;lwsp-chars&nbsp;after&nbsp;final&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961136">name</span><span class="op" id="6961140">:</span>&nbsp;<span class="string" id="6961142">&#34;final&nbsp;part&nbsp;empty&nbsp;then&nbsp;lwsp&#34;</span><span class="op" id="6961170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961174">sep</span><span class="op" id="6961177">:</span>&nbsp;&nbsp;<span class="string" id="6961180">&#34;abc&#34;</span><span class="op" id="6961185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961189">in</span><span class="op" id="6961191">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6961195">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--&nbsp;\t&#34;</span><span class="op" id="6961232">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961236">want</span><span class="op" id="6961240">:</span>&nbsp;<span class="op" id="6961242">[</span><span class="op" id="6961243">]</span><span class="ident" id="6961244"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6961254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961259">{</span><span class="ident" id="6961260"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6961269">.</span><span class="ident" id="6961270">MIMEHeader</span><span class="op" id="6961280">{</span><span class="string" id="6961281">&#34;Foo&#34;</span><span class="op" id="6961286">:</span>&nbsp;<span class="op" id="6961288">{</span><span class="string" id="6961289">&#34;bar&#34;</span><span class="op" id="6961294">}</span><span class="op" id="6961295">}</span><span class="op" id="6961296">,</span>&nbsp;<span class="string" id="6961298">&#34;&#34;</span><span class="op" id="6961300">}</span><span class="op" id="6961301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961305">}</span><span class="op" id="6961306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961309">}</span><span class="op" id="6961310">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6961314">//&nbsp;No&nbsp;parts&nbsp;(empty&nbsp;form&nbsp;as&nbsp;submitted&nbsp;by&nbsp;Chrome)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961367">name</span><span class="op" id="6961371">:</span>&nbsp;<span class="string" id="6961373">&#34;no&nbsp;parts&#34;</span><span class="op" id="6961383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961387">sep</span><span class="op" id="6961390">:</span>&nbsp;&nbsp;<span class="string" id="6961393">&#34;----WebKitFormBoundaryQfEAfzFOiSemeHfA&#34;</span><span class="op" id="6961433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961437">in</span><span class="op" id="6961439">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6961443">&#34;------WebKitFormBoundaryQfEAfzFOiSemeHfA--\r\n&#34;</span><span class="op" id="6961491">,</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961495">want</span><span class="op" id="6961499">:</span>&nbsp;<span class="op" id="6961501">[</span><span class="op" id="6961502">]</span><span class="ident" id="6961503"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6961513">{</span><span class="op" id="6961514">}</span><span class="op" id="6961515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961518">}</span><span class="op" id="6961519">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6961523">//&nbsp;Part&nbsp;containing&nbsp;data&nbsp;starting&nbsp;with&nbsp;the&nbsp;boundary,&nbsp;but&nbsp;with&nbsp;additional&nbsp;suffix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961604">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961608">name</span><span class="op" id="6961612">:</span>&nbsp;<span class="string" id="6961614">&#34;fake&nbsp;separator&nbsp;as&nbsp;data&#34;</span><span class="op" id="6961638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961642">sep</span><span class="op" id="6961645">:</span>&nbsp;&nbsp;<span class="string" id="6961648">&#34;sep&#34;</span><span class="op" id="6961653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961657">in</span><span class="op" id="6961659">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6961663">&#34;--sep\r\nFoo:&nbsp;bar\r\n\r\n--sepFAKE\r\n--sep--&#34;</span><span class="op" id="6961710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961714">want</span><span class="op" id="6961718">:</span>&nbsp;<span class="op" id="6961720">[</span><span class="op" id="6961721">]</span><span class="ident" id="6961722"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6961732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961737">{</span><span class="ident" id="6961738"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6961747">.</span><span class="ident" id="6961748">MIMEHeader</span><span class="op" id="6961758">{</span><span class="string" id="6961759">&#34;Foo&#34;</span><span class="op" id="6961764">:</span>&nbsp;<span class="op" id="6961766">{</span><span class="string" id="6961767">&#34;bar&#34;</span><span class="op" id="6961772">}</span><span class="op" id="6961773">}</span><span class="op" id="6961774">,</span>&nbsp;<span class="string" id="6961776">&#34;--sepFAKE&#34;</span><span class="op" id="6961787">}</span><span class="op" id="6961788">,</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961792">}</span><span class="op" id="6961793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961796">}</span><span class="op" id="6961797">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6961801">//&nbsp;Part&nbsp;containing&nbsp;a&nbsp;boundary&nbsp;with&nbsp;whitespace&nbsp;following&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961862">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961866">name</span><span class="op" id="6961870">:</span>&nbsp;<span class="string" id="6961872">&#34;boundary&nbsp;with&nbsp;whitespace&#34;</span><span class="op" id="6961898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961902">sep</span><span class="op" id="6961905">:</span>&nbsp;&nbsp;<span class="string" id="6961908">&#34;sep&#34;</span><span class="op" id="6961913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961917">in</span><span class="op" id="6961919">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6961923">&#34;--sep&nbsp;\r\nFoo:&nbsp;bar\r\n\r\ntext\r\n--sep--&#34;</span><span class="op" id="6961966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6961970">want</span><span class="op" id="6961974">:</span>&nbsp;<span class="op" id="6961976">[</span><span class="op" id="6961977">]</span><span class="ident" id="6961978"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6961988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6961993">{</span><span class="ident" id="6961994"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6962003">.</span><span class="ident" id="6962004">MIMEHeader</span><span class="op" id="6962014">{</span><span class="string" id="6962015">&#34;Foo&#34;</span><span class="op" id="6962020">:</span>&nbsp;<span class="op" id="6962022">{</span><span class="string" id="6962023">&#34;bar&#34;</span><span class="op" id="6962028">}</span><span class="op" id="6962029">}</span><span class="op" id="6962030">,</span>&nbsp;<span class="string" id="6962032">&#34;text&#34;</span><span class="op" id="6962038">}</span><span class="op" id="6962039">,</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962043">}</span><span class="op" id="6962044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962047">}</span><span class="op" id="6962048">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6962052">//&nbsp;With&nbsp;ignored&nbsp;leading&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962083">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962087">name</span><span class="op" id="6962091">:</span>&nbsp;<span class="string" id="6962093">&#34;leading&nbsp;line&#34;</span><span class="op" id="6962107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962111">sep</span><span class="op" id="6962114">:</span>&nbsp;&nbsp;<span class="string" id="6962117">&#34;MyBoundary&#34;</span><span class="op" id="6962129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962133">in</span><span class="op" id="6962135">:</span>&nbsp;<span class="ident" id="6962137"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6962144">.</span><span class="ident" id="6962145">Replace</span><span class="op" id="6962152">(</span><span class="string" id="6962153">`This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>foo:&nbsp;bar<br>
<span class="lineno">560</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>--MyBoundary--`</span><span class="op" id="6962246">,</span>&nbsp;<span class="string" id="6962248">&#34;\n&#34;</span><span class="op" id="6962252">,</span>&nbsp;<span class="string" id="6962254">&#34;\r\n&#34;</span><span class="op" id="6962260">,</span>&nbsp;<span class="op" id="6962262">-</span><span class="num" id="6962263">1</span><span class="op" id="6962264">)</span><span class="op" id="6962265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962269">want</span><span class="op" id="6962273">:</span>&nbsp;<span class="op" id="6962275">[</span><span class="op" id="6962276">]</span><span class="ident" id="6962277"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6962287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962292">{</span><span class="ident" id="6962293"><a href="/mime/multipart/multipart_test.go.html#6944521">textproto</a></span><span class="op" id="6962302">.</span><span class="ident" id="6962303">MIMEHeader</span><span class="op" id="6962313">{</span><span class="string" id="6962314">&#34;Foo&#34;</span><span class="op" id="6962319">:</span>&nbsp;<span class="op" id="6962321">{</span><span class="string" id="6962322">&#34;bar&#34;</span><span class="op" id="6962327">}</span><span class="op" id="6962328">}</span><span class="op" id="6962329">,</span>&nbsp;<span class="string" id="6962331">&#34;&#34;</span><span class="op" id="6962333">}</span><span class="op" id="6962334">,</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962338">}</span><span class="op" id="6962339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962342">}</span><span class="op" id="6962343">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962347"><a href="/mime/multipart/multipart_test.go.html#6963349">roundTripParseTest</a></span><span class="op" id="6962365">(</span><span class="op" id="6962366">)</span><span class="op" id="6962367">,</span><br>
<span class="lineno"></span><span class="op" id="6962369">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="keyword" id="6962372">func</span>&nbsp;<span class="ident" id="6962377">TestParse</span><span class="op" id="6962386">(</span><span class="ident" id="6962387">t</span>&nbsp;<span class="op" id="6962389">*</span><span class="ident" id="6962390"><a href="/mime/multipart/multipart_test.go.html#6944566">testing</a></span><span class="op" id="6962397">.</span><span class="ident" id="6962398">T</span><span class="op" id="6962399">)</span>&nbsp;<span class="op" id="6962401">{</span><br>
<span class="lineno"></span><span class="ident" id="6962403">Cases</span><span class="op" id="6962408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962411">for</span>&nbsp;<span class="ident" id="6962415">_</span><span class="op" id="6962416">,</span>&nbsp;<span class="ident" id="6962418">tt</span>&nbsp;<span class="op" id="6962421">:=</span>&nbsp;<span class="keyword" id="6962424">range</span>&nbsp;<span class="ident" id="6962430"><a href="/mime/multipart/multipart_test.go.html#6956682">parseTests</a></span>&nbsp;<span class="op" id="6962441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962445">r</span>&nbsp;<span class="op" id="6962447">:=</span>&nbsp;<span class="ident" id="6962450"><a href="/mime/multipart/multipart.go.html#3610677">NewReader</a></span><span class="op" id="6962459">(</span><span class="ident" id="6962460"><a href="/mime/multipart/multipart_test.go.html#6944555">strings</a></span><span class="op" id="6962467">.</span><span class="ident" id="6962468">NewReader</span><span class="op" id="6962477">(</span><span class="ident" id="6962478"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962480">.</span><span class="ident" id="6962481">in</span><span class="op" id="6962483">)</span><span class="op" id="6962484">,</span>&nbsp;<span class="ident" id="6962486"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962488">.</span><span class="ident" id="6962489">sep</span><span class="op" id="6962492">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962496">got</span>&nbsp;<span class="op" id="6962500">:=</span>&nbsp;<span class="op" id="6962503">[</span><span class="op" id="6962504">]</span><span class="ident" id="6962505"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6962515">{</span><span class="op" id="6962516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962520">for</span>&nbsp;<span class="op" id="6962524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962529">p</span><span class="op" id="6962530">,</span>&nbsp;<span class="ident" id="6962532">err</span>&nbsp;<span class="op" id="6962536">:=</span>&nbsp;<span class="ident" id="6962539"><a href="/mime/multipart/multipart_test.go.html#6962445">r</a></span><span class="op" id="6962540">.</span><span class="ident" id="6962541">NextPart</span><span class="op" id="6962549">(</span><span class="op" id="6962550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962555">if</span>&nbsp;<span class="ident" id="6962558"><a href="/mime/multipart/multipart_test.go.html#6962532">err</a></span>&nbsp;<span class="op" id="6962562">==</span>&nbsp;<span class="ident" id="6962565"><a href="/mime/multipart/multipart_test.go.html#6944502">io</a></span><span class="op" id="6962567">.</span><span class="ident" id="6962568">EOF</span>&nbsp;<span class="op" id="6962572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962578">break</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962592">if</span>&nbsp;<span class="ident" id="6962595"><a href="/mime/multipart/multipart_test.go.html#6962532">err</a></span>&nbsp;<span class="op" id="6962599">!=</span>&nbsp;<span class="ident" id="6962602">nil</span>&nbsp;<span class="op" id="6962606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962612"><a href="/mime/multipart/multipart_test.go.html#6962387">t</a></span><span class="op" id="6962613">.</span><span class="ident" id="6962614">Errorf</span><span class="op" id="6962620">(</span><span class="string" id="6962621">&#34;in&nbsp;test&nbsp;%q,&nbsp;NextPart:&nbsp;%v&#34;</span><span class="op" id="6962647">,</span>&nbsp;<span class="ident" id="6962649"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962651">.</span><span class="ident" id="6962652">name</span><span class="op" id="6962656">,</span>&nbsp;<span class="ident" id="6962658"><a href="/mime/multipart/multipart_test.go.html#6962532">err</a></span><span class="op" id="6962661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962667">continue</span>&nbsp;<span class="ident" id="6962676">Cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962685">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962690">pbody</span><span class="op" id="6962695">,</span>&nbsp;<span class="ident" id="6962697"><a href="/mime/multipart/multipart_test.go.html#6962532">err</a></span>&nbsp;<span class="op" id="6962701">:=</span>&nbsp;<span class="ident" id="6962704"><a href="/mime/multipart/multipart_test.go.html#6944508">ioutil</a></span><span class="op" id="6962710">.</span><span class="ident" id="6962711">ReadAll</span><span class="op" id="6962718">(</span><span class="ident" id="6962719"><a href="/mime/multipart/multipart_test.go.html#6962529">p</a></span><span class="op" id="6962720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962725">if</span>&nbsp;<span class="ident" id="6962728"><a href="/mime/multipart/multipart_test.go.html#6962532">err</a></span>&nbsp;<span class="op" id="6962732">!=</span>&nbsp;<span class="ident" id="6962735">nil</span>&nbsp;<span class="op" id="6962739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962745"><a href="/mime/multipart/multipart_test.go.html#6962387">t</a></span><span class="op" id="6962746">.</span><span class="ident" id="6962747">Errorf</span><span class="op" id="6962753">(</span><span class="string" id="6962754">&#34;in&nbsp;test&nbsp;%q,&nbsp;error&nbsp;reading&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="6962790">,</span>&nbsp;<span class="ident" id="6962792"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962794">.</span><span class="ident" id="6962795">name</span><span class="op" id="6962799">,</span>&nbsp;<span class="ident" id="6962801"><a href="/mime/multipart/multipart_test.go.html#6962532">err</a></span><span class="op" id="6962804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962810">continue</span>&nbsp;<span class="ident" id="6962819">Cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962828">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962833"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span>&nbsp;<span class="op" id="6962837">=</span>&nbsp;<span class="builtinfunc" id="6962839">append</span><span class="op" id="6962845">(</span><span class="ident" id="6962846"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6962849">,</span>&nbsp;<span class="ident" id="6962851"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6962861">{</span><span class="ident" id="6962862"><a href="/mime/multipart/multipart_test.go.html#6962529">p</a></span><span class="op" id="6962863">.</span><span class="ident" id="6962864">Header</span><span class="op" id="6962870">,</span>&nbsp;<span class="builtintype" id="6962872">string</span><span class="op" id="6962878">(</span><span class="ident" id="6962879"><a href="/mime/multipart/multipart_test.go.html#6962690">pbody</a></span><span class="op" id="6962884">)</span><span class="op" id="6962885">}</span><span class="op" id="6962886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6962890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6962894">if</span>&nbsp;<span class="op" id="6962897">!</span><span class="ident" id="6962898"><a href="/mime/multipart/multipart_test.go.html#6944544">reflect</a></span><span class="op" id="6962905">.</span><span class="ident" id="6962906">DeepEqual</span><span class="op" id="6962915">(</span><span class="ident" id="6962916"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962918">.</span><span class="ident" id="6962919">want</span><span class="op" id="6962923">,</span>&nbsp;<span class="ident" id="6962925"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6962928">)</span>&nbsp;<span class="op" id="6962930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6962935"><a href="/mime/multipart/multipart_test.go.html#6962387">t</a></span><span class="op" id="6962936">.</span><span class="ident" id="6962937">Errorf</span><span class="op" id="6962943">(</span><span class="string" id="6962944">&#34;test&nbsp;%q:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="6962974">,</span>&nbsp;<span class="ident" id="6962976"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962978">.</span><span class="ident" id="6962979">name</span><span class="op" id="6962983">,</span>&nbsp;<span class="ident" id="6962985"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6962988">,</span>&nbsp;<span class="ident" id="6962990"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6962992">.</span><span class="ident" id="6962993">want</span><span class="op" id="6962997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963002">if</span>&nbsp;<span class="builtinfunc" id="6963005">len</span><span class="op" id="6963008">(</span><span class="ident" id="6963009"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6963011">.</span><span class="ident" id="6963012">want</span><span class="op" id="6963016">)</span>&nbsp;<span class="op" id="6963018">!=</span>&nbsp;<span class="builtinfunc" id="6963021">len</span><span class="op" id="6963024">(</span><span class="ident" id="6963025"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6963028">)</span>&nbsp;<span class="op" id="6963030">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963036"><a href="/mime/multipart/multipart_test.go.html#6962387">t</a></span><span class="op" id="6963037">.</span><span class="ident" id="6963038">Errorf</span><span class="op" id="6963044">(</span><span class="string" id="6963045">&#34;test&nbsp;%q:&nbsp;got&nbsp;%d&nbsp;parts,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6963077">,</span>&nbsp;<span class="ident" id="6963079"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6963081">.</span><span class="ident" id="6963082">name</span><span class="op" id="6963086">,</span>&nbsp;<span class="builtinfunc" id="6963088">len</span><span class="op" id="6963091">(</span><span class="ident" id="6963092"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6963095">)</span><span class="op" id="6963096">,</span>&nbsp;<span class="builtinfunc" id="6963098">len</span><span class="op" id="6963101">(</span><span class="ident" id="6963102"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6963104">.</span><span class="ident" id="6963105">want</span><span class="op" id="6963109">)</span><span class="op" id="6963110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963115">}</span>&nbsp;<span class="keyword" id="6963117">else</span>&nbsp;<span class="keyword" id="6963122">if</span>&nbsp;<span class="builtinfunc" id="6963125">len</span><span class="op" id="6963128">(</span><span class="ident" id="6963129"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6963132">)</span>&nbsp;<span class="op" id="6963134">&gt;</span>&nbsp;<span class="num" id="6963136">1</span>&nbsp;<span class="op" id="6963138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963144">for</span>&nbsp;<span class="ident" id="6963148">pi</span><span class="op" id="6963150">,</span>&nbsp;<span class="ident" id="6963152">wantPart</span>&nbsp;<span class="op" id="6963161">:=</span>&nbsp;<span class="keyword" id="6963164">range</span>&nbsp;<span class="ident" id="6963170"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6963172">.</span><span class="ident" id="6963173">want</span>&nbsp;<span class="op" id="6963178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963185">if</span>&nbsp;<span class="op" id="6963188">!</span><span class="ident" id="6963189"><a href="/mime/multipart/multipart_test.go.html#6944544">reflect</a></span><span class="op" id="6963196">.</span><span class="ident" id="6963197">DeepEqual</span><span class="op" id="6963206">(</span><span class="ident" id="6963207"><a href="/mime/multipart/multipart_test.go.html#6963152">wantPart</a></span><span class="op" id="6963215">,</span>&nbsp;<span class="ident" id="6963217"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6963220">[</span><span class="ident" id="6963221"><a href="/mime/multipart/multipart_test.go.html#6963148">pi</a></span><span class="op" id="6963223">]</span><span class="op" id="6963224">)</span>&nbsp;<span class="op" id="6963226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963234"><a href="/mime/multipart/multipart_test.go.html#6962387">t</a></span><span class="op" id="6963235">.</span><span class="ident" id="6963236">Errorf</span><span class="op" id="6963242">(</span><span class="string" id="6963243">&#34;test&nbsp;%q,&nbsp;part&nbsp;%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="6963282">,</span>&nbsp;<span class="ident" id="6963284"><a href="/mime/multipart/multipart_test.go.html#6962418">tt</a></span><span class="op" id="6963286">.</span><span class="ident" id="6963287">name</span><span class="op" id="6963291">,</span>&nbsp;<span class="ident" id="6963293"><a href="/mime/multipart/multipart_test.go.html#6963148">pi</a></span><span class="op" id="6963295">,</span>&nbsp;<span class="ident" id="6963297"><a href="/mime/multipart/multipart_test.go.html#6962496">got</a></span><span class="op" id="6963300">[</span><span class="ident" id="6963301"><a href="/mime/multipart/multipart_test.go.html#6963148">pi</a></span><span class="op" id="6963303">]</span><span class="op" id="6963304">,</span>&nbsp;<span class="ident" id="6963306"><a href="/mime/multipart/multipart_test.go.html#6963152">wantPart</a></span><span class="op" id="6963314">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963339">}</span><br>
<span class="lineno">605</span><span class="op" id="6963341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6963344">func</span>&nbsp;<span class="ident" id="6963349">roundTripParseTest</span><span class="op" id="6963367">(</span><span class="op" id="6963368">)</span>&nbsp;<span class="ident" id="6963370"><a href="/mime/multipart/multipart_test.go.html#6956602">parseTest</a></span>&nbsp;<span class="op" id="6963380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963383">t</span>&nbsp;<span class="op" id="6963385">:=</span>&nbsp;<span class="ident" id="6963388"><a href="/mime/multipart/multipart_test.go.html#6956602">parseTest</a></span><span class="op" id="6963397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963401">name</span><span class="op" id="6963405">:</span>&nbsp;<span class="string" id="6963407">&#34;round&nbsp;trip&#34;</span><span class="op" id="6963419">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963423">want</span><span class="op" id="6963427">:</span>&nbsp;<span class="op" id="6963429">[</span><span class="op" id="6963430">]</span><span class="ident" id="6963431"><a href="/mime/multipart/multipart_test.go.html#6956304">headerBody</a></span><span class="op" id="6963441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963446"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6963454">(</span><span class="string" id="6963455">&#34;empty&#34;</span><span class="op" id="6963462">,</span>&nbsp;<span class="string" id="6963464">&#34;&#34;</span><span class="op" id="6963466">)</span><span class="op" id="6963467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963472"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6963480">(</span><span class="string" id="6963481">&#34;lf&#34;</span><span class="op" id="6963485">,</span>&nbsp;<span class="string" id="6963487">&#34;\n&#34;</span><span class="op" id="6963491">)</span><span class="op" id="6963492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963497"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6963505">(</span><span class="string" id="6963506">&#34;cr&#34;</span><span class="op" id="6963510">,</span>&nbsp;<span class="string" id="6963512">&#34;\r&#34;</span><span class="op" id="6963516">)</span><span class="op" id="6963517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963522"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6963530">(</span><span class="string" id="6963531">&#34;crlf&#34;</span><span class="op" id="6963537">,</span>&nbsp;<span class="string" id="6963539">&#34;\r\n&#34;</span><span class="op" id="6963545">)</span><span class="op" id="6963546">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963551"><a href="/mime/multipart/multipart_test.go.html#6956376">formData</a></span><span class="op" id="6963559">(</span><span class="string" id="6963560">&#34;foo&#34;</span><span class="op" id="6963565">,</span>&nbsp;<span class="string" id="6963567">&#34;bar&#34;</span><span class="op" id="6963572">)</span><span class="op" id="6963573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963577">}</span><span class="op" id="6963578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963584">var</span>&nbsp;<span class="ident" id="6963588">buf</span>&nbsp;<span class="ident" id="6963592"><a href="/mime/multipart/multipart_test.go.html#6944469">bytes</a></span><span class="op" id="6963597">.</span><span class="ident" id="6963598">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963606">w</span>&nbsp;<span class="op" id="6963608">:=</span>&nbsp;<span class="ident" id="6963611"><a href="/mime/multipart/writer.go.html#3621518">NewWriter</a></span><span class="op" id="6963620">(</span><span class="op" id="6963621">&amp;</span><span class="ident" id="6963622"><a href="/mime/multipart/multipart_test.go.html#6963588">buf</a></span><span class="op" id="6963625">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963628">for</span>&nbsp;<span class="ident" id="6963632">_</span><span class="op" id="6963633">,</span>&nbsp;<span class="ident" id="6963635">p</span>&nbsp;<span class="op" id="6963637">:=</span>&nbsp;<span class="keyword" id="6963640">range</span>&nbsp;<span class="ident" id="6963646"><a href="/mime/multipart/multipart_test.go.html#6963383">t</a></span><span class="op" id="6963647">.</span><span class="ident" id="6963648">want</span>&nbsp;<span class="op" id="6963653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963657">pw</span><span class="op" id="6963659">,</span>&nbsp;<span class="ident" id="6963661">err</span>&nbsp;<span class="op" id="6963665">:=</span>&nbsp;<span class="ident" id="6963668"><a href="/mime/multipart/multipart_test.go.html#6963606">w</a></span><span class="op" id="6963669">.</span><span class="ident" id="6963670">CreatePart</span><span class="op" id="6963680">(</span><span class="ident" id="6963681"><a href="/mime/multipart/multipart_test.go.html#6963635">p</a></span><span class="op" id="6963682">.</span><span class="ident" id="6963683">header</span><span class="op" id="6963689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963693">if</span>&nbsp;<span class="ident" id="6963696"><a href="/mime/multipart/multipart_test.go.html#6963661">err</a></span>&nbsp;<span class="op" id="6963700">!=</span>&nbsp;<span class="ident" id="6963703">nil</span>&nbsp;<span class="op" id="6963707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6963712">panic</span><span class="op" id="6963717">(</span><span class="ident" id="6963718"><a href="/mime/multipart/multipart_test.go.html#6963661">err</a></span><span class="op" id="6963721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963725">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963729">_</span><span class="op" id="6963730">,</span>&nbsp;<span class="ident" id="6963732"><a href="/mime/multipart/multipart_test.go.html#6963661">err</a></span>&nbsp;<span class="op" id="6963736">=</span>&nbsp;<span class="ident" id="6963738"><a href="/mime/multipart/multipart_test.go.html#6963657">pw</a></span><span class="op" id="6963740">.</span><span class="ident" id="6963741">Write</span><span class="op" id="6963746">(</span><span class="op" id="6963747">[</span><span class="op" id="6963748">]</span><span class="builtintype" id="6963749">byte</span><span class="op" id="6963753">(</span><span class="ident" id="6963754"><a href="/mime/multipart/multipart_test.go.html#6963635">p</a></span><span class="op" id="6963755">.</span><span class="ident" id="6963756">body</span><span class="op" id="6963760">)</span><span class="op" id="6963761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963765">if</span>&nbsp;<span class="ident" id="6963768"><a href="/mime/multipart/multipart_test.go.html#6963661">err</a></span>&nbsp;<span class="op" id="6963772">!=</span>&nbsp;<span class="ident" id="6963775">nil</span>&nbsp;<span class="op" id="6963779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6963784">panic</span><span class="op" id="6963789">(</span><span class="ident" id="6963790"><a href="/mime/multipart/multipart_test.go.html#6963661">err</a></span><span class="op" id="6963793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6963800">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963803"><a href="/mime/multipart/multipart_test.go.html#6963606">w</a></span><span class="op" id="6963804">.</span><span class="ident" id="6963805">Close</span><span class="op" id="6963810">(</span><span class="op" id="6963811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963814"><a href="/mime/multipart/multipart_test.go.html#6963383">t</a></span><span class="op" id="6963815">.</span><span class="ident" id="6963816">in</span>&nbsp;<span class="op" id="6963819">=</span>&nbsp;<span class="ident" id="6963821"><a href="/mime/multipart/multipart_test.go.html#6963588">buf</a></span><span class="op" id="6963824">.</span><span class="ident" id="6963825">String</span><span class="op" id="6963831">(</span><span class="op" id="6963832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6963835"><a href="/mime/multipart/multipart_test.go.html#6963383">t</a></span><span class="op" id="6963836">.</span><span class="ident" id="6963837">sep</span>&nbsp;<span class="op" id="6963841">=</span>&nbsp;<span class="ident" id="6963843"><a href="/mime/multipart/multipart_test.go.html#6963606">w</a></span><span class="op" id="6963844">.</span><span class="ident" id="6963845">Boundary</span><span class="op" id="6963853">(</span><span class="op" id="6963854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6963857">return</span>&nbsp;<span class="ident" id="6963864"><a href="/mime/multipart/multipart_test.go.html#6963383">t</a></span><br>
<span class="lineno"></span><span class="op" id="6963866">}</span>
</div>
</body>
</html>
