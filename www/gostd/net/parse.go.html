<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4136126">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4136181">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4136235">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4136286">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="4136339">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4136387">package</span>&nbsp;<span class="ident" id="4136395">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4136400">import</span>&nbsp;<span class="op" id="4136407">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4136410">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4136416">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="4136421">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4136424">type</span>&nbsp;<span class="ident" id="4136429">file</span>&nbsp;<span class="keyword" id="4136434">struct</span>&nbsp;<span class="op" id="4136441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136444">file</span>&nbsp;&nbsp;<span class="op" id="4136450">*</span><span class="ident" id="4136451">os</span><span class="op" id="4136453">.</span><span class="ident" id="4136454">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136460">data</span>&nbsp;&nbsp;<span class="op" id="4136466">[</span><span class="op" id="4136467">]</span><span class="builtintype" id="4136468">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136474">atEOF</span>&nbsp;<span class="builtintype" id="4136480">bool</span><br>
<span class="lineno"></span><span class="op" id="4136485">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4136488">func</span>&nbsp;<span class="op" id="4136493">(</span><span class="ident" id="4136494">f</span>&nbsp;<span class="op" id="4136496">*</span><span class="ident" id="4136497">file</span><span class="op" id="4136501">)</span>&nbsp;<span class="builtinfunc" id="4136503">close</span><span class="op" id="4136508">(</span><span class="op" id="4136509">)</span>&nbsp;<span class="op" id="4136511">{</span>&nbsp;<span class="ident" id="4136513">f</span><span class="op" id="4136514">.</span><span class="ident" id="4136515">file</span><span class="op" id="4136519">.</span><span class="ident" id="4136520">Close</span><span class="op" id="4136525">(</span><span class="op" id="4136526">)</span>&nbsp;<span class="op" id="4136528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4136531">func</span>&nbsp;<span class="op" id="4136536">(</span><span class="ident" id="4136537">f</span>&nbsp;<span class="op" id="4136539">*</span><span class="ident" id="4136540">file</span><span class="op" id="4136544">)</span>&nbsp;<span class="ident" id="4136546">getLineFromData</span><span class="op" id="4136561">(</span><span class="op" id="4136562">)</span>&nbsp;<span class="op" id="4136564">(</span><span class="ident" id="4136565">s</span>&nbsp;<span class="builtintype" id="4136567">string</span><span class="op" id="4136573">,</span>&nbsp;<span class="ident" id="4136575">ok</span>&nbsp;<span class="builtintype" id="4136578">bool</span><span class="op" id="4136582">)</span>&nbsp;<span class="op" id="4136584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136587">data</span>&nbsp;<span class="op" id="4136592">:=</span>&nbsp;<span class="ident" id="4136595">f</span><span class="op" id="4136596">.</span><span class="ident" id="4136597">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136603">i</span>&nbsp;<span class="op" id="4136605">:=</span>&nbsp;<span class="num" id="4136608">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4136611">for</span>&nbsp;<span class="ident" id="4136615">i</span>&nbsp;<span class="op" id="4136617">=</span>&nbsp;<span class="num" id="4136619">0</span><span class="op" id="4136620">;</span>&nbsp;<span class="ident" id="4136622">i</span>&nbsp;<span class="op" id="4136624">&lt;</span>&nbsp;<span class="builtinfunc" id="4136626">len</span><span class="op" id="4136629">(</span><span class="ident" id="4136630">data</span><span class="op" id="4136634">)</span><span class="op" id="4136635">;</span>&nbsp;<span class="ident" id="4136637">i</span><span class="op" id="4136638">++</span>&nbsp;<span class="op" id="4136641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4136645">if</span>&nbsp;<span class="ident" id="4136648">data</span><span class="op" id="4136652">[</span><span class="ident" id="4136653">i</span><span class="op" id="4136654">]</span>&nbsp;<span class="op" id="4136656">==</span>&nbsp;<span class="string" id="4136659">&#39;\n&#39;</span>&nbsp;<span class="op" id="4136664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136669">s</span>&nbsp;<span class="op" id="4136671">=</span>&nbsp;<span class="builtintype" id="4136673">string</span><span class="op" id="4136679">(</span><span class="ident" id="4136680">data</span><span class="op" id="4136684">[</span><span class="num" id="4136685">0</span><span class="op" id="4136686">:</span><span class="ident" id="4136687">i</span><span class="op" id="4136688">]</span><span class="op" id="4136689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136694">ok</span>&nbsp;<span class="op" id="4136697">=</span>&nbsp;<span class="builtintype" id="4136699">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4136707">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136723">i</span><span class="op" id="4136724">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136730">n</span>&nbsp;<span class="op" id="4136732">:=</span>&nbsp;<span class="builtinfunc" id="4136735">len</span><span class="op" id="4136738">(</span><span class="ident" id="4136739">data</span><span class="op" id="4136743">)</span>&nbsp;<span class="op" id="4136745">-</span>&nbsp;<span class="ident" id="4136747">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4136752">copy</span><span class="op" id="4136756">(</span><span class="ident" id="4136757">data</span><span class="op" id="4136761">[</span><span class="num" id="4136762">0</span><span class="op" id="4136763">:</span><span class="op" id="4136764">]</span><span class="op" id="4136765">,</span>&nbsp;<span class="ident" id="4136767">data</span><span class="op" id="4136771">[</span><span class="ident" id="4136772">i</span><span class="op" id="4136773">:</span><span class="op" id="4136774">]</span><span class="op" id="4136775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136780">f</span><span class="op" id="4136781">.</span><span class="ident" id="4136782">data</span>&nbsp;<span class="op" id="4136787">=</span>&nbsp;<span class="ident" id="4136789">data</span><span class="op" id="4136793">[</span><span class="num" id="4136794">0</span><span class="op" id="4136795">:</span><span class="ident" id="4136796">n</span><span class="op" id="4136797">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4136802">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4136811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4136814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4136817">if</span>&nbsp;<span class="ident" id="4136820">f</span><span class="op" id="4136821">.</span><span class="ident" id="4136822">atEOF</span>&nbsp;<span class="op" id="4136828">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4136831">len</span><span class="op" id="4136834">(</span><span class="ident" id="4136835">f</span><span class="op" id="4136836">.</span><span class="ident" id="4136837">data</span><span class="op" id="4136841">)</span>&nbsp;<span class="op" id="4136843">&gt;</span>&nbsp;<span class="num" id="4136845">0</span>&nbsp;<span class="op" id="4136847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4136851">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136880">s</span>&nbsp;<span class="op" id="4136882">=</span>&nbsp;<span class="builtintype" id="4136884">string</span><span class="op" id="4136890">(</span><span class="ident" id="4136891">data</span><span class="op" id="4136895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136899">f</span><span class="op" id="4136900">.</span><span class="ident" id="4136901">data</span>&nbsp;<span class="op" id="4136906">=</span>&nbsp;<span class="ident" id="4136908">f</span><span class="op" id="4136909">.</span><span class="ident" id="4136910">data</span><span class="op" id="4136914">[</span><span class="num" id="4136915">0</span><span class="op" id="4136916">:</span><span class="num" id="4136917">0</span><span class="op" id="4136918">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4136922">ok</span>&nbsp;<span class="op" id="4136925">=</span>&nbsp;<span class="builtintype" id="4136927">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4136933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4136936">return</span><br>
<span class="lineno">45</span><span class="op" id="4136943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4136946">func</span>&nbsp;<span class="op" id="4136951">(</span><span class="ident" id="4136952">f</span>&nbsp;<span class="op" id="4136954">*</span><span class="ident" id="4136955">file</span><span class="op" id="4136959">)</span>&nbsp;<span class="ident" id="4136961">readLine</span><span class="op" id="4136969">(</span><span class="op" id="4136970">)</span>&nbsp;<span class="op" id="4136972">(</span><span class="ident" id="4136973">s</span>&nbsp;<span class="builtintype" id="4136975">string</span><span class="op" id="4136981">,</span>&nbsp;<span class="ident" id="4136983">ok</span>&nbsp;<span class="builtintype" id="4136986">bool</span><span class="op" id="4136990">)</span>&nbsp;<span class="op" id="4136992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4136995">if</span>&nbsp;<span class="ident" id="4136998">s</span><span class="op" id="4136999">,</span>&nbsp;<span class="ident" id="4137001">ok</span>&nbsp;<span class="op" id="4137004">=</span>&nbsp;<span class="ident" id="4137006">f</span><span class="op" id="4137007">.</span><span class="ident" id="4137008">getLineFromData</span><span class="op" id="4137023">(</span><span class="op" id="4137024">)</span><span class="op" id="4137025">;</span>&nbsp;<span class="ident" id="4137027">ok</span>&nbsp;<span class="op" id="4137030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137034">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137045">if</span>&nbsp;<span class="builtinfunc" id="4137048">len</span><span class="op" id="4137051">(</span><span class="ident" id="4137052">f</span><span class="op" id="4137053">.</span><span class="ident" id="4137054">data</span><span class="op" id="4137058">)</span>&nbsp;<span class="op" id="4137060">&lt;</span>&nbsp;<span class="builtinfunc" id="4137062">cap</span><span class="op" id="4137065">(</span><span class="ident" id="4137066">f</span><span class="op" id="4137067">.</span><span class="ident" id="4137068">data</span><span class="op" id="4137072">)</span>&nbsp;<span class="op" id="4137074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137078">ln</span>&nbsp;<span class="op" id="4137081">:=</span>&nbsp;<span class="builtinfunc" id="4137084">len</span><span class="op" id="4137087">(</span><span class="ident" id="4137088">f</span><span class="op" id="4137089">.</span><span class="ident" id="4137090">data</span><span class="op" id="4137094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137098">n</span><span class="op" id="4137099">,</span>&nbsp;<span class="ident" id="4137101">err</span>&nbsp;<span class="op" id="4137105">:=</span>&nbsp;<span class="ident" id="4137108">io</span><span class="op" id="4137110">.</span><span class="ident" id="4137111">ReadFull</span><span class="op" id="4137119">(</span><span class="ident" id="4137120">f</span><span class="op" id="4137121">.</span><span class="ident" id="4137122">file</span><span class="op" id="4137126">,</span>&nbsp;<span class="ident" id="4137128">f</span><span class="op" id="4137129">.</span><span class="ident" id="4137130">data</span><span class="op" id="4137134">[</span><span class="ident" id="4137135">ln</span><span class="op" id="4137137">:</span><span class="builtinfunc" id="4137138">cap</span><span class="op" id="4137141">(</span><span class="ident" id="4137142">f</span><span class="op" id="4137143">.</span><span class="ident" id="4137144">data</span><span class="op" id="4137148">)</span><span class="op" id="4137149">]</span><span class="op" id="4137150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137154">if</span>&nbsp;<span class="ident" id="4137157">n</span>&nbsp;<span class="op" id="4137159">&gt;=</span>&nbsp;<span class="num" id="4137162">0</span>&nbsp;<span class="op" id="4137164">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137169">f</span><span class="op" id="4137170">.</span><span class="ident" id="4137171">data</span>&nbsp;<span class="op" id="4137176">=</span>&nbsp;<span class="ident" id="4137178">f</span><span class="op" id="4137179">.</span><span class="ident" id="4137180">data</span><span class="op" id="4137184">[</span><span class="num" id="4137185">0</span>&nbsp;<span class="op" id="4137187">:</span>&nbsp;<span class="ident" id="4137189">ln</span><span class="op" id="4137191">+</span><span class="ident" id="4137192">n</span><span class="op" id="4137193">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137201">if</span>&nbsp;<span class="ident" id="4137204">err</span>&nbsp;<span class="op" id="4137208">==</span>&nbsp;<span class="ident" id="4137211">io</span><span class="op" id="4137213">.</span><span class="ident" id="4137214">EOF</span>&nbsp;<span class="op" id="4137218">||</span>&nbsp;<span class="ident" id="4137221">err</span>&nbsp;<span class="op" id="4137225">==</span>&nbsp;<span class="ident" id="4137228">io</span><span class="op" id="4137230">.</span><span class="ident" id="4137231">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="4137248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137253">f</span><span class="op" id="4137254">.</span><span class="ident" id="4137255">atEOF</span>&nbsp;<span class="op" id="4137261">=</span>&nbsp;<span class="builtintype" id="4137263">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137270">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137276">s</span><span class="op" id="4137277">,</span>&nbsp;<span class="ident" id="4137279">ok</span>&nbsp;<span class="op" id="4137282">=</span>&nbsp;<span class="ident" id="4137284">f</span><span class="op" id="4137285">.</span><span class="ident" id="4137286">getLineFromData</span><span class="op" id="4137301">(</span><span class="op" id="4137302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137305">return</span><br>
<span class="lineno"></span><span class="op" id="4137312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="4137315">func</span>&nbsp;<span class="ident" id="4137320">open</span><span class="op" id="4137324">(</span><span class="ident" id="4137325">name</span>&nbsp;<span class="builtintype" id="4137330">string</span><span class="op" id="4137336">)</span>&nbsp;<span class="op" id="4137338">(</span><span class="op" id="4137339">*</span><span class="ident" id="4137340">file</span><span class="op" id="4137344">,</span>&nbsp;<span class="builtintype" id="4137346">error</span><span class="op" id="4137351">)</span>&nbsp;<span class="op" id="4137353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137356">fd</span><span class="op" id="4137358">,</span>&nbsp;<span class="ident" id="4137360">err</span>&nbsp;<span class="op" id="4137364">:=</span>&nbsp;<span class="ident" id="4137367">os</span><span class="op" id="4137369">.</span><span class="ident" id="4137370">Open</span><span class="op" id="4137374">(</span><span class="ident" id="4137375">name</span><span class="op" id="4137379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137382">if</span>&nbsp;<span class="ident" id="4137385">err</span>&nbsp;<span class="op" id="4137389">!=</span>&nbsp;<span class="ident" id="4137392">nil</span>&nbsp;<span class="op" id="4137396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137400">return</span>&nbsp;<span class="ident" id="4137407">nil</span><span class="op" id="4137410">,</span>&nbsp;<span class="ident" id="4137412">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137417">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137420">return</span>&nbsp;<span class="op" id="4137427">&amp;</span><span class="ident" id="4137428">file</span><span class="op" id="4137432">{</span><span class="ident" id="4137433">fd</span><span class="op" id="4137435">,</span>&nbsp;<span class="builtinfunc" id="4137437">make</span><span class="op" id="4137441">(</span><span class="op" id="4137442">[</span><span class="op" id="4137443">]</span><span class="builtintype" id="4137444">byte</span><span class="op" id="4137448">,</span>&nbsp;<span class="num" id="4137450">0</span><span class="op" id="4137451">,</span>&nbsp;<span class="ident" id="4137453">os</span><span class="op" id="4137455">.</span><span class="ident" id="4137456">Getpagesize</span><span class="op" id="4137467">(</span><span class="op" id="4137468">)</span><span class="op" id="4137469">)</span><span class="op" id="4137470">,</span>&nbsp;<span class="builtintype" id="4137472">false</span><span class="op" id="4137477">}</span><span class="op" id="4137478">,</span>&nbsp;<span class="ident" id="4137480">nil</span><br>
<span class="lineno"></span><span class="op" id="4137484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4137487">func</span>&nbsp;<span class="ident" id="4137492">byteIndex</span><span class="op" id="4137501">(</span><span class="ident" id="4137502">s</span>&nbsp;<span class="builtintype" id="4137504">string</span><span class="op" id="4137510">,</span>&nbsp;<span class="ident" id="4137512">c</span>&nbsp;<span class="builtintype" id="4137514">byte</span><span class="op" id="4137518">)</span>&nbsp;<span class="builtintype" id="4137520">int</span>&nbsp;<span class="op" id="4137524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137527">for</span>&nbsp;<span class="ident" id="4137531">i</span>&nbsp;<span class="op" id="4137533">:=</span>&nbsp;<span class="num" id="4137536">0</span><span class="op" id="4137537">;</span>&nbsp;<span class="ident" id="4137539">i</span>&nbsp;<span class="op" id="4137541">&lt;</span>&nbsp;<span class="builtinfunc" id="4137543">len</span><span class="op" id="4137546">(</span><span class="ident" id="4137547">s</span><span class="op" id="4137548">)</span><span class="op" id="4137549">;</span>&nbsp;<span class="ident" id="4137551">i</span><span class="op" id="4137552">++</span>&nbsp;<span class="op" id="4137555">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137559">if</span>&nbsp;<span class="ident" id="4137562">s</span><span class="op" id="4137563">[</span><span class="ident" id="4137564">i</span><span class="op" id="4137565">]</span>&nbsp;<span class="op" id="4137567">==</span>&nbsp;<span class="ident" id="4137570">c</span>&nbsp;<span class="op" id="4137572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137577">return</span>&nbsp;<span class="ident" id="4137584">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137594">return</span>&nbsp;<span class="op" id="4137601">-</span><span class="num" id="4137602">1</span><br>
<span class="lineno">80</span><span class="op" id="4137604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4137607">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="4137652">func</span>&nbsp;<span class="ident" id="4137657">countAnyByte</span><span class="op" id="4137669">(</span><span class="ident" id="4137670">s</span>&nbsp;<span class="builtintype" id="4137672">string</span><span class="op" id="4137678">,</span>&nbsp;<span class="ident" id="4137680">t</span>&nbsp;<span class="builtintype" id="4137682">string</span><span class="op" id="4137688">)</span>&nbsp;<span class="builtintype" id="4137690">int</span>&nbsp;<span class="op" id="4137694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137697">n</span>&nbsp;<span class="op" id="4137699">:=</span>&nbsp;<span class="num" id="4137702">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137705">for</span>&nbsp;<span class="ident" id="4137709">i</span>&nbsp;<span class="op" id="4137711">:=</span>&nbsp;<span class="num" id="4137714">0</span><span class="op" id="4137715">;</span>&nbsp;<span class="ident" id="4137717">i</span>&nbsp;<span class="op" id="4137719">&lt;</span>&nbsp;<span class="builtinfunc" id="4137721">len</span><span class="op" id="4137724">(</span><span class="ident" id="4137725">s</span><span class="op" id="4137726">)</span><span class="op" id="4137727">;</span>&nbsp;<span class="ident" id="4137729">i</span><span class="op" id="4137730">++</span>&nbsp;<span class="op" id="4137733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137737">if</span>&nbsp;<span class="ident" id="4137740">byteIndex</span><span class="op" id="4137749">(</span><span class="ident" id="4137750">t</span><span class="op" id="4137751">,</span>&nbsp;<span class="ident" id="4137753">s</span><span class="op" id="4137754">[</span><span class="ident" id="4137755">i</span><span class="op" id="4137756">]</span><span class="op" id="4137757">)</span>&nbsp;<span class="op" id="4137759">&gt;=</span>&nbsp;<span class="num" id="4137762">0</span>&nbsp;<span class="op" id="4137764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137769">n</span><span class="op" id="4137770">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4137778">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137781">return</span>&nbsp;<span class="ident" id="4137788">n</span><br>
<span class="lineno"></span><span class="op" id="4137790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4137793">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="4137823">func</span>&nbsp;<span class="ident" id="4137828">splitAtBytes</span><span class="op" id="4137840">(</span><span class="ident" id="4137841">s</span>&nbsp;<span class="builtintype" id="4137843">string</span><span class="op" id="4137849">,</span>&nbsp;<span class="ident" id="4137851">t</span>&nbsp;<span class="builtintype" id="4137853">string</span><span class="op" id="4137859">)</span>&nbsp;<span class="op" id="4137861">[</span><span class="op" id="4137862">]</span><span class="builtintype" id="4137863">string</span>&nbsp;<span class="op" id="4137870">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137873">a</span>&nbsp;<span class="op" id="4137875">:=</span>&nbsp;<span class="builtinfunc" id="4137878">make</span><span class="op" id="4137882">(</span><span class="op" id="4137883">[</span><span class="op" id="4137884">]</span><span class="builtintype" id="4137885">string</span><span class="op" id="4137891">,</span>&nbsp;<span class="num" id="4137893">1</span><span class="op" id="4137894">+</span><span class="ident" id="4137895">countAnyByte</span><span class="op" id="4137907">(</span><span class="ident" id="4137908">s</span><span class="op" id="4137909">,</span>&nbsp;<span class="ident" id="4137911">t</span><span class="op" id="4137912">)</span><span class="op" id="4137913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137916">n</span>&nbsp;<span class="op" id="4137918">:=</span>&nbsp;<span class="num" id="4137921">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4137924">last</span>&nbsp;<span class="op" id="4137929">:=</span>&nbsp;<span class="num" id="4137932">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137935">for</span>&nbsp;<span class="ident" id="4137939">i</span>&nbsp;<span class="op" id="4137941">:=</span>&nbsp;<span class="num" id="4137944">0</span><span class="op" id="4137945">;</span>&nbsp;<span class="ident" id="4137947">i</span>&nbsp;<span class="op" id="4137949">&lt;</span>&nbsp;<span class="builtinfunc" id="4137951">len</span><span class="op" id="4137954">(</span><span class="ident" id="4137955">s</span><span class="op" id="4137956">)</span><span class="op" id="4137957">;</span>&nbsp;<span class="ident" id="4137959">i</span><span class="op" id="4137960">++</span>&nbsp;<span class="op" id="4137963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137967">if</span>&nbsp;<span class="ident" id="4137970">byteIndex</span><span class="op" id="4137979">(</span><span class="ident" id="4137980">t</span><span class="op" id="4137981">,</span>&nbsp;<span class="ident" id="4137983">s</span><span class="op" id="4137984">[</span><span class="ident" id="4137985">i</span><span class="op" id="4137986">]</span><span class="op" id="4137987">)</span>&nbsp;<span class="op" id="4137989">&gt;=</span>&nbsp;<span class="num" id="4137992">0</span>&nbsp;<span class="op" id="4137994">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4137999">if</span>&nbsp;<span class="ident" id="4138002">last</span>&nbsp;<span class="op" id="4138007">&lt;</span>&nbsp;<span class="ident" id="4138009">i</span>&nbsp;<span class="op" id="4138011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138017">a</span><span class="op" id="4138018">[</span><span class="ident" id="4138019">n</span><span class="op" id="4138020">]</span>&nbsp;<span class="op" id="4138022">=</span>&nbsp;<span class="builtintype" id="4138024">string</span><span class="op" id="4138030">(</span><span class="ident" id="4138031">s</span><span class="op" id="4138032">[</span><span class="ident" id="4138033">last</span><span class="op" id="4138037">:</span><span class="ident" id="4138038">i</span><span class="op" id="4138039">]</span><span class="op" id="4138040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138046">n</span><span class="op" id="4138047">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138058">last</span>&nbsp;<span class="op" id="4138063">=</span>&nbsp;<span class="ident" id="4138065">i</span>&nbsp;<span class="op" id="4138067">+</span>&nbsp;<span class="num" id="4138069">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138079">if</span>&nbsp;<span class="ident" id="4138082">last</span>&nbsp;<span class="op" id="4138087">&lt;</span>&nbsp;<span class="builtinfunc" id="4138089">len</span><span class="op" id="4138092">(</span><span class="ident" id="4138093">s</span><span class="op" id="4138094">)</span>&nbsp;<span class="op" id="4138096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138100">a</span><span class="op" id="4138101">[</span><span class="ident" id="4138102">n</span><span class="op" id="4138103">]</span>&nbsp;<span class="op" id="4138105">=</span>&nbsp;<span class="builtintype" id="4138107">string</span><span class="op" id="4138113">(</span><span class="ident" id="4138114">s</span><span class="op" id="4138115">[</span><span class="ident" id="4138116">last</span><span class="op" id="4138120">:</span><span class="op" id="4138121">]</span><span class="op" id="4138122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138126">n</span><span class="op" id="4138127">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138134">return</span>&nbsp;<span class="ident" id="4138141">a</span><span class="op" id="4138142">[</span><span class="num" id="4138143">0</span><span class="op" id="4138144">:</span><span class="ident" id="4138145">n</span><span class="op" id="4138146">]</span><br>
<span class="lineno"></span><span class="op" id="4138148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4138151">func</span>&nbsp;<span class="ident" id="4138156">getFields</span><span class="op" id="4138165">(</span><span class="ident" id="4138166">s</span>&nbsp;<span class="builtintype" id="4138168">string</span><span class="op" id="4138174">)</span>&nbsp;<span class="op" id="4138176">[</span><span class="op" id="4138177">]</span><span class="builtintype" id="4138178">string</span>&nbsp;<span class="op" id="4138185">{</span>&nbsp;<span class="keyword" id="4138187">return</span>&nbsp;<span class="ident" id="4138194">splitAtBytes</span><span class="op" id="4138206">(</span><span class="ident" id="4138207">s</span><span class="op" id="4138208">,</span>&nbsp;<span class="string" id="4138210">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="4138219">)</span>&nbsp;<span class="op" id="4138221">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4138224">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="4138284">const</span>&nbsp;<span class="ident" id="4138290">big</span>&nbsp;<span class="op" id="4138294">=</span>&nbsp;<span class="num" id="4138296">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4138306">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="4138348">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="4138388">func</span>&nbsp;<span class="ident" id="4138393">dtoi</span><span class="op" id="4138397">(</span><span class="ident" id="4138398">s</span>&nbsp;<span class="builtintype" id="4138400">string</span><span class="op" id="4138406">,</span>&nbsp;<span class="ident" id="4138408">i0</span>&nbsp;<span class="builtintype" id="4138411">int</span><span class="op" id="4138414">)</span>&nbsp;<span class="op" id="4138416">(</span><span class="ident" id="4138417">n</span>&nbsp;<span class="builtintype" id="4138419">int</span><span class="op" id="4138422">,</span>&nbsp;<span class="ident" id="4138424">i</span>&nbsp;<span class="builtintype" id="4138426">int</span><span class="op" id="4138429">,</span>&nbsp;<span class="ident" id="4138431">ok</span>&nbsp;<span class="builtintype" id="4138434">bool</span><span class="op" id="4138438">)</span>&nbsp;<span class="op" id="4138440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138443">n</span>&nbsp;<span class="op" id="4138445">=</span>&nbsp;<span class="num" id="4138447">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138450">for</span>&nbsp;<span class="ident" id="4138454">i</span>&nbsp;<span class="op" id="4138456">=</span>&nbsp;<span class="ident" id="4138458">i0</span><span class="op" id="4138460">;</span>&nbsp;<span class="ident" id="4138462">i</span>&nbsp;<span class="op" id="4138464">&lt;</span>&nbsp;<span class="builtinfunc" id="4138466">len</span><span class="op" id="4138469">(</span><span class="ident" id="4138470">s</span><span class="op" id="4138471">)</span>&nbsp;<span class="op" id="4138473">&amp;&amp;</span>&nbsp;<span class="string" id="4138476">&#39;0&#39;</span>&nbsp;<span class="op" id="4138480">&lt;=</span>&nbsp;<span class="ident" id="4138483">s</span><span class="op" id="4138484">[</span><span class="ident" id="4138485">i</span><span class="op" id="4138486">]</span>&nbsp;<span class="op" id="4138488">&amp;&amp;</span>&nbsp;<span class="ident" id="4138491">s</span><span class="op" id="4138492">[</span><span class="ident" id="4138493">i</span><span class="op" id="4138494">]</span>&nbsp;<span class="op" id="4138496">&lt;=</span>&nbsp;<span class="string" id="4138499">&#39;9&#39;</span><span class="op" id="4138502">;</span>&nbsp;<span class="ident" id="4138504">i</span><span class="op" id="4138505">++</span>&nbsp;<span class="op" id="4138508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138512">n</span>&nbsp;<span class="op" id="4138514">=</span>&nbsp;<span class="ident" id="4138516">n</span><span class="op" id="4138517">*</span><span class="num" id="4138518">10</span>&nbsp;<span class="op" id="4138521">+</span>&nbsp;<span class="builtintype" id="4138523">int</span><span class="op" id="4138526">(</span><span class="ident" id="4138527">s</span><span class="op" id="4138528">[</span><span class="ident" id="4138529">i</span><span class="op" id="4138530">]</span><span class="op" id="4138531">-</span><span class="string" id="4138532">&#39;0&#39;</span><span class="op" id="4138535">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138539">if</span>&nbsp;<span class="ident" id="4138542">n</span>&nbsp;<span class="op" id="4138544">&gt;=</span>&nbsp;<span class="ident" id="4138547">big</span>&nbsp;<span class="op" id="4138551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138556">return</span>&nbsp;<span class="num" id="4138563">0</span><span class="op" id="4138564">,</span>&nbsp;<span class="ident" id="4138566">i</span><span class="op" id="4138567">,</span>&nbsp;<span class="builtintype" id="4138569">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138583">if</span>&nbsp;<span class="ident" id="4138586">i</span>&nbsp;<span class="op" id="4138588">==</span>&nbsp;<span class="ident" id="4138591">i0</span>&nbsp;<span class="op" id="4138594">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138598">return</span>&nbsp;<span class="num" id="4138605">0</span><span class="op" id="4138606">,</span>&nbsp;<span class="ident" id="4138608">i</span><span class="op" id="4138609">,</span>&nbsp;<span class="builtintype" id="4138611">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138621">return</span>&nbsp;<span class="ident" id="4138628">n</span><span class="op" id="4138629">,</span>&nbsp;<span class="ident" id="4138631">i</span><span class="op" id="4138632">,</span>&nbsp;<span class="builtintype" id="4138634">true</span><br>
<span class="lineno"></span><span class="op" id="4138639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="4138642">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="4138688">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="4138728">func</span>&nbsp;<span class="ident" id="4138733">xtoi</span><span class="op" id="4138737">(</span><span class="ident" id="4138738">s</span>&nbsp;<span class="builtintype" id="4138740">string</span><span class="op" id="4138746">,</span>&nbsp;<span class="ident" id="4138748">i0</span>&nbsp;<span class="builtintype" id="4138751">int</span><span class="op" id="4138754">)</span>&nbsp;<span class="op" id="4138756">(</span><span class="ident" id="4138757">n</span>&nbsp;<span class="builtintype" id="4138759">int</span><span class="op" id="4138762">,</span>&nbsp;<span class="ident" id="4138764">i</span>&nbsp;<span class="builtintype" id="4138766">int</span><span class="op" id="4138769">,</span>&nbsp;<span class="ident" id="4138771">ok</span>&nbsp;<span class="builtintype" id="4138774">bool</span><span class="op" id="4138778">)</span>&nbsp;<span class="op" id="4138780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138783">n</span>&nbsp;<span class="op" id="4138785">=</span>&nbsp;<span class="num" id="4138787">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138790">for</span>&nbsp;<span class="ident" id="4138794">i</span>&nbsp;<span class="op" id="4138796">=</span>&nbsp;<span class="ident" id="4138798">i0</span><span class="op" id="4138800">;</span>&nbsp;<span class="ident" id="4138802">i</span>&nbsp;<span class="op" id="4138804">&lt;</span>&nbsp;<span class="builtinfunc" id="4138806">len</span><span class="op" id="4138809">(</span><span class="ident" id="4138810">s</span><span class="op" id="4138811">)</span><span class="op" id="4138812">;</span>&nbsp;<span class="ident" id="4138814">i</span><span class="op" id="4138815">++</span>&nbsp;<span class="op" id="4138818">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4138822">if</span>&nbsp;<span class="string" id="4138825">&#39;0&#39;</span>&nbsp;<span class="op" id="4138829">&lt;=</span>&nbsp;<span class="ident" id="4138832">s</span><span class="op" id="4138833">[</span><span class="ident" id="4138834">i</span><span class="op" id="4138835">]</span>&nbsp;<span class="op" id="4138837">&amp;&amp;</span>&nbsp;<span class="ident" id="4138840">s</span><span class="op" id="4138841">[</span><span class="ident" id="4138842">i</span><span class="op" id="4138843">]</span>&nbsp;<span class="op" id="4138845">&lt;=</span>&nbsp;<span class="string" id="4138848">&#39;9&#39;</span>&nbsp;<span class="op" id="4138852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138857">n</span>&nbsp;<span class="op" id="4138859">*=</span>&nbsp;<span class="num" id="4138862">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138868">n</span>&nbsp;<span class="op" id="4138870">+=</span>&nbsp;<span class="builtintype" id="4138873">int</span><span class="op" id="4138876">(</span><span class="ident" id="4138877">s</span><span class="op" id="4138878">[</span><span class="ident" id="4138879">i</span><span class="op" id="4138880">]</span>&nbsp;<span class="op" id="4138882">-</span>&nbsp;<span class="string" id="4138884">&#39;0&#39;</span><span class="op" id="4138887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138891">}</span>&nbsp;<span class="keyword" id="4138893">else</span>&nbsp;<span class="keyword" id="4138898">if</span>&nbsp;<span class="string" id="4138901">&#39;a&#39;</span>&nbsp;<span class="op" id="4138905">&lt;=</span>&nbsp;<span class="ident" id="4138908">s</span><span class="op" id="4138909">[</span><span class="ident" id="4138910">i</span><span class="op" id="4138911">]</span>&nbsp;<span class="op" id="4138913">&amp;&amp;</span>&nbsp;<span class="ident" id="4138916">s</span><span class="op" id="4138917">[</span><span class="ident" id="4138918">i</span><span class="op" id="4138919">]</span>&nbsp;<span class="op" id="4138921">&lt;=</span>&nbsp;<span class="string" id="4138924">&#39;f&#39;</span>&nbsp;<span class="op" id="4138928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138933">n</span>&nbsp;<span class="op" id="4138935">*=</span>&nbsp;<span class="num" id="4138938">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4138944">n</span>&nbsp;<span class="op" id="4138946">+=</span>&nbsp;<span class="builtintype" id="4138949">int</span><span class="op" id="4138952">(</span><span class="ident" id="4138953">s</span><span class="op" id="4138954">[</span><span class="ident" id="4138955">i</span><span class="op" id="4138956">]</span><span class="op" id="4138957">-</span><span class="string" id="4138958">&#39;a&#39;</span><span class="op" id="4138961">)</span>&nbsp;<span class="op" id="4138963">+</span>&nbsp;<span class="num" id="4138965">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4138970">}</span>&nbsp;<span class="keyword" id="4138972">else</span>&nbsp;<span class="keyword" id="4138977">if</span>&nbsp;<span class="string" id="4138980">&#39;A&#39;</span>&nbsp;<span class="op" id="4138984">&lt;=</span>&nbsp;<span class="ident" id="4138987">s</span><span class="op" id="4138988">[</span><span class="ident" id="4138989">i</span><span class="op" id="4138990">]</span>&nbsp;<span class="op" id="4138992">&amp;&amp;</span>&nbsp;<span class="ident" id="4138995">s</span><span class="op" id="4138996">[</span><span class="ident" id="4138997">i</span><span class="op" id="4138998">]</span>&nbsp;<span class="op" id="4139000">&lt;=</span>&nbsp;<span class="string" id="4139003">&#39;F&#39;</span>&nbsp;<span class="op" id="4139007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139012">n</span>&nbsp;<span class="op" id="4139014">*=</span>&nbsp;<span class="num" id="4139017">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139023">n</span>&nbsp;<span class="op" id="4139025">+=</span>&nbsp;<span class="builtintype" id="4139028">int</span><span class="op" id="4139031">(</span><span class="ident" id="4139032">s</span><span class="op" id="4139033">[</span><span class="ident" id="4139034">i</span><span class="op" id="4139035">]</span><span class="op" id="4139036">-</span><span class="string" id="4139037">&#39;A&#39;</span><span class="op" id="4139040">)</span>&nbsp;<span class="op" id="4139042">+</span>&nbsp;<span class="num" id="4139044">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139049">}</span>&nbsp;<span class="keyword" id="4139051">else</span>&nbsp;<span class="op" id="4139056">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139061">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139073">if</span>&nbsp;<span class="ident" id="4139076">n</span>&nbsp;<span class="op" id="4139078">&gt;=</span>&nbsp;<span class="ident" id="4139081">big</span>&nbsp;<span class="op" id="4139085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139090">return</span>&nbsp;<span class="num" id="4139097">0</span><span class="op" id="4139098">,</span>&nbsp;<span class="ident" id="4139100">i</span><span class="op" id="4139101">,</span>&nbsp;<span class="builtintype" id="4139103">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139111">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139117">if</span>&nbsp;<span class="ident" id="4139120">i</span>&nbsp;<span class="op" id="4139122">==</span>&nbsp;<span class="ident" id="4139125">i0</span>&nbsp;<span class="op" id="4139128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139132">return</span>&nbsp;<span class="num" id="4139139">0</span><span class="op" id="4139140">,</span>&nbsp;<span class="ident" id="4139142">i</span><span class="op" id="4139143">,</span>&nbsp;<span class="builtintype" id="4139145">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139155">return</span>&nbsp;<span class="ident" id="4139162">n</span><span class="op" id="4139163">,</span>&nbsp;<span class="ident" id="4139165">i</span><span class="op" id="4139166">,</span>&nbsp;<span class="builtintype" id="4139168">true</span><br>
<span class="lineno">160</span><span class="op" id="4139173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4139176">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="4139236">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4139298">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="4139366">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="4139406">func</span>&nbsp;<span class="ident" id="4139411">xtoi2</span><span class="op" id="4139416">(</span><span class="ident" id="4139417">s</span>&nbsp;<span class="builtintype" id="4139419">string</span><span class="op" id="4139425">,</span>&nbsp;<span class="ident" id="4139427">e</span>&nbsp;<span class="builtintype" id="4139429">byte</span><span class="op" id="4139433">)</span>&nbsp;<span class="op" id="4139435">(</span><span class="builtintype" id="4139436">byte</span><span class="op" id="4139440">,</span>&nbsp;<span class="builtintype" id="4139442">bool</span><span class="op" id="4139446">)</span>&nbsp;<span class="op" id="4139448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139451">if</span>&nbsp;<span class="builtinfunc" id="4139454">len</span><span class="op" id="4139457">(</span><span class="ident" id="4139458">s</span><span class="op" id="4139459">)</span>&nbsp;<span class="op" id="4139461">&gt;</span>&nbsp;<span class="num" id="4139463">2</span>&nbsp;<span class="op" id="4139465">&amp;&amp;</span>&nbsp;<span class="ident" id="4139468">s</span><span class="op" id="4139469">[</span><span class="num" id="4139470">2</span><span class="op" id="4139471">]</span>&nbsp;<span class="op" id="4139473">!=</span>&nbsp;<span class="ident" id="4139476">e</span>&nbsp;<span class="op" id="4139478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139482">return</span>&nbsp;<span class="num" id="4139489">0</span><span class="op" id="4139490">,</span>&nbsp;<span class="builtintype" id="4139492">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139499">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139502">n</span><span class="op" id="4139503">,</span>&nbsp;<span class="ident" id="4139505">ei</span><span class="op" id="4139507">,</span>&nbsp;<span class="ident" id="4139509">ok</span>&nbsp;<span class="op" id="4139512">:=</span>&nbsp;<span class="ident" id="4139515">xtoi</span><span class="op" id="4139519">(</span><span class="ident" id="4139520">s</span><span class="op" id="4139521">[</span><span class="op" id="4139522">:</span><span class="num" id="4139523">2</span><span class="op" id="4139524">]</span><span class="op" id="4139525">,</span>&nbsp;<span class="num" id="4139527">0</span><span class="op" id="4139528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139531">return</span>&nbsp;<span class="builtintype" id="4139538">byte</span><span class="op" id="4139542">(</span><span class="ident" id="4139543">n</span><span class="op" id="4139544">)</span><span class="op" id="4139545">,</span>&nbsp;<span class="ident" id="4139547">ok</span>&nbsp;<span class="op" id="4139550">&amp;&amp;</span>&nbsp;<span class="ident" id="4139553">ei</span>&nbsp;<span class="op" id="4139556">==</span>&nbsp;<span class="num" id="4139559">2</span><br>
<span class="lineno"></span><span class="op" id="4139561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4139564">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="4139587">func</span>&nbsp;<span class="ident" id="4139592">itoa</span><span class="op" id="4139596">(</span><span class="ident" id="4139597">i</span>&nbsp;<span class="builtintype" id="4139599">int</span><span class="op" id="4139602">)</span>&nbsp;<span class="builtintype" id="4139604">string</span>&nbsp;<span class="op" id="4139611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139614">var</span>&nbsp;<span class="ident" id="4139618">buf</span>&nbsp;<span class="op" id="4139622">[</span><span class="num" id="4139623">30</span><span class="op" id="4139625">]</span><span class="builtintype" id="4139626">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139632">n</span>&nbsp;<span class="op" id="4139634">:=</span>&nbsp;<span class="builtinfunc" id="4139637">len</span><span class="op" id="4139640">(</span><span class="ident" id="4139641">buf</span><span class="op" id="4139644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139647">neg</span>&nbsp;<span class="op" id="4139651">:=</span>&nbsp;<span class="builtintype" id="4139654">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139661">if</span>&nbsp;<span class="ident" id="4139664">i</span>&nbsp;<span class="op" id="4139666">&lt;</span>&nbsp;<span class="num" id="4139668">0</span>&nbsp;<span class="op" id="4139670">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139674">i</span>&nbsp;<span class="op" id="4139676">=</span>&nbsp;<span class="op" id="4139678">-</span><span class="ident" id="4139679">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139683">neg</span>&nbsp;<span class="op" id="4139687">=</span>&nbsp;<span class="builtintype" id="4139689">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139698">ui</span>&nbsp;<span class="op" id="4139701">:=</span>&nbsp;<span class="builtintype" id="4139704">uint</span><span class="op" id="4139708">(</span><span class="ident" id="4139709">i</span><span class="op" id="4139710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139713">for</span>&nbsp;<span class="ident" id="4139717">ui</span>&nbsp;<span class="op" id="4139720">&gt;</span>&nbsp;<span class="num" id="4139722">0</span>&nbsp;<span class="op" id="4139724">||</span>&nbsp;<span class="ident" id="4139727">n</span>&nbsp;<span class="op" id="4139729">==</span>&nbsp;<span class="builtinfunc" id="4139732">len</span><span class="op" id="4139735">(</span><span class="ident" id="4139736">buf</span><span class="op" id="4139739">)</span>&nbsp;<span class="op" id="4139741">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139745">n</span><span class="op" id="4139746">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139751">buf</span><span class="op" id="4139754">[</span><span class="ident" id="4139755">n</span><span class="op" id="4139756">]</span>&nbsp;<span class="op" id="4139758">=</span>&nbsp;<span class="builtintype" id="4139760">byte</span><span class="op" id="4139764">(</span><span class="string" id="4139765">&#39;0&#39;</span>&nbsp;<span class="op" id="4139769">+</span>&nbsp;<span class="ident" id="4139771">ui</span><span class="op" id="4139773">%</span><span class="num" id="4139774">10</span><span class="op" id="4139776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139780">ui</span>&nbsp;<span class="op" id="4139783">/=</span>&nbsp;<span class="num" id="4139786">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139793">if</span>&nbsp;<span class="ident" id="4139796">neg</span>&nbsp;<span class="op" id="4139800">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139804">n</span><span class="op" id="4139805">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139810">buf</span><span class="op" id="4139813">[</span><span class="ident" id="4139814">n</span><span class="op" id="4139815">]</span>&nbsp;<span class="op" id="4139817">=</span>&nbsp;<span class="string" id="4139819">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139827">return</span>&nbsp;<span class="builtintype" id="4139834">string</span><span class="op" id="4139840">(</span><span class="ident" id="4139841">buf</span><span class="op" id="4139844">[</span><span class="ident" id="4139845">n</span><span class="op" id="4139846">:</span><span class="op" id="4139847">]</span><span class="op" id="4139848">)</span><br>
<span class="lineno"></span><span class="op" id="4139850">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="4139853">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4139885">func</span>&nbsp;<span class="ident" id="4139890">itod</span><span class="op" id="4139894">(</span><span class="ident" id="4139895">i</span>&nbsp;<span class="builtintype" id="4139897">uint</span><span class="op" id="4139901">)</span>&nbsp;<span class="builtintype" id="4139903">string</span>&nbsp;<span class="op" id="4139910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139913">if</span>&nbsp;<span class="ident" id="4139916">i</span>&nbsp;<span class="op" id="4139918">==</span>&nbsp;<span class="num" id="4139921">0</span>&nbsp;<span class="op" id="4139923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139927">return</span>&nbsp;<span class="string" id="4139934">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4139939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4139943">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139982">var</span>&nbsp;<span class="ident" id="4139986">b</span>&nbsp;<span class="op" id="4139988">[</span><span class="num" id="4139989">32</span><span class="op" id="4139991">]</span><span class="builtintype" id="4139992">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4139998">bp</span>&nbsp;<span class="op" id="4140001">:=</span>&nbsp;<span class="builtinfunc" id="4140004">len</span><span class="op" id="4140007">(</span><span class="ident" id="4140008">b</span><span class="op" id="4140009">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140012">for</span>&nbsp;<span class="op" id="4140016">;</span>&nbsp;<span class="ident" id="4140018">i</span>&nbsp;<span class="op" id="4140020">&gt;</span>&nbsp;<span class="num" id="4140022">0</span><span class="op" id="4140023">;</span>&nbsp;<span class="ident" id="4140025">i</span>&nbsp;<span class="op" id="4140027">/=</span>&nbsp;<span class="num" id="4140030">10</span>&nbsp;<span class="op" id="4140033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140037">bp</span><span class="op" id="4140039">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140044">b</span><span class="op" id="4140045">[</span><span class="ident" id="4140046">bp</span><span class="op" id="4140048">]</span>&nbsp;<span class="op" id="4140050">=</span>&nbsp;<span class="builtintype" id="4140052">byte</span><span class="op" id="4140056">(</span><span class="ident" id="4140057">i</span><span class="op" id="4140058">%</span><span class="num" id="4140059">10</span><span class="op" id="4140061">)</span>&nbsp;<span class="op" id="4140063">+</span>&nbsp;<span class="string" id="4140065">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140074">return</span>&nbsp;<span class="builtintype" id="4140081">string</span><span class="op" id="4140087">(</span><span class="ident" id="4140088">b</span><span class="op" id="4140089">[</span><span class="ident" id="4140090">bp</span><span class="op" id="4140092">:</span><span class="op" id="4140093">]</span><span class="op" id="4140094">)</span><br>
<span class="lineno"></span><span class="op" id="4140096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4140099">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="4140168">func</span>&nbsp;<span class="ident" id="4140173">appendHex</span><span class="op" id="4140182">(</span><span class="ident" id="4140183">dst</span>&nbsp;<span class="op" id="4140187">[</span><span class="op" id="4140188">]</span><span class="builtintype" id="4140189">byte</span><span class="op" id="4140193">,</span>&nbsp;<span class="ident" id="4140195">i</span>&nbsp;<span class="builtintype" id="4140197">uint32</span><span class="op" id="4140203">)</span>&nbsp;<span class="op" id="4140205">[</span><span class="op" id="4140206">]</span><span class="builtintype" id="4140207">byte</span>&nbsp;<span class="op" id="4140212">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140215">if</span>&nbsp;<span class="ident" id="4140218">i</span>&nbsp;<span class="op" id="4140220">==</span>&nbsp;<span class="num" id="4140223">0</span>&nbsp;<span class="op" id="4140225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140229">return</span>&nbsp;<span class="builtinfunc" id="4140236">append</span><span class="op" id="4140242">(</span><span class="ident" id="4140243">dst</span><span class="op" id="4140246">,</span>&nbsp;<span class="string" id="4140248">&#39;0&#39;</span><span class="op" id="4140251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140257">for</span>&nbsp;<span class="ident" id="4140261">j</span>&nbsp;<span class="op" id="4140263">:=</span>&nbsp;<span class="num" id="4140266">7</span><span class="op" id="4140267">;</span>&nbsp;<span class="ident" id="4140269">j</span>&nbsp;<span class="op" id="4140271">&gt;=</span>&nbsp;<span class="num" id="4140274">0</span><span class="op" id="4140275">;</span>&nbsp;<span class="ident" id="4140277">j</span><span class="op" id="4140278">--</span>&nbsp;<span class="op" id="4140281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140285">v</span>&nbsp;<span class="op" id="4140287">:=</span>&nbsp;<span class="ident" id="4140290">i</span>&nbsp;<span class="op" id="4140292">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4140295">uint</span><span class="op" id="4140299">(</span><span class="ident" id="4140300">j</span><span class="op" id="4140301">*</span><span class="num" id="4140302">4</span><span class="op" id="4140303">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140307">if</span>&nbsp;<span class="ident" id="4140310">v</span>&nbsp;<span class="op" id="4140312">&gt;</span>&nbsp;<span class="num" id="4140314">0</span>&nbsp;<span class="op" id="4140316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140321">dst</span>&nbsp;<span class="op" id="4140325">=</span>&nbsp;<span class="builtinfunc" id="4140327">append</span><span class="op" id="4140333">(</span><span class="ident" id="4140334">dst</span><span class="op" id="4140337">,</span>&nbsp;<span class="ident" id="4140339">hexDigit</span><span class="op" id="4140347">[</span><span class="ident" id="4140348">v</span><span class="op" id="4140349">&amp;</span><span class="num" id="4140350">0xf</span><span class="op" id="4140353">]</span><span class="op" id="4140354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140364">return</span>&nbsp;<span class="ident" id="4140371">dst</span><br>
<span class="lineno">225</span><span class="op" id="4140375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4140378">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4140414">func</span>&nbsp;<span class="ident" id="4140419">count</span><span class="op" id="4140424">(</span><span class="ident" id="4140425">s</span>&nbsp;<span class="builtintype" id="4140427">string</span><span class="op" id="4140433">,</span>&nbsp;<span class="ident" id="4140435">b</span>&nbsp;<span class="builtintype" id="4140437">byte</span><span class="op" id="4140441">)</span>&nbsp;<span class="builtintype" id="4140443">int</span>&nbsp;<span class="op" id="4140447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140450">n</span>&nbsp;<span class="op" id="4140452">:=</span>&nbsp;<span class="num" id="4140455">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140458">for</span>&nbsp;<span class="ident" id="4140462">i</span>&nbsp;<span class="op" id="4140464">:=</span>&nbsp;<span class="num" id="4140467">0</span><span class="op" id="4140468">;</span>&nbsp;<span class="ident" id="4140470">i</span>&nbsp;<span class="op" id="4140472">&lt;</span>&nbsp;<span class="builtinfunc" id="4140474">len</span><span class="op" id="4140477">(</span><span class="ident" id="4140478">s</span><span class="op" id="4140479">)</span><span class="op" id="4140480">;</span>&nbsp;<span class="ident" id="4140482">i</span><span class="op" id="4140483">++</span>&nbsp;<span class="op" id="4140486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140490">if</span>&nbsp;<span class="ident" id="4140493">s</span><span class="op" id="4140494">[</span><span class="ident" id="4140495">i</span><span class="op" id="4140496">]</span>&nbsp;<span class="op" id="4140498">==</span>&nbsp;<span class="ident" id="4140501">b</span>&nbsp;<span class="op" id="4140503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140508">n</span><span class="op" id="4140509">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140517">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140520">return</span>&nbsp;<span class="ident" id="4140527">n</span><br>
<span class="lineno"></span><span class="op" id="4140529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4140532">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4140576">func</span>&nbsp;<span class="ident" id="4140581">last</span><span class="op" id="4140585">(</span><span class="ident" id="4140586">s</span>&nbsp;<span class="builtintype" id="4140588">string</span><span class="op" id="4140594">,</span>&nbsp;<span class="ident" id="4140596">b</span>&nbsp;<span class="builtintype" id="4140598">byte</span><span class="op" id="4140602">)</span>&nbsp;<span class="builtintype" id="4140604">int</span>&nbsp;<span class="op" id="4140608">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4140611">i</span>&nbsp;<span class="op" id="4140613">:=</span>&nbsp;<span class="builtinfunc" id="4140616">len</span><span class="op" id="4140619">(</span><span class="ident" id="4140620">s</span><span class="op" id="4140621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140624">for</span>&nbsp;<span class="ident" id="4140628">i</span><span class="op" id="4140629">--</span><span class="op" id="4140631">;</span>&nbsp;<span class="ident" id="4140633">i</span>&nbsp;<span class="op" id="4140635">&gt;=</span>&nbsp;<span class="num" id="4140638">0</span><span class="op" id="4140639">;</span>&nbsp;<span class="ident" id="4140641">i</span><span class="op" id="4140642">--</span>&nbsp;<span class="op" id="4140645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140649">if</span>&nbsp;<span class="ident" id="4140652">s</span><span class="op" id="4140653">[</span><span class="ident" id="4140654">i</span><span class="op" id="4140655">]</span>&nbsp;<span class="op" id="4140657">==</span>&nbsp;<span class="ident" id="4140660">b</span>&nbsp;<span class="op" id="4140662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140667">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140675">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4140678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4140681">return</span>&nbsp;<span class="ident" id="4140688">i</span><br>
<span class="lineno"></span><span class="op" id="4140690">}</span>
</div>
</body>
</html>
