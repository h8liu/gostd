<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2466700">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2466755">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2466809">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2466860">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2466938">package</span>&nbsp;<span class="ident" id="2466946">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2466950">import</span>&nbsp;<span class="op" id="2466957">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2466960">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2466970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2466973">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2467039">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2467104">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2467129">var</span>&nbsp;<span class="op" id="2467133">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467136">Interrupt</span>&nbsp;<span class="ident" id="2467146">Signal</span>&nbsp;<span class="op" id="2467153">=</span>&nbsp;<span class="ident" id="2467155">syscall</span><span class="op" id="2467162">.</span><span class="ident" id="2467163">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467171">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2467181">Signal</span>&nbsp;<span class="op" id="2467188">=</span>&nbsp;<span class="ident" id="2467190">syscall</span><span class="op" id="2467197">.</span><span class="ident" id="2467198">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2467206">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2467209">func</span>&nbsp;<span class="ident" id="2467214">startProcess</span><span class="op" id="2467226">(</span><span class="ident" id="2467227">name</span>&nbsp;<span class="builtintype" id="2467232">string</span><span class="op" id="2467238">,</span>&nbsp;<span class="ident" id="2467240">argv</span>&nbsp;<span class="op" id="2467245">[</span><span class="op" id="2467246">]</span><span class="builtintype" id="2467247">string</span><span class="op" id="2467253">,</span>&nbsp;<span class="ident" id="2467255">attr</span>&nbsp;<span class="op" id="2467260">*</span><span class="ident" id="2467261">ProcAttr</span><span class="op" id="2467269">)</span>&nbsp;<span class="op" id="2467271">(</span><span class="ident" id="2467272">p</span>&nbsp;<span class="op" id="2467274">*</span><span class="ident" id="2467275">Process</span><span class="op" id="2467282">,</span>&nbsp;<span class="ident" id="2467284">err</span>&nbsp;<span class="builtintype" id="2467288">error</span><span class="op" id="2467293">)</span>&nbsp;<span class="op" id="2467295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2467298">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2467355">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2467417">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467477">if</span>&nbsp;<span class="ident" id="2467480">attr</span>&nbsp;<span class="op" id="2467485">!=</span>&nbsp;<span class="ident" id="2467488">nil</span>&nbsp;<span class="op" id="2467492">&amp;&amp;</span>&nbsp;<span class="ident" id="2467495">attr</span><span class="op" id="2467499">.</span><span class="ident" id="2467500">Sys</span>&nbsp;<span class="op" id="2467504">==</span>&nbsp;<span class="ident" id="2467507">nil</span>&nbsp;<span class="op" id="2467511">&amp;&amp;</span>&nbsp;<span class="ident" id="2467514">attr</span><span class="op" id="2467518">.</span><span class="ident" id="2467519">Dir</span>&nbsp;<span class="op" id="2467523">!=</span>&nbsp;<span class="string" id="2467526">&#34;&#34;</span>&nbsp;<span class="op" id="2467529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467533">if</span>&nbsp;<span class="ident" id="2467536">_</span><span class="op" id="2467537">,</span>&nbsp;<span class="ident" id="2467539">err</span>&nbsp;<span class="op" id="2467543">:=</span>&nbsp;<span class="ident" id="2467546">Stat</span><span class="op" id="2467550">(</span><span class="ident" id="2467551">attr</span><span class="op" id="2467555">.</span><span class="ident" id="2467556">Dir</span><span class="op" id="2467559">)</span><span class="op" id="2467560">;</span>&nbsp;<span class="ident" id="2467562">err</span>&nbsp;<span class="op" id="2467566">!=</span>&nbsp;<span class="ident" id="2467569">nil</span>&nbsp;<span class="op" id="2467573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467578">pe</span>&nbsp;<span class="op" id="2467581">:=</span>&nbsp;<span class="ident" id="2467584">err</span><span class="op" id="2467587">.</span><span class="op" id="2467588">(</span><span class="op" id="2467589">*</span><span class="ident" id="2467590">PathError</span><span class="op" id="2467599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467604">pe</span><span class="op" id="2467606">.</span><span class="ident" id="2467607">Op</span>&nbsp;<span class="op" id="2467610">=</span>&nbsp;<span class="string" id="2467612">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467623">return</span>&nbsp;<span class="ident" id="2467630">nil</span><span class="op" id="2467633">,</span>&nbsp;<span class="ident" id="2467635">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467647">sysattr</span>&nbsp;<span class="op" id="2467655">:=</span>&nbsp;<span class="op" id="2467658">&amp;</span><span class="ident" id="2467659">syscall</span><span class="op" id="2467666">.</span><span class="ident" id="2467667">ProcAttr</span><span class="op" id="2467675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467679">Dir</span><span class="op" id="2467682">:</span>&nbsp;<span class="ident" id="2467684">attr</span><span class="op" id="2467688">.</span><span class="ident" id="2467689">Dir</span><span class="op" id="2467692">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467696">Env</span><span class="op" id="2467699">:</span>&nbsp;<span class="ident" id="2467701">attr</span><span class="op" id="2467705">.</span><span class="ident" id="2467706">Env</span><span class="op" id="2467709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467713">Sys</span><span class="op" id="2467716">:</span>&nbsp;<span class="ident" id="2467718">attr</span><span class="op" id="2467722">.</span><span class="ident" id="2467723">Sys</span><span class="op" id="2467726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467732">if</span>&nbsp;<span class="ident" id="2467735">sysattr</span><span class="op" id="2467742">.</span><span class="ident" id="2467743">Env</span>&nbsp;<span class="op" id="2467747">==</span>&nbsp;<span class="ident" id="2467750">nil</span>&nbsp;<span class="op" id="2467754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467758">sysattr</span><span class="op" id="2467765">.</span><span class="ident" id="2467766">Env</span>&nbsp;<span class="op" id="2467770">=</span>&nbsp;<span class="ident" id="2467772">Environ</span><span class="op" id="2467779">(</span><span class="op" id="2467780">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467786">for</span>&nbsp;<span class="ident" id="2467790">_</span><span class="op" id="2467791">,</span>&nbsp;<span class="ident" id="2467793">f</span>&nbsp;<span class="op" id="2467795">:=</span>&nbsp;<span class="keyword" id="2467798">range</span>&nbsp;<span class="ident" id="2467804">attr</span><span class="op" id="2467808">.</span><span class="ident" id="2467809">Files</span>&nbsp;<span class="op" id="2467815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467819">sysattr</span><span class="op" id="2467826">.</span><span class="ident" id="2467827">Files</span>&nbsp;<span class="op" id="2467833">=</span>&nbsp;<span class="builtinfunc" id="2467835">append</span><span class="op" id="2467841">(</span><span class="ident" id="2467842">sysattr</span><span class="op" id="2467849">.</span><span class="ident" id="2467850">Files</span><span class="op" id="2467855">,</span>&nbsp;<span class="ident" id="2467857">f</span><span class="op" id="2467858">.</span><span class="ident" id="2467859">Fd</span><span class="op" id="2467861">(</span><span class="op" id="2467862">)</span><span class="op" id="2467863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2467870">pid</span><span class="op" id="2467873">,</span>&nbsp;<span class="ident" id="2467875">h</span><span class="op" id="2467876">,</span>&nbsp;<span class="ident" id="2467878">e</span>&nbsp;<span class="op" id="2467880">:=</span>&nbsp;<span class="ident" id="2467883">syscall</span><span class="op" id="2467890">.</span><span class="ident" id="2467891">StartProcess</span><span class="op" id="2467903">(</span><span class="ident" id="2467904">name</span><span class="op" id="2467908">,</span>&nbsp;<span class="ident" id="2467910">argv</span><span class="op" id="2467914">,</span>&nbsp;<span class="ident" id="2467916">sysattr</span><span class="op" id="2467923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467926">if</span>&nbsp;<span class="ident" id="2467929">e</span>&nbsp;<span class="op" id="2467931">!=</span>&nbsp;<span class="ident" id="2467934">nil</span>&nbsp;<span class="op" id="2467938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467942">return</span>&nbsp;<span class="ident" id="2467949">nil</span><span class="op" id="2467952">,</span>&nbsp;<span class="op" id="2467954">&amp;</span><span class="ident" id="2467955">PathError</span><span class="op" id="2467964">{</span><span class="string" id="2467965">&#34;fork/exec&#34;</span><span class="op" id="2467976">,</span>&nbsp;<span class="ident" id="2467978">name</span><span class="op" id="2467982">,</span>&nbsp;<span class="ident" id="2467984">e</span><span class="op" id="2467985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2467988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2467991">return</span>&nbsp;<span class="ident" id="2467998">newProcess</span><span class="op" id="2468008">(</span><span class="ident" id="2468009">pid</span><span class="op" id="2468012">,</span>&nbsp;<span class="ident" id="2468014">h</span><span class="op" id="2468015">)</span><span class="op" id="2468016">,</span>&nbsp;<span class="ident" id="2468018">nil</span><br>
<span class="lineno">50</span><span class="op" id="2468022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2468025">func</span>&nbsp;<span class="op" id="2468030">(</span><span class="ident" id="2468031">p</span>&nbsp;<span class="op" id="2468033">*</span><span class="ident" id="2468034">Process</span><span class="op" id="2468041">)</span>&nbsp;<span class="ident" id="2468043">kill</span><span class="op" id="2468047">(</span><span class="op" id="2468048">)</span>&nbsp;<span class="builtintype" id="2468050">error</span>&nbsp;<span class="op" id="2468056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468059">return</span>&nbsp;<span class="ident" id="2468066">p</span><span class="op" id="2468067">.</span><span class="ident" id="2468068">Signal</span><span class="op" id="2468074">(</span><span class="ident" id="2468075">Kill</span><span class="op" id="2468079">)</span><br>
<span class="lineno"></span><span class="op" id="2468081">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2468084">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2468157">type</span>&nbsp;<span class="ident" id="2468162">ProcessState</span>&nbsp;<span class="keyword" id="2468175">struct</span>&nbsp;<span class="op" id="2468182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468185">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2468192">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2468211">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468233">status</span>&nbsp;<span class="ident" id="2468240">syscall</span><span class="op" id="2468247">.</span><span class="ident" id="2468248">WaitStatus</span>&nbsp;<span class="comment" id="2468259">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468293">rusage</span>&nbsp;<span class="op" id="2468300">*</span><span class="ident" id="2468301">syscall</span><span class="op" id="2468308">.</span><span class="ident" id="2468309">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2468316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2468319">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2468372">func</span>&nbsp;<span class="op" id="2468377">(</span><span class="ident" id="2468378">p</span>&nbsp;<span class="op" id="2468380">*</span><span class="ident" id="2468381">ProcessState</span><span class="op" id="2468393">)</span>&nbsp;<span class="ident" id="2468395">Pid</span><span class="op" id="2468398">(</span><span class="op" id="2468399">)</span>&nbsp;<span class="builtintype" id="2468401">int</span>&nbsp;<span class="op" id="2468405">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468408">return</span>&nbsp;<span class="ident" id="2468415">p</span><span class="op" id="2468416">.</span><span class="ident" id="2468417">pid</span><br>
<span class="lineno"></span><span class="op" id="2468421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2468424">func</span>&nbsp;<span class="op" id="2468429">(</span><span class="ident" id="2468430">p</span>&nbsp;<span class="op" id="2468432">*</span><span class="ident" id="2468433">ProcessState</span><span class="op" id="2468445">)</span>&nbsp;<span class="ident" id="2468447">exited</span><span class="op" id="2468453">(</span><span class="op" id="2468454">)</span>&nbsp;<span class="builtintype" id="2468456">bool</span>&nbsp;<span class="op" id="2468461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468464">return</span>&nbsp;<span class="ident" id="2468471">p</span><span class="op" id="2468472">.</span><span class="ident" id="2468473">status</span><span class="op" id="2468479">.</span><span class="ident" id="2468480">Exited</span><span class="op" id="2468486">(</span><span class="op" id="2468487">)</span><br>
<span class="lineno">70</span><span class="op" id="2468489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2468492">func</span>&nbsp;<span class="op" id="2468497">(</span><span class="ident" id="2468498">p</span>&nbsp;<span class="op" id="2468500">*</span><span class="ident" id="2468501">ProcessState</span><span class="op" id="2468513">)</span>&nbsp;<span class="ident" id="2468515">success</span><span class="op" id="2468522">(</span><span class="op" id="2468523">)</span>&nbsp;<span class="builtintype" id="2468525">bool</span>&nbsp;<span class="op" id="2468530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468533">return</span>&nbsp;<span class="ident" id="2468540">p</span><span class="op" id="2468541">.</span><span class="ident" id="2468542">status</span><span class="op" id="2468548">.</span><span class="ident" id="2468549">ExitStatus</span><span class="op" id="2468559">(</span><span class="op" id="2468560">)</span>&nbsp;<span class="op" id="2468562">==</span>&nbsp;<span class="num" id="2468565">0</span><br>
<span class="lineno"></span><span class="op" id="2468567">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2468570">func</span>&nbsp;<span class="op" id="2468575">(</span><span class="ident" id="2468576">p</span>&nbsp;<span class="op" id="2468578">*</span><span class="ident" id="2468579">ProcessState</span><span class="op" id="2468591">)</span>&nbsp;<span class="ident" id="2468593">sys</span><span class="op" id="2468596">(</span><span class="op" id="2468597">)</span>&nbsp;<span class="keyword" id="2468599">interface</span><span class="op" id="2468608">{</span><span class="op" id="2468609">}</span>&nbsp;<span class="op" id="2468611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468614">return</span>&nbsp;<span class="ident" id="2468621">p</span><span class="op" id="2468622">.</span><span class="ident" id="2468623">status</span><br>
<span class="lineno"></span><span class="op" id="2468630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2468633">func</span>&nbsp;<span class="op" id="2468638">(</span><span class="ident" id="2468639">p</span>&nbsp;<span class="op" id="2468641">*</span><span class="ident" id="2468642">ProcessState</span><span class="op" id="2468654">)</span>&nbsp;<span class="ident" id="2468656">sysUsage</span><span class="op" id="2468664">(</span><span class="op" id="2468665">)</span>&nbsp;<span class="keyword" id="2468667">interface</span><span class="op" id="2468676">{</span><span class="op" id="2468677">}</span>&nbsp;<span class="op" id="2468679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468682">return</span>&nbsp;<span class="ident" id="2468689">p</span><span class="op" id="2468690">.</span><span class="ident" id="2468691">rusage</span><br>
<span class="lineno"></span><span class="op" id="2468698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2468701">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2468733">func</span>&nbsp;<span class="ident" id="2468738">itod</span><span class="op" id="2468742">(</span><span class="ident" id="2468743">i</span>&nbsp;<span class="builtintype" id="2468745">int</span><span class="op" id="2468748">)</span>&nbsp;<span class="builtintype" id="2468750">string</span>&nbsp;<span class="op" id="2468757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468760">if</span>&nbsp;<span class="ident" id="2468763">i</span>&nbsp;<span class="op" id="2468765">==</span>&nbsp;<span class="num" id="2468768">0</span>&nbsp;<span class="op" id="2468770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468774">return</span>&nbsp;<span class="string" id="2468781">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468790">u</span>&nbsp;<span class="op" id="2468792">:=</span>&nbsp;<span class="ident" id="2468795">uint64</span><span class="op" id="2468801">(</span><span class="ident" id="2468802">i</span><span class="op" id="2468803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468806">if</span>&nbsp;<span class="ident" id="2468809">i</span>&nbsp;<span class="op" id="2468811">&lt;</span>&nbsp;<span class="num" id="2468813">0</span>&nbsp;<span class="op" id="2468815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468819">u</span>&nbsp;<span class="op" id="2468821">=</span>&nbsp;<span class="op" id="2468823">-</span><span class="ident" id="2468824">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2468831">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468870">var</span>&nbsp;<span class="ident" id="2468874">b</span>&nbsp;<span class="op" id="2468876">[</span><span class="num" id="2468877">32</span><span class="op" id="2468879">]</span><span class="builtintype" id="2468880">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468886">bp</span>&nbsp;<span class="op" id="2468889">:=</span>&nbsp;<span class="builtinfunc" id="2468892">len</span><span class="op" id="2468895">(</span><span class="ident" id="2468896">b</span><span class="op" id="2468897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468900">for</span>&nbsp;<span class="op" id="2468904">;</span>&nbsp;<span class="ident" id="2468906">u</span>&nbsp;<span class="op" id="2468908">&gt;</span>&nbsp;<span class="num" id="2468910">0</span><span class="op" id="2468911">;</span>&nbsp;<span class="ident" id="2468913">u</span>&nbsp;<span class="op" id="2468915">/=</span>&nbsp;<span class="num" id="2468918">10</span>&nbsp;<span class="op" id="2468921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468925">bp</span><span class="op" id="2468927">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468932">b</span><span class="op" id="2468933">[</span><span class="ident" id="2468934">bp</span><span class="op" id="2468936">]</span>&nbsp;<span class="op" id="2468938">=</span>&nbsp;<span class="builtintype" id="2468940">byte</span><span class="op" id="2468944">(</span><span class="ident" id="2468945">u</span><span class="op" id="2468946">%</span><span class="num" id="2468947">10</span><span class="op" id="2468949">)</span>&nbsp;<span class="op" id="2468951">+</span>&nbsp;<span class="string" id="2468953">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468962">if</span>&nbsp;<span class="ident" id="2468965">i</span>&nbsp;<span class="op" id="2468967">&lt;</span>&nbsp;<span class="num" id="2468969">0</span>&nbsp;<span class="op" id="2468971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468975">bp</span><span class="op" id="2468977">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2468982">b</span><span class="op" id="2468983">[</span><span class="ident" id="2468984">bp</span><span class="op" id="2468986">]</span>&nbsp;<span class="op" id="2468988">=</span>&nbsp;<span class="string" id="2468990">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2468995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2468999">return</span>&nbsp;<span class="builtintype" id="2469006">string</span><span class="op" id="2469012">(</span><span class="ident" id="2469013">b</span><span class="op" id="2469014">[</span><span class="ident" id="2469015">bp</span><span class="op" id="2469017">:</span><span class="op" id="2469018">]</span><span class="op" id="2469019">)</span><br>
<span class="lineno"></span><span class="op" id="2469021">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2469024">func</span>&nbsp;<span class="op" id="2469029">(</span><span class="ident" id="2469030">p</span>&nbsp;<span class="op" id="2469032">*</span><span class="ident" id="2469033">ProcessState</span><span class="op" id="2469045">)</span>&nbsp;<span class="ident" id="2469047">String</span><span class="op" id="2469053">(</span><span class="op" id="2469054">)</span>&nbsp;<span class="builtintype" id="2469056">string</span>&nbsp;<span class="op" id="2469063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469066">if</span>&nbsp;<span class="ident" id="2469069">p</span>&nbsp;<span class="op" id="2469071">==</span>&nbsp;<span class="ident" id="2469074">nil</span>&nbsp;<span class="op" id="2469078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469082">return</span>&nbsp;<span class="string" id="2469089">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469098">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469101">status</span>&nbsp;<span class="op" id="2469108">:=</span>&nbsp;<span class="ident" id="2469111">p</span><span class="op" id="2469112">.</span><span class="ident" id="2469113">Sys</span><span class="op" id="2469116">(</span><span class="op" id="2469117">)</span><span class="op" id="2469118">.</span><span class="op" id="2469119">(</span><span class="ident" id="2469120">syscall</span><span class="op" id="2469127">.</span><span class="ident" id="2469128">WaitStatus</span><span class="op" id="2469138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469141">res</span>&nbsp;<span class="op" id="2469145">:=</span>&nbsp;<span class="string" id="2469148">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469152">switch</span>&nbsp;<span class="op" id="2469159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469162">case</span>&nbsp;<span class="ident" id="2469167">status</span><span class="op" id="2469173">.</span><span class="ident" id="2469174">Exited</span><span class="op" id="2469180">(</span><span class="op" id="2469181">)</span><span class="op" id="2469182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469186">res</span>&nbsp;<span class="op" id="2469190">=</span>&nbsp;<span class="string" id="2469192">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2469207">+</span>&nbsp;<span class="ident" id="2469209">itod</span><span class="op" id="2469213">(</span><span class="ident" id="2469214">status</span><span class="op" id="2469220">.</span><span class="ident" id="2469221">ExitStatus</span><span class="op" id="2469231">(</span><span class="op" id="2469232">)</span><span class="op" id="2469233">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469236">case</span>&nbsp;<span class="ident" id="2469241">status</span><span class="op" id="2469247">.</span><span class="ident" id="2469248">Signaled</span><span class="op" id="2469256">(</span><span class="op" id="2469257">)</span><span class="op" id="2469258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469262">res</span>&nbsp;<span class="op" id="2469266">=</span>&nbsp;<span class="string" id="2469268">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2469279">+</span>&nbsp;<span class="ident" id="2469281">status</span><span class="op" id="2469287">.</span><span class="ident" id="2469288">Signal</span><span class="op" id="2469294">(</span><span class="op" id="2469295">)</span><span class="op" id="2469296">.</span><span class="ident" id="2469297">String</span><span class="op" id="2469303">(</span><span class="op" id="2469304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469307">case</span>&nbsp;<span class="ident" id="2469312">status</span><span class="op" id="2469318">.</span><span class="ident" id="2469319">Stopped</span><span class="op" id="2469326">(</span><span class="op" id="2469327">)</span><span class="op" id="2469328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469332">res</span>&nbsp;<span class="op" id="2469336">=</span>&nbsp;<span class="string" id="2469338">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2469354">+</span>&nbsp;<span class="ident" id="2469356">status</span><span class="op" id="2469362">.</span><span class="ident" id="2469363">StopSignal</span><span class="op" id="2469373">(</span><span class="op" id="2469374">)</span><span class="op" id="2469375">.</span><span class="ident" id="2469376">String</span><span class="op" id="2469382">(</span><span class="op" id="2469383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469387">if</span>&nbsp;<span class="ident" id="2469390">status</span><span class="op" id="2469396">.</span><span class="ident" id="2469397">StopSignal</span><span class="op" id="2469407">(</span><span class="op" id="2469408">)</span>&nbsp;<span class="op" id="2469410">==</span>&nbsp;<span class="ident" id="2469413">syscall</span><span class="op" id="2469420">.</span><span class="ident" id="2469421">SIGTRAP</span>&nbsp;<span class="op" id="2469429">&amp;&amp;</span>&nbsp;<span class="ident" id="2469432">status</span><span class="op" id="2469438">.</span><span class="ident" id="2469439">TrapCause</span><span class="op" id="2469448">(</span><span class="op" id="2469449">)</span>&nbsp;<span class="op" id="2469451">!=</span>&nbsp;<span class="num" id="2469454">0</span>&nbsp;<span class="op" id="2469456">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469461">res</span>&nbsp;<span class="op" id="2469465">+=</span>&nbsp;<span class="string" id="2469468">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2469478">+</span>&nbsp;<span class="ident" id="2469480">itod</span><span class="op" id="2469484">(</span><span class="ident" id="2469485">status</span><span class="op" id="2469491">.</span><span class="ident" id="2469492">TrapCause</span><span class="op" id="2469501">(</span><span class="op" id="2469502">)</span><span class="op" id="2469503">)</span>&nbsp;<span class="op" id="2469505">+</span>&nbsp;<span class="string" id="2469507">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469516">case</span>&nbsp;<span class="ident" id="2469521">status</span><span class="op" id="2469527">.</span><span class="ident" id="2469528">Continued</span><span class="op" id="2469537">(</span><span class="op" id="2469538">)</span><span class="op" id="2469539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469543">res</span>&nbsp;<span class="op" id="2469547">=</span>&nbsp;<span class="string" id="2469549">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469562">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469565">if</span>&nbsp;<span class="ident" id="2469568">status</span><span class="op" id="2469574">.</span><span class="ident" id="2469575">CoreDump</span><span class="op" id="2469583">(</span><span class="op" id="2469584">)</span>&nbsp;<span class="op" id="2469586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2469590">res</span>&nbsp;<span class="op" id="2469594">+=</span>&nbsp;<span class="string" id="2469597">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2469615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2469618">return</span>&nbsp;<span class="ident" id="2469625">res</span><br>
<span class="lineno"></span><span class="op" id="2469629">}</span>
</div>
</body>
</html>
