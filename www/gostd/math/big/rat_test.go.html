<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7319394">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7319449">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7319503">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7319554">package</span>&nbsp;<span class="ident" id="7319562">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7319567">import</span>&nbsp;<span class="op" id="7319574">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319577">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319586">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319602">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319619">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319635">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319642">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319650">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319661">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319672">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7319682">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7319685">func</span>&nbsp;<span class="ident" id="7319690">TestZeroRat</span><span class="op" id="7319701">(</span><span class="ident" id="7319702">t</span>&nbsp;<span class="op" id="7319704">*</span><span class="ident" id="7319705">testing</span><span class="op" id="7319712">.</span><span class="ident" id="7319713">T</span><span class="op" id="7319714">)</span>&nbsp;<span class="op" id="7319716">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7319719">var</span>&nbsp;<span class="ident" id="7319723">x</span><span class="op" id="7319724">,</span>&nbsp;<span class="ident" id="7319726">y</span><span class="op" id="7319727">,</span>&nbsp;<span class="ident" id="7319729">z</span>&nbsp;<span class="ident" id="7319731">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319736">y</span><span class="op" id="7319737">.</span><span class="ident" id="7319738">SetFrac64</span><span class="op" id="7319747">(</span><span class="num" id="7319748">0</span><span class="op" id="7319749">,</span>&nbsp;<span class="num" id="7319751">42</span><span class="op" id="7319753">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7319757">if</span>&nbsp;<span class="ident" id="7319760">x</span><span class="op" id="7319761">.</span><span class="ident" id="7319762">Cmp</span><span class="op" id="7319765">(</span><span class="op" id="7319766">&amp;</span><span class="ident" id="7319767">y</span><span class="op" id="7319768">)</span>&nbsp;<span class="op" id="7319770">!=</span>&nbsp;<span class="num" id="7319773">0</span>&nbsp;<span class="op" id="7319775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319779">t</span><span class="op" id="7319780">.</span><span class="ident" id="7319781">Errorf</span><span class="op" id="7319787">(</span><span class="string" id="7319788">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7319827">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7319834">if</span>&nbsp;<span class="ident" id="7319837">s</span>&nbsp;<span class="op" id="7319839">:=</span>&nbsp;<span class="ident" id="7319842">x</span><span class="op" id="7319843">.</span><span class="ident" id="7319844">String</span><span class="op" id="7319850">(</span><span class="op" id="7319851">)</span><span class="op" id="7319852">;</span>&nbsp;<span class="ident" id="7319854">s</span>&nbsp;<span class="op" id="7319856">!=</span>&nbsp;<span class="string" id="7319859">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7319865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319869">t</span><span class="op" id="7319870">.</span><span class="ident" id="7319871">Errorf</span><span class="op" id="7319877">(</span><span class="string" id="7319878">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7319900">,</span>&nbsp;<span class="ident" id="7319902">s</span><span class="op" id="7319903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319906">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7319910">if</span>&nbsp;<span class="ident" id="7319913">s</span>&nbsp;<span class="op" id="7319915">:=</span>&nbsp;<span class="ident" id="7319918">x</span><span class="op" id="7319919">.</span><span class="ident" id="7319920">RatString</span><span class="op" id="7319929">(</span><span class="op" id="7319930">)</span><span class="op" id="7319931">;</span>&nbsp;<span class="ident" id="7319933">s</span>&nbsp;<span class="op" id="7319935">!=</span>&nbsp;<span class="string" id="7319938">&#34;0&#34;</span>&nbsp;<span class="op" id="7319942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319946">t</span><span class="op" id="7319947">.</span><span class="ident" id="7319948">Errorf</span><span class="op" id="7319954">(</span><span class="string" id="7319955">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7319975">,</span>&nbsp;<span class="ident" id="7319977">s</span><span class="op" id="7319978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319985">z</span><span class="op" id="7319986">.</span><span class="ident" id="7319987">Add</span><span class="op" id="7319990">(</span><span class="op" id="7319991">&amp;</span><span class="ident" id="7319992">x</span><span class="op" id="7319993">,</span>&nbsp;<span class="op" id="7319995">&amp;</span><span class="ident" id="7319996">y</span><span class="op" id="7319997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320000">if</span>&nbsp;<span class="ident" id="7320003">s</span>&nbsp;<span class="op" id="7320005">:=</span>&nbsp;<span class="ident" id="7320008">z</span><span class="op" id="7320009">.</span><span class="ident" id="7320010">RatString</span><span class="op" id="7320019">(</span><span class="op" id="7320020">)</span><span class="op" id="7320021">;</span>&nbsp;<span class="ident" id="7320023">s</span>&nbsp;<span class="op" id="7320025">!=</span>&nbsp;<span class="string" id="7320028">&#34;0&#34;</span>&nbsp;<span class="op" id="7320032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320036">t</span><span class="op" id="7320037">.</span><span class="ident" id="7320038">Errorf</span><span class="op" id="7320044">(</span><span class="string" id="7320045">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7320067">,</span>&nbsp;<span class="ident" id="7320069">s</span><span class="op" id="7320070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320077">z</span><span class="op" id="7320078">.</span><span class="ident" id="7320079">Sub</span><span class="op" id="7320082">(</span><span class="op" id="7320083">&amp;</span><span class="ident" id="7320084">x</span><span class="op" id="7320085">,</span>&nbsp;<span class="op" id="7320087">&amp;</span><span class="ident" id="7320088">y</span><span class="op" id="7320089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320092">if</span>&nbsp;<span class="ident" id="7320095">s</span>&nbsp;<span class="op" id="7320097">:=</span>&nbsp;<span class="ident" id="7320100">z</span><span class="op" id="7320101">.</span><span class="ident" id="7320102">RatString</span><span class="op" id="7320111">(</span><span class="op" id="7320112">)</span><span class="op" id="7320113">;</span>&nbsp;<span class="ident" id="7320115">s</span>&nbsp;<span class="op" id="7320117">!=</span>&nbsp;<span class="string" id="7320120">&#34;0&#34;</span>&nbsp;<span class="op" id="7320124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320128">t</span><span class="op" id="7320129">.</span><span class="ident" id="7320130">Errorf</span><span class="op" id="7320136">(</span><span class="string" id="7320137">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7320159">,</span>&nbsp;<span class="ident" id="7320161">s</span><span class="op" id="7320162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320169">z</span><span class="op" id="7320170">.</span><span class="ident" id="7320171">Mul</span><span class="op" id="7320174">(</span><span class="op" id="7320175">&amp;</span><span class="ident" id="7320176">x</span><span class="op" id="7320177">,</span>&nbsp;<span class="op" id="7320179">&amp;</span><span class="ident" id="7320180">y</span><span class="op" id="7320181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320184">if</span>&nbsp;<span class="ident" id="7320187">s</span>&nbsp;<span class="op" id="7320189">:=</span>&nbsp;<span class="ident" id="7320192">z</span><span class="op" id="7320193">.</span><span class="ident" id="7320194">RatString</span><span class="op" id="7320203">(</span><span class="op" id="7320204">)</span><span class="op" id="7320205">;</span>&nbsp;<span class="ident" id="7320207">s</span>&nbsp;<span class="op" id="7320209">!=</span>&nbsp;<span class="string" id="7320212">&#34;0&#34;</span>&nbsp;<span class="op" id="7320216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320220">t</span><span class="op" id="7320221">.</span><span class="ident" id="7320222">Errorf</span><span class="op" id="7320228">(</span><span class="string" id="7320229">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7320251">,</span>&nbsp;<span class="ident" id="7320253">s</span><span class="op" id="7320254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7320261">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320292">defer</span>&nbsp;<span class="keyword" id="7320298">func</span><span class="op" id="7320302">(</span><span class="op" id="7320303">)</span>&nbsp;<span class="op" id="7320305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320309">if</span>&nbsp;<span class="ident" id="7320312">s</span>&nbsp;<span class="op" id="7320314">:=</span>&nbsp;<span class="builtinfunc" id="7320317">recover</span><span class="op" id="7320324">(</span><span class="op" id="7320325">)</span><span class="op" id="7320326">;</span>&nbsp;<span class="ident" id="7320328">s</span>&nbsp;<span class="op" id="7320330">==</span>&nbsp;<span class="ident" id="7320333">nil</span>&nbsp;<span class="op" id="7320337">||</span>&nbsp;<span class="ident" id="7320340">s</span><span class="op" id="7320341">.</span><span class="op" id="7320342">(</span><span class="builtintype" id="7320343">string</span><span class="op" id="7320349">)</span>&nbsp;<span class="op" id="7320351">!=</span>&nbsp;<span class="string" id="7320354">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7320373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7320378">panic</span><span class="op" id="7320383">(</span><span class="ident" id="7320384">s</span><span class="op" id="7320385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320389">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320392">}</span><span class="op" id="7320393">(</span><span class="op" id="7320394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320397">z</span><span class="op" id="7320398">.</span><span class="ident" id="7320399">Quo</span><span class="op" id="7320402">(</span><span class="op" id="7320403">&amp;</span><span class="ident" id="7320404">x</span><span class="op" id="7320405">,</span>&nbsp;<span class="op" id="7320407">&amp;</span><span class="ident" id="7320408">y</span><span class="op" id="7320409">)</span><br>
<span class="lineno"></span><span class="op" id="7320411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7320414">var</span>&nbsp;<span class="ident" id="7320418">setStringTests</span>&nbsp;<span class="op" id="7320433">=</span>&nbsp;<span class="op" id="7320435">[</span><span class="op" id="7320436">]</span><span class="keyword" id="7320437">struct</span>&nbsp;<span class="op" id="7320444">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320447">in</span><span class="op" id="7320449">,</span>&nbsp;<span class="ident" id="7320451">out</span>&nbsp;<span class="builtintype" id="7320455">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320463">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7320471">bool</span><br>
<span class="lineno"></span><span class="op" id="7320476">}</span><span class="op" id="7320477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320480">{</span><span class="string" id="7320481">&#34;0&#34;</span><span class="op" id="7320484">,</span>&nbsp;<span class="string" id="7320486">&#34;0&#34;</span><span class="op" id="7320489">,</span>&nbsp;<span class="builtintype" id="7320491">true</span><span class="op" id="7320495">}</span><span class="op" id="7320496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320499">{</span><span class="string" id="7320500">&#34;-0&#34;</span><span class="op" id="7320504">,</span>&nbsp;<span class="string" id="7320506">&#34;0&#34;</span><span class="op" id="7320509">,</span>&nbsp;<span class="builtintype" id="7320511">true</span><span class="op" id="7320515">}</span><span class="op" id="7320516">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320519">{</span><span class="string" id="7320520">&#34;1&#34;</span><span class="op" id="7320523">,</span>&nbsp;<span class="string" id="7320525">&#34;1&#34;</span><span class="op" id="7320528">,</span>&nbsp;<span class="builtintype" id="7320530">true</span><span class="op" id="7320534">}</span><span class="op" id="7320535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320538">{</span><span class="string" id="7320539">&#34;-1&#34;</span><span class="op" id="7320543">,</span>&nbsp;<span class="string" id="7320545">&#34;-1&#34;</span><span class="op" id="7320549">,</span>&nbsp;<span class="builtintype" id="7320551">true</span><span class="op" id="7320555">}</span><span class="op" id="7320556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320559">{</span><span class="string" id="7320560">&#34;1.&#34;</span><span class="op" id="7320564">,</span>&nbsp;<span class="string" id="7320566">&#34;1&#34;</span><span class="op" id="7320569">,</span>&nbsp;<span class="builtintype" id="7320571">true</span><span class="op" id="7320575">}</span><span class="op" id="7320576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320579">{</span><span class="string" id="7320580">&#34;1e0&#34;</span><span class="op" id="7320585">,</span>&nbsp;<span class="string" id="7320587">&#34;1&#34;</span><span class="op" id="7320590">,</span>&nbsp;<span class="builtintype" id="7320592">true</span><span class="op" id="7320596">}</span><span class="op" id="7320597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320600">{</span><span class="string" id="7320601">&#34;1.e1&#34;</span><span class="op" id="7320607">,</span>&nbsp;<span class="string" id="7320609">&#34;10&#34;</span><span class="op" id="7320613">,</span>&nbsp;<span class="builtintype" id="7320615">true</span><span class="op" id="7320619">}</span><span class="op" id="7320620">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320623">{</span><span class="ident" id="7320624">in</span><span class="op" id="7320626">:</span>&nbsp;<span class="string" id="7320628">&#34;1e&#34;</span><span class="op" id="7320632">,</span>&nbsp;<span class="ident" id="7320634">ok</span><span class="op" id="7320636">:</span>&nbsp;<span class="builtintype" id="7320638">false</span><span class="op" id="7320643">}</span><span class="op" id="7320644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320647">{</span><span class="ident" id="7320648">in</span><span class="op" id="7320650">:</span>&nbsp;<span class="string" id="7320652">&#34;1.e&#34;</span><span class="op" id="7320657">,</span>&nbsp;<span class="ident" id="7320659">ok</span><span class="op" id="7320661">:</span>&nbsp;<span class="builtintype" id="7320663">false</span><span class="op" id="7320668">}</span><span class="op" id="7320669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320672">{</span><span class="ident" id="7320673">in</span><span class="op" id="7320675">:</span>&nbsp;<span class="string" id="7320677">&#34;1e+14e-5&#34;</span><span class="op" id="7320687">,</span>&nbsp;<span class="ident" id="7320689">ok</span><span class="op" id="7320691">:</span>&nbsp;<span class="builtintype" id="7320693">false</span><span class="op" id="7320698">}</span><span class="op" id="7320699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320702">{</span><span class="ident" id="7320703">in</span><span class="op" id="7320705">:</span>&nbsp;<span class="string" id="7320707">&#34;1e4.5&#34;</span><span class="op" id="7320714">,</span>&nbsp;<span class="ident" id="7320716">ok</span><span class="op" id="7320718">:</span>&nbsp;<span class="builtintype" id="7320720">false</span><span class="op" id="7320725">}</span><span class="op" id="7320726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320729">{</span><span class="ident" id="7320730">in</span><span class="op" id="7320732">:</span>&nbsp;<span class="string" id="7320734">&#34;r&#34;</span><span class="op" id="7320737">,</span>&nbsp;<span class="ident" id="7320739">ok</span><span class="op" id="7320741">:</span>&nbsp;<span class="builtintype" id="7320743">false</span><span class="op" id="7320748">}</span><span class="op" id="7320749">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320752">{</span><span class="ident" id="7320753">in</span><span class="op" id="7320755">:</span>&nbsp;<span class="string" id="7320757">&#34;a/b&#34;</span><span class="op" id="7320762">,</span>&nbsp;<span class="ident" id="7320764">ok</span><span class="op" id="7320766">:</span>&nbsp;<span class="builtintype" id="7320768">false</span><span class="op" id="7320773">}</span><span class="op" id="7320774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320777">{</span><span class="ident" id="7320778">in</span><span class="op" id="7320780">:</span>&nbsp;<span class="string" id="7320782">&#34;a.b&#34;</span><span class="op" id="7320787">,</span>&nbsp;<span class="ident" id="7320789">ok</span><span class="op" id="7320791">:</span>&nbsp;<span class="builtintype" id="7320793">false</span><span class="op" id="7320798">}</span><span class="op" id="7320799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320802">{</span><span class="string" id="7320803">&#34;-0.1&#34;</span><span class="op" id="7320809">,</span>&nbsp;<span class="string" id="7320811">&#34;-1/10&#34;</span><span class="op" id="7320818">,</span>&nbsp;<span class="builtintype" id="7320820">true</span><span class="op" id="7320824">}</span><span class="op" id="7320825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320828">{</span><span class="string" id="7320829">&#34;-.1&#34;</span><span class="op" id="7320834">,</span>&nbsp;<span class="string" id="7320836">&#34;-1/10&#34;</span><span class="op" id="7320843">,</span>&nbsp;<span class="builtintype" id="7320845">true</span><span class="op" id="7320849">}</span><span class="op" id="7320850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320853">{</span><span class="string" id="7320854">&#34;2/4&#34;</span><span class="op" id="7320859">,</span>&nbsp;<span class="string" id="7320861">&#34;1/2&#34;</span><span class="op" id="7320866">,</span>&nbsp;<span class="builtintype" id="7320868">true</span><span class="op" id="7320872">}</span><span class="op" id="7320873">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320876">{</span><span class="string" id="7320877">&#34;.25&#34;</span><span class="op" id="7320882">,</span>&nbsp;<span class="string" id="7320884">&#34;1/4&#34;</span><span class="op" id="7320889">,</span>&nbsp;<span class="builtintype" id="7320891">true</span><span class="op" id="7320895">}</span><span class="op" id="7320896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320899">{</span><span class="string" id="7320900">&#34;-1/5&#34;</span><span class="op" id="7320906">,</span>&nbsp;<span class="string" id="7320908">&#34;-1/5&#34;</span><span class="op" id="7320914">,</span>&nbsp;<span class="builtintype" id="7320916">true</span><span class="op" id="7320920">}</span><span class="op" id="7320921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320924">{</span><span class="string" id="7320925">&#34;8129567.7690E14&#34;</span><span class="op" id="7320942">,</span>&nbsp;<span class="string" id="7320944">&#34;812956776900000000000&#34;</span><span class="op" id="7320967">,</span>&nbsp;<span class="builtintype" id="7320969">true</span><span class="op" id="7320973">}</span><span class="op" id="7320974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320977">{</span><span class="string" id="7320978">&#34;78189e+4&#34;</span><span class="op" id="7320988">,</span>&nbsp;<span class="string" id="7320990">&#34;781890000&#34;</span><span class="op" id="7321001">,</span>&nbsp;<span class="builtintype" id="7321003">true</span><span class="op" id="7321007">}</span><span class="op" id="7321008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321011">{</span><span class="string" id="7321012">&#34;553019.8935e+8&#34;</span><span class="op" id="7321028">,</span>&nbsp;<span class="string" id="7321030">&#34;55301989350000&#34;</span><span class="op" id="7321046">,</span>&nbsp;<span class="builtintype" id="7321048">true</span><span class="op" id="7321052">}</span><span class="op" id="7321053">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321056">{</span><span class="string" id="7321057">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7321092">,</span>&nbsp;<span class="string" id="7321094">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7321137">,</span>&nbsp;<span class="builtintype" id="7321139">true</span><span class="op" id="7321143">}</span><span class="op" id="7321144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321147">{</span><span class="string" id="7321148">&#34;9877861857500000E-7&#34;</span><span class="op" id="7321169">,</span>&nbsp;<span class="string" id="7321171">&#34;3951144743/4&#34;</span><span class="op" id="7321185">,</span>&nbsp;<span class="builtintype" id="7321187">true</span><span class="op" id="7321191">}</span><span class="op" id="7321192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321195">{</span><span class="string" id="7321196">&#34;2169378.417e-3&#34;</span><span class="op" id="7321212">,</span>&nbsp;<span class="string" id="7321214">&#34;2169378417/1000000&#34;</span><span class="op" id="7321234">,</span>&nbsp;<span class="builtintype" id="7321236">true</span><span class="op" id="7321240">}</span><span class="op" id="7321241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321244">{</span><span class="string" id="7321245">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7321283">,</span>&nbsp;<span class="string" id="7321285">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7321323">,</span>&nbsp;<span class="builtintype" id="7321325">true</span><span class="op" id="7321329">}</span><span class="op" id="7321330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321333">{</span><span class="string" id="7321334">&#34;53/70893980658822810696&#34;</span><span class="op" id="7321359">,</span>&nbsp;<span class="string" id="7321361">&#34;53/70893980658822810696&#34;</span><span class="op" id="7321386">,</span>&nbsp;<span class="builtintype" id="7321388">true</span><span class="op" id="7321392">}</span><span class="op" id="7321393">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321396">{</span><span class="string" id="7321397">&#34;106/141787961317645621392&#34;</span><span class="op" id="7321424">,</span>&nbsp;<span class="string" id="7321426">&#34;53/70893980658822810696&#34;</span><span class="op" id="7321451">,</span>&nbsp;<span class="builtintype" id="7321453">true</span><span class="op" id="7321457">}</span><span class="op" id="7321458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321461">{</span><span class="string" id="7321462">&#34;204211327800791583.81095&#34;</span><span class="op" id="7321488">,</span>&nbsp;<span class="string" id="7321490">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7321520">,</span>&nbsp;<span class="builtintype" id="7321522">true</span><span class="op" id="7321526">}</span><span class="op" id="7321527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321530">{</span><span class="ident" id="7321531">in</span><span class="op" id="7321533">:</span>&nbsp;<span class="string" id="7321535">&#34;1/0&#34;</span><span class="op" id="7321540">,</span>&nbsp;<span class="ident" id="7321542">ok</span><span class="op" id="7321544">:</span>&nbsp;<span class="builtintype" id="7321546">false</span><span class="op" id="7321551">}</span><span class="op" id="7321552">,</span><br>
<span class="lineno"></span><span class="op" id="7321554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7321557">func</span>&nbsp;<span class="ident" id="7321562">TestRatSetString</span><span class="op" id="7321578">(</span><span class="ident" id="7321579">t</span>&nbsp;<span class="op" id="7321581">*</span><span class="ident" id="7321582">testing</span><span class="op" id="7321589">.</span><span class="ident" id="7321590">T</span><span class="op" id="7321591">)</span>&nbsp;<span class="op" id="7321593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7321596">for</span>&nbsp;<span class="ident" id="7321600">i</span><span class="op" id="7321601">,</span>&nbsp;<span class="ident" id="7321603">test</span>&nbsp;<span class="op" id="7321608">:=</span>&nbsp;<span class="keyword" id="7321611">range</span>&nbsp;<span class="ident" id="7321617">setStringTests</span>&nbsp;<span class="op" id="7321632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7321636">x</span><span class="op" id="7321637">,</span>&nbsp;<span class="ident" id="7321639">ok</span>&nbsp;<span class="op" id="7321642">:=</span>&nbsp;<span class="builtinfunc" id="7321645">new</span><span class="op" id="7321648">(</span><span class="ident" id="7321649">Rat</span><span class="op" id="7321652">)</span><span class="op" id="7321653">.</span><span class="ident" id="7321654">SetString</span><span class="op" id="7321663">(</span><span class="ident" id="7321664">test</span><span class="op" id="7321668">.</span><span class="ident" id="7321669">in</span><span class="op" id="7321671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7321676">if</span>&nbsp;<span class="ident" id="7321679">ok</span>&nbsp;<span class="op" id="7321682">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7321687">if</span>&nbsp;<span class="op" id="7321690">!</span><span class="ident" id="7321691">test</span><span class="op" id="7321695">.</span><span class="ident" id="7321696">ok</span>&nbsp;<span class="op" id="7321699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7321705">t</span><span class="op" id="7321706">.</span><span class="ident" id="7321707">Errorf</span><span class="op" id="7321713">(</span><span class="string" id="7321714">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7321750">,</span>&nbsp;<span class="ident" id="7321752">i</span><span class="op" id="7321753">,</span>&nbsp;<span class="ident" id="7321755">test</span><span class="op" id="7321759">.</span><span class="ident" id="7321760">in</span><span class="op" id="7321762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321767">}</span>&nbsp;<span class="keyword" id="7321769">else</span>&nbsp;<span class="keyword" id="7321774">if</span>&nbsp;<span class="ident" id="7321777">x</span><span class="op" id="7321778">.</span><span class="ident" id="7321779">RatString</span><span class="op" id="7321788">(</span><span class="op" id="7321789">)</span>&nbsp;<span class="op" id="7321791">!=</span>&nbsp;<span class="ident" id="7321794">test</span><span class="op" id="7321798">.</span><span class="ident" id="7321799">out</span>&nbsp;<span class="op" id="7321803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7321809">t</span><span class="op" id="7321810">.</span><span class="ident" id="7321811">Errorf</span><span class="op" id="7321817">(</span><span class="string" id="7321818">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7321852">,</span>&nbsp;<span class="ident" id="7321854">i</span><span class="op" id="7321855">,</span>&nbsp;<span class="ident" id="7321857">test</span><span class="op" id="7321861">.</span><span class="ident" id="7321862">in</span><span class="op" id="7321864">,</span>&nbsp;<span class="ident" id="7321866">x</span><span class="op" id="7321867">.</span><span class="ident" id="7321868">RatString</span><span class="op" id="7321877">(</span><span class="op" id="7321878">)</span><span class="op" id="7321879">,</span>&nbsp;<span class="ident" id="7321881">test</span><span class="op" id="7321885">.</span><span class="ident" id="7321886">out</span><span class="op" id="7321889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321894">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321898">}</span>&nbsp;<span class="keyword" id="7321900">else</span>&nbsp;<span class="keyword" id="7321905">if</span>&nbsp;<span class="ident" id="7321908">x</span>&nbsp;<span class="op" id="7321910">!=</span>&nbsp;<span class="ident" id="7321913">nil</span>&nbsp;<span class="op" id="7321917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7321922">t</span><span class="op" id="7321923">.</span><span class="ident" id="7321924">Errorf</span><span class="op" id="7321930">(</span><span class="string" id="7321931">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7321966">,</span>&nbsp;<span class="ident" id="7321968">i</span><span class="op" id="7321969">,</span>&nbsp;<span class="ident" id="7321971">test</span><span class="op" id="7321975">.</span><span class="ident" id="7321976">in</span><span class="op" id="7321978">,</span>&nbsp;<span class="ident" id="7321980">x</span><span class="op" id="7321981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321988">}</span><br>
<span class="lineno"></span><span class="op" id="7321990">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7321993">func</span>&nbsp;<span class="ident" id="7321998">TestRatScan</span><span class="op" id="7322009">(</span><span class="ident" id="7322010">t</span>&nbsp;<span class="op" id="7322012">*</span><span class="ident" id="7322013">testing</span><span class="op" id="7322020">.</span><span class="ident" id="7322021">T</span><span class="op" id="7322022">)</span>&nbsp;<span class="op" id="7322024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322027">var</span>&nbsp;<span class="ident" id="7322031">buf</span>&nbsp;<span class="ident" id="7322035">bytes</span><span class="op" id="7322040">.</span><span class="ident" id="7322041">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322049">for</span>&nbsp;<span class="ident" id="7322053">i</span><span class="op" id="7322054">,</span>&nbsp;<span class="ident" id="7322056">test</span>&nbsp;<span class="op" id="7322061">:=</span>&nbsp;<span class="keyword" id="7322064">range</span>&nbsp;<span class="ident" id="7322070">setStringTests</span>&nbsp;<span class="op" id="7322085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322089">x</span>&nbsp;<span class="op" id="7322091">:=</span>&nbsp;<span class="builtinfunc" id="7322094">new</span><span class="op" id="7322097">(</span><span class="ident" id="7322098">Rat</span><span class="op" id="7322101">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322105">buf</span><span class="op" id="7322108">.</span><span class="ident" id="7322109">Reset</span><span class="op" id="7322114">(</span><span class="op" id="7322115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322119">buf</span><span class="op" id="7322122">.</span><span class="ident" id="7322123">WriteString</span><span class="op" id="7322134">(</span><span class="ident" id="7322135">test</span><span class="op" id="7322139">.</span><span class="ident" id="7322140">in</span><span class="op" id="7322142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322147">_</span><span class="op" id="7322148">,</span>&nbsp;<span class="ident" id="7322150">err</span>&nbsp;<span class="op" id="7322154">:=</span>&nbsp;<span class="ident" id="7322157">fmt</span><span class="op" id="7322160">.</span><span class="ident" id="7322161">Fscanf</span><span class="op" id="7322167">(</span><span class="op" id="7322168">&amp;</span><span class="ident" id="7322169">buf</span><span class="op" id="7322172">,</span>&nbsp;<span class="string" id="7322174">&#34;%v&#34;</span><span class="op" id="7322178">,</span>&nbsp;<span class="ident" id="7322180">x</span><span class="op" id="7322181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322185">if</span>&nbsp;<span class="ident" id="7322188">err</span>&nbsp;<span class="op" id="7322192">==</span>&nbsp;<span class="ident" id="7322195">nil</span>&nbsp;<span class="op" id="7322199">!=</span>&nbsp;<span class="ident" id="7322202">test</span><span class="op" id="7322206">.</span><span class="ident" id="7322207">ok</span>&nbsp;<span class="op" id="7322210">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322215">if</span>&nbsp;<span class="ident" id="7322218">test</span><span class="op" id="7322222">.</span><span class="ident" id="7322223">ok</span>&nbsp;<span class="op" id="7322226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322232">t</span><span class="op" id="7322233">.</span><span class="ident" id="7322234">Errorf</span><span class="op" id="7322240">(</span><span class="string" id="7322241">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7322256">,</span>&nbsp;<span class="ident" id="7322258">i</span><span class="op" id="7322259">,</span>&nbsp;<span class="ident" id="7322261">err</span><span class="op" id="7322264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322269">}</span>&nbsp;<span class="keyword" id="7322271">else</span>&nbsp;<span class="op" id="7322276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322282">t</span><span class="op" id="7322283">.</span><span class="ident" id="7322284">Errorf</span><span class="op" id="7322290">(</span><span class="string" id="7322291">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7322311">,</span>&nbsp;<span class="ident" id="7322313">i</span><span class="op" id="7322314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322319">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322324">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322339">if</span>&nbsp;<span class="ident" id="7322342">err</span>&nbsp;<span class="op" id="7322346">==</span>&nbsp;<span class="ident" id="7322349">nil</span>&nbsp;<span class="op" id="7322353">&amp;&amp;</span>&nbsp;<span class="ident" id="7322356">x</span><span class="op" id="7322357">.</span><span class="ident" id="7322358">RatString</span><span class="op" id="7322367">(</span><span class="op" id="7322368">)</span>&nbsp;<span class="op" id="7322370">!=</span>&nbsp;<span class="ident" id="7322373">test</span><span class="op" id="7322377">.</span><span class="ident" id="7322378">out</span>&nbsp;<span class="op" id="7322382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322387">t</span><span class="op" id="7322388">.</span><span class="ident" id="7322389">Errorf</span><span class="op" id="7322395">(</span><span class="string" id="7322396">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7322416">,</span>&nbsp;<span class="ident" id="7322418">i</span><span class="op" id="7322419">,</span>&nbsp;<span class="ident" id="7322421">x</span><span class="op" id="7322422">.</span><span class="ident" id="7322423">RatString</span><span class="op" id="7322432">(</span><span class="op" id="7322433">)</span><span class="op" id="7322434">,</span>&nbsp;<span class="ident" id="7322436">test</span><span class="op" id="7322440">.</span><span class="ident" id="7322441">out</span><span class="op" id="7322444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322448">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322451">}</span><br>
<span class="lineno"></span><span class="op" id="7322453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7322456">var</span>&nbsp;<span class="ident" id="7322460">floatStringTests</span>&nbsp;<span class="op" id="7322477">=</span>&nbsp;<span class="op" id="7322479">[</span><span class="op" id="7322480">]</span><span class="keyword" id="7322481">struct</span>&nbsp;<span class="op" id="7322488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322491">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7322496">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322504">prec</span>&nbsp;<span class="builtintype" id="7322509">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322514">out</span>&nbsp;&nbsp;<span class="builtintype" id="7322519">string</span><br>
<span class="lineno"></span><span class="op" id="7322526">}</span><span class="op" id="7322527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322530">{</span><span class="string" id="7322531">&#34;0&#34;</span><span class="op" id="7322534">,</span>&nbsp;<span class="num" id="7322536">0</span><span class="op" id="7322537">,</span>&nbsp;<span class="string" id="7322539">&#34;0&#34;</span><span class="op" id="7322542">}</span><span class="op" id="7322543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322546">{</span><span class="string" id="7322547">&#34;0&#34;</span><span class="op" id="7322550">,</span>&nbsp;<span class="num" id="7322552">4</span><span class="op" id="7322553">,</span>&nbsp;<span class="string" id="7322555">&#34;0.0000&#34;</span><span class="op" id="7322563">}</span><span class="op" id="7322564">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322567">{</span><span class="string" id="7322568">&#34;1&#34;</span><span class="op" id="7322571">,</span>&nbsp;<span class="num" id="7322573">0</span><span class="op" id="7322574">,</span>&nbsp;<span class="string" id="7322576">&#34;1&#34;</span><span class="op" id="7322579">}</span><span class="op" id="7322580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322583">{</span><span class="string" id="7322584">&#34;1&#34;</span><span class="op" id="7322587">,</span>&nbsp;<span class="num" id="7322589">2</span><span class="op" id="7322590">,</span>&nbsp;<span class="string" id="7322592">&#34;1.00&#34;</span><span class="op" id="7322598">}</span><span class="op" id="7322599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322602">{</span><span class="string" id="7322603">&#34;-1&#34;</span><span class="op" id="7322607">,</span>&nbsp;<span class="num" id="7322609">0</span><span class="op" id="7322610">,</span>&nbsp;<span class="string" id="7322612">&#34;-1&#34;</span><span class="op" id="7322616">}</span><span class="op" id="7322617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322620">{</span><span class="string" id="7322621">&#34;.25&#34;</span><span class="op" id="7322626">,</span>&nbsp;<span class="num" id="7322628">2</span><span class="op" id="7322629">,</span>&nbsp;<span class="string" id="7322631">&#34;0.25&#34;</span><span class="op" id="7322637">}</span><span class="op" id="7322638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322641">{</span><span class="string" id="7322642">&#34;.25&#34;</span><span class="op" id="7322647">,</span>&nbsp;<span class="num" id="7322649">1</span><span class="op" id="7322650">,</span>&nbsp;<span class="string" id="7322652">&#34;0.3&#34;</span><span class="op" id="7322657">}</span><span class="op" id="7322658">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322661">{</span><span class="string" id="7322662">&#34;.25&#34;</span><span class="op" id="7322667">,</span>&nbsp;<span class="num" id="7322669">3</span><span class="op" id="7322670">,</span>&nbsp;<span class="string" id="7322672">&#34;0.250&#34;</span><span class="op" id="7322679">}</span><span class="op" id="7322680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322683">{</span><span class="string" id="7322684">&#34;-1/3&#34;</span><span class="op" id="7322690">,</span>&nbsp;<span class="num" id="7322692">3</span><span class="op" id="7322693">,</span>&nbsp;<span class="string" id="7322695">&#34;-0.333&#34;</span><span class="op" id="7322703">}</span><span class="op" id="7322704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322707">{</span><span class="string" id="7322708">&#34;-2/3&#34;</span><span class="op" id="7322714">,</span>&nbsp;<span class="num" id="7322716">4</span><span class="op" id="7322717">,</span>&nbsp;<span class="string" id="7322719">&#34;-0.6667&#34;</span><span class="op" id="7322728">}</span><span class="op" id="7322729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322732">{</span><span class="string" id="7322733">&#34;0.96&#34;</span><span class="op" id="7322739">,</span>&nbsp;<span class="num" id="7322741">1</span><span class="op" id="7322742">,</span>&nbsp;<span class="string" id="7322744">&#34;1.0&#34;</span><span class="op" id="7322749">}</span><span class="op" id="7322750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322753">{</span><span class="string" id="7322754">&#34;0.999&#34;</span><span class="op" id="7322761">,</span>&nbsp;<span class="num" id="7322763">2</span><span class="op" id="7322764">,</span>&nbsp;<span class="string" id="7322766">&#34;1.00&#34;</span><span class="op" id="7322772">}</span><span class="op" id="7322773">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322776">{</span><span class="string" id="7322777">&#34;0.9&#34;</span><span class="op" id="7322782">,</span>&nbsp;<span class="num" id="7322784">0</span><span class="op" id="7322785">,</span>&nbsp;<span class="string" id="7322787">&#34;1&#34;</span><span class="op" id="7322790">}</span><span class="op" id="7322791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322794">{</span><span class="string" id="7322795">&#34;.25&#34;</span><span class="op" id="7322800">,</span>&nbsp;<span class="op" id="7322802">-</span><span class="num" id="7322803">1</span><span class="op" id="7322804">,</span>&nbsp;<span class="string" id="7322806">&#34;0&#34;</span><span class="op" id="7322809">}</span><span class="op" id="7322810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7322813">{</span><span class="string" id="7322814">&#34;.55&#34;</span><span class="op" id="7322819">,</span>&nbsp;<span class="op" id="7322821">-</span><span class="num" id="7322822">1</span><span class="op" id="7322823">,</span>&nbsp;<span class="string" id="7322825">&#34;1&#34;</span><span class="op" id="7322828">}</span><span class="op" id="7322829">,</span><br>
<span class="lineno"></span><span class="op" id="7322831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7322834">func</span>&nbsp;<span class="ident" id="7322839">TestFloatString</span><span class="op" id="7322854">(</span><span class="ident" id="7322855">t</span>&nbsp;<span class="op" id="7322857">*</span><span class="ident" id="7322858">testing</span><span class="op" id="7322865">.</span><span class="ident" id="7322866">T</span><span class="op" id="7322867">)</span>&nbsp;<span class="op" id="7322869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322872">for</span>&nbsp;<span class="ident" id="7322876">i</span><span class="op" id="7322877">,</span>&nbsp;<span class="ident" id="7322879">test</span>&nbsp;<span class="op" id="7322884">:=</span>&nbsp;<span class="keyword" id="7322887">range</span>&nbsp;<span class="ident" id="7322893">floatStringTests</span>&nbsp;<span class="op" id="7322910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322914">x</span><span class="op" id="7322915">,</span>&nbsp;<span class="ident" id="7322917">_</span>&nbsp;<span class="op" id="7322919">:=</span>&nbsp;<span class="builtinfunc" id="7322922">new</span><span class="op" id="7322925">(</span><span class="ident" id="7322926">Rat</span><span class="op" id="7322929">)</span><span class="op" id="7322930">.</span><span class="ident" id="7322931">SetString</span><span class="op" id="7322940">(</span><span class="ident" id="7322941">test</span><span class="op" id="7322945">.</span><span class="ident" id="7322946">in</span><span class="op" id="7322948">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7322953">if</span>&nbsp;<span class="ident" id="7322956">x</span><span class="op" id="7322957">.</span><span class="ident" id="7322958">FloatString</span><span class="op" id="7322969">(</span><span class="ident" id="7322970">test</span><span class="op" id="7322974">.</span><span class="ident" id="7322975">prec</span><span class="op" id="7322979">)</span>&nbsp;<span class="op" id="7322981">!=</span>&nbsp;<span class="ident" id="7322984">test</span><span class="op" id="7322988">.</span><span class="ident" id="7322989">out</span>&nbsp;<span class="op" id="7322993">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7322998">t</span><span class="op" id="7322999">.</span><span class="ident" id="7323000">Errorf</span><span class="op" id="7323006">(</span><span class="string" id="7323007">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7323027">,</span>&nbsp;<span class="ident" id="7323029">i</span><span class="op" id="7323030">,</span>&nbsp;<span class="ident" id="7323032">x</span><span class="op" id="7323033">.</span><span class="ident" id="7323034">FloatString</span><span class="op" id="7323045">(</span><span class="ident" id="7323046">test</span><span class="op" id="7323050">.</span><span class="ident" id="7323051">prec</span><span class="op" id="7323055">)</span><span class="op" id="7323056">,</span>&nbsp;<span class="ident" id="7323058">test</span><span class="op" id="7323062">.</span><span class="ident" id="7323063">out</span><span class="op" id="7323066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323073">}</span><br>
<span class="lineno"></span><span class="op" id="7323075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7323078">func</span>&nbsp;<span class="ident" id="7323083">TestRatSign</span><span class="op" id="7323094">(</span><span class="ident" id="7323095">t</span>&nbsp;<span class="op" id="7323097">*</span><span class="ident" id="7323098">testing</span><span class="op" id="7323105">.</span><span class="ident" id="7323106">T</span><span class="op" id="7323107">)</span>&nbsp;<span class="op" id="7323109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323112">zero</span>&nbsp;<span class="op" id="7323117">:=</span>&nbsp;<span class="ident" id="7323120">NewRat</span><span class="op" id="7323126">(</span><span class="num" id="7323127">0</span><span class="op" id="7323128">,</span>&nbsp;<span class="num" id="7323130">1</span><span class="op" id="7323131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7323134">for</span>&nbsp;<span class="ident" id="7323138">_</span><span class="op" id="7323139">,</span>&nbsp;<span class="ident" id="7323141">a</span>&nbsp;<span class="op" id="7323143">:=</span>&nbsp;<span class="keyword" id="7323146">range</span>&nbsp;<span class="ident" id="7323152">setStringTests</span>&nbsp;<span class="op" id="7323167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323171">x</span><span class="op" id="7323172">,</span>&nbsp;<span class="ident" id="7323174">ok</span>&nbsp;<span class="op" id="7323177">:=</span>&nbsp;<span class="builtinfunc" id="7323180">new</span><span class="op" id="7323183">(</span><span class="ident" id="7323184">Rat</span><span class="op" id="7323187">)</span><span class="op" id="7323188">.</span><span class="ident" id="7323189">SetString</span><span class="op" id="7323198">(</span><span class="ident" id="7323199">a</span><span class="op" id="7323200">.</span><span class="ident" id="7323201">in</span><span class="op" id="7323203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7323207">if</span>&nbsp;<span class="op" id="7323210">!</span><span class="ident" id="7323211">ok</span>&nbsp;<span class="op" id="7323214">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7323219">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323234">s</span>&nbsp;<span class="op" id="7323236">:=</span>&nbsp;<span class="ident" id="7323239">x</span><span class="op" id="7323240">.</span><span class="ident" id="7323241">Sign</span><span class="op" id="7323245">(</span><span class="op" id="7323246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323250">e</span>&nbsp;<span class="op" id="7323252">:=</span>&nbsp;<span class="ident" id="7323255">x</span><span class="op" id="7323256">.</span><span class="ident" id="7323257">Cmp</span><span class="op" id="7323260">(</span><span class="ident" id="7323261">zero</span><span class="op" id="7323265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7323269">if</span>&nbsp;<span class="ident" id="7323272">s</span>&nbsp;<span class="op" id="7323274">!=</span>&nbsp;<span class="ident" id="7323277">e</span>&nbsp;<span class="op" id="7323279">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323284">t</span><span class="op" id="7323285">.</span><span class="ident" id="7323286">Errorf</span><span class="op" id="7323292">(</span><span class="string" id="7323293">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7323321">,</span>&nbsp;<span class="ident" id="7323323">s</span><span class="op" id="7323324">,</span>&nbsp;<span class="ident" id="7323326">e</span><span class="op" id="7323327">,</span>&nbsp;<span class="op" id="7323329">&amp;</span><span class="ident" id="7323330">x</span><span class="op" id="7323331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323338">}</span><br>
<span class="lineno"></span><span class="op" id="7323340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7323343">var</span>&nbsp;<span class="ident" id="7323347">ratCmpTests</span>&nbsp;<span class="op" id="7323359">=</span>&nbsp;<span class="op" id="7323361">[</span><span class="op" id="7323362">]</span><span class="keyword" id="7323363">struct</span>&nbsp;<span class="op" id="7323370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323373">rat1</span><span class="op" id="7323377">,</span>&nbsp;<span class="ident" id="7323379">rat2</span>&nbsp;<span class="builtintype" id="7323384">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323392">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7323403">int</span><br>
<span class="lineno"></span><span class="op" id="7323407">}</span><span class="op" id="7323408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323411">{</span><span class="string" id="7323412">&#34;0&#34;</span><span class="op" id="7323415">,</span>&nbsp;<span class="string" id="7323417">&#34;0/1&#34;</span><span class="op" id="7323422">,</span>&nbsp;<span class="num" id="7323424">0</span><span class="op" id="7323425">}</span><span class="op" id="7323426">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323429">{</span><span class="string" id="7323430">&#34;1/1&#34;</span><span class="op" id="7323435">,</span>&nbsp;<span class="string" id="7323437">&#34;1&#34;</span><span class="op" id="7323440">,</span>&nbsp;<span class="num" id="7323442">0</span><span class="op" id="7323443">}</span><span class="op" id="7323444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323447">{</span><span class="string" id="7323448">&#34;-1&#34;</span><span class="op" id="7323452">,</span>&nbsp;<span class="string" id="7323454">&#34;-2/2&#34;</span><span class="op" id="7323460">,</span>&nbsp;<span class="num" id="7323462">0</span><span class="op" id="7323463">}</span><span class="op" id="7323464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323467">{</span><span class="string" id="7323468">&#34;1&#34;</span><span class="op" id="7323471">,</span>&nbsp;<span class="string" id="7323473">&#34;0&#34;</span><span class="op" id="7323476">,</span>&nbsp;<span class="num" id="7323478">1</span><span class="op" id="7323479">}</span><span class="op" id="7323480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323483">{</span><span class="string" id="7323484">&#34;0/1&#34;</span><span class="op" id="7323489">,</span>&nbsp;<span class="string" id="7323491">&#34;1/1&#34;</span><span class="op" id="7323496">,</span>&nbsp;<span class="op" id="7323498">-</span><span class="num" id="7323499">1</span><span class="op" id="7323500">}</span><span class="op" id="7323501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323504">{</span><span class="string" id="7323505">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7323532">,</span>&nbsp;<span class="string" id="7323534">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7323561">,</span>&nbsp;<span class="op" id="7323563">-</span><span class="num" id="7323564">1</span><span class="op" id="7323565">}</span><span class="op" id="7323566">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323569">{</span><span class="string" id="7323570">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7323603">,</span>&nbsp;<span class="string" id="7323605">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7323638">,</span>&nbsp;<span class="op" id="7323640">-</span><span class="num" id="7323641">1</span><span class="op" id="7323642">}</span><span class="op" id="7323643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323646">{</span><span class="string" id="7323647">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7323684">,</span>&nbsp;<span class="string" id="7323686">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7323722">,</span>&nbsp;<span class="op" id="7323724">-</span><span class="num" id="7323725">1</span><span class="op" id="7323726">}</span><span class="op" id="7323727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7323730">{</span><span class="string" id="7323731">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7323767">,</span>&nbsp;<span class="string" id="7323769">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7323806">,</span>&nbsp;<span class="num" id="7323808">0</span><span class="op" id="7323809">}</span><span class="op" id="7323810">,</span><br>
<span class="lineno"></span><span class="op" id="7323812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7323815">func</span>&nbsp;<span class="ident" id="7323820">TestRatCmp</span><span class="op" id="7323830">(</span><span class="ident" id="7323831">t</span>&nbsp;<span class="op" id="7323833">*</span><span class="ident" id="7323834">testing</span><span class="op" id="7323841">.</span><span class="ident" id="7323842">T</span><span class="op" id="7323843">)</span>&nbsp;<span class="op" id="7323845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7323848">for</span>&nbsp;<span class="ident" id="7323852">i</span><span class="op" id="7323853">,</span>&nbsp;<span class="ident" id="7323855">test</span>&nbsp;<span class="op" id="7323860">:=</span>&nbsp;<span class="keyword" id="7323863">range</span>&nbsp;<span class="ident" id="7323869">ratCmpTests</span>&nbsp;<span class="op" id="7323881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323885">x</span><span class="op" id="7323886">,</span>&nbsp;<span class="ident" id="7323888">_</span>&nbsp;<span class="op" id="7323890">:=</span>&nbsp;<span class="builtinfunc" id="7323893">new</span><span class="op" id="7323896">(</span><span class="ident" id="7323897">Rat</span><span class="op" id="7323900">)</span><span class="op" id="7323901">.</span><span class="ident" id="7323902">SetString</span><span class="op" id="7323911">(</span><span class="ident" id="7323912">test</span><span class="op" id="7323916">.</span><span class="ident" id="7323917">rat1</span><span class="op" id="7323921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323925">y</span><span class="op" id="7323926">,</span>&nbsp;<span class="ident" id="7323928">_</span>&nbsp;<span class="op" id="7323930">:=</span>&nbsp;<span class="builtinfunc" id="7323933">new</span><span class="op" id="7323936">(</span><span class="ident" id="7323937">Rat</span><span class="op" id="7323940">)</span><span class="op" id="7323941">.</span><span class="ident" id="7323942">SetString</span><span class="op" id="7323951">(</span><span class="ident" id="7323952">test</span><span class="op" id="7323956">.</span><span class="ident" id="7323957">rat2</span><span class="op" id="7323961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7323966">out</span>&nbsp;<span class="op" id="7323970">:=</span>&nbsp;<span class="ident" id="7323973">x</span><span class="op" id="7323974">.</span><span class="ident" id="7323975">Cmp</span><span class="op" id="7323978">(</span><span class="ident" id="7323979">y</span><span class="op" id="7323980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7323984">if</span>&nbsp;<span class="ident" id="7323987">out</span>&nbsp;<span class="op" id="7323991">!=</span>&nbsp;<span class="ident" id="7323994">test</span><span class="op" id="7323998">.</span><span class="ident" id="7323999">out</span>&nbsp;<span class="op" id="7324003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324008">t</span><span class="op" id="7324009">.</span><span class="ident" id="7324010">Errorf</span><span class="op" id="7324016">(</span><span class="string" id="7324017">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7324044">,</span>&nbsp;<span class="ident" id="7324046">i</span><span class="op" id="7324047">,</span>&nbsp;<span class="ident" id="7324049">out</span><span class="op" id="7324052">,</span>&nbsp;<span class="ident" id="7324054">test</span><span class="op" id="7324058">.</span><span class="ident" id="7324059">out</span><span class="op" id="7324062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324069">}</span><br>
<span class="lineno">205</span><span class="op" id="7324071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7324074">func</span>&nbsp;<span class="ident" id="7324079">TestIsInt</span><span class="op" id="7324088">(</span><span class="ident" id="7324089">t</span>&nbsp;<span class="op" id="7324091">*</span><span class="ident" id="7324092">testing</span><span class="op" id="7324099">.</span><span class="ident" id="7324100">T</span><span class="op" id="7324101">)</span>&nbsp;<span class="op" id="7324103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324106">one</span>&nbsp;<span class="op" id="7324110">:=</span>&nbsp;<span class="ident" id="7324113">NewInt</span><span class="op" id="7324119">(</span><span class="num" id="7324120">1</span><span class="op" id="7324121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324124">for</span>&nbsp;<span class="ident" id="7324128">_</span><span class="op" id="7324129">,</span>&nbsp;<span class="ident" id="7324131">a</span>&nbsp;<span class="op" id="7324133">:=</span>&nbsp;<span class="keyword" id="7324136">range</span>&nbsp;<span class="ident" id="7324142">setStringTests</span>&nbsp;<span class="op" id="7324157">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324161">x</span><span class="op" id="7324162">,</span>&nbsp;<span class="ident" id="7324164">ok</span>&nbsp;<span class="op" id="7324167">:=</span>&nbsp;<span class="builtinfunc" id="7324170">new</span><span class="op" id="7324173">(</span><span class="ident" id="7324174">Rat</span><span class="op" id="7324177">)</span><span class="op" id="7324178">.</span><span class="ident" id="7324179">SetString</span><span class="op" id="7324188">(</span><span class="ident" id="7324189">a</span><span class="op" id="7324190">.</span><span class="ident" id="7324191">in</span><span class="op" id="7324193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324197">if</span>&nbsp;<span class="op" id="7324200">!</span><span class="ident" id="7324201">ok</span>&nbsp;<span class="op" id="7324204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324209">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324224">i</span>&nbsp;<span class="op" id="7324226">:=</span>&nbsp;<span class="ident" id="7324229">x</span><span class="op" id="7324230">.</span><span class="ident" id="7324231">IsInt</span><span class="op" id="7324236">(</span><span class="op" id="7324237">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324241">e</span>&nbsp;<span class="op" id="7324243">:=</span>&nbsp;<span class="ident" id="7324246">x</span><span class="op" id="7324247">.</span><span class="ident" id="7324248">Denom</span><span class="op" id="7324253">(</span><span class="op" id="7324254">)</span><span class="op" id="7324255">.</span><span class="ident" id="7324256">Cmp</span><span class="op" id="7324259">(</span><span class="ident" id="7324260">one</span><span class="op" id="7324263">)</span>&nbsp;<span class="op" id="7324265">==</span>&nbsp;<span class="num" id="7324268">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324272">if</span>&nbsp;<span class="ident" id="7324275">i</span>&nbsp;<span class="op" id="7324277">!=</span>&nbsp;<span class="ident" id="7324280">e</span>&nbsp;<span class="op" id="7324282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324287">t</span><span class="op" id="7324288">.</span><span class="ident" id="7324289">Errorf</span><span class="op" id="7324295">(</span><span class="string" id="7324296">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7324326">,</span>&nbsp;<span class="ident" id="7324328">x</span><span class="op" id="7324329">,</span>&nbsp;<span class="ident" id="7324331">i</span><span class="op" id="7324332">,</span>&nbsp;<span class="ident" id="7324334">e</span><span class="op" id="7324335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324342">}</span><br>
<span class="lineno">220</span><span class="op" id="7324344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7324347">func</span>&nbsp;<span class="ident" id="7324352">TestRatAbs</span><span class="op" id="7324362">(</span><span class="ident" id="7324363">t</span>&nbsp;<span class="op" id="7324365">*</span><span class="ident" id="7324366">testing</span><span class="op" id="7324373">.</span><span class="ident" id="7324374">T</span><span class="op" id="7324375">)</span>&nbsp;<span class="op" id="7324377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324380">zero</span>&nbsp;<span class="op" id="7324385">:=</span>&nbsp;<span class="builtinfunc" id="7324388">new</span><span class="op" id="7324391">(</span><span class="ident" id="7324392">Rat</span><span class="op" id="7324395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324398">for</span>&nbsp;<span class="ident" id="7324402">_</span><span class="op" id="7324403">,</span>&nbsp;<span class="ident" id="7324405">a</span>&nbsp;<span class="op" id="7324407">:=</span>&nbsp;<span class="keyword" id="7324410">range</span>&nbsp;<span class="ident" id="7324416">setStringTests</span>&nbsp;<span class="op" id="7324431">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324435">x</span><span class="op" id="7324436">,</span>&nbsp;<span class="ident" id="7324438">ok</span>&nbsp;<span class="op" id="7324441">:=</span>&nbsp;<span class="builtinfunc" id="7324444">new</span><span class="op" id="7324447">(</span><span class="ident" id="7324448">Rat</span><span class="op" id="7324451">)</span><span class="op" id="7324452">.</span><span class="ident" id="7324453">SetString</span><span class="op" id="7324462">(</span><span class="ident" id="7324463">a</span><span class="op" id="7324464">.</span><span class="ident" id="7324465">in</span><span class="op" id="7324467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324471">if</span>&nbsp;<span class="op" id="7324474">!</span><span class="ident" id="7324475">ok</span>&nbsp;<span class="op" id="7324478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324483">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324498">e</span>&nbsp;<span class="op" id="7324500">:=</span>&nbsp;<span class="builtinfunc" id="7324503">new</span><span class="op" id="7324506">(</span><span class="ident" id="7324507">Rat</span><span class="op" id="7324510">)</span><span class="op" id="7324511">.</span><span class="ident" id="7324512">Set</span><span class="op" id="7324515">(</span><span class="ident" id="7324516">x</span><span class="op" id="7324517">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324521">if</span>&nbsp;<span class="ident" id="7324524">e</span><span class="op" id="7324525">.</span><span class="ident" id="7324526">Cmp</span><span class="op" id="7324529">(</span><span class="ident" id="7324530">zero</span><span class="op" id="7324534">)</span>&nbsp;<span class="op" id="7324536">&lt;</span>&nbsp;<span class="num" id="7324538">0</span>&nbsp;<span class="op" id="7324540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324545">e</span><span class="op" id="7324546">.</span><span class="ident" id="7324547">Sub</span><span class="op" id="7324550">(</span><span class="ident" id="7324551">zero</span><span class="op" id="7324555">,</span>&nbsp;<span class="ident" id="7324557">e</span><span class="op" id="7324558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324566">z</span>&nbsp;<span class="op" id="7324568">:=</span>&nbsp;<span class="builtinfunc" id="7324571">new</span><span class="op" id="7324574">(</span><span class="ident" id="7324575">Rat</span><span class="op" id="7324578">)</span><span class="op" id="7324579">.</span><span class="ident" id="7324580">Abs</span><span class="op" id="7324583">(</span><span class="ident" id="7324584">x</span><span class="op" id="7324585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324589">if</span>&nbsp;<span class="ident" id="7324592">z</span><span class="op" id="7324593">.</span><span class="ident" id="7324594">Cmp</span><span class="op" id="7324597">(</span><span class="ident" id="7324598">e</span><span class="op" id="7324599">)</span>&nbsp;<span class="op" id="7324601">!=</span>&nbsp;<span class="num" id="7324604">0</span>&nbsp;<span class="op" id="7324606">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324611">t</span><span class="op" id="7324612">.</span><span class="ident" id="7324613">Errorf</span><span class="op" id="7324619">(</span><span class="string" id="7324620">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7324647">,</span>&nbsp;<span class="ident" id="7324649">x</span><span class="op" id="7324650">,</span>&nbsp;<span class="ident" id="7324652">z</span><span class="op" id="7324653">,</span>&nbsp;<span class="ident" id="7324655">e</span><span class="op" id="7324656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324663">}</span><br>
<span class="lineno"></span><span class="op" id="7324665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7324668">func</span>&nbsp;<span class="ident" id="7324673">TestRatNeg</span><span class="op" id="7324683">(</span><span class="ident" id="7324684">t</span>&nbsp;<span class="op" id="7324686">*</span><span class="ident" id="7324687">testing</span><span class="op" id="7324694">.</span><span class="ident" id="7324695">T</span><span class="op" id="7324696">)</span>&nbsp;<span class="op" id="7324698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324701">zero</span>&nbsp;<span class="op" id="7324706">:=</span>&nbsp;<span class="builtinfunc" id="7324709">new</span><span class="op" id="7324712">(</span><span class="ident" id="7324713">Rat</span><span class="op" id="7324716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324719">for</span>&nbsp;<span class="ident" id="7324723">_</span><span class="op" id="7324724">,</span>&nbsp;<span class="ident" id="7324726">a</span>&nbsp;<span class="op" id="7324728">:=</span>&nbsp;<span class="keyword" id="7324731">range</span>&nbsp;<span class="ident" id="7324737">setStringTests</span>&nbsp;<span class="op" id="7324752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324756">x</span><span class="op" id="7324757">,</span>&nbsp;<span class="ident" id="7324759">ok</span>&nbsp;<span class="op" id="7324762">:=</span>&nbsp;<span class="builtinfunc" id="7324765">new</span><span class="op" id="7324768">(</span><span class="ident" id="7324769">Rat</span><span class="op" id="7324772">)</span><span class="op" id="7324773">.</span><span class="ident" id="7324774">SetString</span><span class="op" id="7324783">(</span><span class="ident" id="7324784">a</span><span class="op" id="7324785">.</span><span class="ident" id="7324786">in</span><span class="op" id="7324788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324792">if</span>&nbsp;<span class="op" id="7324795">!</span><span class="ident" id="7324796">ok</span>&nbsp;<span class="op" id="7324799">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324804">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324819">e</span>&nbsp;<span class="op" id="7324821">:=</span>&nbsp;<span class="builtinfunc" id="7324824">new</span><span class="op" id="7324827">(</span><span class="ident" id="7324828">Rat</span><span class="op" id="7324831">)</span><span class="op" id="7324832">.</span><span class="ident" id="7324833">Sub</span><span class="op" id="7324836">(</span><span class="ident" id="7324837">zero</span><span class="op" id="7324841">,</span>&nbsp;<span class="ident" id="7324843">x</span><span class="op" id="7324844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324848">z</span>&nbsp;<span class="op" id="7324850">:=</span>&nbsp;<span class="builtinfunc" id="7324853">new</span><span class="op" id="7324856">(</span><span class="ident" id="7324857">Rat</span><span class="op" id="7324860">)</span><span class="op" id="7324861">.</span><span class="ident" id="7324862">Neg</span><span class="op" id="7324865">(</span><span class="ident" id="7324866">x</span><span class="op" id="7324867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7324871">if</span>&nbsp;<span class="ident" id="7324874">z</span><span class="op" id="7324875">.</span><span class="ident" id="7324876">Cmp</span><span class="op" id="7324879">(</span><span class="ident" id="7324880">e</span><span class="op" id="7324881">)</span>&nbsp;<span class="op" id="7324883">!=</span>&nbsp;<span class="num" id="7324886">0</span>&nbsp;<span class="op" id="7324888">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324893">t</span><span class="op" id="7324894">.</span><span class="ident" id="7324895">Errorf</span><span class="op" id="7324901">(</span><span class="string" id="7324902">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7324929">,</span>&nbsp;<span class="ident" id="7324931">x</span><span class="op" id="7324932">,</span>&nbsp;<span class="ident" id="7324934">z</span><span class="op" id="7324935">,</span>&nbsp;<span class="ident" id="7324937">e</span><span class="op" id="7324938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7324945">}</span><br>
<span class="lineno"></span><span class="op" id="7324947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7324950">func</span>&nbsp;<span class="ident" id="7324955">TestRatInv</span><span class="op" id="7324965">(</span><span class="ident" id="7324966">t</span>&nbsp;<span class="op" id="7324968">*</span><span class="ident" id="7324969">testing</span><span class="op" id="7324976">.</span><span class="ident" id="7324977">T</span><span class="op" id="7324978">)</span>&nbsp;<span class="op" id="7324980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7324983">zero</span>&nbsp;<span class="op" id="7324988">:=</span>&nbsp;<span class="builtinfunc" id="7324991">new</span><span class="op" id="7324994">(</span><span class="ident" id="7324995">Rat</span><span class="op" id="7324998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325001">for</span>&nbsp;<span class="ident" id="7325005">_</span><span class="op" id="7325006">,</span>&nbsp;<span class="ident" id="7325008">a</span>&nbsp;<span class="op" id="7325010">:=</span>&nbsp;<span class="keyword" id="7325013">range</span>&nbsp;<span class="ident" id="7325019">setStringTests</span>&nbsp;<span class="op" id="7325034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325038">x</span><span class="op" id="7325039">,</span>&nbsp;<span class="ident" id="7325041">ok</span>&nbsp;<span class="op" id="7325044">:=</span>&nbsp;<span class="builtinfunc" id="7325047">new</span><span class="op" id="7325050">(</span><span class="ident" id="7325051">Rat</span><span class="op" id="7325054">)</span><span class="op" id="7325055">.</span><span class="ident" id="7325056">SetString</span><span class="op" id="7325065">(</span><span class="ident" id="7325066">a</span><span class="op" id="7325067">.</span><span class="ident" id="7325068">in</span><span class="op" id="7325070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325074">if</span>&nbsp;<span class="op" id="7325077">!</span><span class="ident" id="7325078">ok</span>&nbsp;<span class="op" id="7325081">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325086">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325101">if</span>&nbsp;<span class="ident" id="7325104">x</span><span class="op" id="7325105">.</span><span class="ident" id="7325106">Cmp</span><span class="op" id="7325109">(</span><span class="ident" id="7325110">zero</span><span class="op" id="7325114">)</span>&nbsp;<span class="op" id="7325116">==</span>&nbsp;<span class="num" id="7325119">0</span>&nbsp;<span class="op" id="7325121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325126">continue</span>&nbsp;<span class="comment" id="7325135">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325163">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325167">e</span>&nbsp;<span class="op" id="7325169">:=</span>&nbsp;<span class="builtinfunc" id="7325172">new</span><span class="op" id="7325175">(</span><span class="ident" id="7325176">Rat</span><span class="op" id="7325179">)</span><span class="op" id="7325180">.</span><span class="ident" id="7325181">SetFrac</span><span class="op" id="7325188">(</span><span class="ident" id="7325189">x</span><span class="op" id="7325190">.</span><span class="ident" id="7325191">Denom</span><span class="op" id="7325196">(</span><span class="op" id="7325197">)</span><span class="op" id="7325198">,</span>&nbsp;<span class="ident" id="7325200">x</span><span class="op" id="7325201">.</span><span class="ident" id="7325202">Num</span><span class="op" id="7325205">(</span><span class="op" id="7325206">)</span><span class="op" id="7325207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325211">z</span>&nbsp;<span class="op" id="7325213">:=</span>&nbsp;<span class="builtinfunc" id="7325216">new</span><span class="op" id="7325219">(</span><span class="ident" id="7325220">Rat</span><span class="op" id="7325223">)</span><span class="op" id="7325224">.</span><span class="ident" id="7325225">Inv</span><span class="op" id="7325228">(</span><span class="ident" id="7325229">x</span><span class="op" id="7325230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325234">if</span>&nbsp;<span class="ident" id="7325237">z</span><span class="op" id="7325238">.</span><span class="ident" id="7325239">Cmp</span><span class="op" id="7325242">(</span><span class="ident" id="7325243">e</span><span class="op" id="7325244">)</span>&nbsp;<span class="op" id="7325246">!=</span>&nbsp;<span class="num" id="7325249">0</span>&nbsp;<span class="op" id="7325251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325256">t</span><span class="op" id="7325257">.</span><span class="ident" id="7325258">Errorf</span><span class="op" id="7325264">(</span><span class="string" id="7325265">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7325292">,</span>&nbsp;<span class="ident" id="7325294">x</span><span class="op" id="7325295">,</span>&nbsp;<span class="ident" id="7325297">z</span><span class="op" id="7325298">,</span>&nbsp;<span class="ident" id="7325300">e</span><span class="op" id="7325301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325305">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325308">}</span><br>
<span class="lineno"></span><span class="op" id="7325310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7325313">type</span>&nbsp;<span class="ident" id="7325318">ratBinFun</span>&nbsp;<span class="keyword" id="7325328">func</span><span class="op" id="7325332">(</span><span class="ident" id="7325333">z</span><span class="op" id="7325334">,</span>&nbsp;<span class="ident" id="7325336">x</span><span class="op" id="7325337">,</span>&nbsp;<span class="ident" id="7325339">y</span>&nbsp;<span class="op" id="7325341">*</span><span class="ident" id="7325342">Rat</span><span class="op" id="7325345">)</span>&nbsp;<span class="op" id="7325347">*</span><span class="ident" id="7325348">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7325352">type</span>&nbsp;<span class="ident" id="7325357">ratBinArg</span>&nbsp;<span class="keyword" id="7325367">struct</span>&nbsp;<span class="op" id="7325374">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325377">x</span><span class="op" id="7325378">,</span>&nbsp;<span class="ident" id="7325380">y</span><span class="op" id="7325381">,</span>&nbsp;<span class="ident" id="7325383">z</span>&nbsp;<span class="builtintype" id="7325385">string</span><br>
<span class="lineno"></span><span class="op" id="7325392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7325395">func</span>&nbsp;<span class="ident" id="7325400">testRatBin</span><span class="op" id="7325410">(</span><span class="ident" id="7325411">t</span>&nbsp;<span class="op" id="7325413">*</span><span class="ident" id="7325414">testing</span><span class="op" id="7325421">.</span><span class="ident" id="7325422">T</span><span class="op" id="7325423">,</span>&nbsp;<span class="ident" id="7325425">i</span>&nbsp;<span class="builtintype" id="7325427">int</span><span class="op" id="7325430">,</span>&nbsp;<span class="ident" id="7325432">name</span>&nbsp;<span class="builtintype" id="7325437">string</span><span class="op" id="7325443">,</span>&nbsp;<span class="ident" id="7325445">f</span>&nbsp;<span class="ident" id="7325447">ratBinFun</span><span class="op" id="7325456">,</span>&nbsp;<span class="ident" id="7325458">a</span>&nbsp;<span class="ident" id="7325460">ratBinArg</span><span class="op" id="7325469">)</span>&nbsp;<span class="op" id="7325471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325474">x</span><span class="op" id="7325475">,</span>&nbsp;<span class="ident" id="7325477">_</span>&nbsp;<span class="op" id="7325479">:=</span>&nbsp;<span class="builtinfunc" id="7325482">new</span><span class="op" id="7325485">(</span><span class="ident" id="7325486">Rat</span><span class="op" id="7325489">)</span><span class="op" id="7325490">.</span><span class="ident" id="7325491">SetString</span><span class="op" id="7325500">(</span><span class="ident" id="7325501">a</span><span class="op" id="7325502">.</span><span class="ident" id="7325503">x</span><span class="op" id="7325504">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325507">y</span><span class="op" id="7325508">,</span>&nbsp;<span class="ident" id="7325510">_</span>&nbsp;<span class="op" id="7325512">:=</span>&nbsp;<span class="builtinfunc" id="7325515">new</span><span class="op" id="7325518">(</span><span class="ident" id="7325519">Rat</span><span class="op" id="7325522">)</span><span class="op" id="7325523">.</span><span class="ident" id="7325524">SetString</span><span class="op" id="7325533">(</span><span class="ident" id="7325534">a</span><span class="op" id="7325535">.</span><span class="ident" id="7325536">y</span><span class="op" id="7325537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325540">z</span><span class="op" id="7325541">,</span>&nbsp;<span class="ident" id="7325543">_</span>&nbsp;<span class="op" id="7325545">:=</span>&nbsp;<span class="builtinfunc" id="7325548">new</span><span class="op" id="7325551">(</span><span class="ident" id="7325552">Rat</span><span class="op" id="7325555">)</span><span class="op" id="7325556">.</span><span class="ident" id="7325557">SetString</span><span class="op" id="7325566">(</span><span class="ident" id="7325567">a</span><span class="op" id="7325568">.</span><span class="ident" id="7325569">z</span><span class="op" id="7325570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325573">out</span>&nbsp;<span class="op" id="7325577">:=</span>&nbsp;<span class="ident" id="7325580">f</span><span class="op" id="7325581">(</span><span class="builtinfunc" id="7325582">new</span><span class="op" id="7325585">(</span><span class="ident" id="7325586">Rat</span><span class="op" id="7325589">)</span><span class="op" id="7325590">,</span>&nbsp;<span class="ident" id="7325592">x</span><span class="op" id="7325593">,</span>&nbsp;<span class="ident" id="7325595">y</span><span class="op" id="7325596">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7325600">if</span>&nbsp;<span class="ident" id="7325603">out</span><span class="op" id="7325606">.</span><span class="ident" id="7325607">Cmp</span><span class="op" id="7325610">(</span><span class="ident" id="7325611">z</span><span class="op" id="7325612">)</span>&nbsp;<span class="op" id="7325614">!=</span>&nbsp;<span class="num" id="7325617">0</span>&nbsp;<span class="op" id="7325619">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325623">t</span><span class="op" id="7325624">.</span><span class="ident" id="7325625">Errorf</span><span class="op" id="7325631">(</span><span class="string" id="7325632">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7325655">,</span>&nbsp;<span class="ident" id="7325657">name</span><span class="op" id="7325661">,</span>&nbsp;<span class="ident" id="7325663">i</span><span class="op" id="7325664">,</span>&nbsp;<span class="ident" id="7325666">out</span><span class="op" id="7325669">,</span>&nbsp;<span class="ident" id="7325671">z</span><span class="op" id="7325672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325675">}</span><br>
<span class="lineno"></span><span class="op" id="7325677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7325680">var</span>&nbsp;<span class="ident" id="7325684">ratBinTests</span>&nbsp;<span class="op" id="7325696">=</span>&nbsp;<span class="op" id="7325698">[</span><span class="op" id="7325699">]</span><span class="keyword" id="7325700">struct</span>&nbsp;<span class="op" id="7325707">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325710">x</span><span class="op" id="7325711">,</span>&nbsp;<span class="ident" id="7325713">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7325720">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7325728">sum</span><span class="op" id="7325731">,</span>&nbsp;<span class="ident" id="7325733">prod</span>&nbsp;<span class="builtintype" id="7325738">string</span><br>
<span class="lineno"></span><span class="op" id="7325745">}</span><span class="op" id="7325746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325749">{</span><span class="string" id="7325750">&#34;0&#34;</span><span class="op" id="7325753">,</span>&nbsp;<span class="string" id="7325755">&#34;0&#34;</span><span class="op" id="7325758">,</span>&nbsp;<span class="string" id="7325760">&#34;0&#34;</span><span class="op" id="7325763">,</span>&nbsp;<span class="string" id="7325765">&#34;0&#34;</span><span class="op" id="7325768">}</span><span class="op" id="7325769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325772">{</span><span class="string" id="7325773">&#34;0&#34;</span><span class="op" id="7325776">,</span>&nbsp;<span class="string" id="7325778">&#34;1&#34;</span><span class="op" id="7325781">,</span>&nbsp;<span class="string" id="7325783">&#34;1&#34;</span><span class="op" id="7325786">,</span>&nbsp;<span class="string" id="7325788">&#34;0&#34;</span><span class="op" id="7325791">}</span><span class="op" id="7325792">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325795">{</span><span class="string" id="7325796">&#34;-1&#34;</span><span class="op" id="7325800">,</span>&nbsp;<span class="string" id="7325802">&#34;0&#34;</span><span class="op" id="7325805">,</span>&nbsp;<span class="string" id="7325807">&#34;-1&#34;</span><span class="op" id="7325811">,</span>&nbsp;<span class="string" id="7325813">&#34;0&#34;</span><span class="op" id="7325816">}</span><span class="op" id="7325817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325820">{</span><span class="string" id="7325821">&#34;-1&#34;</span><span class="op" id="7325825">,</span>&nbsp;<span class="string" id="7325827">&#34;1&#34;</span><span class="op" id="7325830">,</span>&nbsp;<span class="string" id="7325832">&#34;0&#34;</span><span class="op" id="7325835">,</span>&nbsp;<span class="string" id="7325837">&#34;-1&#34;</span><span class="op" id="7325841">}</span><span class="op" id="7325842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325845">{</span><span class="string" id="7325846">&#34;1&#34;</span><span class="op" id="7325849">,</span>&nbsp;<span class="string" id="7325851">&#34;1&#34;</span><span class="op" id="7325854">,</span>&nbsp;<span class="string" id="7325856">&#34;2&#34;</span><span class="op" id="7325859">,</span>&nbsp;<span class="string" id="7325861">&#34;1&#34;</span><span class="op" id="7325864">}</span><span class="op" id="7325865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325868">{</span><span class="string" id="7325869">&#34;1/2&#34;</span><span class="op" id="7325874">,</span>&nbsp;<span class="string" id="7325876">&#34;1/2&#34;</span><span class="op" id="7325881">,</span>&nbsp;<span class="string" id="7325883">&#34;1&#34;</span><span class="op" id="7325886">,</span>&nbsp;<span class="string" id="7325888">&#34;1/4&#34;</span><span class="op" id="7325893">}</span><span class="op" id="7325894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325897">{</span><span class="string" id="7325898">&#34;1/4&#34;</span><span class="op" id="7325903">,</span>&nbsp;<span class="string" id="7325905">&#34;1/3&#34;</span><span class="op" id="7325910">,</span>&nbsp;<span class="string" id="7325912">&#34;7/12&#34;</span><span class="op" id="7325918">,</span>&nbsp;<span class="string" id="7325920">&#34;1/12&#34;</span><span class="op" id="7325926">}</span><span class="op" id="7325927">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325930">{</span><span class="string" id="7325931">&#34;2/5&#34;</span><span class="op" id="7325936">,</span>&nbsp;<span class="string" id="7325938">&#34;-14/3&#34;</span><span class="op" id="7325945">,</span>&nbsp;<span class="string" id="7325947">&#34;-64/15&#34;</span><span class="op" id="7325955">,</span>&nbsp;<span class="string" id="7325957">&#34;-28/15&#34;</span><span class="op" id="7325965">}</span><span class="op" id="7325966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7325969">{</span><span class="string" id="7325970">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7325997">,</span>&nbsp;<span class="string" id="7325999">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7326027">,</span>&nbsp;<span class="string" id="7326029">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7326095">,</span>&nbsp;<span class="string" id="7326097">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7326147">}</span><span class="op" id="7326148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326151">{</span><span class="string" id="7326152">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7326177">,</span>&nbsp;<span class="string" id="7326179">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7326204">,</span>&nbsp;<span class="string" id="7326206">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7326232">,</span>&nbsp;<span class="string" id="7326234">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7326277">}</span><span class="op" id="7326278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326281">{</span><span class="string" id="7326282">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7326344">,</span>&nbsp;<span class="string" id="7326346">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7326372">,</span>&nbsp;<span class="string" id="7326374">&#34;-27/133467566250814981&#34;</span><span class="op" id="7326398">,</span>&nbsp;<span class="string" id="7326400">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7326483">}</span><span class="op" id="7326484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326487">{</span><span class="string" id="7326488">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7326547">,</span>&nbsp;<span class="string" id="7326549">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7326582">,</span>&nbsp;<span class="string" id="7326584">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7326618">,</span>&nbsp;<span class="string" id="7326620">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7326707">}</span><span class="op" id="7326708">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326711">{</span><span class="string" id="7326712">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7326737">,</span>&nbsp;<span class="string" id="7326739">&#34;5/2848423294177090248&#34;</span><span class="op" id="7326762">,</span>&nbsp;<span class="string" id="7326764">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7326824">,</span>&nbsp;<span class="string" id="7326826">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7326869">}</span><span class="op" id="7326870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7326873">{</span><span class="string" id="7326874">&#34;26946729/330400702820&#34;</span><span class="op" id="7326897">,</span>&nbsp;<span class="string" id="7326899">&#34;41563965/225583428284&#34;</span><span class="op" id="7326922">,</span>&nbsp;<span class="string" id="7326924">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7326968">,</span>&nbsp;<span class="string" id="7326970">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7327011">}</span><span class="op" id="7327012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327015">{</span><span class="string" id="7327016">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7327040">,</span>&nbsp;<span class="string" id="7327042">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7327086">,</span>&nbsp;<span class="string" id="7327088">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7327152">,</span>&nbsp;<span class="string" id="7327154">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7327217">}</span><span class="op" id="7327218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327221">{</span><span class="string" id="7327222">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7327262">,</span>&nbsp;<span class="string" id="7327264">&#34;29/712593081308&#34;</span><span class="op" id="7327281">,</span>&nbsp;<span class="string" id="7327283">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7327346">,</span>&nbsp;<span class="string" id="7327348">&#34;808/45524274987585732633&#34;</span><span class="op" id="7327374">}</span><span class="op" id="7327375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327378">{</span><span class="string" id="7327379">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7327420">,</span>&nbsp;<span class="string" id="7327422">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7327448">,</span>&nbsp;<span class="string" id="7327450">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7327521">,</span>&nbsp;<span class="string" id="7327523">&#34;8967230/3296219033&#34;</span><span class="op" id="7327543">}</span><span class="op" id="7327544">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7327547">{</span><span class="string" id="7327548">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7327595">,</span>&nbsp;<span class="string" id="7327597">&#34;9381566963714/9633539&#34;</span><span class="op" id="7327620">,</span>&nbsp;<span class="string" id="7327622">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7327691">,</span>&nbsp;<span class="string" id="7327693">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7327720">}</span><span class="op" id="7327721">,</span><br>
<span class="lineno"></span><span class="op" id="7327723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7327726">func</span>&nbsp;<span class="ident" id="7327731">TestRatBin</span><span class="op" id="7327741">(</span><span class="ident" id="7327742">t</span>&nbsp;<span class="op" id="7327744">*</span><span class="ident" id="7327745">testing</span><span class="op" id="7327752">.</span><span class="ident" id="7327753">T</span><span class="op" id="7327754">)</span>&nbsp;<span class="op" id="7327756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7327759">for</span>&nbsp;<span class="ident" id="7327763">i</span><span class="op" id="7327764">,</span>&nbsp;<span class="ident" id="7327766">test</span>&nbsp;<span class="op" id="7327771">:=</span>&nbsp;<span class="keyword" id="7327774">range</span>&nbsp;<span class="ident" id="7327780">ratBinTests</span>&nbsp;<span class="op" id="7327792">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327796">arg</span>&nbsp;<span class="op" id="7327800">:=</span>&nbsp;<span class="ident" id="7327803">ratBinArg</span><span class="op" id="7327812">{</span><span class="ident" id="7327813">test</span><span class="op" id="7327817">.</span><span class="ident" id="7327818">x</span><span class="op" id="7327819">,</span>&nbsp;<span class="ident" id="7327821">test</span><span class="op" id="7327825">.</span><span class="ident" id="7327826">y</span><span class="op" id="7327827">,</span>&nbsp;<span class="ident" id="7327829">test</span><span class="op" id="7327833">.</span><span class="ident" id="7327834">sum</span><span class="op" id="7327837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327841">testRatBin</span><span class="op" id="7327851">(</span><span class="ident" id="7327852">t</span><span class="op" id="7327853">,</span>&nbsp;<span class="ident" id="7327855">i</span><span class="op" id="7327856">,</span>&nbsp;<span class="string" id="7327858">&#34;Add&#34;</span><span class="op" id="7327863">,</span>&nbsp;<span class="op" id="7327865">(</span><span class="op" id="7327866">*</span><span class="ident" id="7327867">Rat</span><span class="op" id="7327870">)</span><span class="op" id="7327871">.</span><span class="ident" id="7327872">Add</span><span class="op" id="7327875">,</span>&nbsp;<span class="ident" id="7327877">arg</span><span class="op" id="7327880">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327885">arg</span>&nbsp;<span class="op" id="7327889">=</span>&nbsp;<span class="ident" id="7327891">ratBinArg</span><span class="op" id="7327900">{</span><span class="ident" id="7327901">test</span><span class="op" id="7327905">.</span><span class="ident" id="7327906">y</span><span class="op" id="7327907">,</span>&nbsp;<span class="ident" id="7327909">test</span><span class="op" id="7327913">.</span><span class="ident" id="7327914">x</span><span class="op" id="7327915">,</span>&nbsp;<span class="ident" id="7327917">test</span><span class="op" id="7327921">.</span><span class="ident" id="7327922">sum</span><span class="op" id="7327925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327929">testRatBin</span><span class="op" id="7327939">(</span><span class="ident" id="7327940">t</span><span class="op" id="7327941">,</span>&nbsp;<span class="ident" id="7327943">i</span><span class="op" id="7327944">,</span>&nbsp;<span class="string" id="7327946">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7327961">,</span>&nbsp;<span class="op" id="7327963">(</span><span class="op" id="7327964">*</span><span class="ident" id="7327965">Rat</span><span class="op" id="7327968">)</span><span class="op" id="7327969">.</span><span class="ident" id="7327970">Add</span><span class="op" id="7327973">,</span>&nbsp;<span class="ident" id="7327975">arg</span><span class="op" id="7327978">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7327983">arg</span>&nbsp;<span class="op" id="7327987">=</span>&nbsp;<span class="ident" id="7327989">ratBinArg</span><span class="op" id="7327998">{</span><span class="ident" id="7327999">test</span><span class="op" id="7328003">.</span><span class="ident" id="7328004">sum</span><span class="op" id="7328007">,</span>&nbsp;<span class="ident" id="7328009">test</span><span class="op" id="7328013">.</span><span class="ident" id="7328014">x</span><span class="op" id="7328015">,</span>&nbsp;<span class="ident" id="7328017">test</span><span class="op" id="7328021">.</span><span class="ident" id="7328022">y</span><span class="op" id="7328023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328027">testRatBin</span><span class="op" id="7328037">(</span><span class="ident" id="7328038">t</span><span class="op" id="7328039">,</span>&nbsp;<span class="ident" id="7328041">i</span><span class="op" id="7328042">,</span>&nbsp;<span class="string" id="7328044">&#34;Sub&#34;</span><span class="op" id="7328049">,</span>&nbsp;<span class="op" id="7328051">(</span><span class="op" id="7328052">*</span><span class="ident" id="7328053">Rat</span><span class="op" id="7328056">)</span><span class="op" id="7328057">.</span><span class="ident" id="7328058">Sub</span><span class="op" id="7328061">,</span>&nbsp;<span class="ident" id="7328063">arg</span><span class="op" id="7328066">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328071">arg</span>&nbsp;<span class="op" id="7328075">=</span>&nbsp;<span class="ident" id="7328077">ratBinArg</span><span class="op" id="7328086">{</span><span class="ident" id="7328087">test</span><span class="op" id="7328091">.</span><span class="ident" id="7328092">sum</span><span class="op" id="7328095">,</span>&nbsp;<span class="ident" id="7328097">test</span><span class="op" id="7328101">.</span><span class="ident" id="7328102">y</span><span class="op" id="7328103">,</span>&nbsp;<span class="ident" id="7328105">test</span><span class="op" id="7328109">.</span><span class="ident" id="7328110">x</span><span class="op" id="7328111">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328115">testRatBin</span><span class="op" id="7328125">(</span><span class="ident" id="7328126">t</span><span class="op" id="7328127">,</span>&nbsp;<span class="ident" id="7328129">i</span><span class="op" id="7328130">,</span>&nbsp;<span class="string" id="7328132">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7328147">,</span>&nbsp;<span class="op" id="7328149">(</span><span class="op" id="7328150">*</span><span class="ident" id="7328151">Rat</span><span class="op" id="7328154">)</span><span class="op" id="7328155">.</span><span class="ident" id="7328156">Sub</span><span class="op" id="7328159">,</span>&nbsp;<span class="ident" id="7328161">arg</span><span class="op" id="7328164">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328169">arg</span>&nbsp;<span class="op" id="7328173">=</span>&nbsp;<span class="ident" id="7328175">ratBinArg</span><span class="op" id="7328184">{</span><span class="ident" id="7328185">test</span><span class="op" id="7328189">.</span><span class="ident" id="7328190">x</span><span class="op" id="7328191">,</span>&nbsp;<span class="ident" id="7328193">test</span><span class="op" id="7328197">.</span><span class="ident" id="7328198">y</span><span class="op" id="7328199">,</span>&nbsp;<span class="ident" id="7328201">test</span><span class="op" id="7328205">.</span><span class="ident" id="7328206">prod</span><span class="op" id="7328210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328214">testRatBin</span><span class="op" id="7328224">(</span><span class="ident" id="7328225">t</span><span class="op" id="7328226">,</span>&nbsp;<span class="ident" id="7328228">i</span><span class="op" id="7328229">,</span>&nbsp;<span class="string" id="7328231">&#34;Mul&#34;</span><span class="op" id="7328236">,</span>&nbsp;<span class="op" id="7328238">(</span><span class="op" id="7328239">*</span><span class="ident" id="7328240">Rat</span><span class="op" id="7328243">)</span><span class="op" id="7328244">.</span><span class="ident" id="7328245">Mul</span><span class="op" id="7328248">,</span>&nbsp;<span class="ident" id="7328250">arg</span><span class="op" id="7328253">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328258">arg</span>&nbsp;<span class="op" id="7328262">=</span>&nbsp;<span class="ident" id="7328264">ratBinArg</span><span class="op" id="7328273">{</span><span class="ident" id="7328274">test</span><span class="op" id="7328278">.</span><span class="ident" id="7328279">y</span><span class="op" id="7328280">,</span>&nbsp;<span class="ident" id="7328282">test</span><span class="op" id="7328286">.</span><span class="ident" id="7328287">x</span><span class="op" id="7328288">,</span>&nbsp;<span class="ident" id="7328290">test</span><span class="op" id="7328294">.</span><span class="ident" id="7328295">prod</span><span class="op" id="7328299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328303">testRatBin</span><span class="op" id="7328313">(</span><span class="ident" id="7328314">t</span><span class="op" id="7328315">,</span>&nbsp;<span class="ident" id="7328317">i</span><span class="op" id="7328318">,</span>&nbsp;<span class="string" id="7328320">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7328335">,</span>&nbsp;<span class="op" id="7328337">(</span><span class="op" id="7328338">*</span><span class="ident" id="7328339">Rat</span><span class="op" id="7328342">)</span><span class="op" id="7328343">.</span><span class="ident" id="7328344">Mul</span><span class="op" id="7328347">,</span>&nbsp;<span class="ident" id="7328349">arg</span><span class="op" id="7328352">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328357">if</span>&nbsp;<span class="ident" id="7328360">test</span><span class="op" id="7328364">.</span><span class="ident" id="7328365">x</span>&nbsp;<span class="op" id="7328367">!=</span>&nbsp;<span class="string" id="7328370">&#34;0&#34;</span>&nbsp;<span class="op" id="7328374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328379">arg</span>&nbsp;<span class="op" id="7328383">=</span>&nbsp;<span class="ident" id="7328385">ratBinArg</span><span class="op" id="7328394">{</span><span class="ident" id="7328395">test</span><span class="op" id="7328399">.</span><span class="ident" id="7328400">prod</span><span class="op" id="7328404">,</span>&nbsp;<span class="ident" id="7328406">test</span><span class="op" id="7328410">.</span><span class="ident" id="7328411">x</span><span class="op" id="7328412">,</span>&nbsp;<span class="ident" id="7328414">test</span><span class="op" id="7328418">.</span><span class="ident" id="7328419">y</span><span class="op" id="7328420">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328425">testRatBin</span><span class="op" id="7328435">(</span><span class="ident" id="7328436">t</span><span class="op" id="7328437">,</span>&nbsp;<span class="ident" id="7328439">i</span><span class="op" id="7328440">,</span>&nbsp;<span class="string" id="7328442">&#34;Quo&#34;</span><span class="op" id="7328447">,</span>&nbsp;<span class="op" id="7328449">(</span><span class="op" id="7328450">*</span><span class="ident" id="7328451">Rat</span><span class="op" id="7328454">)</span><span class="op" id="7328455">.</span><span class="ident" id="7328456">Quo</span><span class="op" id="7328459">,</span>&nbsp;<span class="ident" id="7328461">arg</span><span class="op" id="7328464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328473">if</span>&nbsp;<span class="ident" id="7328476">test</span><span class="op" id="7328480">.</span><span class="ident" id="7328481">y</span>&nbsp;<span class="op" id="7328483">!=</span>&nbsp;<span class="string" id="7328486">&#34;0&#34;</span>&nbsp;<span class="op" id="7328490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328495">arg</span>&nbsp;<span class="op" id="7328499">=</span>&nbsp;<span class="ident" id="7328501">ratBinArg</span><span class="op" id="7328510">{</span><span class="ident" id="7328511">test</span><span class="op" id="7328515">.</span><span class="ident" id="7328516">prod</span><span class="op" id="7328520">,</span>&nbsp;<span class="ident" id="7328522">test</span><span class="op" id="7328526">.</span><span class="ident" id="7328527">y</span><span class="op" id="7328528">,</span>&nbsp;<span class="ident" id="7328530">test</span><span class="op" id="7328534">.</span><span class="ident" id="7328535">x</span><span class="op" id="7328536">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328541">testRatBin</span><span class="op" id="7328551">(</span><span class="ident" id="7328552">t</span><span class="op" id="7328553">,</span>&nbsp;<span class="ident" id="7328555">i</span><span class="op" id="7328556">,</span>&nbsp;<span class="string" id="7328558">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7328573">,</span>&nbsp;<span class="op" id="7328575">(</span><span class="op" id="7328576">*</span><span class="ident" id="7328577">Rat</span><span class="op" id="7328580">)</span><span class="op" id="7328581">.</span><span class="ident" id="7328582">Quo</span><span class="op" id="7328585">,</span>&nbsp;<span class="ident" id="7328587">arg</span><span class="op" id="7328590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328597">}</span><br>
<span class="lineno"></span><span class="op" id="7328599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7328602">func</span>&nbsp;<span class="ident" id="7328607">TestIssue820</span><span class="op" id="7328619">(</span><span class="ident" id="7328620">t</span>&nbsp;<span class="op" id="7328622">*</span><span class="ident" id="7328623">testing</span><span class="op" id="7328630">.</span><span class="ident" id="7328631">T</span><span class="op" id="7328632">)</span>&nbsp;<span class="op" id="7328634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328637">x</span>&nbsp;<span class="op" id="7328639">:=</span>&nbsp;<span class="ident" id="7328642">NewRat</span><span class="op" id="7328648">(</span><span class="num" id="7328649">3</span><span class="op" id="7328650">,</span>&nbsp;<span class="num" id="7328652">1</span><span class="op" id="7328653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328656">y</span>&nbsp;<span class="op" id="7328658">:=</span>&nbsp;<span class="ident" id="7328661">NewRat</span><span class="op" id="7328667">(</span><span class="num" id="7328668">2</span><span class="op" id="7328669">,</span>&nbsp;<span class="num" id="7328671">1</span><span class="op" id="7328672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328675">z</span>&nbsp;<span class="op" id="7328677">:=</span>&nbsp;<span class="ident" id="7328680">y</span><span class="op" id="7328681">.</span><span class="ident" id="7328682">Quo</span><span class="op" id="7328685">(</span><span class="ident" id="7328686">x</span><span class="op" id="7328687">,</span>&nbsp;<span class="ident" id="7328689">y</span><span class="op" id="7328690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328693">q</span>&nbsp;<span class="op" id="7328695">:=</span>&nbsp;<span class="ident" id="7328698">NewRat</span><span class="op" id="7328704">(</span><span class="num" id="7328705">3</span><span class="op" id="7328706">,</span>&nbsp;<span class="num" id="7328708">2</span><span class="op" id="7328709">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328712">if</span>&nbsp;<span class="ident" id="7328715">z</span><span class="op" id="7328716">.</span><span class="ident" id="7328717">Cmp</span><span class="op" id="7328720">(</span><span class="ident" id="7328721">q</span><span class="op" id="7328722">)</span>&nbsp;<span class="op" id="7328724">!=</span>&nbsp;<span class="num" id="7328727">0</span>&nbsp;<span class="op" id="7328729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328733">t</span><span class="op" id="7328734">.</span><span class="ident" id="7328735">Errorf</span><span class="op" id="7328741">(</span><span class="string" id="7328742">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7328758">,</span>&nbsp;<span class="ident" id="7328760">z</span><span class="op" id="7328761">,</span>&nbsp;<span class="ident" id="7328763">q</span><span class="op" id="7328764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328771">y</span>&nbsp;<span class="op" id="7328773">=</span>&nbsp;<span class="ident" id="7328775">NewRat</span><span class="op" id="7328781">(</span><span class="num" id="7328782">3</span><span class="op" id="7328783">,</span>&nbsp;<span class="num" id="7328785">1</span><span class="op" id="7328786">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328789">x</span>&nbsp;<span class="op" id="7328791">=</span>&nbsp;<span class="ident" id="7328793">NewRat</span><span class="op" id="7328799">(</span><span class="num" id="7328800">2</span><span class="op" id="7328801">,</span>&nbsp;<span class="num" id="7328803">1</span><span class="op" id="7328804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328807">z</span>&nbsp;<span class="op" id="7328809">=</span>&nbsp;<span class="ident" id="7328811">y</span><span class="op" id="7328812">.</span><span class="ident" id="7328813">Quo</span><span class="op" id="7328816">(</span><span class="ident" id="7328817">x</span><span class="op" id="7328818">,</span>&nbsp;<span class="ident" id="7328820">y</span><span class="op" id="7328821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328824">q</span>&nbsp;<span class="op" id="7328826">=</span>&nbsp;<span class="ident" id="7328828">NewRat</span><span class="op" id="7328834">(</span><span class="num" id="7328835">2</span><span class="op" id="7328836">,</span>&nbsp;<span class="num" id="7328838">3</span><span class="op" id="7328839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328842">if</span>&nbsp;<span class="ident" id="7328845">z</span><span class="op" id="7328846">.</span><span class="ident" id="7328847">Cmp</span><span class="op" id="7328850">(</span><span class="ident" id="7328851">q</span><span class="op" id="7328852">)</span>&nbsp;<span class="op" id="7328854">!=</span>&nbsp;<span class="num" id="7328857">0</span>&nbsp;<span class="op" id="7328859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328863">t</span><span class="op" id="7328864">.</span><span class="ident" id="7328865">Errorf</span><span class="op" id="7328871">(</span><span class="string" id="7328872">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7328888">,</span>&nbsp;<span class="ident" id="7328890">z</span><span class="op" id="7328891">,</span>&nbsp;<span class="ident" id="7328893">q</span><span class="op" id="7328894">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7328897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328901">x</span>&nbsp;<span class="op" id="7328903">=</span>&nbsp;<span class="ident" id="7328905">NewRat</span><span class="op" id="7328911">(</span><span class="num" id="7328912">3</span><span class="op" id="7328913">,</span>&nbsp;<span class="num" id="7328915">1</span><span class="op" id="7328916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328919">z</span>&nbsp;<span class="op" id="7328921">=</span>&nbsp;<span class="ident" id="7328923">x</span><span class="op" id="7328924">.</span><span class="ident" id="7328925">Quo</span><span class="op" id="7328928">(</span><span class="ident" id="7328929">x</span><span class="op" id="7328930">,</span>&nbsp;<span class="ident" id="7328932">x</span><span class="op" id="7328933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328936">q</span>&nbsp;<span class="op" id="7328938">=</span>&nbsp;<span class="ident" id="7328940">NewRat</span><span class="op" id="7328946">(</span><span class="num" id="7328947">3</span><span class="op" id="7328948">,</span>&nbsp;<span class="num" id="7328950">3</span><span class="op" id="7328951">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7328954">if</span>&nbsp;<span class="ident" id="7328957">z</span><span class="op" id="7328958">.</span><span class="ident" id="7328959">Cmp</span><span class="op" id="7328962">(</span><span class="ident" id="7328963">q</span><span class="op" id="7328964">)</span>&nbsp;<span class="op" id="7328966">!=</span>&nbsp;<span class="num" id="7328969">0</span>&nbsp;<span class="op" id="7328971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7328975">t</span><span class="op" id="7328976">.</span><span class="ident" id="7328977">Errorf</span><span class="op" id="7328983">(</span><span class="string" id="7328984">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7329000">,</span>&nbsp;<span class="ident" id="7329002">z</span><span class="op" id="7329003">,</span>&nbsp;<span class="ident" id="7329005">q</span><span class="op" id="7329006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329009">}</span><br>
<span class="lineno"></span><span class="op" id="7329011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7329014">var</span>&nbsp;<span class="ident" id="7329018">setFrac64Tests</span>&nbsp;<span class="op" id="7329033">=</span>&nbsp;<span class="op" id="7329035">[</span><span class="op" id="7329036">]</span><span class="keyword" id="7329037">struct</span>&nbsp;<span class="op" id="7329044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329047">a</span><span class="op" id="7329048">,</span>&nbsp;<span class="ident" id="7329050">b</span>&nbsp;<span class="ident" id="7329052">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329059">out</span>&nbsp;&nbsp;<span class="builtintype" id="7329064">string</span><br>
<span class="lineno"></span><span class="op" id="7329071">}</span><span class="op" id="7329072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329075">{</span><span class="num" id="7329076">0</span><span class="op" id="7329077">,</span>&nbsp;<span class="num" id="7329079">1</span><span class="op" id="7329080">,</span>&nbsp;<span class="string" id="7329082">&#34;0&#34;</span><span class="op" id="7329085">}</span><span class="op" id="7329086">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329089">{</span><span class="num" id="7329090">0</span><span class="op" id="7329091">,</span>&nbsp;<span class="op" id="7329093">-</span><span class="num" id="7329094">1</span><span class="op" id="7329095">,</span>&nbsp;<span class="string" id="7329097">&#34;0&#34;</span><span class="op" id="7329100">}</span><span class="op" id="7329101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329104">{</span><span class="num" id="7329105">1</span><span class="op" id="7329106">,</span>&nbsp;<span class="num" id="7329108">1</span><span class="op" id="7329109">,</span>&nbsp;<span class="string" id="7329111">&#34;1&#34;</span><span class="op" id="7329114">}</span><span class="op" id="7329115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329118">{</span><span class="op" id="7329119">-</span><span class="num" id="7329120">1</span><span class="op" id="7329121">,</span>&nbsp;<span class="num" id="7329123">1</span><span class="op" id="7329124">,</span>&nbsp;<span class="string" id="7329126">&#34;-1&#34;</span><span class="op" id="7329130">}</span><span class="op" id="7329131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329134">{</span><span class="num" id="7329135">1</span><span class="op" id="7329136">,</span>&nbsp;<span class="op" id="7329138">-</span><span class="num" id="7329139">1</span><span class="op" id="7329140">,</span>&nbsp;<span class="string" id="7329142">&#34;-1&#34;</span><span class="op" id="7329146">}</span><span class="op" id="7329147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329150">{</span><span class="op" id="7329151">-</span><span class="num" id="7329152">1</span><span class="op" id="7329153">,</span>&nbsp;<span class="op" id="7329155">-</span><span class="num" id="7329156">1</span><span class="op" id="7329157">,</span>&nbsp;<span class="string" id="7329159">&#34;1&#34;</span><span class="op" id="7329162">}</span><span class="op" id="7329163">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329166">{</span><span class="op" id="7329167">-</span><span class="num" id="7329168">9223372036854775808</span><span class="op" id="7329187">,</span>&nbsp;<span class="op" id="7329189">-</span><span class="num" id="7329190">9223372036854775808</span><span class="op" id="7329209">,</span>&nbsp;<span class="string" id="7329211">&#34;1&#34;</span><span class="op" id="7329214">}</span><span class="op" id="7329215">,</span><br>
<span class="lineno"></span><span class="op" id="7329217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7329220">func</span>&nbsp;<span class="ident" id="7329225">TestRatSetFrac64Rat</span><span class="op" id="7329244">(</span><span class="ident" id="7329245">t</span>&nbsp;<span class="op" id="7329247">*</span><span class="ident" id="7329248">testing</span><span class="op" id="7329255">.</span><span class="ident" id="7329256">T</span><span class="op" id="7329257">)</span>&nbsp;<span class="op" id="7329259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329262">for</span>&nbsp;<span class="ident" id="7329266">i</span><span class="op" id="7329267">,</span>&nbsp;<span class="ident" id="7329269">test</span>&nbsp;<span class="op" id="7329274">:=</span>&nbsp;<span class="keyword" id="7329277">range</span>&nbsp;<span class="ident" id="7329283">setFrac64Tests</span>&nbsp;<span class="op" id="7329298">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329302">x</span>&nbsp;<span class="op" id="7329304">:=</span>&nbsp;<span class="builtinfunc" id="7329307">new</span><span class="op" id="7329310">(</span><span class="ident" id="7329311">Rat</span><span class="op" id="7329314">)</span><span class="op" id="7329315">.</span><span class="ident" id="7329316">SetFrac64</span><span class="op" id="7329325">(</span><span class="ident" id="7329326">test</span><span class="op" id="7329330">.</span><span class="ident" id="7329331">a</span><span class="op" id="7329332">,</span>&nbsp;<span class="ident" id="7329334">test</span><span class="op" id="7329338">.</span><span class="ident" id="7329339">b</span><span class="op" id="7329340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329344">if</span>&nbsp;<span class="ident" id="7329347">x</span><span class="op" id="7329348">.</span><span class="ident" id="7329349">RatString</span><span class="op" id="7329358">(</span><span class="op" id="7329359">)</span>&nbsp;<span class="op" id="7329361">!=</span>&nbsp;<span class="ident" id="7329364">test</span><span class="op" id="7329368">.</span><span class="ident" id="7329369">out</span>&nbsp;<span class="op" id="7329373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329378">t</span><span class="op" id="7329379">.</span><span class="ident" id="7329380">Errorf</span><span class="op" id="7329386">(</span><span class="string" id="7329387">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7329407">,</span>&nbsp;<span class="ident" id="7329409">i</span><span class="op" id="7329410">,</span>&nbsp;<span class="ident" id="7329412">x</span><span class="op" id="7329413">.</span><span class="ident" id="7329414">RatString</span><span class="op" id="7329423">(</span><span class="op" id="7329424">)</span><span class="op" id="7329425">,</span>&nbsp;<span class="ident" id="7329427">test</span><span class="op" id="7329431">.</span><span class="ident" id="7329432">out</span><span class="op" id="7329435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329442">}</span><br>
<span class="lineno">390</span><span class="op" id="7329444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7329447">func</span>&nbsp;<span class="ident" id="7329452">TestRatGobEncoding</span><span class="op" id="7329470">(</span><span class="ident" id="7329471">t</span>&nbsp;<span class="op" id="7329473">*</span><span class="ident" id="7329474">testing</span><span class="op" id="7329481">.</span><span class="ident" id="7329482">T</span><span class="op" id="7329483">)</span>&nbsp;<span class="op" id="7329485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329488">var</span>&nbsp;<span class="ident" id="7329492">medium</span>&nbsp;<span class="ident" id="7329499">bytes</span><span class="op" id="7329504">.</span><span class="ident" id="7329505">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329513">enc</span>&nbsp;<span class="op" id="7329517">:=</span>&nbsp;<span class="ident" id="7329520">gob</span><span class="op" id="7329523">.</span><span class="ident" id="7329524">NewEncoder</span><span class="op" id="7329534">(</span><span class="op" id="7329535">&amp;</span><span class="ident" id="7329536">medium</span><span class="op" id="7329542">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329545">dec</span>&nbsp;<span class="op" id="7329549">:=</span>&nbsp;<span class="ident" id="7329552">gob</span><span class="op" id="7329555">.</span><span class="ident" id="7329556">NewDecoder</span><span class="op" id="7329566">(</span><span class="op" id="7329567">&amp;</span><span class="ident" id="7329568">medium</span><span class="op" id="7329574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329577">for</span>&nbsp;<span class="ident" id="7329581">_</span><span class="op" id="7329582">,</span>&nbsp;<span class="ident" id="7329584">test</span>&nbsp;<span class="op" id="7329589">:=</span>&nbsp;<span class="keyword" id="7329592">range</span>&nbsp;<span class="ident" id="7329598">encodingTests</span>&nbsp;<span class="op" id="7329612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329616">medium</span><span class="op" id="7329622">.</span><span class="ident" id="7329623">Reset</span><span class="op" id="7329628">(</span><span class="op" id="7329629">)</span>&nbsp;<span class="comment" id="7329631">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329690">var</span>&nbsp;<span class="ident" id="7329694">tx</span>&nbsp;<span class="ident" id="7329697">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329703">tx</span><span class="op" id="7329705">.</span><span class="ident" id="7329706">SetString</span><span class="op" id="7329715">(</span><span class="ident" id="7329716">test</span>&nbsp;<span class="op" id="7329721">+</span>&nbsp;<span class="string" id="7329723">&#34;.14159265&#34;</span><span class="op" id="7329734">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329738">if</span>&nbsp;<span class="ident" id="7329741">err</span>&nbsp;<span class="op" id="7329745">:=</span>&nbsp;<span class="ident" id="7329748">enc</span><span class="op" id="7329751">.</span><span class="ident" id="7329752">Encode</span><span class="op" id="7329758">(</span><span class="op" id="7329759">&amp;</span><span class="ident" id="7329760">tx</span><span class="op" id="7329762">)</span><span class="op" id="7329763">;</span>&nbsp;<span class="ident" id="7329765">err</span>&nbsp;<span class="op" id="7329769">!=</span>&nbsp;<span class="ident" id="7329772">nil</span>&nbsp;<span class="op" id="7329776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329781">t</span><span class="op" id="7329782">.</span><span class="ident" id="7329783">Errorf</span><span class="op" id="7329789">(</span><span class="string" id="7329790">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7329817">,</span>&nbsp;<span class="op" id="7329819">&amp;</span><span class="ident" id="7329820">tx</span><span class="op" id="7329822">,</span>&nbsp;<span class="ident" id="7329824">err</span><span class="op" id="7329827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329835">var</span>&nbsp;<span class="ident" id="7329839">rx</span>&nbsp;<span class="ident" id="7329842">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329848">if</span>&nbsp;<span class="ident" id="7329851">err</span>&nbsp;<span class="op" id="7329855">:=</span>&nbsp;<span class="ident" id="7329858">dec</span><span class="op" id="7329861">.</span><span class="ident" id="7329862">Decode</span><span class="op" id="7329868">(</span><span class="op" id="7329869">&amp;</span><span class="ident" id="7329870">rx</span><span class="op" id="7329872">)</span><span class="op" id="7329873">;</span>&nbsp;<span class="ident" id="7329875">err</span>&nbsp;<span class="op" id="7329879">!=</span>&nbsp;<span class="ident" id="7329882">nil</span>&nbsp;<span class="op" id="7329886">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329891">t</span><span class="op" id="7329892">.</span><span class="ident" id="7329893">Errorf</span><span class="op" id="7329899">(</span><span class="string" id="7329900">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7329927">,</span>&nbsp;<span class="op" id="7329929">&amp;</span><span class="ident" id="7329930">tx</span><span class="op" id="7329932">,</span>&nbsp;<span class="ident" id="7329934">err</span><span class="op" id="7329937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7329941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7329945">if</span>&nbsp;<span class="ident" id="7329948">rx</span><span class="op" id="7329950">.</span><span class="ident" id="7329951">Cmp</span><span class="op" id="7329954">(</span><span class="op" id="7329955">&amp;</span><span class="ident" id="7329956">tx</span><span class="op" id="7329958">)</span>&nbsp;<span class="op" id="7329960">!=</span>&nbsp;<span class="num" id="7329963">0</span>&nbsp;<span class="op" id="7329965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7329970">t</span><span class="op" id="7329971">.</span><span class="ident" id="7329972">Errorf</span><span class="op" id="7329978">(</span><span class="string" id="7329979">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7330022">,</span>&nbsp;<span class="op" id="7330024">&amp;</span><span class="ident" id="7330025">tx</span><span class="op" id="7330027">,</span>&nbsp;<span class="op" id="7330029">&amp;</span><span class="ident" id="7330030">rx</span><span class="op" id="7330032">,</span>&nbsp;<span class="op" id="7330034">&amp;</span><span class="ident" id="7330035">tx</span><span class="op" id="7330037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330041">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330044">}</span><br>
<span class="lineno"></span><span class="op" id="7330046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7330049">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7330144">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7330169">func</span>&nbsp;<span class="ident" id="7330174">TestGobEncodingNilRatInSlice</span><span class="op" id="7330202">(</span><span class="ident" id="7330203">t</span>&nbsp;<span class="op" id="7330205">*</span><span class="ident" id="7330206">testing</span><span class="op" id="7330213">.</span><span class="ident" id="7330214">T</span><span class="op" id="7330215">)</span>&nbsp;<span class="op" id="7330217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330220">buf</span>&nbsp;<span class="op" id="7330224">:=</span>&nbsp;<span class="builtinfunc" id="7330227">new</span><span class="op" id="7330230">(</span><span class="ident" id="7330231">bytes</span><span class="op" id="7330236">.</span><span class="ident" id="7330237">Buffer</span><span class="op" id="7330243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330246">enc</span>&nbsp;<span class="op" id="7330250">:=</span>&nbsp;<span class="ident" id="7330253">gob</span><span class="op" id="7330256">.</span><span class="ident" id="7330257">NewEncoder</span><span class="op" id="7330267">(</span><span class="ident" id="7330268">buf</span><span class="op" id="7330271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330274">dec</span>&nbsp;<span class="op" id="7330278">:=</span>&nbsp;<span class="ident" id="7330281">gob</span><span class="op" id="7330284">.</span><span class="ident" id="7330285">NewDecoder</span><span class="op" id="7330295">(</span><span class="ident" id="7330296">buf</span><span class="op" id="7330299">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330303">var</span>&nbsp;<span class="ident" id="7330307">in</span>&nbsp;<span class="op" id="7330310">=</span>&nbsp;<span class="builtinfunc" id="7330312">make</span><span class="op" id="7330316">(</span><span class="op" id="7330317">[</span><span class="op" id="7330318">]</span><span class="op" id="7330319">*</span><span class="ident" id="7330320">Rat</span><span class="op" id="7330323">,</span>&nbsp;<span class="num" id="7330325">1</span><span class="op" id="7330326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330329">err</span>&nbsp;<span class="op" id="7330333">:=</span>&nbsp;<span class="ident" id="7330336">enc</span><span class="op" id="7330339">.</span><span class="ident" id="7330340">Encode</span><span class="op" id="7330346">(</span><span class="op" id="7330347">&amp;</span><span class="ident" id="7330348">in</span><span class="op" id="7330350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330353">if</span>&nbsp;<span class="ident" id="7330356">err</span>&nbsp;<span class="op" id="7330360">!=</span>&nbsp;<span class="ident" id="7330363">nil</span>&nbsp;<span class="op" id="7330367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330371">t</span><span class="op" id="7330372">.</span><span class="ident" id="7330373">Errorf</span><span class="op" id="7330379">(</span><span class="string" id="7330380">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7330403">,</span>&nbsp;<span class="ident" id="7330405">err</span><span class="op" id="7330408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330411">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330414">var</span>&nbsp;<span class="ident" id="7330418">out</span>&nbsp;<span class="op" id="7330422">[</span><span class="op" id="7330423">]</span><span class="op" id="7330424">*</span><span class="ident" id="7330425">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330430">err</span>&nbsp;<span class="op" id="7330434">=</span>&nbsp;<span class="ident" id="7330436">dec</span><span class="op" id="7330439">.</span><span class="ident" id="7330440">Decode</span><span class="op" id="7330446">(</span><span class="op" id="7330447">&amp;</span><span class="ident" id="7330448">out</span><span class="op" id="7330451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330454">if</span>&nbsp;<span class="ident" id="7330457">err</span>&nbsp;<span class="op" id="7330461">!=</span>&nbsp;<span class="ident" id="7330464">nil</span>&nbsp;<span class="op" id="7330468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330472">t</span><span class="op" id="7330473">.</span><span class="ident" id="7330474">Fatalf</span><span class="op" id="7330480">(</span><span class="string" id="7330481">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7330504">,</span>&nbsp;<span class="ident" id="7330506">err</span><span class="op" id="7330509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330512">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330515">if</span>&nbsp;<span class="builtinfunc" id="7330518">len</span><span class="op" id="7330521">(</span><span class="ident" id="7330522">out</span><span class="op" id="7330525">)</span>&nbsp;<span class="op" id="7330527">!=</span>&nbsp;<span class="num" id="7330530">1</span>&nbsp;<span class="op" id="7330532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330536">t</span><span class="op" id="7330537">.</span><span class="ident" id="7330538">Fatalf</span><span class="op" id="7330544">(</span><span class="string" id="7330545">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7330571">,</span>&nbsp;<span class="builtinfunc" id="7330573">len</span><span class="op" id="7330576">(</span><span class="ident" id="7330577">out</span><span class="op" id="7330580">)</span><span class="op" id="7330581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330587">var</span>&nbsp;<span class="ident" id="7330591">zero</span>&nbsp;<span class="ident" id="7330596">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7330601">if</span>&nbsp;<span class="ident" id="7330604">out</span><span class="op" id="7330607">[</span><span class="num" id="7330608">0</span><span class="op" id="7330609">]</span><span class="op" id="7330610">.</span><span class="ident" id="7330611">Cmp</span><span class="op" id="7330614">(</span><span class="op" id="7330615">&amp;</span><span class="ident" id="7330616">zero</span><span class="op" id="7330620">)</span>&nbsp;<span class="op" id="7330622">!=</span>&nbsp;<span class="num" id="7330625">0</span>&nbsp;<span class="op" id="7330627">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7330631">t</span><span class="op" id="7330632">.</span><span class="ident" id="7330633">Errorf</span><span class="op" id="7330639">(</span><span class="string" id="7330640">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7330692">,</span>&nbsp;<span class="ident" id="7330694">out</span><span class="op" id="7330697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7330700">}</span><br>
<span class="lineno"></span><span class="op" id="7330702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7330705">var</span>&nbsp;<span class="ident" id="7330709">ratNums</span>&nbsp;<span class="op" id="7330717">=</span>&nbsp;<span class="op" id="7330719">[</span><span class="op" id="7330720">]</span><span class="builtintype" id="7330721">string</span><span class="op" id="7330727">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330730">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7330808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330811">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7330854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330857">&#34;-141592653589793&#34;</span><span class="op" id="7330875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330878">&#34;-1&#34;</span><span class="op" id="7330882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330885">&#34;0&#34;</span><span class="op" id="7330888">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330891">&#34;1&#34;</span><span class="op" id="7330894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330897">&#34;141592653589793&#34;</span><span class="op" id="7330914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330917">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7330959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7330962">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7331039">,</span><br>
<span class="lineno"></span><span class="op" id="7331041">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7331044">var</span>&nbsp;<span class="ident" id="7331048">ratDenoms</span>&nbsp;<span class="op" id="7331058">=</span>&nbsp;<span class="op" id="7331060">[</span><span class="op" id="7331061">]</span><span class="builtintype" id="7331062">string</span><span class="op" id="7331068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7331071">&#34;1&#34;</span><span class="op" id="7331074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7331077">&#34;718281828459045&#34;</span><span class="op" id="7331094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7331097">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7331139">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7331142">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7331219">,</span><br>
<span class="lineno"></span><span class="op" id="7331221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7331224">func</span>&nbsp;<span class="ident" id="7331229">TestRatJSONEncoding</span><span class="op" id="7331248">(</span><span class="ident" id="7331249">t</span>&nbsp;<span class="op" id="7331251">*</span><span class="ident" id="7331252">testing</span><span class="op" id="7331259">.</span><span class="ident" id="7331260">T</span><span class="op" id="7331261">)</span>&nbsp;<span class="op" id="7331263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331266">for</span>&nbsp;<span class="ident" id="7331270">_</span><span class="op" id="7331271">,</span>&nbsp;<span class="ident" id="7331273">num</span>&nbsp;<span class="op" id="7331277">:=</span>&nbsp;<span class="keyword" id="7331280">range</span>&nbsp;<span class="ident" id="7331286">ratNums</span>&nbsp;<span class="op" id="7331294">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331298">for</span>&nbsp;<span class="ident" id="7331302">_</span><span class="op" id="7331303">,</span>&nbsp;<span class="ident" id="7331305">denom</span>&nbsp;<span class="op" id="7331311">:=</span>&nbsp;<span class="keyword" id="7331314">range</span>&nbsp;<span class="ident" id="7331320">ratDenoms</span>&nbsp;<span class="op" id="7331330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331335">var</span>&nbsp;<span class="ident" id="7331339">tx</span>&nbsp;<span class="ident" id="7331342">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331349">tx</span><span class="op" id="7331351">.</span><span class="ident" id="7331352">SetString</span><span class="op" id="7331361">(</span><span class="ident" id="7331362">num</span>&nbsp;<span class="op" id="7331366">+</span>&nbsp;<span class="string" id="7331368">&#34;/&#34;</span>&nbsp;<span class="op" id="7331372">+</span>&nbsp;<span class="ident" id="7331374">denom</span><span class="op" id="7331379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331384">b</span><span class="op" id="7331385">,</span>&nbsp;<span class="ident" id="7331387">err</span>&nbsp;<span class="op" id="7331391">:=</span>&nbsp;<span class="ident" id="7331394">json</span><span class="op" id="7331398">.</span><span class="ident" id="7331399">Marshal</span><span class="op" id="7331406">(</span><span class="op" id="7331407">&amp;</span><span class="ident" id="7331408">tx</span><span class="op" id="7331410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331415">if</span>&nbsp;<span class="ident" id="7331418">err</span>&nbsp;<span class="op" id="7331422">!=</span>&nbsp;<span class="ident" id="7331425">nil</span>&nbsp;<span class="op" id="7331429">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331435">t</span><span class="op" id="7331436">.</span><span class="ident" id="7331437">Errorf</span><span class="op" id="7331443">(</span><span class="string" id="7331444">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7331473">,</span>&nbsp;<span class="op" id="7331475">&amp;</span><span class="ident" id="7331476">tx</span><span class="op" id="7331478">,</span>&nbsp;<span class="ident" id="7331480">err</span><span class="op" id="7331483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331489">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331506">var</span>&nbsp;<span class="ident" id="7331510">rx</span>&nbsp;<span class="ident" id="7331513">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331520">if</span>&nbsp;<span class="ident" id="7331523">err</span>&nbsp;<span class="op" id="7331527">:=</span>&nbsp;<span class="ident" id="7331530">json</span><span class="op" id="7331534">.</span><span class="ident" id="7331535">Unmarshal</span><span class="op" id="7331544">(</span><span class="ident" id="7331545">b</span><span class="op" id="7331546">,</span>&nbsp;<span class="op" id="7331548">&amp;</span><span class="ident" id="7331549">rx</span><span class="op" id="7331551">)</span><span class="op" id="7331552">;</span>&nbsp;<span class="ident" id="7331554">err</span>&nbsp;<span class="op" id="7331558">!=</span>&nbsp;<span class="ident" id="7331561">nil</span>&nbsp;<span class="op" id="7331565">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331571">t</span><span class="op" id="7331572">.</span><span class="ident" id="7331573">Errorf</span><span class="op" id="7331579">(</span><span class="string" id="7331580">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7331611">,</span>&nbsp;<span class="op" id="7331613">&amp;</span><span class="ident" id="7331614">tx</span><span class="op" id="7331616">,</span>&nbsp;<span class="ident" id="7331618">err</span><span class="op" id="7331621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331627">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331644">if</span>&nbsp;<span class="ident" id="7331647">rx</span><span class="op" id="7331649">.</span><span class="ident" id="7331650">Cmp</span><span class="op" id="7331653">(</span><span class="op" id="7331654">&amp;</span><span class="ident" id="7331655">tx</span><span class="op" id="7331657">)</span>&nbsp;<span class="op" id="7331659">!=</span>&nbsp;<span class="num" id="7331662">0</span>&nbsp;<span class="op" id="7331664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331670">t</span><span class="op" id="7331671">.</span><span class="ident" id="7331672">Errorf</span><span class="op" id="7331678">(</span><span class="string" id="7331679">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7331723">,</span>&nbsp;<span class="op" id="7331725">&amp;</span><span class="ident" id="7331726">tx</span><span class="op" id="7331728">,</span>&nbsp;<span class="op" id="7331730">&amp;</span><span class="ident" id="7331731">rx</span><span class="op" id="7331733">,</span>&nbsp;<span class="op" id="7331735">&amp;</span><span class="ident" id="7331736">tx</span><span class="op" id="7331738">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7331750">}</span><br>
<span class="lineno"></span><span class="op" id="7331752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7331755">func</span>&nbsp;<span class="ident" id="7331760">TestRatXMLEncoding</span><span class="op" id="7331778">(</span><span class="ident" id="7331779">t</span>&nbsp;<span class="op" id="7331781">*</span><span class="ident" id="7331782">testing</span><span class="op" id="7331789">.</span><span class="ident" id="7331790">T</span><span class="op" id="7331791">)</span>&nbsp;<span class="op" id="7331793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331796">for</span>&nbsp;<span class="ident" id="7331800">_</span><span class="op" id="7331801">,</span>&nbsp;<span class="ident" id="7331803">num</span>&nbsp;<span class="op" id="7331807">:=</span>&nbsp;<span class="keyword" id="7331810">range</span>&nbsp;<span class="ident" id="7331816">ratNums</span>&nbsp;<span class="op" id="7331824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331828">for</span>&nbsp;<span class="ident" id="7331832">_</span><span class="op" id="7331833">,</span>&nbsp;<span class="ident" id="7331835">denom</span>&nbsp;<span class="op" id="7331841">:=</span>&nbsp;<span class="keyword" id="7331844">range</span>&nbsp;<span class="ident" id="7331850">ratDenoms</span>&nbsp;<span class="op" id="7331860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331865">var</span>&nbsp;<span class="ident" id="7331869">tx</span>&nbsp;<span class="ident" id="7331872">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331879">tx</span><span class="op" id="7331881">.</span><span class="ident" id="7331882">SetString</span><span class="op" id="7331891">(</span><span class="ident" id="7331892">num</span>&nbsp;<span class="op" id="7331896">+</span>&nbsp;<span class="string" id="7331898">&#34;/&#34;</span>&nbsp;<span class="op" id="7331902">+</span>&nbsp;<span class="ident" id="7331904">denom</span><span class="op" id="7331909">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331914">b</span><span class="op" id="7331915">,</span>&nbsp;<span class="ident" id="7331917">err</span>&nbsp;<span class="op" id="7331921">:=</span>&nbsp;<span class="ident" id="7331924">xml</span><span class="op" id="7331927">.</span><span class="ident" id="7331928">Marshal</span><span class="op" id="7331935">(</span><span class="op" id="7331936">&amp;</span><span class="ident" id="7331937">tx</span><span class="op" id="7331939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7331944">if</span>&nbsp;<span class="ident" id="7331947">err</span>&nbsp;<span class="op" id="7331951">!=</span>&nbsp;<span class="ident" id="7331954">nil</span>&nbsp;<span class="op" id="7331958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7331964">t</span><span class="op" id="7331965">.</span><span class="ident" id="7331966">Errorf</span><span class="op" id="7331972">(</span><span class="string" id="7331973">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7332002">,</span>&nbsp;<span class="op" id="7332004">&amp;</span><span class="ident" id="7332005">tx</span><span class="op" id="7332007">,</span>&nbsp;<span class="ident" id="7332009">err</span><span class="op" id="7332012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332018">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332030">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332035">var</span>&nbsp;<span class="ident" id="7332039">rx</span>&nbsp;<span class="ident" id="7332042">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332049">if</span>&nbsp;<span class="ident" id="7332052">err</span>&nbsp;<span class="op" id="7332056">:=</span>&nbsp;<span class="ident" id="7332059">xml</span><span class="op" id="7332062">.</span><span class="ident" id="7332063">Unmarshal</span><span class="op" id="7332072">(</span><span class="ident" id="7332073">b</span><span class="op" id="7332074">,</span>&nbsp;<span class="op" id="7332076">&amp;</span><span class="ident" id="7332077">rx</span><span class="op" id="7332079">)</span><span class="op" id="7332080">;</span>&nbsp;<span class="ident" id="7332082">err</span>&nbsp;<span class="op" id="7332086">!=</span>&nbsp;<span class="ident" id="7332089">nil</span>&nbsp;<span class="op" id="7332093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332099">t</span><span class="op" id="7332100">.</span><span class="ident" id="7332101">Errorf</span><span class="op" id="7332107">(</span><span class="string" id="7332108">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7332139">,</span>&nbsp;<span class="op" id="7332141">&amp;</span><span class="ident" id="7332142">tx</span><span class="op" id="7332144">,</span>&nbsp;<span class="ident" id="7332146">err</span><span class="op" id="7332149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332155">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332167">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332172">if</span>&nbsp;<span class="ident" id="7332175">rx</span><span class="op" id="7332177">.</span><span class="ident" id="7332178">Cmp</span><span class="op" id="7332181">(</span><span class="op" id="7332182">&amp;</span><span class="ident" id="7332183">tx</span><span class="op" id="7332185">)</span>&nbsp;<span class="op" id="7332187">!=</span>&nbsp;<span class="num" id="7332190">0</span>&nbsp;<span class="op" id="7332192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332198">t</span><span class="op" id="7332199">.</span><span class="ident" id="7332200">Errorf</span><span class="op" id="7332206">(</span><span class="string" id="7332207">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7332250">,</span>&nbsp;<span class="op" id="7332252">&amp;</span><span class="ident" id="7332253">tx</span><span class="op" id="7332255">,</span>&nbsp;<span class="op" id="7332257">&amp;</span><span class="ident" id="7332258">rx</span><span class="op" id="7332260">,</span>&nbsp;<span class="op" id="7332262">&amp;</span><span class="ident" id="7332263">tx</span><span class="op" id="7332265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332277">}</span><br>
<span class="lineno">500</span><span class="op" id="7332279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7332282">func</span>&nbsp;<span class="ident" id="7332287">TestIssue2379</span><span class="op" id="7332300">(</span><span class="ident" id="7332301">t</span>&nbsp;<span class="op" id="7332303">*</span><span class="ident" id="7332304">testing</span><span class="op" id="7332311">.</span><span class="ident" id="7332312">T</span><span class="op" id="7332313">)</span>&nbsp;<span class="op" id="7332315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7332318">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332337">q</span>&nbsp;<span class="op" id="7332339">:=</span>&nbsp;<span class="ident" id="7332342">NewRat</span><span class="op" id="7332348">(</span><span class="num" id="7332349">3</span><span class="op" id="7332350">,</span>&nbsp;<span class="num" id="7332352">2</span><span class="op" id="7332353">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332356">x</span>&nbsp;<span class="op" id="7332358">:=</span>&nbsp;<span class="builtinfunc" id="7332361">new</span><span class="op" id="7332364">(</span><span class="ident" id="7332365">Rat</span><span class="op" id="7332368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332371">x</span><span class="op" id="7332372">.</span><span class="ident" id="7332373">SetFrac</span><span class="op" id="7332380">(</span><span class="ident" id="7332381">NewInt</span><span class="op" id="7332387">(</span><span class="num" id="7332388">3</span><span class="op" id="7332389">)</span><span class="op" id="7332390">,</span>&nbsp;<span class="ident" id="7332392">NewInt</span><span class="op" id="7332398">(</span><span class="num" id="7332399">2</span><span class="op" id="7332400">)</span><span class="op" id="7332401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332404">if</span>&nbsp;<span class="ident" id="7332407">x</span><span class="op" id="7332408">.</span><span class="ident" id="7332409">Cmp</span><span class="op" id="7332412">(</span><span class="ident" id="7332413">q</span><span class="op" id="7332414">)</span>&nbsp;<span class="op" id="7332416">!=</span>&nbsp;<span class="num" id="7332419">0</span>&nbsp;<span class="op" id="7332421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332425">t</span><span class="op" id="7332426">.</span><span class="ident" id="7332427">Errorf</span><span class="op" id="7332433">(</span><span class="string" id="7332434">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7332453">,</span>&nbsp;<span class="ident" id="7332455">x</span><span class="op" id="7332456">,</span>&nbsp;<span class="ident" id="7332458">q</span><span class="op" id="7332459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332462">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7332466">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332495">x</span>&nbsp;<span class="op" id="7332497">=</span>&nbsp;<span class="ident" id="7332499">NewRat</span><span class="op" id="7332505">(</span><span class="num" id="7332506">2</span><span class="op" id="7332507">,</span>&nbsp;<span class="num" id="7332509">3</span><span class="op" id="7332510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332513">x</span><span class="op" id="7332514">.</span><span class="ident" id="7332515">SetFrac</span><span class="op" id="7332522">(</span><span class="ident" id="7332523">NewInt</span><span class="op" id="7332529">(</span><span class="num" id="7332530">3</span><span class="op" id="7332531">)</span><span class="op" id="7332532">,</span>&nbsp;<span class="ident" id="7332534">x</span><span class="op" id="7332535">.</span><span class="ident" id="7332536">Num</span><span class="op" id="7332539">(</span><span class="op" id="7332540">)</span><span class="op" id="7332541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332544">if</span>&nbsp;<span class="ident" id="7332547">x</span><span class="op" id="7332548">.</span><span class="ident" id="7332549">Cmp</span><span class="op" id="7332552">(</span><span class="ident" id="7332553">q</span><span class="op" id="7332554">)</span>&nbsp;<span class="op" id="7332556">!=</span>&nbsp;<span class="num" id="7332559">0</span>&nbsp;<span class="op" id="7332561">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332565">t</span><span class="op" id="7332566">.</span><span class="ident" id="7332567">Errorf</span><span class="op" id="7332573">(</span><span class="string" id="7332574">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7332593">,</span>&nbsp;<span class="ident" id="7332595">x</span><span class="op" id="7332596">,</span>&nbsp;<span class="ident" id="7332598">q</span><span class="op" id="7332599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7332606">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332637">x</span>&nbsp;<span class="op" id="7332639">=</span>&nbsp;<span class="ident" id="7332641">NewRat</span><span class="op" id="7332647">(</span><span class="num" id="7332648">2</span><span class="op" id="7332649">,</span>&nbsp;<span class="num" id="7332651">3</span><span class="op" id="7332652">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332655">x</span><span class="op" id="7332656">.</span><span class="ident" id="7332657">SetFrac</span><span class="op" id="7332664">(</span><span class="ident" id="7332665">x</span><span class="op" id="7332666">.</span><span class="ident" id="7332667">Denom</span><span class="op" id="7332672">(</span><span class="op" id="7332673">)</span><span class="op" id="7332674">,</span>&nbsp;<span class="ident" id="7332676">NewInt</span><span class="op" id="7332682">(</span><span class="num" id="7332683">2</span><span class="op" id="7332684">)</span><span class="op" id="7332685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332688">if</span>&nbsp;<span class="ident" id="7332691">x</span><span class="op" id="7332692">.</span><span class="ident" id="7332693">Cmp</span><span class="op" id="7332696">(</span><span class="ident" id="7332697">q</span><span class="op" id="7332698">)</span>&nbsp;<span class="op" id="7332700">!=</span>&nbsp;<span class="num" id="7332703">0</span>&nbsp;<span class="op" id="7332705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332709">t</span><span class="op" id="7332710">.</span><span class="ident" id="7332711">Errorf</span><span class="op" id="7332717">(</span><span class="string" id="7332718">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7332737">,</span>&nbsp;<span class="ident" id="7332739">x</span><span class="op" id="7332740">,</span>&nbsp;<span class="ident" id="7332742">q</span><span class="op" id="7332743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7332750">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332795">x</span>&nbsp;<span class="op" id="7332797">=</span>&nbsp;<span class="ident" id="7332799">NewRat</span><span class="op" id="7332805">(</span><span class="num" id="7332806">2</span><span class="op" id="7332807">,</span>&nbsp;<span class="num" id="7332809">3</span><span class="op" id="7332810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332813">x</span><span class="op" id="7332814">.</span><span class="ident" id="7332815">SetFrac</span><span class="op" id="7332822">(</span><span class="ident" id="7332823">x</span><span class="op" id="7332824">.</span><span class="ident" id="7332825">Denom</span><span class="op" id="7332830">(</span><span class="op" id="7332831">)</span><span class="op" id="7332832">,</span>&nbsp;<span class="ident" id="7332834">x</span><span class="op" id="7332835">.</span><span class="ident" id="7332836">Num</span><span class="op" id="7332839">(</span><span class="op" id="7332840">)</span><span class="op" id="7332841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7332844">if</span>&nbsp;<span class="ident" id="7332847">x</span><span class="op" id="7332848">.</span><span class="ident" id="7332849">Cmp</span><span class="op" id="7332852">(</span><span class="ident" id="7332853">q</span><span class="op" id="7332854">)</span>&nbsp;<span class="op" id="7332856">!=</span>&nbsp;<span class="num" id="7332859">0</span>&nbsp;<span class="op" id="7332861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332865">t</span><span class="op" id="7332866">.</span><span class="ident" id="7332867">Errorf</span><span class="op" id="7332873">(</span><span class="string" id="7332874">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7332893">,</span>&nbsp;<span class="ident" id="7332895">x</span><span class="op" id="7332896">,</span>&nbsp;<span class="ident" id="7332898">q</span><span class="op" id="7332899">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7332902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7332906">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332952">q</span>&nbsp;<span class="op" id="7332954">=</span>&nbsp;<span class="ident" id="7332956">NewRat</span><span class="op" id="7332962">(</span><span class="num" id="7332963">1</span><span class="op" id="7332964">,</span>&nbsp;<span class="num" id="7332966">1</span><span class="op" id="7332967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332970">x</span>&nbsp;<span class="op" id="7332972">=</span>&nbsp;<span class="builtinfunc" id="7332974">new</span><span class="op" id="7332977">(</span><span class="ident" id="7332978">Rat</span><span class="op" id="7332981">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7332984">n</span>&nbsp;<span class="op" id="7332986">:=</span>&nbsp;<span class="ident" id="7332989">NewInt</span><span class="op" id="7332995">(</span><span class="num" id="7332996">7</span><span class="op" id="7332997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333000">x</span><span class="op" id="7333001">.</span><span class="ident" id="7333002">SetFrac</span><span class="op" id="7333009">(</span><span class="ident" id="7333010">n</span><span class="op" id="7333011">,</span>&nbsp;<span class="ident" id="7333013">n</span><span class="op" id="7333014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7333017">if</span>&nbsp;<span class="ident" id="7333020">x</span><span class="op" id="7333021">.</span><span class="ident" id="7333022">Cmp</span><span class="op" id="7333025">(</span><span class="ident" id="7333026">q</span><span class="op" id="7333027">)</span>&nbsp;<span class="op" id="7333029">!=</span>&nbsp;<span class="num" id="7333032">0</span>&nbsp;<span class="op" id="7333034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333038">t</span><span class="op" id="7333039">.</span><span class="ident" id="7333040">Errorf</span><span class="op" id="7333046">(</span><span class="string" id="7333047">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7333066">,</span>&nbsp;<span class="ident" id="7333068">x</span><span class="op" id="7333069">,</span>&nbsp;<span class="ident" id="7333071">q</span><span class="op" id="7333072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7333075">}</span><br>
<span class="lineno">540</span><span class="op" id="7333077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7333080">func</span>&nbsp;<span class="ident" id="7333085">TestIssue3521</span><span class="op" id="7333098">(</span><span class="ident" id="7333099">t</span>&nbsp;<span class="op" id="7333101">*</span><span class="ident" id="7333102">testing</span><span class="op" id="7333109">.</span><span class="ident" id="7333110">T</span><span class="op" id="7333111">)</span>&nbsp;<span class="op" id="7333113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333116">a</span>&nbsp;<span class="op" id="7333118">:=</span>&nbsp;<span class="builtinfunc" id="7333121">new</span><span class="op" id="7333124">(</span><span class="ident" id="7333125">Int</span><span class="op" id="7333128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333131">b</span>&nbsp;<span class="op" id="7333133">:=</span>&nbsp;<span class="builtinfunc" id="7333136">new</span><span class="op" id="7333139">(</span><span class="ident" id="7333140">Int</span><span class="op" id="7333143">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333146">a</span><span class="op" id="7333147">.</span><span class="ident" id="7333148">SetString</span><span class="op" id="7333157">(</span><span class="string" id="7333158">&#34;64375784358435883458348587&#34;</span><span class="op" id="7333186">,</span>&nbsp;<span class="num" id="7333188">0</span><span class="op" id="7333189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333192">b</span><span class="op" id="7333193">.</span><span class="ident" id="7333194">SetString</span><span class="op" id="7333203">(</span><span class="string" id="7333204">&#34;4789759874531&#34;</span><span class="op" id="7333219">,</span>&nbsp;<span class="num" id="7333221">0</span><span class="op" id="7333222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7333226">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333271">zero</span>&nbsp;<span class="op" id="7333276">:=</span>&nbsp;<span class="builtinfunc" id="7333279">new</span><span class="op" id="7333282">(</span><span class="ident" id="7333283">Rat</span><span class="op" id="7333286">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333289">one</span>&nbsp;<span class="op" id="7333293">:=</span>&nbsp;<span class="ident" id="7333296">NewInt</span><span class="op" id="7333302">(</span><span class="num" id="7333303">1</span><span class="op" id="7333304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7333307">if</span>&nbsp;<span class="ident" id="7333310">zero</span><span class="op" id="7333314">.</span><span class="ident" id="7333315">Denom</span><span class="op" id="7333320">(</span><span class="op" id="7333321">)</span><span class="op" id="7333322">.</span><span class="ident" id="7333323">Cmp</span><span class="op" id="7333326">(</span><span class="ident" id="7333327">one</span><span class="op" id="7333330">)</span>&nbsp;<span class="op" id="7333332">!=</span>&nbsp;<span class="num" id="7333335">0</span>&nbsp;<span class="op" id="7333337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333341">t</span><span class="op" id="7333342">.</span><span class="ident" id="7333343">Errorf</span><span class="op" id="7333349">(</span><span class="string" id="7333350">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7333369">,</span>&nbsp;<span class="ident" id="7333371">zero</span><span class="op" id="7333375">.</span><span class="ident" id="7333376">Denom</span><span class="op" id="7333381">(</span><span class="op" id="7333382">)</span><span class="op" id="7333383">,</span>&nbsp;<span class="ident" id="7333385">one</span><span class="op" id="7333388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7333391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7333395">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333456">x</span>&nbsp;<span class="op" id="7333458">:=</span>&nbsp;<span class="builtinfunc" id="7333461">new</span><span class="op" id="7333464">(</span><span class="ident" id="7333465">Rat</span><span class="op" id="7333468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333471">x</span><span class="op" id="7333472">.</span><span class="ident" id="7333473">Denom</span><span class="op" id="7333478">(</span><span class="op" id="7333479">)</span><span class="op" id="7333480">.</span><span class="ident" id="7333481">Set</span><span class="op" id="7333484">(</span><span class="builtinfunc" id="7333485">new</span><span class="op" id="7333488">(</span><span class="ident" id="7333489">Int</span><span class="op" id="7333492">)</span><span class="op" id="7333493">.</span><span class="ident" id="7333494">Neg</span><span class="op" id="7333497">(</span><span class="ident" id="7333498">b</span><span class="op" id="7333499">)</span><span class="op" id="7333500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7333503">if</span>&nbsp;<span class="ident" id="7333506">x</span><span class="op" id="7333507">.</span><span class="ident" id="7333508">Cmp</span><span class="op" id="7333511">(</span><span class="ident" id="7333512">zero</span><span class="op" id="7333516">)</span>&nbsp;<span class="op" id="7333518">!=</span>&nbsp;<span class="num" id="7333521">0</span>&nbsp;<span class="op" id="7333523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333527">t</span><span class="op" id="7333528">.</span><span class="ident" id="7333529">Errorf</span><span class="op" id="7333535">(</span><span class="string" id="7333536">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7333556">,</span>&nbsp;<span class="ident" id="7333558">x</span><span class="op" id="7333559">,</span>&nbsp;<span class="ident" id="7333561">zero</span><span class="op" id="7333565">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7333568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7333572">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333630">x</span><span class="op" id="7333631">.</span><span class="ident" id="7333632">Num</span><span class="op" id="7333635">(</span><span class="op" id="7333636">)</span><span class="op" id="7333637">.</span><span class="ident" id="7333638">Set</span><span class="op" id="7333641">(</span><span class="ident" id="7333642">a</span><span class="op" id="7333643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333646">qab</span>&nbsp;<span class="op" id="7333650">:=</span>&nbsp;<span class="builtinfunc" id="7333653">new</span><span class="op" id="7333656">(</span><span class="ident" id="7333657">Rat</span><span class="op" id="7333660">)</span><span class="op" id="7333661">.</span><span class="ident" id="7333662">SetFrac</span><span class="op" id="7333669">(</span><span class="ident" id="7333670">a</span><span class="op" id="7333671">,</span>&nbsp;<span class="ident" id="7333673">b</span><span class="op" id="7333674">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7333677">if</span>&nbsp;<span class="ident" id="7333680">x</span><span class="op" id="7333681">.</span><span class="ident" id="7333682">Cmp</span><span class="op" id="7333685">(</span><span class="ident" id="7333686">qab</span><span class="op" id="7333689">)</span>&nbsp;<span class="op" id="7333691">!=</span>&nbsp;<span class="num" id="7333694">0</span>&nbsp;<span class="op" id="7333696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333700">t</span><span class="op" id="7333701">.</span><span class="ident" id="7333702">Errorf</span><span class="op" id="7333708">(</span><span class="string" id="7333709">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7333729">,</span>&nbsp;<span class="ident" id="7333731">x</span><span class="op" id="7333732">,</span>&nbsp;<span class="ident" id="7333734">qab</span><span class="op" id="7333737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7333740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7333744">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333814">x</span><span class="op" id="7333815">.</span><span class="ident" id="7333816">SetFrac64</span><span class="op" id="7333825">(</span><span class="num" id="7333826">10</span><span class="op" id="7333828">,</span>&nbsp;<span class="num" id="7333830">2</span><span class="op" id="7333831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333834">x</span><span class="op" id="7333835">.</span><span class="ident" id="7333836">Denom</span><span class="op" id="7333841">(</span><span class="op" id="7333842">)</span><span class="op" id="7333843">.</span><span class="ident" id="7333844">SetInt64</span><span class="op" id="7333852">(</span><span class="num" id="7333853">3</span><span class="op" id="7333854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333857">q53</span>&nbsp;<span class="op" id="7333861">:=</span>&nbsp;<span class="ident" id="7333864">NewRat</span><span class="op" id="7333870">(</span><span class="num" id="7333871">5</span><span class="op" id="7333872">,</span>&nbsp;<span class="num" id="7333874">3</span><span class="op" id="7333875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7333878">if</span>&nbsp;<span class="ident" id="7333881">x</span><span class="op" id="7333882">.</span><span class="ident" id="7333883">Cmp</span><span class="op" id="7333886">(</span><span class="ident" id="7333887">q53</span><span class="op" id="7333890">)</span>&nbsp;<span class="op" id="7333892">!=</span>&nbsp;<span class="num" id="7333895">0</span>&nbsp;<span class="op" id="7333897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7333901">t</span><span class="op" id="7333902">.</span><span class="ident" id="7333903">Errorf</span><span class="op" id="7333909">(</span><span class="string" id="7333910">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7333930">,</span>&nbsp;<span class="ident" id="7333932">x</span><span class="op" id="7333933">,</span>&nbsp;<span class="ident" id="7333935">q53</span><span class="op" id="7333938">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7333941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7333945">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334015">x</span>&nbsp;<span class="op" id="7334017">=</span>&nbsp;<span class="ident" id="7334019">NewRat</span><span class="op" id="7334025">(</span><span class="num" id="7334026">10</span><span class="op" id="7334028">,</span>&nbsp;<span class="num" id="7334030">2</span><span class="op" id="7334031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334034">x</span><span class="op" id="7334035">.</span><span class="ident" id="7334036">Denom</span><span class="op" id="7334041">(</span><span class="op" id="7334042">)</span><span class="op" id="7334043">.</span><span class="ident" id="7334044">SetInt64</span><span class="op" id="7334052">(</span><span class="num" id="7334053">3</span><span class="op" id="7334054">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7334057">if</span>&nbsp;<span class="ident" id="7334060">x</span><span class="op" id="7334061">.</span><span class="ident" id="7334062">Cmp</span><span class="op" id="7334065">(</span><span class="ident" id="7334066">q53</span><span class="op" id="7334069">)</span>&nbsp;<span class="op" id="7334071">!=</span>&nbsp;<span class="num" id="7334074">0</span>&nbsp;<span class="op" id="7334076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334080">t</span><span class="op" id="7334081">.</span><span class="ident" id="7334082">Errorf</span><span class="op" id="7334088">(</span><span class="string" id="7334089">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7334109">,</span>&nbsp;<span class="ident" id="7334111">x</span><span class="op" id="7334112">,</span>&nbsp;<span class="ident" id="7334114">q53</span><span class="op" id="7334117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7334120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7334124">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334191">x</span><span class="op" id="7334192">.</span><span class="ident" id="7334193">SetFrac</span><span class="op" id="7334200">(</span><span class="ident" id="7334201">a</span><span class="op" id="7334202">,</span>&nbsp;<span class="ident" id="7334204">b</span><span class="op" id="7334205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334208">a</span>&nbsp;<span class="op" id="7334210">=</span>&nbsp;<span class="ident" id="7334212">x</span><span class="op" id="7334213">.</span><span class="ident" id="7334214">Num</span><span class="op" id="7334217">(</span><span class="op" id="7334218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334221">b</span>&nbsp;<span class="op" id="7334223">=</span>&nbsp;<span class="ident" id="7334225">x</span><span class="op" id="7334226">.</span><span class="ident" id="7334227">Denom</span><span class="op" id="7334232">(</span><span class="op" id="7334233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334236">a</span><span class="op" id="7334237">.</span><span class="ident" id="7334238">SetInt64</span><span class="op" id="7334246">(</span><span class="num" id="7334247">5</span><span class="op" id="7334248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334251">b</span><span class="op" id="7334252">.</span><span class="ident" id="7334253">SetInt64</span><span class="op" id="7334261">(</span><span class="num" id="7334262">3</span><span class="op" id="7334263">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7334266">if</span>&nbsp;<span class="ident" id="7334269">x</span><span class="op" id="7334270">.</span><span class="ident" id="7334271">Cmp</span><span class="op" id="7334274">(</span><span class="ident" id="7334275">q53</span><span class="op" id="7334278">)</span>&nbsp;<span class="op" id="7334280">!=</span>&nbsp;<span class="num" id="7334283">0</span>&nbsp;<span class="op" id="7334285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7334289">t</span><span class="op" id="7334290">.</span><span class="ident" id="7334291">Errorf</span><span class="op" id="7334297">(</span><span class="string" id="7334298">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7334317">,</span>&nbsp;<span class="ident" id="7334319">x</span><span class="op" id="7334320">,</span>&nbsp;<span class="ident" id="7334322">q53</span><span class="op" id="7334325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7334328">}</span><br>
<span class="lineno"></span><span class="op" id="7334330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7334333">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7334402">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7334474">var</span>&nbsp;<span class="ident" id="7334478">float64inputs</span>&nbsp;<span class="op" id="7334492">=</span>&nbsp;<span class="op" id="7334494">[</span><span class="op" id="7334495">]</span><span class="builtintype" id="7334496">string</span><span class="op" id="7334502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7334505">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7334555">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334625">&#34;5e+125&#34;</span><span class="op" id="7334633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334636">&#34;69e+267&#34;</span><span class="op" id="7334645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334648">&#34;999e-026&#34;</span><span class="op" id="7334658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334661">&#34;7861e-034&#34;</span><span class="op" id="7334672">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334675">&#34;75569e-254&#34;</span><span class="op" id="7334687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334690">&#34;928609e-261&#34;</span><span class="op" id="7334703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334706">&#34;9210917e+080&#34;</span><span class="op" id="7334720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334723">&#34;84863171e+114&#34;</span><span class="op" id="7334738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334741">&#34;653777767e+273&#34;</span><span class="op" id="7334757">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334760">&#34;5232604057e-298&#34;</span><span class="op" id="7334777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334780">&#34;27235667517e-109&#34;</span><span class="op" id="7334798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334801">&#34;653532977297e-123&#34;</span><span class="op" id="7334820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334823">&#34;3142213164987e-294&#34;</span><span class="op" id="7334843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334846">&#34;46202199371337e-072&#34;</span><span class="op" id="7334867">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334870">&#34;231010996856685e-073&#34;</span><span class="op" id="7334892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334895">&#34;9324754620109615e+212&#34;</span><span class="op" id="7334918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334921">&#34;78459735791271921e+049&#34;</span><span class="op" id="7334945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334948">&#34;272104041512242479e+200&#34;</span><span class="op" id="7334973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7334976">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7335002">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335005">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7335032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335035">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7335063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335066">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7335095">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7335099">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335169">&#34;9e-265&#34;</span><span class="op" id="7335177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335180">&#34;85e-037&#34;</span><span class="op" id="7335189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335192">&#34;623e+100&#34;</span><span class="op" id="7335202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335205">&#34;3571e+263&#34;</span><span class="op" id="7335216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335219">&#34;81661e+153&#34;</span><span class="op" id="7335231">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335234">&#34;920657e-023&#34;</span><span class="op" id="7335247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335250">&#34;4603285e-024&#34;</span><span class="op" id="7335264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335267">&#34;87575437e-309&#34;</span><span class="op" id="7335282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335285">&#34;245540327e+122&#34;</span><span class="op" id="7335301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335304">&#34;6138508175e+120&#34;</span><span class="op" id="7335321">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335324">&#34;83356057653e+193&#34;</span><span class="op" id="7335342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335345">&#34;619534293513e+124&#34;</span><span class="op" id="7335364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335367">&#34;2335141086879e+218&#34;</span><span class="op" id="7335387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335390">&#34;36167929443327e-159&#34;</span><span class="op" id="7335411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335414">&#34;609610927149051e-255&#34;</span><span class="op" id="7335436">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335439">&#34;3743626360493413e-165&#34;</span><span class="op" id="7335462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335465">&#34;94080055902682397e-242&#34;</span><span class="op" id="7335489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335492">&#34;899810892172646163e+283&#34;</span><span class="op" id="7335517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335520">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7335546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335549">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7335576">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335579">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7335607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335610">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7335639">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7335643">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335713">&#34;5e-20&#34;</span><span class="op" id="7335720">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335723">&#34;67e+14&#34;</span><span class="op" id="7335731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335734">&#34;985e+15&#34;</span><span class="op" id="7335743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335746">&#34;7693e-42&#34;</span><span class="op" id="7335756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335759">&#34;55895e-16&#34;</span><span class="op" id="7335770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335773">&#34;996622e-44&#34;</span><span class="op" id="7335785">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335788">&#34;7038531e-32&#34;</span><span class="op" id="7335801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335804">&#34;60419369e-46&#34;</span><span class="op" id="7335818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335821">&#34;702990899e-20&#34;</span><span class="op" id="7335836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335839">&#34;6930161142e-48&#34;</span><span class="op" id="7335855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335858">&#34;25933168707e+13&#34;</span><span class="op" id="7335875">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335878">&#34;596428896559e+20&#34;</span><span class="op" id="7335896">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7335900">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335970">&#34;3e-23&#34;</span><span class="op" id="7335977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335980">&#34;57e+18&#34;</span><span class="op" id="7335988">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7335991">&#34;789e-35&#34;</span><span class="op" id="7336000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336003">&#34;2539e-18&#34;</span><span class="op" id="7336013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336016">&#34;76173e+28&#34;</span><span class="op" id="7336027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336030">&#34;887745e-11&#34;</span><span class="op" id="7336042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336045">&#34;5382571e-37&#34;</span><span class="op" id="7336058">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336061">&#34;82381273e-35&#34;</span><span class="op" id="7336075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336078">&#34;750486563e-38&#34;</span><span class="op" id="7336093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336096">&#34;3752432815e-39&#34;</span><span class="op" id="7336112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336115">&#34;75224575729e-45&#34;</span><span class="op" id="7336132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336135">&#34;459926601011e+15&#34;</span><span class="op" id="7336153">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336157">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336209">&#34;0&#34;</span><span class="op" id="7336212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336215">&#34;1&#34;</span><span class="op" id="7336218">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336221">&#34;+1&#34;</span><span class="op" id="7336225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336228">&#34;1e23&#34;</span><span class="op" id="7336234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336237">&#34;1E23&#34;</span><span class="op" id="7336243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336246">&#34;100000000000000000000000&#34;</span><span class="op" id="7336272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336275">&#34;1e-100&#34;</span><span class="op" id="7336283">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336286">&#34;123456700&#34;</span><span class="op" id="7336297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336300">&#34;99999999999999974834176&#34;</span><span class="op" id="7336325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336328">&#34;100000000000000000000001&#34;</span><span class="op" id="7336354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336357">&#34;100000000000000008388608&#34;</span><span class="op" id="7336383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336386">&#34;100000000000000016777215&#34;</span><span class="op" id="7336412">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336415">&#34;100000000000000016777216&#34;</span><span class="op" id="7336441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336444">&#34;-1&#34;</span><span class="op" id="7336448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336451">&#34;-0.1&#34;</span><span class="op" id="7336457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336460">&#34;-0&#34;</span><span class="op" id="7336464">,</span>&nbsp;<span class="comment" id="7336466">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336504">&#34;1e-20&#34;</span><span class="op" id="7336511">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336514">&#34;625e-3&#34;</span><span class="op" id="7336522">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336526">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336546">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7336570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336573">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7336598">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336601">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336630">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7336654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336657">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7336682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336685">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336713">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336735">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7336759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336762">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7336787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336790">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336817">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7336843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336846">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7336873">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336877">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336900">&#34;1e308&#34;</span><span class="op" id="7336907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336910">&#34;2e308&#34;</span><span class="op" id="7336917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336920">&#34;1e309&#34;</span><span class="op" id="7336927">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7336931">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336949">&#34;1e310&#34;</span><span class="op" id="7336956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336959">&#34;-1e310&#34;</span><span class="op" id="7336967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336970">&#34;1e400&#34;</span><span class="op" id="7336977">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336980">&#34;-1e400&#34;</span><span class="op" id="7336988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7336991">&#34;long:1e400000&#34;</span><span class="op" id="7337006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337009">&#34;long:-1e400000&#34;</span><span class="op" id="7337025">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337029">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337046">&#34;1e-305&#34;</span><span class="op" id="7337054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337057">&#34;1e-306&#34;</span><span class="op" id="7337065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337068">&#34;1e-307&#34;</span><span class="op" id="7337076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337079">&#34;1e-308&#34;</span><span class="op" id="7337087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337090">&#34;1e-309&#34;</span><span class="op" id="7337098">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337101">&#34;1e-310&#34;</span><span class="op" id="7337109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337112">&#34;1e-322&#34;</span><span class="op" id="7337120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337123">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337145">&#34;5e-324&#34;</span><span class="op" id="7337153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337156">&#34;4e-324&#34;</span><span class="op" id="7337164">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337167">&#34;3e-324&#34;</span><span class="op" id="7337175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337178">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337192">&#34;2e-324&#34;</span><span class="op" id="7337200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337203">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337221">&#34;1e-350&#34;</span><span class="op" id="7337229">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337232">&#34;long:1e-400000&#34;</span><span class="op" id="7337248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337251">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337279">&#34;-1e-350&#34;</span><span class="op" id="7337288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337291">&#34;long:-1e-400000&#34;</span><span class="op" id="7337308">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337312">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337341">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337400">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337421">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337442">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337473">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337505">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337592">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7337617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337620">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337707">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7337732">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337736">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337810">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7337834">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337838">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337881">&#34;22.222222222222222&#34;</span><span class="op" id="7337901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7337904">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7337914">+</span>&nbsp;<span class="ident" id="7337916">strings</span><span class="op" id="7337923">.</span><span class="ident" id="7337924">Repeat</span><span class="op" id="7337930">(</span><span class="string" id="7337931">&#34;2&#34;</span><span class="op" id="7337934">,</span>&nbsp;<span class="num" id="7337936">4000</span><span class="op" id="7337940">)</span>&nbsp;<span class="op" id="7337942">+</span>&nbsp;<span class="string" id="7337944">&#34;e+1&#34;</span><span class="op" id="7337949">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7337953">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338009">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338035">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7338092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338095">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338133">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7338190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338193">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338224">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7338281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338284">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338350">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7338413">+</span>&nbsp;<span class="ident" id="7338415">strings</span><span class="op" id="7338422">.</span><span class="ident" id="7338423">Repeat</span><span class="op" id="7338429">(</span><span class="string" id="7338430">&#34;0&#34;</span><span class="op" id="7338433">,</span>&nbsp;<span class="num" id="7338435">10000</span><span class="op" id="7338440">)</span>&nbsp;<span class="op" id="7338442">+</span>&nbsp;<span class="string" id="7338444">&#34;1&#34;</span><span class="op" id="7338447">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338451">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338487">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7338535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338538">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338582">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7338630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338633">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338692">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338737">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7338785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338788">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7338856">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338901">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7338949">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338953">&#34;1152921504606846975&#34;</span><span class="op" id="7338974">,</span>&nbsp;&nbsp;<span class="comment" id="7338977">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7338993">&#34;-1152921504606846975&#34;</span><span class="op" id="7339015">,</span>&nbsp;<span class="comment" id="7339017">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7339034">&#34;1152921504606846977&#34;</span><span class="op" id="7339055">,</span>&nbsp;&nbsp;<span class="comment" id="7339058">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7339074">&#34;-1152921504606846977&#34;</span><span class="op" id="7339096">,</span>&nbsp;<span class="comment" id="7339098">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7339116">&#34;1/3&#34;</span><span class="op" id="7339121">,</span><br>
<span class="lineno"></span><span class="op" id="7339123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7339126">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7339192">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7339252">func</span>&nbsp;<span class="ident" id="7339257">isFinite</span><span class="op" id="7339265">(</span><span class="ident" id="7339266">f</span>&nbsp;<span class="builtintype" id="7339268">float64</span><span class="op" id="7339275">)</span>&nbsp;<span class="builtintype" id="7339277">bool</span>&nbsp;<span class="op" id="7339282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339285">return</span>&nbsp;<span class="ident" id="7339292">math</span><span class="op" id="7339296">.</span><span class="ident" id="7339297">Abs</span><span class="op" id="7339300">(</span><span class="ident" id="7339301">f</span><span class="op" id="7339302">)</span>&nbsp;<span class="op" id="7339304">&lt;=</span>&nbsp;<span class="ident" id="7339307">math</span><span class="op" id="7339311">.</span><span class="ident" id="7339312">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7339323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7339326">func</span>&nbsp;<span class="ident" id="7339331">TestFloat32SpecialCases</span><span class="op" id="7339354">(</span><span class="ident" id="7339355">t</span>&nbsp;<span class="op" id="7339357">*</span><span class="ident" id="7339358">testing</span><span class="op" id="7339365">.</span><span class="ident" id="7339366">T</span><span class="op" id="7339367">)</span>&nbsp;<span class="op" id="7339369">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339372">for</span>&nbsp;<span class="ident" id="7339376">_</span><span class="op" id="7339377">,</span>&nbsp;<span class="ident" id="7339379">input</span>&nbsp;<span class="op" id="7339385">:=</span>&nbsp;<span class="keyword" id="7339388">range</span>&nbsp;<span class="ident" id="7339394">float64inputs</span>&nbsp;<span class="op" id="7339408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339412">if</span>&nbsp;<span class="ident" id="7339415">strings</span><span class="op" id="7339422">.</span><span class="ident" id="7339423">HasPrefix</span><span class="op" id="7339432">(</span><span class="ident" id="7339433">input</span><span class="op" id="7339438">,</span>&nbsp;<span class="string" id="7339440">&#34;long:&#34;</span><span class="op" id="7339447">)</span>&nbsp;<span class="op" id="7339449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339454">if</span>&nbsp;<span class="ident" id="7339457">testing</span><span class="op" id="7339464">.</span><span class="ident" id="7339465">Short</span><span class="op" id="7339470">(</span><span class="op" id="7339471">)</span>&nbsp;<span class="op" id="7339473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339479">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7339491">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7339496">input</span>&nbsp;<span class="op" id="7339502">=</span>&nbsp;<span class="ident" id="7339504">input</span><span class="op" id="7339509">[</span><span class="builtinfunc" id="7339510">len</span><span class="op" id="7339513">(</span><span class="string" id="7339514">&#34;long:&#34;</span><span class="op" id="7339521">)</span><span class="op" id="7339522">:</span><span class="op" id="7339523">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7339527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7339532">r</span><span class="op" id="7339533">,</span>&nbsp;<span class="ident" id="7339535">ok</span>&nbsp;<span class="op" id="7339538">:=</span>&nbsp;<span class="builtinfunc" id="7339541">new</span><span class="op" id="7339544">(</span><span class="ident" id="7339545">Rat</span><span class="op" id="7339548">)</span><span class="op" id="7339549">.</span><span class="ident" id="7339550">SetString</span><span class="op" id="7339559">(</span><span class="ident" id="7339560">input</span><span class="op" id="7339565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339569">if</span>&nbsp;<span class="op" id="7339572">!</span><span class="ident" id="7339573">ok</span>&nbsp;<span class="op" id="7339576">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7339581">t</span><span class="op" id="7339582">.</span><span class="ident" id="7339583">Errorf</span><span class="op" id="7339589">(</span><span class="string" id="7339590">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7339616">,</span>&nbsp;<span class="ident" id="7339618">input</span><span class="op" id="7339623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339628">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7339639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7339643">f</span><span class="op" id="7339644">,</span>&nbsp;<span class="ident" id="7339646">exact</span>&nbsp;<span class="op" id="7339652">:=</span>&nbsp;<span class="ident" id="7339655">r</span><span class="op" id="7339656">.</span><span class="ident" id="7339657">Float32</span><span class="op" id="7339664">(</span><span class="op" id="7339665">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7339670">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7339725">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7339766">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7339828">if</span>&nbsp;<span class="op" id="7339831">!</span><span class="ident" id="7339832">strings</span><span class="op" id="7339839">.</span><span class="ident" id="7339840">Contains</span><span class="op" id="7339848">(</span><span class="ident" id="7339849">input</span><span class="op" id="7339854">,</span>&nbsp;<span class="string" id="7339856">&#34;/&#34;</span><span class="op" id="7339859">)</span>&nbsp;<span class="op" id="7339861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7339866">e64</span><span class="op" id="7339869">,</span>&nbsp;<span class="ident" id="7339871">_</span>&nbsp;<span class="op" id="7339873">:=</span>&nbsp;<span class="ident" id="7339876">strconv</span><span class="op" id="7339883">.</span><span class="ident" id="7339884">ParseFloat</span><span class="op" id="7339894">(</span><span class="ident" id="7339895">input</span><span class="op" id="7339900">,</span>&nbsp;<span class="num" id="7339902">32</span><span class="op" id="7339904">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7339909">e</span>&nbsp;<span class="op" id="7339911">:=</span>&nbsp;<span class="builtintype" id="7339914">float32</span><span class="op" id="7339921">(</span><span class="ident" id="7339922">e64</span><span class="op" id="7339925">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7339931">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7339974">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340024">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340070">switch</span>&nbsp;<span class="op" id="7340077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340082">case</span>&nbsp;<span class="ident" id="7340087">math</span><span class="op" id="7340091">.</span><span class="ident" id="7340092">Float32bits</span><span class="op" id="7340103">(</span><span class="ident" id="7340104">e</span><span class="op" id="7340105">)</span>&nbsp;<span class="op" id="7340107">==</span>&nbsp;<span class="ident" id="7340110">math</span><span class="op" id="7340114">.</span><span class="ident" id="7340115">Float32bits</span><span class="op" id="7340126">(</span><span class="ident" id="7340127">f</span><span class="op" id="7340128">)</span><span class="op" id="7340129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340135">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340160">case</span>&nbsp;<span class="ident" id="7340165">f</span>&nbsp;<span class="op" id="7340167">==</span>&nbsp;<span class="num" id="7340170">0</span>&nbsp;<span class="op" id="7340172">&amp;&amp;</span>&nbsp;<span class="ident" id="7340175">r</span><span class="op" id="7340176">.</span><span class="ident" id="7340177">Num</span><span class="op" id="7340180">(</span><span class="op" id="7340181">)</span><span class="op" id="7340182">.</span><span class="ident" id="7340183">BitLen</span><span class="op" id="7340189">(</span><span class="op" id="7340190">)</span>&nbsp;<span class="op" id="7340192">==</span>&nbsp;<span class="num" id="7340195">0</span><span class="op" id="7340196">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340202">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340257">default</span><span class="op" id="7340264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7340270">t</span><span class="op" id="7340271">.</span><span class="ident" id="7340272">Errorf</span><span class="op" id="7340278">(</span><span class="string" id="7340279">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7340339">,</span>&nbsp;<span class="ident" id="7340341">input</span><span class="op" id="7340346">,</span>&nbsp;<span class="ident" id="7340348">e</span><span class="op" id="7340349">,</span>&nbsp;<span class="ident" id="7340351">e</span><span class="op" id="7340352">,</span>&nbsp;<span class="ident" id="7340354">f</span><span class="op" id="7340355">,</span>&nbsp;<span class="ident" id="7340357">f</span><span class="op" id="7340358">,</span>&nbsp;<span class="ident" id="7340360">f</span><span class="op" id="7340361">-</span><span class="ident" id="7340362">e</span><span class="op" id="7340363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7340368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7340372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340377">if</span>&nbsp;<span class="op" id="7340380">!</span><span class="ident" id="7340381">isFinite</span><span class="op" id="7340389">(</span><span class="builtintype" id="7340390">float64</span><span class="op" id="7340397">(</span><span class="ident" id="7340398">f</span><span class="op" id="7340399">)</span><span class="op" id="7340400">)</span>&nbsp;<span class="op" id="7340402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340407">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7340418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340423">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340467">if</span>&nbsp;<span class="op" id="7340470">!</span><span class="ident" id="7340471">checkIsBestApprox32</span><span class="op" id="7340490">(</span><span class="ident" id="7340491">t</span><span class="op" id="7340492">,</span>&nbsp;<span class="ident" id="7340494">f</span><span class="op" id="7340495">,</span>&nbsp;<span class="ident" id="7340497">r</span><span class="op" id="7340498">)</span>&nbsp;<span class="op" id="7340500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340505">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7340539">t</span><span class="op" id="7340540">.</span><span class="ident" id="7340541">Errorf</span><span class="op" id="7340547">(</span><span class="string" id="7340548">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7340564">,</span>&nbsp;<span class="ident" id="7340566">input</span><span class="op" id="7340571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7340575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340580">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7340626">checkNonLossyRoundtrip32</span><span class="op" id="7340650">(</span><span class="ident" id="7340651">t</span><span class="op" id="7340652">,</span>&nbsp;<span class="ident" id="7340654">f</span><span class="op" id="7340655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7340660">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340706">if</span>&nbsp;<span class="ident" id="7340709">wasExact</span>&nbsp;<span class="op" id="7340718">:=</span>&nbsp;<span class="builtinfunc" id="7340721">new</span><span class="op" id="7340724">(</span><span class="ident" id="7340725">Rat</span><span class="op" id="7340728">)</span><span class="op" id="7340729">.</span><span class="ident" id="7340730">SetFloat64</span><span class="op" id="7340740">(</span><span class="builtintype" id="7340741">float64</span><span class="op" id="7340748">(</span><span class="ident" id="7340749">f</span><span class="op" id="7340750">)</span><span class="op" id="7340751">)</span><span class="op" id="7340752">.</span><span class="ident" id="7340753">Cmp</span><span class="op" id="7340756">(</span><span class="ident" id="7340757">r</span><span class="op" id="7340758">)</span>&nbsp;<span class="op" id="7340760">==</span>&nbsp;<span class="num" id="7340763">0</span><span class="op" id="7340764">;</span>&nbsp;<span class="ident" id="7340766">wasExact</span>&nbsp;<span class="op" id="7340775">!=</span>&nbsp;<span class="ident" id="7340778">exact</span>&nbsp;<span class="op" id="7340784">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7340789">t</span><span class="op" id="7340790">.</span><span class="ident" id="7340791">Errorf</span><span class="op" id="7340797">(</span><span class="string" id="7340798">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7340847">,</span>&nbsp;<span class="ident" id="7340849">input</span><span class="op" id="7340854">,</span>&nbsp;<span class="ident" id="7340856">exact</span><span class="op" id="7340861">,</span>&nbsp;<span class="ident" id="7340863">wasExact</span><span class="op" id="7340871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7340875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7340878">}</span><br>
<span class="lineno"></span><span class="op" id="7340880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7340883">func</span>&nbsp;<span class="ident" id="7340888">TestFloat64SpecialCases</span><span class="op" id="7340911">(</span><span class="ident" id="7340912">t</span>&nbsp;<span class="op" id="7340914">*</span><span class="ident" id="7340915">testing</span><span class="op" id="7340922">.</span><span class="ident" id="7340923">T</span><span class="op" id="7340924">)</span>&nbsp;<span class="op" id="7340926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340929">for</span>&nbsp;<span class="ident" id="7340933">_</span><span class="op" id="7340934">,</span>&nbsp;<span class="ident" id="7340936">input</span>&nbsp;<span class="op" id="7340942">:=</span>&nbsp;<span class="keyword" id="7340945">range</span>&nbsp;<span class="ident" id="7340951">float64inputs</span>&nbsp;<span class="op" id="7340965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7340969">if</span>&nbsp;<span class="ident" id="7340972">strings</span><span class="op" id="7340979">.</span><span class="ident" id="7340980">HasPrefix</span><span class="op" id="7340989">(</span><span class="ident" id="7340990">input</span><span class="op" id="7340995">,</span>&nbsp;<span class="string" id="7340997">&#34;long:&#34;</span><span class="op" id="7341004">)</span>&nbsp;<span class="op" id="7341006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341011">if</span>&nbsp;<span class="ident" id="7341014">testing</span><span class="op" id="7341021">.</span><span class="ident" id="7341022">Short</span><span class="op" id="7341027">(</span><span class="op" id="7341028">)</span>&nbsp;<span class="op" id="7341030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341036">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7341048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7341053">input</span>&nbsp;<span class="op" id="7341059">=</span>&nbsp;<span class="ident" id="7341061">input</span><span class="op" id="7341066">[</span><span class="builtinfunc" id="7341067">len</span><span class="op" id="7341070">(</span><span class="string" id="7341071">&#34;long:&#34;</span><span class="op" id="7341078">)</span><span class="op" id="7341079">:</span><span class="op" id="7341080">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7341084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7341089">r</span><span class="op" id="7341090">,</span>&nbsp;<span class="ident" id="7341092">ok</span>&nbsp;<span class="op" id="7341095">:=</span>&nbsp;<span class="builtinfunc" id="7341098">new</span><span class="op" id="7341101">(</span><span class="ident" id="7341102">Rat</span><span class="op" id="7341105">)</span><span class="op" id="7341106">.</span><span class="ident" id="7341107">SetString</span><span class="op" id="7341116">(</span><span class="ident" id="7341117">input</span><span class="op" id="7341122">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341126">if</span>&nbsp;<span class="op" id="7341129">!</span><span class="ident" id="7341130">ok</span>&nbsp;<span class="op" id="7341133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7341138">t</span><span class="op" id="7341139">.</span><span class="ident" id="7341140">Errorf</span><span class="op" id="7341146">(</span><span class="string" id="7341147">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7341173">,</span>&nbsp;<span class="ident" id="7341175">input</span><span class="op" id="7341180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341185">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7341196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7341200">f</span><span class="op" id="7341201">,</span>&nbsp;<span class="ident" id="7341203">exact</span>&nbsp;<span class="op" id="7341209">:=</span>&nbsp;<span class="ident" id="7341212">r</span><span class="op" id="7341213">.</span><span class="ident" id="7341214">Float64</span><span class="op" id="7341221">(</span><span class="op" id="7341222">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341227">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341282">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341323">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341385">if</span>&nbsp;<span class="op" id="7341388">!</span><span class="ident" id="7341389">strings</span><span class="op" id="7341396">.</span><span class="ident" id="7341397">Contains</span><span class="op" id="7341405">(</span><span class="ident" id="7341406">input</span><span class="op" id="7341411">,</span>&nbsp;<span class="string" id="7341413">&#34;/&#34;</span><span class="op" id="7341416">)</span>&nbsp;<span class="op" id="7341418">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7341423">e</span><span class="op" id="7341424">,</span>&nbsp;<span class="ident" id="7341426">_</span>&nbsp;<span class="op" id="7341428">:=</span>&nbsp;<span class="ident" id="7341431">strconv</span><span class="op" id="7341438">.</span><span class="ident" id="7341439">ParseFloat</span><span class="op" id="7341449">(</span><span class="ident" id="7341450">input</span><span class="op" id="7341455">,</span>&nbsp;<span class="num" id="7341457">64</span><span class="op" id="7341459">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341465">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341508">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341558">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341604">switch</span>&nbsp;<span class="op" id="7341611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341616">case</span>&nbsp;<span class="ident" id="7341621">math</span><span class="op" id="7341625">.</span><span class="ident" id="7341626">Float64bits</span><span class="op" id="7341637">(</span><span class="ident" id="7341638">e</span><span class="op" id="7341639">)</span>&nbsp;<span class="op" id="7341641">==</span>&nbsp;<span class="ident" id="7341644">math</span><span class="op" id="7341648">.</span><span class="ident" id="7341649">Float64bits</span><span class="op" id="7341660">(</span><span class="ident" id="7341661">f</span><span class="op" id="7341662">)</span><span class="op" id="7341663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341669">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341694">case</span>&nbsp;<span class="ident" id="7341699">f</span>&nbsp;<span class="op" id="7341701">==</span>&nbsp;<span class="num" id="7341704">0</span>&nbsp;<span class="op" id="7341706">&amp;&amp;</span>&nbsp;<span class="ident" id="7341709">r</span><span class="op" id="7341710">.</span><span class="ident" id="7341711">Num</span><span class="op" id="7341714">(</span><span class="op" id="7341715">)</span><span class="op" id="7341716">.</span><span class="ident" id="7341717">BitLen</span><span class="op" id="7341723">(</span><span class="op" id="7341724">)</span>&nbsp;<span class="op" id="7341726">==</span>&nbsp;<span class="num" id="7341729">0</span><span class="op" id="7341730">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341736">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341791">default</span><span class="op" id="7341798">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7341804">t</span><span class="op" id="7341805">.</span><span class="ident" id="7341806">Errorf</span><span class="op" id="7341812">(</span><span class="string" id="7341813">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7341873">,</span>&nbsp;<span class="ident" id="7341875">input</span><span class="op" id="7341880">,</span>&nbsp;<span class="ident" id="7341882">e</span><span class="op" id="7341883">,</span>&nbsp;<span class="ident" id="7341885">e</span><span class="op" id="7341886">,</span>&nbsp;<span class="ident" id="7341888">f</span><span class="op" id="7341889">,</span>&nbsp;<span class="ident" id="7341891">f</span><span class="op" id="7341892">,</span>&nbsp;<span class="ident" id="7341894">f</span><span class="op" id="7341895">-</span><span class="ident" id="7341896">e</span><span class="op" id="7341897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7341902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7341906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341911">if</span>&nbsp;<span class="op" id="7341914">!</span><span class="ident" id="7341915">isFinite</span><span class="op" id="7341923">(</span><span class="ident" id="7341924">f</span><span class="op" id="7341925">)</span>&nbsp;<span class="op" id="7341927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341932">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7341943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7341948">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7341992">if</span>&nbsp;<span class="op" id="7341995">!</span><span class="ident" id="7341996">checkIsBestApprox64</span><span class="op" id="7342015">(</span><span class="ident" id="7342016">t</span><span class="op" id="7342017">,</span>&nbsp;<span class="ident" id="7342019">f</span><span class="op" id="7342020">,</span>&nbsp;<span class="ident" id="7342022">r</span><span class="op" id="7342023">)</span>&nbsp;<span class="op" id="7342025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7342030">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7342064">t</span><span class="op" id="7342065">.</span><span class="ident" id="7342066">Errorf</span><span class="op" id="7342072">(</span><span class="string" id="7342073">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7342089">,</span>&nbsp;<span class="ident" id="7342091">input</span><span class="op" id="7342096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7342100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7342105">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7342151">checkNonLossyRoundtrip64</span><span class="op" id="7342175">(</span><span class="ident" id="7342176">t</span><span class="op" id="7342177">,</span>&nbsp;<span class="ident" id="7342179">f</span><span class="op" id="7342180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7342185">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342231">if</span>&nbsp;<span class="ident" id="7342234">wasExact</span>&nbsp;<span class="op" id="7342243">:=</span>&nbsp;<span class="builtinfunc" id="7342246">new</span><span class="op" id="7342249">(</span><span class="ident" id="7342250">Rat</span><span class="op" id="7342253">)</span><span class="op" id="7342254">.</span><span class="ident" id="7342255">SetFloat64</span><span class="op" id="7342265">(</span><span class="ident" id="7342266">f</span><span class="op" id="7342267">)</span><span class="op" id="7342268">.</span><span class="ident" id="7342269">Cmp</span><span class="op" id="7342272">(</span><span class="ident" id="7342273">r</span><span class="op" id="7342274">)</span>&nbsp;<span class="op" id="7342276">==</span>&nbsp;<span class="num" id="7342279">0</span><span class="op" id="7342280">;</span>&nbsp;<span class="ident" id="7342282">wasExact</span>&nbsp;<span class="op" id="7342291">!=</span>&nbsp;<span class="ident" id="7342294">exact</span>&nbsp;<span class="op" id="7342300">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7342305">t</span><span class="op" id="7342306">.</span><span class="ident" id="7342307">Errorf</span><span class="op" id="7342313">(</span><span class="string" id="7342314">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7342363">,</span>&nbsp;<span class="ident" id="7342365">input</span><span class="op" id="7342370">,</span>&nbsp;<span class="ident" id="7342372">exact</span><span class="op" id="7342377">,</span>&nbsp;<span class="ident" id="7342379">wasExact</span><span class="op" id="7342387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7342391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7342394">}</span><br>
<span class="lineno"></span><span class="op" id="7342396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7342399">func</span>&nbsp;<span class="ident" id="7342404">TestFloat32Distribution</span><span class="op" id="7342427">(</span><span class="ident" id="7342428">t</span>&nbsp;<span class="op" id="7342430">*</span><span class="ident" id="7342431">testing</span><span class="op" id="7342438">.</span><span class="ident" id="7342439">T</span><span class="op" id="7342440">)</span>&nbsp;<span class="op" id="7342442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7342445">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7342505">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7342565">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342617">var</span>&nbsp;<span class="ident" id="7342621">add</span>&nbsp;<span class="op" id="7342625">=</span>&nbsp;<span class="op" id="7342627">[</span><span class="op" id="7342628">]</span><span class="ident" id="7342629">int64</span><span class="op" id="7342634">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342638">0</span><span class="op" id="7342639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342643">1</span><span class="op" id="7342644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342648">3</span><span class="op" id="7342649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342653">5</span><span class="op" id="7342654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342658">7</span><span class="op" id="7342659">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342663">9</span><span class="op" id="7342664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7342668">11</span><span class="op" id="7342670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7342673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342676">var</span>&nbsp;<span class="ident" id="7342680">winc</span><span class="op" id="7342684">,</span>&nbsp;<span class="ident" id="7342686">einc</span>&nbsp;<span class="op" id="7342691">=</span>&nbsp;<span class="ident" id="7342693">uint64</span><span class="op" id="7342699">(</span><span class="num" id="7342700">1</span><span class="op" id="7342701">)</span><span class="op" id="7342702">,</span>&nbsp;<span class="num" id="7342704">1</span>&nbsp;<span class="comment" id="7342706">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342738">if</span>&nbsp;<span class="ident" id="7342741">testing</span><span class="op" id="7342748">.</span><span class="ident" id="7342749">Short</span><span class="op" id="7342754">(</span><span class="op" id="7342755">)</span>&nbsp;<span class="op" id="7342757">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7342761">winc</span><span class="op" id="7342765">,</span>&nbsp;<span class="ident" id="7342767">einc</span>&nbsp;<span class="op" id="7342772">=</span>&nbsp;<span class="num" id="7342774">5</span><span class="op" id="7342775">,</span>&nbsp;<span class="num" id="7342777">15</span>&nbsp;<span class="comment" id="7342780">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7342813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342817">for</span>&nbsp;<span class="ident" id="7342821">_</span><span class="op" id="7342822">,</span>&nbsp;<span class="ident" id="7342824">sign</span>&nbsp;<span class="op" id="7342829">:=</span>&nbsp;<span class="keyword" id="7342832">range</span>&nbsp;<span class="string" id="7342838">&#34;+-&#34;</span>&nbsp;<span class="op" id="7342843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342847">for</span>&nbsp;<span class="ident" id="7342851">_</span><span class="op" id="7342852">,</span>&nbsp;<span class="ident" id="7342854">a</span>&nbsp;<span class="op" id="7342856">:=</span>&nbsp;<span class="keyword" id="7342859">range</span>&nbsp;<span class="ident" id="7342865">add</span>&nbsp;<span class="op" id="7342869">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342874">for</span>&nbsp;<span class="ident" id="7342878">wid</span>&nbsp;<span class="op" id="7342882">:=</span>&nbsp;<span class="ident" id="7342885">uint64</span><span class="op" id="7342891">(</span><span class="num" id="7342892">0</span><span class="op" id="7342893">)</span><span class="op" id="7342894">;</span>&nbsp;<span class="ident" id="7342896">wid</span>&nbsp;<span class="op" id="7342900">&lt;</span>&nbsp;<span class="num" id="7342902">30</span><span class="op" id="7342904">;</span>&nbsp;<span class="ident" id="7342906">wid</span>&nbsp;<span class="op" id="7342910">+=</span>&nbsp;<span class="ident" id="7342913">winc</span>&nbsp;<span class="op" id="7342918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7342924">b</span>&nbsp;<span class="op" id="7342926">:=</span>&nbsp;<span class="num" id="7342929">1</span><span class="op" id="7342930">&lt;&lt;</span><span class="ident" id="7342932">wid</span>&nbsp;<span class="op" id="7342936">+</span>&nbsp;<span class="ident" id="7342938">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342944">if</span>&nbsp;<span class="ident" id="7342947">sign</span>&nbsp;<span class="op" id="7342952">==</span>&nbsp;<span class="string" id="7342955">&#39;-&#39;</span>&nbsp;<span class="op" id="7342959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7342966">b</span>&nbsp;<span class="op" id="7342968">=</span>&nbsp;<span class="op" id="7342970">-</span><span class="ident" id="7342971">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7342977">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7342983">for</span>&nbsp;<span class="ident" id="7342987">exp</span>&nbsp;<span class="op" id="7342991">:=</span>&nbsp;<span class="op" id="7342994">-</span><span class="num" id="7342995">150</span><span class="op" id="7342998">;</span>&nbsp;<span class="ident" id="7343000">exp</span>&nbsp;<span class="op" id="7343004">&lt;</span>&nbsp;<span class="num" id="7343006">150</span><span class="op" id="7343009">;</span>&nbsp;<span class="ident" id="7343011">exp</span>&nbsp;<span class="op" id="7343015">+=</span>&nbsp;<span class="ident" id="7343018">einc</span>&nbsp;<span class="op" id="7343023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343030">num</span><span class="op" id="7343033">,</span>&nbsp;<span class="ident" id="7343035">den</span>&nbsp;<span class="op" id="7343039">:=</span>&nbsp;<span class="ident" id="7343042">NewInt</span><span class="op" id="7343048">(</span><span class="ident" id="7343049">b</span><span class="op" id="7343050">)</span><span class="op" id="7343051">,</span>&nbsp;<span class="ident" id="7343053">NewInt</span><span class="op" id="7343059">(</span><span class="num" id="7343060">1</span><span class="op" id="7343061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343068">if</span>&nbsp;<span class="ident" id="7343071">exp</span>&nbsp;<span class="op" id="7343075">&gt;</span>&nbsp;<span class="num" id="7343077">0</span>&nbsp;<span class="op" id="7343079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343087">num</span><span class="op" id="7343090">.</span><span class="ident" id="7343091">Lsh</span><span class="op" id="7343094">(</span><span class="ident" id="7343095">num</span><span class="op" id="7343098">,</span>&nbsp;<span class="builtintype" id="7343100">uint</span><span class="op" id="7343104">(</span><span class="ident" id="7343105">exp</span><span class="op" id="7343108">)</span><span class="op" id="7343109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343116">}</span>&nbsp;<span class="keyword" id="7343118">else</span>&nbsp;<span class="op" id="7343123">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343131">den</span><span class="op" id="7343134">.</span><span class="ident" id="7343135">Lsh</span><span class="op" id="7343138">(</span><span class="ident" id="7343139">den</span><span class="op" id="7343142">,</span>&nbsp;<span class="builtintype" id="7343144">uint</span><span class="op" id="7343148">(</span><span class="op" id="7343149">-</span><span class="ident" id="7343150">exp</span><span class="op" id="7343153">)</span><span class="op" id="7343154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343168">r</span>&nbsp;<span class="op" id="7343170">:=</span>&nbsp;<span class="builtinfunc" id="7343173">new</span><span class="op" id="7343176">(</span><span class="ident" id="7343177">Rat</span><span class="op" id="7343180">)</span><span class="op" id="7343181">.</span><span class="ident" id="7343182">SetFrac</span><span class="op" id="7343189">(</span><span class="ident" id="7343190">num</span><span class="op" id="7343193">,</span>&nbsp;<span class="ident" id="7343195">den</span><span class="op" id="7343198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343205">f</span><span class="op" id="7343206">,</span>&nbsp;<span class="ident" id="7343208">_</span>&nbsp;<span class="op" id="7343210">:=</span>&nbsp;<span class="ident" id="7343213">r</span><span class="op" id="7343214">.</span><span class="ident" id="7343215">Float32</span><span class="op" id="7343222">(</span><span class="op" id="7343223">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343231">if</span>&nbsp;<span class="op" id="7343234">!</span><span class="ident" id="7343235">checkIsBestApprox32</span><span class="op" id="7343254">(</span><span class="ident" id="7343255">t</span><span class="op" id="7343256">,</span>&nbsp;<span class="ident" id="7343258">f</span><span class="op" id="7343259">,</span>&nbsp;<span class="ident" id="7343261">r</span><span class="op" id="7343262">)</span>&nbsp;<span class="op" id="7343264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7343272">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343309">t</span><span class="op" id="7343310">.</span><span class="ident" id="7343311">Errorf</span><span class="op" id="7343317">(</span><span class="string" id="7343318">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7343381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343390">b</span><span class="op" id="7343391">,</span>&nbsp;<span class="ident" id="7343393">exp</span><span class="op" id="7343396">,</span>&nbsp;<span class="ident" id="7343398">f</span><span class="op" id="7343399">,</span>&nbsp;<span class="ident" id="7343401">f</span><span class="op" id="7343402">,</span>&nbsp;<span class="ident" id="7343404">math</span><span class="op" id="7343408">.</span><span class="ident" id="7343409">Ldexp</span><span class="op" id="7343414">(</span><span class="builtintype" id="7343415">float64</span><span class="op" id="7343422">(</span><span class="ident" id="7343423">b</span><span class="op" id="7343424">)</span><span class="op" id="7343425">,</span>&nbsp;<span class="ident" id="7343427">exp</span><span class="op" id="7343430">)</span><span class="op" id="7343431">,</span>&nbsp;<span class="ident" id="7343433">r</span><span class="op" id="7343434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343441">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343449">checkNonLossyRoundtrip32</span><span class="op" id="7343473">(</span><span class="ident" id="7343474">t</span><span class="op" id="7343475">,</span>&nbsp;<span class="ident" id="7343477">f</span><span class="op" id="7343478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343493">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343496">}</span><br>
<span class="lineno"></span><span class="op" id="7343498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7343501">func</span>&nbsp;<span class="ident" id="7343506">TestFloat64Distribution</span><span class="op" id="7343529">(</span><span class="ident" id="7343530">t</span>&nbsp;<span class="op" id="7343532">*</span><span class="ident" id="7343533">testing</span><span class="op" id="7343540">.</span><span class="ident" id="7343541">T</span><span class="op" id="7343542">)</span>&nbsp;<span class="op" id="7343544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7343547">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7343607">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7343667">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343719">var</span>&nbsp;<span class="ident" id="7343723">add</span>&nbsp;<span class="op" id="7343727">=</span>&nbsp;<span class="op" id="7343729">[</span><span class="op" id="7343730">]</span><span class="ident" id="7343731">int64</span><span class="op" id="7343736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343740">0</span><span class="op" id="7343741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343745">1</span><span class="op" id="7343746">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343750">3</span><span class="op" id="7343751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343755">5</span><span class="op" id="7343756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343760">7</span><span class="op" id="7343761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343765">9</span><span class="op" id="7343766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7343770">11</span><span class="op" id="7343772">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343778">var</span>&nbsp;<span class="ident" id="7343782">winc</span><span class="op" id="7343786">,</span>&nbsp;<span class="ident" id="7343788">einc</span>&nbsp;<span class="op" id="7343793">=</span>&nbsp;<span class="ident" id="7343795">uint64</span><span class="op" id="7343801">(</span><span class="num" id="7343802">1</span><span class="op" id="7343803">)</span><span class="op" id="7343804">,</span>&nbsp;<span class="num" id="7343806">1</span>&nbsp;<span class="comment" id="7343808">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343839">if</span>&nbsp;<span class="ident" id="7343842">testing</span><span class="op" id="7343849">.</span><span class="ident" id="7343850">Short</span><span class="op" id="7343855">(</span><span class="op" id="7343856">)</span>&nbsp;<span class="op" id="7343858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7343862">winc</span><span class="op" id="7343866">,</span>&nbsp;<span class="ident" id="7343868">einc</span>&nbsp;<span class="op" id="7343873">=</span>&nbsp;<span class="num" id="7343875">10</span><span class="op" id="7343877">,</span>&nbsp;<span class="num" id="7343879">500</span>&nbsp;<span class="comment" id="7343883">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7343916">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343920">for</span>&nbsp;<span class="ident" id="7343924">_</span><span class="op" id="7343925">,</span>&nbsp;<span class="ident" id="7343927">sign</span>&nbsp;<span class="op" id="7343932">:=</span>&nbsp;<span class="keyword" id="7343935">range</span>&nbsp;<span class="string" id="7343941">&#34;+-&#34;</span>&nbsp;<span class="op" id="7343946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343950">for</span>&nbsp;<span class="ident" id="7343954">_</span><span class="op" id="7343955">,</span>&nbsp;<span class="ident" id="7343957">a</span>&nbsp;<span class="op" id="7343959">:=</span>&nbsp;<span class="keyword" id="7343962">range</span>&nbsp;<span class="ident" id="7343968">add</span>&nbsp;<span class="op" id="7343972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7343977">for</span>&nbsp;<span class="ident" id="7343981">wid</span>&nbsp;<span class="op" id="7343985">:=</span>&nbsp;<span class="ident" id="7343988">uint64</span><span class="op" id="7343994">(</span><span class="num" id="7343995">0</span><span class="op" id="7343996">)</span><span class="op" id="7343997">;</span>&nbsp;<span class="ident" id="7343999">wid</span>&nbsp;<span class="op" id="7344003">&lt;</span>&nbsp;<span class="num" id="7344005">60</span><span class="op" id="7344007">;</span>&nbsp;<span class="ident" id="7344009">wid</span>&nbsp;<span class="op" id="7344013">+=</span>&nbsp;<span class="ident" id="7344016">winc</span>&nbsp;<span class="op" id="7344021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344027">b</span>&nbsp;<span class="op" id="7344029">:=</span>&nbsp;<span class="num" id="7344032">1</span><span class="op" id="7344033">&lt;&lt;</span><span class="ident" id="7344035">wid</span>&nbsp;<span class="op" id="7344039">+</span>&nbsp;<span class="ident" id="7344041">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344047">if</span>&nbsp;<span class="ident" id="7344050">sign</span>&nbsp;<span class="op" id="7344055">==</span>&nbsp;<span class="string" id="7344058">&#39;-&#39;</span>&nbsp;<span class="op" id="7344062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344069">b</span>&nbsp;<span class="op" id="7344071">=</span>&nbsp;<span class="op" id="7344073">-</span><span class="ident" id="7344074">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344086">for</span>&nbsp;<span class="ident" id="7344090">exp</span>&nbsp;<span class="op" id="7344094">:=</span>&nbsp;<span class="op" id="7344097">-</span><span class="num" id="7344098">1100</span><span class="op" id="7344102">;</span>&nbsp;<span class="ident" id="7344104">exp</span>&nbsp;<span class="op" id="7344108">&lt;</span>&nbsp;<span class="num" id="7344110">1100</span><span class="op" id="7344114">;</span>&nbsp;<span class="ident" id="7344116">exp</span>&nbsp;<span class="op" id="7344120">+=</span>&nbsp;<span class="ident" id="7344123">einc</span>&nbsp;<span class="op" id="7344128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344135">num</span><span class="op" id="7344138">,</span>&nbsp;<span class="ident" id="7344140">den</span>&nbsp;<span class="op" id="7344144">:=</span>&nbsp;<span class="ident" id="7344147">NewInt</span><span class="op" id="7344153">(</span><span class="ident" id="7344154">b</span><span class="op" id="7344155">)</span><span class="op" id="7344156">,</span>&nbsp;<span class="ident" id="7344158">NewInt</span><span class="op" id="7344164">(</span><span class="num" id="7344165">1</span><span class="op" id="7344166">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344173">if</span>&nbsp;<span class="ident" id="7344176">exp</span>&nbsp;<span class="op" id="7344180">&gt;</span>&nbsp;<span class="num" id="7344182">0</span>&nbsp;<span class="op" id="7344184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344192">num</span><span class="op" id="7344195">.</span><span class="ident" id="7344196">Lsh</span><span class="op" id="7344199">(</span><span class="ident" id="7344200">num</span><span class="op" id="7344203">,</span>&nbsp;<span class="builtintype" id="7344205">uint</span><span class="op" id="7344209">(</span><span class="ident" id="7344210">exp</span><span class="op" id="7344213">)</span><span class="op" id="7344214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344221">}</span>&nbsp;<span class="keyword" id="7344223">else</span>&nbsp;<span class="op" id="7344228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344236">den</span><span class="op" id="7344239">.</span><span class="ident" id="7344240">Lsh</span><span class="op" id="7344243">(</span><span class="ident" id="7344244">den</span><span class="op" id="7344247">,</span>&nbsp;<span class="builtintype" id="7344249">uint</span><span class="op" id="7344253">(</span><span class="op" id="7344254">-</span><span class="ident" id="7344255">exp</span><span class="op" id="7344258">)</span><span class="op" id="7344259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344266">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344273">r</span>&nbsp;<span class="op" id="7344275">:=</span>&nbsp;<span class="builtinfunc" id="7344278">new</span><span class="op" id="7344281">(</span><span class="ident" id="7344282">Rat</span><span class="op" id="7344285">)</span><span class="op" id="7344286">.</span><span class="ident" id="7344287">SetFrac</span><span class="op" id="7344294">(</span><span class="ident" id="7344295">num</span><span class="op" id="7344298">,</span>&nbsp;<span class="ident" id="7344300">den</span><span class="op" id="7344303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344310">f</span><span class="op" id="7344311">,</span>&nbsp;<span class="ident" id="7344313">_</span>&nbsp;<span class="op" id="7344315">:=</span>&nbsp;<span class="ident" id="7344318">r</span><span class="op" id="7344319">.</span><span class="ident" id="7344320">Float64</span><span class="op" id="7344327">(</span><span class="op" id="7344328">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344336">if</span>&nbsp;<span class="op" id="7344339">!</span><span class="ident" id="7344340">checkIsBestApprox64</span><span class="op" id="7344359">(</span><span class="ident" id="7344360">t</span><span class="op" id="7344361">,</span>&nbsp;<span class="ident" id="7344363">f</span><span class="op" id="7344364">,</span>&nbsp;<span class="ident" id="7344366">r</span><span class="op" id="7344367">)</span>&nbsp;<span class="op" id="7344369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7344377">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344414">t</span><span class="op" id="7344415">.</span><span class="ident" id="7344416">Errorf</span><span class="op" id="7344422">(</span><span class="string" id="7344423">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7344486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344495">b</span><span class="op" id="7344496">,</span>&nbsp;<span class="ident" id="7344498">exp</span><span class="op" id="7344501">,</span>&nbsp;<span class="ident" id="7344503">f</span><span class="op" id="7344504">,</span>&nbsp;<span class="ident" id="7344506">f</span><span class="op" id="7344507">,</span>&nbsp;<span class="ident" id="7344509">math</span><span class="op" id="7344513">.</span><span class="ident" id="7344514">Ldexp</span><span class="op" id="7344519">(</span><span class="builtintype" id="7344520">float64</span><span class="op" id="7344527">(</span><span class="ident" id="7344528">b</span><span class="op" id="7344529">)</span><span class="op" id="7344530">,</span>&nbsp;<span class="ident" id="7344532">exp</span><span class="op" id="7344535">)</span><span class="op" id="7344536">,</span>&nbsp;<span class="ident" id="7344538">r</span><span class="op" id="7344539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344554">checkNonLossyRoundtrip64</span><span class="op" id="7344578">(</span><span class="ident" id="7344579">t</span><span class="op" id="7344580">,</span>&nbsp;<span class="ident" id="7344582">f</span><span class="op" id="7344583">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344601">}</span><br>
<span class="lineno"></span><span class="op" id="7344603">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7344606">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7344678">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7344694">func</span>&nbsp;<span class="ident" id="7344699">TestSetFloat64NonFinite</span><span class="op" id="7344722">(</span><span class="ident" id="7344723">t</span>&nbsp;<span class="op" id="7344725">*</span><span class="ident" id="7344726">testing</span><span class="op" id="7344733">.</span><span class="ident" id="7344734">T</span><span class="op" id="7344735">)</span>&nbsp;<span class="op" id="7344737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344740">for</span>&nbsp;<span class="ident" id="7344744">_</span><span class="op" id="7344745">,</span>&nbsp;<span class="ident" id="7344747">f</span>&nbsp;<span class="op" id="7344749">:=</span>&nbsp;<span class="keyword" id="7344752">range</span>&nbsp;<span class="op" id="7344758">[</span><span class="op" id="7344759">]</span><span class="builtintype" id="7344760">float64</span><span class="op" id="7344767">{</span><span class="ident" id="7344768">math</span><span class="op" id="7344772">.</span><span class="ident" id="7344773">NaN</span><span class="op" id="7344776">(</span><span class="op" id="7344777">)</span><span class="op" id="7344778">,</span>&nbsp;<span class="ident" id="7344780">math</span><span class="op" id="7344784">.</span><span class="ident" id="7344785">Inf</span><span class="op" id="7344788">(</span><span class="op" id="7344789">+</span><span class="num" id="7344790">1</span><span class="op" id="7344791">)</span><span class="op" id="7344792">,</span>&nbsp;<span class="ident" id="7344794">math</span><span class="op" id="7344798">.</span><span class="ident" id="7344799">Inf</span><span class="op" id="7344802">(</span><span class="op" id="7344803">-</span><span class="num" id="7344804">1</span><span class="op" id="7344805">)</span><span class="op" id="7344806">}</span>&nbsp;<span class="op" id="7344808">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344812">var</span>&nbsp;<span class="ident" id="7344816">r</span>&nbsp;<span class="ident" id="7344818">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7344824">if</span>&nbsp;<span class="ident" id="7344827">r2</span>&nbsp;<span class="op" id="7344830">:=</span>&nbsp;<span class="ident" id="7344833">r</span><span class="op" id="7344834">.</span><span class="ident" id="7344835">SetFloat64</span><span class="op" id="7344845">(</span><span class="ident" id="7344846">f</span><span class="op" id="7344847">)</span><span class="op" id="7344848">;</span>&nbsp;<span class="ident" id="7344850">r2</span>&nbsp;<span class="op" id="7344853">!=</span>&nbsp;<span class="ident" id="7344856">nil</span>&nbsp;<span class="op" id="7344860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7344865">t</span><span class="op" id="7344866">.</span><span class="ident" id="7344867">Errorf</span><span class="op" id="7344873">(</span><span class="string" id="7344874">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7344907">,</span>&nbsp;<span class="ident" id="7344909">f</span><span class="op" id="7344910">,</span>&nbsp;<span class="ident" id="7344912">r2</span><span class="op" id="7344914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7344921">}</span><br>
<span class="lineno">1015</span><span class="op" id="7344923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7344926">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7344999">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7345026">func</span>&nbsp;<span class="ident" id="7345031">checkNonLossyRoundtrip32</span><span class="op" id="7345055">(</span><span class="ident" id="7345056">t</span>&nbsp;<span class="op" id="7345058">*</span><span class="ident" id="7345059">testing</span><span class="op" id="7345066">.</span><span class="ident" id="7345067">T</span><span class="op" id="7345068">,</span>&nbsp;<span class="ident" id="7345070">f</span>&nbsp;<span class="builtintype" id="7345072">float32</span><span class="op" id="7345079">)</span>&nbsp;<span class="op" id="7345081">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345084">if</span>&nbsp;<span class="op" id="7345087">!</span><span class="ident" id="7345088">isFinite</span><span class="op" id="7345096">(</span><span class="builtintype" id="7345097">float64</span><span class="op" id="7345104">(</span><span class="ident" id="7345105">f</span><span class="op" id="7345106">)</span><span class="op" id="7345107">)</span>&nbsp;<span class="op" id="7345109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345113">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7345121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345124">r</span>&nbsp;<span class="op" id="7345126">:=</span>&nbsp;<span class="builtinfunc" id="7345129">new</span><span class="op" id="7345132">(</span><span class="ident" id="7345133">Rat</span><span class="op" id="7345136">)</span><span class="op" id="7345137">.</span><span class="ident" id="7345138">SetFloat64</span><span class="op" id="7345148">(</span><span class="builtintype" id="7345149">float64</span><span class="op" id="7345156">(</span><span class="ident" id="7345157">f</span><span class="op" id="7345158">)</span><span class="op" id="7345159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345162">if</span>&nbsp;<span class="ident" id="7345165">r</span>&nbsp;<span class="op" id="7345167">==</span>&nbsp;<span class="ident" id="7345170">nil</span>&nbsp;<span class="op" id="7345174">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345178">t</span><span class="op" id="7345179">.</span><span class="ident" id="7345180">Errorf</span><span class="op" id="7345186">(</span><span class="string" id="7345187">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7345228">,</span>&nbsp;<span class="ident" id="7345230">f</span><span class="op" id="7345231">,</span>&nbsp;<span class="ident" id="7345233">f</span><span class="op" id="7345234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345238">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7345246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345249">f2</span><span class="op" id="7345251">,</span>&nbsp;<span class="ident" id="7345253">exact</span>&nbsp;<span class="op" id="7345259">:=</span>&nbsp;<span class="ident" id="7345262">r</span><span class="op" id="7345263">.</span><span class="ident" id="7345264">Float32</span><span class="op" id="7345271">(</span><span class="op" id="7345272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345275">if</span>&nbsp;<span class="ident" id="7345278">f</span>&nbsp;<span class="op" id="7345280">!=</span>&nbsp;<span class="ident" id="7345283">f2</span>&nbsp;<span class="op" id="7345286">||</span>&nbsp;<span class="op" id="7345289">!</span><span class="ident" id="7345290">exact</span>&nbsp;<span class="op" id="7345296">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345300">t</span><span class="op" id="7345301">.</span><span class="ident" id="7345302">Errorf</span><span class="op" id="7345308">(</span><span class="string" id="7345309">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7345392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345397">f</span><span class="op" id="7345398">,</span>&nbsp;<span class="ident" id="7345400">f2</span><span class="op" id="7345402">,</span>&nbsp;<span class="ident" id="7345404">f2</span><span class="op" id="7345406">,</span>&nbsp;<span class="ident" id="7345408">exact</span><span class="op" id="7345413">,</span>&nbsp;<span class="ident" id="7345415">f</span><span class="op" id="7345416">,</span>&nbsp;<span class="ident" id="7345418">f</span><span class="op" id="7345419">,</span>&nbsp;<span class="builtintype" id="7345421">true</span><span class="op" id="7345425">,</span>&nbsp;<span class="ident" id="7345427">f2</span><span class="op" id="7345429">-</span><span class="ident" id="7345430">f</span><span class="op" id="7345431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7345434">}</span><br>
<span class="lineno"></span><span class="op" id="7345436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7345439">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7345512">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7345539">func</span>&nbsp;<span class="ident" id="7345544">checkNonLossyRoundtrip64</span><span class="op" id="7345568">(</span><span class="ident" id="7345569">t</span>&nbsp;<span class="op" id="7345571">*</span><span class="ident" id="7345572">testing</span><span class="op" id="7345579">.</span><span class="ident" id="7345580">T</span><span class="op" id="7345581">,</span>&nbsp;<span class="ident" id="7345583">f</span>&nbsp;<span class="builtintype" id="7345585">float64</span><span class="op" id="7345592">)</span>&nbsp;<span class="op" id="7345594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345597">if</span>&nbsp;<span class="op" id="7345600">!</span><span class="ident" id="7345601">isFinite</span><span class="op" id="7345609">(</span><span class="ident" id="7345610">f</span><span class="op" id="7345611">)</span>&nbsp;<span class="op" id="7345613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345617">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7345625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345628">r</span>&nbsp;<span class="op" id="7345630">:=</span>&nbsp;<span class="builtinfunc" id="7345633">new</span><span class="op" id="7345636">(</span><span class="ident" id="7345637">Rat</span><span class="op" id="7345640">)</span><span class="op" id="7345641">.</span><span class="ident" id="7345642">SetFloat64</span><span class="op" id="7345652">(</span><span class="ident" id="7345653">f</span><span class="op" id="7345654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345657">if</span>&nbsp;<span class="ident" id="7345660">r</span>&nbsp;<span class="op" id="7345662">==</span>&nbsp;<span class="ident" id="7345665">nil</span>&nbsp;<span class="op" id="7345669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345673">t</span><span class="op" id="7345674">.</span><span class="ident" id="7345675">Errorf</span><span class="op" id="7345681">(</span><span class="string" id="7345682">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7345714">,</span>&nbsp;<span class="ident" id="7345716">f</span><span class="op" id="7345717">,</span>&nbsp;<span class="ident" id="7345719">f</span><span class="op" id="7345720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345724">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7345732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345735">f2</span><span class="op" id="7345737">,</span>&nbsp;<span class="ident" id="7345739">exact</span>&nbsp;<span class="op" id="7345745">:=</span>&nbsp;<span class="ident" id="7345748">r</span><span class="op" id="7345749">.</span><span class="ident" id="7345750">Float64</span><span class="op" id="7345757">(</span><span class="op" id="7345758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7345761">if</span>&nbsp;<span class="ident" id="7345764">f</span>&nbsp;<span class="op" id="7345766">!=</span>&nbsp;<span class="ident" id="7345769">f2</span>&nbsp;<span class="op" id="7345772">||</span>&nbsp;<span class="op" id="7345775">!</span><span class="ident" id="7345776">exact</span>&nbsp;<span class="op" id="7345782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345786">t</span><span class="op" id="7345787">.</span><span class="ident" id="7345788">Errorf</span><span class="op" id="7345794">(</span><span class="string" id="7345795">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7345869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345874">f</span><span class="op" id="7345875">,</span>&nbsp;<span class="ident" id="7345877">f2</span><span class="op" id="7345879">,</span>&nbsp;<span class="ident" id="7345881">f2</span><span class="op" id="7345883">,</span>&nbsp;<span class="ident" id="7345885">exact</span><span class="op" id="7345890">,</span>&nbsp;<span class="ident" id="7345892">f</span><span class="op" id="7345893">,</span>&nbsp;<span class="ident" id="7345895">f</span><span class="op" id="7345896">,</span>&nbsp;<span class="builtintype" id="7345898">true</span><span class="op" id="7345902">,</span>&nbsp;<span class="ident" id="7345904">f2</span><span class="op" id="7345906">-</span><span class="ident" id="7345907">f</span><span class="op" id="7345908">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7345911">}</span><br>
<span class="lineno"></span><span class="op" id="7345913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7345916">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7345974">func</span>&nbsp;<span class="ident" id="7345979">delta</span><span class="op" id="7345984">(</span><span class="ident" id="7345985">r</span>&nbsp;<span class="op" id="7345987">*</span><span class="ident" id="7345988">Rat</span><span class="op" id="7345991">,</span>&nbsp;<span class="ident" id="7345993">f</span>&nbsp;<span class="builtintype" id="7345995">float64</span><span class="op" id="7346002">)</span>&nbsp;<span class="op" id="7346004">*</span><span class="ident" id="7346005">Rat</span>&nbsp;<span class="op" id="7346009">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346012">d</span>&nbsp;<span class="op" id="7346014">:=</span>&nbsp;<span class="builtinfunc" id="7346017">new</span><span class="op" id="7346020">(</span><span class="ident" id="7346021">Rat</span><span class="op" id="7346024">)</span><span class="op" id="7346025">.</span><span class="ident" id="7346026">Sub</span><span class="op" id="7346029">(</span><span class="ident" id="7346030">r</span><span class="op" id="7346031">,</span>&nbsp;<span class="builtinfunc" id="7346033">new</span><span class="op" id="7346036">(</span><span class="ident" id="7346037">Rat</span><span class="op" id="7346040">)</span><span class="op" id="7346041">.</span><span class="ident" id="7346042">SetFloat64</span><span class="op" id="7346052">(</span><span class="ident" id="7346053">f</span><span class="op" id="7346054">)</span><span class="op" id="7346055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346058">return</span>&nbsp;<span class="ident" id="7346065">d</span><span class="op" id="7346066">.</span><span class="ident" id="7346067">Abs</span><span class="op" id="7346070">(</span><span class="ident" id="7346071">d</span><span class="op" id="7346072">)</span><br>
<span class="lineno"></span><span class="op" id="7346074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7346077">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7346143">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7346166">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7346194">func</span>&nbsp;<span class="ident" id="7346199">checkIsBestApprox32</span><span class="op" id="7346218">(</span><span class="ident" id="7346219">t</span>&nbsp;<span class="op" id="7346221">*</span><span class="ident" id="7346222">testing</span><span class="op" id="7346229">.</span><span class="ident" id="7346230">T</span><span class="op" id="7346231">,</span>&nbsp;<span class="ident" id="7346233">f</span>&nbsp;<span class="builtintype" id="7346235">float32</span><span class="op" id="7346242">,</span>&nbsp;<span class="ident" id="7346244">r</span>&nbsp;<span class="op" id="7346246">*</span><span class="ident" id="7346247">Rat</span><span class="op" id="7346250">)</span>&nbsp;<span class="builtintype" id="7346252">bool</span>&nbsp;<span class="op" id="7346257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346260">if</span>&nbsp;<span class="ident" id="7346263">math</span><span class="op" id="7346267">.</span><span class="ident" id="7346268">Abs</span><span class="op" id="7346271">(</span><span class="builtintype" id="7346272">float64</span><span class="op" id="7346279">(</span><span class="ident" id="7346280">f</span><span class="op" id="7346281">)</span><span class="op" id="7346282">)</span>&nbsp;<span class="op" id="7346284">&gt;=</span>&nbsp;<span class="ident" id="7346287">math</span><span class="op" id="7346291">.</span><span class="ident" id="7346292">MaxFloat32</span>&nbsp;<span class="op" id="7346303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7346307">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7346378">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346426">return</span>&nbsp;<span class="builtintype" id="7346433">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7346443">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346510">f0</span>&nbsp;<span class="op" id="7346513">:=</span>&nbsp;<span class="ident" id="7346516">math</span><span class="op" id="7346520">.</span><span class="ident" id="7346521">Nextafter32</span><span class="op" id="7346532">(</span><span class="ident" id="7346533">f</span><span class="op" id="7346534">,</span>&nbsp;<span class="builtintype" id="7346536">float32</span><span class="op" id="7346543">(</span><span class="ident" id="7346544">math</span><span class="op" id="7346548">.</span><span class="ident" id="7346549">Inf</span><span class="op" id="7346552">(</span><span class="op" id="7346553">-</span><span class="num" id="7346554">1</span><span class="op" id="7346555">)</span><span class="op" id="7346556">)</span><span class="op" id="7346557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346560">f1</span>&nbsp;<span class="op" id="7346563">:=</span>&nbsp;<span class="ident" id="7346566">math</span><span class="op" id="7346570">.</span><span class="ident" id="7346571">Nextafter32</span><span class="op" id="7346582">(</span><span class="ident" id="7346583">f</span><span class="op" id="7346584">,</span>&nbsp;<span class="builtintype" id="7346586">float32</span><span class="op" id="7346593">(</span><span class="ident" id="7346594">math</span><span class="op" id="7346598">.</span><span class="ident" id="7346599">Inf</span><span class="op" id="7346602">(</span><span class="op" id="7346603">+</span><span class="num" id="7346604">1</span><span class="op" id="7346605">)</span><span class="op" id="7346606">)</span><span class="op" id="7346607">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7346611">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346676">df</span>&nbsp;<span class="op" id="7346679">:=</span>&nbsp;<span class="ident" id="7346682">delta</span><span class="op" id="7346687">(</span><span class="ident" id="7346688">r</span><span class="op" id="7346689">,</span>&nbsp;<span class="builtintype" id="7346691">float64</span><span class="op" id="7346698">(</span><span class="ident" id="7346699">f</span><span class="op" id="7346700">)</span><span class="op" id="7346701">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346704">df0</span>&nbsp;<span class="op" id="7346708">:=</span>&nbsp;<span class="ident" id="7346711">delta</span><span class="op" id="7346716">(</span><span class="ident" id="7346717">r</span><span class="op" id="7346718">,</span>&nbsp;<span class="builtintype" id="7346720">float64</span><span class="op" id="7346727">(</span><span class="ident" id="7346728">f0</span><span class="op" id="7346730">)</span><span class="op" id="7346731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346734">df1</span>&nbsp;<span class="op" id="7346738">:=</span>&nbsp;<span class="ident" id="7346741">delta</span><span class="op" id="7346746">(</span><span class="ident" id="7346747">r</span><span class="op" id="7346748">,</span>&nbsp;<span class="builtintype" id="7346750">float64</span><span class="op" id="7346757">(</span><span class="ident" id="7346758">f1</span><span class="op" id="7346760">)</span><span class="op" id="7346761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346764">if</span>&nbsp;<span class="ident" id="7346767">df</span><span class="op" id="7346769">.</span><span class="ident" id="7346770">Cmp</span><span class="op" id="7346773">(</span><span class="ident" id="7346774">df0</span><span class="op" id="7346777">)</span>&nbsp;<span class="op" id="7346779">&gt;</span>&nbsp;<span class="num" id="7346781">0</span>&nbsp;<span class="op" id="7346783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346787">t</span><span class="op" id="7346788">.</span><span class="ident" id="7346789">Errorf</span><span class="op" id="7346795">(</span><span class="string" id="7346796">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7346865">,</span>&nbsp;<span class="ident" id="7346867">r</span><span class="op" id="7346868">,</span>&nbsp;<span class="ident" id="7346870">f</span><span class="op" id="7346871">,</span>&nbsp;<span class="ident" id="7346873">f</span><span class="op" id="7346874">,</span>&nbsp;<span class="ident" id="7346876">f0</span><span class="op" id="7346878">,</span>&nbsp;<span class="ident" id="7346880">f0</span><span class="op" id="7346882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346886">return</span>&nbsp;<span class="builtintype" id="7346893">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346903">if</span>&nbsp;<span class="ident" id="7346906">df</span><span class="op" id="7346908">.</span><span class="ident" id="7346909">Cmp</span><span class="op" id="7346912">(</span><span class="ident" id="7346913">df1</span><span class="op" id="7346916">)</span>&nbsp;<span class="op" id="7346918">&gt;</span>&nbsp;<span class="num" id="7346920">0</span>&nbsp;<span class="op" id="7346922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346926">t</span><span class="op" id="7346927">.</span><span class="ident" id="7346928">Errorf</span><span class="op" id="7346934">(</span><span class="string" id="7346935">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7347000">,</span>&nbsp;<span class="ident" id="7347002">r</span><span class="op" id="7347003">,</span>&nbsp;<span class="ident" id="7347005">f</span><span class="op" id="7347006">,</span>&nbsp;<span class="ident" id="7347008">f</span><span class="op" id="7347009">,</span>&nbsp;<span class="ident" id="7347011">f1</span><span class="op" id="7347013">,</span>&nbsp;<span class="ident" id="7347015">f1</span><span class="op" id="7347017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347021">return</span>&nbsp;<span class="builtintype" id="7347028">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347035">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347038">if</span>&nbsp;<span class="ident" id="7347041">df</span><span class="op" id="7347043">.</span><span class="ident" id="7347044">Cmp</span><span class="op" id="7347047">(</span><span class="ident" id="7347048">df0</span><span class="op" id="7347051">)</span>&nbsp;<span class="op" id="7347053">==</span>&nbsp;<span class="num" id="7347056">0</span>&nbsp;<span class="op" id="7347058">&amp;&amp;</span>&nbsp;<span class="op" id="7347061">!</span><span class="ident" id="7347062">isEven32</span><span class="op" id="7347070">(</span><span class="ident" id="7347071">f</span><span class="op" id="7347072">)</span>&nbsp;<span class="op" id="7347074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347078">t</span><span class="op" id="7347079">.</span><span class="ident" id="7347080">Errorf</span><span class="op" id="7347086">(</span><span class="string" id="7347087">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7347164">,</span>&nbsp;<span class="ident" id="7347166">r</span><span class="op" id="7347167">,</span>&nbsp;<span class="ident" id="7347169">f</span><span class="op" id="7347170">,</span>&nbsp;<span class="ident" id="7347172">f</span><span class="op" id="7347173">,</span>&nbsp;<span class="ident" id="7347175">f0</span><span class="op" id="7347177">,</span>&nbsp;<span class="ident" id="7347179">f0</span><span class="op" id="7347181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347185">return</span>&nbsp;<span class="builtintype" id="7347192">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347202">if</span>&nbsp;<span class="ident" id="7347205">df</span><span class="op" id="7347207">.</span><span class="ident" id="7347208">Cmp</span><span class="op" id="7347211">(</span><span class="ident" id="7347212">df1</span><span class="op" id="7347215">)</span>&nbsp;<span class="op" id="7347217">==</span>&nbsp;<span class="num" id="7347220">0</span>&nbsp;<span class="op" id="7347222">&amp;&amp;</span>&nbsp;<span class="op" id="7347225">!</span><span class="ident" id="7347226">isEven32</span><span class="op" id="7347234">(</span><span class="ident" id="7347235">f</span><span class="op" id="7347236">)</span>&nbsp;<span class="op" id="7347238">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347242">t</span><span class="op" id="7347243">.</span><span class="ident" id="7347244">Errorf</span><span class="op" id="7347250">(</span><span class="string" id="7347251">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7347328">,</span>&nbsp;<span class="ident" id="7347330">r</span><span class="op" id="7347331">,</span>&nbsp;<span class="ident" id="7347333">f</span><span class="op" id="7347334">,</span>&nbsp;<span class="ident" id="7347336">f</span><span class="op" id="7347337">,</span>&nbsp;<span class="ident" id="7347339">f1</span><span class="op" id="7347341">,</span>&nbsp;<span class="ident" id="7347343">f1</span><span class="op" id="7347345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347349">return</span>&nbsp;<span class="builtintype" id="7347356">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347366">return</span>&nbsp;<span class="builtintype" id="7347373">true</span><br>
<span class="lineno"></span><span class="op" id="7347378">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7347381">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7347447">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7347470">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7347498">func</span>&nbsp;<span class="ident" id="7347503">checkIsBestApprox64</span><span class="op" id="7347522">(</span><span class="ident" id="7347523">t</span>&nbsp;<span class="op" id="7347525">*</span><span class="ident" id="7347526">testing</span><span class="op" id="7347533">.</span><span class="ident" id="7347534">T</span><span class="op" id="7347535">,</span>&nbsp;<span class="ident" id="7347537">f</span>&nbsp;<span class="builtintype" id="7347539">float64</span><span class="op" id="7347546">,</span>&nbsp;<span class="ident" id="7347548">r</span>&nbsp;<span class="op" id="7347550">*</span><span class="ident" id="7347551">Rat</span><span class="op" id="7347554">)</span>&nbsp;<span class="builtintype" id="7347556">bool</span>&nbsp;<span class="op" id="7347561">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347564">if</span>&nbsp;<span class="ident" id="7347567">math</span><span class="op" id="7347571">.</span><span class="ident" id="7347572">Abs</span><span class="op" id="7347575">(</span><span class="ident" id="7347576">f</span><span class="op" id="7347577">)</span>&nbsp;<span class="op" id="7347579">&gt;=</span>&nbsp;<span class="ident" id="7347582">math</span><span class="op" id="7347586">.</span><span class="ident" id="7347587">MaxFloat64</span>&nbsp;<span class="op" id="7347598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7347602">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7347673">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347721">return</span>&nbsp;<span class="builtintype" id="7347728">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347734">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7347738">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347805">f0</span>&nbsp;<span class="op" id="7347808">:=</span>&nbsp;<span class="ident" id="7347811">math</span><span class="op" id="7347815">.</span><span class="ident" id="7347816">Nextafter</span><span class="op" id="7347825">(</span><span class="ident" id="7347826">f</span><span class="op" id="7347827">,</span>&nbsp;<span class="ident" id="7347829">math</span><span class="op" id="7347833">.</span><span class="ident" id="7347834">Inf</span><span class="op" id="7347837">(</span><span class="op" id="7347838">-</span><span class="num" id="7347839">1</span><span class="op" id="7347840">)</span><span class="op" id="7347841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347844">f1</span>&nbsp;<span class="op" id="7347847">:=</span>&nbsp;<span class="ident" id="7347850">math</span><span class="op" id="7347854">.</span><span class="ident" id="7347855">Nextafter</span><span class="op" id="7347864">(</span><span class="ident" id="7347865">f</span><span class="op" id="7347866">,</span>&nbsp;<span class="ident" id="7347868">math</span><span class="op" id="7347872">.</span><span class="ident" id="7347873">Inf</span><span class="op" id="7347876">(</span><span class="op" id="7347877">+</span><span class="num" id="7347878">1</span><span class="op" id="7347879">)</span><span class="op" id="7347880">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7347884">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347949">df</span>&nbsp;<span class="op" id="7347952">:=</span>&nbsp;<span class="ident" id="7347955">delta</span><span class="op" id="7347960">(</span><span class="ident" id="7347961">r</span><span class="op" id="7347962">,</span>&nbsp;<span class="ident" id="7347964">f</span><span class="op" id="7347965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347968">df0</span>&nbsp;<span class="op" id="7347972">:=</span>&nbsp;<span class="ident" id="7347975">delta</span><span class="op" id="7347980">(</span><span class="ident" id="7347981">r</span><span class="op" id="7347982">,</span>&nbsp;<span class="ident" id="7347984">f0</span><span class="op" id="7347986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347989">df1</span>&nbsp;<span class="op" id="7347993">:=</span>&nbsp;<span class="ident" id="7347996">delta</span><span class="op" id="7348001">(</span><span class="ident" id="7348002">r</span><span class="op" id="7348003">,</span>&nbsp;<span class="ident" id="7348005">f1</span><span class="op" id="7348007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348010">if</span>&nbsp;<span class="ident" id="7348013">df</span><span class="op" id="7348015">.</span><span class="ident" id="7348016">Cmp</span><span class="op" id="7348019">(</span><span class="ident" id="7348020">df0</span><span class="op" id="7348023">)</span>&nbsp;<span class="op" id="7348025">&gt;</span>&nbsp;<span class="num" id="7348027">0</span>&nbsp;<span class="op" id="7348029">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348033">t</span><span class="op" id="7348034">.</span><span class="ident" id="7348035">Errorf</span><span class="op" id="7348041">(</span><span class="string" id="7348042">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7348111">,</span>&nbsp;<span class="ident" id="7348113">r</span><span class="op" id="7348114">,</span>&nbsp;<span class="ident" id="7348116">f</span><span class="op" id="7348117">,</span>&nbsp;<span class="ident" id="7348119">f</span><span class="op" id="7348120">,</span>&nbsp;<span class="ident" id="7348122">f0</span><span class="op" id="7348124">,</span>&nbsp;<span class="ident" id="7348126">f0</span><span class="op" id="7348128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348132">return</span>&nbsp;<span class="builtintype" id="7348139">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348149">if</span>&nbsp;<span class="ident" id="7348152">df</span><span class="op" id="7348154">.</span><span class="ident" id="7348155">Cmp</span><span class="op" id="7348158">(</span><span class="ident" id="7348159">df1</span><span class="op" id="7348162">)</span>&nbsp;<span class="op" id="7348164">&gt;</span>&nbsp;<span class="num" id="7348166">0</span>&nbsp;<span class="op" id="7348168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348172">t</span><span class="op" id="7348173">.</span><span class="ident" id="7348174">Errorf</span><span class="op" id="7348180">(</span><span class="string" id="7348181">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7348246">,</span>&nbsp;<span class="ident" id="7348248">r</span><span class="op" id="7348249">,</span>&nbsp;<span class="ident" id="7348251">f</span><span class="op" id="7348252">,</span>&nbsp;<span class="ident" id="7348254">f</span><span class="op" id="7348255">,</span>&nbsp;<span class="ident" id="7348257">f1</span><span class="op" id="7348259">,</span>&nbsp;<span class="ident" id="7348261">f1</span><span class="op" id="7348263">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348267">return</span>&nbsp;<span class="builtintype" id="7348274">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348284">if</span>&nbsp;<span class="ident" id="7348287">df</span><span class="op" id="7348289">.</span><span class="ident" id="7348290">Cmp</span><span class="op" id="7348293">(</span><span class="ident" id="7348294">df0</span><span class="op" id="7348297">)</span>&nbsp;<span class="op" id="7348299">==</span>&nbsp;<span class="num" id="7348302">0</span>&nbsp;<span class="op" id="7348304">&amp;&amp;</span>&nbsp;<span class="op" id="7348307">!</span><span class="ident" id="7348308">isEven64</span><span class="op" id="7348316">(</span><span class="ident" id="7348317">f</span><span class="op" id="7348318">)</span>&nbsp;<span class="op" id="7348320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348324">t</span><span class="op" id="7348325">.</span><span class="ident" id="7348326">Errorf</span><span class="op" id="7348332">(</span><span class="string" id="7348333">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7348410">,</span>&nbsp;<span class="ident" id="7348412">r</span><span class="op" id="7348413">,</span>&nbsp;<span class="ident" id="7348415">f</span><span class="op" id="7348416">,</span>&nbsp;<span class="ident" id="7348418">f</span><span class="op" id="7348419">,</span>&nbsp;<span class="ident" id="7348421">f0</span><span class="op" id="7348423">,</span>&nbsp;<span class="ident" id="7348425">f0</span><span class="op" id="7348427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348431">return</span>&nbsp;<span class="builtintype" id="7348438">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348448">if</span>&nbsp;<span class="ident" id="7348451">df</span><span class="op" id="7348453">.</span><span class="ident" id="7348454">Cmp</span><span class="op" id="7348457">(</span><span class="ident" id="7348458">df1</span><span class="op" id="7348461">)</span>&nbsp;<span class="op" id="7348463">==</span>&nbsp;<span class="num" id="7348466">0</span>&nbsp;<span class="op" id="7348468">&amp;&amp;</span>&nbsp;<span class="op" id="7348471">!</span><span class="ident" id="7348472">isEven64</span><span class="op" id="7348480">(</span><span class="ident" id="7348481">f</span><span class="op" id="7348482">)</span>&nbsp;<span class="op" id="7348484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348488">t</span><span class="op" id="7348489">.</span><span class="ident" id="7348490">Errorf</span><span class="op" id="7348496">(</span><span class="string" id="7348497">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7348574">,</span>&nbsp;<span class="ident" id="7348576">r</span><span class="op" id="7348577">,</span>&nbsp;<span class="ident" id="7348579">f</span><span class="op" id="7348580">,</span>&nbsp;<span class="ident" id="7348582">f</span><span class="op" id="7348583">,</span>&nbsp;<span class="ident" id="7348585">f1</span><span class="op" id="7348587">,</span>&nbsp;<span class="ident" id="7348589">f1</span><span class="op" id="7348591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348595">return</span>&nbsp;<span class="builtintype" id="7348602">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348609">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348612">return</span>&nbsp;<span class="builtintype" id="7348619">true</span><br>
<span class="lineno"></span><span class="op" id="7348624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7348627">func</span>&nbsp;<span class="ident" id="7348632">isEven32</span><span class="op" id="7348640">(</span><span class="ident" id="7348641">f</span>&nbsp;<span class="builtintype" id="7348643">float32</span><span class="op" id="7348650">)</span>&nbsp;<span class="builtintype" id="7348652">bool</span>&nbsp;<span class="op" id="7348657">{</span>&nbsp;<span class="keyword" id="7348659">return</span>&nbsp;<span class="ident" id="7348666">math</span><span class="op" id="7348670">.</span><span class="ident" id="7348671">Float32bits</span><span class="op" id="7348682">(</span><span class="ident" id="7348683">f</span><span class="op" id="7348684">)</span><span class="op" id="7348685">&amp;</span><span class="num" id="7348686">1</span>&nbsp;<span class="op" id="7348688">==</span>&nbsp;<span class="num" id="7348691">0</span>&nbsp;<span class="op" id="7348693">}</span><br>
<span class="lineno"></span><span class="keyword" id="7348695">func</span>&nbsp;<span class="ident" id="7348700">isEven64</span><span class="op" id="7348708">(</span><span class="ident" id="7348709">f</span>&nbsp;<span class="builtintype" id="7348711">float64</span><span class="op" id="7348718">)</span>&nbsp;<span class="builtintype" id="7348720">bool</span>&nbsp;<span class="op" id="7348725">{</span>&nbsp;<span class="keyword" id="7348727">return</span>&nbsp;<span class="ident" id="7348734">math</span><span class="op" id="7348738">.</span><span class="ident" id="7348739">Float64bits</span><span class="op" id="7348750">(</span><span class="ident" id="7348751">f</span><span class="op" id="7348752">)</span><span class="op" id="7348753">&amp;</span><span class="num" id="7348754">1</span>&nbsp;<span class="op" id="7348756">==</span>&nbsp;<span class="num" id="7348759">0</span>&nbsp;<span class="op" id="7348761">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7348764">func</span>&nbsp;<span class="ident" id="7348769">TestIsFinite</span><span class="op" id="7348781">(</span><span class="ident" id="7348782">t</span>&nbsp;<span class="op" id="7348784">*</span><span class="ident" id="7348785">testing</span><span class="op" id="7348792">.</span><span class="ident" id="7348793">T</span><span class="op" id="7348794">)</span>&nbsp;<span class="op" id="7348796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348799">finites</span>&nbsp;<span class="op" id="7348807">:=</span>&nbsp;<span class="op" id="7348810">[</span><span class="op" id="7348811">]</span><span class="builtintype" id="7348812">float64</span><span class="op" id="7348819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7348823">1.0</span>&nbsp;<span class="op" id="7348827">/</span>&nbsp;<span class="num" id="7348829">3</span><span class="op" id="7348830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7348834">4891559871276714924261e+222</span><span class="op" id="7348861">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348865">math</span><span class="op" id="7348869">.</span><span class="ident" id="7348870">MaxFloat64</span><span class="op" id="7348880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348884">math</span><span class="op" id="7348888">.</span><span class="ident" id="7348889">SmallestNonzeroFloat64</span><span class="op" id="7348911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348915">-</span><span class="ident" id="7348916">math</span><span class="op" id="7348920">.</span><span class="ident" id="7348921">MaxFloat64</span><span class="op" id="7348931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348935">-</span><span class="ident" id="7348936">math</span><span class="op" id="7348940">.</span><span class="ident" id="7348941">SmallestNonzeroFloat64</span><span class="op" id="7348963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348966">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348969">for</span>&nbsp;<span class="ident" id="7348973">_</span><span class="op" id="7348974">,</span>&nbsp;<span class="ident" id="7348976">f</span>&nbsp;<span class="op" id="7348978">:=</span>&nbsp;<span class="keyword" id="7348981">range</span>&nbsp;<span class="ident" id="7348987">finites</span>&nbsp;<span class="op" id="7348995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7348999">if</span>&nbsp;<span class="op" id="7349002">!</span><span class="ident" id="7349003">isFinite</span><span class="op" id="7349011">(</span><span class="ident" id="7349012">f</span><span class="op" id="7349013">)</span>&nbsp;<span class="op" id="7349015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349020">t</span><span class="op" id="7349021">.</span><span class="ident" id="7349022">Errorf</span><span class="op" id="7349028">(</span><span class="string" id="7349029">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7349049">,</span>&nbsp;<span class="ident" id="7349051">f</span><span class="op" id="7349052">,</span>&nbsp;<span class="ident" id="7349054">f</span><span class="op" id="7349055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349062">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349065">nonfinites</span>&nbsp;<span class="op" id="7349076">:=</span>&nbsp;<span class="op" id="7349079">[</span><span class="op" id="7349080">]</span><span class="builtintype" id="7349081">float64</span><span class="op" id="7349088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349092">math</span><span class="op" id="7349096">.</span><span class="ident" id="7349097">NaN</span><span class="op" id="7349100">(</span><span class="op" id="7349101">)</span><span class="op" id="7349102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349106">math</span><span class="op" id="7349110">.</span><span class="ident" id="7349111">Inf</span><span class="op" id="7349114">(</span><span class="op" id="7349115">-</span><span class="num" id="7349116">1</span><span class="op" id="7349117">)</span><span class="op" id="7349118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349122">math</span><span class="op" id="7349126">.</span><span class="ident" id="7349127">Inf</span><span class="op" id="7349130">(</span><span class="op" id="7349131">+</span><span class="num" id="7349132">1</span><span class="op" id="7349133">)</span><span class="op" id="7349134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349137">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7349140">for</span>&nbsp;<span class="ident" id="7349144">_</span><span class="op" id="7349145">,</span>&nbsp;<span class="ident" id="7349147">f</span>&nbsp;<span class="op" id="7349149">:=</span>&nbsp;<span class="keyword" id="7349152">range</span>&nbsp;<span class="ident" id="7349158">nonfinites</span>&nbsp;<span class="op" id="7349169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7349173">if</span>&nbsp;<span class="ident" id="7349176">isFinite</span><span class="op" id="7349184">(</span><span class="ident" id="7349185">f</span><span class="op" id="7349186">)</span>&nbsp;<span class="op" id="7349188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349193">t</span><span class="op" id="7349194">.</span><span class="ident" id="7349195">Errorf</span><span class="op" id="7349201">(</span><span class="string" id="7349202">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7349222">,</span>&nbsp;<span class="ident" id="7349224">f</span><span class="op" id="7349225">,</span>&nbsp;<span class="ident" id="7349227">f</span><span class="op" id="7349228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349235">}</span><br>
<span class="lineno">1160</span><span class="op" id="7349237">}</span>
</div>
</body>
</html>
