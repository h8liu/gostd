<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1516527">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1516583">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1516637">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1516688">package</span>&nbsp;<span class="ident" id="1516696">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1516701">//&nbsp;UDPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;UDP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="1516755">type</span>&nbsp;<span class="ident" id="1516760">UDPAddr</span>&nbsp;<span class="keyword" id="1516768">struct</span>&nbsp;<span class="op" id="1516775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1516778">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1516783"><a href="/net/ip.go.html#1417189">IP</a></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1516787">Port</span>&nbsp;<span class="builtintype" id="1516792">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1516797">Zone</span>&nbsp;<span class="builtintype" id="1516802">string</span>&nbsp;<span class="comment" id="1516809">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="1516840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1516843">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;udp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="1516897">func</span>&nbsp;<span class="op" id="1516902">(</span><span class="ident" id="1516903">a</span>&nbsp;<span class="op" id="1516905">*</span><span class="ident" id="1516906"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1516913">)</span>&nbsp;<span class="ident" id="1516915">Network</span><span class="op" id="1516922">(</span><span class="op" id="1516923">)</span>&nbsp;<span class="builtintype" id="1516925">string</span>&nbsp;<span class="op" id="1516932">{</span>&nbsp;<span class="keyword" id="1516934">return</span>&nbsp;<span class="string" id="1516941">&#34;udp&#34;</span>&nbsp;<span class="op" id="1516947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1516950">func</span>&nbsp;<span class="op" id="1516955">(</span><span class="ident" id="1516956">a</span>&nbsp;<span class="op" id="1516958">*</span><span class="ident" id="1516959"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1516966">)</span>&nbsp;<span class="ident" id="1516968">String</span><span class="op" id="1516974">(</span><span class="op" id="1516975">)</span>&nbsp;<span class="builtintype" id="1516977">string</span>&nbsp;<span class="op" id="1516984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1516987">if</span>&nbsp;<span class="ident" id="1516990"><a href="/net/udpsock.go.html#1516956">a</a></span>&nbsp;<span class="op" id="1516992">==</span>&nbsp;<span class="ident" id="1516995">nil</span>&nbsp;<span class="op" id="1516999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517003">return</span>&nbsp;<span class="string" id="1517010">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1517019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1517022">ip</span>&nbsp;<span class="op" id="1517025">:=</span>&nbsp;<span class="ident" id="1517028"><a href="/net/ip.go.html#1423884">ipEmptyString</a></span><span class="op" id="1517041">(</span><span class="ident" id="1517042"><a href="/net/udpsock.go.html#1516956">a</a></span><span class="op" id="1517043">.</span><span class="ident" id="1517044">IP</span><span class="op" id="1517046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517049">if</span>&nbsp;<span class="ident" id="1517052"><a href="/net/udpsock.go.html#1516956">a</a></span><span class="op" id="1517053">.</span><span class="ident" id="1517054">Zone</span>&nbsp;<span class="op" id="1517059">!=</span>&nbsp;<span class="string" id="1517062">&#34;&#34;</span>&nbsp;<span class="op" id="1517065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517069">return</span>&nbsp;<span class="ident" id="1517076"><a href="/net/ipsock.go.html#1445996">JoinHostPort</a></span><span class="op" id="1517088">(</span><span class="ident" id="1517089"><a href="/net/udpsock.go.html#1517022">ip</a></span><span class="op" id="1517091">+</span><span class="string" id="1517092">&#34;%&#34;</span><span class="op" id="1517095">+</span><span class="ident" id="1517096"><a href="/net/udpsock.go.html#1516956">a</a></span><span class="op" id="1517097">.</span><span class="ident" id="1517098">Zone</span><span class="op" id="1517102">,</span>&nbsp;<span class="ident" id="1517104"><a href="/net/parse.go.html#1479069">itoa</a></span><span class="op" id="1517108">(</span><span class="ident" id="1517109"><a href="/net/udpsock.go.html#1516956">a</a></span><span class="op" id="1517110">.</span><span class="ident" id="1517111">Port</span><span class="op" id="1517115">)</span><span class="op" id="1517116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1517119">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517122">return</span>&nbsp;<span class="ident" id="1517129"><a href="/net/ipsock.go.html#1445996">JoinHostPort</a></span><span class="op" id="1517141">(</span><span class="ident" id="1517142"><a href="/net/udpsock.go.html#1517022">ip</a></span><span class="op" id="1517144">,</span>&nbsp;<span class="ident" id="1517146"><a href="/net/parse.go.html#1479069">itoa</a></span><span class="op" id="1517150">(</span><span class="ident" id="1517151"><a href="/net/udpsock.go.html#1516956">a</a></span><span class="op" id="1517152">.</span><span class="ident" id="1517153">Port</span><span class="op" id="1517157">)</span><span class="op" id="1517158">)</span><br>
<span class="lineno"></span><span class="op" id="1517160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1517163">func</span>&nbsp;<span class="op" id="1517168">(</span><span class="ident" id="1517169">a</span>&nbsp;<span class="op" id="1517171">*</span><span class="ident" id="1517172"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1517179">)</span>&nbsp;<span class="ident" id="1517181">toAddr</span><span class="op" id="1517187">(</span><span class="op" id="1517188">)</span>&nbsp;<span class="ident" id="1517190"><a href="/net/net.go.html#1465097">Addr</a></span>&nbsp;<span class="op" id="1517195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517198">if</span>&nbsp;<span class="ident" id="1517201"><a href="/net/udpsock.go.html#1517169">a</a></span>&nbsp;<span class="op" id="1517203">==</span>&nbsp;<span class="ident" id="1517206">nil</span>&nbsp;<span class="op" id="1517210">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517214">return</span>&nbsp;<span class="ident" id="1517221">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1517226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517229">return</span>&nbsp;<span class="ident" id="1517236"><a href="/net/udpsock.go.html#1517169">a</a></span><br>
<span class="lineno"></span><span class="op" id="1517238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="1517241">//&nbsp;ResolveUDPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;UDP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="1517312">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1517381">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1517445">//&nbsp;&#34;udp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="1517514">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="1517577">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="1517603">func</span>&nbsp;<span class="ident" id="1517608">ResolveUDPAddr</span><span class="op" id="1517622">(</span><span class="ident" id="1517623">net</span><span class="op" id="1517626">,</span>&nbsp;<span class="ident" id="1517628">addr</span>&nbsp;<span class="builtintype" id="1517633">string</span><span class="op" id="1517639">)</span>&nbsp;<span class="op" id="1517641">(</span><span class="op" id="1517642">*</span><span class="ident" id="1517643"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1517650">,</span>&nbsp;<span class="builtintype" id="1517652">error</span><span class="op" id="1517657">)</span>&nbsp;<span class="op" id="1517659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517662">switch</span>&nbsp;<span class="ident" id="1517669"><a href="/net/udpsock.go.html#1517623">net</a></span>&nbsp;<span class="op" id="1517673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517676">case</span>&nbsp;<span class="string" id="1517681">&#34;udp&#34;</span><span class="op" id="1517686">,</span>&nbsp;<span class="string" id="1517688">&#34;udp4&#34;</span><span class="op" id="1517694">,</span>&nbsp;<span class="string" id="1517696">&#34;udp6&#34;</span><span class="op" id="1517702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517705">case</span>&nbsp;<span class="string" id="1517710">&#34;&#34;</span><span class="op" id="1517712">:</span>&nbsp;<span class="comment" id="1517714">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1517768"><a href="/net/udpsock.go.html#1517623">net</a></span>&nbsp;<span class="op" id="1517772">=</span>&nbsp;<span class="string" id="1517774">&#34;udp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517781">default</span><span class="op" id="1517788">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517792">return</span>&nbsp;<span class="ident" id="1517799">nil</span><span class="op" id="1517802">,</span>&nbsp;<span class="ident" id="1517804"><a href="/net/net.go.html#1473867">UnknownNetworkError</a></span><span class="op" id="1517823">(</span><span class="ident" id="1517824"><a href="/net/udpsock.go.html#1517623">net</a></span><span class="op" id="1517827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1517830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1517833">a</span><span class="op" id="1517834">,</span>&nbsp;<span class="ident" id="1517836">err</span>&nbsp;<span class="op" id="1517840">:=</span>&nbsp;<span class="ident" id="1517843"><a href="/net/ipsock.go.html#1446593">resolveInternetAddr</a></span><span class="op" id="1517862">(</span><span class="ident" id="1517863"><a href="/net/udpsock.go.html#1517623">net</a></span><span class="op" id="1517866">,</span>&nbsp;<span class="ident" id="1517868"><a href="/net/udpsock.go.html#1517628">addr</a></span><span class="op" id="1517872">,</span>&nbsp;<span class="ident" id="1517874"><a href="/net/net.go.html#1473194">noDeadline</a></span><span class="op" id="1517884">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517887">if</span>&nbsp;<span class="ident" id="1517890"><a href="/net/udpsock.go.html#1517836">err</a></span>&nbsp;<span class="op" id="1517894">!=</span>&nbsp;<span class="ident" id="1517897">nil</span>&nbsp;<span class="op" id="1517901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517905">return</span>&nbsp;<span class="ident" id="1517912">nil</span><span class="op" id="1517915">,</span>&nbsp;<span class="ident" id="1517917"><a href="/net/udpsock.go.html#1517836">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1517922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1517925">return</span>&nbsp;<span class="ident" id="1517932"><a href="/net/udpsock.go.html#1517833">a</a></span><span class="op" id="1517933">.</span><span class="ident" id="1517934">toAddr</span><span class="op" id="1517940">(</span><span class="op" id="1517941">)</span><span class="op" id="1517942">.</span><span class="op" id="1517943">(</span><span class="op" id="1517944">*</span><span class="ident" id="1517945"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1517952">)</span><span class="op" id="1517953">,</span>&nbsp;<span class="ident" id="1517955">nil</span><br>
<span class="lineno"></span><span class="op" id="1517959">}</span>
</div>
</body>
</html>
