<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7090498">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7090553">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7090607">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7090658">package</span>&nbsp;<span class="ident" id="7090666">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7090674">import</span>&nbsp;<span class="op" id="7090681">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7090684">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7090693">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7090699">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7090709">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7090712">func</span>&nbsp;<span class="ident" id="7090717">testConstant</span><span class="op" id="7090729">(</span><span class="ident" id="7090730">t</span>&nbsp;<span class="op" id="7090732">*</span><span class="ident" id="7090733">testing</span><span class="op" id="7090740">.</span><span class="ident" id="7090741">T</span><span class="op" id="7090742">,</span>&nbsp;<span class="ident" id="7090744">w</span>&nbsp;<span class="builtintype" id="7090746">uint</span><span class="op" id="7090750">,</span>&nbsp;<span class="ident" id="7090752">max</span>&nbsp;<span class="builtintype" id="7090756">int</span><span class="op" id="7090759">)</span>&nbsp;<span class="op" id="7090761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090764">buf</span>&nbsp;<span class="op" id="7090768">:=</span>&nbsp;<span class="builtinfunc" id="7090771">make</span><span class="op" id="7090775">(</span><span class="op" id="7090776">[</span><span class="op" id="7090777">]</span><span class="builtintype" id="7090778">byte</span><span class="op" id="7090782">,</span>&nbsp;<span class="ident" id="7090784">MaxVarintLen64</span><span class="op" id="7090798">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090801">n</span>&nbsp;<span class="op" id="7090803">:=</span>&nbsp;<span class="ident" id="7090806">PutUvarint</span><span class="op" id="7090816">(</span><span class="ident" id="7090817">buf</span><span class="op" id="7090820">,</span>&nbsp;<span class="num" id="7090822">1</span><span class="op" id="7090823">&lt;&lt;</span><span class="ident" id="7090825">w</span><span class="op" id="7090826">-</span><span class="num" id="7090827">1</span><span class="op" id="7090828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7090831">if</span>&nbsp;<span class="ident" id="7090834">n</span>&nbsp;<span class="op" id="7090836">!=</span>&nbsp;<span class="ident" id="7090839">max</span>&nbsp;<span class="op" id="7090843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090847">t</span><span class="op" id="7090848">.</span><span class="ident" id="7090849">Errorf</span><span class="op" id="7090855">(</span><span class="string" id="7090856">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7090886">,</span>&nbsp;<span class="ident" id="7090888">w</span><span class="op" id="7090889">,</span>&nbsp;<span class="ident" id="7090891">max</span><span class="op" id="7090894">,</span>&nbsp;<span class="ident" id="7090896">n</span><span class="op" id="7090897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7090900">}</span><br>
<span class="lineno"></span><span class="op" id="7090902">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7090905">func</span>&nbsp;<span class="ident" id="7090910">TestConstants</span><span class="op" id="7090923">(</span><span class="ident" id="7090924">t</span>&nbsp;<span class="op" id="7090926">*</span><span class="ident" id="7090927">testing</span><span class="op" id="7090934">.</span><span class="ident" id="7090935">T</span><span class="op" id="7090936">)</span>&nbsp;<span class="op" id="7090938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090941">testConstant</span><span class="op" id="7090953">(</span><span class="ident" id="7090954">t</span><span class="op" id="7090955">,</span>&nbsp;<span class="num" id="7090957">16</span><span class="op" id="7090959">,</span>&nbsp;<span class="ident" id="7090961">MaxVarintLen16</span><span class="op" id="7090975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7090978">testConstant</span><span class="op" id="7090990">(</span><span class="ident" id="7090991">t</span><span class="op" id="7090992">,</span>&nbsp;<span class="num" id="7090994">32</span><span class="op" id="7090996">,</span>&nbsp;<span class="ident" id="7090998">MaxVarintLen32</span><span class="op" id="7091012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091015">testConstant</span><span class="op" id="7091027">(</span><span class="ident" id="7091028">t</span><span class="op" id="7091029">,</span>&nbsp;<span class="num" id="7091031">64</span><span class="op" id="7091033">,</span>&nbsp;<span class="ident" id="7091035">MaxVarintLen64</span><span class="op" id="7091049">)</span><br>
<span class="lineno">25</span><span class="op" id="7091051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7091054">func</span>&nbsp;<span class="ident" id="7091059">testVarint</span><span class="op" id="7091069">(</span><span class="ident" id="7091070">t</span>&nbsp;<span class="op" id="7091072">*</span><span class="ident" id="7091073">testing</span><span class="op" id="7091080">.</span><span class="ident" id="7091081">T</span><span class="op" id="7091082">,</span>&nbsp;<span class="ident" id="7091084">x</span>&nbsp;<span class="ident" id="7091086">int64</span><span class="op" id="7091091">)</span>&nbsp;<span class="op" id="7091093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091096">buf</span>&nbsp;<span class="op" id="7091100">:=</span>&nbsp;<span class="builtinfunc" id="7091103">make</span><span class="op" id="7091107">(</span><span class="op" id="7091108">[</span><span class="op" id="7091109">]</span><span class="builtintype" id="7091110">byte</span><span class="op" id="7091114">,</span>&nbsp;<span class="ident" id="7091116">MaxVarintLen64</span><span class="op" id="7091130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091133">n</span>&nbsp;<span class="op" id="7091135">:=</span>&nbsp;<span class="ident" id="7091138">PutVarint</span><span class="op" id="7091147">(</span><span class="ident" id="7091148">buf</span><span class="op" id="7091151">,</span>&nbsp;<span class="ident" id="7091153">x</span><span class="op" id="7091154">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091157">y</span><span class="op" id="7091158">,</span>&nbsp;<span class="ident" id="7091160">m</span>&nbsp;<span class="op" id="7091162">:=</span>&nbsp;<span class="ident" id="7091165">Varint</span><span class="op" id="7091171">(</span><span class="ident" id="7091172">buf</span><span class="op" id="7091175">[</span><span class="num" id="7091176">0</span><span class="op" id="7091177">:</span><span class="ident" id="7091178">n</span><span class="op" id="7091179">]</span><span class="op" id="7091180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091183">if</span>&nbsp;<span class="ident" id="7091186">x</span>&nbsp;<span class="op" id="7091188">!=</span>&nbsp;<span class="ident" id="7091191">y</span>&nbsp;<span class="op" id="7091193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091197">t</span><span class="op" id="7091198">.</span><span class="ident" id="7091199">Errorf</span><span class="op" id="7091205">(</span><span class="string" id="7091206">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7091226">,</span>&nbsp;<span class="ident" id="7091228">x</span><span class="op" id="7091229">,</span>&nbsp;<span class="ident" id="7091231">y</span><span class="op" id="7091232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091238">if</span>&nbsp;<span class="ident" id="7091241">n</span>&nbsp;<span class="op" id="7091243">!=</span>&nbsp;<span class="ident" id="7091246">m</span>&nbsp;<span class="op" id="7091248">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091252">t</span><span class="op" id="7091253">.</span><span class="ident" id="7091254">Errorf</span><span class="op" id="7091260">(</span><span class="string" id="7091261">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7091294">,</span>&nbsp;<span class="ident" id="7091296">x</span><span class="op" id="7091297">,</span>&nbsp;<span class="ident" id="7091299">m</span><span class="op" id="7091300">,</span>&nbsp;<span class="ident" id="7091302">n</span><span class="op" id="7091303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091310">y</span><span class="op" id="7091311">,</span>&nbsp;<span class="ident" id="7091313">err</span>&nbsp;<span class="op" id="7091317">:=</span>&nbsp;<span class="ident" id="7091320">ReadVarint</span><span class="op" id="7091330">(</span><span class="ident" id="7091331">bytes</span><span class="op" id="7091336">.</span><span class="ident" id="7091337">NewReader</span><span class="op" id="7091346">(</span><span class="ident" id="7091347">buf</span><span class="op" id="7091350">)</span><span class="op" id="7091351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091354">if</span>&nbsp;<span class="ident" id="7091357">err</span>&nbsp;<span class="op" id="7091361">!=</span>&nbsp;<span class="ident" id="7091364">nil</span>&nbsp;<span class="op" id="7091368">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091372">t</span><span class="op" id="7091373">.</span><span class="ident" id="7091374">Errorf</span><span class="op" id="7091380">(</span><span class="string" id="7091381">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7091401">,</span>&nbsp;<span class="ident" id="7091403">x</span><span class="op" id="7091404">,</span>&nbsp;<span class="ident" id="7091406">err</span><span class="op" id="7091409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091415">if</span>&nbsp;<span class="ident" id="7091418">x</span>&nbsp;<span class="op" id="7091420">!=</span>&nbsp;<span class="ident" id="7091423">y</span>&nbsp;<span class="op" id="7091425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091429">t</span><span class="op" id="7091430">.</span><span class="ident" id="7091431">Errorf</span><span class="op" id="7091437">(</span><span class="string" id="7091438">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7091462">,</span>&nbsp;<span class="ident" id="7091464">x</span><span class="op" id="7091465">,</span>&nbsp;<span class="ident" id="7091467">y</span><span class="op" id="7091468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091471">}</span><br>
<span class="lineno">45</span><span class="op" id="7091473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7091476">func</span>&nbsp;<span class="ident" id="7091481">testUvarint</span><span class="op" id="7091492">(</span><span class="ident" id="7091493">t</span>&nbsp;<span class="op" id="7091495">*</span><span class="ident" id="7091496">testing</span><span class="op" id="7091503">.</span><span class="ident" id="7091504">T</span><span class="op" id="7091505">,</span>&nbsp;<span class="ident" id="7091507">x</span>&nbsp;<span class="ident" id="7091509">uint64</span><span class="op" id="7091515">)</span>&nbsp;<span class="op" id="7091517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091520">buf</span>&nbsp;<span class="op" id="7091524">:=</span>&nbsp;<span class="builtinfunc" id="7091527">make</span><span class="op" id="7091531">(</span><span class="op" id="7091532">[</span><span class="op" id="7091533">]</span><span class="builtintype" id="7091534">byte</span><span class="op" id="7091538">,</span>&nbsp;<span class="ident" id="7091540">MaxVarintLen64</span><span class="op" id="7091554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091557">n</span>&nbsp;<span class="op" id="7091559">:=</span>&nbsp;<span class="ident" id="7091562">PutUvarint</span><span class="op" id="7091572">(</span><span class="ident" id="7091573">buf</span><span class="op" id="7091576">,</span>&nbsp;<span class="ident" id="7091578">x</span><span class="op" id="7091579">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091582">y</span><span class="op" id="7091583">,</span>&nbsp;<span class="ident" id="7091585">m</span>&nbsp;<span class="op" id="7091587">:=</span>&nbsp;<span class="ident" id="7091590">Uvarint</span><span class="op" id="7091597">(</span><span class="ident" id="7091598">buf</span><span class="op" id="7091601">[</span><span class="num" id="7091602">0</span><span class="op" id="7091603">:</span><span class="ident" id="7091604">n</span><span class="op" id="7091605">]</span><span class="op" id="7091606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091609">if</span>&nbsp;<span class="ident" id="7091612">x</span>&nbsp;<span class="op" id="7091614">!=</span>&nbsp;<span class="ident" id="7091617">y</span>&nbsp;<span class="op" id="7091619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091623">t</span><span class="op" id="7091624">.</span><span class="ident" id="7091625">Errorf</span><span class="op" id="7091631">(</span><span class="string" id="7091632">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7091653">,</span>&nbsp;<span class="ident" id="7091655">x</span><span class="op" id="7091656">,</span>&nbsp;<span class="ident" id="7091658">y</span><span class="op" id="7091659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091665">if</span>&nbsp;<span class="ident" id="7091668">n</span>&nbsp;<span class="op" id="7091670">!=</span>&nbsp;<span class="ident" id="7091673">m</span>&nbsp;<span class="op" id="7091675">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091679">t</span><span class="op" id="7091680">.</span><span class="ident" id="7091681">Errorf</span><span class="op" id="7091687">(</span><span class="string" id="7091688">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7091722">,</span>&nbsp;<span class="ident" id="7091724">x</span><span class="op" id="7091725">,</span>&nbsp;<span class="ident" id="7091727">m</span><span class="op" id="7091728">,</span>&nbsp;<span class="ident" id="7091730">n</span><span class="op" id="7091731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091738">y</span><span class="op" id="7091739">,</span>&nbsp;<span class="ident" id="7091741">err</span>&nbsp;<span class="op" id="7091745">:=</span>&nbsp;<span class="ident" id="7091748">ReadUvarint</span><span class="op" id="7091759">(</span><span class="ident" id="7091760">bytes</span><span class="op" id="7091765">.</span><span class="ident" id="7091766">NewReader</span><span class="op" id="7091775">(</span><span class="ident" id="7091776">buf</span><span class="op" id="7091779">)</span><span class="op" id="7091780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091783">if</span>&nbsp;<span class="ident" id="7091786">err</span>&nbsp;<span class="op" id="7091790">!=</span>&nbsp;<span class="ident" id="7091793">nil</span>&nbsp;<span class="op" id="7091797">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091801">t</span><span class="op" id="7091802">.</span><span class="ident" id="7091803">Errorf</span><span class="op" id="7091809">(</span><span class="string" id="7091810">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7091831">,</span>&nbsp;<span class="ident" id="7091833">x</span><span class="op" id="7091834">,</span>&nbsp;<span class="ident" id="7091836">err</span><span class="op" id="7091839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7091845">if</span>&nbsp;<span class="ident" id="7091848">x</span>&nbsp;<span class="op" id="7091850">!=</span>&nbsp;<span class="ident" id="7091853">y</span>&nbsp;<span class="op" id="7091855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7091859">t</span><span class="op" id="7091860">.</span><span class="ident" id="7091861">Errorf</span><span class="op" id="7091867">(</span><span class="string" id="7091868">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7091893">,</span>&nbsp;<span class="ident" id="7091895">x</span><span class="op" id="7091896">,</span>&nbsp;<span class="ident" id="7091898">y</span><span class="op" id="7091899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091902">}</span><br>
<span class="lineno">65</span><span class="op" id="7091904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7091907">var</span>&nbsp;<span class="ident" id="7091911">tests</span>&nbsp;<span class="op" id="7091917">=</span>&nbsp;<span class="op" id="7091919">[</span><span class="op" id="7091920">]</span><span class="ident" id="7091921">int64</span><span class="op" id="7091926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091929">-</span><span class="num" id="7091930">1</span>&nbsp;<span class="op" id="7091932">&lt;&lt;</span>&nbsp;<span class="num" id="7091935">63</span><span class="op" id="7091937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091940">-</span><span class="num" id="7091941">1</span><span class="op" id="7091942">&lt;&lt;</span><span class="num" id="7091944">63</span>&nbsp;<span class="op" id="7091947">+</span>&nbsp;<span class="num" id="7091949">1</span><span class="op" id="7091950">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7091953">-</span><span class="num" id="7091954">1</span><span class="op" id="7091955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091958">0</span><span class="op" id="7091959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091962">1</span><span class="op" id="7091963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091966">2</span><span class="op" id="7091967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091970">10</span><span class="op" id="7091972">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091975">20</span><span class="op" id="7091977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091980">63</span><span class="op" id="7091982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091985">64</span><span class="op" id="7091987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091990">65</span><span class="op" id="7091992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7091995">127</span><span class="op" id="7091998">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7092001">128</span><span class="op" id="7092004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7092007">129</span><span class="op" id="7092010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7092013">255</span><span class="op" id="7092016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7092019">256</span><span class="op" id="7092022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7092025">257</span><span class="op" id="7092028">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7092031">1</span><span class="op" id="7092032">&lt;&lt;</span><span class="num" id="7092034">63</span>&nbsp;<span class="op" id="7092037">-</span>&nbsp;<span class="num" id="7092039">1</span><span class="op" id="7092040">,</span><br>
<span class="lineno"></span><span class="op" id="7092042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7092045">func</span>&nbsp;<span class="ident" id="7092050">TestVarint</span><span class="op" id="7092060">(</span><span class="ident" id="7092061">t</span>&nbsp;<span class="op" id="7092063">*</span><span class="ident" id="7092064">testing</span><span class="op" id="7092071">.</span><span class="ident" id="7092072">T</span><span class="op" id="7092073">)</span>&nbsp;<span class="op" id="7092075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092078">for</span>&nbsp;<span class="ident" id="7092082">_</span><span class="op" id="7092083">,</span>&nbsp;<span class="ident" id="7092085">x</span>&nbsp;<span class="op" id="7092087">:=</span>&nbsp;<span class="keyword" id="7092090">range</span>&nbsp;<span class="ident" id="7092096">tests</span>&nbsp;<span class="op" id="7092102">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092106">testVarint</span><span class="op" id="7092116">(</span><span class="ident" id="7092117">t</span><span class="op" id="7092118">,</span>&nbsp;<span class="ident" id="7092120">x</span><span class="op" id="7092121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092125">testVarint</span><span class="op" id="7092135">(</span><span class="ident" id="7092136">t</span><span class="op" id="7092137">,</span>&nbsp;<span class="op" id="7092139">-</span><span class="ident" id="7092140">x</span><span class="op" id="7092141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092147">for</span>&nbsp;<span class="ident" id="7092151">x</span>&nbsp;<span class="op" id="7092153">:=</span>&nbsp;<span class="ident" id="7092156">int64</span><span class="op" id="7092161">(</span><span class="num" id="7092162">0x7</span><span class="op" id="7092165">)</span><span class="op" id="7092166">;</span>&nbsp;<span class="ident" id="7092168">x</span>&nbsp;<span class="op" id="7092170">!=</span>&nbsp;<span class="num" id="7092173">0</span><span class="op" id="7092174">;</span>&nbsp;<span class="ident" id="7092176">x</span>&nbsp;<span class="op" id="7092178">&lt;&lt;=</span>&nbsp;<span class="num" id="7092182">1</span>&nbsp;<span class="op" id="7092184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092188">testVarint</span><span class="op" id="7092198">(</span><span class="ident" id="7092199">t</span><span class="op" id="7092200">,</span>&nbsp;<span class="ident" id="7092202">x</span><span class="op" id="7092203">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092207">testVarint</span><span class="op" id="7092217">(</span><span class="ident" id="7092218">t</span><span class="op" id="7092219">,</span>&nbsp;<span class="op" id="7092221">-</span><span class="ident" id="7092222">x</span><span class="op" id="7092223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092226">}</span><br>
<span class="lineno"></span><span class="op" id="7092228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7092231">func</span>&nbsp;<span class="ident" id="7092236">TestUvarint</span><span class="op" id="7092247">(</span><span class="ident" id="7092248">t</span>&nbsp;<span class="op" id="7092250">*</span><span class="ident" id="7092251">testing</span><span class="op" id="7092258">.</span><span class="ident" id="7092259">T</span><span class="op" id="7092260">)</span>&nbsp;<span class="op" id="7092262">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092265">for</span>&nbsp;<span class="ident" id="7092269">_</span><span class="op" id="7092270">,</span>&nbsp;<span class="ident" id="7092272">x</span>&nbsp;<span class="op" id="7092274">:=</span>&nbsp;<span class="keyword" id="7092277">range</span>&nbsp;<span class="ident" id="7092283">tests</span>&nbsp;<span class="op" id="7092289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092293">testUvarint</span><span class="op" id="7092304">(</span><span class="ident" id="7092305">t</span><span class="op" id="7092306">,</span>&nbsp;<span class="ident" id="7092308">uint64</span><span class="op" id="7092314">(</span><span class="ident" id="7092315">x</span><span class="op" id="7092316">)</span><span class="op" id="7092317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092323">for</span>&nbsp;<span class="ident" id="7092327">x</span>&nbsp;<span class="op" id="7092329">:=</span>&nbsp;<span class="ident" id="7092332">uint64</span><span class="op" id="7092338">(</span><span class="num" id="7092339">0x7</span><span class="op" id="7092342">)</span><span class="op" id="7092343">;</span>&nbsp;<span class="ident" id="7092345">x</span>&nbsp;<span class="op" id="7092347">!=</span>&nbsp;<span class="num" id="7092350">0</span><span class="op" id="7092351">;</span>&nbsp;<span class="ident" id="7092353">x</span>&nbsp;<span class="op" id="7092355">&lt;&lt;=</span>&nbsp;<span class="num" id="7092359">1</span>&nbsp;<span class="op" id="7092361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092365">testUvarint</span><span class="op" id="7092376">(</span><span class="ident" id="7092377">t</span><span class="op" id="7092378">,</span>&nbsp;<span class="ident" id="7092380">x</span><span class="op" id="7092381">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092384">}</span><br>
<span class="lineno"></span><span class="op" id="7092386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7092389">func</span>&nbsp;<span class="ident" id="7092394">TestBufferTooSmall</span><span class="op" id="7092412">(</span><span class="ident" id="7092413">t</span>&nbsp;<span class="op" id="7092415">*</span><span class="ident" id="7092416">testing</span><span class="op" id="7092423">.</span><span class="ident" id="7092424">T</span><span class="op" id="7092425">)</span>&nbsp;<span class="op" id="7092427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092430">buf</span>&nbsp;<span class="op" id="7092434">:=</span>&nbsp;<span class="op" id="7092437">[</span><span class="op" id="7092438">]</span><span class="builtintype" id="7092439">byte</span><span class="op" id="7092443">{</span><span class="num" id="7092444">0x80</span><span class="op" id="7092448">,</span>&nbsp;<span class="num" id="7092450">0x80</span><span class="op" id="7092454">,</span>&nbsp;<span class="num" id="7092456">0x80</span><span class="op" id="7092460">,</span>&nbsp;<span class="num" id="7092462">0x80</span><span class="op" id="7092466">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092469">for</span>&nbsp;<span class="ident" id="7092473">i</span>&nbsp;<span class="op" id="7092475">:=</span>&nbsp;<span class="num" id="7092478">0</span><span class="op" id="7092479">;</span>&nbsp;<span class="ident" id="7092481">i</span>&nbsp;<span class="op" id="7092483">&lt;=</span>&nbsp;<span class="builtinfunc" id="7092486">len</span><span class="op" id="7092489">(</span><span class="ident" id="7092490">buf</span><span class="op" id="7092493">)</span><span class="op" id="7092494">;</span>&nbsp;<span class="ident" id="7092496">i</span><span class="op" id="7092497">++</span>&nbsp;<span class="op" id="7092500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092504">buf</span>&nbsp;<span class="op" id="7092508">:=</span>&nbsp;<span class="ident" id="7092511">buf</span><span class="op" id="7092514">[</span><span class="num" id="7092515">0</span><span class="op" id="7092516">:</span><span class="ident" id="7092517">i</span><span class="op" id="7092518">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092522">x</span><span class="op" id="7092523">,</span>&nbsp;<span class="ident" id="7092525">n</span>&nbsp;<span class="op" id="7092527">:=</span>&nbsp;<span class="ident" id="7092530">Uvarint</span><span class="op" id="7092537">(</span><span class="ident" id="7092538">buf</span><span class="op" id="7092541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092545">if</span>&nbsp;<span class="ident" id="7092548">x</span>&nbsp;<span class="op" id="7092550">!=</span>&nbsp;<span class="num" id="7092553">0</span>&nbsp;<span class="op" id="7092555">||</span>&nbsp;<span class="ident" id="7092558">n</span>&nbsp;<span class="op" id="7092560">!=</span>&nbsp;<span class="num" id="7092563">0</span>&nbsp;<span class="op" id="7092565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092570">t</span><span class="op" id="7092571">.</span><span class="ident" id="7092572">Errorf</span><span class="op" id="7092578">(</span><span class="string" id="7092579">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7092612">,</span>&nbsp;<span class="ident" id="7092614">buf</span><span class="op" id="7092617">,</span>&nbsp;<span class="ident" id="7092619">x</span><span class="op" id="7092620">,</span>&nbsp;<span class="ident" id="7092622">n</span><span class="op" id="7092623">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092632">x</span><span class="op" id="7092633">,</span>&nbsp;<span class="ident" id="7092635">err</span>&nbsp;<span class="op" id="7092639">:=</span>&nbsp;<span class="ident" id="7092642">ReadUvarint</span><span class="op" id="7092653">(</span><span class="ident" id="7092654">bytes</span><span class="op" id="7092659">.</span><span class="ident" id="7092660">NewReader</span><span class="op" id="7092669">(</span><span class="ident" id="7092670">buf</span><span class="op" id="7092673">)</span><span class="op" id="7092674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092678">if</span>&nbsp;<span class="ident" id="7092681">x</span>&nbsp;<span class="op" id="7092683">!=</span>&nbsp;<span class="num" id="7092686">0</span>&nbsp;<span class="op" id="7092688">||</span>&nbsp;<span class="ident" id="7092691">err</span>&nbsp;<span class="op" id="7092695">!=</span>&nbsp;<span class="ident" id="7092698">io</span><span class="op" id="7092700">.</span><span class="ident" id="7092701">EOF</span>&nbsp;<span class="op" id="7092705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092710">t</span><span class="op" id="7092711">.</span><span class="ident" id="7092712">Errorf</span><span class="op" id="7092718">(</span><span class="string" id="7092719">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7092758">,</span>&nbsp;<span class="ident" id="7092760">buf</span><span class="op" id="7092763">,</span>&nbsp;<span class="ident" id="7092765">x</span><span class="op" id="7092766">,</span>&nbsp;<span class="ident" id="7092768">err</span><span class="op" id="7092771">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092778">}</span><br>
<span class="lineno"></span><span class="op" id="7092780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7092783">func</span>&nbsp;<span class="ident" id="7092788">testOverflow</span><span class="op" id="7092800">(</span><span class="ident" id="7092801">t</span>&nbsp;<span class="op" id="7092803">*</span><span class="ident" id="7092804">testing</span><span class="op" id="7092811">.</span><span class="ident" id="7092812">T</span><span class="op" id="7092813">,</span>&nbsp;<span class="ident" id="7092815">buf</span>&nbsp;<span class="op" id="7092819">[</span><span class="op" id="7092820">]</span><span class="builtintype" id="7092821">byte</span><span class="op" id="7092825">,</span>&nbsp;<span class="ident" id="7092827">n0</span>&nbsp;<span class="builtintype" id="7092830">int</span><span class="op" id="7092833">,</span>&nbsp;<span class="ident" id="7092835">err0</span>&nbsp;<span class="builtintype" id="7092840">error</span><span class="op" id="7092845">)</span>&nbsp;<span class="op" id="7092847">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092850">x</span><span class="op" id="7092851">,</span>&nbsp;<span class="ident" id="7092853">n</span>&nbsp;<span class="op" id="7092855">:=</span>&nbsp;<span class="ident" id="7092858">Uvarint</span><span class="op" id="7092865">(</span><span class="ident" id="7092866">buf</span><span class="op" id="7092869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7092872">if</span>&nbsp;<span class="ident" id="7092875">x</span>&nbsp;<span class="op" id="7092877">!=</span>&nbsp;<span class="num" id="7092880">0</span>&nbsp;<span class="op" id="7092882">||</span>&nbsp;<span class="ident" id="7092885">n</span>&nbsp;<span class="op" id="7092887">!=</span>&nbsp;<span class="ident" id="7092890">n0</span>&nbsp;<span class="op" id="7092893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092897">t</span><span class="op" id="7092898">.</span><span class="ident" id="7092899">Errorf</span><span class="op" id="7092905">(</span><span class="string" id="7092906">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7092951">,</span>&nbsp;<span class="ident" id="7092953">buf</span><span class="op" id="7092956">,</span>&nbsp;<span class="ident" id="7092958">x</span><span class="op" id="7092959">,</span>&nbsp;<span class="ident" id="7092961">n</span><span class="op" id="7092962">,</span>&nbsp;<span class="ident" id="7092964">n0</span><span class="op" id="7092966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7092969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7092973">x</span><span class="op" id="7092974">,</span>&nbsp;<span class="ident" id="7092976">err</span>&nbsp;<span class="op" id="7092980">:=</span>&nbsp;<span class="ident" id="7092983">ReadUvarint</span><span class="op" id="7092994">(</span><span class="ident" id="7092995">bytes</span><span class="op" id="7093000">.</span><span class="ident" id="7093001">NewReader</span><span class="op" id="7093010">(</span><span class="ident" id="7093011">buf</span><span class="op" id="7093014">)</span><span class="op" id="7093015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7093018">if</span>&nbsp;<span class="ident" id="7093021">x</span>&nbsp;<span class="op" id="7093023">!=</span>&nbsp;<span class="num" id="7093026">0</span>&nbsp;<span class="op" id="7093028">||</span>&nbsp;<span class="ident" id="7093031">err</span>&nbsp;<span class="op" id="7093035">!=</span>&nbsp;<span class="ident" id="7093038">err0</span>&nbsp;<span class="op" id="7093043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093047">t</span><span class="op" id="7093048">.</span><span class="ident" id="7093049">Errorf</span><span class="op" id="7093055">(</span><span class="string" id="7093056">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7093107">,</span>&nbsp;<span class="ident" id="7093109">buf</span><span class="op" id="7093112">,</span>&nbsp;<span class="ident" id="7093114">x</span><span class="op" id="7093115">,</span>&nbsp;<span class="ident" id="7093117">err</span><span class="op" id="7093120">,</span>&nbsp;<span class="ident" id="7093122">err0</span><span class="op" id="7093126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7093129">}</span><br>
<span class="lineno"></span><span class="op" id="7093131">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7093134">func</span>&nbsp;<span class="ident" id="7093139">TestOverflow</span><span class="op" id="7093151">(</span><span class="ident" id="7093152">t</span>&nbsp;<span class="op" id="7093154">*</span><span class="ident" id="7093155">testing</span><span class="op" id="7093162">.</span><span class="ident" id="7093163">T</span><span class="op" id="7093164">)</span>&nbsp;<span class="op" id="7093166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093169">testOverflow</span><span class="op" id="7093181">(</span><span class="ident" id="7093182">t</span><span class="op" id="7093183">,</span>&nbsp;<span class="op" id="7093185">[</span><span class="op" id="7093186">]</span><span class="builtintype" id="7093187">byte</span><span class="op" id="7093191">{</span><span class="num" id="7093192">0x80</span><span class="op" id="7093196">,</span>&nbsp;<span class="num" id="7093198">0x80</span><span class="op" id="7093202">,</span>&nbsp;<span class="num" id="7093204">0x80</span><span class="op" id="7093208">,</span>&nbsp;<span class="num" id="7093210">0x80</span><span class="op" id="7093214">,</span>&nbsp;<span class="num" id="7093216">0x80</span><span class="op" id="7093220">,</span>&nbsp;<span class="num" id="7093222">0x80</span><span class="op" id="7093226">,</span>&nbsp;<span class="num" id="7093228">0x80</span><span class="op" id="7093232">,</span>&nbsp;<span class="num" id="7093234">0x80</span><span class="op" id="7093238">,</span>&nbsp;<span class="num" id="7093240">0x80</span><span class="op" id="7093244">,</span>&nbsp;<span class="num" id="7093246">0x2</span><span class="op" id="7093249">}</span><span class="op" id="7093250">,</span>&nbsp;<span class="op" id="7093252">-</span><span class="num" id="7093253">10</span><span class="op" id="7093255">,</span>&nbsp;<span class="ident" id="7093257">overflow</span><span class="op" id="7093265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093268">testOverflow</span><span class="op" id="7093280">(</span><span class="ident" id="7093281">t</span><span class="op" id="7093282">,</span>&nbsp;<span class="op" id="7093284">[</span><span class="op" id="7093285">]</span><span class="builtintype" id="7093286">byte</span><span class="op" id="7093290">{</span><span class="num" id="7093291">0x80</span><span class="op" id="7093295">,</span>&nbsp;<span class="num" id="7093297">0x80</span><span class="op" id="7093301">,</span>&nbsp;<span class="num" id="7093303">0x80</span><span class="op" id="7093307">,</span>&nbsp;<span class="num" id="7093309">0x80</span><span class="op" id="7093313">,</span>&nbsp;<span class="num" id="7093315">0x80</span><span class="op" id="7093319">,</span>&nbsp;<span class="num" id="7093321">0x80</span><span class="op" id="7093325">,</span>&nbsp;<span class="num" id="7093327">0x80</span><span class="op" id="7093331">,</span>&nbsp;<span class="num" id="7093333">0x80</span><span class="op" id="7093337">,</span>&nbsp;<span class="num" id="7093339">0x80</span><span class="op" id="7093343">,</span>&nbsp;<span class="num" id="7093345">0x80</span><span class="op" id="7093349">,</span>&nbsp;<span class="num" id="7093351">0x80</span><span class="op" id="7093355">,</span>&nbsp;<span class="num" id="7093357">0x80</span><span class="op" id="7093361">,</span>&nbsp;<span class="num" id="7093363">0x1</span><span class="op" id="7093366">,</span>&nbsp;<span class="num" id="7093368">0</span><span class="op" id="7093369">,</span>&nbsp;<span class="num" id="7093371">0</span><span class="op" id="7093372">}</span><span class="op" id="7093373">,</span>&nbsp;<span class="op" id="7093375">-</span><span class="num" id="7093376">13</span><span class="op" id="7093378">,</span>&nbsp;<span class="ident" id="7093380">overflow</span><span class="op" id="7093388">)</span><br>
<span class="lineno"></span><span class="op" id="7093390">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7093393">func</span>&nbsp;<span class="ident" id="7093398">TestNonCanonicalZero</span><span class="op" id="7093418">(</span><span class="ident" id="7093419">t</span>&nbsp;<span class="op" id="7093421">*</span><span class="ident" id="7093422">testing</span><span class="op" id="7093429">.</span><span class="ident" id="7093430">T</span><span class="op" id="7093431">)</span>&nbsp;<span class="op" id="7093433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093436">buf</span>&nbsp;<span class="op" id="7093440">:=</span>&nbsp;<span class="op" id="7093443">[</span><span class="op" id="7093444">]</span><span class="builtintype" id="7093445">byte</span><span class="op" id="7093449">{</span><span class="num" id="7093450">0x80</span><span class="op" id="7093454">,</span>&nbsp;<span class="num" id="7093456">0x80</span><span class="op" id="7093460">,</span>&nbsp;<span class="num" id="7093462">0x80</span><span class="op" id="7093466">,</span>&nbsp;<span class="num" id="7093468">0</span><span class="op" id="7093469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093472">x</span><span class="op" id="7093473">,</span>&nbsp;<span class="ident" id="7093475">n</span>&nbsp;<span class="op" id="7093477">:=</span>&nbsp;<span class="ident" id="7093480">Uvarint</span><span class="op" id="7093487">(</span><span class="ident" id="7093488">buf</span><span class="op" id="7093491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7093494">if</span>&nbsp;<span class="ident" id="7093497">x</span>&nbsp;<span class="op" id="7093499">!=</span>&nbsp;<span class="num" id="7093502">0</span>&nbsp;<span class="op" id="7093504">||</span>&nbsp;<span class="ident" id="7093507">n</span>&nbsp;<span class="op" id="7093509">!=</span>&nbsp;<span class="num" id="7093512">4</span>&nbsp;<span class="op" id="7093514">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093518">t</span><span class="op" id="7093519">.</span><span class="ident" id="7093520">Errorf</span><span class="op" id="7093526">(</span><span class="string" id="7093527">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7093571">,</span>&nbsp;<span class="ident" id="7093573">buf</span><span class="op" id="7093576">,</span>&nbsp;<span class="ident" id="7093578">x</span><span class="op" id="7093579">,</span>&nbsp;<span class="ident" id="7093581">n</span><span class="op" id="7093582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7093586">}</span><br>
<span class="lineno"></span><span class="op" id="7093588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7093591">func</span>&nbsp;<span class="ident" id="7093596">BenchmarkPutUvarint32</span><span class="op" id="7093617">(</span><span class="ident" id="7093618">b</span>&nbsp;<span class="op" id="7093620">*</span><span class="ident" id="7093621">testing</span><span class="op" id="7093628">.</span><span class="ident" id="7093629">B</span><span class="op" id="7093630">)</span>&nbsp;<span class="op" id="7093632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093635">buf</span>&nbsp;<span class="op" id="7093639">:=</span>&nbsp;<span class="builtinfunc" id="7093642">make</span><span class="op" id="7093646">(</span><span class="op" id="7093647">[</span><span class="op" id="7093648">]</span><span class="builtintype" id="7093649">byte</span><span class="op" id="7093653">,</span>&nbsp;<span class="ident" id="7093655">MaxVarintLen32</span><span class="op" id="7093669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093672">b</span><span class="op" id="7093673">.</span><span class="ident" id="7093674">SetBytes</span><span class="op" id="7093682">(</span><span class="num" id="7093683">4</span><span class="op" id="7093684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7093687">for</span>&nbsp;<span class="ident" id="7093691">i</span>&nbsp;<span class="op" id="7093693">:=</span>&nbsp;<span class="num" id="7093696">0</span><span class="op" id="7093697">;</span>&nbsp;<span class="ident" id="7093699">i</span>&nbsp;<span class="op" id="7093701">&lt;</span>&nbsp;<span class="ident" id="7093703">b</span><span class="op" id="7093704">.</span><span class="ident" id="7093705">N</span><span class="op" id="7093706">;</span>&nbsp;<span class="ident" id="7093708">i</span><span class="op" id="7093709">++</span>&nbsp;<span class="op" id="7093712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7093716">for</span>&nbsp;<span class="ident" id="7093720">j</span>&nbsp;<span class="op" id="7093722">:=</span>&nbsp;<span class="builtintype" id="7093725">uint</span><span class="op" id="7093729">(</span><span class="num" id="7093730">0</span><span class="op" id="7093731">)</span><span class="op" id="7093732">;</span>&nbsp;<span class="ident" id="7093734">j</span>&nbsp;<span class="op" id="7093736">&lt;</span>&nbsp;<span class="ident" id="7093738">MaxVarintLen32</span><span class="op" id="7093752">;</span>&nbsp;<span class="ident" id="7093754">j</span><span class="op" id="7093755">++</span>&nbsp;<span class="op" id="7093758">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093763">PutUvarint</span><span class="op" id="7093773">(</span><span class="ident" id="7093774">buf</span><span class="op" id="7093777">,</span>&nbsp;<span class="num" id="7093779">1</span><span class="op" id="7093780">&lt;&lt;</span><span class="op" id="7093782">(</span><span class="ident" id="7093783">j</span><span class="op" id="7093784">*</span><span class="num" id="7093785">7</span><span class="op" id="7093786">)</span><span class="op" id="7093787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7093791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7093794">}</span><br>
<span class="lineno"></span><span class="op" id="7093796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7093799">func</span>&nbsp;<span class="ident" id="7093804">BenchmarkPutUvarint64</span><span class="op" id="7093825">(</span><span class="ident" id="7093826">b</span>&nbsp;<span class="op" id="7093828">*</span><span class="ident" id="7093829">testing</span><span class="op" id="7093836">.</span><span class="ident" id="7093837">B</span><span class="op" id="7093838">)</span>&nbsp;<span class="op" id="7093840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093843">buf</span>&nbsp;<span class="op" id="7093847">:=</span>&nbsp;<span class="builtinfunc" id="7093850">make</span><span class="op" id="7093854">(</span><span class="op" id="7093855">[</span><span class="op" id="7093856">]</span><span class="builtintype" id="7093857">byte</span><span class="op" id="7093861">,</span>&nbsp;<span class="ident" id="7093863">MaxVarintLen64</span><span class="op" id="7093877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093880">b</span><span class="op" id="7093881">.</span><span class="ident" id="7093882">SetBytes</span><span class="op" id="7093890">(</span><span class="num" id="7093891">8</span><span class="op" id="7093892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7093895">for</span>&nbsp;<span class="ident" id="7093899">i</span>&nbsp;<span class="op" id="7093901">:=</span>&nbsp;<span class="num" id="7093904">0</span><span class="op" id="7093905">;</span>&nbsp;<span class="ident" id="7093907">i</span>&nbsp;<span class="op" id="7093909">&lt;</span>&nbsp;<span class="ident" id="7093911">b</span><span class="op" id="7093912">.</span><span class="ident" id="7093913">N</span><span class="op" id="7093914">;</span>&nbsp;<span class="ident" id="7093916">i</span><span class="op" id="7093917">++</span>&nbsp;<span class="op" id="7093920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7093924">for</span>&nbsp;<span class="ident" id="7093928">j</span>&nbsp;<span class="op" id="7093930">:=</span>&nbsp;<span class="builtintype" id="7093933">uint</span><span class="op" id="7093937">(</span><span class="num" id="7093938">0</span><span class="op" id="7093939">)</span><span class="op" id="7093940">;</span>&nbsp;<span class="ident" id="7093942">j</span>&nbsp;<span class="op" id="7093944">&lt;</span>&nbsp;<span class="ident" id="7093946">MaxVarintLen64</span><span class="op" id="7093960">;</span>&nbsp;<span class="ident" id="7093962">j</span><span class="op" id="7093963">++</span>&nbsp;<span class="op" id="7093966">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7093971">PutUvarint</span><span class="op" id="7093981">(</span><span class="ident" id="7093982">buf</span><span class="op" id="7093985">,</span>&nbsp;<span class="num" id="7093987">1</span><span class="op" id="7093988">&lt;&lt;</span><span class="op" id="7093990">(</span><span class="ident" id="7093991">j</span><span class="op" id="7093992">*</span><span class="num" id="7093993">7</span><span class="op" id="7093994">)</span><span class="op" id="7093995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7093999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7094002">}</span><br>
<span class="lineno"></span><span class="op" id="7094004">}</span>
</div>
</body>
</html>
