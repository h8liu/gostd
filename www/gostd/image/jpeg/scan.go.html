<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/jpeg</h2>
<ul>
<li><a href="/gostd/image/jpeg/dct_test.go.html">dct_test.go</a></li>
<li><a href="/gostd/image/jpeg/fdct.go.html">fdct.go</a></li>
<li><a href="/gostd/image/jpeg/huffman.go.html">huffman.go</a></li>
<li><a href="/gostd/image/jpeg/idct.go.html">idct.go</a></li>
<li><a href="/gostd/image/jpeg/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/jpeg/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/jpeg/scan.go.html" class="current">scan.go</a></li>
<li><a href="/gostd/image/jpeg/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/jpeg/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5115659">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5115714">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5115768">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5115819">package</span>&nbsp;<span class="ident" id="5115827">jpeg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115833">import</span>&nbsp;<span class="op" id="5115840">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5115843">&#34;image&#34;</span><br>
<span class="lineno"></span><span class="op" id="5115851">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="5115854">//&nbsp;makeImg&nbsp;allocates&nbsp;and&nbsp;initializes&nbsp;the&nbsp;destination&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5115914">func</span>&nbsp;<span class="op" id="5115919">(</span><span class="ident" id="5115920">d</span>&nbsp;<span class="op" id="5115922">*</span><span class="ident" id="5115923"><a href="/gostd/image/jpeg/reader.go.html#5103264">decoder</a></span><span class="op" id="5115930">)</span>&nbsp;<span class="ident" id="5115932">makeImg</span><span class="op" id="5115939">(</span><span class="ident" id="5115940">h0</span><span class="op" id="5115942">,</span>&nbsp;<span class="ident" id="5115944">v0</span><span class="op" id="5115946">,</span>&nbsp;<span class="ident" id="5115948">mxx</span><span class="op" id="5115951">,</span>&nbsp;<span class="ident" id="5115953">myy</span>&nbsp;<span class="builtintype" id="5115957">int</span><span class="op" id="5115960">)</span>&nbsp;<span class="op" id="5115962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115965">if</span>&nbsp;<span class="ident" id="5115968"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5115969">.</span><span class="ident" id="5115970"><a href="/gostd/image/jpeg/reader.go.html#5103896">nComp</a></span>&nbsp;<span class="op" id="5115976">==</span>&nbsp;<span class="ident" id="5115979"><a href="/gostd/image/jpeg/reader.go.html#5101448">nGrayComponent</a></span>&nbsp;<span class="op" id="5115994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5115998">m</span>&nbsp;<span class="op" id="5116000">:=</span>&nbsp;<span class="ident" id="5116003"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116008">.</span><span class="ident" id="5116009"><a href="/gostd/image/image.go.html#5173939">NewGray</a></span><span class="op" id="5116016">(</span><span class="ident" id="5116017"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116022">.</span><span class="ident" id="5116023"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="5116027">(</span><span class="num" id="5116028">0</span><span class="op" id="5116029">,</span>&nbsp;<span class="num" id="5116031">0</span><span class="op" id="5116032">,</span>&nbsp;<span class="num" id="5116034">8</span><span class="op" id="5116035">*</span><span class="ident" id="5116036"><a href="/gostd/image/jpeg/scan.go.html#5115948">mxx</a></span><span class="op" id="5116039">,</span>&nbsp;<span class="num" id="5116041">8</span><span class="op" id="5116042">*</span><span class="ident" id="5116043"><a href="/gostd/image/jpeg/scan.go.html#5115953">myy</a></span><span class="op" id="5116046">)</span><span class="op" id="5116047">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116051"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5116052">.</span><span class="ident" id="5116053"><a href="/gostd/image/jpeg/reader.go.html#5103801">img1</a></span>&nbsp;<span class="op" id="5116058">=</span>&nbsp;<span class="ident" id="5116060"><a href="/gostd/image/jpeg/scan.go.html#5115998">m</a></span><span class="op" id="5116061">.</span><span class="ident" id="5116062"><a href="/gostd/image/image.go.html#5173346">SubImage</a></span><span class="op" id="5116070">(</span><span class="ident" id="5116071"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116076">.</span><span class="ident" id="5116077"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="5116081">(</span><span class="num" id="5116082">0</span><span class="op" id="5116083">,</span>&nbsp;<span class="num" id="5116085">0</span><span class="op" id="5116086">,</span>&nbsp;<span class="ident" id="5116088"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5116089">.</span><span class="ident" id="5116090"><a href="/gostd/image/jpeg/reader.go.html#5103782">width</a></span><span class="op" id="5116095">,</span>&nbsp;<span class="ident" id="5116097"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5116098">.</span><span class="ident" id="5116099"><a href="/gostd/image/jpeg/reader.go.html#5103789">height</a></span><span class="op" id="5116105">)</span><span class="op" id="5116106">)</span><span class="op" id="5116107">.</span><span class="op" id="5116108">(</span><span class="op" id="5116109">*</span><span class="ident" id="5116110"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116115">.</span><span class="ident" id="5116116"><a href="/gostd/image/image.go.html#5172029">Gray</a></span><span class="op" id="5116120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116124">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116135">var</span>&nbsp;<span class="ident" id="5116139">subsampleRatio</span>&nbsp;<span class="ident" id="5116154"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116159">.</span><span class="ident" id="5116160"><a href="/gostd/image/ycbcr.go.html#5180677">YCbCrSubsampleRatio</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116181">switch</span>&nbsp;<span class="op" id="5116188">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116191">case</span>&nbsp;<span class="ident" id="5116196"><a href="/gostd/image/jpeg/scan.go.html#5115940">h0</a></span>&nbsp;<span class="op" id="5116199">==</span>&nbsp;<span class="num" id="5116202">1</span>&nbsp;<span class="op" id="5116204">&amp;&amp;</span>&nbsp;<span class="ident" id="5116207"><a href="/gostd/image/jpeg/scan.go.html#5115944">v0</a></span>&nbsp;<span class="op" id="5116210">==</span>&nbsp;<span class="num" id="5116213">1</span><span class="op" id="5116214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116218"><a href="/gostd/image/jpeg/scan.go.html#5116139">subsampleRatio</a></span>&nbsp;<span class="op" id="5116233">=</span>&nbsp;<span class="ident" id="5116235"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116240">.</span><span class="ident" id="5116241"><a href="/gostd/image/ycbcr.go.html#5180711">YCbCrSubsampleRatio444</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116265">case</span>&nbsp;<span class="ident" id="5116270"><a href="/gostd/image/jpeg/scan.go.html#5115940">h0</a></span>&nbsp;<span class="op" id="5116273">==</span>&nbsp;<span class="num" id="5116276">1</span>&nbsp;<span class="op" id="5116278">&amp;&amp;</span>&nbsp;<span class="ident" id="5116281"><a href="/gostd/image/jpeg/scan.go.html#5115944">v0</a></span>&nbsp;<span class="op" id="5116284">==</span>&nbsp;<span class="num" id="5116287">2</span><span class="op" id="5116288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116292"><a href="/gostd/image/jpeg/scan.go.html#5116139">subsampleRatio</a></span>&nbsp;<span class="op" id="5116307">=</span>&nbsp;<span class="ident" id="5116309"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116314">.</span><span class="ident" id="5116315"><a href="/gostd/image/ycbcr.go.html#5180810">YCbCrSubsampleRatio440</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116339">case</span>&nbsp;<span class="ident" id="5116344"><a href="/gostd/image/jpeg/scan.go.html#5115940">h0</a></span>&nbsp;<span class="op" id="5116347">==</span>&nbsp;<span class="num" id="5116350">2</span>&nbsp;<span class="op" id="5116352">&amp;&amp;</span>&nbsp;<span class="ident" id="5116355"><a href="/gostd/image/jpeg/scan.go.html#5115944">v0</a></span>&nbsp;<span class="op" id="5116358">==</span>&nbsp;<span class="num" id="5116361">1</span><span class="op" id="5116362">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116366"><a href="/gostd/image/jpeg/scan.go.html#5116139">subsampleRatio</a></span>&nbsp;<span class="op" id="5116381">=</span>&nbsp;<span class="ident" id="5116383"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116388">.</span><span class="ident" id="5116389"><a href="/gostd/image/ycbcr.go.html#5180762">YCbCrSubsampleRatio422</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116413">case</span>&nbsp;<span class="ident" id="5116418"><a href="/gostd/image/jpeg/scan.go.html#5115940">h0</a></span>&nbsp;<span class="op" id="5116421">==</span>&nbsp;<span class="num" id="5116424">2</span>&nbsp;<span class="op" id="5116426">&amp;&amp;</span>&nbsp;<span class="ident" id="5116429"><a href="/gostd/image/jpeg/scan.go.html#5115944">v0</a></span>&nbsp;<span class="op" id="5116432">==</span>&nbsp;<span class="num" id="5116435">2</span><span class="op" id="5116436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116440"><a href="/gostd/image/jpeg/scan.go.html#5116139">subsampleRatio</a></span>&nbsp;<span class="op" id="5116455">=</span>&nbsp;<span class="ident" id="5116457"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116462">.</span><span class="ident" id="5116463"><a href="/gostd/image/ycbcr.go.html#5180786">YCbCrSubsampleRatio420</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116487">default</span><span class="op" id="5116494">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5116498">panic</span><span class="op" id="5116503">(</span><span class="string" id="5116504">&#34;unreachable&#34;</span><span class="op" id="5116517">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116523">m</span>&nbsp;<span class="op" id="5116525">:=</span>&nbsp;<span class="ident" id="5116528"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116533">.</span><span class="ident" id="5116534"><a href="/gostd/image/ycbcr.go.html#5184142">NewYCbCr</a></span><span class="op" id="5116542">(</span><span class="ident" id="5116543"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116548">.</span><span class="ident" id="5116549"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="5116553">(</span><span class="num" id="5116554">0</span><span class="op" id="5116555">,</span>&nbsp;<span class="num" id="5116557">0</span><span class="op" id="5116558">,</span>&nbsp;<span class="num" id="5116560">8</span><span class="op" id="5116561">*</span><span class="ident" id="5116562"><a href="/gostd/image/jpeg/scan.go.html#5115940">h0</a></span><span class="op" id="5116564">*</span><span class="ident" id="5116565"><a href="/gostd/image/jpeg/scan.go.html#5115948">mxx</a></span><span class="op" id="5116568">,</span>&nbsp;<span class="num" id="5116570">8</span><span class="op" id="5116571">*</span><span class="ident" id="5116572"><a href="/gostd/image/jpeg/scan.go.html#5115944">v0</a></span><span class="op" id="5116574">*</span><span class="ident" id="5116575"><a href="/gostd/image/jpeg/scan.go.html#5115953">myy</a></span><span class="op" id="5116578">)</span><span class="op" id="5116579">,</span>&nbsp;<span class="ident" id="5116581"><a href="/gostd/image/jpeg/scan.go.html#5116139">subsampleRatio</a></span><span class="op" id="5116595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116598"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5116599">.</span><span class="ident" id="5116600"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span>&nbsp;<span class="op" id="5116605">=</span>&nbsp;<span class="ident" id="5116607"><a href="/gostd/image/jpeg/scan.go.html#5116523">m</a></span><span class="op" id="5116608">.</span><span class="ident" id="5116609"><a href="/gostd/image/ycbcr.go.html#5183376">SubImage</a></span><span class="op" id="5116617">(</span><span class="ident" id="5116618"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116623">.</span><span class="ident" id="5116624"><a href="/gostd/image/geom.go.html#5153452">Rect</a></span><span class="op" id="5116628">(</span><span class="num" id="5116629">0</span><span class="op" id="5116630">,</span>&nbsp;<span class="num" id="5116632">0</span><span class="op" id="5116633">,</span>&nbsp;<span class="ident" id="5116635"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5116636">.</span><span class="ident" id="5116637"><a href="/gostd/image/jpeg/reader.go.html#5103782">width</a></span><span class="op" id="5116642">,</span>&nbsp;<span class="ident" id="5116644"><a href="/gostd/image/jpeg/scan.go.html#5115920">d</a></span><span class="op" id="5116645">.</span><span class="ident" id="5116646"><a href="/gostd/image/jpeg/reader.go.html#5103789">height</a></span><span class="op" id="5116652">)</span><span class="op" id="5116653">)</span><span class="op" id="5116654">.</span><span class="op" id="5116655">(</span><span class="op" id="5116656">*</span><span class="ident" id="5116657"><a href="/gostd/image/jpeg/scan.go.html#5115843">image</a></span><span class="op" id="5116662">.</span><span class="ident" id="5116663"><a href="/gostd/image/ycbcr.go.html#5181913">YCbCr</a></span><span class="op" id="5116668">)</span><br>
<span class="lineno"></span><span class="op" id="5116670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5116673">//&nbsp;Specified&nbsp;in&nbsp;section&nbsp;B.2.3.</span><br>
<span class="lineno"></span><span class="keyword" id="5116704">func</span>&nbsp;<span class="op" id="5116709">(</span><span class="ident" id="5116710">d</span>&nbsp;<span class="op" id="5116712">*</span><span class="ident" id="5116713"><a href="/gostd/image/jpeg/reader.go.html#5103264">decoder</a></span><span class="op" id="5116720">)</span>&nbsp;<span class="ident" id="5116722">processSOS</span><span class="op" id="5116732">(</span><span class="ident" id="5116733">n</span>&nbsp;<span class="builtintype" id="5116735">int</span><span class="op" id="5116738">)</span>&nbsp;<span class="builtintype" id="5116740">error</span>&nbsp;<span class="op" id="5116746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116749">if</span>&nbsp;<span class="ident" id="5116752"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5116753">.</span><span class="ident" id="5116754"><a href="/gostd/image/jpeg/reader.go.html#5103896">nComp</a></span>&nbsp;<span class="op" id="5116760">==</span>&nbsp;<span class="num" id="5116763">0</span>&nbsp;<span class="op" id="5116765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116769">return</span>&nbsp;<span class="ident" id="5116776"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5116787">(</span><span class="string" id="5116788">&#34;missing&nbsp;SOF&nbsp;marker&#34;</span><span class="op" id="5116808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116811">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116814">if</span>&nbsp;<span class="ident" id="5116817"><a href="/gostd/image/jpeg/scan.go.html#5116733">n</a></span>&nbsp;<span class="op" id="5116819">&lt;</span>&nbsp;<span class="num" id="5116821">6</span>&nbsp;<span class="op" id="5116823">||</span>&nbsp;<span class="num" id="5116826">4</span><span class="op" id="5116827">+</span><span class="num" id="5116828">2</span><span class="op" id="5116829">*</span><span class="ident" id="5116830"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5116831">.</span><span class="ident" id="5116832"><a href="/gostd/image/jpeg/reader.go.html#5103896">nComp</a></span>&nbsp;<span class="op" id="5116838">&lt;</span>&nbsp;<span class="ident" id="5116840"><a href="/gostd/image/jpeg/scan.go.html#5116733">n</a></span>&nbsp;<span class="op" id="5116842">||</span>&nbsp;<span class="ident" id="5116845"><a href="/gostd/image/jpeg/scan.go.html#5116733">n</a></span><span class="op" id="5116846">%</span><span class="num" id="5116847">2</span>&nbsp;<span class="op" id="5116849">!=</span>&nbsp;<span class="num" id="5116852">0</span>&nbsp;<span class="op" id="5116854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116858">return</span>&nbsp;<span class="ident" id="5116865"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5116876">(</span><span class="string" id="5116877">&#34;SOS&nbsp;has&nbsp;wrong&nbsp;length&#34;</span><span class="op" id="5116899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116905">if</span>&nbsp;<span class="ident" id="5116908">err</span>&nbsp;<span class="op" id="5116912">:=</span>&nbsp;<span class="ident" id="5116915"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5116916">.</span><span class="ident" id="5116917"><a href="/gostd/image/jpeg/reader.go.html#5107021">readFull</a></span><span class="op" id="5116925">(</span><span class="ident" id="5116926"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5116927">.</span><span class="ident" id="5116928"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5116931">[</span><span class="op" id="5116932">:</span><span class="ident" id="5116933"><a href="/gostd/image/jpeg/scan.go.html#5116733">n</a></span><span class="op" id="5116934">]</span><span class="op" id="5116935">)</span><span class="op" id="5116936">;</span>&nbsp;<span class="ident" id="5116938"><a href="/gostd/image/jpeg/scan.go.html#5116908">err</a></span>&nbsp;<span class="op" id="5116942">!=</span>&nbsp;<span class="builtintype" id="5116945">nil</span>&nbsp;<span class="op" id="5116949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116953">return</span>&nbsp;<span class="ident" id="5116960"><a href="/gostd/image/jpeg/scan.go.html#5116908">err</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116968">nComp</span>&nbsp;<span class="op" id="5116974">:=</span>&nbsp;<span class="builtintype" id="5116977">int</span><span class="op" id="5116980">(</span><span class="ident" id="5116981"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5116982">.</span><span class="ident" id="5116983"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5116986">[</span><span class="num" id="5116987">0</span><span class="op" id="5116988">]</span><span class="op" id="5116989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116992">if</span>&nbsp;<span class="ident" id="5116995"><a href="/gostd/image/jpeg/scan.go.html#5116733">n</a></span>&nbsp;<span class="op" id="5116997">!=</span>&nbsp;<span class="num" id="5117000">4</span><span class="op" id="5117001">+</span><span class="num" id="5117002">2</span><span class="op" id="5117003">*</span><span class="ident" id="5117004"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span>&nbsp;<span class="op" id="5117010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117014">return</span>&nbsp;<span class="ident" id="5117021"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5117032">(</span><span class="string" id="5117033">&#34;SOS&nbsp;length&nbsp;inconsistent&nbsp;with&nbsp;number&nbsp;of&nbsp;components&#34;</span><span class="op" id="5117084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117087">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117090">var</span>&nbsp;<span class="ident" id="5117094">scan</span>&nbsp;<span class="op" id="5117099">[</span><span class="ident" id="5117100"><a href="/gostd/image/jpeg/reader.go.html#5101520">nColorComponent</a></span><span class="op" id="5117115">]</span><span class="keyword" id="5117116">struct</span>&nbsp;<span class="op" id="5117123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117127">compIndex</span>&nbsp;<span class="builtintype" id="5117137">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117145">td</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5117155">uint8</span>&nbsp;<span class="comment" id="5117161">//&nbsp;DC&nbsp;table&nbsp;selector.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117185">ta</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5117195">uint8</span>&nbsp;<span class="comment" id="5117201">//&nbsp;AC&nbsp;table&nbsp;selector.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117224">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117227">for</span>&nbsp;<span class="ident" id="5117231">i</span>&nbsp;<span class="op" id="5117233">:=</span>&nbsp;<span class="num" id="5117236">0</span><span class="op" id="5117237">;</span>&nbsp;<span class="ident" id="5117239"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span>&nbsp;<span class="op" id="5117241">&lt;</span>&nbsp;<span class="ident" id="5117243"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5117248">;</span>&nbsp;<span class="ident" id="5117250"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117251">++</span>&nbsp;<span class="op" id="5117254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117258">cs</span>&nbsp;<span class="op" id="5117261">:=</span>&nbsp;<span class="ident" id="5117264"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5117265">.</span><span class="ident" id="5117266"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5117269">[</span><span class="num" id="5117270">1</span><span class="op" id="5117271">+</span><span class="num" id="5117272">2</span><span class="op" id="5117273">*</span><span class="ident" id="5117274"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117275">]</span>&nbsp;<span class="comment" id="5117277">//&nbsp;Component&nbsp;selector.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117302">compIndex</span>&nbsp;<span class="op" id="5117312">:=</span>&nbsp;<span class="op" id="5117315">-</span><span class="num" id="5117316">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117320">for</span>&nbsp;<span class="ident" id="5117324">j</span><span class="op" id="5117325">,</span>&nbsp;<span class="ident" id="5117327">comp</span>&nbsp;<span class="op" id="5117332">:=</span>&nbsp;<span class="keyword" id="5117335">range</span>&nbsp;<span class="ident" id="5117341"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5117342">.</span><span class="ident" id="5117343"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span>&nbsp;<span class="op" id="5117348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117353">if</span>&nbsp;<span class="ident" id="5117356"><a href="/gostd/image/jpeg/scan.go.html#5117258">cs</a></span>&nbsp;<span class="op" id="5117359">==</span>&nbsp;<span class="ident" id="5117362"><a href="/gostd/image/jpeg/scan.go.html#5117327">comp</a></span><span class="op" id="5117366">.</span><span class="ident" id="5117367"><a href="/gostd/image/jpeg/reader.go.html#5101231">c</a></span>&nbsp;<span class="op" id="5117369">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117375"><a href="/gostd/image/jpeg/scan.go.html#5117302">compIndex</a></span>&nbsp;<span class="op" id="5117385">=</span>&nbsp;<span class="ident" id="5117387"><a href="/gostd/image/jpeg/scan.go.html#5117324">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117400">if</span>&nbsp;<span class="ident" id="5117403"><a href="/gostd/image/jpeg/scan.go.html#5117302">compIndex</a></span>&nbsp;<span class="op" id="5117413">&lt;</span>&nbsp;<span class="num" id="5117415">0</span>&nbsp;<span class="op" id="5117417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117422">return</span>&nbsp;<span class="ident" id="5117429"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5117440">(</span><span class="string" id="5117441">&#34;unknown&nbsp;component&nbsp;selector&#34;</span><span class="op" id="5117469">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117477"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5117481">[</span><span class="ident" id="5117482"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117483">]</span><span class="op" id="5117484">.</span><span class="ident" id="5117485"><a href="/gostd/image/jpeg/scan.go.html#5117127">compIndex</a></span>&nbsp;<span class="op" id="5117495">=</span>&nbsp;<span class="builtintype" id="5117497">uint8</span><span class="op" id="5117502">(</span><span class="ident" id="5117503"><a href="/gostd/image/jpeg/scan.go.html#5117302">compIndex</a></span><span class="op" id="5117512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117516"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5117520">[</span><span class="ident" id="5117521"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117522">]</span><span class="op" id="5117523">.</span><span class="ident" id="5117524"><a href="/gostd/image/jpeg/scan.go.html#5117145">td</a></span>&nbsp;<span class="op" id="5117527">=</span>&nbsp;<span class="ident" id="5117529"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5117530">.</span><span class="ident" id="5117531"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5117534">[</span><span class="num" id="5117535">2</span><span class="op" id="5117536">+</span><span class="num" id="5117537">2</span><span class="op" id="5117538">*</span><span class="ident" id="5117539"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117540">]</span>&nbsp;<span class="op" id="5117542">&gt;&gt;</span>&nbsp;<span class="num" id="5117545">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117549">if</span>&nbsp;<span class="ident" id="5117552"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5117556">[</span><span class="ident" id="5117557"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117558">]</span><span class="op" id="5117559">.</span><span class="ident" id="5117560"><a href="/gostd/image/jpeg/scan.go.html#5117145">td</a></span>&nbsp;<span class="op" id="5117563">&gt;</span>&nbsp;<span class="ident" id="5117565"><a href="/gostd/image/jpeg/reader.go.html#5101370">maxTh</a></span>&nbsp;<span class="op" id="5117571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117576">return</span>&nbsp;<span class="ident" id="5117583"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5117594">(</span><span class="string" id="5117595">&#34;bad&nbsp;Td&nbsp;value&#34;</span><span class="op" id="5117609">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117617"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5117621">[</span><span class="ident" id="5117622"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117623">]</span><span class="op" id="5117624">.</span><span class="ident" id="5117625"><a href="/gostd/image/jpeg/scan.go.html#5117185">ta</a></span>&nbsp;<span class="op" id="5117628">=</span>&nbsp;<span class="ident" id="5117630"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5117631">.</span><span class="ident" id="5117632"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5117635">[</span><span class="num" id="5117636">2</span><span class="op" id="5117637">+</span><span class="num" id="5117638">2</span><span class="op" id="5117639">*</span><span class="ident" id="5117640"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117641">]</span>&nbsp;<span class="op" id="5117643">&amp;</span>&nbsp;<span class="num" id="5117645">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117652">if</span>&nbsp;<span class="ident" id="5117655"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5117659">[</span><span class="ident" id="5117660"><a href="/gostd/image/jpeg/scan.go.html#5117231">i</a></span><span class="op" id="5117661">]</span><span class="op" id="5117662">.</span><span class="ident" id="5117663"><a href="/gostd/image/jpeg/scan.go.html#5117185">ta</a></span>&nbsp;<span class="op" id="5117666">&gt;</span>&nbsp;<span class="ident" id="5117668"><a href="/gostd/image/jpeg/reader.go.html#5101370">maxTh</a></span>&nbsp;<span class="op" id="5117674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117679">return</span>&nbsp;<span class="ident" id="5117686"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5117697">(</span><span class="string" id="5117698">&#34;bad&nbsp;Ta&nbsp;value&#34;</span><span class="op" id="5117712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117716">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117723">//&nbsp;zigStart&nbsp;and&nbsp;zigEnd&nbsp;are&nbsp;the&nbsp;spectral&nbsp;selection&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117782">//&nbsp;ah&nbsp;and&nbsp;al&nbsp;are&nbsp;the&nbsp;successive&nbsp;approximation&nbsp;high&nbsp;and&nbsp;low&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117850">//&nbsp;The&nbsp;spec&nbsp;calls&nbsp;these&nbsp;values&nbsp;Ss,&nbsp;Se,&nbsp;Ah&nbsp;and&nbsp;Al.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117901">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117905">//&nbsp;For&nbsp;progressive&nbsp;JPEGs,&nbsp;these&nbsp;are&nbsp;the&nbsp;two&nbsp;more-or-less&nbsp;independent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117975">//&nbsp;aspects&nbsp;of&nbsp;progression.&nbsp;Spectral&nbsp;selection&nbsp;progression&nbsp;is&nbsp;when&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118046">//&nbsp;all&nbsp;of&nbsp;a&nbsp;block&#39;s&nbsp;64&nbsp;DCT&nbsp;coefficients&nbsp;are&nbsp;transmitted&nbsp;in&nbsp;one&nbsp;pass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118116">//&nbsp;For&nbsp;example,&nbsp;three&nbsp;passes&nbsp;could&nbsp;transmit&nbsp;coefficient&nbsp;0&nbsp;(the&nbsp;DC</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118183">//&nbsp;component),&nbsp;coefficients&nbsp;1-5,&nbsp;and&nbsp;coefficients&nbsp;6-63,&nbsp;in&nbsp;zig-zag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118251">//&nbsp;order.&nbsp;Successive&nbsp;approximation&nbsp;is&nbsp;when&nbsp;not&nbsp;all&nbsp;of&nbsp;the&nbsp;bits&nbsp;of&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118320">//&nbsp;band&nbsp;of&nbsp;coefficients&nbsp;are&nbsp;transmitted&nbsp;in&nbsp;one&nbsp;pass.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118387">//&nbsp;three&nbsp;passes&nbsp;could&nbsp;transmit&nbsp;the&nbsp;6&nbsp;most&nbsp;significant&nbsp;bits,&nbsp;followed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118457">//&nbsp;by&nbsp;the&nbsp;second-least&nbsp;significant&nbsp;bit,&nbsp;followed&nbsp;by&nbsp;the&nbsp;least</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118520">//&nbsp;significant&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118541">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118545">//&nbsp;For&nbsp;baseline&nbsp;JPEGs,&nbsp;these&nbsp;parameters&nbsp;are&nbsp;hard-coded&nbsp;to&nbsp;0/63/0/0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118614">zigStart</span><span class="op" id="5118622">,</span>&nbsp;<span class="ident" id="5118624">zigEnd</span><span class="op" id="5118630">,</span>&nbsp;<span class="ident" id="5118632">ah</span><span class="op" id="5118634">,</span>&nbsp;<span class="ident" id="5118636">al</span>&nbsp;<span class="op" id="5118639">:=</span>&nbsp;<span class="builtintype" id="5118642">int32</span><span class="op" id="5118647">(</span><span class="num" id="5118648">0</span><span class="op" id="5118649">)</span><span class="op" id="5118650">,</span>&nbsp;<span class="builtintype" id="5118652">int32</span><span class="op" id="5118657">(</span><span class="ident" id="5118658"><a href="/gostd/image/jpeg/idct.go.html#5096665">blockSize</a></span><span class="op" id="5118667">-</span><span class="num" id="5118668">1</span><span class="op" id="5118669">)</span><span class="op" id="5118670">,</span>&nbsp;<span class="builtintype" id="5118672">uint32</span><span class="op" id="5118678">(</span><span class="num" id="5118679">0</span><span class="op" id="5118680">)</span><span class="op" id="5118681">,</span>&nbsp;<span class="builtintype" id="5118683">uint32</span><span class="op" id="5118689">(</span><span class="num" id="5118690">0</span><span class="op" id="5118691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118694">if</span>&nbsp;<span class="ident" id="5118697"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5118698">.</span><span class="ident" id="5118699"><a href="/gostd/image/jpeg/reader.go.html#5103915">progressive</a></span>&nbsp;<span class="op" id="5118711">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118715"><a href="/gostd/image/jpeg/scan.go.html#5118614">zigStart</a></span>&nbsp;<span class="op" id="5118724">=</span>&nbsp;<span class="builtintype" id="5118726">int32</span><span class="op" id="5118731">(</span><span class="ident" id="5118732"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5118733">.</span><span class="ident" id="5118734"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5118737">[</span><span class="num" id="5118738">1</span><span class="op" id="5118739">+</span><span class="num" id="5118740">2</span><span class="op" id="5118741">*</span><span class="ident" id="5118742"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5118747">]</span><span class="op" id="5118748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118752"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5118759">=</span>&nbsp;<span class="builtintype" id="5118761">int32</span><span class="op" id="5118766">(</span><span class="ident" id="5118767"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5118768">.</span><span class="ident" id="5118769"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5118772">[</span><span class="num" id="5118773">2</span><span class="op" id="5118774">+</span><span class="num" id="5118775">2</span><span class="op" id="5118776">*</span><span class="ident" id="5118777"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5118782">]</span><span class="op" id="5118783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118787"><a href="/gostd/image/jpeg/scan.go.html#5118632">ah</a></span>&nbsp;<span class="op" id="5118790">=</span>&nbsp;<span class="builtintype" id="5118792">uint32</span><span class="op" id="5118798">(</span><span class="ident" id="5118799"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5118800">.</span><span class="ident" id="5118801"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5118804">[</span><span class="num" id="5118805">3</span><span class="op" id="5118806">+</span><span class="num" id="5118807">2</span><span class="op" id="5118808">*</span><span class="ident" id="5118809"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5118814">]</span>&nbsp;<span class="op" id="5118816">&gt;&gt;</span>&nbsp;<span class="num" id="5118819">4</span><span class="op" id="5118820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118824"><a href="/gostd/image/jpeg/scan.go.html#5118636">al</a></span>&nbsp;<span class="op" id="5118827">=</span>&nbsp;<span class="builtintype" id="5118829">uint32</span><span class="op" id="5118835">(</span><span class="ident" id="5118836"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5118837">.</span><span class="ident" id="5118838"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5118841">[</span><span class="num" id="5118842">3</span><span class="op" id="5118843">+</span><span class="num" id="5118844">2</span><span class="op" id="5118845">*</span><span class="ident" id="5118846"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5118851">]</span>&nbsp;<span class="op" id="5118853">&amp;</span>&nbsp;<span class="num" id="5118855">0x0f</span><span class="op" id="5118859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118863">if</span>&nbsp;<span class="op" id="5118866">(</span><span class="ident" id="5118867"><a href="/gostd/image/jpeg/scan.go.html#5118614">zigStart</a></span>&nbsp;<span class="op" id="5118876">==</span>&nbsp;<span class="num" id="5118879">0</span>&nbsp;<span class="op" id="5118881">&amp;&amp;</span>&nbsp;<span class="ident" id="5118884"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5118891">!=</span>&nbsp;<span class="num" id="5118894">0</span><span class="op" id="5118895">)</span>&nbsp;<span class="op" id="5118897">||</span>&nbsp;<span class="ident" id="5118900"><a href="/gostd/image/jpeg/scan.go.html#5118614">zigStart</a></span>&nbsp;<span class="op" id="5118909">&gt;</span>&nbsp;<span class="ident" id="5118911"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5118918">||</span>&nbsp;<span class="ident" id="5118921"><a href="/gostd/image/jpeg/idct.go.html#5096665">blockSize</a></span>&nbsp;<span class="op" id="5118931">&lt;=</span>&nbsp;<span class="ident" id="5118934"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5118941">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118946">return</span>&nbsp;<span class="ident" id="5118953"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5118964">(</span><span class="string" id="5118965">&#34;bad&nbsp;spectral&nbsp;selection&nbsp;bounds&#34;</span><span class="op" id="5118996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119004">if</span>&nbsp;<span class="ident" id="5119007"><a href="/gostd/image/jpeg/scan.go.html#5118614">zigStart</a></span>&nbsp;<span class="op" id="5119016">!=</span>&nbsp;<span class="num" id="5119019">0</span>&nbsp;<span class="op" id="5119021">&amp;&amp;</span>&nbsp;<span class="ident" id="5119024"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span>&nbsp;<span class="op" id="5119030">!=</span>&nbsp;<span class="num" id="5119033">1</span>&nbsp;<span class="op" id="5119035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119040">return</span>&nbsp;<span class="ident" id="5119047"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5119058">(</span><span class="string" id="5119059">&#34;progressive&nbsp;AC&nbsp;coefficients&nbsp;for&nbsp;more&nbsp;than&nbsp;one&nbsp;component&#34;</span><span class="op" id="5119116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119120">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119124">if</span>&nbsp;<span class="ident" id="5119127"><a href="/gostd/image/jpeg/scan.go.html#5118632">ah</a></span>&nbsp;<span class="op" id="5119130">!=</span>&nbsp;<span class="num" id="5119133">0</span>&nbsp;<span class="op" id="5119135">&amp;&amp;</span>&nbsp;<span class="ident" id="5119138"><a href="/gostd/image/jpeg/scan.go.html#5118632">ah</a></span>&nbsp;<span class="op" id="5119141">!=</span>&nbsp;<span class="ident" id="5119144"><a href="/gostd/image/jpeg/scan.go.html#5118636">al</a></span><span class="op" id="5119146">+</span><span class="num" id="5119147">1</span>&nbsp;<span class="op" id="5119149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119154">return</span>&nbsp;<span class="ident" id="5119161"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5119172">(</span><span class="string" id="5119173">&#34;bad&nbsp;successive&nbsp;approximation&nbsp;values&#34;</span><span class="op" id="5119210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119221">//&nbsp;mxx&nbsp;and&nbsp;myy&nbsp;are&nbsp;the&nbsp;number&nbsp;of&nbsp;MCUs&nbsp;(Minimum&nbsp;Coded&nbsp;Units)&nbsp;in&nbsp;the&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119296">h0</span><span class="op" id="5119298">,</span>&nbsp;<span class="ident" id="5119300">v0</span>&nbsp;<span class="op" id="5119303">:=</span>&nbsp;<span class="ident" id="5119306"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119307">.</span><span class="ident" id="5119308"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5119312">[</span><span class="num" id="5119313">0</span><span class="op" id="5119314">]</span><span class="op" id="5119315">.</span><span class="ident" id="5119316"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><span class="op" id="5119317">,</span>&nbsp;<span class="ident" id="5119319"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119320">.</span><span class="ident" id="5119321"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5119325">[</span><span class="num" id="5119326">0</span><span class="op" id="5119327">]</span><span class="op" id="5119328">.</span><span class="ident" id="5119329"><a href="/gostd/image/jpeg/reader.go.html#5101192">v</a></span>&nbsp;<span class="comment" id="5119331">//&nbsp;The&nbsp;h&nbsp;and&nbsp;v&nbsp;values&nbsp;from&nbsp;the&nbsp;Y&nbsp;components.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119377">mxx</span>&nbsp;<span class="op" id="5119381">:=</span>&nbsp;<span class="op" id="5119384">(</span><span class="ident" id="5119385"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119386">.</span><span class="ident" id="5119387"><a href="/gostd/image/jpeg/reader.go.html#5103782">width</a></span>&nbsp;<span class="op" id="5119393">+</span>&nbsp;<span class="num" id="5119395">8</span><span class="op" id="5119396">*</span><span class="ident" id="5119397"><a href="/gostd/image/jpeg/scan.go.html#5119296">h0</a></span>&nbsp;<span class="op" id="5119400">-</span>&nbsp;<span class="num" id="5119402">1</span><span class="op" id="5119403">)</span>&nbsp;<span class="op" id="5119405">/</span>&nbsp;<span class="op" id="5119407">(</span><span class="num" id="5119408">8</span>&nbsp;<span class="op" id="5119410">*</span>&nbsp;<span class="ident" id="5119412"><a href="/gostd/image/jpeg/scan.go.html#5119296">h0</a></span><span class="op" id="5119414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119417">myy</span>&nbsp;<span class="op" id="5119421">:=</span>&nbsp;<span class="op" id="5119424">(</span><span class="ident" id="5119425"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119426">.</span><span class="ident" id="5119427"><a href="/gostd/image/jpeg/reader.go.html#5103789">height</a></span>&nbsp;<span class="op" id="5119434">+</span>&nbsp;<span class="num" id="5119436">8</span><span class="op" id="5119437">*</span><span class="ident" id="5119438"><a href="/gostd/image/jpeg/scan.go.html#5119300">v0</a></span>&nbsp;<span class="op" id="5119441">-</span>&nbsp;<span class="num" id="5119443">1</span><span class="op" id="5119444">)</span>&nbsp;<span class="op" id="5119446">/</span>&nbsp;<span class="op" id="5119448">(</span><span class="num" id="5119449">8</span>&nbsp;<span class="op" id="5119451">*</span>&nbsp;<span class="ident" id="5119453"><a href="/gostd/image/jpeg/scan.go.html#5119300">v0</a></span><span class="op" id="5119455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119458">if</span>&nbsp;<span class="ident" id="5119461"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119462">.</span><span class="ident" id="5119463"><a href="/gostd/image/jpeg/reader.go.html#5103801">img1</a></span>&nbsp;<span class="op" id="5119468">==</span>&nbsp;<span class="builtintype" id="5119471">nil</span>&nbsp;<span class="op" id="5119475">&amp;&amp;</span>&nbsp;<span class="ident" id="5119478"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119479">.</span><span class="ident" id="5119480"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span>&nbsp;<span class="op" id="5119485">==</span>&nbsp;<span class="builtintype" id="5119488">nil</span>&nbsp;<span class="op" id="5119492">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119496"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119497">.</span><span class="ident" id="5119498"><a href="/gostd/image/jpeg/scan.go.html#5115932">makeImg</a></span><span class="op" id="5119505">(</span><span class="ident" id="5119506"><a href="/gostd/image/jpeg/scan.go.html#5119296">h0</a></span><span class="op" id="5119508">,</span>&nbsp;<span class="ident" id="5119510"><a href="/gostd/image/jpeg/scan.go.html#5119300">v0</a></span><span class="op" id="5119512">,</span>&nbsp;<span class="ident" id="5119514"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span><span class="op" id="5119517">,</span>&nbsp;<span class="ident" id="5119519"><a href="/gostd/image/jpeg/scan.go.html#5119417">myy</a></span><span class="op" id="5119522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119528">if</span>&nbsp;<span class="ident" id="5119531"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119532">.</span><span class="ident" id="5119533"><a href="/gostd/image/jpeg/reader.go.html#5103915">progressive</a></span>&nbsp;<span class="op" id="5119545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119549">for</span>&nbsp;<span class="ident" id="5119553">i</span>&nbsp;<span class="op" id="5119555">:=</span>&nbsp;<span class="num" id="5119558">0</span><span class="op" id="5119559">;</span>&nbsp;<span class="ident" id="5119561"><a href="/gostd/image/jpeg/scan.go.html#5119553">i</a></span>&nbsp;<span class="op" id="5119563">&lt;</span>&nbsp;<span class="ident" id="5119565"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5119570">;</span>&nbsp;<span class="ident" id="5119572"><a href="/gostd/image/jpeg/scan.go.html#5119553">i</a></span><span class="op" id="5119573">++</span>&nbsp;<span class="op" id="5119576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119581">compIndex</span>&nbsp;<span class="op" id="5119591">:=</span>&nbsp;<span class="ident" id="5119594"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5119598">[</span><span class="ident" id="5119599"><a href="/gostd/image/jpeg/scan.go.html#5119553">i</a></span><span class="op" id="5119600">]</span><span class="op" id="5119601">.</span><span class="ident" id="5119602"><a href="/gostd/image/jpeg/scan.go.html#5117127">compIndex</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119615">if</span>&nbsp;<span class="ident" id="5119618"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119619">.</span><span class="ident" id="5119620"><a href="/gostd/image/jpeg/reader.go.html#5104049">progCoeffs</a></span><span class="op" id="5119630">[</span><span class="ident" id="5119631"><a href="/gostd/image/jpeg/scan.go.html#5119581">compIndex</a></span><span class="op" id="5119640">]</span>&nbsp;<span class="op" id="5119642">==</span>&nbsp;<span class="builtintype" id="5119645">nil</span>&nbsp;<span class="op" id="5119649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119655"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119656">.</span><span class="ident" id="5119657"><a href="/gostd/image/jpeg/reader.go.html#5104049">progCoeffs</a></span><span class="op" id="5119667">[</span><span class="ident" id="5119668"><a href="/gostd/image/jpeg/scan.go.html#5119581">compIndex</a></span><span class="op" id="5119677">]</span>&nbsp;<span class="op" id="5119679">=</span>&nbsp;<span class="builtinfunc" id="5119681">make</span><span class="op" id="5119685">(</span><span class="op" id="5119686">[</span><span class="op" id="5119687">]</span><span class="ident" id="5119688"><a href="/gostd/image/jpeg/idct.go.html#5096709">block</a></span><span class="op" id="5119693">,</span>&nbsp;<span class="ident" id="5119695"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span><span class="op" id="5119698">*</span><span class="ident" id="5119699"><a href="/gostd/image/jpeg/scan.go.html#5119417">myy</a></span><span class="op" id="5119702">*</span><span class="ident" id="5119703"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119704">.</span><span class="ident" id="5119705"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5119709">[</span><span class="ident" id="5119710"><a href="/gostd/image/jpeg/scan.go.html#5119581">compIndex</a></span><span class="op" id="5119719">]</span><span class="op" id="5119720">.</span><span class="ident" id="5119721"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><span class="op" id="5119722">*</span><span class="ident" id="5119723"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119724">.</span><span class="ident" id="5119725"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5119729">[</span><span class="ident" id="5119730"><a href="/gostd/image/jpeg/scan.go.html#5119581">compIndex</a></span><span class="op" id="5119739">]</span><span class="op" id="5119740">.</span><span class="ident" id="5119741"><a href="/gostd/image/jpeg/reader.go.html#5101192">v</a></span><span class="op" id="5119742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5119754">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119758"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5119759">.</span><span class="ident" id="5119760"><a href="/gostd/image/jpeg/reader.go.html#5103298">bits</a></span>&nbsp;<span class="op" id="5119765">=</span>&nbsp;<span class="ident" id="5119767"><a href="/gostd/image/jpeg/reader.go.html#5103109">bits</a></span><span class="op" id="5119771">{</span><span class="op" id="5119772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119775">mcu</span><span class="op" id="5119778">,</span>&nbsp;<span class="ident" id="5119780">expectedRST</span>&nbsp;<span class="op" id="5119792">:=</span>&nbsp;<span class="num" id="5119795">0</span><span class="op" id="5119796">,</span>&nbsp;<span class="builtintype" id="5119798">uint8</span><span class="op" id="5119803">(</span><span class="ident" id="5119804"><a href="/gostd/image/jpeg/reader.go.html#5102128">rst0Marker</a></span><span class="op" id="5119814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5119817">var</span>&nbsp;<span class="op" id="5119821">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119825">//&nbsp;b&nbsp;is&nbsp;the&nbsp;decoded&nbsp;coefficients,&nbsp;in&nbsp;natural&nbsp;(not&nbsp;zig-zag)&nbsp;order.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119893">b</span>&nbsp;&nbsp;<span class="ident" id="5119896"><a href="/gostd/image/jpeg/idct.go.html#5096709">block</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119904">dc</span>&nbsp;<span class="op" id="5119907">[</span><span class="ident" id="5119908"><a href="/gostd/image/jpeg/reader.go.html#5101520">nColorComponent</a></span><span class="op" id="5119923">]</span><span class="builtintype" id="5119924">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119932">//&nbsp;bx&nbsp;and&nbsp;by&nbsp;are&nbsp;the&nbsp;location&nbsp;of&nbsp;the&nbsp;current&nbsp;(in&nbsp;terms&nbsp;of&nbsp;8x8&nbsp;blocks).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120005">//&nbsp;For&nbsp;example,&nbsp;with&nbsp;4:2:0&nbsp;chroma&nbsp;subsampling,&nbsp;the&nbsp;block&nbsp;whose&nbsp;top&nbsp;left</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120079">//&nbsp;pixel&nbsp;co-ordinates&nbsp;are&nbsp;(16,&nbsp;8)&nbsp;is&nbsp;the&nbsp;third&nbsp;block&nbsp;in&nbsp;the&nbsp;first&nbsp;row:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120152">//&nbsp;bx&nbsp;is&nbsp;2&nbsp;and&nbsp;by&nbsp;is&nbsp;0,&nbsp;even&nbsp;though&nbsp;the&nbsp;pixel&nbsp;is&nbsp;in&nbsp;the&nbsp;second&nbsp;MCU.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120222">bx</span><span class="op" id="5120224">,</span>&nbsp;<span class="ident" id="5120226">by</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5120233">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120239">blockCount</span>&nbsp;<span class="builtintype" id="5120250">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5120255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120258">for</span>&nbsp;<span class="ident" id="5120262">my</span>&nbsp;<span class="op" id="5120265">:=</span>&nbsp;<span class="num" id="5120268">0</span><span class="op" id="5120269">;</span>&nbsp;<span class="ident" id="5120271"><a href="/gostd/image/jpeg/scan.go.html#5120262">my</a></span>&nbsp;<span class="op" id="5120274">&lt;</span>&nbsp;<span class="ident" id="5120276"><a href="/gostd/image/jpeg/scan.go.html#5119417">myy</a></span><span class="op" id="5120279">;</span>&nbsp;<span class="ident" id="5120281"><a href="/gostd/image/jpeg/scan.go.html#5120262">my</a></span><span class="op" id="5120283">++</span>&nbsp;<span class="op" id="5120286">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120290">for</span>&nbsp;<span class="ident" id="5120294">mx</span>&nbsp;<span class="op" id="5120297">:=</span>&nbsp;<span class="num" id="5120300">0</span><span class="op" id="5120301">;</span>&nbsp;<span class="ident" id="5120303"><a href="/gostd/image/jpeg/scan.go.html#5120294">mx</a></span>&nbsp;<span class="op" id="5120306">&lt;</span>&nbsp;<span class="ident" id="5120308"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span><span class="op" id="5120311">;</span>&nbsp;<span class="ident" id="5120313"><a href="/gostd/image/jpeg/scan.go.html#5120294">mx</a></span><span class="op" id="5120315">++</span>&nbsp;<span class="op" id="5120318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120323">for</span>&nbsp;<span class="ident" id="5120327">i</span>&nbsp;<span class="op" id="5120329">:=</span>&nbsp;<span class="num" id="5120332">0</span><span class="op" id="5120333">;</span>&nbsp;<span class="ident" id="5120335"><a href="/gostd/image/jpeg/scan.go.html#5120327">i</a></span>&nbsp;<span class="op" id="5120337">&lt;</span>&nbsp;<span class="ident" id="5120339"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span><span class="op" id="5120344">;</span>&nbsp;<span class="ident" id="5120346"><a href="/gostd/image/jpeg/scan.go.html#5120327">i</a></span><span class="op" id="5120347">++</span>&nbsp;<span class="op" id="5120350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120356">compIndex</span>&nbsp;<span class="op" id="5120366">:=</span>&nbsp;<span class="ident" id="5120369"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5120373">[</span><span class="ident" id="5120374"><a href="/gostd/image/jpeg/scan.go.html#5120327">i</a></span><span class="op" id="5120375">]</span><span class="op" id="5120376">.</span><span class="ident" id="5120377"><a href="/gostd/image/jpeg/scan.go.html#5117127">compIndex</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120391">qt</span>&nbsp;<span class="op" id="5120394">:=</span>&nbsp;<span class="op" id="5120397">&amp;</span><span class="ident" id="5120398"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5120399">.</span><span class="ident" id="5120400"><a href="/gostd/image/jpeg/reader.go.html#5104181">quant</a></span><span class="op" id="5120405">[</span><span class="ident" id="5120406"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5120407">.</span><span class="ident" id="5120408"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5120412">[</span><span class="ident" id="5120413"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5120422">]</span><span class="op" id="5120423">.</span><span class="ident" id="5120424"><a href="/gostd/image/jpeg/reader.go.html#5101266">tq</a></span><span class="op" id="5120426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120432">for</span>&nbsp;<span class="ident" id="5120436">j</span>&nbsp;<span class="op" id="5120438">:=</span>&nbsp;<span class="num" id="5120441">0</span><span class="op" id="5120442">;</span>&nbsp;<span class="ident" id="5120444"><a href="/gostd/image/jpeg/scan.go.html#5120436">j</a></span>&nbsp;<span class="op" id="5120446">&lt;</span>&nbsp;<span class="ident" id="5120448"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5120449">.</span><span class="ident" id="5120450"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5120454">[</span><span class="ident" id="5120455"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5120464">]</span><span class="op" id="5120465">.</span><span class="ident" id="5120466"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><span class="op" id="5120467">*</span><span class="ident" id="5120468"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5120469">.</span><span class="ident" id="5120470"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5120474">[</span><span class="ident" id="5120475"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5120484">]</span><span class="op" id="5120485">.</span><span class="ident" id="5120486"><a href="/gostd/image/jpeg/reader.go.html#5101192">v</a></span><span class="op" id="5120487">;</span>&nbsp;<span class="ident" id="5120489"><a href="/gostd/image/jpeg/scan.go.html#5120436">j</a></span><span class="op" id="5120490">++</span>&nbsp;<span class="op" id="5120493">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120500">//&nbsp;The&nbsp;blocks&nbsp;are&nbsp;traversed&nbsp;one&nbsp;MCU&nbsp;at&nbsp;a&nbsp;time.&nbsp;For&nbsp;4:2:0&nbsp;chroma</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120569">//&nbsp;subsampling,&nbsp;there&nbsp;are&nbsp;four&nbsp;Y&nbsp;8x8&nbsp;blocks&nbsp;in&nbsp;every&nbsp;16x16&nbsp;MCU.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120638">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120646">//&nbsp;For&nbsp;a&nbsp;baseline&nbsp;32x16&nbsp;pixel&nbsp;image,&nbsp;the&nbsp;Y&nbsp;blocks&nbsp;visiting&nbsp;order&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120720">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;1&nbsp;4&nbsp;5</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120736">//&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;3&nbsp;6&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120752">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120760">//&nbsp;For&nbsp;progressive&nbsp;images,&nbsp;the&nbsp;interleaved&nbsp;scans&nbsp;(those&nbsp;with&nbsp;nComp&nbsp;&gt;&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120837">//&nbsp;are&nbsp;traversed&nbsp;as&nbsp;above,&nbsp;but&nbsp;non-interleaved&nbsp;scans&nbsp;are&nbsp;traversed&nbsp;left</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120914">//&nbsp;to&nbsp;right,&nbsp;top&nbsp;to&nbsp;bottom:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120947">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;1&nbsp;2&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120963">//&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;5&nbsp;6&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120979">//&nbsp;Only&nbsp;DC&nbsp;scans&nbsp;(zigStart&nbsp;==&nbsp;0)&nbsp;can&nbsp;be&nbsp;interleaved.&nbsp;AC&nbsp;scans&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121056">//&nbsp;only&nbsp;one&nbsp;component.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121084">//</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121092">//&nbsp;To&nbsp;further&nbsp;complicate&nbsp;matters,&nbsp;for&nbsp;non-interleaved&nbsp;scans,&nbsp;there&nbsp;is&nbsp;no</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121170">//&nbsp;data&nbsp;for&nbsp;any&nbsp;blocks&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;image&nbsp;at&nbsp;the&nbsp;MCU&nbsp;level&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121245">//&nbsp;outside&nbsp;the&nbsp;image&nbsp;at&nbsp;the&nbsp;pixel&nbsp;level.&nbsp;For&nbsp;example,&nbsp;a&nbsp;24x16&nbsp;pixel&nbsp;4:2:0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121324">//&nbsp;progressive&nbsp;image&nbsp;consists&nbsp;of&nbsp;two&nbsp;16x16&nbsp;MCUs.&nbsp;The&nbsp;interleaved&nbsp;scans</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121400">//&nbsp;will&nbsp;process&nbsp;8&nbsp;Y&nbsp;blocks:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121433">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;1&nbsp;4&nbsp;5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121449">//&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;3&nbsp;6&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121465">//&nbsp;The&nbsp;non-interleaved&nbsp;scans&nbsp;will&nbsp;process&nbsp;only&nbsp;6&nbsp;Y&nbsp;blocks:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121529">//&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;1&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121543">//&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;4&nbsp;5</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121557">if</span>&nbsp;<span class="ident" id="5121560"><a href="/gostd/image/jpeg/scan.go.html#5116968">nComp</a></span>&nbsp;<span class="op" id="5121566">!=</span>&nbsp;<span class="num" id="5121569">1</span>&nbsp;<span class="op" id="5121571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121579"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5121581">,</span>&nbsp;<span class="ident" id="5121583"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span>&nbsp;<span class="op" id="5121586">=</span>&nbsp;<span class="ident" id="5121588"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5121589">.</span><span class="ident" id="5121590"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5121594">[</span><span class="ident" id="5121595"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5121604">]</span><span class="op" id="5121605">.</span><span class="ident" id="5121606"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><span class="op" id="5121607">*</span><span class="ident" id="5121608"><a href="/gostd/image/jpeg/scan.go.html#5120294">mx</a></span><span class="op" id="5121610">,</span>&nbsp;<span class="ident" id="5121612"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5121613">.</span><span class="ident" id="5121614"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5121618">[</span><span class="ident" id="5121619"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5121628">]</span><span class="op" id="5121629">.</span><span class="ident" id="5121630"><a href="/gostd/image/jpeg/reader.go.html#5101192">v</a></span><span class="op" id="5121631">*</span><span class="ident" id="5121632"><a href="/gostd/image/jpeg/scan.go.html#5120262">my</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121641">if</span>&nbsp;<span class="ident" id="5121644"><a href="/gostd/image/jpeg/scan.go.html#5119296">h0</a></span>&nbsp;<span class="op" id="5121647">==</span>&nbsp;<span class="num" id="5121650">1</span>&nbsp;<span class="op" id="5121652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121661"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span>&nbsp;<span class="op" id="5121664">+=</span>&nbsp;<span class="ident" id="5121667"><a href="/gostd/image/jpeg/scan.go.html#5120436">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121675">}</span>&nbsp;<span class="keyword" id="5121677">else</span>&nbsp;<span class="op" id="5121682">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121691"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span>&nbsp;<span class="op" id="5121694">+=</span>&nbsp;<span class="ident" id="5121697"><a href="/gostd/image/jpeg/scan.go.html#5120436">j</a></span>&nbsp;<span class="op" id="5121699">%</span>&nbsp;<span class="num" id="5121701">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121710"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span>&nbsp;<span class="op" id="5121713">+=</span>&nbsp;<span class="ident" id="5121716"><a href="/gostd/image/jpeg/scan.go.html#5120436">j</a></span>&nbsp;<span class="op" id="5121718">/</span>&nbsp;<span class="num" id="5121720">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121735">}</span>&nbsp;<span class="keyword" id="5121737">else</span>&nbsp;<span class="op" id="5121742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121750">q</span>&nbsp;<span class="op" id="5121752">:=</span>&nbsp;<span class="ident" id="5121755"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span>&nbsp;<span class="op" id="5121759">*</span>&nbsp;<span class="ident" id="5121761"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5121762">.</span><span class="ident" id="5121763"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5121767">[</span><span class="ident" id="5121768"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5121777">]</span><span class="op" id="5121778">.</span><span class="ident" id="5121779"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121787"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span>&nbsp;<span class="op" id="5121790">=</span>&nbsp;<span class="ident" id="5121792"><a href="/gostd/image/jpeg/scan.go.html#5120239">blockCount</a></span>&nbsp;<span class="op" id="5121803">%</span>&nbsp;<span class="ident" id="5121805"><a href="/gostd/image/jpeg/scan.go.html#5121750">q</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121813"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span>&nbsp;<span class="op" id="5121816">=</span>&nbsp;<span class="ident" id="5121818"><a href="/gostd/image/jpeg/scan.go.html#5120239">blockCount</a></span>&nbsp;<span class="op" id="5121829">/</span>&nbsp;<span class="ident" id="5121831"><a href="/gostd/image/jpeg/scan.go.html#5121750">q</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121839"><a href="/gostd/image/jpeg/scan.go.html#5120239">blockCount</a></span><span class="op" id="5121849">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121858">if</span>&nbsp;<span class="ident" id="5121861"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5121863">*</span><span class="num" id="5121864">8</span>&nbsp;<span class="op" id="5121866">&gt;=</span>&nbsp;<span class="ident" id="5121869"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5121870">.</span><span class="ident" id="5121871"><a href="/gostd/image/jpeg/reader.go.html#5103782">width</a></span>&nbsp;<span class="op" id="5121877">||</span>&nbsp;<span class="ident" id="5121880"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5121882">*</span><span class="num" id="5121883">8</span>&nbsp;<span class="op" id="5121885">&gt;=</span>&nbsp;<span class="ident" id="5121888"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5121889">.</span><span class="ident" id="5121890"><a href="/gostd/image/jpeg/reader.go.html#5103789">height</a></span>&nbsp;<span class="op" id="5121897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121906">continue</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121936">//&nbsp;Load&nbsp;the&nbsp;previous&nbsp;partially&nbsp;decoded&nbsp;coefficients,&nbsp;if&nbsp;applicable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122009">if</span>&nbsp;<span class="ident" id="5122012"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122013">.</span><span class="ident" id="5122014"><a href="/gostd/image/jpeg/reader.go.html#5103915">progressive</a></span>&nbsp;<span class="op" id="5122026">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122034"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span>&nbsp;<span class="op" id="5122036">=</span>&nbsp;<span class="ident" id="5122038"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122039">.</span><span class="ident" id="5122040"><a href="/gostd/image/jpeg/reader.go.html#5104049">progCoeffs</a></span><span class="op" id="5122050">[</span><span class="ident" id="5122051"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5122060">]</span><span class="op" id="5122061">[</span><span class="ident" id="5122062"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5122064">*</span><span class="ident" id="5122065"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span><span class="op" id="5122068">*</span><span class="ident" id="5122069"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122070">.</span><span class="ident" id="5122071"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5122075">[</span><span class="ident" id="5122076"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5122085">]</span><span class="op" id="5122086">.</span><span class="ident" id="5122087"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><span class="op" id="5122088">+</span><span class="ident" id="5122089"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5122091">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122098">}</span>&nbsp;<span class="keyword" id="5122100">else</span>&nbsp;<span class="op" id="5122105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122113"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span>&nbsp;<span class="op" id="5122115">=</span>&nbsp;<span class="ident" id="5122117"><a href="/gostd/image/jpeg/idct.go.html#5096709">block</a></span><span class="op" id="5122122">{</span><span class="op" id="5122123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122138">if</span>&nbsp;<span class="ident" id="5122141"><a href="/gostd/image/jpeg/scan.go.html#5118632">ah</a></span>&nbsp;<span class="op" id="5122144">!=</span>&nbsp;<span class="num" id="5122147">0</span>&nbsp;<span class="op" id="5122149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122157">if</span>&nbsp;<span class="ident" id="5122160">err</span>&nbsp;<span class="op" id="5122164">:=</span>&nbsp;<span class="ident" id="5122167"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122168">.</span><span class="ident" id="5122169"><a href="/gostd/image/jpeg/scan.go.html#5126440">refine</a></span><span class="op" id="5122175">(</span><span class="op" id="5122176">&amp;</span><span class="ident" id="5122177"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><span class="op" id="5122178">,</span>&nbsp;<span class="op" id="5122180">&amp;</span><span class="ident" id="5122181"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122182">.</span><span class="ident" id="5122183"><a href="/gostd/image/jpeg/reader.go.html#5104136">huff</a></span><span class="op" id="5122187">[</span><span class="ident" id="5122188"><a href="/gostd/image/jpeg/reader.go.html#5101344">acTable</a></span><span class="op" id="5122195">]</span><span class="op" id="5122196">[</span><span class="ident" id="5122197"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5122201">[</span><span class="ident" id="5122202"><a href="/gostd/image/jpeg/scan.go.html#5120327">i</a></span><span class="op" id="5122203">]</span><span class="op" id="5122204">.</span><span class="ident" id="5122205"><a href="/gostd/image/jpeg/scan.go.html#5117185">ta</a></span><span class="op" id="5122207">]</span><span class="op" id="5122208">,</span>&nbsp;<span class="ident" id="5122210"><a href="/gostd/image/jpeg/scan.go.html#5118614">zigStart</a></span><span class="op" id="5122218">,</span>&nbsp;<span class="ident" id="5122220"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span><span class="op" id="5122226">,</span>&nbsp;<span class="num" id="5122228">1</span><span class="op" id="5122229">&lt;&lt;</span><span class="ident" id="5122231"><a href="/gostd/image/jpeg/scan.go.html#5118636">al</a></span><span class="op" id="5122233">)</span><span class="op" id="5122234">;</span>&nbsp;<span class="ident" id="5122236"><a href="/gostd/image/jpeg/scan.go.html#5122160">err</a></span>&nbsp;<span class="op" id="5122240">!=</span>&nbsp;<span class="builtintype" id="5122243">nil</span>&nbsp;<span class="op" id="5122247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122256">return</span>&nbsp;<span class="ident" id="5122263"><a href="/gostd/image/jpeg/scan.go.html#5122160">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122280">}</span>&nbsp;<span class="keyword" id="5122282">else</span>&nbsp;<span class="op" id="5122287">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122295">zig</span>&nbsp;<span class="op" id="5122299">:=</span>&nbsp;<span class="ident" id="5122302"><a href="/gostd/image/jpeg/scan.go.html#5118614">zigStart</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122317">if</span>&nbsp;<span class="ident" id="5122320"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span>&nbsp;<span class="op" id="5122324">==</span>&nbsp;<span class="num" id="5122327">0</span>&nbsp;<span class="op" id="5122329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122338"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span><span class="op" id="5122341">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122351">//&nbsp;Decode&nbsp;the&nbsp;DC&nbsp;coefficient,&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;F.2.2.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122421">value</span><span class="op" id="5122426">,</span>&nbsp;<span class="ident" id="5122428">err</span>&nbsp;<span class="op" id="5122432">:=</span>&nbsp;<span class="ident" id="5122435"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122436">.</span><span class="ident" id="5122437"><a href="/gostd/image/jpeg/huffman.go.html#5093508">decodeHuffman</a></span><span class="op" id="5122450">(</span><span class="op" id="5122451">&amp;</span><span class="ident" id="5122452"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122453">.</span><span class="ident" id="5122454"><a href="/gostd/image/jpeg/reader.go.html#5104136">huff</a></span><span class="op" id="5122458">[</span><span class="ident" id="5122459"><a href="/gostd/image/jpeg/reader.go.html#5101331">dcTable</a></span><span class="op" id="5122466">]</span><span class="op" id="5122467">[</span><span class="ident" id="5122468"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5122472">[</span><span class="ident" id="5122473"><a href="/gostd/image/jpeg/scan.go.html#5120327">i</a></span><span class="op" id="5122474">]</span><span class="op" id="5122475">.</span><span class="ident" id="5122476"><a href="/gostd/image/jpeg/scan.go.html#5117145">td</a></span><span class="op" id="5122478">]</span><span class="op" id="5122479">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122488">if</span>&nbsp;<span class="ident" id="5122491"><a href="/gostd/image/jpeg/scan.go.html#5122428">err</a></span>&nbsp;<span class="op" id="5122495">!=</span>&nbsp;<span class="builtintype" id="5122498">nil</span>&nbsp;<span class="op" id="5122502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122512">return</span>&nbsp;<span class="ident" id="5122519"><a href="/gostd/image/jpeg/scan.go.html#5122428">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122539">if</span>&nbsp;<span class="ident" id="5122542"><a href="/gostd/image/jpeg/scan.go.html#5122421">value</a></span>&nbsp;<span class="op" id="5122548">&gt;</span>&nbsp;<span class="num" id="5122550">16</span>&nbsp;<span class="op" id="5122553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122563">return</span>&nbsp;<span class="ident" id="5122570"><a href="/gostd/image/jpeg/reader.go.html#5100951">UnsupportedError</a></span><span class="op" id="5122586">(</span><span class="string" id="5122587">&#34;excessive&nbsp;DC&nbsp;component&#34;</span><span class="op" id="5122611">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122629">dcDelta</span><span class="op" id="5122636">,</span>&nbsp;<span class="ident" id="5122638"><a href="/gostd/image/jpeg/scan.go.html#5122428">err</a></span>&nbsp;<span class="op" id="5122642">:=</span>&nbsp;<span class="ident" id="5122645"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122646">.</span><span class="ident" id="5122647"><a href="/gostd/image/jpeg/huffman.go.html#5090907">receiveExtend</a></span><span class="op" id="5122660">(</span><span class="ident" id="5122661"><a href="/gostd/image/jpeg/scan.go.html#5122421">value</a></span><span class="op" id="5122666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122675">if</span>&nbsp;<span class="ident" id="5122678"><a href="/gostd/image/jpeg/scan.go.html#5122428">err</a></span>&nbsp;<span class="op" id="5122682">!=</span>&nbsp;<span class="builtintype" id="5122685">nil</span>&nbsp;<span class="op" id="5122689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122699">return</span>&nbsp;<span class="ident" id="5122706"><a href="/gostd/image/jpeg/scan.go.html#5122428">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122717">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122726"><a href="/gostd/image/jpeg/scan.go.html#5119904">dc</a></span><span class="op" id="5122728">[</span><span class="ident" id="5122729"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5122738">]</span>&nbsp;<span class="op" id="5122740">+=</span>&nbsp;<span class="ident" id="5122743"><a href="/gostd/image/jpeg/scan.go.html#5122629">dcDelta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122758"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><span class="op" id="5122759">[</span><span class="num" id="5122760">0</span><span class="op" id="5122761">]</span>&nbsp;<span class="op" id="5122763">=</span>&nbsp;<span class="ident" id="5122765"><a href="/gostd/image/jpeg/scan.go.html#5119904">dc</a></span><span class="op" id="5122767">[</span><span class="ident" id="5122768"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5122777">]</span>&nbsp;<span class="op" id="5122779">&lt;&lt;</span>&nbsp;<span class="ident" id="5122782"><a href="/gostd/image/jpeg/scan.go.html#5118636">al</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122800">if</span>&nbsp;<span class="ident" id="5122803"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span>&nbsp;<span class="op" id="5122807">&lt;=</span>&nbsp;<span class="ident" id="5122810"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5122817">&amp;&amp;</span>&nbsp;<span class="ident" id="5122820"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122821">.</span><span class="ident" id="5122822"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5122829">&gt;</span>&nbsp;<span class="num" id="5122831">0</span>&nbsp;<span class="op" id="5122833">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122842"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122843">.</span><span class="ident" id="5122844"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span><span class="op" id="5122850">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122859">}</span>&nbsp;<span class="keyword" id="5122861">else</span>&nbsp;<span class="op" id="5122866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122875">//&nbsp;Decode&nbsp;the&nbsp;AC&nbsp;coefficients,&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;F.2.2.2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122946">huff</span>&nbsp;<span class="op" id="5122951">:=</span>&nbsp;<span class="op" id="5122954">&amp;</span><span class="ident" id="5122955"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5122956">.</span><span class="ident" id="5122957"><a href="/gostd/image/jpeg/reader.go.html#5104136">huff</a></span><span class="op" id="5122961">[</span><span class="ident" id="5122962"><a href="/gostd/image/jpeg/reader.go.html#5101344">acTable</a></span><span class="op" id="5122969">]</span><span class="op" id="5122970">[</span><span class="ident" id="5122971"><a href="/gostd/image/jpeg/scan.go.html#5117094">scan</a></span><span class="op" id="5122975">[</span><span class="ident" id="5122976"><a href="/gostd/image/jpeg/scan.go.html#5120327">i</a></span><span class="op" id="5122977">]</span><span class="op" id="5122978">.</span><span class="ident" id="5122979"><a href="/gostd/image/jpeg/scan.go.html#5117185">ta</a></span><span class="op" id="5122981">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122990">for</span>&nbsp;<span class="op" id="5122994">;</span>&nbsp;<span class="ident" id="5122996"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span>&nbsp;<span class="op" id="5123000">&lt;=</span>&nbsp;<span class="ident" id="5123003"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span><span class="op" id="5123009">;</span>&nbsp;<span class="ident" id="5123011"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span><span class="op" id="5123014">++</span>&nbsp;<span class="op" id="5123017">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123027">value</span><span class="op" id="5123032">,</span>&nbsp;<span class="ident" id="5123034">err</span>&nbsp;<span class="op" id="5123038">:=</span>&nbsp;<span class="ident" id="5123041"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123042">.</span><span class="ident" id="5123043"><a href="/gostd/image/jpeg/huffman.go.html#5093508">decodeHuffman</a></span><span class="op" id="5123056">(</span><span class="ident" id="5123057"><a href="/gostd/image/jpeg/scan.go.html#5122946">huff</a></span><span class="op" id="5123061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123071">if</span>&nbsp;<span class="ident" id="5123074"><a href="/gostd/image/jpeg/scan.go.html#5123034">err</a></span>&nbsp;<span class="op" id="5123078">!=</span>&nbsp;<span class="builtintype" id="5123081">nil</span>&nbsp;<span class="op" id="5123085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123096">return</span>&nbsp;<span class="ident" id="5123103"><a href="/gostd/image/jpeg/scan.go.html#5123034">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123125">val0</span>&nbsp;<span class="op" id="5123130">:=</span>&nbsp;<span class="ident" id="5123133"><a href="/gostd/image/jpeg/scan.go.html#5123027">value</a></span>&nbsp;<span class="op" id="5123139">&gt;&gt;</span>&nbsp;<span class="num" id="5123142">4</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123152">val1</span>&nbsp;<span class="op" id="5123157">:=</span>&nbsp;<span class="ident" id="5123160"><a href="/gostd/image/jpeg/scan.go.html#5123027">value</a></span>&nbsp;<span class="op" id="5123166">&amp;</span>&nbsp;<span class="num" id="5123168">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123181">if</span>&nbsp;<span class="ident" id="5123184"><a href="/gostd/image/jpeg/scan.go.html#5123152">val1</a></span>&nbsp;<span class="op" id="5123189">!=</span>&nbsp;<span class="num" id="5123192">0</span>&nbsp;<span class="op" id="5123194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123205"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span>&nbsp;<span class="op" id="5123209">+=</span>&nbsp;<span class="builtintype" id="5123212">int32</span><span class="op" id="5123217">(</span><span class="ident" id="5123218"><a href="/gostd/image/jpeg/scan.go.html#5123125">val0</a></span><span class="op" id="5123222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123233">if</span>&nbsp;<span class="ident" id="5123236"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span>&nbsp;<span class="op" id="5123240">&gt;</span>&nbsp;<span class="ident" id="5123242"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5123249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123261">break</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123287">ac</span><span class="op" id="5123289">,</span>&nbsp;<span class="ident" id="5123291">err</span>&nbsp;<span class="op" id="5123295">:=</span>&nbsp;<span class="ident" id="5123298"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123299">.</span><span class="ident" id="5123300"><a href="/gostd/image/jpeg/huffman.go.html#5090907">receiveExtend</a></span><span class="op" id="5123313">(</span><span class="ident" id="5123314"><a href="/gostd/image/jpeg/scan.go.html#5123152">val1</a></span><span class="op" id="5123318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123329">if</span>&nbsp;<span class="ident" id="5123332"><a href="/gostd/image/jpeg/scan.go.html#5123291">err</a></span>&nbsp;<span class="op" id="5123336">!=</span>&nbsp;<span class="builtintype" id="5123339">nil</span>&nbsp;<span class="op" id="5123343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123355">return</span>&nbsp;<span class="ident" id="5123362"><a href="/gostd/image/jpeg/scan.go.html#5123291">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123375">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123386"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><span class="op" id="5123387">[</span><span class="ident" id="5123388"><a href="/gostd/image/jpeg/reader.go.html#5102573">unzig</a></span><span class="op" id="5123393">[</span><span class="ident" id="5123394"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span><span class="op" id="5123397">]</span><span class="op" id="5123398">]</span>&nbsp;<span class="op" id="5123400">=</span>&nbsp;<span class="ident" id="5123402"><a href="/gostd/image/jpeg/scan.go.html#5123287">ac</a></span>&nbsp;<span class="op" id="5123405">&lt;&lt;</span>&nbsp;<span class="ident" id="5123408"><a href="/gostd/image/jpeg/scan.go.html#5118636">al</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123419">}</span>&nbsp;<span class="keyword" id="5123421">else</span>&nbsp;<span class="op" id="5123426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123437">if</span>&nbsp;<span class="ident" id="5123440"><a href="/gostd/image/jpeg/scan.go.html#5123125">val0</a></span>&nbsp;<span class="op" id="5123445">!=</span>&nbsp;<span class="num" id="5123448">0x0f</span>&nbsp;<span class="op" id="5123453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123465"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123466">.</span><span class="ident" id="5123467"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5123474">=</span>&nbsp;<span class="builtintype" id="5123476">uint16</span><span class="op" id="5123482">(</span><span class="num" id="5123483">1</span>&nbsp;<span class="op" id="5123485">&lt;&lt;</span>&nbsp;<span class="ident" id="5123488"><a href="/gostd/image/jpeg/scan.go.html#5123125">val0</a></span><span class="op" id="5123492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123504">if</span>&nbsp;<span class="ident" id="5123507"><a href="/gostd/image/jpeg/scan.go.html#5123125">val0</a></span>&nbsp;<span class="op" id="5123512">!=</span>&nbsp;<span class="num" id="5123515">0</span>&nbsp;<span class="op" id="5123517">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123530">bits</span><span class="op" id="5123534">,</span>&nbsp;<span class="ident" id="5123536">err</span>&nbsp;<span class="op" id="5123540">:=</span>&nbsp;<span class="ident" id="5123543"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123544">.</span><span class="ident" id="5123545"><a href="/gostd/image/jpeg/huffman.go.html#5094817">decodeBits</a></span><span class="op" id="5123555">(</span><span class="builtintype" id="5123556">int32</span><span class="op" id="5123561">(</span><span class="ident" id="5123562"><a href="/gostd/image/jpeg/scan.go.html#5123125">val0</a></span><span class="op" id="5123566">)</span><span class="op" id="5123567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123580">if</span>&nbsp;<span class="ident" id="5123583"><a href="/gostd/image/jpeg/scan.go.html#5123536">err</a></span>&nbsp;<span class="op" id="5123587">!=</span>&nbsp;<span class="builtintype" id="5123590">nil</span>&nbsp;<span class="op" id="5123594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123608">return</span>&nbsp;<span class="ident" id="5123615"><a href="/gostd/image/jpeg/scan.go.html#5123536">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123643"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123644">.</span><span class="ident" id="5123645"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5123652">|=</span>&nbsp;<span class="builtintype" id="5123655">uint16</span><span class="op" id="5123661">(</span><span class="ident" id="5123662"><a href="/gostd/image/jpeg/scan.go.html#5123530">bits</a></span><span class="op" id="5123666">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123690"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123691">.</span><span class="ident" id="5123692"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span><span class="op" id="5123698">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123711">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123737"><a href="/gostd/image/jpeg/scan.go.html#5122295">zig</a></span>&nbsp;<span class="op" id="5123741">+=</span>&nbsp;<span class="num" id="5123744">0x0f</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123789">if</span>&nbsp;<span class="ident" id="5123792"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123793">.</span><span class="ident" id="5123794"><a href="/gostd/image/jpeg/reader.go.html#5103915">progressive</a></span>&nbsp;<span class="op" id="5123806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123814">if</span>&nbsp;<span class="ident" id="5123817"><a href="/gostd/image/jpeg/scan.go.html#5118624">zigEnd</a></span>&nbsp;<span class="op" id="5123824">!=</span>&nbsp;<span class="ident" id="5123827"><a href="/gostd/image/jpeg/idct.go.html#5096665">blockSize</a></span><span class="op" id="5123836">-</span><span class="num" id="5123837">1</span>&nbsp;<span class="op" id="5123839">||</span>&nbsp;<span class="ident" id="5123842"><a href="/gostd/image/jpeg/scan.go.html#5118636">al</a></span>&nbsp;<span class="op" id="5123845">!=</span>&nbsp;<span class="num" id="5123848">0</span>&nbsp;<span class="op" id="5123850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123859">//&nbsp;We&nbsp;haven&#39;t&nbsp;completely&nbsp;decoded&nbsp;this&nbsp;8x8&nbsp;block.&nbsp;Save&nbsp;the&nbsp;coefficients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123938"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123939">.</span><span class="ident" id="5123940"><a href="/gostd/image/jpeg/reader.go.html#5104049">progCoeffs</a></span><span class="op" id="5123950">[</span><span class="ident" id="5123951"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5123960">]</span><span class="op" id="5123961">[</span><span class="ident" id="5123962"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5123964">*</span><span class="ident" id="5123965"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span><span class="op" id="5123968">*</span><span class="ident" id="5123969"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5123970">.</span><span class="ident" id="5123971"><a href="/gostd/image/jpeg/reader.go.html#5104007">comp</a></span><span class="op" id="5123975">[</span><span class="ident" id="5123976"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span><span class="op" id="5123985">]</span><span class="op" id="5123986">.</span><span class="ident" id="5123987"><a href="/gostd/image/jpeg/reader.go.html#5101151">h</a></span><span class="op" id="5123988">+</span><span class="ident" id="5123989"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5123991">]</span>&nbsp;<span class="op" id="5123993">=</span>&nbsp;<span class="ident" id="5123995"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124004">//&nbsp;At&nbsp;this&nbsp;point,&nbsp;we&nbsp;could&nbsp;execute&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;loop&nbsp;body&nbsp;to&nbsp;dequantize&nbsp;and</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124090">//&nbsp;perform&nbsp;the&nbsp;inverse&nbsp;DCT,&nbsp;to&nbsp;save&nbsp;early&nbsp;stages&nbsp;of&nbsp;a&nbsp;progressive&nbsp;image&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124176">//&nbsp;*image.YCbCr&nbsp;buffers&nbsp;(the&nbsp;whole&nbsp;point&nbsp;of&nbsp;progressive&nbsp;encoding),&nbsp;but&nbsp;in&nbsp;Go,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124261">//&nbsp;the&nbsp;jpeg.Decode&nbsp;function&nbsp;does&nbsp;not&nbsp;return&nbsp;until&nbsp;the&nbsp;entire&nbsp;image&nbsp;is&nbsp;decoded,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124347">//&nbsp;so&nbsp;we&nbsp;&#34;continue&#34;&nbsp;here&nbsp;to&nbsp;avoid&nbsp;wasted&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124408">continue</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124438">//&nbsp;Dequantize,&nbsp;perform&nbsp;the&nbsp;inverse&nbsp;DCT&nbsp;and&nbsp;store&nbsp;the&nbsp;block&nbsp;to&nbsp;the&nbsp;image.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124516">for</span>&nbsp;<span class="ident" id="5124520">zig</span>&nbsp;<span class="op" id="5124524">:=</span>&nbsp;<span class="num" id="5124527">0</span><span class="op" id="5124528">;</span>&nbsp;<span class="ident" id="5124530"><a href="/gostd/image/jpeg/scan.go.html#5124520">zig</a></span>&nbsp;<span class="op" id="5124534">&lt;</span>&nbsp;<span class="ident" id="5124536"><a href="/gostd/image/jpeg/idct.go.html#5096665">blockSize</a></span><span class="op" id="5124545">;</span>&nbsp;<span class="ident" id="5124547"><a href="/gostd/image/jpeg/scan.go.html#5124520">zig</a></span><span class="op" id="5124550">++</span>&nbsp;<span class="op" id="5124553">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124561"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><span class="op" id="5124562">[</span><span class="ident" id="5124563"><a href="/gostd/image/jpeg/reader.go.html#5102573">unzig</a></span><span class="op" id="5124568">[</span><span class="ident" id="5124569"><a href="/gostd/image/jpeg/scan.go.html#5124520">zig</a></span><span class="op" id="5124572">]</span><span class="op" id="5124573">]</span>&nbsp;<span class="op" id="5124575">*=</span>&nbsp;<span class="ident" id="5124578"><a href="/gostd/image/jpeg/scan.go.html#5120391">qt</a></span><span class="op" id="5124580">[</span><span class="ident" id="5124581"><a href="/gostd/image/jpeg/scan.go.html#5124520">zig</a></span><span class="op" id="5124584">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124598"><a href="/gostd/image/jpeg/idct.go.html#5097623">idct</a></span><span class="op" id="5124602">(</span><span class="op" id="5124603">&amp;</span><span class="ident" id="5124604"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><span class="op" id="5124605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124612">dst</span><span class="op" id="5124615">,</span>&nbsp;<span class="ident" id="5124617">stride</span>&nbsp;<span class="op" id="5124624">:=</span>&nbsp;<span class="op" id="5124627">[</span><span class="op" id="5124628">]</span><span class="builtintype" id="5124629">byte</span><span class="op" id="5124633">(</span><span class="builtintype" id="5124634">nil</span><span class="op" id="5124637">)</span><span class="op" id="5124638">,</span>&nbsp;<span class="num" id="5124640">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124647">if</span>&nbsp;<span class="ident" id="5124650"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124651">.</span><span class="ident" id="5124652"><a href="/gostd/image/jpeg/reader.go.html#5103896">nComp</a></span>&nbsp;<span class="op" id="5124658">==</span>&nbsp;<span class="ident" id="5124661"><a href="/gostd/image/jpeg/reader.go.html#5101448">nGrayComponent</a></span>&nbsp;<span class="op" id="5124676">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124684"><a href="/gostd/image/jpeg/scan.go.html#5124612">dst</a></span><span class="op" id="5124687">,</span>&nbsp;<span class="ident" id="5124689"><a href="/gostd/image/jpeg/scan.go.html#5124617">stride</a></span>&nbsp;<span class="op" id="5124696">=</span>&nbsp;<span class="ident" id="5124698"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124699">.</span><span class="ident" id="5124700"><a href="/gostd/image/jpeg/reader.go.html#5103801">img1</a></span><span class="op" id="5124704">.</span><span class="ident" id="5124705"><a href="/gostd/image/image.go.html#5172175">Pix</a></span><span class="op" id="5124708">[</span><span class="num" id="5124709">8</span><span class="op" id="5124710">*</span><span class="op" id="5124711">(</span><span class="ident" id="5124712"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5124714">*</span><span class="ident" id="5124715"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124716">.</span><span class="ident" id="5124717"><a href="/gostd/image/jpeg/reader.go.html#5103801">img1</a></span><span class="op" id="5124721">.</span><span class="ident" id="5124722"><a href="/gostd/image/image.go.html#5172264">Stride</a></span><span class="op" id="5124728">+</span><span class="ident" id="5124729"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5124731">)</span><span class="op" id="5124732">:</span><span class="op" id="5124733">]</span><span class="op" id="5124734">,</span>&nbsp;<span class="ident" id="5124736"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124737">.</span><span class="ident" id="5124738"><a href="/gostd/image/jpeg/reader.go.html#5103801">img1</a></span><span class="op" id="5124742">.</span><span class="ident" id="5124743"><a href="/gostd/image/image.go.html#5172264">Stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124755">}</span>&nbsp;<span class="keyword" id="5124757">else</span>&nbsp;<span class="op" id="5124762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124770">switch</span>&nbsp;<span class="ident" id="5124777"><a href="/gostd/image/jpeg/scan.go.html#5120356">compIndex</a></span>&nbsp;<span class="op" id="5124787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124795">case</span>&nbsp;<span class="num" id="5124800">0</span><span class="op" id="5124801">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124810"><a href="/gostd/image/jpeg/scan.go.html#5124612">dst</a></span><span class="op" id="5124813">,</span>&nbsp;<span class="ident" id="5124815"><a href="/gostd/image/jpeg/scan.go.html#5124617">stride</a></span>&nbsp;<span class="op" id="5124822">=</span>&nbsp;<span class="ident" id="5124824"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124825">.</span><span class="ident" id="5124826"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5124830">.</span><span class="ident" id="5124831"><a href="/gostd/image/ycbcr.go.html#5181929">Y</a></span><span class="op" id="5124832">[</span><span class="num" id="5124833">8</span><span class="op" id="5124834">*</span><span class="op" id="5124835">(</span><span class="ident" id="5124836"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5124838">*</span><span class="ident" id="5124839"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124840">.</span><span class="ident" id="5124841"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5124845">.</span><span class="ident" id="5124846"><a href="/gostd/image/ycbcr.go.html#5181953">YStride</a></span><span class="op" id="5124853">+</span><span class="ident" id="5124854"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5124856">)</span><span class="op" id="5124857">:</span><span class="op" id="5124858">]</span><span class="op" id="5124859">,</span>&nbsp;<span class="ident" id="5124861"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124862">.</span><span class="ident" id="5124863"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5124867">.</span><span class="ident" id="5124868"><a href="/gostd/image/ycbcr.go.html#5181953">YStride</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124882">case</span>&nbsp;<span class="num" id="5124887">1</span><span class="op" id="5124888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124897"><a href="/gostd/image/jpeg/scan.go.html#5124612">dst</a></span><span class="op" id="5124900">,</span>&nbsp;<span class="ident" id="5124902"><a href="/gostd/image/jpeg/scan.go.html#5124617">stride</a></span>&nbsp;<span class="op" id="5124909">=</span>&nbsp;<span class="ident" id="5124911"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124912">.</span><span class="ident" id="5124913"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5124917">.</span><span class="ident" id="5124918"><a href="/gostd/image/ycbcr.go.html#5181932">Cb</a></span><span class="op" id="5124920">[</span><span class="num" id="5124921">8</span><span class="op" id="5124922">*</span><span class="op" id="5124923">(</span><span class="ident" id="5124924"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5124926">*</span><span class="ident" id="5124927"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124928">.</span><span class="ident" id="5124929"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5124933">.</span><span class="ident" id="5124934"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span><span class="op" id="5124941">+</span><span class="ident" id="5124942"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5124944">)</span><span class="op" id="5124945">:</span><span class="op" id="5124946">]</span><span class="op" id="5124947">,</span>&nbsp;<span class="ident" id="5124949"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5124950">.</span><span class="ident" id="5124951"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5124955">.</span><span class="ident" id="5124956"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124970">case</span>&nbsp;<span class="num" id="5124975">2</span><span class="op" id="5124976">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124985"><a href="/gostd/image/jpeg/scan.go.html#5124612">dst</a></span><span class="op" id="5124988">,</span>&nbsp;<span class="ident" id="5124990"><a href="/gostd/image/jpeg/scan.go.html#5124617">stride</a></span>&nbsp;<span class="op" id="5124997">=</span>&nbsp;<span class="ident" id="5124999"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125000">.</span><span class="ident" id="5125001"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5125005">.</span><span class="ident" id="5125006"><a href="/gostd/image/ycbcr.go.html#5181936">Cr</a></span><span class="op" id="5125008">[</span><span class="num" id="5125009">8</span><span class="op" id="5125010">*</span><span class="op" id="5125011">(</span><span class="ident" id="5125012"><a href="/gostd/image/jpeg/scan.go.html#5120226">by</a></span><span class="op" id="5125014">*</span><span class="ident" id="5125015"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125016">.</span><span class="ident" id="5125017"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5125021">.</span><span class="ident" id="5125022"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span><span class="op" id="5125029">+</span><span class="ident" id="5125030"><a href="/gostd/image/jpeg/scan.go.html#5120222">bx</a></span><span class="op" id="5125032">)</span><span class="op" id="5125033">:</span><span class="op" id="5125034">]</span><span class="op" id="5125035">,</span>&nbsp;<span class="ident" id="5125037"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125038">.</span><span class="ident" id="5125039"><a href="/gostd/image/jpeg/reader.go.html#5103828">img3</a></span><span class="op" id="5125043">.</span><span class="ident" id="5125044"><a href="/gostd/image/ycbcr.go.html#5181973">CStride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125058">default</span><span class="op" id="5125065">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125074">return</span>&nbsp;<span class="ident" id="5125081"><a href="/gostd/image/jpeg/reader.go.html#5100951">UnsupportedError</a></span><span class="op" id="5125097">(</span><span class="string" id="5125098">&#34;too&nbsp;many&nbsp;components&#34;</span><span class="op" id="5125119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125141">//&nbsp;Level&nbsp;shift&nbsp;by&nbsp;+128,&nbsp;clip&nbsp;to&nbsp;[0,&nbsp;255],&nbsp;and&nbsp;write&nbsp;to&nbsp;dst.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125206">for</span>&nbsp;<span class="ident" id="5125210">y</span>&nbsp;<span class="op" id="5125212">:=</span>&nbsp;<span class="num" id="5125215">0</span><span class="op" id="5125216">;</span>&nbsp;<span class="ident" id="5125218"><a href="/gostd/image/jpeg/scan.go.html#5125210">y</a></span>&nbsp;<span class="op" id="5125220">&lt;</span>&nbsp;<span class="num" id="5125222">8</span><span class="op" id="5125223">;</span>&nbsp;<span class="ident" id="5125225"><a href="/gostd/image/jpeg/scan.go.html#5125210">y</a></span><span class="op" id="5125226">++</span>&nbsp;<span class="op" id="5125229">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125237">y8</span>&nbsp;<span class="op" id="5125240">:=</span>&nbsp;<span class="ident" id="5125243"><a href="/gostd/image/jpeg/scan.go.html#5125210">y</a></span>&nbsp;<span class="op" id="5125245">*</span>&nbsp;<span class="num" id="5125247">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125255">yStride</span>&nbsp;<span class="op" id="5125263">:=</span>&nbsp;<span class="ident" id="5125266"><a href="/gostd/image/jpeg/scan.go.html#5125210">y</a></span>&nbsp;<span class="op" id="5125268">*</span>&nbsp;<span class="ident" id="5125270"><a href="/gostd/image/jpeg/scan.go.html#5124617">stride</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125283">for</span>&nbsp;<span class="ident" id="5125287">x</span>&nbsp;<span class="op" id="5125289">:=</span>&nbsp;<span class="num" id="5125292">0</span><span class="op" id="5125293">;</span>&nbsp;<span class="ident" id="5125295"><a href="/gostd/image/jpeg/scan.go.html#5125287">x</a></span>&nbsp;<span class="op" id="5125297">&lt;</span>&nbsp;<span class="num" id="5125299">8</span><span class="op" id="5125300">;</span>&nbsp;<span class="ident" id="5125302"><a href="/gostd/image/jpeg/scan.go.html#5125287">x</a></span><span class="op" id="5125303">++</span>&nbsp;<span class="op" id="5125306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125315">c</span>&nbsp;<span class="op" id="5125317">:=</span>&nbsp;<span class="ident" id="5125320"><a href="/gostd/image/jpeg/scan.go.html#5119893">b</a></span><span class="op" id="5125321">[</span><span class="ident" id="5125322"><a href="/gostd/image/jpeg/scan.go.html#5125237">y8</a></span><span class="op" id="5125324">+</span><span class="ident" id="5125325"><a href="/gostd/image/jpeg/scan.go.html#5125287">x</a></span><span class="op" id="5125326">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125335">if</span>&nbsp;<span class="ident" id="5125338"><a href="/gostd/image/jpeg/scan.go.html#5125315">c</a></span>&nbsp;<span class="op" id="5125340">&lt;</span>&nbsp;<span class="op" id="5125342">-</span><span class="num" id="5125343">128</span>&nbsp;<span class="op" id="5125347">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125357"><a href="/gostd/image/jpeg/scan.go.html#5125315">c</a></span>&nbsp;<span class="op" id="5125359">=</span>&nbsp;<span class="num" id="5125361">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125370">}</span>&nbsp;<span class="keyword" id="5125372">else</span>&nbsp;<span class="keyword" id="5125377">if</span>&nbsp;<span class="ident" id="5125380"><a href="/gostd/image/jpeg/scan.go.html#5125315">c</a></span>&nbsp;<span class="op" id="5125382">&gt;</span>&nbsp;<span class="num" id="5125384">127</span>&nbsp;<span class="op" id="5125388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125398"><a href="/gostd/image/jpeg/scan.go.html#5125315">c</a></span>&nbsp;<span class="op" id="5125400">=</span>&nbsp;<span class="num" id="5125402">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125413">}</span>&nbsp;<span class="keyword" id="5125415">else</span>&nbsp;<span class="op" id="5125420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125430"><a href="/gostd/image/jpeg/scan.go.html#5125315">c</a></span>&nbsp;<span class="op" id="5125432">+=</span>&nbsp;<span class="num" id="5125435">128</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125455"><a href="/gostd/image/jpeg/scan.go.html#5124612">dst</a></span><span class="op" id="5125458">[</span><span class="ident" id="5125459"><a href="/gostd/image/jpeg/scan.go.html#5125255">yStride</a></span><span class="op" id="5125466">+</span><span class="ident" id="5125467"><a href="/gostd/image/jpeg/scan.go.html#5125287">x</a></span><span class="op" id="5125468">]</span>&nbsp;<span class="op" id="5125470">=</span>&nbsp;<span class="builtintype" id="5125472">uint8</span><span class="op" id="5125477">(</span><span class="ident" id="5125478"><a href="/gostd/image/jpeg/scan.go.html#5125315">c</a></span><span class="op" id="5125479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125500">}</span>&nbsp;<span class="comment" id="5125502">//&nbsp;for&nbsp;j</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125514">}</span>&nbsp;<span class="comment" id="5125516">//&nbsp;for&nbsp;i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125528"><a href="/gostd/image/jpeg/scan.go.html#5119775">mcu</a></span><span class="op" id="5125531">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125537">if</span>&nbsp;<span class="ident" id="5125540"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125541">.</span><span class="ident" id="5125542"><a href="/gostd/image/jpeg/reader.go.html#5103856">ri</a></span>&nbsp;<span class="op" id="5125545">&gt;</span>&nbsp;<span class="num" id="5125547">0</span>&nbsp;<span class="op" id="5125549">&amp;&amp;</span>&nbsp;<span class="ident" id="5125552"><a href="/gostd/image/jpeg/scan.go.html#5119775">mcu</a></span><span class="op" id="5125555">%</span><span class="ident" id="5125556"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125557">.</span><span class="ident" id="5125558"><a href="/gostd/image/jpeg/reader.go.html#5103856">ri</a></span>&nbsp;<span class="op" id="5125561">==</span>&nbsp;<span class="num" id="5125564">0</span>&nbsp;<span class="op" id="5125566">&amp;&amp;</span>&nbsp;<span class="ident" id="5125569"><a href="/gostd/image/jpeg/scan.go.html#5119775">mcu</a></span>&nbsp;<span class="op" id="5125573">&lt;</span>&nbsp;<span class="ident" id="5125575"><a href="/gostd/image/jpeg/scan.go.html#5119377">mxx</a></span><span class="op" id="5125578">*</span><span class="ident" id="5125579"><a href="/gostd/image/jpeg/scan.go.html#5119417">myy</a></span>&nbsp;<span class="op" id="5125583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125589">//&nbsp;A&nbsp;more&nbsp;sophisticated&nbsp;decoder&nbsp;could&nbsp;use&nbsp;RST[0-7]&nbsp;markers&nbsp;to&nbsp;resynchronize&nbsp;from&nbsp;corrupt&nbsp;input,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125689">//&nbsp;but&nbsp;this&nbsp;one&nbsp;assumes&nbsp;well-formed&nbsp;input,&nbsp;and&nbsp;hence&nbsp;the&nbsp;restart&nbsp;marker&nbsp;follows&nbsp;immediately.</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125786">if</span>&nbsp;<span class="ident" id="5125789">err</span>&nbsp;<span class="op" id="5125793">:=</span>&nbsp;<span class="ident" id="5125796"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125797">.</span><span class="ident" id="5125798"><a href="/gostd/image/jpeg/reader.go.html#5107021">readFull</a></span><span class="op" id="5125806">(</span><span class="ident" id="5125807"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125808">.</span><span class="ident" id="5125809"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5125812">[</span><span class="op" id="5125813">:</span><span class="num" id="5125814">2</span><span class="op" id="5125815">]</span><span class="op" id="5125816">)</span><span class="op" id="5125817">;</span>&nbsp;<span class="ident" id="5125819"><a href="/gostd/image/jpeg/scan.go.html#5125789">err</a></span>&nbsp;<span class="op" id="5125823">!=</span>&nbsp;<span class="builtintype" id="5125826">nil</span>&nbsp;<span class="op" id="5125830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125837">return</span>&nbsp;<span class="ident" id="5125844"><a href="/gostd/image/jpeg/scan.go.html#5125789">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125858">if</span>&nbsp;<span class="ident" id="5125861"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125862">.</span><span class="ident" id="5125863"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5125866">[</span><span class="num" id="5125867">0</span><span class="op" id="5125868">]</span>&nbsp;<span class="op" id="5125870">!=</span>&nbsp;<span class="num" id="5125873">0xff</span>&nbsp;<span class="op" id="5125878">||</span>&nbsp;<span class="ident" id="5125881"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5125882">.</span><span class="ident" id="5125883"><a href="/gostd/image/jpeg/reader.go.html#5104255">tmp</a></span><span class="op" id="5125886">[</span><span class="num" id="5125887">1</span><span class="op" id="5125888">]</span>&nbsp;<span class="op" id="5125890">!=</span>&nbsp;<span class="ident" id="5125893"><a href="/gostd/image/jpeg/scan.go.html#5119780">expectedRST</a></span>&nbsp;<span class="op" id="5125905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125912">return</span>&nbsp;<span class="ident" id="5125919"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5125930">(</span><span class="string" id="5125931">&#34;bad&nbsp;RST&nbsp;marker&#34;</span><span class="op" id="5125947">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125959"><a href="/gostd/image/jpeg/scan.go.html#5119780">expectedRST</a></span><span class="op" id="5125970">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125977">if</span>&nbsp;<span class="ident" id="5125980"><a href="/gostd/image/jpeg/scan.go.html#5119780">expectedRST</a></span>&nbsp;<span class="op" id="5125992">==</span>&nbsp;<span class="ident" id="5125995"><a href="/gostd/image/jpeg/reader.go.html#5102164">rst7Marker</a></span><span class="op" id="5126005">+</span><span class="num" id="5126006">1</span>&nbsp;<span class="op" id="5126008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126015"><a href="/gostd/image/jpeg/scan.go.html#5119780">expectedRST</a></span>&nbsp;<span class="op" id="5126027">=</span>&nbsp;<span class="ident" id="5126029"><a href="/gostd/image/jpeg/reader.go.html#5102128">rst0Marker</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126044">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126050">//&nbsp;Reset&nbsp;the&nbsp;Huffman&nbsp;decoder.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126084"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5126085">.</span><span class="ident" id="5126086"><a href="/gostd/image/jpeg/reader.go.html#5103298">bits</a></span>&nbsp;<span class="op" id="5126091">=</span>&nbsp;<span class="ident" id="5126093"><a href="/gostd/image/jpeg/reader.go.html#5103109">bits</a></span><span class="op" id="5126097">{</span><span class="op" id="5126098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126104">//&nbsp;Reset&nbsp;the&nbsp;DC&nbsp;components,&nbsp;as&nbsp;per&nbsp;section&nbsp;F.2.1.3.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126162"><a href="/gostd/image/jpeg/scan.go.html#5119904">dc</a></span>&nbsp;<span class="op" id="5126165">=</span>&nbsp;<span class="op" id="5126167">[</span><span class="ident" id="5126168"><a href="/gostd/image/jpeg/reader.go.html#5101520">nColorComponent</a></span><span class="op" id="5126183">]</span><span class="builtintype" id="5126184">int32</span><span class="op" id="5126189">{</span><span class="op" id="5126190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126196">//&nbsp;Reset&nbsp;the&nbsp;progressive&nbsp;decoder&nbsp;state,&nbsp;as&nbsp;per&nbsp;section&nbsp;G.1.2.2.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126264"><a href="/gostd/image/jpeg/scan.go.html#5116710">d</a></span><span class="op" id="5126265">.</span><span class="ident" id="5126266"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5126273">=</span>&nbsp;<span class="num" id="5126275">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126284">}</span>&nbsp;<span class="comment" id="5126286">//&nbsp;for&nbsp;mx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126297">}</span>&nbsp;<span class="comment" id="5126299">//&nbsp;for&nbsp;my</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126311">return</span>&nbsp;<span class="builtintype" id="5126318">nil</span><br>
<span class="lineno"></span><span class="op" id="5126322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5126325">//&nbsp;refine&nbsp;decodes&nbsp;a&nbsp;successive&nbsp;approximation&nbsp;refinement&nbsp;block,&nbsp;as&nbsp;specified&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5126404">//&nbsp;section&nbsp;G.1.2.</span><br>
<span class="lineno">340</span><span class="keyword" id="5126422">func</span>&nbsp;<span class="op" id="5126427">(</span><span class="ident" id="5126428">d</span>&nbsp;<span class="op" id="5126430">*</span><span class="ident" id="5126431"><a href="/gostd/image/jpeg/reader.go.html#5103264">decoder</a></span><span class="op" id="5126438">)</span>&nbsp;<span class="ident" id="5126440">refine</span><span class="op" id="5126446">(</span><span class="ident" id="5126447">b</span>&nbsp;<span class="op" id="5126449">*</span><span class="ident" id="5126450"><a href="/gostd/image/jpeg/idct.go.html#5096709">block</a></span><span class="op" id="5126455">,</span>&nbsp;<span class="ident" id="5126457">h</span>&nbsp;<span class="op" id="5126459">*</span><span class="ident" id="5126460"><a href="/gostd/image/jpeg/huffman.go.html#5089275">huffman</a></span><span class="op" id="5126467">,</span>&nbsp;<span class="ident" id="5126469">zigStart</span><span class="op" id="5126477">,</span>&nbsp;<span class="ident" id="5126479">zigEnd</span><span class="op" id="5126485">,</span>&nbsp;<span class="ident" id="5126487">delta</span>&nbsp;<span class="builtintype" id="5126493">int32</span><span class="op" id="5126498">)</span>&nbsp;<span class="builtintype" id="5126500">error</span>&nbsp;<span class="op" id="5126506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126509">//&nbsp;Refining&nbsp;a&nbsp;DC&nbsp;component&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126549">if</span>&nbsp;<span class="ident" id="5126552"><a href="/gostd/image/jpeg/scan.go.html#5126469">zigStart</a></span>&nbsp;<span class="op" id="5126561">==</span>&nbsp;<span class="num" id="5126564">0</span>&nbsp;<span class="op" id="5126566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126570">if</span>&nbsp;<span class="ident" id="5126573"><a href="/gostd/image/jpeg/scan.go.html#5126479">zigEnd</a></span>&nbsp;<span class="op" id="5126580">!=</span>&nbsp;<span class="num" id="5126583">0</span>&nbsp;<span class="op" id="5126585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5126590">panic</span><span class="op" id="5126595">(</span><span class="string" id="5126596">&#34;unreachable&#34;</span><span class="op" id="5126609">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126617">bit</span><span class="op" id="5126620">,</span>&nbsp;<span class="ident" id="5126622">err</span>&nbsp;<span class="op" id="5126626">:=</span>&nbsp;<span class="ident" id="5126629"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5126630">.</span><span class="ident" id="5126631"><a href="/gostd/image/jpeg/huffman.go.html#5094601">decodeBit</a></span><span class="op" id="5126640">(</span><span class="op" id="5126641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126645">if</span>&nbsp;<span class="ident" id="5126648"><a href="/gostd/image/jpeg/scan.go.html#5126622">err</a></span>&nbsp;<span class="op" id="5126652">!=</span>&nbsp;<span class="builtintype" id="5126655">nil</span>&nbsp;<span class="op" id="5126659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126664">return</span>&nbsp;<span class="ident" id="5126671"><a href="/gostd/image/jpeg/scan.go.html#5126622">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126677">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126681">if</span>&nbsp;<span class="ident" id="5126684"><a href="/gostd/image/jpeg/scan.go.html#5126617">bit</a></span>&nbsp;<span class="op" id="5126688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126693"><a href="/gostd/image/jpeg/scan.go.html#5126447">b</a></span><span class="op" id="5126694">[</span><span class="num" id="5126695">0</span><span class="op" id="5126696">]</span>&nbsp;<span class="op" id="5126698">|=</span>&nbsp;<span class="ident" id="5126701"><a href="/gostd/image/jpeg/scan.go.html#5126487">delta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126713">return</span>&nbsp;<span class="builtintype" id="5126720">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126725">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126729">//&nbsp;Refining&nbsp;AC&nbsp;components&nbsp;is&nbsp;more&nbsp;complicated;&nbsp;see&nbsp;sections&nbsp;G.1.2.2&nbsp;and&nbsp;G.1.2.3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126811">zig</span>&nbsp;<span class="op" id="5126815">:=</span>&nbsp;<span class="ident" id="5126818"><a href="/gostd/image/jpeg/scan.go.html#5126469">zigStart</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126828">if</span>&nbsp;<span class="ident" id="5126831"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5126832">.</span><span class="ident" id="5126833"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5126840">==</span>&nbsp;<span class="num" id="5126843">0</span>&nbsp;<span class="op" id="5126845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126848">loop</span><span class="op" id="5126852">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126856">for</span>&nbsp;<span class="op" id="5126860">;</span>&nbsp;<span class="ident" id="5126862"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span>&nbsp;<span class="op" id="5126866">&lt;=</span>&nbsp;<span class="ident" id="5126869"><a href="/gostd/image/jpeg/scan.go.html#5126479">zigEnd</a></span><span class="op" id="5126875">;</span>&nbsp;<span class="ident" id="5126877"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span><span class="op" id="5126880">++</span>&nbsp;<span class="op" id="5126883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126888">z</span>&nbsp;<span class="op" id="5126890">:=</span>&nbsp;<span class="builtintype" id="5126893">int32</span><span class="op" id="5126898">(</span><span class="num" id="5126899">0</span><span class="op" id="5126900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126905">value</span><span class="op" id="5126910">,</span>&nbsp;<span class="ident" id="5126912">err</span>&nbsp;<span class="op" id="5126916">:=</span>&nbsp;<span class="ident" id="5126919"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5126920">.</span><span class="ident" id="5126921"><a href="/gostd/image/jpeg/huffman.go.html#5093508">decodeHuffman</a></span><span class="op" id="5126934">(</span><span class="ident" id="5126935"><a href="/gostd/image/jpeg/scan.go.html#5126457">h</a></span><span class="op" id="5126936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126941">if</span>&nbsp;<span class="ident" id="5126944"><a href="/gostd/image/jpeg/scan.go.html#5126912">err</a></span>&nbsp;<span class="op" id="5126948">!=</span>&nbsp;<span class="builtintype" id="5126951">nil</span>&nbsp;<span class="op" id="5126955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126961">return</span>&nbsp;<span class="ident" id="5126968"><a href="/gostd/image/jpeg/scan.go.html#5126912">err</a></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126980">val0</span>&nbsp;<span class="op" id="5126985">:=</span>&nbsp;<span class="ident" id="5126988"><a href="/gostd/image/jpeg/scan.go.html#5126905">value</a></span>&nbsp;<span class="op" id="5126994">&gt;&gt;</span>&nbsp;<span class="num" id="5126997">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127002">val1</span>&nbsp;<span class="op" id="5127007">:=</span>&nbsp;<span class="ident" id="5127010"><a href="/gostd/image/jpeg/scan.go.html#5126905">value</a></span>&nbsp;<span class="op" id="5127016">&amp;</span>&nbsp;<span class="num" id="5127018">0x0f</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127027">switch</span>&nbsp;<span class="ident" id="5127034"><a href="/gostd/image/jpeg/scan.go.html#5127002">val1</a></span>&nbsp;<span class="op" id="5127039">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127044">case</span>&nbsp;<span class="num" id="5127049">0</span><span class="op" id="5127050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127056">if</span>&nbsp;<span class="ident" id="5127059"><a href="/gostd/image/jpeg/scan.go.html#5126980">val0</a></span>&nbsp;<span class="op" id="5127064">!=</span>&nbsp;<span class="num" id="5127067">0x0f</span>&nbsp;<span class="op" id="5127072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127079"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127080">.</span><span class="ident" id="5127081"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5127088">=</span>&nbsp;<span class="builtintype" id="5127090">uint16</span><span class="op" id="5127096">(</span><span class="num" id="5127097">1</span>&nbsp;<span class="op" id="5127099">&lt;&lt;</span>&nbsp;<span class="ident" id="5127102"><a href="/gostd/image/jpeg/scan.go.html#5126980">val0</a></span><span class="op" id="5127106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127113">if</span>&nbsp;<span class="ident" id="5127116"><a href="/gostd/image/jpeg/scan.go.html#5126980">val0</a></span>&nbsp;<span class="op" id="5127121">!=</span>&nbsp;<span class="num" id="5127124">0</span>&nbsp;<span class="op" id="5127126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127134">bits</span><span class="op" id="5127138">,</span>&nbsp;<span class="ident" id="5127140">err</span>&nbsp;<span class="op" id="5127144">:=</span>&nbsp;<span class="ident" id="5127147"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127148">.</span><span class="ident" id="5127149"><a href="/gostd/image/jpeg/huffman.go.html#5094817">decodeBits</a></span><span class="op" id="5127159">(</span><span class="builtintype" id="5127160">int32</span><span class="op" id="5127165">(</span><span class="ident" id="5127166"><a href="/gostd/image/jpeg/scan.go.html#5126980">val0</a></span><span class="op" id="5127170">)</span><span class="op" id="5127171">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127179">if</span>&nbsp;<span class="ident" id="5127182"><a href="/gostd/image/jpeg/scan.go.html#5127140">err</a></span>&nbsp;<span class="op" id="5127186">!=</span>&nbsp;<span class="builtintype" id="5127189">nil</span>&nbsp;<span class="op" id="5127193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127202">return</span>&nbsp;<span class="ident" id="5127209"><a href="/gostd/image/jpeg/scan.go.html#5127140">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127227"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127228">.</span><span class="ident" id="5127229"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5127236">|=</span>&nbsp;<span class="builtintype" id="5127239">uint16</span><span class="op" id="5127245">(</span><span class="ident" id="5127246"><a href="/gostd/image/jpeg/scan.go.html#5127134">bits</a></span><span class="op" id="5127250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127257">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127264">break</span>&nbsp;<span class="ident" id="5127270"><a href="/gostd/image/jpeg/scan.go.html#5126848">loop</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127284">case</span>&nbsp;<span class="num" id="5127289">1</span><span class="op" id="5127290">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127296"><a href="/gostd/image/jpeg/scan.go.html#5126888">z</a></span>&nbsp;<span class="op" id="5127298">=</span>&nbsp;<span class="ident" id="5127300"><a href="/gostd/image/jpeg/scan.go.html#5126487">delta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127310">bit</span><span class="op" id="5127313">,</span>&nbsp;<span class="ident" id="5127315">err</span>&nbsp;<span class="op" id="5127319">:=</span>&nbsp;<span class="ident" id="5127322"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127323">.</span><span class="ident" id="5127324"><a href="/gostd/image/jpeg/huffman.go.html#5094601">decodeBit</a></span><span class="op" id="5127333">(</span><span class="op" id="5127334">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127340">if</span>&nbsp;<span class="ident" id="5127343"><a href="/gostd/image/jpeg/scan.go.html#5127315">err</a></span>&nbsp;<span class="op" id="5127347">!=</span>&nbsp;<span class="builtintype" id="5127350">nil</span>&nbsp;<span class="op" id="5127354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127361">return</span>&nbsp;<span class="ident" id="5127368"><a href="/gostd/image/jpeg/scan.go.html#5127315">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127382">if</span>&nbsp;<span class="op" id="5127385">!</span><span class="ident" id="5127386"><a href="/gostd/image/jpeg/scan.go.html#5127310">bit</a></span>&nbsp;<span class="op" id="5127390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127397"><a href="/gostd/image/jpeg/scan.go.html#5126888">z</a></span>&nbsp;<span class="op" id="5127399">=</span>&nbsp;<span class="op" id="5127401">-</span><span class="ident" id="5127402"><a href="/gostd/image/jpeg/scan.go.html#5126888">z</a></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127413">default</span><span class="op" id="5127420">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127426">return</span>&nbsp;<span class="ident" id="5127433"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5127444">(</span><span class="string" id="5127445">&#34;unexpected&nbsp;Huffman&nbsp;code&#34;</span><span class="op" id="5127470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127481"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span><span class="op" id="5127484">,</span>&nbsp;<span class="ident" id="5127486"><a href="/gostd/image/jpeg/scan.go.html#5126912">err</a></span>&nbsp;<span class="op" id="5127490">=</span>&nbsp;<span class="ident" id="5127492"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127493">.</span><span class="ident" id="5127494"><a href="/gostd/image/jpeg/scan.go.html#5127994">refineNonZeroes</a></span><span class="op" id="5127509">(</span><span class="ident" id="5127510"><a href="/gostd/image/jpeg/scan.go.html#5126447">b</a></span><span class="op" id="5127511">,</span>&nbsp;<span class="ident" id="5127513"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span><span class="op" id="5127516">,</span>&nbsp;<span class="ident" id="5127518"><a href="/gostd/image/jpeg/scan.go.html#5126479">zigEnd</a></span><span class="op" id="5127524">,</span>&nbsp;<span class="builtintype" id="5127526">int32</span><span class="op" id="5127531">(</span><span class="ident" id="5127532"><a href="/gostd/image/jpeg/scan.go.html#5126980">val0</a></span><span class="op" id="5127536">)</span><span class="op" id="5127537">,</span>&nbsp;<span class="ident" id="5127539"><a href="/gostd/image/jpeg/scan.go.html#5126487">delta</a></span><span class="op" id="5127544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127549">if</span>&nbsp;<span class="ident" id="5127552"><a href="/gostd/image/jpeg/scan.go.html#5126912">err</a></span>&nbsp;<span class="op" id="5127556">!=</span>&nbsp;<span class="builtintype" id="5127559">nil</span>&nbsp;<span class="op" id="5127563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127569">return</span>&nbsp;<span class="ident" id="5127576"><a href="/gostd/image/jpeg/scan.go.html#5126912">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127588">if</span>&nbsp;<span class="ident" id="5127591"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span>&nbsp;<span class="op" id="5127595">&gt;</span>&nbsp;<span class="ident" id="5127597"><a href="/gostd/image/jpeg/scan.go.html#5126479">zigEnd</a></span>&nbsp;<span class="op" id="5127604">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127610">return</span>&nbsp;<span class="ident" id="5127617"><a href="/gostd/image/jpeg/reader.go.html#5100751">FormatError</a></span><span class="op" id="5127628">(</span><span class="string" id="5127629">&#34;too&nbsp;many&nbsp;coefficients&#34;</span><span class="op" id="5127652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127662">if</span>&nbsp;<span class="ident" id="5127665"><a href="/gostd/image/jpeg/scan.go.html#5126888">z</a></span>&nbsp;<span class="op" id="5127667">!=</span>&nbsp;<span class="num" id="5127670">0</span>&nbsp;<span class="op" id="5127672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127678"><a href="/gostd/image/jpeg/scan.go.html#5126447">b</a></span><span class="op" id="5127679">[</span><span class="ident" id="5127680"><a href="/gostd/image/jpeg/reader.go.html#5102573">unzig</a></span><span class="op" id="5127685">[</span><span class="ident" id="5127686"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span><span class="op" id="5127689">]</span><span class="op" id="5127690">]</span>&nbsp;<span class="op" id="5127692">=</span>&nbsp;<span class="ident" id="5127694"><a href="/gostd/image/jpeg/scan.go.html#5126888">z</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127699">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127709">if</span>&nbsp;<span class="ident" id="5127712"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127713">.</span><span class="ident" id="5127714"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span>&nbsp;<span class="op" id="5127721">&gt;</span>&nbsp;<span class="num" id="5127723">0</span>&nbsp;<span class="op" id="5127725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127729"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127730">.</span><span class="ident" id="5127731"><a href="/gostd/image/jpeg/reader.go.html#5103935">eobRun</a></span><span class="op" id="5127737">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127742">if</span>&nbsp;<span class="ident" id="5127745">_</span><span class="op" id="5127746">,</span>&nbsp;<span class="ident" id="5127748">err</span>&nbsp;<span class="op" id="5127752">:=</span>&nbsp;<span class="ident" id="5127755"><a href="/gostd/image/jpeg/scan.go.html#5126428">d</a></span><span class="op" id="5127756">.</span><span class="ident" id="5127757"><a href="/gostd/image/jpeg/scan.go.html#5127994">refineNonZeroes</a></span><span class="op" id="5127772">(</span><span class="ident" id="5127773"><a href="/gostd/image/jpeg/scan.go.html#5126447">b</a></span><span class="op" id="5127774">,</span>&nbsp;<span class="ident" id="5127776"><a href="/gostd/image/jpeg/scan.go.html#5126811">zig</a></span><span class="op" id="5127779">,</span>&nbsp;<span class="ident" id="5127781"><a href="/gostd/image/jpeg/scan.go.html#5126479">zigEnd</a></span><span class="op" id="5127787">,</span>&nbsp;<span class="op" id="5127789">-</span><span class="num" id="5127790">1</span><span class="op" id="5127791">,</span>&nbsp;<span class="ident" id="5127793"><a href="/gostd/image/jpeg/scan.go.html#5126487">delta</a></span><span class="op" id="5127798">)</span><span class="op" id="5127799">;</span>&nbsp;<span class="ident" id="5127801"><a href="/gostd/image/jpeg/scan.go.html#5127748">err</a></span>&nbsp;<span class="op" id="5127805">!=</span>&nbsp;<span class="builtintype" id="5127808">nil</span>&nbsp;<span class="op" id="5127812">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127817">return</span>&nbsp;<span class="ident" id="5127824"><a href="/gostd/image/jpeg/scan.go.html#5127748">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127836">return</span>&nbsp;<span class="builtintype" id="5127843">nil</span><br>
<span class="lineno"></span><span class="op" id="5127847">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="5127850">//&nbsp;refineNonZeroes&nbsp;refines&nbsp;non-zero&nbsp;entries&nbsp;of&nbsp;b&nbsp;in&nbsp;zig-zag&nbsp;order.&nbsp;If&nbsp;nz&nbsp;&gt;=&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="5127929">//&nbsp;the&nbsp;first&nbsp;nz&nbsp;zero&nbsp;entries&nbsp;are&nbsp;skipped&nbsp;over.</span><br>
<span class="lineno"></span><span class="keyword" id="5127976">func</span>&nbsp;<span class="op" id="5127981">(</span><span class="ident" id="5127982">d</span>&nbsp;<span class="op" id="5127984">*</span><span class="ident" id="5127985"><a href="/gostd/image/jpeg/reader.go.html#5103264">decoder</a></span><span class="op" id="5127992">)</span>&nbsp;<span class="ident" id="5127994">refineNonZeroes</span><span class="op" id="5128009">(</span><span class="ident" id="5128010">b</span>&nbsp;<span class="op" id="5128012">*</span><span class="ident" id="5128013"><a href="/gostd/image/jpeg/idct.go.html#5096709">block</a></span><span class="op" id="5128018">,</span>&nbsp;<span class="ident" id="5128020">zig</span><span class="op" id="5128023">,</span>&nbsp;<span class="ident" id="5128025">zigEnd</span><span class="op" id="5128031">,</span>&nbsp;<span class="ident" id="5128033">nz</span><span class="op" id="5128035">,</span>&nbsp;<span class="ident" id="5128037">delta</span>&nbsp;<span class="builtintype" id="5128043">int32</span><span class="op" id="5128048">)</span>&nbsp;<span class="op" id="5128050">(</span><span class="builtintype" id="5128051">int32</span><span class="op" id="5128056">,</span>&nbsp;<span class="builtintype" id="5128058">error</span><span class="op" id="5128063">)</span>&nbsp;<span class="op" id="5128065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128068">for</span>&nbsp;<span class="op" id="5128072">;</span>&nbsp;<span class="ident" id="5128074"><a href="/gostd/image/jpeg/scan.go.html#5128020">zig</a></span>&nbsp;<span class="op" id="5128078">&lt;=</span>&nbsp;<span class="ident" id="5128081"><a href="/gostd/image/jpeg/scan.go.html#5128025">zigEnd</a></span><span class="op" id="5128087">;</span>&nbsp;<span class="ident" id="5128089"><a href="/gostd/image/jpeg/scan.go.html#5128020">zig</a></span><span class="op" id="5128092">++</span>&nbsp;<span class="op" id="5128095">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128099">u</span>&nbsp;<span class="op" id="5128101">:=</span>&nbsp;<span class="ident" id="5128104"><a href="/gostd/image/jpeg/reader.go.html#5102573">unzig</a></span><span class="op" id="5128109">[</span><span class="ident" id="5128110"><a href="/gostd/image/jpeg/scan.go.html#5128020">zig</a></span><span class="op" id="5128113">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128117">if</span>&nbsp;<span class="ident" id="5128120"><a href="/gostd/image/jpeg/scan.go.html#5128010">b</a></span><span class="op" id="5128121">[</span><span class="ident" id="5128122"><a href="/gostd/image/jpeg/scan.go.html#5128099">u</a></span><span class="op" id="5128123">]</span>&nbsp;<span class="op" id="5128125">==</span>&nbsp;<span class="num" id="5128128">0</span>&nbsp;<span class="op" id="5128130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128135">if</span>&nbsp;<span class="ident" id="5128138"><a href="/gostd/image/jpeg/scan.go.html#5128033">nz</a></span>&nbsp;<span class="op" id="5128141">==</span>&nbsp;<span class="num" id="5128144">0</span>&nbsp;<span class="op" id="5128146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128152">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128161">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128166"><a href="/gostd/image/jpeg/scan.go.html#5128033">nz</a></span><span class="op" id="5128168">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128174">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128189">bit</span><span class="op" id="5128192">,</span>&nbsp;<span class="ident" id="5128194">err</span>&nbsp;<span class="op" id="5128198">:=</span>&nbsp;<span class="ident" id="5128201"><a href="/gostd/image/jpeg/scan.go.html#5127982">d</a></span><span class="op" id="5128202">.</span><span class="ident" id="5128203"><a href="/gostd/image/jpeg/huffman.go.html#5094601">decodeBit</a></span><span class="op" id="5128212">(</span><span class="op" id="5128213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128217">if</span>&nbsp;<span class="ident" id="5128220"><a href="/gostd/image/jpeg/scan.go.html#5128194">err</a></span>&nbsp;<span class="op" id="5128224">!=</span>&nbsp;<span class="builtintype" id="5128227">nil</span>&nbsp;<span class="op" id="5128231">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128236">return</span>&nbsp;<span class="num" id="5128243">0</span><span class="op" id="5128244">,</span>&nbsp;<span class="ident" id="5128246"><a href="/gostd/image/jpeg/scan.go.html#5128194">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128256">if</span>&nbsp;<span class="op" id="5128259">!</span><span class="ident" id="5128260"><a href="/gostd/image/jpeg/scan.go.html#5128189">bit</a></span>&nbsp;<span class="op" id="5128264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128269">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128280">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128284">if</span>&nbsp;<span class="ident" id="5128287"><a href="/gostd/image/jpeg/scan.go.html#5128010">b</a></span><span class="op" id="5128288">[</span><span class="ident" id="5128289"><a href="/gostd/image/jpeg/scan.go.html#5128099">u</a></span><span class="op" id="5128290">]</span>&nbsp;<span class="op" id="5128292">&gt;=</span>&nbsp;<span class="num" id="5128295">0</span>&nbsp;<span class="op" id="5128297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128302"><a href="/gostd/image/jpeg/scan.go.html#5128010">b</a></span><span class="op" id="5128303">[</span><span class="ident" id="5128304"><a href="/gostd/image/jpeg/scan.go.html#5128099">u</a></span><span class="op" id="5128305">]</span>&nbsp;<span class="op" id="5128307">+=</span>&nbsp;<span class="ident" id="5128310"><a href="/gostd/image/jpeg/scan.go.html#5128037">delta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128318">}</span>&nbsp;<span class="keyword" id="5128320">else</span>&nbsp;<span class="op" id="5128325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128330"><a href="/gostd/image/jpeg/scan.go.html#5128010">b</a></span><span class="op" id="5128331">[</span><span class="ident" id="5128332"><a href="/gostd/image/jpeg/scan.go.html#5128099">u</a></span><span class="op" id="5128333">]</span>&nbsp;<span class="op" id="5128335">-=</span>&nbsp;<span class="ident" id="5128338"><a href="/gostd/image/jpeg/scan.go.html#5128037">delta</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128346">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128352">return</span>&nbsp;<span class="ident" id="5128359"><a href="/gostd/image/jpeg/scan.go.html#5128020">zig</a></span><span class="op" id="5128362">,</span>&nbsp;<span class="builtintype" id="5128364">nil</span><br>
<span class="lineno"></span><span class="op" id="5128368">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
