<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html" class="current">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8205828">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8205884">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8205938">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8205989">package</span>&nbsp;<span class="ident" id="8205997">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8206004">import</span>&nbsp;<span class="op" id="8206011">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206014">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206025">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8206035">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8206038">var</span>&nbsp;<span class="op" id="8206042">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206045">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8206055">=</span>&nbsp;<span class="ident" id="8206057">runtime</span><span class="op" id="8206064">.</span><span class="ident" id="8206065">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206071">thisArch</span>&nbsp;&nbsp;<span class="op" id="8206081">=</span>&nbsp;<span class="ident" id="8206083">runtime</span><span class="op" id="8206090">.</span><span class="ident" id="8206091">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206099">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8206109">=</span>&nbsp;<span class="ident" id="8206111">anotherOS</span><span class="op" id="8206120">(</span><span class="op" id="8206121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206124">otherArch</span>&nbsp;<span class="op" id="8206134">=</span>&nbsp;<span class="ident" id="8206136">anotherArch</span><span class="op" id="8206147">(</span><span class="op" id="8206148">)</span><br>
<span class="lineno"></span><span class="op" id="8206150">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8206153">func</span>&nbsp;<span class="ident" id="8206158">anotherOS</span><span class="op" id="8206167">(</span><span class="op" id="8206168">)</span>&nbsp;<span class="builtintype" id="8206170">string</span>&nbsp;<span class="op" id="8206177">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8206180">if</span>&nbsp;<span class="ident" id="8206183">thisOS</span>&nbsp;<span class="op" id="8206190">!=</span>&nbsp;<span class="string" id="8206193">&#34;darwin&#34;</span>&nbsp;<span class="op" id="8206202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8206206">return</span>&nbsp;<span class="string" id="8206213">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8206226">return</span>&nbsp;<span class="string" id="8206233">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="8206241">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8206244">func</span>&nbsp;<span class="ident" id="8206249">anotherArch</span><span class="op" id="8206260">(</span><span class="op" id="8206261">)</span>&nbsp;<span class="builtintype" id="8206263">string</span>&nbsp;<span class="op" id="8206270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8206273">if</span>&nbsp;<span class="ident" id="8206276">thisArch</span>&nbsp;<span class="op" id="8206285">!=</span>&nbsp;<span class="string" id="8206288">&#34;amd64&#34;</span>&nbsp;<span class="op" id="8206296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8206300">return</span>&nbsp;<span class="string" id="8206307">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206316">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8206319">return</span>&nbsp;<span class="string" id="8206326">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="8206332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8206335">type</span>&nbsp;<span class="ident" id="8206340">GoodFileTest</span>&nbsp;<span class="keyword" id="8206353">struct</span>&nbsp;<span class="op" id="8206360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206363">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8206370">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206378">result</span>&nbsp;<span class="builtintype" id="8206385">bool</span><br>
<span class="lineno"></span><span class="op" id="8206390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8206393">var</span>&nbsp;<span class="ident" id="8206397">tests</span>&nbsp;<span class="op" id="8206403">=</span>&nbsp;<span class="op" id="8206405">[</span><span class="op" id="8206406">]</span><span class="ident" id="8206407">GoodFileTest</span><span class="op" id="8206419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206422">{</span><span class="string" id="8206423">&#34;file.go&#34;</span><span class="op" id="8206432">,</span>&nbsp;<span class="builtintype" id="8206434">true</span><span class="op" id="8206438">}</span><span class="op" id="8206439">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206442">{</span><span class="string" id="8206443">&#34;file.c&#34;</span><span class="op" id="8206451">,</span>&nbsp;<span class="builtintype" id="8206453">true</span><span class="op" id="8206457">}</span><span class="op" id="8206458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206461">{</span><span class="string" id="8206462">&#34;file_foo.go&#34;</span><span class="op" id="8206475">,</span>&nbsp;<span class="builtintype" id="8206477">true</span><span class="op" id="8206481">}</span><span class="op" id="8206482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206485">{</span><span class="string" id="8206486">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206494">+</span>&nbsp;<span class="ident" id="8206496">thisArch</span>&nbsp;<span class="op" id="8206505">+</span>&nbsp;<span class="string" id="8206507">&#34;.go&#34;</span><span class="op" id="8206512">,</span>&nbsp;<span class="builtintype" id="8206514">true</span><span class="op" id="8206518">}</span><span class="op" id="8206519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206522">{</span><span class="string" id="8206523">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206531">+</span>&nbsp;<span class="ident" id="8206533">otherArch</span>&nbsp;<span class="op" id="8206543">+</span>&nbsp;<span class="string" id="8206545">&#34;.go&#34;</span><span class="op" id="8206550">,</span>&nbsp;<span class="builtintype" id="8206552">false</span><span class="op" id="8206557">}</span><span class="op" id="8206558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206561">{</span><span class="string" id="8206562">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206570">+</span>&nbsp;<span class="ident" id="8206572">thisOS</span>&nbsp;<span class="op" id="8206579">+</span>&nbsp;<span class="string" id="8206581">&#34;.go&#34;</span><span class="op" id="8206586">,</span>&nbsp;<span class="builtintype" id="8206588">true</span><span class="op" id="8206592">}</span><span class="op" id="8206593">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206596">{</span><span class="string" id="8206597">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206605">+</span>&nbsp;<span class="ident" id="8206607">otherOS</span>&nbsp;<span class="op" id="8206615">+</span>&nbsp;<span class="string" id="8206617">&#34;.go&#34;</span><span class="op" id="8206622">,</span>&nbsp;<span class="builtintype" id="8206624">false</span><span class="op" id="8206629">}</span><span class="op" id="8206630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206633">{</span><span class="string" id="8206634">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206642">+</span>&nbsp;<span class="ident" id="8206644">thisOS</span>&nbsp;<span class="op" id="8206651">+</span>&nbsp;<span class="string" id="8206653">&#34;_&#34;</span>&nbsp;<span class="op" id="8206657">+</span>&nbsp;<span class="ident" id="8206659">thisArch</span>&nbsp;<span class="op" id="8206668">+</span>&nbsp;<span class="string" id="8206670">&#34;.go&#34;</span><span class="op" id="8206675">,</span>&nbsp;<span class="builtintype" id="8206677">true</span><span class="op" id="8206681">}</span><span class="op" id="8206682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206685">{</span><span class="string" id="8206686">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206694">+</span>&nbsp;<span class="ident" id="8206696">otherOS</span>&nbsp;<span class="op" id="8206704">+</span>&nbsp;<span class="string" id="8206706">&#34;_&#34;</span>&nbsp;<span class="op" id="8206710">+</span>&nbsp;<span class="ident" id="8206712">thisArch</span>&nbsp;<span class="op" id="8206721">+</span>&nbsp;<span class="string" id="8206723">&#34;.go&#34;</span><span class="op" id="8206728">,</span>&nbsp;<span class="builtintype" id="8206730">false</span><span class="op" id="8206735">}</span><span class="op" id="8206736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206739">{</span><span class="string" id="8206740">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206748">+</span>&nbsp;<span class="ident" id="8206750">thisOS</span>&nbsp;<span class="op" id="8206757">+</span>&nbsp;<span class="string" id="8206759">&#34;_&#34;</span>&nbsp;<span class="op" id="8206763">+</span>&nbsp;<span class="ident" id="8206765">otherArch</span>&nbsp;<span class="op" id="8206775">+</span>&nbsp;<span class="string" id="8206777">&#34;.go&#34;</span><span class="op" id="8206782">,</span>&nbsp;<span class="builtintype" id="8206784">false</span><span class="op" id="8206789">}</span><span class="op" id="8206790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206793">{</span><span class="string" id="8206794">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206802">+</span>&nbsp;<span class="ident" id="8206804">otherOS</span>&nbsp;<span class="op" id="8206812">+</span>&nbsp;<span class="string" id="8206814">&#34;_&#34;</span>&nbsp;<span class="op" id="8206818">+</span>&nbsp;<span class="ident" id="8206820">otherArch</span>&nbsp;<span class="op" id="8206830">+</span>&nbsp;<span class="string" id="8206832">&#34;.go&#34;</span><span class="op" id="8206837">,</span>&nbsp;<span class="builtintype" id="8206839">false</span><span class="op" id="8206844">}</span><span class="op" id="8206845">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206848">{</span><span class="string" id="8206849">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="8206861">+</span>&nbsp;<span class="ident" id="8206863">thisArch</span>&nbsp;<span class="op" id="8206872">+</span>&nbsp;<span class="string" id="8206874">&#34;.go&#34;</span><span class="op" id="8206879">,</span>&nbsp;<span class="builtintype" id="8206881">true</span><span class="op" id="8206885">}</span><span class="op" id="8206886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206889">{</span><span class="string" id="8206890">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="8206902">+</span>&nbsp;<span class="ident" id="8206904">otherArch</span>&nbsp;<span class="op" id="8206914">+</span>&nbsp;<span class="string" id="8206916">&#34;.go&#34;</span><span class="op" id="8206921">,</span>&nbsp;<span class="builtintype" id="8206923">false</span><span class="op" id="8206928">}</span><span class="op" id="8206929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206932">{</span><span class="string" id="8206933">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206941">+</span>&nbsp;<span class="ident" id="8206943">thisOS</span>&nbsp;<span class="op" id="8206950">+</span>&nbsp;<span class="string" id="8206952">&#34;.c&#34;</span><span class="op" id="8206956">,</span>&nbsp;<span class="builtintype" id="8206958">true</span><span class="op" id="8206962">}</span><span class="op" id="8206963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206966">{</span><span class="string" id="8206967">&#34;file_&#34;</span>&nbsp;<span class="op" id="8206975">+</span>&nbsp;<span class="ident" id="8206977">otherOS</span>&nbsp;<span class="op" id="8206985">+</span>&nbsp;<span class="string" id="8206987">&#34;.c&#34;</span><span class="op" id="8206991">,</span>&nbsp;<span class="builtintype" id="8206993">false</span><span class="op" id="8206998">}</span><span class="op" id="8206999">,</span><br>
<span class="lineno"></span><span class="op" id="8207001">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8207004">func</span>&nbsp;<span class="ident" id="8207009">TestGoodOSArch</span><span class="op" id="8207023">(</span><span class="ident" id="8207024">t</span>&nbsp;<span class="op" id="8207026">*</span><span class="ident" id="8207027">testing</span><span class="op" id="8207034">.</span><span class="ident" id="8207035">T</span><span class="op" id="8207036">)</span>&nbsp;<span class="op" id="8207038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207041">for</span>&nbsp;<span class="ident" id="8207045">_</span><span class="op" id="8207046">,</span>&nbsp;<span class="ident" id="8207048">test</span>&nbsp;<span class="op" id="8207053">:=</span>&nbsp;<span class="keyword" id="8207056">range</span>&nbsp;<span class="ident" id="8207062">tests</span>&nbsp;<span class="op" id="8207068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207072">if</span>&nbsp;<span class="ident" id="8207075">Default</span><span class="op" id="8207082">.</span><span class="ident" id="8207083">goodOSArchFile</span><span class="op" id="8207097">(</span><span class="ident" id="8207098">test</span><span class="op" id="8207102">.</span><span class="ident" id="8207103">name</span><span class="op" id="8207107">,</span>&nbsp;<span class="builtinfunc" id="8207109">make</span><span class="op" id="8207113">(</span><span class="keyword" id="8207114">map</span><span class="op" id="8207117">[</span><span class="builtintype" id="8207118">string</span><span class="op" id="8207124">]</span><span class="builtintype" id="8207125">bool</span><span class="op" id="8207129">)</span><span class="op" id="8207130">)</span>&nbsp;<span class="op" id="8207132">!=</span>&nbsp;<span class="ident" id="8207135">test</span><span class="op" id="8207139">.</span><span class="ident" id="8207140">result</span>&nbsp;<span class="op" id="8207147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207152">t</span><span class="op" id="8207153">.</span><span class="ident" id="8207154">Fatalf</span><span class="op" id="8207160">(</span><span class="string" id="8207161">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8207187">,</span>&nbsp;<span class="ident" id="8207189">test</span><span class="op" id="8207193">.</span><span class="ident" id="8207194">name</span><span class="op" id="8207198">,</span>&nbsp;<span class="ident" id="8207200">test</span><span class="op" id="8207204">.</span><span class="ident" id="8207205">result</span><span class="op" id="8207211">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207218">}</span><br>
<span class="lineno"></span><span class="op" id="8207220">}</span>
</div>
</body>
</html>
