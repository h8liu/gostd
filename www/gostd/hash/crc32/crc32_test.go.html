<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html" class="current">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8083834">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8083889">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8083943">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8083994">package</span>&nbsp;<span class="ident" id="8084002">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8084009">import</span>&nbsp;<span class="op" id="8084016">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8084019">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8084025">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8084035">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8084038">type</span>&nbsp;<span class="ident" id="8084043">test</span>&nbsp;<span class="keyword" id="8084048">struct</span>&nbsp;<span class="op" id="8084055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8084058">ieee</span><span class="op" id="8084062">,</span>&nbsp;<span class="ident" id="8084064">castagnoli</span>&nbsp;<span class="builtintype" id="8084075">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8084083">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8084100">string</span><br>
<span class="lineno">15</span><span class="op" id="8084107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8084110">var</span>&nbsp;<span class="ident" id="8084114">golden</span>&nbsp;<span class="op" id="8084121">=</span>&nbsp;<span class="op" id="8084123">[</span><span class="op" id="8084124">]</span><span class="ident" id="8084125">test</span><span class="op" id="8084129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084132">{</span><span class="num" id="8084133">0x0</span><span class="op" id="8084136">,</span>&nbsp;<span class="num" id="8084138">0x0</span><span class="op" id="8084141">,</span>&nbsp;<span class="string" id="8084143">&#34;&#34;</span><span class="op" id="8084145">}</span><span class="op" id="8084146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084149">{</span><span class="num" id="8084150">0xe8b7be43</span><span class="op" id="8084160">,</span>&nbsp;<span class="num" id="8084162">0xc1d04330</span><span class="op" id="8084172">,</span>&nbsp;<span class="string" id="8084174">&#34;a&#34;</span><span class="op" id="8084177">}</span><span class="op" id="8084178">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084181">{</span><span class="num" id="8084182">0x9e83486d</span><span class="op" id="8084192">,</span>&nbsp;<span class="num" id="8084194">0xe2a22936</span><span class="op" id="8084204">,</span>&nbsp;<span class="string" id="8084206">&#34;ab&#34;</span><span class="op" id="8084210">}</span><span class="op" id="8084211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084214">{</span><span class="num" id="8084215">0x352441c2</span><span class="op" id="8084225">,</span>&nbsp;<span class="num" id="8084227">0x364b3fb7</span><span class="op" id="8084237">,</span>&nbsp;<span class="string" id="8084239">&#34;abc&#34;</span><span class="op" id="8084244">}</span><span class="op" id="8084245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084248">{</span><span class="num" id="8084249">0xed82cd11</span><span class="op" id="8084259">,</span>&nbsp;<span class="num" id="8084261">0x92c80a31</span><span class="op" id="8084271">,</span>&nbsp;<span class="string" id="8084273">&#34;abcd&#34;</span><span class="op" id="8084279">}</span><span class="op" id="8084280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084283">{</span><span class="num" id="8084284">0x8587d865</span><span class="op" id="8084294">,</span>&nbsp;<span class="num" id="8084296">0xc450d697</span><span class="op" id="8084306">,</span>&nbsp;<span class="string" id="8084308">&#34;abcde&#34;</span><span class="op" id="8084315">}</span><span class="op" id="8084316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084319">{</span><span class="num" id="8084320">0x4b8e39ef</span><span class="op" id="8084330">,</span>&nbsp;<span class="num" id="8084332">0x53bceff1</span><span class="op" id="8084342">,</span>&nbsp;<span class="string" id="8084344">&#34;abcdef&#34;</span><span class="op" id="8084352">}</span><span class="op" id="8084353">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084356">{</span><span class="num" id="8084357">0x312a6aa6</span><span class="op" id="8084367">,</span>&nbsp;<span class="num" id="8084369">0xe627f441</span><span class="op" id="8084379">,</span>&nbsp;<span class="string" id="8084381">&#34;abcdefg&#34;</span><span class="op" id="8084390">}</span><span class="op" id="8084391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084394">{</span><span class="num" id="8084395">0xaeef2a50</span><span class="op" id="8084405">,</span>&nbsp;<span class="num" id="8084407">0xa9421b7</span><span class="op" id="8084416">,</span>&nbsp;<span class="string" id="8084418">&#34;abcdefgh&#34;</span><span class="op" id="8084428">}</span><span class="op" id="8084429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084432">{</span><span class="num" id="8084433">0x8da988af</span><span class="op" id="8084443">,</span>&nbsp;<span class="num" id="8084445">0x2ddc99fc</span><span class="op" id="8084455">,</span>&nbsp;<span class="string" id="8084457">&#34;abcdefghi&#34;</span><span class="op" id="8084468">}</span><span class="op" id="8084469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084472">{</span><span class="num" id="8084473">0x3981703a</span><span class="op" id="8084483">,</span>&nbsp;<span class="num" id="8084485">0xe6599437</span><span class="op" id="8084495">,</span>&nbsp;<span class="string" id="8084497">&#34;abcdefghij&#34;</span><span class="op" id="8084509">}</span><span class="op" id="8084510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084513">{</span><span class="num" id="8084514">0x6b9cdfe7</span><span class="op" id="8084524">,</span>&nbsp;<span class="num" id="8084526">0xb2cc01fe</span><span class="op" id="8084536">,</span>&nbsp;<span class="string" id="8084538">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="8084581">}</span><span class="op" id="8084582">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084585">{</span><span class="num" id="8084586">0xc90ef73f</span><span class="op" id="8084596">,</span>&nbsp;<span class="num" id="8084598">0xe28207f</span><span class="op" id="8084607">,</span>&nbsp;<span class="string" id="8084609">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="8084668">}</span><span class="op" id="8084669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084672">{</span><span class="num" id="8084673">0xb902341f</span><span class="op" id="8084683">,</span>&nbsp;<span class="num" id="8084685">0xbe93f964</span><span class="op" id="8084695">,</span>&nbsp;<span class="string" id="8084697">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="8084741">}</span><span class="op" id="8084742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084745">{</span><span class="num" id="8084746">0x42080e8</span><span class="op" id="8084755">,</span>&nbsp;<span class="num" id="8084757">0x9e3be0c3</span><span class="op" id="8084767">,</span>&nbsp;<span class="string" id="8084769">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="8084828">}</span><span class="op" id="8084829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084832">{</span><span class="num" id="8084833">0x154c6d11</span><span class="op" id="8084843">,</span>&nbsp;<span class="num" id="8084845">0xf505ef04</span><span class="op" id="8084855">,</span>&nbsp;<span class="string" id="8084857">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="8084917">}</span><span class="op" id="8084918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084921">{</span><span class="num" id="8084922">0x4c418325</span><span class="op" id="8084932">,</span>&nbsp;<span class="num" id="8084934">0x85d3dc82</span><span class="op" id="8084944">,</span>&nbsp;<span class="string" id="8084946">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="8084975">}</span><span class="op" id="8084976">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8084979">{</span><span class="num" id="8084980">0x33955150</span><span class="op" id="8084990">,</span>&nbsp;<span class="num" id="8084992">0xc5142380</span><span class="op" id="8085002">,</span>&nbsp;<span class="string" id="8085004">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="8085073">}</span><span class="op" id="8085074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085077">{</span><span class="num" id="8085078">0x26216a4b</span><span class="op" id="8085088">,</span>&nbsp;<span class="num" id="8085090">0x75eb77dd</span><span class="op" id="8085100">,</span>&nbsp;<span class="string" id="8085102">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="8085161">}</span><span class="op" id="8085162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085165">{</span><span class="num" id="8085166">0x1abbe45e</span><span class="op" id="8085176">,</span>&nbsp;<span class="num" id="8085178">0x91ebe9f7</span><span class="op" id="8085188">,</span>&nbsp;<span class="string" id="8085190">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="8085280">}</span><span class="op" id="8085281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085284">{</span><span class="num" id="8085285">0xc89a94f7</span><span class="op" id="8085295">,</span>&nbsp;<span class="num" id="8085297">0xf0b1168e</span><span class="op" id="8085307">,</span>&nbsp;<span class="string" id="8085309">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="8085386">}</span><span class="op" id="8085387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085390">{</span><span class="num" id="8085391">0xab3abe14</span><span class="op" id="8085401">,</span>&nbsp;<span class="num" id="8085403">0x572b74e2</span><span class="op" id="8085413">,</span>&nbsp;<span class="string" id="8085415">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="8085441">}</span><span class="op" id="8085442">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085445">{</span><span class="num" id="8085446">0xbab102b6</span><span class="op" id="8085456">,</span>&nbsp;<span class="num" id="8085458">0x8a58a6d5</span><span class="op" id="8085468">,</span>&nbsp;<span class="string" id="8085470">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="8085521">}</span><span class="op" id="8085522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085525">{</span><span class="num" id="8085526">0x999149d7</span><span class="op" id="8085536">,</span>&nbsp;<span class="num" id="8085538">0x9c426c50</span><span class="op" id="8085548">,</span>&nbsp;<span class="string" id="8085550">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="8085624">}</span><span class="op" id="8085625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085628">{</span><span class="num" id="8085629">0x6d52a33c</span><span class="op" id="8085639">,</span>&nbsp;<span class="num" id="8085641">0x735400a4</span><span class="op" id="8085651">,</span>&nbsp;<span class="string" id="8085653">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="8085701">}</span><span class="op" id="8085702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085705">{</span><span class="num" id="8085706">0x90631e8d</span><span class="op" id="8085716">,</span>&nbsp;<span class="num" id="8085718">0xbec49c95</span><span class="op" id="8085728">,</span>&nbsp;<span class="string" id="8085730">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="8085802">}</span><span class="op" id="8085803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085806">{</span><span class="num" id="8085807">0x78309130</span><span class="op" id="8085817">,</span>&nbsp;<span class="num" id="8085819">0xa95a2079</span><span class="op" id="8085829">,</span>&nbsp;<span class="string" id="8085831">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="8085901">}</span><span class="op" id="8085902">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085905">{</span><span class="num" id="8085906">0x7d0a377f</span><span class="op" id="8085916">,</span>&nbsp;<span class="num" id="8085918">0xde2e65c5</span><span class="op" id="8085928">,</span>&nbsp;<span class="string" id="8085930">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="8085964">}</span><span class="op" id="8085965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8085968">{</span><span class="num" id="8085969">0x8c79fd79</span><span class="op" id="8085979">,</span>&nbsp;<span class="num" id="8085981">0x297a88ed</span><span class="op" id="8085991">,</span>&nbsp;<span class="string" id="8085993">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="8086083">}</span><span class="op" id="8086084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8086087">{</span><span class="num" id="8086088">0xa20b7167</span><span class="op" id="8086098">,</span>&nbsp;<span class="num" id="8086100">0x66ed1d8b</span><span class="op" id="8086110">,</span>&nbsp;<span class="string" id="8086112">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="8086246">}</span><span class="op" id="8086247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8086250">{</span><span class="num" id="8086251">0x8e0bb443</span><span class="op" id="8086261">,</span>&nbsp;<span class="num" id="8086263">0xdcded527</span><span class="op" id="8086273">,</span>&nbsp;<span class="string" id="8086275">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="8086333">}</span><span class="op" id="8086334">,</span><br>
<span class="lineno"></span><span class="op" id="8086336">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8086339">func</span>&nbsp;<span class="ident" id="8086344">TestGolden</span><span class="op" id="8086354">(</span><span class="ident" id="8086355">t</span>&nbsp;<span class="op" id="8086357">*</span><span class="ident" id="8086358">testing</span><span class="op" id="8086365">.</span><span class="ident" id="8086366">T</span><span class="op" id="8086367">)</span>&nbsp;<span class="op" id="8086369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086372">castagnoliTab</span>&nbsp;<span class="op" id="8086386">:=</span>&nbsp;<span class="ident" id="8086389">MakeTable</span><span class="op" id="8086398">(</span><span class="ident" id="8086399">Castagnoli</span><span class="op" id="8086409">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8086413">for</span>&nbsp;<span class="ident" id="8086417">_</span><span class="op" id="8086418">,</span>&nbsp;<span class="ident" id="8086420">g</span>&nbsp;<span class="op" id="8086422">:=</span>&nbsp;<span class="keyword" id="8086425">range</span>&nbsp;<span class="ident" id="8086431">golden</span>&nbsp;<span class="op" id="8086438">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086442">ieee</span>&nbsp;<span class="op" id="8086447">:=</span>&nbsp;<span class="ident" id="8086450">NewIEEE</span><span class="op" id="8086457">(</span><span class="op" id="8086458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086462">io</span><span class="op" id="8086464">.</span><span class="ident" id="8086465">WriteString</span><span class="op" id="8086476">(</span><span class="ident" id="8086477">ieee</span><span class="op" id="8086481">,</span>&nbsp;<span class="ident" id="8086483">g</span><span class="op" id="8086484">.</span><span class="ident" id="8086485">in</span><span class="op" id="8086487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086491">s</span>&nbsp;<span class="op" id="8086493">:=</span>&nbsp;<span class="ident" id="8086496">ieee</span><span class="op" id="8086500">.</span><span class="ident" id="8086501">Sum32</span><span class="op" id="8086506">(</span><span class="op" id="8086507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8086511">if</span>&nbsp;<span class="ident" id="8086514">s</span>&nbsp;<span class="op" id="8086516">!=</span>&nbsp;<span class="ident" id="8086519">g</span><span class="op" id="8086520">.</span><span class="ident" id="8086521">ieee</span>&nbsp;<span class="op" id="8086526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086531">t</span><span class="op" id="8086532">.</span><span class="ident" id="8086533">Errorf</span><span class="op" id="8086539">(</span><span class="string" id="8086540">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8086567">,</span>&nbsp;<span class="ident" id="8086569">g</span><span class="op" id="8086570">.</span><span class="ident" id="8086571">in</span><span class="op" id="8086573">,</span>&nbsp;<span class="ident" id="8086575">s</span><span class="op" id="8086576">,</span>&nbsp;<span class="ident" id="8086578">g</span><span class="op" id="8086579">.</span><span class="ident" id="8086580">ieee</span><span class="op" id="8086584">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8086588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086593">castagnoli</span>&nbsp;<span class="op" id="8086604">:=</span>&nbsp;<span class="ident" id="8086607">New</span><span class="op" id="8086610">(</span><span class="ident" id="8086611">castagnoliTab</span><span class="op" id="8086624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086628">io</span><span class="op" id="8086630">.</span><span class="ident" id="8086631">WriteString</span><span class="op" id="8086642">(</span><span class="ident" id="8086643">castagnoli</span><span class="op" id="8086653">,</span>&nbsp;<span class="ident" id="8086655">g</span><span class="op" id="8086656">.</span><span class="ident" id="8086657">in</span><span class="op" id="8086659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086663">s</span>&nbsp;<span class="op" id="8086665">=</span>&nbsp;<span class="ident" id="8086667">castagnoli</span><span class="op" id="8086677">.</span><span class="ident" id="8086678">Sum32</span><span class="op" id="8086683">(</span><span class="op" id="8086684">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8086688">if</span>&nbsp;<span class="ident" id="8086691">s</span>&nbsp;<span class="op" id="8086693">!=</span>&nbsp;<span class="ident" id="8086696">g</span><span class="op" id="8086697">.</span><span class="ident" id="8086698">castagnoli</span>&nbsp;<span class="op" id="8086709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086714">t</span><span class="op" id="8086715">.</span><span class="ident" id="8086716">Errorf</span><span class="op" id="8086722">(</span><span class="string" id="8086723">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8086756">,</span>&nbsp;<span class="ident" id="8086758">g</span><span class="op" id="8086759">.</span><span class="ident" id="8086760">in</span><span class="op" id="8086762">,</span>&nbsp;<span class="ident" id="8086764">s</span><span class="op" id="8086765">,</span>&nbsp;<span class="ident" id="8086767">g</span><span class="op" id="8086768">.</span><span class="ident" id="8086769">castagnoli</span><span class="op" id="8086779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8086783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8086788">if</span>&nbsp;<span class="builtinfunc" id="8086791">len</span><span class="op" id="8086794">(</span><span class="ident" id="8086795">g</span><span class="op" id="8086796">.</span><span class="ident" id="8086797">in</span><span class="op" id="8086799">)</span>&nbsp;<span class="op" id="8086801">&gt;</span>&nbsp;<span class="num" id="8086803">0</span>&nbsp;<span class="op" id="8086805">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8086810">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8086867">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8086925">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086936">castagnoli</span>&nbsp;<span class="op" id="8086947">=</span>&nbsp;<span class="ident" id="8086949">New</span><span class="op" id="8086952">(</span><span class="ident" id="8086953">castagnoliTab</span><span class="op" id="8086966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8086971">io</span><span class="op" id="8086973">.</span><span class="ident" id="8086974">WriteString</span><span class="op" id="8086985">(</span><span class="ident" id="8086986">castagnoli</span><span class="op" id="8086996">,</span>&nbsp;<span class="ident" id="8086998">g</span><span class="op" id="8086999">.</span><span class="ident" id="8087000">in</span><span class="op" id="8087002">[</span><span class="op" id="8087003">:</span><span class="num" id="8087004">1</span><span class="op" id="8087005">]</span><span class="op" id="8087006">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087011">io</span><span class="op" id="8087013">.</span><span class="ident" id="8087014">WriteString</span><span class="op" id="8087025">(</span><span class="ident" id="8087026">castagnoli</span><span class="op" id="8087036">,</span>&nbsp;<span class="ident" id="8087038">g</span><span class="op" id="8087039">.</span><span class="ident" id="8087040">in</span><span class="op" id="8087042">[</span><span class="num" id="8087043">1</span><span class="op" id="8087044">:</span><span class="op" id="8087045">]</span><span class="op" id="8087046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087051">s</span>&nbsp;<span class="op" id="8087053">=</span>&nbsp;<span class="ident" id="8087055">castagnoli</span><span class="op" id="8087065">.</span><span class="ident" id="8087066">Sum32</span><span class="op" id="8087071">(</span><span class="op" id="8087072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8087077">if</span>&nbsp;<span class="ident" id="8087080">s</span>&nbsp;<span class="op" id="8087082">!=</span>&nbsp;<span class="ident" id="8087085">g</span><span class="op" id="8087086">.</span><span class="ident" id="8087087">castagnoli</span>&nbsp;<span class="op" id="8087098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087104">t</span><span class="op" id="8087105">.</span><span class="ident" id="8087106">Errorf</span><span class="op" id="8087112">(</span><span class="string" id="8087113">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8087158">,</span>&nbsp;<span class="ident" id="8087160">g</span><span class="op" id="8087161">.</span><span class="ident" id="8087162">in</span><span class="op" id="8087164">,</span>&nbsp;<span class="ident" id="8087166">s</span><span class="op" id="8087167">,</span>&nbsp;<span class="ident" id="8087169">g</span><span class="op" id="8087170">.</span><span class="ident" id="8087171">castagnoli</span><span class="op" id="8087181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8087186">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8087190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8087193">}</span><br>
<span class="lineno"></span><span class="op" id="8087195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8087198">func</span>&nbsp;<span class="ident" id="8087203">BenchmarkCrc32KB</span><span class="op" id="8087219">(</span><span class="ident" id="8087220">b</span>&nbsp;<span class="op" id="8087222">*</span><span class="ident" id="8087223">testing</span><span class="op" id="8087230">.</span><span class="ident" id="8087231">B</span><span class="op" id="8087232">)</span>&nbsp;<span class="op" id="8087234">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087237">b</span><span class="op" id="8087238">.</span><span class="ident" id="8087239">SetBytes</span><span class="op" id="8087247">(</span><span class="num" id="8087248">1024</span><span class="op" id="8087252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087255">data</span>&nbsp;<span class="op" id="8087260">:=</span>&nbsp;<span class="builtinfunc" id="8087263">make</span><span class="op" id="8087267">(</span><span class="op" id="8087268">[</span><span class="op" id="8087269">]</span><span class="builtintype" id="8087270">byte</span><span class="op" id="8087274">,</span>&nbsp;<span class="num" id="8087276">1024</span><span class="op" id="8087280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8087283">for</span>&nbsp;<span class="ident" id="8087287">i</span>&nbsp;<span class="op" id="8087289">:=</span>&nbsp;<span class="keyword" id="8087292">range</span>&nbsp;<span class="ident" id="8087298">data</span>&nbsp;<span class="op" id="8087303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087307">data</span><span class="op" id="8087311">[</span><span class="ident" id="8087312">i</span><span class="op" id="8087313">]</span>&nbsp;<span class="op" id="8087315">=</span>&nbsp;<span class="builtintype" id="8087317">byte</span><span class="op" id="8087321">(</span><span class="ident" id="8087322">i</span><span class="op" id="8087323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8087326">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087329">h</span>&nbsp;<span class="op" id="8087331">:=</span>&nbsp;<span class="ident" id="8087334">NewIEEE</span><span class="op" id="8087341">(</span><span class="op" id="8087342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087345">in</span>&nbsp;<span class="op" id="8087348">:=</span>&nbsp;<span class="builtinfunc" id="8087351">make</span><span class="op" id="8087355">(</span><span class="op" id="8087356">[</span><span class="op" id="8087357">]</span><span class="builtintype" id="8087358">byte</span><span class="op" id="8087362">,</span>&nbsp;<span class="num" id="8087364">0</span><span class="op" id="8087365">,</span>&nbsp;<span class="ident" id="8087367">h</span><span class="op" id="8087368">.</span><span class="ident" id="8087369">Size</span><span class="op" id="8087373">(</span><span class="op" id="8087374">)</span><span class="op" id="8087375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087379">b</span><span class="op" id="8087380">.</span><span class="ident" id="8087381">ResetTimer</span><span class="op" id="8087391">(</span><span class="op" id="8087392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8087395">for</span>&nbsp;<span class="ident" id="8087399">i</span>&nbsp;<span class="op" id="8087401">:=</span>&nbsp;<span class="num" id="8087404">0</span><span class="op" id="8087405">;</span>&nbsp;<span class="ident" id="8087407">i</span>&nbsp;<span class="op" id="8087409">&lt;</span>&nbsp;<span class="ident" id="8087411">b</span><span class="op" id="8087412">.</span><span class="ident" id="8087413">N</span><span class="op" id="8087414">;</span>&nbsp;<span class="ident" id="8087416">i</span><span class="op" id="8087417">++</span>&nbsp;<span class="op" id="8087420">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087424">h</span><span class="op" id="8087425">.</span><span class="ident" id="8087426">Reset</span><span class="op" id="8087431">(</span><span class="op" id="8087432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087436">h</span><span class="op" id="8087437">.</span><span class="ident" id="8087438">Write</span><span class="op" id="8087443">(</span><span class="ident" id="8087444">data</span><span class="op" id="8087448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8087452">h</span><span class="op" id="8087453">.</span><span class="ident" id="8087454">Sum</span><span class="op" id="8087457">(</span><span class="ident" id="8087458">in</span><span class="op" id="8087460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8087463">}</span><br>
<span class="lineno"></span><span class="op" id="8087465">}</span>
</div>
</body>
</html>
