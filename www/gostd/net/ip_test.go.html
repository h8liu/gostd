<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7881325">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7881380">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7881434">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7881485">package</span>&nbsp;<span class="ident" id="7881493">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7881498">import</span>&nbsp;<span class="op" id="7881505">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881508">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881519">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881530">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7881540">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7881543">var</span>&nbsp;<span class="ident" id="7881547">parseIPTests</span>&nbsp;<span class="op" id="7881560">=</span>&nbsp;<span class="op" id="7881562">[</span><span class="op" id="7881563">]</span><span class="keyword" id="7881564">struct</span>&nbsp;<span class="op" id="7881571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881574">in</span>&nbsp;&nbsp;<span class="builtintype" id="7881578">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881586">out</span>&nbsp;<span class="ident" id="7881590">IP</span><br>
<span class="lineno"></span><span class="op" id="7881593">}</span><span class="op" id="7881594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881597">{</span><span class="string" id="7881598">&#34;127.0.1.2&#34;</span><span class="op" id="7881609">,</span>&nbsp;<span class="ident" id="7881611">IPv4</span><span class="op" id="7881615">(</span><span class="num" id="7881616">127</span><span class="op" id="7881619">,</span>&nbsp;<span class="num" id="7881621">0</span><span class="op" id="7881622">,</span>&nbsp;<span class="num" id="7881624">1</span><span class="op" id="7881625">,</span>&nbsp;<span class="num" id="7881627">2</span><span class="op" id="7881628">)</span><span class="op" id="7881629">}</span><span class="op" id="7881630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881633">{</span><span class="string" id="7881634">&#34;127.0.0.1&#34;</span><span class="op" id="7881645">,</span>&nbsp;<span class="ident" id="7881647">IPv4</span><span class="op" id="7881651">(</span><span class="num" id="7881652">127</span><span class="op" id="7881655">,</span>&nbsp;<span class="num" id="7881657">0</span><span class="op" id="7881658">,</span>&nbsp;<span class="num" id="7881660">0</span><span class="op" id="7881661">,</span>&nbsp;<span class="num" id="7881663">1</span><span class="op" id="7881664">)</span><span class="op" id="7881665">}</span><span class="op" id="7881666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881669">{</span><span class="string" id="7881670">&#34;127.0.0.256&#34;</span><span class="op" id="7881683">,</span>&nbsp;<span class="ident" id="7881685">nil</span><span class="op" id="7881688">}</span><span class="op" id="7881689">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881692">{</span><span class="string" id="7881693">&#34;abc&#34;</span><span class="op" id="7881698">,</span>&nbsp;<span class="ident" id="7881700">nil</span><span class="op" id="7881703">}</span><span class="op" id="7881704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881707">{</span><span class="string" id="7881708">&#34;123:&#34;</span><span class="op" id="7881714">,</span>&nbsp;<span class="ident" id="7881716">nil</span><span class="op" id="7881719">}</span><span class="op" id="7881720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881723">{</span><span class="string" id="7881724">&#34;::ffff:127.0.0.1&#34;</span><span class="op" id="7881742">,</span>&nbsp;<span class="ident" id="7881744">IPv4</span><span class="op" id="7881748">(</span><span class="num" id="7881749">127</span><span class="op" id="7881752">,</span>&nbsp;<span class="num" id="7881754">0</span><span class="op" id="7881755">,</span>&nbsp;<span class="num" id="7881757">0</span><span class="op" id="7881758">,</span>&nbsp;<span class="num" id="7881760">1</span><span class="op" id="7881761">)</span><span class="op" id="7881762">}</span><span class="op" id="7881763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881766">{</span><span class="string" id="7881767">&#34;2001:4860:0:2001::68&#34;</span><span class="op" id="7881789">,</span>&nbsp;<span class="ident" id="7881791">IP</span><span class="op" id="7881793">{</span><span class="num" id="7881794">0x20</span><span class="op" id="7881798">,</span>&nbsp;<span class="num" id="7881800">0x01</span><span class="op" id="7881804">,</span>&nbsp;<span class="num" id="7881806">0x48</span><span class="op" id="7881810">,</span>&nbsp;<span class="num" id="7881812">0x60</span><span class="op" id="7881816">,</span>&nbsp;<span class="num" id="7881818">0</span><span class="op" id="7881819">,</span>&nbsp;<span class="num" id="7881821">0</span><span class="op" id="7881822">,</span>&nbsp;<span class="num" id="7881824">0x20</span><span class="op" id="7881828">,</span>&nbsp;<span class="num" id="7881830">0x01</span><span class="op" id="7881834">,</span>&nbsp;<span class="num" id="7881836">0</span><span class="op" id="7881837">,</span>&nbsp;<span class="num" id="7881839">0</span><span class="op" id="7881840">,</span>&nbsp;<span class="num" id="7881842">0</span><span class="op" id="7881843">,</span>&nbsp;<span class="num" id="7881845">0</span><span class="op" id="7881846">,</span>&nbsp;<span class="num" id="7881848">0</span><span class="op" id="7881849">,</span>&nbsp;<span class="num" id="7881851">0</span><span class="op" id="7881852">,</span>&nbsp;<span class="num" id="7881854">0x00</span><span class="op" id="7881858">,</span>&nbsp;<span class="num" id="7881860">0x68</span><span class="op" id="7881864">}</span><span class="op" id="7881865">}</span><span class="op" id="7881866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881869">{</span><span class="string" id="7881870">&#34;::ffff:4a7d:1363&#34;</span><span class="op" id="7881888">,</span>&nbsp;<span class="ident" id="7881890">IPv4</span><span class="op" id="7881894">(</span><span class="num" id="7881895">74</span><span class="op" id="7881897">,</span>&nbsp;<span class="num" id="7881899">125</span><span class="op" id="7881902">,</span>&nbsp;<span class="num" id="7881904">19</span><span class="op" id="7881906">,</span>&nbsp;<span class="num" id="7881908">99</span><span class="op" id="7881910">)</span><span class="op" id="7881911">}</span><span class="op" id="7881912">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881915">{</span><span class="string" id="7881916">&#34;fe80::1%lo0&#34;</span><span class="op" id="7881929">,</span>&nbsp;<span class="ident" id="7881931">nil</span><span class="op" id="7881934">}</span><span class="op" id="7881935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881938">{</span><span class="string" id="7881939">&#34;fe80::1%911&#34;</span><span class="op" id="7881952">,</span>&nbsp;<span class="ident" id="7881954">nil</span><span class="op" id="7881957">}</span><span class="op" id="7881958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881961">{</span><span class="string" id="7881962">&#34;&#34;</span><span class="op" id="7881964">,</span>&nbsp;<span class="ident" id="7881966">nil</span><span class="op" id="7881969">}</span><span class="op" id="7881970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881973">{</span><span class="string" id="7881974">&#34;a1:a2:a3:a4::b1:b2:b3:b4&#34;</span><span class="op" id="7882000">,</span>&nbsp;<span class="ident" id="7882002">nil</span><span class="op" id="7882005">}</span><span class="op" id="7882006">,</span>&nbsp;<span class="comment" id="7882008">//&nbsp;Issue&nbsp;6628</span><br>
<span class="lineno"></span><span class="op" id="7882022">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="7882025">func</span>&nbsp;<span class="ident" id="7882030">TestParseIP</span><span class="op" id="7882041">(</span><span class="ident" id="7882042">t</span>&nbsp;<span class="op" id="7882044">*</span><span class="ident" id="7882045">testing</span><span class="op" id="7882052">.</span><span class="ident" id="7882053">T</span><span class="op" id="7882054">)</span>&nbsp;<span class="op" id="7882056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882059">for</span>&nbsp;<span class="ident" id="7882063">_</span><span class="op" id="7882064">,</span>&nbsp;<span class="ident" id="7882066">tt</span>&nbsp;<span class="op" id="7882069">:=</span>&nbsp;<span class="keyword" id="7882072">range</span>&nbsp;<span class="ident" id="7882078">parseIPTests</span>&nbsp;<span class="op" id="7882091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882095">if</span>&nbsp;<span class="ident" id="7882098">out</span>&nbsp;<span class="op" id="7882102">:=</span>&nbsp;<span class="ident" id="7882105">ParseIP</span><span class="op" id="7882112">(</span><span class="ident" id="7882113">tt</span><span class="op" id="7882115">.</span><span class="ident" id="7882116">in</span><span class="op" id="7882118">)</span><span class="op" id="7882119">;</span>&nbsp;<span class="op" id="7882121">!</span><span class="ident" id="7882122">reflect</span><span class="op" id="7882129">.</span><span class="ident" id="7882130">DeepEqual</span><span class="op" id="7882139">(</span><span class="ident" id="7882140">out</span><span class="op" id="7882143">,</span>&nbsp;<span class="ident" id="7882145">tt</span><span class="op" id="7882147">.</span><span class="ident" id="7882148">out</span><span class="op" id="7882151">)</span>&nbsp;<span class="op" id="7882153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882158">t</span><span class="op" id="7882159">.</span><span class="ident" id="7882160">Errorf</span><span class="op" id="7882166">(</span><span class="string" id="7882167">&#34;ParseIP(%q)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7882194">,</span>&nbsp;<span class="ident" id="7882196">tt</span><span class="op" id="7882198">.</span><span class="ident" id="7882199">in</span><span class="op" id="7882201">,</span>&nbsp;<span class="ident" id="7882203">out</span><span class="op" id="7882206">,</span>&nbsp;<span class="ident" id="7882208">tt</span><span class="op" id="7882210">.</span><span class="ident" id="7882211">out</span><span class="op" id="7882214">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882222">if</span>&nbsp;<span class="ident" id="7882225">tt</span><span class="op" id="7882227">.</span><span class="ident" id="7882228">in</span>&nbsp;<span class="op" id="7882231">==</span>&nbsp;<span class="string" id="7882234">&#34;&#34;</span>&nbsp;<span class="op" id="7882237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7882242">//&nbsp;Tested&nbsp;in&nbsp;TestMarshalEmptyIP&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882284">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882295">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882299">var</span>&nbsp;<span class="ident" id="7882303">out</span>&nbsp;<span class="ident" id="7882307">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882312">if</span>&nbsp;<span class="ident" id="7882315">err</span>&nbsp;<span class="op" id="7882319">:=</span>&nbsp;<span class="ident" id="7882322">out</span><span class="op" id="7882325">.</span><span class="ident" id="7882326">UnmarshalText</span><span class="op" id="7882339">(</span><span class="op" id="7882340">[</span><span class="op" id="7882341">]</span><span class="builtintype" id="7882342">byte</span><span class="op" id="7882346">(</span><span class="ident" id="7882347">tt</span><span class="op" id="7882349">.</span><span class="ident" id="7882350">in</span><span class="op" id="7882352">)</span><span class="op" id="7882353">)</span><span class="op" id="7882354">;</span>&nbsp;<span class="op" id="7882356">!</span><span class="ident" id="7882357">reflect</span><span class="op" id="7882364">.</span><span class="ident" id="7882365">DeepEqual</span><span class="op" id="7882374">(</span><span class="ident" id="7882375">out</span><span class="op" id="7882378">,</span>&nbsp;<span class="ident" id="7882380">tt</span><span class="op" id="7882382">.</span><span class="ident" id="7882383">out</span><span class="op" id="7882386">)</span>&nbsp;<span class="op" id="7882388">||</span>&nbsp;<span class="op" id="7882391">(</span><span class="ident" id="7882392">tt</span><span class="op" id="7882394">.</span><span class="ident" id="7882395">out</span>&nbsp;<span class="op" id="7882399">==</span>&nbsp;<span class="ident" id="7882402">nil</span><span class="op" id="7882405">)</span>&nbsp;<span class="op" id="7882407">!=</span>&nbsp;<span class="op" id="7882410">(</span><span class="ident" id="7882411">err</span>&nbsp;<span class="op" id="7882415">!=</span>&nbsp;<span class="ident" id="7882418">nil</span><span class="op" id="7882421">)</span>&nbsp;<span class="op" id="7882423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882428">t</span><span class="op" id="7882429">.</span><span class="ident" id="7882430">Errorf</span><span class="op" id="7882436">(</span><span class="string" id="7882437">&#34;IP.UnmarshalText(%q)&nbsp;=&nbsp;%v,&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7882477">,</span>&nbsp;<span class="ident" id="7882479">tt</span><span class="op" id="7882481">.</span><span class="ident" id="7882482">in</span><span class="op" id="7882484">,</span>&nbsp;<span class="ident" id="7882486">out</span><span class="op" id="7882489">,</span>&nbsp;<span class="ident" id="7882491">err</span><span class="op" id="7882494">,</span>&nbsp;<span class="ident" id="7882496">tt</span><span class="op" id="7882498">.</span><span class="ident" id="7882499">out</span><span class="op" id="7882502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882509">}</span><br>
<span class="lineno">45</span><span class="op" id="7882511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7882514">func</span>&nbsp;<span class="ident" id="7882519">BenchmarkParseIP</span><span class="op" id="7882535">(</span><span class="ident" id="7882536">b</span>&nbsp;<span class="op" id="7882538">*</span><span class="ident" id="7882539">testing</span><span class="op" id="7882546">.</span><span class="ident" id="7882547">B</span><span class="op" id="7882548">)</span>&nbsp;<span class="op" id="7882550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882553">for</span>&nbsp;<span class="ident" id="7882557">i</span>&nbsp;<span class="op" id="7882559">:=</span>&nbsp;<span class="num" id="7882562">0</span><span class="op" id="7882563">;</span>&nbsp;<span class="ident" id="7882565">i</span>&nbsp;<span class="op" id="7882567">&lt;</span>&nbsp;<span class="ident" id="7882569">b</span><span class="op" id="7882570">.</span><span class="ident" id="7882571">N</span><span class="op" id="7882572">;</span>&nbsp;<span class="ident" id="7882574">i</span><span class="op" id="7882575">++</span>&nbsp;<span class="op" id="7882578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882582">for</span>&nbsp;<span class="ident" id="7882586">_</span><span class="op" id="7882587">,</span>&nbsp;<span class="ident" id="7882589">tt</span>&nbsp;<span class="op" id="7882592">:=</span>&nbsp;<span class="keyword" id="7882595">range</span>&nbsp;<span class="ident" id="7882601">parseIPTests</span>&nbsp;<span class="op" id="7882614">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882619">ParseIP</span><span class="op" id="7882626">(</span><span class="ident" id="7882627">tt</span><span class="op" id="7882629">.</span><span class="ident" id="7882630">in</span><span class="op" id="7882632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882639">}</span><br>
<span class="lineno"></span><span class="op" id="7882641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="7882644">//&nbsp;Issue&nbsp;6339</span><br>
<span class="lineno"></span><span class="keyword" id="7882658">func</span>&nbsp;<span class="ident" id="7882663">TestMarshalEmptyIP</span><span class="op" id="7882681">(</span><span class="ident" id="7882682">t</span>&nbsp;<span class="op" id="7882684">*</span><span class="ident" id="7882685">testing</span><span class="op" id="7882692">.</span><span class="ident" id="7882693">T</span><span class="op" id="7882694">)</span>&nbsp;<span class="op" id="7882696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882699">for</span>&nbsp;<span class="ident" id="7882703">_</span><span class="op" id="7882704">,</span>&nbsp;<span class="ident" id="7882706">in</span>&nbsp;<span class="op" id="7882709">:=</span>&nbsp;<span class="keyword" id="7882712">range</span>&nbsp;<span class="op" id="7882718">[</span><span class="op" id="7882719">]</span><span class="op" id="7882720">[</span><span class="op" id="7882721">]</span><span class="builtintype" id="7882722">byte</span><span class="op" id="7882726">{</span><span class="ident" id="7882727">nil</span><span class="op" id="7882730">,</span>&nbsp;<span class="op" id="7882732">[</span><span class="op" id="7882733">]</span><span class="builtintype" id="7882734">byte</span><span class="op" id="7882738">(</span><span class="string" id="7882739">&#34;&#34;</span><span class="op" id="7882741">)</span><span class="op" id="7882742">}</span>&nbsp;<span class="op" id="7882744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882748">var</span>&nbsp;<span class="ident" id="7882752">out</span>&nbsp;<span class="op" id="7882756">=</span>&nbsp;<span class="ident" id="7882758">IP</span><span class="op" id="7882760">{</span><span class="num" id="7882761">1</span><span class="op" id="7882762">,</span>&nbsp;<span class="num" id="7882764">2</span><span class="op" id="7882765">,</span>&nbsp;<span class="num" id="7882767">3</span><span class="op" id="7882768">,</span>&nbsp;<span class="num" id="7882770">4</span><span class="op" id="7882771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882775">if</span>&nbsp;<span class="ident" id="7882778">err</span>&nbsp;<span class="op" id="7882782">:=</span>&nbsp;<span class="ident" id="7882785">out</span><span class="op" id="7882788">.</span><span class="ident" id="7882789">UnmarshalText</span><span class="op" id="7882802">(</span><span class="ident" id="7882803">in</span><span class="op" id="7882805">)</span><span class="op" id="7882806">;</span>&nbsp;<span class="ident" id="7882808">err</span>&nbsp;<span class="op" id="7882812">!=</span>&nbsp;<span class="ident" id="7882815">nil</span>&nbsp;<span class="op" id="7882819">||</span>&nbsp;<span class="ident" id="7882822">out</span>&nbsp;<span class="op" id="7882826">!=</span>&nbsp;<span class="ident" id="7882829">nil</span>&nbsp;<span class="op" id="7882833">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882838">t</span><span class="op" id="7882839">.</span><span class="ident" id="7882840">Errorf</span><span class="op" id="7882846">(</span><span class="string" id="7882847">&#34;UnmarshalText(%v)&nbsp;=&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;nil,&nbsp;nil&#34;</span><span class="op" id="7882890">,</span>&nbsp;<span class="ident" id="7882892">in</span><span class="op" id="7882894">,</span>&nbsp;<span class="ident" id="7882896">out</span><span class="op" id="7882899">,</span>&nbsp;<span class="ident" id="7882901">err</span><span class="op" id="7882904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882914">var</span>&nbsp;<span class="ident" id="7882918">ip</span>&nbsp;<span class="ident" id="7882921">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882925">got</span><span class="op" id="7882928">,</span>&nbsp;<span class="ident" id="7882930">err</span>&nbsp;<span class="op" id="7882934">:=</span>&nbsp;<span class="ident" id="7882937">ip</span><span class="op" id="7882939">.</span><span class="ident" id="7882940">MarshalText</span><span class="op" id="7882951">(</span><span class="op" id="7882952">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882955">if</span>&nbsp;<span class="ident" id="7882958">err</span>&nbsp;<span class="op" id="7882962">!=</span>&nbsp;<span class="ident" id="7882965">nil</span>&nbsp;<span class="op" id="7882969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882973">t</span><span class="op" id="7882974">.</span><span class="ident" id="7882975">Fatal</span><span class="op" id="7882980">(</span><span class="ident" id="7882981">err</span><span class="op" id="7882984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882990">if</span>&nbsp;<span class="op" id="7882993">!</span><span class="ident" id="7882994">reflect</span><span class="op" id="7883001">.</span><span class="ident" id="7883002">DeepEqual</span><span class="op" id="7883011">(</span><span class="ident" id="7883012">got</span><span class="op" id="7883015">,</span>&nbsp;<span class="op" id="7883017">[</span><span class="op" id="7883018">]</span><span class="builtintype" id="7883019">byte</span><span class="op" id="7883023">(</span><span class="string" id="7883024">&#34;&#34;</span><span class="op" id="7883026">)</span><span class="op" id="7883027">)</span>&nbsp;<span class="op" id="7883029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883033">t</span><span class="op" id="7883034">.</span><span class="ident" id="7883035">Errorf</span><span class="op" id="7883041">(</span><span class="string" id="7883042">`got&nbsp;%#v,&nbsp;want&nbsp;[]byte(&#34;&#34;)`</span><span class="op" id="7883068">,</span>&nbsp;<span class="ident" id="7883070">got</span><span class="op" id="7883073">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883076">}</span><br>
<span class="lineno"></span><span class="op" id="7883078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7883081">var</span>&nbsp;<span class="ident" id="7883085">ipStringTests</span>&nbsp;<span class="op" id="7883099">=</span>&nbsp;<span class="op" id="7883101">[</span><span class="op" id="7883102">]</span><span class="keyword" id="7883103">struct</span>&nbsp;<span class="op" id="7883110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883113">in</span>&nbsp;&nbsp;<span class="ident" id="7883117">IP</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883121">out</span>&nbsp;<span class="builtintype" id="7883125">string</span>&nbsp;<span class="comment" id="7883132">//&nbsp;see&nbsp;RFC&nbsp;5952</span><br>
<span class="lineno"></span><span class="op" id="7883148">}</span><span class="op" id="7883149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883152">{</span><span class="ident" id="7883153">IP</span><span class="op" id="7883155">{</span><span class="num" id="7883156">0x20</span><span class="op" id="7883160">,</span>&nbsp;<span class="num" id="7883162">0x1</span><span class="op" id="7883165">,</span>&nbsp;<span class="num" id="7883167">0xd</span><span class="op" id="7883170">,</span>&nbsp;<span class="num" id="7883172">0xb8</span><span class="op" id="7883176">,</span>&nbsp;<span class="num" id="7883178">0</span><span class="op" id="7883179">,</span>&nbsp;<span class="num" id="7883181">0</span><span class="op" id="7883182">,</span>&nbsp;<span class="num" id="7883184">0</span><span class="op" id="7883185">,</span>&nbsp;<span class="num" id="7883187">0</span><span class="op" id="7883188">,</span>&nbsp;<span class="num" id="7883190">0</span><span class="op" id="7883191">,</span>&nbsp;<span class="num" id="7883193">0</span><span class="op" id="7883194">,</span>&nbsp;<span class="num" id="7883196">0x1</span><span class="op" id="7883199">,</span>&nbsp;<span class="num" id="7883201">0x23</span><span class="op" id="7883205">,</span>&nbsp;<span class="num" id="7883207">0</span><span class="op" id="7883208">,</span>&nbsp;<span class="num" id="7883210">0x12</span><span class="op" id="7883214">,</span>&nbsp;<span class="num" id="7883216">0</span><span class="op" id="7883217">,</span>&nbsp;<span class="num" id="7883219">0x1</span><span class="op" id="7883222">}</span><span class="op" id="7883223">,</span>&nbsp;<span class="string" id="7883225">&#34;2001:db8::123:12:1&#34;</span><span class="op" id="7883245">}</span><span class="op" id="7883246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883249">{</span><span class="ident" id="7883250">IP</span><span class="op" id="7883252">{</span><span class="num" id="7883253">0x20</span><span class="op" id="7883257">,</span>&nbsp;<span class="num" id="7883259">0x1</span><span class="op" id="7883262">,</span>&nbsp;<span class="num" id="7883264">0xd</span><span class="op" id="7883267">,</span>&nbsp;<span class="num" id="7883269">0xb8</span><span class="op" id="7883273">,</span>&nbsp;<span class="num" id="7883275">0</span><span class="op" id="7883276">,</span>&nbsp;<span class="num" id="7883278">0</span><span class="op" id="7883279">,</span>&nbsp;<span class="num" id="7883281">0</span><span class="op" id="7883282">,</span>&nbsp;<span class="num" id="7883284">0</span><span class="op" id="7883285">,</span>&nbsp;<span class="num" id="7883287">0</span><span class="op" id="7883288">,</span>&nbsp;<span class="num" id="7883290">0</span><span class="op" id="7883291">,</span>&nbsp;<span class="num" id="7883293">0</span><span class="op" id="7883294">,</span>&nbsp;<span class="num" id="7883296">0</span><span class="op" id="7883297">,</span>&nbsp;<span class="num" id="7883299">0</span><span class="op" id="7883300">,</span>&nbsp;<span class="num" id="7883302">0</span><span class="op" id="7883303">,</span>&nbsp;<span class="num" id="7883305">0</span><span class="op" id="7883306">,</span>&nbsp;<span class="num" id="7883308">0x1</span><span class="op" id="7883311">}</span><span class="op" id="7883312">,</span>&nbsp;<span class="string" id="7883314">&#34;2001:db8::1&#34;</span><span class="op" id="7883327">}</span><span class="op" id="7883328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883331">{</span><span class="ident" id="7883332">IP</span><span class="op" id="7883334">{</span><span class="num" id="7883335">0x20</span><span class="op" id="7883339">,</span>&nbsp;<span class="num" id="7883341">0x1</span><span class="op" id="7883344">,</span>&nbsp;<span class="num" id="7883346">0xd</span><span class="op" id="7883349">,</span>&nbsp;<span class="num" id="7883351">0xb8</span><span class="op" id="7883355">,</span>&nbsp;<span class="num" id="7883357">0</span><span class="op" id="7883358">,</span>&nbsp;<span class="num" id="7883360">0</span><span class="op" id="7883361">,</span>&nbsp;<span class="num" id="7883363">0</span><span class="op" id="7883364">,</span>&nbsp;<span class="num" id="7883366">0x1</span><span class="op" id="7883369">,</span>&nbsp;<span class="num" id="7883371">0</span><span class="op" id="7883372">,</span>&nbsp;<span class="num" id="7883374">0</span><span class="op" id="7883375">,</span>&nbsp;<span class="num" id="7883377">0</span><span class="op" id="7883378">,</span>&nbsp;<span class="num" id="7883380">0x1</span><span class="op" id="7883383">,</span>&nbsp;<span class="num" id="7883385">0</span><span class="op" id="7883386">,</span>&nbsp;<span class="num" id="7883388">0</span><span class="op" id="7883389">,</span>&nbsp;<span class="num" id="7883391">0</span><span class="op" id="7883392">,</span>&nbsp;<span class="num" id="7883394">0x1</span><span class="op" id="7883397">}</span><span class="op" id="7883398">,</span>&nbsp;<span class="string" id="7883400">&#34;2001:db8:0:1:0:1:0:1&#34;</span><span class="op" id="7883422">}</span><span class="op" id="7883423">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883426">{</span><span class="ident" id="7883427">IP</span><span class="op" id="7883429">{</span><span class="num" id="7883430">0x20</span><span class="op" id="7883434">,</span>&nbsp;<span class="num" id="7883436">0x1</span><span class="op" id="7883439">,</span>&nbsp;<span class="num" id="7883441">0xd</span><span class="op" id="7883444">,</span>&nbsp;<span class="num" id="7883446">0xb8</span><span class="op" id="7883450">,</span>&nbsp;<span class="num" id="7883452">0</span><span class="op" id="7883453">,</span>&nbsp;<span class="num" id="7883455">0x1</span><span class="op" id="7883458">,</span>&nbsp;<span class="num" id="7883460">0</span><span class="op" id="7883461">,</span>&nbsp;<span class="num" id="7883463">0</span><span class="op" id="7883464">,</span>&nbsp;<span class="num" id="7883466">0</span><span class="op" id="7883467">,</span>&nbsp;<span class="num" id="7883469">0x1</span><span class="op" id="7883472">,</span>&nbsp;<span class="num" id="7883474">0</span><span class="op" id="7883475">,</span>&nbsp;<span class="num" id="7883477">0</span><span class="op" id="7883478">,</span>&nbsp;<span class="num" id="7883480">0</span><span class="op" id="7883481">,</span>&nbsp;<span class="num" id="7883483">0x1</span><span class="op" id="7883486">,</span>&nbsp;<span class="num" id="7883488">0</span><span class="op" id="7883489">,</span>&nbsp;<span class="num" id="7883491">0</span><span class="op" id="7883492">}</span><span class="op" id="7883493">,</span>&nbsp;<span class="string" id="7883495">&#34;2001:db8:1:0:1:0:1:0&#34;</span><span class="op" id="7883517">}</span><span class="op" id="7883518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883521">{</span><span class="ident" id="7883522">IP</span><span class="op" id="7883524">{</span><span class="num" id="7883525">0x20</span><span class="op" id="7883529">,</span>&nbsp;<span class="num" id="7883531">0x1</span><span class="op" id="7883534">,</span>&nbsp;<span class="num" id="7883536">0</span><span class="op" id="7883537">,</span>&nbsp;<span class="num" id="7883539">0</span><span class="op" id="7883540">,</span>&nbsp;<span class="num" id="7883542">0</span><span class="op" id="7883543">,</span>&nbsp;<span class="num" id="7883545">0</span><span class="op" id="7883546">,</span>&nbsp;<span class="num" id="7883548">0</span><span class="op" id="7883549">,</span>&nbsp;<span class="num" id="7883551">0</span><span class="op" id="7883552">,</span>&nbsp;<span class="num" id="7883554">0</span><span class="op" id="7883555">,</span>&nbsp;<span class="num" id="7883557">0x1</span><span class="op" id="7883560">,</span>&nbsp;<span class="num" id="7883562">0</span><span class="op" id="7883563">,</span>&nbsp;<span class="num" id="7883565">0</span><span class="op" id="7883566">,</span>&nbsp;<span class="num" id="7883568">0</span><span class="op" id="7883569">,</span>&nbsp;<span class="num" id="7883571">0</span><span class="op" id="7883572">,</span>&nbsp;<span class="num" id="7883574">0</span><span class="op" id="7883575">,</span>&nbsp;<span class="num" id="7883577">0x1</span><span class="op" id="7883580">}</span><span class="op" id="7883581">,</span>&nbsp;<span class="string" id="7883583">&#34;2001::1:0:0:1&#34;</span><span class="op" id="7883598">}</span><span class="op" id="7883599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883602">{</span><span class="ident" id="7883603">IP</span><span class="op" id="7883605">{</span><span class="num" id="7883606">0x20</span><span class="op" id="7883610">,</span>&nbsp;<span class="num" id="7883612">0x1</span><span class="op" id="7883615">,</span>&nbsp;<span class="num" id="7883617">0xd</span><span class="op" id="7883620">,</span>&nbsp;<span class="num" id="7883622">0xb8</span><span class="op" id="7883626">,</span>&nbsp;<span class="num" id="7883628">0</span><span class="op" id="7883629">,</span>&nbsp;<span class="num" id="7883631">0</span><span class="op" id="7883632">,</span>&nbsp;<span class="num" id="7883634">0</span><span class="op" id="7883635">,</span>&nbsp;<span class="num" id="7883637">0</span><span class="op" id="7883638">,</span>&nbsp;<span class="num" id="7883640">0</span><span class="op" id="7883641">,</span>&nbsp;<span class="num" id="7883643">0x1</span><span class="op" id="7883646">,</span>&nbsp;<span class="num" id="7883648">0</span><span class="op" id="7883649">,</span>&nbsp;<span class="num" id="7883651">0</span><span class="op" id="7883652">,</span>&nbsp;<span class="num" id="7883654">0</span><span class="op" id="7883655">,</span>&nbsp;<span class="num" id="7883657">0</span><span class="op" id="7883658">,</span>&nbsp;<span class="num" id="7883660">0</span><span class="op" id="7883661">,</span>&nbsp;<span class="num" id="7883663">0</span><span class="op" id="7883664">}</span><span class="op" id="7883665">,</span>&nbsp;<span class="string" id="7883667">&#34;2001:db8:0:0:1::&#34;</span><span class="op" id="7883685">}</span><span class="op" id="7883686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883689">{</span><span class="ident" id="7883690">IP</span><span class="op" id="7883692">{</span><span class="num" id="7883693">0x20</span><span class="op" id="7883697">,</span>&nbsp;<span class="num" id="7883699">0x1</span><span class="op" id="7883702">,</span>&nbsp;<span class="num" id="7883704">0xd</span><span class="op" id="7883707">,</span>&nbsp;<span class="num" id="7883709">0xb8</span><span class="op" id="7883713">,</span>&nbsp;<span class="num" id="7883715">0</span><span class="op" id="7883716">,</span>&nbsp;<span class="num" id="7883718">0</span><span class="op" id="7883719">,</span>&nbsp;<span class="num" id="7883721">0</span><span class="op" id="7883722">,</span>&nbsp;<span class="num" id="7883724">0</span><span class="op" id="7883725">,</span>&nbsp;<span class="num" id="7883727">0</span><span class="op" id="7883728">,</span>&nbsp;<span class="num" id="7883730">0x1</span><span class="op" id="7883733">,</span>&nbsp;<span class="num" id="7883735">0</span><span class="op" id="7883736">,</span>&nbsp;<span class="num" id="7883738">0</span><span class="op" id="7883739">,</span>&nbsp;<span class="num" id="7883741">0</span><span class="op" id="7883742">,</span>&nbsp;<span class="num" id="7883744">0</span><span class="op" id="7883745">,</span>&nbsp;<span class="num" id="7883747">0</span><span class="op" id="7883748">,</span>&nbsp;<span class="num" id="7883750">0x1</span><span class="op" id="7883753">}</span><span class="op" id="7883754">,</span>&nbsp;<span class="string" id="7883756">&#34;2001:db8::1:0:0:1&#34;</span><span class="op" id="7883775">}</span><span class="op" id="7883776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883779">{</span><span class="ident" id="7883780">IP</span><span class="op" id="7883782">{</span><span class="num" id="7883783">0x20</span><span class="op" id="7883787">,</span>&nbsp;<span class="num" id="7883789">0x1</span><span class="op" id="7883792">,</span>&nbsp;<span class="num" id="7883794">0xD</span><span class="op" id="7883797">,</span>&nbsp;<span class="num" id="7883799">0xB8</span><span class="op" id="7883803">,</span>&nbsp;<span class="num" id="7883805">0</span><span class="op" id="7883806">,</span>&nbsp;<span class="num" id="7883808">0</span><span class="op" id="7883809">,</span>&nbsp;<span class="num" id="7883811">0</span><span class="op" id="7883812">,</span>&nbsp;<span class="num" id="7883814">0</span><span class="op" id="7883815">,</span>&nbsp;<span class="num" id="7883817">0</span><span class="op" id="7883818">,</span>&nbsp;<span class="num" id="7883820">0xA</span><span class="op" id="7883823">,</span>&nbsp;<span class="num" id="7883825">0</span><span class="op" id="7883826">,</span>&nbsp;<span class="num" id="7883828">0xB</span><span class="op" id="7883831">,</span>&nbsp;<span class="num" id="7883833">0</span><span class="op" id="7883834">,</span>&nbsp;<span class="num" id="7883836">0xC</span><span class="op" id="7883839">,</span>&nbsp;<span class="num" id="7883841">0</span><span class="op" id="7883842">,</span>&nbsp;<span class="num" id="7883844">0xD</span><span class="op" id="7883847">}</span><span class="op" id="7883848">,</span>&nbsp;<span class="string" id="7883850">&#34;2001:db8::a:b:c:d&#34;</span><span class="op" id="7883869">}</span><span class="op" id="7883870">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883873">{</span><span class="ident" id="7883874">IPv4</span><span class="op" id="7883878">(</span><span class="num" id="7883879">192</span><span class="op" id="7883882">,</span>&nbsp;<span class="num" id="7883884">168</span><span class="op" id="7883887">,</span>&nbsp;<span class="num" id="7883889">0</span><span class="op" id="7883890">,</span>&nbsp;<span class="num" id="7883892">1</span><span class="op" id="7883893">)</span><span class="op" id="7883894">,</span>&nbsp;<span class="string" id="7883896">&#34;192.168.0.1&#34;</span><span class="op" id="7883909">}</span><span class="op" id="7883910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883913">{</span><span class="ident" id="7883914">nil</span><span class="op" id="7883917">,</span>&nbsp;<span class="string" id="7883919">&#34;&#34;</span><span class="op" id="7883921">}</span><span class="op" id="7883922">,</span><br>
<span class="lineno"></span><span class="op" id="7883924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7883927">func</span>&nbsp;<span class="ident" id="7883932">TestIPString</span><span class="op" id="7883944">(</span><span class="ident" id="7883945">t</span>&nbsp;<span class="op" id="7883947">*</span><span class="ident" id="7883948">testing</span><span class="op" id="7883955">.</span><span class="ident" id="7883956">T</span><span class="op" id="7883957">)</span>&nbsp;<span class="op" id="7883959">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883962">for</span>&nbsp;<span class="ident" id="7883966">_</span><span class="op" id="7883967">,</span>&nbsp;<span class="ident" id="7883969">tt</span>&nbsp;<span class="op" id="7883972">:=</span>&nbsp;<span class="keyword" id="7883975">range</span>&nbsp;<span class="ident" id="7883981">ipStringTests</span>&nbsp;<span class="op" id="7883995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883999">if</span>&nbsp;<span class="ident" id="7884002">tt</span><span class="op" id="7884004">.</span><span class="ident" id="7884005">in</span>&nbsp;<span class="op" id="7884008">!=</span>&nbsp;<span class="ident" id="7884011">nil</span>&nbsp;<span class="op" id="7884015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884020">if</span>&nbsp;<span class="ident" id="7884023">out</span>&nbsp;<span class="op" id="7884027">:=</span>&nbsp;<span class="ident" id="7884030">tt</span><span class="op" id="7884032">.</span><span class="ident" id="7884033">in</span><span class="op" id="7884035">.</span><span class="ident" id="7884036">String</span><span class="op" id="7884042">(</span><span class="op" id="7884043">)</span><span class="op" id="7884044">;</span>&nbsp;<span class="ident" id="7884046">out</span>&nbsp;<span class="op" id="7884050">!=</span>&nbsp;<span class="ident" id="7884053">tt</span><span class="op" id="7884055">.</span><span class="ident" id="7884056">out</span>&nbsp;<span class="op" id="7884060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884066">t</span><span class="op" id="7884067">.</span><span class="ident" id="7884068">Errorf</span><span class="op" id="7884074">(</span><span class="string" id="7884075">&#34;IP.String(%v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7884104">,</span>&nbsp;<span class="ident" id="7884106">tt</span><span class="op" id="7884108">.</span><span class="ident" id="7884109">in</span><span class="op" id="7884111">,</span>&nbsp;<span class="ident" id="7884113">out</span><span class="op" id="7884116">,</span>&nbsp;<span class="ident" id="7884118">tt</span><span class="op" id="7884120">.</span><span class="ident" id="7884121">out</span><span class="op" id="7884124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884129">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884137">if</span>&nbsp;<span class="ident" id="7884140">out</span><span class="op" id="7884143">,</span>&nbsp;<span class="ident" id="7884145">err</span>&nbsp;<span class="op" id="7884149">:=</span>&nbsp;<span class="ident" id="7884152">tt</span><span class="op" id="7884154">.</span><span class="ident" id="7884155">in</span><span class="op" id="7884157">.</span><span class="ident" id="7884158">MarshalText</span><span class="op" id="7884169">(</span><span class="op" id="7884170">)</span><span class="op" id="7884171">;</span>&nbsp;<span class="builtintype" id="7884173">string</span><span class="op" id="7884179">(</span><span class="ident" id="7884180">out</span><span class="op" id="7884183">)</span>&nbsp;<span class="op" id="7884185">!=</span>&nbsp;<span class="ident" id="7884188">tt</span><span class="op" id="7884190">.</span><span class="ident" id="7884191">out</span>&nbsp;<span class="op" id="7884195">||</span>&nbsp;<span class="ident" id="7884198">err</span>&nbsp;<span class="op" id="7884202">!=</span>&nbsp;<span class="ident" id="7884205">nil</span>&nbsp;<span class="op" id="7884209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884214">t</span><span class="op" id="7884215">.</span><span class="ident" id="7884216">Errorf</span><span class="op" id="7884222">(</span><span class="string" id="7884223">&#34;IP.MarshalText(%v)&nbsp;=&nbsp;%q,&nbsp;%v,&nbsp;want&nbsp;%q,&nbsp;nil&#34;</span><span class="op" id="7884266">,</span>&nbsp;<span class="ident" id="7884268">tt</span><span class="op" id="7884270">.</span><span class="ident" id="7884271">in</span><span class="op" id="7884273">,</span>&nbsp;<span class="ident" id="7884275">out</span><span class="op" id="7884278">,</span>&nbsp;<span class="ident" id="7884280">err</span><span class="op" id="7884283">,</span>&nbsp;<span class="ident" id="7884285">tt</span><span class="op" id="7884287">.</span><span class="ident" id="7884288">out</span><span class="op" id="7884291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884298">}</span><br>
<span class="lineno">100</span><span class="op" id="7884300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7884303">func</span>&nbsp;<span class="ident" id="7884308">BenchmarkIPString</span><span class="op" id="7884325">(</span><span class="ident" id="7884326">b</span>&nbsp;<span class="op" id="7884328">*</span><span class="ident" id="7884329">testing</span><span class="op" id="7884336">.</span><span class="ident" id="7884337">B</span><span class="op" id="7884338">)</span>&nbsp;<span class="op" id="7884340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884343">for</span>&nbsp;<span class="ident" id="7884347">i</span>&nbsp;<span class="op" id="7884349">:=</span>&nbsp;<span class="num" id="7884352">0</span><span class="op" id="7884353">;</span>&nbsp;<span class="ident" id="7884355">i</span>&nbsp;<span class="op" id="7884357">&lt;</span>&nbsp;<span class="ident" id="7884359">b</span><span class="op" id="7884360">.</span><span class="ident" id="7884361">N</span><span class="op" id="7884362">;</span>&nbsp;<span class="ident" id="7884364">i</span><span class="op" id="7884365">++</span>&nbsp;<span class="op" id="7884368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884372">for</span>&nbsp;<span class="ident" id="7884376">_</span><span class="op" id="7884377">,</span>&nbsp;<span class="ident" id="7884379">tt</span>&nbsp;<span class="op" id="7884382">:=</span>&nbsp;<span class="keyword" id="7884385">range</span>&nbsp;<span class="ident" id="7884391">ipStringTests</span>&nbsp;<span class="op" id="7884405">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884410">if</span>&nbsp;<span class="ident" id="7884413">tt</span><span class="op" id="7884415">.</span><span class="ident" id="7884416">in</span>&nbsp;<span class="op" id="7884419">!=</span>&nbsp;<span class="ident" id="7884422">nil</span>&nbsp;<span class="op" id="7884426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884432">tt</span><span class="op" id="7884434">.</span><span class="ident" id="7884435">in</span><span class="op" id="7884437">.</span><span class="ident" id="7884438">String</span><span class="op" id="7884444">(</span><span class="op" id="7884445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884457">}</span><br>
<span class="lineno">110</span><span class="op" id="7884459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7884462">var</span>&nbsp;<span class="ident" id="7884466">ipMaskTests</span>&nbsp;<span class="op" id="7884478">=</span>&nbsp;<span class="op" id="7884480">[</span><span class="op" id="7884481">]</span><span class="keyword" id="7884482">struct</span>&nbsp;<span class="op" id="7884489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884492">in</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7884497">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884501">mask</span>&nbsp;<span class="ident" id="7884506">IPMask</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884514">out</span>&nbsp;&nbsp;<span class="ident" id="7884519">IP</span><br>
<span class="lineno"></span><span class="op" id="7884522">}</span><span class="op" id="7884523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884526">{</span><span class="ident" id="7884527">IPv4</span><span class="op" id="7884531">(</span><span class="num" id="7884532">192</span><span class="op" id="7884535">,</span>&nbsp;<span class="num" id="7884537">168</span><span class="op" id="7884540">,</span>&nbsp;<span class="num" id="7884542">1</span><span class="op" id="7884543">,</span>&nbsp;<span class="num" id="7884545">127</span><span class="op" id="7884548">)</span><span class="op" id="7884549">,</span>&nbsp;<span class="ident" id="7884551">IPv4Mask</span><span class="op" id="7884559">(</span><span class="num" id="7884560">255</span><span class="op" id="7884563">,</span>&nbsp;<span class="num" id="7884565">255</span><span class="op" id="7884568">,</span>&nbsp;<span class="num" id="7884570">255</span><span class="op" id="7884573">,</span>&nbsp;<span class="num" id="7884575">128</span><span class="op" id="7884578">)</span><span class="op" id="7884579">,</span>&nbsp;<span class="ident" id="7884581">IPv4</span><span class="op" id="7884585">(</span><span class="num" id="7884586">192</span><span class="op" id="7884589">,</span>&nbsp;<span class="num" id="7884591">168</span><span class="op" id="7884594">,</span>&nbsp;<span class="num" id="7884596">1</span><span class="op" id="7884597">,</span>&nbsp;<span class="num" id="7884599">0</span><span class="op" id="7884600">)</span><span class="op" id="7884601">}</span><span class="op" id="7884602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884605">{</span><span class="ident" id="7884606">IPv4</span><span class="op" id="7884610">(</span><span class="num" id="7884611">192</span><span class="op" id="7884614">,</span>&nbsp;<span class="num" id="7884616">168</span><span class="op" id="7884619">,</span>&nbsp;<span class="num" id="7884621">1</span><span class="op" id="7884622">,</span>&nbsp;<span class="num" id="7884624">127</span><span class="op" id="7884627">)</span><span class="op" id="7884628">,</span>&nbsp;<span class="ident" id="7884630">IPMask</span><span class="op" id="7884636">(</span><span class="ident" id="7884637">ParseIP</span><span class="op" id="7884644">(</span><span class="string" id="7884645">&#34;255.255.255.192&#34;</span><span class="op" id="7884662">)</span><span class="op" id="7884663">)</span><span class="op" id="7884664">,</span>&nbsp;<span class="ident" id="7884666">IPv4</span><span class="op" id="7884670">(</span><span class="num" id="7884671">192</span><span class="op" id="7884674">,</span>&nbsp;<span class="num" id="7884676">168</span><span class="op" id="7884679">,</span>&nbsp;<span class="num" id="7884681">1</span><span class="op" id="7884682">,</span>&nbsp;<span class="num" id="7884684">64</span><span class="op" id="7884686">)</span><span class="op" id="7884687">}</span><span class="op" id="7884688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884691">{</span><span class="ident" id="7884692">IPv4</span><span class="op" id="7884696">(</span><span class="num" id="7884697">192</span><span class="op" id="7884700">,</span>&nbsp;<span class="num" id="7884702">168</span><span class="op" id="7884705">,</span>&nbsp;<span class="num" id="7884707">1</span><span class="op" id="7884708">,</span>&nbsp;<span class="num" id="7884710">127</span><span class="op" id="7884713">)</span><span class="op" id="7884714">,</span>&nbsp;<span class="ident" id="7884716">IPMask</span><span class="op" id="7884722">(</span><span class="ident" id="7884723">ParseIP</span><span class="op" id="7884730">(</span><span class="string" id="7884731">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffe0&#34;</span><span class="op" id="7884772">)</span><span class="op" id="7884773">)</span><span class="op" id="7884774">,</span>&nbsp;<span class="ident" id="7884776">IPv4</span><span class="op" id="7884780">(</span><span class="num" id="7884781">192</span><span class="op" id="7884784">,</span>&nbsp;<span class="num" id="7884786">168</span><span class="op" id="7884789">,</span>&nbsp;<span class="num" id="7884791">1</span><span class="op" id="7884792">,</span>&nbsp;<span class="num" id="7884794">96</span><span class="op" id="7884796">)</span><span class="op" id="7884797">}</span><span class="op" id="7884798">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884801">{</span><span class="ident" id="7884802">IPv4</span><span class="op" id="7884806">(</span><span class="num" id="7884807">192</span><span class="op" id="7884810">,</span>&nbsp;<span class="num" id="7884812">168</span><span class="op" id="7884815">,</span>&nbsp;<span class="num" id="7884817">1</span><span class="op" id="7884818">,</span>&nbsp;<span class="num" id="7884820">127</span><span class="op" id="7884823">)</span><span class="op" id="7884824">,</span>&nbsp;<span class="ident" id="7884826">IPv4Mask</span><span class="op" id="7884834">(</span><span class="num" id="7884835">255</span><span class="op" id="7884838">,</span>&nbsp;<span class="num" id="7884840">0</span><span class="op" id="7884841">,</span>&nbsp;<span class="num" id="7884843">255</span><span class="op" id="7884846">,</span>&nbsp;<span class="num" id="7884848">0</span><span class="op" id="7884849">)</span><span class="op" id="7884850">,</span>&nbsp;<span class="ident" id="7884852">IPv4</span><span class="op" id="7884856">(</span><span class="num" id="7884857">192</span><span class="op" id="7884860">,</span>&nbsp;<span class="num" id="7884862">0</span><span class="op" id="7884863">,</span>&nbsp;<span class="num" id="7884865">1</span><span class="op" id="7884866">,</span>&nbsp;<span class="num" id="7884868">0</span><span class="op" id="7884869">)</span><span class="op" id="7884870">}</span><span class="op" id="7884871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884874">{</span><span class="ident" id="7884875">ParseIP</span><span class="op" id="7884882">(</span><span class="string" id="7884883">&#34;2001:db8::1&#34;</span><span class="op" id="7884896">)</span><span class="op" id="7884897">,</span>&nbsp;<span class="ident" id="7884899">IPMask</span><span class="op" id="7884905">(</span><span class="ident" id="7884906">ParseIP</span><span class="op" id="7884913">(</span><span class="string" id="7884914">&#34;ffff:ff80::&#34;</span><span class="op" id="7884927">)</span><span class="op" id="7884928">)</span><span class="op" id="7884929">,</span>&nbsp;<span class="ident" id="7884931">ParseIP</span><span class="op" id="7884938">(</span><span class="string" id="7884939">&#34;2001:d80::&#34;</span><span class="op" id="7884951">)</span><span class="op" id="7884952">}</span><span class="op" id="7884953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884956">{</span><span class="ident" id="7884957">ParseIP</span><span class="op" id="7884964">(</span><span class="string" id="7884965">&#34;2001:db8::1&#34;</span><span class="op" id="7884978">)</span><span class="op" id="7884979">,</span>&nbsp;<span class="ident" id="7884981">IPMask</span><span class="op" id="7884987">(</span><span class="ident" id="7884988">ParseIP</span><span class="op" id="7884995">(</span><span class="string" id="7884996">&#34;f0f0:0f0f::&#34;</span><span class="op" id="7885009">)</span><span class="op" id="7885010">)</span><span class="op" id="7885011">,</span>&nbsp;<span class="ident" id="7885013">ParseIP</span><span class="op" id="7885020">(</span><span class="string" id="7885021">&#34;2000:d08::&#34;</span><span class="op" id="7885033">)</span><span class="op" id="7885034">}</span><span class="op" id="7885035">,</span><br>
<span class="lineno"></span><span class="op" id="7885037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7885040">func</span>&nbsp;<span class="ident" id="7885045">TestIPMask</span><span class="op" id="7885055">(</span><span class="ident" id="7885056">t</span>&nbsp;<span class="op" id="7885058">*</span><span class="ident" id="7885059">testing</span><span class="op" id="7885066">.</span><span class="ident" id="7885067">T</span><span class="op" id="7885068">)</span>&nbsp;<span class="op" id="7885070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885073">for</span>&nbsp;<span class="ident" id="7885077">_</span><span class="op" id="7885078">,</span>&nbsp;<span class="ident" id="7885080">tt</span>&nbsp;<span class="op" id="7885083">:=</span>&nbsp;<span class="keyword" id="7885086">range</span>&nbsp;<span class="ident" id="7885092">ipMaskTests</span>&nbsp;<span class="op" id="7885104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885108">if</span>&nbsp;<span class="ident" id="7885111">out</span>&nbsp;<span class="op" id="7885115">:=</span>&nbsp;<span class="ident" id="7885118">tt</span><span class="op" id="7885120">.</span><span class="ident" id="7885121">in</span><span class="op" id="7885123">.</span><span class="ident" id="7885124">Mask</span><span class="op" id="7885128">(</span><span class="ident" id="7885129">tt</span><span class="op" id="7885131">.</span><span class="ident" id="7885132">mask</span><span class="op" id="7885136">)</span><span class="op" id="7885137">;</span>&nbsp;<span class="ident" id="7885139">out</span>&nbsp;<span class="op" id="7885143">==</span>&nbsp;<span class="ident" id="7885146">nil</span>&nbsp;<span class="op" id="7885150">||</span>&nbsp;<span class="op" id="7885153">!</span><span class="ident" id="7885154">tt</span><span class="op" id="7885156">.</span><span class="ident" id="7885157">out</span><span class="op" id="7885160">.</span><span class="ident" id="7885161">Equal</span><span class="op" id="7885166">(</span><span class="ident" id="7885167">out</span><span class="op" id="7885170">)</span>&nbsp;<span class="op" id="7885172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885177">t</span><span class="op" id="7885178">.</span><span class="ident" id="7885179">Errorf</span><span class="op" id="7885185">(</span><span class="string" id="7885186">&#34;IP(%v).Mask(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7885217">,</span>&nbsp;<span class="ident" id="7885219">tt</span><span class="op" id="7885221">.</span><span class="ident" id="7885222">in</span><span class="op" id="7885224">,</span>&nbsp;<span class="ident" id="7885226">tt</span><span class="op" id="7885228">.</span><span class="ident" id="7885229">mask</span><span class="op" id="7885233">,</span>&nbsp;<span class="ident" id="7885235">out</span><span class="op" id="7885238">,</span>&nbsp;<span class="ident" id="7885240">tt</span><span class="op" id="7885242">.</span><span class="ident" id="7885243">out</span><span class="op" id="7885246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885250">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885253">}</span><br>
<span class="lineno"></span><span class="op" id="7885255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7885258">var</span>&nbsp;<span class="ident" id="7885262">ipMaskStringTests</span>&nbsp;<span class="op" id="7885280">=</span>&nbsp;<span class="op" id="7885282">[</span><span class="op" id="7885283">]</span><span class="keyword" id="7885284">struct</span>&nbsp;<span class="op" id="7885291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885294">in</span>&nbsp;&nbsp;<span class="ident" id="7885298">IPMask</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885306">out</span>&nbsp;<span class="builtintype" id="7885310">string</span><br>
<span class="lineno"></span><span class="op" id="7885317">}</span><span class="op" id="7885318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885321">{</span><span class="ident" id="7885322">IPv4Mask</span><span class="op" id="7885330">(</span><span class="num" id="7885331">255</span><span class="op" id="7885334">,</span>&nbsp;<span class="num" id="7885336">255</span><span class="op" id="7885339">,</span>&nbsp;<span class="num" id="7885341">255</span><span class="op" id="7885344">,</span>&nbsp;<span class="num" id="7885346">240</span><span class="op" id="7885349">)</span><span class="op" id="7885350">,</span>&nbsp;<span class="string" id="7885352">&#34;fffffff0&#34;</span><span class="op" id="7885362">}</span><span class="op" id="7885363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885366">{</span><span class="ident" id="7885367">IPv4Mask</span><span class="op" id="7885375">(</span><span class="num" id="7885376">255</span><span class="op" id="7885379">,</span>&nbsp;<span class="num" id="7885381">0</span><span class="op" id="7885382">,</span>&nbsp;<span class="num" id="7885384">128</span><span class="op" id="7885387">,</span>&nbsp;<span class="num" id="7885389">0</span><span class="op" id="7885390">)</span><span class="op" id="7885391">,</span>&nbsp;<span class="string" id="7885393">&#34;ff008000&#34;</span><span class="op" id="7885403">}</span><span class="op" id="7885404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885407">{</span><span class="ident" id="7885408">IPMask</span><span class="op" id="7885414">(</span><span class="ident" id="7885415">ParseIP</span><span class="op" id="7885422">(</span><span class="string" id="7885423">&#34;ffff:ff80::&#34;</span><span class="op" id="7885436">)</span><span class="op" id="7885437">)</span><span class="op" id="7885438">,</span>&nbsp;<span class="string" id="7885440">&#34;ffffff80000000000000000000000000&#34;</span><span class="op" id="7885474">}</span><span class="op" id="7885475">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885478">{</span><span class="ident" id="7885479">IPMask</span><span class="op" id="7885485">(</span><span class="ident" id="7885486">ParseIP</span><span class="op" id="7885493">(</span><span class="string" id="7885494">&#34;ef00:ff80::cafe:0&#34;</span><span class="op" id="7885513">)</span><span class="op" id="7885514">)</span><span class="op" id="7885515">,</span>&nbsp;<span class="string" id="7885517">&#34;ef00ff800000000000000000cafe0000&#34;</span><span class="op" id="7885551">}</span><span class="op" id="7885552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885555">{</span><span class="ident" id="7885556">nil</span><span class="op" id="7885559">,</span>&nbsp;<span class="string" id="7885561">&#34;&lt;nil&gt;&#34;</span><span class="op" id="7885568">}</span><span class="op" id="7885569">,</span><br>
<span class="lineno"></span><span class="op" id="7885571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7885574">func</span>&nbsp;<span class="ident" id="7885579">TestIPMaskString</span><span class="op" id="7885595">(</span><span class="ident" id="7885596">t</span>&nbsp;<span class="op" id="7885598">*</span><span class="ident" id="7885599">testing</span><span class="op" id="7885606">.</span><span class="ident" id="7885607">T</span><span class="op" id="7885608">)</span>&nbsp;<span class="op" id="7885610">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885613">for</span>&nbsp;<span class="ident" id="7885617">_</span><span class="op" id="7885618">,</span>&nbsp;<span class="ident" id="7885620">tt</span>&nbsp;<span class="op" id="7885623">:=</span>&nbsp;<span class="keyword" id="7885626">range</span>&nbsp;<span class="ident" id="7885632">ipMaskStringTests</span>&nbsp;<span class="op" id="7885650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885654">if</span>&nbsp;<span class="ident" id="7885657">out</span>&nbsp;<span class="op" id="7885661">:=</span>&nbsp;<span class="ident" id="7885664">tt</span><span class="op" id="7885666">.</span><span class="ident" id="7885667">in</span><span class="op" id="7885669">.</span><span class="ident" id="7885670">String</span><span class="op" id="7885676">(</span><span class="op" id="7885677">)</span><span class="op" id="7885678">;</span>&nbsp;<span class="ident" id="7885680">out</span>&nbsp;<span class="op" id="7885684">!=</span>&nbsp;<span class="ident" id="7885687">tt</span><span class="op" id="7885689">.</span><span class="ident" id="7885690">out</span>&nbsp;<span class="op" id="7885694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885699">t</span><span class="op" id="7885700">.</span><span class="ident" id="7885701">Errorf</span><span class="op" id="7885707">(</span><span class="string" id="7885708">&#34;IPMask.String(%v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7885741">,</span>&nbsp;<span class="ident" id="7885743">tt</span><span class="op" id="7885745">.</span><span class="ident" id="7885746">in</span><span class="op" id="7885748">,</span>&nbsp;<span class="ident" id="7885750">out</span><span class="op" id="7885753">,</span>&nbsp;<span class="ident" id="7885755">tt</span><span class="op" id="7885757">.</span><span class="ident" id="7885758">out</span><span class="op" id="7885761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885768">}</span><br>
<span class="lineno">150</span><span class="op" id="7885770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7885773">func</span>&nbsp;<span class="ident" id="7885778">BenchmarkIPMaskString</span><span class="op" id="7885799">(</span><span class="ident" id="7885800">b</span>&nbsp;<span class="op" id="7885802">*</span><span class="ident" id="7885803">testing</span><span class="op" id="7885810">.</span><span class="ident" id="7885811">B</span><span class="op" id="7885812">)</span>&nbsp;<span class="op" id="7885814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885817">for</span>&nbsp;<span class="ident" id="7885821">i</span>&nbsp;<span class="op" id="7885823">:=</span>&nbsp;<span class="num" id="7885826">0</span><span class="op" id="7885827">;</span>&nbsp;<span class="ident" id="7885829">i</span>&nbsp;<span class="op" id="7885831">&lt;</span>&nbsp;<span class="ident" id="7885833">b</span><span class="op" id="7885834">.</span><span class="ident" id="7885835">N</span><span class="op" id="7885836">;</span>&nbsp;<span class="ident" id="7885838">i</span><span class="op" id="7885839">++</span>&nbsp;<span class="op" id="7885842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7885846">for</span>&nbsp;<span class="ident" id="7885850">_</span><span class="op" id="7885851">,</span>&nbsp;<span class="ident" id="7885853">tt</span>&nbsp;<span class="op" id="7885856">:=</span>&nbsp;<span class="keyword" id="7885859">range</span>&nbsp;<span class="ident" id="7885865">ipMaskStringTests</span>&nbsp;<span class="op" id="7885883">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885888">tt</span><span class="op" id="7885890">.</span><span class="ident" id="7885891">in</span><span class="op" id="7885893">.</span><span class="ident" id="7885894">String</span><span class="op" id="7885900">(</span><span class="op" id="7885901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885908">}</span><br>
<span class="lineno"></span><span class="op" id="7885910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7885913">var</span>&nbsp;<span class="ident" id="7885917">parseCIDRTests</span>&nbsp;<span class="op" id="7885932">=</span>&nbsp;<span class="op" id="7885934">[</span><span class="op" id="7885935">]</span><span class="keyword" id="7885936">struct</span>&nbsp;<span class="op" id="7885943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885946">in</span>&nbsp;&nbsp;<span class="builtintype" id="7885950">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885958">ip</span>&nbsp;&nbsp;<span class="ident" id="7885962">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885966">net</span>&nbsp;<span class="op" id="7885970">*</span><span class="ident" id="7885971">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7885978">err</span>&nbsp;<span class="builtintype" id="7885982">error</span><br>
<span class="lineno">165</span><span class="op" id="7885988">}</span><span class="op" id="7885989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7885992">{</span><span class="string" id="7885993">&#34;135.104.0.0/32&#34;</span><span class="op" id="7886009">,</span>&nbsp;<span class="ident" id="7886011">IPv4</span><span class="op" id="7886015">(</span><span class="num" id="7886016">135</span><span class="op" id="7886019">,</span>&nbsp;<span class="num" id="7886021">104</span><span class="op" id="7886024">,</span>&nbsp;<span class="num" id="7886026">0</span><span class="op" id="7886027">,</span>&nbsp;<span class="num" id="7886029">0</span><span class="op" id="7886030">)</span><span class="op" id="7886031">,</span>&nbsp;<span class="op" id="7886033">&amp;</span><span class="ident" id="7886034">IPNet</span><span class="op" id="7886039">{</span><span class="ident" id="7886040">IP</span><span class="op" id="7886042">:</span>&nbsp;<span class="ident" id="7886044">IPv4</span><span class="op" id="7886048">(</span><span class="num" id="7886049">135</span><span class="op" id="7886052">,</span>&nbsp;<span class="num" id="7886054">104</span><span class="op" id="7886057">,</span>&nbsp;<span class="num" id="7886059">0</span><span class="op" id="7886060">,</span>&nbsp;<span class="num" id="7886062">0</span><span class="op" id="7886063">)</span><span class="op" id="7886064">,</span>&nbsp;<span class="ident" id="7886066">Mask</span><span class="op" id="7886070">:</span>&nbsp;<span class="ident" id="7886072">IPv4Mask</span><span class="op" id="7886080">(</span><span class="num" id="7886081">255</span><span class="op" id="7886084">,</span>&nbsp;<span class="num" id="7886086">255</span><span class="op" id="7886089">,</span>&nbsp;<span class="num" id="7886091">255</span><span class="op" id="7886094">,</span>&nbsp;<span class="num" id="7886096">255</span><span class="op" id="7886099">)</span><span class="op" id="7886100">}</span><span class="op" id="7886101">,</span>&nbsp;<span class="ident" id="7886103">nil</span><span class="op" id="7886106">}</span><span class="op" id="7886107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886110">{</span><span class="string" id="7886111">&#34;0.0.0.0/24&#34;</span><span class="op" id="7886123">,</span>&nbsp;<span class="ident" id="7886125">IPv4</span><span class="op" id="7886129">(</span><span class="num" id="7886130">0</span><span class="op" id="7886131">,</span>&nbsp;<span class="num" id="7886133">0</span><span class="op" id="7886134">,</span>&nbsp;<span class="num" id="7886136">0</span><span class="op" id="7886137">,</span>&nbsp;<span class="num" id="7886139">0</span><span class="op" id="7886140">)</span><span class="op" id="7886141">,</span>&nbsp;<span class="op" id="7886143">&amp;</span><span class="ident" id="7886144">IPNet</span><span class="op" id="7886149">{</span><span class="ident" id="7886150">IP</span><span class="op" id="7886152">:</span>&nbsp;<span class="ident" id="7886154">IPv4</span><span class="op" id="7886158">(</span><span class="num" id="7886159">0</span><span class="op" id="7886160">,</span>&nbsp;<span class="num" id="7886162">0</span><span class="op" id="7886163">,</span>&nbsp;<span class="num" id="7886165">0</span><span class="op" id="7886166">,</span>&nbsp;<span class="num" id="7886168">0</span><span class="op" id="7886169">)</span><span class="op" id="7886170">,</span>&nbsp;<span class="ident" id="7886172">Mask</span><span class="op" id="7886176">:</span>&nbsp;<span class="ident" id="7886178">IPv4Mask</span><span class="op" id="7886186">(</span><span class="num" id="7886187">255</span><span class="op" id="7886190">,</span>&nbsp;<span class="num" id="7886192">255</span><span class="op" id="7886195">,</span>&nbsp;<span class="num" id="7886197">255</span><span class="op" id="7886200">,</span>&nbsp;<span class="num" id="7886202">0</span><span class="op" id="7886203">)</span><span class="op" id="7886204">}</span><span class="op" id="7886205">,</span>&nbsp;<span class="ident" id="7886207">nil</span><span class="op" id="7886210">}</span><span class="op" id="7886211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886214">{</span><span class="string" id="7886215">&#34;135.104.0.0/24&#34;</span><span class="op" id="7886231">,</span>&nbsp;<span class="ident" id="7886233">IPv4</span><span class="op" id="7886237">(</span><span class="num" id="7886238">135</span><span class="op" id="7886241">,</span>&nbsp;<span class="num" id="7886243">104</span><span class="op" id="7886246">,</span>&nbsp;<span class="num" id="7886248">0</span><span class="op" id="7886249">,</span>&nbsp;<span class="num" id="7886251">0</span><span class="op" id="7886252">)</span><span class="op" id="7886253">,</span>&nbsp;<span class="op" id="7886255">&amp;</span><span class="ident" id="7886256">IPNet</span><span class="op" id="7886261">{</span><span class="ident" id="7886262">IP</span><span class="op" id="7886264">:</span>&nbsp;<span class="ident" id="7886266">IPv4</span><span class="op" id="7886270">(</span><span class="num" id="7886271">135</span><span class="op" id="7886274">,</span>&nbsp;<span class="num" id="7886276">104</span><span class="op" id="7886279">,</span>&nbsp;<span class="num" id="7886281">0</span><span class="op" id="7886282">,</span>&nbsp;<span class="num" id="7886284">0</span><span class="op" id="7886285">)</span><span class="op" id="7886286">,</span>&nbsp;<span class="ident" id="7886288">Mask</span><span class="op" id="7886292">:</span>&nbsp;<span class="ident" id="7886294">IPv4Mask</span><span class="op" id="7886302">(</span><span class="num" id="7886303">255</span><span class="op" id="7886306">,</span>&nbsp;<span class="num" id="7886308">255</span><span class="op" id="7886311">,</span>&nbsp;<span class="num" id="7886313">255</span><span class="op" id="7886316">,</span>&nbsp;<span class="num" id="7886318">0</span><span class="op" id="7886319">)</span><span class="op" id="7886320">}</span><span class="op" id="7886321">,</span>&nbsp;<span class="ident" id="7886323">nil</span><span class="op" id="7886326">}</span><span class="op" id="7886327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886330">{</span><span class="string" id="7886331">&#34;135.104.0.1/32&#34;</span><span class="op" id="7886347">,</span>&nbsp;<span class="ident" id="7886349">IPv4</span><span class="op" id="7886353">(</span><span class="num" id="7886354">135</span><span class="op" id="7886357">,</span>&nbsp;<span class="num" id="7886359">104</span><span class="op" id="7886362">,</span>&nbsp;<span class="num" id="7886364">0</span><span class="op" id="7886365">,</span>&nbsp;<span class="num" id="7886367">1</span><span class="op" id="7886368">)</span><span class="op" id="7886369">,</span>&nbsp;<span class="op" id="7886371">&amp;</span><span class="ident" id="7886372">IPNet</span><span class="op" id="7886377">{</span><span class="ident" id="7886378">IP</span><span class="op" id="7886380">:</span>&nbsp;<span class="ident" id="7886382">IPv4</span><span class="op" id="7886386">(</span><span class="num" id="7886387">135</span><span class="op" id="7886390">,</span>&nbsp;<span class="num" id="7886392">104</span><span class="op" id="7886395">,</span>&nbsp;<span class="num" id="7886397">0</span><span class="op" id="7886398">,</span>&nbsp;<span class="num" id="7886400">1</span><span class="op" id="7886401">)</span><span class="op" id="7886402">,</span>&nbsp;<span class="ident" id="7886404">Mask</span><span class="op" id="7886408">:</span>&nbsp;<span class="ident" id="7886410">IPv4Mask</span><span class="op" id="7886418">(</span><span class="num" id="7886419">255</span><span class="op" id="7886422">,</span>&nbsp;<span class="num" id="7886424">255</span><span class="op" id="7886427">,</span>&nbsp;<span class="num" id="7886429">255</span><span class="op" id="7886432">,</span>&nbsp;<span class="num" id="7886434">255</span><span class="op" id="7886437">)</span><span class="op" id="7886438">}</span><span class="op" id="7886439">,</span>&nbsp;<span class="ident" id="7886441">nil</span><span class="op" id="7886444">}</span><span class="op" id="7886445">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886448">{</span><span class="string" id="7886449">&#34;135.104.0.1/24&#34;</span><span class="op" id="7886465">,</span>&nbsp;<span class="ident" id="7886467">IPv4</span><span class="op" id="7886471">(</span><span class="num" id="7886472">135</span><span class="op" id="7886475">,</span>&nbsp;<span class="num" id="7886477">104</span><span class="op" id="7886480">,</span>&nbsp;<span class="num" id="7886482">0</span><span class="op" id="7886483">,</span>&nbsp;<span class="num" id="7886485">1</span><span class="op" id="7886486">)</span><span class="op" id="7886487">,</span>&nbsp;<span class="op" id="7886489">&amp;</span><span class="ident" id="7886490">IPNet</span><span class="op" id="7886495">{</span><span class="ident" id="7886496">IP</span><span class="op" id="7886498">:</span>&nbsp;<span class="ident" id="7886500">IPv4</span><span class="op" id="7886504">(</span><span class="num" id="7886505">135</span><span class="op" id="7886508">,</span>&nbsp;<span class="num" id="7886510">104</span><span class="op" id="7886513">,</span>&nbsp;<span class="num" id="7886515">0</span><span class="op" id="7886516">,</span>&nbsp;<span class="num" id="7886518">0</span><span class="op" id="7886519">)</span><span class="op" id="7886520">,</span>&nbsp;<span class="ident" id="7886522">Mask</span><span class="op" id="7886526">:</span>&nbsp;<span class="ident" id="7886528">IPv4Mask</span><span class="op" id="7886536">(</span><span class="num" id="7886537">255</span><span class="op" id="7886540">,</span>&nbsp;<span class="num" id="7886542">255</span><span class="op" id="7886545">,</span>&nbsp;<span class="num" id="7886547">255</span><span class="op" id="7886550">,</span>&nbsp;<span class="num" id="7886552">0</span><span class="op" id="7886553">)</span><span class="op" id="7886554">}</span><span class="op" id="7886555">,</span>&nbsp;<span class="ident" id="7886557">nil</span><span class="op" id="7886560">}</span><span class="op" id="7886561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886564">{</span><span class="string" id="7886565">&#34;::1/128&#34;</span><span class="op" id="7886574">,</span>&nbsp;<span class="ident" id="7886576">ParseIP</span><span class="op" id="7886583">(</span><span class="string" id="7886584">&#34;::1&#34;</span><span class="op" id="7886589">)</span><span class="op" id="7886590">,</span>&nbsp;<span class="op" id="7886592">&amp;</span><span class="ident" id="7886593">IPNet</span><span class="op" id="7886598">{</span><span class="ident" id="7886599">IP</span><span class="op" id="7886601">:</span>&nbsp;<span class="ident" id="7886603">ParseIP</span><span class="op" id="7886610">(</span><span class="string" id="7886611">&#34;::1&#34;</span><span class="op" id="7886616">)</span><span class="op" id="7886617">,</span>&nbsp;<span class="ident" id="7886619">Mask</span><span class="op" id="7886623">:</span>&nbsp;<span class="ident" id="7886625">IPMask</span><span class="op" id="7886631">(</span><span class="ident" id="7886632">ParseIP</span><span class="op" id="7886639">(</span><span class="string" id="7886640">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&#34;</span><span class="op" id="7886681">)</span><span class="op" id="7886682">)</span><span class="op" id="7886683">}</span><span class="op" id="7886684">,</span>&nbsp;<span class="ident" id="7886686">nil</span><span class="op" id="7886689">}</span><span class="op" id="7886690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886693">{</span><span class="string" id="7886694">&#34;abcd:2345::/127&#34;</span><span class="op" id="7886711">,</span>&nbsp;<span class="ident" id="7886713">ParseIP</span><span class="op" id="7886720">(</span><span class="string" id="7886721">&#34;abcd:2345::&#34;</span><span class="op" id="7886734">)</span><span class="op" id="7886735">,</span>&nbsp;<span class="op" id="7886737">&amp;</span><span class="ident" id="7886738">IPNet</span><span class="op" id="7886743">{</span><span class="ident" id="7886744">IP</span><span class="op" id="7886746">:</span>&nbsp;<span class="ident" id="7886748">ParseIP</span><span class="op" id="7886755">(</span><span class="string" id="7886756">&#34;abcd:2345::&#34;</span><span class="op" id="7886769">)</span><span class="op" id="7886770">,</span>&nbsp;<span class="ident" id="7886772">Mask</span><span class="op" id="7886776">:</span>&nbsp;<span class="ident" id="7886778">IPMask</span><span class="op" id="7886784">(</span><span class="ident" id="7886785">ParseIP</span><span class="op" id="7886792">(</span><span class="string" id="7886793">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:fffe&#34;</span><span class="op" id="7886834">)</span><span class="op" id="7886835">)</span><span class="op" id="7886836">}</span><span class="op" id="7886837">,</span>&nbsp;<span class="ident" id="7886839">nil</span><span class="op" id="7886842">}</span><span class="op" id="7886843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886846">{</span><span class="string" id="7886847">&#34;abcd:2345::/65&#34;</span><span class="op" id="7886863">,</span>&nbsp;<span class="ident" id="7886865">ParseIP</span><span class="op" id="7886872">(</span><span class="string" id="7886873">&#34;abcd:2345::&#34;</span><span class="op" id="7886886">)</span><span class="op" id="7886887">,</span>&nbsp;<span class="op" id="7886889">&amp;</span><span class="ident" id="7886890">IPNet</span><span class="op" id="7886895">{</span><span class="ident" id="7886896">IP</span><span class="op" id="7886898">:</span>&nbsp;<span class="ident" id="7886900">ParseIP</span><span class="op" id="7886907">(</span><span class="string" id="7886908">&#34;abcd:2345::&#34;</span><span class="op" id="7886921">)</span><span class="op" id="7886922">,</span>&nbsp;<span class="ident" id="7886924">Mask</span><span class="op" id="7886928">:</span>&nbsp;<span class="ident" id="7886930">IPMask</span><span class="op" id="7886936">(</span><span class="ident" id="7886937">ParseIP</span><span class="op" id="7886944">(</span><span class="string" id="7886945">&#34;ffff:ffff:ffff:ffff:8000::&#34;</span><span class="op" id="7886973">)</span><span class="op" id="7886974">)</span><span class="op" id="7886975">}</span><span class="op" id="7886976">,</span>&nbsp;<span class="ident" id="7886978">nil</span><span class="op" id="7886981">}</span><span class="op" id="7886982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7886985">{</span><span class="string" id="7886986">&#34;abcd:2345::/64&#34;</span><span class="op" id="7887002">,</span>&nbsp;<span class="ident" id="7887004">ParseIP</span><span class="op" id="7887011">(</span><span class="string" id="7887012">&#34;abcd:2345::&#34;</span><span class="op" id="7887025">)</span><span class="op" id="7887026">,</span>&nbsp;<span class="op" id="7887028">&amp;</span><span class="ident" id="7887029">IPNet</span><span class="op" id="7887034">{</span><span class="ident" id="7887035">IP</span><span class="op" id="7887037">:</span>&nbsp;<span class="ident" id="7887039">ParseIP</span><span class="op" id="7887046">(</span><span class="string" id="7887047">&#34;abcd:2345::&#34;</span><span class="op" id="7887060">)</span><span class="op" id="7887061">,</span>&nbsp;<span class="ident" id="7887063">Mask</span><span class="op" id="7887067">:</span>&nbsp;<span class="ident" id="7887069">IPMask</span><span class="op" id="7887075">(</span><span class="ident" id="7887076">ParseIP</span><span class="op" id="7887083">(</span><span class="string" id="7887084">&#34;ffff:ffff:ffff:ffff::&#34;</span><span class="op" id="7887107">)</span><span class="op" id="7887108">)</span><span class="op" id="7887109">}</span><span class="op" id="7887110">,</span>&nbsp;<span class="ident" id="7887112">nil</span><span class="op" id="7887115">}</span><span class="op" id="7887116">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887119">{</span><span class="string" id="7887120">&#34;abcd:2345::/63&#34;</span><span class="op" id="7887136">,</span>&nbsp;<span class="ident" id="7887138">ParseIP</span><span class="op" id="7887145">(</span><span class="string" id="7887146">&#34;abcd:2345::&#34;</span><span class="op" id="7887159">)</span><span class="op" id="7887160">,</span>&nbsp;<span class="op" id="7887162">&amp;</span><span class="ident" id="7887163">IPNet</span><span class="op" id="7887168">{</span><span class="ident" id="7887169">IP</span><span class="op" id="7887171">:</span>&nbsp;<span class="ident" id="7887173">ParseIP</span><span class="op" id="7887180">(</span><span class="string" id="7887181">&#34;abcd:2345::&#34;</span><span class="op" id="7887194">)</span><span class="op" id="7887195">,</span>&nbsp;<span class="ident" id="7887197">Mask</span><span class="op" id="7887201">:</span>&nbsp;<span class="ident" id="7887203">IPMask</span><span class="op" id="7887209">(</span><span class="ident" id="7887210">ParseIP</span><span class="op" id="7887217">(</span><span class="string" id="7887218">&#34;ffff:ffff:ffff:fffe::&#34;</span><span class="op" id="7887241">)</span><span class="op" id="7887242">)</span><span class="op" id="7887243">}</span><span class="op" id="7887244">,</span>&nbsp;<span class="ident" id="7887246">nil</span><span class="op" id="7887249">}</span><span class="op" id="7887250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887253">{</span><span class="string" id="7887254">&#34;abcd:2345::/33&#34;</span><span class="op" id="7887270">,</span>&nbsp;<span class="ident" id="7887272">ParseIP</span><span class="op" id="7887279">(</span><span class="string" id="7887280">&#34;abcd:2345::&#34;</span><span class="op" id="7887293">)</span><span class="op" id="7887294">,</span>&nbsp;<span class="op" id="7887296">&amp;</span><span class="ident" id="7887297">IPNet</span><span class="op" id="7887302">{</span><span class="ident" id="7887303">IP</span><span class="op" id="7887305">:</span>&nbsp;<span class="ident" id="7887307">ParseIP</span><span class="op" id="7887314">(</span><span class="string" id="7887315">&#34;abcd:2345::&#34;</span><span class="op" id="7887328">)</span><span class="op" id="7887329">,</span>&nbsp;<span class="ident" id="7887331">Mask</span><span class="op" id="7887335">:</span>&nbsp;<span class="ident" id="7887337">IPMask</span><span class="op" id="7887343">(</span><span class="ident" id="7887344">ParseIP</span><span class="op" id="7887351">(</span><span class="string" id="7887352">&#34;ffff:ffff:8000::&#34;</span><span class="op" id="7887370">)</span><span class="op" id="7887371">)</span><span class="op" id="7887372">}</span><span class="op" id="7887373">,</span>&nbsp;<span class="ident" id="7887375">nil</span><span class="op" id="7887378">}</span><span class="op" id="7887379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887382">{</span><span class="string" id="7887383">&#34;abcd:2345::/32&#34;</span><span class="op" id="7887399">,</span>&nbsp;<span class="ident" id="7887401">ParseIP</span><span class="op" id="7887408">(</span><span class="string" id="7887409">&#34;abcd:2345::&#34;</span><span class="op" id="7887422">)</span><span class="op" id="7887423">,</span>&nbsp;<span class="op" id="7887425">&amp;</span><span class="ident" id="7887426">IPNet</span><span class="op" id="7887431">{</span><span class="ident" id="7887432">IP</span><span class="op" id="7887434">:</span>&nbsp;<span class="ident" id="7887436">ParseIP</span><span class="op" id="7887443">(</span><span class="string" id="7887444">&#34;abcd:2345::&#34;</span><span class="op" id="7887457">)</span><span class="op" id="7887458">,</span>&nbsp;<span class="ident" id="7887460">Mask</span><span class="op" id="7887464">:</span>&nbsp;<span class="ident" id="7887466">IPMask</span><span class="op" id="7887472">(</span><span class="ident" id="7887473">ParseIP</span><span class="op" id="7887480">(</span><span class="string" id="7887481">&#34;ffff:ffff::&#34;</span><span class="op" id="7887494">)</span><span class="op" id="7887495">)</span><span class="op" id="7887496">}</span><span class="op" id="7887497">,</span>&nbsp;<span class="ident" id="7887499">nil</span><span class="op" id="7887502">}</span><span class="op" id="7887503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887506">{</span><span class="string" id="7887507">&#34;abcd:2344::/31&#34;</span><span class="op" id="7887523">,</span>&nbsp;<span class="ident" id="7887525">ParseIP</span><span class="op" id="7887532">(</span><span class="string" id="7887533">&#34;abcd:2344::&#34;</span><span class="op" id="7887546">)</span><span class="op" id="7887547">,</span>&nbsp;<span class="op" id="7887549">&amp;</span><span class="ident" id="7887550">IPNet</span><span class="op" id="7887555">{</span><span class="ident" id="7887556">IP</span><span class="op" id="7887558">:</span>&nbsp;<span class="ident" id="7887560">ParseIP</span><span class="op" id="7887567">(</span><span class="string" id="7887568">&#34;abcd:2344::&#34;</span><span class="op" id="7887581">)</span><span class="op" id="7887582">,</span>&nbsp;<span class="ident" id="7887584">Mask</span><span class="op" id="7887588">:</span>&nbsp;<span class="ident" id="7887590">IPMask</span><span class="op" id="7887596">(</span><span class="ident" id="7887597">ParseIP</span><span class="op" id="7887604">(</span><span class="string" id="7887605">&#34;ffff:fffe::&#34;</span><span class="op" id="7887618">)</span><span class="op" id="7887619">)</span><span class="op" id="7887620">}</span><span class="op" id="7887621">,</span>&nbsp;<span class="ident" id="7887623">nil</span><span class="op" id="7887626">}</span><span class="op" id="7887627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887630">{</span><span class="string" id="7887631">&#34;abcd:2300::/24&#34;</span><span class="op" id="7887647">,</span>&nbsp;<span class="ident" id="7887649">ParseIP</span><span class="op" id="7887656">(</span><span class="string" id="7887657">&#34;abcd:2300::&#34;</span><span class="op" id="7887670">)</span><span class="op" id="7887671">,</span>&nbsp;<span class="op" id="7887673">&amp;</span><span class="ident" id="7887674">IPNet</span><span class="op" id="7887679">{</span><span class="ident" id="7887680">IP</span><span class="op" id="7887682">:</span>&nbsp;<span class="ident" id="7887684">ParseIP</span><span class="op" id="7887691">(</span><span class="string" id="7887692">&#34;abcd:2300::&#34;</span><span class="op" id="7887705">)</span><span class="op" id="7887706">,</span>&nbsp;<span class="ident" id="7887708">Mask</span><span class="op" id="7887712">:</span>&nbsp;<span class="ident" id="7887714">IPMask</span><span class="op" id="7887720">(</span><span class="ident" id="7887721">ParseIP</span><span class="op" id="7887728">(</span><span class="string" id="7887729">&#34;ffff:ff00::&#34;</span><span class="op" id="7887742">)</span><span class="op" id="7887743">)</span><span class="op" id="7887744">}</span><span class="op" id="7887745">,</span>&nbsp;<span class="ident" id="7887747">nil</span><span class="op" id="7887750">}</span><span class="op" id="7887751">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887754">{</span><span class="string" id="7887755">&#34;abcd:2345::/24&#34;</span><span class="op" id="7887771">,</span>&nbsp;<span class="ident" id="7887773">ParseIP</span><span class="op" id="7887780">(</span><span class="string" id="7887781">&#34;abcd:2345::&#34;</span><span class="op" id="7887794">)</span><span class="op" id="7887795">,</span>&nbsp;<span class="op" id="7887797">&amp;</span><span class="ident" id="7887798">IPNet</span><span class="op" id="7887803">{</span><span class="ident" id="7887804">IP</span><span class="op" id="7887806">:</span>&nbsp;<span class="ident" id="7887808">ParseIP</span><span class="op" id="7887815">(</span><span class="string" id="7887816">&#34;abcd:2300::&#34;</span><span class="op" id="7887829">)</span><span class="op" id="7887830">,</span>&nbsp;<span class="ident" id="7887832">Mask</span><span class="op" id="7887836">:</span>&nbsp;<span class="ident" id="7887838">IPMask</span><span class="op" id="7887844">(</span><span class="ident" id="7887845">ParseIP</span><span class="op" id="7887852">(</span><span class="string" id="7887853">&#34;ffff:ff00::&#34;</span><span class="op" id="7887866">)</span><span class="op" id="7887867">)</span><span class="op" id="7887868">}</span><span class="op" id="7887869">,</span>&nbsp;<span class="ident" id="7887871">nil</span><span class="op" id="7887874">}</span><span class="op" id="7887875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7887878">{</span><span class="string" id="7887879">&#34;2001:DB8::/48&#34;</span><span class="op" id="7887894">,</span>&nbsp;<span class="ident" id="7887896">ParseIP</span><span class="op" id="7887903">(</span><span class="string" id="7887904">&#34;2001:DB8::&#34;</span><span class="op" id="7887916">)</span><span class="op" id="7887917">,</span>&nbsp;<span class="op" id="7887919">&amp;</span><span class="ident" id="7887920">IPNet</span><span class="op" id="7887925">{</span><span class="ident" id="7887926">IP</span><span class="op" id="7887928">:</span>&nbsp;<span class="ident" id="7887930">ParseIP</span><span class="op" id="7887937">(</span><span class="string" id="7887938">&#34;2001:DB8::&#34;</span><span class="op" id="7887950">)</span><span class="op" id="7887951">,</span>&nbsp;<span class="ident" id="7887953">Mask</span><span class="op" id="7887957">:</span>&nbsp;<span class="ident" id="7887959">IPMask</span><span class="op" id="7887965">(</span><span class="ident" id="7887966">ParseIP</span><span class="op" id="7887973">(</span><span class="string" id="7887974">&#34;ffff:ffff:ffff::&#34;</span><span class="op" id="7887992">)</span><span class="op" id="7887993">)</span><span class="op" id="7887994">}</span><span class="op" id="7887995">,</span>&nbsp;<span class="ident" id="7887997">nil</span><span class="op" id="7888000">}</span><span class="op" id="7888001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888004">{</span><span class="string" id="7888005">&#34;2001:DB8::1/48&#34;</span><span class="op" id="7888021">,</span>&nbsp;<span class="ident" id="7888023">ParseIP</span><span class="op" id="7888030">(</span><span class="string" id="7888031">&#34;2001:DB8::1&#34;</span><span class="op" id="7888044">)</span><span class="op" id="7888045">,</span>&nbsp;<span class="op" id="7888047">&amp;</span><span class="ident" id="7888048">IPNet</span><span class="op" id="7888053">{</span><span class="ident" id="7888054">IP</span><span class="op" id="7888056">:</span>&nbsp;<span class="ident" id="7888058">ParseIP</span><span class="op" id="7888065">(</span><span class="string" id="7888066">&#34;2001:DB8::&#34;</span><span class="op" id="7888078">)</span><span class="op" id="7888079">,</span>&nbsp;<span class="ident" id="7888081">Mask</span><span class="op" id="7888085">:</span>&nbsp;<span class="ident" id="7888087">IPMask</span><span class="op" id="7888093">(</span><span class="ident" id="7888094">ParseIP</span><span class="op" id="7888101">(</span><span class="string" id="7888102">&#34;ffff:ffff:ffff::&#34;</span><span class="op" id="7888120">)</span><span class="op" id="7888121">)</span><span class="op" id="7888122">}</span><span class="op" id="7888123">,</span>&nbsp;<span class="ident" id="7888125">nil</span><span class="op" id="7888128">}</span><span class="op" id="7888129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888132">{</span><span class="string" id="7888133">&#34;192.168.1.1/255.255.255.0&#34;</span><span class="op" id="7888160">,</span>&nbsp;<span class="ident" id="7888162">nil</span><span class="op" id="7888165">,</span>&nbsp;<span class="ident" id="7888167">nil</span><span class="op" id="7888170">,</span>&nbsp;<span class="op" id="7888172">&amp;</span><span class="ident" id="7888173">ParseError</span><span class="op" id="7888183">{</span><span class="string" id="7888184">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="7888198">,</span>&nbsp;<span class="string" id="7888200">&#34;192.168.1.1/255.255.255.0&#34;</span><span class="op" id="7888227">}</span><span class="op" id="7888228">}</span><span class="op" id="7888229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888232">{</span><span class="string" id="7888233">&#34;192.168.1.1/35&#34;</span><span class="op" id="7888249">,</span>&nbsp;<span class="ident" id="7888251">nil</span><span class="op" id="7888254">,</span>&nbsp;<span class="ident" id="7888256">nil</span><span class="op" id="7888259">,</span>&nbsp;<span class="op" id="7888261">&amp;</span><span class="ident" id="7888262">ParseError</span><span class="op" id="7888272">{</span><span class="string" id="7888273">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="7888287">,</span>&nbsp;<span class="string" id="7888289">&#34;192.168.1.1/35&#34;</span><span class="op" id="7888305">}</span><span class="op" id="7888306">}</span><span class="op" id="7888307">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888310">{</span><span class="string" id="7888311">&#34;2001:db8::1/-1&#34;</span><span class="op" id="7888327">,</span>&nbsp;<span class="ident" id="7888329">nil</span><span class="op" id="7888332">,</span>&nbsp;<span class="ident" id="7888334">nil</span><span class="op" id="7888337">,</span>&nbsp;<span class="op" id="7888339">&amp;</span><span class="ident" id="7888340">ParseError</span><span class="op" id="7888350">{</span><span class="string" id="7888351">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="7888365">,</span>&nbsp;<span class="string" id="7888367">&#34;2001:db8::1/-1&#34;</span><span class="op" id="7888383">}</span><span class="op" id="7888384">}</span><span class="op" id="7888385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888388">{</span><span class="string" id="7888389">&#34;&#34;</span><span class="op" id="7888391">,</span>&nbsp;<span class="ident" id="7888393">nil</span><span class="op" id="7888396">,</span>&nbsp;<span class="ident" id="7888398">nil</span><span class="op" id="7888401">,</span>&nbsp;<span class="op" id="7888403">&amp;</span><span class="ident" id="7888404">ParseError</span><span class="op" id="7888414">{</span><span class="string" id="7888415">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="7888429">,</span>&nbsp;<span class="string" id="7888431">&#34;&#34;</span><span class="op" id="7888433">}</span><span class="op" id="7888434">}</span><span class="op" id="7888435">,</span><br>
<span class="lineno"></span><span class="op" id="7888437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7888440">func</span>&nbsp;<span class="ident" id="7888445">TestParseCIDR</span><span class="op" id="7888458">(</span><span class="ident" id="7888459">t</span>&nbsp;<span class="op" id="7888461">*</span><span class="ident" id="7888462">testing</span><span class="op" id="7888469">.</span><span class="ident" id="7888470">T</span><span class="op" id="7888471">)</span>&nbsp;<span class="op" id="7888473">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7888476">for</span>&nbsp;<span class="ident" id="7888480">_</span><span class="op" id="7888481">,</span>&nbsp;<span class="ident" id="7888483">tt</span>&nbsp;<span class="op" id="7888486">:=</span>&nbsp;<span class="keyword" id="7888489">range</span>&nbsp;<span class="ident" id="7888495">parseCIDRTests</span>&nbsp;<span class="op" id="7888510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7888514">ip</span><span class="op" id="7888516">,</span>&nbsp;<span class="ident" id="7888518">net</span><span class="op" id="7888521">,</span>&nbsp;<span class="ident" id="7888523">err</span>&nbsp;<span class="op" id="7888527">:=</span>&nbsp;<span class="ident" id="7888530">ParseCIDR</span><span class="op" id="7888539">(</span><span class="ident" id="7888540">tt</span><span class="op" id="7888542">.</span><span class="ident" id="7888543">in</span><span class="op" id="7888545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7888549">if</span>&nbsp;<span class="op" id="7888552">!</span><span class="ident" id="7888553">reflect</span><span class="op" id="7888560">.</span><span class="ident" id="7888561">DeepEqual</span><span class="op" id="7888570">(</span><span class="ident" id="7888571">err</span><span class="op" id="7888574">,</span>&nbsp;<span class="ident" id="7888576">tt</span><span class="op" id="7888578">.</span><span class="ident" id="7888579">err</span><span class="op" id="7888582">)</span>&nbsp;<span class="op" id="7888584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7888589">t</span><span class="op" id="7888590">.</span><span class="ident" id="7888591">Errorf</span><span class="op" id="7888597">(</span><span class="string" id="7888598">&#34;ParseCIDR(%q)&nbsp;=&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="7888635">,</span>&nbsp;<span class="ident" id="7888637">tt</span><span class="op" id="7888639">.</span><span class="ident" id="7888640">in</span><span class="op" id="7888642">,</span>&nbsp;<span class="ident" id="7888644">ip</span><span class="op" id="7888646">,</span>&nbsp;<span class="ident" id="7888648">net</span><span class="op" id="7888651">,</span>&nbsp;<span class="ident" id="7888653">tt</span><span class="op" id="7888655">.</span><span class="ident" id="7888656">ip</span><span class="op" id="7888658">,</span>&nbsp;<span class="ident" id="7888660">tt</span><span class="op" id="7888662">.</span><span class="ident" id="7888663">net</span><span class="op" id="7888666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888670">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7888674">if</span>&nbsp;<span class="ident" id="7888677">err</span>&nbsp;<span class="op" id="7888681">==</span>&nbsp;<span class="ident" id="7888684">nil</span>&nbsp;<span class="op" id="7888688">&amp;&amp;</span>&nbsp;<span class="op" id="7888691">(</span><span class="op" id="7888692">!</span><span class="ident" id="7888693">tt</span><span class="op" id="7888695">.</span><span class="ident" id="7888696">ip</span><span class="op" id="7888698">.</span><span class="ident" id="7888699">Equal</span><span class="op" id="7888704">(</span><span class="ident" id="7888705">ip</span><span class="op" id="7888707">)</span>&nbsp;<span class="op" id="7888709">||</span>&nbsp;<span class="op" id="7888712">!</span><span class="ident" id="7888713">tt</span><span class="op" id="7888715">.</span><span class="ident" id="7888716">net</span><span class="op" id="7888719">.</span><span class="ident" id="7888720">IP</span><span class="op" id="7888722">.</span><span class="ident" id="7888723">Equal</span><span class="op" id="7888728">(</span><span class="ident" id="7888729">net</span><span class="op" id="7888732">.</span><span class="ident" id="7888733">IP</span><span class="op" id="7888735">)</span>&nbsp;<span class="op" id="7888737">||</span>&nbsp;<span class="op" id="7888740">!</span><span class="ident" id="7888741">reflect</span><span class="op" id="7888748">.</span><span class="ident" id="7888749">DeepEqual</span><span class="op" id="7888758">(</span><span class="ident" id="7888759">net</span><span class="op" id="7888762">.</span><span class="ident" id="7888763">Mask</span><span class="op" id="7888767">,</span>&nbsp;<span class="ident" id="7888769">tt</span><span class="op" id="7888771">.</span><span class="ident" id="7888772">net</span><span class="op" id="7888775">.</span><span class="ident" id="7888776">Mask</span><span class="op" id="7888780">)</span><span class="op" id="7888781">)</span>&nbsp;<span class="op" id="7888783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7888788">t</span><span class="op" id="7888789">.</span><span class="ident" id="7888790">Errorf</span><span class="op" id="7888796">(</span><span class="string" id="7888797">&#34;ParseCIDR(%q)&nbsp;=&nbsp;%v,&nbsp;{%v,&nbsp;%v};&nbsp;want&nbsp;%v,&nbsp;{%v,&nbsp;%v}&#34;</span><span class="op" id="7888846">,</span>&nbsp;<span class="ident" id="7888848">tt</span><span class="op" id="7888850">.</span><span class="ident" id="7888851">in</span><span class="op" id="7888853">,</span>&nbsp;<span class="ident" id="7888855">ip</span><span class="op" id="7888857">,</span>&nbsp;<span class="ident" id="7888859">net</span><span class="op" id="7888862">.</span><span class="ident" id="7888863">IP</span><span class="op" id="7888865">,</span>&nbsp;<span class="ident" id="7888867">net</span><span class="op" id="7888870">.</span><span class="ident" id="7888871">Mask</span><span class="op" id="7888875">,</span>&nbsp;<span class="ident" id="7888877">tt</span><span class="op" id="7888879">.</span><span class="ident" id="7888880">ip</span><span class="op" id="7888882">,</span>&nbsp;<span class="ident" id="7888884">tt</span><span class="op" id="7888886">.</span><span class="ident" id="7888887">net</span><span class="op" id="7888890">.</span><span class="ident" id="7888891">IP</span><span class="op" id="7888893">,</span>&nbsp;<span class="ident" id="7888895">tt</span><span class="op" id="7888897">.</span><span class="ident" id="7888898">net</span><span class="op" id="7888901">.</span><span class="ident" id="7888902">Mask</span><span class="op" id="7888906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888913">}</span><br>
<span class="lineno"></span><span class="op" id="7888915">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="7888918">var</span>&nbsp;<span class="ident" id="7888922">ipNetContainsTests</span>&nbsp;<span class="op" id="7888941">=</span>&nbsp;<span class="op" id="7888943">[</span><span class="op" id="7888944">]</span><span class="keyword" id="7888945">struct</span>&nbsp;<span class="op" id="7888952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7888955">ip</span>&nbsp;&nbsp;<span class="ident" id="7888959">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7888963">net</span>&nbsp;<span class="op" id="7888967">*</span><span class="ident" id="7888968">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7888975">ok</span>&nbsp;&nbsp;<span class="builtintype" id="7888979">bool</span><br>
<span class="lineno">205</span><span class="op" id="7888984">}</span><span class="op" id="7888985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7888988">{</span><span class="ident" id="7888989">IPv4</span><span class="op" id="7888993">(</span><span class="num" id="7888994">172</span><span class="op" id="7888997">,</span>&nbsp;<span class="num" id="7888999">16</span><span class="op" id="7889001">,</span>&nbsp;<span class="num" id="7889003">1</span><span class="op" id="7889004">,</span>&nbsp;<span class="num" id="7889006">1</span><span class="op" id="7889007">)</span><span class="op" id="7889008">,</span>&nbsp;<span class="op" id="7889010">&amp;</span><span class="ident" id="7889011">IPNet</span><span class="op" id="7889016">{</span><span class="ident" id="7889017">IP</span><span class="op" id="7889019">:</span>&nbsp;<span class="ident" id="7889021">IPv4</span><span class="op" id="7889025">(</span><span class="num" id="7889026">172</span><span class="op" id="7889029">,</span>&nbsp;<span class="num" id="7889031">16</span><span class="op" id="7889033">,</span>&nbsp;<span class="num" id="7889035">0</span><span class="op" id="7889036">,</span>&nbsp;<span class="num" id="7889038">0</span><span class="op" id="7889039">)</span><span class="op" id="7889040">,</span>&nbsp;<span class="ident" id="7889042">Mask</span><span class="op" id="7889046">:</span>&nbsp;<span class="ident" id="7889048">CIDRMask</span><span class="op" id="7889056">(</span><span class="num" id="7889057">12</span><span class="op" id="7889059">,</span>&nbsp;<span class="num" id="7889061">32</span><span class="op" id="7889063">)</span><span class="op" id="7889064">}</span><span class="op" id="7889065">,</span>&nbsp;<span class="builtintype" id="7889067">true</span><span class="op" id="7889071">}</span><span class="op" id="7889072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889075">{</span><span class="ident" id="7889076">IPv4</span><span class="op" id="7889080">(</span><span class="num" id="7889081">172</span><span class="op" id="7889084">,</span>&nbsp;<span class="num" id="7889086">24</span><span class="op" id="7889088">,</span>&nbsp;<span class="num" id="7889090">0</span><span class="op" id="7889091">,</span>&nbsp;<span class="num" id="7889093">1</span><span class="op" id="7889094">)</span><span class="op" id="7889095">,</span>&nbsp;<span class="op" id="7889097">&amp;</span><span class="ident" id="7889098">IPNet</span><span class="op" id="7889103">{</span><span class="ident" id="7889104">IP</span><span class="op" id="7889106">:</span>&nbsp;<span class="ident" id="7889108">IPv4</span><span class="op" id="7889112">(</span><span class="num" id="7889113">172</span><span class="op" id="7889116">,</span>&nbsp;<span class="num" id="7889118">16</span><span class="op" id="7889120">,</span>&nbsp;<span class="num" id="7889122">0</span><span class="op" id="7889123">,</span>&nbsp;<span class="num" id="7889125">0</span><span class="op" id="7889126">)</span><span class="op" id="7889127">,</span>&nbsp;<span class="ident" id="7889129">Mask</span><span class="op" id="7889133">:</span>&nbsp;<span class="ident" id="7889135">CIDRMask</span><span class="op" id="7889143">(</span><span class="num" id="7889144">13</span><span class="op" id="7889146">,</span>&nbsp;<span class="num" id="7889148">32</span><span class="op" id="7889150">)</span><span class="op" id="7889151">}</span><span class="op" id="7889152">,</span>&nbsp;<span class="builtintype" id="7889154">false</span><span class="op" id="7889159">}</span><span class="op" id="7889160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889163">{</span><span class="ident" id="7889164">IPv4</span><span class="op" id="7889168">(</span><span class="num" id="7889169">192</span><span class="op" id="7889172">,</span>&nbsp;<span class="num" id="7889174">168</span><span class="op" id="7889177">,</span>&nbsp;<span class="num" id="7889179">0</span><span class="op" id="7889180">,</span>&nbsp;<span class="num" id="7889182">3</span><span class="op" id="7889183">)</span><span class="op" id="7889184">,</span>&nbsp;<span class="op" id="7889186">&amp;</span><span class="ident" id="7889187">IPNet</span><span class="op" id="7889192">{</span><span class="ident" id="7889193">IP</span><span class="op" id="7889195">:</span>&nbsp;<span class="ident" id="7889197">IPv4</span><span class="op" id="7889201">(</span><span class="num" id="7889202">192</span><span class="op" id="7889205">,</span>&nbsp;<span class="num" id="7889207">168</span><span class="op" id="7889210">,</span>&nbsp;<span class="num" id="7889212">0</span><span class="op" id="7889213">,</span>&nbsp;<span class="num" id="7889215">0</span><span class="op" id="7889216">)</span><span class="op" id="7889217">,</span>&nbsp;<span class="ident" id="7889219">Mask</span><span class="op" id="7889223">:</span>&nbsp;<span class="ident" id="7889225">IPv4Mask</span><span class="op" id="7889233">(</span><span class="num" id="7889234">0</span><span class="op" id="7889235">,</span>&nbsp;<span class="num" id="7889237">0</span><span class="op" id="7889238">,</span>&nbsp;<span class="num" id="7889240">255</span><span class="op" id="7889243">,</span>&nbsp;<span class="num" id="7889245">252</span><span class="op" id="7889248">)</span><span class="op" id="7889249">}</span><span class="op" id="7889250">,</span>&nbsp;<span class="builtintype" id="7889252">true</span><span class="op" id="7889256">}</span><span class="op" id="7889257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889260">{</span><span class="ident" id="7889261">IPv4</span><span class="op" id="7889265">(</span><span class="num" id="7889266">192</span><span class="op" id="7889269">,</span>&nbsp;<span class="num" id="7889271">168</span><span class="op" id="7889274">,</span>&nbsp;<span class="num" id="7889276">0</span><span class="op" id="7889277">,</span>&nbsp;<span class="num" id="7889279">4</span><span class="op" id="7889280">)</span><span class="op" id="7889281">,</span>&nbsp;<span class="op" id="7889283">&amp;</span><span class="ident" id="7889284">IPNet</span><span class="op" id="7889289">{</span><span class="ident" id="7889290">IP</span><span class="op" id="7889292">:</span>&nbsp;<span class="ident" id="7889294">IPv4</span><span class="op" id="7889298">(</span><span class="num" id="7889299">192</span><span class="op" id="7889302">,</span>&nbsp;<span class="num" id="7889304">168</span><span class="op" id="7889307">,</span>&nbsp;<span class="num" id="7889309">0</span><span class="op" id="7889310">,</span>&nbsp;<span class="num" id="7889312">0</span><span class="op" id="7889313">)</span><span class="op" id="7889314">,</span>&nbsp;<span class="ident" id="7889316">Mask</span><span class="op" id="7889320">:</span>&nbsp;<span class="ident" id="7889322">IPv4Mask</span><span class="op" id="7889330">(</span><span class="num" id="7889331">0</span><span class="op" id="7889332">,</span>&nbsp;<span class="num" id="7889334">255</span><span class="op" id="7889337">,</span>&nbsp;<span class="num" id="7889339">0</span><span class="op" id="7889340">,</span>&nbsp;<span class="num" id="7889342">252</span><span class="op" id="7889345">)</span><span class="op" id="7889346">}</span><span class="op" id="7889347">,</span>&nbsp;<span class="builtintype" id="7889349">false</span><span class="op" id="7889354">}</span><span class="op" id="7889355">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889358">{</span><span class="ident" id="7889359">ParseIP</span><span class="op" id="7889366">(</span><span class="string" id="7889367">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="7889384">)</span><span class="op" id="7889385">,</span>&nbsp;<span class="op" id="7889387">&amp;</span><span class="ident" id="7889388">IPNet</span><span class="op" id="7889393">{</span><span class="ident" id="7889394">IP</span><span class="op" id="7889396">:</span>&nbsp;<span class="ident" id="7889398">ParseIP</span><span class="op" id="7889405">(</span><span class="string" id="7889406">&#34;2001:db8:1::&#34;</span><span class="op" id="7889420">)</span><span class="op" id="7889421">,</span>&nbsp;<span class="ident" id="7889423">Mask</span><span class="op" id="7889427">:</span>&nbsp;<span class="ident" id="7889429">CIDRMask</span><span class="op" id="7889437">(</span><span class="num" id="7889438">47</span><span class="op" id="7889440">,</span>&nbsp;<span class="num" id="7889442">128</span><span class="op" id="7889445">)</span><span class="op" id="7889446">}</span><span class="op" id="7889447">,</span>&nbsp;<span class="builtintype" id="7889449">true</span><span class="op" id="7889453">}</span><span class="op" id="7889454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889457">{</span><span class="ident" id="7889458">ParseIP</span><span class="op" id="7889465">(</span><span class="string" id="7889466">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="7889483">)</span><span class="op" id="7889484">,</span>&nbsp;<span class="op" id="7889486">&amp;</span><span class="ident" id="7889487">IPNet</span><span class="op" id="7889492">{</span><span class="ident" id="7889493">IP</span><span class="op" id="7889495">:</span>&nbsp;<span class="ident" id="7889497">ParseIP</span><span class="op" id="7889504">(</span><span class="string" id="7889505">&#34;2001:db8:2::&#34;</span><span class="op" id="7889519">)</span><span class="op" id="7889520">,</span>&nbsp;<span class="ident" id="7889522">Mask</span><span class="op" id="7889526">:</span>&nbsp;<span class="ident" id="7889528">CIDRMask</span><span class="op" id="7889536">(</span><span class="num" id="7889537">47</span><span class="op" id="7889539">,</span>&nbsp;<span class="num" id="7889541">128</span><span class="op" id="7889544">)</span><span class="op" id="7889545">}</span><span class="op" id="7889546">,</span>&nbsp;<span class="builtintype" id="7889548">false</span><span class="op" id="7889553">}</span><span class="op" id="7889554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889557">{</span><span class="ident" id="7889558">ParseIP</span><span class="op" id="7889565">(</span><span class="string" id="7889566">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="7889583">)</span><span class="op" id="7889584">,</span>&nbsp;<span class="op" id="7889586">&amp;</span><span class="ident" id="7889587">IPNet</span><span class="op" id="7889592">{</span><span class="ident" id="7889593">IP</span><span class="op" id="7889595">:</span>&nbsp;<span class="ident" id="7889597">ParseIP</span><span class="op" id="7889604">(</span><span class="string" id="7889605">&#34;2001:db8:1::&#34;</span><span class="op" id="7889619">)</span><span class="op" id="7889620">,</span>&nbsp;<span class="ident" id="7889622">Mask</span><span class="op" id="7889626">:</span>&nbsp;<span class="ident" id="7889628">IPMask</span><span class="op" id="7889634">(</span><span class="ident" id="7889635">ParseIP</span><span class="op" id="7889642">(</span><span class="string" id="7889643">&#34;ffff:0:ffff::&#34;</span><span class="op" id="7889658">)</span><span class="op" id="7889659">)</span><span class="op" id="7889660">}</span><span class="op" id="7889661">,</span>&nbsp;<span class="builtintype" id="7889663">true</span><span class="op" id="7889667">}</span><span class="op" id="7889668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889671">{</span><span class="ident" id="7889672">ParseIP</span><span class="op" id="7889679">(</span><span class="string" id="7889680">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="7889697">)</span><span class="op" id="7889698">,</span>&nbsp;<span class="op" id="7889700">&amp;</span><span class="ident" id="7889701">IPNet</span><span class="op" id="7889706">{</span><span class="ident" id="7889707">IP</span><span class="op" id="7889709">:</span>&nbsp;<span class="ident" id="7889711">ParseIP</span><span class="op" id="7889718">(</span><span class="string" id="7889719">&#34;2001:db8:1::&#34;</span><span class="op" id="7889733">)</span><span class="op" id="7889734">,</span>&nbsp;<span class="ident" id="7889736">Mask</span><span class="op" id="7889740">:</span>&nbsp;<span class="ident" id="7889742">IPMask</span><span class="op" id="7889748">(</span><span class="ident" id="7889749">ParseIP</span><span class="op" id="7889756">(</span><span class="string" id="7889757">&#34;0:0:0:ffff::&#34;</span><span class="op" id="7889771">)</span><span class="op" id="7889772">)</span><span class="op" id="7889773">}</span><span class="op" id="7889774">,</span>&nbsp;<span class="builtintype" id="7889776">false</span><span class="op" id="7889781">}</span><span class="op" id="7889782">,</span><br>
<span class="lineno"></span><span class="op" id="7889784">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7889787">func</span>&nbsp;<span class="ident" id="7889792">TestIPNetContains</span><span class="op" id="7889809">(</span><span class="ident" id="7889810">t</span>&nbsp;<span class="op" id="7889812">*</span><span class="ident" id="7889813">testing</span><span class="op" id="7889820">.</span><span class="ident" id="7889821">T</span><span class="op" id="7889822">)</span>&nbsp;<span class="op" id="7889824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7889827">for</span>&nbsp;<span class="ident" id="7889831">_</span><span class="op" id="7889832">,</span>&nbsp;<span class="ident" id="7889834">tt</span>&nbsp;<span class="op" id="7889837">:=</span>&nbsp;<span class="keyword" id="7889840">range</span>&nbsp;<span class="ident" id="7889846">ipNetContainsTests</span>&nbsp;<span class="op" id="7889865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7889869">if</span>&nbsp;<span class="ident" id="7889872">ok</span>&nbsp;<span class="op" id="7889875">:=</span>&nbsp;<span class="ident" id="7889878">tt</span><span class="op" id="7889880">.</span><span class="ident" id="7889881">net</span><span class="op" id="7889884">.</span><span class="ident" id="7889885">Contains</span><span class="op" id="7889893">(</span><span class="ident" id="7889894">tt</span><span class="op" id="7889896">.</span><span class="ident" id="7889897">ip</span><span class="op" id="7889899">)</span><span class="op" id="7889900">;</span>&nbsp;<span class="ident" id="7889902">ok</span>&nbsp;<span class="op" id="7889905">!=</span>&nbsp;<span class="ident" id="7889908">tt</span><span class="op" id="7889910">.</span><span class="ident" id="7889911">ok</span>&nbsp;<span class="op" id="7889914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7889919">t</span><span class="op" id="7889920">.</span><span class="ident" id="7889921">Errorf</span><span class="op" id="7889927">(</span><span class="string" id="7889928">&#34;IPNet(%v).Contains(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7889966">,</span>&nbsp;<span class="ident" id="7889968">tt</span><span class="op" id="7889970">.</span><span class="ident" id="7889971">net</span><span class="op" id="7889974">,</span>&nbsp;<span class="ident" id="7889976">tt</span><span class="op" id="7889978">.</span><span class="ident" id="7889979">ip</span><span class="op" id="7889981">,</span>&nbsp;<span class="ident" id="7889983">ok</span><span class="op" id="7889985">,</span>&nbsp;<span class="ident" id="7889987">tt</span><span class="op" id="7889989">.</span><span class="ident" id="7889990">ok</span><span class="op" id="7889992">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7889999">}</span><br>
<span class="lineno"></span><span class="op" id="7890001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7890004">var</span>&nbsp;<span class="ident" id="7890008">ipNetStringTests</span>&nbsp;<span class="op" id="7890025">=</span>&nbsp;<span class="op" id="7890027">[</span><span class="op" id="7890028">]</span><span class="keyword" id="7890029">struct</span>&nbsp;<span class="op" id="7890036">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890039">in</span>&nbsp;&nbsp;<span class="op" id="7890043">*</span><span class="ident" id="7890044">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890051">out</span>&nbsp;<span class="builtintype" id="7890055">string</span><br>
<span class="lineno"></span><span class="op" id="7890062">}</span><span class="op" id="7890063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890066">{</span><span class="op" id="7890067">&amp;</span><span class="ident" id="7890068">IPNet</span><span class="op" id="7890073">{</span><span class="ident" id="7890074">IP</span><span class="op" id="7890076">:</span>&nbsp;<span class="ident" id="7890078">IPv4</span><span class="op" id="7890082">(</span><span class="num" id="7890083">192</span><span class="op" id="7890086">,</span>&nbsp;<span class="num" id="7890088">168</span><span class="op" id="7890091">,</span>&nbsp;<span class="num" id="7890093">1</span><span class="op" id="7890094">,</span>&nbsp;<span class="num" id="7890096">0</span><span class="op" id="7890097">)</span><span class="op" id="7890098">,</span>&nbsp;<span class="ident" id="7890100">Mask</span><span class="op" id="7890104">:</span>&nbsp;<span class="ident" id="7890106">CIDRMask</span><span class="op" id="7890114">(</span><span class="num" id="7890115">26</span><span class="op" id="7890117">,</span>&nbsp;<span class="num" id="7890119">32</span><span class="op" id="7890121">)</span><span class="op" id="7890122">}</span><span class="op" id="7890123">,</span>&nbsp;<span class="string" id="7890125">&#34;192.168.1.0/26&#34;</span><span class="op" id="7890141">}</span><span class="op" id="7890142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890145">{</span><span class="op" id="7890146">&amp;</span><span class="ident" id="7890147">IPNet</span><span class="op" id="7890152">{</span><span class="ident" id="7890153">IP</span><span class="op" id="7890155">:</span>&nbsp;<span class="ident" id="7890157">IPv4</span><span class="op" id="7890161">(</span><span class="num" id="7890162">192</span><span class="op" id="7890165">,</span>&nbsp;<span class="num" id="7890167">168</span><span class="op" id="7890170">,</span>&nbsp;<span class="num" id="7890172">1</span><span class="op" id="7890173">,</span>&nbsp;<span class="num" id="7890175">0</span><span class="op" id="7890176">)</span><span class="op" id="7890177">,</span>&nbsp;<span class="ident" id="7890179">Mask</span><span class="op" id="7890183">:</span>&nbsp;<span class="ident" id="7890185">IPv4Mask</span><span class="op" id="7890193">(</span><span class="num" id="7890194">255</span><span class="op" id="7890197">,</span>&nbsp;<span class="num" id="7890199">0</span><span class="op" id="7890200">,</span>&nbsp;<span class="num" id="7890202">255</span><span class="op" id="7890205">,</span>&nbsp;<span class="num" id="7890207">0</span><span class="op" id="7890208">)</span><span class="op" id="7890209">}</span><span class="op" id="7890210">,</span>&nbsp;<span class="string" id="7890212">&#34;192.168.1.0/ff00ff00&#34;</span><span class="op" id="7890234">}</span><span class="op" id="7890235">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890238">{</span><span class="op" id="7890239">&amp;</span><span class="ident" id="7890240">IPNet</span><span class="op" id="7890245">{</span><span class="ident" id="7890246">IP</span><span class="op" id="7890248">:</span>&nbsp;<span class="ident" id="7890250">ParseIP</span><span class="op" id="7890257">(</span><span class="string" id="7890258">&#34;2001:db8::&#34;</span><span class="op" id="7890270">)</span><span class="op" id="7890271">,</span>&nbsp;<span class="ident" id="7890273">Mask</span><span class="op" id="7890277">:</span>&nbsp;<span class="ident" id="7890279">CIDRMask</span><span class="op" id="7890287">(</span><span class="num" id="7890288">55</span><span class="op" id="7890290">,</span>&nbsp;<span class="num" id="7890292">128</span><span class="op" id="7890295">)</span><span class="op" id="7890296">}</span><span class="op" id="7890297">,</span>&nbsp;<span class="string" id="7890299">&#34;2001:db8::/55&#34;</span><span class="op" id="7890314">}</span><span class="op" id="7890315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890318">{</span><span class="op" id="7890319">&amp;</span><span class="ident" id="7890320">IPNet</span><span class="op" id="7890325">{</span><span class="ident" id="7890326">IP</span><span class="op" id="7890328">:</span>&nbsp;<span class="ident" id="7890330">ParseIP</span><span class="op" id="7890337">(</span><span class="string" id="7890338">&#34;2001:db8::&#34;</span><span class="op" id="7890350">)</span><span class="op" id="7890351">,</span>&nbsp;<span class="ident" id="7890353">Mask</span><span class="op" id="7890357">:</span>&nbsp;<span class="ident" id="7890359">IPMask</span><span class="op" id="7890365">(</span><span class="ident" id="7890366">ParseIP</span><span class="op" id="7890373">(</span><span class="string" id="7890374">&#34;8000:f123:0:cafe::&#34;</span><span class="op" id="7890394">)</span><span class="op" id="7890395">)</span><span class="op" id="7890396">}</span><span class="op" id="7890397">,</span>&nbsp;<span class="string" id="7890399">&#34;2001:db8::/8000f1230000cafe0000000000000000&#34;</span><span class="op" id="7890444">}</span><span class="op" id="7890445">,</span><br>
<span class="lineno"></span><span class="op" id="7890447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7890450">func</span>&nbsp;<span class="ident" id="7890455">TestIPNetString</span><span class="op" id="7890470">(</span><span class="ident" id="7890471">t</span>&nbsp;<span class="op" id="7890473">*</span><span class="ident" id="7890474">testing</span><span class="op" id="7890481">.</span><span class="ident" id="7890482">T</span><span class="op" id="7890483">)</span>&nbsp;<span class="op" id="7890485">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7890488">for</span>&nbsp;<span class="ident" id="7890492">_</span><span class="op" id="7890493">,</span>&nbsp;<span class="ident" id="7890495">tt</span>&nbsp;<span class="op" id="7890498">:=</span>&nbsp;<span class="keyword" id="7890501">range</span>&nbsp;<span class="ident" id="7890507">ipNetStringTests</span>&nbsp;<span class="op" id="7890524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7890528">if</span>&nbsp;<span class="ident" id="7890531">out</span>&nbsp;<span class="op" id="7890535">:=</span>&nbsp;<span class="ident" id="7890538">tt</span><span class="op" id="7890540">.</span><span class="ident" id="7890541">in</span><span class="op" id="7890543">.</span><span class="ident" id="7890544">String</span><span class="op" id="7890550">(</span><span class="op" id="7890551">)</span><span class="op" id="7890552">;</span>&nbsp;<span class="ident" id="7890554">out</span>&nbsp;<span class="op" id="7890558">!=</span>&nbsp;<span class="ident" id="7890561">tt</span><span class="op" id="7890563">.</span><span class="ident" id="7890564">out</span>&nbsp;<span class="op" id="7890568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890573">t</span><span class="op" id="7890574">.</span><span class="ident" id="7890575">Errorf</span><span class="op" id="7890581">(</span><span class="string" id="7890582">&#34;IPNet.String(%v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7890614">,</span>&nbsp;<span class="ident" id="7890616">tt</span><span class="op" id="7890618">.</span><span class="ident" id="7890619">in</span><span class="op" id="7890621">,</span>&nbsp;<span class="ident" id="7890623">out</span><span class="op" id="7890626">,</span>&nbsp;<span class="ident" id="7890628">tt</span><span class="op" id="7890630">.</span><span class="ident" id="7890631">out</span><span class="op" id="7890634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890641">}</span><br>
<span class="lineno">240</span><span class="op" id="7890643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7890646">var</span>&nbsp;<span class="ident" id="7890650">cidrMaskTests</span>&nbsp;<span class="op" id="7890664">=</span>&nbsp;<span class="op" id="7890666">[</span><span class="op" id="7890667">]</span><span class="keyword" id="7890668">struct</span>&nbsp;<span class="op" id="7890675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890678">ones</span>&nbsp;<span class="builtintype" id="7890683">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890688">bits</span>&nbsp;<span class="builtintype" id="7890693">int</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7890698">out</span>&nbsp;&nbsp;<span class="ident" id="7890703">IPMask</span><br>
<span class="lineno"></span><span class="op" id="7890710">}</span><span class="op" id="7890711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890714">{</span><span class="num" id="7890715">0</span><span class="op" id="7890716">,</span>&nbsp;<span class="num" id="7890718">32</span><span class="op" id="7890720">,</span>&nbsp;<span class="ident" id="7890722">IPv4Mask</span><span class="op" id="7890730">(</span><span class="num" id="7890731">0</span><span class="op" id="7890732">,</span>&nbsp;<span class="num" id="7890734">0</span><span class="op" id="7890735">,</span>&nbsp;<span class="num" id="7890737">0</span><span class="op" id="7890738">,</span>&nbsp;<span class="num" id="7890740">0</span><span class="op" id="7890741">)</span><span class="op" id="7890742">}</span><span class="op" id="7890743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890746">{</span><span class="num" id="7890747">12</span><span class="op" id="7890749">,</span>&nbsp;<span class="num" id="7890751">32</span><span class="op" id="7890753">,</span>&nbsp;<span class="ident" id="7890755">IPv4Mask</span><span class="op" id="7890763">(</span><span class="num" id="7890764">255</span><span class="op" id="7890767">,</span>&nbsp;<span class="num" id="7890769">240</span><span class="op" id="7890772">,</span>&nbsp;<span class="num" id="7890774">0</span><span class="op" id="7890775">,</span>&nbsp;<span class="num" id="7890777">0</span><span class="op" id="7890778">)</span><span class="op" id="7890779">}</span><span class="op" id="7890780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890783">{</span><span class="num" id="7890784">24</span><span class="op" id="7890786">,</span>&nbsp;<span class="num" id="7890788">32</span><span class="op" id="7890790">,</span>&nbsp;<span class="ident" id="7890792">IPv4Mask</span><span class="op" id="7890800">(</span><span class="num" id="7890801">255</span><span class="op" id="7890804">,</span>&nbsp;<span class="num" id="7890806">255</span><span class="op" id="7890809">,</span>&nbsp;<span class="num" id="7890811">255</span><span class="op" id="7890814">,</span>&nbsp;<span class="num" id="7890816">0</span><span class="op" id="7890817">)</span><span class="op" id="7890818">}</span><span class="op" id="7890819">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890822">{</span><span class="num" id="7890823">32</span><span class="op" id="7890825">,</span>&nbsp;<span class="num" id="7890827">32</span><span class="op" id="7890829">,</span>&nbsp;<span class="ident" id="7890831">IPv4Mask</span><span class="op" id="7890839">(</span><span class="num" id="7890840">255</span><span class="op" id="7890843">,</span>&nbsp;<span class="num" id="7890845">255</span><span class="op" id="7890848">,</span>&nbsp;<span class="num" id="7890850">255</span><span class="op" id="7890853">,</span>&nbsp;<span class="num" id="7890855">255</span><span class="op" id="7890858">)</span><span class="op" id="7890859">}</span><span class="op" id="7890860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890863">{</span><span class="num" id="7890864">0</span><span class="op" id="7890865">,</span>&nbsp;<span class="num" id="7890867">128</span><span class="op" id="7890870">,</span>&nbsp;<span class="ident" id="7890872">IPMask</span><span class="op" id="7890878">{</span><span class="num" id="7890879">0</span><span class="op" id="7890880">,</span>&nbsp;<span class="num" id="7890882">0</span><span class="op" id="7890883">,</span>&nbsp;<span class="num" id="7890885">0</span><span class="op" id="7890886">,</span>&nbsp;<span class="num" id="7890888">0</span><span class="op" id="7890889">,</span>&nbsp;<span class="num" id="7890891">0</span><span class="op" id="7890892">,</span>&nbsp;<span class="num" id="7890894">0</span><span class="op" id="7890895">,</span>&nbsp;<span class="num" id="7890897">0</span><span class="op" id="7890898">,</span>&nbsp;<span class="num" id="7890900">0</span><span class="op" id="7890901">,</span>&nbsp;<span class="num" id="7890903">0</span><span class="op" id="7890904">,</span>&nbsp;<span class="num" id="7890906">0</span><span class="op" id="7890907">,</span>&nbsp;<span class="num" id="7890909">0</span><span class="op" id="7890910">,</span>&nbsp;<span class="num" id="7890912">0</span><span class="op" id="7890913">,</span>&nbsp;<span class="num" id="7890915">0</span><span class="op" id="7890916">,</span>&nbsp;<span class="num" id="7890918">0</span><span class="op" id="7890919">,</span>&nbsp;<span class="num" id="7890921">0</span><span class="op" id="7890922">,</span>&nbsp;<span class="num" id="7890924">0</span><span class="op" id="7890925">}</span><span class="op" id="7890926">}</span><span class="op" id="7890927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7890930">{</span><span class="num" id="7890931">4</span><span class="op" id="7890932">,</span>&nbsp;<span class="num" id="7890934">128</span><span class="op" id="7890937">,</span>&nbsp;<span class="ident" id="7890939">IPMask</span><span class="op" id="7890945">{</span><span class="num" id="7890946">0xf0</span><span class="op" id="7890950">,</span>&nbsp;<span class="num" id="7890952">0</span><span class="op" id="7890953">,</span>&nbsp;<span class="num" id="7890955">0</span><span class="op" id="7890956">,</span>&nbsp;<span class="num" id="7890958">0</span><span class="op" id="7890959">,</span>&nbsp;<span class="num" id="7890961">0</span><span class="op" id="7890962">,</span>&nbsp;<span class="num" id="7890964">0</span><span class="op" id="7890965">,</span>&nbsp;<span class="num" id="7890967">0</span><span class="op" id="7890968">,</span>&nbsp;<span class="num" id="7890970">0</span><span class="op" id="7890971">,</span>&nbsp;<span class="num" id="7890973">0</span><span class="op" id="7890974">,</span>&nbsp;<span class="num" id="7890976">0</span><span class="op" id="7890977">,</span>&nbsp;<span class="num" id="7890979">0</span><span class="op" id="7890980">,</span>&nbsp;<span class="num" id="7890982">0</span><span class="op" id="7890983">,</span>&nbsp;<span class="num" id="7890985">0</span><span class="op" id="7890986">,</span>&nbsp;<span class="num" id="7890988">0</span><span class="op" id="7890989">,</span>&nbsp;<span class="num" id="7890991">0</span><span class="op" id="7890992">,</span>&nbsp;<span class="num" id="7890994">0</span><span class="op" id="7890995">}</span><span class="op" id="7890996">}</span><span class="op" id="7890997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891000">{</span><span class="num" id="7891001">48</span><span class="op" id="7891003">,</span>&nbsp;<span class="num" id="7891005">128</span><span class="op" id="7891008">,</span>&nbsp;<span class="ident" id="7891010">IPMask</span><span class="op" id="7891016">{</span><span class="num" id="7891017">0xff</span><span class="op" id="7891021">,</span>&nbsp;<span class="num" id="7891023">0xff</span><span class="op" id="7891027">,</span>&nbsp;<span class="num" id="7891029">0xff</span><span class="op" id="7891033">,</span>&nbsp;<span class="num" id="7891035">0xff</span><span class="op" id="7891039">,</span>&nbsp;<span class="num" id="7891041">0xff</span><span class="op" id="7891045">,</span>&nbsp;<span class="num" id="7891047">0xff</span><span class="op" id="7891051">,</span>&nbsp;<span class="num" id="7891053">0</span><span class="op" id="7891054">,</span>&nbsp;<span class="num" id="7891056">0</span><span class="op" id="7891057">,</span>&nbsp;<span class="num" id="7891059">0</span><span class="op" id="7891060">,</span>&nbsp;<span class="num" id="7891062">0</span><span class="op" id="7891063">,</span>&nbsp;<span class="num" id="7891065">0</span><span class="op" id="7891066">,</span>&nbsp;<span class="num" id="7891068">0</span><span class="op" id="7891069">,</span>&nbsp;<span class="num" id="7891071">0</span><span class="op" id="7891072">,</span>&nbsp;<span class="num" id="7891074">0</span><span class="op" id="7891075">,</span>&nbsp;<span class="num" id="7891077">0</span><span class="op" id="7891078">,</span>&nbsp;<span class="num" id="7891080">0</span><span class="op" id="7891081">}</span><span class="op" id="7891082">}</span><span class="op" id="7891083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891086">{</span><span class="num" id="7891087">128</span><span class="op" id="7891090">,</span>&nbsp;<span class="num" id="7891092">128</span><span class="op" id="7891095">,</span>&nbsp;<span class="ident" id="7891097">IPMask</span><span class="op" id="7891103">{</span><span class="num" id="7891104">0xff</span><span class="op" id="7891108">,</span>&nbsp;<span class="num" id="7891110">0xff</span><span class="op" id="7891114">,</span>&nbsp;<span class="num" id="7891116">0xff</span><span class="op" id="7891120">,</span>&nbsp;<span class="num" id="7891122">0xff</span><span class="op" id="7891126">,</span>&nbsp;<span class="num" id="7891128">0xff</span><span class="op" id="7891132">,</span>&nbsp;<span class="num" id="7891134">0xff</span><span class="op" id="7891138">,</span>&nbsp;<span class="num" id="7891140">0xff</span><span class="op" id="7891144">,</span>&nbsp;<span class="num" id="7891146">0xff</span><span class="op" id="7891150">,</span>&nbsp;<span class="num" id="7891152">0xff</span><span class="op" id="7891156">,</span>&nbsp;<span class="num" id="7891158">0xff</span><span class="op" id="7891162">,</span>&nbsp;<span class="num" id="7891164">0xff</span><span class="op" id="7891168">,</span>&nbsp;<span class="num" id="7891170">0xff</span><span class="op" id="7891174">,</span>&nbsp;<span class="num" id="7891176">0xff</span><span class="op" id="7891180">,</span>&nbsp;<span class="num" id="7891182">0xff</span><span class="op" id="7891186">,</span>&nbsp;<span class="num" id="7891188">0xff</span><span class="op" id="7891192">,</span>&nbsp;<span class="num" id="7891194">0xff</span><span class="op" id="7891198">}</span><span class="op" id="7891199">}</span><span class="op" id="7891200">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891203">{</span><span class="num" id="7891204">33</span><span class="op" id="7891206">,</span>&nbsp;<span class="num" id="7891208">32</span><span class="op" id="7891210">,</span>&nbsp;<span class="ident" id="7891212">nil</span><span class="op" id="7891215">}</span><span class="op" id="7891216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891219">{</span><span class="num" id="7891220">32</span><span class="op" id="7891222">,</span>&nbsp;<span class="num" id="7891224">33</span><span class="op" id="7891226">,</span>&nbsp;<span class="ident" id="7891228">nil</span><span class="op" id="7891231">}</span><span class="op" id="7891232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891235">{</span><span class="op" id="7891236">-</span><span class="num" id="7891237">1</span><span class="op" id="7891238">,</span>&nbsp;<span class="num" id="7891240">128</span><span class="op" id="7891243">,</span>&nbsp;<span class="ident" id="7891245">nil</span><span class="op" id="7891248">}</span><span class="op" id="7891249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891252">{</span><span class="num" id="7891253">128</span><span class="op" id="7891256">,</span>&nbsp;<span class="op" id="7891258">-</span><span class="num" id="7891259">1</span><span class="op" id="7891260">,</span>&nbsp;<span class="ident" id="7891262">nil</span><span class="op" id="7891265">}</span><span class="op" id="7891266">,</span><br>
<span class="lineno"></span><span class="op" id="7891268">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="7891271">func</span>&nbsp;<span class="ident" id="7891276">TestCIDRMask</span><span class="op" id="7891288">(</span><span class="ident" id="7891289">t</span>&nbsp;<span class="op" id="7891291">*</span><span class="ident" id="7891292">testing</span><span class="op" id="7891299">.</span><span class="ident" id="7891300">T</span><span class="op" id="7891301">)</span>&nbsp;<span class="op" id="7891303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7891306">for</span>&nbsp;<span class="ident" id="7891310">_</span><span class="op" id="7891311">,</span>&nbsp;<span class="ident" id="7891313">tt</span>&nbsp;<span class="op" id="7891316">:=</span>&nbsp;<span class="keyword" id="7891319">range</span>&nbsp;<span class="ident" id="7891325">cidrMaskTests</span>&nbsp;<span class="op" id="7891339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7891343">if</span>&nbsp;<span class="ident" id="7891346">out</span>&nbsp;<span class="op" id="7891350">:=</span>&nbsp;<span class="ident" id="7891353">CIDRMask</span><span class="op" id="7891361">(</span><span class="ident" id="7891362">tt</span><span class="op" id="7891364">.</span><span class="ident" id="7891365">ones</span><span class="op" id="7891369">,</span>&nbsp;<span class="ident" id="7891371">tt</span><span class="op" id="7891373">.</span><span class="ident" id="7891374">bits</span><span class="op" id="7891378">)</span><span class="op" id="7891379">;</span>&nbsp;<span class="op" id="7891381">!</span><span class="ident" id="7891382">reflect</span><span class="op" id="7891389">.</span><span class="ident" id="7891390">DeepEqual</span><span class="op" id="7891399">(</span><span class="ident" id="7891400">out</span><span class="op" id="7891403">,</span>&nbsp;<span class="ident" id="7891405">tt</span><span class="op" id="7891407">.</span><span class="ident" id="7891408">out</span><span class="op" id="7891411">)</span>&nbsp;<span class="op" id="7891413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891418">t</span><span class="op" id="7891419">.</span><span class="ident" id="7891420">Errorf</span><span class="op" id="7891426">(</span><span class="string" id="7891427">&#34;CIDRMask(%v,&nbsp;%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7891459">,</span>&nbsp;<span class="ident" id="7891461">tt</span><span class="op" id="7891463">.</span><span class="ident" id="7891464">ones</span><span class="op" id="7891468">,</span>&nbsp;<span class="ident" id="7891470">tt</span><span class="op" id="7891472">.</span><span class="ident" id="7891473">bits</span><span class="op" id="7891477">,</span>&nbsp;<span class="ident" id="7891479">out</span><span class="op" id="7891482">,</span>&nbsp;<span class="ident" id="7891484">tt</span><span class="op" id="7891486">.</span><span class="ident" id="7891487">out</span><span class="op" id="7891490">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7891497">}</span><br>
<span class="lineno"></span><span class="op" id="7891499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7891502">var</span>&nbsp;<span class="op" id="7891506">(</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891509">v4addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891524">=</span>&nbsp;<span class="ident" id="7891526">IP</span><span class="op" id="7891528">{</span><span class="num" id="7891529">192</span><span class="op" id="7891532">,</span>&nbsp;<span class="num" id="7891534">168</span><span class="op" id="7891537">,</span>&nbsp;<span class="num" id="7891539">0</span><span class="op" id="7891540">,</span>&nbsp;<span class="num" id="7891542">1</span><span class="op" id="7891543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891546">v4mappedv6addr</span>&nbsp;<span class="op" id="7891561">=</span>&nbsp;<span class="ident" id="7891563">IP</span><span class="op" id="7891565">{</span><span class="num" id="7891566">0</span><span class="op" id="7891567">,</span>&nbsp;<span class="num" id="7891569">0</span><span class="op" id="7891570">,</span>&nbsp;<span class="num" id="7891572">0</span><span class="op" id="7891573">,</span>&nbsp;<span class="num" id="7891575">0</span><span class="op" id="7891576">,</span>&nbsp;<span class="num" id="7891578">0</span><span class="op" id="7891579">,</span>&nbsp;<span class="num" id="7891581">0</span><span class="op" id="7891582">,</span>&nbsp;<span class="num" id="7891584">0</span><span class="op" id="7891585">,</span>&nbsp;<span class="num" id="7891587">0</span><span class="op" id="7891588">,</span>&nbsp;<span class="num" id="7891590">0</span><span class="op" id="7891591">,</span>&nbsp;<span class="num" id="7891593">0</span><span class="op" id="7891594">,</span>&nbsp;<span class="num" id="7891596">0xff</span><span class="op" id="7891600">,</span>&nbsp;<span class="num" id="7891602">0xff</span><span class="op" id="7891606">,</span>&nbsp;<span class="num" id="7891608">192</span><span class="op" id="7891611">,</span>&nbsp;<span class="num" id="7891613">168</span><span class="op" id="7891616">,</span>&nbsp;<span class="num" id="7891618">0</span><span class="op" id="7891619">,</span>&nbsp;<span class="num" id="7891621">1</span><span class="op" id="7891622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891625">v6addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891640">=</span>&nbsp;<span class="ident" id="7891642">IP</span><span class="op" id="7891644">{</span><span class="num" id="7891645">0x20</span><span class="op" id="7891649">,</span>&nbsp;<span class="num" id="7891651">0x1</span><span class="op" id="7891654">,</span>&nbsp;<span class="num" id="7891656">0xd</span><span class="op" id="7891659">,</span>&nbsp;<span class="num" id="7891661">0xb8</span><span class="op" id="7891665">,</span>&nbsp;<span class="num" id="7891667">0</span><span class="op" id="7891668">,</span>&nbsp;<span class="num" id="7891670">0</span><span class="op" id="7891671">,</span>&nbsp;<span class="num" id="7891673">0</span><span class="op" id="7891674">,</span>&nbsp;<span class="num" id="7891676">0</span><span class="op" id="7891677">,</span>&nbsp;<span class="num" id="7891679">0</span><span class="op" id="7891680">,</span>&nbsp;<span class="num" id="7891682">0</span><span class="op" id="7891683">,</span>&nbsp;<span class="num" id="7891685">0x1</span><span class="op" id="7891688">,</span>&nbsp;<span class="num" id="7891690">0x23</span><span class="op" id="7891694">,</span>&nbsp;<span class="num" id="7891696">0</span><span class="op" id="7891697">,</span>&nbsp;<span class="num" id="7891699">0x12</span><span class="op" id="7891703">,</span>&nbsp;<span class="num" id="7891705">0</span><span class="op" id="7891706">,</span>&nbsp;<span class="num" id="7891708">0x1</span><span class="op" id="7891711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891714">v4mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891729">=</span>&nbsp;<span class="ident" id="7891731">IPMask</span><span class="op" id="7891737">{</span><span class="num" id="7891738">255</span><span class="op" id="7891741">,</span>&nbsp;<span class="num" id="7891743">255</span><span class="op" id="7891746">,</span>&nbsp;<span class="num" id="7891748">255</span><span class="op" id="7891751">,</span>&nbsp;<span class="num" id="7891753">0</span><span class="op" id="7891754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891757">v4mappedv6mask</span>&nbsp;<span class="op" id="7891772">=</span>&nbsp;<span class="ident" id="7891774">IPMask</span><span class="op" id="7891780">{</span><span class="num" id="7891781">0xff</span><span class="op" id="7891785">,</span>&nbsp;<span class="num" id="7891787">0xff</span><span class="op" id="7891791">,</span>&nbsp;<span class="num" id="7891793">0xff</span><span class="op" id="7891797">,</span>&nbsp;<span class="num" id="7891799">0xff</span><span class="op" id="7891803">,</span>&nbsp;<span class="num" id="7891805">0xff</span><span class="op" id="7891809">,</span>&nbsp;<span class="num" id="7891811">0xff</span><span class="op" id="7891815">,</span>&nbsp;<span class="num" id="7891817">0xff</span><span class="op" id="7891821">,</span>&nbsp;<span class="num" id="7891823">0xff</span><span class="op" id="7891827">,</span>&nbsp;<span class="num" id="7891829">0xff</span><span class="op" id="7891833">,</span>&nbsp;<span class="num" id="7891835">0xff</span><span class="op" id="7891839">,</span>&nbsp;<span class="num" id="7891841">0xff</span><span class="op" id="7891845">,</span>&nbsp;<span class="num" id="7891847">0xff</span><span class="op" id="7891851">,</span>&nbsp;<span class="num" id="7891853">255</span><span class="op" id="7891856">,</span>&nbsp;<span class="num" id="7891858">255</span><span class="op" id="7891861">,</span>&nbsp;<span class="num" id="7891863">255</span><span class="op" id="7891866">,</span>&nbsp;<span class="num" id="7891868">0</span><span class="op" id="7891869">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891872">v6mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891887">=</span>&nbsp;<span class="ident" id="7891889">IPMask</span><span class="op" id="7891895">{</span><span class="num" id="7891896">0xff</span><span class="op" id="7891900">,</span>&nbsp;<span class="num" id="7891902">0xff</span><span class="op" id="7891906">,</span>&nbsp;<span class="num" id="7891908">0xff</span><span class="op" id="7891912">,</span>&nbsp;<span class="num" id="7891914">0xff</span><span class="op" id="7891918">,</span>&nbsp;<span class="num" id="7891920">0xff</span><span class="op" id="7891924">,</span>&nbsp;<span class="num" id="7891926">0xff</span><span class="op" id="7891930">,</span>&nbsp;<span class="num" id="7891932">0xff</span><span class="op" id="7891936">,</span>&nbsp;<span class="num" id="7891938">0xff</span><span class="op" id="7891942">,</span>&nbsp;<span class="num" id="7891944">0</span><span class="op" id="7891945">,</span>&nbsp;<span class="num" id="7891947">0</span><span class="op" id="7891948">,</span>&nbsp;<span class="num" id="7891950">0</span><span class="op" id="7891951">,</span>&nbsp;<span class="num" id="7891953">0</span><span class="op" id="7891954">,</span>&nbsp;<span class="num" id="7891956">0</span><span class="op" id="7891957">,</span>&nbsp;<span class="num" id="7891959">0</span><span class="op" id="7891960">,</span>&nbsp;<span class="num" id="7891962">0</span><span class="op" id="7891963">,</span>&nbsp;<span class="num" id="7891965">0</span><span class="op" id="7891966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7891969">badaddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891984">=</span>&nbsp;<span class="ident" id="7891986">IP</span><span class="op" id="7891988">{</span><span class="num" id="7891989">192</span><span class="op" id="7891992">,</span>&nbsp;<span class="num" id="7891994">168</span><span class="op" id="7891997">,</span>&nbsp;<span class="num" id="7891999">0</span><span class="op" id="7892000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892003">badmask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892018">=</span>&nbsp;<span class="ident" id="7892020">IPMask</span><span class="op" id="7892026">{</span><span class="num" id="7892027">255</span><span class="op" id="7892030">,</span>&nbsp;<span class="num" id="7892032">255</span><span class="op" id="7892035">,</span>&nbsp;<span class="num" id="7892037">0</span><span class="op" id="7892038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892041">v4maskzero</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892056">=</span>&nbsp;<span class="ident" id="7892058">IPMask</span><span class="op" id="7892064">{</span><span class="num" id="7892065">0</span><span class="op" id="7892066">,</span>&nbsp;<span class="num" id="7892068">0</span><span class="op" id="7892069">,</span>&nbsp;<span class="num" id="7892071">0</span><span class="op" id="7892072">,</span>&nbsp;<span class="num" id="7892074">0</span><span class="op" id="7892075">}</span><br>
<span class="lineno"></span><span class="op" id="7892077">)</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7892080">var</span>&nbsp;<span class="ident" id="7892084">networkNumberAndMaskTests</span>&nbsp;<span class="op" id="7892110">=</span>&nbsp;<span class="op" id="7892112">[</span><span class="op" id="7892113">]</span><span class="keyword" id="7892114">struct</span>&nbsp;<span class="op" id="7892121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892124">in</span>&nbsp;&nbsp;<span class="ident" id="7892128">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7892135">out</span>&nbsp;<span class="ident" id="7892139">IPNet</span><br>
<span class="lineno"></span><span class="op" id="7892145">}</span><span class="op" id="7892146">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892149">{</span><span class="ident" id="7892150">IPNet</span><span class="op" id="7892155">{</span><span class="ident" id="7892156">IP</span><span class="op" id="7892158">:</span>&nbsp;<span class="ident" id="7892160">v4addr</span><span class="op" id="7892166">,</span>&nbsp;<span class="ident" id="7892168">Mask</span><span class="op" id="7892172">:</span>&nbsp;<span class="ident" id="7892174">v4mask</span><span class="op" id="7892180">}</span><span class="op" id="7892181">,</span>&nbsp;<span class="ident" id="7892183">IPNet</span><span class="op" id="7892188">{</span><span class="ident" id="7892189">IP</span><span class="op" id="7892191">:</span>&nbsp;<span class="ident" id="7892193">v4addr</span><span class="op" id="7892199">,</span>&nbsp;<span class="ident" id="7892201">Mask</span><span class="op" id="7892205">:</span>&nbsp;<span class="ident" id="7892207">v4mask</span><span class="op" id="7892213">}</span><span class="op" id="7892214">}</span><span class="op" id="7892215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892218">{</span><span class="ident" id="7892219">IPNet</span><span class="op" id="7892224">{</span><span class="ident" id="7892225">IP</span><span class="op" id="7892227">:</span>&nbsp;<span class="ident" id="7892229">v4addr</span><span class="op" id="7892235">,</span>&nbsp;<span class="ident" id="7892237">Mask</span><span class="op" id="7892241">:</span>&nbsp;<span class="ident" id="7892243">v4mappedv6mask</span><span class="op" id="7892257">}</span><span class="op" id="7892258">,</span>&nbsp;<span class="ident" id="7892260">IPNet</span><span class="op" id="7892265">{</span><span class="ident" id="7892266">IP</span><span class="op" id="7892268">:</span>&nbsp;<span class="ident" id="7892270">v4addr</span><span class="op" id="7892276">,</span>&nbsp;<span class="ident" id="7892278">Mask</span><span class="op" id="7892282">:</span>&nbsp;<span class="ident" id="7892284">v4mask</span><span class="op" id="7892290">}</span><span class="op" id="7892291">}</span><span class="op" id="7892292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892295">{</span><span class="ident" id="7892296">IPNet</span><span class="op" id="7892301">{</span><span class="ident" id="7892302">IP</span><span class="op" id="7892304">:</span>&nbsp;<span class="ident" id="7892306">v4mappedv6addr</span><span class="op" id="7892320">,</span>&nbsp;<span class="ident" id="7892322">Mask</span><span class="op" id="7892326">:</span>&nbsp;<span class="ident" id="7892328">v4mappedv6mask</span><span class="op" id="7892342">}</span><span class="op" id="7892343">,</span>&nbsp;<span class="ident" id="7892345">IPNet</span><span class="op" id="7892350">{</span><span class="ident" id="7892351">IP</span><span class="op" id="7892353">:</span>&nbsp;<span class="ident" id="7892355">v4addr</span><span class="op" id="7892361">,</span>&nbsp;<span class="ident" id="7892363">Mask</span><span class="op" id="7892367">:</span>&nbsp;<span class="ident" id="7892369">v4mask</span><span class="op" id="7892375">}</span><span class="op" id="7892376">}</span><span class="op" id="7892377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892380">{</span><span class="ident" id="7892381">IPNet</span><span class="op" id="7892386">{</span><span class="ident" id="7892387">IP</span><span class="op" id="7892389">:</span>&nbsp;<span class="ident" id="7892391">v4mappedv6addr</span><span class="op" id="7892405">,</span>&nbsp;<span class="ident" id="7892407">Mask</span><span class="op" id="7892411">:</span>&nbsp;<span class="ident" id="7892413">v6mask</span><span class="op" id="7892419">}</span><span class="op" id="7892420">,</span>&nbsp;<span class="ident" id="7892422">IPNet</span><span class="op" id="7892427">{</span><span class="ident" id="7892428">IP</span><span class="op" id="7892430">:</span>&nbsp;<span class="ident" id="7892432">v4addr</span><span class="op" id="7892438">,</span>&nbsp;<span class="ident" id="7892440">Mask</span><span class="op" id="7892444">:</span>&nbsp;<span class="ident" id="7892446">v4maskzero</span><span class="op" id="7892456">}</span><span class="op" id="7892457">}</span><span class="op" id="7892458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892461">{</span><span class="ident" id="7892462">IPNet</span><span class="op" id="7892467">{</span><span class="ident" id="7892468">IP</span><span class="op" id="7892470">:</span>&nbsp;<span class="ident" id="7892472">v4addr</span><span class="op" id="7892478">,</span>&nbsp;<span class="ident" id="7892480">Mask</span><span class="op" id="7892484">:</span>&nbsp;<span class="ident" id="7892486">v6mask</span><span class="op" id="7892492">}</span><span class="op" id="7892493">,</span>&nbsp;<span class="ident" id="7892495">IPNet</span><span class="op" id="7892500">{</span><span class="ident" id="7892501">IP</span><span class="op" id="7892503">:</span>&nbsp;<span class="ident" id="7892505">v4addr</span><span class="op" id="7892511">,</span>&nbsp;<span class="ident" id="7892513">Mask</span><span class="op" id="7892517">:</span>&nbsp;<span class="ident" id="7892519">v4maskzero</span><span class="op" id="7892529">}</span><span class="op" id="7892530">}</span><span class="op" id="7892531">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892534">{</span><span class="ident" id="7892535">IPNet</span><span class="op" id="7892540">{</span><span class="ident" id="7892541">IP</span><span class="op" id="7892543">:</span>&nbsp;<span class="ident" id="7892545">v6addr</span><span class="op" id="7892551">,</span>&nbsp;<span class="ident" id="7892553">Mask</span><span class="op" id="7892557">:</span>&nbsp;<span class="ident" id="7892559">v6mask</span><span class="op" id="7892565">}</span><span class="op" id="7892566">,</span>&nbsp;<span class="ident" id="7892568">IPNet</span><span class="op" id="7892573">{</span><span class="ident" id="7892574">IP</span><span class="op" id="7892576">:</span>&nbsp;<span class="ident" id="7892578">v6addr</span><span class="op" id="7892584">,</span>&nbsp;<span class="ident" id="7892586">Mask</span><span class="op" id="7892590">:</span>&nbsp;<span class="ident" id="7892592">v6mask</span><span class="op" id="7892598">}</span><span class="op" id="7892599">}</span><span class="op" id="7892600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892603">{</span><span class="ident" id="7892604">IPNet</span><span class="op" id="7892609">{</span><span class="ident" id="7892610">IP</span><span class="op" id="7892612">:</span>&nbsp;<span class="ident" id="7892614">v6addr</span><span class="op" id="7892620">,</span>&nbsp;<span class="ident" id="7892622">Mask</span><span class="op" id="7892626">:</span>&nbsp;<span class="ident" id="7892628">v4mappedv6mask</span><span class="op" id="7892642">}</span><span class="op" id="7892643">,</span>&nbsp;<span class="ident" id="7892645">IPNet</span><span class="op" id="7892650">{</span><span class="ident" id="7892651">IP</span><span class="op" id="7892653">:</span>&nbsp;<span class="ident" id="7892655">v6addr</span><span class="op" id="7892661">,</span>&nbsp;<span class="ident" id="7892663">Mask</span><span class="op" id="7892667">:</span>&nbsp;<span class="ident" id="7892669">v4mappedv6mask</span><span class="op" id="7892683">}</span><span class="op" id="7892684">}</span><span class="op" id="7892685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892688">{</span><span class="ident" id="7892689">in</span><span class="op" id="7892691">:</span>&nbsp;<span class="ident" id="7892693">IPNet</span><span class="op" id="7892698">{</span><span class="ident" id="7892699">IP</span><span class="op" id="7892701">:</span>&nbsp;<span class="ident" id="7892703">v6addr</span><span class="op" id="7892709">,</span>&nbsp;<span class="ident" id="7892711">Mask</span><span class="op" id="7892715">:</span>&nbsp;<span class="ident" id="7892717">v4mask</span><span class="op" id="7892723">}</span><span class="op" id="7892724">}</span><span class="op" id="7892725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892728">{</span><span class="ident" id="7892729">in</span><span class="op" id="7892731">:</span>&nbsp;<span class="ident" id="7892733">IPNet</span><span class="op" id="7892738">{</span><span class="ident" id="7892739">IP</span><span class="op" id="7892741">:</span>&nbsp;<span class="ident" id="7892743">v4addr</span><span class="op" id="7892749">,</span>&nbsp;<span class="ident" id="7892751">Mask</span><span class="op" id="7892755">:</span>&nbsp;<span class="ident" id="7892757">badmask</span><span class="op" id="7892764">}</span><span class="op" id="7892765">}</span><span class="op" id="7892766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892769">{</span><span class="ident" id="7892770">in</span><span class="op" id="7892772">:</span>&nbsp;<span class="ident" id="7892774">IPNet</span><span class="op" id="7892779">{</span><span class="ident" id="7892780">IP</span><span class="op" id="7892782">:</span>&nbsp;<span class="ident" id="7892784">v4mappedv6addr</span><span class="op" id="7892798">,</span>&nbsp;<span class="ident" id="7892800">Mask</span><span class="op" id="7892804">:</span>&nbsp;<span class="ident" id="7892806">badmask</span><span class="op" id="7892813">}</span><span class="op" id="7892814">}</span><span class="op" id="7892815">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892818">{</span><span class="ident" id="7892819">in</span><span class="op" id="7892821">:</span>&nbsp;<span class="ident" id="7892823">IPNet</span><span class="op" id="7892828">{</span><span class="ident" id="7892829">IP</span><span class="op" id="7892831">:</span>&nbsp;<span class="ident" id="7892833">v6addr</span><span class="op" id="7892839">,</span>&nbsp;<span class="ident" id="7892841">Mask</span><span class="op" id="7892845">:</span>&nbsp;<span class="ident" id="7892847">badmask</span><span class="op" id="7892854">}</span><span class="op" id="7892855">}</span><span class="op" id="7892856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892859">{</span><span class="ident" id="7892860">in</span><span class="op" id="7892862">:</span>&nbsp;<span class="ident" id="7892864">IPNet</span><span class="op" id="7892869">{</span><span class="ident" id="7892870">IP</span><span class="op" id="7892872">:</span>&nbsp;<span class="ident" id="7892874">badaddr</span><span class="op" id="7892881">,</span>&nbsp;<span class="ident" id="7892883">Mask</span><span class="op" id="7892887">:</span>&nbsp;<span class="ident" id="7892889">v4mask</span><span class="op" id="7892895">}</span><span class="op" id="7892896">}</span><span class="op" id="7892897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892900">{</span><span class="ident" id="7892901">in</span><span class="op" id="7892903">:</span>&nbsp;<span class="ident" id="7892905">IPNet</span><span class="op" id="7892910">{</span><span class="ident" id="7892911">IP</span><span class="op" id="7892913">:</span>&nbsp;<span class="ident" id="7892915">badaddr</span><span class="op" id="7892922">,</span>&nbsp;<span class="ident" id="7892924">Mask</span><span class="op" id="7892928">:</span>&nbsp;<span class="ident" id="7892930">v4mappedv6mask</span><span class="op" id="7892944">}</span><span class="op" id="7892945">}</span><span class="op" id="7892946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892949">{</span><span class="ident" id="7892950">in</span><span class="op" id="7892952">:</span>&nbsp;<span class="ident" id="7892954">IPNet</span><span class="op" id="7892959">{</span><span class="ident" id="7892960">IP</span><span class="op" id="7892962">:</span>&nbsp;<span class="ident" id="7892964">badaddr</span><span class="op" id="7892971">,</span>&nbsp;<span class="ident" id="7892973">Mask</span><span class="op" id="7892977">:</span>&nbsp;<span class="ident" id="7892979">v6mask</span><span class="op" id="7892985">}</span><span class="op" id="7892986">}</span><span class="op" id="7892987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7892990">{</span><span class="ident" id="7892991">in</span><span class="op" id="7892993">:</span>&nbsp;<span class="ident" id="7892995">IPNet</span><span class="op" id="7893000">{</span><span class="ident" id="7893001">IP</span><span class="op" id="7893003">:</span>&nbsp;<span class="ident" id="7893005">badaddr</span><span class="op" id="7893012">,</span>&nbsp;<span class="ident" id="7893014">Mask</span><span class="op" id="7893018">:</span>&nbsp;<span class="ident" id="7893020">badmask</span><span class="op" id="7893027">}</span><span class="op" id="7893028">}</span><span class="op" id="7893029">,</span><br>
<span class="lineno">300</span><span class="op" id="7893031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7893034">func</span>&nbsp;<span class="ident" id="7893039">TestNetworkNumberAndMask</span><span class="op" id="7893063">(</span><span class="ident" id="7893064">t</span>&nbsp;<span class="op" id="7893066">*</span><span class="ident" id="7893067">testing</span><span class="op" id="7893074">.</span><span class="ident" id="7893075">T</span><span class="op" id="7893076">)</span>&nbsp;<span class="op" id="7893078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7893081">for</span>&nbsp;<span class="ident" id="7893085">_</span><span class="op" id="7893086">,</span>&nbsp;<span class="ident" id="7893088">tt</span>&nbsp;<span class="op" id="7893091">:=</span>&nbsp;<span class="keyword" id="7893094">range</span>&nbsp;<span class="ident" id="7893100">networkNumberAndMaskTests</span>&nbsp;<span class="op" id="7893126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893130">ip</span><span class="op" id="7893132">,</span>&nbsp;<span class="ident" id="7893134">m</span>&nbsp;<span class="op" id="7893136">:=</span>&nbsp;<span class="ident" id="7893139">networkNumberAndMask</span><span class="op" id="7893159">(</span><span class="op" id="7893160">&amp;</span><span class="ident" id="7893161">tt</span><span class="op" id="7893163">.</span><span class="ident" id="7893164">in</span><span class="op" id="7893166">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893170">out</span>&nbsp;<span class="op" id="7893174">:=</span>&nbsp;<span class="op" id="7893177">&amp;</span><span class="ident" id="7893178">IPNet</span><span class="op" id="7893183">{</span><span class="ident" id="7893184">IP</span><span class="op" id="7893186">:</span>&nbsp;<span class="ident" id="7893188">ip</span><span class="op" id="7893190">,</span>&nbsp;<span class="ident" id="7893192">Mask</span><span class="op" id="7893196">:</span>&nbsp;<span class="ident" id="7893198">m</span><span class="op" id="7893199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7893203">if</span>&nbsp;<span class="op" id="7893206">!</span><span class="ident" id="7893207">reflect</span><span class="op" id="7893214">.</span><span class="ident" id="7893215">DeepEqual</span><span class="op" id="7893224">(</span><span class="op" id="7893225">&amp;</span><span class="ident" id="7893226">tt</span><span class="op" id="7893228">.</span><span class="ident" id="7893229">out</span><span class="op" id="7893232">,</span>&nbsp;<span class="ident" id="7893234">out</span><span class="op" id="7893237">)</span>&nbsp;<span class="op" id="7893239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893244">t</span><span class="op" id="7893245">.</span><span class="ident" id="7893246">Errorf</span><span class="op" id="7893252">(</span><span class="string" id="7893253">&#34;networkNumberAndMask(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7893293">,</span>&nbsp;<span class="ident" id="7893295">tt</span><span class="op" id="7893297">.</span><span class="ident" id="7893298">in</span><span class="op" id="7893300">,</span>&nbsp;<span class="ident" id="7893302">out</span><span class="op" id="7893305">,</span>&nbsp;<span class="op" id="7893307">&amp;</span><span class="ident" id="7893308">tt</span><span class="op" id="7893310">.</span><span class="ident" id="7893311">out</span><span class="op" id="7893314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893321">}</span><br>
<span class="lineno">310</span><span class="op" id="7893323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7893326">var</span>&nbsp;<span class="ident" id="7893330">splitJoinTests</span>&nbsp;<span class="op" id="7893345">=</span>&nbsp;<span class="op" id="7893347">[</span><span class="op" id="7893348">]</span><span class="keyword" id="7893349">struct</span>&nbsp;<span class="op" id="7893356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893359">host</span>&nbsp;<span class="builtintype" id="7893364">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893372">port</span>&nbsp;<span class="builtintype" id="7893377">string</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893385">join</span>&nbsp;<span class="builtintype" id="7893390">string</span><br>
<span class="lineno"></span><span class="op" id="7893397">}</span><span class="op" id="7893398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893401">{</span><span class="string" id="7893402">&#34;www.google.com&#34;</span><span class="op" id="7893418">,</span>&nbsp;<span class="string" id="7893420">&#34;80&#34;</span><span class="op" id="7893424">,</span>&nbsp;<span class="string" id="7893426">&#34;www.google.com:80&#34;</span><span class="op" id="7893445">}</span><span class="op" id="7893446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893449">{</span><span class="string" id="7893450">&#34;127.0.0.1&#34;</span><span class="op" id="7893461">,</span>&nbsp;<span class="string" id="7893463">&#34;1234&#34;</span><span class="op" id="7893469">,</span>&nbsp;<span class="string" id="7893471">&#34;127.0.0.1:1234&#34;</span><span class="op" id="7893487">}</span><span class="op" id="7893488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893491">{</span><span class="string" id="7893492">&#34;::1&#34;</span><span class="op" id="7893497">,</span>&nbsp;<span class="string" id="7893499">&#34;80&#34;</span><span class="op" id="7893503">,</span>&nbsp;<span class="string" id="7893505">&#34;[::1]:80&#34;</span><span class="op" id="7893515">}</span><span class="op" id="7893516">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893519">{</span><span class="string" id="7893520">&#34;fe80::1%lo0&#34;</span><span class="op" id="7893533">,</span>&nbsp;<span class="string" id="7893535">&#34;80&#34;</span><span class="op" id="7893539">,</span>&nbsp;<span class="string" id="7893541">&#34;[fe80::1%lo0]:80&#34;</span><span class="op" id="7893559">}</span><span class="op" id="7893560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893563">{</span><span class="string" id="7893564">&#34;localhost%lo0&#34;</span><span class="op" id="7893579">,</span>&nbsp;<span class="string" id="7893581">&#34;80&#34;</span><span class="op" id="7893585">,</span>&nbsp;<span class="string" id="7893587">&#34;[localhost%lo0]:80&#34;</span><span class="op" id="7893607">}</span><span class="op" id="7893608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893611">{</span><span class="string" id="7893612">&#34;&#34;</span><span class="op" id="7893614">,</span>&nbsp;<span class="string" id="7893616">&#34;0&#34;</span><span class="op" id="7893619">,</span>&nbsp;<span class="string" id="7893621">&#34;:0&#34;</span><span class="op" id="7893625">}</span><span class="op" id="7893626">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893630">{</span><span class="string" id="7893631">&#34;google.com&#34;</span><span class="op" id="7893643">,</span>&nbsp;<span class="string" id="7893645">&#34;https%foo&#34;</span><span class="op" id="7893656">,</span>&nbsp;<span class="string" id="7893658">&#34;google.com:https%foo&#34;</span><span class="op" id="7893680">}</span><span class="op" id="7893681">,</span>&nbsp;<span class="comment" id="7893683">//&nbsp;Go&nbsp;1.0&nbsp;behavior</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893703">{</span><span class="string" id="7893704">&#34;127.0.0.1&#34;</span><span class="op" id="7893715">,</span>&nbsp;<span class="string" id="7893717">&#34;&#34;</span><span class="op" id="7893719">,</span>&nbsp;<span class="string" id="7893721">&#34;127.0.0.1:&#34;</span><span class="op" id="7893733">}</span><span class="op" id="7893734">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7893756">//&nbsp;Go&nbsp;1.0&nbsp;behaviour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893777">{</span><span class="string" id="7893778">&#34;www.google.com&#34;</span><span class="op" id="7893794">,</span>&nbsp;<span class="string" id="7893796">&#34;&#34;</span><span class="op" id="7893798">,</span>&nbsp;<span class="string" id="7893800">&#34;www.google.com:&#34;</span><span class="op" id="7893817">}</span><span class="op" id="7893818">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7893830">//&nbsp;Go&nbsp;1.0&nbsp;behaviour</span><br>
<span class="lineno"></span><span class="op" id="7893850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7893853">var</span>&nbsp;<span class="ident" id="7893857">splitFailureTests</span>&nbsp;<span class="op" id="7893875">=</span>&nbsp;<span class="op" id="7893877">[</span><span class="op" id="7893878">]</span><span class="keyword" id="7893879">struct</span>&nbsp;<span class="op" id="7893886">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893889">hostPort</span>&nbsp;<span class="builtintype" id="7893898">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7893906">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7893915">string</span><br>
<span class="lineno"></span><span class="op" id="7893922">}</span><span class="op" id="7893923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893926">{</span><span class="string" id="7893927">&#34;www.google.com&#34;</span><span class="op" id="7893943">,</span>&nbsp;<span class="string" id="7893945">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7893970">}</span><span class="op" id="7893971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7893974">{</span><span class="string" id="7893975">&#34;127.0.0.1&#34;</span><span class="op" id="7893986">,</span>&nbsp;<span class="string" id="7893988">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894013">}</span><span class="op" id="7894014">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894017">{</span><span class="string" id="7894018">&#34;[::1]&#34;</span><span class="op" id="7894025">,</span>&nbsp;<span class="string" id="7894027">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894052">}</span><span class="op" id="7894053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894056">{</span><span class="string" id="7894057">&#34;[fe80::1%lo0]&#34;</span><span class="op" id="7894072">,</span>&nbsp;<span class="string" id="7894074">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894099">}</span><span class="op" id="7894100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894103">{</span><span class="string" id="7894104">&#34;[localhost%lo0]&#34;</span><span class="op" id="7894121">,</span>&nbsp;<span class="string" id="7894123">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894148">}</span><span class="op" id="7894149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894152">{</span><span class="string" id="7894153">&#34;localhost%lo0&#34;</span><span class="op" id="7894168">,</span>&nbsp;<span class="string" id="7894170">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894195">}</span><span class="op" id="7894196">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894200">{</span><span class="string" id="7894201">&#34;::1&#34;</span><span class="op" id="7894206">,</span>&nbsp;<span class="string" id="7894208">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894236">}</span><span class="op" id="7894237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894240">{</span><span class="string" id="7894241">&#34;fe80::1%lo0&#34;</span><span class="op" id="7894254">,</span>&nbsp;<span class="string" id="7894256">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894284">}</span><span class="op" id="7894285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894288">{</span><span class="string" id="7894289">&#34;fe80::1%lo0:80&#34;</span><span class="op" id="7894305">,</span>&nbsp;<span class="string" id="7894307">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894335">}</span><span class="op" id="7894336">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894340">{</span><span class="string" id="7894341">&#34;localhost%lo0:80&#34;</span><span class="op" id="7894359">,</span>&nbsp;<span class="string" id="7894361">&#34;missing&nbsp;brackets&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894390">}</span><span class="op" id="7894391">,</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7894395">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;didn&#39;t&nbsp;fail&nbsp;in&nbsp;Go&nbsp;1.0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894438">{</span><span class="string" id="7894439">&#34;[foo:bar]&#34;</span><span class="op" id="7894450">,</span>&nbsp;<span class="string" id="7894452">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894477">}</span><span class="op" id="7894478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894481">{</span><span class="string" id="7894482">&#34;[foo:bar]baz&#34;</span><span class="op" id="7894496">,</span>&nbsp;<span class="string" id="7894498">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894523">}</span><span class="op" id="7894524">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894527">{</span><span class="string" id="7894528">&#34;[foo]bar:baz&#34;</span><span class="op" id="7894542">,</span>&nbsp;<span class="string" id="7894544">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894569">}</span><span class="op" id="7894570">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894574">{</span><span class="string" id="7894575">&#34;[foo]:[bar]:baz&#34;</span><span class="op" id="7894592">,</span>&nbsp;<span class="string" id="7894594">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894622">}</span><span class="op" id="7894623">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894627">{</span><span class="string" id="7894628">&#34;[foo]:[bar]baz&#34;</span><span class="op" id="7894644">,</span>&nbsp;<span class="string" id="7894646">&#34;unexpected&nbsp;&#39;[&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894673">}</span><span class="op" id="7894674">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894677">{</span><span class="string" id="7894678">&#34;foo[bar]:baz&#34;</span><span class="op" id="7894692">,</span>&nbsp;<span class="string" id="7894694">&#34;unexpected&nbsp;&#39;[&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894721">}</span><span class="op" id="7894722">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7894726">{</span><span class="string" id="7894727">&#34;foo]bar:baz&#34;</span><span class="op" id="7894740">,</span>&nbsp;<span class="string" id="7894742">&#34;unexpected&nbsp;&#39;]&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="7894769">}</span><span class="op" id="7894770">,</span><br>
<span class="lineno"></span><span class="op" id="7894772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="7894775">func</span>&nbsp;<span class="ident" id="7894780">TestSplitHostPort</span><span class="op" id="7894797">(</span><span class="ident" id="7894798">t</span>&nbsp;<span class="op" id="7894800">*</span><span class="ident" id="7894801">testing</span><span class="op" id="7894808">.</span><span class="ident" id="7894809">T</span><span class="op" id="7894810">)</span>&nbsp;<span class="op" id="7894812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7894815">for</span>&nbsp;<span class="ident" id="7894819">_</span><span class="op" id="7894820">,</span>&nbsp;<span class="ident" id="7894822">tt</span>&nbsp;<span class="op" id="7894825">:=</span>&nbsp;<span class="keyword" id="7894828">range</span>&nbsp;<span class="ident" id="7894834">splitJoinTests</span>&nbsp;<span class="op" id="7894849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7894853">if</span>&nbsp;<span class="ident" id="7894856">host</span><span class="op" id="7894860">,</span>&nbsp;<span class="ident" id="7894862">port</span><span class="op" id="7894866">,</span>&nbsp;<span class="ident" id="7894868">err</span>&nbsp;<span class="op" id="7894872">:=</span>&nbsp;<span class="ident" id="7894875">SplitHostPort</span><span class="op" id="7894888">(</span><span class="ident" id="7894889">tt</span><span class="op" id="7894891">.</span><span class="ident" id="7894892">join</span><span class="op" id="7894896">)</span><span class="op" id="7894897">;</span>&nbsp;<span class="ident" id="7894899">host</span>&nbsp;<span class="op" id="7894904">!=</span>&nbsp;<span class="ident" id="7894907">tt</span><span class="op" id="7894909">.</span><span class="ident" id="7894910">host</span>&nbsp;<span class="op" id="7894915">||</span>&nbsp;<span class="ident" id="7894918">port</span>&nbsp;<span class="op" id="7894923">!=</span>&nbsp;<span class="ident" id="7894926">tt</span><span class="op" id="7894928">.</span><span class="ident" id="7894929">port</span>&nbsp;<span class="op" id="7894934">||</span>&nbsp;<span class="ident" id="7894937">err</span>&nbsp;<span class="op" id="7894941">!=</span>&nbsp;<span class="ident" id="7894944">nil</span>&nbsp;<span class="op" id="7894948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7894953">t</span><span class="op" id="7894954">.</span><span class="ident" id="7894955">Errorf</span><span class="op" id="7894961">(</span><span class="string" id="7894962">&#34;SplitHostPort(%q)&nbsp;=&nbsp;%q,&nbsp;%q,&nbsp;%v;&nbsp;want&nbsp;%q,&nbsp;%q,&nbsp;nil&#34;</span><span class="op" id="7895012">,</span>&nbsp;<span class="ident" id="7895014">tt</span><span class="op" id="7895016">.</span><span class="ident" id="7895017">join</span><span class="op" id="7895021">,</span>&nbsp;<span class="ident" id="7895023">host</span><span class="op" id="7895027">,</span>&nbsp;<span class="ident" id="7895029">port</span><span class="op" id="7895033">,</span>&nbsp;<span class="ident" id="7895035">err</span><span class="op" id="7895038">,</span>&nbsp;<span class="ident" id="7895040">tt</span><span class="op" id="7895042">.</span><span class="ident" id="7895043">host</span><span class="op" id="7895047">,</span>&nbsp;<span class="ident" id="7895049">tt</span><span class="op" id="7895051">.</span><span class="ident" id="7895052">port</span><span class="op" id="7895056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895060">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895066">for</span>&nbsp;<span class="ident" id="7895070">_</span><span class="op" id="7895071">,</span>&nbsp;<span class="ident" id="7895073">tt</span>&nbsp;<span class="op" id="7895076">:=</span>&nbsp;<span class="keyword" id="7895079">range</span>&nbsp;<span class="ident" id="7895085">splitFailureTests</span>&nbsp;<span class="op" id="7895103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895107">if</span>&nbsp;<span class="ident" id="7895110">_</span><span class="op" id="7895111">,</span>&nbsp;<span class="ident" id="7895113">_</span><span class="op" id="7895114">,</span>&nbsp;<span class="ident" id="7895116">err</span>&nbsp;<span class="op" id="7895120">:=</span>&nbsp;<span class="ident" id="7895123">SplitHostPort</span><span class="op" id="7895136">(</span><span class="ident" id="7895137">tt</span><span class="op" id="7895139">.</span><span class="ident" id="7895140">hostPort</span><span class="op" id="7895148">)</span><span class="op" id="7895149">;</span>&nbsp;<span class="ident" id="7895151">err</span>&nbsp;<span class="op" id="7895155">==</span>&nbsp;<span class="ident" id="7895158">nil</span>&nbsp;<span class="op" id="7895162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895167">t</span><span class="op" id="7895168">.</span><span class="ident" id="7895169">Errorf</span><span class="op" id="7895175">(</span><span class="string" id="7895176">&#34;SplitHostPort(%q)&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7895214">,</span>&nbsp;<span class="ident" id="7895216">tt</span><span class="op" id="7895218">.</span><span class="ident" id="7895219">hostPort</span><span class="op" id="7895227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895231">}</span>&nbsp;<span class="keyword" id="7895233">else</span>&nbsp;<span class="op" id="7895238">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895243">e</span>&nbsp;<span class="op" id="7895245">:=</span>&nbsp;<span class="ident" id="7895248">err</span><span class="op" id="7895251">.</span><span class="op" id="7895252">(</span><span class="op" id="7895253">*</span><span class="ident" id="7895254">AddrError</span><span class="op" id="7895263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895268">if</span>&nbsp;<span class="ident" id="7895271">e</span><span class="op" id="7895272">.</span><span class="ident" id="7895273">Err</span>&nbsp;<span class="op" id="7895277">!=</span>&nbsp;<span class="ident" id="7895280">tt</span><span class="op" id="7895282">.</span><span class="ident" id="7895283">err</span>&nbsp;<span class="op" id="7895287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895293">t</span><span class="op" id="7895294">.</span><span class="ident" id="7895295">Errorf</span><span class="op" id="7895301">(</span><span class="string" id="7895302">&#34;SplitHostPort(%q)&nbsp;=&nbsp;_,&nbsp;_,&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7895341">,</span>&nbsp;<span class="ident" id="7895343">tt</span><span class="op" id="7895345">.</span><span class="ident" id="7895346">hostPort</span><span class="op" id="7895354">,</span>&nbsp;<span class="ident" id="7895356">e</span><span class="op" id="7895357">.</span><span class="ident" id="7895358">Err</span><span class="op" id="7895361">,</span>&nbsp;<span class="ident" id="7895363">tt</span><span class="op" id="7895365">.</span><span class="ident" id="7895366">err</span><span class="op" id="7895369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895378">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895381">}</span><br>
<span class="lineno"></span><span class="op" id="7895383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7895386">func</span>&nbsp;<span class="ident" id="7895391">TestJoinHostPort</span><span class="op" id="7895407">(</span><span class="ident" id="7895408">t</span>&nbsp;<span class="op" id="7895410">*</span><span class="ident" id="7895411">testing</span><span class="op" id="7895418">.</span><span class="ident" id="7895419">T</span><span class="op" id="7895420">)</span>&nbsp;<span class="op" id="7895422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895425">for</span>&nbsp;<span class="ident" id="7895429">_</span><span class="op" id="7895430">,</span>&nbsp;<span class="ident" id="7895432">tt</span>&nbsp;<span class="op" id="7895435">:=</span>&nbsp;<span class="keyword" id="7895438">range</span>&nbsp;<span class="ident" id="7895444">splitJoinTests</span>&nbsp;<span class="op" id="7895459">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7895463">if</span>&nbsp;<span class="ident" id="7895466">join</span>&nbsp;<span class="op" id="7895471">:=</span>&nbsp;<span class="ident" id="7895474">JoinHostPort</span><span class="op" id="7895486">(</span><span class="ident" id="7895487">tt</span><span class="op" id="7895489">.</span><span class="ident" id="7895490">host</span><span class="op" id="7895494">,</span>&nbsp;<span class="ident" id="7895496">tt</span><span class="op" id="7895498">.</span><span class="ident" id="7895499">port</span><span class="op" id="7895503">)</span><span class="op" id="7895504">;</span>&nbsp;<span class="ident" id="7895506">join</span>&nbsp;<span class="op" id="7895511">!=</span>&nbsp;<span class="ident" id="7895514">tt</span><span class="op" id="7895516">.</span><span class="ident" id="7895517">join</span>&nbsp;<span class="op" id="7895522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895527">t</span><span class="op" id="7895528">.</span><span class="ident" id="7895529">Errorf</span><span class="op" id="7895535">(</span><span class="string" id="7895536">&#34;JoinHostPort(%q,&nbsp;%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7895572">,</span>&nbsp;<span class="ident" id="7895574">tt</span><span class="op" id="7895576">.</span><span class="ident" id="7895577">host</span><span class="op" id="7895581">,</span>&nbsp;<span class="ident" id="7895583">tt</span><span class="op" id="7895585">.</span><span class="ident" id="7895586">port</span><span class="op" id="7895590">,</span>&nbsp;<span class="ident" id="7895592">join</span><span class="op" id="7895596">,</span>&nbsp;<span class="ident" id="7895598">tt</span><span class="op" id="7895600">.</span><span class="ident" id="7895601">join</span><span class="op" id="7895605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895612">}</span><br>
<span class="lineno"></span><span class="op" id="7895614">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7895617">var</span>&nbsp;<span class="ident" id="7895621">ipAddrFamilyTests</span>&nbsp;<span class="op" id="7895639">=</span>&nbsp;<span class="op" id="7895641">[</span><span class="op" id="7895642">]</span><span class="keyword" id="7895643">struct</span>&nbsp;<span class="op" id="7895650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895653">in</span>&nbsp;&nbsp;<span class="ident" id="7895657">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895661">af4</span>&nbsp;<span class="builtintype" id="7895665">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7895671">af6</span>&nbsp;<span class="builtintype" id="7895675">bool</span><br>
<span class="lineno">390</span><span class="op" id="7895680">}</span><span class="op" id="7895681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895684">{</span><span class="ident" id="7895685">IPv4bcast</span><span class="op" id="7895694">,</span>&nbsp;<span class="builtintype" id="7895696">true</span><span class="op" id="7895700">,</span>&nbsp;<span class="builtintype" id="7895702">false</span><span class="op" id="7895707">}</span><span class="op" id="7895708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895711">{</span><span class="ident" id="7895712">IPv4allsys</span><span class="op" id="7895722">,</span>&nbsp;<span class="builtintype" id="7895724">true</span><span class="op" id="7895728">,</span>&nbsp;<span class="builtintype" id="7895730">false</span><span class="op" id="7895735">}</span><span class="op" id="7895736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895739">{</span><span class="ident" id="7895740">IPv4allrouter</span><span class="op" id="7895753">,</span>&nbsp;<span class="builtintype" id="7895755">true</span><span class="op" id="7895759">,</span>&nbsp;<span class="builtintype" id="7895761">false</span><span class="op" id="7895766">}</span><span class="op" id="7895767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895770">{</span><span class="ident" id="7895771">IPv4zero</span><span class="op" id="7895779">,</span>&nbsp;<span class="builtintype" id="7895781">true</span><span class="op" id="7895785">,</span>&nbsp;<span class="builtintype" id="7895787">false</span><span class="op" id="7895792">}</span><span class="op" id="7895793">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895796">{</span><span class="ident" id="7895797">IPv4</span><span class="op" id="7895801">(</span><span class="num" id="7895802">224</span><span class="op" id="7895805">,</span>&nbsp;<span class="num" id="7895807">0</span><span class="op" id="7895808">,</span>&nbsp;<span class="num" id="7895810">0</span><span class="op" id="7895811">,</span>&nbsp;<span class="num" id="7895813">1</span><span class="op" id="7895814">)</span><span class="op" id="7895815">,</span>&nbsp;<span class="builtintype" id="7895817">true</span><span class="op" id="7895821">,</span>&nbsp;<span class="builtintype" id="7895823">false</span><span class="op" id="7895828">}</span><span class="op" id="7895829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895832">{</span><span class="ident" id="7895833">IPv4</span><span class="op" id="7895837">(</span><span class="num" id="7895838">127</span><span class="op" id="7895841">,</span>&nbsp;<span class="num" id="7895843">0</span><span class="op" id="7895844">,</span>&nbsp;<span class="num" id="7895846">0</span><span class="op" id="7895847">,</span>&nbsp;<span class="num" id="7895849">1</span><span class="op" id="7895850">)</span><span class="op" id="7895851">,</span>&nbsp;<span class="builtintype" id="7895853">true</span><span class="op" id="7895857">,</span>&nbsp;<span class="builtintype" id="7895859">false</span><span class="op" id="7895864">}</span><span class="op" id="7895865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895868">{</span><span class="ident" id="7895869">IPv4</span><span class="op" id="7895873">(</span><span class="num" id="7895874">240</span><span class="op" id="7895877">,</span>&nbsp;<span class="num" id="7895879">0</span><span class="op" id="7895880">,</span>&nbsp;<span class="num" id="7895882">0</span><span class="op" id="7895883">,</span>&nbsp;<span class="num" id="7895885">1</span><span class="op" id="7895886">)</span><span class="op" id="7895887">,</span>&nbsp;<span class="builtintype" id="7895889">true</span><span class="op" id="7895893">,</span>&nbsp;<span class="builtintype" id="7895895">false</span><span class="op" id="7895900">}</span><span class="op" id="7895901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895904">{</span><span class="ident" id="7895905">IPv6unspecified</span><span class="op" id="7895920">,</span>&nbsp;<span class="builtintype" id="7895922">false</span><span class="op" id="7895927">,</span>&nbsp;<span class="builtintype" id="7895929">true</span><span class="op" id="7895933">}</span><span class="op" id="7895934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895937">{</span><span class="ident" id="7895938">IPv6loopback</span><span class="op" id="7895950">,</span>&nbsp;<span class="builtintype" id="7895952">false</span><span class="op" id="7895957">,</span>&nbsp;<span class="builtintype" id="7895959">true</span><span class="op" id="7895963">}</span><span class="op" id="7895964">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7895967">{</span><span class="ident" id="7895968">IPv6interfacelocalallnodes</span><span class="op" id="7895994">,</span>&nbsp;<span class="builtintype" id="7895996">false</span><span class="op" id="7896001">,</span>&nbsp;<span class="builtintype" id="7896003">true</span><span class="op" id="7896007">}</span><span class="op" id="7896008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896011">{</span><span class="ident" id="7896012">IPv6linklocalallnodes</span><span class="op" id="7896033">,</span>&nbsp;<span class="builtintype" id="7896035">false</span><span class="op" id="7896040">,</span>&nbsp;<span class="builtintype" id="7896042">true</span><span class="op" id="7896046">}</span><span class="op" id="7896047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896050">{</span><span class="ident" id="7896051">IPv6linklocalallrouters</span><span class="op" id="7896074">,</span>&nbsp;<span class="builtintype" id="7896076">false</span><span class="op" id="7896081">,</span>&nbsp;<span class="builtintype" id="7896083">true</span><span class="op" id="7896087">}</span><span class="op" id="7896088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896091">{</span><span class="ident" id="7896092">ParseIP</span><span class="op" id="7896099">(</span><span class="string" id="7896100">&#34;ff05::a:b:c:d&#34;</span><span class="op" id="7896115">)</span><span class="op" id="7896116">,</span>&nbsp;<span class="builtintype" id="7896118">false</span><span class="op" id="7896123">,</span>&nbsp;<span class="builtintype" id="7896125">true</span><span class="op" id="7896129">}</span><span class="op" id="7896130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896133">{</span><span class="ident" id="7896134">ParseIP</span><span class="op" id="7896141">(</span><span class="string" id="7896142">&#34;fe80::1:2:3:4&#34;</span><span class="op" id="7896157">)</span><span class="op" id="7896158">,</span>&nbsp;<span class="builtintype" id="7896160">false</span><span class="op" id="7896165">,</span>&nbsp;<span class="builtintype" id="7896167">true</span><span class="op" id="7896171">}</span><span class="op" id="7896172">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896175">{</span><span class="ident" id="7896176">ParseIP</span><span class="op" id="7896183">(</span><span class="string" id="7896184">&#34;2001:db8::123:12:1&#34;</span><span class="op" id="7896204">)</span><span class="op" id="7896205">,</span>&nbsp;<span class="builtintype" id="7896207">false</span><span class="op" id="7896212">,</span>&nbsp;<span class="builtintype" id="7896214">true</span><span class="op" id="7896218">}</span><span class="op" id="7896219">,</span><br>
<span class="lineno"></span><span class="op" id="7896221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7896224">func</span>&nbsp;<span class="ident" id="7896229">TestIPAddrFamily</span><span class="op" id="7896245">(</span><span class="ident" id="7896246">t</span>&nbsp;<span class="op" id="7896248">*</span><span class="ident" id="7896249">testing</span><span class="op" id="7896256">.</span><span class="ident" id="7896257">T</span><span class="op" id="7896258">)</span>&nbsp;<span class="op" id="7896260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896263">for</span>&nbsp;<span class="ident" id="7896267">_</span><span class="op" id="7896268">,</span>&nbsp;<span class="ident" id="7896270">tt</span>&nbsp;<span class="op" id="7896273">:=</span>&nbsp;<span class="keyword" id="7896276">range</span>&nbsp;<span class="ident" id="7896282">ipAddrFamilyTests</span>&nbsp;<span class="op" id="7896300">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896304">if</span>&nbsp;<span class="ident" id="7896307">af</span>&nbsp;<span class="op" id="7896310">:=</span>&nbsp;<span class="ident" id="7896313">tt</span><span class="op" id="7896315">.</span><span class="ident" id="7896316">in</span><span class="op" id="7896318">.</span><span class="ident" id="7896319">To4</span><span class="op" id="7896322">(</span><span class="op" id="7896323">)</span>&nbsp;<span class="op" id="7896325">!=</span>&nbsp;<span class="ident" id="7896328">nil</span><span class="op" id="7896331">;</span>&nbsp;<span class="ident" id="7896333">af</span>&nbsp;<span class="op" id="7896336">!=</span>&nbsp;<span class="ident" id="7896339">tt</span><span class="op" id="7896341">.</span><span class="ident" id="7896342">af4</span>&nbsp;<span class="op" id="7896346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896351">t</span><span class="op" id="7896352">.</span><span class="ident" id="7896353">Errorf</span><span class="op" id="7896359">(</span><span class="string" id="7896360">&#34;verifying&nbsp;IPv4&nbsp;address&nbsp;family&nbsp;for&nbsp;%q&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7896412">,</span>&nbsp;<span class="ident" id="7896414">tt</span><span class="op" id="7896416">.</span><span class="ident" id="7896417">in</span><span class="op" id="7896419">,</span>&nbsp;<span class="ident" id="7896421">af</span><span class="op" id="7896423">,</span>&nbsp;<span class="ident" id="7896425">tt</span><span class="op" id="7896427">.</span><span class="ident" id="7896428">af4</span><span class="op" id="7896431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7896439">if</span>&nbsp;<span class="ident" id="7896442">af</span>&nbsp;<span class="op" id="7896445">:=</span>&nbsp;<span class="builtinfunc" id="7896448">len</span><span class="op" id="7896451">(</span><span class="ident" id="7896452">tt</span><span class="op" id="7896454">.</span><span class="ident" id="7896455">in</span><span class="op" id="7896457">)</span>&nbsp;<span class="op" id="7896459">==</span>&nbsp;<span class="ident" id="7896462">IPv6len</span>&nbsp;<span class="op" id="7896470">&amp;&amp;</span>&nbsp;<span class="ident" id="7896473">tt</span><span class="op" id="7896475">.</span><span class="ident" id="7896476">in</span><span class="op" id="7896478">.</span><span class="ident" id="7896479">To4</span><span class="op" id="7896482">(</span><span class="op" id="7896483">)</span>&nbsp;<span class="op" id="7896485">==</span>&nbsp;<span class="ident" id="7896488">nil</span><span class="op" id="7896491">;</span>&nbsp;<span class="ident" id="7896493">af</span>&nbsp;<span class="op" id="7896496">!=</span>&nbsp;<span class="ident" id="7896499">tt</span><span class="op" id="7896501">.</span><span class="ident" id="7896502">af6</span>&nbsp;<span class="op" id="7896506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896511">t</span><span class="op" id="7896512">.</span><span class="ident" id="7896513">Errorf</span><span class="op" id="7896519">(</span><span class="string" id="7896520">&#34;verifying&nbsp;IPv6&nbsp;address&nbsp;family&nbsp;for&nbsp;%q&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7896572">,</span>&nbsp;<span class="ident" id="7896574">tt</span><span class="op" id="7896576">.</span><span class="ident" id="7896577">in</span><span class="op" id="7896579">,</span>&nbsp;<span class="ident" id="7896581">af</span><span class="op" id="7896583">,</span>&nbsp;<span class="ident" id="7896585">tt</span><span class="op" id="7896587">.</span><span class="ident" id="7896588">af6</span><span class="op" id="7896591">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896598">}</span><br>
<span class="lineno"></span><span class="op" id="7896600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7896603">var</span>&nbsp;<span class="ident" id="7896607">ipAddrScopeTests</span>&nbsp;<span class="op" id="7896624">=</span>&nbsp;<span class="op" id="7896626">[</span><span class="op" id="7896627">]</span><span class="keyword" id="7896628">struct</span>&nbsp;<span class="op" id="7896635">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896638">scope</span>&nbsp;<span class="keyword" id="7896644">func</span><span class="op" id="7896648">(</span><span class="ident" id="7896649">IP</span><span class="op" id="7896651">)</span>&nbsp;<span class="builtintype" id="7896653">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896659">in</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896665">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7896669">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7896675">bool</span><br>
<span class="lineno"></span><span class="op" id="7896680">}</span><span class="op" id="7896681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896684">{</span><span class="ident" id="7896685">IP</span><span class="op" id="7896687">.</span><span class="ident" id="7896688">IsUnspecified</span><span class="op" id="7896701">,</span>&nbsp;<span class="ident" id="7896703">IPv4zero</span><span class="op" id="7896711">,</span>&nbsp;<span class="builtintype" id="7896713">true</span><span class="op" id="7896717">}</span><span class="op" id="7896718">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896721">{</span><span class="ident" id="7896722">IP</span><span class="op" id="7896724">.</span><span class="ident" id="7896725">IsUnspecified</span><span class="op" id="7896738">,</span>&nbsp;<span class="ident" id="7896740">IPv4</span><span class="op" id="7896744">(</span><span class="num" id="7896745">127</span><span class="op" id="7896748">,</span>&nbsp;<span class="num" id="7896750">0</span><span class="op" id="7896751">,</span>&nbsp;<span class="num" id="7896753">0</span><span class="op" id="7896754">,</span>&nbsp;<span class="num" id="7896756">1</span><span class="op" id="7896757">)</span><span class="op" id="7896758">,</span>&nbsp;<span class="builtintype" id="7896760">false</span><span class="op" id="7896765">}</span><span class="op" id="7896766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896769">{</span><span class="ident" id="7896770">IP</span><span class="op" id="7896772">.</span><span class="ident" id="7896773">IsUnspecified</span><span class="op" id="7896786">,</span>&nbsp;<span class="ident" id="7896788">IPv6unspecified</span><span class="op" id="7896803">,</span>&nbsp;<span class="builtintype" id="7896805">true</span><span class="op" id="7896809">}</span><span class="op" id="7896810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896813">{</span><span class="ident" id="7896814">IP</span><span class="op" id="7896816">.</span><span class="ident" id="7896817">IsUnspecified</span><span class="op" id="7896830">,</span>&nbsp;<span class="ident" id="7896832">IPv6interfacelocalallnodes</span><span class="op" id="7896858">,</span>&nbsp;<span class="builtintype" id="7896860">false</span><span class="op" id="7896865">}</span><span class="op" id="7896866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896869">{</span><span class="ident" id="7896870">IP</span><span class="op" id="7896872">.</span><span class="ident" id="7896873">IsLoopback</span><span class="op" id="7896883">,</span>&nbsp;<span class="ident" id="7896885">IPv4</span><span class="op" id="7896889">(</span><span class="num" id="7896890">127</span><span class="op" id="7896893">,</span>&nbsp;<span class="num" id="7896895">0</span><span class="op" id="7896896">,</span>&nbsp;<span class="num" id="7896898">0</span><span class="op" id="7896899">,</span>&nbsp;<span class="num" id="7896901">1</span><span class="op" id="7896902">)</span><span class="op" id="7896903">,</span>&nbsp;<span class="builtintype" id="7896905">true</span><span class="op" id="7896909">}</span><span class="op" id="7896910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896913">{</span><span class="ident" id="7896914">IP</span><span class="op" id="7896916">.</span><span class="ident" id="7896917">IsLoopback</span><span class="op" id="7896927">,</span>&nbsp;<span class="ident" id="7896929">IPv4</span><span class="op" id="7896933">(</span><span class="num" id="7896934">127</span><span class="op" id="7896937">,</span>&nbsp;<span class="num" id="7896939">255</span><span class="op" id="7896942">,</span>&nbsp;<span class="num" id="7896944">255</span><span class="op" id="7896947">,</span>&nbsp;<span class="num" id="7896949">254</span><span class="op" id="7896952">)</span><span class="op" id="7896953">,</span>&nbsp;<span class="builtintype" id="7896955">true</span><span class="op" id="7896959">}</span><span class="op" id="7896960">,</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896963">{</span><span class="ident" id="7896964">IP</span><span class="op" id="7896966">.</span><span class="ident" id="7896967">IsLoopback</span><span class="op" id="7896977">,</span>&nbsp;<span class="ident" id="7896979">IPv4</span><span class="op" id="7896983">(</span><span class="num" id="7896984">128</span><span class="op" id="7896987">,</span>&nbsp;<span class="num" id="7896989">1</span><span class="op" id="7896990">,</span>&nbsp;<span class="num" id="7896992">2</span><span class="op" id="7896993">,</span>&nbsp;<span class="num" id="7896995">3</span><span class="op" id="7896996">)</span><span class="op" id="7896997">,</span>&nbsp;<span class="builtintype" id="7896999">false</span><span class="op" id="7897004">}</span><span class="op" id="7897005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897008">{</span><span class="ident" id="7897009">IP</span><span class="op" id="7897011">.</span><span class="ident" id="7897012">IsLoopback</span><span class="op" id="7897022">,</span>&nbsp;<span class="ident" id="7897024">IPv6loopback</span><span class="op" id="7897036">,</span>&nbsp;<span class="builtintype" id="7897038">true</span><span class="op" id="7897042">}</span><span class="op" id="7897043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897046">{</span><span class="ident" id="7897047">IP</span><span class="op" id="7897049">.</span><span class="ident" id="7897050">IsLoopback</span><span class="op" id="7897060">,</span>&nbsp;<span class="ident" id="7897062">IPv6linklocalallrouters</span><span class="op" id="7897085">,</span>&nbsp;<span class="builtintype" id="7897087">false</span><span class="op" id="7897092">}</span><span class="op" id="7897093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897096">{</span><span class="ident" id="7897097">IP</span><span class="op" id="7897099">.</span><span class="ident" id="7897100">IsMulticast</span><span class="op" id="7897111">,</span>&nbsp;<span class="ident" id="7897113">IPv4</span><span class="op" id="7897117">(</span><span class="num" id="7897118">224</span><span class="op" id="7897121">,</span>&nbsp;<span class="num" id="7897123">0</span><span class="op" id="7897124">,</span>&nbsp;<span class="num" id="7897126">0</span><span class="op" id="7897127">,</span>&nbsp;<span class="num" id="7897129">0</span><span class="op" id="7897130">)</span><span class="op" id="7897131">,</span>&nbsp;<span class="builtintype" id="7897133">true</span><span class="op" id="7897137">}</span><span class="op" id="7897138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897141">{</span><span class="ident" id="7897142">IP</span><span class="op" id="7897144">.</span><span class="ident" id="7897145">IsMulticast</span><span class="op" id="7897156">,</span>&nbsp;<span class="ident" id="7897158">IPv4</span><span class="op" id="7897162">(</span><span class="num" id="7897163">239</span><span class="op" id="7897166">,</span>&nbsp;<span class="num" id="7897168">0</span><span class="op" id="7897169">,</span>&nbsp;<span class="num" id="7897171">0</span><span class="op" id="7897172">,</span>&nbsp;<span class="num" id="7897174">0</span><span class="op" id="7897175">)</span><span class="op" id="7897176">,</span>&nbsp;<span class="builtintype" id="7897178">true</span><span class="op" id="7897182">}</span><span class="op" id="7897183">,</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897186">{</span><span class="ident" id="7897187">IP</span><span class="op" id="7897189">.</span><span class="ident" id="7897190">IsMulticast</span><span class="op" id="7897201">,</span>&nbsp;<span class="ident" id="7897203">IPv4</span><span class="op" id="7897207">(</span><span class="num" id="7897208">240</span><span class="op" id="7897211">,</span>&nbsp;<span class="num" id="7897213">0</span><span class="op" id="7897214">,</span>&nbsp;<span class="num" id="7897216">0</span><span class="op" id="7897217">,</span>&nbsp;<span class="num" id="7897219">0</span><span class="op" id="7897220">)</span><span class="op" id="7897221">,</span>&nbsp;<span class="builtintype" id="7897223">false</span><span class="op" id="7897228">}</span><span class="op" id="7897229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897232">{</span><span class="ident" id="7897233">IP</span><span class="op" id="7897235">.</span><span class="ident" id="7897236">IsMulticast</span><span class="op" id="7897247">,</span>&nbsp;<span class="ident" id="7897249">IPv6linklocalallnodes</span><span class="op" id="7897270">,</span>&nbsp;<span class="builtintype" id="7897272">true</span><span class="op" id="7897276">}</span><span class="op" id="7897277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897280">{</span><span class="ident" id="7897281">IP</span><span class="op" id="7897283">.</span><span class="ident" id="7897284">IsMulticast</span><span class="op" id="7897295">,</span>&nbsp;<span class="ident" id="7897297">IP</span><span class="op" id="7897299">{</span><span class="num" id="7897300">0xff</span><span class="op" id="7897304">,</span>&nbsp;<span class="num" id="7897306">0x05</span><span class="op" id="7897310">,</span>&nbsp;<span class="num" id="7897312">0</span><span class="op" id="7897313">,</span>&nbsp;<span class="num" id="7897315">0</span><span class="op" id="7897316">,</span>&nbsp;<span class="num" id="7897318">0</span><span class="op" id="7897319">,</span>&nbsp;<span class="num" id="7897321">0</span><span class="op" id="7897322">,</span>&nbsp;<span class="num" id="7897324">0</span><span class="op" id="7897325">,</span>&nbsp;<span class="num" id="7897327">0</span><span class="op" id="7897328">,</span>&nbsp;<span class="num" id="7897330">0</span><span class="op" id="7897331">,</span>&nbsp;<span class="num" id="7897333">0</span><span class="op" id="7897334">,</span>&nbsp;<span class="num" id="7897336">0</span><span class="op" id="7897337">,</span>&nbsp;<span class="num" id="7897339">0</span><span class="op" id="7897340">,</span>&nbsp;<span class="num" id="7897342">0</span><span class="op" id="7897343">,</span>&nbsp;<span class="num" id="7897345">0</span><span class="op" id="7897346">,</span>&nbsp;<span class="num" id="7897348">0</span><span class="op" id="7897349">,</span>&nbsp;<span class="num" id="7897351">0</span><span class="op" id="7897352">}</span><span class="op" id="7897353">,</span>&nbsp;<span class="builtintype" id="7897355">true</span><span class="op" id="7897359">}</span><span class="op" id="7897360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897363">{</span><span class="ident" id="7897364">IP</span><span class="op" id="7897366">.</span><span class="ident" id="7897367">IsMulticast</span><span class="op" id="7897378">,</span>&nbsp;<span class="ident" id="7897380">IP</span><span class="op" id="7897382">{</span><span class="num" id="7897383">0xfe</span><span class="op" id="7897387">,</span>&nbsp;<span class="num" id="7897389">0x80</span><span class="op" id="7897393">,</span>&nbsp;<span class="num" id="7897395">0</span><span class="op" id="7897396">,</span>&nbsp;<span class="num" id="7897398">0</span><span class="op" id="7897399">,</span>&nbsp;<span class="num" id="7897401">0</span><span class="op" id="7897402">,</span>&nbsp;<span class="num" id="7897404">0</span><span class="op" id="7897405">,</span>&nbsp;<span class="num" id="7897407">0</span><span class="op" id="7897408">,</span>&nbsp;<span class="num" id="7897410">0</span><span class="op" id="7897411">,</span>&nbsp;<span class="num" id="7897413">0</span><span class="op" id="7897414">,</span>&nbsp;<span class="num" id="7897416">0</span><span class="op" id="7897417">,</span>&nbsp;<span class="num" id="7897419">0</span><span class="op" id="7897420">,</span>&nbsp;<span class="num" id="7897422">0</span><span class="op" id="7897423">,</span>&nbsp;<span class="num" id="7897425">0</span><span class="op" id="7897426">,</span>&nbsp;<span class="num" id="7897428">0</span><span class="op" id="7897429">,</span>&nbsp;<span class="num" id="7897431">0</span><span class="op" id="7897432">,</span>&nbsp;<span class="num" id="7897434">0</span><span class="op" id="7897435">}</span><span class="op" id="7897436">,</span>&nbsp;<span class="builtintype" id="7897438">false</span><span class="op" id="7897443">}</span><span class="op" id="7897444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897447">{</span><span class="ident" id="7897448">IP</span><span class="op" id="7897450">.</span><span class="ident" id="7897451">IsLinkLocalMulticast</span><span class="op" id="7897471">,</span>&nbsp;<span class="ident" id="7897473">IPv4</span><span class="op" id="7897477">(</span><span class="num" id="7897478">224</span><span class="op" id="7897481">,</span>&nbsp;<span class="num" id="7897483">0</span><span class="op" id="7897484">,</span>&nbsp;<span class="num" id="7897486">0</span><span class="op" id="7897487">,</span>&nbsp;<span class="num" id="7897489">0</span><span class="op" id="7897490">)</span><span class="op" id="7897491">,</span>&nbsp;<span class="builtintype" id="7897493">true</span><span class="op" id="7897497">}</span><span class="op" id="7897498">,</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897501">{</span><span class="ident" id="7897502">IP</span><span class="op" id="7897504">.</span><span class="ident" id="7897505">IsLinkLocalMulticast</span><span class="op" id="7897525">,</span>&nbsp;<span class="ident" id="7897527">IPv4</span><span class="op" id="7897531">(</span><span class="num" id="7897532">239</span><span class="op" id="7897535">,</span>&nbsp;<span class="num" id="7897537">0</span><span class="op" id="7897538">,</span>&nbsp;<span class="num" id="7897540">0</span><span class="op" id="7897541">,</span>&nbsp;<span class="num" id="7897543">0</span><span class="op" id="7897544">)</span><span class="op" id="7897545">,</span>&nbsp;<span class="builtintype" id="7897547">false</span><span class="op" id="7897552">}</span><span class="op" id="7897553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897556">{</span><span class="ident" id="7897557">IP</span><span class="op" id="7897559">.</span><span class="ident" id="7897560">IsLinkLocalMulticast</span><span class="op" id="7897580">,</span>&nbsp;<span class="ident" id="7897582">IPv6linklocalallrouters</span><span class="op" id="7897605">,</span>&nbsp;<span class="builtintype" id="7897607">true</span><span class="op" id="7897611">}</span><span class="op" id="7897612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897615">{</span><span class="ident" id="7897616">IP</span><span class="op" id="7897618">.</span><span class="ident" id="7897619">IsLinkLocalMulticast</span><span class="op" id="7897639">,</span>&nbsp;<span class="ident" id="7897641">IP</span><span class="op" id="7897643">{</span><span class="num" id="7897644">0xff</span><span class="op" id="7897648">,</span>&nbsp;<span class="num" id="7897650">0x05</span><span class="op" id="7897654">,</span>&nbsp;<span class="num" id="7897656">0</span><span class="op" id="7897657">,</span>&nbsp;<span class="num" id="7897659">0</span><span class="op" id="7897660">,</span>&nbsp;<span class="num" id="7897662">0</span><span class="op" id="7897663">,</span>&nbsp;<span class="num" id="7897665">0</span><span class="op" id="7897666">,</span>&nbsp;<span class="num" id="7897668">0</span><span class="op" id="7897669">,</span>&nbsp;<span class="num" id="7897671">0</span><span class="op" id="7897672">,</span>&nbsp;<span class="num" id="7897674">0</span><span class="op" id="7897675">,</span>&nbsp;<span class="num" id="7897677">0</span><span class="op" id="7897678">,</span>&nbsp;<span class="num" id="7897680">0</span><span class="op" id="7897681">,</span>&nbsp;<span class="num" id="7897683">0</span><span class="op" id="7897684">,</span>&nbsp;<span class="num" id="7897686">0</span><span class="op" id="7897687">,</span>&nbsp;<span class="num" id="7897689">0</span><span class="op" id="7897690">,</span>&nbsp;<span class="num" id="7897692">0</span><span class="op" id="7897693">,</span>&nbsp;<span class="num" id="7897695">0</span><span class="op" id="7897696">}</span><span class="op" id="7897697">,</span>&nbsp;<span class="builtintype" id="7897699">false</span><span class="op" id="7897704">}</span><span class="op" id="7897705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897708">{</span><span class="ident" id="7897709">IP</span><span class="op" id="7897711">.</span><span class="ident" id="7897712">IsLinkLocalUnicast</span><span class="op" id="7897730">,</span>&nbsp;<span class="ident" id="7897732">IPv4</span><span class="op" id="7897736">(</span><span class="num" id="7897737">169</span><span class="op" id="7897740">,</span>&nbsp;<span class="num" id="7897742">254</span><span class="op" id="7897745">,</span>&nbsp;<span class="num" id="7897747">0</span><span class="op" id="7897748">,</span>&nbsp;<span class="num" id="7897750">0</span><span class="op" id="7897751">)</span><span class="op" id="7897752">,</span>&nbsp;<span class="builtintype" id="7897754">true</span><span class="op" id="7897758">}</span><span class="op" id="7897759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897762">{</span><span class="ident" id="7897763">IP</span><span class="op" id="7897765">.</span><span class="ident" id="7897766">IsLinkLocalUnicast</span><span class="op" id="7897784">,</span>&nbsp;<span class="ident" id="7897786">IPv4</span><span class="op" id="7897790">(</span><span class="num" id="7897791">169</span><span class="op" id="7897794">,</span>&nbsp;<span class="num" id="7897796">255</span><span class="op" id="7897799">,</span>&nbsp;<span class="num" id="7897801">0</span><span class="op" id="7897802">,</span>&nbsp;<span class="num" id="7897804">0</span><span class="op" id="7897805">)</span><span class="op" id="7897806">,</span>&nbsp;<span class="builtintype" id="7897808">false</span><span class="op" id="7897813">}</span><span class="op" id="7897814">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897817">{</span><span class="ident" id="7897818">IP</span><span class="op" id="7897820">.</span><span class="ident" id="7897821">IsLinkLocalUnicast</span><span class="op" id="7897839">,</span>&nbsp;<span class="ident" id="7897841">IP</span><span class="op" id="7897843">{</span><span class="num" id="7897844">0xfe</span><span class="op" id="7897848">,</span>&nbsp;<span class="num" id="7897850">0x80</span><span class="op" id="7897854">,</span>&nbsp;<span class="num" id="7897856">0</span><span class="op" id="7897857">,</span>&nbsp;<span class="num" id="7897859">0</span><span class="op" id="7897860">,</span>&nbsp;<span class="num" id="7897862">0</span><span class="op" id="7897863">,</span>&nbsp;<span class="num" id="7897865">0</span><span class="op" id="7897866">,</span>&nbsp;<span class="num" id="7897868">0</span><span class="op" id="7897869">,</span>&nbsp;<span class="num" id="7897871">0</span><span class="op" id="7897872">,</span>&nbsp;<span class="num" id="7897874">0</span><span class="op" id="7897875">,</span>&nbsp;<span class="num" id="7897877">0</span><span class="op" id="7897878">,</span>&nbsp;<span class="num" id="7897880">0</span><span class="op" id="7897881">,</span>&nbsp;<span class="num" id="7897883">0</span><span class="op" id="7897884">,</span>&nbsp;<span class="num" id="7897886">0</span><span class="op" id="7897887">,</span>&nbsp;<span class="num" id="7897889">0</span><span class="op" id="7897890">,</span>&nbsp;<span class="num" id="7897892">0</span><span class="op" id="7897893">,</span>&nbsp;<span class="num" id="7897895">0</span><span class="op" id="7897896">}</span><span class="op" id="7897897">,</span>&nbsp;<span class="builtintype" id="7897899">true</span><span class="op" id="7897903">}</span><span class="op" id="7897904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897907">{</span><span class="ident" id="7897908">IP</span><span class="op" id="7897910">.</span><span class="ident" id="7897911">IsLinkLocalUnicast</span><span class="op" id="7897929">,</span>&nbsp;<span class="ident" id="7897931">IP</span><span class="op" id="7897933">{</span><span class="num" id="7897934">0xfe</span><span class="op" id="7897938">,</span>&nbsp;<span class="num" id="7897940">0xc0</span><span class="op" id="7897944">,</span>&nbsp;<span class="num" id="7897946">0</span><span class="op" id="7897947">,</span>&nbsp;<span class="num" id="7897949">0</span><span class="op" id="7897950">,</span>&nbsp;<span class="num" id="7897952">0</span><span class="op" id="7897953">,</span>&nbsp;<span class="num" id="7897955">0</span><span class="op" id="7897956">,</span>&nbsp;<span class="num" id="7897958">0</span><span class="op" id="7897959">,</span>&nbsp;<span class="num" id="7897961">0</span><span class="op" id="7897962">,</span>&nbsp;<span class="num" id="7897964">0</span><span class="op" id="7897965">,</span>&nbsp;<span class="num" id="7897967">0</span><span class="op" id="7897968">,</span>&nbsp;<span class="num" id="7897970">0</span><span class="op" id="7897971">,</span>&nbsp;<span class="num" id="7897973">0</span><span class="op" id="7897974">,</span>&nbsp;<span class="num" id="7897976">0</span><span class="op" id="7897977">,</span>&nbsp;<span class="num" id="7897979">0</span><span class="op" id="7897980">,</span>&nbsp;<span class="num" id="7897982">0</span><span class="op" id="7897983">,</span>&nbsp;<span class="num" id="7897985">0</span><span class="op" id="7897986">}</span><span class="op" id="7897987">,</span>&nbsp;<span class="builtintype" id="7897989">false</span><span class="op" id="7897994">}</span><span class="op" id="7897995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7897998">{</span><span class="ident" id="7897999">IP</span><span class="op" id="7898001">.</span><span class="ident" id="7898002">IsGlobalUnicast</span><span class="op" id="7898017">,</span>&nbsp;<span class="ident" id="7898019">IPv4</span><span class="op" id="7898023">(</span><span class="num" id="7898024">240</span><span class="op" id="7898027">,</span>&nbsp;<span class="num" id="7898029">0</span><span class="op" id="7898030">,</span>&nbsp;<span class="num" id="7898032">0</span><span class="op" id="7898033">,</span>&nbsp;<span class="num" id="7898035">0</span><span class="op" id="7898036">)</span><span class="op" id="7898037">,</span>&nbsp;<span class="builtintype" id="7898039">true</span><span class="op" id="7898043">}</span><span class="op" id="7898044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898047">{</span><span class="ident" id="7898048">IP</span><span class="op" id="7898050">.</span><span class="ident" id="7898051">IsGlobalUnicast</span><span class="op" id="7898066">,</span>&nbsp;<span class="ident" id="7898068">IPv4</span><span class="op" id="7898072">(</span><span class="num" id="7898073">232</span><span class="op" id="7898076">,</span>&nbsp;<span class="num" id="7898078">0</span><span class="op" id="7898079">,</span>&nbsp;<span class="num" id="7898081">0</span><span class="op" id="7898082">,</span>&nbsp;<span class="num" id="7898084">0</span><span class="op" id="7898085">)</span><span class="op" id="7898086">,</span>&nbsp;<span class="builtintype" id="7898088">false</span><span class="op" id="7898093">}</span><span class="op" id="7898094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898097">{</span><span class="ident" id="7898098">IP</span><span class="op" id="7898100">.</span><span class="ident" id="7898101">IsGlobalUnicast</span><span class="op" id="7898116">,</span>&nbsp;<span class="ident" id="7898118">IPv4</span><span class="op" id="7898122">(</span><span class="num" id="7898123">169</span><span class="op" id="7898126">,</span>&nbsp;<span class="num" id="7898128">254</span><span class="op" id="7898131">,</span>&nbsp;<span class="num" id="7898133">0</span><span class="op" id="7898134">,</span>&nbsp;<span class="num" id="7898136">0</span><span class="op" id="7898137">)</span><span class="op" id="7898138">,</span>&nbsp;<span class="builtintype" id="7898140">false</span><span class="op" id="7898145">}</span><span class="op" id="7898146">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898149">{</span><span class="ident" id="7898150">IP</span><span class="op" id="7898152">.</span><span class="ident" id="7898153">IsGlobalUnicast</span><span class="op" id="7898168">,</span>&nbsp;<span class="ident" id="7898170">IP</span><span class="op" id="7898172">{</span><span class="num" id="7898173">0x20</span><span class="op" id="7898177">,</span>&nbsp;<span class="num" id="7898179">0x1</span><span class="op" id="7898182">,</span>&nbsp;<span class="num" id="7898184">0xd</span><span class="op" id="7898187">,</span>&nbsp;<span class="num" id="7898189">0xb8</span><span class="op" id="7898193">,</span>&nbsp;<span class="num" id="7898195">0</span><span class="op" id="7898196">,</span>&nbsp;<span class="num" id="7898198">0</span><span class="op" id="7898199">,</span>&nbsp;<span class="num" id="7898201">0</span><span class="op" id="7898202">,</span>&nbsp;<span class="num" id="7898204">0</span><span class="op" id="7898205">,</span>&nbsp;<span class="num" id="7898207">0</span><span class="op" id="7898208">,</span>&nbsp;<span class="num" id="7898210">0</span><span class="op" id="7898211">,</span>&nbsp;<span class="num" id="7898213">0x1</span><span class="op" id="7898216">,</span>&nbsp;<span class="num" id="7898218">0x23</span><span class="op" id="7898222">,</span>&nbsp;<span class="num" id="7898224">0</span><span class="op" id="7898225">,</span>&nbsp;<span class="num" id="7898227">0x12</span><span class="op" id="7898231">,</span>&nbsp;<span class="num" id="7898233">0</span><span class="op" id="7898234">,</span>&nbsp;<span class="num" id="7898236">0x1</span><span class="op" id="7898239">}</span><span class="op" id="7898240">,</span>&nbsp;<span class="builtintype" id="7898242">true</span><span class="op" id="7898246">}</span><span class="op" id="7898247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898250">{</span><span class="ident" id="7898251">IP</span><span class="op" id="7898253">.</span><span class="ident" id="7898254">IsGlobalUnicast</span><span class="op" id="7898269">,</span>&nbsp;<span class="ident" id="7898271">IP</span><span class="op" id="7898273">{</span><span class="num" id="7898274">0xfe</span><span class="op" id="7898278">,</span>&nbsp;<span class="num" id="7898280">0x80</span><span class="op" id="7898284">,</span>&nbsp;<span class="num" id="7898286">0</span><span class="op" id="7898287">,</span>&nbsp;<span class="num" id="7898289">0</span><span class="op" id="7898290">,</span>&nbsp;<span class="num" id="7898292">0</span><span class="op" id="7898293">,</span>&nbsp;<span class="num" id="7898295">0</span><span class="op" id="7898296">,</span>&nbsp;<span class="num" id="7898298">0</span><span class="op" id="7898299">,</span>&nbsp;<span class="num" id="7898301">0</span><span class="op" id="7898302">,</span>&nbsp;<span class="num" id="7898304">0</span><span class="op" id="7898305">,</span>&nbsp;<span class="num" id="7898307">0</span><span class="op" id="7898308">,</span>&nbsp;<span class="num" id="7898310">0</span><span class="op" id="7898311">,</span>&nbsp;<span class="num" id="7898313">0</span><span class="op" id="7898314">,</span>&nbsp;<span class="num" id="7898316">0</span><span class="op" id="7898317">,</span>&nbsp;<span class="num" id="7898319">0</span><span class="op" id="7898320">,</span>&nbsp;<span class="num" id="7898322">0</span><span class="op" id="7898323">,</span>&nbsp;<span class="num" id="7898325">0</span><span class="op" id="7898326">}</span><span class="op" id="7898327">,</span>&nbsp;<span class="builtintype" id="7898329">false</span><span class="op" id="7898334">}</span><span class="op" id="7898335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898338">{</span><span class="ident" id="7898339">IP</span><span class="op" id="7898341">.</span><span class="ident" id="7898342">IsGlobalUnicast</span><span class="op" id="7898357">,</span>&nbsp;<span class="ident" id="7898359">IP</span><span class="op" id="7898361">{</span><span class="num" id="7898362">0xff</span><span class="op" id="7898366">,</span>&nbsp;<span class="num" id="7898368">0x05</span><span class="op" id="7898372">,</span>&nbsp;<span class="num" id="7898374">0</span><span class="op" id="7898375">,</span>&nbsp;<span class="num" id="7898377">0</span><span class="op" id="7898378">,</span>&nbsp;<span class="num" id="7898380">0</span><span class="op" id="7898381">,</span>&nbsp;<span class="num" id="7898383">0</span><span class="op" id="7898384">,</span>&nbsp;<span class="num" id="7898386">0</span><span class="op" id="7898387">,</span>&nbsp;<span class="num" id="7898389">0</span><span class="op" id="7898390">,</span>&nbsp;<span class="num" id="7898392">0</span><span class="op" id="7898393">,</span>&nbsp;<span class="num" id="7898395">0</span><span class="op" id="7898396">,</span>&nbsp;<span class="num" id="7898398">0</span><span class="op" id="7898399">,</span>&nbsp;<span class="num" id="7898401">0</span><span class="op" id="7898402">,</span>&nbsp;<span class="num" id="7898404">0</span><span class="op" id="7898405">,</span>&nbsp;<span class="num" id="7898407">0</span><span class="op" id="7898408">,</span>&nbsp;<span class="num" id="7898410">0</span><span class="op" id="7898411">,</span>&nbsp;<span class="num" id="7898413">0</span><span class="op" id="7898414">}</span><span class="op" id="7898415">,</span>&nbsp;<span class="builtintype" id="7898417">false</span><span class="op" id="7898422">}</span><span class="op" id="7898423">,</span><br>
<span class="lineno"></span><span class="op" id="7898425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span><span class="keyword" id="7898428">func</span>&nbsp;<span class="ident" id="7898433">name</span><span class="op" id="7898437">(</span><span class="ident" id="7898438">f</span>&nbsp;<span class="keyword" id="7898440">interface</span><span class="op" id="7898449">{</span><span class="op" id="7898450">}</span><span class="op" id="7898451">)</span>&nbsp;<span class="builtintype" id="7898453">string</span>&nbsp;<span class="op" id="7898460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7898463">return</span>&nbsp;<span class="ident" id="7898470">runtime</span><span class="op" id="7898477">.</span><span class="ident" id="7898478">FuncForPC</span><span class="op" id="7898487">(</span><span class="ident" id="7898488">reflect</span><span class="op" id="7898495">.</span><span class="ident" id="7898496">ValueOf</span><span class="op" id="7898503">(</span><span class="ident" id="7898504">f</span><span class="op" id="7898505">)</span><span class="op" id="7898506">.</span><span class="ident" id="7898507">Pointer</span><span class="op" id="7898514">(</span><span class="op" id="7898515">)</span><span class="op" id="7898516">)</span><span class="op" id="7898517">.</span><span class="ident" id="7898518">Name</span><span class="op" id="7898522">(</span><span class="op" id="7898523">)</span><br>
<span class="lineno"></span><span class="op" id="7898525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7898528">func</span>&nbsp;<span class="ident" id="7898533">TestIPAddrScope</span><span class="op" id="7898548">(</span><span class="ident" id="7898549">t</span>&nbsp;<span class="op" id="7898551">*</span><span class="ident" id="7898552">testing</span><span class="op" id="7898559">.</span><span class="ident" id="7898560">T</span><span class="op" id="7898561">)</span>&nbsp;<span class="op" id="7898563">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7898566">for</span>&nbsp;<span class="ident" id="7898570">_</span><span class="op" id="7898571">,</span>&nbsp;<span class="ident" id="7898573">tt</span>&nbsp;<span class="op" id="7898576">:=</span>&nbsp;<span class="keyword" id="7898579">range</span>&nbsp;<span class="ident" id="7898585">ipAddrScopeTests</span>&nbsp;<span class="op" id="7898602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7898606">if</span>&nbsp;<span class="ident" id="7898609">ok</span>&nbsp;<span class="op" id="7898612">:=</span>&nbsp;<span class="ident" id="7898615">tt</span><span class="op" id="7898617">.</span><span class="ident" id="7898618">scope</span><span class="op" id="7898623">(</span><span class="ident" id="7898624">tt</span><span class="op" id="7898626">.</span><span class="ident" id="7898627">in</span><span class="op" id="7898629">)</span><span class="op" id="7898630">;</span>&nbsp;<span class="ident" id="7898632">ok</span>&nbsp;<span class="op" id="7898635">!=</span>&nbsp;<span class="ident" id="7898638">tt</span><span class="op" id="7898640">.</span><span class="ident" id="7898641">ok</span>&nbsp;<span class="op" id="7898644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7898649">t</span><span class="op" id="7898650">.</span><span class="ident" id="7898651">Errorf</span><span class="op" id="7898657">(</span><span class="string" id="7898658">&#34;%s(%q)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7898680">,</span>&nbsp;<span class="ident" id="7898682">name</span><span class="op" id="7898686">(</span><span class="ident" id="7898687">tt</span><span class="op" id="7898689">.</span><span class="ident" id="7898690">scope</span><span class="op" id="7898695">)</span><span class="op" id="7898696">,</span>&nbsp;<span class="ident" id="7898698">tt</span><span class="op" id="7898700">.</span><span class="ident" id="7898701">in</span><span class="op" id="7898703">,</span>&nbsp;<span class="ident" id="7898705">ok</span><span class="op" id="7898707">,</span>&nbsp;<span class="ident" id="7898709">tt</span><span class="op" id="7898711">.</span><span class="ident" id="7898712">ok</span><span class="op" id="7898714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7898721">}</span><br>
<span class="lineno">465</span><span class="op" id="7898723">}</span>
</div>
</body>
</html>
