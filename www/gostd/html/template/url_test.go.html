<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html" class="current">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8450406">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8450461">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8450515">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8450566">package</span>&nbsp;<span class="ident" id="8450574">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8450584">import</span>&nbsp;<span class="op" id="8450591">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8450594">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8450604">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8450607">func</span>&nbsp;<span class="ident" id="8450612">TestURLNormalizer</span><span class="op" id="8450629">(</span><span class="ident" id="8450630">t</span>&nbsp;<span class="op" id="8450632">*</span><span class="ident" id="8450633">testing</span><span class="op" id="8450640">.</span><span class="ident" id="8450641">T</span><span class="op" id="8450642">)</span>&nbsp;<span class="op" id="8450644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8450647">tests</span>&nbsp;<span class="op" id="8450653">:=</span>&nbsp;<span class="op" id="8450656">[</span><span class="op" id="8450657">]</span><span class="keyword" id="8450658">struct</span>&nbsp;<span class="op" id="8450665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8450669">url</span><span class="op" id="8450672">,</span>&nbsp;<span class="ident" id="8450674">want</span>&nbsp;<span class="builtintype" id="8450679">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450687">}</span><span class="op" id="8450688">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450692">{</span><span class="string" id="8450693">&#34;&#34;</span><span class="op" id="8450695">,</span>&nbsp;<span class="string" id="8450697">&#34;&#34;</span><span class="op" id="8450699">}</span><span class="op" id="8450700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8450709">&#34;http://example.com:80/foo/bar?q=foo%20&amp;bar=x+y#frag&#34;</span><span class="op" id="8450762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8450767">&#34;http://example.com:80/foo/bar?q=foo%20&amp;bar=x+y#frag&#34;</span><span class="op" id="8450820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450824">}</span><span class="op" id="8450825">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450829">{</span><span class="string" id="8450830">&#34;&nbsp;&#34;</span><span class="op" id="8450833">,</span>&nbsp;<span class="string" id="8450835">&#34;%20&#34;</span><span class="op" id="8450840">}</span><span class="op" id="8450841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450845">{</span><span class="string" id="8450846">&#34;%7c&#34;</span><span class="op" id="8450851">,</span>&nbsp;<span class="string" id="8450853">&#34;%7c&#34;</span><span class="op" id="8450858">}</span><span class="op" id="8450859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450863">{</span><span class="string" id="8450864">&#34;%7C&#34;</span><span class="op" id="8450869">,</span>&nbsp;<span class="string" id="8450871">&#34;%7C&#34;</span><span class="op" id="8450876">}</span><span class="op" id="8450877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450881">{</span><span class="string" id="8450882">&#34;%2&#34;</span><span class="op" id="8450886">,</span>&nbsp;<span class="string" id="8450888">&#34;%252&#34;</span><span class="op" id="8450894">}</span><span class="op" id="8450895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450899">{</span><span class="string" id="8450900">&#34;%&#34;</span><span class="op" id="8450903">,</span>&nbsp;<span class="string" id="8450905">&#34;%25&#34;</span><span class="op" id="8450910">}</span><span class="op" id="8450911">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450915">{</span><span class="string" id="8450916">&#34;%z&#34;</span><span class="op" id="8450920">,</span>&nbsp;<span class="string" id="8450922">&#34;%25z&#34;</span><span class="op" id="8450928">}</span><span class="op" id="8450929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450933">{</span><span class="string" id="8450934">&#34;/foo|bar/%5c\u1234&#34;</span><span class="op" id="8450954">,</span>&nbsp;<span class="string" id="8450956">&#34;/foo%7cbar/%5c%e1%88%b4&#34;</span><span class="op" id="8450981">}</span><span class="op" id="8450982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8450988">for</span>&nbsp;<span class="ident" id="8450992">_</span><span class="op" id="8450993">,</span>&nbsp;<span class="ident" id="8450995">test</span>&nbsp;<span class="op" id="8451000">:=</span>&nbsp;<span class="keyword" id="8451003">range</span>&nbsp;<span class="ident" id="8451009">tests</span>&nbsp;<span class="op" id="8451015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8451019">if</span>&nbsp;<span class="ident" id="8451022">got</span>&nbsp;<span class="op" id="8451026">:=</span>&nbsp;<span class="ident" id="8451029">urlNormalizer</span><span class="op" id="8451042">(</span><span class="ident" id="8451043">test</span><span class="op" id="8451047">.</span><span class="ident" id="8451048">url</span><span class="op" id="8451051">)</span><span class="op" id="8451052">;</span>&nbsp;<span class="ident" id="8451054">test</span><span class="op" id="8451058">.</span><span class="ident" id="8451059">want</span>&nbsp;<span class="op" id="8451064">!=</span>&nbsp;<span class="ident" id="8451067">got</span>&nbsp;<span class="op" id="8451071">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451076">t</span><span class="op" id="8451077">.</span><span class="ident" id="8451078">Errorf</span><span class="op" id="8451084">(</span><span class="string" id="8451085">&#34;%q:&nbsp;want\n\t%q\nbut&nbsp;got\n\t%q&#34;</span><span class="op" id="8451116">,</span>&nbsp;<span class="ident" id="8451118">test</span><span class="op" id="8451122">.</span><span class="ident" id="8451123">url</span><span class="op" id="8451126">,</span>&nbsp;<span class="ident" id="8451128">test</span><span class="op" id="8451132">.</span><span class="ident" id="8451133">want</span><span class="op" id="8451137">,</span>&nbsp;<span class="ident" id="8451139">got</span><span class="op" id="8451142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8451146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8451150">if</span>&nbsp;<span class="ident" id="8451153">test</span><span class="op" id="8451157">.</span><span class="ident" id="8451158">want</span>&nbsp;<span class="op" id="8451163">!=</span>&nbsp;<span class="ident" id="8451166">urlNormalizer</span><span class="op" id="8451179">(</span><span class="ident" id="8451180">test</span><span class="op" id="8451184">.</span><span class="ident" id="8451185">want</span><span class="op" id="8451189">)</span>&nbsp;<span class="op" id="8451191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451196">t</span><span class="op" id="8451197">.</span><span class="ident" id="8451198">Errorf</span><span class="op" id="8451204">(</span><span class="string" id="8451205">&#34;not&nbsp;idempotent:&nbsp;%q&#34;</span><span class="op" id="8451225">,</span>&nbsp;<span class="ident" id="8451227">test</span><span class="op" id="8451231">.</span><span class="ident" id="8451232">want</span><span class="op" id="8451236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8451240">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8451243">}</span><br>
<span class="lineno"></span><span class="op" id="8451245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8451248">func</span>&nbsp;<span class="ident" id="8451253">TestURLFilters</span><span class="op" id="8451267">(</span><span class="ident" id="8451268">t</span>&nbsp;<span class="op" id="8451270">*</span><span class="ident" id="8451271">testing</span><span class="op" id="8451278">.</span><span class="ident" id="8451279">T</span><span class="op" id="8451280">)</span>&nbsp;<span class="op" id="8451282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451285">input</span>&nbsp;<span class="op" id="8451291">:=</span>&nbsp;<span class="op" id="8451294">(</span><span class="string" id="8451295">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8451356">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451360">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8451427">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451431">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8451450">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451454">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8451473">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451477">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8451496">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451500">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8451519">+</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451523">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8451542">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451546">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8451568">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451572">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8451614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451618">tests</span>&nbsp;<span class="op" id="8451624">:=</span>&nbsp;<span class="op" id="8451627">[</span><span class="op" id="8451628">]</span><span class="keyword" id="8451629">struct</span>&nbsp;<span class="op" id="8451636">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451640">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8451648">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451657">escaper</span>&nbsp;<span class="keyword" id="8451665">func</span><span class="op" id="8451669">(</span><span class="op" id="8451670">...</span><span class="keyword" id="8451673">interface</span><span class="op" id="8451682">{</span><span class="op" id="8451683">}</span><span class="op" id="8451684">)</span>&nbsp;<span class="builtintype" id="8451686">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451695">escaped</span>&nbsp;<span class="builtintype" id="8451703">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8451711">}</span><span class="op" id="8451712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8451716">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451721">&#34;urlEscaper&#34;</span><span class="op" id="8451733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8451738">urlEscaper</span><span class="op" id="8451748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451753">&#34;%00%01%02%03%04%05%06%07%08%09%0a%0b%0c%0d%0e%0f&#34;</span>&nbsp;<span class="op" id="8451804">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451810">&#34;%10%11%12%13%14%15%16%17%18%19%1a%1b%1c%1d%1e%1f&#34;</span>&nbsp;<span class="op" id="8451861">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451867">&#34;%20%21%22%23%24%25%26%27%28%29%2a%2b%2c-.%2f&#34;</span>&nbsp;<span class="op" id="8451914">+</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451920">&#34;0123456789%3a%3b%3c%3d%3e%3f&#34;</span>&nbsp;<span class="op" id="8451951">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451957">&#34;%40ABCDEFGHIJKLMNO&#34;</span>&nbsp;<span class="op" id="8451978">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8451984">&#34;PQRSTUVWXYZ%5b%5c%5d%5e_&#34;</span>&nbsp;<span class="op" id="8452011">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452017">&#34;%60abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8452038">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452044">&#34;pqrstuvwxyz%7b%7c%7d~%7f&#34;</span>&nbsp;<span class="op" id="8452071">+</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452077">&#34;%c2%a0%c4%80%e2%80%a8%e2%80%a9%ef%bb%bf%f0%9d%84%9e&#34;</span><span class="op" id="8452130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452134">}</span><span class="op" id="8452135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452144">&#34;urlNormalizer&#34;</span><span class="op" id="8452159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8452164">urlNormalizer</span><span class="op" id="8452177">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452182">&#34;%00%01%02%03%04%05%06%07%08%09%0a%0b%0c%0d%0e%0f&#34;</span>&nbsp;<span class="op" id="8452233">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452239">&#34;%10%11%12%13%14%15%16%17%18%19%1a%1b%1c%1d%1e%1f&#34;</span>&nbsp;<span class="op" id="8452290">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452296">&#34;%20!%22#$%25&amp;%27%28%29*+,-./&#34;</span>&nbsp;<span class="op" id="8452327">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452333">&#34;0123456789:;%3c=%3e?&#34;</span>&nbsp;<span class="op" id="8452356">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452362">&#34;@ABCDEFGHIJKLMNO&#34;</span>&nbsp;<span class="op" id="8452381">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452387">&#34;PQRSTUVWXYZ[%5c]%5e_&#34;</span>&nbsp;<span class="op" id="8452410">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452416">&#34;%60abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8452437">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452443">&#34;pqrstuvwxyz%7b%7c%7d~%7f&#34;</span>&nbsp;<span class="op" id="8452470">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8452476">&#34;%c2%a0%c4%80%e2%80%a8%e2%80%a9%ef%bb%bf%f0%9d%84%9e&#34;</span><span class="op" id="8452529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452533">}</span><span class="op" id="8452534">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8452541">for</span>&nbsp;<span class="ident" id="8452545">_</span><span class="op" id="8452546">,</span>&nbsp;<span class="ident" id="8452548">test</span>&nbsp;<span class="op" id="8452553">:=</span>&nbsp;<span class="keyword" id="8452556">range</span>&nbsp;<span class="ident" id="8452562">tests</span>&nbsp;<span class="op" id="8452568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8452572">if</span>&nbsp;<span class="ident" id="8452575">s</span>&nbsp;<span class="op" id="8452577">:=</span>&nbsp;<span class="ident" id="8452580">test</span><span class="op" id="8452584">.</span><span class="ident" id="8452585">escaper</span><span class="op" id="8452592">(</span><span class="ident" id="8452593">input</span><span class="op" id="8452598">)</span><span class="op" id="8452599">;</span>&nbsp;<span class="ident" id="8452601">s</span>&nbsp;<span class="op" id="8452603">!=</span>&nbsp;<span class="ident" id="8452606">test</span><span class="op" id="8452610">.</span><span class="ident" id="8452611">escaped</span>&nbsp;<span class="op" id="8452619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8452624">t</span><span class="op" id="8452625">.</span><span class="ident" id="8452626">Errorf</span><span class="op" id="8452632">(</span><span class="string" id="8452633">&#34;%s:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8452660">,</span>&nbsp;<span class="ident" id="8452662">test</span><span class="op" id="8452666">.</span><span class="ident" id="8452667">name</span><span class="op" id="8452671">,</span>&nbsp;<span class="ident" id="8452673">test</span><span class="op" id="8452677">.</span><span class="ident" id="8452678">escaped</span><span class="op" id="8452685">,</span>&nbsp;<span class="ident" id="8452687">s</span><span class="op" id="8452688">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8452693">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452707">}</span><br>
<span class="lineno"></span><span class="op" id="8452709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="8452712">func</span>&nbsp;<span class="ident" id="8452717">BenchmarkURLEscaper</span><span class="op" id="8452736">(</span><span class="ident" id="8452737">b</span>&nbsp;<span class="op" id="8452739">*</span><span class="ident" id="8452740">testing</span><span class="op" id="8452747">.</span><span class="ident" id="8452748">B</span><span class="op" id="8452749">)</span>&nbsp;<span class="op" id="8452751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8452754">for</span>&nbsp;<span class="ident" id="8452758">i</span>&nbsp;<span class="op" id="8452760">:=</span>&nbsp;<span class="num" id="8452763">0</span><span class="op" id="8452764">;</span>&nbsp;<span class="ident" id="8452766">i</span>&nbsp;<span class="op" id="8452768">&lt;</span>&nbsp;<span class="ident" id="8452770">b</span><span class="op" id="8452771">.</span><span class="ident" id="8452772">N</span><span class="op" id="8452773">;</span>&nbsp;<span class="ident" id="8452775">i</span><span class="op" id="8452776">++</span>&nbsp;<span class="op" id="8452779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8452783">urlEscaper</span><span class="op" id="8452793">(</span><span class="string" id="8452794">&#34;http://example.com:80/foo?q=bar%20&amp;baz=x+y#frag&#34;</span><span class="op" id="8452843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452846">}</span><br>
<span class="lineno"></span><span class="op" id="8452848">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8452851">func</span>&nbsp;<span class="ident" id="8452856">BenchmarkURLEscaperNoSpecials</span><span class="op" id="8452885">(</span><span class="ident" id="8452886">b</span>&nbsp;<span class="op" id="8452888">*</span><span class="ident" id="8452889">testing</span><span class="op" id="8452896">.</span><span class="ident" id="8452897">B</span><span class="op" id="8452898">)</span>&nbsp;<span class="op" id="8452900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8452903">for</span>&nbsp;<span class="ident" id="8452907">i</span>&nbsp;<span class="op" id="8452909">:=</span>&nbsp;<span class="num" id="8452912">0</span><span class="op" id="8452913">;</span>&nbsp;<span class="ident" id="8452915">i</span>&nbsp;<span class="op" id="8452917">&lt;</span>&nbsp;<span class="ident" id="8452919">b</span><span class="op" id="8452920">.</span><span class="ident" id="8452921">N</span><span class="op" id="8452922">;</span>&nbsp;<span class="ident" id="8452924">i</span><span class="op" id="8452925">++</span>&nbsp;<span class="op" id="8452928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8452932">urlEscaper</span><span class="op" id="8452942">(</span><span class="string" id="8452943">&#34;TheQuickBrownFoxJumpsOverTheLazyDog.&#34;</span><span class="op" id="8452981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8452984">}</span><br>
<span class="lineno">100</span><span class="op" id="8452986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8452989">func</span>&nbsp;<span class="ident" id="8452994">BenchmarkURLNormalizer</span><span class="op" id="8453016">(</span><span class="ident" id="8453017">b</span>&nbsp;<span class="op" id="8453019">*</span><span class="ident" id="8453020">testing</span><span class="op" id="8453027">.</span><span class="ident" id="8453028">B</span><span class="op" id="8453029">)</span>&nbsp;<span class="op" id="8453031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8453034">for</span>&nbsp;<span class="ident" id="8453038">i</span>&nbsp;<span class="op" id="8453040">:=</span>&nbsp;<span class="num" id="8453043">0</span><span class="op" id="8453044">;</span>&nbsp;<span class="ident" id="8453046">i</span>&nbsp;<span class="op" id="8453048">&lt;</span>&nbsp;<span class="ident" id="8453050">b</span><span class="op" id="8453051">.</span><span class="ident" id="8453052">N</span><span class="op" id="8453053">;</span>&nbsp;<span class="ident" id="8453055">i</span><span class="op" id="8453056">++</span>&nbsp;<span class="op" id="8453059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8453063">urlNormalizer</span><span class="op" id="8453076">(</span><span class="string" id="8453077">&#34;The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.\n&#34;</span><span class="op" id="8453125">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8453128">}</span><br>
<span class="lineno"></span><span class="op" id="8453130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8453133">func</span>&nbsp;<span class="ident" id="8453138">BenchmarkURLNormalizerNoSpecials</span><span class="op" id="8453170">(</span><span class="ident" id="8453171">b</span>&nbsp;<span class="op" id="8453173">*</span><span class="ident" id="8453174">testing</span><span class="op" id="8453181">.</span><span class="ident" id="8453182">B</span><span class="op" id="8453183">)</span>&nbsp;<span class="op" id="8453185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8453188">for</span>&nbsp;<span class="ident" id="8453192">i</span>&nbsp;<span class="op" id="8453194">:=</span>&nbsp;<span class="num" id="8453197">0</span><span class="op" id="8453198">;</span>&nbsp;<span class="ident" id="8453200">i</span>&nbsp;<span class="op" id="8453202">&lt;</span>&nbsp;<span class="ident" id="8453204">b</span><span class="op" id="8453205">.</span><span class="ident" id="8453206">N</span><span class="op" id="8453207">;</span>&nbsp;<span class="ident" id="8453209">i</span><span class="op" id="8453210">++</span>&nbsp;<span class="op" id="8453213">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8453217">urlNormalizer</span><span class="op" id="8453230">(</span><span class="string" id="8453231">&#34;http://example.com:80/foo?q=bar%20&amp;baz=x+y#frag&#34;</span><span class="op" id="8453280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8453283">}</span><br>
<span class="lineno"></span><span class="op" id="8453285">}</span>
</div>
</body>
</html>
