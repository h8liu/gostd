<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7364550">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7364606">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7364660">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7364711">package</span>&nbsp;<span class="ident" id="7364719">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7364725">import</span>&nbsp;<span class="op" id="7364732">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7364735">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7364744">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7364762">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7364768">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7364778">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7364781">func</span>&nbsp;<span class="ident" id="7364786">TestRead</span><span class="op" id="7364794">(</span><span class="ident" id="7364795">t</span>&nbsp;<span class="op" id="7364797">*</span><span class="ident" id="7364798">testing</span><span class="op" id="7364805">.</span><span class="ident" id="7364806">T</span><span class="op" id="7364807">)</span>&nbsp;<span class="op" id="7364809">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364812">var</span>&nbsp;<span class="ident" id="7364816">n</span>&nbsp;<span class="builtintype" id="7364818">int</span>&nbsp;<span class="op" id="7364822">=</span>&nbsp;<span class="num" id="7364824">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364829">if</span>&nbsp;<span class="ident" id="7364832">testing</span><span class="op" id="7364839">.</span><span class="ident" id="7364840">Short</span><span class="op" id="7364845">(</span><span class="op" id="7364846">)</span>&nbsp;<span class="op" id="7364848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364852">n</span>&nbsp;<span class="op" id="7364854">=</span>&nbsp;<span class="num" id="7364856">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364864">b</span>&nbsp;<span class="op" id="7364866">:=</span>&nbsp;<span class="builtinfunc" id="7364869">make</span><span class="op" id="7364873">(</span><span class="op" id="7364874">[</span><span class="op" id="7364875">]</span><span class="builtintype" id="7364876">byte</span><span class="op" id="7364880">,</span>&nbsp;<span class="ident" id="7364882">n</span><span class="op" id="7364883">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364886">n</span><span class="op" id="7364887">,</span>&nbsp;<span class="ident" id="7364889">err</span>&nbsp;<span class="op" id="7364893">:=</span>&nbsp;<span class="ident" id="7364896">io</span><span class="op" id="7364898">.</span><span class="ident" id="7364899">ReadFull</span><span class="op" id="7364907">(</span><span class="ident" id="7364908">Reader</span><span class="op" id="7364914">,</span>&nbsp;<span class="ident" id="7364916">b</span><span class="op" id="7364917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364920">if</span>&nbsp;<span class="ident" id="7364923">n</span>&nbsp;<span class="op" id="7364925">!=</span>&nbsp;<span class="builtinfunc" id="7364928">len</span><span class="op" id="7364931">(</span><span class="ident" id="7364932">b</span><span class="op" id="7364933">)</span>&nbsp;<span class="op" id="7364935">||</span>&nbsp;<span class="ident" id="7364938">err</span>&nbsp;<span class="op" id="7364942">!=</span>&nbsp;<span class="ident" id="7364945">nil</span>&nbsp;<span class="op" id="7364949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364953">t</span><span class="op" id="7364954">.</span><span class="ident" id="7364955">Fatalf</span><span class="op" id="7364961">(</span><span class="string" id="7364962">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7364986">,</span>&nbsp;<span class="ident" id="7364988">n</span><span class="op" id="7364989">,</span>&nbsp;<span class="ident" id="7364991">err</span><span class="op" id="7364994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365001">var</span>&nbsp;<span class="ident" id="7365005">z</span>&nbsp;<span class="ident" id="7365007">bytes</span><span class="op" id="7365012">.</span><span class="ident" id="7365013">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365021">f</span><span class="op" id="7365022">,</span>&nbsp;<span class="ident" id="7365024">_</span>&nbsp;<span class="op" id="7365026">:=</span>&nbsp;<span class="ident" id="7365029">flate</span><span class="op" id="7365034">.</span><span class="ident" id="7365035">NewWriter</span><span class="op" id="7365044">(</span><span class="op" id="7365045">&amp;</span><span class="ident" id="7365046">z</span><span class="op" id="7365047">,</span>&nbsp;<span class="num" id="7365049">5</span><span class="op" id="7365050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365053">f</span><span class="op" id="7365054">.</span><span class="ident" id="7365055">Write</span><span class="op" id="7365060">(</span><span class="ident" id="7365061">b</span><span class="op" id="7365062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365065">f</span><span class="op" id="7365066">.</span><span class="ident" id="7365067">Close</span><span class="op" id="7365072">(</span><span class="op" id="7365073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365076">if</span>&nbsp;<span class="ident" id="7365079">z</span><span class="op" id="7365080">.</span><span class="ident" id="7365081">Len</span><span class="op" id="7365084">(</span><span class="op" id="7365085">)</span>&nbsp;<span class="op" id="7365087">&lt;</span>&nbsp;<span class="builtinfunc" id="7365089">len</span><span class="op" id="7365092">(</span><span class="ident" id="7365093">b</span><span class="op" id="7365094">)</span><span class="op" id="7365095">*</span><span class="num" id="7365096">99</span><span class="op" id="7365098">/</span><span class="num" id="7365099">100</span>&nbsp;<span class="op" id="7365103">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365107">t</span><span class="op" id="7365108">.</span><span class="ident" id="7365109">Fatalf</span><span class="op" id="7365115">(</span><span class="string" id="7365116">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7365137">,</span>&nbsp;<span class="builtinfunc" id="7365139">len</span><span class="op" id="7365142">(</span><span class="ident" id="7365143">b</span><span class="op" id="7365144">)</span><span class="op" id="7365145">,</span>&nbsp;<span class="ident" id="7365147">z</span><span class="op" id="7365148">.</span><span class="ident" id="7365149">Len</span><span class="op" id="7365152">(</span><span class="op" id="7365153">)</span><span class="op" id="7365154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365157">}</span><br>
<span class="lineno"></span><span class="op" id="7365159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7365162">func</span>&nbsp;<span class="ident" id="7365167">TestReadEmpty</span><span class="op" id="7365180">(</span><span class="ident" id="7365181">t</span>&nbsp;<span class="op" id="7365183">*</span><span class="ident" id="7365184">testing</span><span class="op" id="7365191">.</span><span class="ident" id="7365192">T</span><span class="op" id="7365193">)</span>&nbsp;<span class="op" id="7365195">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365198">n</span><span class="op" id="7365199">,</span>&nbsp;<span class="ident" id="7365201">err</span>&nbsp;<span class="op" id="7365205">:=</span>&nbsp;<span class="ident" id="7365208">Reader</span><span class="op" id="7365214">.</span><span class="ident" id="7365215">Read</span><span class="op" id="7365219">(</span><span class="builtinfunc" id="7365220">make</span><span class="op" id="7365224">(</span><span class="op" id="7365225">[</span><span class="op" id="7365226">]</span><span class="builtintype" id="7365227">byte</span><span class="op" id="7365231">,</span>&nbsp;<span class="num" id="7365233">0</span><span class="op" id="7365234">)</span><span class="op" id="7365235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365238">if</span>&nbsp;<span class="ident" id="7365241">n</span>&nbsp;<span class="op" id="7365243">!=</span>&nbsp;<span class="num" id="7365246">0</span>&nbsp;<span class="op" id="7365248">||</span>&nbsp;<span class="ident" id="7365251">err</span>&nbsp;<span class="op" id="7365255">!=</span>&nbsp;<span class="ident" id="7365258">nil</span>&nbsp;<span class="op" id="7365262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365266">t</span><span class="op" id="7365267">.</span><span class="ident" id="7365268">Fatalf</span><span class="op" id="7365274">(</span><span class="string" id="7365275">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7365307">,</span>&nbsp;<span class="ident" id="7365309">n</span><span class="op" id="7365310">,</span>&nbsp;<span class="ident" id="7365312">err</span><span class="op" id="7365315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365321">n</span><span class="op" id="7365322">,</span>&nbsp;<span class="ident" id="7365324">err</span>&nbsp;<span class="op" id="7365328">=</span>&nbsp;<span class="ident" id="7365330">Reader</span><span class="op" id="7365336">.</span><span class="ident" id="7365337">Read</span><span class="op" id="7365341">(</span><span class="ident" id="7365342">nil</span><span class="op" id="7365345">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365348">if</span>&nbsp;<span class="ident" id="7365351">n</span>&nbsp;<span class="op" id="7365353">!=</span>&nbsp;<span class="num" id="7365356">0</span>&nbsp;<span class="op" id="7365358">||</span>&nbsp;<span class="ident" id="7365361">err</span>&nbsp;<span class="op" id="7365365">!=</span>&nbsp;<span class="ident" id="7365368">nil</span>&nbsp;<span class="op" id="7365372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365376">t</span><span class="op" id="7365377">.</span><span class="ident" id="7365378">Fatalf</span><span class="op" id="7365384">(</span><span class="string" id="7365385">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7365405">,</span>&nbsp;<span class="ident" id="7365407">n</span><span class="op" id="7365408">,</span>&nbsp;<span class="ident" id="7365410">err</span><span class="op" id="7365413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365416">}</span><br>
<span class="lineno"></span><span class="op" id="7365418">}</span>
</div>
</body>
</html>
