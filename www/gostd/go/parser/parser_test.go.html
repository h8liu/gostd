<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8022125">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8022180">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8022234">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8022285">package</span>&nbsp;<span class="ident" id="8022293">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8022301">import</span>&nbsp;<span class="op" id="8022308">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022311">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022320">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022327">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022337">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022349">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022355">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022366">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8022376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8022379">var</span>&nbsp;<span class="ident" id="8022383">fset</span>&nbsp;<span class="op" id="8022388">=</span>&nbsp;<span class="ident" id="8022390">token</span><span class="op" id="8022395">.</span><span class="ident" id="8022396">NewFileSet</span><span class="op" id="8022406">(</span><span class="op" id="8022407">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8022410">var</span>&nbsp;<span class="ident" id="8022414">validFiles</span>&nbsp;<span class="op" id="8022425">=</span>&nbsp;<span class="op" id="8022427">[</span><span class="op" id="8022428">]</span><span class="builtintype" id="8022429">string</span><span class="op" id="8022435">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022438">&#34;parser.go&#34;</span><span class="op" id="8022449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022452">&#34;parser_test.go&#34;</span><span class="op" id="8022468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022471">&#34;error_test.go&#34;</span><span class="op" id="8022486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8022489">&#34;short_test.go&#34;</span><span class="op" id="8022504">,</span><br>
<span class="lineno"></span><span class="op" id="8022506">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8022509">func</span>&nbsp;<span class="ident" id="8022514">TestParse</span><span class="op" id="8022523">(</span><span class="ident" id="8022524">t</span>&nbsp;<span class="op" id="8022526">*</span><span class="ident" id="8022527">testing</span><span class="op" id="8022534">.</span><span class="ident" id="8022535">T</span><span class="op" id="8022536">)</span>&nbsp;<span class="op" id="8022538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022541">for</span>&nbsp;<span class="ident" id="8022545">_</span><span class="op" id="8022546">,</span>&nbsp;<span class="ident" id="8022548">filename</span>&nbsp;<span class="op" id="8022557">:=</span>&nbsp;<span class="keyword" id="8022560">range</span>&nbsp;<span class="ident" id="8022566">validFiles</span>&nbsp;<span class="op" id="8022577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8022581">_</span><span class="op" id="8022582">,</span>&nbsp;<span class="ident" id="8022584">err</span>&nbsp;<span class="op" id="8022588">:=</span>&nbsp;<span class="ident" id="8022591">ParseFile</span><span class="op" id="8022600">(</span><span class="ident" id="8022601">fset</span><span class="op" id="8022605">,</span>&nbsp;<span class="ident" id="8022607">filename</span><span class="op" id="8022615">,</span>&nbsp;<span class="ident" id="8022617">nil</span><span class="op" id="8022620">,</span>&nbsp;<span class="ident" id="8022622">DeclarationErrors</span><span class="op" id="8022639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022643">if</span>&nbsp;<span class="ident" id="8022646">err</span>&nbsp;<span class="op" id="8022650">!=</span>&nbsp;<span class="ident" id="8022653">nil</span>&nbsp;<span class="op" id="8022657">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8022662">t</span><span class="op" id="8022663">.</span><span class="ident" id="8022664">Fatalf</span><span class="op" id="8022670">(</span><span class="string" id="8022671">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="8022690">,</span>&nbsp;<span class="ident" id="8022692">filename</span><span class="op" id="8022700">,</span>&nbsp;<span class="ident" id="8022702">err</span><span class="op" id="8022705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8022709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8022712">}</span><br>
<span class="lineno"></span><span class="op" id="8022714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8022717">func</span>&nbsp;<span class="ident" id="8022722">nameFilter</span><span class="op" id="8022732">(</span><span class="ident" id="8022733">filename</span>&nbsp;<span class="builtintype" id="8022742">string</span><span class="op" id="8022748">)</span>&nbsp;<span class="builtintype" id="8022750">bool</span>&nbsp;<span class="op" id="8022755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022758">switch</span>&nbsp;<span class="ident" id="8022765">filename</span>&nbsp;<span class="op" id="8022774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022777">case</span>&nbsp;<span class="string" id="8022782">&#34;parser.go&#34;</span><span class="op" id="8022793">,</span>&nbsp;<span class="string" id="8022795">&#34;interface.go&#34;</span><span class="op" id="8022809">,</span>&nbsp;<span class="string" id="8022811">&#34;parser_test.go&#34;</span><span class="op" id="8022827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022831">return</span>&nbsp;<span class="builtintype" id="8022838">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022844">case</span>&nbsp;<span class="string" id="8022849">&#34;parser.go.orig&#34;</span><span class="op" id="8022865">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022869">return</span>&nbsp;<span class="builtintype" id="8022876">true</span>&nbsp;<span class="comment" id="8022881">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8022926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8022929">return</span>&nbsp;<span class="builtintype" id="8022936">false</span><br>
<span class="lineno"></span><span class="op" id="8022942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8022945">func</span>&nbsp;<span class="ident" id="8022950">dirFilter</span><span class="op" id="8022959">(</span><span class="ident" id="8022960">f</span>&nbsp;<span class="ident" id="8022962">os</span><span class="op" id="8022964">.</span><span class="ident" id="8022965">FileInfo</span><span class="op" id="8022973">)</span>&nbsp;<span class="builtintype" id="8022975">bool</span>&nbsp;<span class="op" id="8022980">{</span>&nbsp;<span class="keyword" id="8022982">return</span>&nbsp;<span class="ident" id="8022989">nameFilter</span><span class="op" id="8022999">(</span><span class="ident" id="8023000">f</span><span class="op" id="8023001">.</span><span class="ident" id="8023002">Name</span><span class="op" id="8023006">(</span><span class="op" id="8023007">)</span><span class="op" id="8023008">)</span>&nbsp;<span class="op" id="8023010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8023013">func</span>&nbsp;<span class="ident" id="8023018">TestParseDir</span><span class="op" id="8023030">(</span><span class="ident" id="8023031">t</span>&nbsp;<span class="op" id="8023033">*</span><span class="ident" id="8023034">testing</span><span class="op" id="8023041">.</span><span class="ident" id="8023042">T</span><span class="op" id="8023043">)</span>&nbsp;<span class="op" id="8023045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023048">path</span>&nbsp;<span class="op" id="8023053">:=</span>&nbsp;<span class="string" id="8023056">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023061">pkgs</span><span class="op" id="8023065">,</span>&nbsp;<span class="ident" id="8023067">err</span>&nbsp;<span class="op" id="8023071">:=</span>&nbsp;<span class="ident" id="8023074">ParseDir</span><span class="op" id="8023082">(</span><span class="ident" id="8023083">fset</span><span class="op" id="8023087">,</span>&nbsp;<span class="ident" id="8023089">path</span><span class="op" id="8023093">,</span>&nbsp;<span class="ident" id="8023095">dirFilter</span><span class="op" id="8023104">,</span>&nbsp;<span class="num" id="8023106">0</span><span class="op" id="8023107">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023110">if</span>&nbsp;<span class="ident" id="8023113">err</span>&nbsp;<span class="op" id="8023117">!=</span>&nbsp;<span class="ident" id="8023120">nil</span>&nbsp;<span class="op" id="8023124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023128">t</span><span class="op" id="8023129">.</span><span class="ident" id="8023130">Fatalf</span><span class="op" id="8023136">(</span><span class="string" id="8023137">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="8023155">,</span>&nbsp;<span class="ident" id="8023157">path</span><span class="op" id="8023161">,</span>&nbsp;<span class="ident" id="8023163">err</span><span class="op" id="8023166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023172">if</span>&nbsp;<span class="ident" id="8023175">n</span>&nbsp;<span class="op" id="8023177">:=</span>&nbsp;<span class="builtinfunc" id="8023180">len</span><span class="op" id="8023183">(</span><span class="ident" id="8023184">pkgs</span><span class="op" id="8023188">)</span><span class="op" id="8023189">;</span>&nbsp;<span class="ident" id="8023191">n</span>&nbsp;<span class="op" id="8023193">!=</span>&nbsp;<span class="num" id="8023196">1</span>&nbsp;<span class="op" id="8023198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023202">t</span><span class="op" id="8023203">.</span><span class="ident" id="8023204">Errorf</span><span class="op" id="8023210">(</span><span class="string" id="8023211">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="8023236">,</span>&nbsp;<span class="ident" id="8023238">n</span><span class="op" id="8023239">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023245">pkg</span>&nbsp;<span class="op" id="8023249">:=</span>&nbsp;<span class="ident" id="8023252">pkgs</span><span class="op" id="8023256">[</span><span class="string" id="8023257">&#34;parser&#34;</span><span class="op" id="8023265">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023268">if</span>&nbsp;<span class="ident" id="8023271">pkg</span>&nbsp;<span class="op" id="8023275">==</span>&nbsp;<span class="ident" id="8023278">nil</span>&nbsp;<span class="op" id="8023282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023286">t</span><span class="op" id="8023287">.</span><span class="ident" id="8023288">Errorf</span><span class="op" id="8023294">(</span><span class="string" id="8023295">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="8023323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023327">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023338">if</span>&nbsp;<span class="ident" id="8023341">n</span>&nbsp;<span class="op" id="8023343">:=</span>&nbsp;<span class="builtinfunc" id="8023346">len</span><span class="op" id="8023349">(</span><span class="ident" id="8023350">pkg</span><span class="op" id="8023353">.</span><span class="ident" id="8023354">Files</span><span class="op" id="8023359">)</span><span class="op" id="8023360">;</span>&nbsp;<span class="ident" id="8023362">n</span>&nbsp;<span class="op" id="8023364">!=</span>&nbsp;<span class="num" id="8023367">3</span>&nbsp;<span class="op" id="8023369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023373">t</span><span class="op" id="8023374">.</span><span class="ident" id="8023375">Errorf</span><span class="op" id="8023381">(</span><span class="string" id="8023382">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="8023412">,</span>&nbsp;<span class="ident" id="8023414">n</span><span class="op" id="8023415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023421">for</span>&nbsp;<span class="ident" id="8023425">filename</span>&nbsp;<span class="op" id="8023434">:=</span>&nbsp;<span class="keyword" id="8023437">range</span>&nbsp;<span class="ident" id="8023443">pkg</span><span class="op" id="8023446">.</span><span class="ident" id="8023447">Files</span>&nbsp;<span class="op" id="8023453">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023457">if</span>&nbsp;<span class="op" id="8023460">!</span><span class="ident" id="8023461">nameFilter</span><span class="op" id="8023471">(</span><span class="ident" id="8023472">filename</span><span class="op" id="8023480">)</span>&nbsp;<span class="op" id="8023482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023487">t</span><span class="op" id="8023488">.</span><span class="ident" id="8023489">Errorf</span><span class="op" id="8023495">(</span><span class="string" id="8023496">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="8023525">,</span>&nbsp;<span class="ident" id="8023527">filename</span><span class="op" id="8023535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023542">}</span><br>
<span class="lineno"></span><span class="op" id="8023544">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8023547">func</span>&nbsp;<span class="ident" id="8023552">TestParseExpr</span><span class="op" id="8023565">(</span><span class="ident" id="8023566">t</span>&nbsp;<span class="op" id="8023568">*</span><span class="ident" id="8023569">testing</span><span class="op" id="8023576">.</span><span class="ident" id="8023577">T</span><span class="op" id="8023578">)</span>&nbsp;<span class="op" id="8023580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8023583">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8023611">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023645">src</span>&nbsp;<span class="op" id="8023649">:=</span>&nbsp;<span class="string" id="8023652">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023661">x</span><span class="op" id="8023662">,</span>&nbsp;<span class="ident" id="8023664">err</span>&nbsp;<span class="op" id="8023668">:=</span>&nbsp;<span class="ident" id="8023671">ParseExpr</span><span class="op" id="8023680">(</span><span class="ident" id="8023681">src</span><span class="op" id="8023684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023687">if</span>&nbsp;<span class="ident" id="8023690">err</span>&nbsp;<span class="op" id="8023694">!=</span>&nbsp;<span class="ident" id="8023697">nil</span>&nbsp;<span class="op" id="8023701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023705">t</span><span class="op" id="8023706">.</span><span class="ident" id="8023707">Errorf</span><span class="op" id="8023713">(</span><span class="string" id="8023714">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8023733">,</span>&nbsp;<span class="ident" id="8023735">src</span><span class="op" id="8023738">,</span>&nbsp;<span class="ident" id="8023740">err</span><span class="op" id="8023743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8023749">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023766">if</span>&nbsp;<span class="ident" id="8023769">_</span><span class="op" id="8023770">,</span>&nbsp;<span class="ident" id="8023772">ok</span>&nbsp;<span class="op" id="8023775">:=</span>&nbsp;<span class="ident" id="8023778">x</span><span class="op" id="8023779">.</span><span class="op" id="8023780">(</span><span class="op" id="8023781">*</span><span class="ident" id="8023782">ast</span><span class="op" id="8023785">.</span><span class="ident" id="8023786">BinaryExpr</span><span class="op" id="8023796">)</span><span class="op" id="8023797">;</span>&nbsp;<span class="op" id="8023799">!</span><span class="ident" id="8023800">ok</span>&nbsp;<span class="op" id="8023803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023807">t</span><span class="op" id="8023808">.</span><span class="ident" id="8023809">Errorf</span><span class="op" id="8023815">(</span><span class="string" id="8023816">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="8023861">,</span>&nbsp;<span class="ident" id="8023863">src</span><span class="op" id="8023866">,</span>&nbsp;<span class="ident" id="8023868">x</span><span class="op" id="8023869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8023872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8023876">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023904">src</span>&nbsp;<span class="op" id="8023908">=</span>&nbsp;<span class="string" id="8023910">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023928">x</span><span class="op" id="8023929">,</span>&nbsp;<span class="ident" id="8023931">err</span>&nbsp;<span class="op" id="8023935">=</span>&nbsp;<span class="ident" id="8023937">ParseExpr</span><span class="op" id="8023946">(</span><span class="ident" id="8023947">src</span><span class="op" id="8023950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8023953">if</span>&nbsp;<span class="ident" id="8023956">err</span>&nbsp;<span class="op" id="8023960">!=</span>&nbsp;<span class="ident" id="8023963">nil</span>&nbsp;<span class="op" id="8023967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8023971">t</span><span class="op" id="8023972">.</span><span class="ident" id="8023973">Errorf</span><span class="op" id="8023979">(</span><span class="string" id="8023980">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8023999">,</span>&nbsp;<span class="ident" id="8024001">src</span><span class="op" id="8024004">,</span>&nbsp;<span class="ident" id="8024006">err</span><span class="op" id="8024009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8024012">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8024015">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024032">if</span>&nbsp;<span class="ident" id="8024035">_</span><span class="op" id="8024036">,</span>&nbsp;<span class="ident" id="8024038">ok</span>&nbsp;<span class="op" id="8024041">:=</span>&nbsp;<span class="ident" id="8024044">x</span><span class="op" id="8024045">.</span><span class="op" id="8024046">(</span><span class="op" id="8024047">*</span><span class="ident" id="8024048">ast</span><span class="op" id="8024051">.</span><span class="ident" id="8024052">StructType</span><span class="op" id="8024062">)</span><span class="op" id="8024063">;</span>&nbsp;<span class="op" id="8024065">!</span><span class="ident" id="8024066">ok</span>&nbsp;<span class="op" id="8024069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024073">t</span><span class="op" id="8024074">.</span><span class="ident" id="8024075">Errorf</span><span class="op" id="8024081">(</span><span class="string" id="8024082">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="8024127">,</span>&nbsp;<span class="ident" id="8024129">src</span><span class="op" id="8024132">,</span>&nbsp;<span class="ident" id="8024134">x</span><span class="op" id="8024135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8024138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8024142">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024168">src</span>&nbsp;<span class="op" id="8024172">=</span>&nbsp;<span class="string" id="8024174">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024183">if</span>&nbsp;<span class="ident" id="8024186">_</span><span class="op" id="8024187">,</span>&nbsp;<span class="ident" id="8024189">err</span>&nbsp;<span class="op" id="8024193">:=</span>&nbsp;<span class="ident" id="8024196">ParseExpr</span><span class="op" id="8024205">(</span><span class="ident" id="8024206">src</span><span class="op" id="8024209">)</span><span class="op" id="8024210">;</span>&nbsp;<span class="ident" id="8024212">err</span>&nbsp;<span class="op" id="8024216">==</span>&nbsp;<span class="ident" id="8024219">nil</span>&nbsp;<span class="op" id="8024223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024227">t</span><span class="op" id="8024228">.</span><span class="ident" id="8024229">Errorf</span><span class="op" id="8024235">(</span><span class="string" id="8024236">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8024265">,</span>&nbsp;<span class="ident" id="8024267">src</span><span class="op" id="8024270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8024273">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8024277">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024336">src</span>&nbsp;<span class="op" id="8024340">=</span>&nbsp;<span class="string" id="8024342">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024355">if</span>&nbsp;<span class="ident" id="8024358">_</span><span class="op" id="8024359">,</span>&nbsp;<span class="ident" id="8024361">err</span>&nbsp;<span class="op" id="8024365">:=</span>&nbsp;<span class="ident" id="8024368">ParseExpr</span><span class="op" id="8024377">(</span><span class="ident" id="8024378">src</span><span class="op" id="8024381">)</span><span class="op" id="8024382">;</span>&nbsp;<span class="ident" id="8024384">err</span>&nbsp;<span class="op" id="8024388">==</span>&nbsp;<span class="ident" id="8024391">nil</span>&nbsp;<span class="op" id="8024395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024399">t</span><span class="op" id="8024400">.</span><span class="ident" id="8024401">Errorf</span><span class="op" id="8024407">(</span><span class="string" id="8024408">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8024437">,</span>&nbsp;<span class="ident" id="8024439">src</span><span class="op" id="8024442">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8024445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8024449">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024512">src</span>&nbsp;<span class="op" id="8024516">=</span>&nbsp;<span class="string" id="8024518">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024529">if</span>&nbsp;<span class="ident" id="8024532">_</span><span class="op" id="8024533">,</span>&nbsp;<span class="ident" id="8024535">err</span>&nbsp;<span class="op" id="8024539">:=</span>&nbsp;<span class="ident" id="8024542">ParseExpr</span><span class="op" id="8024551">(</span><span class="ident" id="8024552">src</span><span class="op" id="8024555">)</span><span class="op" id="8024556">;</span>&nbsp;<span class="ident" id="8024558">err</span>&nbsp;<span class="op" id="8024562">!=</span>&nbsp;<span class="ident" id="8024565">nil</span>&nbsp;<span class="op" id="8024569">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024573">t</span><span class="op" id="8024574">.</span><span class="ident" id="8024575">Errorf</span><span class="op" id="8024581">(</span><span class="string" id="8024582">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8024611">,</span>&nbsp;<span class="ident" id="8024613">src</span><span class="op" id="8024616">,</span>&nbsp;<span class="ident" id="8024618">err</span><span class="op" id="8024621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8024624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024627">src</span>&nbsp;<span class="op" id="8024631">=</span>&nbsp;<span class="string" id="8024633">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024643">if</span>&nbsp;<span class="ident" id="8024646">_</span><span class="op" id="8024647">,</span>&nbsp;<span class="ident" id="8024649">err</span>&nbsp;<span class="op" id="8024653">:=</span>&nbsp;<span class="ident" id="8024656">ParseExpr</span><span class="op" id="8024665">(</span><span class="ident" id="8024666">src</span><span class="op" id="8024669">)</span><span class="op" id="8024670">;</span>&nbsp;<span class="ident" id="8024672">err</span>&nbsp;<span class="op" id="8024676">==</span>&nbsp;<span class="ident" id="8024679">nil</span>&nbsp;<span class="op" id="8024683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024687">t</span><span class="op" id="8024688">.</span><span class="ident" id="8024689">Errorf</span><span class="op" id="8024695">(</span><span class="string" id="8024696">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8024725">,</span>&nbsp;<span class="ident" id="8024727">src</span><span class="op" id="8024730">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8024733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8024737">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024790">const</span>&nbsp;<span class="ident" id="8024796">validExpr</span>&nbsp;<span class="op" id="8024806">=</span>&nbsp;<span class="string" id="8024808">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024817">const</span>&nbsp;<span class="ident" id="8024823">anything</span>&nbsp;<span class="op" id="8024832">=</span>&nbsp;<span class="string" id="8024834">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024847">for</span>&nbsp;<span class="ident" id="8024851">_</span><span class="op" id="8024852">,</span>&nbsp;<span class="ident" id="8024854">c</span>&nbsp;<span class="op" id="8024856">:=</span>&nbsp;<span class="keyword" id="8024859">range</span>&nbsp;<span class="string" id="8024865">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="8024874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024878">src</span>&nbsp;<span class="op" id="8024882">:=</span>&nbsp;<span class="ident" id="8024885">validExpr</span>&nbsp;<span class="op" id="8024895">+</span>&nbsp;<span class="builtintype" id="8024897">string</span><span class="op" id="8024903">(</span><span class="ident" id="8024904">c</span><span class="op" id="8024905">)</span>&nbsp;<span class="op" id="8024907">+</span>&nbsp;<span class="ident" id="8024909">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8024920">if</span>&nbsp;<span class="ident" id="8024923">_</span><span class="op" id="8024924">,</span>&nbsp;<span class="ident" id="8024926">err</span>&nbsp;<span class="op" id="8024930">:=</span>&nbsp;<span class="ident" id="8024933">ParseExpr</span><span class="op" id="8024942">(</span><span class="ident" id="8024943">src</span><span class="op" id="8024946">)</span><span class="op" id="8024947">;</span>&nbsp;<span class="ident" id="8024949">err</span>&nbsp;<span class="op" id="8024953">==</span>&nbsp;<span class="ident" id="8024956">nil</span>&nbsp;<span class="op" id="8024960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8024965">t</span><span class="op" id="8024966">.</span><span class="ident" id="8024967">Errorf</span><span class="op" id="8024973">(</span><span class="string" id="8024974">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8025003">,</span>&nbsp;<span class="ident" id="8025005">src</span><span class="op" id="8025008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025012">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8025019">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025048">for</span>&nbsp;<span class="ident" id="8025052">_</span><span class="op" id="8025053">,</span>&nbsp;<span class="ident" id="8025055">src</span>&nbsp;<span class="op" id="8025059">:=</span>&nbsp;<span class="keyword" id="8025062">range</span>&nbsp;<span class="ident" id="8025068">valids</span>&nbsp;<span class="op" id="8025075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025079">ParseExpr</span><span class="op" id="8025088">(</span><span class="ident" id="8025089">src</span><span class="op" id="8025092">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025095">}</span><br>
<span class="lineno"></span><span class="op" id="8025097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8025100">func</span>&nbsp;<span class="ident" id="8025105">TestColonEqualsScope</span><span class="op" id="8025125">(</span><span class="ident" id="8025126">t</span>&nbsp;<span class="op" id="8025128">*</span><span class="ident" id="8025129">testing</span><span class="op" id="8025136">.</span><span class="ident" id="8025137">T</span><span class="op" id="8025138">)</span>&nbsp;<span class="op" id="8025140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025143">f</span><span class="op" id="8025144">,</span>&nbsp;<span class="ident" id="8025146">err</span>&nbsp;<span class="op" id="8025150">:=</span>&nbsp;<span class="ident" id="8025153">ParseFile</span><span class="op" id="8025162">(</span><span class="ident" id="8025163">fset</span><span class="op" id="8025167">,</span>&nbsp;<span class="string" id="8025169">&#34;&#34;</span><span class="op" id="8025171">,</span>&nbsp;<span class="string" id="8025173">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8025217">,</span>&nbsp;<span class="num" id="8025219">0</span><span class="op" id="8025220">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025223">if</span>&nbsp;<span class="ident" id="8025226">err</span>&nbsp;<span class="op" id="8025230">!=</span>&nbsp;<span class="ident" id="8025233">nil</span>&nbsp;<span class="op" id="8025237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025241">t</span><span class="op" id="8025242">.</span><span class="ident" id="8025243">Fatal</span><span class="op" id="8025248">(</span><span class="ident" id="8025249">err</span><span class="op" id="8025252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8025259">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025310">as</span>&nbsp;<span class="op" id="8025313">:=</span>&nbsp;<span class="ident" id="8025316">f</span><span class="op" id="8025317">.</span><span class="ident" id="8025318">Decls</span><span class="op" id="8025323">[</span><span class="num" id="8025324">0</span><span class="op" id="8025325">]</span><span class="op" id="8025326">.</span><span class="op" id="8025327">(</span><span class="op" id="8025328">*</span><span class="ident" id="8025329">ast</span><span class="op" id="8025332">.</span><span class="ident" id="8025333">FuncDecl</span><span class="op" id="8025341">)</span><span class="op" id="8025342">.</span><span class="ident" id="8025343">Body</span><span class="op" id="8025347">.</span><span class="ident" id="8025348">List</span><span class="op" id="8025352">[</span><span class="num" id="8025353">0</span><span class="op" id="8025354">]</span><span class="op" id="8025355">.</span><span class="op" id="8025356">(</span><span class="op" id="8025357">*</span><span class="ident" id="8025358">ast</span><span class="op" id="8025361">.</span><span class="ident" id="8025362">AssignStmt</span><span class="op" id="8025372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025375">for</span>&nbsp;<span class="ident" id="8025379">_</span><span class="op" id="8025380">,</span>&nbsp;<span class="ident" id="8025382">v</span>&nbsp;<span class="op" id="8025384">:=</span>&nbsp;<span class="keyword" id="8025387">range</span>&nbsp;<span class="ident" id="8025393">as</span><span class="op" id="8025395">.</span><span class="ident" id="8025396">Rhs</span>&nbsp;<span class="op" id="8025400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025404">id</span>&nbsp;<span class="op" id="8025407">:=</span>&nbsp;<span class="ident" id="8025410">v</span><span class="op" id="8025411">.</span><span class="op" id="8025412">(</span><span class="op" id="8025413">*</span><span class="ident" id="8025414">ast</span><span class="op" id="8025417">.</span><span class="ident" id="8025418">Ident</span><span class="op" id="8025423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025427">if</span>&nbsp;<span class="ident" id="8025430">id</span><span class="op" id="8025432">.</span><span class="ident" id="8025433">Obj</span>&nbsp;<span class="op" id="8025437">!=</span>&nbsp;<span class="ident" id="8025440">nil</span>&nbsp;<span class="op" id="8025444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025449">t</span><span class="op" id="8025450">.</span><span class="ident" id="8025451">Errorf</span><span class="op" id="8025457">(</span><span class="string" id="8025458">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8025486">,</span>&nbsp;<span class="ident" id="8025488">id</span><span class="op" id="8025490">.</span><span class="ident" id="8025491">Name</span><span class="op" id="8025495">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025505">for</span>&nbsp;<span class="ident" id="8025509">_</span><span class="op" id="8025510">,</span>&nbsp;<span class="ident" id="8025512">v</span>&nbsp;<span class="op" id="8025514">:=</span>&nbsp;<span class="keyword" id="8025517">range</span>&nbsp;<span class="ident" id="8025523">as</span><span class="op" id="8025525">.</span><span class="ident" id="8025526">Lhs</span>&nbsp;<span class="op" id="8025530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025534">id</span>&nbsp;<span class="op" id="8025537">:=</span>&nbsp;<span class="ident" id="8025540">v</span><span class="op" id="8025541">.</span><span class="op" id="8025542">(</span><span class="op" id="8025543">*</span><span class="ident" id="8025544">ast</span><span class="op" id="8025547">.</span><span class="ident" id="8025548">Ident</span><span class="op" id="8025553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025557">if</span>&nbsp;<span class="ident" id="8025560">id</span><span class="op" id="8025562">.</span><span class="ident" id="8025563">Obj</span>&nbsp;<span class="op" id="8025567">==</span>&nbsp;<span class="ident" id="8025570">nil</span>&nbsp;<span class="op" id="8025574">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025579">t</span><span class="op" id="8025580">.</span><span class="ident" id="8025581">Errorf</span><span class="op" id="8025587">(</span><span class="string" id="8025588">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8025622">,</span>&nbsp;<span class="ident" id="8025624">id</span><span class="op" id="8025626">.</span><span class="ident" id="8025627">Name</span><span class="op" id="8025631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025638">}</span><br>
<span class="lineno"></span><span class="op" id="8025640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8025643">func</span>&nbsp;<span class="ident" id="8025648">TestVarScope</span><span class="op" id="8025660">(</span><span class="ident" id="8025661">t</span>&nbsp;<span class="op" id="8025663">*</span><span class="ident" id="8025664">testing</span><span class="op" id="8025671">.</span><span class="ident" id="8025672">T</span><span class="op" id="8025673">)</span>&nbsp;<span class="op" id="8025675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025678">f</span><span class="op" id="8025679">,</span>&nbsp;<span class="ident" id="8025681">err</span>&nbsp;<span class="op" id="8025685">:=</span>&nbsp;<span class="ident" id="8025688">ParseFile</span><span class="op" id="8025697">(</span><span class="ident" id="8025698">fset</span><span class="op" id="8025702">,</span>&nbsp;<span class="string" id="8025704">&#34;&#34;</span><span class="op" id="8025706">,</span>&nbsp;<span class="string" id="8025708">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8025755">,</span>&nbsp;<span class="num" id="8025757">0</span><span class="op" id="8025758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025761">if</span>&nbsp;<span class="ident" id="8025764">err</span>&nbsp;<span class="op" id="8025768">!=</span>&nbsp;<span class="ident" id="8025771">nil</span>&nbsp;<span class="op" id="8025775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025779">t</span><span class="op" id="8025780">.</span><span class="ident" id="8025781">Fatal</span><span class="op" id="8025786">(</span><span class="ident" id="8025787">err</span><span class="op" id="8025790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025793">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8025797">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025848">as</span>&nbsp;<span class="op" id="8025851">:=</span>&nbsp;<span class="ident" id="8025854">f</span><span class="op" id="8025855">.</span><span class="ident" id="8025856">Decls</span><span class="op" id="8025861">[</span><span class="num" id="8025862">0</span><span class="op" id="8025863">]</span><span class="op" id="8025864">.</span><span class="op" id="8025865">(</span><span class="op" id="8025866">*</span><span class="ident" id="8025867">ast</span><span class="op" id="8025870">.</span><span class="ident" id="8025871">FuncDecl</span><span class="op" id="8025879">)</span><span class="op" id="8025880">.</span><span class="ident" id="8025881">Body</span><span class="op" id="8025885">.</span><span class="ident" id="8025886">List</span><span class="op" id="8025890">[</span><span class="num" id="8025891">0</span><span class="op" id="8025892">]</span><span class="op" id="8025893">.</span><span class="op" id="8025894">(</span><span class="op" id="8025895">*</span><span class="ident" id="8025896">ast</span><span class="op" id="8025899">.</span><span class="ident" id="8025900">DeclStmt</span><span class="op" id="8025908">)</span><span class="op" id="8025909">.</span><span class="ident" id="8025910">Decl</span><span class="op" id="8025914">.</span><span class="op" id="8025915">(</span><span class="op" id="8025916">*</span><span class="ident" id="8025917">ast</span><span class="op" id="8025920">.</span><span class="ident" id="8025921">GenDecl</span><span class="op" id="8025928">)</span><span class="op" id="8025929">.</span><span class="ident" id="8025930">Specs</span><span class="op" id="8025935">[</span><span class="num" id="8025936">0</span><span class="op" id="8025937">]</span><span class="op" id="8025938">.</span><span class="op" id="8025939">(</span><span class="op" id="8025940">*</span><span class="ident" id="8025941">ast</span><span class="op" id="8025944">.</span><span class="ident" id="8025945">ValueSpec</span><span class="op" id="8025954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025957">for</span>&nbsp;<span class="ident" id="8025961">_</span><span class="op" id="8025962">,</span>&nbsp;<span class="ident" id="8025964">v</span>&nbsp;<span class="op" id="8025966">:=</span>&nbsp;<span class="keyword" id="8025969">range</span>&nbsp;<span class="ident" id="8025975">as</span><span class="op" id="8025977">.</span><span class="ident" id="8025978">Values</span>&nbsp;<span class="op" id="8025985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025989">id</span>&nbsp;<span class="op" id="8025992">:=</span>&nbsp;<span class="ident" id="8025995">v</span><span class="op" id="8025996">.</span><span class="op" id="8025997">(</span><span class="op" id="8025998">*</span><span class="ident" id="8025999">ast</span><span class="op" id="8026002">.</span><span class="ident" id="8026003">Ident</span><span class="op" id="8026008">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026012">if</span>&nbsp;<span class="ident" id="8026015">id</span><span class="op" id="8026017">.</span><span class="ident" id="8026018">Obj</span>&nbsp;<span class="op" id="8026022">!=</span>&nbsp;<span class="ident" id="8026025">nil</span>&nbsp;<span class="op" id="8026029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026034">t</span><span class="op" id="8026035">.</span><span class="ident" id="8026036">Errorf</span><span class="op" id="8026042">(</span><span class="string" id="8026043">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8026071">,</span>&nbsp;<span class="ident" id="8026073">id</span><span class="op" id="8026075">.</span><span class="ident" id="8026076">Name</span><span class="op" id="8026080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026090">for</span>&nbsp;<span class="ident" id="8026094">_</span><span class="op" id="8026095">,</span>&nbsp;<span class="ident" id="8026097">id</span>&nbsp;<span class="op" id="8026100">:=</span>&nbsp;<span class="keyword" id="8026103">range</span>&nbsp;<span class="ident" id="8026109">as</span><span class="op" id="8026111">.</span><span class="ident" id="8026112">Names</span>&nbsp;<span class="op" id="8026118">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026122">if</span>&nbsp;<span class="ident" id="8026125">id</span><span class="op" id="8026127">.</span><span class="ident" id="8026128">Obj</span>&nbsp;<span class="op" id="8026132">==</span>&nbsp;<span class="ident" id="8026135">nil</span>&nbsp;<span class="op" id="8026139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026144">t</span><span class="op" id="8026145">.</span><span class="ident" id="8026146">Errorf</span><span class="op" id="8026152">(</span><span class="string" id="8026153">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8026187">,</span>&nbsp;<span class="ident" id="8026189">id</span><span class="op" id="8026191">.</span><span class="ident" id="8026192">Name</span><span class="op" id="8026196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026203">}</span><br>
<span class="lineno"></span><span class="op" id="8026205">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="8026208">func</span>&nbsp;<span class="ident" id="8026213">TestObjects</span><span class="op" id="8026224">(</span><span class="ident" id="8026225">t</span>&nbsp;<span class="op" id="8026227">*</span><span class="ident" id="8026228">testing</span><span class="op" id="8026235">.</span><span class="ident" id="8026236">T</span><span class="op" id="8026237">)</span>&nbsp;<span class="op" id="8026239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026242">const</span>&nbsp;<span class="ident" id="8026248">src</span>&nbsp;<span class="op" id="8026252">=</span>&nbsp;<span class="string" id="8026254">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026345">f</span><span class="op" id="8026346">,</span>&nbsp;<span class="ident" id="8026348">err</span>&nbsp;<span class="op" id="8026352">:=</span>&nbsp;<span class="ident" id="8026355">ParseFile</span><span class="op" id="8026364">(</span><span class="ident" id="8026365">fset</span><span class="op" id="8026369">,</span>&nbsp;<span class="string" id="8026371">&#34;&#34;</span><span class="op" id="8026373">,</span>&nbsp;<span class="ident" id="8026375">src</span><span class="op" id="8026378">,</span>&nbsp;<span class="num" id="8026380">0</span><span class="op" id="8026381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026384">if</span>&nbsp;<span class="ident" id="8026387">err</span>&nbsp;<span class="op" id="8026391">!=</span>&nbsp;<span class="ident" id="8026394">nil</span>&nbsp;<span class="op" id="8026398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026402">t</span><span class="op" id="8026403">.</span><span class="ident" id="8026404">Fatal</span><span class="op" id="8026409">(</span><span class="ident" id="8026410">err</span><span class="op" id="8026413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026416">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026420">objects</span>&nbsp;<span class="op" id="8026428">:=</span>&nbsp;<span class="keyword" id="8026431">map</span><span class="op" id="8026434">[</span><span class="builtintype" id="8026435">string</span><span class="op" id="8026441">]</span><span class="ident" id="8026442">ast</span><span class="op" id="8026445">.</span><span class="ident" id="8026446">ObjKind</span><span class="op" id="8026453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026457">&#34;p&#34;</span><span class="op" id="8026460">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8026464">ast</span><span class="op" id="8026467">.</span><span class="ident" id="8026468">Bad</span><span class="op" id="8026471">,</span>&nbsp;<span class="comment" id="8026473">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026493">&#34;fmt&#34;</span><span class="op" id="8026498">:</span>&nbsp;<span class="ident" id="8026500">ast</span><span class="op" id="8026503">.</span><span class="ident" id="8026504">Bad</span><span class="op" id="8026507">,</span>&nbsp;<span class="comment" id="8026509">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026531">&#34;pi&#34;</span><span class="op" id="8026535">:</span>&nbsp;&nbsp;<span class="ident" id="8026538">ast</span><span class="op" id="8026541">.</span><span class="ident" id="8026542">Con</span><span class="op" id="8026545">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026549">&#34;T&#34;</span><span class="op" id="8026552">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8026556">ast</span><span class="op" id="8026559">.</span><span class="ident" id="8026560">Typ</span><span class="op" id="8026563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026567">&#34;x&#34;</span><span class="op" id="8026570">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8026574">ast</span><span class="op" id="8026577">.</span><span class="ident" id="8026578">Var</span><span class="op" id="8026581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026585">&#34;int&#34;</span><span class="op" id="8026590">:</span>&nbsp;<span class="ident" id="8026592">ast</span><span class="op" id="8026595">.</span><span class="ident" id="8026596">Bad</span><span class="op" id="8026599">,</span>&nbsp;<span class="comment" id="8026601">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026623">&#34;f&#34;</span><span class="op" id="8026626">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8026630">ast</span><span class="op" id="8026633">.</span><span class="ident" id="8026634">Fun</span><span class="op" id="8026637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026641">&#34;L&#34;</span><span class="op" id="8026644">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8026648">ast</span><span class="op" id="8026651">.</span><span class="ident" id="8026652">Lbl</span><span class="op" id="8026655">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026662">ast</span><span class="op" id="8026665">.</span><span class="ident" id="8026666">Inspect</span><span class="op" id="8026673">(</span><span class="ident" id="8026674">f</span><span class="op" id="8026675">,</span>&nbsp;<span class="keyword" id="8026677">func</span><span class="op" id="8026681">(</span><span class="ident" id="8026682">n</span>&nbsp;<span class="ident" id="8026684">ast</span><span class="op" id="8026687">.</span><span class="ident" id="8026688">Node</span><span class="op" id="8026692">)</span>&nbsp;<span class="builtintype" id="8026694">bool</span>&nbsp;<span class="op" id="8026699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026703">if</span>&nbsp;<span class="ident" id="8026706">ident</span><span class="op" id="8026711">,</span>&nbsp;<span class="ident" id="8026713">ok</span>&nbsp;<span class="op" id="8026716">:=</span>&nbsp;<span class="ident" id="8026719">n</span><span class="op" id="8026720">.</span><span class="op" id="8026721">(</span><span class="op" id="8026722">*</span><span class="ident" id="8026723">ast</span><span class="op" id="8026726">.</span><span class="ident" id="8026727">Ident</span><span class="op" id="8026732">)</span><span class="op" id="8026733">;</span>&nbsp;<span class="ident" id="8026735">ok</span>&nbsp;<span class="op" id="8026738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026743">obj</span>&nbsp;<span class="op" id="8026747">:=</span>&nbsp;<span class="ident" id="8026750">ident</span><span class="op" id="8026755">.</span><span class="ident" id="8026756">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026763">if</span>&nbsp;<span class="ident" id="8026766">obj</span>&nbsp;<span class="op" id="8026770">==</span>&nbsp;<span class="ident" id="8026773">nil</span>&nbsp;<span class="op" id="8026777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026783">if</span>&nbsp;<span class="ident" id="8026786">objects</span><span class="op" id="8026793">[</span><span class="ident" id="8026794">ident</span><span class="op" id="8026799">.</span><span class="ident" id="8026800">Name</span><span class="op" id="8026804">]</span>&nbsp;<span class="op" id="8026806">!=</span>&nbsp;<span class="ident" id="8026809">ast</span><span class="op" id="8026812">.</span><span class="ident" id="8026813">Bad</span>&nbsp;<span class="op" id="8026817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026824">t</span><span class="op" id="8026825">.</span><span class="ident" id="8026826">Errorf</span><span class="op" id="8026832">(</span><span class="string" id="8026833">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="8026851">,</span>&nbsp;<span class="ident" id="8026853">ident</span><span class="op" id="8026858">.</span><span class="ident" id="8026859">Name</span><span class="op" id="8026863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026875">return</span>&nbsp;<span class="builtintype" id="8026882">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026895">if</span>&nbsp;<span class="ident" id="8026898">obj</span><span class="op" id="8026901">.</span><span class="ident" id="8026902">Name</span>&nbsp;<span class="op" id="8026907">!=</span>&nbsp;<span class="ident" id="8026910">ident</span><span class="op" id="8026915">.</span><span class="ident" id="8026916">Name</span>&nbsp;<span class="op" id="8026921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026927">t</span><span class="op" id="8026928">.</span><span class="ident" id="8026929">Errorf</span><span class="op" id="8026935">(</span><span class="string" id="8026936">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8026987">,</span>&nbsp;<span class="ident" id="8026989">obj</span><span class="op" id="8026992">.</span><span class="ident" id="8026993">Name</span><span class="op" id="8026997">,</span>&nbsp;<span class="ident" id="8026999">ident</span><span class="op" id="8027004">.</span><span class="ident" id="8027005">Name</span><span class="op" id="8027009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027019">kind</span>&nbsp;<span class="op" id="8027024">:=</span>&nbsp;<span class="ident" id="8027027">objects</span><span class="op" id="8027034">[</span><span class="ident" id="8027035">ident</span><span class="op" id="8027040">.</span><span class="ident" id="8027041">Name</span><span class="op" id="8027045">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027050">if</span>&nbsp;<span class="ident" id="8027053">obj</span><span class="op" id="8027056">.</span><span class="ident" id="8027057">Kind</span>&nbsp;<span class="op" id="8027062">!=</span>&nbsp;<span class="ident" id="8027065">kind</span>&nbsp;<span class="op" id="8027070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027076">t</span><span class="op" id="8027077">.</span><span class="ident" id="8027078">Errorf</span><span class="op" id="8027084">(</span><span class="string" id="8027085">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8027113">,</span>&nbsp;<span class="ident" id="8027115">ident</span><span class="op" id="8027120">.</span><span class="ident" id="8027121">Name</span><span class="op" id="8027125">,</span>&nbsp;<span class="ident" id="8027127">obj</span><span class="op" id="8027130">.</span><span class="ident" id="8027131">Kind</span><span class="op" id="8027135">,</span>&nbsp;<span class="ident" id="8027137">kind</span><span class="op" id="8027141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027154">return</span>&nbsp;<span class="builtintype" id="8027161">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027167">}</span><span class="op" id="8027168">)</span><br>
<span class="lineno"></span><span class="op" id="8027170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8027173">func</span>&nbsp;<span class="ident" id="8027178">TestUnresolved</span><span class="op" id="8027192">(</span><span class="ident" id="8027193">t</span>&nbsp;<span class="op" id="8027195">*</span><span class="ident" id="8027196">testing</span><span class="op" id="8027203">.</span><span class="ident" id="8027204">T</span><span class="op" id="8027205">)</span>&nbsp;<span class="op" id="8027207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027210">f</span><span class="op" id="8027211">,</span>&nbsp;<span class="ident" id="8027213">err</span>&nbsp;<span class="op" id="8027217">:=</span>&nbsp;<span class="ident" id="8027220">ParseFile</span><span class="op" id="8027229">(</span><span class="ident" id="8027230">fset</span><span class="op" id="8027234">,</span>&nbsp;<span class="string" id="8027236">&#34;&#34;</span><span class="op" id="8027238">,</span>&nbsp;<span class="string" id="8027240">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="8027718">,</span>&nbsp;<span class="num" id="8027720">0</span><span class="op" id="8027721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027724">if</span>&nbsp;<span class="ident" id="8027727">err</span>&nbsp;<span class="op" id="8027731">!=</span>&nbsp;<span class="ident" id="8027734">nil</span>&nbsp;<span class="op" id="8027738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027742">t</span><span class="op" id="8027743">.</span><span class="ident" id="8027744">Fatal</span><span class="op" id="8027749">(</span><span class="ident" id="8027750">err</span><span class="op" id="8027753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027756">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027760">want</span>&nbsp;<span class="op" id="8027765">:=</span>&nbsp;<span class="string" id="8027768">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8027775">+</span>&nbsp;<span class="comment" id="8027777">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027786">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8027804">+</span>&nbsp;<span class="comment" id="8027806">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027815">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8027828">+</span>&nbsp;<span class="comment" id="8027830">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027839">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8027850">+</span>&nbsp;<span class="comment" id="8027852">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027861">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8027872">+</span>&nbsp;<span class="comment" id="8027874">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8027883">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027888">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8027895">+</span>&nbsp;<span class="comment" id="8027897">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027906">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8027924">+</span>&nbsp;<span class="comment" id="8027926">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027935">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8027948">+</span>&nbsp;<span class="comment" id="8027950">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027959">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8027970">+</span>&nbsp;<span class="comment" id="8027972">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8027981">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8027992">+</span>&nbsp;<span class="comment" id="8027994">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028003">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028008">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8028015">+</span>&nbsp;<span class="comment" id="8028017">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028026">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8028038">+</span>&nbsp;<span class="comment" id="8028040">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028049">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8028062">+</span>&nbsp;<span class="comment" id="8028064">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028073">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028078">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8028085">+</span>&nbsp;<span class="comment" id="8028087">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028096">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8028114">+</span>&nbsp;<span class="comment" id="8028116">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028125">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="8028134">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028143">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028178">var</span>&nbsp;<span class="ident" id="8028182">buf</span>&nbsp;<span class="ident" id="8028186">bytes</span><span class="op" id="8028191">.</span><span class="ident" id="8028192">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028200">for</span>&nbsp;<span class="ident" id="8028204">_</span><span class="op" id="8028205">,</span>&nbsp;<span class="ident" id="8028207">u</span>&nbsp;<span class="op" id="8028209">:=</span>&nbsp;<span class="keyword" id="8028212">range</span>&nbsp;<span class="ident" id="8028218">f</span><span class="op" id="8028219">.</span><span class="ident" id="8028220">Unresolved</span>&nbsp;<span class="op" id="8028231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028235">buf</span><span class="op" id="8028238">.</span><span class="ident" id="8028239">WriteString</span><span class="op" id="8028250">(</span><span class="ident" id="8028251">u</span><span class="op" id="8028252">.</span><span class="ident" id="8028253">Name</span><span class="op" id="8028257">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028261">buf</span><span class="op" id="8028264">.</span><span class="ident" id="8028265">WriteByte</span><span class="op" id="8028274">(</span><span class="string" id="8028275">&#39;&nbsp;&#39;</span><span class="op" id="8028278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028284">got</span>&nbsp;<span class="op" id="8028288">:=</span>&nbsp;<span class="ident" id="8028291">buf</span><span class="op" id="8028294">.</span><span class="ident" id="8028295">String</span><span class="op" id="8028301">(</span><span class="op" id="8028302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028306">if</span>&nbsp;<span class="ident" id="8028309">got</span>&nbsp;<span class="op" id="8028313">!=</span>&nbsp;<span class="ident" id="8028316">want</span>&nbsp;<span class="op" id="8028321">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028325">t</span><span class="op" id="8028326">.</span><span class="ident" id="8028327">Errorf</span><span class="op" id="8028333">(</span><span class="string" id="8028334">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="8028356">,</span>&nbsp;<span class="ident" id="8028358">got</span><span class="op" id="8028361">,</span>&nbsp;<span class="ident" id="8028363">want</span><span class="op" id="8028367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028370">}</span><br>
<span class="lineno"></span><span class="op" id="8028372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8028375">var</span>&nbsp;<span class="ident" id="8028379">imports</span>&nbsp;<span class="op" id="8028387">=</span>&nbsp;<span class="keyword" id="8028389">map</span><span class="op" id="8028392">[</span><span class="builtintype" id="8028393">string</span><span class="op" id="8028399">]</span><span class="builtintype" id="8028400">bool</span><span class="op" id="8028404">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028407">`&#34;a&#34;`</span><span class="op" id="8028412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028421">true</span><span class="op" id="8028425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028428">&#34;`a`&#34;</span><span class="op" id="8028433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028442">true</span><span class="op" id="8028446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028449">`&#34;a/b&#34;`</span><span class="op" id="8028456">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028463">true</span><span class="op" id="8028467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028470">`&#34;a.b&#34;`</span><span class="op" id="8028477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028484">true</span><span class="op" id="8028488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028491">`&#34;m\x61th&#34;`</span><span class="op" id="8028502">:</span>&nbsp;&nbsp;<span class="builtintype" id="8028505">true</span><span class="op" id="8028509">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028512">`&#34;greek/αβ&#34;`</span><span class="op" id="8028526">:</span>&nbsp;<span class="builtintype" id="8028528">true</span><span class="op" id="8028532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028535">`&#34;&#34;`</span><span class="op" id="8028539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028549">false</span><span class="op" id="8028554">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028558">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028610">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028664">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028707">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8028752">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028805">`&#34;\x00&#34;`</span><span class="op" id="8028813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028819">false</span><span class="op" id="8028824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028827">&#34;`\x00`&#34;</span><span class="op" id="8028835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028841">false</span><span class="op" id="8028846">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028849">`&#34;\x7f&#34;`</span><span class="op" id="8028857">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028863">false</span><span class="op" id="8028868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028871">&#34;`\x7f`&#34;</span><span class="op" id="8028879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028885">false</span><span class="op" id="8028890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028893">`&#34;a!&#34;`</span><span class="op" id="8028899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028907">false</span><span class="op" id="8028912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028915">&#34;`a!`&#34;</span><span class="op" id="8028921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028929">false</span><span class="op" id="8028934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028937">`&#34;a&nbsp;b&#34;`</span><span class="op" id="8028944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028951">false</span><span class="op" id="8028956">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028959">&#34;`a&nbsp;b`&#34;</span><span class="op" id="8028966">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028973">false</span><span class="op" id="8028978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028981">`&#34;a\\b&#34;`</span><span class="op" id="8028989">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8028995">false</span><span class="op" id="8029000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029003">&#34;`a\\b`&#34;</span><span class="op" id="8029011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8029017">false</span><span class="op" id="8029022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029025">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="8029034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8029039">false</span><span class="op" id="8029044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029047">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="8029056">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8029061">false</span><span class="op" id="8029066">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029069">`&#34;\x80\x80&#34;`</span><span class="op" id="8029081">:</span>&nbsp;<span class="builtintype" id="8029083">false</span><span class="op" id="8029088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029091">&#34;`\x80\x80`&#34;</span><span class="op" id="8029103">:</span>&nbsp;<span class="builtintype" id="8029105">false</span><span class="op" id="8029110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029113">`&#34;\xFFFD&#34;`</span><span class="op" id="8029123">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8029127">false</span><span class="op" id="8029132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8029135">&#34;`\xFFFD`&#34;</span><span class="op" id="8029145">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8029149">false</span><span class="op" id="8029154">,</span><br>
<span class="lineno"></span><span class="op" id="8029156">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="8029159">func</span>&nbsp;<span class="ident" id="8029164">TestImports</span><span class="op" id="8029175">(</span><span class="ident" id="8029176">t</span>&nbsp;<span class="op" id="8029178">*</span><span class="ident" id="8029179">testing</span><span class="op" id="8029186">.</span><span class="ident" id="8029187">T</span><span class="op" id="8029188">)</span>&nbsp;<span class="op" id="8029190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029193">for</span>&nbsp;<span class="ident" id="8029197">path</span><span class="op" id="8029201">,</span>&nbsp;<span class="ident" id="8029203">isValid</span>&nbsp;<span class="op" id="8029211">:=</span>&nbsp;<span class="keyword" id="8029214">range</span>&nbsp;<span class="ident" id="8029220">imports</span>&nbsp;<span class="op" id="8029228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029232">src</span>&nbsp;<span class="op" id="8029236">:=</span>&nbsp;<span class="ident" id="8029239">fmt</span><span class="op" id="8029242">.</span><span class="ident" id="8029243">Sprintf</span><span class="op" id="8029250">(</span><span class="string" id="8029251">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="8029273">,</span>&nbsp;<span class="ident" id="8029275">path</span><span class="op" id="8029279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029283">_</span><span class="op" id="8029284">,</span>&nbsp;<span class="ident" id="8029286">err</span>&nbsp;<span class="op" id="8029290">:=</span>&nbsp;<span class="ident" id="8029293">ParseFile</span><span class="op" id="8029302">(</span><span class="ident" id="8029303">fset</span><span class="op" id="8029307">,</span>&nbsp;<span class="string" id="8029309">&#34;&#34;</span><span class="op" id="8029311">,</span>&nbsp;<span class="ident" id="8029313">src</span><span class="op" id="8029316">,</span>&nbsp;<span class="num" id="8029318">0</span><span class="op" id="8029319">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029323">switch</span>&nbsp;<span class="op" id="8029330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029334">case</span>&nbsp;<span class="ident" id="8029339">err</span>&nbsp;<span class="op" id="8029343">!=</span>&nbsp;<span class="ident" id="8029346">nil</span>&nbsp;<span class="op" id="8029350">&amp;&amp;</span>&nbsp;<span class="ident" id="8029353">isValid</span><span class="op" id="8029360">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029365">t</span><span class="op" id="8029366">.</span><span class="ident" id="8029367">Errorf</span><span class="op" id="8029373">(</span><span class="string" id="8029374">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="8029416">,</span>&nbsp;<span class="ident" id="8029418">src</span><span class="op" id="8029421">,</span>&nbsp;<span class="ident" id="8029423">err</span><span class="op" id="8029426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029430">case</span>&nbsp;<span class="ident" id="8029435">err</span>&nbsp;<span class="op" id="8029439">==</span>&nbsp;<span class="ident" id="8029442">nil</span>&nbsp;<span class="op" id="8029446">&amp;&amp;</span>&nbsp;<span class="op" id="8029449">!</span><span class="ident" id="8029450">isValid</span><span class="op" id="8029457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029462">t</span><span class="op" id="8029463">.</span><span class="ident" id="8029464">Errorf</span><span class="op" id="8029470">(</span><span class="string" id="8029471">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="8029514">,</span>&nbsp;<span class="ident" id="8029516">src</span><span class="op" id="8029519">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029526">}</span><br>
<span class="lineno"></span><span class="op" id="8029528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8029531">func</span>&nbsp;<span class="ident" id="8029536">TestCommentGroups</span><span class="op" id="8029553">(</span><span class="ident" id="8029554">t</span>&nbsp;<span class="op" id="8029556">*</span><span class="ident" id="8029557">testing</span><span class="op" id="8029564">.</span><span class="ident" id="8029565">T</span><span class="op" id="8029566">)</span>&nbsp;<span class="op" id="8029568">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029571">f</span><span class="op" id="8029572">,</span>&nbsp;<span class="ident" id="8029574">err</span>&nbsp;<span class="op" id="8029578">:=</span>&nbsp;<span class="ident" id="8029581">ParseFile</span><span class="op" id="8029590">(</span><span class="ident" id="8029591">fset</span><span class="op" id="8029595">,</span>&nbsp;<span class="string" id="8029597">&#34;&#34;</span><span class="op" id="8029599">,</span>&nbsp;<span class="string" id="8029601">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8029913">,</span>&nbsp;<span class="ident" id="8029915">ParseComments</span><span class="op" id="8029928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029931">if</span>&nbsp;<span class="ident" id="8029934">err</span>&nbsp;<span class="op" id="8029938">!=</span>&nbsp;<span class="ident" id="8029941">nil</span>&nbsp;<span class="op" id="8029945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029949">t</span><span class="op" id="8029950">.</span><span class="ident" id="8029951">Fatal</span><span class="op" id="8029956">(</span><span class="ident" id="8029957">err</span><span class="op" id="8029960">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029966">expected</span>&nbsp;<span class="op" id="8029975">:=</span>&nbsp;<span class="op" id="8029978">[</span><span class="op" id="8029979">]</span><span class="op" id="8029980">[</span><span class="op" id="8029981">]</span><span class="builtintype" id="8029982">string</span><span class="op" id="8029988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029992">{</span><span class="string" id="8029993">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="8030003">,</span>&nbsp;<span class="string" id="8030005">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="8030015">,</span>&nbsp;<span class="string" id="8030017">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="8030027">,</span>&nbsp;<span class="string" id="8030029">&#34;//&nbsp;1d&#34;</span><span class="op" id="8030036">}</span><span class="op" id="8030037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030041">{</span><span class="string" id="8030042">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="8030053">,</span>&nbsp;<span class="string" id="8030055">&#34;//&nbsp;2b&#34;</span><span class="op" id="8030062">}</span><span class="op" id="8030063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030067">{</span><span class="string" id="8030068">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="8030078">,</span>&nbsp;<span class="string" id="8030080">&#34;//&nbsp;3b&#34;</span><span class="op" id="8030087">,</span>&nbsp;<span class="string" id="8030089">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="8030099">}</span><span class="op" id="8030100">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030104">{</span><span class="string" id="8030105">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="8030133">}</span><span class="op" id="8030134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030138">{</span><span class="string" id="8030139">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="8030168">}</span><span class="op" id="8030169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030173">{</span><span class="string" id="8030174">&#34;//&nbsp;Output:&#34;</span><span class="op" id="8030186">,</span>&nbsp;<span class="string" id="8030188">&#34;//&nbsp;3&#34;</span><span class="op" id="8030194">,</span>&nbsp;<span class="string" id="8030196">&#34;//&nbsp;5&#34;</span><span class="op" id="8030202">}</span><span class="op" id="8030203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030209">if</span>&nbsp;<span class="builtinfunc" id="8030212">len</span><span class="op" id="8030215">(</span><span class="ident" id="8030216">f</span><span class="op" id="8030217">.</span><span class="ident" id="8030218">Comments</span><span class="op" id="8030226">)</span>&nbsp;<span class="op" id="8030228">!=</span>&nbsp;<span class="builtinfunc" id="8030231">len</span><span class="op" id="8030234">(</span><span class="ident" id="8030235">expected</span><span class="op" id="8030243">)</span>&nbsp;<span class="op" id="8030245">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030249">t</span><span class="op" id="8030250">.</span><span class="ident" id="8030251">Fatalf</span><span class="op" id="8030257">(</span><span class="string" id="8030258">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8030294">,</span>&nbsp;<span class="builtinfunc" id="8030296">len</span><span class="op" id="8030299">(</span><span class="ident" id="8030300">f</span><span class="op" id="8030301">.</span><span class="ident" id="8030302">Comments</span><span class="op" id="8030310">)</span><span class="op" id="8030311">,</span>&nbsp;<span class="builtinfunc" id="8030313">len</span><span class="op" id="8030316">(</span><span class="ident" id="8030317">expected</span><span class="op" id="8030325">)</span><span class="op" id="8030326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030332">for</span>&nbsp;<span class="ident" id="8030336">i</span><span class="op" id="8030337">,</span>&nbsp;<span class="ident" id="8030339">exp</span>&nbsp;<span class="op" id="8030343">:=</span>&nbsp;<span class="keyword" id="8030346">range</span>&nbsp;<span class="ident" id="8030352">expected</span>&nbsp;<span class="op" id="8030361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030365">got</span>&nbsp;<span class="op" id="8030369">:=</span>&nbsp;<span class="ident" id="8030372">f</span><span class="op" id="8030373">.</span><span class="ident" id="8030374">Comments</span><span class="op" id="8030382">[</span><span class="ident" id="8030383">i</span><span class="op" id="8030384">]</span><span class="op" id="8030385">.</span><span class="ident" id="8030386">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030393">if</span>&nbsp;<span class="builtinfunc" id="8030396">len</span><span class="op" id="8030399">(</span><span class="ident" id="8030400">got</span><span class="op" id="8030403">)</span>&nbsp;<span class="op" id="8030405">!=</span>&nbsp;<span class="builtinfunc" id="8030408">len</span><span class="op" id="8030411">(</span><span class="ident" id="8030412">exp</span><span class="op" id="8030415">)</span>&nbsp;<span class="op" id="8030417">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030422">t</span><span class="op" id="8030423">.</span><span class="ident" id="8030424">Errorf</span><span class="op" id="8030430">(</span><span class="string" id="8030431">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8030473">,</span>&nbsp;<span class="builtinfunc" id="8030475">len</span><span class="op" id="8030478">(</span><span class="ident" id="8030479">got</span><span class="op" id="8030482">)</span><span class="op" id="8030483">,</span>&nbsp;<span class="ident" id="8030485">i</span><span class="op" id="8030486">,</span>&nbsp;<span class="builtinfunc" id="8030488">len</span><span class="op" id="8030491">(</span><span class="ident" id="8030492">exp</span><span class="op" id="8030495">)</span><span class="op" id="8030496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030501">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030516">for</span>&nbsp;<span class="ident" id="8030520">j</span><span class="op" id="8030521">,</span>&nbsp;<span class="ident" id="8030523">exp</span>&nbsp;<span class="op" id="8030527">:=</span>&nbsp;<span class="keyword" id="8030530">range</span>&nbsp;<span class="ident" id="8030536">exp</span>&nbsp;<span class="op" id="8030540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030545">got</span>&nbsp;<span class="op" id="8030549">:=</span>&nbsp;<span class="ident" id="8030552">got</span><span class="op" id="8030555">[</span><span class="ident" id="8030556">j</span><span class="op" id="8030557">]</span><span class="op" id="8030558">.</span><span class="ident" id="8030559">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030567">if</span>&nbsp;<span class="ident" id="8030570">got</span>&nbsp;<span class="op" id="8030574">!=</span>&nbsp;<span class="ident" id="8030577">exp</span>&nbsp;<span class="op" id="8030581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030587">t</span><span class="op" id="8030588">.</span><span class="ident" id="8030589">Errorf</span><span class="op" id="8030595">(</span><span class="string" id="8030596">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8030629">,</span>&nbsp;<span class="ident" id="8030631">got</span><span class="op" id="8030634">,</span>&nbsp;<span class="ident" id="8030636">i</span><span class="op" id="8030637">,</span>&nbsp;<span class="ident" id="8030639">exp</span><span class="op" id="8030642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030654">}</span><br>
<span class="lineno">375</span><span class="op" id="8030656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8030659">func</span>&nbsp;<span class="ident" id="8030664">getField</span><span class="op" id="8030672">(</span><span class="ident" id="8030673">file</span>&nbsp;<span class="op" id="8030678">*</span><span class="ident" id="8030679">ast</span><span class="op" id="8030682">.</span><span class="ident" id="8030683">File</span><span class="op" id="8030687">,</span>&nbsp;<span class="ident" id="8030689">fieldname</span>&nbsp;<span class="builtintype" id="8030699">string</span><span class="op" id="8030705">)</span>&nbsp;<span class="op" id="8030707">*</span><span class="ident" id="8030708">ast</span><span class="op" id="8030711">.</span><span class="ident" id="8030712">Field</span>&nbsp;<span class="op" id="8030718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030721">parts</span>&nbsp;<span class="op" id="8030727">:=</span>&nbsp;<span class="ident" id="8030730">strings</span><span class="op" id="8030737">.</span><span class="ident" id="8030738">Split</span><span class="op" id="8030743">(</span><span class="ident" id="8030744">fieldname</span><span class="op" id="8030753">,</span>&nbsp;<span class="string" id="8030755">&#34;.&#34;</span><span class="op" id="8030758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030761">for</span>&nbsp;<span class="ident" id="8030765">_</span><span class="op" id="8030766">,</span>&nbsp;<span class="ident" id="8030768">d</span>&nbsp;<span class="op" id="8030770">:=</span>&nbsp;<span class="keyword" id="8030773">range</span>&nbsp;<span class="ident" id="8030779">file</span><span class="op" id="8030783">.</span><span class="ident" id="8030784">Decls</span>&nbsp;<span class="op" id="8030790">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030794">if</span>&nbsp;<span class="ident" id="8030797">d</span><span class="op" id="8030798">,</span>&nbsp;<span class="ident" id="8030800">ok</span>&nbsp;<span class="op" id="8030803">:=</span>&nbsp;<span class="ident" id="8030806">d</span><span class="op" id="8030807">.</span><span class="op" id="8030808">(</span><span class="op" id="8030809">*</span><span class="ident" id="8030810">ast</span><span class="op" id="8030813">.</span><span class="ident" id="8030814">GenDecl</span><span class="op" id="8030821">)</span><span class="op" id="8030822">;</span>&nbsp;<span class="ident" id="8030824">ok</span>&nbsp;<span class="op" id="8030827">&amp;&amp;</span>&nbsp;<span class="ident" id="8030830">d</span><span class="op" id="8030831">.</span><span class="ident" id="8030832">Tok</span>&nbsp;<span class="op" id="8030836">==</span>&nbsp;<span class="ident" id="8030839">token</span><span class="op" id="8030844">.</span><span class="ident" id="8030845">TYPE</span>&nbsp;<span class="op" id="8030850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030855">for</span>&nbsp;<span class="ident" id="8030859">_</span><span class="op" id="8030860">,</span>&nbsp;<span class="ident" id="8030862">s</span>&nbsp;<span class="op" id="8030864">:=</span>&nbsp;<span class="keyword" id="8030867">range</span>&nbsp;<span class="ident" id="8030873">d</span><span class="op" id="8030874">.</span><span class="ident" id="8030875">Specs</span>&nbsp;<span class="op" id="8030881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030887">if</span>&nbsp;<span class="ident" id="8030890">s</span><span class="op" id="8030891">,</span>&nbsp;<span class="ident" id="8030893">ok</span>&nbsp;<span class="op" id="8030896">:=</span>&nbsp;<span class="ident" id="8030899">s</span><span class="op" id="8030900">.</span><span class="op" id="8030901">(</span><span class="op" id="8030902">*</span><span class="ident" id="8030903">ast</span><span class="op" id="8030906">.</span><span class="ident" id="8030907">TypeSpec</span><span class="op" id="8030915">)</span><span class="op" id="8030916">;</span>&nbsp;<span class="ident" id="8030918">ok</span>&nbsp;<span class="op" id="8030921">&amp;&amp;</span>&nbsp;<span class="ident" id="8030924">s</span><span class="op" id="8030925">.</span><span class="ident" id="8030926">Name</span><span class="op" id="8030930">.</span><span class="ident" id="8030931">Name</span>&nbsp;<span class="op" id="8030936">==</span>&nbsp;<span class="ident" id="8030939">parts</span><span class="op" id="8030944">[</span><span class="num" id="8030945">0</span><span class="op" id="8030946">]</span>&nbsp;<span class="op" id="8030948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030955">if</span>&nbsp;<span class="ident" id="8030958">s</span><span class="op" id="8030959">,</span>&nbsp;<span class="ident" id="8030961">ok</span>&nbsp;<span class="op" id="8030964">:=</span>&nbsp;<span class="ident" id="8030967">s</span><span class="op" id="8030968">.</span><span class="ident" id="8030969">Type</span><span class="op" id="8030973">.</span><span class="op" id="8030974">(</span><span class="op" id="8030975">*</span><span class="ident" id="8030976">ast</span><span class="op" id="8030979">.</span><span class="ident" id="8030980">StructType</span><span class="op" id="8030990">)</span><span class="op" id="8030991">;</span>&nbsp;<span class="ident" id="8030993">ok</span>&nbsp;<span class="op" id="8030996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031004">for</span>&nbsp;<span class="ident" id="8031008">_</span><span class="op" id="8031009">,</span>&nbsp;<span class="ident" id="8031011">f</span>&nbsp;<span class="op" id="8031013">:=</span>&nbsp;<span class="keyword" id="8031016">range</span>&nbsp;<span class="ident" id="8031022">s</span><span class="op" id="8031023">.</span><span class="ident" id="8031024">Fields</span><span class="op" id="8031030">.</span><span class="ident" id="8031031">List</span>&nbsp;<span class="op" id="8031036">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031045">for</span>&nbsp;<span class="ident" id="8031049">_</span><span class="op" id="8031050">,</span>&nbsp;<span class="ident" id="8031052">name</span>&nbsp;<span class="op" id="8031057">:=</span>&nbsp;<span class="keyword" id="8031060">range</span>&nbsp;<span class="ident" id="8031066">f</span><span class="op" id="8031067">.</span><span class="ident" id="8031068">Names</span>&nbsp;<span class="op" id="8031074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031084">if</span>&nbsp;<span class="ident" id="8031087">name</span><span class="op" id="8031091">.</span><span class="ident" id="8031092">Name</span>&nbsp;<span class="op" id="8031097">==</span>&nbsp;<span class="ident" id="8031100">parts</span><span class="op" id="8031105">[</span><span class="num" id="8031106">1</span><span class="op" id="8031107">]</span>&nbsp;<span class="op" id="8031109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031120">return</span>&nbsp;<span class="ident" id="8031127">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031146">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031176">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031182">return</span>&nbsp;<span class="ident" id="8031189">nil</span><br>
<span class="lineno"></span><span class="op" id="8031193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8031196">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="8031270">func</span>&nbsp;<span class="ident" id="8031275">commentText</span><span class="op" id="8031286">(</span><span class="ident" id="8031287">c</span>&nbsp;<span class="op" id="8031289">*</span><span class="ident" id="8031290">ast</span><span class="op" id="8031293">.</span><span class="ident" id="8031294">CommentGroup</span><span class="op" id="8031306">)</span>&nbsp;<span class="builtintype" id="8031308">string</span>&nbsp;<span class="op" id="8031315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031318">var</span>&nbsp;<span class="ident" id="8031322">buf</span>&nbsp;<span class="ident" id="8031326">bytes</span><span class="op" id="8031331">.</span><span class="ident" id="8031332">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031340">if</span>&nbsp;<span class="ident" id="8031343">c</span>&nbsp;<span class="op" id="8031345">!=</span>&nbsp;<span class="ident" id="8031348">nil</span>&nbsp;<span class="op" id="8031352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031356">for</span>&nbsp;<span class="ident" id="8031360">_</span><span class="op" id="8031361">,</span>&nbsp;<span class="ident" id="8031363">c</span>&nbsp;<span class="op" id="8031365">:=</span>&nbsp;<span class="keyword" id="8031368">range</span>&nbsp;<span class="ident" id="8031374">c</span><span class="op" id="8031375">.</span><span class="ident" id="8031376">List</span>&nbsp;<span class="op" id="8031381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031386">buf</span><span class="op" id="8031389">.</span><span class="ident" id="8031390">WriteString</span><span class="op" id="8031401">(</span><span class="ident" id="8031402">c</span><span class="op" id="8031403">.</span><span class="ident" id="8031404">Text</span><span class="op" id="8031408">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031418">return</span>&nbsp;<span class="ident" id="8031425">buf</span><span class="op" id="8031428">.</span><span class="ident" id="8031429">String</span><span class="op" id="8031435">(</span><span class="op" id="8031436">)</span><br>
<span class="lineno"></span><span class="op" id="8031438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8031441">func</span>&nbsp;<span class="ident" id="8031446">checkFieldComments</span><span class="op" id="8031464">(</span><span class="ident" id="8031465">t</span>&nbsp;<span class="op" id="8031467">*</span><span class="ident" id="8031468">testing</span><span class="op" id="8031475">.</span><span class="ident" id="8031476">T</span><span class="op" id="8031477">,</span>&nbsp;<span class="ident" id="8031479">file</span>&nbsp;<span class="op" id="8031484">*</span><span class="ident" id="8031485">ast</span><span class="op" id="8031488">.</span><span class="ident" id="8031489">File</span><span class="op" id="8031493">,</span>&nbsp;<span class="ident" id="8031495">fieldname</span><span class="op" id="8031504">,</span>&nbsp;<span class="ident" id="8031506">lead</span><span class="op" id="8031510">,</span>&nbsp;<span class="ident" id="8031512">line</span>&nbsp;<span class="builtintype" id="8031517">string</span><span class="op" id="8031523">)</span>&nbsp;<span class="op" id="8031525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031528">f</span>&nbsp;<span class="op" id="8031530">:=</span>&nbsp;<span class="ident" id="8031533">getField</span><span class="op" id="8031541">(</span><span class="ident" id="8031542">file</span><span class="op" id="8031546">,</span>&nbsp;<span class="ident" id="8031548">fieldname</span><span class="op" id="8031557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031560">if</span>&nbsp;<span class="ident" id="8031563">f</span>&nbsp;<span class="op" id="8031565">==</span>&nbsp;<span class="ident" id="8031568">nil</span>&nbsp;<span class="op" id="8031572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031576">t</span><span class="op" id="8031577">.</span><span class="ident" id="8031578">Fatalf</span><span class="op" id="8031584">(</span><span class="string" id="8031585">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="8031606">,</span>&nbsp;<span class="ident" id="8031608">fieldname</span><span class="op" id="8031617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031620">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031623">if</span>&nbsp;<span class="ident" id="8031626">got</span>&nbsp;<span class="op" id="8031630">:=</span>&nbsp;<span class="ident" id="8031633">commentText</span><span class="op" id="8031644">(</span><span class="ident" id="8031645">f</span><span class="op" id="8031646">.</span><span class="ident" id="8031647">Doc</span><span class="op" id="8031650">)</span><span class="op" id="8031651">;</span>&nbsp;<span class="ident" id="8031653">got</span>&nbsp;<span class="op" id="8031657">!=</span>&nbsp;<span class="ident" id="8031660">lead</span>&nbsp;<span class="op" id="8031665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031669">t</span><span class="op" id="8031670">.</span><span class="ident" id="8031671">Errorf</span><span class="op" id="8031677">(</span><span class="string" id="8031678">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8031712">,</span>&nbsp;<span class="ident" id="8031714">got</span><span class="op" id="8031717">,</span>&nbsp;<span class="ident" id="8031719">lead</span><span class="op" id="8031723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031729">if</span>&nbsp;<span class="ident" id="8031732">got</span>&nbsp;<span class="op" id="8031736">:=</span>&nbsp;<span class="ident" id="8031739">commentText</span><span class="op" id="8031750">(</span><span class="ident" id="8031751">f</span><span class="op" id="8031752">.</span><span class="ident" id="8031753">Comment</span><span class="op" id="8031760">)</span><span class="op" id="8031761">;</span>&nbsp;<span class="ident" id="8031763">got</span>&nbsp;<span class="op" id="8031767">!=</span>&nbsp;<span class="ident" id="8031770">line</span>&nbsp;<span class="op" id="8031775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031779">t</span><span class="op" id="8031780">.</span><span class="ident" id="8031781">Errorf</span><span class="op" id="8031787">(</span><span class="string" id="8031788">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8031822">,</span>&nbsp;<span class="ident" id="8031824">got</span><span class="op" id="8031827">,</span>&nbsp;<span class="ident" id="8031829">line</span><span class="op" id="8031833">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031836">}</span><br>
<span class="lineno"></span><span class="op" id="8031838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8031841">func</span>&nbsp;<span class="ident" id="8031846">TestLeadAndLineComments</span><span class="op" id="8031869">(</span><span class="ident" id="8031870">t</span>&nbsp;<span class="op" id="8031872">*</span><span class="ident" id="8031873">testing</span><span class="op" id="8031880">.</span><span class="ident" id="8031881">T</span><span class="op" id="8031882">)</span>&nbsp;<span class="op" id="8031884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031887">f</span><span class="op" id="8031888">,</span>&nbsp;<span class="ident" id="8031890">err</span>&nbsp;<span class="op" id="8031894">:=</span>&nbsp;<span class="ident" id="8031897">ParseFile</span><span class="op" id="8031906">(</span><span class="ident" id="8031907">fset</span><span class="op" id="8031911">,</span>&nbsp;<span class="string" id="8031913">&#34;&#34;</span><span class="op" id="8031915">,</span>&nbsp;<span class="string" id="8031917">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8032109">,</span>&nbsp;<span class="ident" id="8032111">ParseComments</span><span class="op" id="8032124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8032127">if</span>&nbsp;<span class="ident" id="8032130">err</span>&nbsp;<span class="op" id="8032134">!=</span>&nbsp;<span class="ident" id="8032137">nil</span>&nbsp;<span class="op" id="8032141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032145">t</span><span class="op" id="8032146">.</span><span class="ident" id="8032147">Fatal</span><span class="op" id="8032152">(</span><span class="ident" id="8032153">err</span><span class="op" id="8032156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8032159">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032162">checkFieldComments</span><span class="op" id="8032180">(</span><span class="ident" id="8032181">t</span><span class="op" id="8032182">,</span>&nbsp;<span class="ident" id="8032184">f</span><span class="op" id="8032185">,</span>&nbsp;<span class="string" id="8032187">&#34;T.F1&#34;</span><span class="op" id="8032193">,</span>&nbsp;<span class="string" id="8032195">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8032220">,</span>&nbsp;<span class="string" id="8032222">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8032247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032250">checkFieldComments</span><span class="op" id="8032268">(</span><span class="ident" id="8032269">t</span><span class="op" id="8032270">,</span>&nbsp;<span class="ident" id="8032272">f</span><span class="op" id="8032273">,</span>&nbsp;<span class="string" id="8032275">&#34;T.F2&#34;</span><span class="op" id="8032281">,</span>&nbsp;<span class="string" id="8032283">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8032305">,</span>&nbsp;<span class="string" id="8032307">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8032327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032330">checkFieldComments</span><span class="op" id="8032348">(</span><span class="ident" id="8032349">t</span><span class="op" id="8032350">,</span>&nbsp;<span class="ident" id="8032352">f</span><span class="op" id="8032353">,</span>&nbsp;<span class="string" id="8032355">&#34;T.f3&#34;</span><span class="op" id="8032361">,</span>&nbsp;<span class="string" id="8032363">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="8032383">,</span>&nbsp;<span class="string" id="8032385">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8032405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032408">ast</span><span class="op" id="8032411">.</span><span class="ident" id="8032412">FileExports</span><span class="op" id="8032423">(</span><span class="ident" id="8032424">f</span><span class="op" id="8032425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032428">checkFieldComments</span><span class="op" id="8032446">(</span><span class="ident" id="8032447">t</span><span class="op" id="8032448">,</span>&nbsp;<span class="ident" id="8032450">f</span><span class="op" id="8032451">,</span>&nbsp;<span class="string" id="8032453">&#34;T.F1&#34;</span><span class="op" id="8032459">,</span>&nbsp;<span class="string" id="8032461">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8032486">,</span>&nbsp;<span class="string" id="8032488">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8032513">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032516">checkFieldComments</span><span class="op" id="8032534">(</span><span class="ident" id="8032535">t</span><span class="op" id="8032536">,</span>&nbsp;<span class="ident" id="8032538">f</span><span class="op" id="8032539">,</span>&nbsp;<span class="string" id="8032541">&#34;T.F2&#34;</span><span class="op" id="8032547">,</span>&nbsp;<span class="string" id="8032549">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8032571">,</span>&nbsp;<span class="string" id="8032573">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8032593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8032596">if</span>&nbsp;<span class="ident" id="8032599">getField</span><span class="op" id="8032607">(</span><span class="ident" id="8032608">f</span><span class="op" id="8032609">,</span>&nbsp;<span class="string" id="8032611">&#34;T.f3&#34;</span><span class="op" id="8032617">)</span>&nbsp;<span class="op" id="8032619">!=</span>&nbsp;<span class="ident" id="8032622">nil</span>&nbsp;<span class="op" id="8032626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8032630">t</span><span class="op" id="8032631">.</span><span class="ident" id="8032632">Error</span><span class="op" id="8032637">(</span><span class="string" id="8032638">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="8032665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8032668">}</span><br>
<span class="lineno"></span><span class="op" id="8032670">}</span>
</div>
</body>
</html>
