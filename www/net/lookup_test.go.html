<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7478820">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7478875">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7478929">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7478980">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="7479044">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7479071">package</span>&nbsp;<span class="ident" id="7479079">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7479084">import</span>&nbsp;<span class="op" id="7479091">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479094">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479102">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479113">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7479123">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7479126">var</span>&nbsp;<span class="ident" id="7479130">testExternal</span>&nbsp;<span class="op" id="7479143">=</span>&nbsp;<span class="ident" id="7479145">flag</span><span class="op" id="7479149">.</span><span class="ident" id="7479150">Bool</span><span class="op" id="7479154">(</span><span class="string" id="7479155">&#34;external&#34;</span><span class="op" id="7479165">,</span>&nbsp;<span class="ident" id="7479167">true</span><span class="op" id="7479171">,</span>&nbsp;<span class="string" id="7479173">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="7479222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7479225">var</span>&nbsp;<span class="ident" id="7479229">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="7479250">=</span>&nbsp;<span class="op" id="7479252">[</span><span class="op" id="7479253">]</span><span class="keyword" id="7479254">struct</span>&nbsp;<span class="op" id="7479261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479264">service</span><span class="op" id="7479271">,</span>&nbsp;<span class="ident" id="7479273">proto</span><span class="op" id="7479278">,</span>&nbsp;<span class="ident" id="7479280">name</span>&nbsp;<span class="builtintype" id="7479285">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479293">cname</span><span class="op" id="7479298">,</span>&nbsp;<span class="ident" id="7479300">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7479314">string</span><br>
<span class="lineno"></span><span class="op" id="7479321">}</span><span class="op" id="7479322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479329">&#34;xmpp-server&#34;</span><span class="op" id="7479342">,</span>&nbsp;<span class="string" id="7479344">&#34;tcp&#34;</span><span class="op" id="7479349">,</span>&nbsp;<span class="string" id="7479351">&#34;google.com&#34;</span><span class="op" id="7479363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479367">&#34;.google.com&#34;</span><span class="op" id="7479380">,</span>&nbsp;<span class="string" id="7479382">&#34;.google.com&#34;</span><span class="op" id="7479395">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479398">}</span><span class="op" id="7479399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479406">&#34;&#34;</span><span class="op" id="7479408">,</span>&nbsp;<span class="string" id="7479410">&#34;&#34;</span><span class="op" id="7479412">,</span>&nbsp;<span class="string" id="7479414">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="7479444">,</span>&nbsp;<span class="comment" id="7479446">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7479474">&#34;.google.com&#34;</span><span class="op" id="7479487">,</span>&nbsp;<span class="string" id="7479489">&#34;.google.com&#34;</span><span class="op" id="7479502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479505">}</span><span class="op" id="7479506">,</span><br>
<span class="lineno">30</span><span class="op" id="7479508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7479511">func</span>&nbsp;<span class="ident" id="7479516">TestLookupGoogleSRV</span><span class="op" id="7479535">(</span><span class="ident" id="7479536">t</span>&nbsp;<span class="op" id="7479538">*</span><span class="ident" id="7479539">testing</span><span class="op" id="7479546">.</span><span class="ident" id="7479547">T</span><span class="op" id="7479548">)</span>&nbsp;<span class="op" id="7479550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479553">if</span>&nbsp;<span class="ident" id="7479556">testing</span><span class="op" id="7479563">.</span><span class="ident" id="7479564">Short</span><span class="op" id="7479569">(</span><span class="op" id="7479570">)</span>&nbsp;<span class="op" id="7479572">||</span>&nbsp;<span class="op" id="7479575">!</span><span class="op" id="7479576">*</span><span class="ident" id="7479577">testExternal</span>&nbsp;<span class="op" id="7479590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479594">t</span><span class="op" id="7479595">.</span><span class="ident" id="7479596">Skip</span><span class="op" id="7479600">(</span><span class="string" id="7479601">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7479642">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479649">for</span>&nbsp;<span class="ident" id="7479653">_</span><span class="op" id="7479654">,</span>&nbsp;<span class="ident" id="7479656">tt</span>&nbsp;<span class="op" id="7479659">:=</span>&nbsp;<span class="keyword" id="7479662">range</span>&nbsp;<span class="ident" id="7479668">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="7479689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479693">cname</span><span class="op" id="7479698">,</span>&nbsp;<span class="ident" id="7479700">srvs</span><span class="op" id="7479704">,</span>&nbsp;<span class="ident" id="7479706">err</span>&nbsp;<span class="op" id="7479710">:=</span>&nbsp;<span class="ident" id="7479713">LookupSRV</span><span class="op" id="7479722">(</span><span class="ident" id="7479723">tt</span><span class="op" id="7479725">.</span><span class="ident" id="7479726">service</span><span class="op" id="7479733">,</span>&nbsp;<span class="ident" id="7479735">tt</span><span class="op" id="7479737">.</span><span class="ident" id="7479738">proto</span><span class="op" id="7479743">,</span>&nbsp;<span class="ident" id="7479745">tt</span><span class="op" id="7479747">.</span><span class="ident" id="7479748">name</span><span class="op" id="7479752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479756">if</span>&nbsp;<span class="ident" id="7479759">err</span>&nbsp;<span class="op" id="7479763">!=</span>&nbsp;<span class="ident" id="7479766">nil</span>&nbsp;<span class="op" id="7479770">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479775">t</span><span class="op" id="7479776">.</span><span class="ident" id="7479777">Fatal</span><span class="op" id="7479782">(</span><span class="ident" id="7479783">err</span><span class="op" id="7479786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479794">if</span>&nbsp;<span class="builtinfunc" id="7479797">len</span><span class="op" id="7479800">(</span><span class="ident" id="7479801">srvs</span><span class="op" id="7479805">)</span>&nbsp;<span class="op" id="7479807">==</span>&nbsp;<span class="num" id="7479810">0</span>&nbsp;<span class="op" id="7479812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479817">t</span><span class="op" id="7479818">.</span><span class="ident" id="7479819">Error</span><span class="op" id="7479824">(</span><span class="string" id="7479825">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7479840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479844">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479848">if</span>&nbsp;<span class="op" id="7479851">!</span><span class="ident" id="7479852">strings</span><span class="op" id="7479859">.</span><span class="ident" id="7479860">Contains</span><span class="op" id="7479868">(</span><span class="ident" id="7479869">cname</span><span class="op" id="7479874">,</span>&nbsp;<span class="ident" id="7479876">tt</span><span class="op" id="7479878">.</span><span class="ident" id="7479879">cname</span><span class="op" id="7479884">)</span>&nbsp;<span class="op" id="7479886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7479891">t</span><span class="op" id="7479892">.</span><span class="ident" id="7479893">Errorf</span><span class="op" id="7479899">(</span><span class="string" id="7479900">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7479917">,</span>&nbsp;<span class="ident" id="7479919">cname</span><span class="op" id="7479924">,</span>&nbsp;<span class="ident" id="7479926">tt</span><span class="op" id="7479928">.</span><span class="ident" id="7479929">cname</span><span class="op" id="7479934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7479938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479942">for</span>&nbsp;<span class="ident" id="7479946">_</span><span class="op" id="7479947">,</span>&nbsp;<span class="ident" id="7479949">srv</span>&nbsp;<span class="op" id="7479953">:=</span>&nbsp;<span class="keyword" id="7479956">range</span>&nbsp;<span class="ident" id="7479962">srvs</span>&nbsp;<span class="op" id="7479967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7479972">if</span>&nbsp;<span class="op" id="7479975">!</span><span class="ident" id="7479976">strings</span><span class="op" id="7479983">.</span><span class="ident" id="7479984">Contains</span><span class="op" id="7479992">(</span><span class="ident" id="7479993">srv</span><span class="op" id="7479996">.</span><span class="ident" id="7479997">Target</span><span class="op" id="7480003">,</span>&nbsp;<span class="ident" id="7480005">tt</span><span class="op" id="7480007">.</span><span class="ident" id="7480008">target</span><span class="op" id="7480014">)</span>&nbsp;<span class="op" id="7480016">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480022">t</span><span class="op" id="7480023">.</span><span class="ident" id="7480024">Errorf</span><span class="op" id="7480030">(</span><span class="string" id="7480031">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="7480068">,</span>&nbsp;<span class="ident" id="7480070">srv</span><span class="op" id="7480073">,</span>&nbsp;<span class="ident" id="7480075">tt</span><span class="op" id="7480077">.</span><span class="ident" id="7480078">target</span><span class="op" id="7480084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480096">}</span><br>
<span class="lineno"></span><span class="op" id="7480098">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7480101">func</span>&nbsp;<span class="ident" id="7480106">TestLookupGmailMX</span><span class="op" id="7480123">(</span><span class="ident" id="7480124">t</span>&nbsp;<span class="op" id="7480126">*</span><span class="ident" id="7480127">testing</span><span class="op" id="7480134">.</span><span class="ident" id="7480135">T</span><span class="op" id="7480136">)</span>&nbsp;<span class="op" id="7480138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480141">if</span>&nbsp;<span class="ident" id="7480144">testing</span><span class="op" id="7480151">.</span><span class="ident" id="7480152">Short</span><span class="op" id="7480157">(</span><span class="op" id="7480158">)</span>&nbsp;<span class="op" id="7480160">||</span>&nbsp;<span class="op" id="7480163">!</span><span class="op" id="7480164">*</span><span class="ident" id="7480165">testExternal</span>&nbsp;<span class="op" id="7480178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480182">t</span><span class="op" id="7480183">.</span><span class="ident" id="7480184">Skip</span><span class="op" id="7480188">(</span><span class="string" id="7480189">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7480230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480233">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480237">mxs</span><span class="op" id="7480240">,</span>&nbsp;<span class="ident" id="7480242">err</span>&nbsp;<span class="op" id="7480246">:=</span>&nbsp;<span class="ident" id="7480249">LookupMX</span><span class="op" id="7480257">(</span><span class="string" id="7480258">&#34;gmail.com&#34;</span><span class="op" id="7480269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480272">if</span>&nbsp;<span class="ident" id="7480275">err</span>&nbsp;<span class="op" id="7480279">!=</span>&nbsp;<span class="ident" id="7480282">nil</span>&nbsp;<span class="op" id="7480286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480290">t</span><span class="op" id="7480291">.</span><span class="ident" id="7480292">Fatal</span><span class="op" id="7480297">(</span><span class="ident" id="7480298">err</span><span class="op" id="7480301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480304">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480307">if</span>&nbsp;<span class="builtinfunc" id="7480310">len</span><span class="op" id="7480313">(</span><span class="ident" id="7480314">mxs</span><span class="op" id="7480317">)</span>&nbsp;<span class="op" id="7480319">==</span>&nbsp;<span class="num" id="7480322">0</span>&nbsp;<span class="op" id="7480324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480328">t</span><span class="op" id="7480329">.</span><span class="ident" id="7480330">Error</span><span class="op" id="7480335">(</span><span class="string" id="7480336">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7480351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480357">for</span>&nbsp;<span class="ident" id="7480361">_</span><span class="op" id="7480362">,</span>&nbsp;<span class="ident" id="7480364">mx</span>&nbsp;<span class="op" id="7480367">:=</span>&nbsp;<span class="keyword" id="7480370">range</span>&nbsp;<span class="ident" id="7480376">mxs</span>&nbsp;<span class="op" id="7480380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480384">if</span>&nbsp;<span class="op" id="7480387">!</span><span class="ident" id="7480388">strings</span><span class="op" id="7480395">.</span><span class="ident" id="7480396">Contains</span><span class="op" id="7480404">(</span><span class="ident" id="7480405">mx</span><span class="op" id="7480407">.</span><span class="ident" id="7480408">Host</span><span class="op" id="7480412">,</span>&nbsp;<span class="string" id="7480414">&#34;.google.com&#34;</span><span class="op" id="7480427">)</span>&nbsp;<span class="op" id="7480429">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480434">t</span><span class="op" id="7480435">.</span><span class="ident" id="7480436">Errorf</span><span class="op" id="7480442">(</span><span class="string" id="7480443">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="7480490">,</span>&nbsp;<span class="ident" id="7480492">mx</span><span class="op" id="7480494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480501">}</span><br>
<span class="lineno"></span><span class="op" id="7480503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7480506">func</span>&nbsp;<span class="ident" id="7480511">TestLookupGmailNS</span><span class="op" id="7480528">(</span><span class="ident" id="7480529">t</span>&nbsp;<span class="op" id="7480531">*</span><span class="ident" id="7480532">testing</span><span class="op" id="7480539">.</span><span class="ident" id="7480540">T</span><span class="op" id="7480541">)</span>&nbsp;<span class="op" id="7480543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480546">if</span>&nbsp;<span class="ident" id="7480549">testing</span><span class="op" id="7480556">.</span><span class="ident" id="7480557">Short</span><span class="op" id="7480562">(</span><span class="op" id="7480563">)</span>&nbsp;<span class="op" id="7480565">||</span>&nbsp;<span class="op" id="7480568">!</span><span class="op" id="7480569">*</span><span class="ident" id="7480570">testExternal</span>&nbsp;<span class="op" id="7480583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480587">t</span><span class="op" id="7480588">.</span><span class="ident" id="7480589">Skip</span><span class="op" id="7480593">(</span><span class="string" id="7480594">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7480635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480642">nss</span><span class="op" id="7480645">,</span>&nbsp;<span class="ident" id="7480647">err</span>&nbsp;<span class="op" id="7480651">:=</span>&nbsp;<span class="ident" id="7480654">LookupNS</span><span class="op" id="7480662">(</span><span class="string" id="7480663">&#34;gmail.com&#34;</span><span class="op" id="7480674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480677">if</span>&nbsp;<span class="ident" id="7480680">err</span>&nbsp;<span class="op" id="7480684">!=</span>&nbsp;<span class="ident" id="7480687">nil</span>&nbsp;<span class="op" id="7480691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480695">t</span><span class="op" id="7480696">.</span><span class="ident" id="7480697">Fatal</span><span class="op" id="7480702">(</span><span class="ident" id="7480703">err</span><span class="op" id="7480706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480712">if</span>&nbsp;<span class="builtinfunc" id="7480715">len</span><span class="op" id="7480718">(</span><span class="ident" id="7480719">nss</span><span class="op" id="7480722">)</span>&nbsp;<span class="op" id="7480724">==</span>&nbsp;<span class="num" id="7480727">0</span>&nbsp;<span class="op" id="7480729">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480733">t</span><span class="op" id="7480734">.</span><span class="ident" id="7480735">Error</span><span class="op" id="7480740">(</span><span class="string" id="7480741">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7480756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480762">for</span>&nbsp;<span class="ident" id="7480766">_</span><span class="op" id="7480767">,</span>&nbsp;<span class="ident" id="7480769">ns</span>&nbsp;<span class="op" id="7480772">:=</span>&nbsp;<span class="keyword" id="7480775">range</span>&nbsp;<span class="ident" id="7480781">nss</span>&nbsp;<span class="op" id="7480785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480789">if</span>&nbsp;<span class="op" id="7480792">!</span><span class="ident" id="7480793">strings</span><span class="op" id="7480800">.</span><span class="ident" id="7480801">Contains</span><span class="op" id="7480809">(</span><span class="ident" id="7480810">ns</span><span class="op" id="7480812">.</span><span class="ident" id="7480813">Host</span><span class="op" id="7480817">,</span>&nbsp;<span class="string" id="7480819">&#34;.google.com&#34;</span><span class="op" id="7480832">)</span>&nbsp;<span class="op" id="7480834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480839">t</span><span class="op" id="7480840">.</span><span class="ident" id="7480841">Errorf</span><span class="op" id="7480847">(</span><span class="string" id="7480848">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="7480895">,</span>&nbsp;<span class="ident" id="7480897">ns</span><span class="op" id="7480899">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7480906">}</span><br>
<span class="lineno"></span><span class="op" id="7480908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7480911">func</span>&nbsp;<span class="ident" id="7480916">TestLookupGmailTXT</span><span class="op" id="7480934">(</span><span class="ident" id="7480935">t</span>&nbsp;<span class="op" id="7480937">*</span><span class="ident" id="7480938">testing</span><span class="op" id="7480945">.</span><span class="ident" id="7480946">T</span><span class="op" id="7480947">)</span>&nbsp;<span class="op" id="7480949">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7480952">if</span>&nbsp;<span class="ident" id="7480955">testing</span><span class="op" id="7480962">.</span><span class="ident" id="7480963">Short</span><span class="op" id="7480968">(</span><span class="op" id="7480969">)</span>&nbsp;<span class="op" id="7480971">||</span>&nbsp;<span class="op" id="7480974">!</span><span class="op" id="7480975">*</span><span class="ident" id="7480976">testExternal</span>&nbsp;<span class="op" id="7480989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7480993">t</span><span class="op" id="7480994">.</span><span class="ident" id="7480995">Skip</span><span class="op" id="7480999">(</span><span class="string" id="7481000">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7481041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481048">txts</span><span class="op" id="7481052">,</span>&nbsp;<span class="ident" id="7481054">err</span>&nbsp;<span class="op" id="7481058">:=</span>&nbsp;<span class="ident" id="7481061">LookupTXT</span><span class="op" id="7481070">(</span><span class="string" id="7481071">&#34;gmail.com&#34;</span><span class="op" id="7481082">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481085">if</span>&nbsp;<span class="ident" id="7481088">err</span>&nbsp;<span class="op" id="7481092">!=</span>&nbsp;<span class="ident" id="7481095">nil</span>&nbsp;<span class="op" id="7481099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481103">t</span><span class="op" id="7481104">.</span><span class="ident" id="7481105">Fatal</span><span class="op" id="7481110">(</span><span class="ident" id="7481111">err</span><span class="op" id="7481114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481120">if</span>&nbsp;<span class="builtinfunc" id="7481123">len</span><span class="op" id="7481126">(</span><span class="ident" id="7481127">txts</span><span class="op" id="7481131">)</span>&nbsp;<span class="op" id="7481133">==</span>&nbsp;<span class="num" id="7481136">0</span>&nbsp;<span class="op" id="7481138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481142">t</span><span class="op" id="7481143">.</span><span class="ident" id="7481144">Error</span><span class="op" id="7481149">(</span><span class="string" id="7481150">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7481165">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481171">for</span>&nbsp;<span class="ident" id="7481175">_</span><span class="op" id="7481176">,</span>&nbsp;<span class="ident" id="7481178">txt</span>&nbsp;<span class="op" id="7481182">:=</span>&nbsp;<span class="keyword" id="7481185">range</span>&nbsp;<span class="ident" id="7481191">txts</span>&nbsp;<span class="op" id="7481196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481200">if</span>&nbsp;<span class="op" id="7481203">!</span><span class="ident" id="7481204">strings</span><span class="op" id="7481211">.</span><span class="ident" id="7481212">Contains</span><span class="op" id="7481220">(</span><span class="ident" id="7481221">txt</span><span class="op" id="7481224">,</span>&nbsp;<span class="string" id="7481226">&#34;spf&#34;</span><span class="op" id="7481231">)</span>&nbsp;<span class="op" id="7481233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481238">t</span><span class="op" id="7481239">.</span><span class="ident" id="7481240">Errorf</span><span class="op" id="7481246">(</span><span class="string" id="7481247">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="7481274">,</span>&nbsp;<span class="ident" id="7481276">txt</span><span class="op" id="7481279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481283">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481286">}</span><br>
<span class="lineno"></span><span class="op" id="7481288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7481291">var</span>&nbsp;<span class="ident" id="7481295">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="7481322">=</span>&nbsp;<span class="op" id="7481324">[</span><span class="op" id="7481325">]</span><span class="keyword" id="7481326">struct</span>&nbsp;<span class="op" id="7481333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481336">addr</span>&nbsp;<span class="builtintype" id="7481341">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481349">name</span>&nbsp;<span class="builtintype" id="7481354">string</span><br>
<span class="lineno"></span><span class="op" id="7481361">}</span><span class="op" id="7481362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481365">{</span><span class="string" id="7481366">&#34;8.8.8.8&#34;</span><span class="op" id="7481375">,</span>&nbsp;<span class="string" id="7481377">&#34;.google.com.&#34;</span><span class="op" id="7481391">}</span><span class="op" id="7481392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481395">{</span><span class="string" id="7481396">&#34;8.8.4.4&#34;</span><span class="op" id="7481405">,</span>&nbsp;<span class="string" id="7481407">&#34;.google.com.&#34;</span><span class="op" id="7481421">}</span><span class="op" id="7481422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481425">{</span><span class="string" id="7481426">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="7481448">,</span>&nbsp;<span class="string" id="7481450">&#34;.google.com.&#34;</span><span class="op" id="7481464">}</span><span class="op" id="7481465">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481468">{</span><span class="string" id="7481469">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="7481491">,</span>&nbsp;<span class="string" id="7481493">&#34;.google.com.&#34;</span><span class="op" id="7481507">}</span><span class="op" id="7481508">,</span><br>
<span class="lineno"></span><span class="op" id="7481510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7481513">func</span>&nbsp;<span class="ident" id="7481518">TestLookupGooglePublicDNSAddr</span><span class="op" id="7481547">(</span><span class="ident" id="7481548">t</span>&nbsp;<span class="op" id="7481550">*</span><span class="ident" id="7481551">testing</span><span class="op" id="7481558">.</span><span class="ident" id="7481559">T</span><span class="op" id="7481560">)</span>&nbsp;<span class="op" id="7481562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481565">if</span>&nbsp;<span class="ident" id="7481568">testing</span><span class="op" id="7481575">.</span><span class="ident" id="7481576">Short</span><span class="op" id="7481581">(</span><span class="op" id="7481582">)</span>&nbsp;<span class="op" id="7481584">||</span>&nbsp;<span class="op" id="7481587">!</span><span class="op" id="7481588">*</span><span class="ident" id="7481589">testExternal</span>&nbsp;<span class="op" id="7481602">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481606">t</span><span class="op" id="7481607">.</span><span class="ident" id="7481608">Skip</span><span class="op" id="7481612">(</span><span class="string" id="7481613">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7481654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481661">for</span>&nbsp;<span class="ident" id="7481665">_</span><span class="op" id="7481666">,</span>&nbsp;<span class="ident" id="7481668">tt</span>&nbsp;<span class="op" id="7481671">:=</span>&nbsp;<span class="keyword" id="7481674">range</span>&nbsp;<span class="ident" id="7481680">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="7481707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481711">names</span><span class="op" id="7481716">,</span>&nbsp;<span class="ident" id="7481718">err</span>&nbsp;<span class="op" id="7481722">:=</span>&nbsp;<span class="ident" id="7481725">LookupAddr</span><span class="op" id="7481735">(</span><span class="ident" id="7481736">tt</span><span class="op" id="7481738">.</span><span class="ident" id="7481739">addr</span><span class="op" id="7481743">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481747">if</span>&nbsp;<span class="ident" id="7481750">err</span>&nbsp;<span class="op" id="7481754">!=</span>&nbsp;<span class="ident" id="7481757">nil</span>&nbsp;<span class="op" id="7481761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481766">t</span><span class="op" id="7481767">.</span><span class="ident" id="7481768">Fatal</span><span class="op" id="7481773">(</span><span class="ident" id="7481774">err</span><span class="op" id="7481777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481785">if</span>&nbsp;<span class="builtinfunc" id="7481788">len</span><span class="op" id="7481791">(</span><span class="ident" id="7481792">names</span><span class="op" id="7481797">)</span>&nbsp;<span class="op" id="7481799">==</span>&nbsp;<span class="num" id="7481802">0</span>&nbsp;<span class="op" id="7481804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481809">t</span><span class="op" id="7481810">.</span><span class="ident" id="7481811">Error</span><span class="op" id="7481816">(</span><span class="string" id="7481817">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7481832">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481840">for</span>&nbsp;<span class="ident" id="7481844">_</span><span class="op" id="7481845">,</span>&nbsp;<span class="ident" id="7481847">name</span>&nbsp;<span class="op" id="7481852">:=</span>&nbsp;<span class="keyword" id="7481855">range</span>&nbsp;<span class="ident" id="7481861">names</span>&nbsp;<span class="op" id="7481867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7481872">if</span>&nbsp;<span class="op" id="7481875">!</span><span class="ident" id="7481876">strings</span><span class="op" id="7481883">.</span><span class="ident" id="7481884">HasSuffix</span><span class="op" id="7481893">(</span><span class="ident" id="7481894">name</span><span class="op" id="7481898">,</span>&nbsp;<span class="ident" id="7481900">tt</span><span class="op" id="7481902">.</span><span class="ident" id="7481903">name</span><span class="op" id="7481907">)</span>&nbsp;<span class="op" id="7481909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7481915">t</span><span class="op" id="7481916">.</span><span class="ident" id="7481917">Errorf</span><span class="op" id="7481923">(</span><span class="string" id="7481924">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="7481961">,</span>&nbsp;<span class="ident" id="7481963">name</span><span class="op" id="7481967">,</span>&nbsp;<span class="ident" id="7481969">tt</span><span class="op" id="7481971">.</span><span class="ident" id="7481972">name</span><span class="op" id="7481976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481981">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7481988">}</span><br>
<span class="lineno"></span><span class="op" id="7481990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7481993">func</span>&nbsp;<span class="ident" id="7481998">TestLookupIANACNAME</span><span class="op" id="7482017">(</span><span class="ident" id="7482018">t</span>&nbsp;<span class="op" id="7482020">*</span><span class="ident" id="7482021">testing</span><span class="op" id="7482028">.</span><span class="ident" id="7482029">T</span><span class="op" id="7482030">)</span>&nbsp;<span class="op" id="7482032">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482035">if</span>&nbsp;<span class="ident" id="7482038">testing</span><span class="op" id="7482045">.</span><span class="ident" id="7482046">Short</span><span class="op" id="7482051">(</span><span class="op" id="7482052">)</span>&nbsp;<span class="op" id="7482054">||</span>&nbsp;<span class="op" id="7482057">!</span><span class="op" id="7482058">*</span><span class="ident" id="7482059">testExternal</span>&nbsp;<span class="op" id="7482072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482076">t</span><span class="op" id="7482077">.</span><span class="ident" id="7482078">Skip</span><span class="op" id="7482082">(</span><span class="string" id="7482083">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7482124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482131">cname</span><span class="op" id="7482136">,</span>&nbsp;<span class="ident" id="7482138">err</span>&nbsp;<span class="op" id="7482142">:=</span>&nbsp;<span class="ident" id="7482145">LookupCNAME</span><span class="op" id="7482156">(</span><span class="string" id="7482157">&#34;www.iana.org&#34;</span><span class="op" id="7482171">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482174">if</span>&nbsp;<span class="ident" id="7482177">err</span>&nbsp;<span class="op" id="7482181">!=</span>&nbsp;<span class="ident" id="7482184">nil</span>&nbsp;<span class="op" id="7482188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482192">t</span><span class="op" id="7482193">.</span><span class="ident" id="7482194">Fatal</span><span class="op" id="7482199">(</span><span class="ident" id="7482200">err</span><span class="op" id="7482203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482209">if</span>&nbsp;<span class="op" id="7482212">!</span><span class="ident" id="7482213">strings</span><span class="op" id="7482220">.</span><span class="ident" id="7482221">HasSuffix</span><span class="op" id="7482230">(</span><span class="ident" id="7482231">cname</span><span class="op" id="7482236">,</span>&nbsp;<span class="string" id="7482238">&#34;.icann.org.&#34;</span><span class="op" id="7482251">)</span>&nbsp;<span class="op" id="7482253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482257">t</span><span class="op" id="7482258">.</span><span class="ident" id="7482259">Errorf</span><span class="op" id="7482265">(</span><span class="string" id="7482266">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="7482312">,</span>&nbsp;<span class="ident" id="7482314">cname</span><span class="op" id="7482319">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482322">}</span><br>
<span class="lineno"></span><span class="op" id="7482324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7482327">func</span>&nbsp;<span class="ident" id="7482332">TestLookupGoogleHost</span><span class="op" id="7482352">(</span><span class="ident" id="7482353">t</span>&nbsp;<span class="op" id="7482355">*</span><span class="ident" id="7482356">testing</span><span class="op" id="7482363">.</span><span class="ident" id="7482364">T</span><span class="op" id="7482365">)</span>&nbsp;<span class="op" id="7482367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482370">if</span>&nbsp;<span class="ident" id="7482373">testing</span><span class="op" id="7482380">.</span><span class="ident" id="7482381">Short</span><span class="op" id="7482386">(</span><span class="op" id="7482387">)</span>&nbsp;<span class="op" id="7482389">||</span>&nbsp;<span class="op" id="7482392">!</span><span class="op" id="7482393">*</span><span class="ident" id="7482394">testExternal</span>&nbsp;<span class="op" id="7482407">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482411">t</span><span class="op" id="7482412">.</span><span class="ident" id="7482413">Skip</span><span class="op" id="7482417">(</span><span class="string" id="7482418">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7482459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482466">addrs</span><span class="op" id="7482471">,</span>&nbsp;<span class="ident" id="7482473">err</span>&nbsp;<span class="op" id="7482477">:=</span>&nbsp;<span class="ident" id="7482480">LookupHost</span><span class="op" id="7482490">(</span><span class="string" id="7482491">&#34;google.com&#34;</span><span class="op" id="7482503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482506">if</span>&nbsp;<span class="ident" id="7482509">err</span>&nbsp;<span class="op" id="7482513">!=</span>&nbsp;<span class="ident" id="7482516">nil</span>&nbsp;<span class="op" id="7482520">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482524">t</span><span class="op" id="7482525">.</span><span class="ident" id="7482526">Fatal</span><span class="op" id="7482531">(</span><span class="ident" id="7482532">err</span><span class="op" id="7482535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482541">if</span>&nbsp;<span class="builtinfunc" id="7482544">len</span><span class="op" id="7482547">(</span><span class="ident" id="7482548">addrs</span><span class="op" id="7482553">)</span>&nbsp;<span class="op" id="7482555">==</span>&nbsp;<span class="num" id="7482558">0</span>&nbsp;<span class="op" id="7482560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482564">t</span><span class="op" id="7482565">.</span><span class="ident" id="7482566">Error</span><span class="op" id="7482571">(</span><span class="string" id="7482572">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7482587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482590">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482593">for</span>&nbsp;<span class="ident" id="7482597">_</span><span class="op" id="7482598">,</span>&nbsp;<span class="ident" id="7482600">addr</span>&nbsp;<span class="op" id="7482605">:=</span>&nbsp;<span class="keyword" id="7482608">range</span>&nbsp;<span class="ident" id="7482614">addrs</span>&nbsp;<span class="op" id="7482620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482624">if</span>&nbsp;<span class="ident" id="7482627">ParseIP</span><span class="op" id="7482634">(</span><span class="ident" id="7482635">addr</span><span class="op" id="7482639">)</span>&nbsp;<span class="op" id="7482641">==</span>&nbsp;<span class="ident" id="7482644">nil</span>&nbsp;<span class="op" id="7482648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482653">t</span><span class="op" id="7482654">.</span><span class="ident" id="7482655">Errorf</span><span class="op" id="7482661">(</span><span class="string" id="7482662">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="7482697">,</span>&nbsp;<span class="ident" id="7482699">addr</span><span class="op" id="7482703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482710">}</span><br>
<span class="lineno">175</span><span class="op" id="7482712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7482715">func</span>&nbsp;<span class="ident" id="7482720">TestLookupGoogleIP</span><span class="op" id="7482738">(</span><span class="ident" id="7482739">t</span>&nbsp;<span class="op" id="7482741">*</span><span class="ident" id="7482742">testing</span><span class="op" id="7482749">.</span><span class="ident" id="7482750">T</span><span class="op" id="7482751">)</span>&nbsp;<span class="op" id="7482753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482756">if</span>&nbsp;<span class="ident" id="7482759">testing</span><span class="op" id="7482766">.</span><span class="ident" id="7482767">Short</span><span class="op" id="7482772">(</span><span class="op" id="7482773">)</span>&nbsp;<span class="op" id="7482775">||</span>&nbsp;<span class="op" id="7482778">!</span><span class="op" id="7482779">*</span><span class="ident" id="7482780">testExternal</span>&nbsp;<span class="op" id="7482793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482797">t</span><span class="op" id="7482798">.</span><span class="ident" id="7482799">Skip</span><span class="op" id="7482803">(</span><span class="string" id="7482804">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="7482845">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482852">ips</span><span class="op" id="7482855">,</span>&nbsp;<span class="ident" id="7482857">err</span>&nbsp;<span class="op" id="7482861">:=</span>&nbsp;<span class="ident" id="7482864">LookupIP</span><span class="op" id="7482872">(</span><span class="string" id="7482873">&#34;google.com&#34;</span><span class="op" id="7482885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482888">if</span>&nbsp;<span class="ident" id="7482891">err</span>&nbsp;<span class="op" id="7482895">!=</span>&nbsp;<span class="ident" id="7482898">nil</span>&nbsp;<span class="op" id="7482902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482906">t</span><span class="op" id="7482907">.</span><span class="ident" id="7482908">Fatal</span><span class="op" id="7482913">(</span><span class="ident" id="7482914">err</span><span class="op" id="7482917">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482923">if</span>&nbsp;<span class="builtinfunc" id="7482926">len</span><span class="op" id="7482929">(</span><span class="ident" id="7482930">ips</span><span class="op" id="7482933">)</span>&nbsp;<span class="op" id="7482935">==</span>&nbsp;<span class="num" id="7482938">0</span>&nbsp;<span class="op" id="7482940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7482944">t</span><span class="op" id="7482945">.</span><span class="ident" id="7482946">Error</span><span class="op" id="7482951">(</span><span class="string" id="7482952">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="7482967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7482970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7482973">for</span>&nbsp;<span class="ident" id="7482977">_</span><span class="op" id="7482978">,</span>&nbsp;<span class="ident" id="7482980">ip</span>&nbsp;<span class="op" id="7482983">:=</span>&nbsp;<span class="keyword" id="7482986">range</span>&nbsp;<span class="ident" id="7482992">ips</span>&nbsp;<span class="op" id="7482996">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7483000">if</span>&nbsp;<span class="ident" id="7483003">ip</span><span class="op" id="7483005">.</span><span class="ident" id="7483006">To4</span><span class="op" id="7483009">(</span><span class="op" id="7483010">)</span>&nbsp;<span class="op" id="7483012">==</span>&nbsp;<span class="ident" id="7483015">nil</span>&nbsp;<span class="op" id="7483019">&amp;&amp;</span>&nbsp;<span class="ident" id="7483022">ip</span><span class="op" id="7483024">.</span><span class="ident" id="7483025">To16</span><span class="op" id="7483029">(</span><span class="op" id="7483030">)</span>&nbsp;<span class="op" id="7483032">==</span>&nbsp;<span class="ident" id="7483035">nil</span>&nbsp;<span class="op" id="7483039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7483044">t</span><span class="op" id="7483045">.</span><span class="ident" id="7483046">Errorf</span><span class="op" id="7483052">(</span><span class="string" id="7483053">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="7483081">,</span>&nbsp;<span class="ident" id="7483083">ip</span><span class="op" id="7483085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483092">}</span><br>
<span class="lineno"></span><span class="op" id="7483094">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7483097">var</span>&nbsp;<span class="ident" id="7483101">revAddrTests</span>&nbsp;<span class="op" id="7483114">=</span>&nbsp;<span class="op" id="7483116">[</span><span class="op" id="7483117">]</span><span class="keyword" id="7483118">struct</span>&nbsp;<span class="op" id="7483125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7483128">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7483138">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7483146">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7483156">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7483164">ErrPrefix</span>&nbsp;<span class="builtintype" id="7483174">string</span><br>
<span class="lineno">200</span><span class="op" id="7483181">}</span><span class="op" id="7483182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483185">{</span><span class="string" id="7483186">&#34;1.2.3.4&#34;</span><span class="op" id="7483195">,</span>&nbsp;<span class="string" id="7483197">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="7483220">,</span>&nbsp;<span class="string" id="7483222">&#34;&#34;</span><span class="op" id="7483224">}</span><span class="op" id="7483225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483228">{</span><span class="string" id="7483229">&#34;245.110.36.114&#34;</span><span class="op" id="7483245">,</span>&nbsp;<span class="string" id="7483247">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="7483277">,</span>&nbsp;<span class="string" id="7483279">&#34;&#34;</span><span class="op" id="7483281">}</span><span class="op" id="7483282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483285">{</span><span class="string" id="7483286">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="7483306">,</span>&nbsp;<span class="string" id="7483308">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="7483335">,</span>&nbsp;<span class="string" id="7483337">&#34;&#34;</span><span class="op" id="7483339">}</span><span class="op" id="7483340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483343">{</span><span class="string" id="7483344">&#34;::1&#34;</span><span class="op" id="7483349">,</span>&nbsp;<span class="string" id="7483351">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="7483426">,</span>&nbsp;<span class="string" id="7483428">&#34;&#34;</span><span class="op" id="7483430">}</span><span class="op" id="7483431">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483434">{</span><span class="string" id="7483435">&#34;1::&#34;</span><span class="op" id="7483440">,</span>&nbsp;<span class="string" id="7483442">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="7483517">,</span>&nbsp;<span class="string" id="7483519">&#34;&#34;</span><span class="op" id="7483521">}</span><span class="op" id="7483522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483525">{</span><span class="string" id="7483526">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="7483546">,</span>&nbsp;<span class="string" id="7483548">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="7483623">,</span>&nbsp;<span class="string" id="7483625">&#34;&#34;</span><span class="op" id="7483627">}</span><span class="op" id="7483628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483631">{</span><span class="string" id="7483632">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="7483671">,</span>&nbsp;<span class="string" id="7483673">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="7483748">,</span>&nbsp;<span class="string" id="7483750">&#34;&#34;</span><span class="op" id="7483752">}</span><span class="op" id="7483753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483756">{</span><span class="string" id="7483757">&#34;1.2.3&#34;</span><span class="op" id="7483764">,</span>&nbsp;<span class="string" id="7483766">&#34;&#34;</span><span class="op" id="7483768">,</span>&nbsp;<span class="string" id="7483770">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7483792">}</span><span class="op" id="7483793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483796">{</span><span class="string" id="7483797">&#34;1.2.3.4.5&#34;</span><span class="op" id="7483808">,</span>&nbsp;<span class="string" id="7483810">&#34;&#34;</span><span class="op" id="7483812">,</span>&nbsp;<span class="string" id="7483814">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7483836">}</span><span class="op" id="7483837">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483840">{</span><span class="string" id="7483841">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="7483867">,</span>&nbsp;<span class="string" id="7483869">&#34;&#34;</span><span class="op" id="7483871">,</span>&nbsp;<span class="string" id="7483873">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7483895">}</span><span class="op" id="7483896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7483899">{</span><span class="string" id="7483900">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="7483931">,</span>&nbsp;<span class="string" id="7483933">&#34;&#34;</span><span class="op" id="7483935">,</span>&nbsp;<span class="string" id="7483937">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="7483959">}</span><span class="op" id="7483960">,</span><br>
<span class="lineno"></span><span class="op" id="7483962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7483965">func</span>&nbsp;<span class="ident" id="7483970">TestReverseAddress</span><span class="op" id="7483988">(</span><span class="ident" id="7483989">t</span>&nbsp;<span class="op" id="7483991">*</span><span class="ident" id="7483992">testing</span><span class="op" id="7483999">.</span><span class="ident" id="7484000">T</span><span class="op" id="7484001">)</span>&nbsp;<span class="op" id="7484003">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7484006">for</span>&nbsp;<span class="ident" id="7484010">i</span><span class="op" id="7484011">,</span>&nbsp;<span class="ident" id="7484013">tt</span>&nbsp;<span class="op" id="7484016">:=</span>&nbsp;<span class="keyword" id="7484019">range</span>&nbsp;<span class="ident" id="7484025">revAddrTests</span>&nbsp;<span class="op" id="7484038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7484042">a</span><span class="op" id="7484043">,</span>&nbsp;<span class="ident" id="7484045">err</span>&nbsp;<span class="op" id="7484049">:=</span>&nbsp;<span class="ident" id="7484052">reverseaddr</span><span class="op" id="7484063">(</span><span class="ident" id="7484064">tt</span><span class="op" id="7484066">.</span><span class="ident" id="7484067">Addr</span><span class="op" id="7484071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7484075">if</span>&nbsp;<span class="builtinfunc" id="7484078">len</span><span class="op" id="7484081">(</span><span class="ident" id="7484082">tt</span><span class="op" id="7484084">.</span><span class="ident" id="7484085">ErrPrefix</span><span class="op" id="7484094">)</span>&nbsp;<span class="op" id="7484096">&gt;</span>&nbsp;<span class="num" id="7484098">0</span>&nbsp;<span class="op" id="7484100">&amp;&amp;</span>&nbsp;<span class="ident" id="7484103">err</span>&nbsp;<span class="op" id="7484107">==</span>&nbsp;<span class="ident" id="7484110">nil</span>&nbsp;<span class="op" id="7484114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7484119">t</span><span class="op" id="7484120">.</span><span class="ident" id="7484121">Errorf</span><span class="op" id="7484127">(</span><span class="string" id="7484128">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="7484165">,</span>&nbsp;<span class="ident" id="7484167">i</span><span class="op" id="7484168">,</span>&nbsp;<span class="ident" id="7484170">tt</span><span class="op" id="7484172">.</span><span class="ident" id="7484173">ErrPrefix</span><span class="op" id="7484182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7484187">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7484198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7484202">if</span>&nbsp;<span class="builtinfunc" id="7484205">len</span><span class="op" id="7484208">(</span><span class="ident" id="7484209">tt</span><span class="op" id="7484211">.</span><span class="ident" id="7484212">ErrPrefix</span><span class="op" id="7484221">)</span>&nbsp;<span class="op" id="7484223">==</span>&nbsp;<span class="num" id="7484226">0</span>&nbsp;<span class="op" id="7484228">&amp;&amp;</span>&nbsp;<span class="ident" id="7484231">err</span>&nbsp;<span class="op" id="7484235">!=</span>&nbsp;<span class="ident" id="7484238">nil</span>&nbsp;<span class="op" id="7484242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7484247">t</span><span class="op" id="7484248">.</span><span class="ident" id="7484249">Errorf</span><span class="op" id="7484255">(</span><span class="string" id="7484256">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="7484293">,</span>&nbsp;<span class="ident" id="7484295">i</span><span class="op" id="7484296">,</span>&nbsp;<span class="ident" id="7484298">err</span><span class="op" id="7484301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7484305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7484309">if</span>&nbsp;<span class="ident" id="7484312">err</span>&nbsp;<span class="op" id="7484316">!=</span>&nbsp;<span class="ident" id="7484319">nil</span>&nbsp;<span class="op" id="7484323">&amp;&amp;</span>&nbsp;<span class="ident" id="7484326">err</span><span class="op" id="7484329">.</span><span class="op" id="7484330">(</span><span class="op" id="7484331">*</span><span class="ident" id="7484332">DNSError</span><span class="op" id="7484340">)</span><span class="op" id="7484341">.</span><span class="ident" id="7484342">Err</span>&nbsp;<span class="op" id="7484346">!=</span>&nbsp;<span class="ident" id="7484349">tt</span><span class="op" id="7484351">.</span><span class="ident" id="7484352">ErrPrefix</span>&nbsp;<span class="op" id="7484362">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7484367">t</span><span class="op" id="7484368">.</span><span class="ident" id="7484369">Errorf</span><span class="op" id="7484375">(</span><span class="string" id="7484376">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="7484421">,</span>&nbsp;<span class="ident" id="7484423">i</span><span class="op" id="7484424">,</span>&nbsp;<span class="ident" id="7484426">tt</span><span class="op" id="7484428">.</span><span class="ident" id="7484429">ErrPrefix</span><span class="op" id="7484438">,</span>&nbsp;<span class="ident" id="7484440">err</span><span class="op" id="7484443">.</span><span class="op" id="7484444">(</span><span class="op" id="7484445">*</span><span class="ident" id="7484446">DNSError</span><span class="op" id="7484454">)</span><span class="op" id="7484455">.</span><span class="ident" id="7484456">Err</span><span class="op" id="7484459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7484463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7484467">if</span>&nbsp;<span class="ident" id="7484470">a</span>&nbsp;<span class="op" id="7484472">!=</span>&nbsp;<span class="ident" id="7484475">tt</span><span class="op" id="7484477">.</span><span class="ident" id="7484478">Reverse</span>&nbsp;<span class="op" id="7484486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7484491">t</span><span class="op" id="7484492">.</span><span class="ident" id="7484493">Errorf</span><span class="op" id="7484499">(</span><span class="string" id="7484500">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="7484544">,</span>&nbsp;<span class="ident" id="7484546">i</span><span class="op" id="7484547">,</span>&nbsp;<span class="ident" id="7484549">tt</span><span class="op" id="7484551">.</span><span class="ident" id="7484552">Reverse</span><span class="op" id="7484559">,</span>&nbsp;<span class="ident" id="7484561">a</span><span class="op" id="7484562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7484566">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7484569">}</span><br>
<span class="lineno"></span><span class="op" id="7484571">}</span>
</div>
</body>
</html>
