<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html" class="current">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6975714">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6975769">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6975823">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6975874">package</span>&nbsp;<span class="ident" id="6975882">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6975887">import</span>&nbsp;<span class="op" id="6975894">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6975897">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6975907">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6975914">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6975921">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6975932">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6975943">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6975953">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6975956">type</span>&nbsp;<span class="ident" id="6975961">shutdownCodec</span>&nbsp;<span class="keyword" id="6975975">struct</span>&nbsp;<span class="op" id="6975982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6975985">responded</span>&nbsp;<span class="keyword" id="6975995">chan</span>&nbsp;<span class="builtintype" id="6976000">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976005">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6976015">bool</span><br>
<span class="lineno"></span><span class="op" id="6976020">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6976023">func</span>&nbsp;<span class="op" id="6976028">(</span><span class="ident" id="6976029">c</span>&nbsp;<span class="op" id="6976031">*</span><span class="ident" id="6976032">shutdownCodec</span><span class="op" id="6976045">)</span>&nbsp;<span class="ident" id="6976047">WriteRequest</span><span class="op" id="6976059">(</span><span class="op" id="6976060">*</span><span class="ident" id="6976061">Request</span><span class="op" id="6976068">,</span>&nbsp;<span class="keyword" id="6976070">interface</span><span class="op" id="6976079">{</span><span class="op" id="6976080">}</span><span class="op" id="6976081">)</span>&nbsp;<span class="builtintype" id="6976083">error</span>&nbsp;<span class="op" id="6976089">{</span>&nbsp;<span class="keyword" id="6976091">return</span>&nbsp;<span class="ident" id="6976098">nil</span>&nbsp;<span class="op" id="6976102">}</span><br>
<span class="lineno"></span><span class="keyword" id="6976104">func</span>&nbsp;<span class="op" id="6976109">(</span><span class="ident" id="6976110">c</span>&nbsp;<span class="op" id="6976112">*</span><span class="ident" id="6976113">shutdownCodec</span><span class="op" id="6976126">)</span>&nbsp;<span class="ident" id="6976128">ReadResponseBody</span><span class="op" id="6976144">(</span><span class="keyword" id="6976145">interface</span><span class="op" id="6976154">{</span><span class="op" id="6976155">}</span><span class="op" id="6976156">)</span>&nbsp;<span class="builtintype" id="6976158">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976170">{</span>&nbsp;<span class="keyword" id="6976172">return</span>&nbsp;<span class="ident" id="6976179">nil</span>&nbsp;<span class="op" id="6976183">}</span><br>
<span class="lineno"></span><span class="keyword" id="6976185">func</span>&nbsp;<span class="op" id="6976190">(</span><span class="ident" id="6976191">c</span>&nbsp;<span class="op" id="6976193">*</span><span class="ident" id="6976194">shutdownCodec</span><span class="op" id="6976207">)</span>&nbsp;<span class="ident" id="6976209">ReadResponseHeader</span><span class="op" id="6976227">(</span><span class="op" id="6976228">*</span><span class="ident" id="6976229">Response</span><span class="op" id="6976237">)</span>&nbsp;<span class="builtintype" id="6976239">error</span>&nbsp;<span class="op" id="6976245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976248">c</span><span class="op" id="6976249">.</span><span class="ident" id="6976250">responded</span>&nbsp;<span class="op" id="6976260">&lt;-</span>&nbsp;<span class="num" id="6976263">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976266">return</span>&nbsp;<span class="ident" id="6976273">errors</span><span class="op" id="6976279">.</span><span class="ident" id="6976280">New</span><span class="op" id="6976283">(</span><span class="string" id="6976284">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="6976318">)</span><br>
<span class="lineno"></span><span class="op" id="6976320">}</span><br>
<span class="lineno"></span><span class="keyword" id="6976322">func</span>&nbsp;<span class="op" id="6976327">(</span><span class="ident" id="6976328">c</span>&nbsp;<span class="op" id="6976330">*</span><span class="ident" id="6976331">shutdownCodec</span><span class="op" id="6976344">)</span>&nbsp;<span class="ident" id="6976346">Close</span><span class="op" id="6976351">(</span><span class="op" id="6976352">)</span>&nbsp;<span class="builtintype" id="6976354">error</span>&nbsp;<span class="op" id="6976360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976363">c</span><span class="op" id="6976364">.</span><span class="ident" id="6976365">closed</span>&nbsp;<span class="op" id="6976372">=</span>&nbsp;<span class="builtintype" id="6976374">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976380">return</span>&nbsp;<span class="ident" id="6976387">nil</span><br>
<span class="lineno">30</span><span class="op" id="6976391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6976394">func</span>&nbsp;<span class="ident" id="6976399">TestCloseCodec</span><span class="op" id="6976413">(</span><span class="ident" id="6976414">t</span>&nbsp;<span class="op" id="6976416">*</span><span class="ident" id="6976417">testing</span><span class="op" id="6976424">.</span><span class="ident" id="6976425">T</span><span class="op" id="6976426">)</span>&nbsp;<span class="op" id="6976428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976431">codec</span>&nbsp;<span class="op" id="6976437">:=</span>&nbsp;<span class="op" id="6976440">&amp;</span><span class="ident" id="6976441">shutdownCodec</span><span class="op" id="6976454">{</span><span class="ident" id="6976455">responded</span><span class="op" id="6976464">:</span>&nbsp;<span class="builtinfunc" id="6976466">make</span><span class="op" id="6976470">(</span><span class="keyword" id="6976471">chan</span>&nbsp;<span class="builtintype" id="6976476">int</span><span class="op" id="6976479">)</span><span class="op" id="6976480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976483">client</span>&nbsp;<span class="op" id="6976490">:=</span>&nbsp;<span class="ident" id="6976493">NewClientWithCodec</span><span class="op" id="6976511">(</span><span class="ident" id="6976512">codec</span><span class="op" id="6976517">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976520">&lt;-</span><span class="ident" id="6976522">codec</span><span class="op" id="6976527">.</span><span class="ident" id="6976528">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976539">client</span><span class="op" id="6976545">.</span><span class="ident" id="6976546">Close</span><span class="op" id="6976551">(</span><span class="op" id="6976552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976555">if</span>&nbsp;<span class="op" id="6976558">!</span><span class="ident" id="6976559">codec</span><span class="op" id="6976564">.</span><span class="ident" id="6976565">closed</span>&nbsp;<span class="op" id="6976572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976576">t</span><span class="op" id="6976577">.</span><span class="ident" id="6976578">Error</span><span class="op" id="6976583">(</span><span class="string" id="6976584">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="6976618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976621">}</span><br>
<span class="lineno">40</span><span class="op" id="6976623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6976626">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6976692">type</span>&nbsp;<span class="ident" id="6976697">R</span>&nbsp;<span class="keyword" id="6976699">struct</span>&nbsp;<span class="op" id="6976706">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976709">msg</span>&nbsp;<span class="op" id="6976713">[</span><span class="op" id="6976714">]</span><span class="builtintype" id="6976715">byte</span>&nbsp;<span class="comment" id="6976720">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="6976766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6976769">type</span>&nbsp;<span class="ident" id="6976774">S</span>&nbsp;<span class="keyword" id="6976776">struct</span><span class="op" id="6976782">{</span><span class="op" id="6976783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6976786">func</span>&nbsp;<span class="op" id="6976791">(</span><span class="ident" id="6976792">s</span>&nbsp;<span class="op" id="6976794">*</span><span class="ident" id="6976795">S</span><span class="op" id="6976796">)</span>&nbsp;<span class="ident" id="6976798">Recv</span><span class="op" id="6976802">(</span><span class="ident" id="6976803">nul</span>&nbsp;<span class="op" id="6976807">*</span><span class="keyword" id="6976808">struct</span><span class="op" id="6976814">{</span><span class="op" id="6976815">}</span><span class="op" id="6976816">,</span>&nbsp;<span class="ident" id="6976818">reply</span>&nbsp;<span class="op" id="6976824">*</span><span class="ident" id="6976825">R</span><span class="op" id="6976826">)</span>&nbsp;<span class="builtintype" id="6976828">error</span>&nbsp;<span class="op" id="6976834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6976837">*</span><span class="ident" id="6976838">reply</span>&nbsp;<span class="op" id="6976844">=</span>&nbsp;<span class="ident" id="6976846">R</span><span class="op" id="6976847">{</span><span class="op" id="6976848">[</span><span class="op" id="6976849">]</span><span class="builtintype" id="6976850">byte</span><span class="op" id="6976854">(</span><span class="string" id="6976855">&#34;foo&#34;</span><span class="op" id="6976860">)</span><span class="op" id="6976861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976864">return</span>&nbsp;<span class="ident" id="6976871">nil</span><br>
<span class="lineno"></span><span class="op" id="6976875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="6976878">func</span>&nbsp;<span class="ident" id="6976883">TestGobError</span><span class="op" id="6976895">(</span><span class="ident" id="6976896">t</span>&nbsp;<span class="op" id="6976898">*</span><span class="ident" id="6976899">testing</span><span class="op" id="6976906">.</span><span class="ident" id="6976907">T</span><span class="op" id="6976908">)</span>&nbsp;<span class="op" id="6976910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6976913">if</span>&nbsp;<span class="ident" id="6976916">runtime</span><span class="op" id="6976923">.</span><span class="ident" id="6976924">GOOS</span>&nbsp;<span class="op" id="6976929">==</span>&nbsp;<span class="string" id="6976932">&#34;plan9&#34;</span>&nbsp;<span class="op" id="6976940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6976944">t</span><span class="op" id="6976945">.</span><span class="ident" id="6976946">Skip</span><span class="op" id="6976950">(</span><span class="string" id="6976951">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="6977000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977006">defer</span>&nbsp;<span class="keyword" id="6977012">func</span><span class="op" id="6977016">(</span><span class="op" id="6977017">)</span>&nbsp;<span class="op" id="6977019">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977023">err</span>&nbsp;<span class="op" id="6977027">:=</span>&nbsp;<span class="builtinfunc" id="6977030">recover</span><span class="op" id="6977037">(</span><span class="op" id="6977038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977042">if</span>&nbsp;<span class="ident" id="6977045">err</span>&nbsp;<span class="op" id="6977049">==</span>&nbsp;<span class="ident" id="6977052">nil</span>&nbsp;<span class="op" id="6977056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977061">t</span><span class="op" id="6977062">.</span><span class="ident" id="6977063">Fatal</span><span class="op" id="6977068">(</span><span class="string" id="6977069">&#34;no&nbsp;error&#34;</span><span class="op" id="6977079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977087">if</span>&nbsp;<span class="op" id="6977090">!</span><span class="ident" id="6977091">strings</span><span class="op" id="6977098">.</span><span class="ident" id="6977099">Contains</span><span class="op" id="6977107">(</span><span class="string" id="6977108">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="6977126">,</span>&nbsp;<span class="ident" id="6977128">err</span><span class="op" id="6977131">.</span><span class="op" id="6977132">(</span><span class="builtintype" id="6977133">error</span><span class="op" id="6977138">)</span><span class="op" id="6977139">.</span><span class="ident" id="6977140">Error</span><span class="op" id="6977145">(</span><span class="op" id="6977146">)</span><span class="op" id="6977147">)</span>&nbsp;<span class="op" id="6977149">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977154">t</span><span class="op" id="6977155">.</span><span class="ident" id="6977156">Fatal</span><span class="op" id="6977161">(</span><span class="string" id="6977162">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="6977196">,</span>&nbsp;<span class="ident" id="6977198">err</span><span class="op" id="6977201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977208">}</span><span class="op" id="6977209">(</span><span class="op" id="6977210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977213">Register</span><span class="op" id="6977221">(</span><span class="builtinfunc" id="6977222">new</span><span class="op" id="6977225">(</span><span class="ident" id="6977226">S</span><span class="op" id="6977227">)</span><span class="op" id="6977228">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977232">listen</span><span class="op" id="6977238">,</span>&nbsp;<span class="ident" id="6977240">err</span>&nbsp;<span class="op" id="6977244">:=</span>&nbsp;<span class="ident" id="6977247">net</span><span class="op" id="6977250">.</span><span class="ident" id="6977251">Listen</span><span class="op" id="6977257">(</span><span class="string" id="6977258">&#34;tcp&#34;</span><span class="op" id="6977263">,</span>&nbsp;<span class="string" id="6977265">&#34;127.0.0.1:0&#34;</span><span class="op" id="6977278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977281">if</span>&nbsp;<span class="ident" id="6977284">err</span>&nbsp;<span class="op" id="6977288">!=</span>&nbsp;<span class="ident" id="6977291">nil</span>&nbsp;<span class="op" id="6977295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6977299">panic</span><span class="op" id="6977304">(</span><span class="ident" id="6977305">err</span><span class="op" id="6977308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977314">go</span>&nbsp;<span class="ident" id="6977317">Accept</span><span class="op" id="6977323">(</span><span class="ident" id="6977324">listen</span><span class="op" id="6977330">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977334">client</span><span class="op" id="6977340">,</span>&nbsp;<span class="ident" id="6977342">err</span>&nbsp;<span class="op" id="6977346">:=</span>&nbsp;<span class="ident" id="6977349">Dial</span><span class="op" id="6977353">(</span><span class="string" id="6977354">&#34;tcp&#34;</span><span class="op" id="6977359">,</span>&nbsp;<span class="ident" id="6977361">listen</span><span class="op" id="6977367">.</span><span class="ident" id="6977368">Addr</span><span class="op" id="6977372">(</span><span class="op" id="6977373">)</span><span class="op" id="6977374">.</span><span class="ident" id="6977375">String</span><span class="op" id="6977381">(</span><span class="op" id="6977382">)</span><span class="op" id="6977383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977386">if</span>&nbsp;<span class="ident" id="6977389">err</span>&nbsp;<span class="op" id="6977393">!=</span>&nbsp;<span class="ident" id="6977396">nil</span>&nbsp;<span class="op" id="6977400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6977404">panic</span><span class="op" id="6977409">(</span><span class="ident" id="6977410">err</span><span class="op" id="6977413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977416">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977420">var</span>&nbsp;<span class="ident" id="6977424">reply</span>&nbsp;<span class="ident" id="6977430">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977437">err</span>&nbsp;<span class="op" id="6977441">=</span>&nbsp;<span class="ident" id="6977443">client</span><span class="op" id="6977449">.</span><span class="ident" id="6977450">Call</span><span class="op" id="6977454">(</span><span class="string" id="6977455">&#34;S.Recv&#34;</span><span class="op" id="6977463">,</span>&nbsp;<span class="op" id="6977465">&amp;</span><span class="keyword" id="6977466">struct</span><span class="op" id="6977472">{</span><span class="op" id="6977473">}</span><span class="op" id="6977474">{</span><span class="op" id="6977475">}</span><span class="op" id="6977476">,</span>&nbsp;<span class="op" id="6977478">&amp;</span><span class="ident" id="6977479">reply</span><span class="op" id="6977484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6977487">if</span>&nbsp;<span class="ident" id="6977490">err</span>&nbsp;<span class="op" id="6977494">!=</span>&nbsp;<span class="ident" id="6977497">nil</span>&nbsp;<span class="op" id="6977501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6977505">panic</span><span class="op" id="6977510">(</span><span class="ident" id="6977511">err</span><span class="op" id="6977514">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6977517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977521">fmt</span><span class="op" id="6977524">.</span><span class="ident" id="6977525">Printf</span><span class="op" id="6977531">(</span><span class="string" id="6977532">&#34;%#v\n&#34;</span><span class="op" id="6977539">,</span>&nbsp;<span class="ident" id="6977541">reply</span><span class="op" id="6977546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977549">client</span><span class="op" id="6977555">.</span><span class="ident" id="6977556">Close</span><span class="op" id="6977561">(</span><span class="op" id="6977562">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6977566">listen</span><span class="op" id="6977572">.</span><span class="ident" id="6977573">Close</span><span class="op" id="6977578">(</span><span class="op" id="6977579">)</span><br>
<span class="lineno"></span><span class="op" id="6977581">}</span>
</div>
</body>
</html>
