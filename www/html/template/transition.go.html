<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3343148">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3343203">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3343257">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3343308">package</span>&nbsp;<span class="ident" id="3343316">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3343326">import</span>&nbsp;<span class="op" id="3343333">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3343336">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3343345">&#34;strings&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3343355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3343358">//&nbsp;transitionFunc&nbsp;is&nbsp;the&nbsp;array&nbsp;of&nbsp;context&nbsp;transition&nbsp;functions&nbsp;for&nbsp;text&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="comment" id="3343437">//&nbsp;A&nbsp;transition&nbsp;function&nbsp;takes&nbsp;a&nbsp;context&nbsp;and&nbsp;template&nbsp;text&nbsp;input,&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3343515">//&nbsp;the&nbsp;updated&nbsp;context&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;consumed&nbsp;from&nbsp;the&nbsp;front&nbsp;of&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="3343593">//&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="3343603">var</span>&nbsp;<span class="ident" id="3343607">transitionFunc</span>&nbsp;<span class="op" id="3343622">=</span>&nbsp;<span class="op" id="3343624">[</span><span class="op" id="3343625">...</span><span class="op" id="3343628">]</span><span class="keyword" id="3343629">func</span><span class="op" id="3343633">(</span><span class="ident" id="3343634"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3343641">,</span>&nbsp;<span class="op" id="3343643">[</span><span class="op" id="3343644">]</span><span class="builtintype" id="3343645">byte</span><span class="op" id="3343649">)</span>&nbsp;<span class="op" id="3343651">(</span><span class="ident" id="3343652"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3343659">,</span>&nbsp;<span class="builtintype" id="3343661">int</span><span class="op" id="3343664">)</span><span class="op" id="3343665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343668"><a href="/html/template/context.go.html#3259212">stateText</a></span><span class="op" id="3343677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343686"><a href="/html/template/transition.go.html#3344498">tText</a></span><span class="op" id="3343691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343694"><a href="/html/template/context.go.html#3259302">stateTag</a></span><span class="op" id="3343702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343712"><a href="/html/template/transition.go.html#3345307">tTag</a></span><span class="op" id="3343716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343719"><a href="/html/template/context.go.html#3259415">stateAttrName</a></span><span class="op" id="3343732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343737"><a href="/html/template/transition.go.html#3346247">tAttrName</a></span><span class="op" id="3343746">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343749"><a href="/html/template/context.go.html#3259565">stateAfterName</a></span><span class="op" id="3343763">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3343767"><a href="/html/template/transition.go.html#3346540">tAfterName</a></span><span class="op" id="3343777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343780"><a href="/html/template/context.go.html#3259705">stateBeforeValue</a></span><span class="op" id="3343796">:</span>&nbsp;<span class="ident" id="3343798"><a href="/html/template/transition.go.html#3347088">tBeforeValue</a></span><span class="op" id="3343810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343813"><a href="/html/template/context.go.html#3259780">stateHTMLCmt</a></span><span class="op" id="3343825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343831"><a href="/html/template/transition.go.html#3347534">tHTMLCmt</a></span><span class="op" id="3343839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343842"><a href="/html/template/context.go.html#3259936">stateRCDATA</a></span><span class="op" id="3343853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343860"><a href="/html/template/transition.go.html#3348079">tSpecialTagEnd</a></span><span class="op" id="3343874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343877"><a href="/html/template/context.go.html#3260018">stateAttr</a></span><span class="op" id="3343886">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343895"><a href="/html/template/transition.go.html#3348384">tAttr</a></span><span class="op" id="3343900">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343903"><a href="/html/template/context.go.html#3260098">stateURL</a></span><span class="op" id="3343911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343921"><a href="/html/template/transition.go.html#3348516">tURL</a></span><span class="op" id="3343925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343928"><a href="/html/template/context.go.html#3260170">stateJS</a></span><span class="op" id="3343935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343946"><a href="/html/template/transition.go.html#3348945">tJS</a></span><span class="op" id="3343949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343952"><a href="/html/template/context.go.html#3260245">stateJSDqStr</a></span><span class="op" id="3343964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3343970"><a href="/html/template/transition.go.html#3349916">tJSDelimited</a></span><span class="op" id="3343982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343985"><a href="/html/template/context.go.html#3260325">stateJSSqStr</a></span><span class="op" id="3343997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344003"><a href="/html/template/transition.go.html#3349916">tJSDelimited</a></span><span class="op" id="3344015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344018"><a href="/html/template/context.go.html#3260400">stateJSRegexp</a></span><span class="op" id="3344031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344036"><a href="/html/template/transition.go.html#3349916">tJSDelimited</a></span><span class="op" id="3344048">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344051"><a href="/html/template/context.go.html#3260483">stateJSBlockCmt</a></span><span class="op" id="3344066">:</span>&nbsp;&nbsp;<span class="ident" id="3344069"><a href="/html/template/transition.go.html#3350992">tBlockCmt</a></span><span class="op" id="3344078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344081"><a href="/html/template/context.go.html#3260563">stateJSLineCmt</a></span><span class="op" id="3344095">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3344099"><a href="/html/template/transition.go.html#3351353">tLineCmt</a></span><span class="op" id="3344107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344110"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><span class="op" id="3344118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344128"><a href="/html/template/transition.go.html#3352463">tCSS</a></span><span class="op" id="3344132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344135"><a href="/html/template/context.go.html#3260714">stateCSSDqStr</a></span><span class="op" id="3344148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344153"><a href="/html/template/transition.go.html#3354747">tCSSStr</a></span><span class="op" id="3344160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344163"><a href="/html/template/context.go.html#3260789">stateCSSSqStr</a></span><span class="op" id="3344176">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344181"><a href="/html/template/transition.go.html#3354747">tCSSStr</a></span><span class="op" id="3344188">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344191"><a href="/html/template/context.go.html#3260868">stateCSSDqURL</a></span><span class="op" id="3344204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344209"><a href="/html/template/transition.go.html#3354747">tCSSStr</a></span><span class="op" id="3344216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344219"><a href="/html/template/context.go.html#3260947">stateCSSSqURL</a></span><span class="op" id="3344232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344237"><a href="/html/template/transition.go.html#3354747">tCSSStr</a></span><span class="op" id="3344244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344247"><a href="/html/template/context.go.html#3261017">stateCSSURL</a></span><span class="op" id="3344258">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344265"><a href="/html/template/transition.go.html#3354747">tCSSStr</a></span><span class="op" id="3344272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344275"><a href="/html/template/context.go.html#3261092">stateCSSBlockCmt</a></span><span class="op" id="3344291">:</span>&nbsp;<span class="ident" id="3344293"><a href="/html/template/transition.go.html#3350992">tBlockCmt</a></span><span class="op" id="3344302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344305"><a href="/html/template/context.go.html#3261167">stateCSSLineCmt</a></span><span class="op" id="3344320">:</span>&nbsp;&nbsp;<span class="ident" id="3344323"><a href="/html/template/transition.go.html#3351353">tLineCmt</a></span><span class="op" id="3344331">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344334"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3344344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3344352"><a href="/html/template/transition.go.html#3355682">tError</a></span><span class="op" id="3344358">,</span><br>
<span class="lineno"></span><span class="op" id="3344360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3344363">var</span>&nbsp;<span class="ident" id="3344367">commentStart</span>&nbsp;<span class="op" id="3344380">=</span>&nbsp;<span class="op" id="3344382">[</span><span class="op" id="3344383">]</span><span class="builtintype" id="3344384">byte</span><span class="op" id="3344388">(</span><span class="string" id="3344389">&#34;&lt;!--&#34;</span><span class="op" id="3344395">)</span><br>
<span class="lineno"></span><span class="keyword" id="3344397">var</span>&nbsp;<span class="ident" id="3344401">commentEnd</span>&nbsp;<span class="op" id="3344412">=</span>&nbsp;<span class="op" id="3344414">[</span><span class="op" id="3344415">]</span><span class="builtintype" id="3344416">byte</span><span class="op" id="3344420">(</span><span class="string" id="3344421">&#34;--&gt;&#34;</span><span class="op" id="3344426">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="3344429">//&nbsp;tText&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;text&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="3344493">func</span>&nbsp;<span class="ident" id="3344498">tText</span><span class="op" id="3344503">(</span><span class="ident" id="3344504">c</span>&nbsp;<span class="ident" id="3344506"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3344513">,</span>&nbsp;<span class="ident" id="3344515">s</span>&nbsp;<span class="op" id="3344517">[</span><span class="op" id="3344518">]</span><span class="builtintype" id="3344519">byte</span><span class="op" id="3344523">)</span>&nbsp;<span class="op" id="3344525">(</span><span class="ident" id="3344526"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3344533">,</span>&nbsp;<span class="builtintype" id="3344535">int</span><span class="op" id="3344538">)</span>&nbsp;<span class="op" id="3344540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344543">k</span>&nbsp;<span class="op" id="3344545">:=</span>&nbsp;<span class="num" id="3344548">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344551">for</span>&nbsp;<span class="op" id="3344555">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344559">i</span>&nbsp;<span class="op" id="3344561">:=</span>&nbsp;<span class="ident" id="3344564"><a href="/html/template/transition.go.html#3344543">k</a></span>&nbsp;<span class="op" id="3344566">+</span>&nbsp;<span class="ident" id="3344568"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3344573">.</span><span class="ident" id="3344574">IndexByte</span><span class="op" id="3344583">(</span><span class="ident" id="3344584"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344585">[</span><span class="ident" id="3344586"><a href="/html/template/transition.go.html#3344543">k</a></span><span class="op" id="3344587">:</span><span class="op" id="3344588">]</span><span class="op" id="3344589">,</span>&nbsp;<span class="string" id="3344591">&#39;&lt;&#39;</span><span class="op" id="3344594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344598">if</span>&nbsp;<span class="ident" id="3344601"><a href="/html/template/transition.go.html#3344559">i</a></span>&nbsp;<span class="op" id="3344603">&lt;</span>&nbsp;<span class="ident" id="3344605"><a href="/html/template/transition.go.html#3344543">k</a></span>&nbsp;<span class="op" id="3344607">||</span>&nbsp;<span class="ident" id="3344610"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344611">+</span><span class="num" id="3344612">1</span>&nbsp;<span class="op" id="3344614">==</span>&nbsp;<span class="builtinfunc" id="3344617">len</span><span class="op" id="3344620">(</span><span class="ident" id="3344621"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344622">)</span>&nbsp;<span class="op" id="3344624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344629">return</span>&nbsp;<span class="ident" id="3344636"><a href="/html/template/transition.go.html#3344504">c</a></span><span class="op" id="3344637">,</span>&nbsp;<span class="builtinfunc" id="3344639">len</span><span class="op" id="3344642">(</span><span class="ident" id="3344643"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344648">}</span>&nbsp;<span class="keyword" id="3344650">else</span>&nbsp;<span class="keyword" id="3344655">if</span>&nbsp;<span class="ident" id="3344658"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344659">+</span><span class="num" id="3344660">4</span>&nbsp;<span class="op" id="3344662">&lt;=</span>&nbsp;<span class="builtinfunc" id="3344665">len</span><span class="op" id="3344668">(</span><span class="ident" id="3344669"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344670">)</span>&nbsp;<span class="op" id="3344672">&amp;&amp;</span>&nbsp;<span class="ident" id="3344675"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3344680">.</span><span class="ident" id="3344681">Equal</span><span class="op" id="3344686">(</span><span class="ident" id="3344687"><a href="/html/template/transition.go.html#3344367">commentStart</a></span><span class="op" id="3344699">,</span>&nbsp;<span class="ident" id="3344701"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344702">[</span><span class="ident" id="3344703"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344704">:</span><span class="ident" id="3344705"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344706">+</span><span class="num" id="3344707">4</span><span class="op" id="3344708">]</span><span class="op" id="3344709">)</span>&nbsp;<span class="op" id="3344711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344716">return</span>&nbsp;<span class="ident" id="3344723"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3344730">{</span><span class="ident" id="3344731">state</span><span class="op" id="3344736">:</span>&nbsp;<span class="ident" id="3344738"><a href="/html/template/context.go.html#3259780">stateHTMLCmt</a></span><span class="op" id="3344750">}</span><span class="op" id="3344751">,</span>&nbsp;<span class="ident" id="3344753"><a href="/html/template/transition.go.html#3344559">i</a></span>&nbsp;<span class="op" id="3344755">+</span>&nbsp;<span class="num" id="3344757">4</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344765"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344766">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344771">end</span>&nbsp;<span class="op" id="3344775">:=</span>&nbsp;<span class="ident" id="3344778">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344786">if</span>&nbsp;<span class="ident" id="3344789"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344790">[</span><span class="ident" id="3344791"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344792">]</span>&nbsp;<span class="op" id="3344794">==</span>&nbsp;<span class="string" id="3344797">&#39;/&#39;</span>&nbsp;<span class="op" id="3344801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344806">if</span>&nbsp;<span class="ident" id="3344809"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344810">+</span><span class="num" id="3344811">1</span>&nbsp;<span class="op" id="3344813">==</span>&nbsp;<span class="builtinfunc" id="3344816">len</span><span class="op" id="3344819">(</span><span class="ident" id="3344820"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344821">)</span>&nbsp;<span class="op" id="3344823">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344829">return</span>&nbsp;<span class="ident" id="3344836"><a href="/html/template/transition.go.html#3344504">c</a></span><span class="op" id="3344837">,</span>&nbsp;<span class="builtinfunc" id="3344839">len</span><span class="op" id="3344842">(</span><span class="ident" id="3344843"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344854"><a href="/html/template/transition.go.html#3344771">end</a></span><span class="op" id="3344857">,</span>&nbsp;<span class="ident" id="3344859"><a href="/html/template/transition.go.html#3344559">i</a></span>&nbsp;<span class="op" id="3344861">=</span>&nbsp;<span class="ident" id="3344863">true</span><span class="op" id="3344867">,</span>&nbsp;<span class="ident" id="3344869"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344870">+</span><span class="num" id="3344871">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344879">j</span><span class="op" id="3344880">,</span>&nbsp;<span class="ident" id="3344882">e</span>&nbsp;<span class="op" id="3344884">:=</span>&nbsp;<span class="ident" id="3344887"><a href="/html/template/transition.go.html#3356973">eatTagName</a></span><span class="op" id="3344897">(</span><span class="ident" id="3344898"><a href="/html/template/transition.go.html#3344515">s</a></span><span class="op" id="3344899">,</span>&nbsp;<span class="ident" id="3344901"><a href="/html/template/transition.go.html#3344559">i</a></span><span class="op" id="3344902">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344906">if</span>&nbsp;<span class="ident" id="3344909"><a href="/html/template/transition.go.html#3344879">j</a></span>&nbsp;<span class="op" id="3344911">!=</span>&nbsp;<span class="ident" id="3344914"><a href="/html/template/transition.go.html#3344559">i</a></span>&nbsp;<span class="op" id="3344916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344921">if</span>&nbsp;<span class="ident" id="3344924"><a href="/html/template/transition.go.html#3344771">end</a></span>&nbsp;<span class="op" id="3344928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344934"><a href="/html/template/transition.go.html#3344882">e</a></span>&nbsp;<span class="op" id="3344936">=</span>&nbsp;<span class="ident" id="3344938"><a href="/html/template/context.go.html#3265642">elementNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3344958">//&nbsp;We&#39;ve&nbsp;found&nbsp;an&nbsp;HTML&nbsp;tag.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344989">return</span>&nbsp;<span class="ident" id="3344996"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3345003">{</span><span class="ident" id="3345004">state</span><span class="op" id="3345009">:</span>&nbsp;<span class="ident" id="3345011"><a href="/html/template/context.go.html#3259302">stateTag</a></span><span class="op" id="3345019">,</span>&nbsp;<span class="ident" id="3345021">element</span><span class="op" id="3345028">:</span>&nbsp;<span class="ident" id="3345030"><a href="/html/template/transition.go.html#3344882">e</a></span><span class="op" id="3345031">}</span><span class="op" id="3345032">,</span>&nbsp;<span class="ident" id="3345034"><a href="/html/template/transition.go.html#3344879">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345042"><a href="/html/template/transition.go.html#3344543">k</a></span>&nbsp;<span class="op" id="3345044">=</span>&nbsp;<span class="ident" id="3345046"><a href="/html/template/transition.go.html#3344879">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345049">}</span><br>
<span class="lineno"></span><span class="op" id="3345051">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="3345054">var</span>&nbsp;<span class="ident" id="3345058">elementContentType</span>&nbsp;<span class="op" id="3345077">=</span>&nbsp;<span class="op" id="3345079">[</span><span class="op" id="3345080">...</span><span class="op" id="3345083">]</span><span class="ident" id="3345084"><a href="/html/template/context.go.html#3259016">state</a></span><span class="op" id="3345089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345092"><a href="/html/template/context.go.html#3265642">elementNone</a></span><span class="op" id="3345103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3345109"><a href="/html/template/context.go.html#3259212">stateText</a></span><span class="op" id="3345118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345121"><a href="/html/template/context.go.html#3265734">elementScript</a></span><span class="op" id="3345134">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3345138"><a href="/html/template/context.go.html#3260170">stateJS</a></span><span class="op" id="3345145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345148"><a href="/html/template/context.go.html#3265811">elementStyle</a></span><span class="op" id="3345160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3345165"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><span class="op" id="3345173">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345176"><a href="/html/template/context.go.html#3265891">elementTextarea</a></span><span class="op" id="3345191">:</span>&nbsp;<span class="ident" id="3345193"><a href="/html/template/context.go.html#3259936">stateRCDATA</a></span><span class="op" id="3345204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345207"><a href="/html/template/context.go.html#3265968">elementTitle</a></span><span class="op" id="3345219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3345224"><a href="/html/template/context.go.html#3259936">stateRCDATA</a></span><span class="op" id="3345235">,</span><br>
<span class="lineno"></span><span class="op" id="3345237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3345240">//&nbsp;tTag&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;tag&nbsp;state.</span><br>
<span class="lineno">85</span><span class="keyword" id="3345302">func</span>&nbsp;<span class="ident" id="3345307">tTag</span><span class="op" id="3345311">(</span><span class="ident" id="3345312">c</span>&nbsp;<span class="ident" id="3345314"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3345321">,</span>&nbsp;<span class="ident" id="3345323">s</span>&nbsp;<span class="op" id="3345325">[</span><span class="op" id="3345326">]</span><span class="builtintype" id="3345327">byte</span><span class="op" id="3345331">)</span>&nbsp;<span class="op" id="3345333">(</span><span class="ident" id="3345334"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3345341">,</span>&nbsp;<span class="builtintype" id="3345343">int</span><span class="op" id="3345346">)</span>&nbsp;<span class="op" id="3345348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3345351">//&nbsp;Find&nbsp;the&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345380">i</span>&nbsp;<span class="op" id="3345382">:=</span>&nbsp;<span class="ident" id="3345385"><a href="/html/template/transition.go.html#3357477">eatWhiteSpace</a></span><span class="op" id="3345398">(</span><span class="ident" id="3345399"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345400">,</span>&nbsp;<span class="num" id="3345402">0</span><span class="op" id="3345403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345406">if</span>&nbsp;<span class="ident" id="3345409"><a href="/html/template/transition.go.html#3345380">i</a></span>&nbsp;<span class="op" id="3345411">==</span>&nbsp;<span class="builtinfunc" id="3345414">len</span><span class="op" id="3345417">(</span><span class="ident" id="3345418"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345419">)</span>&nbsp;<span class="op" id="3345421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345425">return</span>&nbsp;<span class="ident" id="3345432"><a href="/html/template/transition.go.html#3345312">c</a></span><span class="op" id="3345433">,</span>&nbsp;<span class="builtinfunc" id="3345435">len</span><span class="op" id="3345438">(</span><span class="ident" id="3345439"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345440">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345446">if</span>&nbsp;<span class="ident" id="3345449"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345450">[</span><span class="ident" id="3345451"><a href="/html/template/transition.go.html#3345380">i</a></span><span class="op" id="3345452">]</span>&nbsp;<span class="op" id="3345454">==</span>&nbsp;<span class="string" id="3345457">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="3345461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345465">return</span>&nbsp;<span class="ident" id="3345472"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3345479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345484">state</span><span class="op" id="3345489">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3345493"><a href="/html/template/transition.go.html#3345058">elementContentType</a></span><span class="op" id="3345511">[</span><span class="ident" id="3345512"><a href="/html/template/transition.go.html#3345312">c</a></span><span class="op" id="3345513">.</span><span class="ident" id="3345514">element</span><span class="op" id="3345521">]</span><span class="op" id="3345522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345527">element</span><span class="op" id="3345534">:</span>&nbsp;<span class="ident" id="3345536"><a href="/html/template/transition.go.html#3345312">c</a></span><span class="op" id="3345537">.</span><span class="ident" id="3345538">element</span><span class="op" id="3345545">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345549">}</span><span class="op" id="3345550">,</span>&nbsp;<span class="ident" id="3345552"><a href="/html/template/transition.go.html#3345380">i</a></span>&nbsp;<span class="op" id="3345554">+</span>&nbsp;<span class="num" id="3345556">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345562">j</span><span class="op" id="3345563">,</span>&nbsp;<span class="ident" id="3345565">err</span>&nbsp;<span class="op" id="3345569">:=</span>&nbsp;<span class="ident" id="3345572"><a href="/html/template/transition.go.html#3355987">eatAttrName</a></span><span class="op" id="3345583">(</span><span class="ident" id="3345584"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345585">,</span>&nbsp;<span class="ident" id="3345587"><a href="/html/template/transition.go.html#3345380">i</a></span><span class="op" id="3345588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345591">if</span>&nbsp;<span class="ident" id="3345594"><a href="/html/template/transition.go.html#3345565">err</a></span>&nbsp;<span class="op" id="3345598">!=</span>&nbsp;<span class="ident" id="3345601">nil</span>&nbsp;<span class="op" id="3345605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345609">return</span>&nbsp;<span class="ident" id="3345616"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3345623">{</span><span class="ident" id="3345624">state</span><span class="op" id="3345629">:</span>&nbsp;<span class="ident" id="3345631"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3345641">,</span>&nbsp;<span class="ident" id="3345643">err</span><span class="op" id="3345646">:</span>&nbsp;<span class="ident" id="3345648"><a href="/html/template/transition.go.html#3345565">err</a></span><span class="op" id="3345651">}</span><span class="op" id="3345652">,</span>&nbsp;<span class="builtinfunc" id="3345654">len</span><span class="op" id="3345657">(</span><span class="ident" id="3345658"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345659">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345665">state</span><span class="op" id="3345670">,</span>&nbsp;<span class="ident" id="3345672">attr</span>&nbsp;<span class="op" id="3345677">:=</span>&nbsp;<span class="ident" id="3345680"><a href="/html/template/context.go.html#3259302">stateTag</a></span><span class="op" id="3345688">,</span>&nbsp;<span class="ident" id="3345690"><a href="/html/template/context.go.html#3266506">attrNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345700">if</span>&nbsp;<span class="ident" id="3345703"><a href="/html/template/transition.go.html#3345380">i</a></span>&nbsp;<span class="op" id="3345705">==</span>&nbsp;<span class="ident" id="3345708"><a href="/html/template/transition.go.html#3345562">j</a></span>&nbsp;<span class="op" id="3345710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345714">return</span>&nbsp;<span class="ident" id="3345721"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3345728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345733">state</span><span class="op" id="3345738">:</span>&nbsp;<span class="ident" id="3345740"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3345750">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345755">err</span><span class="op" id="3345758">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3345762"><a href="/html/template/error.go.html#3287884">errorf</a></span><span class="op" id="3345768">(</span><span class="ident" id="3345769"><a href="/html/template/error.go.html#3282823">ErrBadHTML</a></span><span class="op" id="3345779">,</span>&nbsp;<span class="ident" id="3345781">nil</span><span class="op" id="3345784">,</span>&nbsp;<span class="num" id="3345786">0</span><span class="op" id="3345787">,</span>&nbsp;<span class="string" id="3345789">&#34;expected&nbsp;space,&nbsp;attr&nbsp;name,&nbsp;or&nbsp;end&nbsp;of&nbsp;tag,&nbsp;but&nbsp;got&nbsp;%q&#34;</span><span class="op" id="3345843">,</span>&nbsp;<span class="ident" id="3345845"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345846">[</span><span class="ident" id="3345847"><a href="/html/template/transition.go.html#3345380">i</a></span><span class="op" id="3345848">:</span><span class="op" id="3345849">]</span><span class="op" id="3345850">)</span><span class="op" id="3345851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345855">}</span><span class="op" id="3345856">,</span>&nbsp;<span class="builtinfunc" id="3345858">len</span><span class="op" id="3345861">(</span><span class="ident" id="3345862"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345869">switch</span>&nbsp;<span class="ident" id="3345876"><a href="/html/template/attr.go.html#3251028">attrType</a></span><span class="op" id="3345884">(</span><span class="builtintype" id="3345885">string</span><span class="op" id="3345891">(</span><span class="ident" id="3345892"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3345893">[</span><span class="ident" id="3345894"><a href="/html/template/transition.go.html#3345380">i</a></span><span class="op" id="3345895">:</span><span class="ident" id="3345896"><a href="/html/template/transition.go.html#3345562">j</a></span><span class="op" id="3345897">]</span><span class="op" id="3345898">)</span><span class="op" id="3345899">)</span>&nbsp;<span class="op" id="3345901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345904">case</span>&nbsp;<span class="ident" id="3345909"><a href="/html/template/content.go.html#3254768">contentTypeURL</a></span><span class="op" id="3345923">:</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345927"><a href="/html/template/transition.go.html#3345672">attr</a></span>&nbsp;<span class="op" id="3345932">=</span>&nbsp;<span class="ident" id="3345934"><a href="/html/template/context.go.html#3266740">attrURL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345943">case</span>&nbsp;<span class="ident" id="3345948"><a href="/html/template/content.go.html#3254681">contentTypeCSS</a></span><span class="op" id="3345962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345966"><a href="/html/template/transition.go.html#3345672">attr</a></span>&nbsp;<span class="op" id="3345971">=</span>&nbsp;<span class="ident" id="3345973"><a href="/html/template/context.go.html#3266667">attrStyle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345984">case</span>&nbsp;<span class="ident" id="3345989"><a href="/html/template/content.go.html#3254735">contentTypeJS</a></span><span class="op" id="3346002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346006"><a href="/html/template/transition.go.html#3345672">attr</a></span>&nbsp;<span class="op" id="3346011">=</span>&nbsp;<span class="ident" id="3346013"><a href="/html/template/context.go.html#3266586">attrScript</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346028">if</span>&nbsp;<span class="ident" id="3346031"><a href="/html/template/transition.go.html#3345562">j</a></span>&nbsp;<span class="op" id="3346033">==</span>&nbsp;<span class="builtinfunc" id="3346036">len</span><span class="op" id="3346039">(</span><span class="ident" id="3346040"><a href="/html/template/transition.go.html#3345323">s</a></span><span class="op" id="3346041">)</span>&nbsp;<span class="op" id="3346043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346047"><a href="/html/template/transition.go.html#3345665">state</a></span>&nbsp;<span class="op" id="3346053">=</span>&nbsp;<span class="ident" id="3346055"><a href="/html/template/context.go.html#3259415">stateAttrName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346070">}</span>&nbsp;<span class="keyword" id="3346072">else</span>&nbsp;<span class="op" id="3346077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346081"><a href="/html/template/transition.go.html#3345665">state</a></span>&nbsp;<span class="op" id="3346087">=</span>&nbsp;<span class="ident" id="3346089"><a href="/html/template/context.go.html#3259565">stateAfterName</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346108">return</span>&nbsp;<span class="ident" id="3346115"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3346122">{</span><span class="ident" id="3346123">state</span><span class="op" id="3346128">:</span>&nbsp;<span class="ident" id="3346130"><a href="/html/template/transition.go.html#3345665">state</a></span><span class="op" id="3346135">,</span>&nbsp;<span class="ident" id="3346137">element</span><span class="op" id="3346144">:</span>&nbsp;<span class="ident" id="3346146"><a href="/html/template/transition.go.html#3345312">c</a></span><span class="op" id="3346147">.</span><span class="ident" id="3346148">element</span><span class="op" id="3346155">,</span>&nbsp;<span class="ident" id="3346157">attr</span><span class="op" id="3346161">:</span>&nbsp;<span class="ident" id="3346163"><a href="/html/template/transition.go.html#3345672">attr</a></span><span class="op" id="3346167">}</span><span class="op" id="3346168">,</span>&nbsp;<span class="ident" id="3346170"><a href="/html/template/transition.go.html#3345562">j</a></span><br>
<span class="lineno"></span><span class="op" id="3346172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3346175">//&nbsp;tAttrName&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateAttrName.</span><br>
<span class="lineno">125</span><span class="keyword" id="3346242">func</span>&nbsp;<span class="ident" id="3346247">tAttrName</span><span class="op" id="3346256">(</span><span class="ident" id="3346257">c</span>&nbsp;<span class="ident" id="3346259"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3346266">,</span>&nbsp;<span class="ident" id="3346268">s</span>&nbsp;<span class="op" id="3346270">[</span><span class="op" id="3346271">]</span><span class="builtintype" id="3346272">byte</span><span class="op" id="3346276">)</span>&nbsp;<span class="op" id="3346278">(</span><span class="ident" id="3346279"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3346286">,</span>&nbsp;<span class="builtintype" id="3346288">int</span><span class="op" id="3346291">)</span>&nbsp;<span class="op" id="3346293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346296">i</span><span class="op" id="3346297">,</span>&nbsp;<span class="ident" id="3346299">err</span>&nbsp;<span class="op" id="3346303">:=</span>&nbsp;<span class="ident" id="3346306"><a href="/html/template/transition.go.html#3355987">eatAttrName</a></span><span class="op" id="3346317">(</span><span class="ident" id="3346318"><a href="/html/template/transition.go.html#3346268">s</a></span><span class="op" id="3346319">,</span>&nbsp;<span class="num" id="3346321">0</span><span class="op" id="3346322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346325">if</span>&nbsp;<span class="ident" id="3346328"><a href="/html/template/transition.go.html#3346299">err</a></span>&nbsp;<span class="op" id="3346332">!=</span>&nbsp;<span class="ident" id="3346335">nil</span>&nbsp;<span class="op" id="3346339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346343">return</span>&nbsp;<span class="ident" id="3346350"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3346357">{</span><span class="ident" id="3346358">state</span><span class="op" id="3346363">:</span>&nbsp;<span class="ident" id="3346365"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3346375">,</span>&nbsp;<span class="ident" id="3346377">err</span><span class="op" id="3346380">:</span>&nbsp;<span class="ident" id="3346382"><a href="/html/template/transition.go.html#3346299">err</a></span><span class="op" id="3346385">}</span><span class="op" id="3346386">,</span>&nbsp;<span class="builtinfunc" id="3346388">len</span><span class="op" id="3346391">(</span><span class="ident" id="3346392"><a href="/html/template/transition.go.html#3346268">s</a></span><span class="op" id="3346393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346396">}</span>&nbsp;<span class="keyword" id="3346398">else</span>&nbsp;<span class="keyword" id="3346403">if</span>&nbsp;<span class="ident" id="3346406"><a href="/html/template/transition.go.html#3346296">i</a></span>&nbsp;<span class="op" id="3346408">!=</span>&nbsp;<span class="builtinfunc" id="3346411">len</span><span class="op" id="3346414">(</span><span class="ident" id="3346415"><a href="/html/template/transition.go.html#3346268">s</a></span><span class="op" id="3346416">)</span>&nbsp;<span class="op" id="3346418">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346422"><a href="/html/template/transition.go.html#3346257">c</a></span><span class="op" id="3346423">.</span><span class="ident" id="3346424">state</span>&nbsp;<span class="op" id="3346430">=</span>&nbsp;<span class="ident" id="3346432"><a href="/html/template/context.go.html#3259565">stateAfterName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346451">return</span>&nbsp;<span class="ident" id="3346458"><a href="/html/template/transition.go.html#3346257">c</a></span><span class="op" id="3346459">,</span>&nbsp;<span class="ident" id="3346461"><a href="/html/template/transition.go.html#3346296">i</a></span><br>
<span class="lineno"></span><span class="op" id="3346463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3346466">//&nbsp;tAfterName&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateAfterName.</span><br>
<span class="lineno"></span><span class="keyword" id="3346535">func</span>&nbsp;<span class="ident" id="3346540">tAfterName</span><span class="op" id="3346550">(</span><span class="ident" id="3346551">c</span>&nbsp;<span class="ident" id="3346553"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3346560">,</span>&nbsp;<span class="ident" id="3346562">s</span>&nbsp;<span class="op" id="3346564">[</span><span class="op" id="3346565">]</span><span class="builtintype" id="3346566">byte</span><span class="op" id="3346570">)</span>&nbsp;<span class="op" id="3346572">(</span><span class="ident" id="3346573"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3346580">,</span>&nbsp;<span class="builtintype" id="3346582">int</span><span class="op" id="3346585">)</span>&nbsp;<span class="op" id="3346587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346590">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346627">i</span>&nbsp;<span class="op" id="3346629">:=</span>&nbsp;<span class="ident" id="3346632"><a href="/html/template/transition.go.html#3357477">eatWhiteSpace</a></span><span class="op" id="3346645">(</span><span class="ident" id="3346646"><a href="/html/template/transition.go.html#3346562">s</a></span><span class="op" id="3346647">,</span>&nbsp;<span class="num" id="3346649">0</span><span class="op" id="3346650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346653">if</span>&nbsp;<span class="ident" id="3346656"><a href="/html/template/transition.go.html#3346627">i</a></span>&nbsp;<span class="op" id="3346658">==</span>&nbsp;<span class="builtinfunc" id="3346661">len</span><span class="op" id="3346664">(</span><span class="ident" id="3346665"><a href="/html/template/transition.go.html#3346562">s</a></span><span class="op" id="3346666">)</span>&nbsp;<span class="op" id="3346668">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346672">return</span>&nbsp;<span class="ident" id="3346679"><a href="/html/template/transition.go.html#3346551">c</a></span><span class="op" id="3346680">,</span>&nbsp;<span class="builtinfunc" id="3346682">len</span><span class="op" id="3346685">(</span><span class="ident" id="3346686"><a href="/html/template/transition.go.html#3346562">s</a></span><span class="op" id="3346687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346690">}</span>&nbsp;<span class="keyword" id="3346692">else</span>&nbsp;<span class="keyword" id="3346697">if</span>&nbsp;<span class="ident" id="3346700"><a href="/html/template/transition.go.html#3346562">s</a></span><span class="op" id="3346701">[</span><span class="ident" id="3346702"><a href="/html/template/transition.go.html#3346627">i</a></span><span class="op" id="3346703">]</span>&nbsp;<span class="op" id="3346705">!=</span>&nbsp;<span class="string" id="3346708">&#39;=&#39;</span>&nbsp;<span class="op" id="3346712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346716">//&nbsp;Occurs&nbsp;due&nbsp;to&nbsp;tag&nbsp;ending&nbsp;&#39;&gt;&#39;,&nbsp;and&nbsp;valueless&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346776"><a href="/html/template/transition.go.html#3346551">c</a></span><span class="op" id="3346777">.</span><span class="ident" id="3346778">state</span>&nbsp;<span class="op" id="3346784">=</span>&nbsp;<span class="ident" id="3346786"><a href="/html/template/context.go.html#3259302">stateTag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346797">return</span>&nbsp;<span class="ident" id="3346804"><a href="/html/template/transition.go.html#3346551">c</a></span><span class="op" id="3346805">,</span>&nbsp;<span class="ident" id="3346807"><a href="/html/template/transition.go.html#3346627">i</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346813"><a href="/html/template/transition.go.html#3346551">c</a></span><span class="op" id="3346814">.</span><span class="ident" id="3346815">state</span>&nbsp;<span class="op" id="3346821">=</span>&nbsp;<span class="ident" id="3346823"><a href="/html/template/context.go.html#3259705">stateBeforeValue</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346841">//&nbsp;Consume&nbsp;the&nbsp;&#34;=&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346862">return</span>&nbsp;<span class="ident" id="3346869"><a href="/html/template/transition.go.html#3346551">c</a></span><span class="op" id="3346870">,</span>&nbsp;<span class="ident" id="3346872"><a href="/html/template/transition.go.html#3346627">i</a></span>&nbsp;<span class="op" id="3346874">+</span>&nbsp;<span class="num" id="3346876">1</span><br>
<span class="lineno"></span><span class="op" id="3346878">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3346881">var</span>&nbsp;<span class="ident" id="3346885">attrStartStates</span>&nbsp;<span class="op" id="3346901">=</span>&nbsp;<span class="op" id="3346903">[</span><span class="op" id="3346904">...</span><span class="op" id="3346907">]</span><span class="ident" id="3346908"><a href="/html/template/context.go.html#3259016">state</a></span><span class="op" id="3346913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346916"><a href="/html/template/context.go.html#3266506">attrNone</a></span><span class="op" id="3346924">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3346928"><a href="/html/template/context.go.html#3260018">stateAttr</a></span><span class="op" id="3346937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346940"><a href="/html/template/context.go.html#3266586">attrScript</a></span><span class="op" id="3346950">:</span>&nbsp;<span class="ident" id="3346952"><a href="/html/template/context.go.html#3260170">stateJS</a></span><span class="op" id="3346959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346962"><a href="/html/template/context.go.html#3266667">attrStyle</a></span><span class="op" id="3346971">:</span>&nbsp;&nbsp;<span class="ident" id="3346974"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><span class="op" id="3346982">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346985"><a href="/html/template/context.go.html#3266740">attrURL</a></span><span class="op" id="3346992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3346997"><a href="/html/template/context.go.html#3260098">stateURL</a></span><span class="op" id="3347005">,</span><br>
<span class="lineno"></span><span class="op" id="3347007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3347010">//&nbsp;tBeforeValue&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateBeforeValue.</span><br>
<span class="lineno"></span><span class="keyword" id="3347083">func</span>&nbsp;<span class="ident" id="3347088">tBeforeValue</span><span class="op" id="3347100">(</span><span class="ident" id="3347101">c</span>&nbsp;<span class="ident" id="3347103"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3347110">,</span>&nbsp;<span class="ident" id="3347112">s</span>&nbsp;<span class="op" id="3347114">[</span><span class="op" id="3347115">]</span><span class="builtintype" id="3347116">byte</span><span class="op" id="3347120">)</span>&nbsp;<span class="op" id="3347122">(</span><span class="ident" id="3347123"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3347130">,</span>&nbsp;<span class="builtintype" id="3347132">int</span><span class="op" id="3347135">)</span>&nbsp;<span class="op" id="3347137">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347140">i</span>&nbsp;<span class="op" id="3347142">:=</span>&nbsp;<span class="ident" id="3347145"><a href="/html/template/transition.go.html#3357477">eatWhiteSpace</a></span><span class="op" id="3347158">(</span><span class="ident" id="3347159"><a href="/html/template/transition.go.html#3347112">s</a></span><span class="op" id="3347160">,</span>&nbsp;<span class="num" id="3347162">0</span><span class="op" id="3347163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347166">if</span>&nbsp;<span class="ident" id="3347169"><a href="/html/template/transition.go.html#3347140">i</a></span>&nbsp;<span class="op" id="3347171">==</span>&nbsp;<span class="builtinfunc" id="3347174">len</span><span class="op" id="3347177">(</span><span class="ident" id="3347178"><a href="/html/template/transition.go.html#3347112">s</a></span><span class="op" id="3347179">)</span>&nbsp;<span class="op" id="3347181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347185">return</span>&nbsp;<span class="ident" id="3347192"><a href="/html/template/transition.go.html#3347101">c</a></span><span class="op" id="3347193">,</span>&nbsp;<span class="builtinfunc" id="3347195">len</span><span class="op" id="3347198">(</span><span class="ident" id="3347199"><a href="/html/template/transition.go.html#3347112">s</a></span><span class="op" id="3347200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347206">//&nbsp;Find&nbsp;the&nbsp;attribute&nbsp;delimiter.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347240">delim</span>&nbsp;<span class="op" id="3347246">:=</span>&nbsp;<span class="ident" id="3347249"><a href="/html/template/context.go.html#3263252">delimSpaceOrTagEnd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347269">switch</span>&nbsp;<span class="ident" id="3347276"><a href="/html/template/transition.go.html#3347112">s</a></span><span class="op" id="3347277">[</span><span class="ident" id="3347278"><a href="/html/template/transition.go.html#3347140">i</a></span><span class="op" id="3347279">]</span>&nbsp;<span class="op" id="3347281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347284">case</span>&nbsp;<span class="string" id="3347289">&#39;\&#39;&#39;</span><span class="op" id="3347293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347297"><a href="/html/template/transition.go.html#3347240">delim</a></span><span class="op" id="3347302">,</span>&nbsp;<span class="ident" id="3347304"><a href="/html/template/transition.go.html#3347140">i</a></span>&nbsp;<span class="op" id="3347306">=</span>&nbsp;<span class="ident" id="3347308"><a href="/html/template/context.go.html#3263138">delimSingleQuote</a></span><span class="op" id="3347324">,</span>&nbsp;<span class="ident" id="3347326"><a href="/html/template/transition.go.html#3347140">i</a></span><span class="op" id="3347327">+</span><span class="num" id="3347328">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347331">case</span>&nbsp;<span class="string" id="3347336">&#39;&#34;&#39;</span><span class="op" id="3347339">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347343"><a href="/html/template/transition.go.html#3347240">delim</a></span><span class="op" id="3347348">,</span>&nbsp;<span class="ident" id="3347350"><a href="/html/template/transition.go.html#3347140">i</a></span>&nbsp;<span class="op" id="3347352">=</span>&nbsp;<span class="ident" id="3347354"><a href="/html/template/context.go.html#3263046">delimDoubleQuote</a></span><span class="op" id="3347370">,</span>&nbsp;<span class="ident" id="3347372"><a href="/html/template/transition.go.html#3347140">i</a></span><span class="op" id="3347373">+</span><span class="num" id="3347374">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347380"><a href="/html/template/transition.go.html#3347101">c</a></span><span class="op" id="3347381">.</span><span class="ident" id="3347382">state</span><span class="op" id="3347387">,</span>&nbsp;<span class="ident" id="3347389"><a href="/html/template/transition.go.html#3347101">c</a></span><span class="op" id="3347390">.</span><span class="ident" id="3347391">delim</span><span class="op" id="3347396">,</span>&nbsp;<span class="ident" id="3347398"><a href="/html/template/transition.go.html#3347101">c</a></span><span class="op" id="3347399">.</span><span class="ident" id="3347400">attr</span>&nbsp;<span class="op" id="3347405">=</span>&nbsp;<span class="ident" id="3347407"><a href="/html/template/transition.go.html#3346885">attrStartStates</a></span><span class="op" id="3347422">[</span><span class="ident" id="3347423"><a href="/html/template/transition.go.html#3347101">c</a></span><span class="op" id="3347424">.</span><span class="ident" id="3347425">attr</span><span class="op" id="3347429">]</span><span class="op" id="3347430">,</span>&nbsp;<span class="ident" id="3347432"><a href="/html/template/transition.go.html#3347240">delim</a></span><span class="op" id="3347437">,</span>&nbsp;<span class="ident" id="3347439"><a href="/html/template/context.go.html#3266506">attrNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347449">return</span>&nbsp;<span class="ident" id="3347456"><a href="/html/template/transition.go.html#3347101">c</a></span><span class="op" id="3347457">,</span>&nbsp;<span class="ident" id="3347459"><a href="/html/template/transition.go.html#3347140">i</a></span><br>
<span class="lineno"></span><span class="op" id="3347461">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="3347464">//&nbsp;tHTMLCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;stateHTMLCmt.</span><br>
<span class="lineno"></span><span class="keyword" id="3347529">func</span>&nbsp;<span class="ident" id="3347534">tHTMLCmt</span><span class="op" id="3347542">(</span><span class="ident" id="3347543">c</span>&nbsp;<span class="ident" id="3347545"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3347552">,</span>&nbsp;<span class="ident" id="3347554">s</span>&nbsp;<span class="op" id="3347556">[</span><span class="op" id="3347557">]</span><span class="builtintype" id="3347558">byte</span><span class="op" id="3347562">)</span>&nbsp;<span class="op" id="3347564">(</span><span class="ident" id="3347565"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3347572">,</span>&nbsp;<span class="builtintype" id="3347574">int</span><span class="op" id="3347577">)</span>&nbsp;<span class="op" id="3347579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347582">if</span>&nbsp;<span class="ident" id="3347585">i</span>&nbsp;<span class="op" id="3347587">:=</span>&nbsp;<span class="ident" id="3347590"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3347595">.</span><span class="ident" id="3347596">Index</span><span class="op" id="3347601">(</span><span class="ident" id="3347602"><a href="/html/template/transition.go.html#3347554">s</a></span><span class="op" id="3347603">,</span>&nbsp;<span class="ident" id="3347605"><a href="/html/template/transition.go.html#3344401">commentEnd</a></span><span class="op" id="3347615">)</span><span class="op" id="3347616">;</span>&nbsp;<span class="ident" id="3347618"><a href="/html/template/transition.go.html#3347585">i</a></span>&nbsp;<span class="op" id="3347620">!=</span>&nbsp;<span class="op" id="3347623">-</span><span class="num" id="3347624">1</span>&nbsp;<span class="op" id="3347626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347630">return</span>&nbsp;<span class="ident" id="3347637"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3347644">{</span><span class="op" id="3347645">}</span><span class="op" id="3347646">,</span>&nbsp;<span class="ident" id="3347648"><a href="/html/template/transition.go.html#3347585">i</a></span>&nbsp;<span class="op" id="3347650">+</span>&nbsp;<span class="num" id="3347652">3</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347658">return</span>&nbsp;<span class="ident" id="3347665"><a href="/html/template/transition.go.html#3347543">c</a></span><span class="op" id="3347666">,</span>&nbsp;<span class="builtinfunc" id="3347668">len</span><span class="op" id="3347671">(</span><span class="ident" id="3347672"><a href="/html/template/transition.go.html#3347554">s</a></span><span class="op" id="3347673">)</span><br>
<span class="lineno"></span><span class="op" id="3347675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3347678">//&nbsp;specialTagEndMarkers&nbsp;maps&nbsp;element&nbsp;types&nbsp;to&nbsp;the&nbsp;character&nbsp;sequence&nbsp;that</span><br>
<span class="lineno">185</span><span class="comment" id="3347752">//&nbsp;case-insensitively&nbsp;signals&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;special&nbsp;tag&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="3347815">var</span>&nbsp;<span class="ident" id="3347819">specialTagEndMarkers</span>&nbsp;<span class="op" id="3347840">=</span>&nbsp;<span class="op" id="3347842">[</span><span class="op" id="3347843">...</span><span class="op" id="3347846">]</span><span class="builtintype" id="3347847">string</span><span class="op" id="3347853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347856"><a href="/html/template/context.go.html#3265734">elementScript</a></span><span class="op" id="3347869">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3347873">&#34;&lt;/script&#34;</span><span class="op" id="3347883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347886"><a href="/html/template/context.go.html#3265811">elementStyle</a></span><span class="op" id="3347898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3347903">&#34;&lt;/style&#34;</span><span class="op" id="3347912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347915"><a href="/html/template/context.go.html#3265891">elementTextarea</a></span><span class="op" id="3347930">:</span>&nbsp;<span class="string" id="3347932">&#34;&lt;/textarea&#34;</span><span class="op" id="3347944">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347947"><a href="/html/template/context.go.html#3265968">elementTitle</a></span><span class="op" id="3347959">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3347964">&#34;&lt;/title&#34;</span><span class="op" id="3347973">,</span><br>
<span class="lineno"></span><span class="op" id="3347975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3347978">//&nbsp;tSpecialTagEnd&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;raw&nbsp;text&nbsp;and&nbsp;RCDATA</span><br>
<span class="lineno"></span><span class="comment" id="3348055">//&nbsp;element&nbsp;states.</span><br>
<span class="lineno">195</span><span class="keyword" id="3348074">func</span>&nbsp;<span class="ident" id="3348079">tSpecialTagEnd</span><span class="op" id="3348093">(</span><span class="ident" id="3348094">c</span>&nbsp;<span class="ident" id="3348096"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348103">,</span>&nbsp;<span class="ident" id="3348105">s</span>&nbsp;<span class="op" id="3348107">[</span><span class="op" id="3348108">]</span><span class="builtintype" id="3348109">byte</span><span class="op" id="3348113">)</span>&nbsp;<span class="op" id="3348115">(</span><span class="ident" id="3348116"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348123">,</span>&nbsp;<span class="builtintype" id="3348125">int</span><span class="op" id="3348128">)</span>&nbsp;<span class="op" id="3348130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348133">if</span>&nbsp;<span class="ident" id="3348136"><a href="/html/template/transition.go.html#3348094">c</a></span><span class="op" id="3348137">.</span><span class="ident" id="3348138">element</span>&nbsp;<span class="op" id="3348146">!=</span>&nbsp;<span class="ident" id="3348149"><a href="/html/template/context.go.html#3265642">elementNone</a></span>&nbsp;<span class="op" id="3348161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348165">if</span>&nbsp;<span class="ident" id="3348168">i</span>&nbsp;<span class="op" id="3348170">:=</span>&nbsp;<span class="ident" id="3348173"><a href="/html/template/transition.go.html#3343345">strings</a></span><span class="op" id="3348180">.</span><span class="ident" id="3348181">Index</span><span class="op" id="3348186">(</span><span class="ident" id="3348187"><a href="/html/template/transition.go.html#3343345">strings</a></span><span class="op" id="3348194">.</span><span class="ident" id="3348195">ToLower</span><span class="op" id="3348202">(</span><span class="builtintype" id="3348203">string</span><span class="op" id="3348209">(</span><span class="ident" id="3348210"><a href="/html/template/transition.go.html#3348105">s</a></span><span class="op" id="3348211">)</span><span class="op" id="3348212">)</span><span class="op" id="3348213">,</span>&nbsp;<span class="ident" id="3348215"><a href="/html/template/transition.go.html#3347819">specialTagEndMarkers</a></span><span class="op" id="3348235">[</span><span class="ident" id="3348236"><a href="/html/template/transition.go.html#3348094">c</a></span><span class="op" id="3348237">.</span><span class="ident" id="3348238">element</span><span class="op" id="3348245">]</span><span class="op" id="3348246">)</span><span class="op" id="3348247">;</span>&nbsp;<span class="ident" id="3348249"><a href="/html/template/transition.go.html#3348168">i</a></span>&nbsp;<span class="op" id="3348251">!=</span>&nbsp;<span class="op" id="3348254">-</span><span class="num" id="3348255">1</span>&nbsp;<span class="op" id="3348257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348262">return</span>&nbsp;<span class="ident" id="3348269"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348276">{</span><span class="op" id="3348277">}</span><span class="op" id="3348278">,</span>&nbsp;<span class="ident" id="3348280"><a href="/html/template/transition.go.html#3348168">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348284">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348290">return</span>&nbsp;<span class="ident" id="3348297"><a href="/html/template/transition.go.html#3348094">c</a></span><span class="op" id="3348298">,</span>&nbsp;<span class="builtinfunc" id="3348300">len</span><span class="op" id="3348303">(</span><span class="ident" id="3348304"><a href="/html/template/transition.go.html#3348105">s</a></span><span class="op" id="3348305">)</span><br>
<span class="lineno"></span><span class="op" id="3348307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3348310">//&nbsp;tAttr&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;attribute&nbsp;state.</span><br>
<span class="lineno">205</span><span class="keyword" id="3348379">func</span>&nbsp;<span class="ident" id="3348384">tAttr</span><span class="op" id="3348389">(</span><span class="ident" id="3348390">c</span>&nbsp;<span class="ident" id="3348392"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348399">,</span>&nbsp;<span class="ident" id="3348401">s</span>&nbsp;<span class="op" id="3348403">[</span><span class="op" id="3348404">]</span><span class="builtintype" id="3348405">byte</span><span class="op" id="3348409">)</span>&nbsp;<span class="op" id="3348411">(</span><span class="ident" id="3348412"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348419">,</span>&nbsp;<span class="builtintype" id="3348421">int</span><span class="op" id="3348424">)</span>&nbsp;<span class="op" id="3348426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348429">return</span>&nbsp;<span class="ident" id="3348436"><a href="/html/template/transition.go.html#3348390">c</a></span><span class="op" id="3348437">,</span>&nbsp;<span class="builtinfunc" id="3348439">len</span><span class="op" id="3348442">(</span><span class="ident" id="3348443"><a href="/html/template/transition.go.html#3348401">s</a></span><span class="op" id="3348444">)</span><br>
<span class="lineno"></span><span class="op" id="3348446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3348449">//&nbsp;tURL&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;URL&nbsp;state.</span><br>
<span class="lineno">210</span><span class="keyword" id="3348511">func</span>&nbsp;<span class="ident" id="3348516">tURL</span><span class="op" id="3348520">(</span><span class="ident" id="3348521">c</span>&nbsp;<span class="ident" id="3348523"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348530">,</span>&nbsp;<span class="ident" id="3348532">s</span>&nbsp;<span class="op" id="3348534">[</span><span class="op" id="3348535">]</span><span class="builtintype" id="3348536">byte</span><span class="op" id="3348540">)</span>&nbsp;<span class="op" id="3348542">(</span><span class="ident" id="3348543"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348550">,</span>&nbsp;<span class="builtintype" id="3348552">int</span><span class="op" id="3348555">)</span>&nbsp;<span class="op" id="3348557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348560">if</span>&nbsp;<span class="ident" id="3348563"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3348568">.</span><span class="ident" id="3348569">IndexAny</span><span class="op" id="3348577">(</span><span class="ident" id="3348578"><a href="/html/template/transition.go.html#3348532">s</a></span><span class="op" id="3348579">,</span>&nbsp;<span class="string" id="3348581">&#34;#?&#34;</span><span class="op" id="3348585">)</span>&nbsp;<span class="op" id="3348587">&gt;=</span>&nbsp;<span class="num" id="3348590">0</span>&nbsp;<span class="op" id="3348592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3348596"><a href="/html/template/transition.go.html#3348521">c</a></span><span class="op" id="3348597">.</span><span class="ident" id="3348598">urlPart</span>&nbsp;<span class="op" id="3348606">=</span>&nbsp;<span class="ident" id="3348608"><a href="/html/template/context.go.html#3264111">urlPartQueryOrFrag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348628">}</span>&nbsp;<span class="keyword" id="3348630">else</span>&nbsp;<span class="keyword" id="3348635">if</span>&nbsp;<span class="builtinfunc" id="3348638">len</span><span class="op" id="3348641">(</span><span class="ident" id="3348642"><a href="/html/template/transition.go.html#3348532">s</a></span><span class="op" id="3348643">)</span>&nbsp;<span class="op" id="3348645">!=</span>&nbsp;<span class="ident" id="3348648"><a href="/html/template/transition.go.html#3357477">eatWhiteSpace</a></span><span class="op" id="3348661">(</span><span class="ident" id="3348662"><a href="/html/template/transition.go.html#3348532">s</a></span><span class="op" id="3348663">,</span>&nbsp;<span class="num" id="3348665">0</span><span class="op" id="3348666">)</span>&nbsp;<span class="op" id="3348668">&amp;&amp;</span>&nbsp;<span class="ident" id="3348671"><a href="/html/template/transition.go.html#3348521">c</a></span><span class="op" id="3348672">.</span><span class="ident" id="3348673">urlPart</span>&nbsp;<span class="op" id="3348681">==</span>&nbsp;<span class="ident" id="3348684"><a href="/html/template/context.go.html#3263847">urlPartNone</a></span>&nbsp;<span class="op" id="3348696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3348700">//&nbsp;HTML5&nbsp;uses&nbsp;&#34;Valid&nbsp;URL&nbsp;potentially&nbsp;surrounded&nbsp;by&nbsp;spaces&#34;&nbsp;for</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3348765">//&nbsp;attrs:&nbsp;http://www.w3.org/TR/html5/index.html#attributes-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3348828"><a href="/html/template/transition.go.html#3348521">c</a></span><span class="op" id="3348829">.</span><span class="ident" id="3348830">urlPart</span>&nbsp;<span class="op" id="3348838">=</span>&nbsp;<span class="ident" id="3348840"><a href="/html/template/context.go.html#3263990">urlPartPreQuery</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348860">return</span>&nbsp;<span class="ident" id="3348867"><a href="/html/template/transition.go.html#3348521">c</a></span><span class="op" id="3348868">,</span>&nbsp;<span class="builtinfunc" id="3348870">len</span><span class="op" id="3348873">(</span><span class="ident" id="3348874"><a href="/html/template/transition.go.html#3348532">s</a></span><span class="op" id="3348875">)</span><br>
<span class="lineno"></span><span class="op" id="3348877">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="3348880">//&nbsp;tJS&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;JS&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="3348940">func</span>&nbsp;<span class="ident" id="3348945">tJS</span><span class="op" id="3348948">(</span><span class="ident" id="3348949">c</span>&nbsp;<span class="ident" id="3348951"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348958">,</span>&nbsp;<span class="ident" id="3348960">s</span>&nbsp;<span class="op" id="3348962">[</span><span class="op" id="3348963">]</span><span class="builtintype" id="3348964">byte</span><span class="op" id="3348968">)</span>&nbsp;<span class="op" id="3348970">(</span><span class="ident" id="3348971"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3348978">,</span>&nbsp;<span class="builtintype" id="3348980">int</span><span class="op" id="3348983">)</span>&nbsp;<span class="op" id="3348985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3348988">i</span>&nbsp;<span class="op" id="3348990">:=</span>&nbsp;<span class="ident" id="3348993"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3348998">.</span><span class="ident" id="3348999">IndexAny</span><span class="op" id="3349007">(</span><span class="ident" id="3349008"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349009">,</span>&nbsp;<span class="string" id="3349011">`&#34;&#39;/`</span><span class="op" id="3349016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349019">if</span>&nbsp;<span class="ident" id="3349022"><a href="/html/template/transition.go.html#3348988">i</a></span>&nbsp;<span class="op" id="3349024">==</span>&nbsp;<span class="op" id="3349027">-</span><span class="num" id="3349028">1</span>&nbsp;<span class="op" id="3349030">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3349034">//&nbsp;Entire&nbsp;input&nbsp;is&nbsp;non&nbsp;string,&nbsp;comment,&nbsp;regexp&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349091"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349092">.</span><span class="ident" id="3349093">jsCtx</span>&nbsp;<span class="op" id="3349099">=</span>&nbsp;<span class="ident" id="3349101"><a href="/html/template/js.go.html#3321301">nextJSCtx</a></span><span class="op" id="3349110">(</span><span class="ident" id="3349111"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349112">,</span>&nbsp;<span class="ident" id="3349114"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349115">.</span><span class="ident" id="3349116">jsCtx</span><span class="op" id="3349121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349125">return</span>&nbsp;<span class="ident" id="3349132"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349133">,</span>&nbsp;<span class="builtinfunc" id="3349135">len</span><span class="op" id="3349138">(</span><span class="ident" id="3349139"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349146"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349147">.</span><span class="ident" id="3349148">jsCtx</span>&nbsp;<span class="op" id="3349154">=</span>&nbsp;<span class="ident" id="3349156"><a href="/html/template/js.go.html#3321301">nextJSCtx</a></span><span class="op" id="3349165">(</span><span class="ident" id="3349166"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349167">[</span><span class="op" id="3349168">:</span><span class="ident" id="3349169"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349170">]</span><span class="op" id="3349171">,</span>&nbsp;<span class="ident" id="3349173"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349174">.</span><span class="ident" id="3349175">jsCtx</span><span class="op" id="3349180">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349183">switch</span>&nbsp;<span class="ident" id="3349190"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349191">[</span><span class="ident" id="3349192"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349193">]</span>&nbsp;<span class="op" id="3349195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349198">case</span>&nbsp;<span class="string" id="3349203">&#39;&#34;&#39;</span><span class="op" id="3349206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349210"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349211">.</span><span class="ident" id="3349212">state</span><span class="op" id="3349217">,</span>&nbsp;<span class="ident" id="3349219"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349220">.</span><span class="ident" id="3349221">jsCtx</span>&nbsp;<span class="op" id="3349227">=</span>&nbsp;<span class="ident" id="3349229"><a href="/html/template/context.go.html#3260245">stateJSDqStr</a></span><span class="op" id="3349241">,</span>&nbsp;<span class="ident" id="3349243"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349256">case</span>&nbsp;<span class="string" id="3349261">&#39;\&#39;&#39;</span><span class="op" id="3349265">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349269"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349270">.</span><span class="ident" id="3349271">state</span><span class="op" id="3349276">,</span>&nbsp;<span class="ident" id="3349278"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349279">.</span><span class="ident" id="3349280">jsCtx</span>&nbsp;<span class="op" id="3349286">=</span>&nbsp;<span class="ident" id="3349288"><a href="/html/template/context.go.html#3260325">stateJSSqStr</a></span><span class="op" id="3349300">,</span>&nbsp;<span class="ident" id="3349302"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349315">case</span>&nbsp;<span class="string" id="3349320">&#39;/&#39;</span><span class="op" id="3349323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349327">switch</span>&nbsp;<span class="op" id="3349334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349338">case</span>&nbsp;<span class="ident" id="3349343"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349344">+</span><span class="num" id="3349345">1</span>&nbsp;<span class="op" id="3349347">&lt;</span>&nbsp;<span class="builtinfunc" id="3349349">len</span><span class="op" id="3349352">(</span><span class="ident" id="3349353"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349354">)</span>&nbsp;<span class="op" id="3349356">&amp;&amp;</span>&nbsp;<span class="ident" id="3349359"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349360">[</span><span class="ident" id="3349361"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349362">+</span><span class="num" id="3349363">1</span><span class="op" id="3349364">]</span>&nbsp;<span class="op" id="3349366">==</span>&nbsp;<span class="string" id="3349369">&#39;/&#39;</span><span class="op" id="3349372">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349377"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349378">.</span><span class="ident" id="3349379">state</span><span class="op" id="3349384">,</span>&nbsp;<span class="ident" id="3349386"><a href="/html/template/transition.go.html#3348988">i</a></span>&nbsp;<span class="op" id="3349388">=</span>&nbsp;<span class="ident" id="3349390"><a href="/html/template/context.go.html#3260563">stateJSLineCmt</a></span><span class="op" id="3349404">,</span>&nbsp;<span class="ident" id="3349406"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349407">+</span><span class="num" id="3349408">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349412">case</span>&nbsp;<span class="ident" id="3349417"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349418">+</span><span class="num" id="3349419">1</span>&nbsp;<span class="op" id="3349421">&lt;</span>&nbsp;<span class="builtinfunc" id="3349423">len</span><span class="op" id="3349426">(</span><span class="ident" id="3349427"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349428">)</span>&nbsp;<span class="op" id="3349430">&amp;&amp;</span>&nbsp;<span class="ident" id="3349433"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349434">[</span><span class="ident" id="3349435"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349436">+</span><span class="num" id="3349437">1</span><span class="op" id="3349438">]</span>&nbsp;<span class="op" id="3349440">==</span>&nbsp;<span class="string" id="3349443">&#39;*&#39;</span><span class="op" id="3349446">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349451"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349452">.</span><span class="ident" id="3349453">state</span><span class="op" id="3349458">,</span>&nbsp;<span class="ident" id="3349460"><a href="/html/template/transition.go.html#3348988">i</a></span>&nbsp;<span class="op" id="3349462">=</span>&nbsp;<span class="ident" id="3349464"><a href="/html/template/context.go.html#3260483">stateJSBlockCmt</a></span><span class="op" id="3349479">,</span>&nbsp;<span class="ident" id="3349481"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349482">+</span><span class="num" id="3349483">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349487">case</span>&nbsp;<span class="ident" id="3349492"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349493">.</span><span class="ident" id="3349494">jsCtx</span>&nbsp;<span class="op" id="3349500">==</span>&nbsp;<span class="ident" id="3349503"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="3349514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349519"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349520">.</span><span class="ident" id="3349521">state</span>&nbsp;<span class="op" id="3349527">=</span>&nbsp;<span class="ident" id="3349529"><a href="/html/template/context.go.html#3260400">stateJSRegexp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349545">case</span>&nbsp;<span class="ident" id="3349550"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349551">.</span><span class="ident" id="3349552">jsCtx</span>&nbsp;<span class="op" id="3349558">==</span>&nbsp;<span class="ident" id="3349561"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="3349571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349576"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349577">.</span><span class="ident" id="3349578">jsCtx</span>&nbsp;<span class="op" id="3349584">=</span>&nbsp;<span class="ident" id="3349586"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349600">default</span><span class="op" id="3349607">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349612">return</span>&nbsp;<span class="ident" id="3349619"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3349626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349632">state</span><span class="op" id="3349637">:</span>&nbsp;<span class="ident" id="3349639"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3349649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349655">err</span><span class="op" id="3349658">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3349662"><a href="/html/template/error.go.html#3287884">errorf</a></span><span class="op" id="3349668">(</span><span class="ident" id="3349669"><a href="/html/template/error.go.html#3287337">ErrSlashAmbig</a></span><span class="op" id="3349682">,</span>&nbsp;<span class="ident" id="3349684">nil</span><span class="op" id="3349687">,</span>&nbsp;<span class="num" id="3349689">0</span><span class="op" id="3349690">,</span>&nbsp;<span class="string" id="3349692">&#34;&#39;/&#39;&nbsp;could&nbsp;start&nbsp;a&nbsp;division&nbsp;or&nbsp;regexp:&nbsp;%.32q&#34;</span><span class="op" id="3349737">,</span>&nbsp;<span class="ident" id="3349739"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349740">[</span><span class="ident" id="3349741"><a href="/html/template/transition.go.html#3348988">i</a></span><span class="op" id="3349742">:</span><span class="op" id="3349743">]</span><span class="op" id="3349744">)</span><span class="op" id="3349745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349750">}</span><span class="op" id="3349751">,</span>&nbsp;<span class="builtinfunc" id="3349753">len</span><span class="op" id="3349756">(</span><span class="ident" id="3349757"><a href="/html/template/transition.go.html#3348960">s</a></span><span class="op" id="3349758">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349765">default</span><span class="op" id="3349772">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3349776">panic</span><span class="op" id="3349781">(</span><span class="string" id="3349782">&#34;unreachable&#34;</span><span class="op" id="3349795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349801">return</span>&nbsp;<span class="ident" id="3349808"><a href="/html/template/transition.go.html#3348949">c</a></span><span class="op" id="3349809">,</span>&nbsp;<span class="ident" id="3349811"><a href="/html/template/transition.go.html#3348988">i</a></span>&nbsp;<span class="op" id="3349813">+</span>&nbsp;<span class="num" id="3349815">1</span><br>
<span class="lineno">255</span><span class="op" id="3349817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3349820">//&nbsp;tJSDelimited&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;JS&nbsp;string&nbsp;and&nbsp;regexp</span><br>
<span class="lineno"></span><span class="comment" id="3349900">//&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="3349911">func</span>&nbsp;<span class="ident" id="3349916">tJSDelimited</span><span class="op" id="3349928">(</span><span class="ident" id="3349929">c</span>&nbsp;<span class="ident" id="3349931"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3349938">,</span>&nbsp;<span class="ident" id="3349940">s</span>&nbsp;<span class="op" id="3349942">[</span><span class="op" id="3349943">]</span><span class="builtintype" id="3349944">byte</span><span class="op" id="3349948">)</span>&nbsp;<span class="op" id="3349950">(</span><span class="ident" id="3349951"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3349958">,</span>&nbsp;<span class="builtintype" id="3349960">int</span><span class="op" id="3349963">)</span>&nbsp;<span class="op" id="3349965">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349968">specials</span>&nbsp;<span class="op" id="3349977">:=</span>&nbsp;<span class="string" id="3349980">`\&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349986">switch</span>&nbsp;<span class="ident" id="3349993"><a href="/html/template/transition.go.html#3349929">c</a></span><span class="op" id="3349994">.</span><span class="ident" id="3349995">state</span>&nbsp;<span class="op" id="3350001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350004">case</span>&nbsp;<span class="ident" id="3350009"><a href="/html/template/context.go.html#3260325">stateJSSqStr</a></span><span class="op" id="3350021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350025"><a href="/html/template/transition.go.html#3349968">specials</a></span>&nbsp;<span class="op" id="3350034">=</span>&nbsp;<span class="string" id="3350036">`\&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350042">case</span>&nbsp;<span class="ident" id="3350047"><a href="/html/template/context.go.html#3260400">stateJSRegexp</a></span><span class="op" id="3350060">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350064"><a href="/html/template/transition.go.html#3349968">specials</a></span>&nbsp;<span class="op" id="3350073">=</span>&nbsp;<span class="string" id="3350075">`\/[]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350087">k</span><span class="op" id="3350088">,</span>&nbsp;<span class="ident" id="3350090">inCharset</span>&nbsp;<span class="op" id="3350100">:=</span>&nbsp;<span class="num" id="3350103">0</span><span class="op" id="3350104">,</span>&nbsp;<span class="ident" id="3350106">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350113">for</span>&nbsp;<span class="op" id="3350117">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350121">i</span>&nbsp;<span class="op" id="3350123">:=</span>&nbsp;<span class="ident" id="3350126"><a href="/html/template/transition.go.html#3350087">k</a></span>&nbsp;<span class="op" id="3350128">+</span>&nbsp;<span class="ident" id="3350130"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3350135">.</span><span class="ident" id="3350136">IndexAny</span><span class="op" id="3350144">(</span><span class="ident" id="3350145"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350146">[</span><span class="ident" id="3350147"><a href="/html/template/transition.go.html#3350087">k</a></span><span class="op" id="3350148">:</span><span class="op" id="3350149">]</span><span class="op" id="3350150">,</span>&nbsp;<span class="ident" id="3350152"><a href="/html/template/transition.go.html#3349968">specials</a></span><span class="op" id="3350160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350164">if</span>&nbsp;<span class="ident" id="3350167"><a href="/html/template/transition.go.html#3350121">i</a></span>&nbsp;<span class="op" id="3350169">&lt;</span>&nbsp;<span class="ident" id="3350171"><a href="/html/template/transition.go.html#3350087">k</a></span>&nbsp;<span class="op" id="3350173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350178">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350190">switch</span>&nbsp;<span class="ident" id="3350197"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350198">[</span><span class="ident" id="3350199"><a href="/html/template/transition.go.html#3350121">i</a></span><span class="op" id="3350200">]</span>&nbsp;<span class="op" id="3350202">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350206">case</span>&nbsp;<span class="string" id="3350211">&#39;\\&#39;</span><span class="op" id="3350215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350220"><a href="/html/template/transition.go.html#3350121">i</a></span><span class="op" id="3350221">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350227">if</span>&nbsp;<span class="ident" id="3350230"><a href="/html/template/transition.go.html#3350121">i</a></span>&nbsp;<span class="op" id="3350232">==</span>&nbsp;<span class="builtinfunc" id="3350235">len</span><span class="op" id="3350238">(</span><span class="ident" id="3350239"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350240">)</span>&nbsp;<span class="op" id="3350242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350248">return</span>&nbsp;<span class="ident" id="3350255"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3350262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350269">state</span><span class="op" id="3350274">:</span>&nbsp;<span class="ident" id="3350276"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3350286">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350293">err</span><span class="op" id="3350296">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3350300"><a href="/html/template/error.go.html#3287884">errorf</a></span><span class="op" id="3350306">(</span><span class="ident" id="3350307"><a href="/html/template/error.go.html#3286187">ErrPartialEscape</a></span><span class="op" id="3350323">,</span>&nbsp;<span class="ident" id="3350325">nil</span><span class="op" id="3350328">,</span>&nbsp;<span class="num" id="3350330">0</span><span class="op" id="3350331">,</span>&nbsp;<span class="string" id="3350333">&#34;unfinished&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;JS&nbsp;string:&nbsp;%q&#34;</span><span class="op" id="3350378">,</span>&nbsp;<span class="ident" id="3350380"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350381">)</span><span class="op" id="3350382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350388">}</span><span class="op" id="3350389">,</span>&nbsp;<span class="builtinfunc" id="3350391">len</span><span class="op" id="3350394">(</span><span class="ident" id="3350395"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350405">case</span>&nbsp;<span class="string" id="3350410">&#39;[&#39;</span><span class="op" id="3350413">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350418"><a href="/html/template/transition.go.html#3350090">inCharset</a></span>&nbsp;<span class="op" id="3350428">=</span>&nbsp;<span class="ident" id="3350430">true</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350437">case</span>&nbsp;<span class="string" id="3350442">&#39;]&#39;</span><span class="op" id="3350445">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350450"><a href="/html/template/transition.go.html#3350090">inCharset</a></span>&nbsp;<span class="op" id="3350460">=</span>&nbsp;<span class="ident" id="3350462">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350470">default</span><span class="op" id="3350477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3350482">//&nbsp;end&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350502">if</span>&nbsp;<span class="op" id="3350505">!</span><span class="ident" id="3350506"><a href="/html/template/transition.go.html#3350090">inCharset</a></span>&nbsp;<span class="op" id="3350516">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350522"><a href="/html/template/transition.go.html#3349929">c</a></span><span class="op" id="3350523">.</span><span class="ident" id="3350524">state</span><span class="op" id="3350529">,</span>&nbsp;<span class="ident" id="3350531"><a href="/html/template/transition.go.html#3349929">c</a></span><span class="op" id="3350532">.</span><span class="ident" id="3350533">jsCtx</span>&nbsp;<span class="op" id="3350539">=</span>&nbsp;<span class="ident" id="3350541"><a href="/html/template/context.go.html#3260170">stateJS</a></span><span class="op" id="3350548">,</span>&nbsp;<span class="ident" id="3350550"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350565">return</span>&nbsp;<span class="ident" id="3350572"><a href="/html/template/transition.go.html#3349929">c</a></span><span class="op" id="3350573">,</span>&nbsp;<span class="ident" id="3350575"><a href="/html/template/transition.go.html#3350121">i</a></span>&nbsp;<span class="op" id="3350577">+</span>&nbsp;<span class="num" id="3350579">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350592"><a href="/html/template/transition.go.html#3350087">k</a></span>&nbsp;<span class="op" id="3350594">=</span>&nbsp;<span class="ident" id="3350596"><a href="/html/template/transition.go.html#3350121">i</a></span>&nbsp;<span class="op" id="3350598">+</span>&nbsp;<span class="num" id="3350600">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350607">if</span>&nbsp;<span class="ident" id="3350610"><a href="/html/template/transition.go.html#3350090">inCharset</a></span>&nbsp;<span class="op" id="3350620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3350624">//&nbsp;This&nbsp;can&nbsp;be&nbsp;fixed&nbsp;by&nbsp;making&nbsp;context&nbsp;richer&nbsp;if&nbsp;interpolation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3350689">//&nbsp;into&nbsp;charsets&nbsp;is&nbsp;desired.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350720">return</span>&nbsp;<span class="ident" id="3350727"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3350734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350739">state</span><span class="op" id="3350744">:</span>&nbsp;<span class="ident" id="3350746"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3350756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350761">err</span><span class="op" id="3350764">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3350768"><a href="/html/template/error.go.html#3287884">errorf</a></span><span class="op" id="3350774">(</span><span class="ident" id="3350775"><a href="/html/template/error.go.html#3285698">ErrPartialCharset</a></span><span class="op" id="3350792">,</span>&nbsp;<span class="ident" id="3350794">nil</span><span class="op" id="3350797">,</span>&nbsp;<span class="num" id="3350799">0</span><span class="op" id="3350800">,</span>&nbsp;<span class="string" id="3350802">&#34;unfinished&nbsp;JS&nbsp;regexp&nbsp;charset:&nbsp;%q&#34;</span><span class="op" id="3350836">,</span>&nbsp;<span class="ident" id="3350838"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350839">)</span><span class="op" id="3350840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350844">}</span><span class="op" id="3350845">,</span>&nbsp;<span class="builtinfunc" id="3350847">len</span><span class="op" id="3350850">(</span><span class="ident" id="3350851"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3350855">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350859">return</span>&nbsp;<span class="ident" id="3350866"><a href="/html/template/transition.go.html#3349929">c</a></span><span class="op" id="3350867">,</span>&nbsp;<span class="builtinfunc" id="3350869">len</span><span class="op" id="3350872">(</span><span class="ident" id="3350873"><a href="/html/template/transition.go.html#3349940">s</a></span><span class="op" id="3350874">)</span><br>
<span class="lineno"></span><span class="op" id="3350876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3350879">var</span>&nbsp;<span class="ident" id="3350883">blockCommentEnd</span>&nbsp;<span class="op" id="3350899">=</span>&nbsp;<span class="op" id="3350901">[</span><span class="op" id="3350902">]</span><span class="builtintype" id="3350903">byte</span><span class="op" id="3350907">(</span><span class="string" id="3350908">&#34;*/&#34;</span><span class="op" id="3350912">)</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="comment" id="3350915">//&nbsp;tBlockCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;/*comment*/&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="3350987">func</span>&nbsp;<span class="ident" id="3350992">tBlockCmt</span><span class="op" id="3351001">(</span><span class="ident" id="3351002">c</span>&nbsp;<span class="ident" id="3351004"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3351011">,</span>&nbsp;<span class="ident" id="3351013">s</span>&nbsp;<span class="op" id="3351015">[</span><span class="op" id="3351016">]</span><span class="builtintype" id="3351017">byte</span><span class="op" id="3351021">)</span>&nbsp;<span class="op" id="3351023">(</span><span class="ident" id="3351024"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3351031">,</span>&nbsp;<span class="builtintype" id="3351033">int</span><span class="op" id="3351036">)</span>&nbsp;<span class="op" id="3351038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3351041">i</span>&nbsp;<span class="op" id="3351043">:=</span>&nbsp;<span class="ident" id="3351046"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3351051">.</span><span class="ident" id="3351052">Index</span><span class="op" id="3351057">(</span><span class="ident" id="3351058"><a href="/html/template/transition.go.html#3351013">s</a></span><span class="op" id="3351059">,</span>&nbsp;<span class="ident" id="3351061"><a href="/html/template/transition.go.html#3350883">blockCommentEnd</a></span><span class="op" id="3351076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351079">if</span>&nbsp;<span class="ident" id="3351082"><a href="/html/template/transition.go.html#3351041">i</a></span>&nbsp;<span class="op" id="3351084">==</span>&nbsp;<span class="op" id="3351087">-</span><span class="num" id="3351088">1</span>&nbsp;<span class="op" id="3351090">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351094">return</span>&nbsp;<span class="ident" id="3351101"><a href="/html/template/transition.go.html#3351002">c</a></span><span class="op" id="3351102">,</span>&nbsp;<span class="builtinfunc" id="3351104">len</span><span class="op" id="3351107">(</span><span class="ident" id="3351108"><a href="/html/template/transition.go.html#3351013">s</a></span><span class="op" id="3351109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3351112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351115">switch</span>&nbsp;<span class="ident" id="3351122"><a href="/html/template/transition.go.html#3351002">c</a></span><span class="op" id="3351123">.</span><span class="ident" id="3351124">state</span>&nbsp;<span class="op" id="3351130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351133">case</span>&nbsp;<span class="ident" id="3351138"><a href="/html/template/context.go.html#3260483">stateJSBlockCmt</a></span><span class="op" id="3351153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3351157"><a href="/html/template/transition.go.html#3351002">c</a></span><span class="op" id="3351158">.</span><span class="ident" id="3351159">state</span>&nbsp;<span class="op" id="3351165">=</span>&nbsp;<span class="ident" id="3351167"><a href="/html/template/context.go.html#3260170">stateJS</a></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351176">case</span>&nbsp;<span class="ident" id="3351181"><a href="/html/template/context.go.html#3261092">stateCSSBlockCmt</a></span><span class="op" id="3351197">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3351201"><a href="/html/template/transition.go.html#3351002">c</a></span><span class="op" id="3351202">.</span><span class="ident" id="3351203">state</span>&nbsp;<span class="op" id="3351209">=</span>&nbsp;<span class="ident" id="3351211"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351221">default</span><span class="op" id="3351228">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3351232">panic</span><span class="op" id="3351237">(</span><span class="ident" id="3351238"><a href="/html/template/transition.go.html#3351002">c</a></span><span class="op" id="3351239">.</span><span class="ident" id="3351240">state</span><span class="op" id="3351245">.</span><span class="ident" id="3351246">String</span><span class="op" id="3351252">(</span><span class="op" id="3351253">)</span><span class="op" id="3351254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3351257">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351260">return</span>&nbsp;<span class="ident" id="3351267"><a href="/html/template/transition.go.html#3351002">c</a></span><span class="op" id="3351268">,</span>&nbsp;<span class="ident" id="3351270"><a href="/html/template/transition.go.html#3351041">i</a></span>&nbsp;<span class="op" id="3351272">+</span>&nbsp;<span class="num" id="3351274">2</span><br>
<span class="lineno"></span><span class="op" id="3351276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3351279">//&nbsp;tLineCmt&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;//comment&nbsp;states.</span><br>
<span class="lineno"></span><span class="keyword" id="3351348">func</span>&nbsp;<span class="ident" id="3351353">tLineCmt</span><span class="op" id="3351361">(</span><span class="ident" id="3351362">c</span>&nbsp;<span class="ident" id="3351364"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3351371">,</span>&nbsp;<span class="ident" id="3351373">s</span>&nbsp;<span class="op" id="3351375">[</span><span class="op" id="3351376">]</span><span class="builtintype" id="3351377">byte</span><span class="op" id="3351381">)</span>&nbsp;<span class="op" id="3351383">(</span><span class="ident" id="3351384"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3351391">,</span>&nbsp;<span class="builtintype" id="3351393">int</span><span class="op" id="3351396">)</span>&nbsp;<span class="op" id="3351398">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351401">var</span>&nbsp;<span class="ident" id="3351405">lineTerminators</span>&nbsp;<span class="builtintype" id="3351421">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351429">var</span>&nbsp;<span class="ident" id="3351433">endState</span>&nbsp;<span class="ident" id="3351442"><a href="/html/template/context.go.html#3259016">state</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351449">switch</span>&nbsp;<span class="ident" id="3351456"><a href="/html/template/transition.go.html#3351362">c</a></span><span class="op" id="3351457">.</span><span class="ident" id="3351458">state</span>&nbsp;<span class="op" id="3351464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351467">case</span>&nbsp;<span class="ident" id="3351472"><a href="/html/template/context.go.html#3260563">stateJSLineCmt</a></span><span class="op" id="3351486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3351490"><a href="/html/template/transition.go.html#3351405">lineTerminators</a></span><span class="op" id="3351505">,</span>&nbsp;<span class="ident" id="3351507"><a href="/html/template/transition.go.html#3351433">endState</a></span>&nbsp;<span class="op" id="3351516">=</span>&nbsp;<span class="string" id="3351518">&#34;\n\r\u2028\u2029&#34;</span><span class="op" id="3351536">,</span>&nbsp;<span class="ident" id="3351538"><a href="/html/template/context.go.html#3260170">stateJS</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351547">case</span>&nbsp;<span class="ident" id="3351552"><a href="/html/template/context.go.html#3261167">stateCSSLineCmt</a></span><span class="op" id="3351567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3351571"><a href="/html/template/transition.go.html#3351405">lineTerminators</a></span><span class="op" id="3351586">,</span>&nbsp;<span class="ident" id="3351588"><a href="/html/template/transition.go.html#3351433">endState</a></span>&nbsp;<span class="op" id="3351597">=</span>&nbsp;<span class="string" id="3351599">&#34;\n\f\r&#34;</span><span class="op" id="3351607">,</span>&nbsp;<span class="ident" id="3351609"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351620">//&nbsp;Line&nbsp;comments&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;any&nbsp;published&nbsp;CSS&nbsp;standard&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351686">//&nbsp;are&nbsp;supported&nbsp;by&nbsp;the&nbsp;4&nbsp;major&nbsp;browsers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351730">//&nbsp;This&nbsp;defines&nbsp;line&nbsp;comments&nbsp;as</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351765">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LINECOMMENT&nbsp;::=&nbsp;&#34;//&#34;&nbsp;[^\n\f\d]*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351806">//&nbsp;since&nbsp;http://www.w3.org/TR/css3-syntax/#SUBTOK-nl&nbsp;defines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351869">//&nbsp;newlines:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3351884">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nl&nbsp;::=&nbsp;#xA&nbsp;|&nbsp;#xD&nbsp;#xA&nbsp;|&nbsp;#xD&nbsp;|&nbsp;#xC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3351925">default</span><span class="op" id="3351932">:</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3351936">panic</span><span class="op" id="3351941">(</span><span class="ident" id="3351942"><a href="/html/template/transition.go.html#3351362">c</a></span><span class="op" id="3351943">.</span><span class="ident" id="3351944">state</span><span class="op" id="3351949">.</span><span class="ident" id="3351950">String</span><span class="op" id="3351956">(</span><span class="op" id="3351957">)</span><span class="op" id="3351958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3351961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3351965">i</span>&nbsp;<span class="op" id="3351967">:=</span>&nbsp;<span class="ident" id="3351970"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3351975">.</span><span class="ident" id="3351976">IndexAny</span><span class="op" id="3351984">(</span><span class="ident" id="3351985"><a href="/html/template/transition.go.html#3351373">s</a></span><span class="op" id="3351986">,</span>&nbsp;<span class="ident" id="3351988"><a href="/html/template/transition.go.html#3351405">lineTerminators</a></span><span class="op" id="3352003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3352006">if</span>&nbsp;<span class="ident" id="3352009"><a href="/html/template/transition.go.html#3351965">i</a></span>&nbsp;<span class="op" id="3352011">==</span>&nbsp;<span class="op" id="3352014">-</span><span class="num" id="3352015">1</span>&nbsp;<span class="op" id="3352017">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3352021">return</span>&nbsp;<span class="ident" id="3352028"><a href="/html/template/transition.go.html#3351362">c</a></span><span class="op" id="3352029">,</span>&nbsp;<span class="builtinfunc" id="3352031">len</span><span class="op" id="3352034">(</span><span class="ident" id="3352035"><a href="/html/template/transition.go.html#3351373">s</a></span><span class="op" id="3352036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3352039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3352042"><a href="/html/template/transition.go.html#3351362">c</a></span><span class="op" id="3352043">.</span><span class="ident" id="3352044">state</span>&nbsp;<span class="op" id="3352050">=</span>&nbsp;<span class="ident" id="3352052"><a href="/html/template/transition.go.html#3351433">endState</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352062">//&nbsp;Per&nbsp;section&nbsp;7.4&nbsp;of&nbsp;EcmaScript&nbsp;5&nbsp;:&nbsp;http://es5.github.com/#x7.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352128">//&nbsp;&#34;However,&nbsp;the&nbsp;LineTerminator&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;line&nbsp;is&nbsp;not</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352191">//&nbsp;considered&nbsp;to&nbsp;be&nbsp;part&nbsp;of&nbsp;the&nbsp;single-line&nbsp;comment;&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352251">//&nbsp;recognized&nbsp;separately&nbsp;by&nbsp;the&nbsp;lexical&nbsp;grammar&nbsp;and&nbsp;becomes&nbsp;part</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352317">//&nbsp;of&nbsp;the&nbsp;stream&nbsp;of&nbsp;input&nbsp;elements&nbsp;for&nbsp;the&nbsp;syntactic&nbsp;grammar.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3352381">return</span>&nbsp;<span class="ident" id="3352388"><a href="/html/template/transition.go.html#3351362">c</a></span><span class="op" id="3352389">,</span>&nbsp;<span class="ident" id="3352391"><a href="/html/template/transition.go.html#3351965">i</a></span><br>
<span class="lineno"></span><span class="op" id="3352393">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="3352396">//&nbsp;tCSS&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;CSS&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="3352458">func</span>&nbsp;<span class="ident" id="3352463">tCSS</span><span class="op" id="3352467">(</span><span class="ident" id="3352468">c</span>&nbsp;<span class="ident" id="3352470"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3352477">,</span>&nbsp;<span class="ident" id="3352479">s</span>&nbsp;<span class="op" id="3352481">[</span><span class="op" id="3352482">]</span><span class="builtintype" id="3352483">byte</span><span class="op" id="3352487">)</span>&nbsp;<span class="op" id="3352489">(</span><span class="ident" id="3352490"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3352497">,</span>&nbsp;<span class="builtintype" id="3352499">int</span><span class="op" id="3352502">)</span>&nbsp;<span class="op" id="3352504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352507">//&nbsp;CSS&nbsp;quoted&nbsp;strings&nbsp;are&nbsp;almost&nbsp;never&nbsp;used&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352564">//&nbsp;(1)&nbsp;URLs&nbsp;as&nbsp;in&nbsp;background:&nbsp;&#34;/foo.png&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352606">//&nbsp;(2)&nbsp;Multiword&nbsp;font-names&nbsp;as&nbsp;in&nbsp;font-family:&nbsp;&#34;Times&nbsp;New&nbsp;Roman&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352672">//&nbsp;(3)&nbsp;List&nbsp;separators&nbsp;in&nbsp;content&nbsp;values&nbsp;as&nbsp;in&nbsp;inline-lists:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352734">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352749">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;{&nbsp;list-style:&nbsp;none;&nbsp;padding:0&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352802">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li&nbsp;{&nbsp;display:&nbsp;inline&nbsp;}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352848">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li:before&nbsp;{&nbsp;content:&nbsp;&#34;,&nbsp;&#34;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352899">//&nbsp;&nbsp;&nbsp;&nbsp;ul.inlineList&nbsp;&gt;&nbsp;li:first-child:before&nbsp;{&nbsp;content:&nbsp;&#34;&#34;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352960">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3352976">//&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&nbsp;class=inlineList&gt;&lt;li&gt;One&lt;li&gt;Two&lt;li&gt;Three&lt;/ul&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353033">//&nbsp;(4)&nbsp;Attribute&nbsp;value&nbsp;selectors&nbsp;as&nbsp;in&nbsp;a[href=&#34;http://example.com/&#34;]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353103">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353107">//&nbsp;We&nbsp;conservatively&nbsp;treat&nbsp;all&nbsp;strings&nbsp;as&nbsp;URLs,&nbsp;but&nbsp;make&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353170">//&nbsp;allowances&nbsp;to&nbsp;avoid&nbsp;confusion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353205">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353209">//&nbsp;In&nbsp;(1),&nbsp;our&nbsp;conservative&nbsp;assumption&nbsp;is&nbsp;justified.</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353263">//&nbsp;In&nbsp;(2),&nbsp;valid&nbsp;font&nbsp;names&nbsp;do&nbsp;not&nbsp;contain&nbsp;&#39;:&#39;,&nbsp;&#39;?&#39;,&nbsp;or&nbsp;&#39;#&#39;,&nbsp;so&nbsp;our</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353332">//&nbsp;conservative&nbsp;assumption&nbsp;is&nbsp;fine&nbsp;since&nbsp;we&nbsp;will&nbsp;never&nbsp;transition&nbsp;past</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353404">//&nbsp;urlPartPreQuery.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353425">//&nbsp;In&nbsp;(3),&nbsp;our&nbsp;protocol&nbsp;heuristic&nbsp;should&nbsp;not&nbsp;be&nbsp;tripped,&nbsp;and&nbsp;there</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353493">//&nbsp;should&nbsp;not&nbsp;be&nbsp;non-space&nbsp;content&nbsp;after&nbsp;a&nbsp;&#39;?&#39;&nbsp;or&nbsp;&#39;#&#39;,&nbsp;so&nbsp;as&nbsp;long&nbsp;as</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353563">//&nbsp;we&nbsp;only&nbsp;%-encode&nbsp;RFC&nbsp;3986&nbsp;reserved&nbsp;characters&nbsp;we&nbsp;are&nbsp;ok.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353624">//&nbsp;In&nbsp;(4),&nbsp;we&nbsp;should&nbsp;URL&nbsp;escape&nbsp;for&nbsp;URL&nbsp;attributes,&nbsp;and&nbsp;for&nbsp;others&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353695">//&nbsp;have&nbsp;the&nbsp;attribute&nbsp;name&nbsp;available&nbsp;if&nbsp;our&nbsp;conservative&nbsp;assumption</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353764">//&nbsp;proves&nbsp;problematic&nbsp;for&nbsp;real&nbsp;code.</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3353803">k</span>&nbsp;<span class="op" id="3353805">:=</span>&nbsp;<span class="num" id="3353808">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3353811">for</span>&nbsp;<span class="op" id="3353815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3353819">i</span>&nbsp;<span class="op" id="3353821">:=</span>&nbsp;<span class="ident" id="3353824"><a href="/html/template/transition.go.html#3353803">k</a></span>&nbsp;<span class="op" id="3353826">+</span>&nbsp;<span class="ident" id="3353828"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3353833">.</span><span class="ident" id="3353834">IndexAny</span><span class="op" id="3353842">(</span><span class="ident" id="3353843"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3353844">[</span><span class="ident" id="3353845"><a href="/html/template/transition.go.html#3353803">k</a></span><span class="op" id="3353846">:</span><span class="op" id="3353847">]</span><span class="op" id="3353848">,</span>&nbsp;<span class="string" id="3353850">`(&#34;&#39;/`</span><span class="op" id="3353856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3353860">if</span>&nbsp;<span class="ident" id="3353863"><a href="/html/template/transition.go.html#3353819">i</a></span>&nbsp;<span class="op" id="3353865">&lt;</span>&nbsp;<span class="ident" id="3353867"><a href="/html/template/transition.go.html#3353803">k</a></span>&nbsp;<span class="op" id="3353869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3353874">return</span>&nbsp;<span class="ident" id="3353881"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3353882">,</span>&nbsp;<span class="builtinfunc" id="3353884">len</span><span class="op" id="3353887">(</span><span class="ident" id="3353888"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3353889">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3353893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3353897">switch</span>&nbsp;<span class="ident" id="3353904"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3353905">[</span><span class="ident" id="3353906"><a href="/html/template/transition.go.html#3353819">i</a></span><span class="op" id="3353907">]</span>&nbsp;<span class="op" id="3353909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3353913">case</span>&nbsp;<span class="string" id="3353918">&#39;(&#39;</span><span class="op" id="3353921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3353926">//&nbsp;Look&nbsp;for&nbsp;url&nbsp;to&nbsp;the&nbsp;left.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3353958">p</span>&nbsp;<span class="op" id="3353960">:=</span>&nbsp;<span class="ident" id="3353963"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3353968">.</span><span class="ident" id="3353969">TrimRight</span><span class="op" id="3353978">(</span><span class="ident" id="3353979"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3353980">[</span><span class="op" id="3353981">:</span><span class="ident" id="3353982"><a href="/html/template/transition.go.html#3353819">i</a></span><span class="op" id="3353983">]</span><span class="op" id="3353984">,</span>&nbsp;<span class="string" id="3353986">&#34;\t\n\f\r&nbsp;&#34;</span><span class="op" id="3353997">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354002">if</span>&nbsp;<span class="ident" id="3354005"><a href="/html/template/css.go.html#3267373">endsWithCSSKeyword</a></span><span class="op" id="3354023">(</span><span class="ident" id="3354024"><a href="/html/template/transition.go.html#3353958">p</a></span><span class="op" id="3354025">,</span>&nbsp;<span class="string" id="3354027">&#34;url&#34;</span><span class="op" id="3354032">)</span>&nbsp;<span class="op" id="3354034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354040">j</span>&nbsp;<span class="op" id="3354042">:=</span>&nbsp;<span class="builtinfunc" id="3354045">len</span><span class="op" id="3354048">(</span><span class="ident" id="3354049"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354050">)</span>&nbsp;<span class="op" id="3354052">-</span>&nbsp;<span class="builtinfunc" id="3354054">len</span><span class="op" id="3354057">(</span><span class="ident" id="3354058"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3354063">.</span><span class="ident" id="3354064">TrimLeft</span><span class="op" id="3354072">(</span><span class="ident" id="3354073"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354074">[</span><span class="ident" id="3354075"><a href="/html/template/transition.go.html#3353819">i</a></span><span class="op" id="3354076">+</span><span class="num" id="3354077">1</span><span class="op" id="3354078">:</span><span class="op" id="3354079">]</span><span class="op" id="3354080">,</span>&nbsp;<span class="string" id="3354082">&#34;\t\n\f\r&nbsp;&#34;</span><span class="op" id="3354093">)</span><span class="op" id="3354094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354100">switch</span>&nbsp;<span class="op" id="3354107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354113">case</span>&nbsp;<span class="ident" id="3354118"><a href="/html/template/transition.go.html#3354040">j</a></span>&nbsp;<span class="op" id="3354120">!=</span>&nbsp;<span class="builtinfunc" id="3354123">len</span><span class="op" id="3354126">(</span><span class="ident" id="3354127"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354128">)</span>&nbsp;<span class="op" id="3354130">&amp;&amp;</span>&nbsp;<span class="ident" id="3354133"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354134">[</span><span class="ident" id="3354135"><a href="/html/template/transition.go.html#3354040">j</a></span><span class="op" id="3354136">]</span>&nbsp;<span class="op" id="3354138">==</span>&nbsp;<span class="string" id="3354141">&#39;&#34;&#39;</span><span class="op" id="3354144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354151"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354152">.</span><span class="ident" id="3354153">state</span><span class="op" id="3354158">,</span>&nbsp;<span class="ident" id="3354160"><a href="/html/template/transition.go.html#3354040">j</a></span>&nbsp;<span class="op" id="3354162">=</span>&nbsp;<span class="ident" id="3354164"><a href="/html/template/context.go.html#3260868">stateCSSDqURL</a></span><span class="op" id="3354177">,</span>&nbsp;<span class="ident" id="3354179"><a href="/html/template/transition.go.html#3354040">j</a></span><span class="op" id="3354180">+</span><span class="num" id="3354181">1</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354187">case</span>&nbsp;<span class="ident" id="3354192"><a href="/html/template/transition.go.html#3354040">j</a></span>&nbsp;<span class="op" id="3354194">!=</span>&nbsp;<span class="builtinfunc" id="3354197">len</span><span class="op" id="3354200">(</span><span class="ident" id="3354201"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354202">)</span>&nbsp;<span class="op" id="3354204">&amp;&amp;</span>&nbsp;<span class="ident" id="3354207"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354208">[</span><span class="ident" id="3354209"><a href="/html/template/transition.go.html#3354040">j</a></span><span class="op" id="3354210">]</span>&nbsp;<span class="op" id="3354212">==</span>&nbsp;<span class="string" id="3354215">&#39;\&#39;&#39;</span><span class="op" id="3354219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354226"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354227">.</span><span class="ident" id="3354228">state</span><span class="op" id="3354233">,</span>&nbsp;<span class="ident" id="3354235"><a href="/html/template/transition.go.html#3354040">j</a></span>&nbsp;<span class="op" id="3354237">=</span>&nbsp;<span class="ident" id="3354239"><a href="/html/template/context.go.html#3260947">stateCSSSqURL</a></span><span class="op" id="3354252">,</span>&nbsp;<span class="ident" id="3354254"><a href="/html/template/transition.go.html#3354040">j</a></span><span class="op" id="3354255">+</span><span class="num" id="3354256">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354262">default</span><span class="op" id="3354269">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354276"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354277">.</span><span class="ident" id="3354278">state</span>&nbsp;<span class="op" id="3354284">=</span>&nbsp;<span class="ident" id="3354286"><a href="/html/template/context.go.html#3261017">stateCSSURL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3354302">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354308">return</span>&nbsp;<span class="ident" id="3354315"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354316">,</span>&nbsp;<span class="ident" id="3354318"><a href="/html/template/transition.go.html#3354040">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3354323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354327">case</span>&nbsp;<span class="string" id="3354332">&#39;/&#39;</span><span class="op" id="3354335">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354340">if</span>&nbsp;<span class="ident" id="3354343"><a href="/html/template/transition.go.html#3353819">i</a></span><span class="op" id="3354344">+</span><span class="num" id="3354345">1</span>&nbsp;<span class="op" id="3354347">&lt;</span>&nbsp;<span class="builtinfunc" id="3354349">len</span><span class="op" id="3354352">(</span><span class="ident" id="3354353"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354354">)</span>&nbsp;<span class="op" id="3354356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354362">switch</span>&nbsp;<span class="ident" id="3354369"><a href="/html/template/transition.go.html#3352479">s</a></span><span class="op" id="3354370">[</span><span class="ident" id="3354371"><a href="/html/template/transition.go.html#3353819">i</a></span><span class="op" id="3354372">+</span><span class="num" id="3354373">1</span><span class="op" id="3354374">]</span>&nbsp;<span class="op" id="3354376">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354382">case</span>&nbsp;<span class="string" id="3354387">&#39;/&#39;</span><span class="op" id="3354390">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354397"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354398">.</span><span class="ident" id="3354399">state</span>&nbsp;<span class="op" id="3354405">=</span>&nbsp;<span class="ident" id="3354407"><a href="/html/template/context.go.html#3261167">stateCSSLineCmt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354428">return</span>&nbsp;<span class="ident" id="3354435"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354436">,</span>&nbsp;<span class="ident" id="3354438"><a href="/html/template/transition.go.html#3353819">i</a></span>&nbsp;<span class="op" id="3354440">+</span>&nbsp;<span class="num" id="3354442">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354448">case</span>&nbsp;<span class="string" id="3354453">&#39;*&#39;</span><span class="op" id="3354456">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354463"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354464">.</span><span class="ident" id="3354465">state</span>&nbsp;<span class="op" id="3354471">=</span>&nbsp;<span class="ident" id="3354473"><a href="/html/template/context.go.html#3261092">stateCSSBlockCmt</a></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354495">return</span>&nbsp;<span class="ident" id="3354502"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354503">,</span>&nbsp;<span class="ident" id="3354505"><a href="/html/template/transition.go.html#3353819">i</a></span>&nbsp;<span class="op" id="3354507">+</span>&nbsp;<span class="num" id="3354509">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3354515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3354520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354524">case</span>&nbsp;<span class="string" id="3354529">&#39;&#34;&#39;</span><span class="op" id="3354532">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354537"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354538">.</span><span class="ident" id="3354539">state</span>&nbsp;<span class="op" id="3354545">=</span>&nbsp;<span class="ident" id="3354547"><a href="/html/template/context.go.html#3260714">stateCSSDqStr</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354564">return</span>&nbsp;<span class="ident" id="3354571"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354572">,</span>&nbsp;<span class="ident" id="3354574"><a href="/html/template/transition.go.html#3353819">i</a></span>&nbsp;<span class="op" id="3354576">+</span>&nbsp;<span class="num" id="3354578">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354582">case</span>&nbsp;<span class="string" id="3354587">&#39;\&#39;&#39;</span><span class="op" id="3354591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354596"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354597">.</span><span class="ident" id="3354598">state</span>&nbsp;<span class="op" id="3354604">=</span>&nbsp;<span class="ident" id="3354606"><a href="/html/template/context.go.html#3260789">stateCSSSqStr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354623">return</span>&nbsp;<span class="ident" id="3354630"><a href="/html/template/transition.go.html#3352468">c</a></span><span class="op" id="3354631">,</span>&nbsp;<span class="ident" id="3354633"><a href="/html/template/transition.go.html#3353819">i</a></span>&nbsp;<span class="op" id="3354635">+</span>&nbsp;<span class="num" id="3354637">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3354641">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354645"><a href="/html/template/transition.go.html#3353803">k</a></span>&nbsp;<span class="op" id="3354647">=</span>&nbsp;<span class="ident" id="3354649"><a href="/html/template/transition.go.html#3353819">i</a></span>&nbsp;<span class="op" id="3354651">+</span>&nbsp;<span class="num" id="3354653">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3354656">}</span><br>
<span class="lineno"></span><span class="op" id="3354658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3354661">//&nbsp;tCSSStr&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;CSS&nbsp;string&nbsp;and&nbsp;URL&nbsp;states.</span><br>
<span class="lineno">435</span><span class="keyword" id="3354742">func</span>&nbsp;<span class="ident" id="3354747">tCSSStr</span><span class="op" id="3354754">(</span><span class="ident" id="3354755">c</span>&nbsp;<span class="ident" id="3354757"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3354764">,</span>&nbsp;<span class="ident" id="3354766">s</span>&nbsp;<span class="op" id="3354768">[</span><span class="op" id="3354769">]</span><span class="builtintype" id="3354770">byte</span><span class="op" id="3354774">)</span>&nbsp;<span class="op" id="3354776">(</span><span class="ident" id="3354777"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3354784">,</span>&nbsp;<span class="builtintype" id="3354786">int</span><span class="op" id="3354789">)</span>&nbsp;<span class="op" id="3354791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354794">var</span>&nbsp;<span class="ident" id="3354798">endAndEsc</span>&nbsp;<span class="builtintype" id="3354808">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354816">switch</span>&nbsp;<span class="ident" id="3354823"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3354824">.</span><span class="ident" id="3354825">state</span>&nbsp;<span class="op" id="3354831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354834">case</span>&nbsp;<span class="ident" id="3354839"><a href="/html/template/context.go.html#3260714">stateCSSDqStr</a></span><span class="op" id="3354852">,</span>&nbsp;<span class="ident" id="3354854"><a href="/html/template/context.go.html#3260868">stateCSSDqURL</a></span><span class="op" id="3354867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354871"><a href="/html/template/transition.go.html#3354798">endAndEsc</a></span>&nbsp;<span class="op" id="3354881">=</span>&nbsp;<span class="string" id="3354883">`\&#34;`</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354889">case</span>&nbsp;<span class="ident" id="3354894"><a href="/html/template/context.go.html#3260789">stateCSSSqStr</a></span><span class="op" id="3354907">,</span>&nbsp;<span class="ident" id="3354909"><a href="/html/template/context.go.html#3260947">stateCSSSqURL</a></span><span class="op" id="3354922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3354926"><a href="/html/template/transition.go.html#3354798">endAndEsc</a></span>&nbsp;<span class="op" id="3354936">=</span>&nbsp;<span class="string" id="3354938">`\&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3354944">case</span>&nbsp;<span class="ident" id="3354949"><a href="/html/template/context.go.html#3261017">stateCSSURL</a></span><span class="op" id="3354960">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3354964">//&nbsp;Unquoted&nbsp;URLs&nbsp;end&nbsp;with&nbsp;a&nbsp;newline&nbsp;or&nbsp;close&nbsp;parenthesis.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3355024">//&nbsp;The&nbsp;below&nbsp;includes&nbsp;the&nbsp;wc&nbsp;(whitespace&nbsp;character)&nbsp;and&nbsp;nl.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355086"><a href="/html/template/transition.go.html#3354798">endAndEsc</a></span>&nbsp;<span class="op" id="3355096">=</span>&nbsp;<span class="string" id="3355098">&#34;\\\t\n\f\r&nbsp;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355114">default</span><span class="op" id="3355121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3355125">panic</span><span class="op" id="3355130">(</span><span class="ident" id="3355131"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3355132">.</span><span class="ident" id="3355133">state</span><span class="op" id="3355138">.</span><span class="ident" id="3355139">String</span><span class="op" id="3355145">(</span><span class="op" id="3355146">)</span><span class="op" id="3355147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355154">k</span>&nbsp;<span class="op" id="3355156">:=</span>&nbsp;<span class="num" id="3355159">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355162">for</span>&nbsp;<span class="op" id="3355166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355170">i</span>&nbsp;<span class="op" id="3355172">:=</span>&nbsp;<span class="ident" id="3355175"><a href="/html/template/transition.go.html#3355154">k</a></span>&nbsp;<span class="op" id="3355177">+</span>&nbsp;<span class="ident" id="3355179"><a href="/html/template/transition.go.html#3343336">bytes</a></span><span class="op" id="3355184">.</span><span class="ident" id="3355185">IndexAny</span><span class="op" id="3355193">(</span><span class="ident" id="3355194"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355195">[</span><span class="ident" id="3355196"><a href="/html/template/transition.go.html#3355154">k</a></span><span class="op" id="3355197">:</span><span class="op" id="3355198">]</span><span class="op" id="3355199">,</span>&nbsp;<span class="ident" id="3355201"><a href="/html/template/transition.go.html#3354798">endAndEsc</a></span><span class="op" id="3355210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355214">if</span>&nbsp;<span class="ident" id="3355217"><a href="/html/template/transition.go.html#3355170">i</a></span>&nbsp;<span class="op" id="3355219">&lt;</span>&nbsp;<span class="ident" id="3355221"><a href="/html/template/transition.go.html#3355154">k</a></span>&nbsp;<span class="op" id="3355223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355228">c</span><span class="op" id="3355229">,</span>&nbsp;<span class="ident" id="3355231">nread</span>&nbsp;<span class="op" id="3355237">:=</span>&nbsp;<span class="ident" id="3355240"><a href="/html/template/transition.go.html#3348516">tURL</a></span><span class="op" id="3355244">(</span><span class="ident" id="3355245"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3355246">,</span>&nbsp;<span class="ident" id="3355248"><a href="/html/template/css.go.html#3268679">decodeCSS</a></span><span class="op" id="3355257">(</span><span class="ident" id="3355258"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355259">[</span><span class="ident" id="3355260"><a href="/html/template/transition.go.html#3355154">k</a></span><span class="op" id="3355261">:</span><span class="op" id="3355262">]</span><span class="op" id="3355263">)</span><span class="op" id="3355264">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355269">return</span>&nbsp;<span class="ident" id="3355276"><a href="/html/template/transition.go.html#3355228">c</a></span><span class="op" id="3355277">,</span>&nbsp;<span class="ident" id="3355279"><a href="/html/template/transition.go.html#3355154">k</a></span>&nbsp;<span class="op" id="3355281">+</span>&nbsp;<span class="ident" id="3355283"><a href="/html/template/transition.go.html#3355231">nread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355295">if</span>&nbsp;<span class="ident" id="3355298"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355299">[</span><span class="ident" id="3355300"><a href="/html/template/transition.go.html#3355170">i</a></span><span class="op" id="3355301">]</span>&nbsp;<span class="op" id="3355303">==</span>&nbsp;<span class="string" id="3355306">&#39;\\&#39;</span>&nbsp;<span class="op" id="3355311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355316"><a href="/html/template/transition.go.html#3355170">i</a></span><span class="op" id="3355317">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355323">if</span>&nbsp;<span class="ident" id="3355326"><a href="/html/template/transition.go.html#3355170">i</a></span>&nbsp;<span class="op" id="3355328">==</span>&nbsp;<span class="builtinfunc" id="3355331">len</span><span class="op" id="3355334">(</span><span class="ident" id="3355335"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355336">)</span>&nbsp;<span class="op" id="3355338">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355344">return</span>&nbsp;<span class="ident" id="3355351"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3355358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355365">state</span><span class="op" id="3355370">:</span>&nbsp;<span class="ident" id="3355372"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3355382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355389">err</span><span class="op" id="3355392">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3355396"><a href="/html/template/error.go.html#3287884">errorf</a></span><span class="op" id="3355402">(</span><span class="ident" id="3355403"><a href="/html/template/error.go.html#3286187">ErrPartialEscape</a></span><span class="op" id="3355419">,</span>&nbsp;<span class="ident" id="3355421">nil</span><span class="op" id="3355424">,</span>&nbsp;<span class="num" id="3355426">0</span><span class="op" id="3355427">,</span>&nbsp;<span class="string" id="3355429">&#34;unfinished&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;CSS&nbsp;string:&nbsp;%q&#34;</span><span class="op" id="3355475">,</span>&nbsp;<span class="ident" id="3355477"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355478">)</span><span class="op" id="3355479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355485">}</span><span class="op" id="3355486">,</span>&nbsp;<span class="builtinfunc" id="3355488">len</span><span class="op" id="3355491">(</span><span class="ident" id="3355492"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355498">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355502">}</span>&nbsp;<span class="keyword" id="3355504">else</span>&nbsp;<span class="op" id="3355509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355514"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3355515">.</span><span class="ident" id="3355516">state</span>&nbsp;<span class="op" id="3355522">=</span>&nbsp;<span class="ident" id="3355524"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355536">return</span>&nbsp;<span class="ident" id="3355543"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3355544">,</span>&nbsp;<span class="ident" id="3355546"><a href="/html/template/transition.go.html#3355170">i</a></span>&nbsp;<span class="op" id="3355548">+</span>&nbsp;<span class="num" id="3355550">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355558"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3355559">,</span>&nbsp;<span class="ident" id="3355561">_</span>&nbsp;<span class="op" id="3355563">=</span>&nbsp;<span class="ident" id="3355565"><a href="/html/template/transition.go.html#3348516">tURL</a></span><span class="op" id="3355569">(</span><span class="ident" id="3355570"><a href="/html/template/transition.go.html#3354755">c</a></span><span class="op" id="3355571">,</span>&nbsp;<span class="ident" id="3355573"><a href="/html/template/css.go.html#3268679">decodeCSS</a></span><span class="op" id="3355582">(</span><span class="ident" id="3355583"><a href="/html/template/transition.go.html#3354766">s</a></span><span class="op" id="3355584">[</span><span class="op" id="3355585">:</span><span class="ident" id="3355586"><a href="/html/template/transition.go.html#3355170">i</a></span><span class="op" id="3355587">+</span><span class="num" id="3355588">1</span><span class="op" id="3355589">]</span><span class="op" id="3355590">)</span><span class="op" id="3355591">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3355595"><a href="/html/template/transition.go.html#3355154">k</a></span>&nbsp;<span class="op" id="3355597">=</span>&nbsp;<span class="ident" id="3355599"><a href="/html/template/transition.go.html#3355170">i</a></span>&nbsp;<span class="op" id="3355601">+</span>&nbsp;<span class="num" id="3355603">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3355606">}</span><br>
<span class="lineno"></span><span class="op" id="3355608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3355611">//&nbsp;tError&nbsp;is&nbsp;the&nbsp;context&nbsp;transition&nbsp;function&nbsp;for&nbsp;the&nbsp;error&nbsp;state.</span><br>
<span class="lineno">475</span><span class="keyword" id="3355677">func</span>&nbsp;<span class="ident" id="3355682">tError</span><span class="op" id="3355688">(</span><span class="ident" id="3355689">c</span>&nbsp;<span class="ident" id="3355691"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3355698">,</span>&nbsp;<span class="ident" id="3355700">s</span>&nbsp;<span class="op" id="3355702">[</span><span class="op" id="3355703">]</span><span class="builtintype" id="3355704">byte</span><span class="op" id="3355708">)</span>&nbsp;<span class="op" id="3355710">(</span><span class="ident" id="3355711"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3355718">,</span>&nbsp;<span class="builtintype" id="3355720">int</span><span class="op" id="3355723">)</span>&nbsp;<span class="op" id="3355725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3355728">return</span>&nbsp;<span class="ident" id="3355735"><a href="/html/template/transition.go.html#3355689">c</a></span><span class="op" id="3355736">,</span>&nbsp;<span class="builtinfunc" id="3355738">len</span><span class="op" id="3355741">(</span><span class="ident" id="3355742"><a href="/html/template/transition.go.html#3355700">s</a></span><span class="op" id="3355743">)</span><br>
<span class="lineno"></span><span class="op" id="3355745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3355748">//&nbsp;eatAttrName&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;an&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno">480</span><span class="comment" id="3355824">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;s[i:]&nbsp;does&nbsp;not&nbsp;look&nbsp;like&nbsp;it&nbsp;begins&nbsp;with&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="3355893">//&nbsp;attribute&nbsp;name,&nbsp;such&nbsp;as&nbsp;encountering&nbsp;a&nbsp;quote&nbsp;mark&nbsp;without&nbsp;a&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="3355966">//&nbsp;equals&nbsp;sign.</span><br>
<span class="lineno"></span><span class="keyword" id="3355982">func</span>&nbsp;<span class="ident" id="3355987">eatAttrName</span><span class="op" id="3355998">(</span><span class="ident" id="3355999">s</span>&nbsp;<span class="op" id="3356001">[</span><span class="op" id="3356002">]</span><span class="builtintype" id="3356003">byte</span><span class="op" id="3356007">,</span>&nbsp;<span class="ident" id="3356009">i</span>&nbsp;<span class="builtintype" id="3356011">int</span><span class="op" id="3356014">)</span>&nbsp;<span class="op" id="3356016">(</span><span class="builtintype" id="3356017">int</span><span class="op" id="3356020">,</span>&nbsp;<span class="op" id="3356022">*</span><span class="ident" id="3356023"><a href="/html/template/error.go.html#3280695">Error</a></span><span class="op" id="3356028">)</span>&nbsp;<span class="op" id="3356030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356033">for</span>&nbsp;<span class="ident" id="3356037">j</span>&nbsp;<span class="op" id="3356039">:=</span>&nbsp;<span class="ident" id="3356042"><a href="/html/template/transition.go.html#3356009">i</a></span><span class="op" id="3356043">;</span>&nbsp;<span class="ident" id="3356045"><a href="/html/template/transition.go.html#3356037">j</a></span>&nbsp;<span class="op" id="3356047">&lt;</span>&nbsp;<span class="builtinfunc" id="3356049">len</span><span class="op" id="3356052">(</span><span class="ident" id="3356053"><a href="/html/template/transition.go.html#3355999">s</a></span><span class="op" id="3356054">)</span><span class="op" id="3356055">;</span>&nbsp;<span class="ident" id="3356057"><a href="/html/template/transition.go.html#3356037">j</a></span><span class="op" id="3356058">++</span>&nbsp;<span class="op" id="3356061">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356065">switch</span>&nbsp;<span class="ident" id="3356072"><a href="/html/template/transition.go.html#3355999">s</a></span><span class="op" id="3356073">[</span><span class="ident" id="3356074"><a href="/html/template/transition.go.html#3356037">j</a></span><span class="op" id="3356075">]</span>&nbsp;<span class="op" id="3356077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356081">case</span>&nbsp;<span class="string" id="3356086">&#39;&nbsp;&#39;</span><span class="op" id="3356089">,</span>&nbsp;<span class="string" id="3356091">&#39;\t&#39;</span><span class="op" id="3356095">,</span>&nbsp;<span class="string" id="3356097">&#39;\n&#39;</span><span class="op" id="3356101">,</span>&nbsp;<span class="string" id="3356103">&#39;\f&#39;</span><span class="op" id="3356107">,</span>&nbsp;<span class="string" id="3356109">&#39;\r&#39;</span><span class="op" id="3356113">,</span>&nbsp;<span class="string" id="3356115">&#39;=&#39;</span><span class="op" id="3356118">,</span>&nbsp;<span class="string" id="3356120">&#39;&gt;&#39;</span><span class="op" id="3356123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356128">return</span>&nbsp;<span class="ident" id="3356135"><a href="/html/template/transition.go.html#3356037">j</a></span><span class="op" id="3356136">,</span>&nbsp;<span class="ident" id="3356138">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356144">case</span>&nbsp;<span class="string" id="3356149">&#39;\&#39;&#39;</span><span class="op" id="3356153">,</span>&nbsp;<span class="string" id="3356155">&#39;&#34;&#39;</span><span class="op" id="3356158">,</span>&nbsp;<span class="string" id="3356160">&#39;&lt;&#39;</span><span class="op" id="3356163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3356168">//&nbsp;These&nbsp;result&nbsp;in&nbsp;a&nbsp;parse&nbsp;warning&nbsp;in&nbsp;HTML5&nbsp;and&nbsp;are</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3356223">//&nbsp;indicative&nbsp;of&nbsp;serious&nbsp;problems&nbsp;if&nbsp;seen&nbsp;in&nbsp;an&nbsp;attr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3356279">//&nbsp;name&nbsp;in&nbsp;a&nbsp;template.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356305">return</span>&nbsp;<span class="op" id="3356312">-</span><span class="num" id="3356313">1</span><span class="op" id="3356314">,</span>&nbsp;<span class="ident" id="3356316"><a href="/html/template/error.go.html#3287884">errorf</a></span><span class="op" id="3356322">(</span><span class="ident" id="3356323"><a href="/html/template/error.go.html#3282823">ErrBadHTML</a></span><span class="op" id="3356333">,</span>&nbsp;<span class="ident" id="3356335">nil</span><span class="op" id="3356338">,</span>&nbsp;<span class="num" id="3356340">0</span><span class="op" id="3356341">,</span>&nbsp;<span class="string" id="3356343">&#34;%q&nbsp;in&nbsp;attribute&nbsp;name:&nbsp;%.32q&#34;</span><span class="op" id="3356372">,</span>&nbsp;<span class="ident" id="3356374"><a href="/html/template/transition.go.html#3355999">s</a></span><span class="op" id="3356375">[</span><span class="ident" id="3356376"><a href="/html/template/transition.go.html#3356037">j</a></span><span class="op" id="3356377">:</span><span class="ident" id="3356378"><a href="/html/template/transition.go.html#3356037">j</a></span><span class="op" id="3356379">+</span><span class="num" id="3356380">1</span><span class="op" id="3356381">]</span><span class="op" id="3356382">,</span>&nbsp;<span class="ident" id="3356384"><a href="/html/template/transition.go.html#3355999">s</a></span><span class="op" id="3356385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356389">default</span><span class="op" id="3356396">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3356401">//&nbsp;No-op.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3356413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3356416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356419">return</span>&nbsp;<span class="builtinfunc" id="3356426">len</span><span class="op" id="3356429">(</span><span class="ident" id="3356430"><a href="/html/template/transition.go.html#3355999">s</a></span><span class="op" id="3356431">)</span><span class="op" id="3356432">,</span>&nbsp;<span class="ident" id="3356434">nil</span><br>
<span class="lineno"></span><span class="op" id="3356438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="3356441">var</span>&nbsp;<span class="ident" id="3356445">elementNameMap</span>&nbsp;<span class="op" id="3356460">=</span>&nbsp;<span class="keyword" id="3356462">map</span><span class="op" id="3356465">[</span><span class="builtintype" id="3356466">string</span><span class="op" id="3356472">]</span><span class="ident" id="3356473"><a href="/html/template/context.go.html#3265548">element</a></span><span class="op" id="3356480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356483">&#34;script&#34;</span><span class="op" id="3356491">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3356495"><a href="/html/template/context.go.html#3265734">elementScript</a></span><span class="op" id="3356508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356511">&#34;style&#34;</span><span class="op" id="3356518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356523"><a href="/html/template/context.go.html#3265811">elementStyle</a></span><span class="op" id="3356535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356538">&#34;textarea&#34;</span><span class="op" id="3356548">:</span>&nbsp;<span class="ident" id="3356550"><a href="/html/template/context.go.html#3265891">elementTextarea</a></span><span class="op" id="3356565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356568">&#34;title&#34;</span><span class="op" id="3356575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3356580"><a href="/html/template/context.go.html#3265968">elementTitle</a></span><span class="op" id="3356592">,</span><br>
<span class="lineno">505</span><span class="op" id="3356594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3356597">//&nbsp;asciiAlpha&nbsp;reports&nbsp;whether&nbsp;c&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter.</span><br>
<span class="lineno"></span><span class="keyword" id="3356649">func</span>&nbsp;<span class="ident" id="3356654">asciiAlpha</span><span class="op" id="3356664">(</span><span class="ident" id="3356665">c</span>&nbsp;<span class="builtintype" id="3356667">byte</span><span class="op" id="3356671">)</span>&nbsp;<span class="builtintype" id="3356673">bool</span>&nbsp;<span class="op" id="3356678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356681">return</span>&nbsp;<span class="string" id="3356688">&#39;A&#39;</span>&nbsp;<span class="op" id="3356692">&lt;=</span>&nbsp;<span class="ident" id="3356695"><a href="/html/template/transition.go.html#3356665">c</a></span>&nbsp;<span class="op" id="3356697">&amp;&amp;</span>&nbsp;<span class="ident" id="3356700"><a href="/html/template/transition.go.html#3356665">c</a></span>&nbsp;<span class="op" id="3356702">&lt;=</span>&nbsp;<span class="string" id="3356705">&#39;Z&#39;</span>&nbsp;<span class="op" id="3356709">||</span>&nbsp;<span class="string" id="3356712">&#39;a&#39;</span>&nbsp;<span class="op" id="3356716">&lt;=</span>&nbsp;<span class="ident" id="3356719"><a href="/html/template/transition.go.html#3356665">c</a></span>&nbsp;<span class="op" id="3356721">&amp;&amp;</span>&nbsp;<span class="ident" id="3356724"><a href="/html/template/transition.go.html#3356665">c</a></span>&nbsp;<span class="op" id="3356726">&lt;=</span>&nbsp;<span class="string" id="3356729">&#39;z&#39;</span><br>
<span class="lineno">510</span><span class="op" id="3356733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3356736">//&nbsp;asciiAlphaNum&nbsp;reports&nbsp;whether&nbsp;c&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter&nbsp;or&nbsp;digit.</span><br>
<span class="lineno"></span><span class="keyword" id="3356800">func</span>&nbsp;<span class="ident" id="3356805">asciiAlphaNum</span><span class="op" id="3356818">(</span><span class="ident" id="3356819">c</span>&nbsp;<span class="builtintype" id="3356821">byte</span><span class="op" id="3356825">)</span>&nbsp;<span class="builtintype" id="3356827">bool</span>&nbsp;<span class="op" id="3356832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3356835">return</span>&nbsp;<span class="ident" id="3356842"><a href="/html/template/transition.go.html#3356654">asciiAlpha</a></span><span class="op" id="3356852">(</span><span class="ident" id="3356853"><a href="/html/template/transition.go.html#3356819">c</a></span><span class="op" id="3356854">)</span>&nbsp;<span class="op" id="3356856">||</span>&nbsp;<span class="string" id="3356859">&#39;0&#39;</span>&nbsp;<span class="op" id="3356863">&lt;=</span>&nbsp;<span class="ident" id="3356866"><a href="/html/template/transition.go.html#3356819">c</a></span>&nbsp;<span class="op" id="3356868">&amp;&amp;</span>&nbsp;<span class="ident" id="3356871"><a href="/html/template/transition.go.html#3356819">c</a></span>&nbsp;<span class="op" id="3356873">&lt;=</span>&nbsp;<span class="string" id="3356876">&#39;9&#39;</span><br>
<span class="lineno">515</span><span class="op" id="3356880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3356883">//&nbsp;eatTagName&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;a&nbsp;tag&nbsp;name&nbsp;and&nbsp;the&nbsp;tag&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3356968">func</span>&nbsp;<span class="ident" id="3356973">eatTagName</span><span class="op" id="3356983">(</span><span class="ident" id="3356984">s</span>&nbsp;<span class="op" id="3356986">[</span><span class="op" id="3356987">]</span><span class="builtintype" id="3356988">byte</span><span class="op" id="3356992">,</span>&nbsp;<span class="ident" id="3356994">i</span>&nbsp;<span class="builtintype" id="3356996">int</span><span class="op" id="3356999">)</span>&nbsp;<span class="op" id="3357001">(</span><span class="builtintype" id="3357002">int</span><span class="op" id="3357005">,</span>&nbsp;<span class="ident" id="3357007"><a href="/html/template/context.go.html#3265548">element</a></span><span class="op" id="3357014">)</span>&nbsp;<span class="op" id="3357016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357019">if</span>&nbsp;<span class="ident" id="3357022"><a href="/html/template/transition.go.html#3356994">i</a></span>&nbsp;<span class="op" id="3357024">==</span>&nbsp;<span class="builtinfunc" id="3357027">len</span><span class="op" id="3357030">(</span><span class="ident" id="3357031"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357032">)</span>&nbsp;<span class="op" id="3357034">||</span>&nbsp;<span class="op" id="3357037">!</span><span class="ident" id="3357038"><a href="/html/template/transition.go.html#3356654">asciiAlpha</a></span><span class="op" id="3357048">(</span><span class="ident" id="3357049"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357050">[</span><span class="ident" id="3357051"><a href="/html/template/transition.go.html#3356994">i</a></span><span class="op" id="3357052">]</span><span class="op" id="3357053">)</span>&nbsp;<span class="op" id="3357055">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357059">return</span>&nbsp;<span class="ident" id="3357066"><a href="/html/template/transition.go.html#3356994">i</a></span><span class="op" id="3357067">,</span>&nbsp;<span class="ident" id="3357069"><a href="/html/template/context.go.html#3265642">elementNone</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357085">j</span>&nbsp;<span class="op" id="3357087">:=</span>&nbsp;<span class="ident" id="3357090"><a href="/html/template/transition.go.html#3356994">i</a></span>&nbsp;<span class="op" id="3357092">+</span>&nbsp;<span class="num" id="3357094">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357097">for</span>&nbsp;<span class="ident" id="3357101"><a href="/html/template/transition.go.html#3357085">j</a></span>&nbsp;<span class="op" id="3357103">&lt;</span>&nbsp;<span class="builtinfunc" id="3357105">len</span><span class="op" id="3357108">(</span><span class="ident" id="3357109"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357110">)</span>&nbsp;<span class="op" id="3357112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357116">x</span>&nbsp;<span class="op" id="3357118">:=</span>&nbsp;<span class="ident" id="3357121"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357122">[</span><span class="ident" id="3357123"><a href="/html/template/transition.go.html#3357085">j</a></span><span class="op" id="3357124">]</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357128">if</span>&nbsp;<span class="ident" id="3357131"><a href="/html/template/transition.go.html#3356805">asciiAlphaNum</a></span><span class="op" id="3357144">(</span><span class="ident" id="3357145"><a href="/html/template/transition.go.html#3357116">x</a></span><span class="op" id="3357146">)</span>&nbsp;<span class="op" id="3357148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357153"><a href="/html/template/transition.go.html#3357085">j</a></span><span class="op" id="3357154">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357160">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3357175">//&nbsp;Allow&nbsp;&#34;x-y&#34;&nbsp;or&nbsp;&#34;x:y&#34;&nbsp;but&nbsp;not&nbsp;&#34;x-&#34;,&nbsp;&#34;-y&#34;,&nbsp;or&nbsp;&#34;x--y&#34;.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357232">if</span>&nbsp;<span class="op" id="3357235">(</span><span class="ident" id="3357236"><a href="/html/template/transition.go.html#3357116">x</a></span>&nbsp;<span class="op" id="3357238">==</span>&nbsp;<span class="string" id="3357241">&#39;:&#39;</span>&nbsp;<span class="op" id="3357245">||</span>&nbsp;<span class="ident" id="3357248"><a href="/html/template/transition.go.html#3357116">x</a></span>&nbsp;<span class="op" id="3357250">==</span>&nbsp;<span class="string" id="3357253">&#39;-&#39;</span><span class="op" id="3357256">)</span>&nbsp;<span class="op" id="3357258">&amp;&amp;</span>&nbsp;<span class="ident" id="3357261"><a href="/html/template/transition.go.html#3357085">j</a></span><span class="op" id="3357262">+</span><span class="num" id="3357263">1</span>&nbsp;<span class="op" id="3357265">&lt;</span>&nbsp;<span class="builtinfunc" id="3357267">len</span><span class="op" id="3357270">(</span><span class="ident" id="3357271"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357272">)</span>&nbsp;<span class="op" id="3357274">&amp;&amp;</span>&nbsp;<span class="ident" id="3357277"><a href="/html/template/transition.go.html#3356805">asciiAlphaNum</a></span><span class="op" id="3357290">(</span><span class="ident" id="3357291"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357292">[</span><span class="ident" id="3357293"><a href="/html/template/transition.go.html#3357085">j</a></span><span class="op" id="3357294">+</span><span class="num" id="3357295">1</span><span class="op" id="3357296">]</span><span class="op" id="3357297">)</span>&nbsp;<span class="op" id="3357299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357304"><a href="/html/template/transition.go.html#3357085">j</a></span>&nbsp;<span class="op" id="3357306">+=</span>&nbsp;<span class="num" id="3357309">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357314">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357329">break</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357339">return</span>&nbsp;<span class="ident" id="3357346"><a href="/html/template/transition.go.html#3357085">j</a></span><span class="op" id="3357347">,</span>&nbsp;<span class="ident" id="3357349"><a href="/html/template/transition.go.html#3356445">elementNameMap</a></span><span class="op" id="3357363">[</span><span class="ident" id="3357364"><a href="/html/template/transition.go.html#3343345">strings</a></span><span class="op" id="3357371">.</span><span class="ident" id="3357372">ToLower</span><span class="op" id="3357379">(</span><span class="builtintype" id="3357380">string</span><span class="op" id="3357386">(</span><span class="ident" id="3357387"><a href="/html/template/transition.go.html#3356984">s</a></span><span class="op" id="3357388">[</span><span class="ident" id="3357389"><a href="/html/template/transition.go.html#3356994">i</a></span><span class="op" id="3357390">:</span><span class="ident" id="3357391"><a href="/html/template/transition.go.html#3357085">j</a></span><span class="op" id="3357392">]</span><span class="op" id="3357393">)</span><span class="op" id="3357394">)</span><span class="op" id="3357395">]</span><br>
<span class="lineno"></span><span class="op" id="3357397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3357400">//&nbsp;eatWhiteSpace&nbsp;returns&nbsp;the&nbsp;largest&nbsp;j&nbsp;such&nbsp;that&nbsp;s[i:j]&nbsp;is&nbsp;white&nbsp;space.</span><br>
<span class="lineno">540</span><span class="keyword" id="3357472">func</span>&nbsp;<span class="ident" id="3357477">eatWhiteSpace</span><span class="op" id="3357490">(</span><span class="ident" id="3357491">s</span>&nbsp;<span class="op" id="3357493">[</span><span class="op" id="3357494">]</span><span class="builtintype" id="3357495">byte</span><span class="op" id="3357499">,</span>&nbsp;<span class="ident" id="3357501">i</span>&nbsp;<span class="builtintype" id="3357503">int</span><span class="op" id="3357506">)</span>&nbsp;<span class="builtintype" id="3357508">int</span>&nbsp;<span class="op" id="3357512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357515">for</span>&nbsp;<span class="ident" id="3357519">j</span>&nbsp;<span class="op" id="3357521">:=</span>&nbsp;<span class="ident" id="3357524"><a href="/html/template/transition.go.html#3357501">i</a></span><span class="op" id="3357525">;</span>&nbsp;<span class="ident" id="3357527"><a href="/html/template/transition.go.html#3357519">j</a></span>&nbsp;<span class="op" id="3357529">&lt;</span>&nbsp;<span class="builtinfunc" id="3357531">len</span><span class="op" id="3357534">(</span><span class="ident" id="3357535"><a href="/html/template/transition.go.html#3357491">s</a></span><span class="op" id="3357536">)</span><span class="op" id="3357537">;</span>&nbsp;<span class="ident" id="3357539"><a href="/html/template/transition.go.html#3357519">j</a></span><span class="op" id="3357540">++</span>&nbsp;<span class="op" id="3357543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357547">switch</span>&nbsp;<span class="ident" id="3357554"><a href="/html/template/transition.go.html#3357491">s</a></span><span class="op" id="3357555">[</span><span class="ident" id="3357556"><a href="/html/template/transition.go.html#3357519">j</a></span><span class="op" id="3357557">]</span>&nbsp;<span class="op" id="3357559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357563">case</span>&nbsp;<span class="string" id="3357568">&#39;&nbsp;&#39;</span><span class="op" id="3357571">,</span>&nbsp;<span class="string" id="3357573">&#39;\t&#39;</span><span class="op" id="3357577">,</span>&nbsp;<span class="string" id="3357579">&#39;\n&#39;</span><span class="op" id="3357583">,</span>&nbsp;<span class="string" id="3357585">&#39;\f&#39;</span><span class="op" id="3357589">,</span>&nbsp;<span class="string" id="3357591">&#39;\r&#39;</span><span class="op" id="3357595">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3357600">//&nbsp;No-op.</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357612">default</span><span class="op" id="3357619">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357624">return</span>&nbsp;<span class="ident" id="3357631"><a href="/html/template/transition.go.html#3357519">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357641">return</span>&nbsp;<span class="builtinfunc" id="3357648">len</span><span class="op" id="3357651">(</span><span class="ident" id="3357652"><a href="/html/template/transition.go.html#3357491">s</a></span><span class="op" id="3357653">)</span><br>
<span class="lineno">550</span><span class="op" id="3357655">}</span>
</div>
</body>
</html>
