<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8356808">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8356863">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8356917">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8356968">package</span>&nbsp;<span class="ident" id="8356976">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8356981">import</span>&nbsp;<span class="op" id="8356988">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8356991">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357000">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357006">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357012">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357023">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8357033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8357036">type</span>&nbsp;<span class="ident" id="8357041">Bench</span>&nbsp;<span class="keyword" id="8357047">struct</span>&nbsp;<span class="op" id="8357054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357057">A</span>&nbsp;<span class="builtintype" id="8357059">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357064">B</span>&nbsp;<span class="builtintype" id="8357066">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357075">C</span>&nbsp;<span class="builtintype" id="8357077">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357085">D</span>&nbsp;<span class="op" id="8357087">[</span><span class="op" id="8357088">]</span><span class="builtintype" id="8357089">byte</span><br>
<span class="lineno">20</span><span class="op" id="8357094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8357097">func</span>&nbsp;<span class="ident" id="8357102">benchmarkEndToEnd</span><span class="op" id="8357119">(</span><span class="ident" id="8357120">b</span>&nbsp;<span class="op" id="8357122">*</span><span class="ident" id="8357123">testing</span><span class="op" id="8357130">.</span><span class="ident" id="8357131">B</span><span class="op" id="8357132">,</span>&nbsp;<span class="ident" id="8357134">ctor</span>&nbsp;<span class="keyword" id="8357139">func</span><span class="op" id="8357143">(</span><span class="op" id="8357144">)</span>&nbsp;<span class="keyword" id="8357146">interface</span><span class="op" id="8357155">{</span><span class="op" id="8357156">}</span><span class="op" id="8357157">,</span>&nbsp;<span class="ident" id="8357159">pipe</span>&nbsp;<span class="keyword" id="8357164">func</span><span class="op" id="8357168">(</span><span class="op" id="8357169">)</span>&nbsp;<span class="op" id="8357171">(</span><span class="ident" id="8357172">r</span>&nbsp;<span class="ident" id="8357174">io</span><span class="op" id="8357176">.</span><span class="ident" id="8357177">Reader</span><span class="op" id="8357183">,</span>&nbsp;<span class="ident" id="8357185">w</span>&nbsp;<span class="ident" id="8357187">io</span><span class="op" id="8357189">.</span><span class="ident" id="8357190">Writer</span><span class="op" id="8357196">,</span>&nbsp;<span class="ident" id="8357198">err</span>&nbsp;<span class="builtintype" id="8357202">error</span><span class="op" id="8357207">)</span><span class="op" id="8357208">)</span>&nbsp;<span class="op" id="8357210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357213">b</span><span class="op" id="8357214">.</span><span class="ident" id="8357215">RunParallel</span><span class="op" id="8357226">(</span><span class="keyword" id="8357227">func</span><span class="op" id="8357231">(</span><span class="ident" id="8357232">pb</span>&nbsp;<span class="op" id="8357235">*</span><span class="ident" id="8357236">testing</span><span class="op" id="8357243">.</span><span class="ident" id="8357244">PB</span><span class="op" id="8357246">)</span>&nbsp;<span class="op" id="8357248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357252">r</span><span class="op" id="8357253">,</span>&nbsp;<span class="ident" id="8357255">w</span><span class="op" id="8357256">,</span>&nbsp;<span class="ident" id="8357258">err</span>&nbsp;<span class="op" id="8357262">:=</span>&nbsp;<span class="ident" id="8357265">pipe</span><span class="op" id="8357269">(</span><span class="op" id="8357270">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357274">if</span>&nbsp;<span class="ident" id="8357277">err</span>&nbsp;<span class="op" id="8357281">!=</span>&nbsp;<span class="ident" id="8357284">nil</span>&nbsp;<span class="op" id="8357288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357293">b</span><span class="op" id="8357294">.</span><span class="ident" id="8357295">Fatal</span><span class="op" id="8357300">(</span><span class="string" id="8357301">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="8357318">,</span>&nbsp;<span class="ident" id="8357320">err</span><span class="op" id="8357323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357331">v</span>&nbsp;<span class="op" id="8357333">:=</span>&nbsp;<span class="ident" id="8357336">ctor</span><span class="op" id="8357340">(</span><span class="op" id="8357341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357345">enc</span>&nbsp;<span class="op" id="8357349">:=</span>&nbsp;<span class="ident" id="8357352">NewEncoder</span><span class="op" id="8357362">(</span><span class="ident" id="8357363">w</span><span class="op" id="8357364">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357368">dec</span>&nbsp;<span class="op" id="8357372">:=</span>&nbsp;<span class="ident" id="8357375">NewDecoder</span><span class="op" id="8357385">(</span><span class="ident" id="8357386">r</span><span class="op" id="8357387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357391">for</span>&nbsp;<span class="ident" id="8357395">pb</span><span class="op" id="8357397">.</span><span class="ident" id="8357398">Next</span><span class="op" id="8357402">(</span><span class="op" id="8357403">)</span>&nbsp;<span class="op" id="8357405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357410">if</span>&nbsp;<span class="ident" id="8357413">err</span>&nbsp;<span class="op" id="8357417">:=</span>&nbsp;<span class="ident" id="8357420">enc</span><span class="op" id="8357423">.</span><span class="ident" id="8357424">Encode</span><span class="op" id="8357430">(</span><span class="ident" id="8357431">v</span><span class="op" id="8357432">)</span><span class="op" id="8357433">;</span>&nbsp;<span class="ident" id="8357435">err</span>&nbsp;<span class="op" id="8357439">!=</span>&nbsp;<span class="ident" id="8357442">nil</span>&nbsp;<span class="op" id="8357446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357452">b</span><span class="op" id="8357453">.</span><span class="ident" id="8357454">Fatal</span><span class="op" id="8357459">(</span><span class="string" id="8357460">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8357475">,</span>&nbsp;<span class="ident" id="8357477">err</span><span class="op" id="8357480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357485">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357490">if</span>&nbsp;<span class="ident" id="8357493">err</span>&nbsp;<span class="op" id="8357497">:=</span>&nbsp;<span class="ident" id="8357500">dec</span><span class="op" id="8357503">.</span><span class="ident" id="8357504">Decode</span><span class="op" id="8357510">(</span><span class="ident" id="8357511">v</span><span class="op" id="8357512">)</span><span class="op" id="8357513">;</span>&nbsp;<span class="ident" id="8357515">err</span>&nbsp;<span class="op" id="8357519">!=</span>&nbsp;<span class="ident" id="8357522">nil</span>&nbsp;<span class="op" id="8357526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357532">b</span><span class="op" id="8357533">.</span><span class="ident" id="8357534">Fatal</span><span class="op" id="8357539">(</span><span class="string" id="8357540">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8357555">,</span>&nbsp;<span class="ident" id="8357557">err</span><span class="op" id="8357560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357572">}</span><span class="op" id="8357573">)</span><br>
<span class="lineno">40</span><span class="op" id="8357575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8357578">func</span>&nbsp;<span class="ident" id="8357583">BenchmarkEndToEndPipe</span><span class="op" id="8357604">(</span><span class="ident" id="8357605">b</span>&nbsp;<span class="op" id="8357607">*</span><span class="ident" id="8357608">testing</span><span class="op" id="8357615">.</span><span class="ident" id="8357616">B</span><span class="op" id="8357617">)</span>&nbsp;<span class="op" id="8357619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357622">benchmarkEndToEnd</span><span class="op" id="8357639">(</span><span class="ident" id="8357640">b</span><span class="op" id="8357641">,</span>&nbsp;<span class="keyword" id="8357643">func</span><span class="op" id="8357647">(</span><span class="op" id="8357648">)</span>&nbsp;<span class="keyword" id="8357650">interface</span><span class="op" id="8357659">{</span><span class="op" id="8357660">}</span>&nbsp;<span class="op" id="8357662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357666">return</span>&nbsp;<span class="op" id="8357673">&amp;</span><span class="ident" id="8357674">Bench</span><span class="op" id="8357679">{</span><span class="num" id="8357680">7</span><span class="op" id="8357681">,</span>&nbsp;<span class="num" id="8357683">3.2</span><span class="op" id="8357686">,</span>&nbsp;<span class="string" id="8357688">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8357705">,</span>&nbsp;<span class="ident" id="8357707">bytes</span><span class="op" id="8357712">.</span><span class="ident" id="8357713">Repeat</span><span class="op" id="8357719">(</span><span class="op" id="8357720">[</span><span class="op" id="8357721">]</span><span class="builtintype" id="8357722">byte</span><span class="op" id="8357726">(</span><span class="string" id="8357727">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8357745">)</span><span class="op" id="8357746">,</span>&nbsp;<span class="num" id="8357748">100</span><span class="op" id="8357751">)</span><span class="op" id="8357752">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357755">}</span><span class="op" id="8357756">,</span>&nbsp;<span class="keyword" id="8357758">func</span><span class="op" id="8357762">(</span><span class="op" id="8357763">)</span>&nbsp;<span class="op" id="8357765">(</span><span class="ident" id="8357766">r</span>&nbsp;<span class="ident" id="8357768">io</span><span class="op" id="8357770">.</span><span class="ident" id="8357771">Reader</span><span class="op" id="8357777">,</span>&nbsp;<span class="ident" id="8357779">w</span>&nbsp;<span class="ident" id="8357781">io</span><span class="op" id="8357783">.</span><span class="ident" id="8357784">Writer</span><span class="op" id="8357790">,</span>&nbsp;<span class="ident" id="8357792">err</span>&nbsp;<span class="builtintype" id="8357796">error</span><span class="op" id="8357801">)</span>&nbsp;<span class="op" id="8357803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357807">r</span><span class="op" id="8357808">,</span>&nbsp;<span class="ident" id="8357810">w</span><span class="op" id="8357811">,</span>&nbsp;<span class="ident" id="8357813">err</span>&nbsp;<span class="op" id="8357817">=</span>&nbsp;<span class="ident" id="8357819">os</span><span class="op" id="8357821">.</span><span class="ident" id="8357822">Pipe</span><span class="op" id="8357826">(</span><span class="op" id="8357827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357831">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357839">}</span><span class="op" id="8357840">)</span><br>
<span class="lineno"></span><span class="op" id="8357842">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8357845">func</span>&nbsp;<span class="ident" id="8357850">BenchmarkEndToEndByteBuffer</span><span class="op" id="8357877">(</span><span class="ident" id="8357878">b</span>&nbsp;<span class="op" id="8357880">*</span><span class="ident" id="8357881">testing</span><span class="op" id="8357888">.</span><span class="ident" id="8357889">B</span><span class="op" id="8357890">)</span>&nbsp;<span class="op" id="8357892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357895">benchmarkEndToEnd</span><span class="op" id="8357912">(</span><span class="ident" id="8357913">b</span><span class="op" id="8357914">,</span>&nbsp;<span class="keyword" id="8357916">func</span><span class="op" id="8357920">(</span><span class="op" id="8357921">)</span>&nbsp;<span class="keyword" id="8357923">interface</span><span class="op" id="8357932">{</span><span class="op" id="8357933">}</span>&nbsp;<span class="op" id="8357935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357939">return</span>&nbsp;<span class="op" id="8357946">&amp;</span><span class="ident" id="8357947">Bench</span><span class="op" id="8357952">{</span><span class="num" id="8357953">7</span><span class="op" id="8357954">,</span>&nbsp;<span class="num" id="8357956">3.2</span><span class="op" id="8357959">,</span>&nbsp;<span class="string" id="8357961">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8357978">,</span>&nbsp;<span class="ident" id="8357980">bytes</span><span class="op" id="8357985">.</span><span class="ident" id="8357986">Repeat</span><span class="op" id="8357992">(</span><span class="op" id="8357993">[</span><span class="op" id="8357994">]</span><span class="builtintype" id="8357995">byte</span><span class="op" id="8357999">(</span><span class="string" id="8358000">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8358018">)</span><span class="op" id="8358019">,</span>&nbsp;<span class="num" id="8358021">100</span><span class="op" id="8358024">)</span><span class="op" id="8358025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358028">}</span><span class="op" id="8358029">,</span>&nbsp;<span class="keyword" id="8358031">func</span><span class="op" id="8358035">(</span><span class="op" id="8358036">)</span>&nbsp;<span class="op" id="8358038">(</span><span class="ident" id="8358039">r</span>&nbsp;<span class="ident" id="8358041">io</span><span class="op" id="8358043">.</span><span class="ident" id="8358044">Reader</span><span class="op" id="8358050">,</span>&nbsp;<span class="ident" id="8358052">w</span>&nbsp;<span class="ident" id="8358054">io</span><span class="op" id="8358056">.</span><span class="ident" id="8358057">Writer</span><span class="op" id="8358063">,</span>&nbsp;<span class="ident" id="8358065">err</span>&nbsp;<span class="builtintype" id="8358069">error</span><span class="op" id="8358074">)</span>&nbsp;<span class="op" id="8358076">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358080">var</span>&nbsp;<span class="ident" id="8358084">buf</span>&nbsp;<span class="ident" id="8358088">bytes</span><span class="op" id="8358093">.</span><span class="ident" id="8358094">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358103">return</span>&nbsp;<span class="op" id="8358110">&amp;</span><span class="ident" id="8358111">buf</span><span class="op" id="8358114">,</span>&nbsp;<span class="op" id="8358116">&amp;</span><span class="ident" id="8358117">buf</span><span class="op" id="8358120">,</span>&nbsp;<span class="ident" id="8358122">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358127">}</span><span class="op" id="8358128">)</span><br>
<span class="lineno"></span><span class="op" id="8358130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8358133">func</span>&nbsp;<span class="ident" id="8358138">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="8358170">(</span><span class="ident" id="8358171">b</span>&nbsp;<span class="op" id="8358173">*</span><span class="ident" id="8358174">testing</span><span class="op" id="8358181">.</span><span class="ident" id="8358182">B</span><span class="op" id="8358183">)</span>&nbsp;<span class="op" id="8358185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358188">benchmarkEndToEnd</span><span class="op" id="8358205">(</span><span class="ident" id="8358206">b</span><span class="op" id="8358207">,</span>&nbsp;<span class="keyword" id="8358209">func</span><span class="op" id="8358213">(</span><span class="op" id="8358214">)</span>&nbsp;<span class="keyword" id="8358216">interface</span><span class="op" id="8358225">{</span><span class="op" id="8358226">}</span>&nbsp;<span class="op" id="8358228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358232">v</span>&nbsp;<span class="op" id="8358234">:=</span>&nbsp;<span class="op" id="8358237">&amp;</span><span class="ident" id="8358238">Bench</span><span class="op" id="8358243">{</span><span class="num" id="8358244">7</span><span class="op" id="8358245">,</span>&nbsp;<span class="num" id="8358247">3.2</span><span class="op" id="8358250">,</span>&nbsp;<span class="string" id="8358252">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8358269">,</span>&nbsp;<span class="ident" id="8358271">nil</span><span class="op" id="8358274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358278">Register</span><span class="op" id="8358286">(</span><span class="ident" id="8358287">v</span><span class="op" id="8358288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358292">arr</span>&nbsp;<span class="op" id="8358296">:=</span>&nbsp;<span class="builtinfunc" id="8358299">make</span><span class="op" id="8358303">(</span><span class="op" id="8358304">[</span><span class="op" id="8358305">]</span><span class="keyword" id="8358306">interface</span><span class="op" id="8358315">{</span><span class="op" id="8358316">}</span><span class="op" id="8358317">,</span>&nbsp;<span class="num" id="8358319">100</span><span class="op" id="8358322">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358326">for</span>&nbsp;<span class="ident" id="8358330">i</span>&nbsp;<span class="op" id="8358332">:=</span>&nbsp;<span class="keyword" id="8358335">range</span>&nbsp;<span class="ident" id="8358341">arr</span>&nbsp;<span class="op" id="8358345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358350">arr</span><span class="op" id="8358353">[</span><span class="ident" id="8358354">i</span><span class="op" id="8358355">]</span>&nbsp;<span class="op" id="8358357">=</span>&nbsp;<span class="ident" id="8358359">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358367">return</span>&nbsp;<span class="op" id="8358374">&amp;</span><span class="ident" id="8358375">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358380">}</span><span class="op" id="8358381">,</span>&nbsp;<span class="keyword" id="8358383">func</span><span class="op" id="8358387">(</span><span class="op" id="8358388">)</span>&nbsp;<span class="op" id="8358390">(</span><span class="ident" id="8358391">r</span>&nbsp;<span class="ident" id="8358393">io</span><span class="op" id="8358395">.</span><span class="ident" id="8358396">Reader</span><span class="op" id="8358402">,</span>&nbsp;<span class="ident" id="8358404">w</span>&nbsp;<span class="ident" id="8358406">io</span><span class="op" id="8358408">.</span><span class="ident" id="8358409">Writer</span><span class="op" id="8358415">,</span>&nbsp;<span class="ident" id="8358417">err</span>&nbsp;<span class="builtintype" id="8358421">error</span><span class="op" id="8358426">)</span>&nbsp;<span class="op" id="8358428">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358432">var</span>&nbsp;<span class="ident" id="8358436">buf</span>&nbsp;<span class="ident" id="8358440">bytes</span><span class="op" id="8358445">.</span><span class="ident" id="8358446">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358455">return</span>&nbsp;<span class="op" id="8358462">&amp;</span><span class="ident" id="8358463">buf</span><span class="op" id="8358466">,</span>&nbsp;<span class="op" id="8358468">&amp;</span><span class="ident" id="8358469">buf</span><span class="op" id="8358472">,</span>&nbsp;<span class="ident" id="8358474">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358479">}</span><span class="op" id="8358480">)</span><br>
<span class="lineno"></span><span class="op" id="8358482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8358485">func</span>&nbsp;<span class="ident" id="8358490">TestCountEncodeMallocs</span><span class="op" id="8358512">(</span><span class="ident" id="8358513">t</span>&nbsp;<span class="op" id="8358515">*</span><span class="ident" id="8358516">testing</span><span class="op" id="8358523">.</span><span class="ident" id="8358524">T</span><span class="op" id="8358525">)</span>&nbsp;<span class="op" id="8358527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358530">if</span>&nbsp;<span class="ident" id="8358533">testing</span><span class="op" id="8358540">.</span><span class="ident" id="8358541">Short</span><span class="op" id="8358546">(</span><span class="op" id="8358547">)</span>&nbsp;<span class="op" id="8358549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358553">t</span><span class="op" id="8358554">.</span><span class="ident" id="8358555">Skip</span><span class="op" id="8358559">(</span><span class="string" id="8358560">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8358597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358603">if</span>&nbsp;<span class="ident" id="8358606">runtime</span><span class="op" id="8358613">.</span><span class="ident" id="8358614">GOMAXPROCS</span><span class="op" id="8358624">(</span><span class="num" id="8358625">0</span><span class="op" id="8358626">)</span>&nbsp;<span class="op" id="8358628">&gt;</span>&nbsp;<span class="num" id="8358630">1</span>&nbsp;<span class="op" id="8358632">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358636">t</span><span class="op" id="8358637">.</span><span class="ident" id="8358638">Skip</span><span class="op" id="8358642">(</span><span class="string" id="8358643">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8358667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358674">const</span>&nbsp;<span class="ident" id="8358680">N</span>&nbsp;<span class="op" id="8358682">=</span>&nbsp;<span class="num" id="8358684">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358691">var</span>&nbsp;<span class="ident" id="8358695">buf</span>&nbsp;<span class="ident" id="8358699">bytes</span><span class="op" id="8358704">.</span><span class="ident" id="8358705">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358713">enc</span>&nbsp;<span class="op" id="8358717">:=</span>&nbsp;<span class="ident" id="8358720">NewEncoder</span><span class="op" id="8358730">(</span><span class="op" id="8358731">&amp;</span><span class="ident" id="8358732">buf</span><span class="op" id="8358735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358738">bench</span>&nbsp;<span class="op" id="8358744">:=</span>&nbsp;<span class="op" id="8358747">&amp;</span><span class="ident" id="8358748">Bench</span><span class="op" id="8358753">{</span><span class="num" id="8358754">7</span><span class="op" id="8358755">,</span>&nbsp;<span class="num" id="8358757">3.2</span><span class="op" id="8358760">,</span>&nbsp;<span class="string" id="8358762">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8358779">,</span>&nbsp;<span class="op" id="8358781">[</span><span class="op" id="8358782">]</span><span class="builtintype" id="8358783">byte</span><span class="op" id="8358787">(</span><span class="string" id="8358788">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8358806">)</span><span class="op" id="8358807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358811">allocs</span>&nbsp;<span class="op" id="8358818">:=</span>&nbsp;<span class="ident" id="8358821">testing</span><span class="op" id="8358828">.</span><span class="ident" id="8358829">AllocsPerRun</span><span class="op" id="8358841">(</span><span class="ident" id="8358842">N</span><span class="op" id="8358843">,</span>&nbsp;<span class="keyword" id="8358845">func</span><span class="op" id="8358849">(</span><span class="op" id="8358850">)</span>&nbsp;<span class="op" id="8358852">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358856">err</span>&nbsp;<span class="op" id="8358860">:=</span>&nbsp;<span class="ident" id="8358863">enc</span><span class="op" id="8358866">.</span><span class="ident" id="8358867">Encode</span><span class="op" id="8358873">(</span><span class="ident" id="8358874">bench</span><span class="op" id="8358879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358883">if</span>&nbsp;<span class="ident" id="8358886">err</span>&nbsp;<span class="op" id="8358890">!=</span>&nbsp;<span class="ident" id="8358893">nil</span>&nbsp;<span class="op" id="8358897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358902">t</span><span class="op" id="8358903">.</span><span class="ident" id="8358904">Fatal</span><span class="op" id="8358909">(</span><span class="string" id="8358910">&#34;encode:&#34;</span><span class="op" id="8358919">,</span>&nbsp;<span class="ident" id="8358921">err</span><span class="op" id="8358924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358931">}</span><span class="op" id="8358932">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358935">if</span>&nbsp;<span class="ident" id="8358938">allocs</span>&nbsp;<span class="op" id="8358945">!=</span>&nbsp;<span class="num" id="8358948">0</span>&nbsp;<span class="op" id="8358950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358954">t</span><span class="op" id="8358955">.</span><span class="ident" id="8358956">Fatalf</span><span class="op" id="8358962">(</span><span class="string" id="8358963">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="8359013">,</span>&nbsp;<span class="ident" id="8359015">allocs</span><span class="op" id="8359021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359024">}</span><br>
<span class="lineno"></span><span class="op" id="8359026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="8359029">func</span>&nbsp;<span class="ident" id="8359034">TestCountDecodeMallocs</span><span class="op" id="8359056">(</span><span class="ident" id="8359057">t</span>&nbsp;<span class="op" id="8359059">*</span><span class="ident" id="8359060">testing</span><span class="op" id="8359067">.</span><span class="ident" id="8359068">T</span><span class="op" id="8359069">)</span>&nbsp;<span class="op" id="8359071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359074">if</span>&nbsp;<span class="ident" id="8359077">testing</span><span class="op" id="8359084">.</span><span class="ident" id="8359085">Short</span><span class="op" id="8359090">(</span><span class="op" id="8359091">)</span>&nbsp;<span class="op" id="8359093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359097">t</span><span class="op" id="8359098">.</span><span class="ident" id="8359099">Skip</span><span class="op" id="8359103">(</span><span class="string" id="8359104">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8359141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359147">if</span>&nbsp;<span class="ident" id="8359150">runtime</span><span class="op" id="8359157">.</span><span class="ident" id="8359158">GOMAXPROCS</span><span class="op" id="8359168">(</span><span class="num" id="8359169">0</span><span class="op" id="8359170">)</span>&nbsp;<span class="op" id="8359172">&gt;</span>&nbsp;<span class="num" id="8359174">1</span>&nbsp;<span class="op" id="8359176">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359180">t</span><span class="op" id="8359181">.</span><span class="ident" id="8359182">Skip</span><span class="op" id="8359186">(</span><span class="string" id="8359187">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8359211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359218">const</span>&nbsp;<span class="ident" id="8359224">N</span>&nbsp;<span class="op" id="8359226">=</span>&nbsp;<span class="num" id="8359228">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359235">var</span>&nbsp;<span class="ident" id="8359239">buf</span>&nbsp;<span class="ident" id="8359243">bytes</span><span class="op" id="8359248">.</span><span class="ident" id="8359249">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359257">enc</span>&nbsp;<span class="op" id="8359261">:=</span>&nbsp;<span class="ident" id="8359264">NewEncoder</span><span class="op" id="8359274">(</span><span class="op" id="8359275">&amp;</span><span class="ident" id="8359276">buf</span><span class="op" id="8359279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359282">bench</span>&nbsp;<span class="op" id="8359288">:=</span>&nbsp;<span class="op" id="8359291">&amp;</span><span class="ident" id="8359292">Bench</span><span class="op" id="8359297">{</span><span class="num" id="8359298">7</span><span class="op" id="8359299">,</span>&nbsp;<span class="num" id="8359301">3.2</span><span class="op" id="8359304">,</span>&nbsp;<span class="string" id="8359306">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8359323">,</span>&nbsp;<span class="op" id="8359325">[</span><span class="op" id="8359326">]</span><span class="builtintype" id="8359327">byte</span><span class="op" id="8359331">(</span><span class="string" id="8359332">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8359350">)</span><span class="op" id="8359351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8359355">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359397">testing</span><span class="op" id="8359404">.</span><span class="ident" id="8359405">AllocsPerRun</span><span class="op" id="8359417">(</span><span class="ident" id="8359418">N</span><span class="op" id="8359419">,</span>&nbsp;<span class="keyword" id="8359421">func</span><span class="op" id="8359425">(</span><span class="op" id="8359426">)</span>&nbsp;<span class="op" id="8359428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359432">err</span>&nbsp;<span class="op" id="8359436">:=</span>&nbsp;<span class="ident" id="8359439">enc</span><span class="op" id="8359442">.</span><span class="ident" id="8359443">Encode</span><span class="op" id="8359449">(</span><span class="ident" id="8359450">bench</span><span class="op" id="8359455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359459">if</span>&nbsp;<span class="ident" id="8359462">err</span>&nbsp;<span class="op" id="8359466">!=</span>&nbsp;<span class="ident" id="8359469">nil</span>&nbsp;<span class="op" id="8359473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359478">t</span><span class="op" id="8359479">.</span><span class="ident" id="8359480">Fatal</span><span class="op" id="8359485">(</span><span class="string" id="8359486">&#34;encode:&#34;</span><span class="op" id="8359495">,</span>&nbsp;<span class="ident" id="8359497">err</span><span class="op" id="8359500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359504">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359507">}</span><span class="op" id="8359508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359512">dec</span>&nbsp;<span class="op" id="8359516">:=</span>&nbsp;<span class="ident" id="8359519">NewDecoder</span><span class="op" id="8359529">(</span><span class="op" id="8359530">&amp;</span><span class="ident" id="8359531">buf</span><span class="op" id="8359534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359537">allocs</span>&nbsp;<span class="op" id="8359544">:=</span>&nbsp;<span class="ident" id="8359547">testing</span><span class="op" id="8359554">.</span><span class="ident" id="8359555">AllocsPerRun</span><span class="op" id="8359567">(</span><span class="ident" id="8359568">N</span><span class="op" id="8359569">,</span>&nbsp;<span class="keyword" id="8359571">func</span><span class="op" id="8359575">(</span><span class="op" id="8359576">)</span>&nbsp;<span class="op" id="8359578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359582">*</span><span class="ident" id="8359583">bench</span>&nbsp;<span class="op" id="8359589">=</span>&nbsp;<span class="ident" id="8359591">Bench</span><span class="op" id="8359596">{</span><span class="op" id="8359597">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359601">err</span>&nbsp;<span class="op" id="8359605">:=</span>&nbsp;<span class="ident" id="8359608">dec</span><span class="op" id="8359611">.</span><span class="ident" id="8359612">Decode</span><span class="op" id="8359618">(</span><span class="op" id="8359619">&amp;</span><span class="ident" id="8359620">bench</span><span class="op" id="8359625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359629">if</span>&nbsp;<span class="ident" id="8359632">err</span>&nbsp;<span class="op" id="8359636">!=</span>&nbsp;<span class="ident" id="8359639">nil</span>&nbsp;<span class="op" id="8359643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359648">t</span><span class="op" id="8359649">.</span><span class="ident" id="8359650">Fatal</span><span class="op" id="8359655">(</span><span class="string" id="8359656">&#34;decode:&#34;</span><span class="op" id="8359665">,</span>&nbsp;<span class="ident" id="8359667">err</span><span class="op" id="8359670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359677">}</span><span class="op" id="8359678">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359681">if</span>&nbsp;<span class="ident" id="8359684">allocs</span>&nbsp;<span class="op" id="8359691">!=</span>&nbsp;<span class="num" id="8359694">4</span>&nbsp;<span class="op" id="8359696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359700">t</span><span class="op" id="8359701">.</span><span class="ident" id="8359702">Fatalf</span><span class="op" id="8359708">(</span><span class="string" id="8359709">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="8359759">,</span>&nbsp;<span class="ident" id="8359761">allocs</span><span class="op" id="8359767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359770">}</span><br>
<span class="lineno"></span><span class="op" id="8359772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8359775">func</span>&nbsp;<span class="ident" id="8359780">BenchmarkEncodeComplex128Slice</span><span class="op" id="8359810">(</span><span class="ident" id="8359811">b</span>&nbsp;<span class="op" id="8359813">*</span><span class="ident" id="8359814">testing</span><span class="op" id="8359821">.</span><span class="ident" id="8359822">B</span><span class="op" id="8359823">)</span>&nbsp;<span class="op" id="8359825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359828">var</span>&nbsp;<span class="ident" id="8359832">buf</span>&nbsp;<span class="ident" id="8359836">bytes</span><span class="op" id="8359841">.</span><span class="ident" id="8359842">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359850">enc</span>&nbsp;<span class="op" id="8359854">:=</span>&nbsp;<span class="ident" id="8359857">NewEncoder</span><span class="op" id="8359867">(</span><span class="op" id="8359868">&amp;</span><span class="ident" id="8359869">buf</span><span class="op" id="8359872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359875">a</span>&nbsp;<span class="op" id="8359877">:=</span>&nbsp;<span class="builtinfunc" id="8359880">make</span><span class="op" id="8359884">(</span><span class="op" id="8359885">[</span><span class="op" id="8359886">]</span><span class="builtintype" id="8359887">complex128</span><span class="op" id="8359897">,</span>&nbsp;<span class="num" id="8359899">1000</span><span class="op" id="8359903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359906">for</span>&nbsp;<span class="ident" id="8359910">i</span>&nbsp;<span class="op" id="8359912">:=</span>&nbsp;<span class="keyword" id="8359915">range</span>&nbsp;<span class="ident" id="8359921">a</span>&nbsp;<span class="op" id="8359923">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359927">a</span><span class="op" id="8359928">[</span><span class="ident" id="8359929">i</span><span class="op" id="8359930">]</span>&nbsp;<span class="op" id="8359932">=</span>&nbsp;<span class="num" id="8359934">1.2</span>&nbsp;<span class="op" id="8359938">+</span>&nbsp;<span class="num" id="8359940">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8359946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359949">b</span><span class="op" id="8359950">.</span><span class="ident" id="8359951">ResetTimer</span><span class="op" id="8359961">(</span><span class="op" id="8359962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8359965">for</span>&nbsp;<span class="ident" id="8359969">i</span>&nbsp;<span class="op" id="8359971">:=</span>&nbsp;<span class="num" id="8359974">0</span><span class="op" id="8359975">;</span>&nbsp;<span class="ident" id="8359977">i</span>&nbsp;<span class="op" id="8359979">&lt;</span>&nbsp;<span class="ident" id="8359981">b</span><span class="op" id="8359982">.</span><span class="ident" id="8359983">N</span><span class="op" id="8359984">;</span>&nbsp;<span class="ident" id="8359986">i</span><span class="op" id="8359987">++</span>&nbsp;<span class="op" id="8359990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8359994">buf</span><span class="op" id="8359997">.</span><span class="ident" id="8359998">Reset</span><span class="op" id="8360003">(</span><span class="op" id="8360004">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360008">err</span>&nbsp;<span class="op" id="8360012">:=</span>&nbsp;<span class="ident" id="8360015">enc</span><span class="op" id="8360018">.</span><span class="ident" id="8360019">Encode</span><span class="op" id="8360025">(</span><span class="ident" id="8360026">a</span><span class="op" id="8360027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360031">if</span>&nbsp;<span class="ident" id="8360034">err</span>&nbsp;<span class="op" id="8360038">!=</span>&nbsp;<span class="ident" id="8360041">nil</span>&nbsp;<span class="op" id="8360045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360050">b</span><span class="op" id="8360051">.</span><span class="ident" id="8360052">Fatal</span><span class="op" id="8360057">(</span><span class="ident" id="8360058">err</span><span class="op" id="8360061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360068">}</span><br>
<span class="lineno">150</span><span class="op" id="8360070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8360073">func</span>&nbsp;<span class="ident" id="8360078">BenchmarkEncodeFloat64Slice</span><span class="op" id="8360105">(</span><span class="ident" id="8360106">b</span>&nbsp;<span class="op" id="8360108">*</span><span class="ident" id="8360109">testing</span><span class="op" id="8360116">.</span><span class="ident" id="8360117">B</span><span class="op" id="8360118">)</span>&nbsp;<span class="op" id="8360120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360123">var</span>&nbsp;<span class="ident" id="8360127">buf</span>&nbsp;<span class="ident" id="8360131">bytes</span><span class="op" id="8360136">.</span><span class="ident" id="8360137">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360145">enc</span>&nbsp;<span class="op" id="8360149">:=</span>&nbsp;<span class="ident" id="8360152">NewEncoder</span><span class="op" id="8360162">(</span><span class="op" id="8360163">&amp;</span><span class="ident" id="8360164">buf</span><span class="op" id="8360167">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360170">a</span>&nbsp;<span class="op" id="8360172">:=</span>&nbsp;<span class="builtinfunc" id="8360175">make</span><span class="op" id="8360179">(</span><span class="op" id="8360180">[</span><span class="op" id="8360181">]</span><span class="builtintype" id="8360182">float64</span><span class="op" id="8360189">,</span>&nbsp;<span class="num" id="8360191">1000</span><span class="op" id="8360195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360198">for</span>&nbsp;<span class="ident" id="8360202">i</span>&nbsp;<span class="op" id="8360204">:=</span>&nbsp;<span class="keyword" id="8360207">range</span>&nbsp;<span class="ident" id="8360213">a</span>&nbsp;<span class="op" id="8360215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360219">a</span><span class="op" id="8360220">[</span><span class="ident" id="8360221">i</span><span class="op" id="8360222">]</span>&nbsp;<span class="op" id="8360224">=</span>&nbsp;<span class="num" id="8360226">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360237">b</span><span class="op" id="8360238">.</span><span class="ident" id="8360239">ResetTimer</span><span class="op" id="8360249">(</span><span class="op" id="8360250">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360253">for</span>&nbsp;<span class="ident" id="8360257">i</span>&nbsp;<span class="op" id="8360259">:=</span>&nbsp;<span class="num" id="8360262">0</span><span class="op" id="8360263">;</span>&nbsp;<span class="ident" id="8360265">i</span>&nbsp;<span class="op" id="8360267">&lt;</span>&nbsp;<span class="ident" id="8360269">b</span><span class="op" id="8360270">.</span><span class="ident" id="8360271">N</span><span class="op" id="8360272">;</span>&nbsp;<span class="ident" id="8360274">i</span><span class="op" id="8360275">++</span>&nbsp;<span class="op" id="8360278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360282">buf</span><span class="op" id="8360285">.</span><span class="ident" id="8360286">Reset</span><span class="op" id="8360291">(</span><span class="op" id="8360292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360296">err</span>&nbsp;<span class="op" id="8360300">:=</span>&nbsp;<span class="ident" id="8360303">enc</span><span class="op" id="8360306">.</span><span class="ident" id="8360307">Encode</span><span class="op" id="8360313">(</span><span class="ident" id="8360314">a</span><span class="op" id="8360315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360319">if</span>&nbsp;<span class="ident" id="8360322">err</span>&nbsp;<span class="op" id="8360326">!=</span>&nbsp;<span class="ident" id="8360329">nil</span>&nbsp;<span class="op" id="8360333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360338">b</span><span class="op" id="8360339">.</span><span class="ident" id="8360340">Fatal</span><span class="op" id="8360345">(</span><span class="ident" id="8360346">err</span><span class="op" id="8360349">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360356">}</span><br>
<span class="lineno"></span><span class="op" id="8360358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8360361">func</span>&nbsp;<span class="ident" id="8360366">BenchmarkEncodeInt32Slice</span><span class="op" id="8360391">(</span><span class="ident" id="8360392">b</span>&nbsp;<span class="op" id="8360394">*</span><span class="ident" id="8360395">testing</span><span class="op" id="8360402">.</span><span class="ident" id="8360403">B</span><span class="op" id="8360404">)</span>&nbsp;<span class="op" id="8360406">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360409">var</span>&nbsp;<span class="ident" id="8360413">buf</span>&nbsp;<span class="ident" id="8360417">bytes</span><span class="op" id="8360422">.</span><span class="ident" id="8360423">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360431">enc</span>&nbsp;<span class="op" id="8360435">:=</span>&nbsp;<span class="ident" id="8360438">NewEncoder</span><span class="op" id="8360448">(</span><span class="op" id="8360449">&amp;</span><span class="ident" id="8360450">buf</span><span class="op" id="8360453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360456">a</span>&nbsp;<span class="op" id="8360458">:=</span>&nbsp;<span class="builtinfunc" id="8360461">make</span><span class="op" id="8360465">(</span><span class="op" id="8360466">[</span><span class="op" id="8360467">]</span><span class="builtintype" id="8360468">int32</span><span class="op" id="8360473">,</span>&nbsp;<span class="num" id="8360475">1000</span><span class="op" id="8360479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360482">for</span>&nbsp;<span class="ident" id="8360486">i</span>&nbsp;<span class="op" id="8360488">:=</span>&nbsp;<span class="keyword" id="8360491">range</span>&nbsp;<span class="ident" id="8360497">a</span>&nbsp;<span class="op" id="8360499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360503">a</span><span class="op" id="8360504">[</span><span class="ident" id="8360505">i</span><span class="op" id="8360506">]</span>&nbsp;<span class="op" id="8360508">=</span>&nbsp;<span class="num" id="8360510">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360519">b</span><span class="op" id="8360520">.</span><span class="ident" id="8360521">ResetTimer</span><span class="op" id="8360531">(</span><span class="op" id="8360532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360535">for</span>&nbsp;<span class="ident" id="8360539">i</span>&nbsp;<span class="op" id="8360541">:=</span>&nbsp;<span class="num" id="8360544">0</span><span class="op" id="8360545">;</span>&nbsp;<span class="ident" id="8360547">i</span>&nbsp;<span class="op" id="8360549">&lt;</span>&nbsp;<span class="ident" id="8360551">b</span><span class="op" id="8360552">.</span><span class="ident" id="8360553">N</span><span class="op" id="8360554">;</span>&nbsp;<span class="ident" id="8360556">i</span><span class="op" id="8360557">++</span>&nbsp;<span class="op" id="8360560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360564">buf</span><span class="op" id="8360567">.</span><span class="ident" id="8360568">Reset</span><span class="op" id="8360573">(</span><span class="op" id="8360574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360578">err</span>&nbsp;<span class="op" id="8360582">:=</span>&nbsp;<span class="ident" id="8360585">enc</span><span class="op" id="8360588">.</span><span class="ident" id="8360589">Encode</span><span class="op" id="8360595">(</span><span class="ident" id="8360596">a</span><span class="op" id="8360597">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360601">if</span>&nbsp;<span class="ident" id="8360604">err</span>&nbsp;<span class="op" id="8360608">!=</span>&nbsp;<span class="ident" id="8360611">nil</span>&nbsp;<span class="op" id="8360615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360620">b</span><span class="op" id="8360621">.</span><span class="ident" id="8360622">Fatal</span><span class="op" id="8360627">(</span><span class="ident" id="8360628">err</span><span class="op" id="8360631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360638">}</span><br>
<span class="lineno"></span><span class="op" id="8360640">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8360643">func</span>&nbsp;<span class="ident" id="8360648">BenchmarkEncodeStringSlice</span><span class="op" id="8360674">(</span><span class="ident" id="8360675">b</span>&nbsp;<span class="op" id="8360677">*</span><span class="ident" id="8360678">testing</span><span class="op" id="8360685">.</span><span class="ident" id="8360686">B</span><span class="op" id="8360687">)</span>&nbsp;<span class="op" id="8360689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360692">var</span>&nbsp;<span class="ident" id="8360696">buf</span>&nbsp;<span class="ident" id="8360700">bytes</span><span class="op" id="8360705">.</span><span class="ident" id="8360706">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360714">enc</span>&nbsp;<span class="op" id="8360718">:=</span>&nbsp;<span class="ident" id="8360721">NewEncoder</span><span class="op" id="8360731">(</span><span class="op" id="8360732">&amp;</span><span class="ident" id="8360733">buf</span><span class="op" id="8360736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360739">a</span>&nbsp;<span class="op" id="8360741">:=</span>&nbsp;<span class="builtinfunc" id="8360744">make</span><span class="op" id="8360748">(</span><span class="op" id="8360749">[</span><span class="op" id="8360750">]</span><span class="builtintype" id="8360751">string</span><span class="op" id="8360757">,</span>&nbsp;<span class="num" id="8360759">1000</span><span class="op" id="8360763">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360766">for</span>&nbsp;<span class="ident" id="8360770">i</span>&nbsp;<span class="op" id="8360772">:=</span>&nbsp;<span class="keyword" id="8360775">range</span>&nbsp;<span class="ident" id="8360781">a</span>&nbsp;<span class="op" id="8360783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360787">a</span><span class="op" id="8360788">[</span><span class="ident" id="8360789">i</span><span class="op" id="8360790">]</span>&nbsp;<span class="op" id="8360792">=</span>&nbsp;<span class="string" id="8360794">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360816">b</span><span class="op" id="8360817">.</span><span class="ident" id="8360818">ResetTimer</span><span class="op" id="8360828">(</span><span class="op" id="8360829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360832">for</span>&nbsp;<span class="ident" id="8360836">i</span>&nbsp;<span class="op" id="8360838">:=</span>&nbsp;<span class="num" id="8360841">0</span><span class="op" id="8360842">;</span>&nbsp;<span class="ident" id="8360844">i</span>&nbsp;<span class="op" id="8360846">&lt;</span>&nbsp;<span class="ident" id="8360848">b</span><span class="op" id="8360849">.</span><span class="ident" id="8360850">N</span><span class="op" id="8360851">;</span>&nbsp;<span class="ident" id="8360853">i</span><span class="op" id="8360854">++</span>&nbsp;<span class="op" id="8360857">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360861">buf</span><span class="op" id="8360864">.</span><span class="ident" id="8360865">Reset</span><span class="op" id="8360870">(</span><span class="op" id="8360871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360875">err</span>&nbsp;<span class="op" id="8360879">:=</span>&nbsp;<span class="ident" id="8360882">enc</span><span class="op" id="8360885">.</span><span class="ident" id="8360886">Encode</span><span class="op" id="8360892">(</span><span class="ident" id="8360893">a</span><span class="op" id="8360894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8360898">if</span>&nbsp;<span class="ident" id="8360901">err</span>&nbsp;<span class="op" id="8360905">!=</span>&nbsp;<span class="ident" id="8360908">nil</span>&nbsp;<span class="op" id="8360912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8360917">b</span><span class="op" id="8360918">.</span><span class="ident" id="8360919">Fatal</span><span class="op" id="8360924">(</span><span class="ident" id="8360925">err</span><span class="op" id="8360928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360932">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8360935">}</span><br>
<span class="lineno"></span><span class="op" id="8360937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8360940">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="8360986">type</span>&nbsp;<span class="ident" id="8360991">benchmarkBuf</span>&nbsp;<span class="keyword" id="8361004">struct</span>&nbsp;<span class="op" id="8361011">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361014">offset</span>&nbsp;<span class="builtintype" id="8361021">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361026">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8361033">[</span><span class="op" id="8361034">]</span><span class="builtintype" id="8361035">byte</span><br>
<span class="lineno"></span><span class="op" id="8361040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8361043">func</span>&nbsp;<span class="op" id="8361048">(</span><span class="ident" id="8361049">b</span>&nbsp;<span class="op" id="8361051">*</span><span class="ident" id="8361052">benchmarkBuf</span><span class="op" id="8361064">)</span>&nbsp;<span class="ident" id="8361066">Read</span><span class="op" id="8361070">(</span><span class="ident" id="8361071">p</span>&nbsp;<span class="op" id="8361073">[</span><span class="op" id="8361074">]</span><span class="builtintype" id="8361075">byte</span><span class="op" id="8361079">)</span>&nbsp;<span class="op" id="8361081">(</span><span class="ident" id="8361082">n</span>&nbsp;<span class="builtintype" id="8361084">int</span><span class="op" id="8361087">,</span>&nbsp;<span class="ident" id="8361089">err</span>&nbsp;<span class="builtintype" id="8361093">error</span><span class="op" id="8361098">)</span>&nbsp;<span class="op" id="8361100">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361103">n</span>&nbsp;<span class="op" id="8361105">=</span>&nbsp;<span class="builtinfunc" id="8361107">copy</span><span class="op" id="8361111">(</span><span class="ident" id="8361112">p</span><span class="op" id="8361113">,</span>&nbsp;<span class="ident" id="8361115">b</span><span class="op" id="8361116">.</span><span class="ident" id="8361117">data</span><span class="op" id="8361121">[</span><span class="ident" id="8361122">b</span><span class="op" id="8361123">.</span><span class="ident" id="8361124">offset</span><span class="op" id="8361130">:</span><span class="op" id="8361131">]</span><span class="op" id="8361132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361135">if</span>&nbsp;<span class="ident" id="8361138">n</span>&nbsp;<span class="op" id="8361140">==</span>&nbsp;<span class="num" id="8361143">0</span>&nbsp;<span class="op" id="8361145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361149">return</span>&nbsp;<span class="num" id="8361156">0</span><span class="op" id="8361157">,</span>&nbsp;<span class="ident" id="8361159">io</span><span class="op" id="8361161">.</span><span class="ident" id="8361162">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8361167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361170">b</span><span class="op" id="8361171">.</span><span class="ident" id="8361172">offset</span>&nbsp;<span class="op" id="8361179">+=</span>&nbsp;<span class="ident" id="8361182">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361185">return</span><br>
<span class="lineno"></span><span class="op" id="8361192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8361195">func</span>&nbsp;<span class="op" id="8361200">(</span><span class="ident" id="8361201">b</span>&nbsp;<span class="op" id="8361203">*</span><span class="ident" id="8361204">benchmarkBuf</span><span class="op" id="8361216">)</span>&nbsp;<span class="ident" id="8361218">ReadByte</span><span class="op" id="8361226">(</span><span class="op" id="8361227">)</span>&nbsp;<span class="op" id="8361229">(</span><span class="ident" id="8361230">c</span>&nbsp;<span class="builtintype" id="8361232">byte</span><span class="op" id="8361236">,</span>&nbsp;<span class="ident" id="8361238">err</span>&nbsp;<span class="builtintype" id="8361242">error</span><span class="op" id="8361247">)</span>&nbsp;<span class="op" id="8361249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361252">if</span>&nbsp;<span class="ident" id="8361255">b</span><span class="op" id="8361256">.</span><span class="ident" id="8361257">offset</span>&nbsp;<span class="op" id="8361264">&gt;=</span>&nbsp;<span class="builtinfunc" id="8361267">len</span><span class="op" id="8361270">(</span><span class="ident" id="8361271">b</span><span class="op" id="8361272">.</span><span class="ident" id="8361273">data</span><span class="op" id="8361277">)</span>&nbsp;<span class="op" id="8361279">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361283">return</span>&nbsp;<span class="num" id="8361290">0</span><span class="op" id="8361291">,</span>&nbsp;<span class="ident" id="8361293">io</span><span class="op" id="8361295">.</span><span class="ident" id="8361296">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8361301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361304">c</span>&nbsp;<span class="op" id="8361306">=</span>&nbsp;<span class="ident" id="8361308">b</span><span class="op" id="8361309">.</span><span class="ident" id="8361310">data</span><span class="op" id="8361314">[</span><span class="ident" id="8361315">b</span><span class="op" id="8361316">.</span><span class="ident" id="8361317">offset</span><span class="op" id="8361323">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361326">b</span><span class="op" id="8361327">.</span><span class="ident" id="8361328">offset</span><span class="op" id="8361334">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361338">return</span><br>
<span class="lineno">225</span><span class="op" id="8361345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8361348">func</span>&nbsp;<span class="op" id="8361353">(</span><span class="ident" id="8361354">b</span>&nbsp;<span class="op" id="8361356">*</span><span class="ident" id="8361357">benchmarkBuf</span><span class="op" id="8361369">)</span>&nbsp;<span class="ident" id="8361371">reset</span><span class="op" id="8361376">(</span><span class="op" id="8361377">)</span>&nbsp;<span class="op" id="8361379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361382">b</span><span class="op" id="8361383">.</span><span class="ident" id="8361384">offset</span>&nbsp;<span class="op" id="8361391">=</span>&nbsp;<span class="num" id="8361393">0</span><br>
<span class="lineno"></span><span class="op" id="8361395">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8361398">func</span>&nbsp;<span class="ident" id="8361403">BenchmarkDecodeComplex128Slice</span><span class="op" id="8361433">(</span><span class="ident" id="8361434">b</span>&nbsp;<span class="op" id="8361436">*</span><span class="ident" id="8361437">testing</span><span class="op" id="8361444">.</span><span class="ident" id="8361445">B</span><span class="op" id="8361446">)</span>&nbsp;<span class="op" id="8361448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361451">var</span>&nbsp;<span class="ident" id="8361455">buf</span>&nbsp;<span class="ident" id="8361459">bytes</span><span class="op" id="8361464">.</span><span class="ident" id="8361465">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361473">enc</span>&nbsp;<span class="op" id="8361477">:=</span>&nbsp;<span class="ident" id="8361480">NewEncoder</span><span class="op" id="8361490">(</span><span class="op" id="8361491">&amp;</span><span class="ident" id="8361492">buf</span><span class="op" id="8361495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361498">a</span>&nbsp;<span class="op" id="8361500">:=</span>&nbsp;<span class="builtinfunc" id="8361503">make</span><span class="op" id="8361507">(</span><span class="op" id="8361508">[</span><span class="op" id="8361509">]</span><span class="builtintype" id="8361510">complex128</span><span class="op" id="8361520">,</span>&nbsp;<span class="num" id="8361522">1000</span><span class="op" id="8361526">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361529">for</span>&nbsp;<span class="ident" id="8361533">i</span>&nbsp;<span class="op" id="8361535">:=</span>&nbsp;<span class="keyword" id="8361538">range</span>&nbsp;<span class="ident" id="8361544">a</span>&nbsp;<span class="op" id="8361546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361550">a</span><span class="op" id="8361551">[</span><span class="ident" id="8361552">i</span><span class="op" id="8361553">]</span>&nbsp;<span class="op" id="8361555">=</span>&nbsp;<span class="num" id="8361557">1.2</span>&nbsp;<span class="op" id="8361561">+</span>&nbsp;<span class="num" id="8361563">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8361569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361572">err</span>&nbsp;<span class="op" id="8361576">:=</span>&nbsp;<span class="ident" id="8361579">enc</span><span class="op" id="8361582">.</span><span class="ident" id="8361583">Encode</span><span class="op" id="8361589">(</span><span class="ident" id="8361590">a</span><span class="op" id="8361591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361594">if</span>&nbsp;<span class="ident" id="8361597">err</span>&nbsp;<span class="op" id="8361601">!=</span>&nbsp;<span class="ident" id="8361604">nil</span>&nbsp;<span class="op" id="8361608">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361612">b</span><span class="op" id="8361613">.</span><span class="ident" id="8361614">Fatal</span><span class="op" id="8361619">(</span><span class="ident" id="8361620">err</span><span class="op" id="8361623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8361626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361629">x</span>&nbsp;<span class="op" id="8361631">:=</span>&nbsp;<span class="builtinfunc" id="8361634">make</span><span class="op" id="8361638">(</span><span class="op" id="8361639">[</span><span class="op" id="8361640">]</span><span class="builtintype" id="8361641">complex128</span><span class="op" id="8361651">,</span>&nbsp;<span class="num" id="8361653">1000</span><span class="op" id="8361657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361660">bbuf</span>&nbsp;<span class="op" id="8361665">:=</span>&nbsp;<span class="ident" id="8361668">benchmarkBuf</span><span class="op" id="8361680">{</span><span class="ident" id="8361681">data</span><span class="op" id="8361685">:</span>&nbsp;<span class="ident" id="8361687">buf</span><span class="op" id="8361690">.</span><span class="ident" id="8361691">Bytes</span><span class="op" id="8361696">(</span><span class="op" id="8361697">)</span><span class="op" id="8361698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361701">b</span><span class="op" id="8361702">.</span><span class="ident" id="8361703">ResetTimer</span><span class="op" id="8361713">(</span><span class="op" id="8361714">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361717">for</span>&nbsp;<span class="ident" id="8361721">i</span>&nbsp;<span class="op" id="8361723">:=</span>&nbsp;<span class="num" id="8361726">0</span><span class="op" id="8361727">;</span>&nbsp;<span class="ident" id="8361729">i</span>&nbsp;<span class="op" id="8361731">&lt;</span>&nbsp;<span class="ident" id="8361733">b</span><span class="op" id="8361734">.</span><span class="ident" id="8361735">N</span><span class="op" id="8361736">;</span>&nbsp;<span class="ident" id="8361738">i</span><span class="op" id="8361739">++</span>&nbsp;<span class="op" id="8361742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361746">bbuf</span><span class="op" id="8361750">.</span><span class="ident" id="8361751">reset</span><span class="op" id="8361756">(</span><span class="op" id="8361757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361761">dec</span>&nbsp;<span class="op" id="8361765">:=</span>&nbsp;<span class="ident" id="8361768">NewDecoder</span><span class="op" id="8361778">(</span><span class="op" id="8361779">&amp;</span><span class="ident" id="8361780">bbuf</span><span class="op" id="8361784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361788">err</span>&nbsp;<span class="op" id="8361792">:=</span>&nbsp;<span class="ident" id="8361795">dec</span><span class="op" id="8361798">.</span><span class="ident" id="8361799">Decode</span><span class="op" id="8361805">(</span><span class="op" id="8361806">&amp;</span><span class="ident" id="8361807">x</span><span class="op" id="8361808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361812">if</span>&nbsp;<span class="ident" id="8361815">err</span>&nbsp;<span class="op" id="8361819">!=</span>&nbsp;<span class="ident" id="8361822">nil</span>&nbsp;<span class="op" id="8361826">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361831">b</span><span class="op" id="8361832">.</span><span class="ident" id="8361833">Fatal</span><span class="op" id="8361838">(</span><span class="ident" id="8361839">i</span><span class="op" id="8361840">,</span>&nbsp;<span class="ident" id="8361842">err</span><span class="op" id="8361845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8361849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8361852">}</span><br>
<span class="lineno"></span><span class="op" id="8361854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8361857">func</span>&nbsp;<span class="ident" id="8361862">BenchmarkDecodeFloat64Slice</span><span class="op" id="8361889">(</span><span class="ident" id="8361890">b</span>&nbsp;<span class="op" id="8361892">*</span><span class="ident" id="8361893">testing</span><span class="op" id="8361900">.</span><span class="ident" id="8361901">B</span><span class="op" id="8361902">)</span>&nbsp;<span class="op" id="8361904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361907">var</span>&nbsp;<span class="ident" id="8361911">buf</span>&nbsp;<span class="ident" id="8361915">bytes</span><span class="op" id="8361920">.</span><span class="ident" id="8361921">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361929">enc</span>&nbsp;<span class="op" id="8361933">:=</span>&nbsp;<span class="ident" id="8361936">NewEncoder</span><span class="op" id="8361946">(</span><span class="op" id="8361947">&amp;</span><span class="ident" id="8361948">buf</span><span class="op" id="8361951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8361954">a</span>&nbsp;<span class="op" id="8361956">:=</span>&nbsp;<span class="builtinfunc" id="8361959">make</span><span class="op" id="8361963">(</span><span class="op" id="8361964">[</span><span class="op" id="8361965">]</span><span class="builtintype" id="8361966">float64</span><span class="op" id="8361973">,</span>&nbsp;<span class="num" id="8361975">1000</span><span class="op" id="8361979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8361982">for</span>&nbsp;<span class="ident" id="8361986">i</span>&nbsp;<span class="op" id="8361988">:=</span>&nbsp;<span class="keyword" id="8361991">range</span>&nbsp;<span class="ident" id="8361997">a</span>&nbsp;<span class="op" id="8361999">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362003">a</span><span class="op" id="8362004">[</span><span class="ident" id="8362005">i</span><span class="op" id="8362006">]</span>&nbsp;<span class="op" id="8362008">=</span>&nbsp;<span class="num" id="8362010">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362021">err</span>&nbsp;<span class="op" id="8362025">:=</span>&nbsp;<span class="ident" id="8362028">enc</span><span class="op" id="8362031">.</span><span class="ident" id="8362032">Encode</span><span class="op" id="8362038">(</span><span class="ident" id="8362039">a</span><span class="op" id="8362040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362043">if</span>&nbsp;<span class="ident" id="8362046">err</span>&nbsp;<span class="op" id="8362050">!=</span>&nbsp;<span class="ident" id="8362053">nil</span>&nbsp;<span class="op" id="8362057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362061">b</span><span class="op" id="8362062">.</span><span class="ident" id="8362063">Fatal</span><span class="op" id="8362068">(</span><span class="ident" id="8362069">err</span><span class="op" id="8362072">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362078">x</span>&nbsp;<span class="op" id="8362080">:=</span>&nbsp;<span class="builtinfunc" id="8362083">make</span><span class="op" id="8362087">(</span><span class="op" id="8362088">[</span><span class="op" id="8362089">]</span><span class="builtintype" id="8362090">float64</span><span class="op" id="8362097">,</span>&nbsp;<span class="num" id="8362099">1000</span><span class="op" id="8362103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362106">bbuf</span>&nbsp;<span class="op" id="8362111">:=</span>&nbsp;<span class="ident" id="8362114">benchmarkBuf</span><span class="op" id="8362126">{</span><span class="ident" id="8362127">data</span><span class="op" id="8362131">:</span>&nbsp;<span class="ident" id="8362133">buf</span><span class="op" id="8362136">.</span><span class="ident" id="8362137">Bytes</span><span class="op" id="8362142">(</span><span class="op" id="8362143">)</span><span class="op" id="8362144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362147">b</span><span class="op" id="8362148">.</span><span class="ident" id="8362149">ResetTimer</span><span class="op" id="8362159">(</span><span class="op" id="8362160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362163">for</span>&nbsp;<span class="ident" id="8362167">i</span>&nbsp;<span class="op" id="8362169">:=</span>&nbsp;<span class="num" id="8362172">0</span><span class="op" id="8362173">;</span>&nbsp;<span class="ident" id="8362175">i</span>&nbsp;<span class="op" id="8362177">&lt;</span>&nbsp;<span class="ident" id="8362179">b</span><span class="op" id="8362180">.</span><span class="ident" id="8362181">N</span><span class="op" id="8362182">;</span>&nbsp;<span class="ident" id="8362184">i</span><span class="op" id="8362185">++</span>&nbsp;<span class="op" id="8362188">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362192">bbuf</span><span class="op" id="8362196">.</span><span class="ident" id="8362197">reset</span><span class="op" id="8362202">(</span><span class="op" id="8362203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362207">dec</span>&nbsp;<span class="op" id="8362211">:=</span>&nbsp;<span class="ident" id="8362214">NewDecoder</span><span class="op" id="8362224">(</span><span class="op" id="8362225">&amp;</span><span class="ident" id="8362226">bbuf</span><span class="op" id="8362230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362234">err</span>&nbsp;<span class="op" id="8362238">:=</span>&nbsp;<span class="ident" id="8362241">dec</span><span class="op" id="8362244">.</span><span class="ident" id="8362245">Decode</span><span class="op" id="8362251">(</span><span class="op" id="8362252">&amp;</span><span class="ident" id="8362253">x</span><span class="op" id="8362254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362258">if</span>&nbsp;<span class="ident" id="8362261">err</span>&nbsp;<span class="op" id="8362265">!=</span>&nbsp;<span class="ident" id="8362268">nil</span>&nbsp;<span class="op" id="8362272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362277">b</span><span class="op" id="8362278">.</span><span class="ident" id="8362279">Fatal</span><span class="op" id="8362284">(</span><span class="ident" id="8362285">i</span><span class="op" id="8362286">,</span>&nbsp;<span class="ident" id="8362288">err</span><span class="op" id="8362291">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362298">}</span><br>
<span class="lineno"></span><span class="op" id="8362300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8362303">func</span>&nbsp;<span class="ident" id="8362308">BenchmarkDecodeInt32Slice</span><span class="op" id="8362333">(</span><span class="ident" id="8362334">b</span>&nbsp;<span class="op" id="8362336">*</span><span class="ident" id="8362337">testing</span><span class="op" id="8362344">.</span><span class="ident" id="8362345">B</span><span class="op" id="8362346">)</span>&nbsp;<span class="op" id="8362348">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362351">var</span>&nbsp;<span class="ident" id="8362355">buf</span>&nbsp;<span class="ident" id="8362359">bytes</span><span class="op" id="8362364">.</span><span class="ident" id="8362365">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362373">enc</span>&nbsp;<span class="op" id="8362377">:=</span>&nbsp;<span class="ident" id="8362380">NewEncoder</span><span class="op" id="8362390">(</span><span class="op" id="8362391">&amp;</span><span class="ident" id="8362392">buf</span><span class="op" id="8362395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362398">a</span>&nbsp;<span class="op" id="8362400">:=</span>&nbsp;<span class="builtinfunc" id="8362403">make</span><span class="op" id="8362407">(</span><span class="op" id="8362408">[</span><span class="op" id="8362409">]</span><span class="builtintype" id="8362410">int32</span><span class="op" id="8362415">,</span>&nbsp;<span class="num" id="8362417">1000</span><span class="op" id="8362421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362424">for</span>&nbsp;<span class="ident" id="8362428">i</span>&nbsp;<span class="op" id="8362430">:=</span>&nbsp;<span class="keyword" id="8362433">range</span>&nbsp;<span class="ident" id="8362439">a</span>&nbsp;<span class="op" id="8362441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362445">a</span><span class="op" id="8362446">[</span><span class="ident" id="8362447">i</span><span class="op" id="8362448">]</span>&nbsp;<span class="op" id="8362450">=</span>&nbsp;<span class="num" id="8362452">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362461">err</span>&nbsp;<span class="op" id="8362465">:=</span>&nbsp;<span class="ident" id="8362468">enc</span><span class="op" id="8362471">.</span><span class="ident" id="8362472">Encode</span><span class="op" id="8362478">(</span><span class="ident" id="8362479">a</span><span class="op" id="8362480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362483">if</span>&nbsp;<span class="ident" id="8362486">err</span>&nbsp;<span class="op" id="8362490">!=</span>&nbsp;<span class="ident" id="8362493">nil</span>&nbsp;<span class="op" id="8362497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362501">b</span><span class="op" id="8362502">.</span><span class="ident" id="8362503">Fatal</span><span class="op" id="8362508">(</span><span class="ident" id="8362509">err</span><span class="op" id="8362512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362515">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362518">x</span>&nbsp;<span class="op" id="8362520">:=</span>&nbsp;<span class="builtinfunc" id="8362523">make</span><span class="op" id="8362527">(</span><span class="op" id="8362528">[</span><span class="op" id="8362529">]</span><span class="builtintype" id="8362530">int32</span><span class="op" id="8362535">,</span>&nbsp;<span class="num" id="8362537">1000</span><span class="op" id="8362541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362544">bbuf</span>&nbsp;<span class="op" id="8362549">:=</span>&nbsp;<span class="ident" id="8362552">benchmarkBuf</span><span class="op" id="8362564">{</span><span class="ident" id="8362565">data</span><span class="op" id="8362569">:</span>&nbsp;<span class="ident" id="8362571">buf</span><span class="op" id="8362574">.</span><span class="ident" id="8362575">Bytes</span><span class="op" id="8362580">(</span><span class="op" id="8362581">)</span><span class="op" id="8362582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362585">b</span><span class="op" id="8362586">.</span><span class="ident" id="8362587">ResetTimer</span><span class="op" id="8362597">(</span><span class="op" id="8362598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362601">for</span>&nbsp;<span class="ident" id="8362605">i</span>&nbsp;<span class="op" id="8362607">:=</span>&nbsp;<span class="num" id="8362610">0</span><span class="op" id="8362611">;</span>&nbsp;<span class="ident" id="8362613">i</span>&nbsp;<span class="op" id="8362615">&lt;</span>&nbsp;<span class="ident" id="8362617">b</span><span class="op" id="8362618">.</span><span class="ident" id="8362619">N</span><span class="op" id="8362620">;</span>&nbsp;<span class="ident" id="8362622">i</span><span class="op" id="8362623">++</span>&nbsp;<span class="op" id="8362626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362630">bbuf</span><span class="op" id="8362634">.</span><span class="ident" id="8362635">reset</span><span class="op" id="8362640">(</span><span class="op" id="8362641">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362645">dec</span>&nbsp;<span class="op" id="8362649">:=</span>&nbsp;<span class="ident" id="8362652">NewDecoder</span><span class="op" id="8362662">(</span><span class="op" id="8362663">&amp;</span><span class="ident" id="8362664">bbuf</span><span class="op" id="8362668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362672">err</span>&nbsp;<span class="op" id="8362676">:=</span>&nbsp;<span class="ident" id="8362679">dec</span><span class="op" id="8362682">.</span><span class="ident" id="8362683">Decode</span><span class="op" id="8362689">(</span><span class="op" id="8362690">&amp;</span><span class="ident" id="8362691">x</span><span class="op" id="8362692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362696">if</span>&nbsp;<span class="ident" id="8362699">err</span>&nbsp;<span class="op" id="8362703">!=</span>&nbsp;<span class="ident" id="8362706">nil</span>&nbsp;<span class="op" id="8362710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362715">b</span><span class="op" id="8362716">.</span><span class="ident" id="8362717">Fatal</span><span class="op" id="8362722">(</span><span class="ident" id="8362723">i</span><span class="op" id="8362724">,</span>&nbsp;<span class="ident" id="8362726">err</span><span class="op" id="8362729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362733">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362736">}</span><br>
<span class="lineno"></span><span class="op" id="8362738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8362741">func</span>&nbsp;<span class="ident" id="8362746">BenchmarkDecodeStringSlice</span><span class="op" id="8362772">(</span><span class="ident" id="8362773">b</span>&nbsp;<span class="op" id="8362775">*</span><span class="ident" id="8362776">testing</span><span class="op" id="8362783">.</span><span class="ident" id="8362784">B</span><span class="op" id="8362785">)</span>&nbsp;<span class="op" id="8362787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362790">var</span>&nbsp;<span class="ident" id="8362794">buf</span>&nbsp;<span class="ident" id="8362798">bytes</span><span class="op" id="8362803">.</span><span class="ident" id="8362804">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362812">enc</span>&nbsp;<span class="op" id="8362816">:=</span>&nbsp;<span class="ident" id="8362819">NewEncoder</span><span class="op" id="8362829">(</span><span class="op" id="8362830">&amp;</span><span class="ident" id="8362831">buf</span><span class="op" id="8362834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362837">a</span>&nbsp;<span class="op" id="8362839">:=</span>&nbsp;<span class="builtinfunc" id="8362842">make</span><span class="op" id="8362846">(</span><span class="op" id="8362847">[</span><span class="op" id="8362848">]</span><span class="builtintype" id="8362849">string</span><span class="op" id="8362855">,</span>&nbsp;<span class="num" id="8362857">1000</span><span class="op" id="8362861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362864">for</span>&nbsp;<span class="ident" id="8362868">i</span>&nbsp;<span class="op" id="8362870">:=</span>&nbsp;<span class="keyword" id="8362873">range</span>&nbsp;<span class="ident" id="8362879">a</span>&nbsp;<span class="op" id="8362881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362885">a</span><span class="op" id="8362886">[</span><span class="ident" id="8362887">i</span><span class="op" id="8362888">]</span>&nbsp;<span class="op" id="8362890">=</span>&nbsp;<span class="string" id="8362892">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362911">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362914">err</span>&nbsp;<span class="op" id="8362918">:=</span>&nbsp;<span class="ident" id="8362921">enc</span><span class="op" id="8362924">.</span><span class="ident" id="8362925">Encode</span><span class="op" id="8362931">(</span><span class="ident" id="8362932">a</span><span class="op" id="8362933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8362936">if</span>&nbsp;<span class="ident" id="8362939">err</span>&nbsp;<span class="op" id="8362943">!=</span>&nbsp;<span class="ident" id="8362946">nil</span>&nbsp;<span class="op" id="8362950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362954">b</span><span class="op" id="8362955">.</span><span class="ident" id="8362956">Fatal</span><span class="op" id="8362961">(</span><span class="ident" id="8362962">err</span><span class="op" id="8362965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8362968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362971">x</span>&nbsp;<span class="op" id="8362973">:=</span>&nbsp;<span class="builtinfunc" id="8362976">make</span><span class="op" id="8362980">(</span><span class="op" id="8362981">[</span><span class="op" id="8362982">]</span><span class="builtintype" id="8362983">string</span><span class="op" id="8362989">,</span>&nbsp;<span class="num" id="8362991">1000</span><span class="op" id="8362995">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8362998">bbuf</span>&nbsp;<span class="op" id="8363003">:=</span>&nbsp;<span class="ident" id="8363006">benchmarkBuf</span><span class="op" id="8363018">{</span><span class="ident" id="8363019">data</span><span class="op" id="8363023">:</span>&nbsp;<span class="ident" id="8363025">buf</span><span class="op" id="8363028">.</span><span class="ident" id="8363029">Bytes</span><span class="op" id="8363034">(</span><span class="op" id="8363035">)</span><span class="op" id="8363036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363039">b</span><span class="op" id="8363040">.</span><span class="ident" id="8363041">ResetTimer</span><span class="op" id="8363051">(</span><span class="op" id="8363052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363055">for</span>&nbsp;<span class="ident" id="8363059">i</span>&nbsp;<span class="op" id="8363061">:=</span>&nbsp;<span class="num" id="8363064">0</span><span class="op" id="8363065">;</span>&nbsp;<span class="ident" id="8363067">i</span>&nbsp;<span class="op" id="8363069">&lt;</span>&nbsp;<span class="ident" id="8363071">b</span><span class="op" id="8363072">.</span><span class="ident" id="8363073">N</span><span class="op" id="8363074">;</span>&nbsp;<span class="ident" id="8363076">i</span><span class="op" id="8363077">++</span>&nbsp;<span class="op" id="8363080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363084">bbuf</span><span class="op" id="8363088">.</span><span class="ident" id="8363089">reset</span><span class="op" id="8363094">(</span><span class="op" id="8363095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363099">dec</span>&nbsp;<span class="op" id="8363103">:=</span>&nbsp;<span class="ident" id="8363106">NewDecoder</span><span class="op" id="8363116">(</span><span class="op" id="8363117">&amp;</span><span class="ident" id="8363118">bbuf</span><span class="op" id="8363122">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363126">err</span>&nbsp;<span class="op" id="8363130">:=</span>&nbsp;<span class="ident" id="8363133">dec</span><span class="op" id="8363136">.</span><span class="ident" id="8363137">Decode</span><span class="op" id="8363143">(</span><span class="op" id="8363144">&amp;</span><span class="ident" id="8363145">x</span><span class="op" id="8363146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8363150">if</span>&nbsp;<span class="ident" id="8363153">err</span>&nbsp;<span class="op" id="8363157">!=</span>&nbsp;<span class="ident" id="8363160">nil</span>&nbsp;<span class="op" id="8363164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8363169">b</span><span class="op" id="8363170">.</span><span class="ident" id="8363171">Fatal</span><span class="op" id="8363176">(</span><span class="ident" id="8363177">i</span><span class="op" id="8363178">,</span>&nbsp;<span class="ident" id="8363180">err</span><span class="op" id="8363183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8363190">}</span><br>
<span class="lineno">325</span><span class="op" id="8363192">}</span>
</div>
</body>
</html>
