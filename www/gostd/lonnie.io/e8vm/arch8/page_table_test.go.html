<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="6757785">package</span>&nbsp;<span class="ident" id="6757793">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757800">import</span>&nbsp;<span class="op" id="6757807">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6757810">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="6757820">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757823">func</span>&nbsp;<span class="ident" id="6757828">TestPageTable</span><span class="op" id="6757841">(</span><span class="ident" id="6757842">t</span>&nbsp;<span class="op" id="6757844">*</span><span class="ident" id="6757845">testing</span><span class="op" id="6757852">.</span><span class="ident" id="6757853">T</span><span class="op" id="6757854">)</span>&nbsp;<span class="op" id="6757856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757859">ne</span>&nbsp;<span class="op" id="6757862">:=</span>&nbsp;<span class="keyword" id="6757865">func</span><span class="op" id="6757869">(</span><span class="ident" id="6757870">e</span>&nbsp;<span class="op" id="6757872">*</span><span class="ident" id="6757873">Excep</span><span class="op" id="6757878">)</span>&nbsp;<span class="op" id="6757880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757884">if</span>&nbsp;<span class="ident" id="6757887">e</span>&nbsp;<span class="op" id="6757889">!=</span>&nbsp;<span class="ident" id="6757892">nil</span>&nbsp;<span class="op" id="6757896">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757901">t</span><span class="op" id="6757902">.</span><span class="ident" id="6757903">Fatal</span><span class="op" id="6757908">(</span><span class="ident" id="6757909">e</span><span class="op" id="6757910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757921">as</span>&nbsp;<span class="op" id="6757924">:=</span>&nbsp;<span class="keyword" id="6757927">func</span><span class="op" id="6757931">(</span><span class="ident" id="6757932">cond</span>&nbsp;<span class="builtintype" id="6757937">bool</span><span class="op" id="6757941">)</span>&nbsp;<span class="op" id="6757943">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757947">if</span>&nbsp;<span class="op" id="6757950">!</span><span class="ident" id="6757951">cond</span>&nbsp;<span class="op" id="6757956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757961">t</span><span class="op" id="6757962">.</span><span class="ident" id="6757963">Fail</span><span class="op" id="6757967">(</span><span class="op" id="6757968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757979">m</span>&nbsp;<span class="op" id="6757981">:=</span>&nbsp;<span class="ident" id="6757984">newPhyMemory</span><span class="op" id="6757996">(</span><span class="num" id="6757997">4096</span>&nbsp;<span class="op" id="6758002">*</span>&nbsp;<span class="ident" id="6758004">PageSize</span><span class="op" id="6758012">)</span>&nbsp;<span class="comment" id="6758014">//&nbsp;4&nbsp;2nd&nbsp;level&nbsp;entries</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758039">p8</span>&nbsp;<span class="op" id="6758042">:=</span>&nbsp;<span class="ident" id="6758045">m</span><span class="op" id="6758046">.</span><span class="ident" id="6758047">Page</span><span class="op" id="6758051">(</span><span class="num" id="6758052">8</span><span class="op" id="6758053">)</span>&nbsp;<span class="comment" id="6758055">//&nbsp;page&nbsp;eight</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758070">p9</span>&nbsp;<span class="op" id="6758073">:=</span>&nbsp;<span class="ident" id="6758076">m</span><span class="op" id="6758077">.</span><span class="ident" id="6758078">Page</span><span class="op" id="6758082">(</span><span class="num" id="6758083">9</span><span class="op" id="6758084">)</span>&nbsp;<span class="comment" id="6758086">//&nbsp;page&nbsp;nine</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758101">pte1</span>&nbsp;<span class="op" id="6758106">:=</span>&nbsp;<span class="ident" id="6758109">ptEntry</span><span class="op" id="6758116">(</span><span class="num" id="6758117">0x9000</span><span class="op" id="6758123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758126">pte1</span><span class="op" id="6758130">.</span><span class="ident" id="6758131">setBit</span><span class="op" id="6758137">(</span><span class="ident" id="6758138">pteValid</span><span class="op" id="6758146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758149">p8</span><span class="op" id="6758151">.</span><span class="ident" id="6758152">WriteWord</span><span class="op" id="6758161">(</span><span class="num" id="6758162">0</span><span class="op" id="6758163">,</span>&nbsp;<span class="builtintype" id="6758165">uint32</span><span class="op" id="6758171">(</span><span class="ident" id="6758172">pte1</span><span class="op" id="6758176">)</span><span class="op" id="6758177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758181">pte2</span>&nbsp;<span class="op" id="6758186">:=</span>&nbsp;<span class="ident" id="6758189">ptEntry</span><span class="op" id="6758196">(</span><span class="num" id="6758197">0xa000</span><span class="op" id="6758203">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758206">pte2</span><span class="op" id="6758210">.</span><span class="ident" id="6758211">setBit</span><span class="op" id="6758217">(</span><span class="ident" id="6758218">pteValid</span><span class="op" id="6758226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758229">for</span>&nbsp;<span class="ident" id="6758233">i</span>&nbsp;<span class="op" id="6758235">:=</span>&nbsp;<span class="builtintype" id="6758238">uint32</span><span class="op" id="6758244">(</span><span class="num" id="6758245">0</span><span class="op" id="6758246">)</span><span class="op" id="6758247">;</span>&nbsp;<span class="ident" id="6758249">i</span>&nbsp;<span class="op" id="6758251">&lt;</span>&nbsp;<span class="num" id="6758253">512</span><span class="op" id="6758256">;</span>&nbsp;<span class="ident" id="6758258">i</span><span class="op" id="6758259">++</span>&nbsp;<span class="op" id="6758262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6758266">//&nbsp;map&nbsp;all&nbsp;pages&nbsp;from&nbsp;0&nbsp;to&nbsp;1023&nbsp;to&nbsp;page&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758311">p9</span><span class="op" id="6758313">.</span><span class="ident" id="6758314">WriteWord</span><span class="op" id="6758323">(</span><span class="ident" id="6758324">i</span><span class="op" id="6758325">*</span><span class="num" id="6758326">4</span><span class="op" id="6758327">,</span>&nbsp;<span class="builtintype" id="6758329">uint32</span><span class="op" id="6758335">(</span><span class="ident" id="6758336">pte2</span><span class="op" id="6758340">)</span><span class="op" id="6758341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758344">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758348">pt</span>&nbsp;<span class="op" id="6758351">:=</span>&nbsp;<span class="ident" id="6758354">newPageTable</span><span class="op" id="6758366">(</span><span class="ident" id="6758367">m</span><span class="op" id="6758368">,</span>&nbsp;<span class="num" id="6758370">0x8000</span><span class="op" id="6758376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758380">for</span>&nbsp;<span class="ident" id="6758384">i</span>&nbsp;<span class="op" id="6758386">:=</span>&nbsp;<span class="builtintype" id="6758389">uint32</span><span class="op" id="6758395">(</span><span class="num" id="6758396">0</span><span class="op" id="6758397">)</span><span class="op" id="6758398">;</span>&nbsp;<span class="ident" id="6758400">i</span>&nbsp;<span class="op" id="6758402">&lt;</span>&nbsp;<span class="num" id="6758404">512</span><span class="op" id="6758407">;</span>&nbsp;<span class="ident" id="6758409">i</span><span class="op" id="6758410">++</span>&nbsp;<span class="op" id="6758413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758417">ret</span><span class="op" id="6758420">,</span>&nbsp;<span class="ident" id="6758422">e</span>&nbsp;<span class="op" id="6758424">:=</span>&nbsp;<span class="ident" id="6758427">pt</span><span class="op" id="6758429">.</span><span class="ident" id="6758430">Translate</span><span class="op" id="6758439">(</span><span class="ident" id="6758440">i</span><span class="op" id="6758441">*</span><span class="num" id="6758442">0x1000</span><span class="op" id="6758448">+</span><span class="num" id="6758449">0x341</span><span class="op" id="6758454">,</span>&nbsp;<span class="num" id="6758456">0</span><span class="op" id="6758457">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758461">ne</span><span class="op" id="6758463">(</span><span class="ident" id="6758464">e</span><span class="op" id="6758465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758469">as</span><span class="op" id="6758471">(</span><span class="ident" id="6758472">ret</span>&nbsp;<span class="op" id="6758476">==</span>&nbsp;<span class="num" id="6758479">0xa341</span><span class="op" id="6758485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758492">for</span>&nbsp;<span class="ident" id="6758496">i</span>&nbsp;<span class="op" id="6758498">:=</span>&nbsp;<span class="builtintype" id="6758501">uint32</span><span class="op" id="6758507">(</span><span class="num" id="6758508">512</span><span class="op" id="6758511">)</span><span class="op" id="6758512">;</span>&nbsp;<span class="ident" id="6758514">i</span>&nbsp;<span class="op" id="6758516">&lt;</span>&nbsp;<span class="num" id="6758518">2048</span><span class="op" id="6758522">;</span>&nbsp;<span class="ident" id="6758524">i</span><span class="op" id="6758525">++</span>&nbsp;<span class="op" id="6758528">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758532">ret</span><span class="op" id="6758535">,</span>&nbsp;<span class="ident" id="6758537">e</span>&nbsp;<span class="op" id="6758539">:=</span>&nbsp;<span class="ident" id="6758542">pt</span><span class="op" id="6758544">.</span><span class="ident" id="6758545">Translate</span><span class="op" id="6758554">(</span><span class="ident" id="6758555">i</span><span class="op" id="6758556">*</span><span class="num" id="6758557">0x1000</span><span class="op" id="6758563">,</span>&nbsp;<span class="num" id="6758565">0</span><span class="op" id="6758566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758570">as</span><span class="op" id="6758572">(</span><span class="ident" id="6758573">ret</span>&nbsp;<span class="op" id="6758577">==</span>&nbsp;<span class="num" id="6758580">0</span><span class="op" id="6758581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758585">as</span><span class="op" id="6758587">(</span><span class="ident" id="6758588">e</span><span class="op" id="6758589">.</span><span class="ident" id="6758590">Code</span>&nbsp;<span class="op" id="6758595">==</span>&nbsp;<span class="ident" id="6758598">ErrPageFault</span><span class="op" id="6758610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758617">addr</span>&nbsp;<span class="op" id="6758622">:=</span>&nbsp;<span class="builtintype" id="6758625">uint32</span><span class="op" id="6758631">(</span><span class="num" id="6758632">3</span><span class="op" id="6758633">*</span><span class="ident" id="6758634">PageSize</span>&nbsp;<span class="op" id="6758643">+</span>&nbsp;<span class="num" id="6758645">0x23</span><span class="op" id="6758649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758652">_</span><span class="op" id="6758653">,</span>&nbsp;<span class="ident" id="6758655">e</span>&nbsp;<span class="op" id="6758657">:=</span>&nbsp;<span class="ident" id="6758660">pt</span><span class="op" id="6758662">.</span><span class="ident" id="6758663">TranslateRead</span><span class="op" id="6758676">(</span><span class="ident" id="6758677">addr</span><span class="op" id="6758681">,</span>&nbsp;<span class="num" id="6758683">0</span><span class="op" id="6758684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758687">as</span><span class="op" id="6758689">(</span><span class="ident" id="6758690">e</span>&nbsp;<span class="op" id="6758692">==</span>&nbsp;<span class="ident" id="6758695">nil</span><span class="op" id="6758698">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758702">pte2</span><span class="op" id="6758706">.</span><span class="ident" id="6758707">setBit</span><span class="op" id="6758713">(</span><span class="ident" id="6758714">pteReadonly</span><span class="op" id="6758725">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758728">p9</span><span class="op" id="6758730">.</span><span class="ident" id="6758731">WriteWord</span><span class="op" id="6758740">(</span><span class="num" id="6758741">3</span><span class="op" id="6758742">*</span><span class="num" id="6758743">4</span><span class="op" id="6758744">,</span>&nbsp;<span class="builtintype" id="6758746">uint32</span><span class="op" id="6758752">(</span><span class="ident" id="6758753">pte2</span><span class="op" id="6758757">)</span><span class="op" id="6758758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758761">_</span><span class="op" id="6758762">,</span>&nbsp;<span class="ident" id="6758764">e</span>&nbsp;<span class="op" id="6758766">=</span>&nbsp;<span class="ident" id="6758768">pt</span><span class="op" id="6758770">.</span><span class="ident" id="6758771">TranslateRead</span><span class="op" id="6758784">(</span><span class="ident" id="6758785">addr</span><span class="op" id="6758789">,</span>&nbsp;<span class="num" id="6758791">0</span><span class="op" id="6758792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758795">as</span><span class="op" id="6758797">(</span><span class="ident" id="6758798">e</span>&nbsp;<span class="op" id="6758800">==</span>&nbsp;<span class="ident" id="6758803">nil</span><span class="op" id="6758806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758809">_</span><span class="op" id="6758810">,</span>&nbsp;<span class="ident" id="6758812">e</span>&nbsp;<span class="op" id="6758814">=</span>&nbsp;<span class="ident" id="6758816">pt</span><span class="op" id="6758818">.</span><span class="ident" id="6758819">TranslateWrite</span><span class="op" id="6758833">(</span><span class="ident" id="6758834">addr</span><span class="op" id="6758838">,</span>&nbsp;<span class="num" id="6758840">0</span><span class="op" id="6758841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758844">as</span><span class="op" id="6758846">(</span><span class="ident" id="6758847">e</span><span class="op" id="6758848">.</span><span class="ident" id="6758849">Code</span>&nbsp;<span class="op" id="6758854">==</span>&nbsp;<span class="ident" id="6758857">ErrPageReadonly</span><span class="op" id="6758872">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758876">w</span>&nbsp;<span class="op" id="6758878">:=</span>&nbsp;<span class="ident" id="6758881">p9</span><span class="op" id="6758883">.</span><span class="ident" id="6758884">ReadWord</span><span class="op" id="6758892">(</span><span class="num" id="6758893">3</span>&nbsp;<span class="op" id="6758895">*</span>&nbsp;<span class="num" id="6758897">4</span><span class="op" id="6758898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758901">as</span><span class="op" id="6758903">(</span><span class="op" id="6758904">(</span><span class="ident" id="6758905">w</span>&nbsp;<span class="op" id="6758907">&amp;</span>&nbsp;<span class="op" id="6758909">(</span><span class="num" id="6758910">0x1</span>&nbsp;<span class="op" id="6758914">&lt;&lt;</span>&nbsp;<span class="ident" id="6758917">pteUse</span><span class="op" id="6758923">)</span><span class="op" id="6758924">)</span>&nbsp;<span class="op" id="6758926">!=</span>&nbsp;<span class="num" id="6758929">0</span><span class="op" id="6758930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758933">as</span><span class="op" id="6758935">(</span><span class="op" id="6758936">(</span><span class="ident" id="6758937">w</span>&nbsp;<span class="op" id="6758939">&amp;</span>&nbsp;<span class="op" id="6758941">(</span><span class="num" id="6758942">0x1</span>&nbsp;<span class="op" id="6758946">&lt;&lt;</span>&nbsp;<span class="ident" id="6758949">pteDirty</span><span class="op" id="6758957">)</span><span class="op" id="6758958">)</span>&nbsp;<span class="op" id="6758960">==</span>&nbsp;<span class="num" id="6758963">0</span><span class="op" id="6758964">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758968">addr</span>&nbsp;<span class="op" id="6758973">+=</span>&nbsp;<span class="ident" id="6758976">PageSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758986">_</span><span class="op" id="6758987">,</span>&nbsp;<span class="ident" id="6758989">e</span>&nbsp;<span class="op" id="6758991">=</span>&nbsp;<span class="ident" id="6758993">pt</span><span class="op" id="6758995">.</span><span class="ident" id="6758996">TranslateWrite</span><span class="op" id="6759010">(</span><span class="ident" id="6759011">addr</span><span class="op" id="6759015">,</span>&nbsp;<span class="num" id="6759017">0</span><span class="op" id="6759018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759021">as</span><span class="op" id="6759023">(</span><span class="ident" id="6759024">e</span>&nbsp;<span class="op" id="6759026">==</span>&nbsp;<span class="ident" id="6759029">nil</span><span class="op" id="6759032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759035">w</span>&nbsp;<span class="op" id="6759037">=</span>&nbsp;<span class="ident" id="6759039">p9</span><span class="op" id="6759041">.</span><span class="ident" id="6759042">ReadWord</span><span class="op" id="6759050">(</span><span class="num" id="6759051">4</span>&nbsp;<span class="op" id="6759053">*</span>&nbsp;<span class="num" id="6759055">4</span><span class="op" id="6759056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6759059">as</span><span class="op" id="6759061">(</span><span class="op" id="6759062">(</span><span class="ident" id="6759063">w</span>&nbsp;<span class="op" id="6759065">&amp;</span>&nbsp;<span class="op" id="6759067">(</span><span class="num" id="6759068">0x1</span>&nbsp;<span class="op" id="6759072">&lt;&lt;</span>&nbsp;<span class="ident" id="6759075">pteDirty</span><span class="op" id="6759083">)</span><span class="op" id="6759084">)</span>&nbsp;<span class="op" id="6759086">!=</span>&nbsp;<span class="num" id="6759089">0</span><span class="op" id="6759090">)</span><br>
<span class="lineno">70</span><span class="op" id="6759092">}</span>
</div>
</body>
</html>
