<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html" class="current">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7353457">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7353513">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7353567">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7353618">package</span>&nbsp;<span class="ident" id="7353626">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7353633">import</span>&nbsp;<span class="op" id="7353640">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353643">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353649">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353660">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7353670">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7353673">const</span>&nbsp;<span class="ident" id="7353679">quote</span>&nbsp;<span class="op" id="7353685">=</span>&nbsp;<span class="string" id="7353687">&#34;`&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7353692">type</span>&nbsp;<span class="ident" id="7353697">readTest</span>&nbsp;<span class="keyword" id="7353706">struct</span>&nbsp;<span class="op" id="7353713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7353716">//&nbsp;Test&nbsp;input&nbsp;contains&nbsp;ℙ&nbsp;where&nbsp;readImports&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7353775">in</span>&nbsp;&nbsp;<span class="builtintype" id="7353779">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7353787">err</span>&nbsp;<span class="builtintype" id="7353791">string</span><br>
<span class="lineno"></span><span class="op" id="7353798">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7353801">var</span>&nbsp;<span class="ident" id="7353805">readImportsTests</span>&nbsp;<span class="op" id="7353822">=</span>&nbsp;<span class="op" id="7353824">[</span><span class="op" id="7353825">]</span><span class="ident" id="7353826">readTest</span><span class="op" id="7353834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353841">`package&nbsp;p`</span><span class="op" id="7353852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353856">&#34;&#34;</span><span class="op" id="7353858">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353861">}</span><span class="op" id="7353862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353869">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7353892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353896">&#34;&#34;</span><span class="op" id="7353898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353901">}</span><span class="op" id="7353902">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353909">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7353934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353938">&#34;&#34;</span><span class="op" id="7353940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353943">}</span><span class="op" id="7353944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353947">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353951">`package&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;;ℙvar&nbsp;x&nbsp;=&nbsp;1`</span><span class="op" id="7353987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353991">&#34;&#34;</span><span class="op" id="7353993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7353996">}</span><span class="op" id="7353997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354004">`package&nbsp;p<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;a&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;(<br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;x&#34;&nbsp;/*&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&#34;x&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;&#34;x&#34;&nbsp;//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`</span>&nbsp;<span class="op" id="7354165">+</span>&nbsp;<span class="ident" id="7354167">quote</span>&nbsp;<span class="op" id="7354173">+</span>&nbsp;<span class="string" id="7354175">`x`</span>&nbsp;<span class="op" id="7354179">+</span>&nbsp;<span class="ident" id="7354181">quote</span>&nbsp;<span class="op" id="7354187">+</span>&nbsp;<span class="string" id="7354189">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;/*comment*/&nbsp;`</span>&nbsp;<span class="op" id="7354210">+</span>&nbsp;<span class="ident" id="7354212">quote</span>&nbsp;<span class="op" id="7354218">+</span>&nbsp;<span class="string" id="7354220">`x`</span>&nbsp;<span class="op" id="7354224">+</span>&nbsp;<span class="ident" id="7354226">quote</span>&nbsp;<span class="op" id="7354232">+</span>&nbsp;<span class="string" id="7354234">`<br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;`</span>&nbsp;<span class="op" id="7354243">+</span>&nbsp;<span class="ident" id="7354245">quote</span>&nbsp;<span class="op" id="7354251">+</span>&nbsp;<span class="string" id="7354253">`x`</span>&nbsp;<span class="op" id="7354257">+</span>&nbsp;<span class="ident" id="7354259">quote</span>&nbsp;<span class="op" id="7354265">+</span>&nbsp;<span class="string" id="7354267">`<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;()<br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import()import()import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import();import();import()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ℙvar&nbsp;x&nbsp;=&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`</span><span class="op" id="7354377">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354381">&#34;&#34;</span><span class="op" id="7354383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354386">}</span><span class="op" id="7354387">,</span><br>
<span class="lineno"></span><span class="op" id="7354389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7354392">var</span>&nbsp;<span class="ident" id="7354396">readCommentsTests</span>&nbsp;<span class="op" id="7354414">=</span>&nbsp;<span class="op" id="7354416">[</span><span class="op" id="7354417">]</span><span class="ident" id="7354418">readTest</span><span class="op" id="7354426">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354433">`ℙpackage&nbsp;p`</span><span class="op" id="7354447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354451">&#34;&#34;</span><span class="op" id="7354453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354456">}</span><span class="op" id="7354457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354460">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354464">`ℙpackage&nbsp;p;&nbsp;import&nbsp;&#34;x&#34;`</span><span class="op" id="7354490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354494">&#34;&#34;</span><span class="op" id="7354496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354499">}</span><span class="op" id="7354500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354507">`ℙpackage&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x&#34;`</span><span class="op" id="7354535">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354539">&#34;&#34;</span><span class="op" id="7354541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354544">}</span><span class="op" id="7354545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354552">`//&nbsp;foo<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;bar&nbsp;*/<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;quux&nbsp;*/&nbsp;//&nbsp;baz<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*/&nbsp;zot&nbsp;*/<br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;asdf<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ℙHello,&nbsp;world`</span><span class="op" id="7354639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7354643">&#34;&#34;</span><span class="op" id="7354645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354648">}</span><span class="op" id="7354649">,</span><br>
<span class="lineno">95</span><span class="op" id="7354651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7354654">func</span>&nbsp;<span class="ident" id="7354659">testRead</span><span class="op" id="7354667">(</span><span class="ident" id="7354668">t</span>&nbsp;<span class="op" id="7354670">*</span><span class="ident" id="7354671">testing</span><span class="op" id="7354678">.</span><span class="ident" id="7354679">T</span><span class="op" id="7354680">,</span>&nbsp;<span class="ident" id="7354682">tests</span>&nbsp;<span class="op" id="7354688">[</span><span class="op" id="7354689">]</span><span class="ident" id="7354690">readTest</span><span class="op" id="7354698">,</span>&nbsp;<span class="ident" id="7354700">read</span>&nbsp;<span class="keyword" id="7354705">func</span><span class="op" id="7354709">(</span><span class="ident" id="7354710">io</span><span class="op" id="7354712">.</span><span class="ident" id="7354713">Reader</span><span class="op" id="7354719">)</span>&nbsp;<span class="op" id="7354721">(</span><span class="op" id="7354722">[</span><span class="op" id="7354723">]</span><span class="builtintype" id="7354724">byte</span><span class="op" id="7354728">,</span>&nbsp;<span class="builtintype" id="7354730">error</span><span class="op" id="7354735">)</span><span class="op" id="7354736">)</span>&nbsp;<span class="op" id="7354738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7354741">for</span>&nbsp;<span class="ident" id="7354745">i</span><span class="op" id="7354746">,</span>&nbsp;<span class="ident" id="7354748">tt</span>&nbsp;<span class="op" id="7354751">:=</span>&nbsp;<span class="keyword" id="7354754">range</span>&nbsp;<span class="ident" id="7354760">tests</span>&nbsp;<span class="op" id="7354766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7354770">var</span>&nbsp;<span class="ident" id="7354774">in</span><span class="op" id="7354776">,</span>&nbsp;<span class="ident" id="7354778">testOut</span>&nbsp;<span class="builtintype" id="7354786">string</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354795">j</span>&nbsp;<span class="op" id="7354797">:=</span>&nbsp;<span class="ident" id="7354800">strings</span><span class="op" id="7354807">.</span><span class="ident" id="7354808">Index</span><span class="op" id="7354813">(</span><span class="ident" id="7354814">tt</span><span class="op" id="7354816">.</span><span class="ident" id="7354817">in</span><span class="op" id="7354819">,</span>&nbsp;<span class="string" id="7354821">&#34;ℙ&#34;</span><span class="op" id="7354826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7354830">if</span>&nbsp;<span class="ident" id="7354833">j</span>&nbsp;<span class="op" id="7354835">&lt;</span>&nbsp;<span class="num" id="7354837">0</span>&nbsp;<span class="op" id="7354839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354844">in</span>&nbsp;<span class="op" id="7354847">=</span>&nbsp;<span class="ident" id="7354849">tt</span><span class="op" id="7354851">.</span><span class="ident" id="7354852">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354858">testOut</span>&nbsp;<span class="op" id="7354866">=</span>&nbsp;<span class="ident" id="7354868">tt</span><span class="op" id="7354870">.</span><span class="ident" id="7354871">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354876">}</span>&nbsp;<span class="keyword" id="7354878">else</span>&nbsp;<span class="op" id="7354883">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354888">in</span>&nbsp;<span class="op" id="7354891">=</span>&nbsp;<span class="ident" id="7354893">tt</span><span class="op" id="7354895">.</span><span class="ident" id="7354896">in</span><span class="op" id="7354898">[</span><span class="op" id="7354899">:</span><span class="ident" id="7354900">j</span><span class="op" id="7354901">]</span>&nbsp;<span class="op" id="7354903">+</span>&nbsp;<span class="ident" id="7354905">tt</span><span class="op" id="7354907">.</span><span class="ident" id="7354908">in</span><span class="op" id="7354910">[</span><span class="ident" id="7354911">j</span><span class="op" id="7354912">+</span><span class="builtinfunc" id="7354913">len</span><span class="op" id="7354916">(</span><span class="string" id="7354917">&#34;ℙ&#34;</span><span class="op" id="7354922">)</span><span class="op" id="7354923">:</span><span class="op" id="7354924">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354929">testOut</span>&nbsp;<span class="op" id="7354937">=</span>&nbsp;<span class="ident" id="7354939">tt</span><span class="op" id="7354941">.</span><span class="ident" id="7354942">in</span><span class="op" id="7354944">[</span><span class="op" id="7354945">:</span><span class="ident" id="7354946">j</span><span class="op" id="7354947">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7354951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354955">r</span>&nbsp;<span class="op" id="7354957">:=</span>&nbsp;<span class="ident" id="7354960">strings</span><span class="op" id="7354967">.</span><span class="ident" id="7354968">NewReader</span><span class="op" id="7354977">(</span><span class="ident" id="7354978">in</span><span class="op" id="7354980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7354984">buf</span><span class="op" id="7354987">,</span>&nbsp;<span class="ident" id="7354989">err</span>&nbsp;<span class="op" id="7354993">:=</span>&nbsp;<span class="ident" id="7354996">read</span><span class="op" id="7355000">(</span><span class="ident" id="7355001">r</span><span class="op" id="7355002">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355006">if</span>&nbsp;<span class="ident" id="7355009">err</span>&nbsp;<span class="op" id="7355013">!=</span>&nbsp;<span class="builtintype" id="7355016">nil</span>&nbsp;<span class="op" id="7355020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355025">if</span>&nbsp;<span class="ident" id="7355028">tt</span><span class="op" id="7355030">.</span><span class="ident" id="7355031">err</span>&nbsp;<span class="op" id="7355035">==</span>&nbsp;<span class="string" id="7355038">&#34;&#34;</span>&nbsp;<span class="op" id="7355041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355047">t</span><span class="op" id="7355048">.</span><span class="ident" id="7355049">Errorf</span><span class="op" id="7355055">(</span><span class="string" id="7355056">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;success&nbsp;(%q)&#34;</span><span class="op" id="7355092">,</span>&nbsp;<span class="ident" id="7355094">i</span><span class="op" id="7355095">,</span>&nbsp;<span class="ident" id="7355097">err</span><span class="op" id="7355100">,</span>&nbsp;<span class="builtintype" id="7355102">string</span><span class="op" id="7355108">(</span><span class="ident" id="7355109">buf</span><span class="op" id="7355112">)</span><span class="op" id="7355113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355119">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355131">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355136">if</span>&nbsp;<span class="op" id="7355139">!</span><span class="ident" id="7355140">strings</span><span class="op" id="7355147">.</span><span class="ident" id="7355148">Contains</span><span class="op" id="7355156">(</span><span class="ident" id="7355157">err</span><span class="op" id="7355160">.</span><span class="ident" id="7355161">Error</span><span class="op" id="7355166">(</span><span class="op" id="7355167">)</span><span class="op" id="7355168">,</span>&nbsp;<span class="ident" id="7355170">tt</span><span class="op" id="7355172">.</span><span class="ident" id="7355173">err</span><span class="op" id="7355176">)</span>&nbsp;<span class="op" id="7355178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355184">t</span><span class="op" id="7355185">.</span><span class="ident" id="7355186">Errorf</span><span class="op" id="7355192">(</span><span class="string" id="7355193">&#34;#%d:&nbsp;err=%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7355219">,</span>&nbsp;<span class="ident" id="7355221">i</span><span class="op" id="7355222">,</span>&nbsp;<span class="ident" id="7355224">err</span><span class="op" id="7355227">,</span>&nbsp;<span class="ident" id="7355229">tt</span><span class="op" id="7355231">.</span><span class="ident" id="7355232">err</span><span class="op" id="7355235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355241">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355258">continue</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355273">if</span>&nbsp;<span class="ident" id="7355276">err</span>&nbsp;<span class="op" id="7355280">==</span>&nbsp;<span class="builtintype" id="7355283">nil</span>&nbsp;<span class="op" id="7355287">&amp;&amp;</span>&nbsp;<span class="ident" id="7355290">tt</span><span class="op" id="7355292">.</span><span class="ident" id="7355293">err</span>&nbsp;<span class="op" id="7355297">!=</span>&nbsp;<span class="string" id="7355300">&#34;&#34;</span>&nbsp;<span class="op" id="7355303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355308">t</span><span class="op" id="7355309">.</span><span class="ident" id="7355310">Errorf</span><span class="op" id="7355316">(</span><span class="string" id="7355317">&#34;#%d:&nbsp;success,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7355344">,</span>&nbsp;<span class="ident" id="7355346">i</span><span class="op" id="7355347">,</span>&nbsp;<span class="ident" id="7355349">tt</span><span class="op" id="7355351">.</span><span class="ident" id="7355352">err</span><span class="op" id="7355355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355360">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355371">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355376">out</span>&nbsp;<span class="op" id="7355380">:=</span>&nbsp;<span class="builtintype" id="7355383">string</span><span class="op" id="7355389">(</span><span class="ident" id="7355390">buf</span><span class="op" id="7355393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7355397">if</span>&nbsp;<span class="ident" id="7355400">out</span>&nbsp;<span class="op" id="7355404">!=</span>&nbsp;<span class="ident" id="7355407">testOut</span>&nbsp;<span class="op" id="7355415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355420">t</span><span class="op" id="7355421">.</span><span class="ident" id="7355422">Errorf</span><span class="op" id="7355428">(</span><span class="string" id="7355429">&#34;#%d:&nbsp;wrong&nbsp;output:\nhave&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="7355469">,</span>&nbsp;<span class="ident" id="7355471">i</span><span class="op" id="7355472">,</span>&nbsp;<span class="ident" id="7355474">out</span><span class="op" id="7355477">,</span>&nbsp;<span class="ident" id="7355479">testOut</span><span class="op" id="7355486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355490">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355493">}</span><br>
<span class="lineno"></span><span class="op" id="7355495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355498">func</span>&nbsp;<span class="ident" id="7355503">TestReadImports</span><span class="op" id="7355518">(</span><span class="ident" id="7355519">t</span>&nbsp;<span class="op" id="7355521">*</span><span class="ident" id="7355522">testing</span><span class="op" id="7355529">.</span><span class="ident" id="7355530">T</span><span class="op" id="7355531">)</span>&nbsp;<span class="op" id="7355533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355536">testRead</span><span class="op" id="7355544">(</span><span class="ident" id="7355545">t</span><span class="op" id="7355546">,</span>&nbsp;<span class="ident" id="7355548">readImportsTests</span><span class="op" id="7355564">,</span>&nbsp;<span class="keyword" id="7355566">func</span><span class="op" id="7355570">(</span><span class="ident" id="7355571">r</span>&nbsp;<span class="ident" id="7355573">io</span><span class="op" id="7355575">.</span><span class="ident" id="7355576">Reader</span><span class="op" id="7355582">)</span>&nbsp;<span class="op" id="7355584">(</span><span class="op" id="7355585">[</span><span class="op" id="7355586">]</span><span class="builtintype" id="7355587">byte</span><span class="op" id="7355591">,</span>&nbsp;<span class="builtintype" id="7355593">error</span><span class="op" id="7355598">)</span>&nbsp;<span class="op" id="7355600">{</span>&nbsp;<span class="keyword" id="7355602">return</span>&nbsp;<span class="ident" id="7355609">readImports</span><span class="op" id="7355620">(</span><span class="ident" id="7355621">r</span><span class="op" id="7355622">,</span>&nbsp;<span class="builtintype" id="7355624">true</span><span class="op" id="7355628">)</span>&nbsp;<span class="op" id="7355630">}</span><span class="op" id="7355631">)</span><br>
<span class="lineno">135</span><span class="op" id="7355633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355636">func</span>&nbsp;<span class="ident" id="7355641">TestReadComments</span><span class="op" id="7355657">(</span><span class="ident" id="7355658">t</span>&nbsp;<span class="op" id="7355660">*</span><span class="ident" id="7355661">testing</span><span class="op" id="7355668">.</span><span class="ident" id="7355669">T</span><span class="op" id="7355670">)</span>&nbsp;<span class="op" id="7355672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7355675">testRead</span><span class="op" id="7355683">(</span><span class="ident" id="7355684">t</span><span class="op" id="7355685">,</span>&nbsp;<span class="ident" id="7355687">readCommentsTests</span><span class="op" id="7355704">,</span>&nbsp;<span class="ident" id="7355706">readComments</span><span class="op" id="7355718">)</span><br>
<span class="lineno"></span><span class="op" id="7355720">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7355723">var</span>&nbsp;<span class="ident" id="7355727">readFailuresTests</span>&nbsp;<span class="op" id="7355745">=</span>&nbsp;<span class="op" id="7355747">[</span><span class="op" id="7355748">]</span><span class="ident" id="7355749">readTest</span><span class="op" id="7355757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355764">`package`</span><span class="op" id="7355773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355777">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7355791">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355794">}</span><span class="op" id="7355795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355802">&#34;package&nbsp;p\n\x00\nimport&nbsp;`math`\n&#34;</span><span class="op" id="7355836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355840">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="7355865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355868">}</span><span class="op" id="7355869">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355876">`package&nbsp;p;&nbsp;import`</span><span class="op" id="7355895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355899">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7355913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355916">}</span><span class="op" id="7355917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355920">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355924">`package&nbsp;p;&nbsp;import&nbsp;&#34;`</span><span class="op" id="7355945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355949">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7355963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355966">}</span><span class="op" id="7355967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7355970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7355974">&#34;package&nbsp;p;&nbsp;import&nbsp;`&nbsp;\n\n&#34;</span><span class="op" id="7356000">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356004">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356021">}</span><span class="op" id="7356022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356029">`package&nbsp;p;&nbsp;import&nbsp;&#34;x`</span><span class="op" id="7356051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356055">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356069">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356072">}</span><span class="op" id="7356073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356080">`package&nbsp;p;&nbsp;import&nbsp;_`</span><span class="op" id="7356101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356105">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356122">}</span><span class="op" id="7356123">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356130">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;`</span><span class="op" id="7356153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356157">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356174">}</span><span class="op" id="7356175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356178">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356182">`package&nbsp;p;&nbsp;import&nbsp;_&nbsp;&#34;x`</span><span class="op" id="7356206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356210">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356227">}</span><span class="op" id="7356228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356235">`package&nbsp;p;&nbsp;import&nbsp;.`</span><span class="op" id="7356256">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356260">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356277">}</span><span class="op" id="7356278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356285">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;`</span><span class="op" id="7356308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356312">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356326">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356329">}</span><span class="op" id="7356330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356337">`package&nbsp;p;&nbsp;import&nbsp;.&nbsp;&#34;x`</span><span class="op" id="7356361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356365">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356382">}</span><span class="op" id="7356383">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356390">`package&nbsp;p;&nbsp;import&nbsp;(`</span><span class="op" id="7356411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356415">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356432">}</span><span class="op" id="7356433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356436">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356440">`package&nbsp;p;&nbsp;import&nbsp;(&#34;`</span><span class="op" id="7356462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356466">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356483">}</span><span class="op" id="7356484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356491">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x`</span><span class="op" id="7356514">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356518">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356535">}</span><span class="op" id="7356536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356543">`package&nbsp;p;&nbsp;import&nbsp;(&#34;x&#34;`</span><span class="op" id="7356567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7356571">&#34;syntax&nbsp;error&#34;</span><span class="op" id="7356585">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7356588">}</span><span class="op" id="7356589">,</span><br>
<span class="lineno"></span><span class="op" id="7356591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356594">func</span>&nbsp;<span class="ident" id="7356599">TestReadFailures</span><span class="op" id="7356615">(</span><span class="ident" id="7356616">t</span>&nbsp;<span class="op" id="7356618">*</span><span class="ident" id="7356619">testing</span><span class="op" id="7356626">.</span><span class="ident" id="7356627">T</span><span class="op" id="7356628">)</span>&nbsp;<span class="op" id="7356630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7356633">//&nbsp;Errors&nbsp;should&nbsp;be&nbsp;reported&nbsp;(true&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7356690">testRead</span><span class="op" id="7356698">(</span><span class="ident" id="7356699">t</span><span class="op" id="7356700">,</span>&nbsp;<span class="ident" id="7356702">readFailuresTests</span><span class="op" id="7356719">,</span>&nbsp;<span class="keyword" id="7356721">func</span><span class="op" id="7356725">(</span><span class="ident" id="7356726">r</span>&nbsp;<span class="ident" id="7356728">io</span><span class="op" id="7356730">.</span><span class="ident" id="7356731">Reader</span><span class="op" id="7356737">)</span>&nbsp;<span class="op" id="7356739">(</span><span class="op" id="7356740">[</span><span class="op" id="7356741">]</span><span class="builtintype" id="7356742">byte</span><span class="op" id="7356746">,</span>&nbsp;<span class="builtintype" id="7356748">error</span><span class="op" id="7356753">)</span>&nbsp;<span class="op" id="7356755">{</span>&nbsp;<span class="keyword" id="7356757">return</span>&nbsp;<span class="ident" id="7356764">readImports</span><span class="op" id="7356775">(</span><span class="ident" id="7356776">r</span><span class="op" id="7356777">,</span>&nbsp;<span class="builtintype" id="7356779">true</span><span class="op" id="7356783">)</span>&nbsp;<span class="op" id="7356785">}</span><span class="op" id="7356786">)</span><br>
<span class="lineno"></span><span class="op" id="7356788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356791">func</span>&nbsp;<span class="ident" id="7356796">TestReadFailuresIgnored</span><span class="op" id="7356819">(</span><span class="ident" id="7356820">t</span>&nbsp;<span class="op" id="7356822">*</span><span class="ident" id="7356823">testing</span><span class="op" id="7356830">.</span><span class="ident" id="7356831">T</span><span class="op" id="7356832">)</span>&nbsp;<span class="op" id="7356834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7356837">//&nbsp;Syntax&nbsp;errors&nbsp;should&nbsp;not&nbsp;be&nbsp;reported&nbsp;(false&nbsp;arg&nbsp;to&nbsp;readImports).</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7356906">//&nbsp;Instead,&nbsp;entire&nbsp;file&nbsp;should&nbsp;be&nbsp;the&nbsp;output&nbsp;and&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7356966">//&nbsp;Convert&nbsp;tests&nbsp;not&nbsp;to&nbsp;return&nbsp;syntax&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357013">tests</span>&nbsp;<span class="op" id="7357019">:=</span>&nbsp;<span class="builtinfunc" id="7357022">make</span><span class="op" id="7357026">(</span><span class="op" id="7357027">[</span><span class="op" id="7357028">]</span><span class="ident" id="7357029">readTest</span><span class="op" id="7357037">,</span>&nbsp;<span class="builtinfunc" id="7357039">len</span><span class="op" id="7357042">(</span><span class="ident" id="7357043">readFailuresTests</span><span class="op" id="7357060">)</span><span class="op" id="7357061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7357064">copy</span><span class="op" id="7357068">(</span><span class="ident" id="7357069">tests</span><span class="op" id="7357074">,</span>&nbsp;<span class="ident" id="7357076">readFailuresTests</span><span class="op" id="7357093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357096">for</span>&nbsp;<span class="ident" id="7357100">i</span>&nbsp;<span class="op" id="7357102">:=</span>&nbsp;<span class="keyword" id="7357105">range</span>&nbsp;<span class="ident" id="7357111">tests</span>&nbsp;<span class="op" id="7357117">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357121">tt</span>&nbsp;<span class="op" id="7357124">:=</span>&nbsp;<span class="op" id="7357127">&amp;</span><span class="ident" id="7357128">tests</span><span class="op" id="7357133">[</span><span class="ident" id="7357134">i</span><span class="op" id="7357135">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357139">if</span>&nbsp;<span class="op" id="7357142">!</span><span class="ident" id="7357143">strings</span><span class="op" id="7357150">.</span><span class="ident" id="7357151">Contains</span><span class="op" id="7357159">(</span><span class="ident" id="7357160">tt</span><span class="op" id="7357162">.</span><span class="ident" id="7357163">err</span><span class="op" id="7357166">,</span>&nbsp;<span class="string" id="7357168">&#34;NUL&#34;</span><span class="op" id="7357173">)</span>&nbsp;<span class="op" id="7357175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357180">tt</span><span class="op" id="7357182">.</span><span class="ident" id="7357183">err</span>&nbsp;<span class="op" id="7357187">=</span>&nbsp;<span class="string" id="7357189">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357197">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357200">testRead</span><span class="op" id="7357208">(</span><span class="ident" id="7357209">t</span><span class="op" id="7357210">,</span>&nbsp;<span class="ident" id="7357212">tests</span><span class="op" id="7357217">,</span>&nbsp;<span class="keyword" id="7357219">func</span><span class="op" id="7357223">(</span><span class="ident" id="7357224">r</span>&nbsp;<span class="ident" id="7357226">io</span><span class="op" id="7357228">.</span><span class="ident" id="7357229">Reader</span><span class="op" id="7357235">)</span>&nbsp;<span class="op" id="7357237">(</span><span class="op" id="7357238">[</span><span class="op" id="7357239">]</span><span class="builtintype" id="7357240">byte</span><span class="op" id="7357244">,</span>&nbsp;<span class="builtintype" id="7357246">error</span><span class="op" id="7357251">)</span>&nbsp;<span class="op" id="7357253">{</span>&nbsp;<span class="keyword" id="7357255">return</span>&nbsp;<span class="ident" id="7357262">readImports</span><span class="op" id="7357273">(</span><span class="ident" id="7357274">r</span><span class="op" id="7357275">,</span>&nbsp;<span class="builtintype" id="7357277">false</span><span class="op" id="7357282">)</span>&nbsp;<span class="op" id="7357284">}</span><span class="op" id="7357285">)</span><br>
<span class="lineno"></span><span class="op" id="7357287">}</span>
</div>
</body>
</html>
