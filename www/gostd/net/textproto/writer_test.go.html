<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8601187">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8601243">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8601297">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8601348">package</span>&nbsp;<span class="ident" id="8601356">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8601367">import</span>&nbsp;<span class="op" id="8601374">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8601377">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8601386">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8601395">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8601405">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8601408">func</span>&nbsp;<span class="ident" id="8601413">TestPrintfLine</span><span class="op" id="8601427">(</span><span class="ident" id="8601428">t</span>&nbsp;<span class="op" id="8601430">*</span><span class="ident" id="8601431">testing</span><span class="op" id="8601438">.</span><span class="ident" id="8601439">T</span><span class="op" id="8601440">)</span>&nbsp;<span class="op" id="8601442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8601445">var</span>&nbsp;<span class="ident" id="8601449">buf</span>&nbsp;<span class="ident" id="8601453">bytes</span><span class="op" id="8601458">.</span><span class="ident" id="8601459">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601467">w</span>&nbsp;<span class="op" id="8601469">:=</span>&nbsp;<span class="ident" id="8601472">NewWriter</span><span class="op" id="8601481">(</span><span class="ident" id="8601482">bufio</span><span class="op" id="8601487">.</span><span class="ident" id="8601488">NewWriter</span><span class="op" id="8601497">(</span><span class="op" id="8601498">&amp;</span><span class="ident" id="8601499">buf</span><span class="op" id="8601502">)</span><span class="op" id="8601503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601506">err</span>&nbsp;<span class="op" id="8601510">:=</span>&nbsp;<span class="ident" id="8601513">w</span><span class="op" id="8601514">.</span><span class="ident" id="8601515">PrintfLine</span><span class="op" id="8601525">(</span><span class="string" id="8601526">&#34;foo&nbsp;%d&#34;</span><span class="op" id="8601534">,</span>&nbsp;<span class="num" id="8601536">123</span><span class="op" id="8601539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8601542">if</span>&nbsp;<span class="ident" id="8601545">s</span>&nbsp;<span class="op" id="8601547">:=</span>&nbsp;<span class="ident" id="8601550">buf</span><span class="op" id="8601553">.</span><span class="ident" id="8601554">String</span><span class="op" id="8601560">(</span><span class="op" id="8601561">)</span><span class="op" id="8601562">;</span>&nbsp;<span class="ident" id="8601564">s</span>&nbsp;<span class="op" id="8601566">!=</span>&nbsp;<span class="string" id="8601569">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="8601583">||</span>&nbsp;<span class="ident" id="8601586">err</span>&nbsp;<span class="op" id="8601590">!=</span>&nbsp;<span class="ident" id="8601593">nil</span>&nbsp;<span class="op" id="8601597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601601">t</span><span class="op" id="8601602">.</span><span class="ident" id="8601603">Fatalf</span><span class="op" id="8601609">(</span><span class="string" id="8601610">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="8601624">,</span>&nbsp;<span class="ident" id="8601626">s</span><span class="op" id="8601627">,</span>&nbsp;<span class="ident" id="8601629">err</span><span class="op" id="8601632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8601635">}</span><br>
<span class="lineno">20</span><span class="op" id="8601637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8601640">func</span>&nbsp;<span class="ident" id="8601645">TestDotWriter</span><span class="op" id="8601658">(</span><span class="ident" id="8601659">t</span>&nbsp;<span class="op" id="8601661">*</span><span class="ident" id="8601662">testing</span><span class="op" id="8601669">.</span><span class="ident" id="8601670">T</span><span class="op" id="8601671">)</span>&nbsp;<span class="op" id="8601673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8601676">var</span>&nbsp;<span class="ident" id="8601680">buf</span>&nbsp;<span class="ident" id="8601684">bytes</span><span class="op" id="8601689">.</span><span class="ident" id="8601690">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601698">w</span>&nbsp;<span class="op" id="8601700">:=</span>&nbsp;<span class="ident" id="8601703">NewWriter</span><span class="op" id="8601712">(</span><span class="ident" id="8601713">bufio</span><span class="op" id="8601718">.</span><span class="ident" id="8601719">NewWriter</span><span class="op" id="8601728">(</span><span class="op" id="8601729">&amp;</span><span class="ident" id="8601730">buf</span><span class="op" id="8601733">)</span><span class="op" id="8601734">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601737">d</span>&nbsp;<span class="op" id="8601739">:=</span>&nbsp;<span class="ident" id="8601742">w</span><span class="op" id="8601743">.</span><span class="ident" id="8601744">DotWriter</span><span class="op" id="8601753">(</span><span class="op" id="8601754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601757">n</span><span class="op" id="8601758">,</span>&nbsp;<span class="ident" id="8601760">err</span>&nbsp;<span class="op" id="8601764">:=</span>&nbsp;<span class="ident" id="8601767">d</span><span class="op" id="8601768">.</span><span class="ident" id="8601769">Write</span><span class="op" id="8601774">(</span><span class="op" id="8601775">[</span><span class="op" id="8601776">]</span><span class="builtintype" id="8601777">byte</span><span class="op" id="8601781">(</span><span class="string" id="8601782">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="8601809">)</span><span class="op" id="8601810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8601813">if</span>&nbsp;<span class="ident" id="8601816">n</span>&nbsp;<span class="op" id="8601818">!=</span>&nbsp;<span class="num" id="8601821">21</span>&nbsp;<span class="op" id="8601824">||</span>&nbsp;<span class="ident" id="8601827">err</span>&nbsp;<span class="op" id="8601831">!=</span>&nbsp;<span class="ident" id="8601834">nil</span>&nbsp;<span class="op" id="8601838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601842">t</span><span class="op" id="8601843">.</span><span class="ident" id="8601844">Fatalf</span><span class="op" id="8601850">(</span><span class="string" id="8601851">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="8601866">,</span>&nbsp;<span class="ident" id="8601868">n</span><span class="op" id="8601869">,</span>&nbsp;<span class="ident" id="8601871">err</span><span class="op" id="8601874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8601877">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601880">d</span><span class="op" id="8601881">.</span><span class="ident" id="8601882">Close</span><span class="op" id="8601887">(</span><span class="op" id="8601888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601891">want</span>&nbsp;<span class="op" id="8601896">:=</span>&nbsp;<span class="string" id="8601899">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8601949">if</span>&nbsp;<span class="ident" id="8601952">s</span>&nbsp;<span class="op" id="8601954">:=</span>&nbsp;<span class="ident" id="8601957">buf</span><span class="op" id="8601960">.</span><span class="ident" id="8601961">String</span><span class="op" id="8601967">(</span><span class="op" id="8601968">)</span><span class="op" id="8601969">;</span>&nbsp;<span class="ident" id="8601971">s</span>&nbsp;<span class="op" id="8601973">!=</span>&nbsp;<span class="ident" id="8601976">want</span>&nbsp;<span class="op" id="8601981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8601985">t</span><span class="op" id="8601986">.</span><span class="ident" id="8601987">Fatalf</span><span class="op" id="8601993">(</span><span class="string" id="8601994">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="8602004">,</span>&nbsp;<span class="ident" id="8602006">s</span><span class="op" id="8602007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8602010">}</span><br>
<span class="lineno">35</span><span class="op" id="8602012">}</span>
</div>
</body>
</html>
