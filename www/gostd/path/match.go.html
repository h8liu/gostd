<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3703126">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3703181">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3703235">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3703286">package</span>&nbsp;<span class="ident" id="3703294">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3703300">import</span>&nbsp;<span class="op" id="3703307">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3703310">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3703320">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3703331">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3703346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3703349">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3703410">var</span>&nbsp;<span class="ident" id="3703414">ErrBadPattern</span>&nbsp;<span class="op" id="3703428">=</span>&nbsp;<span class="ident" id="3703430">errors</span><span class="op" id="3703436">.</span><span class="ident" id="3703437">New</span><span class="op" id="3703440">(</span><span class="string" id="3703441">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3703466">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3703469">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3703536">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3703562">//</span><br>
<span class="lineno"></span><span class="comment" id="3703565">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3703577">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3703590">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno"></span><span class="comment" id="3703599">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3703656">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3703707">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3703747">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3703799">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3703862">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3703898">//</span><br>
<span class="lineno"></span><span class="comment" id="3703901">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3703921">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3703979">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3704015">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3704069">//</span><br>
<span class="lineno"></span><span class="comment" id="3704072">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3704142">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3704209">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3704226">//</span><br>
<span class="lineno"></span><span class="keyword" id="3704229">func</span>&nbsp;<span class="ident" id="3704234">Match</span><span class="op" id="3704239">(</span><span class="ident" id="3704240">pattern</span><span class="op" id="3704247">,</span>&nbsp;<span class="ident" id="3704249">name</span>&nbsp;<span class="builtintype" id="3704254">string</span><span class="op" id="3704260">)</span>&nbsp;<span class="op" id="3704262">(</span><span class="ident" id="3704263">matched</span>&nbsp;<span class="builtintype" id="3704271">bool</span><span class="op" id="3704275">,</span>&nbsp;<span class="ident" id="3704277">err</span>&nbsp;<span class="builtintype" id="3704281">error</span><span class="op" id="3704286">)</span>&nbsp;<span class="op" id="3704288">{</span><br>
<span class="lineno"></span><span class="ident" id="3704290">Pattern</span><span class="op" id="3704297">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704300">for</span>&nbsp;<span class="builtinfunc" id="3704304">len</span><span class="op" id="3704307">(</span><span class="ident" id="3704308">pattern</span><span class="op" id="3704315">)</span>&nbsp;<span class="op" id="3704317">&gt;</span>&nbsp;<span class="num" id="3704319">0</span>&nbsp;<span class="op" id="3704321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704325">var</span>&nbsp;<span class="ident" id="3704329">star</span>&nbsp;<span class="builtintype" id="3704334">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704341">var</span>&nbsp;<span class="ident" id="3704345">chunk</span>&nbsp;<span class="builtintype" id="3704351">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3704360">star</span><span class="op" id="3704364">,</span>&nbsp;<span class="ident" id="3704366">chunk</span><span class="op" id="3704371">,</span>&nbsp;<span class="ident" id="3704373">pattern</span>&nbsp;<span class="op" id="3704381">=</span>&nbsp;<span class="ident" id="3704383">scanChunk</span><span class="op" id="3704392">(</span><span class="ident" id="3704393">pattern</span><span class="op" id="3704400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704404">if</span>&nbsp;<span class="ident" id="3704407">star</span>&nbsp;<span class="op" id="3704412">&amp;&amp;</span>&nbsp;<span class="ident" id="3704415">chunk</span>&nbsp;<span class="op" id="3704421">==</span>&nbsp;<span class="string" id="3704424">&#34;&#34;</span>&nbsp;<span class="op" id="3704427">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704432">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704491">return</span>&nbsp;<span class="ident" id="3704498">strings</span><span class="op" id="3704505">.</span><span class="ident" id="3704506">Index</span><span class="op" id="3704511">(</span><span class="ident" id="3704512">name</span><span class="op" id="3704516">,</span>&nbsp;<span class="string" id="3704518">&#34;/&#34;</span><span class="op" id="3704521">)</span>&nbsp;<span class="op" id="3704523">&lt;</span>&nbsp;<span class="num" id="3704525">0</span><span class="op" id="3704526">,</span>&nbsp;<span class="builtintype" id="3704528">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3704534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704538">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3704579">t</span><span class="op" id="3704580">,</span>&nbsp;<span class="ident" id="3704582">ok</span><span class="op" id="3704584">,</span>&nbsp;<span class="ident" id="3704586">err</span>&nbsp;<span class="op" id="3704590">:=</span>&nbsp;<span class="ident" id="3704593">matchChunk</span><span class="op" id="3704603">(</span><span class="ident" id="3704604">chunk</span><span class="op" id="3704609">,</span>&nbsp;<span class="ident" id="3704611">name</span><span class="op" id="3704615">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704619">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704684">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704754">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704774">if</span>&nbsp;<span class="ident" id="3704777">ok</span>&nbsp;<span class="op" id="3704780">&amp;&amp;</span>&nbsp;<span class="op" id="3704783">(</span><span class="builtinfunc" id="3704784">len</span><span class="op" id="3704787">(</span><span class="ident" id="3704788">t</span><span class="op" id="3704789">)</span>&nbsp;<span class="op" id="3704791">==</span>&nbsp;<span class="num" id="3704794">0</span>&nbsp;<span class="op" id="3704796">||</span>&nbsp;<span class="builtinfunc" id="3704799">len</span><span class="op" id="3704802">(</span><span class="ident" id="3704803">pattern</span><span class="op" id="3704810">)</span>&nbsp;<span class="op" id="3704812">&gt;</span>&nbsp;<span class="num" id="3704814">0</span><span class="op" id="3704815">)</span>&nbsp;<span class="op" id="3704817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3704822">name</span>&nbsp;<span class="op" id="3704827">=</span>&nbsp;<span class="ident" id="3704829">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704834">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3704845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704849">if</span>&nbsp;<span class="ident" id="3704852">err</span>&nbsp;<span class="op" id="3704856">!=</span>&nbsp;<span class="builtintype" id="3704859">nil</span>&nbsp;<span class="op" id="3704863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704868">return</span>&nbsp;<span class="builtintype" id="3704875">false</span><span class="op" id="3704880">,</span>&nbsp;<span class="ident" id="3704882">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3704888">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704892">if</span>&nbsp;<span class="ident" id="3704895">star</span>&nbsp;<span class="op" id="3704900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704905">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3704946">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3704967">for</span>&nbsp;<span class="ident" id="3704971">i</span>&nbsp;<span class="op" id="3704973">:=</span>&nbsp;<span class="num" id="3704976">0</span><span class="op" id="3704977">;</span>&nbsp;<span class="ident" id="3704979">i</span>&nbsp;<span class="op" id="3704981">&lt;</span>&nbsp;<span class="builtinfunc" id="3704983">len</span><span class="op" id="3704986">(</span><span class="ident" id="3704987">name</span><span class="op" id="3704991">)</span>&nbsp;<span class="op" id="3704993">&amp;&amp;</span>&nbsp;<span class="ident" id="3704996">name</span><span class="op" id="3705000">[</span><span class="ident" id="3705001">i</span><span class="op" id="3705002">]</span>&nbsp;<span class="op" id="3705004">!=</span>&nbsp;<span class="string" id="3705007">&#39;/&#39;</span><span class="op" id="3705010">;</span>&nbsp;<span class="ident" id="3705012">i</span><span class="op" id="3705013">++</span>&nbsp;<span class="op" id="3705016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705022">t</span><span class="op" id="3705023">,</span>&nbsp;<span class="ident" id="3705025">ok</span><span class="op" id="3705027">,</span>&nbsp;<span class="ident" id="3705029">err</span>&nbsp;<span class="op" id="3705033">:=</span>&nbsp;<span class="ident" id="3705036">matchChunk</span><span class="op" id="3705046">(</span><span class="ident" id="3705047">chunk</span><span class="op" id="3705052">,</span>&nbsp;<span class="ident" id="3705054">name</span><span class="op" id="3705058">[</span><span class="ident" id="3705059">i</span><span class="op" id="3705060">+</span><span class="num" id="3705061">1</span><span class="op" id="3705062">:</span><span class="op" id="3705063">]</span><span class="op" id="3705064">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705070">if</span>&nbsp;<span class="ident" id="3705073">ok</span>&nbsp;<span class="op" id="3705076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3705083">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705148">if</span>&nbsp;<span class="builtinfunc" id="3705151">len</span><span class="op" id="3705154">(</span><span class="ident" id="3705155">pattern</span><span class="op" id="3705162">)</span>&nbsp;<span class="op" id="3705164">==</span>&nbsp;<span class="num" id="3705167">0</span>&nbsp;<span class="op" id="3705169">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3705172">len</span><span class="op" id="3705175">(</span><span class="ident" id="3705176">t</span><span class="op" id="3705177">)</span>&nbsp;<span class="op" id="3705179">&gt;</span>&nbsp;<span class="num" id="3705181">0</span>&nbsp;<span class="op" id="3705183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705191">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705205">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705212">name</span>&nbsp;<span class="op" id="3705217">=</span>&nbsp;<span class="ident" id="3705219">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705226">continue</span>&nbsp;<span class="ident" id="3705235">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705253">if</span>&nbsp;<span class="ident" id="3705256">err</span>&nbsp;<span class="op" id="3705260">!=</span>&nbsp;<span class="builtintype" id="3705263">nil</span>&nbsp;<span class="op" id="3705267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705274">return</span>&nbsp;<span class="builtintype" id="3705281">false</span><span class="op" id="3705286">,</span>&nbsp;<span class="ident" id="3705288">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705309">return</span>&nbsp;<span class="builtintype" id="3705316">false</span><span class="op" id="3705321">,</span>&nbsp;<span class="builtintype" id="3705323">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705328">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705331">return</span>&nbsp;<span class="builtinfunc" id="3705338">len</span><span class="op" id="3705341">(</span><span class="ident" id="3705342">name</span><span class="op" id="3705346">)</span>&nbsp;<span class="op" id="3705348">==</span>&nbsp;<span class="num" id="3705351">0</span><span class="op" id="3705352">,</span>&nbsp;<span class="builtintype" id="3705354">nil</span><br>
<span class="lineno"></span><span class="op" id="3705358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3705361">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3705435">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3705467">func</span>&nbsp;<span class="ident" id="3705472">scanChunk</span><span class="op" id="3705481">(</span><span class="ident" id="3705482">pattern</span>&nbsp;<span class="builtintype" id="3705490">string</span><span class="op" id="3705496">)</span>&nbsp;<span class="op" id="3705498">(</span><span class="ident" id="3705499">star</span>&nbsp;<span class="builtintype" id="3705504">bool</span><span class="op" id="3705508">,</span>&nbsp;<span class="ident" id="3705510">chunk</span><span class="op" id="3705515">,</span>&nbsp;<span class="ident" id="3705517">rest</span>&nbsp;<span class="builtintype" id="3705522">string</span><span class="op" id="3705528">)</span>&nbsp;<span class="op" id="3705530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705533">for</span>&nbsp;<span class="builtinfunc" id="3705537">len</span><span class="op" id="3705540">(</span><span class="ident" id="3705541">pattern</span><span class="op" id="3705548">)</span>&nbsp;<span class="op" id="3705550">&gt;</span>&nbsp;<span class="num" id="3705552">0</span>&nbsp;<span class="op" id="3705554">&amp;&amp;</span>&nbsp;<span class="ident" id="3705557">pattern</span><span class="op" id="3705564">[</span><span class="num" id="3705565">0</span><span class="op" id="3705566">]</span>&nbsp;<span class="op" id="3705568">==</span>&nbsp;<span class="string" id="3705571">&#39;*&#39;</span>&nbsp;<span class="op" id="3705575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705579">pattern</span>&nbsp;<span class="op" id="3705587">=</span>&nbsp;<span class="ident" id="3705589">pattern</span><span class="op" id="3705596">[</span><span class="num" id="3705597">1</span><span class="op" id="3705598">:</span><span class="op" id="3705599">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705603">star</span>&nbsp;<span class="op" id="3705608">=</span>&nbsp;<span class="builtintype" id="3705610">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705616">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705619">inrange</span>&nbsp;<span class="op" id="3705627">:=</span>&nbsp;<span class="builtintype" id="3705630">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705637">var</span>&nbsp;<span class="ident" id="3705641">i</span>&nbsp;<span class="builtintype" id="3705643">int</span><br>
<span class="lineno"></span><span class="ident" id="3705647">Scan</span><span class="op" id="3705651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705654">for</span>&nbsp;<span class="ident" id="3705658">i</span>&nbsp;<span class="op" id="3705660">=</span>&nbsp;<span class="num" id="3705662">0</span><span class="op" id="3705663">;</span>&nbsp;<span class="ident" id="3705665">i</span>&nbsp;<span class="op" id="3705667">&lt;</span>&nbsp;<span class="builtinfunc" id="3705669">len</span><span class="op" id="3705672">(</span><span class="ident" id="3705673">pattern</span><span class="op" id="3705680">)</span><span class="op" id="3705681">;</span>&nbsp;<span class="ident" id="3705683">i</span><span class="op" id="3705684">++</span>&nbsp;<span class="op" id="3705687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705691">switch</span>&nbsp;<span class="ident" id="3705698">pattern</span><span class="op" id="3705705">[</span><span class="ident" id="3705706">i</span><span class="op" id="3705707">]</span>&nbsp;<span class="op" id="3705709">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705713">case</span>&nbsp;<span class="string" id="3705718">&#39;\\&#39;</span><span class="op" id="3705722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3705727">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705781">if</span>&nbsp;<span class="ident" id="3705784">i</span><span class="op" id="3705785">+</span><span class="num" id="3705786">1</span>&nbsp;<span class="op" id="3705788">&lt;</span>&nbsp;<span class="builtinfunc" id="3705790">len</span><span class="op" id="3705793">(</span><span class="ident" id="3705794">pattern</span><span class="op" id="3705801">)</span>&nbsp;<span class="op" id="3705803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705809">i</span><span class="op" id="3705810">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705816">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705820">case</span>&nbsp;<span class="string" id="3705825">&#39;[&#39;</span><span class="op" id="3705828">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705833">inrange</span>&nbsp;<span class="op" id="3705841">=</span>&nbsp;<span class="builtintype" id="3705843">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705850">case</span>&nbsp;<span class="string" id="3705855">&#39;]&#39;</span><span class="op" id="3705858">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3705863">inrange</span>&nbsp;<span class="op" id="3705871">=</span>&nbsp;<span class="builtintype" id="3705873">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705881">case</span>&nbsp;<span class="string" id="3705886">&#39;*&#39;</span><span class="op" id="3705889">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705894">if</span>&nbsp;<span class="op" id="3705897">!</span><span class="ident" id="3705898">inrange</span>&nbsp;<span class="op" id="3705906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705912">break</span>&nbsp;<span class="ident" id="3705918">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3705933">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3705936">return</span>&nbsp;<span class="ident" id="3705943">star</span><span class="op" id="3705947">,</span>&nbsp;<span class="ident" id="3705949">pattern</span><span class="op" id="3705956">[</span><span class="num" id="3705957">0</span><span class="op" id="3705958">:</span><span class="ident" id="3705959">i</span><span class="op" id="3705960">]</span><span class="op" id="3705961">,</span>&nbsp;<span class="ident" id="3705963">pattern</span><span class="op" id="3705970">[</span><span class="ident" id="3705971">i</span><span class="op" id="3705972">:</span><span class="op" id="3705973">]</span><br>
<span class="lineno"></span><span class="op" id="3705975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3705978">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3706041">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3706100">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3706175">func</span>&nbsp;<span class="ident" id="3706180">matchChunk</span><span class="op" id="3706190">(</span><span class="ident" id="3706191">chunk</span><span class="op" id="3706196">,</span>&nbsp;<span class="ident" id="3706198">s</span>&nbsp;<span class="builtintype" id="3706200">string</span><span class="op" id="3706206">)</span>&nbsp;<span class="op" id="3706208">(</span><span class="ident" id="3706209">rest</span>&nbsp;<span class="builtintype" id="3706214">string</span><span class="op" id="3706220">,</span>&nbsp;<span class="ident" id="3706222">ok</span>&nbsp;<span class="builtintype" id="3706225">bool</span><span class="op" id="3706229">,</span>&nbsp;<span class="ident" id="3706231">err</span>&nbsp;<span class="builtintype" id="3706235">error</span><span class="op" id="3706240">)</span>&nbsp;<span class="op" id="3706242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706245">for</span>&nbsp;<span class="builtinfunc" id="3706249">len</span><span class="op" id="3706252">(</span><span class="ident" id="3706253">chunk</span><span class="op" id="3706258">)</span>&nbsp;<span class="op" id="3706260">&gt;</span>&nbsp;<span class="num" id="3706262">0</span>&nbsp;<span class="op" id="3706264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706268">if</span>&nbsp;<span class="builtinfunc" id="3706271">len</span><span class="op" id="3706274">(</span><span class="ident" id="3706275">s</span><span class="op" id="3706276">)</span>&nbsp;<span class="op" id="3706278">==</span>&nbsp;<span class="num" id="3706281">0</span>&nbsp;<span class="op" id="3706283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706288">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706301">switch</span>&nbsp;<span class="ident" id="3706308">chunk</span><span class="op" id="3706313">[</span><span class="num" id="3706314">0</span><span class="op" id="3706315">]</span>&nbsp;<span class="op" id="3706317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706321">case</span>&nbsp;<span class="string" id="3706326">&#39;[&#39;</span><span class="op" id="3706329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3706334">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706356">r</span><span class="op" id="3706357">,</span>&nbsp;<span class="ident" id="3706359">n</span>&nbsp;<span class="op" id="3706361">:=</span>&nbsp;<span class="ident" id="3706364">utf8</span><span class="op" id="3706368">.</span><span class="ident" id="3706369">DecodeRuneInString</span><span class="op" id="3706387">(</span><span class="ident" id="3706388">s</span><span class="op" id="3706389">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706394">s</span>&nbsp;<span class="op" id="3706396">=</span>&nbsp;<span class="ident" id="3706398">s</span><span class="op" id="3706399">[</span><span class="ident" id="3706400">n</span><span class="op" id="3706401">:</span><span class="op" id="3706402">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706407">chunk</span>&nbsp;<span class="op" id="3706413">=</span>&nbsp;<span class="ident" id="3706415">chunk</span><span class="op" id="3706420">[</span><span class="num" id="3706421">1</span><span class="op" id="3706422">:</span><span class="op" id="3706423">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3706428">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706451">notNegated</span>&nbsp;<span class="op" id="3706462">:=</span>&nbsp;<span class="builtintype" id="3706465">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706473">if</span>&nbsp;<span class="builtinfunc" id="3706476">len</span><span class="op" id="3706479">(</span><span class="ident" id="3706480">chunk</span><span class="op" id="3706485">)</span>&nbsp;<span class="op" id="3706487">&gt;</span>&nbsp;<span class="num" id="3706489">0</span>&nbsp;<span class="op" id="3706491">&amp;&amp;</span>&nbsp;<span class="ident" id="3706494">chunk</span><span class="op" id="3706499">[</span><span class="num" id="3706500">0</span><span class="op" id="3706501">]</span>&nbsp;<span class="op" id="3706503">==</span>&nbsp;<span class="string" id="3706506">&#39;^&#39;</span>&nbsp;<span class="op" id="3706510">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706516">notNegated</span>&nbsp;<span class="op" id="3706527">=</span>&nbsp;<span class="builtintype" id="3706529">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706539">chunk</span>&nbsp;<span class="op" id="3706545">=</span>&nbsp;<span class="ident" id="3706547">chunk</span><span class="op" id="3706552">[</span><span class="num" id="3706553">1</span><span class="op" id="3706554">:</span><span class="op" id="3706555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3706565">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706588">match</span>&nbsp;<span class="op" id="3706594">:=</span>&nbsp;<span class="builtintype" id="3706597">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706606">nrange</span>&nbsp;<span class="op" id="3706613">:=</span>&nbsp;<span class="num" id="3706616">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706621">for</span>&nbsp;<span class="op" id="3706625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706631">if</span>&nbsp;<span class="builtinfunc" id="3706634">len</span><span class="op" id="3706637">(</span><span class="ident" id="3706638">chunk</span><span class="op" id="3706643">)</span>&nbsp;<span class="op" id="3706645">&gt;</span>&nbsp;<span class="num" id="3706647">0</span>&nbsp;<span class="op" id="3706649">&amp;&amp;</span>&nbsp;<span class="ident" id="3706652">chunk</span><span class="op" id="3706657">[</span><span class="num" id="3706658">0</span><span class="op" id="3706659">]</span>&nbsp;<span class="op" id="3706661">==</span>&nbsp;<span class="string" id="3706664">&#39;]&#39;</span>&nbsp;<span class="op" id="3706668">&amp;&amp;</span>&nbsp;<span class="ident" id="3706671">nrange</span>&nbsp;<span class="op" id="3706678">&gt;</span>&nbsp;<span class="num" id="3706680">0</span>&nbsp;<span class="op" id="3706682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706689">chunk</span>&nbsp;<span class="op" id="3706695">=</span>&nbsp;<span class="ident" id="3706697">chunk</span><span class="op" id="3706702">[</span><span class="num" id="3706703">1</span><span class="op" id="3706704">:</span><span class="op" id="3706705">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706712">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706728">var</span>&nbsp;<span class="ident" id="3706732">lo</span><span class="op" id="3706734">,</span>&nbsp;<span class="ident" id="3706736">hi</span>&nbsp;<span class="builtintype" id="3706739">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706748">if</span>&nbsp;<span class="ident" id="3706751">lo</span><span class="op" id="3706753">,</span>&nbsp;<span class="ident" id="3706755">chunk</span><span class="op" id="3706760">,</span>&nbsp;<span class="ident" id="3706762">err</span>&nbsp;<span class="op" id="3706766">=</span>&nbsp;<span class="ident" id="3706768">getEsc</span><span class="op" id="3706774">(</span><span class="ident" id="3706775">chunk</span><span class="op" id="3706780">)</span><span class="op" id="3706781">;</span>&nbsp;<span class="ident" id="3706783">err</span>&nbsp;<span class="op" id="3706787">!=</span>&nbsp;<span class="builtintype" id="3706790">nil</span>&nbsp;<span class="op" id="3706794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706801">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706812">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706818">hi</span>&nbsp;<span class="op" id="3706821">=</span>&nbsp;<span class="ident" id="3706823">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706830">if</span>&nbsp;<span class="ident" id="3706833">chunk</span><span class="op" id="3706838">[</span><span class="num" id="3706839">0</span><span class="op" id="3706840">]</span>&nbsp;<span class="op" id="3706842">==</span>&nbsp;<span class="string" id="3706845">&#39;-&#39;</span>&nbsp;<span class="op" id="3706849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706856">if</span>&nbsp;<span class="ident" id="3706859">hi</span><span class="op" id="3706861">,</span>&nbsp;<span class="ident" id="3706863">chunk</span><span class="op" id="3706868">,</span>&nbsp;<span class="ident" id="3706870">err</span>&nbsp;<span class="op" id="3706874">=</span>&nbsp;<span class="ident" id="3706876">getEsc</span><span class="op" id="3706882">(</span><span class="ident" id="3706883">chunk</span><span class="op" id="3706888">[</span><span class="num" id="3706889">1</span><span class="op" id="3706890">:</span><span class="op" id="3706891">]</span><span class="op" id="3706892">)</span><span class="op" id="3706893">;</span>&nbsp;<span class="ident" id="3706895">err</span>&nbsp;<span class="op" id="3706899">!=</span>&nbsp;<span class="builtintype" id="3706902">nil</span>&nbsp;<span class="op" id="3706906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706914">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706926">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3706938">if</span>&nbsp;<span class="ident" id="3706941">lo</span>&nbsp;<span class="op" id="3706944">&lt;=</span>&nbsp;<span class="ident" id="3706947">r</span>&nbsp;<span class="op" id="3706949">&amp;&amp;</span>&nbsp;<span class="ident" id="3706952">r</span>&nbsp;<span class="op" id="3706954">&lt;=</span>&nbsp;<span class="ident" id="3706957">hi</span>&nbsp;<span class="op" id="3706960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706967">match</span>&nbsp;<span class="op" id="3706973">=</span>&nbsp;<span class="builtintype" id="3706975">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3706984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3706990">nrange</span><span class="op" id="3706996">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707007">if</span>&nbsp;<span class="ident" id="3707010">match</span>&nbsp;<span class="op" id="3707016">!=</span>&nbsp;<span class="ident" id="3707019">notNegated</span>&nbsp;<span class="op" id="3707030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707036">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707051">case</span>&nbsp;<span class="string" id="3707056">&#39;?&#39;</span><span class="op" id="3707059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707064">if</span>&nbsp;<span class="ident" id="3707067">s</span><span class="op" id="3707068">[</span><span class="num" id="3707069">0</span><span class="op" id="3707070">]</span>&nbsp;<span class="op" id="3707072">==</span>&nbsp;<span class="string" id="3707075">&#39;/&#39;</span>&nbsp;<span class="op" id="3707079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707085">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707100">_</span><span class="op" id="3707101">,</span>&nbsp;<span class="ident" id="3707103">n</span>&nbsp;<span class="op" id="3707105">:=</span>&nbsp;<span class="ident" id="3707108">utf8</span><span class="op" id="3707112">.</span><span class="ident" id="3707113">DecodeRuneInString</span><span class="op" id="3707131">(</span><span class="ident" id="3707132">s</span><span class="op" id="3707133">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707138">s</span>&nbsp;<span class="op" id="3707140">=</span>&nbsp;<span class="ident" id="3707142">s</span><span class="op" id="3707143">[</span><span class="ident" id="3707144">n</span><span class="op" id="3707145">:</span><span class="op" id="3707146">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707151">chunk</span>&nbsp;<span class="op" id="3707157">=</span>&nbsp;<span class="ident" id="3707159">chunk</span><span class="op" id="3707164">[</span><span class="num" id="3707165">1</span><span class="op" id="3707166">:</span><span class="op" id="3707167">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707172">case</span>&nbsp;<span class="string" id="3707177">&#39;\\&#39;</span><span class="op" id="3707181">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707186">chunk</span>&nbsp;<span class="op" id="3707192">=</span>&nbsp;<span class="ident" id="3707194">chunk</span><span class="op" id="3707199">[</span><span class="num" id="3707200">1</span><span class="op" id="3707201">:</span><span class="op" id="3707202">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707207">if</span>&nbsp;<span class="builtinfunc" id="3707210">len</span><span class="op" id="3707213">(</span><span class="ident" id="3707214">chunk</span><span class="op" id="3707219">)</span>&nbsp;<span class="op" id="3707221">==</span>&nbsp;<span class="num" id="3707224">0</span>&nbsp;<span class="op" id="3707226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707232">err</span>&nbsp;<span class="op" id="3707236">=</span>&nbsp;<span class="ident" id="3707238">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707256">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707271">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707286">default</span><span class="op" id="3707293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707298">if</span>&nbsp;<span class="ident" id="3707301">chunk</span><span class="op" id="3707306">[</span><span class="num" id="3707307">0</span><span class="op" id="3707308">]</span>&nbsp;<span class="op" id="3707310">!=</span>&nbsp;<span class="ident" id="3707313">s</span><span class="op" id="3707314">[</span><span class="num" id="3707315">0</span><span class="op" id="3707316">]</span>&nbsp;<span class="op" id="3707318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707324">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707334">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707339">s</span>&nbsp;<span class="op" id="3707341">=</span>&nbsp;<span class="ident" id="3707343">s</span><span class="op" id="3707344">[</span><span class="num" id="3707345">1</span><span class="op" id="3707346">:</span><span class="op" id="3707347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707352">chunk</span>&nbsp;<span class="op" id="3707358">=</span>&nbsp;<span class="ident" id="3707360">chunk</span><span class="op" id="3707365">[</span><span class="num" id="3707366">1</span><span class="op" id="3707367">:</span><span class="op" id="3707368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707378">return</span>&nbsp;<span class="ident" id="3707385">s</span><span class="op" id="3707386">,</span>&nbsp;<span class="builtintype" id="3707388">true</span><span class="op" id="3707392">,</span>&nbsp;<span class="builtintype" id="3707394">nil</span><br>
<span class="lineno">185</span><span class="op" id="3707398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3707401">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3707480">func</span>&nbsp;<span class="ident" id="3707485">getEsc</span><span class="op" id="3707491">(</span><span class="ident" id="3707492">chunk</span>&nbsp;<span class="builtintype" id="3707498">string</span><span class="op" id="3707504">)</span>&nbsp;<span class="op" id="3707506">(</span><span class="ident" id="3707507">r</span>&nbsp;<span class="builtintype" id="3707509">rune</span><span class="op" id="3707513">,</span>&nbsp;<span class="ident" id="3707515">nchunk</span>&nbsp;<span class="builtintype" id="3707522">string</span><span class="op" id="3707528">,</span>&nbsp;<span class="ident" id="3707530">err</span>&nbsp;<span class="builtintype" id="3707534">error</span><span class="op" id="3707539">)</span>&nbsp;<span class="op" id="3707541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707544">if</span>&nbsp;<span class="builtinfunc" id="3707547">len</span><span class="op" id="3707550">(</span><span class="ident" id="3707551">chunk</span><span class="op" id="3707556">)</span>&nbsp;<span class="op" id="3707558">==</span>&nbsp;<span class="num" id="3707561">0</span>&nbsp;<span class="op" id="3707563">||</span>&nbsp;<span class="ident" id="3707566">chunk</span><span class="op" id="3707571">[</span><span class="num" id="3707572">0</span><span class="op" id="3707573">]</span>&nbsp;<span class="op" id="3707575">==</span>&nbsp;<span class="string" id="3707578">&#39;-&#39;</span>&nbsp;<span class="op" id="3707582">||</span>&nbsp;<span class="ident" id="3707585">chunk</span><span class="op" id="3707590">[</span><span class="num" id="3707591">0</span><span class="op" id="3707592">]</span>&nbsp;<span class="op" id="3707594">==</span>&nbsp;<span class="string" id="3707597">&#39;]&#39;</span>&nbsp;<span class="op" id="3707601">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707605">err</span>&nbsp;<span class="op" id="3707609">=</span>&nbsp;<span class="ident" id="3707611">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707627">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707638">if</span>&nbsp;<span class="ident" id="3707641">chunk</span><span class="op" id="3707646">[</span><span class="num" id="3707647">0</span><span class="op" id="3707648">]</span>&nbsp;<span class="op" id="3707650">==</span>&nbsp;<span class="string" id="3707653">&#39;\\&#39;</span>&nbsp;<span class="op" id="3707658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707662">chunk</span>&nbsp;<span class="op" id="3707668">=</span>&nbsp;<span class="ident" id="3707670">chunk</span><span class="op" id="3707675">[</span><span class="num" id="3707676">1</span><span class="op" id="3707677">:</span><span class="op" id="3707678">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707682">if</span>&nbsp;<span class="builtinfunc" id="3707685">len</span><span class="op" id="3707688">(</span><span class="ident" id="3707689">chunk</span><span class="op" id="3707694">)</span>&nbsp;<span class="op" id="3707696">==</span>&nbsp;<span class="num" id="3707699">0</span>&nbsp;<span class="op" id="3707701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707706">err</span>&nbsp;<span class="op" id="3707710">=</span>&nbsp;<span class="ident" id="3707712">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707729">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707741">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707744">r</span><span class="op" id="3707745">,</span>&nbsp;<span class="ident" id="3707747">n</span>&nbsp;<span class="op" id="3707749">:=</span>&nbsp;<span class="ident" id="3707752">utf8</span><span class="op" id="3707756">.</span><span class="ident" id="3707757">DecodeRuneInString</span><span class="op" id="3707775">(</span><span class="ident" id="3707776">chunk</span><span class="op" id="3707781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707784">if</span>&nbsp;<span class="ident" id="3707787">r</span>&nbsp;<span class="op" id="3707789">==</span>&nbsp;<span class="ident" id="3707792">utf8</span><span class="op" id="3707796">.</span><span class="ident" id="3707797">RuneError</span>&nbsp;<span class="op" id="3707807">&amp;&amp;</span>&nbsp;<span class="ident" id="3707810">n</span>&nbsp;<span class="op" id="3707812">==</span>&nbsp;<span class="num" id="3707815">1</span>&nbsp;<span class="op" id="3707817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707821">err</span>&nbsp;<span class="op" id="3707825">=</span>&nbsp;<span class="ident" id="3707827">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707845">nchunk</span>&nbsp;<span class="op" id="3707852">=</span>&nbsp;<span class="ident" id="3707854">chunk</span><span class="op" id="3707859">[</span><span class="ident" id="3707860">n</span><span class="op" id="3707861">:</span><span class="op" id="3707862">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707865">if</span>&nbsp;<span class="builtinfunc" id="3707868">len</span><span class="op" id="3707871">(</span><span class="ident" id="3707872">nchunk</span><span class="op" id="3707878">)</span>&nbsp;<span class="op" id="3707880">==</span>&nbsp;<span class="num" id="3707883">0</span>&nbsp;<span class="op" id="3707885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3707889">err</span>&nbsp;<span class="op" id="3707893">=</span>&nbsp;<span class="ident" id="3707895">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3707910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3707913">return</span><br>
<span class="lineno"></span><span class="op" id="3707920">}</span>
</div>
</body>
</html>
