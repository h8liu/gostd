<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/mail</h2>
<ul>
<li><a href="/gostd/net/mail/message.go.html">message.go</a></li>
<li><a href="/gostd/net/mail/message_test.go.html" class="current">message_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8404954">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8405009">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8405063">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8405114">package</span>&nbsp;<span class="ident" id="8405122">mail</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8405128">import</span>&nbsp;<span class="op" id="8405135">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405138">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405147">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405160">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405171">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405182">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405193">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8405200">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8405203">var</span>&nbsp;<span class="ident" id="8405207">parseTests</span>&nbsp;<span class="op" id="8405218">=</span>&nbsp;<span class="op" id="8405220">[</span><span class="op" id="8405221">]</span><span class="keyword" id="8405222">struct</span>&nbsp;<span class="op" id="8405229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405232">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405239">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405247">header</span>&nbsp;<span class="ident" id="8405254">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405262">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405269">string</span><br>
<span class="lineno">20</span><span class="op" id="8405276">}</span><span class="op" id="8405277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8405284">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405314">in</span><span class="op" id="8405316">:</span>&nbsp;<span class="string" id="8405318">`From:&nbsp;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;<br>
<span class="lineno"></span>To:&nbsp;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;<br>
<span class="lineno">25</span>Subject:&nbsp;Saying&nbsp;Hello<br>
<span class="lineno"></span>Date:&nbsp;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600<br>
<span class="lineno"></span>Message-ID:&nbsp;&lt;1234@local.machine.example&gt;<br>
<span class="lineno"></span><br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.<br>
<span class="lineno">30</span>So,&nbsp;&#34;Hello&#34;.<br>
<span class="lineno"></span>`</span><span class="op" id="8405544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405548">header</span><span class="op" id="8405554">:</span>&nbsp;<span class="ident" id="8405556">Header</span><span class="op" id="8405562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405567">&#34;From&#34;</span><span class="op" id="8405573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405581">[</span><span class="op" id="8405582">]</span><span class="builtintype" id="8405583">string</span><span class="op" id="8405589">{</span><span class="string" id="8405590">&#34;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;&#34;</span><span class="op" id="8405623">}</span><span class="op" id="8405624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405629">&#34;To&#34;</span><span class="op" id="8405633">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405643">[</span><span class="op" id="8405644">]</span><span class="builtintype" id="8405645">string</span><span class="op" id="8405651">{</span><span class="string" id="8405652">&#34;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;&#34;</span><span class="op" id="8405683">}</span><span class="op" id="8405684">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405689">&#34;Subject&#34;</span><span class="op" id="8405698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405703">[</span><span class="op" id="8405704">]</span><span class="builtintype" id="8405705">string</span><span class="op" id="8405711">{</span><span class="string" id="8405712">&#34;Saying&nbsp;Hello&#34;</span><span class="op" id="8405726">}</span><span class="op" id="8405727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405732">&#34;Date&#34;</span><span class="op" id="8405738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405746">[</span><span class="op" id="8405747">]</span><span class="builtintype" id="8405748">string</span><span class="op" id="8405754">{</span><span class="string" id="8405755">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="8405788">}</span><span class="op" id="8405789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8405794">&#34;Message-Id&#34;</span><span class="op" id="8405806">:</span>&nbsp;<span class="op" id="8405808">[</span><span class="op" id="8405809">]</span><span class="builtintype" id="8405810">string</span><span class="op" id="8405816">{</span><span class="string" id="8405817">&#34;&lt;1234@local.machine.example&gt;&#34;</span><span class="op" id="8405847">}</span><span class="op" id="8405848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405852">}</span><span class="op" id="8405853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405857">body</span><span class="op" id="8405861">:</span>&nbsp;<span class="string" id="8405863">&#34;This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.\nSo,&nbsp;\&#34;Hello\&#34;.\n&#34;</span><span class="op" id="8405919">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8405922">}</span><span class="op" id="8405923">,</span><br>
<span class="lineno"></span><span class="op" id="8405925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8405928">func</span>&nbsp;<span class="ident" id="8405933">TestParsing</span><span class="op" id="8405944">(</span><span class="ident" id="8405945">t</span>&nbsp;<span class="op" id="8405947">*</span><span class="ident" id="8405948">testing</span><span class="op" id="8405955">.</span><span class="ident" id="8405956">T</span><span class="op" id="8405957">)</span>&nbsp;<span class="op" id="8405959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8405962">for</span>&nbsp;<span class="ident" id="8405966">i</span><span class="op" id="8405967">,</span>&nbsp;<span class="ident" id="8405969">test</span>&nbsp;<span class="op" id="8405974">:=</span>&nbsp;<span class="keyword" id="8405977">range</span>&nbsp;<span class="ident" id="8405983">parseTests</span>&nbsp;<span class="op" id="8405994">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8405998">msg</span><span class="op" id="8406001">,</span>&nbsp;<span class="ident" id="8406003">err</span>&nbsp;<span class="op" id="8406007">:=</span>&nbsp;<span class="ident" id="8406010">ReadMessage</span><span class="op" id="8406021">(</span><span class="ident" id="8406022">bytes</span><span class="op" id="8406027">.</span><span class="ident" id="8406028">NewBuffer</span><span class="op" id="8406037">(</span><span class="op" id="8406038">[</span><span class="op" id="8406039">]</span><span class="builtintype" id="8406040">byte</span><span class="op" id="8406044">(</span><span class="ident" id="8406045">test</span><span class="op" id="8406049">.</span><span class="ident" id="8406050">in</span><span class="op" id="8406052">)</span><span class="op" id="8406053">)</span><span class="op" id="8406054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406058">if</span>&nbsp;<span class="ident" id="8406061">err</span>&nbsp;<span class="op" id="8406065">!=</span>&nbsp;<span class="builtintype" id="8406068">nil</span>&nbsp;<span class="op" id="8406072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406077">t</span><span class="op" id="8406078">.</span><span class="ident" id="8406079">Errorf</span><span class="op" id="8406085">(</span><span class="string" id="8406086">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;parsing&nbsp;message:&nbsp;%v&#34;</span><span class="op" id="8406124">,</span>&nbsp;<span class="ident" id="8406126">i</span><span class="op" id="8406127">,</span>&nbsp;<span class="ident" id="8406129">err</span><span class="op" id="8406132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406137">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406148">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406152">if</span>&nbsp;<span class="op" id="8406155">!</span><span class="ident" id="8406156">headerEq</span><span class="op" id="8406164">(</span><span class="ident" id="8406165">msg</span><span class="op" id="8406168">.</span><span class="ident" id="8406169">Header</span><span class="op" id="8406175">,</span>&nbsp;<span class="ident" id="8406177">test</span><span class="op" id="8406181">.</span><span class="ident" id="8406182">header</span><span class="op" id="8406188">)</span>&nbsp;<span class="op" id="8406190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406195">t</span><span class="op" id="8406196">.</span><span class="ident" id="8406197">Errorf</span><span class="op" id="8406203">(</span><span class="string" id="8406204">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;header.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="8406273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406279">i</span><span class="op" id="8406280">,</span>&nbsp;<span class="ident" id="8406282">msg</span><span class="op" id="8406285">.</span><span class="ident" id="8406286">Header</span><span class="op" id="8406292">,</span>&nbsp;<span class="ident" id="8406294">test</span><span class="op" id="8406298">.</span><span class="ident" id="8406299">header</span><span class="op" id="8406305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406313">body</span><span class="op" id="8406317">,</span>&nbsp;<span class="ident" id="8406319">err</span>&nbsp;<span class="op" id="8406323">:=</span>&nbsp;<span class="ident" id="8406326">ioutil</span><span class="op" id="8406332">.</span><span class="ident" id="8406333">ReadAll</span><span class="op" id="8406340">(</span><span class="ident" id="8406341">msg</span><span class="op" id="8406344">.</span><span class="ident" id="8406345">Body</span><span class="op" id="8406349">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406353">if</span>&nbsp;<span class="ident" id="8406356">err</span>&nbsp;<span class="op" id="8406360">!=</span>&nbsp;<span class="builtintype" id="8406363">nil</span>&nbsp;<span class="op" id="8406367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406372">t</span><span class="op" id="8406373">.</span><span class="ident" id="8406374">Errorf</span><span class="op" id="8406380">(</span><span class="string" id="8406381">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;reading&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="8406416">,</span>&nbsp;<span class="ident" id="8406418">i</span><span class="op" id="8406419">,</span>&nbsp;<span class="ident" id="8406421">err</span><span class="op" id="8406424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406429">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406444">bodyStr</span>&nbsp;<span class="op" id="8406452">:=</span>&nbsp;<span class="builtintype" id="8406455">string</span><span class="op" id="8406461">(</span><span class="ident" id="8406462">body</span><span class="op" id="8406466">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406470">if</span>&nbsp;<span class="ident" id="8406473">bodyStr</span>&nbsp;<span class="op" id="8406481">!=</span>&nbsp;<span class="ident" id="8406484">test</span><span class="op" id="8406488">.</span><span class="ident" id="8406489">body</span>&nbsp;<span class="op" id="8406494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406499">t</span><span class="op" id="8406500">.</span><span class="ident" id="8406501">Errorf</span><span class="op" id="8406507">(</span><span class="string" id="8406508">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;body.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="8406575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406581">i</span><span class="op" id="8406582">,</span>&nbsp;<span class="ident" id="8406584">bodyStr</span><span class="op" id="8406591">,</span>&nbsp;<span class="ident" id="8406593">test</span><span class="op" id="8406597">.</span><span class="ident" id="8406598">body</span><span class="op" id="8406602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406609">}</span><br>
<span class="lineno">65</span><span class="op" id="8406611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8406614">func</span>&nbsp;<span class="ident" id="8406619">headerEq</span><span class="op" id="8406627">(</span><span class="ident" id="8406628">a</span><span class="op" id="8406629">,</span>&nbsp;<span class="ident" id="8406631">b</span>&nbsp;<span class="ident" id="8406633">Header</span><span class="op" id="8406639">)</span>&nbsp;<span class="builtintype" id="8406641">bool</span>&nbsp;<span class="op" id="8406646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406649">if</span>&nbsp;<span class="builtinfunc" id="8406652">len</span><span class="op" id="8406655">(</span><span class="ident" id="8406656">a</span><span class="op" id="8406657">)</span>&nbsp;<span class="op" id="8406659">!=</span>&nbsp;<span class="builtinfunc" id="8406662">len</span><span class="op" id="8406665">(</span><span class="ident" id="8406666">b</span><span class="op" id="8406667">)</span>&nbsp;<span class="op" id="8406669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406673">return</span>&nbsp;<span class="builtintype" id="8406680">false</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406690">for</span>&nbsp;<span class="ident" id="8406694">k</span><span class="op" id="8406695">,</span>&nbsp;<span class="ident" id="8406697">as</span>&nbsp;<span class="op" id="8406700">:=</span>&nbsp;<span class="keyword" id="8406703">range</span>&nbsp;<span class="ident" id="8406709">a</span>&nbsp;<span class="op" id="8406711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406715">bs</span><span class="op" id="8406717">,</span>&nbsp;<span class="ident" id="8406719">ok</span>&nbsp;<span class="op" id="8406722">:=</span>&nbsp;<span class="ident" id="8406725">b</span><span class="op" id="8406726">[</span><span class="ident" id="8406727">k</span><span class="op" id="8406728">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406732">if</span>&nbsp;<span class="op" id="8406735">!</span><span class="ident" id="8406736">ok</span>&nbsp;<span class="op" id="8406739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406744">return</span>&nbsp;<span class="builtintype" id="8406751">false</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406763">if</span>&nbsp;<span class="op" id="8406766">!</span><span class="ident" id="8406767">reflect</span><span class="op" id="8406774">.</span><span class="ident" id="8406775">DeepEqual</span><span class="op" id="8406784">(</span><span class="ident" id="8406785">as</span><span class="op" id="8406787">,</span>&nbsp;<span class="ident" id="8406789">bs</span><span class="op" id="8406791">)</span>&nbsp;<span class="op" id="8406793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406798">return</span>&nbsp;<span class="builtintype" id="8406805">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406816">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8406819">return</span>&nbsp;<span class="builtintype" id="8406826">true</span><br>
<span class="lineno"></span><span class="op" id="8406831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8406834">func</span>&nbsp;<span class="ident" id="8406839">TestDateParsing</span><span class="op" id="8406854">(</span><span class="ident" id="8406855">t</span>&nbsp;<span class="op" id="8406857">*</span><span class="ident" id="8406858">testing</span><span class="op" id="8406865">.</span><span class="ident" id="8406866">T</span><span class="op" id="8406867">)</span>&nbsp;<span class="op" id="8406869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406872">tests</span>&nbsp;<span class="op" id="8406878">:=</span>&nbsp;<span class="op" id="8406881">[</span><span class="op" id="8406882">]</span><span class="keyword" id="8406883">struct</span>&nbsp;<span class="op" id="8406890">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406894">dateStr</span>&nbsp;<span class="builtintype" id="8406902">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406911">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8406919">time</span><span class="op" id="8406923">.</span><span class="ident" id="8406924">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406930">}</span><span class="op" id="8406931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8406935">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8406965">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8406970">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="8407003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407008">time</span><span class="op" id="8407012">.</span><span class="ident" id="8407013">Date</span><span class="op" id="8407017">(</span><span class="num" id="8407018">1997</span><span class="op" id="8407022">,</span>&nbsp;<span class="num" id="8407024">11</span><span class="op" id="8407026">,</span>&nbsp;<span class="num" id="8407028">21</span><span class="op" id="8407030">,</span>&nbsp;<span class="num" id="8407032">9</span><span class="op" id="8407033">,</span>&nbsp;<span class="num" id="8407035">55</span><span class="op" id="8407037">,</span>&nbsp;<span class="num" id="8407039">6</span><span class="op" id="8407040">,</span>&nbsp;<span class="num" id="8407042">0</span><span class="op" id="8407043">,</span>&nbsp;<span class="ident" id="8407045">time</span><span class="op" id="8407049">.</span><span class="ident" id="8407050">FixedZone</span><span class="op" id="8407059">(</span><span class="string" id="8407060">&#34;&#34;</span><span class="op" id="8407062">,</span>&nbsp;<span class="op" id="8407064">-</span><span class="num" id="8407065">6</span><span class="op" id="8407066">*</span><span class="num" id="8407067">60</span><span class="op" id="8407069">*</span><span class="num" id="8407070">60</span><span class="op" id="8407072">)</span><span class="op" id="8407073">)</span><span class="op" id="8407074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407078">}</span><span class="op" id="8407079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8407083">//&nbsp;RFC5322,&nbsp;Appendix&nbsp;A.6.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8407112">//&nbsp;Obsolete&nbsp;date.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8407137">&#34;21&nbsp;Nov&nbsp;97&nbsp;09:55:06&nbsp;GMT&#34;</span><span class="op" id="8407161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407166">time</span><span class="op" id="8407170">.</span><span class="ident" id="8407171">Date</span><span class="op" id="8407175">(</span><span class="num" id="8407176">1997</span><span class="op" id="8407180">,</span>&nbsp;<span class="num" id="8407182">11</span><span class="op" id="8407184">,</span>&nbsp;<span class="num" id="8407186">21</span><span class="op" id="8407188">,</span>&nbsp;<span class="num" id="8407190">9</span><span class="op" id="8407191">,</span>&nbsp;<span class="num" id="8407193">55</span><span class="op" id="8407195">,</span>&nbsp;<span class="num" id="8407197">6</span><span class="op" id="8407198">,</span>&nbsp;<span class="num" id="8407200">0</span><span class="op" id="8407201">,</span>&nbsp;<span class="ident" id="8407203">time</span><span class="op" id="8407207">.</span><span class="ident" id="8407208">FixedZone</span><span class="op" id="8407217">(</span><span class="string" id="8407218">&#34;GMT&#34;</span><span class="op" id="8407223">,</span>&nbsp;<span class="num" id="8407225">0</span><span class="op" id="8407226">)</span><span class="op" id="8407227">)</span><span class="op" id="8407228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407232">}</span><span class="op" id="8407233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8407237">//&nbsp;Commonly&nbsp;found&nbsp;format&nbsp;not&nbsp;specified&nbsp;by&nbsp;RFC&nbsp;5322.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8407296">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&nbsp;(MDT)&#34;</span><span class="op" id="8407335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407340">time</span><span class="op" id="8407344">.</span><span class="ident" id="8407345">Date</span><span class="op" id="8407349">(</span><span class="num" id="8407350">1997</span><span class="op" id="8407354">,</span>&nbsp;<span class="num" id="8407356">11</span><span class="op" id="8407358">,</span>&nbsp;<span class="num" id="8407360">21</span><span class="op" id="8407362">,</span>&nbsp;<span class="num" id="8407364">9</span><span class="op" id="8407365">,</span>&nbsp;<span class="num" id="8407367">55</span><span class="op" id="8407369">,</span>&nbsp;<span class="num" id="8407371">6</span><span class="op" id="8407372">,</span>&nbsp;<span class="num" id="8407374">0</span><span class="op" id="8407375">,</span>&nbsp;<span class="ident" id="8407377">time</span><span class="op" id="8407381">.</span><span class="ident" id="8407382">FixedZone</span><span class="op" id="8407391">(</span><span class="string" id="8407392">&#34;&#34;</span><span class="op" id="8407394">,</span>&nbsp;<span class="op" id="8407396">-</span><span class="num" id="8407397">6</span><span class="op" id="8407398">*</span><span class="num" id="8407399">60</span><span class="op" id="8407401">*</span><span class="num" id="8407402">60</span><span class="op" id="8407404">)</span><span class="op" id="8407405">)</span><span class="op" id="8407406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407410">}</span><span class="op" id="8407411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407414">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8407417">for</span>&nbsp;<span class="ident" id="8407421">_</span><span class="op" id="8407422">,</span>&nbsp;<span class="ident" id="8407424">test</span>&nbsp;<span class="op" id="8407429">:=</span>&nbsp;<span class="keyword" id="8407432">range</span>&nbsp;<span class="ident" id="8407438">tests</span>&nbsp;<span class="op" id="8407444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407448">hdr</span>&nbsp;<span class="op" id="8407452">:=</span>&nbsp;<span class="ident" id="8407455">Header</span><span class="op" id="8407461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8407466">&#34;Date&#34;</span><span class="op" id="8407472">:</span>&nbsp;<span class="op" id="8407474">[</span><span class="op" id="8407475">]</span><span class="builtintype" id="8407476">string</span><span class="op" id="8407482">{</span><span class="ident" id="8407483">test</span><span class="op" id="8407487">.</span><span class="ident" id="8407488">dateStr</span><span class="op" id="8407495">}</span><span class="op" id="8407496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407504">date</span><span class="op" id="8407508">,</span>&nbsp;<span class="ident" id="8407510">err</span>&nbsp;<span class="op" id="8407514">:=</span>&nbsp;<span class="ident" id="8407517">hdr</span><span class="op" id="8407520">.</span><span class="ident" id="8407521">Date</span><span class="op" id="8407525">(</span><span class="op" id="8407526">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8407530">if</span>&nbsp;<span class="ident" id="8407533">err</span>&nbsp;<span class="op" id="8407537">!=</span>&nbsp;<span class="builtintype" id="8407540">nil</span>&nbsp;<span class="op" id="8407544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407549">t</span><span class="op" id="8407550">.</span><span class="ident" id="8407551">Errorf</span><span class="op" id="8407557">(</span><span class="string" id="8407558">&#34;Failed&nbsp;parsing&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="8407581">,</span>&nbsp;<span class="ident" id="8407583">test</span><span class="op" id="8407587">.</span><span class="ident" id="8407588">dateStr</span><span class="op" id="8407595">,</span>&nbsp;<span class="ident" id="8407597">err</span><span class="op" id="8407600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8407605">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8407620">if</span>&nbsp;<span class="op" id="8407623">!</span><span class="ident" id="8407624">date</span><span class="op" id="8407628">.</span><span class="ident" id="8407629">Equal</span><span class="op" id="8407634">(</span><span class="ident" id="8407635">test</span><span class="op" id="8407639">.</span><span class="ident" id="8407640">exp</span><span class="op" id="8407643">)</span>&nbsp;<span class="op" id="8407645">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407650">t</span><span class="op" id="8407651">.</span><span class="ident" id="8407652">Errorf</span><span class="op" id="8407658">(</span><span class="string" id="8407659">&#34;Parse&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="8407691">,</span>&nbsp;<span class="ident" id="8407693">test</span><span class="op" id="8407697">.</span><span class="ident" id="8407698">dateStr</span><span class="op" id="8407705">,</span>&nbsp;<span class="ident" id="8407707">date</span><span class="op" id="8407711">,</span>&nbsp;<span class="ident" id="8407713">test</span><span class="op" id="8407717">.</span><span class="ident" id="8407718">exp</span><span class="op" id="8407721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8407728">}</span><br>
<span class="lineno"></span><span class="op" id="8407730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="8407733">func</span>&nbsp;<span class="ident" id="8407738">TestAddressParsingError</span><span class="op" id="8407761">(</span><span class="ident" id="8407762">t</span>&nbsp;<span class="op" id="8407764">*</span><span class="ident" id="8407765">testing</span><span class="op" id="8407772">.</span><span class="ident" id="8407773">T</span><span class="op" id="8407774">)</span>&nbsp;<span class="op" id="8407776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8407779">const</span>&nbsp;<span class="ident" id="8407785">txt</span>&nbsp;<span class="op" id="8407789">=</span>&nbsp;<span class="string" id="8407791">&#34;=?iso-8859-2?Q?Bogl=E1rka_Tak=E1cs?=&nbsp;&lt;unknown@gmail.com&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407851">_</span><span class="op" id="8407852">,</span>&nbsp;<span class="ident" id="8407854">err</span>&nbsp;<span class="op" id="8407858">:=</span>&nbsp;<span class="ident" id="8407861">ParseAddress</span><span class="op" id="8407873">(</span><span class="ident" id="8407874">txt</span><span class="op" id="8407877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8407880">if</span>&nbsp;<span class="ident" id="8407883">err</span>&nbsp;<span class="op" id="8407887">==</span>&nbsp;<span class="builtintype" id="8407890">nil</span>&nbsp;<span class="op" id="8407894">||</span>&nbsp;<span class="op" id="8407897">!</span><span class="ident" id="8407898">strings</span><span class="op" id="8407905">.</span><span class="ident" id="8407906">Contains</span><span class="op" id="8407914">(</span><span class="ident" id="8407915">err</span><span class="op" id="8407918">.</span><span class="ident" id="8407919">Error</span><span class="op" id="8407924">(</span><span class="op" id="8407925">)</span><span class="op" id="8407926">,</span>&nbsp;<span class="string" id="8407928">&#34;charset&nbsp;not&nbsp;supported&#34;</span><span class="op" id="8407951">)</span>&nbsp;<span class="op" id="8407953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8407957">t</span><span class="op" id="8407958">.</span><span class="ident" id="8407959">Errorf</span><span class="op" id="8407965">(</span><span class="string" id="8407966">`mail.ParseAddress(%q)&nbsp;err:&nbsp;%q,&nbsp;want&nbsp;&#34;.*charset&nbsp;not&nbsp;supported.*&#34;`</span><span class="op" id="8408031">,</span>&nbsp;<span class="ident" id="8408033">txt</span><span class="op" id="8408036">,</span>&nbsp;<span class="ident" id="8408038">err</span><span class="op" id="8408041">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408044">}</span><br>
<span class="lineno"></span><span class="op" id="8408046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8408049">func</span>&nbsp;<span class="ident" id="8408054">TestAddressParsing</span><span class="op" id="8408072">(</span><span class="ident" id="8408073">t</span>&nbsp;<span class="op" id="8408075">*</span><span class="ident" id="8408076">testing</span><span class="op" id="8408083">.</span><span class="ident" id="8408084">T</span><span class="op" id="8408085">)</span>&nbsp;<span class="op" id="8408087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408090">tests</span>&nbsp;<span class="op" id="8408096">:=</span>&nbsp;<span class="op" id="8408099">[</span><span class="op" id="8408100">]</span><span class="keyword" id="8408101">struct</span>&nbsp;<span class="op" id="8408108">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408112">addrsStr</span>&nbsp;<span class="builtintype" id="8408121">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408130">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408139">[</span><span class="op" id="8408140">]</span><span class="op" id="8408141">*</span><span class="ident" id="8408142">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408151">}</span><span class="op" id="8408152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8408156">//&nbsp;Bare&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408174">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408179">`jdoe@machine.example`</span><span class="op" id="8408201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408206">[</span><span class="op" id="8408207">]</span><span class="op" id="8408208">*</span><span class="ident" id="8408209">Address</span><span class="op" id="8408216">{</span><span class="op" id="8408217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408223">Address</span><span class="op" id="8408230">:</span>&nbsp;<span class="string" id="8408232">&#34;jdoe@machine.example&#34;</span><span class="op" id="8408254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408259">}</span><span class="op" id="8408260">}</span><span class="op" id="8408261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408265">}</span><span class="op" id="8408266">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8408270">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408305">`John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;`</span><span class="op" id="8408338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408343">[</span><span class="op" id="8408344">]</span><span class="op" id="8408345">*</span><span class="ident" id="8408346">Address</span><span class="op" id="8408353">{</span><span class="op" id="8408354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408360">Name</span><span class="op" id="8408364">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408369">&#34;John&nbsp;Doe&#34;</span><span class="op" id="8408379">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408385">Address</span><span class="op" id="8408392">:</span>&nbsp;<span class="string" id="8408394">&#34;jdoe@machine.example&#34;</span><span class="op" id="8408416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408421">}</span><span class="op" id="8408422">}</span><span class="op" id="8408423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408427">}</span><span class="op" id="8408428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8408432">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408462">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408467">`&#34;Joe&nbsp;Q.&nbsp;Public&#34;&nbsp;&lt;john.q.public@example.com&gt;`</span><span class="op" id="8408512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408517">[</span><span class="op" id="8408518">]</span><span class="op" id="8408519">*</span><span class="ident" id="8408520">Address</span><span class="op" id="8408527">{</span><span class="op" id="8408528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408534">Name</span><span class="op" id="8408538">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408543">&#34;Joe&nbsp;Q.&nbsp;Public&#34;</span><span class="op" id="8408558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408564">Address</span><span class="op" id="8408571">:</span>&nbsp;<span class="string" id="8408573">&#34;john.q.public@example.com&#34;</span><span class="op" id="8408600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408605">}</span><span class="op" id="8408606">}</span><span class="op" id="8408607">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408611">}</span><span class="op" id="8408612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408621">`Mary&nbsp;Smith&nbsp;&lt;mary@x.test&gt;,&nbsp;jdoe@example.org,&nbsp;Who?&nbsp;&lt;one@y.test&gt;`</span><span class="op" id="8408684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408689">[</span><span class="op" id="8408690">]</span><span class="op" id="8408691">*</span><span class="ident" id="8408692">Address</span><span class="op" id="8408699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408705">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408712">Name</span><span class="op" id="8408716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408721">&#34;Mary&nbsp;Smith&#34;</span><span class="op" id="8408733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408740">Address</span><span class="op" id="8408747">:</span>&nbsp;<span class="string" id="8408749">&#34;mary@x.test&#34;</span><span class="op" id="8408762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408768">}</span><span class="op" id="8408769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408782">Address</span><span class="op" id="8408789">:</span>&nbsp;<span class="string" id="8408791">&#34;jdoe@example.org&#34;</span><span class="op" id="8408809">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408815">}</span><span class="op" id="8408816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408829">Name</span><span class="op" id="8408833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408838">&#34;Who?&#34;</span><span class="op" id="8408844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408851">Address</span><span class="op" id="8408858">:</span>&nbsp;<span class="string" id="8408860">&#34;one@y.test&#34;</span><span class="op" id="8408872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408878">}</span><span class="op" id="8408879">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408884">}</span><span class="op" id="8408885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408889">}</span><span class="op" id="8408890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8408899">`&lt;boss@nil.test&gt;,&nbsp;&#34;Giant;&nbsp;\&#34;Big\&#34;&nbsp;Box&#34;&nbsp;&lt;sysservices@example.net&gt;`</span><span class="op" id="8408964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408969">[</span><span class="op" id="8408970">]</span><span class="op" id="8408971">*</span><span class="ident" id="8408972">Address</span><span class="op" id="8408979">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8408985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8408992">Address</span><span class="op" id="8408999">:</span>&nbsp;<span class="string" id="8409001">&#34;boss@nil.test&#34;</span><span class="op" id="8409016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409022">}</span><span class="op" id="8409023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409036">Name</span><span class="op" id="8409040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409045">`Giant;&nbsp;&#34;Big&#34;&nbsp;Box`</span><span class="op" id="8409063">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409070">Address</span><span class="op" id="8409077">:</span>&nbsp;<span class="string" id="8409079">&#34;sysservices@example.net&#34;</span><span class="op" id="8409104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409110">}</span><span class="op" id="8409111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409116">}</span><span class="op" id="8409117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409121">}</span><span class="op" id="8409122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8409126">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.3</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8409156">//&nbsp;TODO(dsymonds):&nbsp;Group&nbsp;addresses.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8409195">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409246">`=?iso-8859-1?q?J=F6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="8409295">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409300">[</span><span class="op" id="8409301">]</span><span class="op" id="8409302">*</span><span class="ident" id="8409303">Address</span><span class="op" id="8409310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409323">Name</span><span class="op" id="8409327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409332">`Jrg&nbsp;Doe`</span><span class="op" id="8409343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409350">Address</span><span class="op" id="8409357">:</span>&nbsp;<span class="string" id="8409359">&#34;joerg@example.com&#34;</span><span class="op" id="8409378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409384">}</span><span class="op" id="8409385">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409390">}</span><span class="op" id="8409391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409395">}</span><span class="op" id="8409396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8409400">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;US-ASCII&nbsp;address.&nbsp;Dumb&nbsp;but&nbsp;legal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409465">`=?us-ascii?q?J=6Frg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="8409512">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409517">[</span><span class="op" id="8409518">]</span><span class="op" id="8409519">*</span><span class="ident" id="8409520">Address</span><span class="op" id="8409527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409540">Name</span><span class="op" id="8409544">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409549">`Jorg&nbsp;Doe`</span><span class="op" id="8409559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409566">Address</span><span class="op" id="8409573">:</span>&nbsp;<span class="string" id="8409575">&#34;joerg@example.com&#34;</span><span class="op" id="8409594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409600">}</span><span class="op" id="8409601">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409606">}</span><span class="op" id="8409607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409611">}</span><span class="op" id="8409612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8409616">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409662">`=?utf-8?q?J=C3=B6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="8409709">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409714">[</span><span class="op" id="8409715">]</span><span class="op" id="8409716">*</span><span class="ident" id="8409717">Address</span><span class="op" id="8409724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409737">Name</span><span class="op" id="8409741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409746">`Jrg&nbsp;Doe`</span><span class="op" id="8409757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409764">Address</span><span class="op" id="8409771">:</span>&nbsp;<span class="string" id="8409773">&#34;joerg@example.com&#34;</span><span class="op" id="8409792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409798">}</span><span class="op" id="8409799">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409804">}</span><span class="op" id="8409805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409809">}</span><span class="op" id="8409810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8409814">//&nbsp;RFC&nbsp;2047,&nbsp;Section&nbsp;8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409845">`=?ISO-8859-1?Q?Andr=E9?=&nbsp;Pirard&nbsp;&lt;PIRARD@vm1.ulg.ac.be&gt;`</span><span class="op" id="8409901">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409906">[</span><span class="op" id="8409907">]</span><span class="op" id="8409908">*</span><span class="ident" id="8409909">Address</span><span class="op" id="8409916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409929">Name</span><span class="op" id="8409933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8409938">`Andr&nbsp;Pirard`</span><span class="op" id="8409953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8409960">Address</span><span class="op" id="8409967">:</span>&nbsp;<span class="string" id="8409969">&#34;PIRARD@vm1.ulg.ac.be&#34;</span><span class="op" id="8409991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8409997">}</span><span class="op" id="8409998">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410003">}</span><span class="op" id="8410004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410008">}</span><span class="op" id="8410009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8410013">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8410082">`=?ISO-8859-1?B?SvZyZw==?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="8410129">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410134">[</span><span class="op" id="8410135">]</span><span class="op" id="8410136">*</span><span class="ident" id="8410137">Address</span><span class="op" id="8410144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410157">Name</span><span class="op" id="8410161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8410166">`Jrg`</span><span class="op" id="8410173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410180">Address</span><span class="op" id="8410187">:</span>&nbsp;<span class="string" id="8410189">&#34;joerg@example.com&#34;</span><span class="op" id="8410208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410214">}</span><span class="op" id="8410215">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410220">}</span><span class="op" id="8410221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410225">}</span><span class="op" id="8410226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8410230">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8410294">`=?UTF-8?B?SsO2cmc=?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="8410336">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410341">[</span><span class="op" id="8410342">]</span><span class="op" id="8410343">*</span><span class="ident" id="8410344">Address</span><span class="op" id="8410351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410364">Name</span><span class="op" id="8410368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8410373">`Jrg`</span><span class="op" id="8410380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410387">Address</span><span class="op" id="8410394">:</span>&nbsp;<span class="string" id="8410396">&#34;joerg@example.com&#34;</span><span class="op" id="8410415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410421">}</span><span class="op" id="8410422">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410427">}</span><span class="op" id="8410428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410432">}</span><span class="op" id="8410433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8410437">//&nbsp;Custom&nbsp;example&nbsp;with&nbsp;&#34;.&#34;&nbsp;in&nbsp;name.&nbsp;For&nbsp;issue&nbsp;4938</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8410495">`Asem&nbsp;H.&nbsp;&lt;noreply@example.com&gt;`</span><span class="op" id="8410526">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410531">[</span><span class="op" id="8410532">]</span><span class="op" id="8410533">*</span><span class="ident" id="8410534">Address</span><span class="op" id="8410541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410554">Name</span><span class="op" id="8410558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8410563">`Asem&nbsp;H.`</span><span class="op" id="8410572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410579">Address</span><span class="op" id="8410586">:</span>&nbsp;<span class="string" id="8410588">&#34;noreply@example.com&#34;</span><span class="op" id="8410609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410615">}</span><span class="op" id="8410616">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410621">}</span><span class="op" id="8410622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410626">}</span><span class="op" id="8410627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8410633">for</span>&nbsp;<span class="ident" id="8410637">_</span><span class="op" id="8410638">,</span>&nbsp;<span class="ident" id="8410640">test</span>&nbsp;<span class="op" id="8410645">:=</span>&nbsp;<span class="keyword" id="8410648">range</span>&nbsp;<span class="ident" id="8410654">tests</span>&nbsp;<span class="op" id="8410660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8410664">if</span>&nbsp;<span class="builtinfunc" id="8410667">len</span><span class="op" id="8410670">(</span><span class="ident" id="8410671">test</span><span class="op" id="8410675">.</span><span class="ident" id="8410676">exp</span><span class="op" id="8410679">)</span>&nbsp;<span class="op" id="8410681">==</span>&nbsp;<span class="num" id="8410684">1</span>&nbsp;<span class="op" id="8410686">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410691">addr</span><span class="op" id="8410695">,</span>&nbsp;<span class="ident" id="8410697">err</span>&nbsp;<span class="op" id="8410701">:=</span>&nbsp;<span class="ident" id="8410704">ParseAddress</span><span class="op" id="8410716">(</span><span class="ident" id="8410717">test</span><span class="op" id="8410721">.</span><span class="ident" id="8410722">addrsStr</span><span class="op" id="8410730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8410735">if</span>&nbsp;<span class="ident" id="8410738">err</span>&nbsp;<span class="op" id="8410742">!=</span>&nbsp;<span class="builtintype" id="8410745">nil</span>&nbsp;<span class="op" id="8410749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410755">t</span><span class="op" id="8410756">.</span><span class="ident" id="8410757">Errorf</span><span class="op" id="8410763">(</span><span class="string" id="8410764">&#34;Failed&nbsp;parsing&nbsp;(single)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="8410796">,</span>&nbsp;<span class="ident" id="8410798">test</span><span class="op" id="8410802">.</span><span class="ident" id="8410803">addrsStr</span><span class="op" id="8410811">,</span>&nbsp;<span class="ident" id="8410813">err</span><span class="op" id="8410816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8410822">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410834">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8410839">if</span>&nbsp;<span class="op" id="8410842">!</span><span class="ident" id="8410843">reflect</span><span class="op" id="8410850">.</span><span class="ident" id="8410851">DeepEqual</span><span class="op" id="8410860">(</span><span class="op" id="8410861">[</span><span class="op" id="8410862">]</span><span class="op" id="8410863">*</span><span class="ident" id="8410864">Address</span><span class="op" id="8410871">{</span><span class="ident" id="8410872">addr</span><span class="op" id="8410876">}</span><span class="op" id="8410877">,</span>&nbsp;<span class="ident" id="8410879">test</span><span class="op" id="8410883">.</span><span class="ident" id="8410884">exp</span><span class="op" id="8410887">)</span>&nbsp;<span class="op" id="8410889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410895">t</span><span class="op" id="8410896">.</span><span class="ident" id="8410897">Errorf</span><span class="op" id="8410903">(</span><span class="string" id="8410904">&#34;Parse&nbsp;(single)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="8410945">,</span>&nbsp;<span class="ident" id="8410947">test</span><span class="op" id="8410951">.</span><span class="ident" id="8410952">addrsStr</span><span class="op" id="8410960">,</span>&nbsp;<span class="ident" id="8410962">addr</span><span class="op" id="8410966">,</span>&nbsp;<span class="ident" id="8410968">test</span><span class="op" id="8410972">.</span><span class="ident" id="8410973">exp</span><span class="op" id="8410976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8410985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8410990">addrs</span><span class="op" id="8410995">,</span>&nbsp;<span class="ident" id="8410997">err</span>&nbsp;<span class="op" id="8411001">:=</span>&nbsp;<span class="ident" id="8411004">ParseAddressList</span><span class="op" id="8411020">(</span><span class="ident" id="8411021">test</span><span class="op" id="8411025">.</span><span class="ident" id="8411026">addrsStr</span><span class="op" id="8411034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8411038">if</span>&nbsp;<span class="ident" id="8411041">err</span>&nbsp;<span class="op" id="8411045">!=</span>&nbsp;<span class="builtintype" id="8411048">nil</span>&nbsp;<span class="op" id="8411052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411057">t</span><span class="op" id="8411058">.</span><span class="ident" id="8411059">Errorf</span><span class="op" id="8411065">(</span><span class="string" id="8411066">&#34;Failed&nbsp;parsing&nbsp;(list)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="8411096">,</span>&nbsp;<span class="ident" id="8411098">test</span><span class="op" id="8411102">.</span><span class="ident" id="8411103">addrsStr</span><span class="op" id="8411111">,</span>&nbsp;<span class="ident" id="8411113">err</span><span class="op" id="8411116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8411121">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411132">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8411136">if</span>&nbsp;<span class="op" id="8411139">!</span><span class="ident" id="8411140">reflect</span><span class="op" id="8411147">.</span><span class="ident" id="8411148">DeepEqual</span><span class="op" id="8411157">(</span><span class="ident" id="8411158">addrs</span><span class="op" id="8411163">,</span>&nbsp;<span class="ident" id="8411165">test</span><span class="op" id="8411169">.</span><span class="ident" id="8411170">exp</span><span class="op" id="8411173">)</span>&nbsp;<span class="op" id="8411175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411180">t</span><span class="op" id="8411181">.</span><span class="ident" id="8411182">Errorf</span><span class="op" id="8411188">(</span><span class="string" id="8411189">&#34;Parse&nbsp;(list)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="8411228">,</span>&nbsp;<span class="ident" id="8411230">test</span><span class="op" id="8411234">.</span><span class="ident" id="8411235">addrsStr</span><span class="op" id="8411243">,</span>&nbsp;<span class="ident" id="8411245">addrs</span><span class="op" id="8411250">,</span>&nbsp;<span class="ident" id="8411252">test</span><span class="op" id="8411256">.</span><span class="ident" id="8411257">exp</span><span class="op" id="8411260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411267">}</span><br>
<span class="lineno"></span><span class="op" id="8411269">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="8411272">func</span>&nbsp;<span class="ident" id="8411277">TestAddressFormatting</span><span class="op" id="8411298">(</span><span class="ident" id="8411299">t</span>&nbsp;<span class="op" id="8411301">*</span><span class="ident" id="8411302">testing</span><span class="op" id="8411309">.</span><span class="ident" id="8411310">T</span><span class="op" id="8411311">)</span>&nbsp;<span class="op" id="8411313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411316">tests</span>&nbsp;<span class="op" id="8411322">:=</span>&nbsp;<span class="op" id="8411325">[</span><span class="op" id="8411326">]</span><span class="keyword" id="8411327">struct</span>&nbsp;<span class="op" id="8411334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411338">addr</span>&nbsp;<span class="op" id="8411343">*</span><span class="ident" id="8411344">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411354">exp</span>&nbsp;&nbsp;<span class="builtintype" id="8411359">string</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411367">}</span><span class="op" id="8411368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411377">&amp;</span><span class="ident" id="8411378">Address</span><span class="op" id="8411385">{</span><span class="ident" id="8411386">Address</span><span class="op" id="8411393">:</span>&nbsp;<span class="string" id="8411395">&#34;bob@example.com&#34;</span><span class="op" id="8411412">}</span><span class="op" id="8411413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8411418">&#34;&lt;bob@example.com&gt;&#34;</span><span class="op" id="8411437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411441">}</span><span class="op" id="8411442">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411451">&amp;</span><span class="ident" id="8411452">Address</span><span class="op" id="8411459">{</span><span class="ident" id="8411460">Name</span><span class="op" id="8411464">:</span>&nbsp;<span class="string" id="8411466">&#34;Bob&#34;</span><span class="op" id="8411471">,</span>&nbsp;<span class="ident" id="8411473">Address</span><span class="op" id="8411480">:</span>&nbsp;<span class="string" id="8411482">&#34;bob@example.com&#34;</span><span class="op" id="8411499">}</span><span class="op" id="8411500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8411505">`&#34;Bob&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="8411530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411534">}</span><span class="op" id="8411535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411539">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8411544">//&nbsp;note&nbsp;the&nbsp;&nbsp;(o&nbsp;with&nbsp;an&nbsp;umlaut)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411581">&amp;</span><span class="ident" id="8411582">Address</span><span class="op" id="8411589">{</span><span class="ident" id="8411590">Name</span><span class="op" id="8411594">:</span>&nbsp;<span class="string" id="8411596">&#34;Bb&#34;</span><span class="op" id="8411602">,</span>&nbsp;<span class="ident" id="8411604">Address</span><span class="op" id="8411611">:</span>&nbsp;<span class="string" id="8411613">&#34;bob@example.com&#34;</span><span class="op" id="8411630">}</span><span class="op" id="8411631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8411636">`=?utf-8?q?B=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="8411676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411680">}</span><span class="op" id="8411681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411685">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411690">&amp;</span><span class="ident" id="8411691">Address</span><span class="op" id="8411698">{</span><span class="ident" id="8411699">Name</span><span class="op" id="8411703">:</span>&nbsp;<span class="string" id="8411705">&#34;Bob&nbsp;Jane&#34;</span><span class="op" id="8411715">,</span>&nbsp;<span class="ident" id="8411717">Address</span><span class="op" id="8411724">:</span>&nbsp;<span class="string" id="8411726">&#34;bob@example.com&#34;</span><span class="op" id="8411743">}</span><span class="op" id="8411744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8411749">`&#34;Bob&nbsp;Jane&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="8411779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411783">}</span><span class="op" id="8411784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411793">&amp;</span><span class="ident" id="8411794">Address</span><span class="op" id="8411801">{</span><span class="ident" id="8411802">Name</span><span class="op" id="8411806">:</span>&nbsp;<span class="string" id="8411808">&#34;Bb&nbsp;Jacb&#34;</span><span class="op" id="8411821">,</span>&nbsp;<span class="ident" id="8411823">Address</span><span class="op" id="8411830">:</span>&nbsp;<span class="string" id="8411832">&#34;bob@example.com&#34;</span><span class="op" id="8411849">}</span><span class="op" id="8411850">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8411855">`=?utf-8?q?B=C3=B6b_Jac=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="8411906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411910">}</span><span class="op" id="8411911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8411914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8411917">for</span>&nbsp;<span class="ident" id="8411921">_</span><span class="op" id="8411922">,</span>&nbsp;<span class="ident" id="8411924">test</span>&nbsp;<span class="op" id="8411929">:=</span>&nbsp;<span class="keyword" id="8411932">range</span>&nbsp;<span class="ident" id="8411938">tests</span>&nbsp;<span class="op" id="8411944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411948">s</span>&nbsp;<span class="op" id="8411950">:=</span>&nbsp;<span class="ident" id="8411953">test</span><span class="op" id="8411957">.</span><span class="ident" id="8411958">addr</span><span class="op" id="8411962">.</span><span class="ident" id="8411963">String</span><span class="op" id="8411969">(</span><span class="op" id="8411970">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8411974">if</span>&nbsp;<span class="ident" id="8411977">s</span>&nbsp;<span class="op" id="8411979">!=</span>&nbsp;<span class="ident" id="8411982">test</span><span class="op" id="8411986">.</span><span class="ident" id="8411987">exp</span>&nbsp;<span class="op" id="8411991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8411996">t</span><span class="op" id="8411997">.</span><span class="ident" id="8411998">Errorf</span><span class="op" id="8412004">(</span><span class="string" id="8412005">&#34;Address%+v.String()&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8412040">,</span>&nbsp;<span class="op" id="8412042">*</span><span class="ident" id="8412043">test</span><span class="op" id="8412047">.</span><span class="ident" id="8412048">addr</span><span class="op" id="8412052">,</span>&nbsp;<span class="ident" id="8412054">s</span><span class="op" id="8412055">,</span>&nbsp;<span class="ident" id="8412057">test</span><span class="op" id="8412061">.</span><span class="ident" id="8412062">exp</span><span class="op" id="8412065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8412072">}</span><br>
<span class="lineno"></span><span class="op" id="8412074">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
