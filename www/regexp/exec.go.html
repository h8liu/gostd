<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4669886">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4669941">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4669995">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4670046">package</span>&nbsp;<span class="ident" id="4670054">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4670062">import</span>&nbsp;<span class="op" id="4670069">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4670072">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4670078">&#34;regexp/syntax&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4670094">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4670097">//&nbsp;A&nbsp;queue&nbsp;is&nbsp;a&nbsp;&#39;sparse&nbsp;array&#39;&nbsp;holding&nbsp;pending&nbsp;threads&nbsp;of&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="4670166">//&nbsp;See&nbsp;http://research.swtch.com/2008/03/using-uninitialized-memory-for-fun-and.html</span><br>
<span class="lineno"></span><span class="keyword" id="4670251">type</span>&nbsp;<span class="ident" id="4670256">queue</span>&nbsp;<span class="keyword" id="4670262">struct</span>&nbsp;<span class="op" id="4670269">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670272">sparse</span>&nbsp;<span class="op" id="4670279">[</span><span class="op" id="4670280">]</span><span class="builtintype" id="4670281">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670289">dense</span>&nbsp;&nbsp;<span class="op" id="4670296">[</span><span class="op" id="4670297">]</span><span class="ident" id="4670298"><a href="/regexp/exec.go.html#4670536">entry</a></span><br>
<span class="lineno"></span><span class="op" id="4670304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4670307">//&nbsp;A&nbsp;entry&nbsp;is&nbsp;an&nbsp;entry&nbsp;on&nbsp;a&nbsp;queue.</span><br>
<span class="lineno">20</span><span class="comment" id="4670342">//&nbsp;It&nbsp;holds&nbsp;both&nbsp;the&nbsp;instruction&nbsp;pc&nbsp;and&nbsp;the&nbsp;actual&nbsp;thread.</span><br>
<span class="lineno"></span><span class="comment" id="4670401">//&nbsp;Some&nbsp;queue&nbsp;entries&nbsp;are&nbsp;just&nbsp;place&nbsp;holders&nbsp;so&nbsp;that&nbsp;the&nbsp;machine</span><br>
<span class="lineno"></span><span class="comment" id="4670466">//&nbsp;knows&nbsp;it&nbsp;has&nbsp;considered&nbsp;that&nbsp;pc.&nbsp;&nbsp;Such&nbsp;entries&nbsp;have&nbsp;t&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4670531">type</span>&nbsp;<span class="ident" id="4670536">entry</span>&nbsp;<span class="keyword" id="4670542">struct</span>&nbsp;<span class="op" id="4670549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670552">pc</span>&nbsp;<span class="builtintype" id="4670555">uint32</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670563">t</span>&nbsp;&nbsp;<span class="op" id="4670566">*</span><span class="ident" id="4670567"><a href="/regexp/exec.go.html#4670747">thread</a></span><br>
<span class="lineno"></span><span class="op" id="4670574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4670577">//&nbsp;A&nbsp;thread&nbsp;is&nbsp;the&nbsp;state&nbsp;of&nbsp;a&nbsp;single&nbsp;path&nbsp;through&nbsp;the&nbsp;machine:</span><br>
<span class="lineno"></span><span class="comment" id="4670640">//&nbsp;an&nbsp;instruction&nbsp;and&nbsp;a&nbsp;corresponding&nbsp;capture&nbsp;array.</span><br>
<span class="lineno">30</span><span class="comment" id="4670693">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp2.html</span><br>
<span class="lineno"></span><span class="keyword" id="4670742">type</span>&nbsp;<span class="ident" id="4670747">thread</span>&nbsp;<span class="keyword" id="4670754">struct</span>&nbsp;<span class="op" id="4670761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670764">inst</span>&nbsp;<span class="op" id="4670769">*</span><span class="ident" id="4670770"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4670776">.</span><span class="ident" id="4670777">Inst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4670783">cap</span>&nbsp;&nbsp;<span class="op" id="4670788">[</span><span class="op" id="4670789">]</span><span class="builtintype" id="4670790">int</span><br>
<span class="lineno"></span><span class="op" id="4670794">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4670797">//&nbsp;A&nbsp;machine&nbsp;holds&nbsp;all&nbsp;the&nbsp;state&nbsp;during&nbsp;an&nbsp;NFA&nbsp;simulation&nbsp;for&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="4670862">type</span>&nbsp;<span class="ident" id="4670867">machine</span>&nbsp;<span class="keyword" id="4670875">struct</span>&nbsp;<span class="op" id="4670882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670885">re</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4670894">*</span><span class="ident" id="4670895"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4670907">//&nbsp;corresponding&nbsp;Regexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670932">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4670941">*</span><span class="ident" id="4670942"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4670948">.</span><span class="ident" id="4670949">Prog</span>&nbsp;<span class="comment" id="4670954">//&nbsp;compiled&nbsp;program</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4670975">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4670984">*</span><span class="ident" id="4670985"><a href="/regexp/onepass.go.html#4681445">onePassProg</a></span>&nbsp;<span class="comment" id="4670997">//&nbsp;compiled&nbsp;onepass&nbsp;program,&nbsp;or&nbsp;notOnePass</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671041">q0</span><span class="op" id="4671043">,</span>&nbsp;<span class="ident" id="4671045">q1</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4671050"><a href="/regexp/exec.go.html#4670256">queue</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4671063">//&nbsp;two&nbsp;queues&nbsp;for&nbsp;runq,&nbsp;nextq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671094">pool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4671103">[</span><span class="op" id="4671104">]</span><span class="op" id="4671105">*</span><span class="ident" id="4671106"><a href="/regexp/exec.go.html#4670747">thread</a></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4671116">//&nbsp;pool&nbsp;of&nbsp;available&nbsp;threads</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671146">matched</span>&nbsp;&nbsp;<span class="builtintype" id="4671155">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4671168">//&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671198">matchcap</span>&nbsp;<span class="op" id="4671207">[</span><span class="op" id="4671208">]</span><span class="builtintype" id="4671209">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4671220">//&nbsp;capture&nbsp;information&nbsp;for&nbsp;the&nbsp;match</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4671259">//&nbsp;cached&nbsp;inputs,&nbsp;to&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671298">inputBytes</span>&nbsp;&nbsp;<span class="ident" id="4671310"><a href="/regexp/regexp.go.html#4707622">inputBytes</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671322">inputString</span>&nbsp;<span class="ident" id="4671334"><a href="/regexp/regexp.go.html#4706778">inputString</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671347">inputReader</span>&nbsp;<span class="ident" id="4671359"><a href="/regexp/regexp.go.html#4708443">inputReader</a></span><br>
<span class="lineno">50</span><span class="op" id="4671371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4671374">func</span>&nbsp;<span class="op" id="4671379">(</span><span class="ident" id="4671380">m</span>&nbsp;<span class="op" id="4671382">*</span><span class="ident" id="4671383"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4671390">)</span>&nbsp;<span class="ident" id="4671392">newInputBytes</span><span class="op" id="4671405">(</span><span class="ident" id="4671406">b</span>&nbsp;<span class="op" id="4671408">[</span><span class="op" id="4671409">]</span><span class="builtintype" id="4671410">byte</span><span class="op" id="4671414">)</span>&nbsp;<span class="ident" id="4671416"><a href="/regexp/regexp.go.html#4706496">input</a></span>&nbsp;<span class="op" id="4671422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671425"><a href="/regexp/exec.go.html#4671380">m</a></span><span class="op" id="4671426">.</span><span class="ident" id="4671427">inputBytes</span><span class="op" id="4671437">.</span><span class="ident" id="4671438">str</span>&nbsp;<span class="op" id="4671442">=</span>&nbsp;<span class="ident" id="4671444"><a href="/regexp/exec.go.html#4671406">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4671447">return</span>&nbsp;<span class="op" id="4671454">&amp;</span><span class="ident" id="4671455"><a href="/regexp/exec.go.html#4671380">m</a></span><span class="op" id="4671456">.</span><span class="ident" id="4671457">inputBytes</span><br>
<span class="lineno">55</span><span class="op" id="4671468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4671471">func</span>&nbsp;<span class="op" id="4671476">(</span><span class="ident" id="4671477">m</span>&nbsp;<span class="op" id="4671479">*</span><span class="ident" id="4671480"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4671487">)</span>&nbsp;<span class="ident" id="4671489">newInputString</span><span class="op" id="4671503">(</span><span class="ident" id="4671504">s</span>&nbsp;<span class="builtintype" id="4671506">string</span><span class="op" id="4671512">)</span>&nbsp;<span class="ident" id="4671514"><a href="/regexp/regexp.go.html#4706496">input</a></span>&nbsp;<span class="op" id="4671520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671523"><a href="/regexp/exec.go.html#4671477">m</a></span><span class="op" id="4671524">.</span><span class="ident" id="4671525">inputString</span><span class="op" id="4671536">.</span><span class="ident" id="4671537">str</span>&nbsp;<span class="op" id="4671541">=</span>&nbsp;<span class="ident" id="4671543"><a href="/regexp/exec.go.html#4671504">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4671546">return</span>&nbsp;<span class="op" id="4671553">&amp;</span><span class="ident" id="4671554"><a href="/regexp/exec.go.html#4671477">m</a></span><span class="op" id="4671555">.</span><span class="ident" id="4671556">inputString</span><br>
<span class="lineno">60</span><span class="op" id="4671568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4671571">func</span>&nbsp;<span class="op" id="4671576">(</span><span class="ident" id="4671577">m</span>&nbsp;<span class="op" id="4671579">*</span><span class="ident" id="4671580"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4671587">)</span>&nbsp;<span class="ident" id="4671589">newInputReader</span><span class="op" id="4671603">(</span><span class="ident" id="4671604">r</span>&nbsp;<span class="ident" id="4671606"><a href="/regexp/exec.go.html#4670072">io</a></span><span class="op" id="4671608">.</span><span class="ident" id="4671609">RuneReader</span><span class="op" id="4671619">)</span>&nbsp;<span class="ident" id="4671621"><a href="/regexp/regexp.go.html#4706496">input</a></span>&nbsp;<span class="op" id="4671627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671630"><a href="/regexp/exec.go.html#4671577">m</a></span><span class="op" id="4671631">.</span><span class="ident" id="4671632">inputReader</span><span class="op" id="4671643">.</span><span class="ident" id="4671644">r</span>&nbsp;<span class="op" id="4671646">=</span>&nbsp;<span class="ident" id="4671648"><a href="/regexp/exec.go.html#4671604">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671651"><a href="/regexp/exec.go.html#4671577">m</a></span><span class="op" id="4671652">.</span><span class="ident" id="4671653">inputReader</span><span class="op" id="4671664">.</span><span class="ident" id="4671665">atEOT</span>&nbsp;<span class="op" id="4671671">=</span>&nbsp;<span class="ident" id="4671673">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671680"><a href="/regexp/exec.go.html#4671577">m</a></span><span class="op" id="4671681">.</span><span class="ident" id="4671682">inputReader</span><span class="op" id="4671693">.</span><span class="ident" id="4671694">pos</span>&nbsp;<span class="op" id="4671698">=</span>&nbsp;<span class="num" id="4671700">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4671703">return</span>&nbsp;<span class="op" id="4671710">&amp;</span><span class="ident" id="4671711"><a href="/regexp/exec.go.html#4671577">m</a></span><span class="op" id="4671712">.</span><span class="ident" id="4671713">inputReader</span><br>
<span class="lineno"></span><span class="op" id="4671725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4671728">//&nbsp;progMachine&nbsp;returns&nbsp;a&nbsp;new&nbsp;machine&nbsp;running&nbsp;the&nbsp;prog&nbsp;p.</span><br>
<span class="lineno">70</span><span class="keyword" id="4671785">func</span>&nbsp;<span class="ident" id="4671790">progMachine</span><span class="op" id="4671801">(</span><span class="ident" id="4671802">p</span>&nbsp;<span class="op" id="4671804">*</span><span class="ident" id="4671805"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4671811">.</span><span class="ident" id="4671812">Prog</span><span class="op" id="4671816">,</span>&nbsp;<span class="ident" id="4671818">op</span>&nbsp;<span class="op" id="4671821">*</span><span class="ident" id="4671822"><a href="/regexp/onepass.go.html#4681445">onePassProg</a></span><span class="op" id="4671833">)</span>&nbsp;<span class="op" id="4671835">*</span><span class="ident" id="4671836"><a href="/regexp/exec.go.html#4670867">machine</a></span>&nbsp;<span class="op" id="4671844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671847">m</span>&nbsp;<span class="op" id="4671849">:=</span>&nbsp;<span class="op" id="4671852">&amp;</span><span class="ident" id="4671853"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4671860">{</span><span class="ident" id="4671861">p</span><span class="op" id="4671862">:</span>&nbsp;<span class="ident" id="4671864"><a href="/regexp/exec.go.html#4671802">p</a></span><span class="op" id="4671865">,</span>&nbsp;<span class="ident" id="4671867">op</span><span class="op" id="4671869">:</span>&nbsp;<span class="ident" id="4671871"><a href="/regexp/exec.go.html#4671818">op</a></span><span class="op" id="4671873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671876">n</span>&nbsp;<span class="op" id="4671878">:=</span>&nbsp;<span class="builtinfunc" id="4671881">len</span><span class="op" id="4671884">(</span><span class="ident" id="4671885"><a href="/regexp/exec.go.html#4671847">m</a></span><span class="op" id="4671886">.</span><span class="ident" id="4671887">p</span><span class="op" id="4671888">.</span><span class="ident" id="4671889">Inst</span><span class="op" id="4671893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671896"><a href="/regexp/exec.go.html#4671847">m</a></span><span class="op" id="4671897">.</span><span class="ident" id="4671898">q0</span>&nbsp;<span class="op" id="4671901">=</span>&nbsp;<span class="ident" id="4671903"><a href="/regexp/exec.go.html#4670256">queue</a></span><span class="op" id="4671908">{</span><span class="builtinfunc" id="4671909">make</span><span class="op" id="4671913">(</span><span class="op" id="4671914">[</span><span class="op" id="4671915">]</span><span class="builtintype" id="4671916">uint32</span><span class="op" id="4671922">,</span>&nbsp;<span class="ident" id="4671924"><a href="/regexp/exec.go.html#4671876">n</a></span><span class="op" id="4671925">)</span><span class="op" id="4671926">,</span>&nbsp;<span class="builtinfunc" id="4671928">make</span><span class="op" id="4671932">(</span><span class="op" id="4671933">[</span><span class="op" id="4671934">]</span><span class="ident" id="4671935"><a href="/regexp/exec.go.html#4670536">entry</a></span><span class="op" id="4671940">,</span>&nbsp;<span class="num" id="4671942">0</span><span class="op" id="4671943">,</span>&nbsp;<span class="ident" id="4671945"><a href="/regexp/exec.go.html#4671876">n</a></span><span class="op" id="4671946">)</span><span class="op" id="4671947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4671950"><a href="/regexp/exec.go.html#4671847">m</a></span><span class="op" id="4671951">.</span><span class="ident" id="4671952">q1</span>&nbsp;<span class="op" id="4671955">=</span>&nbsp;<span class="ident" id="4671957"><a href="/regexp/exec.go.html#4670256">queue</a></span><span class="op" id="4671962">{</span><span class="builtinfunc" id="4671963">make</span><span class="op" id="4671967">(</span><span class="op" id="4671968">[</span><span class="op" id="4671969">]</span><span class="builtintype" id="4671970">uint32</span><span class="op" id="4671976">,</span>&nbsp;<span class="ident" id="4671978"><a href="/regexp/exec.go.html#4671876">n</a></span><span class="op" id="4671979">)</span><span class="op" id="4671980">,</span>&nbsp;<span class="builtinfunc" id="4671982">make</span><span class="op" id="4671986">(</span><span class="op" id="4671987">[</span><span class="op" id="4671988">]</span><span class="ident" id="4671989"><a href="/regexp/exec.go.html#4670536">entry</a></span><span class="op" id="4671994">,</span>&nbsp;<span class="num" id="4671996">0</span><span class="op" id="4671997">,</span>&nbsp;<span class="ident" id="4671999"><a href="/regexp/exec.go.html#4671876">n</a></span><span class="op" id="4672000">)</span><span class="op" id="4672001">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672004">ncap</span>&nbsp;<span class="op" id="4672009">:=</span>&nbsp;<span class="ident" id="4672012"><a href="/regexp/exec.go.html#4671802">p</a></span><span class="op" id="4672013">.</span><span class="ident" id="4672014">NumCap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672022">if</span>&nbsp;<span class="ident" id="4672025"><a href="/regexp/exec.go.html#4672004">ncap</a></span>&nbsp;<span class="op" id="4672030">&lt;</span>&nbsp;<span class="num" id="4672032">2</span>&nbsp;<span class="op" id="4672034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672038"><a href="/regexp/exec.go.html#4672004">ncap</a></span>&nbsp;<span class="op" id="4672043">=</span>&nbsp;<span class="num" id="4672045">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4672048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672051"><a href="/regexp/exec.go.html#4671847">m</a></span><span class="op" id="4672052">.</span><span class="ident" id="4672053">matchcap</span>&nbsp;<span class="op" id="4672062">=</span>&nbsp;<span class="builtinfunc" id="4672064">make</span><span class="op" id="4672068">(</span><span class="op" id="4672069">[</span><span class="op" id="4672070">]</span><span class="builtintype" id="4672071">int</span><span class="op" id="4672074">,</span>&nbsp;<span class="ident" id="4672076"><a href="/regexp/exec.go.html#4672004">ncap</a></span><span class="op" id="4672080">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672083">return</span>&nbsp;<span class="ident" id="4672090"><a href="/regexp/exec.go.html#4671847">m</a></span><br>
<span class="lineno"></span><span class="op" id="4672092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4672095">func</span>&nbsp;<span class="op" id="4672100">(</span><span class="ident" id="4672101">m</span>&nbsp;<span class="op" id="4672103">*</span><span class="ident" id="4672104"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4672111">)</span>&nbsp;<span class="ident" id="4672113">init</span><span class="op" id="4672117">(</span><span class="ident" id="4672118">ncap</span>&nbsp;<span class="builtintype" id="4672123">int</span><span class="op" id="4672126">)</span>&nbsp;<span class="op" id="4672128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672131">for</span>&nbsp;<span class="ident" id="4672135">_</span><span class="op" id="4672136">,</span>&nbsp;<span class="ident" id="4672138">t</span>&nbsp;<span class="op" id="4672140">:=</span>&nbsp;<span class="keyword" id="4672143">range</span>&nbsp;<span class="ident" id="4672149"><a href="/regexp/exec.go.html#4672101">m</a></span><span class="op" id="4672150">.</span><span class="ident" id="4672151">pool</span>&nbsp;<span class="op" id="4672156">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672160"><a href="/regexp/exec.go.html#4672138">t</a></span><span class="op" id="4672161">.</span><span class="builtinfunc" id="4672162">cap</span>&nbsp;<span class="op" id="4672166">=</span>&nbsp;<span class="ident" id="4672168"><a href="/regexp/exec.go.html#4672138">t</a></span><span class="op" id="4672169">.</span><span class="builtinfunc" id="4672170">cap</span><span class="op" id="4672173">[</span><span class="op" id="4672174">:</span><span class="ident" id="4672175"><a href="/regexp/exec.go.html#4672118">ncap</a></span><span class="op" id="4672179">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4672182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672185"><a href="/regexp/exec.go.html#4672101">m</a></span><span class="op" id="4672186">.</span><span class="ident" id="4672187">matchcap</span>&nbsp;<span class="op" id="4672196">=</span>&nbsp;<span class="ident" id="4672198"><a href="/regexp/exec.go.html#4672101">m</a></span><span class="op" id="4672199">.</span><span class="ident" id="4672200">matchcap</span><span class="op" id="4672208">[</span><span class="op" id="4672209">:</span><span class="ident" id="4672210"><a href="/regexp/exec.go.html#4672118">ncap</a></span><span class="op" id="4672214">]</span><br>
<span class="lineno"></span><span class="op" id="4672216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="4672219">//&nbsp;alloc&nbsp;allocates&nbsp;a&nbsp;new&nbsp;thread&nbsp;with&nbsp;the&nbsp;given&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="4672279">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;free&nbsp;pool&nbsp;if&nbsp;possible.</span><br>
<span class="lineno"></span><span class="keyword" id="4672317">func</span>&nbsp;<span class="op" id="4672322">(</span><span class="ident" id="4672323">m</span>&nbsp;<span class="op" id="4672325">*</span><span class="ident" id="4672326"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4672333">)</span>&nbsp;<span class="ident" id="4672335">alloc</span><span class="op" id="4672340">(</span><span class="ident" id="4672341">i</span>&nbsp;<span class="op" id="4672343">*</span><span class="ident" id="4672344"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4672350">.</span><span class="ident" id="4672351">Inst</span><span class="op" id="4672355">)</span>&nbsp;<span class="op" id="4672357">*</span><span class="ident" id="4672358"><a href="/regexp/exec.go.html#4670747">thread</a></span>&nbsp;<span class="op" id="4672365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672368">var</span>&nbsp;<span class="ident" id="4672372">t</span>&nbsp;<span class="op" id="4672374">*</span><span class="ident" id="4672375"><a href="/regexp/exec.go.html#4670747">thread</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672383">if</span>&nbsp;<span class="ident" id="4672386">n</span>&nbsp;<span class="op" id="4672388">:=</span>&nbsp;<span class="builtinfunc" id="4672391">len</span><span class="op" id="4672394">(</span><span class="ident" id="4672395"><a href="/regexp/exec.go.html#4672323">m</a></span><span class="op" id="4672396">.</span><span class="ident" id="4672397">pool</span><span class="op" id="4672401">)</span><span class="op" id="4672402">;</span>&nbsp;<span class="ident" id="4672404"><a href="/regexp/exec.go.html#4672386">n</a></span>&nbsp;<span class="op" id="4672406">&gt;</span>&nbsp;<span class="num" id="4672408">0</span>&nbsp;<span class="op" id="4672410">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672414"><a href="/regexp/exec.go.html#4672372">t</a></span>&nbsp;<span class="op" id="4672416">=</span>&nbsp;<span class="ident" id="4672418"><a href="/regexp/exec.go.html#4672323">m</a></span><span class="op" id="4672419">.</span><span class="ident" id="4672420">pool</span><span class="op" id="4672424">[</span><span class="ident" id="4672425"><a href="/regexp/exec.go.html#4672386">n</a></span><span class="op" id="4672426">-</span><span class="num" id="4672427">1</span><span class="op" id="4672428">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672432"><a href="/regexp/exec.go.html#4672323">m</a></span><span class="op" id="4672433">.</span><span class="ident" id="4672434">pool</span>&nbsp;<span class="op" id="4672439">=</span>&nbsp;<span class="ident" id="4672441"><a href="/regexp/exec.go.html#4672323">m</a></span><span class="op" id="4672442">.</span><span class="ident" id="4672443">pool</span><span class="op" id="4672447">[</span><span class="op" id="4672448">:</span><span class="ident" id="4672449"><a href="/regexp/exec.go.html#4672386">n</a></span><span class="op" id="4672450">-</span><span class="num" id="4672451">1</span><span class="op" id="4672452">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4672455">}</span>&nbsp;<span class="keyword" id="4672457">else</span>&nbsp;<span class="op" id="4672462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672466"><a href="/regexp/exec.go.html#4672372">t</a></span>&nbsp;<span class="op" id="4672468">=</span>&nbsp;<span class="builtinfunc" id="4672470">new</span><span class="op" id="4672473">(</span><span class="ident" id="4672474"><a href="/regexp/exec.go.html#4670747">thread</a></span><span class="op" id="4672480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672484"><a href="/regexp/exec.go.html#4672372">t</a></span><span class="op" id="4672485">.</span><span class="builtinfunc" id="4672486">cap</span>&nbsp;<span class="op" id="4672490">=</span>&nbsp;<span class="builtinfunc" id="4672492">make</span><span class="op" id="4672496">(</span><span class="op" id="4672497">[</span><span class="op" id="4672498">]</span><span class="builtintype" id="4672499">int</span><span class="op" id="4672502">,</span>&nbsp;<span class="builtinfunc" id="4672504">len</span><span class="op" id="4672507">(</span><span class="ident" id="4672508"><a href="/regexp/exec.go.html#4672323">m</a></span><span class="op" id="4672509">.</span><span class="ident" id="4672510">matchcap</span><span class="op" id="4672518">)</span><span class="op" id="4672519">,</span>&nbsp;<span class="builtinfunc" id="4672521">cap</span><span class="op" id="4672524">(</span><span class="ident" id="4672525"><a href="/regexp/exec.go.html#4672323">m</a></span><span class="op" id="4672526">.</span><span class="ident" id="4672527">matchcap</span><span class="op" id="4672535">)</span><span class="op" id="4672536">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4672539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672542"><a href="/regexp/exec.go.html#4672372">t</a></span><span class="op" id="4672543">.</span><span class="ident" id="4672544">inst</span>&nbsp;<span class="op" id="4672549">=</span>&nbsp;<span class="ident" id="4672551"><a href="/regexp/exec.go.html#4672341">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672554">return</span>&nbsp;<span class="ident" id="4672561"><a href="/regexp/exec.go.html#4672372">t</a></span><br>
<span class="lineno"></span><span class="op" id="4672563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4672566">//&nbsp;free&nbsp;returns&nbsp;t&nbsp;to&nbsp;the&nbsp;free&nbsp;pool.</span><br>
<span class="lineno"></span><span class="keyword" id="4672602">func</span>&nbsp;<span class="op" id="4672607">(</span><span class="ident" id="4672608">m</span>&nbsp;<span class="op" id="4672610">*</span><span class="ident" id="4672611"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4672618">)</span>&nbsp;<span class="ident" id="4672620">free</span><span class="op" id="4672624">(</span><span class="ident" id="4672625">t</span>&nbsp;<span class="op" id="4672627">*</span><span class="ident" id="4672628"><a href="/regexp/exec.go.html#4670747">thread</a></span><span class="op" id="4672634">)</span>&nbsp;<span class="op" id="4672636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672639"><a href="/regexp/exec.go.html#4672608">m</a></span><span class="op" id="4672640">.</span><span class="ident" id="4672641">inputBytes</span><span class="op" id="4672651">.</span><span class="ident" id="4672652">str</span>&nbsp;<span class="op" id="4672656">=</span>&nbsp;<span class="ident" id="4672658">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672663"><a href="/regexp/exec.go.html#4672608">m</a></span><span class="op" id="4672664">.</span><span class="ident" id="4672665">inputString</span><span class="op" id="4672676">.</span><span class="ident" id="4672677">str</span>&nbsp;<span class="op" id="4672681">=</span>&nbsp;<span class="string" id="4672683">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672687"><a href="/regexp/exec.go.html#4672608">m</a></span><span class="op" id="4672688">.</span><span class="ident" id="4672689">inputReader</span><span class="op" id="4672700">.</span><span class="ident" id="4672701">r</span>&nbsp;<span class="op" id="4672703">=</span>&nbsp;<span class="ident" id="4672705">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672710"><a href="/regexp/exec.go.html#4672608">m</a></span><span class="op" id="4672711">.</span><span class="ident" id="4672712">pool</span>&nbsp;<span class="op" id="4672717">=</span>&nbsp;<span class="builtinfunc" id="4672719">append</span><span class="op" id="4672725">(</span><span class="ident" id="4672726"><a href="/regexp/exec.go.html#4672608">m</a></span><span class="op" id="4672727">.</span><span class="ident" id="4672728">pool</span><span class="op" id="4672732">,</span>&nbsp;<span class="ident" id="4672734"><a href="/regexp/exec.go.html#4672625">t</a></span><span class="op" id="4672735">)</span><br>
<span class="lineno"></span><span class="op" id="4672737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4672740">//&nbsp;match&nbsp;runs&nbsp;the&nbsp;machine&nbsp;over&nbsp;the&nbsp;input&nbsp;starting&nbsp;at&nbsp;pos.</span><br>
<span class="lineno"></span><span class="comment" id="4672798">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found.</span><br>
<span class="lineno">115</span><span class="comment" id="4672839">//&nbsp;If&nbsp;so,&nbsp;m.matchcap&nbsp;holds&nbsp;the&nbsp;submatch&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="4672892">func</span>&nbsp;<span class="op" id="4672897">(</span><span class="ident" id="4672898">m</span>&nbsp;<span class="op" id="4672900">*</span><span class="ident" id="4672901"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4672908">)</span>&nbsp;<span class="ident" id="4672910">match</span><span class="op" id="4672915">(</span><span class="ident" id="4672916">i</span>&nbsp;<span class="ident" id="4672918"><a href="/regexp/regexp.go.html#4706496">input</a></span><span class="op" id="4672923">,</span>&nbsp;<span class="ident" id="4672925">pos</span>&nbsp;<span class="builtintype" id="4672929">int</span><span class="op" id="4672932">)</span>&nbsp;<span class="builtintype" id="4672934">bool</span>&nbsp;<span class="op" id="4672939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4672942">startCond</span>&nbsp;<span class="op" id="4672952">:=</span>&nbsp;<span class="ident" id="4672955"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4672956">.</span><span class="ident" id="4672957">re</span><span class="op" id="4672959">.</span><span class="ident" id="4672960">cond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4672966">if</span>&nbsp;<span class="ident" id="4672969"><a href="/regexp/exec.go.html#4672942">startCond</a></span>&nbsp;<span class="op" id="4672979">==</span>&nbsp;<span class="op" id="4672982">^</span><span class="ident" id="4672983"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4672989">.</span><span class="ident" id="4672990">EmptyOp</span><span class="op" id="4672997">(</span><span class="num" id="4672998">0</span><span class="op" id="4672999">)</span>&nbsp;<span class="op" id="4673001">{</span>&nbsp;<span class="comment" id="4673003">//&nbsp;impossible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673019">return</span>&nbsp;<span class="ident" id="4673026">false</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673036"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673037">.</span><span class="ident" id="4673038">matched</span>&nbsp;<span class="op" id="4673046">=</span>&nbsp;<span class="ident" id="4673048">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673055">for</span>&nbsp;<span class="ident" id="4673059">i</span>&nbsp;<span class="op" id="4673061">:=</span>&nbsp;<span class="keyword" id="4673064">range</span>&nbsp;<span class="ident" id="4673070"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673071">.</span><span class="ident" id="4673072">matchcap</span>&nbsp;<span class="op" id="4673081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673085"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673086">.</span><span class="ident" id="4673087">matchcap</span><span class="op" id="4673095">[</span><span class="ident" id="4673096"><a href="/regexp/exec.go.html#4673059">i</a></span><span class="op" id="4673097">]</span>&nbsp;<span class="op" id="4673099">=</span>&nbsp;<span class="op" id="4673101">-</span><span class="num" id="4673102">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673105">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673108">runq</span><span class="op" id="4673112">,</span>&nbsp;<span class="ident" id="4673114">nextq</span>&nbsp;<span class="op" id="4673120">:=</span>&nbsp;<span class="op" id="4673123">&amp;</span><span class="ident" id="4673124"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673125">.</span><span class="ident" id="4673126">q0</span><span class="op" id="4673128">,</span>&nbsp;<span class="op" id="4673130">&amp;</span><span class="ident" id="4673131"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673132">.</span><span class="ident" id="4673133">q1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673137">r</span><span class="op" id="4673138">,</span>&nbsp;<span class="ident" id="4673140">r1</span>&nbsp;<span class="op" id="4673143">:=</span>&nbsp;<span class="ident" id="4673146"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4673155">,</span>&nbsp;<span class="ident" id="4673157"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673168">width</span><span class="op" id="4673173">,</span>&nbsp;<span class="ident" id="4673175">width1</span>&nbsp;<span class="op" id="4673182">:=</span>&nbsp;<span class="num" id="4673185">0</span><span class="op" id="4673186">,</span>&nbsp;<span class="num" id="4673188">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673191"><a href="/regexp/exec.go.html#4673137">r</a></span><span class="op" id="4673192">,</span>&nbsp;<span class="ident" id="4673194"><a href="/regexp/exec.go.html#4673168">width</a></span>&nbsp;<span class="op" id="4673200">=</span>&nbsp;<span class="ident" id="4673202"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673203">.</span><span class="ident" id="4673204">step</span><span class="op" id="4673208">(</span><span class="ident" id="4673209"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4673212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673215">if</span>&nbsp;<span class="ident" id="4673218"><a href="/regexp/exec.go.html#4673137">r</a></span>&nbsp;<span class="op" id="4673220">!=</span>&nbsp;<span class="ident" id="4673223"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span>&nbsp;<span class="op" id="4673233">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673237"><a href="/regexp/exec.go.html#4673140">r1</a></span><span class="op" id="4673239">,</span>&nbsp;<span class="ident" id="4673241"><a href="/regexp/exec.go.html#4673175">width1</a></span>&nbsp;<span class="op" id="4673248">=</span>&nbsp;<span class="ident" id="4673250"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673251">.</span><span class="ident" id="4673252">step</span><span class="op" id="4673256">(</span><span class="ident" id="4673257"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4673261">+</span>&nbsp;<span class="ident" id="4673263"><a href="/regexp/exec.go.html#4673168">width</a></span><span class="op" id="4673268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673274">var</span>&nbsp;<span class="ident" id="4673278">flag</span>&nbsp;<span class="ident" id="4673283"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4673289">.</span><span class="ident" id="4673290">EmptyOp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673299">if</span>&nbsp;<span class="ident" id="4673302"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4673306">==</span>&nbsp;<span class="num" id="4673309">0</span>&nbsp;<span class="op" id="4673311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673315"><a href="/regexp/exec.go.html#4673278">flag</a></span>&nbsp;<span class="op" id="4673320">=</span>&nbsp;<span class="ident" id="4673322"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4673328">.</span><span class="ident" id="4673329">EmptyOpContext</span><span class="op" id="4673343">(</span><span class="op" id="4673344">-</span><span class="num" id="4673345">1</span><span class="op" id="4673346">,</span>&nbsp;<span class="ident" id="4673348"><a href="/regexp/exec.go.html#4673137">r</a></span><span class="op" id="4673349">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673352">}</span>&nbsp;<span class="keyword" id="4673354">else</span>&nbsp;<span class="op" id="4673359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673363"><a href="/regexp/exec.go.html#4673278">flag</a></span>&nbsp;<span class="op" id="4673368">=</span>&nbsp;<span class="ident" id="4673370"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673371">.</span><span class="ident" id="4673372">context</span><span class="op" id="4673379">(</span><span class="ident" id="4673380"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4673383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673389">for</span>&nbsp;<span class="op" id="4673393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673397">if</span>&nbsp;<span class="builtinfunc" id="4673400">len</span><span class="op" id="4673403">(</span><span class="ident" id="4673404"><a href="/regexp/exec.go.html#4673108">runq</a></span><span class="op" id="4673408">.</span><span class="ident" id="4673409">dense</span><span class="op" id="4673414">)</span>&nbsp;<span class="op" id="4673416">==</span>&nbsp;<span class="num" id="4673419">0</span>&nbsp;<span class="op" id="4673421">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673426">if</span>&nbsp;<span class="ident" id="4673429"><a href="/regexp/exec.go.html#4672942">startCond</a></span><span class="op" id="4673438">&amp;</span><span class="ident" id="4673439"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4673445">.</span><span class="ident" id="4673446">EmptyBeginText</span>&nbsp;<span class="op" id="4673461">!=</span>&nbsp;<span class="num" id="4673464">0</span>&nbsp;<span class="op" id="4673466">&amp;&amp;</span>&nbsp;<span class="ident" id="4673469"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4673473">!=</span>&nbsp;<span class="num" id="4673476">0</span>&nbsp;<span class="op" id="4673478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4673484">//&nbsp;Anchored&nbsp;match,&nbsp;past&nbsp;beginning&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673531">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673545">if</span>&nbsp;<span class="ident" id="4673548"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673549">.</span><span class="ident" id="4673550">matched</span>&nbsp;<span class="op" id="4673558">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4673564">//&nbsp;Have&nbsp;match;&nbsp;finished&nbsp;exploring&nbsp;alternatives.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673616">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673630">if</span>&nbsp;<span class="builtinfunc" id="4673633">len</span><span class="op" id="4673636">(</span><span class="ident" id="4673637"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673638">.</span><span class="ident" id="4673639">re</span><span class="op" id="4673641">.</span><span class="ident" id="4673642">prefix</span><span class="op" id="4673648">)</span>&nbsp;<span class="op" id="4673650">&gt;</span>&nbsp;<span class="num" id="4673652">0</span>&nbsp;<span class="op" id="4673654">&amp;&amp;</span>&nbsp;<span class="ident" id="4673657"><a href="/regexp/exec.go.html#4673140">r1</a></span>&nbsp;<span class="op" id="4673660">!=</span>&nbsp;<span class="ident" id="4673663"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673664">.</span><span class="ident" id="4673665">re</span><span class="op" id="4673667">.</span><span class="ident" id="4673668">prefixRune</span>&nbsp;<span class="op" id="4673679">&amp;&amp;</span>&nbsp;<span class="ident" id="4673682"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673683">.</span><span class="ident" id="4673684">canCheckPrefix</span><span class="op" id="4673698">(</span><span class="op" id="4673699">)</span>&nbsp;<span class="op" id="4673701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4673707">//&nbsp;Match&nbsp;requires&nbsp;literal&nbsp;prefix;&nbsp;fast&nbsp;search&nbsp;for&nbsp;it.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673765">advance</span>&nbsp;<span class="op" id="4673773">:=</span>&nbsp;<span class="ident" id="4673776"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673777">.</span><span class="ident" id="4673778">index</span><span class="op" id="4673783">(</span><span class="ident" id="4673784"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673785">.</span><span class="ident" id="4673786">re</span><span class="op" id="4673788">,</span>&nbsp;<span class="ident" id="4673790"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4673793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673799">if</span>&nbsp;<span class="ident" id="4673802"><a href="/regexp/exec.go.html#4673765">advance</a></span>&nbsp;<span class="op" id="4673810">&lt;</span>&nbsp;<span class="num" id="4673812">0</span>&nbsp;<span class="op" id="4673814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673821">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673837"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4673841">+=</span>&nbsp;<span class="ident" id="4673844"><a href="/regexp/exec.go.html#4673765">advance</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673856"><a href="/regexp/exec.go.html#4673137">r</a></span><span class="op" id="4673857">,</span>&nbsp;<span class="ident" id="4673859"><a href="/regexp/exec.go.html#4673168">width</a></span>&nbsp;<span class="op" id="4673865">=</span>&nbsp;<span class="ident" id="4673867"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673868">.</span><span class="ident" id="4673869">step</span><span class="op" id="4673873">(</span><span class="ident" id="4673874"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4673877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673883"><a href="/regexp/exec.go.html#4673140">r1</a></span><span class="op" id="4673885">,</span>&nbsp;<span class="ident" id="4673887"><a href="/regexp/exec.go.html#4673175">width1</a></span>&nbsp;<span class="op" id="4673894">=</span>&nbsp;<span class="ident" id="4673896"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4673897">.</span><span class="ident" id="4673898">step</span><span class="op" id="4673902">(</span><span class="ident" id="4673903"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4673907">+</span>&nbsp;<span class="ident" id="4673909"><a href="/regexp/exec.go.html#4673168">width</a></span><span class="op" id="4673914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673927">if</span>&nbsp;<span class="op" id="4673930">!</span><span class="ident" id="4673931"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673932">.</span><span class="ident" id="4673933">matched</span>&nbsp;<span class="op" id="4673941">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4673946">if</span>&nbsp;<span class="builtinfunc" id="4673949">len</span><span class="op" id="4673952">(</span><span class="ident" id="4673953"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673954">.</span><span class="ident" id="4673955">matchcap</span><span class="op" id="4673963">)</span>&nbsp;<span class="op" id="4673965">&gt;</span>&nbsp;<span class="num" id="4673967">0</span>&nbsp;<span class="op" id="4673969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4673975"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4673976">.</span><span class="ident" id="4673977">matchcap</span><span class="op" id="4673985">[</span><span class="num" id="4673986">0</span><span class="op" id="4673987">]</span>&nbsp;<span class="op" id="4673989">=</span>&nbsp;<span class="ident" id="4673991"><a href="/regexp/exec.go.html#4672925">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4673998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674003"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674004">.</span><span class="ident" id="4674005">add</span><span class="op" id="4674008">(</span><span class="ident" id="4674009"><a href="/regexp/exec.go.html#4673108">runq</a></span><span class="op" id="4674013">,</span>&nbsp;<span class="builtintype" id="4674015">uint32</span><span class="op" id="4674021">(</span><span class="ident" id="4674022"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674023">.</span><span class="ident" id="4674024">p</span><span class="op" id="4674025">.</span><span class="ident" id="4674026">Start</span><span class="op" id="4674031">)</span><span class="op" id="4674032">,</span>&nbsp;<span class="ident" id="4674034"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4674037">,</span>&nbsp;<span class="ident" id="4674039"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674040">.</span><span class="ident" id="4674041">matchcap</span><span class="op" id="4674049">,</span>&nbsp;<span class="ident" id="4674051"><a href="/regexp/exec.go.html#4673278">flag</a></span><span class="op" id="4674055">,</span>&nbsp;<span class="ident" id="4674057">nil</span><span class="op" id="4674060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674064">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674068"><a href="/regexp/exec.go.html#4673278">flag</a></span>&nbsp;<span class="op" id="4674073">=</span>&nbsp;<span class="ident" id="4674075"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4674081">.</span><span class="ident" id="4674082">EmptyOpContext</span><span class="op" id="4674096">(</span><span class="ident" id="4674097"><a href="/regexp/exec.go.html#4673137">r</a></span><span class="op" id="4674098">,</span>&nbsp;<span class="ident" id="4674100"><a href="/regexp/exec.go.html#4673140">r1</a></span><span class="op" id="4674102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674106"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674107">.</span><span class="ident" id="4674108">step</span><span class="op" id="4674112">(</span><span class="ident" id="4674113"><a href="/regexp/exec.go.html#4673108">runq</a></span><span class="op" id="4674117">,</span>&nbsp;<span class="ident" id="4674119"><a href="/regexp/exec.go.html#4673114">nextq</a></span><span class="op" id="4674124">,</span>&nbsp;<span class="ident" id="4674126"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4674129">,</span>&nbsp;<span class="ident" id="4674131"><a href="/regexp/exec.go.html#4672925">pos</a></span><span class="op" id="4674134">+</span><span class="ident" id="4674135"><a href="/regexp/exec.go.html#4673168">width</a></span><span class="op" id="4674140">,</span>&nbsp;<span class="ident" id="4674142"><a href="/regexp/exec.go.html#4673137">r</a></span><span class="op" id="4674143">,</span>&nbsp;<span class="ident" id="4674145"><a href="/regexp/exec.go.html#4673278">flag</a></span><span class="op" id="4674149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674153">if</span>&nbsp;<span class="ident" id="4674156"><a href="/regexp/exec.go.html#4673168">width</a></span>&nbsp;<span class="op" id="4674162">==</span>&nbsp;<span class="num" id="4674165">0</span>&nbsp;<span class="op" id="4674167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674172">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674180">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674184">if</span>&nbsp;<span class="builtinfunc" id="4674187">len</span><span class="op" id="4674190">(</span><span class="ident" id="4674191"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674192">.</span><span class="ident" id="4674193">matchcap</span><span class="op" id="4674201">)</span>&nbsp;<span class="op" id="4674203">==</span>&nbsp;<span class="num" id="4674206">0</span>&nbsp;<span class="op" id="4674208">&amp;&amp;</span>&nbsp;<span class="ident" id="4674211"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674212">.</span><span class="ident" id="4674213">matched</span>&nbsp;<span class="op" id="4674221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4674226">//&nbsp;Found&nbsp;a&nbsp;match&nbsp;and&nbsp;not&nbsp;paying&nbsp;attention</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4674271">//&nbsp;to&nbsp;where&nbsp;it&nbsp;is,&nbsp;so&nbsp;any&nbsp;match&nbsp;will&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674315">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674323">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674327"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4674331">+=</span>&nbsp;<span class="ident" id="4674334"><a href="/regexp/exec.go.html#4673168">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674342"><a href="/regexp/exec.go.html#4673137">r</a></span><span class="op" id="4674343">,</span>&nbsp;<span class="ident" id="4674345"><a href="/regexp/exec.go.html#4673168">width</a></span>&nbsp;<span class="op" id="4674351">=</span>&nbsp;<span class="ident" id="4674353"><a href="/regexp/exec.go.html#4673140">r1</a></span><span class="op" id="4674355">,</span>&nbsp;<span class="ident" id="4674357"><a href="/regexp/exec.go.html#4673175">width1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674366">if</span>&nbsp;<span class="ident" id="4674369"><a href="/regexp/exec.go.html#4673137">r</a></span>&nbsp;<span class="op" id="4674371">!=</span>&nbsp;<span class="ident" id="4674374"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span>&nbsp;<span class="op" id="4674384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674389"><a href="/regexp/exec.go.html#4673140">r1</a></span><span class="op" id="4674391">,</span>&nbsp;<span class="ident" id="4674393"><a href="/regexp/exec.go.html#4673175">width1</a></span>&nbsp;<span class="op" id="4674400">=</span>&nbsp;<span class="ident" id="4674402"><a href="/regexp/exec.go.html#4672916">i</a></span><span class="op" id="4674403">.</span><span class="ident" id="4674404">step</span><span class="op" id="4674408">(</span><span class="ident" id="4674409"><a href="/regexp/exec.go.html#4672925">pos</a></span>&nbsp;<span class="op" id="4674413">+</span>&nbsp;<span class="ident" id="4674415"><a href="/regexp/exec.go.html#4673168">width</a></span><span class="op" id="4674420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674424">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674428"><a href="/regexp/exec.go.html#4673108">runq</a></span><span class="op" id="4674432">,</span>&nbsp;<span class="ident" id="4674434"><a href="/regexp/exec.go.html#4673114">nextq</a></span>&nbsp;<span class="op" id="4674440">=</span>&nbsp;<span class="ident" id="4674442"><a href="/regexp/exec.go.html#4673114">nextq</a></span><span class="op" id="4674447">,</span>&nbsp;<span class="ident" id="4674449"><a href="/regexp/exec.go.html#4673108">runq</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674458"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674459">.</span><span class="ident" id="4674460">clear</span><span class="op" id="4674465">(</span><span class="ident" id="4674466"><a href="/regexp/exec.go.html#4673114">nextq</a></span><span class="op" id="4674471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674474">return</span>&nbsp;<span class="ident" id="4674481"><a href="/regexp/exec.go.html#4672898">m</a></span><span class="op" id="4674482">.</span><span class="ident" id="4674483">matched</span><br>
<span class="lineno"></span><span class="op" id="4674491">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="4674494">//&nbsp;clear&nbsp;frees&nbsp;all&nbsp;threads&nbsp;on&nbsp;the&nbsp;thread&nbsp;queue.</span><br>
<span class="lineno"></span><span class="keyword" id="4674542">func</span>&nbsp;<span class="op" id="4674547">(</span><span class="ident" id="4674548">m</span>&nbsp;<span class="op" id="4674550">*</span><span class="ident" id="4674551"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4674558">)</span>&nbsp;<span class="ident" id="4674560">clear</span><span class="op" id="4674565">(</span><span class="ident" id="4674566">q</span>&nbsp;<span class="op" id="4674568">*</span><span class="ident" id="4674569"><a href="/regexp/exec.go.html#4670256">queue</a></span><span class="op" id="4674574">)</span>&nbsp;<span class="op" id="4674576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674579">for</span>&nbsp;<span class="ident" id="4674583">_</span><span class="op" id="4674584">,</span>&nbsp;<span class="ident" id="4674586">d</span>&nbsp;<span class="op" id="4674588">:=</span>&nbsp;<span class="keyword" id="4674591">range</span>&nbsp;<span class="ident" id="4674597"><a href="/regexp/exec.go.html#4674566">q</a></span><span class="op" id="4674598">.</span><span class="ident" id="4674599">dense</span>&nbsp;<span class="op" id="4674605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4674609">if</span>&nbsp;<span class="ident" id="4674612"><a href="/regexp/exec.go.html#4674586">d</a></span><span class="op" id="4674613">.</span><span class="ident" id="4674614">t</span>&nbsp;<span class="op" id="4674616">!=</span>&nbsp;<span class="ident" id="4674619">nil</span>&nbsp;<span class="op" id="4674623">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4674628">//&nbsp;m.free(d.t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674646"><a href="/regexp/exec.go.html#4674548">m</a></span><span class="op" id="4674647">.</span><span class="ident" id="4674648">pool</span>&nbsp;<span class="op" id="4674653">=</span>&nbsp;<span class="builtinfunc" id="4674655">append</span><span class="op" id="4674661">(</span><span class="ident" id="4674662"><a href="/regexp/exec.go.html#4674548">m</a></span><span class="op" id="4674663">.</span><span class="ident" id="4674664">pool</span><span class="op" id="4674668">,</span>&nbsp;<span class="ident" id="4674670"><a href="/regexp/exec.go.html#4674586">d</a></span><span class="op" id="4674671">.</span><span class="ident" id="4674672">t</span><span class="op" id="4674673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4674680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674683"><a href="/regexp/exec.go.html#4674566">q</a></span><span class="op" id="4674684">.</span><span class="ident" id="4674685">dense</span>&nbsp;<span class="op" id="4674691">=</span>&nbsp;<span class="ident" id="4674693"><a href="/regexp/exec.go.html#4674566">q</a></span><span class="op" id="4674694">.</span><span class="ident" id="4674695">dense</span><span class="op" id="4674700">[</span><span class="op" id="4674701">:</span><span class="num" id="4674702">0</span><span class="op" id="4674703">]</span><br>
<span class="lineno">195</span><span class="op" id="4674705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4674708">//&nbsp;step&nbsp;executes&nbsp;one&nbsp;step&nbsp;of&nbsp;the&nbsp;machine,&nbsp;running&nbsp;each&nbsp;of&nbsp;the&nbsp;threads</span><br>
<span class="lineno"></span><span class="comment" id="4674778">//&nbsp;on&nbsp;runq&nbsp;and&nbsp;appending&nbsp;new&nbsp;threads&nbsp;to&nbsp;nextq.</span><br>
<span class="lineno"></span><span class="comment" id="4674825">//&nbsp;The&nbsp;step&nbsp;processes&nbsp;the&nbsp;rune&nbsp;c&nbsp;(which&nbsp;may&nbsp;be&nbsp;endOfText),</span><br>
<span class="lineno">200</span><span class="comment" id="4674884">//&nbsp;which&nbsp;starts&nbsp;at&nbsp;position&nbsp;pos&nbsp;and&nbsp;ends&nbsp;at&nbsp;nextPos.</span><br>
<span class="lineno"></span><span class="comment" id="4674937">//&nbsp;nextCond&nbsp;gives&nbsp;the&nbsp;setting&nbsp;for&nbsp;the&nbsp;empty-width&nbsp;flags&nbsp;after&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="4675002">func</span>&nbsp;<span class="op" id="4675007">(</span><span class="ident" id="4675008">m</span>&nbsp;<span class="op" id="4675010">*</span><span class="ident" id="4675011"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4675018">)</span>&nbsp;<span class="ident" id="4675020">step</span><span class="op" id="4675024">(</span><span class="ident" id="4675025">runq</span><span class="op" id="4675029">,</span>&nbsp;<span class="ident" id="4675031">nextq</span>&nbsp;<span class="op" id="4675037">*</span><span class="ident" id="4675038"><a href="/regexp/exec.go.html#4670256">queue</a></span><span class="op" id="4675043">,</span>&nbsp;<span class="ident" id="4675045">pos</span><span class="op" id="4675048">,</span>&nbsp;<span class="ident" id="4675050">nextPos</span>&nbsp;<span class="builtintype" id="4675058">int</span><span class="op" id="4675061">,</span>&nbsp;<span class="ident" id="4675063">c</span>&nbsp;<span class="builtintype" id="4675065">rune</span><span class="op" id="4675069">,</span>&nbsp;<span class="ident" id="4675071">nextCond</span>&nbsp;<span class="ident" id="4675080"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4675086">.</span><span class="ident" id="4675087">EmptyOp</span><span class="op" id="4675094">)</span>&nbsp;<span class="op" id="4675096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675099">longest</span>&nbsp;<span class="op" id="4675107">:=</span>&nbsp;<span class="ident" id="4675110"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675111">.</span><span class="ident" id="4675112">re</span><span class="op" id="4675114">.</span><span class="ident" id="4675115">longest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675124">for</span>&nbsp;<span class="ident" id="4675128">j</span>&nbsp;<span class="op" id="4675130">:=</span>&nbsp;<span class="num" id="4675133">0</span><span class="op" id="4675134">;</span>&nbsp;<span class="ident" id="4675136"><a href="/regexp/exec.go.html#4675128">j</a></span>&nbsp;<span class="op" id="4675138">&lt;</span>&nbsp;<span class="builtinfunc" id="4675140">len</span><span class="op" id="4675143">(</span><span class="ident" id="4675144"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4675148">.</span><span class="ident" id="4675149">dense</span><span class="op" id="4675154">)</span><span class="op" id="4675155">;</span>&nbsp;<span class="ident" id="4675157"><a href="/regexp/exec.go.html#4675128">j</a></span><span class="op" id="4675158">++</span>&nbsp;<span class="op" id="4675161">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675165">d</span>&nbsp;<span class="op" id="4675167">:=</span>&nbsp;<span class="op" id="4675170">&amp;</span><span class="ident" id="4675171"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4675175">.</span><span class="ident" id="4675176">dense</span><span class="op" id="4675181">[</span><span class="ident" id="4675182"><a href="/regexp/exec.go.html#4675128">j</a></span><span class="op" id="4675183">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675187">t</span>&nbsp;<span class="op" id="4675189">:=</span>&nbsp;<span class="ident" id="4675192"><a href="/regexp/exec.go.html#4675165">d</a></span><span class="op" id="4675193">.</span><span class="ident" id="4675194">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675198">if</span>&nbsp;<span class="ident" id="4675201"><a href="/regexp/exec.go.html#4675187">t</a></span>&nbsp;<span class="op" id="4675203">==</span>&nbsp;<span class="ident" id="4675206">nil</span>&nbsp;<span class="op" id="4675210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675215">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4675226">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675230">if</span>&nbsp;<span class="ident" id="4675233"><a href="/regexp/exec.go.html#4675099">longest</a></span>&nbsp;<span class="op" id="4675241">&amp;&amp;</span>&nbsp;<span class="ident" id="4675244"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675245">.</span><span class="ident" id="4675246">matched</span>&nbsp;<span class="op" id="4675254">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4675257">len</span><span class="op" id="4675260">(</span><span class="ident" id="4675261"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675262">.</span><span class="builtinfunc" id="4675263">cap</span><span class="op" id="4675266">)</span>&nbsp;<span class="op" id="4675268">&gt;</span>&nbsp;<span class="num" id="4675270">0</span>&nbsp;<span class="op" id="4675272">&amp;&amp;</span>&nbsp;<span class="ident" id="4675275"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675276">.</span><span class="ident" id="4675277">matchcap</span><span class="op" id="4675285">[</span><span class="num" id="4675286">0</span><span class="op" id="4675287">]</span>&nbsp;<span class="op" id="4675289">&lt;</span>&nbsp;<span class="ident" id="4675291"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675292">.</span><span class="builtinfunc" id="4675293">cap</span><span class="op" id="4675296">[</span><span class="num" id="4675297">0</span><span class="op" id="4675298">]</span>&nbsp;<span class="op" id="4675300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4675305">//&nbsp;m.free(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675321"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675322">.</span><span class="ident" id="4675323">pool</span>&nbsp;<span class="op" id="4675328">=</span>&nbsp;<span class="builtinfunc" id="4675330">append</span><span class="op" id="4675336">(</span><span class="ident" id="4675337"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675338">.</span><span class="ident" id="4675339">pool</span><span class="op" id="4675343">,</span>&nbsp;<span class="ident" id="4675345"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675351">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4675362">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675366">i</span>&nbsp;<span class="op" id="4675368">:=</span>&nbsp;<span class="ident" id="4675371"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675372">.</span><span class="ident" id="4675373">inst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675380">add</span>&nbsp;<span class="op" id="4675384">:=</span>&nbsp;<span class="ident" id="4675387">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675395">switch</span>&nbsp;<span class="ident" id="4675402"><a href="/regexp/exec.go.html#4675366">i</a></span><span class="op" id="4675403">.</span><span class="ident" id="4675404">Op</span>&nbsp;<span class="op" id="4675407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675411">default</span><span class="op" id="4675418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4675423">panic</span><span class="op" id="4675428">(</span><span class="string" id="4675429">&#34;bad&nbsp;inst&#34;</span><span class="op" id="4675439">)</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675444">case</span>&nbsp;<span class="ident" id="4675449"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4675455">.</span><span class="ident" id="4675456">InstMatch</span><span class="op" id="4675465">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675470">if</span>&nbsp;<span class="builtinfunc" id="4675473">len</span><span class="op" id="4675476">(</span><span class="ident" id="4675477"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675478">.</span><span class="builtinfunc" id="4675479">cap</span><span class="op" id="4675482">)</span>&nbsp;<span class="op" id="4675484">&gt;</span>&nbsp;<span class="num" id="4675486">0</span>&nbsp;<span class="op" id="4675488">&amp;&amp;</span>&nbsp;<span class="op" id="4675491">(</span><span class="op" id="4675492">!</span><span class="ident" id="4675493"><a href="/regexp/exec.go.html#4675099">longest</a></span>&nbsp;<span class="op" id="4675501">||</span>&nbsp;<span class="op" id="4675504">!</span><span class="ident" id="4675505"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675506">.</span><span class="ident" id="4675507">matched</span>&nbsp;<span class="op" id="4675515">||</span>&nbsp;<span class="ident" id="4675518"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675519">.</span><span class="ident" id="4675520">matchcap</span><span class="op" id="4675528">[</span><span class="num" id="4675529">1</span><span class="op" id="4675530">]</span>&nbsp;<span class="op" id="4675532">&lt;</span>&nbsp;<span class="ident" id="4675534"><a href="/regexp/exec.go.html#4675045">pos</a></span><span class="op" id="4675537">)</span>&nbsp;<span class="op" id="4675539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675545"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675546">.</span><span class="builtinfunc" id="4675547">cap</span><span class="op" id="4675550">[</span><span class="num" id="4675551">1</span><span class="op" id="4675552">]</span>&nbsp;<span class="op" id="4675554">=</span>&nbsp;<span class="ident" id="4675556"><a href="/regexp/exec.go.html#4675045">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4675564">copy</span><span class="op" id="4675568">(</span><span class="ident" id="4675569"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675570">.</span><span class="ident" id="4675571">matchcap</span><span class="op" id="4675579">,</span>&nbsp;<span class="ident" id="4675581"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4675582">.</span><span class="builtinfunc" id="4675583">cap</span><span class="op" id="4675586">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4675591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675596">if</span>&nbsp;<span class="op" id="4675599">!</span><span class="ident" id="4675600"><a href="/regexp/exec.go.html#4675099">longest</a></span>&nbsp;<span class="op" id="4675608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4675614">//&nbsp;First-match&nbsp;mode:&nbsp;cut&nbsp;off&nbsp;all&nbsp;lower-priority&nbsp;threads.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675675">for</span>&nbsp;<span class="ident" id="4675679">_</span><span class="op" id="4675680">,</span>&nbsp;<span class="ident" id="4675682">d</span>&nbsp;<span class="op" id="4675684">:=</span>&nbsp;<span class="keyword" id="4675687">range</span>&nbsp;<span class="ident" id="4675693"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4675697">.</span><span class="ident" id="4675698">dense</span><span class="op" id="4675703">[</span><span class="ident" id="4675704"><a href="/regexp/exec.go.html#4675128">j</a></span><span class="op" id="4675705">+</span><span class="num" id="4675706">1</span><span class="op" id="4675707">:</span><span class="op" id="4675708">]</span>&nbsp;<span class="op" id="4675710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675717">if</span>&nbsp;<span class="ident" id="4675720"><a href="/regexp/exec.go.html#4675682">d</a></span><span class="op" id="4675721">.</span><span class="ident" id="4675722">t</span>&nbsp;<span class="op" id="4675724">!=</span>&nbsp;<span class="ident" id="4675727">nil</span>&nbsp;<span class="op" id="4675731">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4675739">//&nbsp;m.free(d.t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675760"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675761">.</span><span class="ident" id="4675762">pool</span>&nbsp;<span class="op" id="4675767">=</span>&nbsp;<span class="builtinfunc" id="4675769">append</span><span class="op" id="4675775">(</span><span class="ident" id="4675776"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675777">.</span><span class="ident" id="4675778">pool</span><span class="op" id="4675782">,</span>&nbsp;<span class="ident" id="4675784"><a href="/regexp/exec.go.html#4675682">d</a></span><span class="op" id="4675785">.</span><span class="ident" id="4675786">t</span><span class="op" id="4675787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4675794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4675800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675806"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4675810">.</span><span class="ident" id="4675811">dense</span>&nbsp;<span class="op" id="4675817">=</span>&nbsp;<span class="ident" id="4675819"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4675823">.</span><span class="ident" id="4675824">dense</span><span class="op" id="4675829">[</span><span class="op" id="4675830">:</span><span class="num" id="4675831">0</span><span class="op" id="4675832">]</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4675837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675842"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4675843">.</span><span class="ident" id="4675844">matched</span>&nbsp;<span class="op" id="4675852">=</span>&nbsp;<span class="ident" id="4675854">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675862">case</span>&nbsp;<span class="ident" id="4675867"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4675873">.</span><span class="ident" id="4675874">InstRune</span><span class="op" id="4675882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675887"><a href="/regexp/exec.go.html#4675380">add</a></span>&nbsp;<span class="op" id="4675891">=</span>&nbsp;<span class="ident" id="4675893"><a href="/regexp/exec.go.html#4675366">i</a></span><span class="op" id="4675894">.</span><span class="ident" id="4675895">MatchRune</span><span class="op" id="4675904">(</span><span class="ident" id="4675905"><a href="/regexp/exec.go.html#4675063">c</a></span><span class="op" id="4675906">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675910">case</span>&nbsp;<span class="ident" id="4675915"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4675921">.</span><span class="ident" id="4675922">InstRune1</span><span class="op" id="4675931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675936"><a href="/regexp/exec.go.html#4675380">add</a></span>&nbsp;<span class="op" id="4675940">=</span>&nbsp;<span class="ident" id="4675942"><a href="/regexp/exec.go.html#4675063">c</a></span>&nbsp;<span class="op" id="4675944">==</span>&nbsp;<span class="ident" id="4675947"><a href="/regexp/exec.go.html#4675366">i</a></span><span class="op" id="4675948">.</span><span class="ident" id="4675949">Rune</span><span class="op" id="4675953">[</span><span class="num" id="4675954">0</span><span class="op" id="4675955">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4675959">case</span>&nbsp;<span class="ident" id="4675964"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4675970">.</span><span class="ident" id="4675971">InstRuneAny</span><span class="op" id="4675982">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4675987"><a href="/regexp/exec.go.html#4675380">add</a></span>&nbsp;<span class="op" id="4675991">=</span>&nbsp;<span class="ident" id="4675993">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676000">case</span>&nbsp;<span class="ident" id="4676005"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4676011">.</span><span class="ident" id="4676012">InstRuneAnyNotNL</span><span class="op" id="4676028">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676033"><a href="/regexp/exec.go.html#4675380">add</a></span>&nbsp;<span class="op" id="4676037">=</span>&nbsp;<span class="ident" id="4676039"><a href="/regexp/exec.go.html#4675063">c</a></span>&nbsp;<span class="op" id="4676041">!=</span>&nbsp;<span class="string" id="4676044">&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4676051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676055">if</span>&nbsp;<span class="ident" id="4676058"><a href="/regexp/exec.go.html#4675380">add</a></span>&nbsp;<span class="op" id="4676062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676067"><a href="/regexp/exec.go.html#4675187">t</a></span>&nbsp;<span class="op" id="4676069">=</span>&nbsp;<span class="ident" id="4676071"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4676072">.</span><span class="ident" id="4676073">add</span><span class="op" id="4676076">(</span><span class="ident" id="4676077"><a href="/regexp/exec.go.html#4675031">nextq</a></span><span class="op" id="4676082">,</span>&nbsp;<span class="ident" id="4676084"><a href="/regexp/exec.go.html#4675366">i</a></span><span class="op" id="4676085">.</span><span class="ident" id="4676086">Out</span><span class="op" id="4676089">,</span>&nbsp;<span class="ident" id="4676091"><a href="/regexp/exec.go.html#4675050">nextPos</a></span><span class="op" id="4676098">,</span>&nbsp;<span class="ident" id="4676100"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4676101">.</span><span class="builtinfunc" id="4676102">cap</span><span class="op" id="4676105">,</span>&nbsp;<span class="ident" id="4676107"><a href="/regexp/exec.go.html#4675071">nextCond</a></span><span class="op" id="4676115">,</span>&nbsp;<span class="ident" id="4676117"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4676118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4676122">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676126">if</span>&nbsp;<span class="ident" id="4676129"><a href="/regexp/exec.go.html#4675187">t</a></span>&nbsp;<span class="op" id="4676131">!=</span>&nbsp;<span class="ident" id="4676134">nil</span>&nbsp;<span class="op" id="4676138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4676143">//&nbsp;m.free(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676159"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4676160">.</span><span class="ident" id="4676161">pool</span>&nbsp;<span class="op" id="4676166">=</span>&nbsp;<span class="builtinfunc" id="4676168">append</span><span class="op" id="4676174">(</span><span class="ident" id="4676175"><a href="/regexp/exec.go.html#4675008">m</a></span><span class="op" id="4676176">.</span><span class="ident" id="4676177">pool</span><span class="op" id="4676181">,</span>&nbsp;<span class="ident" id="4676183"><a href="/regexp/exec.go.html#4675187">t</a></span><span class="op" id="4676184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4676188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4676191">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676194"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4676198">.</span><span class="ident" id="4676199">dense</span>&nbsp;<span class="op" id="4676205">=</span>&nbsp;<span class="ident" id="4676207"><a href="/regexp/exec.go.html#4675025">runq</a></span><span class="op" id="4676211">.</span><span class="ident" id="4676212">dense</span><span class="op" id="4676217">[</span><span class="op" id="4676218">:</span><span class="num" id="4676219">0</span><span class="op" id="4676220">]</span><br>
<span class="lineno"></span><span class="op" id="4676222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4676225">//&nbsp;add&nbsp;adds&nbsp;an&nbsp;entry&nbsp;to&nbsp;q&nbsp;for&nbsp;pc,&nbsp;unless&nbsp;the&nbsp;q&nbsp;already&nbsp;has&nbsp;such&nbsp;an&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="4676299">//&nbsp;It&nbsp;also&nbsp;recursively&nbsp;adds&nbsp;an&nbsp;entry&nbsp;for&nbsp;all&nbsp;instructions&nbsp;reachable&nbsp;from&nbsp;pc&nbsp;by&nbsp;following</span><br>
<span class="lineno">260</span><span class="comment" id="4676388">//&nbsp;empty-width&nbsp;conditions&nbsp;satisfied&nbsp;by&nbsp;cond.&nbsp;&nbsp;pos&nbsp;gives&nbsp;the&nbsp;current&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="4676465">//&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4676482">func</span>&nbsp;<span class="op" id="4676487">(</span><span class="ident" id="4676488">m</span>&nbsp;<span class="op" id="4676490">*</span><span class="ident" id="4676491"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4676498">)</span>&nbsp;<span class="ident" id="4676500">add</span><span class="op" id="4676503">(</span><span class="ident" id="4676504">q</span>&nbsp;<span class="op" id="4676506">*</span><span class="ident" id="4676507"><a href="/regexp/exec.go.html#4670256">queue</a></span><span class="op" id="4676512">,</span>&nbsp;<span class="ident" id="4676514">pc</span>&nbsp;<span class="builtintype" id="4676517">uint32</span><span class="op" id="4676523">,</span>&nbsp;<span class="ident" id="4676525">pos</span>&nbsp;<span class="builtintype" id="4676529">int</span><span class="op" id="4676532">,</span>&nbsp;<span class="builtinfunc" id="4676534">cap</span>&nbsp;<span class="op" id="4676538">[</span><span class="op" id="4676539">]</span><span class="builtintype" id="4676540">int</span><span class="op" id="4676543">,</span>&nbsp;<span class="ident" id="4676545">cond</span>&nbsp;<span class="ident" id="4676550"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4676556">.</span><span class="ident" id="4676557">EmptyOp</span><span class="op" id="4676564">,</span>&nbsp;<span class="ident" id="4676566">t</span>&nbsp;<span class="op" id="4676568">*</span><span class="ident" id="4676569"><a href="/regexp/exec.go.html#4670747">thread</a></span><span class="op" id="4676575">)</span>&nbsp;<span class="op" id="4676577">*</span><span class="ident" id="4676578"><a href="/regexp/exec.go.html#4670747">thread</a></span>&nbsp;<span class="op" id="4676585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676588">if</span>&nbsp;<span class="ident" id="4676591"><a href="/regexp/exec.go.html#4676514">pc</a></span>&nbsp;<span class="op" id="4676594">==</span>&nbsp;<span class="num" id="4676597">0</span>&nbsp;<span class="op" id="4676599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676603">return</span>&nbsp;<span class="ident" id="4676610"><a href="/regexp/exec.go.html#4676566">t</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4676613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676616">if</span>&nbsp;<span class="ident" id="4676619">j</span>&nbsp;<span class="op" id="4676621">:=</span>&nbsp;<span class="ident" id="4676624"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676625">.</span><span class="ident" id="4676626">sparse</span><span class="op" id="4676632">[</span><span class="ident" id="4676633"><a href="/regexp/exec.go.html#4676514">pc</a></span><span class="op" id="4676635">]</span><span class="op" id="4676636">;</span>&nbsp;<span class="ident" id="4676638"><a href="/regexp/exec.go.html#4676619">j</a></span>&nbsp;<span class="op" id="4676640">&lt;</span>&nbsp;<span class="builtintype" id="4676642">uint32</span><span class="op" id="4676648">(</span><span class="builtinfunc" id="4676649">len</span><span class="op" id="4676652">(</span><span class="ident" id="4676653"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676654">.</span><span class="ident" id="4676655">dense</span><span class="op" id="4676660">)</span><span class="op" id="4676661">)</span>&nbsp;<span class="op" id="4676663">&amp;&amp;</span>&nbsp;<span class="ident" id="4676666"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676667">.</span><span class="ident" id="4676668">dense</span><span class="op" id="4676673">[</span><span class="ident" id="4676674"><a href="/regexp/exec.go.html#4676619">j</a></span><span class="op" id="4676675">]</span><span class="op" id="4676676">.</span><span class="ident" id="4676677">pc</span>&nbsp;<span class="op" id="4676680">==</span>&nbsp;<span class="ident" id="4676683"><a href="/regexp/exec.go.html#4676514">pc</a></span>&nbsp;<span class="op" id="4676686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676690">return</span>&nbsp;<span class="ident" id="4676697"><a href="/regexp/exec.go.html#4676566">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4676700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676704">j</span>&nbsp;<span class="op" id="4676706">:=</span>&nbsp;<span class="builtinfunc" id="4676709">len</span><span class="op" id="4676712">(</span><span class="ident" id="4676713"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676714">.</span><span class="ident" id="4676715">dense</span><span class="op" id="4676720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676723"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676724">.</span><span class="ident" id="4676725">dense</span>&nbsp;<span class="op" id="4676731">=</span>&nbsp;<span class="ident" id="4676733"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676734">.</span><span class="ident" id="4676735">dense</span><span class="op" id="4676740">[</span><span class="op" id="4676741">:</span><span class="ident" id="4676742"><a href="/regexp/exec.go.html#4676704">j</a></span><span class="op" id="4676743">+</span><span class="num" id="4676744">1</span><span class="op" id="4676745">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676748">d</span>&nbsp;<span class="op" id="4676750">:=</span>&nbsp;<span class="op" id="4676753">&amp;</span><span class="ident" id="4676754"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676755">.</span><span class="ident" id="4676756">dense</span><span class="op" id="4676761">[</span><span class="ident" id="4676762"><a href="/regexp/exec.go.html#4676704">j</a></span><span class="op" id="4676763">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676766"><a href="/regexp/exec.go.html#4676748">d</a></span><span class="op" id="4676767">.</span><span class="ident" id="4676768">t</span>&nbsp;<span class="op" id="4676770">=</span>&nbsp;<span class="ident" id="4676772">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676777"><a href="/regexp/exec.go.html#4676748">d</a></span><span class="op" id="4676778">.</span><span class="ident" id="4676779">pc</span>&nbsp;<span class="op" id="4676782">=</span>&nbsp;<span class="ident" id="4676784"><a href="/regexp/exec.go.html#4676514">pc</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676788"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676789">.</span><span class="ident" id="4676790">sparse</span><span class="op" id="4676796">[</span><span class="ident" id="4676797"><a href="/regexp/exec.go.html#4676514">pc</a></span><span class="op" id="4676799">]</span>&nbsp;<span class="op" id="4676801">=</span>&nbsp;<span class="builtintype" id="4676803">uint32</span><span class="op" id="4676809">(</span><span class="ident" id="4676810"><a href="/regexp/exec.go.html#4676704">j</a></span><span class="op" id="4676811">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676815">i</span>&nbsp;<span class="op" id="4676817">:=</span>&nbsp;<span class="op" id="4676820">&amp;</span><span class="ident" id="4676821"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4676822">.</span><span class="ident" id="4676823">p</span><span class="op" id="4676824">.</span><span class="ident" id="4676825">Inst</span><span class="op" id="4676829">[</span><span class="ident" id="4676830"><a href="/regexp/exec.go.html#4676514">pc</a></span><span class="op" id="4676832">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676835">switch</span>&nbsp;<span class="ident" id="4676842"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4676843">.</span><span class="ident" id="4676844">Op</span>&nbsp;<span class="op" id="4676847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676850">default</span><span class="op" id="4676857">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4676861">panic</span><span class="op" id="4676866">(</span><span class="string" id="4676867">&#34;unhandled&#34;</span><span class="op" id="4676878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676881">case</span>&nbsp;<span class="ident" id="4676886"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4676892">.</span><span class="ident" id="4676893">InstFail</span><span class="op" id="4676901">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4676905">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4676917">case</span>&nbsp;<span class="ident" id="4676922"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4676928">.</span><span class="ident" id="4676929">InstAlt</span><span class="op" id="4676936">,</span>&nbsp;<span class="ident" id="4676938"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4676944">.</span><span class="ident" id="4676945">InstAltMatch</span><span class="op" id="4676957">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4676961"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4676963">=</span>&nbsp;<span class="ident" id="4676965"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4676966">.</span><span class="ident" id="4676967">add</span><span class="op" id="4676970">(</span><span class="ident" id="4676971"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4676972">,</span>&nbsp;<span class="ident" id="4676974"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4676975">.</span><span class="ident" id="4676976">Out</span><span class="op" id="4676979">,</span>&nbsp;<span class="ident" id="4676981"><a href="/regexp/exec.go.html#4676525">pos</a></span><span class="op" id="4676984">,</span>&nbsp;<span class="builtinfunc" id="4676986"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4676989">,</span>&nbsp;<span class="ident" id="4676991"><a href="/regexp/exec.go.html#4676545">cond</a></span><span class="op" id="4676995">,</span>&nbsp;<span class="ident" id="4676997"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4676998">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677002"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677004">=</span>&nbsp;<span class="ident" id="4677006"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4677007">.</span><span class="ident" id="4677008">add</span><span class="op" id="4677011">(</span><span class="ident" id="4677012"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4677013">,</span>&nbsp;<span class="ident" id="4677015"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677016">.</span><span class="ident" id="4677017">Arg</span><span class="op" id="4677020">,</span>&nbsp;<span class="ident" id="4677022"><a href="/regexp/exec.go.html#4676525">pos</a></span><span class="op" id="4677025">,</span>&nbsp;<span class="builtinfunc" id="4677027"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677030">,</span>&nbsp;<span class="ident" id="4677032"><a href="/regexp/exec.go.html#4676545">cond</a></span><span class="op" id="4677036">,</span>&nbsp;<span class="ident" id="4677038"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677042">case</span>&nbsp;<span class="ident" id="4677047"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677053">.</span><span class="ident" id="4677054">InstEmptyWidth</span><span class="op" id="4677068">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677072">if</span>&nbsp;<span class="ident" id="4677075"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677081">.</span><span class="ident" id="4677082">EmptyOp</span><span class="op" id="4677089">(</span><span class="ident" id="4677090"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677091">.</span><span class="ident" id="4677092">Arg</span><span class="op" id="4677095">)</span><span class="op" id="4677096">&amp;^</span><span class="ident" id="4677098"><a href="/regexp/exec.go.html#4676545">cond</a></span>&nbsp;<span class="op" id="4677103">==</span>&nbsp;<span class="num" id="4677106">0</span>&nbsp;<span class="op" id="4677108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677113"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677115">=</span>&nbsp;<span class="ident" id="4677117"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4677118">.</span><span class="ident" id="4677119">add</span><span class="op" id="4677122">(</span><span class="ident" id="4677123"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4677124">,</span>&nbsp;<span class="ident" id="4677126"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677127">.</span><span class="ident" id="4677128">Out</span><span class="op" id="4677131">,</span>&nbsp;<span class="ident" id="4677133"><a href="/regexp/exec.go.html#4676525">pos</a></span><span class="op" id="4677136">,</span>&nbsp;<span class="builtinfunc" id="4677138"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677141">,</span>&nbsp;<span class="ident" id="4677143"><a href="/regexp/exec.go.html#4676545">cond</a></span><span class="op" id="4677147">,</span>&nbsp;<span class="ident" id="4677149"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677154">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677157">case</span>&nbsp;<span class="ident" id="4677162"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677168">.</span><span class="ident" id="4677169">InstNop</span><span class="op" id="4677176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677180"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677182">=</span>&nbsp;<span class="ident" id="4677184"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4677185">.</span><span class="ident" id="4677186">add</span><span class="op" id="4677189">(</span><span class="ident" id="4677190"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4677191">,</span>&nbsp;<span class="ident" id="4677193"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677194">.</span><span class="ident" id="4677195">Out</span><span class="op" id="4677198">,</span>&nbsp;<span class="ident" id="4677200"><a href="/regexp/exec.go.html#4676525">pos</a></span><span class="op" id="4677203">,</span>&nbsp;<span class="builtinfunc" id="4677205"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677208">,</span>&nbsp;<span class="ident" id="4677210"><a href="/regexp/exec.go.html#4676545">cond</a></span><span class="op" id="4677214">,</span>&nbsp;<span class="ident" id="4677216"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677220">case</span>&nbsp;<span class="ident" id="4677225"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677231">.</span><span class="ident" id="4677232">InstCapture</span><span class="op" id="4677243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677247">if</span>&nbsp;<span class="builtintype" id="4677250">int</span><span class="op" id="4677253">(</span><span class="ident" id="4677254"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677255">.</span><span class="ident" id="4677256">Arg</span><span class="op" id="4677259">)</span>&nbsp;<span class="op" id="4677261">&lt;</span>&nbsp;<span class="builtinfunc" id="4677263">len</span><span class="op" id="4677266">(</span><span class="builtinfunc" id="4677267"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677270">)</span>&nbsp;<span class="op" id="4677272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677277">opos</span>&nbsp;<span class="op" id="4677282">:=</span>&nbsp;<span class="builtinfunc" id="4677285"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677288">[</span><span class="ident" id="4677289"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677290">.</span><span class="ident" id="4677291">Arg</span><span class="op" id="4677294">]</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4677299"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677302">[</span><span class="ident" id="4677303"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677304">.</span><span class="ident" id="4677305">Arg</span><span class="op" id="4677308">]</span>&nbsp;<span class="op" id="4677310">=</span>&nbsp;<span class="ident" id="4677312"><a href="/regexp/exec.go.html#4676525">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677319"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4677320">.</span><span class="ident" id="4677321">add</span><span class="op" id="4677324">(</span><span class="ident" id="4677325"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4677326">,</span>&nbsp;<span class="ident" id="4677328"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677329">.</span><span class="ident" id="4677330">Out</span><span class="op" id="4677333">,</span>&nbsp;<span class="ident" id="4677335"><a href="/regexp/exec.go.html#4676525">pos</a></span><span class="op" id="4677338">,</span>&nbsp;<span class="builtinfunc" id="4677340"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677343">,</span>&nbsp;<span class="ident" id="4677345"><a href="/regexp/exec.go.html#4676545">cond</a></span><span class="op" id="4677349">,</span>&nbsp;<span class="ident" id="4677351">nil</span><span class="op" id="4677354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4677359"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677362">[</span><span class="ident" id="4677363"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677364">.</span><span class="ident" id="4677365">Arg</span><span class="op" id="4677368">]</span>&nbsp;<span class="op" id="4677370">=</span>&nbsp;<span class="ident" id="4677372"><a href="/regexp/exec.go.html#4677277">opos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677379">}</span>&nbsp;<span class="keyword" id="4677381">else</span>&nbsp;<span class="op" id="4677386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677391"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677393">=</span>&nbsp;<span class="ident" id="4677395"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4677396">.</span><span class="ident" id="4677397">add</span><span class="op" id="4677400">(</span><span class="ident" id="4677401"><a href="/regexp/exec.go.html#4676504">q</a></span><span class="op" id="4677402">,</span>&nbsp;<span class="ident" id="4677404"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677405">.</span><span class="ident" id="4677406">Out</span><span class="op" id="4677409">,</span>&nbsp;<span class="ident" id="4677411"><a href="/regexp/exec.go.html#4676525">pos</a></span><span class="op" id="4677414">,</span>&nbsp;<span class="builtinfunc" id="4677416"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677419">,</span>&nbsp;<span class="ident" id="4677421"><a href="/regexp/exec.go.html#4676545">cond</a></span><span class="op" id="4677425">,</span>&nbsp;<span class="ident" id="4677427"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677428">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677435">case</span>&nbsp;<span class="ident" id="4677440"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677446">.</span><span class="ident" id="4677447">InstMatch</span><span class="op" id="4677456">,</span>&nbsp;<span class="ident" id="4677458"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677464">.</span><span class="ident" id="4677465">InstRune</span><span class="op" id="4677473">,</span>&nbsp;<span class="ident" id="4677475"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677481">.</span><span class="ident" id="4677482">InstRune1</span><span class="op" id="4677491">,</span>&nbsp;<span class="ident" id="4677493"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677499">.</span><span class="ident" id="4677500">InstRuneAny</span><span class="op" id="4677511">,</span>&nbsp;<span class="ident" id="4677513"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677519">.</span><span class="ident" id="4677520">InstRuneAnyNotNL</span><span class="op" id="4677536">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677540">if</span>&nbsp;<span class="ident" id="4677543"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677545">==</span>&nbsp;<span class="ident" id="4677548">nil</span>&nbsp;<span class="op" id="4677552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677557"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677559">=</span>&nbsp;<span class="ident" id="4677561"><a href="/regexp/exec.go.html#4676488">m</a></span><span class="op" id="4677562">.</span><span class="ident" id="4677563">alloc</span><span class="op" id="4677568">(</span><span class="ident" id="4677569"><a href="/regexp/exec.go.html#4676815">i</a></span><span class="op" id="4677570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677574">}</span>&nbsp;<span class="keyword" id="4677576">else</span>&nbsp;<span class="op" id="4677581">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677586"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677587">.</span><span class="ident" id="4677588">inst</span>&nbsp;<span class="op" id="4677593">=</span>&nbsp;<span class="ident" id="4677595"><a href="/regexp/exec.go.html#4676815">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677603">if</span>&nbsp;<span class="builtinfunc" id="4677606">len</span><span class="op" id="4677609">(</span><span class="builtinfunc" id="4677610"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677613">)</span>&nbsp;<span class="op" id="4677615">&gt;</span>&nbsp;<span class="num" id="4677617">0</span>&nbsp;<span class="op" id="4677619">&amp;&amp;</span>&nbsp;<span class="op" id="4677622">&amp;</span><span class="ident" id="4677623"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677624">.</span><span class="builtinfunc" id="4677625">cap</span><span class="op" id="4677628">[</span><span class="num" id="4677629">0</span><span class="op" id="4677630">]</span>&nbsp;<span class="op" id="4677632">!=</span>&nbsp;<span class="op" id="4677635">&amp;</span><span class="builtinfunc" id="4677636"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677639">[</span><span class="num" id="4677640">0</span><span class="op" id="4677641">]</span>&nbsp;<span class="op" id="4677643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4677648">copy</span><span class="op" id="4677652">(</span><span class="ident" id="4677653"><a href="/regexp/exec.go.html#4676566">t</a></span><span class="op" id="4677654">.</span><span class="builtinfunc" id="4677655">cap</span><span class="op" id="4677658">,</span>&nbsp;<span class="builtinfunc" id="4677660"><a href="/regexp/exec.go.html#4676534">cap</a></span><span class="op" id="4677663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677667">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677671"><a href="/regexp/exec.go.html#4676748">d</a></span><span class="op" id="4677672">.</span><span class="ident" id="4677673">t</span>&nbsp;<span class="op" id="4677675">=</span>&nbsp;<span class="ident" id="4677677"><a href="/regexp/exec.go.html#4676566">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677681"><a href="/regexp/exec.go.html#4676566">t</a></span>&nbsp;<span class="op" id="4677683">=</span>&nbsp;<span class="ident" id="4677685">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4677690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677693">return</span>&nbsp;<span class="ident" id="4677700"><a href="/regexp/exec.go.html#4676566">t</a></span><br>
<span class="lineno"></span><span class="op" id="4677702">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="comment" id="4677705">//&nbsp;onepass&nbsp;runs&nbsp;the&nbsp;machine&nbsp;over&nbsp;the&nbsp;input&nbsp;starting&nbsp;at&nbsp;pos.</span><br>
<span class="lineno"></span><span class="comment" id="4677765">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;a&nbsp;match&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="4677806">//&nbsp;If&nbsp;so,&nbsp;m.matchcap&nbsp;holds&nbsp;the&nbsp;submatch&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="4677859">func</span>&nbsp;<span class="op" id="4677864">(</span><span class="ident" id="4677865">m</span>&nbsp;<span class="op" id="4677867">*</span><span class="ident" id="4677868"><a href="/regexp/exec.go.html#4670867">machine</a></span><span class="op" id="4677875">)</span>&nbsp;<span class="ident" id="4677877">onepass</span><span class="op" id="4677884">(</span><span class="ident" id="4677885">i</span>&nbsp;<span class="ident" id="4677887"><a href="/regexp/regexp.go.html#4706496">input</a></span><span class="op" id="4677892">,</span>&nbsp;<span class="ident" id="4677894">pos</span>&nbsp;<span class="builtintype" id="4677898">int</span><span class="op" id="4677901">)</span>&nbsp;<span class="builtintype" id="4677903">bool</span>&nbsp;<span class="op" id="4677908">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4677911">startCond</span>&nbsp;<span class="op" id="4677921">:=</span>&nbsp;<span class="ident" id="4677924"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4677925">.</span><span class="ident" id="4677926">re</span><span class="op" id="4677928">.</span><span class="ident" id="4677929">cond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677935">if</span>&nbsp;<span class="ident" id="4677938"><a href="/regexp/exec.go.html#4677911">startCond</a></span>&nbsp;<span class="op" id="4677948">==</span>&nbsp;<span class="op" id="4677951">^</span><span class="ident" id="4677952"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4677958">.</span><span class="ident" id="4677959">EmptyOp</span><span class="op" id="4677966">(</span><span class="num" id="4677967">0</span><span class="op" id="4677968">)</span>&nbsp;<span class="op" id="4677970">{</span>&nbsp;<span class="comment" id="4677972">//&nbsp;impossible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4677988">return</span>&nbsp;<span class="ident" id="4677995">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678005"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678006">.</span><span class="ident" id="4678007">matched</span>&nbsp;<span class="op" id="4678015">=</span>&nbsp;<span class="ident" id="4678017">false</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678024">for</span>&nbsp;<span class="ident" id="4678028">i</span>&nbsp;<span class="op" id="4678030">:=</span>&nbsp;<span class="keyword" id="4678033">range</span>&nbsp;<span class="ident" id="4678039"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678040">.</span><span class="ident" id="4678041">matchcap</span>&nbsp;<span class="op" id="4678050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678054"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678055">.</span><span class="ident" id="4678056">matchcap</span><span class="op" id="4678064">[</span><span class="ident" id="4678065"><a href="/regexp/exec.go.html#4678028">i</a></span><span class="op" id="4678066">]</span>&nbsp;<span class="op" id="4678068">=</span>&nbsp;<span class="op" id="4678070">-</span><span class="num" id="4678071">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678077">r</span><span class="op" id="4678078">,</span>&nbsp;<span class="ident" id="4678080">r1</span>&nbsp;<span class="op" id="4678083">:=</span>&nbsp;<span class="ident" id="4678086"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><span class="op" id="4678095">,</span>&nbsp;<span class="ident" id="4678097"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678108">width</span><span class="op" id="4678113">,</span>&nbsp;<span class="ident" id="4678115">width1</span>&nbsp;<span class="op" id="4678122">:=</span>&nbsp;<span class="num" id="4678125">0</span><span class="op" id="4678126">,</span>&nbsp;<span class="num" id="4678128">0</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678131"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4678132">,</span>&nbsp;<span class="ident" id="4678134"><a href="/regexp/exec.go.html#4678108">width</a></span>&nbsp;<span class="op" id="4678140">=</span>&nbsp;<span class="ident" id="4678142"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678143">.</span><span class="ident" id="4678144">step</span><span class="op" id="4678148">(</span><span class="ident" id="4678149"><a href="/regexp/exec.go.html#4677894">pos</a></span><span class="op" id="4678152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678155">if</span>&nbsp;<span class="ident" id="4678158"><a href="/regexp/exec.go.html#4678077">r</a></span>&nbsp;<span class="op" id="4678160">!=</span>&nbsp;<span class="ident" id="4678163"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span>&nbsp;<span class="op" id="4678173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678177"><a href="/regexp/exec.go.html#4678080">r1</a></span><span class="op" id="4678179">,</span>&nbsp;<span class="ident" id="4678181"><a href="/regexp/exec.go.html#4678115">width1</a></span>&nbsp;<span class="op" id="4678188">=</span>&nbsp;<span class="ident" id="4678190"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678191">.</span><span class="ident" id="4678192">step</span><span class="op" id="4678196">(</span><span class="ident" id="4678197"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4678201">+</span>&nbsp;<span class="ident" id="4678203"><a href="/regexp/exec.go.html#4678108">width</a></span><span class="op" id="4678208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678214">var</span>&nbsp;<span class="ident" id="4678218">flag</span>&nbsp;<span class="ident" id="4678223"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4678229">.</span><span class="ident" id="4678230">EmptyOp</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678239">if</span>&nbsp;<span class="ident" id="4678242"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4678246">==</span>&nbsp;<span class="num" id="4678249">0</span>&nbsp;<span class="op" id="4678251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678255"><a href="/regexp/exec.go.html#4678218">flag</a></span>&nbsp;<span class="op" id="4678260">=</span>&nbsp;<span class="ident" id="4678262"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4678268">.</span><span class="ident" id="4678269">EmptyOpContext</span><span class="op" id="4678283">(</span><span class="op" id="4678284">-</span><span class="num" id="4678285">1</span><span class="op" id="4678286">,</span>&nbsp;<span class="ident" id="4678288"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4678289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678292">}</span>&nbsp;<span class="keyword" id="4678294">else</span>&nbsp;<span class="op" id="4678299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678303"><a href="/regexp/exec.go.html#4678218">flag</a></span>&nbsp;<span class="op" id="4678308">=</span>&nbsp;<span class="ident" id="4678310"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678311">.</span><span class="ident" id="4678312">context</span><span class="op" id="4678319">(</span><span class="ident" id="4678320"><a href="/regexp/exec.go.html#4677894">pos</a></span><span class="op" id="4678323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678326">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678329">pc</span>&nbsp;<span class="op" id="4678332">:=</span>&nbsp;<span class="ident" id="4678335"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678336">.</span><span class="ident" id="4678337">op</span><span class="op" id="4678339">.</span><span class="ident" id="4678340">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678347">inst</span>&nbsp;<span class="op" id="4678352">:=</span>&nbsp;<span class="ident" id="4678355"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678356">.</span><span class="ident" id="4678357">op</span><span class="op" id="4678359">.</span><span class="ident" id="4678360">Inst</span><span class="op" id="4678364">[</span><span class="ident" id="4678365"><a href="/regexp/exec.go.html#4678329">pc</a></span><span class="op" id="4678367">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4678370">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;simple&nbsp;literal&nbsp;prefix,&nbsp;skip&nbsp;over&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678425">if</span>&nbsp;<span class="ident" id="4678428"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4678432">==</span>&nbsp;<span class="num" id="4678435">0</span>&nbsp;<span class="op" id="4678437">&amp;&amp;</span>&nbsp;<span class="ident" id="4678440"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4678446">.</span><span class="ident" id="4678447">EmptyOp</span><span class="op" id="4678454">(</span><span class="ident" id="4678455"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4678459">.</span><span class="ident" id="4678460">Arg</span><span class="op" id="4678463">)</span><span class="op" id="4678464">&amp;^</span><span class="ident" id="4678466"><a href="/regexp/exec.go.html#4678218">flag</a></span>&nbsp;<span class="op" id="4678471">==</span>&nbsp;<span class="num" id="4678474">0</span>&nbsp;<span class="op" id="4678476">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4678481">len</span><span class="op" id="4678484">(</span><span class="ident" id="4678485"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678486">.</span><span class="ident" id="4678487">re</span><span class="op" id="4678489">.</span><span class="ident" id="4678490">prefix</span><span class="op" id="4678496">)</span>&nbsp;<span class="op" id="4678498">&gt;</span>&nbsp;<span class="num" id="4678500">0</span>&nbsp;<span class="op" id="4678502">&amp;&amp;</span>&nbsp;<span class="ident" id="4678505"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678506">.</span><span class="ident" id="4678507">canCheckPrefix</span><span class="op" id="4678521">(</span><span class="op" id="4678522">)</span>&nbsp;<span class="op" id="4678524">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4678528">//&nbsp;Match&nbsp;requires&nbsp;literal&nbsp;prefix;&nbsp;fast&nbsp;search&nbsp;for&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678584">if</span>&nbsp;<span class="ident" id="4678587"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678588">.</span><span class="ident" id="4678589">hasPrefix</span><span class="op" id="4678598">(</span><span class="ident" id="4678599"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678600">.</span><span class="ident" id="4678601">re</span><span class="op" id="4678603">)</span>&nbsp;<span class="op" id="4678605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678610"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4678614">+=</span>&nbsp;<span class="builtinfunc" id="4678617">len</span><span class="op" id="4678620">(</span><span class="ident" id="4678621"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678622">.</span><span class="ident" id="4678623">re</span><span class="op" id="4678625">.</span><span class="ident" id="4678626">prefix</span><span class="op" id="4678632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678637"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4678638">,</span>&nbsp;<span class="ident" id="4678640"><a href="/regexp/exec.go.html#4678108">width</a></span>&nbsp;<span class="op" id="4678646">=</span>&nbsp;<span class="ident" id="4678648"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678649">.</span><span class="ident" id="4678650">step</span><span class="op" id="4678654">(</span><span class="ident" id="4678655"><a href="/regexp/exec.go.html#4677894">pos</a></span><span class="op" id="4678658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678663"><a href="/regexp/exec.go.html#4678080">r1</a></span><span class="op" id="4678665">,</span>&nbsp;<span class="ident" id="4678667"><a href="/regexp/exec.go.html#4678115">width1</a></span>&nbsp;<span class="op" id="4678674">=</span>&nbsp;<span class="ident" id="4678676"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678677">.</span><span class="ident" id="4678678">step</span><span class="op" id="4678682">(</span><span class="ident" id="4678683"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4678687">+</span>&nbsp;<span class="ident" id="4678689"><a href="/regexp/exec.go.html#4678108">width</a></span><span class="op" id="4678694">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678699"><a href="/regexp/exec.go.html#4678218">flag</a></span>&nbsp;<span class="op" id="4678704">=</span>&nbsp;<span class="ident" id="4678706"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4678707">.</span><span class="ident" id="4678708">context</span><span class="op" id="4678715">(</span><span class="ident" id="4678716"><a href="/regexp/exec.go.html#4677894">pos</a></span><span class="op" id="4678719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678724"><a href="/regexp/exec.go.html#4678329">pc</a></span>&nbsp;<span class="op" id="4678727">=</span>&nbsp;<span class="builtintype" id="4678729">int</span><span class="op" id="4678732">(</span><span class="ident" id="4678733"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678734">.</span><span class="ident" id="4678735">re</span><span class="op" id="4678737">.</span><span class="ident" id="4678738">prefixEnd</span><span class="op" id="4678747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678751">}</span>&nbsp;<span class="keyword" id="4678753">else</span>&nbsp;<span class="op" id="4678758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678763">return</span>&nbsp;<span class="ident" id="4678770"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678771">.</span><span class="ident" id="4678772">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678782">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4678785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678788">for</span>&nbsp;<span class="op" id="4678792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678796"><a href="/regexp/exec.go.html#4678347">inst</a></span>&nbsp;<span class="op" id="4678801">=</span>&nbsp;<span class="ident" id="4678803"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678804">.</span><span class="ident" id="4678805">op</span><span class="op" id="4678807">.</span><span class="ident" id="4678808">Inst</span><span class="op" id="4678812">[</span><span class="ident" id="4678813"><a href="/regexp/exec.go.html#4678329">pc</a></span><span class="op" id="4678815">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678819"><a href="/regexp/exec.go.html#4678329">pc</a></span>&nbsp;<span class="op" id="4678822">=</span>&nbsp;<span class="builtintype" id="4678824">int</span><span class="op" id="4678827">(</span><span class="ident" id="4678828"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4678832">.</span><span class="ident" id="4678833">Out</span><span class="op" id="4678836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678840">switch</span>&nbsp;<span class="ident" id="4678847"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4678851">.</span><span class="ident" id="4678852">Op</span>&nbsp;<span class="op" id="4678855">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678859">default</span><span class="op" id="4678866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4678871">panic</span><span class="op" id="4678876">(</span><span class="string" id="4678877">&#34;bad&nbsp;inst&#34;</span><span class="op" id="4678887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678891">case</span>&nbsp;<span class="ident" id="4678896"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4678902">.</span><span class="ident" id="4678903">InstMatch</span><span class="op" id="4678912">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678917"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678918">.</span><span class="ident" id="4678919">matched</span>&nbsp;<span class="op" id="4678927">=</span>&nbsp;<span class="ident" id="4678929">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4678937">if</span>&nbsp;<span class="builtinfunc" id="4678940">len</span><span class="op" id="4678943">(</span><span class="ident" id="4678944"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678945">.</span><span class="ident" id="4678946">matchcap</span><span class="op" id="4678954">)</span>&nbsp;<span class="op" id="4678956">&gt;</span>&nbsp;<span class="num" id="4678958">0</span>&nbsp;<span class="op" id="4678960">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678966"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678967">.</span><span class="ident" id="4678968">matchcap</span><span class="op" id="4678976">[</span><span class="num" id="4678977">0</span><span class="op" id="4678978">]</span>&nbsp;<span class="op" id="4678980">=</span>&nbsp;<span class="num" id="4678982">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4678988"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4678989">.</span><span class="ident" id="4678990">matchcap</span><span class="op" id="4678998">[</span><span class="num" id="4678999">1</span><span class="op" id="4679000">]</span>&nbsp;<span class="op" id="4679002">=</span>&nbsp;<span class="ident" id="4679004"><a href="/regexp/exec.go.html#4677894">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679016">return</span>&nbsp;<span class="ident" id="4679023"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679024">.</span><span class="ident" id="4679025">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679035">case</span>&nbsp;<span class="ident" id="4679040"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679046">.</span><span class="ident" id="4679047">InstRune</span><span class="op" id="4679055">:</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679060">if</span>&nbsp;<span class="op" id="4679063">!</span><span class="ident" id="4679064"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4679068">.</span><span class="ident" id="4679069">MatchRune</span><span class="op" id="4679078">(</span><span class="ident" id="4679079"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4679080">)</span>&nbsp;<span class="op" id="4679082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679088">return</span>&nbsp;<span class="ident" id="4679095"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679096">.</span><span class="ident" id="4679097">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679112">case</span>&nbsp;<span class="ident" id="4679117"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679123">.</span><span class="ident" id="4679124">InstRune1</span><span class="op" id="4679133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679138">if</span>&nbsp;<span class="ident" id="4679141"><a href="/regexp/exec.go.html#4678077">r</a></span>&nbsp;<span class="op" id="4679143">!=</span>&nbsp;<span class="ident" id="4679146"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4679150">.</span><span class="ident" id="4679151">Rune</span><span class="op" id="4679155">[</span><span class="num" id="4679156">0</span><span class="op" id="4679157">]</span>&nbsp;<span class="op" id="4679159">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679165">return</span>&nbsp;<span class="ident" id="4679172"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679173">.</span><span class="ident" id="4679174">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679189">case</span>&nbsp;<span class="ident" id="4679194"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679200">.</span><span class="ident" id="4679201">InstRuneAny</span><span class="op" id="4679212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4679217">//&nbsp;Nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679230">case</span>&nbsp;<span class="ident" id="4679235"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679241">.</span><span class="ident" id="4679242">InstRuneAnyNotNL</span><span class="op" id="4679258">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679263">if</span>&nbsp;<span class="ident" id="4679266"><a href="/regexp/exec.go.html#4678077">r</a></span>&nbsp;<span class="op" id="4679268">==</span>&nbsp;<span class="string" id="4679271">&#39;\n&#39;</span>&nbsp;<span class="op" id="4679276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679282">return</span>&nbsp;<span class="ident" id="4679289"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679290">.</span><span class="ident" id="4679291">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4679306">//&nbsp;peek&nbsp;at&nbsp;the&nbsp;input&nbsp;rune&nbsp;to&nbsp;see&nbsp;which&nbsp;branch&nbsp;of&nbsp;the&nbsp;Alt&nbsp;to&nbsp;take</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679373">case</span>&nbsp;<span class="ident" id="4679378"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679384">.</span><span class="ident" id="4679385">InstAlt</span><span class="op" id="4679392">,</span>&nbsp;<span class="ident" id="4679394"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679400">.</span><span class="ident" id="4679401">InstAltMatch</span><span class="op" id="4679413">:</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4679418"><a href="/regexp/exec.go.html#4678329">pc</a></span>&nbsp;<span class="op" id="4679421">=</span>&nbsp;<span class="builtintype" id="4679423">int</span><span class="op" id="4679426">(</span><span class="ident" id="4679427"><a href="/regexp/onepass.go.html#4683270">onePassNext</a></span><span class="op" id="4679438">(</span><span class="op" id="4679439">&amp;</span><span class="ident" id="4679440"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4679444">,</span>&nbsp;<span class="ident" id="4679446"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4679447">)</span><span class="op" id="4679448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679453">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679464">case</span>&nbsp;<span class="ident" id="4679469"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679475">.</span><span class="ident" id="4679476">InstFail</span><span class="op" id="4679484">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679489">return</span>&nbsp;<span class="ident" id="4679496"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679497">.</span><span class="ident" id="4679498">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679508">case</span>&nbsp;<span class="ident" id="4679513"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679519">.</span><span class="ident" id="4679520">InstNop</span><span class="op" id="4679527">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679532">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679543">case</span>&nbsp;<span class="ident" id="4679548"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679554">.</span><span class="ident" id="4679555">InstEmptyWidth</span><span class="op" id="4679569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679574">if</span>&nbsp;<span class="ident" id="4679577"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679583">.</span><span class="ident" id="4679584">EmptyOp</span><span class="op" id="4679591">(</span><span class="ident" id="4679592"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4679596">.</span><span class="ident" id="4679597">Arg</span><span class="op" id="4679600">)</span><span class="op" id="4679601">&amp;^</span><span class="ident" id="4679603"><a href="/regexp/exec.go.html#4678218">flag</a></span>&nbsp;<span class="op" id="4679608">!=</span>&nbsp;<span class="num" id="4679611">0</span>&nbsp;<span class="op" id="4679613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679619">return</span>&nbsp;<span class="ident" id="4679626"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679627">.</span><span class="ident" id="4679628">matched</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679639">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679644">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679655">case</span>&nbsp;<span class="ident" id="4679660"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679666">.</span><span class="ident" id="4679667">InstCapture</span><span class="op" id="4679678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679683">if</span>&nbsp;<span class="builtintype" id="4679686">int</span><span class="op" id="4679689">(</span><span class="ident" id="4679690"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4679694">.</span><span class="ident" id="4679695">Arg</span><span class="op" id="4679698">)</span>&nbsp;<span class="op" id="4679700">&lt;</span>&nbsp;<span class="builtinfunc" id="4679702">len</span><span class="op" id="4679705">(</span><span class="ident" id="4679706"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679707">.</span><span class="ident" id="4679708">matchcap</span><span class="op" id="4679716">)</span>&nbsp;<span class="op" id="4679718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4679724"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679725">.</span><span class="ident" id="4679726">matchcap</span><span class="op" id="4679734">[</span><span class="ident" id="4679735"><a href="/regexp/exec.go.html#4678347">inst</a></span><span class="op" id="4679739">.</span><span class="ident" id="4679740">Arg</span><span class="op" id="4679743">]</span>&nbsp;<span class="op" id="4679745">=</span>&nbsp;<span class="ident" id="4679747"><a href="/regexp/exec.go.html#4677894">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679754">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679759">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679774">if</span>&nbsp;<span class="ident" id="4679777"><a href="/regexp/exec.go.html#4678108">width</a></span>&nbsp;<span class="op" id="4679783">==</span>&nbsp;<span class="num" id="4679786">0</span>&nbsp;<span class="op" id="4679788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679793">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679801">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4679805"><a href="/regexp/exec.go.html#4678218">flag</a></span>&nbsp;<span class="op" id="4679810">=</span>&nbsp;<span class="ident" id="4679812"><a href="/regexp/exec.go.html#4670078">syntax</a></span><span class="op" id="4679818">.</span><span class="ident" id="4679819">EmptyOpContext</span><span class="op" id="4679833">(</span><span class="ident" id="4679834"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4679835">,</span>&nbsp;<span class="ident" id="4679837"><a href="/regexp/exec.go.html#4678080">r1</a></span><span class="op" id="4679839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4679843"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4679847">+=</span>&nbsp;<span class="ident" id="4679850"><a href="/regexp/exec.go.html#4678108">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4679858"><a href="/regexp/exec.go.html#4678077">r</a></span><span class="op" id="4679859">,</span>&nbsp;<span class="ident" id="4679861"><a href="/regexp/exec.go.html#4678108">width</a></span>&nbsp;<span class="op" id="4679867">=</span>&nbsp;<span class="ident" id="4679869"><a href="/regexp/exec.go.html#4678080">r1</a></span><span class="op" id="4679871">,</span>&nbsp;<span class="ident" id="4679873"><a href="/regexp/exec.go.html#4678115">width1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679882">if</span>&nbsp;<span class="ident" id="4679885"><a href="/regexp/exec.go.html#4678077">r</a></span>&nbsp;<span class="op" id="4679887">!=</span>&nbsp;<span class="ident" id="4679890"><a href="/regexp/regexp.go.html#4706366">endOfText</a></span>&nbsp;<span class="op" id="4679900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4679905"><a href="/regexp/exec.go.html#4678080">r1</a></span><span class="op" id="4679907">,</span>&nbsp;<span class="ident" id="4679909"><a href="/regexp/exec.go.html#4678115">width1</a></span>&nbsp;<span class="op" id="4679916">=</span>&nbsp;<span class="ident" id="4679918"><a href="/regexp/exec.go.html#4677885">i</a></span><span class="op" id="4679919">.</span><span class="ident" id="4679920">step</span><span class="op" id="4679924">(</span><span class="ident" id="4679925"><a href="/regexp/exec.go.html#4677894">pos</a></span>&nbsp;<span class="op" id="4679929">+</span>&nbsp;<span class="ident" id="4679931"><a href="/regexp/exec.go.html#4678108">width</a></span><span class="op" id="4679936">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4679943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4679946">return</span>&nbsp;<span class="ident" id="4679953"><a href="/regexp/exec.go.html#4677865">m</a></span><span class="op" id="4679954">.</span><span class="ident" id="4679955">matched</span><br>
<span class="lineno"></span><span class="op" id="4679963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="4679966">//&nbsp;empty&nbsp;is&nbsp;a&nbsp;non-nil&nbsp;0-element&nbsp;slice,</span><br>
<span class="lineno"></span><span class="comment" id="4680005">//&nbsp;so&nbsp;doExecute&nbsp;can&nbsp;avoid&nbsp;an&nbsp;allocation</span><br>
<span class="lineno"></span><span class="comment" id="4680045">//&nbsp;when&nbsp;0&nbsp;captures&nbsp;are&nbsp;requested&nbsp;from&nbsp;a&nbsp;successful&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4680103">var</span>&nbsp;<span class="ident" id="4680107">empty</span>&nbsp;<span class="op" id="4680113">=</span>&nbsp;<span class="builtinfunc" id="4680115">make</span><span class="op" id="4680119">(</span><span class="op" id="4680120">[</span><span class="op" id="4680121">]</span><span class="builtintype" id="4680122">int</span><span class="op" id="4680125">,</span>&nbsp;<span class="num" id="4680127">0</span><span class="op" id="4680128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="4680131">//&nbsp;doExecute&nbsp;finds&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;the&nbsp;input&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4680194">//&nbsp;the&nbsp;position&nbsp;of&nbsp;its&nbsp;subexpressions.</span><br>
<span class="lineno"></span><span class="keyword" id="4680233">func</span>&nbsp;<span class="op" id="4680238">(</span><span class="ident" id="4680239">re</span>&nbsp;<span class="op" id="4680242">*</span><span class="ident" id="4680243"><a href="/regexp/regexp.go.html#4700285">Regexp</a></span><span class="op" id="4680249">)</span>&nbsp;<span class="ident" id="4680251">doExecute</span><span class="op" id="4680260">(</span><span class="ident" id="4680261">r</span>&nbsp;<span class="ident" id="4680263"><a href="/regexp/exec.go.html#4670072">io</a></span><span class="op" id="4680265">.</span><span class="ident" id="4680266">RuneReader</span><span class="op" id="4680276">,</span>&nbsp;<span class="ident" id="4680278">b</span>&nbsp;<span class="op" id="4680280">[</span><span class="op" id="4680281">]</span><span class="builtintype" id="4680282">byte</span><span class="op" id="4680286">,</span>&nbsp;<span class="ident" id="4680288">s</span>&nbsp;<span class="builtintype" id="4680290">string</span><span class="op" id="4680296">,</span>&nbsp;<span class="ident" id="4680298">pos</span>&nbsp;<span class="builtintype" id="4680302">int</span><span class="op" id="4680305">,</span>&nbsp;<span class="ident" id="4680307">ncap</span>&nbsp;<span class="builtintype" id="4680312">int</span><span class="op" id="4680315">)</span>&nbsp;<span class="op" id="4680317">[</span><span class="op" id="4680318">]</span><span class="builtintype" id="4680319">int</span>&nbsp;<span class="op" id="4680323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680326">m</span>&nbsp;<span class="op" id="4680328">:=</span>&nbsp;<span class="ident" id="4680331"><a href="/regexp/exec.go.html#4680239">re</a></span><span class="op" id="4680333">.</span><span class="ident" id="4680334">get</span><span class="op" id="4680337">(</span><span class="op" id="4680338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680341">var</span>&nbsp;<span class="ident" id="4680345">i</span>&nbsp;<span class="ident" id="4680347"><a href="/regexp/regexp.go.html#4706496">input</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680354">if</span>&nbsp;<span class="ident" id="4680357"><a href="/regexp/exec.go.html#4680261">r</a></span>&nbsp;<span class="op" id="4680359">!=</span>&nbsp;<span class="ident" id="4680362">nil</span>&nbsp;<span class="op" id="4680366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680370"><a href="/regexp/exec.go.html#4680345">i</a></span>&nbsp;<span class="op" id="4680372">=</span>&nbsp;<span class="ident" id="4680374"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680375">.</span><span class="ident" id="4680376">newInputReader</span><span class="op" id="4680390">(</span><span class="ident" id="4680391"><a href="/regexp/exec.go.html#4680261">r</a></span><span class="op" id="4680392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680395">}</span>&nbsp;<span class="keyword" id="4680397">else</span>&nbsp;<span class="keyword" id="4680402">if</span>&nbsp;<span class="ident" id="4680405"><a href="/regexp/exec.go.html#4680278">b</a></span>&nbsp;<span class="op" id="4680407">!=</span>&nbsp;<span class="ident" id="4680410">nil</span>&nbsp;<span class="op" id="4680414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680418"><a href="/regexp/exec.go.html#4680345">i</a></span>&nbsp;<span class="op" id="4680420">=</span>&nbsp;<span class="ident" id="4680422"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680423">.</span><span class="ident" id="4680424">newInputBytes</span><span class="op" id="4680437">(</span><span class="ident" id="4680438"><a href="/regexp/exec.go.html#4680278">b</a></span><span class="op" id="4680439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680442">}</span>&nbsp;<span class="keyword" id="4680444">else</span>&nbsp;<span class="op" id="4680449">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680453"><a href="/regexp/exec.go.html#4680345">i</a></span>&nbsp;<span class="op" id="4680455">=</span>&nbsp;<span class="ident" id="4680457"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680458">.</span><span class="ident" id="4680459">newInputString</span><span class="op" id="4680473">(</span><span class="ident" id="4680474"><a href="/regexp/exec.go.html#4680288">s</a></span><span class="op" id="4680475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680481">if</span>&nbsp;<span class="ident" id="4680484"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680485">.</span><span class="ident" id="4680486">op</span>&nbsp;<span class="op" id="4680489">!=</span>&nbsp;<span class="ident" id="4680492"><a href="/regexp/onepass.go.html#4695431">notOnePass</a></span>&nbsp;<span class="op" id="4680503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680507">if</span>&nbsp;<span class="op" id="4680510">!</span><span class="ident" id="4680511"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680512">.</span><span class="ident" id="4680513">onepass</span><span class="op" id="4680520">(</span><span class="ident" id="4680521"><a href="/regexp/exec.go.html#4680345">i</a></span><span class="op" id="4680522">,</span>&nbsp;<span class="ident" id="4680524"><a href="/regexp/exec.go.html#4680298">pos</a></span><span class="op" id="4680527">)</span>&nbsp;<span class="op" id="4680529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680534"><a href="/regexp/exec.go.html#4680239">re</a></span><span class="op" id="4680536">.</span><span class="ident" id="4680537">put</span><span class="op" id="4680540">(</span><span class="ident" id="4680541"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680542">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680547">return</span>&nbsp;<span class="ident" id="4680554">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680563">}</span>&nbsp;<span class="keyword" id="4680565">else</span>&nbsp;<span class="op" id="4680570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680574"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680575">.</span><span class="ident" id="4680576">init</span><span class="op" id="4680580">(</span><span class="ident" id="4680581"><a href="/regexp/exec.go.html#4680307">ncap</a></span><span class="op" id="4680585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680589">if</span>&nbsp;<span class="op" id="4680592">!</span><span class="ident" id="4680593"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680594">.</span><span class="ident" id="4680595">match</span><span class="op" id="4680600">(</span><span class="ident" id="4680601"><a href="/regexp/exec.go.html#4680345">i</a></span><span class="op" id="4680602">,</span>&nbsp;<span class="ident" id="4680604"><a href="/regexp/exec.go.html#4680298">pos</a></span><span class="op" id="4680607">)</span>&nbsp;<span class="op" id="4680609">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680614"><a href="/regexp/exec.go.html#4680239">re</a></span><span class="op" id="4680616">.</span><span class="ident" id="4680617">put</span><span class="op" id="4680620">(</span><span class="ident" id="4680621"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680627">return</span>&nbsp;<span class="ident" id="4680634">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680646">if</span>&nbsp;<span class="ident" id="4680649"><a href="/regexp/exec.go.html#4680307">ncap</a></span>&nbsp;<span class="op" id="4680654">==</span>&nbsp;<span class="num" id="4680657">0</span>&nbsp;<span class="op" id="4680659">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680663"><a href="/regexp/exec.go.html#4680239">re</a></span><span class="op" id="4680665">.</span><span class="ident" id="4680666">put</span><span class="op" id="4680669">(</span><span class="ident" id="4680670"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680675">return</span>&nbsp;<span class="ident" id="4680682"><a href="/regexp/exec.go.html#4680107">empty</a></span>&nbsp;<span class="comment" id="4680688">//&nbsp;empty&nbsp;but&nbsp;not&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4680710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4680713">cap</span>&nbsp;<span class="op" id="4680717">:=</span>&nbsp;<span class="builtinfunc" id="4680720">make</span><span class="op" id="4680724">(</span><span class="op" id="4680725">[</span><span class="op" id="4680726">]</span><span class="builtintype" id="4680727">int</span><span class="op" id="4680730">,</span>&nbsp;<span class="builtinfunc" id="4680732">len</span><span class="op" id="4680735">(</span><span class="ident" id="4680736"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680737">.</span><span class="ident" id="4680738">matchcap</span><span class="op" id="4680746">)</span><span class="op" id="4680747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4680750">copy</span><span class="op" id="4680754">(</span><span class="builtinfunc" id="4680755"><a href="/regexp/exec.go.html#4680713">cap</a></span><span class="op" id="4680758">,</span>&nbsp;<span class="ident" id="4680760"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680761">.</span><span class="ident" id="4680762">matchcap</span><span class="op" id="4680770">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4680773"><a href="/regexp/exec.go.html#4680239">re</a></span><span class="op" id="4680775">.</span><span class="ident" id="4680776">put</span><span class="op" id="4680779">(</span><span class="ident" id="4680780"><a href="/regexp/exec.go.html#4680326">m</a></span><span class="op" id="4680781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4680784">return</span>&nbsp;<span class="builtinfunc" id="4680791"><a href="/regexp/exec.go.html#4680713">cap</a></span><br>
<span class="lineno"></span><span class="op" id="4680795">}</span>
</div>
</body>
</html>
