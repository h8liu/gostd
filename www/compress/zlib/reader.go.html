<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5695615">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5695670">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5695724">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5695775">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5696218">package</span>&nbsp;<span class="ident" id="5696226">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5696232">import</span>&nbsp;<span class="op" id="5696239">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696242">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696251">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696269">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696279">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696287">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5696303">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5696308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5696311">const</span>&nbsp;<span class="ident" id="5696317">zlibDeflate</span>&nbsp;<span class="op" id="5696329">=</span>&nbsp;<span class="num" id="5696331">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5696334">var</span>&nbsp;<span class="op" id="5696338">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5696341">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696422">ErrChecksum</span>&nbsp;<span class="op" id="5696434">=</span>&nbsp;<span class="ident" id="5696436">errors</span><span class="op" id="5696442">.</span><span class="ident" id="5696443">New</span><span class="op" id="5696446">(</span><span class="string" id="5696447">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5696471">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5696474">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696559">ErrDictionary</span>&nbsp;<span class="op" id="5696573">=</span>&nbsp;<span class="ident" id="5696575">errors</span><span class="op" id="5696581">.</span><span class="ident" id="5696582">New</span><span class="op" id="5696585">(</span><span class="string" id="5696586">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5696612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5696615">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696692">ErrHeader</span>&nbsp;<span class="op" id="5696702">=</span>&nbsp;<span class="ident" id="5696704">errors</span><span class="op" id="5696710">.</span><span class="ident" id="5696711">New</span><span class="op" id="5696714">(</span><span class="string" id="5696715">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5696737">)</span><br>
<span class="lineno"></span><span class="op" id="5696739">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5696742">type</span>&nbsp;<span class="ident" id="5696747">reader</span>&nbsp;<span class="keyword" id="5696754">struct</span>&nbsp;<span class="op" id="5696761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696764">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5696777">flate</span><span class="op" id="5696782">.</span><span class="ident" id="5696783">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696791">decompressor</span>&nbsp;<span class="ident" id="5696804">io</span><span class="op" id="5696806">.</span><span class="ident" id="5696807">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696819">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5696832">hash</span><span class="op" id="5696836">.</span><span class="ident" id="5696837">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696845">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5696858">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696865">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5696878">[</span><span class="num" id="5696879">4</span><span class="op" id="5696880">]</span><span class="builtintype" id="5696881">byte</span><br>
<span class="lineno"></span><span class="op" id="5696886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5696889">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5696963">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5697038">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5697074">type</span>&nbsp;<span class="ident" id="5697079">Resetter</span>&nbsp;<span class="keyword" id="5697088">interface</span>&nbsp;<span class="op" id="5697098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5697101">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5697175">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697220">Reset</span><span class="op" id="5697225">(</span><span class="ident" id="5697226">r</span>&nbsp;<span class="ident" id="5697228">io</span><span class="op" id="5697230">.</span><span class="ident" id="5697231">Reader</span><span class="op" id="5697237">,</span>&nbsp;<span class="ident" id="5697239">dict</span>&nbsp;<span class="op" id="5697244">[</span><span class="op" id="5697245">]</span><span class="builtintype" id="5697246">byte</span><span class="op" id="5697250">)</span>&nbsp;<span class="builtintype" id="5697252">error</span><br>
<span class="lineno"></span><span class="op" id="5697258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5697261">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5697300">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5697371">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5697453">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5697533">//</span><br>
<span class="lineno"></span><span class="comment" id="5697536">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5697602">func</span>&nbsp;<span class="ident" id="5697607">NewReader</span><span class="op" id="5697616">(</span><span class="ident" id="5697617">r</span>&nbsp;<span class="ident" id="5697619">io</span><span class="op" id="5697621">.</span><span class="ident" id="5697622">Reader</span><span class="op" id="5697628">)</span>&nbsp;<span class="op" id="5697630">(</span><span class="ident" id="5697631">io</span><span class="op" id="5697633">.</span><span class="ident" id="5697634">ReadCloser</span><span class="op" id="5697644">,</span>&nbsp;<span class="builtintype" id="5697646">error</span><span class="op" id="5697651">)</span>&nbsp;<span class="op" id="5697653">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697656">return</span>&nbsp;<span class="ident" id="5697663">NewReaderDict</span><span class="op" id="5697676">(</span><span class="ident" id="5697677">r</span><span class="op" id="5697678">,</span>&nbsp;<span class="ident" id="5697680">nil</span><span class="op" id="5697683">)</span><br>
<span class="lineno"></span><span class="op" id="5697685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5697688">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5697753">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5697838">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5697935">//</span><br>
<span class="lineno"></span><span class="comment" id="5697938">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5698008">func</span>&nbsp;<span class="ident" id="5698013">NewReaderDict</span><span class="op" id="5698026">(</span><span class="ident" id="5698027">r</span>&nbsp;<span class="ident" id="5698029">io</span><span class="op" id="5698031">.</span><span class="ident" id="5698032">Reader</span><span class="op" id="5698038">,</span>&nbsp;<span class="ident" id="5698040">dict</span>&nbsp;<span class="op" id="5698045">[</span><span class="op" id="5698046">]</span><span class="builtintype" id="5698047">byte</span><span class="op" id="5698051">)</span>&nbsp;<span class="op" id="5698053">(</span><span class="ident" id="5698054">io</span><span class="op" id="5698056">.</span><span class="ident" id="5698057">ReadCloser</span><span class="op" id="5698067">,</span>&nbsp;<span class="builtintype" id="5698069">error</span><span class="op" id="5698074">)</span>&nbsp;<span class="op" id="5698076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698079">z</span>&nbsp;<span class="op" id="5698081">:=</span>&nbsp;<span class="builtinfunc" id="5698084">new</span><span class="op" id="5698087">(</span><span class="ident" id="5698088">reader</span><span class="op" id="5698094">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698097">err</span>&nbsp;<span class="op" id="5698101">:=</span>&nbsp;<span class="ident" id="5698104">z</span><span class="op" id="5698105">.</span><span class="ident" id="5698106">Reset</span><span class="op" id="5698111">(</span><span class="ident" id="5698112">r</span><span class="op" id="5698113">,</span>&nbsp;<span class="ident" id="5698115">dict</span><span class="op" id="5698119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698122">if</span>&nbsp;<span class="ident" id="5698125">err</span>&nbsp;<span class="op" id="5698129">!=</span>&nbsp;<span class="ident" id="5698132">nil</span>&nbsp;<span class="op" id="5698136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698140">return</span>&nbsp;<span class="ident" id="5698147">nil</span><span class="op" id="5698150">,</span>&nbsp;<span class="ident" id="5698152">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698160">return</span>&nbsp;<span class="ident" id="5698167">z</span><span class="op" id="5698168">,</span>&nbsp;<span class="ident" id="5698170">nil</span><br>
<span class="lineno">85</span><span class="op" id="5698174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5698177">func</span>&nbsp;<span class="op" id="5698182">(</span><span class="ident" id="5698183">z</span>&nbsp;<span class="op" id="5698185">*</span><span class="ident" id="5698186">reader</span><span class="op" id="5698192">)</span>&nbsp;<span class="ident" id="5698194">Read</span><span class="op" id="5698198">(</span><span class="ident" id="5698199">p</span>&nbsp;<span class="op" id="5698201">[</span><span class="op" id="5698202">]</span><span class="builtintype" id="5698203">byte</span><span class="op" id="5698207">)</span>&nbsp;<span class="op" id="5698209">(</span><span class="ident" id="5698210">n</span>&nbsp;<span class="builtintype" id="5698212">int</span><span class="op" id="5698215">,</span>&nbsp;<span class="ident" id="5698217">err</span>&nbsp;<span class="builtintype" id="5698221">error</span><span class="op" id="5698226">)</span>&nbsp;<span class="op" id="5698228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698231">if</span>&nbsp;<span class="ident" id="5698234">z</span><span class="op" id="5698235">.</span><span class="ident" id="5698236">err</span>&nbsp;<span class="op" id="5698240">!=</span>&nbsp;<span class="ident" id="5698243">nil</span>&nbsp;<span class="op" id="5698247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698251">return</span>&nbsp;<span class="num" id="5698258">0</span><span class="op" id="5698259">,</span>&nbsp;<span class="ident" id="5698261">z</span><span class="op" id="5698262">.</span><span class="ident" id="5698263">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698271">if</span>&nbsp;<span class="builtinfunc" id="5698274">len</span><span class="op" id="5698277">(</span><span class="ident" id="5698278">p</span><span class="op" id="5698279">)</span>&nbsp;<span class="op" id="5698281">==</span>&nbsp;<span class="num" id="5698284">0</span>&nbsp;<span class="op" id="5698286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698290">return</span>&nbsp;<span class="num" id="5698297">0</span><span class="op" id="5698298">,</span>&nbsp;<span class="ident" id="5698300">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698309">n</span><span class="op" id="5698310">,</span>&nbsp;<span class="ident" id="5698312">err</span>&nbsp;<span class="op" id="5698316">=</span>&nbsp;<span class="ident" id="5698318">z</span><span class="op" id="5698319">.</span><span class="ident" id="5698320">decompressor</span><span class="op" id="5698332">.</span><span class="ident" id="5698333">Read</span><span class="op" id="5698337">(</span><span class="ident" id="5698338">p</span><span class="op" id="5698339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698342">z</span><span class="op" id="5698343">.</span><span class="ident" id="5698344">digest</span><span class="op" id="5698350">.</span><span class="ident" id="5698351">Write</span><span class="op" id="5698356">(</span><span class="ident" id="5698357">p</span><span class="op" id="5698358">[</span><span class="num" id="5698359">0</span><span class="op" id="5698360">:</span><span class="ident" id="5698361">n</span><span class="op" id="5698362">]</span><span class="op" id="5698363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698366">if</span>&nbsp;<span class="ident" id="5698369">n</span>&nbsp;<span class="op" id="5698371">!=</span>&nbsp;<span class="num" id="5698374">0</span>&nbsp;<span class="op" id="5698376">||</span>&nbsp;<span class="ident" id="5698379">err</span>&nbsp;<span class="op" id="5698383">!=</span>&nbsp;<span class="ident" id="5698386">io</span><span class="op" id="5698388">.</span><span class="ident" id="5698389">EOF</span>&nbsp;<span class="op" id="5698393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698397">z</span><span class="op" id="5698398">.</span><span class="ident" id="5698399">err</span>&nbsp;<span class="op" id="5698403">=</span>&nbsp;<span class="ident" id="5698405">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698411">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698423">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698458">if</span>&nbsp;<span class="ident" id="5698461">_</span><span class="op" id="5698462">,</span>&nbsp;<span class="ident" id="5698464">err</span>&nbsp;<span class="op" id="5698468">:=</span>&nbsp;<span class="ident" id="5698471">io</span><span class="op" id="5698473">.</span><span class="ident" id="5698474">ReadFull</span><span class="op" id="5698482">(</span><span class="ident" id="5698483">z</span><span class="op" id="5698484">.</span><span class="ident" id="5698485">r</span><span class="op" id="5698486">,</span>&nbsp;<span class="ident" id="5698488">z</span><span class="op" id="5698489">.</span><span class="ident" id="5698490">scratch</span><span class="op" id="5698497">[</span><span class="num" id="5698498">0</span><span class="op" id="5698499">:</span><span class="num" id="5698500">4</span><span class="op" id="5698501">]</span><span class="op" id="5698502">)</span><span class="op" id="5698503">;</span>&nbsp;<span class="ident" id="5698505">err</span>&nbsp;<span class="op" id="5698509">!=</span>&nbsp;<span class="ident" id="5698512">nil</span>&nbsp;<span class="op" id="5698516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698520">z</span><span class="op" id="5698521">.</span><span class="ident" id="5698522">err</span>&nbsp;<span class="op" id="5698526">=</span>&nbsp;<span class="ident" id="5698528">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698534">return</span>&nbsp;<span class="num" id="5698541">0</span><span class="op" id="5698542">,</span>&nbsp;<span class="ident" id="5698544">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698552">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698611">checksum</span>&nbsp;<span class="op" id="5698620">:=</span>&nbsp;<span class="builtintype" id="5698623">uint32</span><span class="op" id="5698629">(</span><span class="ident" id="5698630">z</span><span class="op" id="5698631">.</span><span class="ident" id="5698632">scratch</span><span class="op" id="5698639">[</span><span class="num" id="5698640">0</span><span class="op" id="5698641">]</span><span class="op" id="5698642">)</span><span class="op" id="5698643">&lt;&lt;</span><span class="num" id="5698645">24</span>&nbsp;<span class="op" id="5698648">|</span>&nbsp;<span class="builtintype" id="5698650">uint32</span><span class="op" id="5698656">(</span><span class="ident" id="5698657">z</span><span class="op" id="5698658">.</span><span class="ident" id="5698659">scratch</span><span class="op" id="5698666">[</span><span class="num" id="5698667">1</span><span class="op" id="5698668">]</span><span class="op" id="5698669">)</span><span class="op" id="5698670">&lt;&lt;</span><span class="num" id="5698672">16</span>&nbsp;<span class="op" id="5698675">|</span>&nbsp;<span class="builtintype" id="5698677">uint32</span><span class="op" id="5698683">(</span><span class="ident" id="5698684">z</span><span class="op" id="5698685">.</span><span class="ident" id="5698686">scratch</span><span class="op" id="5698693">[</span><span class="num" id="5698694">2</span><span class="op" id="5698695">]</span><span class="op" id="5698696">)</span><span class="op" id="5698697">&lt;&lt;</span><span class="num" id="5698699">8</span>&nbsp;<span class="op" id="5698701">|</span>&nbsp;<span class="builtintype" id="5698703">uint32</span><span class="op" id="5698709">(</span><span class="ident" id="5698710">z</span><span class="op" id="5698711">.</span><span class="ident" id="5698712">scratch</span><span class="op" id="5698719">[</span><span class="num" id="5698720">3</span><span class="op" id="5698721">]</span><span class="op" id="5698722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698725">if</span>&nbsp;<span class="ident" id="5698728">checksum</span>&nbsp;<span class="op" id="5698737">!=</span>&nbsp;<span class="ident" id="5698740">z</span><span class="op" id="5698741">.</span><span class="ident" id="5698742">digest</span><span class="op" id="5698748">.</span><span class="ident" id="5698749">Sum32</span><span class="op" id="5698754">(</span><span class="op" id="5698755">)</span>&nbsp;<span class="op" id="5698757">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698761">z</span><span class="op" id="5698762">.</span><span class="ident" id="5698763">err</span>&nbsp;<span class="op" id="5698767">=</span>&nbsp;<span class="ident" id="5698769">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698783">return</span>&nbsp;<span class="num" id="5698790">0</span><span class="op" id="5698791">,</span>&nbsp;<span class="ident" id="5698793">z</span><span class="op" id="5698794">.</span><span class="ident" id="5698795">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698803">return</span><br>
<span class="lineno"></span><span class="op" id="5698810">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5698813">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5698899">func</span>&nbsp;<span class="op" id="5698904">(</span><span class="ident" id="5698905">z</span>&nbsp;<span class="op" id="5698907">*</span><span class="ident" id="5698908">reader</span><span class="op" id="5698914">)</span>&nbsp;<span class="ident" id="5698916">Close</span><span class="op" id="5698921">(</span><span class="op" id="5698922">)</span>&nbsp;<span class="builtintype" id="5698924">error</span>&nbsp;<span class="op" id="5698930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698933">if</span>&nbsp;<span class="ident" id="5698936">z</span><span class="op" id="5698937">.</span><span class="ident" id="5698938">err</span>&nbsp;<span class="op" id="5698942">!=</span>&nbsp;<span class="ident" id="5698945">nil</span>&nbsp;<span class="op" id="5698949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698953">return</span>&nbsp;<span class="ident" id="5698960">z</span><span class="op" id="5698961">.</span><span class="ident" id="5698962">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698970">z</span><span class="op" id="5698971">.</span><span class="ident" id="5698972">err</span>&nbsp;<span class="op" id="5698976">=</span>&nbsp;<span class="ident" id="5698978">z</span><span class="op" id="5698979">.</span><span class="ident" id="5698980">decompressor</span><span class="op" id="5698992">.</span><span class="ident" id="5698993">Close</span><span class="op" id="5698998">(</span><span class="op" id="5698999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699002">return</span>&nbsp;<span class="ident" id="5699009">z</span><span class="op" id="5699010">.</span><span class="ident" id="5699011">err</span><br>
<span class="lineno"></span><span class="op" id="5699015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5699018">func</span>&nbsp;<span class="op" id="5699023">(</span><span class="ident" id="5699024">z</span>&nbsp;<span class="op" id="5699026">*</span><span class="ident" id="5699027">reader</span><span class="op" id="5699033">)</span>&nbsp;<span class="ident" id="5699035">Reset</span><span class="op" id="5699040">(</span><span class="ident" id="5699041">r</span>&nbsp;<span class="ident" id="5699043">io</span><span class="op" id="5699045">.</span><span class="ident" id="5699046">Reader</span><span class="op" id="5699052">,</span>&nbsp;<span class="ident" id="5699054">dict</span>&nbsp;<span class="op" id="5699059">[</span><span class="op" id="5699060">]</span><span class="builtintype" id="5699061">byte</span><span class="op" id="5699065">)</span>&nbsp;<span class="builtintype" id="5699067">error</span>&nbsp;<span class="op" id="5699073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699076">if</span>&nbsp;<span class="ident" id="5699079">fr</span><span class="op" id="5699081">,</span>&nbsp;<span class="ident" id="5699083">ok</span>&nbsp;<span class="op" id="5699086">:=</span>&nbsp;<span class="ident" id="5699089">r</span><span class="op" id="5699090">.</span><span class="op" id="5699091">(</span><span class="ident" id="5699092">flate</span><span class="op" id="5699097">.</span><span class="ident" id="5699098">Reader</span><span class="op" id="5699104">)</span><span class="op" id="5699105">;</span>&nbsp;<span class="ident" id="5699107">ok</span>&nbsp;<span class="op" id="5699110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699114">z</span><span class="op" id="5699115">.</span><span class="ident" id="5699116">r</span>&nbsp;<span class="op" id="5699118">=</span>&nbsp;<span class="ident" id="5699120">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699124">}</span>&nbsp;<span class="keyword" id="5699126">else</span>&nbsp;<span class="op" id="5699131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699135">z</span><span class="op" id="5699136">.</span><span class="ident" id="5699137">r</span>&nbsp;<span class="op" id="5699139">=</span>&nbsp;<span class="ident" id="5699141">bufio</span><span class="op" id="5699146">.</span><span class="ident" id="5699147">NewReader</span><span class="op" id="5699156">(</span><span class="ident" id="5699157">r</span><span class="op" id="5699158">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699164">_</span><span class="op" id="5699165">,</span>&nbsp;<span class="ident" id="5699167">err</span>&nbsp;<span class="op" id="5699171">:=</span>&nbsp;<span class="ident" id="5699174">io</span><span class="op" id="5699176">.</span><span class="ident" id="5699177">ReadFull</span><span class="op" id="5699185">(</span><span class="ident" id="5699186">z</span><span class="op" id="5699187">.</span><span class="ident" id="5699188">r</span><span class="op" id="5699189">,</span>&nbsp;<span class="ident" id="5699191">z</span><span class="op" id="5699192">.</span><span class="ident" id="5699193">scratch</span><span class="op" id="5699200">[</span><span class="num" id="5699201">0</span><span class="op" id="5699202">:</span><span class="num" id="5699203">2</span><span class="op" id="5699204">]</span><span class="op" id="5699205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699208">if</span>&nbsp;<span class="ident" id="5699211">err</span>&nbsp;<span class="op" id="5699215">!=</span>&nbsp;<span class="ident" id="5699218">nil</span>&nbsp;<span class="op" id="5699222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699226">return</span>&nbsp;<span class="ident" id="5699233">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699238">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699241">h</span>&nbsp;<span class="op" id="5699243">:=</span>&nbsp;<span class="builtintype" id="5699246">uint</span><span class="op" id="5699250">(</span><span class="ident" id="5699251">z</span><span class="op" id="5699252">.</span><span class="ident" id="5699253">scratch</span><span class="op" id="5699260">[</span><span class="num" id="5699261">0</span><span class="op" id="5699262">]</span><span class="op" id="5699263">)</span><span class="op" id="5699264">&lt;&lt;</span><span class="num" id="5699266">8</span>&nbsp;<span class="op" id="5699268">|</span>&nbsp;<span class="builtintype" id="5699270">uint</span><span class="op" id="5699274">(</span><span class="ident" id="5699275">z</span><span class="op" id="5699276">.</span><span class="ident" id="5699277">scratch</span><span class="op" id="5699284">[</span><span class="num" id="5699285">1</span><span class="op" id="5699286">]</span><span class="op" id="5699287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699290">if</span>&nbsp;<span class="op" id="5699293">(</span><span class="ident" id="5699294">z</span><span class="op" id="5699295">.</span><span class="ident" id="5699296">scratch</span><span class="op" id="5699303">[</span><span class="num" id="5699304">0</span><span class="op" id="5699305">]</span><span class="op" id="5699306">&amp;</span><span class="num" id="5699307">0x0f</span>&nbsp;<span class="op" id="5699312">!=</span>&nbsp;<span class="ident" id="5699315">zlibDeflate</span><span class="op" id="5699326">)</span>&nbsp;<span class="op" id="5699328">||</span>&nbsp;<span class="op" id="5699331">(</span><span class="ident" id="5699332">h</span><span class="op" id="5699333">%</span><span class="num" id="5699334">31</span>&nbsp;<span class="op" id="5699337">!=</span>&nbsp;<span class="num" id="5699340">0</span><span class="op" id="5699341">)</span>&nbsp;<span class="op" id="5699343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699347">return</span>&nbsp;<span class="ident" id="5699354">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699368">haveDict</span>&nbsp;<span class="op" id="5699377">:=</span>&nbsp;<span class="ident" id="5699380">z</span><span class="op" id="5699381">.</span><span class="ident" id="5699382">scratch</span><span class="op" id="5699389">[</span><span class="num" id="5699390">1</span><span class="op" id="5699391">]</span><span class="op" id="5699392">&amp;</span><span class="num" id="5699393">0x20</span>&nbsp;<span class="op" id="5699398">!=</span>&nbsp;<span class="num" id="5699401">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699404">if</span>&nbsp;<span class="ident" id="5699407">haveDict</span>&nbsp;<span class="op" id="5699416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699420">_</span><span class="op" id="5699421">,</span>&nbsp;<span class="ident" id="5699423">err</span>&nbsp;<span class="op" id="5699427">=</span>&nbsp;<span class="ident" id="5699429">io</span><span class="op" id="5699431">.</span><span class="ident" id="5699432">ReadFull</span><span class="op" id="5699440">(</span><span class="ident" id="5699441">z</span><span class="op" id="5699442">.</span><span class="ident" id="5699443">r</span><span class="op" id="5699444">,</span>&nbsp;<span class="ident" id="5699446">z</span><span class="op" id="5699447">.</span><span class="ident" id="5699448">scratch</span><span class="op" id="5699455">[</span><span class="num" id="5699456">0</span><span class="op" id="5699457">:</span><span class="num" id="5699458">4</span><span class="op" id="5699459">]</span><span class="op" id="5699460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699464">if</span>&nbsp;<span class="ident" id="5699467">err</span>&nbsp;<span class="op" id="5699471">!=</span>&nbsp;<span class="ident" id="5699474">nil</span>&nbsp;<span class="op" id="5699478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699483">return</span>&nbsp;<span class="ident" id="5699490">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699496">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699500">checksum</span>&nbsp;<span class="op" id="5699509">:=</span>&nbsp;<span class="builtintype" id="5699512">uint32</span><span class="op" id="5699518">(</span><span class="ident" id="5699519">z</span><span class="op" id="5699520">.</span><span class="ident" id="5699521">scratch</span><span class="op" id="5699528">[</span><span class="num" id="5699529">0</span><span class="op" id="5699530">]</span><span class="op" id="5699531">)</span><span class="op" id="5699532">&lt;&lt;</span><span class="num" id="5699534">24</span>&nbsp;<span class="op" id="5699537">|</span>&nbsp;<span class="builtintype" id="5699539">uint32</span><span class="op" id="5699545">(</span><span class="ident" id="5699546">z</span><span class="op" id="5699547">.</span><span class="ident" id="5699548">scratch</span><span class="op" id="5699555">[</span><span class="num" id="5699556">1</span><span class="op" id="5699557">]</span><span class="op" id="5699558">)</span><span class="op" id="5699559">&lt;&lt;</span><span class="num" id="5699561">16</span>&nbsp;<span class="op" id="5699564">|</span>&nbsp;<span class="builtintype" id="5699566">uint32</span><span class="op" id="5699572">(</span><span class="ident" id="5699573">z</span><span class="op" id="5699574">.</span><span class="ident" id="5699575">scratch</span><span class="op" id="5699582">[</span><span class="num" id="5699583">2</span><span class="op" id="5699584">]</span><span class="op" id="5699585">)</span><span class="op" id="5699586">&lt;&lt;</span><span class="num" id="5699588">8</span>&nbsp;<span class="op" id="5699590">|</span>&nbsp;<span class="builtintype" id="5699592">uint32</span><span class="op" id="5699598">(</span><span class="ident" id="5699599">z</span><span class="op" id="5699600">.</span><span class="ident" id="5699601">scratch</span><span class="op" id="5699608">[</span><span class="num" id="5699609">3</span><span class="op" id="5699610">]</span><span class="op" id="5699611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699615">if</span>&nbsp;<span class="ident" id="5699618">checksum</span>&nbsp;<span class="op" id="5699627">!=</span>&nbsp;<span class="ident" id="5699630">adler32</span><span class="op" id="5699637">.</span><span class="ident" id="5699638">Checksum</span><span class="op" id="5699646">(</span><span class="ident" id="5699647">dict</span><span class="op" id="5699651">)</span>&nbsp;<span class="op" id="5699653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699658">return</span>&nbsp;<span class="ident" id="5699665">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699684">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699687">if</span>&nbsp;<span class="ident" id="5699690">z</span><span class="op" id="5699691">.</span><span class="ident" id="5699692">decompressor</span>&nbsp;<span class="op" id="5699705">==</span>&nbsp;<span class="ident" id="5699708">nil</span>&nbsp;<span class="op" id="5699712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699716">if</span>&nbsp;<span class="ident" id="5699719">haveDict</span>&nbsp;<span class="op" id="5699728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699733">z</span><span class="op" id="5699734">.</span><span class="ident" id="5699735">decompressor</span>&nbsp;<span class="op" id="5699748">=</span>&nbsp;<span class="ident" id="5699750">flate</span><span class="op" id="5699755">.</span><span class="ident" id="5699756">NewReaderDict</span><span class="op" id="5699769">(</span><span class="ident" id="5699770">z</span><span class="op" id="5699771">.</span><span class="ident" id="5699772">r</span><span class="op" id="5699773">,</span>&nbsp;<span class="ident" id="5699775">dict</span><span class="op" id="5699779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699783">}</span>&nbsp;<span class="keyword" id="5699785">else</span>&nbsp;<span class="op" id="5699790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699795">z</span><span class="op" id="5699796">.</span><span class="ident" id="5699797">decompressor</span>&nbsp;<span class="op" id="5699810">=</span>&nbsp;<span class="ident" id="5699812">flate</span><span class="op" id="5699817">.</span><span class="ident" id="5699818">NewReader</span><span class="op" id="5699827">(</span><span class="ident" id="5699828">z</span><span class="op" id="5699829">.</span><span class="ident" id="5699830">r</span><span class="op" id="5699831">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699838">}</span>&nbsp;<span class="keyword" id="5699840">else</span>&nbsp;<span class="op" id="5699845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699849">z</span><span class="op" id="5699850">.</span><span class="ident" id="5699851">decompressor</span><span class="op" id="5699863">.</span><span class="op" id="5699864">(</span><span class="ident" id="5699865">flate</span><span class="op" id="5699870">.</span><span class="ident" id="5699871">Resetter</span><span class="op" id="5699879">)</span><span class="op" id="5699880">.</span><span class="ident" id="5699881">Reset</span><span class="op" id="5699886">(</span><span class="ident" id="5699887">z</span><span class="op" id="5699888">.</span><span class="ident" id="5699889">r</span><span class="op" id="5699890">,</span>&nbsp;<span class="ident" id="5699892">dict</span><span class="op" id="5699896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699902">z</span><span class="op" id="5699903">.</span><span class="ident" id="5699904">digest</span>&nbsp;<span class="op" id="5699911">=</span>&nbsp;<span class="ident" id="5699913">adler32</span><span class="op" id="5699920">.</span><span class="ident" id="5699921">New</span><span class="op" id="5699924">(</span><span class="op" id="5699925">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699928">return</span>&nbsp;<span class="ident" id="5699935">nil</span><br>
<span class="lineno"></span><span class="op" id="5699939">}</span>
</div>
</body>
</html>
