<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8439005">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8439060">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8439114">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8439165">package</span>&nbsp;<span class="ident" id="8439173">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8439183">import</span>&nbsp;<span class="op" id="8439190">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8439193">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8439202">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8439210">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8439221">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8439231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8439234">func</span>&nbsp;<span class="ident" id="8439239">TestNextJsCtx</span><span class="op" id="8439252">(</span><span class="ident" id="8439253">t</span>&nbsp;<span class="op" id="8439255">*</span><span class="ident" id="8439256">testing</span><span class="op" id="8439263">.</span><span class="ident" id="8439264">T</span><span class="op" id="8439265">)</span>&nbsp;<span class="op" id="8439267">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8439270">tests</span>&nbsp;<span class="op" id="8439276">:=</span>&nbsp;<span class="op" id="8439279">[</span><span class="op" id="8439280">]</span><span class="keyword" id="8439281">struct</span>&nbsp;<span class="op" id="8439288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8439292">jsCtx</span>&nbsp;<span class="ident" id="8439298">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8439306">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8439312">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439320">}</span><span class="op" id="8439321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439325">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439369">{</span><span class="ident" id="8439370">jsCtxRegexp</span><span class="op" id="8439381">,</span>&nbsp;<span class="string" id="8439383">&#34;;&#34;</span><span class="op" id="8439386">}</span><span class="op" id="8439387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439391">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439418">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439471">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439534">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439597">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439620">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439670">{</span><span class="ident" id="8439671">jsCtxRegexp</span><span class="op" id="8439682">,</span>&nbsp;<span class="string" id="8439684">&#34;}&#34;</span><span class="op" id="8439687">}</span><span class="op" id="8439688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439692">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439758">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439780">{</span><span class="ident" id="8439781">jsCtxDivOp</span><span class="op" id="8439791">,</span>&nbsp;<span class="string" id="8439793">&#34;)&#34;</span><span class="op" id="8439796">}</span><span class="op" id="8439797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439801">{</span><span class="ident" id="8439802">jsCtxDivOp</span><span class="op" id="8439812">,</span>&nbsp;<span class="string" id="8439814">&#34;]&#34;</span><span class="op" id="8439817">}</span><span class="op" id="8439818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439822">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439886">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439919">{</span><span class="ident" id="8439920">jsCtxRegexp</span><span class="op" id="8439931">,</span>&nbsp;<span class="string" id="8439933">&#34;(&#34;</span><span class="op" id="8439936">}</span><span class="op" id="8439937">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439941">{</span><span class="ident" id="8439942">jsCtxRegexp</span><span class="op" id="8439953">,</span>&nbsp;<span class="string" id="8439955">&#34;[&#34;</span><span class="op" id="8439958">}</span><span class="op" id="8439959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8439963">{</span><span class="ident" id="8439964">jsCtxRegexp</span><span class="op" id="8439975">,</span>&nbsp;<span class="string" id="8439977">&#34;{&#34;</span><span class="op" id="8439980">}</span><span class="op" id="8439981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8439985">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440049">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440083">{</span><span class="ident" id="8440084">jsCtxRegexp</span><span class="op" id="8440095">,</span>&nbsp;<span class="string" id="8440097">&#34;=&#34;</span><span class="op" id="8440100">}</span><span class="op" id="8440101">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440105">{</span><span class="ident" id="8440106">jsCtxRegexp</span><span class="op" id="8440117">,</span>&nbsp;<span class="string" id="8440119">&#34;+=&#34;</span><span class="op" id="8440123">}</span><span class="op" id="8440124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440128">{</span><span class="ident" id="8440129">jsCtxRegexp</span><span class="op" id="8440140">,</span>&nbsp;<span class="string" id="8440142">&#34;*=&#34;</span><span class="op" id="8440146">}</span><span class="op" id="8440147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440151">{</span><span class="ident" id="8440152">jsCtxRegexp</span><span class="op" id="8440163">,</span>&nbsp;<span class="string" id="8440165">&#34;*&#34;</span><span class="op" id="8440168">}</span><span class="op" id="8440169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440173">{</span><span class="ident" id="8440174">jsCtxRegexp</span><span class="op" id="8440185">,</span>&nbsp;<span class="string" id="8440187">&#34;!&#34;</span><span class="op" id="8440190">}</span><span class="op" id="8440191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440195">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440259">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440272">{</span><span class="ident" id="8440273">jsCtxRegexp</span><span class="op" id="8440284">,</span>&nbsp;<span class="string" id="8440286">&#34;+&#34;</span><span class="op" id="8440289">}</span><span class="op" id="8440290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440294">{</span><span class="ident" id="8440295">jsCtxRegexp</span><span class="op" id="8440306">,</span>&nbsp;<span class="string" id="8440308">&#34;-&#34;</span><span class="op" id="8440311">}</span><span class="op" id="8440312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440316">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440362">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440424">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440488">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440537">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440601">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440614">{</span><span class="ident" id="8440615">jsCtxDivOp</span><span class="op" id="8440625">,</span>&nbsp;<span class="string" id="8440627">&#34;--&#34;</span><span class="op" id="8440631">}</span><span class="op" id="8440632">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440636">{</span><span class="ident" id="8440637">jsCtxDivOp</span><span class="op" id="8440647">,</span>&nbsp;<span class="string" id="8440649">&#34;++&#34;</span><span class="op" id="8440653">}</span><span class="op" id="8440654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440658">{</span><span class="ident" id="8440659">jsCtxDivOp</span><span class="op" id="8440669">,</span>&nbsp;<span class="string" id="8440671">&#34;x--&#34;</span><span class="op" id="8440676">}</span><span class="op" id="8440677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440681">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440744">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440764">{</span><span class="ident" id="8440765">jsCtxRegexp</span><span class="op" id="8440776">,</span>&nbsp;<span class="string" id="8440778">&#34;x---&#34;</span><span class="op" id="8440784">}</span><span class="op" id="8440785">,</span>&nbsp;<span class="comment" id="8440787">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440815">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440881">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8440948">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440967">{</span><span class="ident" id="8440968">jsCtxRegexp</span><span class="op" id="8440979">,</span>&nbsp;<span class="string" id="8440981">&#34;return&#34;</span><span class="op" id="8440989">}</span><span class="op" id="8440990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8440994">{</span><span class="ident" id="8440995">jsCtxRegexp</span><span class="op" id="8441006">,</span>&nbsp;<span class="string" id="8441008">&#34;return&nbsp;&#34;</span><span class="op" id="8441017">}</span><span class="op" id="8441018">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441022">{</span><span class="ident" id="8441023">jsCtxRegexp</span><span class="op" id="8441034">,</span>&nbsp;<span class="string" id="8441036">&#34;return\t&#34;</span><span class="op" id="8441046">}</span><span class="op" id="8441047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441051">{</span><span class="ident" id="8441052">jsCtxRegexp</span><span class="op" id="8441063">,</span>&nbsp;<span class="string" id="8441065">&#34;return\n&#34;</span><span class="op" id="8441075">}</span><span class="op" id="8441076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441080">{</span><span class="ident" id="8441081">jsCtxRegexp</span><span class="op" id="8441092">,</span>&nbsp;<span class="string" id="8441094">&#34;return\u2028&#34;</span><span class="op" id="8441108">}</span><span class="op" id="8441109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441113">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441179">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441241">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441307">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441372">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441438">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441449">{</span><span class="ident" id="8441450">jsCtxDivOp</span><span class="op" id="8441460">,</span>&nbsp;<span class="string" id="8441462">&#34;x&#34;</span><span class="op" id="8441465">}</span><span class="op" id="8441466">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441470">{</span><span class="ident" id="8441471">jsCtxDivOp</span><span class="op" id="8441481">,</span>&nbsp;<span class="string" id="8441483">&#34;x&nbsp;&#34;</span><span class="op" id="8441487">}</span><span class="op" id="8441488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441492">{</span><span class="ident" id="8441493">jsCtxDivOp</span><span class="op" id="8441503">,</span>&nbsp;<span class="string" id="8441505">&#34;x\t&#34;</span><span class="op" id="8441510">}</span><span class="op" id="8441511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441515">{</span><span class="ident" id="8441516">jsCtxDivOp</span><span class="op" id="8441526">,</span>&nbsp;<span class="string" id="8441528">&#34;x\n&#34;</span><span class="op" id="8441533">}</span><span class="op" id="8441534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441538">{</span><span class="ident" id="8441539">jsCtxDivOp</span><span class="op" id="8441549">,</span>&nbsp;<span class="string" id="8441551">&#34;x\u2028&#34;</span><span class="op" id="8441560">}</span><span class="op" id="8441561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441565">{</span><span class="ident" id="8441566">jsCtxDivOp</span><span class="op" id="8441576">,</span>&nbsp;<span class="string" id="8441578">&#34;preturn&#34;</span><span class="op" id="8441587">}</span><span class="op" id="8441588">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441592">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441622">{</span><span class="ident" id="8441623">jsCtxDivOp</span><span class="op" id="8441633">,</span>&nbsp;<span class="string" id="8441635">&#34;0&#34;</span><span class="op" id="8441638">}</span><span class="op" id="8441639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8441643">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441698">{</span><span class="ident" id="8441699">jsCtxDivOp</span><span class="op" id="8441709">,</span>&nbsp;<span class="string" id="8441711">&#34;0.&#34;</span><span class="op" id="8441715">}</span><span class="op" id="8441716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441719">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8441723">for</span>&nbsp;<span class="ident" id="8441727">_</span><span class="op" id="8441728">,</span>&nbsp;<span class="ident" id="8441730">test</span>&nbsp;<span class="op" id="8441735">:=</span>&nbsp;<span class="keyword" id="8441738">range</span>&nbsp;<span class="ident" id="8441744">tests</span>&nbsp;<span class="op" id="8441750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8441754">if</span>&nbsp;<span class="ident" id="8441757">nextJSCtx</span><span class="op" id="8441766">(</span><span class="op" id="8441767">[</span><span class="op" id="8441768">]</span><span class="builtintype" id="8441769">byte</span><span class="op" id="8441773">(</span><span class="ident" id="8441774">test</span><span class="op" id="8441778">.</span><span class="ident" id="8441779">s</span><span class="op" id="8441780">)</span><span class="op" id="8441781">,</span>&nbsp;<span class="ident" id="8441783">jsCtxRegexp</span><span class="op" id="8441794">)</span>&nbsp;<span class="op" id="8441796">!=</span>&nbsp;<span class="ident" id="8441799">test</span><span class="op" id="8441803">.</span><span class="ident" id="8441804">jsCtx</span>&nbsp;<span class="op" id="8441810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8441815">t</span><span class="op" id="8441816">.</span><span class="ident" id="8441817">Errorf</span><span class="op" id="8441823">(</span><span class="string" id="8441824">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8441840">,</span>&nbsp;<span class="ident" id="8441842">test</span><span class="op" id="8441846">.</span><span class="ident" id="8441847">jsCtx</span><span class="op" id="8441852">,</span>&nbsp;<span class="ident" id="8441854">test</span><span class="op" id="8441858">.</span><span class="ident" id="8441859">s</span><span class="op" id="8441860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441864">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8441868">if</span>&nbsp;<span class="ident" id="8441871">nextJSCtx</span><span class="op" id="8441880">(</span><span class="op" id="8441881">[</span><span class="op" id="8441882">]</span><span class="builtintype" id="8441883">byte</span><span class="op" id="8441887">(</span><span class="ident" id="8441888">test</span><span class="op" id="8441892">.</span><span class="ident" id="8441893">s</span><span class="op" id="8441894">)</span><span class="op" id="8441895">,</span>&nbsp;<span class="ident" id="8441897">jsCtxDivOp</span><span class="op" id="8441907">)</span>&nbsp;<span class="op" id="8441909">!=</span>&nbsp;<span class="ident" id="8441912">test</span><span class="op" id="8441916">.</span><span class="ident" id="8441917">jsCtx</span>&nbsp;<span class="op" id="8441923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8441928">t</span><span class="op" id="8441929">.</span><span class="ident" id="8441930">Errorf</span><span class="op" id="8441936">(</span><span class="string" id="8441937">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8441953">,</span>&nbsp;<span class="ident" id="8441955">test</span><span class="op" id="8441959">.</span><span class="ident" id="8441960">jsCtx</span><span class="op" id="8441965">,</span>&nbsp;<span class="ident" id="8441967">test</span><span class="op" id="8441971">.</span><span class="ident" id="8441972">s</span><span class="op" id="8441973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8441980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8441984">if</span>&nbsp;<span class="ident" id="8441987">nextJSCtx</span><span class="op" id="8441996">(</span><span class="op" id="8441997">[</span><span class="op" id="8441998">]</span><span class="builtintype" id="8441999">byte</span><span class="op" id="8442003">(</span><span class="string" id="8442004">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8442009">)</span><span class="op" id="8442010">,</span>&nbsp;<span class="ident" id="8442012">jsCtxRegexp</span><span class="op" id="8442023">)</span>&nbsp;<span class="op" id="8442025">!=</span>&nbsp;<span class="ident" id="8442028">jsCtxRegexp</span>&nbsp;<span class="op" id="8442040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8442044">t</span><span class="op" id="8442045">.</span><span class="ident" id="8442046">Error</span><span class="op" id="8442051">(</span><span class="string" id="8442052">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8442066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8442073">if</span>&nbsp;<span class="ident" id="8442076">nextJSCtx</span><span class="op" id="8442085">(</span><span class="op" id="8442086">[</span><span class="op" id="8442087">]</span><span class="builtintype" id="8442088">byte</span><span class="op" id="8442092">(</span><span class="string" id="8442093">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8442098">)</span><span class="op" id="8442099">,</span>&nbsp;<span class="ident" id="8442101">jsCtxDivOp</span><span class="op" id="8442111">)</span>&nbsp;<span class="op" id="8442113">!=</span>&nbsp;<span class="ident" id="8442116">jsCtxDivOp</span>&nbsp;<span class="op" id="8442127">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8442131">t</span><span class="op" id="8442132">.</span><span class="ident" id="8442133">Error</span><span class="op" id="8442138">(</span><span class="string" id="8442139">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8442153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442156">}</span><br>
<span class="lineno"></span><span class="op" id="8442158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8442161">func</span>&nbsp;<span class="ident" id="8442166">TestJSValEscaper</span><span class="op" id="8442182">(</span><span class="ident" id="8442183">t</span>&nbsp;<span class="op" id="8442185">*</span><span class="ident" id="8442186">testing</span><span class="op" id="8442193">.</span><span class="ident" id="8442194">T</span><span class="op" id="8442195">)</span>&nbsp;<span class="op" id="8442197">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8442200">tests</span>&nbsp;<span class="op" id="8442206">:=</span>&nbsp;<span class="op" id="8442209">[</span><span class="op" id="8442210">]</span><span class="keyword" id="8442211">struct</span>&nbsp;<span class="op" id="8442218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8442222">x</span>&nbsp;&nbsp;<span class="keyword" id="8442225">interface</span><span class="op" id="8442234">{</span><span class="op" id="8442235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8442239">js</span>&nbsp;<span class="builtintype" id="8442242">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442250">}</span><span class="op" id="8442251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442255">{</span><span class="builtintype" id="8442256">int</span><span class="op" id="8442259">(</span><span class="num" id="8442260">42</span><span class="op" id="8442262">)</span><span class="op" id="8442263">,</span>&nbsp;<span class="string" id="8442265">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442271">}</span><span class="op" id="8442272">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442276">{</span><span class="builtintype" id="8442277">uint</span><span class="op" id="8442281">(</span><span class="num" id="8442282">42</span><span class="op" id="8442284">)</span><span class="op" id="8442285">,</span>&nbsp;<span class="string" id="8442287">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442293">}</span><span class="op" id="8442294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442298">{</span><span class="builtintype" id="8442299">int16</span><span class="op" id="8442304">(</span><span class="num" id="8442305">42</span><span class="op" id="8442307">)</span><span class="op" id="8442308">,</span>&nbsp;<span class="string" id="8442310">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442316">}</span><span class="op" id="8442317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442321">{</span><span class="builtintype" id="8442322">uint16</span><span class="op" id="8442328">(</span><span class="num" id="8442329">42</span><span class="op" id="8442331">)</span><span class="op" id="8442332">,</span>&nbsp;<span class="string" id="8442334">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442340">}</span><span class="op" id="8442341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442345">{</span><span class="builtintype" id="8442346">int32</span><span class="op" id="8442351">(</span><span class="op" id="8442352">-</span><span class="num" id="8442353">42</span><span class="op" id="8442355">)</span><span class="op" id="8442356">,</span>&nbsp;<span class="string" id="8442358">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8442365">}</span><span class="op" id="8442366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442370">{</span><span class="builtintype" id="8442371">uint32</span><span class="op" id="8442377">(</span><span class="num" id="8442378">42</span><span class="op" id="8442380">)</span><span class="op" id="8442381">,</span>&nbsp;<span class="string" id="8442383">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442389">}</span><span class="op" id="8442390">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442394">{</span><span class="builtintype" id="8442395">int16</span><span class="op" id="8442400">(</span><span class="op" id="8442401">-</span><span class="num" id="8442402">42</span><span class="op" id="8442404">)</span><span class="op" id="8442405">,</span>&nbsp;<span class="string" id="8442407">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8442414">}</span><span class="op" id="8442415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442419">{</span><span class="builtintype" id="8442420">uint16</span><span class="op" id="8442426">(</span><span class="num" id="8442427">42</span><span class="op" id="8442429">)</span><span class="op" id="8442430">,</span>&nbsp;<span class="string" id="8442432">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442438">}</span><span class="op" id="8442439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442443">{</span><span class="ident" id="8442444">int64</span><span class="op" id="8442449">(</span><span class="op" id="8442450">-</span><span class="num" id="8442451">42</span><span class="op" id="8442453">)</span><span class="op" id="8442454">,</span>&nbsp;<span class="string" id="8442456">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8442463">}</span><span class="op" id="8442464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442468">{</span><span class="ident" id="8442469">uint64</span><span class="op" id="8442475">(</span><span class="num" id="8442476">42</span><span class="op" id="8442478">)</span><span class="op" id="8442479">,</span>&nbsp;<span class="string" id="8442481">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8442487">}</span><span class="op" id="8442488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442492">{</span><span class="ident" id="8442493">uint64</span><span class="op" id="8442499">(</span><span class="num" id="8442500">1</span><span class="op" id="8442501">)</span>&nbsp;<span class="op" id="8442503">&lt;&lt;</span>&nbsp;<span class="num" id="8442506">53</span><span class="op" id="8442508">,</span>&nbsp;<span class="string" id="8442510">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="8442530">}</span><span class="op" id="8442531">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8442535">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8442587">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442641">{</span><span class="ident" id="8442642">uint64</span><span class="op" id="8442648">(</span><span class="num" id="8442649">1</span><span class="op" id="8442650">)</span><span class="op" id="8442651">&lt;&lt;</span><span class="num" id="8442653">53</span>&nbsp;<span class="op" id="8442656">+</span>&nbsp;<span class="num" id="8442658">1</span><span class="op" id="8442659">,</span>&nbsp;<span class="string" id="8442661">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="8442681">}</span><span class="op" id="8442682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442686">{</span><span class="builtintype" id="8442687">float32</span><span class="op" id="8442694">(</span><span class="num" id="8442695">1.0</span><span class="op" id="8442698">)</span><span class="op" id="8442699">,</span>&nbsp;<span class="string" id="8442701">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8442706">}</span><span class="op" id="8442707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442711">{</span><span class="builtintype" id="8442712">float32</span><span class="op" id="8442719">(</span><span class="op" id="8442720">-</span><span class="num" id="8442721">1.0</span><span class="op" id="8442724">)</span><span class="op" id="8442725">,</span>&nbsp;<span class="string" id="8442727">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8442733">}</span><span class="op" id="8442734">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442738">{</span><span class="builtintype" id="8442739">float32</span><span class="op" id="8442746">(</span><span class="num" id="8442747">0.5</span><span class="op" id="8442750">)</span><span class="op" id="8442751">,</span>&nbsp;<span class="string" id="8442753">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8442760">}</span><span class="op" id="8442761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442765">{</span><span class="builtintype" id="8442766">float32</span><span class="op" id="8442773">(</span><span class="op" id="8442774">-</span><span class="num" id="8442775">0.5</span><span class="op" id="8442778">)</span><span class="op" id="8442779">,</span>&nbsp;<span class="string" id="8442781">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8442789">}</span><span class="op" id="8442790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442794">{</span><span class="builtintype" id="8442795">float32</span><span class="op" id="8442802">(</span><span class="num" id="8442803">1.0</span><span class="op" id="8442806">)</span>&nbsp;<span class="op" id="8442808">/</span>&nbsp;<span class="builtintype" id="8442810">float32</span><span class="op" id="8442817">(</span><span class="num" id="8442818">256</span><span class="op" id="8442821">)</span><span class="op" id="8442822">,</span>&nbsp;<span class="string" id="8442824">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="8442838">}</span><span class="op" id="8442839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442843">{</span><span class="builtintype" id="8442844">float32</span><span class="op" id="8442851">(</span><span class="num" id="8442852">0</span><span class="op" id="8442853">)</span><span class="op" id="8442854">,</span>&nbsp;<span class="string" id="8442856">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8442861">}</span><span class="op" id="8442862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442866">{</span><span class="ident" id="8442867">math</span><span class="op" id="8442871">.</span><span class="ident" id="8442872">Copysign</span><span class="op" id="8442880">(</span><span class="num" id="8442881">0</span><span class="op" id="8442882">,</span>&nbsp;<span class="op" id="8442884">-</span><span class="num" id="8442885">1</span><span class="op" id="8442886">)</span><span class="op" id="8442887">,</span>&nbsp;<span class="string" id="8442889">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8442895">}</span><span class="op" id="8442896">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442900">{</span><span class="builtintype" id="8442901">float64</span><span class="op" id="8442908">(</span><span class="num" id="8442909">1.0</span><span class="op" id="8442912">)</span><span class="op" id="8442913">,</span>&nbsp;<span class="string" id="8442915">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8442920">}</span><span class="op" id="8442921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442925">{</span><span class="builtintype" id="8442926">float64</span><span class="op" id="8442933">(</span><span class="op" id="8442934">-</span><span class="num" id="8442935">1.0</span><span class="op" id="8442938">)</span><span class="op" id="8442939">,</span>&nbsp;<span class="string" id="8442941">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8442947">}</span><span class="op" id="8442948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442952">{</span><span class="builtintype" id="8442953">float64</span><span class="op" id="8442960">(</span><span class="num" id="8442961">0.5</span><span class="op" id="8442964">)</span><span class="op" id="8442965">,</span>&nbsp;<span class="string" id="8442967">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8442974">}</span><span class="op" id="8442975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8442979">{</span><span class="builtintype" id="8442980">float64</span><span class="op" id="8442987">(</span><span class="op" id="8442988">-</span><span class="num" id="8442989">0.5</span><span class="op" id="8442992">)</span><span class="op" id="8442993">,</span>&nbsp;<span class="string" id="8442995">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8443003">}</span><span class="op" id="8443004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443008">{</span><span class="builtintype" id="8443009">float64</span><span class="op" id="8443016">(</span><span class="num" id="8443017">0</span><span class="op" id="8443018">)</span><span class="op" id="8443019">,</span>&nbsp;<span class="string" id="8443021">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8443026">}</span><span class="op" id="8443027">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443031">{</span><span class="ident" id="8443032">math</span><span class="op" id="8443036">.</span><span class="ident" id="8443037">Copysign</span><span class="op" id="8443045">(</span><span class="num" id="8443046">0</span><span class="op" id="8443047">,</span>&nbsp;<span class="op" id="8443049">-</span><span class="num" id="8443050">1</span><span class="op" id="8443051">)</span><span class="op" id="8443052">,</span>&nbsp;<span class="string" id="8443054">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8443060">}</span><span class="op" id="8443061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443065">{</span><span class="string" id="8443066">&#34;&#34;</span><span class="op" id="8443068">,</span>&nbsp;<span class="string" id="8443070">`&#34;&#34;`</span><span class="op" id="8443074">}</span><span class="op" id="8443075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443079">{</span><span class="string" id="8443080">&#34;foo&#34;</span><span class="op" id="8443085">,</span>&nbsp;<span class="string" id="8443087">`&#34;foo&#34;`</span><span class="op" id="8443094">}</span><span class="op" id="8443095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8443099">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443114">{</span><span class="string" id="8443115">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="8443133">,</span>&nbsp;<span class="string" id="8443135">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="8443155">}</span><span class="op" id="8443156">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8443160">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443208">{</span><span class="string" id="8443209">&#34;\t\x0b&#34;</span><span class="op" id="8443217">,</span>&nbsp;<span class="string" id="8443219">`&#34;\t\u000b&#34;`</span><span class="op" id="8443231">}</span><span class="op" id="8443232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443236">{</span><span class="keyword" id="8443237">struct</span><span class="op" id="8443243">{</span>&nbsp;<span class="ident" id="8443245">X</span><span class="op" id="8443246">,</span>&nbsp;<span class="ident" id="8443248">Y</span>&nbsp;<span class="builtintype" id="8443250">int</span>&nbsp;<span class="op" id="8443254">}</span><span class="op" id="8443255">{</span><span class="num" id="8443256">1</span><span class="op" id="8443257">,</span>&nbsp;<span class="num" id="8443259">2</span><span class="op" id="8443260">}</span><span class="op" id="8443261">,</span>&nbsp;<span class="string" id="8443263">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="8443278">}</span><span class="op" id="8443279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443283">{</span><span class="op" id="8443284">[</span><span class="op" id="8443285">]</span><span class="keyword" id="8443286">interface</span><span class="op" id="8443295">{</span><span class="op" id="8443296">}</span><span class="op" id="8443297">{</span><span class="op" id="8443298">}</span><span class="op" id="8443299">,</span>&nbsp;<span class="string" id="8443301">&#34;[]&#34;</span><span class="op" id="8443305">}</span><span class="op" id="8443306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443310">{</span><span class="op" id="8443311">[</span><span class="op" id="8443312">]</span><span class="keyword" id="8443313">interface</span><span class="op" id="8443322">{</span><span class="op" id="8443323">}</span><span class="op" id="8443324">{</span><span class="num" id="8443325">42</span><span class="op" id="8443327">,</span>&nbsp;<span class="string" id="8443329">&#34;foo&#34;</span><span class="op" id="8443334">,</span>&nbsp;<span class="builtintype" id="8443336">nil</span><span class="op" id="8443339">}</span><span class="op" id="8443340">,</span>&nbsp;<span class="string" id="8443342">`[42,&#34;foo&#34;,null]`</span><span class="op" id="8443359">}</span><span class="op" id="8443360">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443364">{</span><span class="op" id="8443365">[</span><span class="op" id="8443366">]</span><span class="builtintype" id="8443367">string</span><span class="op" id="8443373">{</span><span class="string" id="8443374">&#34;&lt;!--&#34;</span><span class="op" id="8443380">,</span>&nbsp;<span class="string" id="8443382">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8443393">,</span>&nbsp;<span class="string" id="8443395">&#34;--&gt;&#34;</span><span class="op" id="8443400">}</span><span class="op" id="8443401">,</span>&nbsp;<span class="string" id="8443403">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="8443451">}</span><span class="op" id="8443452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443456">{</span><span class="string" id="8443457">&#34;&lt;!--&#34;</span><span class="op" id="8443463">,</span>&nbsp;<span class="string" id="8443465">`&#34;\u003c!--&#34;`</span><span class="op" id="8443478">}</span><span class="op" id="8443479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443483">{</span><span class="string" id="8443484">&#34;--&gt;&#34;</span><span class="op" id="8443489">,</span>&nbsp;<span class="string" id="8443491">`&#34;--\u003e&#34;`</span><span class="op" id="8443503">}</span><span class="op" id="8443504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443508">{</span><span class="string" id="8443509">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8443520">,</span>&nbsp;<span class="string" id="8443522">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="8443540">}</span><span class="op" id="8443541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443545">{</span><span class="string" id="8443546">&#34;]]&gt;&#34;</span><span class="op" id="8443551">,</span>&nbsp;<span class="string" id="8443553">`&#34;]]\u003e&#34;`</span><span class="op" id="8443565">}</span><span class="op" id="8443566">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443570">{</span><span class="string" id="8443571">&#34;&lt;/script&#34;</span><span class="op" id="8443581">,</span>&nbsp;<span class="string" id="8443583">`&#34;\u003c/script&#34;`</span><span class="op" id="8443600">}</span><span class="op" id="8443601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443605">{</span><span class="string" id="8443606">&#34;\U0001D11E&#34;</span><span class="op" id="8443618">,</span>&nbsp;<span class="string" id="8443620">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="8443636">}</span><span class="op" id="8443637">,</span>&nbsp;<span class="comment" id="8443639">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8443665">for</span>&nbsp;<span class="ident" id="8443669">_</span><span class="op" id="8443670">,</span>&nbsp;<span class="ident" id="8443672">test</span>&nbsp;<span class="op" id="8443677">:=</span>&nbsp;<span class="keyword" id="8443680">range</span>&nbsp;<span class="ident" id="8443686">tests</span>&nbsp;<span class="op" id="8443692">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8443696">if</span>&nbsp;<span class="ident" id="8443699">js</span>&nbsp;<span class="op" id="8443702">:=</span>&nbsp;<span class="ident" id="8443705">jsValEscaper</span><span class="op" id="8443717">(</span><span class="ident" id="8443718">test</span><span class="op" id="8443722">.</span><span class="ident" id="8443723">x</span><span class="op" id="8443724">)</span><span class="op" id="8443725">;</span>&nbsp;<span class="ident" id="8443727">js</span>&nbsp;<span class="op" id="8443730">!=</span>&nbsp;<span class="ident" id="8443733">test</span><span class="op" id="8443737">.</span><span class="ident" id="8443738">js</span>&nbsp;<span class="op" id="8443741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8443746">t</span><span class="op" id="8443747">.</span><span class="ident" id="8443748">Errorf</span><span class="op" id="8443754">(</span><span class="string" id="8443755">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8443783">,</span>&nbsp;<span class="ident" id="8443785">test</span><span class="op" id="8443789">.</span><span class="ident" id="8443790">x</span><span class="op" id="8443791">,</span>&nbsp;<span class="ident" id="8443793">test</span><span class="op" id="8443797">.</span><span class="ident" id="8443798">js</span><span class="op" id="8443800">,</span>&nbsp;<span class="ident" id="8443802">js</span><span class="op" id="8443804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8443808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8443812">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8443869">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8443886">a</span>&nbsp;<span class="op" id="8443888">:=</span>&nbsp;<span class="op" id="8443891">[</span><span class="op" id="8443892">]</span><span class="keyword" id="8443893">interface</span><span class="op" id="8443902">{</span><span class="op" id="8443903">}</span><span class="op" id="8443904">{</span><span class="ident" id="8443905">test</span><span class="op" id="8443909">.</span><span class="ident" id="8443910">x</span><span class="op" id="8443911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8443915">want</span>&nbsp;<span class="op" id="8443920">:=</span>&nbsp;<span class="string" id="8443923">&#34;[&#34;</span>&nbsp;<span class="op" id="8443927">+</span>&nbsp;<span class="ident" id="8443929">strings</span><span class="op" id="8443936">.</span><span class="ident" id="8443937">TrimSpace</span><span class="op" id="8443946">(</span><span class="ident" id="8443947">test</span><span class="op" id="8443951">.</span><span class="ident" id="8443952">js</span><span class="op" id="8443954">)</span>&nbsp;<span class="op" id="8443956">+</span>&nbsp;<span class="string" id="8443958">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8443964">if</span>&nbsp;<span class="ident" id="8443967">js</span>&nbsp;<span class="op" id="8443970">:=</span>&nbsp;<span class="ident" id="8443973">jsValEscaper</span><span class="op" id="8443985">(</span><span class="ident" id="8443986">a</span><span class="op" id="8443987">)</span><span class="op" id="8443988">;</span>&nbsp;<span class="ident" id="8443990">js</span>&nbsp;<span class="op" id="8443993">!=</span>&nbsp;<span class="ident" id="8443996">want</span>&nbsp;<span class="op" id="8444001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8444006">t</span><span class="op" id="8444007">.</span><span class="ident" id="8444008">Errorf</span><span class="op" id="8444014">(</span><span class="string" id="8444015">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8444043">,</span>&nbsp;<span class="ident" id="8444045">a</span><span class="op" id="8444046">,</span>&nbsp;<span class="ident" id="8444048">want</span><span class="op" id="8444052">,</span>&nbsp;<span class="ident" id="8444054">js</span><span class="op" id="8444056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444060">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444063">}</span><br>
<span class="lineno"></span><span class="op" id="8444065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8444068">func</span>&nbsp;<span class="ident" id="8444073">TestJSStrEscaper</span><span class="op" id="8444089">(</span><span class="ident" id="8444090">t</span>&nbsp;<span class="op" id="8444092">*</span><span class="ident" id="8444093">testing</span><span class="op" id="8444100">.</span><span class="ident" id="8444101">T</span><span class="op" id="8444102">)</span>&nbsp;<span class="op" id="8444104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8444107">tests</span>&nbsp;<span class="op" id="8444113">:=</span>&nbsp;<span class="op" id="8444116">[</span><span class="op" id="8444117">]</span><span class="keyword" id="8444118">struct</span>&nbsp;<span class="op" id="8444125">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8444129">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8444133">interface</span><span class="op" id="8444142">{</span><span class="op" id="8444143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8444147">esc</span>&nbsp;<span class="builtintype" id="8444151">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444159">}</span><span class="op" id="8444160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444164">{</span><span class="string" id="8444165">&#34;&#34;</span><span class="op" id="8444167">,</span>&nbsp;<span class="string" id="8444169">``</span><span class="op" id="8444171">}</span><span class="op" id="8444172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444176">{</span><span class="string" id="8444177">&#34;foo&#34;</span><span class="op" id="8444182">,</span>&nbsp;<span class="string" id="8444184">`foo`</span><span class="op" id="8444189">}</span><span class="op" id="8444190">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444194">{</span><span class="string" id="8444195">&#34;\u0000&#34;</span><span class="op" id="8444203">,</span>&nbsp;<span class="string" id="8444205">`\0`</span><span class="op" id="8444209">}</span><span class="op" id="8444210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444214">{</span><span class="string" id="8444215">&#34;\t&#34;</span><span class="op" id="8444219">,</span>&nbsp;<span class="string" id="8444221">`\t`</span><span class="op" id="8444225">}</span><span class="op" id="8444226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444230">{</span><span class="string" id="8444231">&#34;\n&#34;</span><span class="op" id="8444235">,</span>&nbsp;<span class="string" id="8444237">`\n`</span><span class="op" id="8444241">}</span><span class="op" id="8444242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444246">{</span><span class="string" id="8444247">&#34;\r&#34;</span><span class="op" id="8444251">,</span>&nbsp;<span class="string" id="8444253">`\r`</span><span class="op" id="8444257">}</span><span class="op" id="8444258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444262">{</span><span class="string" id="8444263">&#34;\u2028&#34;</span><span class="op" id="8444271">,</span>&nbsp;<span class="string" id="8444273">`\u2028`</span><span class="op" id="8444281">}</span><span class="op" id="8444282">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444286">{</span><span class="string" id="8444287">&#34;\u2029&#34;</span><span class="op" id="8444295">,</span>&nbsp;<span class="string" id="8444297">`\u2029`</span><span class="op" id="8444305">}</span><span class="op" id="8444306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444310">{</span><span class="string" id="8444311">&#34;\\&#34;</span><span class="op" id="8444315">,</span>&nbsp;<span class="string" id="8444317">`\\`</span><span class="op" id="8444321">}</span><span class="op" id="8444322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444326">{</span><span class="string" id="8444327">&#34;\\n&#34;</span><span class="op" id="8444332">,</span>&nbsp;<span class="string" id="8444334">`\\n`</span><span class="op" id="8444339">}</span><span class="op" id="8444340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444344">{</span><span class="string" id="8444345">&#34;foo\r\nbar&#34;</span><span class="op" id="8444357">,</span>&nbsp;<span class="string" id="8444359">`foo\r\nbar`</span><span class="op" id="8444371">}</span><span class="op" id="8444372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444376">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444412">{</span><span class="string" id="8444413">`&#34;`</span><span class="op" id="8444416">,</span>&nbsp;<span class="string" id="8444418">`\x22`</span><span class="op" id="8444424">}</span><span class="op" id="8444425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444429">{</span><span class="string" id="8444430">`&#39;`</span><span class="op" id="8444433">,</span>&nbsp;<span class="string" id="8444435">`\x27`</span><span class="op" id="8444441">}</span><span class="op" id="8444442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444446">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444501">{</span><span class="string" id="8444502">`&amp;amp;`</span><span class="op" id="8444509">,</span>&nbsp;<span class="string" id="8444511">`\x26amp;`</span><span class="op" id="8444521">}</span><span class="op" id="8444522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444526">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444589">{</span><span class="string" id="8444590">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8444601">,</span>&nbsp;<span class="string" id="8444603">`\x3c\/script\x3e`</span><span class="op" id="8444621">}</span><span class="op" id="8444622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444626">{</span><span class="string" id="8444627">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8444638">,</span>&nbsp;<span class="string" id="8444640">`\x3c![CDATA[`</span><span class="op" id="8444654">}</span><span class="op" id="8444655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8444659">{</span><span class="string" id="8444660">&#34;]]&gt;&#34;</span><span class="op" id="8444665">,</span>&nbsp;<span class="string" id="8444667">`]]\x3e`</span><span class="op" id="8444675">}</span><span class="op" id="8444676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444680">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444752">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444816">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444877">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444924">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8444988">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445055">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445121">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445181">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445245">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445296">{</span><span class="string" id="8445297">&#34;&lt;!--&#34;</span><span class="op" id="8445303">,</span>&nbsp;<span class="string" id="8445305">`\x3c!--`</span><span class="op" id="8445314">}</span><span class="op" id="8445315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445319">{</span><span class="string" id="8445320">&#34;--&gt;&#34;</span><span class="op" id="8445325">,</span>&nbsp;<span class="string" id="8445327">`--\x3e`</span><span class="op" id="8445335">}</span><span class="op" id="8445336">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445340">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445400">{</span><span class="string" id="8445401">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="8445444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8445449">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="8445505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445509">}</span><span class="op" id="8445510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445514">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445542">{</span><span class="string" id="8445543">&#34;foo\xA0bar&#34;</span><span class="op" id="8445555">,</span>&nbsp;<span class="string" id="8445557">&#34;foo\xA0bar&#34;</span><span class="op" id="8445569">}</span><span class="op" id="8445570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8445574">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445609">{</span><span class="string" id="8445610">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8445630">,</span>&nbsp;<span class="string" id="8445632">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8445652">}</span><span class="op" id="8445653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8445660">for</span>&nbsp;<span class="ident" id="8445664">_</span><span class="op" id="8445665">,</span>&nbsp;<span class="ident" id="8445667">test</span>&nbsp;<span class="op" id="8445672">:=</span>&nbsp;<span class="keyword" id="8445675">range</span>&nbsp;<span class="ident" id="8445681">tests</span>&nbsp;<span class="op" id="8445687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8445691">esc</span>&nbsp;<span class="op" id="8445695">:=</span>&nbsp;<span class="ident" id="8445698">jsStrEscaper</span><span class="op" id="8445710">(</span><span class="ident" id="8445711">test</span><span class="op" id="8445715">.</span><span class="ident" id="8445716">x</span><span class="op" id="8445717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8445721">if</span>&nbsp;<span class="ident" id="8445724">esc</span>&nbsp;<span class="op" id="8445728">!=</span>&nbsp;<span class="ident" id="8445731">test</span><span class="op" id="8445735">.</span><span class="ident" id="8445736">esc</span>&nbsp;<span class="op" id="8445740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8445745">t</span><span class="op" id="8445746">.</span><span class="ident" id="8445747">Errorf</span><span class="op" id="8445753">(</span><span class="string" id="8445754">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8445774">,</span>&nbsp;<span class="ident" id="8445776">test</span><span class="op" id="8445780">.</span><span class="ident" id="8445781">x</span><span class="op" id="8445782">,</span>&nbsp;<span class="ident" id="8445784">test</span><span class="op" id="8445788">.</span><span class="ident" id="8445789">esc</span><span class="op" id="8445792">,</span>&nbsp;<span class="ident" id="8445794">esc</span><span class="op" id="8445797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445801">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445804">}</span><br>
<span class="lineno"></span><span class="op" id="8445806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8445809">func</span>&nbsp;<span class="ident" id="8445814">TestJSRegexpEscaper</span><span class="op" id="8445833">(</span><span class="ident" id="8445834">t</span>&nbsp;<span class="op" id="8445836">*</span><span class="ident" id="8445837">testing</span><span class="op" id="8445844">.</span><span class="ident" id="8445845">T</span><span class="op" id="8445846">)</span>&nbsp;<span class="op" id="8445848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8445851">tests</span>&nbsp;<span class="op" id="8445857">:=</span>&nbsp;<span class="op" id="8445860">[</span><span class="op" id="8445861">]</span><span class="keyword" id="8445862">struct</span>&nbsp;<span class="op" id="8445869">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8445873">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8445877">interface</span><span class="op" id="8445886">{</span><span class="op" id="8445887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8445891">esc</span>&nbsp;<span class="builtintype" id="8445895">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445903">}</span><span class="op" id="8445904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445908">{</span><span class="string" id="8445909">&#34;&#34;</span><span class="op" id="8445911">,</span>&nbsp;<span class="string" id="8445913">`(?:)`</span><span class="op" id="8445919">}</span><span class="op" id="8445920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445924">{</span><span class="string" id="8445925">&#34;foo&#34;</span><span class="op" id="8445930">,</span>&nbsp;<span class="string" id="8445932">`foo`</span><span class="op" id="8445937">}</span><span class="op" id="8445938">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445942">{</span><span class="string" id="8445943">&#34;\u0000&#34;</span><span class="op" id="8445951">,</span>&nbsp;<span class="string" id="8445953">`\0`</span><span class="op" id="8445957">}</span><span class="op" id="8445958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445962">{</span><span class="string" id="8445963">&#34;\t&#34;</span><span class="op" id="8445967">,</span>&nbsp;<span class="string" id="8445969">`\t`</span><span class="op" id="8445973">}</span><span class="op" id="8445974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445978">{</span><span class="string" id="8445979">&#34;\n&#34;</span><span class="op" id="8445983">,</span>&nbsp;<span class="string" id="8445985">`\n`</span><span class="op" id="8445989">}</span><span class="op" id="8445990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8445994">{</span><span class="string" id="8445995">&#34;\r&#34;</span><span class="op" id="8445999">,</span>&nbsp;<span class="string" id="8446001">`\r`</span><span class="op" id="8446005">}</span><span class="op" id="8446006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446010">{</span><span class="string" id="8446011">&#34;\u2028&#34;</span><span class="op" id="8446019">,</span>&nbsp;<span class="string" id="8446021">`\u2028`</span><span class="op" id="8446029">}</span><span class="op" id="8446030">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446034">{</span><span class="string" id="8446035">&#34;\u2029&#34;</span><span class="op" id="8446043">,</span>&nbsp;<span class="string" id="8446045">`\u2029`</span><span class="op" id="8446053">}</span><span class="op" id="8446054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446058">{</span><span class="string" id="8446059">&#34;\\&#34;</span><span class="op" id="8446063">,</span>&nbsp;<span class="string" id="8446065">`\\`</span><span class="op" id="8446069">}</span><span class="op" id="8446070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446074">{</span><span class="string" id="8446075">&#34;\\n&#34;</span><span class="op" id="8446080">,</span>&nbsp;<span class="string" id="8446082">`\\n`</span><span class="op" id="8446087">}</span><span class="op" id="8446088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446092">{</span><span class="string" id="8446093">&#34;foo\r\nbar&#34;</span><span class="op" id="8446105">,</span>&nbsp;<span class="string" id="8446107">`foo\r\nbar`</span><span class="op" id="8446119">}</span><span class="op" id="8446120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8446124">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446160">{</span><span class="string" id="8446161">`&#34;`</span><span class="op" id="8446164">,</span>&nbsp;<span class="string" id="8446166">`\x22`</span><span class="op" id="8446172">}</span><span class="op" id="8446173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446177">{</span><span class="string" id="8446178">`&#39;`</span><span class="op" id="8446181">,</span>&nbsp;<span class="string" id="8446183">`\x27`</span><span class="op" id="8446189">}</span><span class="op" id="8446190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8446194">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446249">{</span><span class="string" id="8446250">`&amp;amp;`</span><span class="op" id="8446257">,</span>&nbsp;<span class="string" id="8446259">`\x26amp;`</span><span class="op" id="8446269">}</span><span class="op" id="8446270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8446274">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446337">{</span><span class="string" id="8446338">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8446349">,</span>&nbsp;<span class="string" id="8446351">`\x3c\/script\x3e`</span><span class="op" id="8446369">}</span><span class="op" id="8446370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446374">{</span><span class="string" id="8446375">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8446386">,</span>&nbsp;<span class="string" id="8446388">`\x3c!\[CDATA\[`</span><span class="op" id="8446404">}</span><span class="op" id="8446405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446409">{</span><span class="string" id="8446410">&#34;]]&gt;&#34;</span><span class="op" id="8446415">,</span>&nbsp;<span class="string" id="8446417">`\]\]\x3e`</span><span class="op" id="8446427">}</span><span class="op" id="8446428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8446432">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446458">{</span><span class="string" id="8446459">&#34;&lt;!--&#34;</span><span class="op" id="8446465">,</span>&nbsp;<span class="string" id="8446467">`\x3c!\-\-`</span><span class="op" id="8446478">}</span><span class="op" id="8446479">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446483">{</span><span class="string" id="8446484">&#34;--&gt;&#34;</span><span class="op" id="8446489">,</span>&nbsp;<span class="string" id="8446491">`\-\-\x3e`</span><span class="op" id="8446501">}</span><span class="op" id="8446502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446506">{</span><span class="string" id="8446507">&#34;*&#34;</span><span class="op" id="8446510">,</span>&nbsp;<span class="string" id="8446512">`\*`</span><span class="op" id="8446516">}</span><span class="op" id="8446517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446521">{</span><span class="string" id="8446522">&#34;+&#34;</span><span class="op" id="8446525">,</span>&nbsp;<span class="string" id="8446527">`\x2b`</span><span class="op" id="8446533">}</span><span class="op" id="8446534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446538">{</span><span class="string" id="8446539">&#34;?&#34;</span><span class="op" id="8446542">,</span>&nbsp;<span class="string" id="8446544">`\?`</span><span class="op" id="8446548">}</span><span class="op" id="8446549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446553">{</span><span class="string" id="8446554">&#34;[](){}&#34;</span><span class="op" id="8446562">,</span>&nbsp;<span class="string" id="8446564">`\[\]\(\)\{\}`</span><span class="op" id="8446578">}</span><span class="op" id="8446579">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446583">{</span><span class="string" id="8446584">&#34;$foo|x.y&#34;</span><span class="op" id="8446594">,</span>&nbsp;<span class="string" id="8446596">`\$foo\|x\.y`</span><span class="op" id="8446609">}</span><span class="op" id="8446610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446614">{</span><span class="string" id="8446615">&#34;x^y&#34;</span><span class="op" id="8446620">,</span>&nbsp;<span class="string" id="8446622">`x\^y`</span><span class="op" id="8446628">}</span><span class="op" id="8446629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8446636">for</span>&nbsp;<span class="ident" id="8446640">_</span><span class="op" id="8446641">,</span>&nbsp;<span class="ident" id="8446643">test</span>&nbsp;<span class="op" id="8446648">:=</span>&nbsp;<span class="keyword" id="8446651">range</span>&nbsp;<span class="ident" id="8446657">tests</span>&nbsp;<span class="op" id="8446663">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8446667">esc</span>&nbsp;<span class="op" id="8446671">:=</span>&nbsp;<span class="ident" id="8446674">jsRegexpEscaper</span><span class="op" id="8446689">(</span><span class="ident" id="8446690">test</span><span class="op" id="8446694">.</span><span class="ident" id="8446695">x</span><span class="op" id="8446696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8446700">if</span>&nbsp;<span class="ident" id="8446703">esc</span>&nbsp;<span class="op" id="8446707">!=</span>&nbsp;<span class="ident" id="8446710">test</span><span class="op" id="8446714">.</span><span class="ident" id="8446715">esc</span>&nbsp;<span class="op" id="8446719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8446724">t</span><span class="op" id="8446725">.</span><span class="ident" id="8446726">Errorf</span><span class="op" id="8446732">(</span><span class="string" id="8446733">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8446753">,</span>&nbsp;<span class="ident" id="8446755">test</span><span class="op" id="8446759">.</span><span class="ident" id="8446760">x</span><span class="op" id="8446761">,</span>&nbsp;<span class="ident" id="8446763">test</span><span class="op" id="8446767">.</span><span class="ident" id="8446768">esc</span><span class="op" id="8446771">,</span>&nbsp;<span class="ident" id="8446773">esc</span><span class="op" id="8446776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8446783">}</span><br>
<span class="lineno">265</span><span class="op" id="8446785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8446788">func</span>&nbsp;<span class="ident" id="8446793">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="8446836">(</span><span class="ident" id="8446837">t</span>&nbsp;<span class="op" id="8446839">*</span><span class="ident" id="8446840">testing</span><span class="op" id="8446847">.</span><span class="ident" id="8446848">T</span><span class="op" id="8446849">)</span>&nbsp;<span class="op" id="8446851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8446854">input</span>&nbsp;<span class="op" id="8446860">:=</span>&nbsp;<span class="op" id="8446863">(</span><span class="string" id="8446864">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8446925">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8446929">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8446996">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447000">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8447019">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447023">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8447042">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447046">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8447065">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447069">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8447088">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447092">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8447111">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447115">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8447137">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447141">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8447183">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8447187">tests</span>&nbsp;<span class="op" id="8447193">:=</span>&nbsp;<span class="op" id="8447196">[</span><span class="op" id="8447197">]</span><span class="keyword" id="8447198">struct</span>&nbsp;<span class="op" id="8447205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8447209">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8447217">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8447226">escaper</span>&nbsp;<span class="keyword" id="8447234">func</span><span class="op" id="8447238">(</span><span class="op" id="8447239">...</span><span class="keyword" id="8447242">interface</span><span class="op" id="8447251">{</span><span class="op" id="8447252">}</span><span class="op" id="8447253">)</span>&nbsp;<span class="builtintype" id="8447255">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8447264">escaped</span>&nbsp;<span class="builtintype" id="8447272">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8447280">}</span><span class="op" id="8447281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8447285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447290">&#34;jsStrEscaper&#34;</span><span class="op" id="8447304">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8447309">jsStrEscaper</span><span class="op" id="8447321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447326">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8447360">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447366">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8447398">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447404">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8447439">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447445">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8447480">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447486">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="8447518">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447524">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="8447549">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447555">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8447574">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447580">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="8447600">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447606">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8447625">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447631">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8447653">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447659">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8447703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8447707">}</span><span class="op" id="8447708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8447712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447717">&#34;jsRegexpEscaper&#34;</span><span class="op" id="8447734">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8447739">jsRegexpEscaper</span><span class="op" id="8447754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447759">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8447793">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447799">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8447831">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447837">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8447872">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447878">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8447913">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447919">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="8447957">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447963">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="8447989">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8447995">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8448014">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8448020">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="8448043">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8448049">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8448068">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8448074">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="8448095">+</span>&nbsp;<span class="string" id="8448097">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="8448106">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8448112">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8448156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448160">}</span><span class="op" id="8448161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448168">for</span>&nbsp;<span class="ident" id="8448172">_</span><span class="op" id="8448173">,</span>&nbsp;<span class="ident" id="8448175">test</span>&nbsp;<span class="op" id="8448180">:=</span>&nbsp;<span class="keyword" id="8448183">range</span>&nbsp;<span class="ident" id="8448189">tests</span>&nbsp;<span class="op" id="8448195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448199">if</span>&nbsp;<span class="ident" id="8448202">s</span>&nbsp;<span class="op" id="8448204">:=</span>&nbsp;<span class="ident" id="8448207">test</span><span class="op" id="8448211">.</span><span class="ident" id="8448212">escaper</span><span class="op" id="8448219">(</span><span class="ident" id="8448220">input</span><span class="op" id="8448225">)</span><span class="op" id="8448226">;</span>&nbsp;<span class="ident" id="8448228">s</span>&nbsp;<span class="op" id="8448230">!=</span>&nbsp;<span class="ident" id="8448233">test</span><span class="op" id="8448237">.</span><span class="ident" id="8448238">escaped</span>&nbsp;<span class="op" id="8448246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8448251">t</span><span class="op" id="8448252">.</span><span class="ident" id="8448253">Errorf</span><span class="op" id="8448259">(</span><span class="string" id="8448260">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8448292">,</span>&nbsp;<span class="ident" id="8448294">test</span><span class="op" id="8448298">.</span><span class="ident" id="8448299">name</span><span class="op" id="8448303">,</span>&nbsp;<span class="ident" id="8448305">test</span><span class="op" id="8448309">.</span><span class="ident" id="8448310">escaped</span><span class="op" id="8448317">,</span>&nbsp;<span class="ident" id="8448319">s</span><span class="op" id="8448320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448325">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448336">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8448341">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8448391">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448440">var</span>&nbsp;<span class="ident" id="8448444">buf</span>&nbsp;<span class="ident" id="8448448">bytes</span><span class="op" id="8448453">.</span><span class="ident" id="8448454">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448463">for</span>&nbsp;<span class="ident" id="8448467">_</span><span class="op" id="8448468">,</span>&nbsp;<span class="ident" id="8448470">c</span>&nbsp;<span class="op" id="8448472">:=</span>&nbsp;<span class="keyword" id="8448475">range</span>&nbsp;<span class="ident" id="8448481">input</span>&nbsp;<span class="op" id="8448487">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8448492">buf</span><span class="op" id="8448495">.</span><span class="ident" id="8448496">WriteString</span><span class="op" id="8448507">(</span><span class="ident" id="8448508">test</span><span class="op" id="8448512">.</span><span class="ident" id="8448513">escaper</span><span class="op" id="8448520">(</span><span class="builtintype" id="8448521">string</span><span class="op" id="8448527">(</span><span class="ident" id="8448528">c</span><span class="op" id="8448529">)</span><span class="op" id="8448530">)</span><span class="op" id="8448531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448540">if</span>&nbsp;<span class="ident" id="8448543">s</span>&nbsp;<span class="op" id="8448545">:=</span>&nbsp;<span class="ident" id="8448548">buf</span><span class="op" id="8448551">.</span><span class="ident" id="8448552">String</span><span class="op" id="8448558">(</span><span class="op" id="8448559">)</span><span class="op" id="8448560">;</span>&nbsp;<span class="ident" id="8448562">s</span>&nbsp;<span class="op" id="8448564">!=</span>&nbsp;<span class="ident" id="8448567">test</span><span class="op" id="8448571">.</span><span class="ident" id="8448572">escaped</span>&nbsp;<span class="op" id="8448580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8448585">t</span><span class="op" id="8448586">.</span><span class="ident" id="8448587">Errorf</span><span class="op" id="8448593">(</span><span class="string" id="8448594">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8448631">,</span>&nbsp;<span class="ident" id="8448633">test</span><span class="op" id="8448637">.</span><span class="ident" id="8448638">name</span><span class="op" id="8448642">,</span>&nbsp;<span class="ident" id="8448644">test</span><span class="op" id="8448648">.</span><span class="ident" id="8448649">escaped</span><span class="op" id="8448656">,</span>&nbsp;<span class="ident" id="8448658">s</span><span class="op" id="8448659">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448664">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448678">}</span><br>
<span class="lineno"></span><span class="op" id="8448680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="8448683">func</span>&nbsp;<span class="ident" id="8448688">BenchmarkJSValEscaperWithNum</span><span class="op" id="8448716">(</span><span class="ident" id="8448717">b</span>&nbsp;<span class="op" id="8448719">*</span><span class="ident" id="8448720">testing</span><span class="op" id="8448727">.</span><span class="ident" id="8448728">B</span><span class="op" id="8448729">)</span>&nbsp;<span class="op" id="8448731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448734">for</span>&nbsp;<span class="ident" id="8448738">i</span>&nbsp;<span class="op" id="8448740">:=</span>&nbsp;<span class="num" id="8448743">0</span><span class="op" id="8448744">;</span>&nbsp;<span class="ident" id="8448746">i</span>&nbsp;<span class="op" id="8448748">&lt;</span>&nbsp;<span class="ident" id="8448750">b</span><span class="op" id="8448751">.</span><span class="ident" id="8448752">N</span><span class="op" id="8448753">;</span>&nbsp;<span class="ident" id="8448755">i</span><span class="op" id="8448756">++</span>&nbsp;<span class="op" id="8448759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8448763">jsValEscaper</span><span class="op" id="8448775">(</span><span class="num" id="8448776">3.141592654</span><span class="op" id="8448787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8448790">}</span><br>
<span class="lineno"></span><span class="op" id="8448792">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8448795">func</span>&nbsp;<span class="ident" id="8448800">BenchmarkJSValEscaperWithStr</span><span class="op" id="8448828">(</span><span class="ident" id="8448829">b</span>&nbsp;<span class="op" id="8448831">*</span><span class="ident" id="8448832">testing</span><span class="op" id="8448839">.</span><span class="ident" id="8448840">B</span><span class="op" id="8448841">)</span>&nbsp;<span class="op" id="8448843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8448846">for</span>&nbsp;<span class="ident" id="8448850">i</span>&nbsp;<span class="op" id="8448852">:=</span>&nbsp;<span class="num" id="8448855">0</span><span class="op" id="8448856">;</span>&nbsp;<span class="ident" id="8448858">i</span>&nbsp;<span class="op" id="8448860">&lt;</span>&nbsp;<span class="ident" id="8448862">b</span><span class="op" id="8448863">.</span><span class="ident" id="8448864">N</span><span class="op" id="8448865">;</span>&nbsp;<span class="ident" id="8448867">i</span><span class="op" id="8448868">++</span>&nbsp;<span class="op" id="8448871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8448875">jsValEscaper</span><span class="op" id="8448887">(</span><span class="string" id="8448888">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8449009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449012">}</span><br>
<span class="lineno">345</span><span class="op" id="8449014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8449017">func</span>&nbsp;<span class="ident" id="8449022">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="8449060">(</span><span class="ident" id="8449061">b</span>&nbsp;<span class="op" id="8449063">*</span><span class="ident" id="8449064">testing</span><span class="op" id="8449071">.</span><span class="ident" id="8449072">B</span><span class="op" id="8449073">)</span>&nbsp;<span class="op" id="8449075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8449078">for</span>&nbsp;<span class="ident" id="8449082">i</span>&nbsp;<span class="op" id="8449084">:=</span>&nbsp;<span class="num" id="8449087">0</span><span class="op" id="8449088">;</span>&nbsp;<span class="ident" id="8449090">i</span>&nbsp;<span class="op" id="8449092">&lt;</span>&nbsp;<span class="ident" id="8449094">b</span><span class="op" id="8449095">.</span><span class="ident" id="8449096">N</span><span class="op" id="8449097">;</span>&nbsp;<span class="ident" id="8449099">i</span><span class="op" id="8449100">++</span>&nbsp;<span class="op" id="8449103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449107">jsValEscaper</span><span class="op" id="8449119">(</span><span class="string" id="8449120">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8449166">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449169">}</span><br>
<span class="lineno"></span><span class="op" id="8449171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8449174">func</span>&nbsp;<span class="ident" id="8449179">BenchmarkJSValEscaperWithObj</span><span class="op" id="8449207">(</span><span class="ident" id="8449208">b</span>&nbsp;<span class="op" id="8449210">*</span><span class="ident" id="8449211">testing</span><span class="op" id="8449218">.</span><span class="ident" id="8449219">B</span><span class="op" id="8449220">)</span>&nbsp;<span class="op" id="8449222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449225">o</span>&nbsp;<span class="op" id="8449227">:=</span>&nbsp;<span class="keyword" id="8449230">struct</span>&nbsp;<span class="op" id="8449237">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449241">S</span>&nbsp;<span class="builtintype" id="8449243">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449252">N</span>&nbsp;<span class="builtintype" id="8449254">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449259">}</span><span class="op" id="8449260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8449264">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="8449391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8449395">42</span><span class="op" id="8449397">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8449403">for</span>&nbsp;<span class="ident" id="8449407">i</span>&nbsp;<span class="op" id="8449409">:=</span>&nbsp;<span class="num" id="8449412">0</span><span class="op" id="8449413">;</span>&nbsp;<span class="ident" id="8449415">i</span>&nbsp;<span class="op" id="8449417">&lt;</span>&nbsp;<span class="ident" id="8449419">b</span><span class="op" id="8449420">.</span><span class="ident" id="8449421">N</span><span class="op" id="8449422">;</span>&nbsp;<span class="ident" id="8449424">i</span><span class="op" id="8449425">++</span>&nbsp;<span class="op" id="8449428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449432">jsValEscaper</span><span class="op" id="8449444">(</span><span class="ident" id="8449445">o</span><span class="op" id="8449446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449449">}</span><br>
<span class="lineno"></span><span class="op" id="8449451">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="8449454">func</span>&nbsp;<span class="ident" id="8449459">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="8449497">(</span><span class="ident" id="8449498">b</span>&nbsp;<span class="op" id="8449500">*</span><span class="ident" id="8449501">testing</span><span class="op" id="8449508">.</span><span class="ident" id="8449509">B</span><span class="op" id="8449510">)</span>&nbsp;<span class="op" id="8449512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449515">o</span>&nbsp;<span class="op" id="8449517">:=</span>&nbsp;<span class="keyword" id="8449520">struct</span>&nbsp;<span class="op" id="8449527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449531">S</span>&nbsp;<span class="builtintype" id="8449533">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449542">N</span>&nbsp;<span class="builtintype" id="8449544">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449549">}</span><span class="op" id="8449550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8449554">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8449600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8449604">42</span><span class="op" id="8449606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8449612">for</span>&nbsp;<span class="ident" id="8449616">i</span>&nbsp;<span class="op" id="8449618">:=</span>&nbsp;<span class="num" id="8449621">0</span><span class="op" id="8449622">;</span>&nbsp;<span class="ident" id="8449624">i</span>&nbsp;<span class="op" id="8449626">&lt;</span>&nbsp;<span class="ident" id="8449628">b</span><span class="op" id="8449629">.</span><span class="ident" id="8449630">N</span><span class="op" id="8449631">;</span>&nbsp;<span class="ident" id="8449633">i</span><span class="op" id="8449634">++</span>&nbsp;<span class="op" id="8449637">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449641">jsValEscaper</span><span class="op" id="8449653">(</span><span class="ident" id="8449654">o</span><span class="op" id="8449655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449658">}</span><br>
<span class="lineno"></span><span class="op" id="8449660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8449663">func</span>&nbsp;<span class="ident" id="8449668">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="8449699">(</span><span class="ident" id="8449700">b</span>&nbsp;<span class="op" id="8449702">*</span><span class="ident" id="8449703">testing</span><span class="op" id="8449710">.</span><span class="ident" id="8449711">B</span><span class="op" id="8449712">)</span>&nbsp;<span class="op" id="8449714">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8449717">for</span>&nbsp;<span class="ident" id="8449721">i</span>&nbsp;<span class="op" id="8449723">:=</span>&nbsp;<span class="num" id="8449726">0</span><span class="op" id="8449727">;</span>&nbsp;<span class="ident" id="8449729">i</span>&nbsp;<span class="op" id="8449731">&lt;</span>&nbsp;<span class="ident" id="8449733">b</span><span class="op" id="8449734">.</span><span class="ident" id="8449735">N</span><span class="op" id="8449736">;</span>&nbsp;<span class="ident" id="8449738">i</span><span class="op" id="8449739">++</span>&nbsp;<span class="op" id="8449742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449746">jsStrEscaper</span><span class="op" id="8449758">(</span><span class="string" id="8449759">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="8449806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8449809">}</span><br>
<span class="lineno"></span><span class="op" id="8449811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="8449814">func</span>&nbsp;<span class="ident" id="8449819">BenchmarkJSStrEscaper</span><span class="op" id="8449840">(</span><span class="ident" id="8449841">b</span>&nbsp;<span class="op" id="8449843">*</span><span class="ident" id="8449844">testing</span><span class="op" id="8449851">.</span><span class="ident" id="8449852">B</span><span class="op" id="8449853">)</span>&nbsp;<span class="op" id="8449855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8449858">for</span>&nbsp;<span class="ident" id="8449862">i</span>&nbsp;<span class="op" id="8449864">:=</span>&nbsp;<span class="num" id="8449867">0</span><span class="op" id="8449868">;</span>&nbsp;<span class="ident" id="8449870">i</span>&nbsp;<span class="op" id="8449872">&lt;</span>&nbsp;<span class="ident" id="8449874">b</span><span class="op" id="8449875">.</span><span class="ident" id="8449876">N</span><span class="op" id="8449877">;</span>&nbsp;<span class="ident" id="8449879">i</span><span class="op" id="8449880">++</span>&nbsp;<span class="op" id="8449883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8449887">jsStrEscaper</span><span class="op" id="8449899">(</span><span class="string" id="8449900">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8450021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450024">}</span><br>
<span class="lineno"></span><span class="op" id="8450026">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="8450029">func</span>&nbsp;<span class="ident" id="8450034">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="8450068">(</span><span class="ident" id="8450069">b</span>&nbsp;<span class="op" id="8450071">*</span><span class="ident" id="8450072">testing</span><span class="op" id="8450079">.</span><span class="ident" id="8450080">B</span><span class="op" id="8450081">)</span>&nbsp;<span class="op" id="8450083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8450086">for</span>&nbsp;<span class="ident" id="8450090">i</span>&nbsp;<span class="op" id="8450092">:=</span>&nbsp;<span class="num" id="8450095">0</span><span class="op" id="8450096">;</span>&nbsp;<span class="ident" id="8450098">i</span>&nbsp;<span class="op" id="8450100">&lt;</span>&nbsp;<span class="ident" id="8450102">b</span><span class="op" id="8450103">.</span><span class="ident" id="8450104">N</span><span class="op" id="8450105">;</span>&nbsp;<span class="ident" id="8450107">i</span><span class="op" id="8450108">++</span>&nbsp;<span class="op" id="8450111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8450115">jsRegexpEscaper</span><span class="op" id="8450130">(</span><span class="string" id="8450131">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8450177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450180">}</span><br>
<span class="lineno">395</span><span class="op" id="8450182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8450185">func</span>&nbsp;<span class="ident" id="8450190">BenchmarkJSRegexpEscaper</span><span class="op" id="8450214">(</span><span class="ident" id="8450215">b</span>&nbsp;<span class="op" id="8450217">*</span><span class="ident" id="8450218">testing</span><span class="op" id="8450225">.</span><span class="ident" id="8450226">B</span><span class="op" id="8450227">)</span>&nbsp;<span class="op" id="8450229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8450232">for</span>&nbsp;<span class="ident" id="8450236">i</span>&nbsp;<span class="op" id="8450238">:=</span>&nbsp;<span class="num" id="8450241">0</span><span class="op" id="8450242">;</span>&nbsp;<span class="ident" id="8450244">i</span>&nbsp;<span class="op" id="8450246">&lt;</span>&nbsp;<span class="ident" id="8450248">b</span><span class="op" id="8450249">.</span><span class="ident" id="8450250">N</span><span class="op" id="8450251">;</span>&nbsp;<span class="ident" id="8450253">i</span><span class="op" id="8450254">++</span>&nbsp;<span class="op" id="8450257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8450261">jsRegexpEscaper</span><span class="op" id="8450276">(</span><span class="string" id="8450277">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8450398">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8450401">}</span><br>
<span class="lineno"></span><span class="op" id="8450403">}</span>
</div>
</body>
</html>
