<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6753510">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6753565">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6753619">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6753670">package</span>&nbsp;<span class="ident" id="6753678">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6753683">import</span>&nbsp;<span class="op" id="6753690">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6753693">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6753702">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6753713">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6753723">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6753726">type</span>&nbsp;<span class="ident" id="6753731">typeT</span>&nbsp;<span class="keyword" id="6753737">struct</span>&nbsp;<span class="op" id="6753744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753747">id</span>&nbsp;&nbsp;<span class="ident" id="6753751">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753759">str</span>&nbsp;<span class="builtintype" id="6753763">string</span><br>
<span class="lineno"></span><span class="op" id="6753770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6753773">var</span>&nbsp;<span class="ident" id="6753777">basicTypes</span>&nbsp;<span class="op" id="6753788">=</span>&nbsp;<span class="op" id="6753790">[</span><span class="op" id="6753791">]</span><span class="ident" id="6753792">typeT</span><span class="op" id="6753797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753800">{</span><span class="ident" id="6753801">tBool</span><span class="op" id="6753806">,</span>&nbsp;<span class="string" id="6753808">&#34;bool&#34;</span><span class="op" id="6753814">}</span><span class="op" id="6753815">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753818">{</span><span class="ident" id="6753819">tInt</span><span class="op" id="6753823">,</span>&nbsp;<span class="string" id="6753825">&#34;int&#34;</span><span class="op" id="6753830">}</span><span class="op" id="6753831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753834">{</span><span class="ident" id="6753835">tUint</span><span class="op" id="6753840">,</span>&nbsp;<span class="string" id="6753842">&#34;uint&#34;</span><span class="op" id="6753848">}</span><span class="op" id="6753849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753852">{</span><span class="ident" id="6753853">tFloat</span><span class="op" id="6753859">,</span>&nbsp;<span class="string" id="6753861">&#34;float&#34;</span><span class="op" id="6753868">}</span><span class="op" id="6753869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753872">{</span><span class="ident" id="6753873">tBytes</span><span class="op" id="6753879">,</span>&nbsp;<span class="string" id="6753881">&#34;bytes&#34;</span><span class="op" id="6753888">}</span><span class="op" id="6753889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753892">{</span><span class="ident" id="6753893">tString</span><span class="op" id="6753900">,</span>&nbsp;<span class="string" id="6753902">&#34;string&#34;</span><span class="op" id="6753910">}</span><span class="op" id="6753911">,</span><br>
<span class="lineno">25</span><span class="op" id="6753913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6753916">func</span>&nbsp;<span class="ident" id="6753921">getTypeUnlocked</span><span class="op" id="6753936">(</span><span class="ident" id="6753937">name</span>&nbsp;<span class="builtintype" id="6753942">string</span><span class="op" id="6753948">,</span>&nbsp;<span class="ident" id="6753950">rt</span>&nbsp;<span class="ident" id="6753953">reflect</span><span class="op" id="6753960">.</span><span class="ident" id="6753961">Type</span><span class="op" id="6753965">)</span>&nbsp;<span class="ident" id="6753967">gobType</span>&nbsp;<span class="op" id="6753975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753978">typeLock</span><span class="op" id="6753986">.</span><span class="ident" id="6753987">Lock</span><span class="op" id="6753991">(</span><span class="op" id="6753992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753995">defer</span>&nbsp;<span class="ident" id="6754001">typeLock</span><span class="op" id="6754009">.</span><span class="ident" id="6754010">Unlock</span><span class="op" id="6754016">(</span><span class="op" id="6754017">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754020">t</span><span class="op" id="6754021">,</span>&nbsp;<span class="ident" id="6754023">err</span>&nbsp;<span class="op" id="6754027">:=</span>&nbsp;<span class="ident" id="6754030">getBaseType</span><span class="op" id="6754041">(</span><span class="ident" id="6754042">name</span><span class="op" id="6754046">,</span>&nbsp;<span class="ident" id="6754048">rt</span><span class="op" id="6754050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754053">if</span>&nbsp;<span class="ident" id="6754056">err</span>&nbsp;<span class="op" id="6754060">!=</span>&nbsp;<span class="ident" id="6754063">nil</span>&nbsp;<span class="op" id="6754067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6754071">panic</span><span class="op" id="6754076">(</span><span class="string" id="6754077">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="6754097">+</span>&nbsp;<span class="ident" id="6754099">err</span><span class="op" id="6754102">.</span><span class="ident" id="6754103">Error</span><span class="op" id="6754108">(</span><span class="op" id="6754109">)</span><span class="op" id="6754110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754116">return</span>&nbsp;<span class="ident" id="6754123">t</span><br>
<span class="lineno">35</span><span class="op" id="6754125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6754128">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="6754145">func</span>&nbsp;<span class="ident" id="6754150">TestBasic</span><span class="op" id="6754159">(</span><span class="ident" id="6754160">t</span>&nbsp;<span class="op" id="6754162">*</span><span class="ident" id="6754163">testing</span><span class="op" id="6754170">.</span><span class="ident" id="6754171">T</span><span class="op" id="6754172">)</span>&nbsp;<span class="op" id="6754174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754177">for</span>&nbsp;<span class="ident" id="6754181">_</span><span class="op" id="6754182">,</span>&nbsp;<span class="ident" id="6754184">tt</span>&nbsp;<span class="op" id="6754187">:=</span>&nbsp;<span class="keyword" id="6754190">range</span>&nbsp;<span class="ident" id="6754196">basicTypes</span>&nbsp;<span class="op" id="6754207">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754211">if</span>&nbsp;<span class="ident" id="6754214">tt</span><span class="op" id="6754216">.</span><span class="ident" id="6754217">id</span><span class="op" id="6754219">.</span><span class="builtintype" id="6754220">string</span><span class="op" id="6754226">(</span><span class="op" id="6754227">)</span>&nbsp;<span class="op" id="6754229">!=</span>&nbsp;<span class="ident" id="6754232">tt</span><span class="op" id="6754234">.</span><span class="ident" id="6754235">str</span>&nbsp;<span class="op" id="6754239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754244">t</span><span class="op" id="6754245">.</span><span class="ident" id="6754246">Errorf</span><span class="op" id="6754252">(</span><span class="string" id="6754253">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6754284">,</span>&nbsp;<span class="ident" id="6754286">tt</span><span class="op" id="6754288">.</span><span class="ident" id="6754289">str</span><span class="op" id="6754292">,</span>&nbsp;<span class="ident" id="6754294">tt</span><span class="op" id="6754296">.</span><span class="ident" id="6754297">id</span><span class="op" id="6754299">.</span><span class="builtintype" id="6754300">string</span><span class="op" id="6754306">(</span><span class="op" id="6754307">)</span><span class="op" id="6754308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754316">if</span>&nbsp;<span class="ident" id="6754319">tt</span><span class="op" id="6754321">.</span><span class="ident" id="6754322">id</span>&nbsp;<span class="op" id="6754325">==</span>&nbsp;<span class="num" id="6754328">0</span>&nbsp;<span class="op" id="6754330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754335">t</span><span class="op" id="6754336">.</span><span class="ident" id="6754337">Errorf</span><span class="op" id="6754343">(</span><span class="string" id="6754344">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="6754363">,</span>&nbsp;<span class="ident" id="6754365">tt</span><span class="op" id="6754367">.</span><span class="ident" id="6754368">str</span><span class="op" id="6754371">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754378">}</span><br>
<span class="lineno"></span><span class="op" id="6754380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6754383">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="6754451">func</span>&nbsp;<span class="ident" id="6754456">TestReregistration</span><span class="op" id="6754474">(</span><span class="ident" id="6754475">t</span>&nbsp;<span class="op" id="6754477">*</span><span class="ident" id="6754478">testing</span><span class="op" id="6754485">.</span><span class="ident" id="6754486">T</span><span class="op" id="6754487">)</span>&nbsp;<span class="op" id="6754489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754492">newtyp</span>&nbsp;<span class="op" id="6754499">:=</span>&nbsp;<span class="ident" id="6754502">getTypeUnlocked</span><span class="op" id="6754517">(</span><span class="string" id="6754518">&#34;int&#34;</span><span class="op" id="6754523">,</span>&nbsp;<span class="ident" id="6754525">reflect</span><span class="op" id="6754532">.</span><span class="ident" id="6754533">TypeOf</span><span class="op" id="6754539">(</span><span class="builtintype" id="6754540">int</span><span class="op" id="6754543">(</span><span class="num" id="6754544">0</span><span class="op" id="6754545">)</span><span class="op" id="6754546">)</span><span class="op" id="6754547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754550">if</span>&nbsp;<span class="ident" id="6754553">newtyp</span>&nbsp;<span class="op" id="6754560">!=</span>&nbsp;<span class="ident" id="6754563">tInt</span><span class="op" id="6754567">.</span><span class="ident" id="6754568">gobType</span><span class="op" id="6754575">(</span><span class="op" id="6754576">)</span>&nbsp;<span class="op" id="6754578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754582">t</span><span class="op" id="6754583">.</span><span class="ident" id="6754584">Errorf</span><span class="op" id="6754590">(</span><span class="string" id="6754591">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6754626">,</span>&nbsp;<span class="ident" id="6754628">newtyp</span><span class="op" id="6754634">.</span><span class="builtintype" id="6754635">string</span><span class="op" id="6754641">(</span><span class="op" id="6754642">)</span><span class="op" id="6754643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754646">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754649">newtyp</span>&nbsp;<span class="op" id="6754656">=</span>&nbsp;<span class="ident" id="6754658">getTypeUnlocked</span><span class="op" id="6754673">(</span><span class="string" id="6754674">&#34;uint&#34;</span><span class="op" id="6754680">,</span>&nbsp;<span class="ident" id="6754682">reflect</span><span class="op" id="6754689">.</span><span class="ident" id="6754690">TypeOf</span><span class="op" id="6754696">(</span><span class="builtintype" id="6754697">uint</span><span class="op" id="6754701">(</span><span class="num" id="6754702">0</span><span class="op" id="6754703">)</span><span class="op" id="6754704">)</span><span class="op" id="6754705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754708">if</span>&nbsp;<span class="ident" id="6754711">newtyp</span>&nbsp;<span class="op" id="6754718">!=</span>&nbsp;<span class="ident" id="6754721">tUint</span><span class="op" id="6754726">.</span><span class="ident" id="6754727">gobType</span><span class="op" id="6754734">(</span><span class="op" id="6754735">)</span>&nbsp;<span class="op" id="6754737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754741">t</span><span class="op" id="6754742">.</span><span class="ident" id="6754743">Errorf</span><span class="op" id="6754749">(</span><span class="string" id="6754750">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6754785">,</span>&nbsp;<span class="ident" id="6754787">newtyp</span><span class="op" id="6754793">.</span><span class="builtintype" id="6754794">string</span><span class="op" id="6754800">(</span><span class="op" id="6754801">)</span><span class="op" id="6754802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754808">newtyp</span>&nbsp;<span class="op" id="6754815">=</span>&nbsp;<span class="ident" id="6754817">getTypeUnlocked</span><span class="op" id="6754832">(</span><span class="string" id="6754833">&#34;string&#34;</span><span class="op" id="6754841">,</span>&nbsp;<span class="ident" id="6754843">reflect</span><span class="op" id="6754850">.</span><span class="ident" id="6754851">TypeOf</span><span class="op" id="6754857">(</span><span class="string" id="6754858">&#34;hello&#34;</span><span class="op" id="6754865">)</span><span class="op" id="6754866">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6754869">if</span>&nbsp;<span class="ident" id="6754872">newtyp</span>&nbsp;<span class="op" id="6754879">!=</span>&nbsp;<span class="ident" id="6754882">tString</span><span class="op" id="6754889">.</span><span class="ident" id="6754890">gobType</span><span class="op" id="6754897">(</span><span class="op" id="6754898">)</span>&nbsp;<span class="op" id="6754900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6754904">t</span><span class="op" id="6754905">.</span><span class="ident" id="6754906">Errorf</span><span class="op" id="6754912">(</span><span class="string" id="6754913">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6754948">,</span>&nbsp;<span class="ident" id="6754950">newtyp</span><span class="op" id="6754956">.</span><span class="builtintype" id="6754957">string</span><span class="op" id="6754963">(</span><span class="op" id="6754964">)</span><span class="op" id="6754965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6754968">}</span><br>
<span class="lineno"></span><span class="op" id="6754970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6754973">func</span>&nbsp;<span class="ident" id="6754978">TestArrayType</span><span class="op" id="6754991">(</span><span class="ident" id="6754992">t</span>&nbsp;<span class="op" id="6754994">*</span><span class="ident" id="6754995">testing</span><span class="op" id="6755002">.</span><span class="ident" id="6755003">T</span><span class="op" id="6755004">)</span>&nbsp;<span class="op" id="6755006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755009">var</span>&nbsp;<span class="ident" id="6755013">a3</span>&nbsp;<span class="op" id="6755016">[</span><span class="num" id="6755017">3</span><span class="op" id="6755018">]</span><span class="builtintype" id="6755019">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755024">a3int</span>&nbsp;<span class="op" id="6755030">:=</span>&nbsp;<span class="ident" id="6755033">getTypeUnlocked</span><span class="op" id="6755048">(</span><span class="string" id="6755049">&#34;foo&#34;</span><span class="op" id="6755054">,</span>&nbsp;<span class="ident" id="6755056">reflect</span><span class="op" id="6755063">.</span><span class="ident" id="6755064">TypeOf</span><span class="op" id="6755070">(</span><span class="ident" id="6755071">a3</span><span class="op" id="6755073">)</span><span class="op" id="6755074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755077">newa3int</span>&nbsp;<span class="op" id="6755086">:=</span>&nbsp;<span class="ident" id="6755089">getTypeUnlocked</span><span class="op" id="6755104">(</span><span class="string" id="6755105">&#34;bar&#34;</span><span class="op" id="6755110">,</span>&nbsp;<span class="ident" id="6755112">reflect</span><span class="op" id="6755119">.</span><span class="ident" id="6755120">TypeOf</span><span class="op" id="6755126">(</span><span class="ident" id="6755127">a3</span><span class="op" id="6755129">)</span><span class="op" id="6755130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755133">if</span>&nbsp;<span class="ident" id="6755136">a3int</span>&nbsp;<span class="op" id="6755142">!=</span>&nbsp;<span class="ident" id="6755145">newa3int</span>&nbsp;<span class="op" id="6755154">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755158">t</span><span class="op" id="6755159">.</span><span class="ident" id="6755160">Errorf</span><span class="op" id="6755166">(</span><span class="string" id="6755167">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6755215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6755218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755221">var</span>&nbsp;<span class="ident" id="6755225">a4</span>&nbsp;<span class="op" id="6755228">[</span><span class="num" id="6755229">4</span><span class="op" id="6755230">]</span><span class="builtintype" id="6755231">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755236">a4int</span>&nbsp;<span class="op" id="6755242">:=</span>&nbsp;<span class="ident" id="6755245">getTypeUnlocked</span><span class="op" id="6755260">(</span><span class="string" id="6755261">&#34;goo&#34;</span><span class="op" id="6755266">,</span>&nbsp;<span class="ident" id="6755268">reflect</span><span class="op" id="6755275">.</span><span class="ident" id="6755276">TypeOf</span><span class="op" id="6755282">(</span><span class="ident" id="6755283">a4</span><span class="op" id="6755285">)</span><span class="op" id="6755286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755289">if</span>&nbsp;<span class="ident" id="6755292">a3int</span>&nbsp;<span class="op" id="6755298">==</span>&nbsp;<span class="ident" id="6755301">a4int</span>&nbsp;<span class="op" id="6755307">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755311">t</span><span class="op" id="6755312">.</span><span class="ident" id="6755313">Errorf</span><span class="op" id="6755319">(</span><span class="string" id="6755320">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="6755372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6755375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755378">var</span>&nbsp;<span class="ident" id="6755382">b3</span>&nbsp;<span class="op" id="6755385">[</span><span class="num" id="6755386">3</span><span class="op" id="6755387">]</span><span class="builtintype" id="6755388">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755394">a3bool</span>&nbsp;<span class="op" id="6755401">:=</span>&nbsp;<span class="ident" id="6755404">getTypeUnlocked</span><span class="op" id="6755419">(</span><span class="string" id="6755420">&#34;&#34;</span><span class="op" id="6755422">,</span>&nbsp;<span class="ident" id="6755424">reflect</span><span class="op" id="6755431">.</span><span class="ident" id="6755432">TypeOf</span><span class="op" id="6755438">(</span><span class="ident" id="6755439">b3</span><span class="op" id="6755441">)</span><span class="op" id="6755442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755445">if</span>&nbsp;<span class="ident" id="6755448">a3int</span>&nbsp;<span class="op" id="6755454">==</span>&nbsp;<span class="ident" id="6755457">a3bool</span>&nbsp;<span class="op" id="6755464">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755468">t</span><span class="op" id="6755469">.</span><span class="ident" id="6755470">Errorf</span><span class="op" id="6755476">(</span><span class="string" id="6755477">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="6755530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6755533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755536">str</span>&nbsp;<span class="op" id="6755540">:=</span>&nbsp;<span class="ident" id="6755543">a3bool</span><span class="op" id="6755549">.</span><span class="builtintype" id="6755550">string</span><span class="op" id="6755556">(</span><span class="op" id="6755557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755560">expected</span>&nbsp;<span class="op" id="6755569">:=</span>&nbsp;<span class="string" id="6755572">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755583">if</span>&nbsp;<span class="ident" id="6755586">str</span>&nbsp;<span class="op" id="6755590">!=</span>&nbsp;<span class="ident" id="6755593">expected</span>&nbsp;<span class="op" id="6755602">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755606">t</span><span class="op" id="6755607">.</span><span class="ident" id="6755608">Errorf</span><span class="op" id="6755614">(</span><span class="string" id="6755615">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6755649">,</span>&nbsp;<span class="ident" id="6755651">str</span><span class="op" id="6755654">,</span>&nbsp;<span class="ident" id="6755656">expected</span><span class="op" id="6755664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6755667">}</span><br>
<span class="lineno"></span><span class="op" id="6755669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6755672">func</span>&nbsp;<span class="ident" id="6755677">TestSliceType</span><span class="op" id="6755690">(</span><span class="ident" id="6755691">t</span>&nbsp;<span class="op" id="6755693">*</span><span class="ident" id="6755694">testing</span><span class="op" id="6755701">.</span><span class="ident" id="6755702">T</span><span class="op" id="6755703">)</span>&nbsp;<span class="op" id="6755705">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755708">var</span>&nbsp;<span class="ident" id="6755712">s</span>&nbsp;<span class="op" id="6755714">[</span><span class="op" id="6755715">]</span><span class="builtintype" id="6755716">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755721">sint</span>&nbsp;<span class="op" id="6755726">:=</span>&nbsp;<span class="ident" id="6755729">getTypeUnlocked</span><span class="op" id="6755744">(</span><span class="string" id="6755745">&#34;slice&#34;</span><span class="op" id="6755752">,</span>&nbsp;<span class="ident" id="6755754">reflect</span><span class="op" id="6755761">.</span><span class="ident" id="6755762">TypeOf</span><span class="op" id="6755768">(</span><span class="ident" id="6755769">s</span><span class="op" id="6755770">)</span><span class="op" id="6755771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755774">var</span>&nbsp;<span class="ident" id="6755778">news</span>&nbsp;<span class="op" id="6755783">[</span><span class="op" id="6755784">]</span><span class="builtintype" id="6755785">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755790">newsint</span>&nbsp;<span class="op" id="6755798">:=</span>&nbsp;<span class="ident" id="6755801">getTypeUnlocked</span><span class="op" id="6755816">(</span><span class="string" id="6755817">&#34;slice1&#34;</span><span class="op" id="6755825">,</span>&nbsp;<span class="ident" id="6755827">reflect</span><span class="op" id="6755834">.</span><span class="ident" id="6755835">TypeOf</span><span class="op" id="6755841">(</span><span class="ident" id="6755842">news</span><span class="op" id="6755846">)</span><span class="op" id="6755847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755850">if</span>&nbsp;<span class="ident" id="6755853">sint</span>&nbsp;<span class="op" id="6755858">!=</span>&nbsp;<span class="ident" id="6755861">newsint</span>&nbsp;<span class="op" id="6755869">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755873">t</span><span class="op" id="6755874">.</span><span class="ident" id="6755875">Errorf</span><span class="op" id="6755881">(</span><span class="string" id="6755882">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6755929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6755932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755935">var</span>&nbsp;<span class="ident" id="6755939">b</span>&nbsp;<span class="op" id="6755941">[</span><span class="op" id="6755942">]</span><span class="builtintype" id="6755943">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6755949">sbool</span>&nbsp;<span class="op" id="6755955">:=</span>&nbsp;<span class="ident" id="6755958">getTypeUnlocked</span><span class="op" id="6755973">(</span><span class="string" id="6755974">&#34;&#34;</span><span class="op" id="6755976">,</span>&nbsp;<span class="ident" id="6755978">reflect</span><span class="op" id="6755985">.</span><span class="ident" id="6755986">TypeOf</span><span class="op" id="6755992">(</span><span class="ident" id="6755993">b</span><span class="op" id="6755994">)</span><span class="op" id="6755995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6755998">if</span>&nbsp;<span class="ident" id="6756001">sbool</span>&nbsp;<span class="op" id="6756007">==</span>&nbsp;<span class="ident" id="6756010">sint</span>&nbsp;<span class="op" id="6756015">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756019">t</span><span class="op" id="6756020">.</span><span class="ident" id="6756021">Errorf</span><span class="op" id="6756027">(</span><span class="string" id="6756028">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="6756079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756085">str</span>&nbsp;<span class="op" id="6756089">:=</span>&nbsp;<span class="ident" id="6756092">sbool</span><span class="op" id="6756097">.</span><span class="builtintype" id="6756098">string</span><span class="op" id="6756104">(</span><span class="op" id="6756105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756108">expected</span>&nbsp;<span class="op" id="6756117">:=</span>&nbsp;<span class="string" id="6756120">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756130">if</span>&nbsp;<span class="ident" id="6756133">str</span>&nbsp;<span class="op" id="6756137">!=</span>&nbsp;<span class="ident" id="6756140">expected</span>&nbsp;<span class="op" id="6756149">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756153">t</span><span class="op" id="6756154">.</span><span class="ident" id="6756155">Errorf</span><span class="op" id="6756161">(</span><span class="string" id="6756162">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6756196">,</span>&nbsp;<span class="ident" id="6756198">str</span><span class="op" id="6756201">,</span>&nbsp;<span class="ident" id="6756203">expected</span><span class="op" id="6756211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756214">}</span><br>
<span class="lineno"></span><span class="op" id="6756216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6756219">func</span>&nbsp;<span class="ident" id="6756224">TestMapType</span><span class="op" id="6756235">(</span><span class="ident" id="6756236">t</span>&nbsp;<span class="op" id="6756238">*</span><span class="ident" id="6756239">testing</span><span class="op" id="6756246">.</span><span class="ident" id="6756247">T</span><span class="op" id="6756248">)</span>&nbsp;<span class="op" id="6756250">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756253">var</span>&nbsp;<span class="ident" id="6756257">m</span>&nbsp;<span class="keyword" id="6756259">map</span><span class="op" id="6756262">[</span><span class="builtintype" id="6756263">string</span><span class="op" id="6756269">]</span><span class="builtintype" id="6756270">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756275">mapStringInt</span>&nbsp;<span class="op" id="6756288">:=</span>&nbsp;<span class="ident" id="6756291">getTypeUnlocked</span><span class="op" id="6756306">(</span><span class="string" id="6756307">&#34;map&#34;</span><span class="op" id="6756312">,</span>&nbsp;<span class="ident" id="6756314">reflect</span><span class="op" id="6756321">.</span><span class="ident" id="6756322">TypeOf</span><span class="op" id="6756328">(</span><span class="ident" id="6756329">m</span><span class="op" id="6756330">)</span><span class="op" id="6756331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756334">var</span>&nbsp;<span class="ident" id="6756338">newm</span>&nbsp;<span class="keyword" id="6756343">map</span><span class="op" id="6756346">[</span><span class="builtintype" id="6756347">string</span><span class="op" id="6756353">]</span><span class="builtintype" id="6756354">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756359">newMapStringInt</span>&nbsp;<span class="op" id="6756375">:=</span>&nbsp;<span class="ident" id="6756378">getTypeUnlocked</span><span class="op" id="6756393">(</span><span class="string" id="6756394">&#34;map1&#34;</span><span class="op" id="6756400">,</span>&nbsp;<span class="ident" id="6756402">reflect</span><span class="op" id="6756409">.</span><span class="ident" id="6756410">TypeOf</span><span class="op" id="6756416">(</span><span class="ident" id="6756417">newm</span><span class="op" id="6756421">)</span><span class="op" id="6756422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756425">if</span>&nbsp;<span class="ident" id="6756428">mapStringInt</span>&nbsp;<span class="op" id="6756441">!=</span>&nbsp;<span class="ident" id="6756444">newMapStringInt</span>&nbsp;<span class="op" id="6756460">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756464">t</span><span class="op" id="6756465">.</span><span class="ident" id="6756466">Errorf</span><span class="op" id="6756472">(</span><span class="string" id="6756473">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6756529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756535">var</span>&nbsp;<span class="ident" id="6756539">b</span>&nbsp;<span class="keyword" id="6756541">map</span><span class="op" id="6756544">[</span><span class="builtintype" id="6756545">string</span><span class="op" id="6756551">]</span><span class="builtintype" id="6756552">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756558">mapStringBool</span>&nbsp;<span class="op" id="6756572">:=</span>&nbsp;<span class="ident" id="6756575">getTypeUnlocked</span><span class="op" id="6756590">(</span><span class="string" id="6756591">&#34;&#34;</span><span class="op" id="6756593">,</span>&nbsp;<span class="ident" id="6756595">reflect</span><span class="op" id="6756602">.</span><span class="ident" id="6756603">TypeOf</span><span class="op" id="6756609">(</span><span class="ident" id="6756610">b</span><span class="op" id="6756611">)</span><span class="op" id="6756612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756615">if</span>&nbsp;<span class="ident" id="6756618">mapStringBool</span>&nbsp;<span class="op" id="6756632">==</span>&nbsp;<span class="ident" id="6756635">mapStringInt</span>&nbsp;<span class="op" id="6756648">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756652">t</span><span class="op" id="6756653">.</span><span class="ident" id="6756654">Errorf</span><span class="op" id="6756660">(</span><span class="string" id="6756661">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="6756730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756736">str</span>&nbsp;<span class="op" id="6756740">:=</span>&nbsp;<span class="ident" id="6756743">mapStringBool</span><span class="op" id="6756756">.</span><span class="builtintype" id="6756757">string</span><span class="op" id="6756763">(</span><span class="op" id="6756764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756767">expected</span>&nbsp;<span class="op" id="6756776">:=</span>&nbsp;<span class="string" id="6756779">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6756798">if</span>&nbsp;<span class="ident" id="6756801">str</span>&nbsp;<span class="op" id="6756805">!=</span>&nbsp;<span class="ident" id="6756808">expected</span>&nbsp;<span class="op" id="6756817">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756821">t</span><span class="op" id="6756822">.</span><span class="ident" id="6756823">Errorf</span><span class="op" id="6756829">(</span><span class="string" id="6756830">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6756862">,</span>&nbsp;<span class="ident" id="6756864">str</span><span class="op" id="6756867">,</span>&nbsp;<span class="ident" id="6756869">expected</span><span class="op" id="6756877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6756880">}</span><br>
<span class="lineno"></span><span class="op" id="6756882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6756885">type</span>&nbsp;<span class="ident" id="6756890">Bar</span>&nbsp;<span class="keyword" id="6756894">struct</span>&nbsp;<span class="op" id="6756901">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6756904">X</span>&nbsp;<span class="builtintype" id="6756906">string</span><br>
<span class="lineno"></span><span class="op" id="6756913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6756916">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="6756997">type</span>&nbsp;<span class="ident" id="6757002">Foo</span>&nbsp;<span class="keyword" id="6757006">struct</span>&nbsp;<span class="op" id="6757013">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757016">A</span>&nbsp;<span class="builtintype" id="6757018">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757023">B</span>&nbsp;<span class="builtintype" id="6757025">int32</span>&nbsp;<span class="comment" id="6757031">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757051">C</span>&nbsp;<span class="builtintype" id="6757053">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757061">D</span>&nbsp;<span class="op" id="6757063">[</span><span class="op" id="6757064">]</span><span class="builtintype" id="6757065">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757071">E</span>&nbsp;<span class="op" id="6757073">*</span><span class="builtintype" id="6757074">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6757085">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757109">F</span>&nbsp;<span class="op" id="6757111">*</span><span class="op" id="6757112">*</span><span class="op" id="6757113">*</span><span class="op" id="6757114">*</span><span class="builtintype" id="6757115">float64</span>&nbsp;<span class="comment" id="6757123">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757147">G</span>&nbsp;<span class="op" id="6757149">*</span><span class="ident" id="6757150">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757155">H</span>&nbsp;<span class="op" id="6757157">*</span><span class="ident" id="6757158">Bar</span>&nbsp;<span class="comment" id="6757162">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757217">I</span>&nbsp;<span class="op" id="6757219">*</span><span class="ident" id="6757220">Foo</span>&nbsp;<span class="comment" id="6757224">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="6757244">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="6757247">func</span>&nbsp;<span class="ident" id="6757252">TestStructType</span><span class="op" id="6757266">(</span><span class="ident" id="6757267">t</span>&nbsp;<span class="op" id="6757269">*</span><span class="ident" id="6757270">testing</span><span class="op" id="6757277">.</span><span class="ident" id="6757278">T</span><span class="op" id="6757279">)</span>&nbsp;<span class="op" id="6757281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757284">sstruct</span>&nbsp;<span class="op" id="6757292">:=</span>&nbsp;<span class="ident" id="6757295">getTypeUnlocked</span><span class="op" id="6757310">(</span><span class="string" id="6757311">&#34;Foo&#34;</span><span class="op" id="6757316">,</span>&nbsp;<span class="ident" id="6757318">reflect</span><span class="op" id="6757325">.</span><span class="ident" id="6757326">TypeOf</span><span class="op" id="6757332">(</span><span class="ident" id="6757333">Foo</span><span class="op" id="6757336">{</span><span class="op" id="6757337">}</span><span class="op" id="6757338">)</span><span class="op" id="6757339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757342">str</span>&nbsp;<span class="op" id="6757346">:=</span>&nbsp;<span class="ident" id="6757349">sstruct</span><span class="op" id="6757356">.</span><span class="builtintype" id="6757357">string</span><span class="op" id="6757363">(</span><span class="op" id="6757364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6757367">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757424">expected</span>&nbsp;<span class="op" id="6757433">:=</span>&nbsp;<span class="string" id="6757436">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757551">if</span>&nbsp;<span class="ident" id="6757554">str</span>&nbsp;<span class="op" id="6757558">!=</span>&nbsp;<span class="ident" id="6757561">expected</span>&nbsp;<span class="op" id="6757570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757574">t</span><span class="op" id="6757575">.</span><span class="ident" id="6757576">Errorf</span><span class="op" id="6757582">(</span><span class="string" id="6757583">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6757618">,</span>&nbsp;<span class="ident" id="6757620">str</span><span class="op" id="6757623">,</span>&nbsp;<span class="ident" id="6757625">expected</span><span class="op" id="6757633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6757636">}</span><br>
<span class="lineno"></span><span class="op" id="6757638">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6757641">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="6757718">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="6757755">func</span>&nbsp;<span class="ident" id="6757760">TestRegistration</span><span class="op" id="6757776">(</span><span class="ident" id="6757777">t</span>&nbsp;<span class="op" id="6757779">*</span><span class="ident" id="6757780">testing</span><span class="op" id="6757787">.</span><span class="ident" id="6757788">T</span><span class="op" id="6757789">)</span>&nbsp;<span class="op" id="6757791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6757794">type</span>&nbsp;<span class="ident" id="6757799">T</span>&nbsp;<span class="keyword" id="6757801">struct</span><span class="op" id="6757807">{</span>&nbsp;<span class="ident" id="6757809">a</span>&nbsp;<span class="builtintype" id="6757811">int</span>&nbsp;<span class="op" id="6757815">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757818">Register</span><span class="op" id="6757826">(</span><span class="builtinfunc" id="6757827">new</span><span class="op" id="6757830">(</span><span class="ident" id="6757831">T</span><span class="op" id="6757832">)</span><span class="op" id="6757833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757836">Register</span><span class="op" id="6757844">(</span><span class="builtinfunc" id="6757845">new</span><span class="op" id="6757848">(</span><span class="ident" id="6757849">T</span><span class="op" id="6757850">)</span><span class="op" id="6757851">)</span><br>
<span class="lineno"></span><span class="op" id="6757853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6757856">type</span>&nbsp;<span class="ident" id="6757861">N1</span>&nbsp;<span class="keyword" id="6757864">struct</span><span class="op" id="6757870">{</span><span class="op" id="6757871">}</span><br>
<span class="lineno">165</span><span class="keyword" id="6757873">type</span>&nbsp;<span class="ident" id="6757878">N2</span>&nbsp;<span class="keyword" id="6757881">struct</span><span class="op" id="6757887">{</span><span class="op" id="6757888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6757891">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="6757927">func</span>&nbsp;<span class="ident" id="6757932">TestRegistrationNaming</span><span class="op" id="6757954">(</span><span class="ident" id="6757955">t</span>&nbsp;<span class="op" id="6757957">*</span><span class="ident" id="6757958">testing</span><span class="op" id="6757965">.</span><span class="ident" id="6757966">T</span><span class="op" id="6757967">)</span>&nbsp;<span class="op" id="6757969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757972">testCases</span>&nbsp;<span class="op" id="6757982">:=</span>&nbsp;<span class="op" id="6757985">[</span><span class="op" id="6757986">]</span><span class="keyword" id="6757987">struct</span>&nbsp;<span class="op" id="6757994">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6757998">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6758003">interface</span><span class="op" id="6758012">{</span><span class="op" id="6758013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758017">name</span>&nbsp;<span class="builtintype" id="6758022">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758030">}</span><span class="op" id="6758031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758035">{</span><span class="op" id="6758036">&amp;</span><span class="ident" id="6758037">N1</span><span class="op" id="6758039">{</span><span class="op" id="6758040">}</span><span class="op" id="6758041">,</span>&nbsp;<span class="string" id="6758043">&#34;*gob.N1&#34;</span><span class="op" id="6758052">}</span><span class="op" id="6758053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758057">{</span><span class="ident" id="6758058">N2</span><span class="op" id="6758060">{</span><span class="op" id="6758061">}</span><span class="op" id="6758062">,</span>&nbsp;<span class="string" id="6758064">&#34;encoding/gob.N2&#34;</span><span class="op" id="6758081">}</span><span class="op" id="6758082">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758089">for</span>&nbsp;<span class="ident" id="6758093">_</span><span class="op" id="6758094">,</span>&nbsp;<span class="ident" id="6758096">tc</span>&nbsp;<span class="op" id="6758099">:=</span>&nbsp;<span class="keyword" id="6758102">range</span>&nbsp;<span class="ident" id="6758108">testCases</span>&nbsp;<span class="op" id="6758118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758122">Register</span><span class="op" id="6758130">(</span><span class="ident" id="6758131">tc</span><span class="op" id="6758133">.</span><span class="ident" id="6758134">t</span><span class="op" id="6758135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758140">tct</span>&nbsp;<span class="op" id="6758144">:=</span>&nbsp;<span class="ident" id="6758147">reflect</span><span class="op" id="6758154">.</span><span class="ident" id="6758155">TypeOf</span><span class="op" id="6758161">(</span><span class="ident" id="6758162">tc</span><span class="op" id="6758164">.</span><span class="ident" id="6758165">t</span><span class="op" id="6758166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758170">registerLock</span><span class="op" id="6758182">.</span><span class="ident" id="6758183">RLock</span><span class="op" id="6758188">(</span><span class="op" id="6758189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758193">ct</span>&nbsp;<span class="op" id="6758196">:=</span>&nbsp;<span class="ident" id="6758199">nameToConcreteType</span><span class="op" id="6758217">[</span><span class="ident" id="6758218">tc</span><span class="op" id="6758220">.</span><span class="ident" id="6758221">name</span><span class="op" id="6758225">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758229">registerLock</span><span class="op" id="6758241">.</span><span class="ident" id="6758242">RUnlock</span><span class="op" id="6758249">(</span><span class="op" id="6758250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758254">if</span>&nbsp;<span class="ident" id="6758257">ct</span>&nbsp;<span class="op" id="6758260">!=</span>&nbsp;<span class="ident" id="6758263">tct</span>&nbsp;<span class="op" id="6758267">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758272">t</span><span class="op" id="6758273">.</span><span class="ident" id="6758274">Errorf</span><span class="op" id="6758280">(</span><span class="string" id="6758281">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6758319">,</span>&nbsp;<span class="ident" id="6758321">tc</span><span class="op" id="6758323">.</span><span class="ident" id="6758324">name</span><span class="op" id="6758328">,</span>&nbsp;<span class="ident" id="6758330">ct</span><span class="op" id="6758332">,</span>&nbsp;<span class="ident" id="6758334">tct</span><span class="op" id="6758337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6758345">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758397">if</span>&nbsp;<span class="ident" id="6758400">tct</span><span class="op" id="6758403">.</span><span class="ident" id="6758404">Kind</span><span class="op" id="6758408">(</span><span class="op" id="6758409">)</span>&nbsp;<span class="op" id="6758411">==</span>&nbsp;<span class="ident" id="6758414">reflect</span><span class="op" id="6758421">.</span><span class="ident" id="6758422">Ptr</span>&nbsp;<span class="op" id="6758426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758431">tct</span>&nbsp;<span class="op" id="6758435">=</span>&nbsp;<span class="ident" id="6758437">tct</span><span class="op" id="6758440">.</span><span class="ident" id="6758441">Elem</span><span class="op" id="6758445">(</span><span class="op" id="6758446">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758454">if</span>&nbsp;<span class="ident" id="6758457">n</span>&nbsp;<span class="op" id="6758459">:=</span>&nbsp;<span class="ident" id="6758462">concreteTypeToName</span><span class="op" id="6758480">[</span><span class="ident" id="6758481">tct</span><span class="op" id="6758484">]</span><span class="op" id="6758485">;</span>&nbsp;<span class="ident" id="6758487">n</span>&nbsp;<span class="op" id="6758489">!=</span>&nbsp;<span class="ident" id="6758492">tc</span><span class="op" id="6758494">.</span><span class="ident" id="6758495">name</span>&nbsp;<span class="op" id="6758500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758505">t</span><span class="op" id="6758506">.</span><span class="ident" id="6758507">Errorf</span><span class="op" id="6758513">(</span><span class="string" id="6758514">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6758554">,</span>&nbsp;<span class="ident" id="6758556">tct</span><span class="op" id="6758559">,</span>&nbsp;<span class="ident" id="6758561">n</span><span class="op" id="6758562">,</span>&nbsp;<span class="ident" id="6758564">tc</span><span class="op" id="6758566">.</span><span class="ident" id="6758567">name</span><span class="op" id="6758571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758578">}</span><br>
<span class="lineno">195</span><span class="op" id="6758580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6758583">func</span>&nbsp;<span class="ident" id="6758588">TestStressParallel</span><span class="op" id="6758606">(</span><span class="ident" id="6758607">t</span>&nbsp;<span class="op" id="6758609">*</span><span class="ident" id="6758610">testing</span><span class="op" id="6758617">.</span><span class="ident" id="6758618">T</span><span class="op" id="6758619">)</span>&nbsp;<span class="op" id="6758621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758624">type</span>&nbsp;<span class="ident" id="6758629">T2</span>&nbsp;<span class="keyword" id="6758632">struct</span><span class="op" id="6758638">{</span>&nbsp;<span class="ident" id="6758640">A</span>&nbsp;<span class="builtintype" id="6758642">int</span>&nbsp;<span class="op" id="6758646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758649">c</span>&nbsp;<span class="op" id="6758651">:=</span>&nbsp;<span class="builtinfunc" id="6758654">make</span><span class="op" id="6758658">(</span><span class="keyword" id="6758659">chan</span>&nbsp;<span class="builtintype" id="6758664">bool</span><span class="op" id="6758668">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758671">const</span>&nbsp;<span class="ident" id="6758677">N</span>&nbsp;<span class="op" id="6758679">=</span>&nbsp;<span class="num" id="6758681">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758685">for</span>&nbsp;<span class="ident" id="6758689">i</span>&nbsp;<span class="op" id="6758691">:=</span>&nbsp;<span class="num" id="6758694">0</span><span class="op" id="6758695">;</span>&nbsp;<span class="ident" id="6758697">i</span>&nbsp;<span class="op" id="6758699">&lt;</span>&nbsp;<span class="ident" id="6758701">N</span><span class="op" id="6758702">;</span>&nbsp;<span class="ident" id="6758704">i</span><span class="op" id="6758705">++</span>&nbsp;<span class="op" id="6758708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758712">go</span>&nbsp;<span class="keyword" id="6758715">func</span><span class="op" id="6758719">(</span><span class="op" id="6758720">)</span>&nbsp;<span class="op" id="6758722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758727">p</span>&nbsp;<span class="op" id="6758729">:=</span>&nbsp;<span class="builtinfunc" id="6758732">new</span><span class="op" id="6758735">(</span><span class="ident" id="6758736">T2</span><span class="op" id="6758738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758743">Register</span><span class="op" id="6758751">(</span><span class="ident" id="6758752">p</span><span class="op" id="6758753">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758758">b</span>&nbsp;<span class="op" id="6758760">:=</span>&nbsp;<span class="builtinfunc" id="6758763">new</span><span class="op" id="6758766">(</span><span class="ident" id="6758767">bytes</span><span class="op" id="6758772">.</span><span class="ident" id="6758773">Buffer</span><span class="op" id="6758779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758784">enc</span>&nbsp;<span class="op" id="6758788">:=</span>&nbsp;<span class="ident" id="6758791">NewEncoder</span><span class="op" id="6758801">(</span><span class="ident" id="6758802">b</span><span class="op" id="6758803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758808">err</span>&nbsp;<span class="op" id="6758812">:=</span>&nbsp;<span class="ident" id="6758815">enc</span><span class="op" id="6758818">.</span><span class="ident" id="6758819">Encode</span><span class="op" id="6758825">(</span><span class="ident" id="6758826">p</span><span class="op" id="6758827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758832">if</span>&nbsp;<span class="ident" id="6758835">err</span>&nbsp;<span class="op" id="6758839">!=</span>&nbsp;<span class="ident" id="6758842">nil</span>&nbsp;<span class="op" id="6758846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758852">t</span><span class="op" id="6758853">.</span><span class="ident" id="6758854">Error</span><span class="op" id="6758859">(</span><span class="string" id="6758860">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6758875">,</span>&nbsp;<span class="ident" id="6758877">err</span><span class="op" id="6758880">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758890">dec</span>&nbsp;<span class="op" id="6758894">:=</span>&nbsp;<span class="ident" id="6758897">NewDecoder</span><span class="op" id="6758907">(</span><span class="ident" id="6758908">b</span><span class="op" id="6758909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758914">err</span>&nbsp;<span class="op" id="6758918">=</span>&nbsp;<span class="ident" id="6758920">dec</span><span class="op" id="6758923">.</span><span class="ident" id="6758924">Decode</span><span class="op" id="6758930">(</span><span class="ident" id="6758931">p</span><span class="op" id="6758932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6758937">if</span>&nbsp;<span class="ident" id="6758940">err</span>&nbsp;<span class="op" id="6758944">!=</span>&nbsp;<span class="ident" id="6758947">nil</span>&nbsp;<span class="op" id="6758951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758957">t</span><span class="op" id="6758958">.</span><span class="ident" id="6758959">Error</span><span class="op" id="6758964">(</span><span class="string" id="6758965">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="6758980">,</span>&nbsp;<span class="ident" id="6758982">err</span><span class="op" id="6758985">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6758990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6758995">c</span>&nbsp;<span class="op" id="6758997">&lt;-</span>&nbsp;<span class="builtintype" id="6759000">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759007">}</span><span class="op" id="6759008">(</span><span class="op" id="6759009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6759015">for</span>&nbsp;<span class="ident" id="6759019">i</span>&nbsp;<span class="op" id="6759021">:=</span>&nbsp;<span class="num" id="6759024">0</span><span class="op" id="6759025">;</span>&nbsp;<span class="ident" id="6759027">i</span>&nbsp;<span class="op" id="6759029">&lt;</span>&nbsp;<span class="ident" id="6759031">N</span><span class="op" id="6759032">;</span>&nbsp;<span class="ident" id="6759034">i</span><span class="op" id="6759035">++</span>&nbsp;<span class="op" id="6759038">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759042">&lt;-</span><span class="ident" id="6759044">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6759047">}</span><br>
<span class="lineno"></span><span class="op" id="6759049">}</span>
</div>
</body>
</html>
