<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5402132">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5402187">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5402241">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5402292">//&nbsp;Package&nbsp;regexp&nbsp;implements&nbsp;regular&nbsp;expression&nbsp;search.</span><br>
<span class="lineno"></span><span class="comment" id="5402348">//</span><br>
<span class="lineno"></span><span class="comment" id="5402351">//&nbsp;The&nbsp;syntax&nbsp;of&nbsp;the&nbsp;regular&nbsp;expressions&nbsp;accepted&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="5402413">//&nbsp;general&nbsp;syntax&nbsp;used&nbsp;by&nbsp;Perl,&nbsp;Python,&nbsp;and&nbsp;other&nbsp;languages.</span><br>
<span class="lineno"></span><span class="comment" id="5402474">//&nbsp;More&nbsp;precisely,&nbsp;it&nbsp;is&nbsp;the&nbsp;syntax&nbsp;accepted&nbsp;by&nbsp;RE2&nbsp;and&nbsp;described&nbsp;at</span><br>
<span class="lineno">10</span><span class="comment" id="5402543">//&nbsp;http://code.google.com/p/re2/wiki/Syntax,&nbsp;except&nbsp;for&nbsp;\C.</span><br>
<span class="lineno"></span><span class="comment" id="5402603">//&nbsp;For&nbsp;an&nbsp;overview&nbsp;of&nbsp;the&nbsp;syntax,&nbsp;run</span><br>
<span class="lineno"></span><span class="comment" id="5402641">//&nbsp;&nbsp;&nbsp;godoc&nbsp;regexp/syntax</span><br>
<span class="lineno"></span><span class="comment" id="5402666">//</span><br>
<span class="lineno"></span><span class="comment" id="5402669">//&nbsp;The&nbsp;regexp&nbsp;implementation&nbsp;provided&nbsp;by&nbsp;this&nbsp;package&nbsp;is</span><br>
<span class="lineno">15</span><span class="comment" id="5402726">//&nbsp;guaranteed&nbsp;to&nbsp;run&nbsp;in&nbsp;time&nbsp;linear&nbsp;in&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5402788">//&nbsp;(This&nbsp;is&nbsp;a&nbsp;property&nbsp;not&nbsp;guaranteed&nbsp;by&nbsp;most&nbsp;open&nbsp;source</span><br>
<span class="lineno"></span><span class="comment" id="5402846">//&nbsp;implementations&nbsp;of&nbsp;regular&nbsp;expressions.)&nbsp;For&nbsp;more&nbsp;information</span><br>
<span class="lineno"></span><span class="comment" id="5402911">//&nbsp;about&nbsp;this&nbsp;property,&nbsp;see</span><br>
<span class="lineno"></span><span class="comment" id="5402939">//&nbsp;&nbsp;&nbsp;&nbsphttp://swtch.com/~rsc/regexp/regexp1.html</span><br>
<span class="lineno">20</span><span class="comment" id="5402984">//&nbsp;or&nbsp;any&nbsp;book&nbsp;about&nbsp;automata&nbsp;theory.</span><br>
<span class="lineno"></span><span class="comment" id="5403022">//</span><br>
<span class="lineno"></span><span class="comment" id="5403025">//&nbsp;All&nbsp;characters&nbsp;are&nbsp;UTF-8-encoded&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span><span class="comment" id="5403074">//</span><br>
<span class="lineno"></span><span class="comment" id="5403077">//&nbsp;There&nbsp;are&nbsp;16&nbsp;methods&nbsp;of&nbsp;Regexp&nbsp;that&nbsp;match&nbsp;a&nbsp;regular&nbsp;expression&nbsp;and&nbsp;identify</span><br>
<span class="lineno">25</span><span class="comment" id="5403156">//&nbsp;the&nbsp;matched&nbsp;text.&nbsp;&nbsp;Their&nbsp;names&nbsp;are&nbsp;matched&nbsp;by&nbsp;this&nbsp;regular&nbsp;expression:</span><br>
<span class="lineno"></span><span class="comment" id="5403230">//</span><br>
<span class="lineno"></span><span class="comment" id="5403233">//&nbsp;&nbsp;&nbsp;&nbspFind(All)?(String)?(Submatch)?(Index)?</span><br>
<span class="lineno"></span><span class="comment" id="5403275">//</span><br>
<span class="lineno"></span><span class="comment" id="5403278">//&nbsp;If&nbsp;&#39;All&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;routine&nbsp;matches&nbsp;successive&nbsp;non-overlapping</span><br>
<span class="lineno">30</span><span class="comment" id="5403349">//&nbsp;matches&nbsp;of&nbsp;the&nbsp;entire&nbsp;expression.&nbsp;&nbsp;Empty&nbsp;matches&nbsp;abutting&nbsp;a&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="5403422">//&nbsp;match&nbsp;are&nbsp;ignored.&nbsp;&nbsp;The&nbsp;return&nbsp;value&nbsp;is&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="5403499">//&nbsp;return&nbsp;values&nbsp;of&nbsp;the&nbsp;corresponding&nbsp;non-&#39;All&#39;&nbsp;routine.&nbsp;&nbsp;These&nbsp;routines&nbsp;take</span><br>
<span class="lineno"></span><span class="comment" id="5403577">//&nbsp;an&nbsp;extra&nbsp;integer&nbsp;argument,&nbsp;n;&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0,&nbsp;the&nbsp;function&nbsp;returns&nbsp;at&nbsp;most&nbsp;n</span><br>
<span class="lineno"></span><span class="comment" id="5403652">//&nbsp;matches/submatches.</span><br>
<span class="lineno">35</span><span class="comment" id="5403675">//</span><br>
<span class="lineno"></span><span class="comment" id="5403678">//&nbsp;If&nbsp;&#39;String&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;argument&nbsp;is&nbsp;a&nbsp;string;&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;a&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="5403755">//&nbsp;of&nbsp;bytes;&nbsp;return&nbsp;values&nbsp;are&nbsp;adjusted&nbsp;as&nbsp;appropriate.</span><br>
<span class="lineno"></span><span class="comment" id="5403811">//</span><br>
<span class="lineno"></span><span class="comment" id="5403814">//&nbsp;If&nbsp;&#39;Submatch&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;a&nbsp;slice&nbsp;identifying&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="5403887">//&nbsp;successive&nbsp;submatches&nbsp;of&nbsp;the&nbsp;expression.&nbsp;Submatches&nbsp;are&nbsp;matches&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5403957">//&nbsp;parenthesized&nbsp;subexpressions&nbsp;(also&nbsp;known&nbsp;as&nbsp;capturing&nbsp;groups)&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5404033">//&nbsp;regular&nbsp;expression,&nbsp;numbered&nbsp;from&nbsp;left&nbsp;to&nbsp;right&nbsp;in&nbsp;order&nbsp;of&nbsp;opening</span><br>
<span class="lineno"></span><span class="comment" id="5404104">//&nbsp;parenthesis.&nbsp;Submatch&nbsp;0&nbsp;is&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;entire&nbsp;expression,&nbsp;submatch&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="5404181">//&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;first&nbsp;parenthesized&nbsp;subexpression,&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">45</span><span class="comment" id="5404247">//</span><br>
<span class="lineno"></span><span class="comment" id="5404250">//&nbsp;If&nbsp;&#39;Index&#39;&nbsp;is&nbsp;present,&nbsp;matches&nbsp;and&nbsp;submatches&nbsp;are&nbsp;identified&nbsp;by&nbsp;byte&nbsp;index</span><br>
<span class="lineno"></span><span class="comment" id="5404328">//&nbsp;pairs&nbsp;within&nbsp;the&nbsp;input&nbsp;string:&nbsp;result[2*n:2*n+1]&nbsp;identifies&nbsp;the&nbsp;indexes&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5404406">//&nbsp;the&nbsp;nth&nbsp;submatch.&nbsp;&nbsp;The&nbsp;pair&nbsp;for&nbsp;n==0&nbsp;identifies&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;entire</span><br>
<span class="lineno"></span><span class="comment" id="5404481">//&nbsp;expression.&nbsp;&nbsp;If&nbsp;&#39;Index&#39;&nbsp;is&nbsp;not&nbsp;present,&nbsp;the&nbsp;match&nbsp;is&nbsp;identified&nbsp;by&nbsp;the</span><br>
<span class="lineno">50</span><span class="comment" id="5404555">//&nbsp;text&nbsp;of&nbsp;the&nbsp;match/submatch.&nbsp;&nbsp;If&nbsp;an&nbsp;index&nbsp;is&nbsp;negative,&nbsp;it&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5404626">//&nbsp;subexpression&nbsp;did&nbsp;not&nbsp;match&nbsp;any&nbsp;string&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5404682">//</span><br>
<span class="lineno"></span><span class="comment" id="5404685">//&nbsp;There&nbsp;is&nbsp;also&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;methods&nbsp;that&nbsp;can&nbsp;be&nbsp;applied&nbsp;to&nbsp;text&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="5404759">//&nbsp;from&nbsp;a&nbsp;RuneReader:</span><br>
<span class="lineno">55</span><span class="comment" id="5404781">//</span><br>
<span class="lineno"></span><span class="comment" id="5404784">//&nbsp;&nbsp;&nbsp;&nbspMatchReader,&nbsp;FindReaderIndex,&nbsp;FindReaderSubmatchIndex</span><br>
<span class="lineno"></span><span class="comment" id="5404841">//</span><br>
<span class="lineno"></span><span class="comment" id="5404844">//&nbsp;This&nbsp;set&nbsp;may&nbsp;grow.&nbsp;&nbsp;Note&nbsp;that&nbsp;regular&nbsp;expression&nbsp;matches&nbsp;may&nbsp;need&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5404916">//&nbsp;examine&nbsp;text&nbsp;beyond&nbsp;the&nbsp;text&nbsp;returned&nbsp;by&nbsp;a&nbsp;match,&nbsp;so&nbsp;the&nbsp;methods&nbsp;that</span><br>
<span class="lineno">60</span><span class="comment" id="5404989">//&nbsp;match&nbsp;text&nbsp;from&nbsp;a&nbsp;RuneReader&nbsp;may&nbsp;read&nbsp;arbitrarily&nbsp;far&nbsp;into&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5405061">//&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="comment" id="5405082">//</span><br>
<span class="lineno"></span><span class="comment" id="5405085">//&nbsp;(There&nbsp;are&nbsp;a&nbsp;few&nbsp;other&nbsp;methods&nbsp;that&nbsp;do&nbsp;not&nbsp;match&nbsp;this&nbsp;pattern.)</span><br>
<span class="lineno"></span><span class="comment" id="5405152">//</span><br>
<span class="lineno">65</span><span class="keyword" id="5405155">package</span>&nbsp;<span class="ident" id="5405163">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5405171">import</span>&nbsp;<span class="op" id="5405178">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405181">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405190">&#34;io&#34;</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405196">&#34;regexp/syntax&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405213">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405224">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405235">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405243">&#34;unicode&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5405254">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5405269">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5405272">var</span>&nbsp;<span class="ident" id="5405276">debug</span>&nbsp;<span class="op" id="5405282">=</span>&nbsp;<span class="builtintype" id="5405284">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="5405291">//&nbsp;Regexp&nbsp;is&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;compiled&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="comment" id="5405357">//&nbsp;A&nbsp;Regexp&nbsp;is&nbsp;safe&nbsp;for&nbsp;concurrent&nbsp;use&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="keyword" id="5405420">type</span>&nbsp;<span class="ident" id="5405425">Regexp</span>&nbsp;<span class="keyword" id="5405432">struct</span>&nbsp;<span class="op" id="5405439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5405442">//&nbsp;read-only&nbsp;after&nbsp;Compile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405470">expr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5405485">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5405500">//&nbsp;as&nbsp;passed&nbsp;to&nbsp;Compile</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405525">prog</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5405540">*</span><span class="ident" id="5405541"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5405547">.</span><span class="ident" id="5405548">Prog</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5405555">//&nbsp;compiled&nbsp;program</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405576">onepass</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5405591">*</span><span class="ident" id="5405592"><a href="/regexp/onepass.go.html#5386585">onePassProg</a></span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5405606">//&nbsp;onpass&nbsp;program&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405632">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5405647">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5405662">//&nbsp;required&nbsp;prefix&nbsp;in&nbsp;unanchored&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405704">prefixBytes</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5405719">[</span><span class="op" id="5405720">]</span><span class="builtintype" id="5405721">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5405734">//&nbsp;prefix,&nbsp;as&nbsp;a&nbsp;[]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405758">prefixComplete</span>&nbsp;<span class="builtintype" id="5405773">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5405788">//&nbsp;prefix&nbsp;is&nbsp;the&nbsp;entire&nbsp;regexp</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405820">prefixRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5405835">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5405850">//&nbsp;first&nbsp;rune&nbsp;in&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405875">prefixEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5405890">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5405905">//&nbsp;pc&nbsp;for&nbsp;last&nbsp;rune&nbsp;in&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5405936">cond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5405951"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5405957">.</span><span class="ident" id="5405958">EmptyOp</span>&nbsp;<span class="comment" id="5405966">//&nbsp;empty-width&nbsp;conditions&nbsp;required&nbsp;at&nbsp;start&nbsp;of&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406020">numSubexp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5406035">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406040">subexpNames</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5406055">[</span><span class="op" id="5406056">]</span><span class="builtintype" id="5406057">string</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406065">longest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5406080">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5406087">//&nbsp;cache&nbsp;of&nbsp;machines&nbsp;for&nbsp;running&nbsp;regexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406128">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5406136"><a href="/regexp/regexp.go.html#5405235">sync</a></span><span class="op" id="5406140">.</span><span class="ident" id="5406141">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5406148">machine</span>&nbsp;<span class="op" id="5406156">[</span><span class="op" id="5406157">]</span><span class="op" id="5406158">*</span><span class="ident" id="5406159"><a href="/regexp/exec.go.html#5376007">machine</a></span><br>
<span class="lineno">100</span><span class="op" id="5406167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5406170">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;source&nbsp;text&nbsp;used&nbsp;to&nbsp;compile&nbsp;the&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="keyword" id="5406244">func</span>&nbsp;<span class="op" id="5406249">(</span><span class="ident" id="5406250">re</span>&nbsp;<span class="op" id="5406253">*</span><span class="ident" id="5406254"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5406260">)</span>&nbsp;<span class="ident" id="5406262">String</span><span class="op" id="5406268">(</span><span class="op" id="5406269">)</span>&nbsp;<span class="builtintype" id="5406271">string</span>&nbsp;<span class="op" id="5406278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406281">return</span>&nbsp;<span class="ident" id="5406288"><a href="/regexp/regexp.go.html#5406250">re</a></span><span class="op" id="5406290">.</span><span class="ident" id="5406291">expr</span><br>
<span class="lineno">105</span><span class="op" id="5406296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5406299">//&nbsp;Compile&nbsp;parses&nbsp;a&nbsp;regular&nbsp;expression&nbsp;and&nbsp;returns,&nbsp;if&nbsp;successful,</span><br>
<span class="lineno"></span><span class="comment" id="5406366">//&nbsp;a&nbsp;Regexp&nbsp;object&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;match&nbsp;against&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="5406425">//</span><br>
<span class="lineno">110</span><span class="comment" id="5406428">//&nbsp;When&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5406491">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="5406563">//&nbsp;it&nbsp;chooses&nbsp;the&nbsp;one&nbsp;that&nbsp;a&nbsp;backtracking&nbsp;search&nbsp;would&nbsp;have&nbsp;found&nbsp;first.</span><br>
<span class="lineno"></span><span class="comment" id="5406636">//&nbsp;This&nbsp;so-called&nbsp;leftmost-first&nbsp;matching&nbsp;is&nbsp;the&nbsp;same&nbsp;semantics</span><br>
<span class="lineno"></span><span class="comment" id="5406700">//&nbsp;that&nbsp;Perl,&nbsp;Python,&nbsp;and&nbsp;other&nbsp;implementations&nbsp;use,&nbsp;although&nbsp;this</span><br>
<span class="lineno">115</span><span class="comment" id="5406767">//&nbsp;package&nbsp;implements&nbsp;it&nbsp;without&nbsp;the&nbsp;expense&nbsp;of&nbsp;backtracking.</span><br>
<span class="lineno"></span><span class="comment" id="5406829">//&nbsp;For&nbsp;POSIX&nbsp;leftmost-longest&nbsp;matching,&nbsp;see&nbsp;CompilePOSIX.</span><br>
<span class="lineno"></span><span class="keyword" id="5406887">func</span>&nbsp;<span class="ident" id="5406892">Compile</span><span class="op" id="5406899">(</span><span class="ident" id="5406900">expr</span>&nbsp;<span class="builtintype" id="5406905">string</span><span class="op" id="5406911">)</span>&nbsp;<span class="op" id="5406913">(</span><span class="op" id="5406914">*</span><span class="ident" id="5406915"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5406921">,</span>&nbsp;<span class="builtintype" id="5406923">error</span><span class="op" id="5406928">)</span>&nbsp;<span class="op" id="5406930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5406933">return</span>&nbsp;<span class="ident" id="5406940"><a href="/regexp/regexp.go.html#5408463">compile</a></span><span class="op" id="5406947">(</span><span class="ident" id="5406948"><a href="/regexp/regexp.go.html#5406900">expr</a></span><span class="op" id="5406952">,</span>&nbsp;<span class="ident" id="5406954"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5406960">.</span><span class="ident" id="5406961">Perl</span><span class="op" id="5406965">,</span>&nbsp;<span class="builtintype" id="5406967">false</span><span class="op" id="5406972">)</span><br>
<span class="lineno"></span><span class="op" id="5406974">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5406977">//&nbsp;CompilePOSIX&nbsp;is&nbsp;like&nbsp;Compile&nbsp;but&nbsp;restricts&nbsp;the&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="5407046">//&nbsp;to&nbsp;POSIX&nbsp;ERE&nbsp;(egrep)&nbsp;syntax&nbsp;and&nbsp;changes&nbsp;the&nbsp;match&nbsp;semantics&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5407112">//&nbsp;leftmost-longest.</span><br>
<span class="lineno"></span><span class="comment" id="5407133">//</span><br>
<span class="lineno">125</span><span class="comment" id="5407136">//&nbsp;That&nbsp;is,&nbsp;when&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5407208">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="5407280">//&nbsp;it&nbsp;chooses&nbsp;a&nbsp;match&nbsp;that&nbsp;is&nbsp;as&nbsp;long&nbsp;as&nbsp;possible.</span><br>
<span class="lineno"></span><span class="comment" id="5407331">//&nbsp;This&nbsp;so-called&nbsp;leftmost-longest&nbsp;matching&nbsp;is&nbsp;the&nbsp;same&nbsp;semantics</span><br>
<span class="lineno"></span><span class="comment" id="5407397">//&nbsp;that&nbsp;early&nbsp;regular&nbsp;expression&nbsp;implementations&nbsp;used&nbsp;and&nbsp;that&nbsp;POSIX</span><br>
<span class="lineno">130</span><span class="comment" id="5407466">//&nbsp;specifies.</span><br>
<span class="lineno"></span><span class="comment" id="5407480">//</span><br>
<span class="lineno"></span><span class="comment" id="5407483">//&nbsp;However,&nbsp;there&nbsp;can&nbsp;be&nbsp;multiple&nbsp;leftmost-longest&nbsp;matches,&nbsp;with&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="5407558">//&nbsp;submatch&nbsp;choices,&nbsp;and&nbsp;here&nbsp;this&nbsp;package&nbsp;diverges&nbsp;from&nbsp;POSIX.</span><br>
<span class="lineno"></span><span class="comment" id="5407622">//&nbsp;Among&nbsp;the&nbsp;possible&nbsp;leftmost-longest&nbsp;matches,&nbsp;this&nbsp;package&nbsp;chooses</span><br>
<span class="lineno">135</span><span class="comment" id="5407691">//&nbsp;the&nbsp;one&nbsp;that&nbsp;a&nbsp;backtracking&nbsp;search&nbsp;would&nbsp;have&nbsp;found&nbsp;first,&nbsp;while&nbsp;POSIX</span><br>
<span class="lineno"></span><span class="comment" id="5407765">//&nbsp;specifies&nbsp;that&nbsp;the&nbsp;match&nbsp;be&nbsp;chosen&nbsp;to&nbsp;maximize&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="5407839">//&nbsp;subexpression,&nbsp;then&nbsp;the&nbsp;second,&nbsp;and&nbsp;so&nbsp;on&nbsp;from&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span><span class="comment" id="5407904">//&nbsp;The&nbsp;POSIX&nbsp;rule&nbsp;is&nbsp;computationally&nbsp;prohibitive&nbsp;and&nbsp;not&nbsp;even&nbsp;well-defined.</span><br>
<span class="lineno"></span><span class="comment" id="5407980">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp2.html#posix&nbsp;for&nbsp;details.</span><br>
<span class="lineno">140</span><span class="keyword" id="5408048">func</span>&nbsp;<span class="ident" id="5408053">CompilePOSIX</span><span class="op" id="5408065">(</span><span class="ident" id="5408066">expr</span>&nbsp;<span class="builtintype" id="5408071">string</span><span class="op" id="5408077">)</span>&nbsp;<span class="op" id="5408079">(</span><span class="op" id="5408080">*</span><span class="ident" id="5408081"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5408087">,</span>&nbsp;<span class="builtintype" id="5408089">error</span><span class="op" id="5408094">)</span>&nbsp;<span class="op" id="5408096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408099">return</span>&nbsp;<span class="ident" id="5408106"><a href="/regexp/regexp.go.html#5408463">compile</a></span><span class="op" id="5408113">(</span><span class="ident" id="5408114"><a href="/regexp/regexp.go.html#5408066">expr</a></span><span class="op" id="5408118">,</span>&nbsp;<span class="ident" id="5408120"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5408126">.</span><span class="ident" id="5408127">POSIX</span><span class="op" id="5408132">,</span>&nbsp;<span class="builtintype" id="5408134">true</span><span class="op" id="5408138">)</span><br>
<span class="lineno"></span><span class="op" id="5408140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5408143">//&nbsp;Longest&nbsp;makes&nbsp;future&nbsp;searches&nbsp;prefer&nbsp;the&nbsp;leftmost-longest&nbsp;match.</span><br>
<span class="lineno">145</span><span class="comment" id="5408211">//&nbsp;That&nbsp;is,&nbsp;when&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5408283">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="5408355">//&nbsp;it&nbsp;chooses&nbsp;a&nbsp;match&nbsp;that&nbsp;is&nbsp;as&nbsp;long&nbsp;as&nbsp;possible.</span><br>
<span class="lineno"></span><span class="keyword" id="5408406">func</span>&nbsp;<span class="op" id="5408411">(</span><span class="ident" id="5408412">re</span>&nbsp;<span class="op" id="5408415">*</span><span class="ident" id="5408416"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5408422">)</span>&nbsp;<span class="ident" id="5408424">Longest</span><span class="op" id="5408431">(</span><span class="op" id="5408432">)</span>&nbsp;<span class="op" id="5408434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408437"><a href="/regexp/regexp.go.html#5408412">re</a></span><span class="op" id="5408439">.</span><span class="ident" id="5408440">longest</span>&nbsp;<span class="op" id="5408448">=</span>&nbsp;<span class="builtintype" id="5408450">true</span><br>
<span class="lineno">150</span><span class="op" id="5408455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5408458">func</span>&nbsp;<span class="ident" id="5408463">compile</span><span class="op" id="5408470">(</span><span class="ident" id="5408471">expr</span>&nbsp;<span class="builtintype" id="5408476">string</span><span class="op" id="5408482">,</span>&nbsp;<span class="ident" id="5408484">mode</span>&nbsp;<span class="ident" id="5408489"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5408495">.</span><span class="ident" id="5408496">Flags</span><span class="op" id="5408501">,</span>&nbsp;<span class="ident" id="5408503">longest</span>&nbsp;<span class="builtintype" id="5408511">bool</span><span class="op" id="5408515">)</span>&nbsp;<span class="op" id="5408517">(</span><span class="op" id="5408518">*</span><span class="ident" id="5408519"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5408525">,</span>&nbsp;<span class="builtintype" id="5408527">error</span><span class="op" id="5408532">)</span>&nbsp;<span class="op" id="5408534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408537">re</span><span class="op" id="5408539">,</span>&nbsp;<span class="ident" id="5408541">err</span>&nbsp;<span class="op" id="5408545">:=</span>&nbsp;<span class="ident" id="5408548"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5408554">.</span><span class="ident" id="5408555">Parse</span><span class="op" id="5408560">(</span><span class="ident" id="5408561"><a href="/regexp/regexp.go.html#5408471">expr</a></span><span class="op" id="5408565">,</span>&nbsp;<span class="ident" id="5408567"><a href="/regexp/regexp.go.html#5408484">mode</a></span><span class="op" id="5408571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408574">if</span>&nbsp;<span class="ident" id="5408577"><a href="/regexp/regexp.go.html#5408541">err</a></span>&nbsp;<span class="op" id="5408581">!=</span>&nbsp;<span class="ident" id="5408584">nil</span>&nbsp;<span class="op" id="5408588">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408592">return</span>&nbsp;<span class="ident" id="5408599">nil</span><span class="op" id="5408602">,</span>&nbsp;<span class="ident" id="5408604"><a href="/regexp/regexp.go.html#5408541">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408612">maxCap</span>&nbsp;<span class="op" id="5408619">:=</span>&nbsp;<span class="ident" id="5408622"><a href="/regexp/regexp.go.html#5408537">re</a></span><span class="op" id="5408624">.</span><span class="ident" id="5408625">MaxCap</span><span class="op" id="5408631">(</span><span class="op" id="5408632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408635">capNames</span>&nbsp;<span class="op" id="5408644">:=</span>&nbsp;<span class="ident" id="5408647"><a href="/regexp/regexp.go.html#5408537">re</a></span><span class="op" id="5408649">.</span><span class="ident" id="5408650">CapNames</span><span class="op" id="5408658">(</span><span class="op" id="5408659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408663"><a href="/regexp/regexp.go.html#5408537">re</a></span>&nbsp;<span class="op" id="5408666">=</span>&nbsp;<span class="ident" id="5408668"><a href="/regexp/regexp.go.html#5408537">re</a></span><span class="op" id="5408670">.</span><span class="ident" id="5408671">Simplify</span><span class="op" id="5408679">(</span><span class="op" id="5408680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408683">prog</span><span class="op" id="5408687">,</span>&nbsp;<span class="ident" id="5408689"><a href="/regexp/regexp.go.html#5408541">err</a></span>&nbsp;<span class="op" id="5408693">:=</span>&nbsp;<span class="ident" id="5408696"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5408702">.</span><span class="ident" id="5408703">Compile</span><span class="op" id="5408710">(</span><span class="ident" id="5408711"><a href="/regexp/regexp.go.html#5408537">re</a></span><span class="op" id="5408713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408716">if</span>&nbsp;<span class="ident" id="5408719"><a href="/regexp/regexp.go.html#5408541">err</a></span>&nbsp;<span class="op" id="5408723">!=</span>&nbsp;<span class="ident" id="5408726">nil</span>&nbsp;<span class="op" id="5408730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408734">return</span>&nbsp;<span class="ident" id="5408741">nil</span><span class="op" id="5408744">,</span>&nbsp;<span class="ident" id="5408746"><a href="/regexp/regexp.go.html#5408541">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408751">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408754">regexp</span>&nbsp;<span class="op" id="5408761">:=</span>&nbsp;<span class="op" id="5408764">&amp;</span><span class="ident" id="5408765"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5408771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408775">expr</span><span class="op" id="5408779">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408788"><a href="/regexp/regexp.go.html#5408471">expr</a></span><span class="op" id="5408792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408796">prog</span><span class="op" id="5408800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408809"><a href="/regexp/regexp.go.html#5408683">prog</a></span><span class="op" id="5408813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408817">onepass</span><span class="op" id="5408824">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408830"><a href="/regexp/onepass.go.html#5400960">compileOnePass</a></span><span class="op" id="5408844">(</span><span class="ident" id="5408845"><a href="/regexp/regexp.go.html#5408683">prog</a></span><span class="op" id="5408849">)</span><span class="op" id="5408850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408854">numSubexp</span><span class="op" id="5408863">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5408867"><a href="/regexp/regexp.go.html#5408612">maxCap</a></span><span class="op" id="5408873">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408877">subexpNames</span><span class="op" id="5408888">:</span>&nbsp;<span class="ident" id="5408890"><a href="/regexp/regexp.go.html#5408635">capNames</a></span><span class="op" id="5408898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408902">cond</span><span class="op" id="5408906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408915"><a href="/regexp/regexp.go.html#5408683">prog</a></span><span class="op" id="5408919">.</span><span class="ident" id="5408920">StartCond</span><span class="op" id="5408929">(</span><span class="op" id="5408930">)</span><span class="op" id="5408931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408935">longest</span><span class="op" id="5408942">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408948"><a href="/regexp/regexp.go.html#5408503">longest</a></span><span class="op" id="5408955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5408958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5408961">if</span>&nbsp;<span class="ident" id="5408964"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5408970">.</span><span class="ident" id="5408971">onepass</span>&nbsp;<span class="op" id="5408979">==</span>&nbsp;<span class="ident" id="5408982"><a href="/regexp/onepass.go.html#5400571">notOnePass</a></span>&nbsp;<span class="op" id="5408993">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5408997"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409003">.</span><span class="ident" id="5409004">prefix</span><span class="op" id="5409010">,</span>&nbsp;<span class="ident" id="5409012"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409018">.</span><span class="ident" id="5409019">prefixComplete</span>&nbsp;<span class="op" id="5409034">=</span>&nbsp;<span class="ident" id="5409036"><a href="/regexp/regexp.go.html#5408683">prog</a></span><span class="op" id="5409040">.</span><span class="ident" id="5409041">Prefix</span><span class="op" id="5409047">(</span><span class="op" id="5409048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409051">}</span>&nbsp;<span class="keyword" id="5409053">else</span>&nbsp;<span class="op" id="5409058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409062"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409068">.</span><span class="ident" id="5409069">prefix</span><span class="op" id="5409075">,</span>&nbsp;<span class="ident" id="5409077"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409083">.</span><span class="ident" id="5409084">prefixComplete</span><span class="op" id="5409098">,</span>&nbsp;<span class="ident" id="5409100"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409106">.</span><span class="ident" id="5409107">prefixEnd</span>&nbsp;<span class="op" id="5409117">=</span>&nbsp;<span class="ident" id="5409119"><a href="/regexp/onepass.go.html#5387207">onePassPrefix</a></span><span class="op" id="5409132">(</span><span class="ident" id="5409133"><a href="/regexp/regexp.go.html#5408683">prog</a></span><span class="op" id="5409137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409143">if</span>&nbsp;<span class="ident" id="5409146"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409152">.</span><span class="ident" id="5409153">prefix</span>&nbsp;<span class="op" id="5409160">!=</span>&nbsp;<span class="string" id="5409163">&#34;&#34;</span>&nbsp;<span class="op" id="5409166">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5409170">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;this&nbsp;allocation&nbsp;by&nbsp;adding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5409219">//&nbsp;IndexString&nbsp;to&nbsp;package&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409254"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409260">.</span><span class="ident" id="5409261">prefixBytes</span>&nbsp;<span class="op" id="5409273">=</span>&nbsp;<span class="op" id="5409275">[</span><span class="op" id="5409276">]</span><span class="builtintype" id="5409277">byte</span><span class="op" id="5409281">(</span><span class="ident" id="5409282"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409288">.</span><span class="ident" id="5409289">prefix</span><span class="op" id="5409295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409299"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409305">.</span><span class="ident" id="5409306">prefixRune</span><span class="op" id="5409316">,</span>&nbsp;<span class="ident" id="5409318">_</span>&nbsp;<span class="op" id="5409320">=</span>&nbsp;<span class="ident" id="5409322"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5409326">.</span><span class="ident" id="5409327">DecodeRuneInString</span><span class="op" id="5409345">(</span><span class="ident" id="5409346"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409352">.</span><span class="ident" id="5409353">prefix</span><span class="op" id="5409359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409362">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409365">return</span>&nbsp;<span class="ident" id="5409372"><a href="/regexp/regexp.go.html#5408754">regexp</a></span><span class="op" id="5409378">,</span>&nbsp;<span class="ident" id="5409380">nil</span><br>
<span class="lineno"></span><span class="op" id="5409384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5409387">//&nbsp;get&nbsp;returns&nbsp;a&nbsp;machine&nbsp;to&nbsp;use&nbsp;for&nbsp;matching&nbsp;re.</span><br>
<span class="lineno"></span><span class="comment" id="5409436">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;re&#39;s&nbsp;machine&nbsp;cache&nbsp;if&nbsp;possible,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">190</span><span class="comment" id="5409492">//&nbsp;unnecessary&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="5409519">func</span>&nbsp;<span class="op" id="5409524">(</span><span class="ident" id="5409525">re</span>&nbsp;<span class="op" id="5409528">*</span><span class="ident" id="5409529"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5409535">)</span>&nbsp;<span class="ident" id="5409537">get</span><span class="op" id="5409540">(</span><span class="op" id="5409541">)</span>&nbsp;<span class="op" id="5409543">*</span><span class="ident" id="5409544"><a href="/regexp/exec.go.html#5376007">machine</a></span>&nbsp;<span class="op" id="5409552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409555"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409557">.</span><span class="ident" id="5409558">mu</span><span class="op" id="5409560">.</span><span class="ident" id="5409561">Lock</span><span class="op" id="5409565">(</span><span class="op" id="5409566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409569">if</span>&nbsp;<span class="ident" id="5409572">n</span>&nbsp;<span class="op" id="5409574">:=</span>&nbsp;<span class="builtinfunc" id="5409577">len</span><span class="op" id="5409580">(</span><span class="ident" id="5409581"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409583">.</span><span class="ident" id="5409584">machine</span><span class="op" id="5409591">)</span><span class="op" id="5409592">;</span>&nbsp;<span class="ident" id="5409594"><a href="/regexp/regexp.go.html#5409572">n</a></span>&nbsp;<span class="op" id="5409596">&gt;</span>&nbsp;<span class="num" id="5409598">0</span>&nbsp;<span class="op" id="5409600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409604">z</span>&nbsp;<span class="op" id="5409606">:=</span>&nbsp;<span class="ident" id="5409609"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409611">.</span><span class="ident" id="5409612">machine</span><span class="op" id="5409619">[</span><span class="ident" id="5409620"><a href="/regexp/regexp.go.html#5409572">n</a></span><span class="op" id="5409621">-</span><span class="num" id="5409622">1</span><span class="op" id="5409623">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409627"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409629">.</span><span class="ident" id="5409630">machine</span>&nbsp;<span class="op" id="5409638">=</span>&nbsp;<span class="ident" id="5409640"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409642">.</span><span class="ident" id="5409643">machine</span><span class="op" id="5409650">[</span><span class="op" id="5409651">:</span><span class="ident" id="5409652"><a href="/regexp/regexp.go.html#5409572">n</a></span><span class="op" id="5409653">-</span><span class="num" id="5409654">1</span><span class="op" id="5409655">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409659"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409661">.</span><span class="ident" id="5409662">mu</span><span class="op" id="5409664">.</span><span class="ident" id="5409665">Unlock</span><span class="op" id="5409671">(</span><span class="op" id="5409672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409676">return</span>&nbsp;<span class="ident" id="5409683"><a href="/regexp/regexp.go.html#5409604">z</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5409686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409689"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409691">.</span><span class="ident" id="5409692">mu</span><span class="op" id="5409694">.</span><span class="ident" id="5409695">Unlock</span><span class="op" id="5409701">(</span><span class="op" id="5409702">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409705">z</span>&nbsp;<span class="op" id="5409707">:=</span>&nbsp;<span class="ident" id="5409710"><a href="/regexp/exec.go.html#5376930">progMachine</a></span><span class="op" id="5409721">(</span><span class="ident" id="5409722"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409724">.</span><span class="ident" id="5409725">prog</span><span class="op" id="5409729">,</span>&nbsp;<span class="ident" id="5409731"><a href="/regexp/regexp.go.html#5409525">re</a></span><span class="op" id="5409733">.</span><span class="ident" id="5409734">onepass</span><span class="op" id="5409741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5409744"><a href="/regexp/regexp.go.html#5409705">z</a></span><span class="op" id="5409745">.</span><span class="ident" id="5409746">re</span>&nbsp;<span class="op" id="5409749">=</span>&nbsp;<span class="ident" id="5409751"><a href="/regexp/regexp.go.html#5409525">re</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5409755">return</span>&nbsp;<span class="ident" id="5409762"><a href="/regexp/regexp.go.html#5409705">z</a></span><br>
<span class="lineno"></span><span class="op" id="5409764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="5409767">//&nbsp;put&nbsp;returns&nbsp;a&nbsp;machine&nbsp;to&nbsp;the&nbsp;re&#39;s&nbsp;machine&nbsp;cache.</span><br>
<span class="lineno"></span><span class="comment" id="5409819">//&nbsp;There&nbsp;is&nbsp;no&nbsp;attempt&nbsp;to&nbsp;limit&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;cache,&nbsp;so&nbsp;it&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="5409885">//&nbsp;grow&nbsp;to&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;simultaneous&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5409939">//&nbsp;run&nbsp;using&nbsp;re.&nbsp;&nbsp;(The&nbsp;cache&nbsp;empties&nbsp;when&nbsp;re&nbsp;gets&nbsp;garbage&nbsp;collected.)</span><br>
<span class="lineno"></span><span class="keyword" id="5410009">func</span>&nbsp;<span class="op" id="5410014">(</span><span class="ident" id="5410015">re</span>&nbsp;<span class="op" id="5410018">*</span><span class="ident" id="5410019"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5410025">)</span>&nbsp;<span class="ident" id="5410027">put</span><span class="op" id="5410030">(</span><span class="ident" id="5410031">z</span>&nbsp;<span class="op" id="5410033">*</span><span class="ident" id="5410034"><a href="/regexp/exec.go.html#5376007">machine</a></span><span class="op" id="5410041">)</span>&nbsp;<span class="op" id="5410043">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5410046"><a href="/regexp/regexp.go.html#5410015">re</a></span><span class="op" id="5410048">.</span><span class="ident" id="5410049">mu</span><span class="op" id="5410051">.</span><span class="ident" id="5410052">Lock</span><span class="op" id="5410056">(</span><span class="op" id="5410057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5410060"><a href="/regexp/regexp.go.html#5410015">re</a></span><span class="op" id="5410062">.</span><span class="ident" id="5410063">machine</span>&nbsp;<span class="op" id="5410071">=</span>&nbsp;<span class="builtinfunc" id="5410073">append</span><span class="op" id="5410079">(</span><span class="ident" id="5410080"><a href="/regexp/regexp.go.html#5410015">re</a></span><span class="op" id="5410082">.</span><span class="ident" id="5410083">machine</span><span class="op" id="5410090">,</span>&nbsp;<span class="ident" id="5410092"><a href="/regexp/regexp.go.html#5410031">z</a></span><span class="op" id="5410093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5410096"><a href="/regexp/regexp.go.html#5410015">re</a></span><span class="op" id="5410098">.</span><span class="ident" id="5410099">mu</span><span class="op" id="5410101">.</span><span class="ident" id="5410102">Unlock</span><span class="op" id="5410108">(</span><span class="op" id="5410109">)</span><br>
<span class="lineno"></span><span class="op" id="5410111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="5410114">//&nbsp;MustCompile&nbsp;is&nbsp;like&nbsp;Compile&nbsp;but&nbsp;panics&nbsp;if&nbsp;the&nbsp;expression&nbsp;cannot&nbsp;be&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="comment" id="5410192">//&nbsp;It&nbsp;simplifies&nbsp;safe&nbsp;initialization&nbsp;of&nbsp;global&nbsp;variables&nbsp;holding&nbsp;compiled&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="5410274">//&nbsp;expressions.</span><br>
<span class="lineno"></span><span class="keyword" id="5410290">func</span>&nbsp;<span class="ident" id="5410295">MustCompile</span><span class="op" id="5410306">(</span><span class="ident" id="5410307">str</span>&nbsp;<span class="builtintype" id="5410311">string</span><span class="op" id="5410317">)</span>&nbsp;<span class="op" id="5410319">*</span><span class="ident" id="5410320"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span>&nbsp;<span class="op" id="5410327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5410330">regexp</span><span class="op" id="5410336">,</span>&nbsp;<span class="builtintype" id="5410338">error</span>&nbsp;<span class="op" id="5410344">:=</span>&nbsp;<span class="ident" id="5410347"><a href="/regexp/regexp.go.html#5406892">Compile</a></span><span class="op" id="5410354">(</span><span class="ident" id="5410355"><a href="/regexp/regexp.go.html#5410307">str</a></span><span class="op" id="5410358">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410361">if</span>&nbsp;<span class="builtintype" id="5410364"><a href="/regexp/regexp.go.html#5410338">error</a></span>&nbsp;<span class="op" id="5410370">!=</span>&nbsp;<span class="ident" id="5410373">nil</span>&nbsp;<span class="op" id="5410377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5410381">panic</span><span class="op" id="5410386">(</span><span class="string" id="5410387">`regexp:&nbsp;Compile(`</span>&nbsp;<span class="op" id="5410406">+</span>&nbsp;<span class="ident" id="5410408"><a href="/regexp/regexp.go.html#5410846">quote</a></span><span class="op" id="5410413">(</span><span class="ident" id="5410414"><a href="/regexp/regexp.go.html#5410307">str</a></span><span class="op" id="5410417">)</span>&nbsp;<span class="op" id="5410419">+</span>&nbsp;<span class="string" id="5410421">`):&nbsp;`</span>&nbsp;<span class="op" id="5410427">+</span>&nbsp;<span class="builtintype" id="5410429"><a href="/regexp/regexp.go.html#5410338">error</a></span><span class="op" id="5410434">.</span><span class="ident" id="5410435">Error</span><span class="op" id="5410440">(</span><span class="op" id="5410441">)</span><span class="op" id="5410442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5410445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410448">return</span>&nbsp;<span class="ident" id="5410455"><a href="/regexp/regexp.go.html#5410330">regexp</a></span><br>
<span class="lineno"></span><span class="op" id="5410462">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5410465">//&nbsp;MustCompilePOSIX&nbsp;is&nbsp;like&nbsp;CompilePOSIX&nbsp;but&nbsp;panics&nbsp;if&nbsp;the&nbsp;expression&nbsp;cannot&nbsp;be&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="comment" id="5410553">//&nbsp;It&nbsp;simplifies&nbsp;safe&nbsp;initialization&nbsp;of&nbsp;global&nbsp;variables&nbsp;holding&nbsp;compiled&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="5410635">//&nbsp;expressions.</span><br>
<span class="lineno"></span><span class="keyword" id="5410651">func</span>&nbsp;<span class="ident" id="5410656">MustCompilePOSIX</span><span class="op" id="5410672">(</span><span class="ident" id="5410673">str</span>&nbsp;<span class="builtintype" id="5410677">string</span><span class="op" id="5410683">)</span>&nbsp;<span class="op" id="5410685">*</span><span class="ident" id="5410686"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span>&nbsp;<span class="op" id="5410693">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5410696">regexp</span><span class="op" id="5410702">,</span>&nbsp;<span class="builtintype" id="5410704">error</span>&nbsp;<span class="op" id="5410710">:=</span>&nbsp;<span class="ident" id="5410713"><a href="/regexp/regexp.go.html#5408053">CompilePOSIX</a></span><span class="op" id="5410725">(</span><span class="ident" id="5410726"><a href="/regexp/regexp.go.html#5410673">str</a></span><span class="op" id="5410729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410732">if</span>&nbsp;<span class="builtintype" id="5410735"><a href="/regexp/regexp.go.html#5410704">error</a></span>&nbsp;<span class="op" id="5410741">!=</span>&nbsp;<span class="ident" id="5410744">nil</span>&nbsp;<span class="op" id="5410748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5410752">panic</span><span class="op" id="5410757">(</span><span class="string" id="5410758">`regexp:&nbsp;CompilePOSIX(`</span>&nbsp;<span class="op" id="5410782">+</span>&nbsp;<span class="ident" id="5410784"><a href="/regexp/regexp.go.html#5410846">quote</a></span><span class="op" id="5410789">(</span><span class="ident" id="5410790"><a href="/regexp/regexp.go.html#5410673">str</a></span><span class="op" id="5410793">)</span>&nbsp;<span class="op" id="5410795">+</span>&nbsp;<span class="string" id="5410797">`):&nbsp;`</span>&nbsp;<span class="op" id="5410803">+</span>&nbsp;<span class="builtintype" id="5410805"><a href="/regexp/regexp.go.html#5410704">error</a></span><span class="op" id="5410810">.</span><span class="ident" id="5410811">Error</span><span class="op" id="5410816">(</span><span class="op" id="5410817">)</span><span class="op" id="5410818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5410821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410824">return</span>&nbsp;<span class="ident" id="5410831"><a href="/regexp/regexp.go.html#5410696">regexp</a></span><br>
<span class="lineno">235</span><span class="op" id="5410838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5410841">func</span>&nbsp;<span class="ident" id="5410846">quote</span><span class="op" id="5410851">(</span><span class="ident" id="5410852">s</span>&nbsp;<span class="builtintype" id="5410854">string</span><span class="op" id="5410860">)</span>&nbsp;<span class="builtintype" id="5410862">string</span>&nbsp;<span class="op" id="5410869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410872">if</span>&nbsp;<span class="ident" id="5410875"><a href="/regexp/regexp.go.html#5405213">strconv</a></span><span class="op" id="5410882">.</span><span class="ident" id="5410883">CanBackquote</span><span class="op" id="5410895">(</span><span class="ident" id="5410896"><a href="/regexp/regexp.go.html#5410852">s</a></span><span class="op" id="5410897">)</span>&nbsp;<span class="op" id="5410899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410903">return</span>&nbsp;<span class="string" id="5410910">&#34;`&#34;</span>&nbsp;<span class="op" id="5410914">+</span>&nbsp;<span class="ident" id="5410916"><a href="/regexp/regexp.go.html#5410852">s</a></span>&nbsp;<span class="op" id="5410918">+</span>&nbsp;<span class="string" id="5410920">&#34;`&#34;</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5410925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5410928">return</span>&nbsp;<span class="ident" id="5410935"><a href="/regexp/regexp.go.html#5405213">strconv</a></span><span class="op" id="5410942">.</span><span class="ident" id="5410943">Quote</span><span class="op" id="5410948">(</span><span class="ident" id="5410949"><a href="/regexp/regexp.go.html#5410852">s</a></span><span class="op" id="5410950">)</span><br>
<span class="lineno"></span><span class="op" id="5410952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5410955">//&nbsp;NumSubexp&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;parenthesized&nbsp;subexpressions&nbsp;in&nbsp;this&nbsp;Regexp.</span><br>
<span class="lineno">245</span><span class="keyword" id="5411035">func</span>&nbsp;<span class="op" id="5411040">(</span><span class="ident" id="5411041">re</span>&nbsp;<span class="op" id="5411044">*</span><span class="ident" id="5411045"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5411051">)</span>&nbsp;<span class="ident" id="5411053">NumSubexp</span><span class="op" id="5411062">(</span><span class="op" id="5411063">)</span>&nbsp;<span class="builtintype" id="5411065">int</span>&nbsp;<span class="op" id="5411069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5411072">return</span>&nbsp;<span class="ident" id="5411079"><a href="/regexp/regexp.go.html#5411041">re</a></span><span class="op" id="5411081">.</span><span class="ident" id="5411082">numSubexp</span><br>
<span class="lineno"></span><span class="op" id="5411092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5411095">//&nbsp;SubexpNames&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;parenthesized&nbsp;subexpressions</span><br>
<span class="lineno">250</span><span class="comment" id="5411164">//&nbsp;in&nbsp;this&nbsp;Regexp.&nbsp;&nbsp;The&nbsp;name&nbsp;for&nbsp;the&nbsp;first&nbsp;sub-expression&nbsp;is&nbsp;names[1],</span><br>
<span class="lineno"></span><span class="comment" id="5411235">//&nbsp;so&nbsp;that&nbsp;if&nbsp;m&nbsp;is&nbsp;a&nbsp;match&nbsp;slice,&nbsp;the&nbsp;name&nbsp;for&nbsp;m[i]&nbsp;is&nbsp;SubexpNames()[i].</span><br>
<span class="lineno"></span><span class="comment" id="5411308">//&nbsp;Since&nbsp;the&nbsp;Regexp&nbsp;as&nbsp;a&nbsp;whole&nbsp;cannot&nbsp;be&nbsp;named,&nbsp;names[0]&nbsp;is&nbsp;always</span><br>
<span class="lineno"></span><span class="comment" id="5411375">//&nbsp;the&nbsp;empty&nbsp;string.&nbsp;&nbsp;The&nbsp;slice&nbsp;should&nbsp;not&nbsp;be&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="5411431">func</span>&nbsp;<span class="op" id="5411436">(</span><span class="ident" id="5411437">re</span>&nbsp;<span class="op" id="5411440">*</span><span class="ident" id="5411441"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5411447">)</span>&nbsp;<span class="ident" id="5411449">SubexpNames</span><span class="op" id="5411460">(</span><span class="op" id="5411461">)</span>&nbsp;<span class="op" id="5411463">[</span><span class="op" id="5411464">]</span><span class="builtintype" id="5411465">string</span>&nbsp;<span class="op" id="5411472">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5411475">return</span>&nbsp;<span class="ident" id="5411482"><a href="/regexp/regexp.go.html#5411437">re</a></span><span class="op" id="5411484">.</span><span class="ident" id="5411485">subexpNames</span><br>
<span class="lineno"></span><span class="op" id="5411497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5411500">const</span>&nbsp;<span class="ident" id="5411506">endOfText</span>&nbsp;<span class="builtintype" id="5411516">rune</span>&nbsp;<span class="op" id="5411521">=</span>&nbsp;<span class="op" id="5411523">-</span><span class="num" id="5411524">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="5411527">//&nbsp;input&nbsp;abstracts&nbsp;different&nbsp;representations&nbsp;of&nbsp;the&nbsp;input&nbsp;text.&nbsp;It&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5411603">//&nbsp;one-character&nbsp;lookahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5411631">type</span>&nbsp;<span class="ident" id="5411636">input</span>&nbsp;<span class="keyword" id="5411642">interface</span>&nbsp;<span class="op" id="5411652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411655">step</span><span class="op" id="5411659">(</span><span class="ident" id="5411660">pos</span>&nbsp;<span class="builtintype" id="5411664">int</span><span class="op" id="5411667">)</span>&nbsp;<span class="op" id="5411669">(</span><span class="ident" id="5411670">r</span>&nbsp;<span class="builtintype" id="5411672">rune</span><span class="op" id="5411676">,</span>&nbsp;<span class="ident" id="5411678">width</span>&nbsp;<span class="builtintype" id="5411684">int</span><span class="op" id="5411687">)</span>&nbsp;<span class="comment" id="5411689">//&nbsp;advance&nbsp;one&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411710">canCheckPrefix</span><span class="op" id="5411724">(</span><span class="op" id="5411725">)</span>&nbsp;<span class="builtintype" id="5411727">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5411744">//&nbsp;can&nbsp;we&nbsp;look&nbsp;ahead&nbsp;without&nbsp;losing&nbsp;info?</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411787">hasPrefix</span><span class="op" id="5411796">(</span><span class="ident" id="5411797">re</span>&nbsp;<span class="op" id="5411800">*</span><span class="ident" id="5411801"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5411807">)</span>&nbsp;<span class="builtintype" id="5411809">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411815">index</span><span class="op" id="5411820">(</span><span class="ident" id="5411821">re</span>&nbsp;<span class="op" id="5411824">*</span><span class="ident" id="5411825"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5411831">,</span>&nbsp;<span class="ident" id="5411833">pos</span>&nbsp;<span class="builtintype" id="5411837">int</span><span class="op" id="5411840">)</span>&nbsp;<span class="builtintype" id="5411842">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411847">context</span><span class="op" id="5411854">(</span><span class="ident" id="5411855">pos</span>&nbsp;<span class="builtintype" id="5411859">int</span><span class="op" id="5411862">)</span>&nbsp;<span class="ident" id="5411864"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5411870">.</span><span class="ident" id="5411871">EmptyOp</span><br>
<span class="lineno"></span><span class="op" id="5411879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="5411882">//&nbsp;inputString&nbsp;scans&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="5411913">type</span>&nbsp;<span class="ident" id="5411918">inputString</span>&nbsp;<span class="keyword" id="5411930">struct</span>&nbsp;<span class="op" id="5411937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5411940">str</span>&nbsp;<span class="builtintype" id="5411944">string</span><br>
<span class="lineno"></span><span class="op" id="5411951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="keyword" id="5411954">func</span>&nbsp;<span class="op" id="5411959">(</span><span class="ident" id="5411960">i</span>&nbsp;<span class="op" id="5411962">*</span><span class="ident" id="5411963"><a href="/regexp/regexp.go.html#5411918">inputString</a></span><span class="op" id="5411974">)</span>&nbsp;<span class="ident" id="5411976">step</span><span class="op" id="5411980">(</span><span class="ident" id="5411981">pos</span>&nbsp;<span class="builtintype" id="5411985">int</span><span class="op" id="5411988">)</span>&nbsp;<span class="op" id="5411990">(</span><span class="builtintype" id="5411991">rune</span><span class="op" id="5411995">,</span>&nbsp;<span class="builtintype" id="5411997">int</span><span class="op" id="5412000">)</span>&nbsp;<span class="op" id="5412002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412005">if</span>&nbsp;<span class="ident" id="5412008"><a href="/regexp/regexp.go.html#5411981">pos</a></span>&nbsp;<span class="op" id="5412012">&lt;</span>&nbsp;<span class="builtinfunc" id="5412014">len</span><span class="op" id="5412017">(</span><span class="ident" id="5412018"><a href="/regexp/regexp.go.html#5411960">i</a></span><span class="op" id="5412019">.</span><span class="ident" id="5412020">str</span><span class="op" id="5412023">)</span>&nbsp;<span class="op" id="5412025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412029">c</span>&nbsp;<span class="op" id="5412031">:=</span>&nbsp;<span class="ident" id="5412034"><a href="/regexp/regexp.go.html#5411960">i</a></span><span class="op" id="5412035">.</span><span class="ident" id="5412036">str</span><span class="op" id="5412039">[</span><span class="ident" id="5412040"><a href="/regexp/regexp.go.html#5411981">pos</a></span><span class="op" id="5412043">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412047">if</span>&nbsp;<span class="ident" id="5412050"><a href="/regexp/regexp.go.html#5412029">c</a></span>&nbsp;<span class="op" id="5412052">&lt;</span>&nbsp;<span class="ident" id="5412054"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5412058">.</span><span class="ident" id="5412059">RuneSelf</span>&nbsp;<span class="op" id="5412068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412073">return</span>&nbsp;<span class="builtintype" id="5412080">rune</span><span class="op" id="5412084">(</span><span class="ident" id="5412085"><a href="/regexp/regexp.go.html#5412029">c</a></span><span class="op" id="5412086">)</span><span class="op" id="5412087">,</span>&nbsp;<span class="num" id="5412089">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412097">return</span>&nbsp;<span class="ident" id="5412104"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5412108">.</span><span class="ident" id="5412109">DecodeRuneInString</span><span class="op" id="5412127">(</span><span class="ident" id="5412128"><a href="/regexp/regexp.go.html#5411960">i</a></span><span class="op" id="5412129">.</span><span class="ident" id="5412130">str</span><span class="op" id="5412133">[</span><span class="ident" id="5412134"><a href="/regexp/regexp.go.html#5411981">pos</a></span><span class="op" id="5412137">:</span><span class="op" id="5412138">]</span><span class="op" id="5412139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412145">return</span>&nbsp;<span class="ident" id="5412152"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5412161">,</span>&nbsp;<span class="num" id="5412163">0</span><br>
<span class="lineno"></span><span class="op" id="5412165">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="keyword" id="5412168">func</span>&nbsp;<span class="op" id="5412173">(</span><span class="ident" id="5412174">i</span>&nbsp;<span class="op" id="5412176">*</span><span class="ident" id="5412177"><a href="/regexp/regexp.go.html#5411918">inputString</a></span><span class="op" id="5412188">)</span>&nbsp;<span class="ident" id="5412190">canCheckPrefix</span><span class="op" id="5412204">(</span><span class="op" id="5412205">)</span>&nbsp;<span class="builtintype" id="5412207">bool</span>&nbsp;<span class="op" id="5412212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412215">return</span>&nbsp;<span class="builtintype" id="5412222">true</span><br>
<span class="lineno"></span><span class="op" id="5412227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="5412230">func</span>&nbsp;<span class="op" id="5412235">(</span><span class="ident" id="5412236">i</span>&nbsp;<span class="op" id="5412238">*</span><span class="ident" id="5412239"><a href="/regexp/regexp.go.html#5411918">inputString</a></span><span class="op" id="5412250">)</span>&nbsp;<span class="ident" id="5412252">hasPrefix</span><span class="op" id="5412261">(</span><span class="ident" id="5412262">re</span>&nbsp;<span class="op" id="5412265">*</span><span class="ident" id="5412266"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5412272">)</span>&nbsp;<span class="builtintype" id="5412274">bool</span>&nbsp;<span class="op" id="5412279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412282">return</span>&nbsp;<span class="ident" id="5412289"><a href="/regexp/regexp.go.html#5405224">strings</a></span><span class="op" id="5412296">.</span><span class="ident" id="5412297">HasPrefix</span><span class="op" id="5412306">(</span><span class="ident" id="5412307"><a href="/regexp/regexp.go.html#5412236">i</a></span><span class="op" id="5412308">.</span><span class="ident" id="5412309">str</span><span class="op" id="5412312">,</span>&nbsp;<span class="ident" id="5412314"><a href="/regexp/regexp.go.html#5412262">re</a></span><span class="op" id="5412316">.</span><span class="ident" id="5412317">prefix</span><span class="op" id="5412323">)</span><br>
<span class="lineno"></span><span class="op" id="5412325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5412328">func</span>&nbsp;<span class="op" id="5412333">(</span><span class="ident" id="5412334">i</span>&nbsp;<span class="op" id="5412336">*</span><span class="ident" id="5412337"><a href="/regexp/regexp.go.html#5411918">inputString</a></span><span class="op" id="5412348">)</span>&nbsp;<span class="ident" id="5412350">index</span><span class="op" id="5412355">(</span><span class="ident" id="5412356">re</span>&nbsp;<span class="op" id="5412359">*</span><span class="ident" id="5412360"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5412366">,</span>&nbsp;<span class="ident" id="5412368">pos</span>&nbsp;<span class="builtintype" id="5412372">int</span><span class="op" id="5412375">)</span>&nbsp;<span class="builtintype" id="5412377">int</span>&nbsp;<span class="op" id="5412381">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412384">return</span>&nbsp;<span class="ident" id="5412391"><a href="/regexp/regexp.go.html#5405224">strings</a></span><span class="op" id="5412398">.</span><span class="ident" id="5412399">Index</span><span class="op" id="5412404">(</span><span class="ident" id="5412405"><a href="/regexp/regexp.go.html#5412334">i</a></span><span class="op" id="5412406">.</span><span class="ident" id="5412407">str</span><span class="op" id="5412410">[</span><span class="ident" id="5412411"><a href="/regexp/regexp.go.html#5412368">pos</a></span><span class="op" id="5412414">:</span><span class="op" id="5412415">]</span><span class="op" id="5412416">,</span>&nbsp;<span class="ident" id="5412418"><a href="/regexp/regexp.go.html#5412356">re</a></span><span class="op" id="5412420">.</span><span class="ident" id="5412421">prefix</span><span class="op" id="5412427">)</span><br>
<span class="lineno"></span><span class="op" id="5412429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5412432">func</span>&nbsp;<span class="op" id="5412437">(</span><span class="ident" id="5412438">i</span>&nbsp;<span class="op" id="5412440">*</span><span class="ident" id="5412441"><a href="/regexp/regexp.go.html#5411918">inputString</a></span><span class="op" id="5412452">)</span>&nbsp;<span class="ident" id="5412454">context</span><span class="op" id="5412461">(</span><span class="ident" id="5412462">pos</span>&nbsp;<span class="builtintype" id="5412466">int</span><span class="op" id="5412469">)</span>&nbsp;<span class="ident" id="5412471"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5412477">.</span><span class="ident" id="5412478">EmptyOp</span>&nbsp;<span class="op" id="5412486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412489">r1</span><span class="op" id="5412491">,</span>&nbsp;<span class="ident" id="5412493">r2</span>&nbsp;<span class="op" id="5412496">:=</span>&nbsp;<span class="ident" id="5412499"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5412508">,</span>&nbsp;<span class="ident" id="5412510"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412521">if</span>&nbsp;<span class="ident" id="5412524"><a href="/regexp/regexp.go.html#5412462">pos</a></span>&nbsp;<span class="op" id="5412528">&gt;</span>&nbsp;<span class="num" id="5412530">0</span>&nbsp;<span class="op" id="5412532">&amp;&amp;</span>&nbsp;<span class="ident" id="5412535"><a href="/regexp/regexp.go.html#5412462">pos</a></span>&nbsp;<span class="op" id="5412539">&lt;=</span>&nbsp;<span class="builtinfunc" id="5412542">len</span><span class="op" id="5412545">(</span><span class="ident" id="5412546"><a href="/regexp/regexp.go.html#5412438">i</a></span><span class="op" id="5412547">.</span><span class="ident" id="5412548">str</span><span class="op" id="5412551">)</span>&nbsp;<span class="op" id="5412553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412557"><a href="/regexp/regexp.go.html#5412489">r1</a></span><span class="op" id="5412559">,</span>&nbsp;<span class="ident" id="5412561">_</span>&nbsp;<span class="op" id="5412563">=</span>&nbsp;<span class="ident" id="5412565"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5412569">.</span><span class="ident" id="5412570">DecodeLastRuneInString</span><span class="op" id="5412592">(</span><span class="ident" id="5412593"><a href="/regexp/regexp.go.html#5412438">i</a></span><span class="op" id="5412594">.</span><span class="ident" id="5412595">str</span><span class="op" id="5412598">[</span><span class="op" id="5412599">:</span><span class="ident" id="5412600"><a href="/regexp/regexp.go.html#5412462">pos</a></span><span class="op" id="5412603">]</span><span class="op" id="5412604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412610">if</span>&nbsp;<span class="ident" id="5412613"><a href="/regexp/regexp.go.html#5412462">pos</a></span>&nbsp;<span class="op" id="5412617">&lt;</span>&nbsp;<span class="builtinfunc" id="5412619">len</span><span class="op" id="5412622">(</span><span class="ident" id="5412623"><a href="/regexp/regexp.go.html#5412438">i</a></span><span class="op" id="5412624">.</span><span class="ident" id="5412625">str</span><span class="op" id="5412628">)</span>&nbsp;<span class="op" id="5412630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412634"><a href="/regexp/regexp.go.html#5412493">r2</a></span><span class="op" id="5412636">,</span>&nbsp;<span class="ident" id="5412638">_</span>&nbsp;<span class="op" id="5412640">=</span>&nbsp;<span class="ident" id="5412642"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5412646">.</span><span class="ident" id="5412647">DecodeRuneInString</span><span class="op" id="5412665">(</span><span class="ident" id="5412666"><a href="/regexp/regexp.go.html#5412438">i</a></span><span class="op" id="5412667">.</span><span class="ident" id="5412668">str</span><span class="op" id="5412671">[</span><span class="ident" id="5412672"><a href="/regexp/regexp.go.html#5412462">pos</a></span><span class="op" id="5412675">:</span><span class="op" id="5412676">]</span><span class="op" id="5412677">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412683">return</span>&nbsp;<span class="ident" id="5412690"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5412696">.</span><span class="ident" id="5412697">EmptyOpContext</span><span class="op" id="5412711">(</span><span class="ident" id="5412712"><a href="/regexp/regexp.go.html#5412489">r1</a></span><span class="op" id="5412714">,</span>&nbsp;<span class="ident" id="5412716"><a href="/regexp/regexp.go.html#5412493">r2</a></span><span class="op" id="5412718">)</span><br>
<span class="lineno"></span><span class="op" id="5412720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5412723">//&nbsp;inputBytes&nbsp;scans&nbsp;a&nbsp;byte&nbsp;slice.</span><br>
<span class="lineno">310</span><span class="keyword" id="5412757">type</span>&nbsp;<span class="ident" id="5412762">inputBytes</span>&nbsp;<span class="keyword" id="5412773">struct</span>&nbsp;<span class="op" id="5412780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412783">str</span>&nbsp;<span class="op" id="5412787">[</span><span class="op" id="5412788">]</span><span class="builtintype" id="5412789">byte</span><br>
<span class="lineno"></span><span class="op" id="5412794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5412797">func</span>&nbsp;<span class="op" id="5412802">(</span><span class="ident" id="5412803">i</span>&nbsp;<span class="op" id="5412805">*</span><span class="ident" id="5412806"><a href="/regexp/regexp.go.html#5412762">inputBytes</a></span><span class="op" id="5412816">)</span>&nbsp;<span class="ident" id="5412818">step</span><span class="op" id="5412822">(</span><span class="ident" id="5412823">pos</span>&nbsp;<span class="builtintype" id="5412827">int</span><span class="op" id="5412830">)</span>&nbsp;<span class="op" id="5412832">(</span><span class="builtintype" id="5412833">rune</span><span class="op" id="5412837">,</span>&nbsp;<span class="builtintype" id="5412839">int</span><span class="op" id="5412842">)</span>&nbsp;<span class="op" id="5412844">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412847">if</span>&nbsp;<span class="ident" id="5412850"><a href="/regexp/regexp.go.html#5412823">pos</a></span>&nbsp;<span class="op" id="5412854">&lt;</span>&nbsp;<span class="builtinfunc" id="5412856">len</span><span class="op" id="5412859">(</span><span class="ident" id="5412860"><a href="/regexp/regexp.go.html#5412803">i</a></span><span class="op" id="5412861">.</span><span class="ident" id="5412862">str</span><span class="op" id="5412865">)</span>&nbsp;<span class="op" id="5412867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5412871">c</span>&nbsp;<span class="op" id="5412873">:=</span>&nbsp;<span class="ident" id="5412876"><a href="/regexp/regexp.go.html#5412803">i</a></span><span class="op" id="5412877">.</span><span class="ident" id="5412878">str</span><span class="op" id="5412881">[</span><span class="ident" id="5412882"><a href="/regexp/regexp.go.html#5412823">pos</a></span><span class="op" id="5412885">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412889">if</span>&nbsp;<span class="ident" id="5412892"><a href="/regexp/regexp.go.html#5412871">c</a></span>&nbsp;<span class="op" id="5412894">&lt;</span>&nbsp;<span class="ident" id="5412896"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5412900">.</span><span class="ident" id="5412901">RuneSelf</span>&nbsp;<span class="op" id="5412910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412915">return</span>&nbsp;<span class="builtintype" id="5412922">rune</span><span class="op" id="5412926">(</span><span class="ident" id="5412927"><a href="/regexp/regexp.go.html#5412871">c</a></span><span class="op" id="5412928">)</span><span class="op" id="5412929">,</span>&nbsp;<span class="num" id="5412931">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412935">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412939">return</span>&nbsp;<span class="ident" id="5412946"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5412950">.</span><span class="ident" id="5412951">DecodeRune</span><span class="op" id="5412961">(</span><span class="ident" id="5412962"><a href="/regexp/regexp.go.html#5412803">i</a></span><span class="op" id="5412963">.</span><span class="ident" id="5412964">str</span><span class="op" id="5412967">[</span><span class="ident" id="5412968"><a href="/regexp/regexp.go.html#5412823">pos</a></span><span class="op" id="5412971">:</span><span class="op" id="5412972">]</span><span class="op" id="5412973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5412976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5412979">return</span>&nbsp;<span class="ident" id="5412986"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5412995">,</span>&nbsp;<span class="num" id="5412997">0</span><br>
<span class="lineno"></span><span class="op" id="5412999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="keyword" id="5413002">func</span>&nbsp;<span class="op" id="5413007">(</span><span class="ident" id="5413008">i</span>&nbsp;<span class="op" id="5413010">*</span><span class="ident" id="5413011"><a href="/regexp/regexp.go.html#5412762">inputBytes</a></span><span class="op" id="5413021">)</span>&nbsp;<span class="ident" id="5413023">canCheckPrefix</span><span class="op" id="5413037">(</span><span class="op" id="5413038">)</span>&nbsp;<span class="builtintype" id="5413040">bool</span>&nbsp;<span class="op" id="5413045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413048">return</span>&nbsp;<span class="builtintype" id="5413055">true</span><br>
<span class="lineno"></span><span class="op" id="5413060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413063">func</span>&nbsp;<span class="op" id="5413068">(</span><span class="ident" id="5413069">i</span>&nbsp;<span class="op" id="5413071">*</span><span class="ident" id="5413072"><a href="/regexp/regexp.go.html#5412762">inputBytes</a></span><span class="op" id="5413082">)</span>&nbsp;<span class="ident" id="5413084">hasPrefix</span><span class="op" id="5413093">(</span><span class="ident" id="5413094">re</span>&nbsp;<span class="op" id="5413097">*</span><span class="ident" id="5413098"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5413104">)</span>&nbsp;<span class="builtintype" id="5413106">bool</span>&nbsp;<span class="op" id="5413111">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413114">return</span>&nbsp;<span class="ident" id="5413121"><a href="/regexp/regexp.go.html#5405181">bytes</a></span><span class="op" id="5413126">.</span><span class="ident" id="5413127">HasPrefix</span><span class="op" id="5413136">(</span><span class="ident" id="5413137"><a href="/regexp/regexp.go.html#5413069">i</a></span><span class="op" id="5413138">.</span><span class="ident" id="5413139">str</span><span class="op" id="5413142">,</span>&nbsp;<span class="ident" id="5413144"><a href="/regexp/regexp.go.html#5413094">re</a></span><span class="op" id="5413146">.</span><span class="ident" id="5413147">prefixBytes</span><span class="op" id="5413158">)</span><br>
<span class="lineno"></span><span class="op" id="5413160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413163">func</span>&nbsp;<span class="op" id="5413168">(</span><span class="ident" id="5413169">i</span>&nbsp;<span class="op" id="5413171">*</span><span class="ident" id="5413172"><a href="/regexp/regexp.go.html#5412762">inputBytes</a></span><span class="op" id="5413182">)</span>&nbsp;<span class="ident" id="5413184">index</span><span class="op" id="5413189">(</span><span class="ident" id="5413190">re</span>&nbsp;<span class="op" id="5413193">*</span><span class="ident" id="5413194"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5413200">,</span>&nbsp;<span class="ident" id="5413202">pos</span>&nbsp;<span class="builtintype" id="5413206">int</span><span class="op" id="5413209">)</span>&nbsp;<span class="builtintype" id="5413211">int</span>&nbsp;<span class="op" id="5413215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413218">return</span>&nbsp;<span class="ident" id="5413225"><a href="/regexp/regexp.go.html#5405181">bytes</a></span><span class="op" id="5413230">.</span><span class="ident" id="5413231">Index</span><span class="op" id="5413236">(</span><span class="ident" id="5413237"><a href="/regexp/regexp.go.html#5413169">i</a></span><span class="op" id="5413238">.</span><span class="ident" id="5413239">str</span><span class="op" id="5413242">[</span><span class="ident" id="5413243"><a href="/regexp/regexp.go.html#5413202">pos</a></span><span class="op" id="5413246">:</span><span class="op" id="5413247">]</span><span class="op" id="5413248">,</span>&nbsp;<span class="ident" id="5413250"><a href="/regexp/regexp.go.html#5413190">re</a></span><span class="op" id="5413252">.</span><span class="ident" id="5413253">prefixBytes</span><span class="op" id="5413264">)</span><br>
<span class="lineno">335</span><span class="op" id="5413266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413269">func</span>&nbsp;<span class="op" id="5413274">(</span><span class="ident" id="5413275">i</span>&nbsp;<span class="op" id="5413277">*</span><span class="ident" id="5413278"><a href="/regexp/regexp.go.html#5412762">inputBytes</a></span><span class="op" id="5413288">)</span>&nbsp;<span class="ident" id="5413290">context</span><span class="op" id="5413297">(</span><span class="ident" id="5413298">pos</span>&nbsp;<span class="builtintype" id="5413302">int</span><span class="op" id="5413305">)</span>&nbsp;<span class="ident" id="5413307"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5413313">.</span><span class="ident" id="5413314">EmptyOp</span>&nbsp;<span class="op" id="5413322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413325">r1</span><span class="op" id="5413327">,</span>&nbsp;<span class="ident" id="5413329">r2</span>&nbsp;<span class="op" id="5413332">:=</span>&nbsp;<span class="ident" id="5413335"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5413344">,</span>&nbsp;<span class="ident" id="5413346"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413357">if</span>&nbsp;<span class="ident" id="5413360"><a href="/regexp/regexp.go.html#5413298">pos</a></span>&nbsp;<span class="op" id="5413364">&gt;</span>&nbsp;<span class="num" id="5413366">0</span>&nbsp;<span class="op" id="5413368">&amp;&amp;</span>&nbsp;<span class="ident" id="5413371"><a href="/regexp/regexp.go.html#5413298">pos</a></span>&nbsp;<span class="op" id="5413375">&lt;=</span>&nbsp;<span class="builtinfunc" id="5413378">len</span><span class="op" id="5413381">(</span><span class="ident" id="5413382"><a href="/regexp/regexp.go.html#5413275">i</a></span><span class="op" id="5413383">.</span><span class="ident" id="5413384">str</span><span class="op" id="5413387">)</span>&nbsp;<span class="op" id="5413389">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413393"><a href="/regexp/regexp.go.html#5413325">r1</a></span><span class="op" id="5413395">,</span>&nbsp;<span class="ident" id="5413397">_</span>&nbsp;<span class="op" id="5413399">=</span>&nbsp;<span class="ident" id="5413401"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5413405">.</span><span class="ident" id="5413406">DecodeLastRune</span><span class="op" id="5413420">(</span><span class="ident" id="5413421"><a href="/regexp/regexp.go.html#5413275">i</a></span><span class="op" id="5413422">.</span><span class="ident" id="5413423">str</span><span class="op" id="5413426">[</span><span class="op" id="5413427">:</span><span class="ident" id="5413428"><a href="/regexp/regexp.go.html#5413298">pos</a></span><span class="op" id="5413431">]</span><span class="op" id="5413432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413438">if</span>&nbsp;<span class="ident" id="5413441"><a href="/regexp/regexp.go.html#5413298">pos</a></span>&nbsp;<span class="op" id="5413445">&lt;</span>&nbsp;<span class="builtinfunc" id="5413447">len</span><span class="op" id="5413450">(</span><span class="ident" id="5413451"><a href="/regexp/regexp.go.html#5413275">i</a></span><span class="op" id="5413452">.</span><span class="ident" id="5413453">str</span><span class="op" id="5413456">)</span>&nbsp;<span class="op" id="5413458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413462"><a href="/regexp/regexp.go.html#5413329">r2</a></span><span class="op" id="5413464">,</span>&nbsp;<span class="ident" id="5413466">_</span>&nbsp;<span class="op" id="5413468">=</span>&nbsp;<span class="ident" id="5413470"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5413474">.</span><span class="ident" id="5413475">DecodeRune</span><span class="op" id="5413485">(</span><span class="ident" id="5413486"><a href="/regexp/regexp.go.html#5413275">i</a></span><span class="op" id="5413487">.</span><span class="ident" id="5413488">str</span><span class="op" id="5413491">[</span><span class="ident" id="5413492"><a href="/regexp/regexp.go.html#5413298">pos</a></span><span class="op" id="5413495">:</span><span class="op" id="5413496">]</span><span class="op" id="5413497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413500">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413503">return</span>&nbsp;<span class="ident" id="5413510"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5413516">.</span><span class="ident" id="5413517">EmptyOpContext</span><span class="op" id="5413531">(</span><span class="ident" id="5413532"><a href="/regexp/regexp.go.html#5413325">r1</a></span><span class="op" id="5413534">,</span>&nbsp;<span class="ident" id="5413536"><a href="/regexp/regexp.go.html#5413329">r2</a></span><span class="op" id="5413538">)</span><br>
<span class="lineno"></span><span class="op" id="5413540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5413543">//&nbsp;inputReader&nbsp;scans&nbsp;a&nbsp;RuneReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5413578">type</span>&nbsp;<span class="ident" id="5413583">inputReader</span>&nbsp;<span class="keyword" id="5413595">struct</span>&nbsp;<span class="op" id="5413602">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413605">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413611"><a href="/regexp/regexp.go.html#5405190">io</a></span><span class="op" id="5413613">.</span><span class="ident" id="5413614">RuneReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413626">atEOT</span>&nbsp;<span class="builtintype" id="5413632">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413638">pos</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5413644">int</span><br>
<span class="lineno"></span><span class="op" id="5413648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="keyword" id="5413651">func</span>&nbsp;<span class="op" id="5413656">(</span><span class="ident" id="5413657">i</span>&nbsp;<span class="op" id="5413659">*</span><span class="ident" id="5413660"><a href="/regexp/regexp.go.html#5413583">inputReader</a></span><span class="op" id="5413671">)</span>&nbsp;<span class="ident" id="5413673">step</span><span class="op" id="5413677">(</span><span class="ident" id="5413678">pos</span>&nbsp;<span class="builtintype" id="5413682">int</span><span class="op" id="5413685">)</span>&nbsp;<span class="op" id="5413687">(</span><span class="builtintype" id="5413688">rune</span><span class="op" id="5413692">,</span>&nbsp;<span class="builtintype" id="5413694">int</span><span class="op" id="5413697">)</span>&nbsp;<span class="op" id="5413699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413702">if</span>&nbsp;<span class="op" id="5413705">!</span><span class="ident" id="5413706"><a href="/regexp/regexp.go.html#5413657">i</a></span><span class="op" id="5413707">.</span><span class="ident" id="5413708">atEOT</span>&nbsp;<span class="op" id="5413714">&amp;&amp;</span>&nbsp;<span class="ident" id="5413717"><a href="/regexp/regexp.go.html#5413678">pos</a></span>&nbsp;<span class="op" id="5413721">!=</span>&nbsp;<span class="ident" id="5413724"><a href="/regexp/regexp.go.html#5413657">i</a></span><span class="op" id="5413725">.</span><span class="ident" id="5413726">pos</span>&nbsp;<span class="op" id="5413730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413734">return</span>&nbsp;<span class="ident" id="5413741"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5413750">,</span>&nbsp;<span class="num" id="5413752">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413756">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413759">r</span><span class="op" id="5413760">,</span>&nbsp;<span class="ident" id="5413762">w</span><span class="op" id="5413763">,</span>&nbsp;<span class="ident" id="5413765">err</span>&nbsp;<span class="op" id="5413769">:=</span>&nbsp;<span class="ident" id="5413772"><a href="/regexp/regexp.go.html#5413657">i</a></span><span class="op" id="5413773">.</span><span class="ident" id="5413774">r</span><span class="op" id="5413775">.</span><span class="ident" id="5413776">ReadRune</span><span class="op" id="5413784">(</span><span class="op" id="5413785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413788">if</span>&nbsp;<span class="ident" id="5413791"><a href="/regexp/regexp.go.html#5413765">err</a></span>&nbsp;<span class="op" id="5413795">!=</span>&nbsp;<span class="ident" id="5413798">nil</span>&nbsp;<span class="op" id="5413802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413806"><a href="/regexp/regexp.go.html#5413657">i</a></span><span class="op" id="5413807">.</span><span class="ident" id="5413808">atEOT</span>&nbsp;<span class="op" id="5413814">=</span>&nbsp;<span class="builtintype" id="5413816">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413823">return</span>&nbsp;<span class="ident" id="5413830"><a href="/regexp/regexp.go.html#5411506">endOfText</a></span><span class="op" id="5413839">,</span>&nbsp;<span class="num" id="5413841">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5413844">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5413847"><a href="/regexp/regexp.go.html#5413657">i</a></span><span class="op" id="5413848">.</span><span class="ident" id="5413849">pos</span>&nbsp;<span class="op" id="5413853">+=</span>&nbsp;<span class="ident" id="5413856"><a href="/regexp/regexp.go.html#5413762">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413859">return</span>&nbsp;<span class="ident" id="5413866"><a href="/regexp/regexp.go.html#5413759">r</a></span><span class="op" id="5413867">,</span>&nbsp;<span class="ident" id="5413869"><a href="/regexp/regexp.go.html#5413762">w</a></span><br>
<span class="lineno"></span><span class="op" id="5413871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413874">func</span>&nbsp;<span class="op" id="5413879">(</span><span class="ident" id="5413880">i</span>&nbsp;<span class="op" id="5413882">*</span><span class="ident" id="5413883"><a href="/regexp/regexp.go.html#5413583">inputReader</a></span><span class="op" id="5413894">)</span>&nbsp;<span class="ident" id="5413896">canCheckPrefix</span><span class="op" id="5413910">(</span><span class="op" id="5413911">)</span>&nbsp;<span class="builtintype" id="5413913">bool</span>&nbsp;<span class="op" id="5413918">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413921">return</span>&nbsp;<span class="builtintype" id="5413928">false</span><br>
<span class="lineno"></span><span class="op" id="5413934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413937">func</span>&nbsp;<span class="op" id="5413942">(</span><span class="ident" id="5413943">i</span>&nbsp;<span class="op" id="5413945">*</span><span class="ident" id="5413946"><a href="/regexp/regexp.go.html#5413583">inputReader</a></span><span class="op" id="5413957">)</span>&nbsp;<span class="ident" id="5413959">hasPrefix</span><span class="op" id="5413968">(</span><span class="ident" id="5413969">re</span>&nbsp;<span class="op" id="5413972">*</span><span class="ident" id="5413973"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5413979">)</span>&nbsp;<span class="builtintype" id="5413981">bool</span>&nbsp;<span class="op" id="5413986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5413989">return</span>&nbsp;<span class="builtintype" id="5413996">false</span><br>
<span class="lineno">375</span><span class="op" id="5414002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5414005">func</span>&nbsp;<span class="op" id="5414010">(</span><span class="ident" id="5414011">i</span>&nbsp;<span class="op" id="5414013">*</span><span class="ident" id="5414014"><a href="/regexp/regexp.go.html#5413583">inputReader</a></span><span class="op" id="5414025">)</span>&nbsp;<span class="ident" id="5414027">index</span><span class="op" id="5414032">(</span><span class="ident" id="5414033">re</span>&nbsp;<span class="op" id="5414036">*</span><span class="ident" id="5414037"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5414043">,</span>&nbsp;<span class="ident" id="5414045">pos</span>&nbsp;<span class="builtintype" id="5414049">int</span><span class="op" id="5414052">)</span>&nbsp;<span class="builtintype" id="5414054">int</span>&nbsp;<span class="op" id="5414058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414061">return</span>&nbsp;<span class="op" id="5414068">-</span><span class="num" id="5414069">1</span><br>
<span class="lineno"></span><span class="op" id="5414071">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span><span class="keyword" id="5414074">func</span>&nbsp;<span class="op" id="5414079">(</span><span class="ident" id="5414080">i</span>&nbsp;<span class="op" id="5414082">*</span><span class="ident" id="5414083"><a href="/regexp/regexp.go.html#5413583">inputReader</a></span><span class="op" id="5414094">)</span>&nbsp;<span class="ident" id="5414096">context</span><span class="op" id="5414103">(</span><span class="ident" id="5414104">pos</span>&nbsp;<span class="builtintype" id="5414108">int</span><span class="op" id="5414111">)</span>&nbsp;<span class="ident" id="5414113"><a href="/regexp/regexp.go.html#5405196">syntax</a></span><span class="op" id="5414119">.</span><span class="ident" id="5414120">EmptyOp</span>&nbsp;<span class="op" id="5414128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414131">return</span>&nbsp;<span class="num" id="5414138">0</span><br>
<span class="lineno"></span><span class="op" id="5414140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="comment" id="5414143">//&nbsp;LiteralPrefix&nbsp;returns&nbsp;a&nbsp;literal&nbsp;string&nbsp;that&nbsp;must&nbsp;begin&nbsp;any&nbsp;match</span><br>
<span class="lineno"></span><span class="comment" id="5414211">//&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;re.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;boolean&nbsp;true&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5414280">//&nbsp;literal&nbsp;string&nbsp;comprises&nbsp;the&nbsp;entire&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="keyword" id="5414339">func</span>&nbsp;<span class="op" id="5414344">(</span><span class="ident" id="5414345">re</span>&nbsp;<span class="op" id="5414348">*</span><span class="ident" id="5414349"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5414355">)</span>&nbsp;<span class="ident" id="5414357">LiteralPrefix</span><span class="op" id="5414370">(</span><span class="op" id="5414371">)</span>&nbsp;<span class="op" id="5414373">(</span><span class="ident" id="5414374">prefix</span>&nbsp;<span class="builtintype" id="5414381">string</span><span class="op" id="5414387">,</span>&nbsp;<span class="ident" id="5414389">complete</span>&nbsp;<span class="builtintype" id="5414398">bool</span><span class="op" id="5414402">)</span>&nbsp;<span class="op" id="5414404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414407">return</span>&nbsp;<span class="ident" id="5414414"><a href="/regexp/regexp.go.html#5414345">re</a></span><span class="op" id="5414416">.</span><span class="ident" id="5414417">prefix</span><span class="op" id="5414423">,</span>&nbsp;<span class="ident" id="5414425"><a href="/regexp/regexp.go.html#5414345">re</a></span><span class="op" id="5414427">.</span><span class="ident" id="5414428">prefixComplete</span><br>
<span class="lineno">390</span><span class="op" id="5414443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5414446">//&nbsp;MatchReader&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;text&nbsp;read&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5414517">//&nbsp;RuneReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5414532">func</span>&nbsp;<span class="op" id="5414537">(</span><span class="ident" id="5414538">re</span>&nbsp;<span class="op" id="5414541">*</span><span class="ident" id="5414542"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5414548">)</span>&nbsp;<span class="ident" id="5414550">MatchReader</span><span class="op" id="5414561">(</span><span class="ident" id="5414562">r</span>&nbsp;<span class="ident" id="5414564"><a href="/regexp/regexp.go.html#5405190">io</a></span><span class="op" id="5414566">.</span><span class="ident" id="5414567">RuneReader</span><span class="op" id="5414577">)</span>&nbsp;<span class="builtintype" id="5414579">bool</span>&nbsp;<span class="op" id="5414584">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414587">return</span>&nbsp;<span class="ident" id="5414594"><a href="/regexp/regexp.go.html#5414538">re</a></span><span class="op" id="5414596">.</span><span class="ident" id="5414597">doExecute</span><span class="op" id="5414606">(</span><span class="ident" id="5414607"><a href="/regexp/regexp.go.html#5414562">r</a></span><span class="op" id="5414608">,</span>&nbsp;<span class="ident" id="5414610">nil</span><span class="op" id="5414613">,</span>&nbsp;<span class="string" id="5414615">&#34;&#34;</span><span class="op" id="5414617">,</span>&nbsp;<span class="num" id="5414619">0</span><span class="op" id="5414620">,</span>&nbsp;<span class="num" id="5414622">0</span><span class="op" id="5414623">)</span>&nbsp;<span class="op" id="5414625">!=</span>&nbsp;<span class="ident" id="5414628">nil</span><br>
<span class="lineno"></span><span class="op" id="5414632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5414635">//&nbsp;MatchString&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="5414699">func</span>&nbsp;<span class="op" id="5414704">(</span><span class="ident" id="5414705">re</span>&nbsp;<span class="op" id="5414708">*</span><span class="ident" id="5414709"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5414715">)</span>&nbsp;<span class="ident" id="5414717">MatchString</span><span class="op" id="5414728">(</span><span class="ident" id="5414729">s</span>&nbsp;<span class="builtintype" id="5414731">string</span><span class="op" id="5414737">)</span>&nbsp;<span class="builtintype" id="5414739">bool</span>&nbsp;<span class="op" id="5414744">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414747">return</span>&nbsp;<span class="ident" id="5414754"><a href="/regexp/regexp.go.html#5414705">re</a></span><span class="op" id="5414756">.</span><span class="ident" id="5414757">doExecute</span><span class="op" id="5414766">(</span><span class="ident" id="5414767">nil</span><span class="op" id="5414770">,</span>&nbsp;<span class="ident" id="5414772">nil</span><span class="op" id="5414775">,</span>&nbsp;<span class="ident" id="5414777"><a href="/regexp/regexp.go.html#5414729">s</a></span><span class="op" id="5414778">,</span>&nbsp;<span class="num" id="5414780">0</span><span class="op" id="5414781">,</span>&nbsp;<span class="num" id="5414783">0</span><span class="op" id="5414784">)</span>&nbsp;<span class="op" id="5414786">!=</span>&nbsp;<span class="ident" id="5414789">nil</span><br>
<span class="lineno"></span><span class="op" id="5414793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5414796">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;byte&nbsp;slice&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5414858">func</span>&nbsp;<span class="op" id="5414863">(</span><span class="ident" id="5414864">re</span>&nbsp;<span class="op" id="5414867">*</span><span class="ident" id="5414868"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5414874">)</span>&nbsp;<span class="ident" id="5414876">Match</span><span class="op" id="5414881">(</span><span class="ident" id="5414882">b</span>&nbsp;<span class="op" id="5414884">[</span><span class="op" id="5414885">]</span><span class="builtintype" id="5414886">byte</span><span class="op" id="5414890">)</span>&nbsp;<span class="builtintype" id="5414892">bool</span>&nbsp;<span class="op" id="5414897">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5414900">return</span>&nbsp;<span class="ident" id="5414907"><a href="/regexp/regexp.go.html#5414864">re</a></span><span class="op" id="5414909">.</span><span class="ident" id="5414910">doExecute</span><span class="op" id="5414919">(</span><span class="ident" id="5414920">nil</span><span class="op" id="5414923">,</span>&nbsp;<span class="ident" id="5414925"><a href="/regexp/regexp.go.html#5414882">b</a></span><span class="op" id="5414926">,</span>&nbsp;<span class="string" id="5414928">&#34;&#34;</span><span class="op" id="5414930">,</span>&nbsp;<span class="num" id="5414932">0</span><span class="op" id="5414933">,</span>&nbsp;<span class="num" id="5414935">0</span><span class="op" id="5414936">)</span>&nbsp;<span class="op" id="5414938">!=</span>&nbsp;<span class="ident" id="5414941">nil</span><br>
<span class="lineno"></span><span class="op" id="5414945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5414948">//&nbsp;MatchReader&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression&nbsp;matches&nbsp;the&nbsp;text</span><br>
<span class="lineno"></span><span class="comment" id="5415024">//&nbsp;read&nbsp;by&nbsp;the&nbsp;RuneReader.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and</span><br>
<span class="lineno">410</span><span class="comment" id="5415101">//&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="5415131">func</span>&nbsp;<span class="ident" id="5415136">MatchReader</span><span class="op" id="5415147">(</span><span class="ident" id="5415148">pattern</span>&nbsp;<span class="builtintype" id="5415156">string</span><span class="op" id="5415162">,</span>&nbsp;<span class="ident" id="5415164">r</span>&nbsp;<span class="ident" id="5415166"><a href="/regexp/regexp.go.html#5405190">io</a></span><span class="op" id="5415168">.</span><span class="ident" id="5415169">RuneReader</span><span class="op" id="5415179">)</span>&nbsp;<span class="op" id="5415181">(</span><span class="ident" id="5415182">matched</span>&nbsp;<span class="builtintype" id="5415190">bool</span><span class="op" id="5415194">,</span>&nbsp;<span class="ident" id="5415196">err</span>&nbsp;<span class="builtintype" id="5415200">error</span><span class="op" id="5415205">)</span>&nbsp;<span class="op" id="5415207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415210">re</span><span class="op" id="5415212">,</span>&nbsp;<span class="ident" id="5415214"><a href="/regexp/regexp.go.html#5415196">err</a></span>&nbsp;<span class="op" id="5415218">:=</span>&nbsp;<span class="ident" id="5415221"><a href="/regexp/regexp.go.html#5406892">Compile</a></span><span class="op" id="5415228">(</span><span class="ident" id="5415229"><a href="/regexp/regexp.go.html#5415148">pattern</a></span><span class="op" id="5415236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415239">if</span>&nbsp;<span class="ident" id="5415242"><a href="/regexp/regexp.go.html#5415196">err</a></span>&nbsp;<span class="op" id="5415246">!=</span>&nbsp;<span class="ident" id="5415249">nil</span>&nbsp;<span class="op" id="5415253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415257">return</span>&nbsp;<span class="builtintype" id="5415264">false</span><span class="op" id="5415269">,</span>&nbsp;<span class="ident" id="5415271"><a href="/regexp/regexp.go.html#5415196">err</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415279">return</span>&nbsp;<span class="ident" id="5415286"><a href="/regexp/regexp.go.html#5415210">re</a></span><span class="op" id="5415288">.</span><span class="ident" id="5415289">MatchReader</span><span class="op" id="5415300">(</span><span class="ident" id="5415301"><a href="/regexp/regexp.go.html#5415164">r</a></span><span class="op" id="5415302">)</span><span class="op" id="5415303">,</span>&nbsp;<span class="ident" id="5415305">nil</span><br>
<span class="lineno"></span><span class="op" id="5415309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5415312">//&nbsp;MatchString&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression</span><br>
<span class="lineno">420</span><span class="comment" id="5415371">//&nbsp;matches&nbsp;a&nbsp;string.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need</span><br>
<span class="lineno"></span><span class="comment" id="5415423">//&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="5415472">func</span>&nbsp;<span class="ident" id="5415477">MatchString</span><span class="op" id="5415488">(</span><span class="ident" id="5415489">pattern</span>&nbsp;<span class="builtintype" id="5415497">string</span><span class="op" id="5415503">,</span>&nbsp;<span class="ident" id="5415505">s</span>&nbsp;<span class="builtintype" id="5415507">string</span><span class="op" id="5415513">)</span>&nbsp;<span class="op" id="5415515">(</span><span class="ident" id="5415516">matched</span>&nbsp;<span class="builtintype" id="5415524">bool</span><span class="op" id="5415528">,</span>&nbsp;<span class="ident" id="5415530">err</span>&nbsp;<span class="builtintype" id="5415534">error</span><span class="op" id="5415539">)</span>&nbsp;<span class="op" id="5415541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415544">re</span><span class="op" id="5415546">,</span>&nbsp;<span class="ident" id="5415548"><a href="/regexp/regexp.go.html#5415530">err</a></span>&nbsp;<span class="op" id="5415552">:=</span>&nbsp;<span class="ident" id="5415555"><a href="/regexp/regexp.go.html#5406892">Compile</a></span><span class="op" id="5415562">(</span><span class="ident" id="5415563"><a href="/regexp/regexp.go.html#5415489">pattern</a></span><span class="op" id="5415570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415573">if</span>&nbsp;<span class="ident" id="5415576"><a href="/regexp/regexp.go.html#5415530">err</a></span>&nbsp;<span class="op" id="5415580">!=</span>&nbsp;<span class="ident" id="5415583">nil</span>&nbsp;<span class="op" id="5415587">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415591">return</span>&nbsp;<span class="builtintype" id="5415598">false</span><span class="op" id="5415603">,</span>&nbsp;<span class="ident" id="5415605"><a href="/regexp/regexp.go.html#5415530">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415613">return</span>&nbsp;<span class="ident" id="5415620"><a href="/regexp/regexp.go.html#5415544">re</a></span><span class="op" id="5415622">.</span><span class="ident" id="5415623">MatchString</span><span class="op" id="5415634">(</span><span class="ident" id="5415635"><a href="/regexp/regexp.go.html#5415505">s</a></span><span class="op" id="5415636">)</span><span class="op" id="5415637">,</span>&nbsp;<span class="ident" id="5415639">nil</span><br>
<span class="lineno"></span><span class="op" id="5415643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="5415646">//&nbsp;Match&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="5415699">//&nbsp;matches&nbsp;a&nbsp;byte&nbsp;slice.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need</span><br>
<span class="lineno"></span><span class="comment" id="5415755">//&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="5415804">func</span>&nbsp;<span class="ident" id="5415809">Match</span><span class="op" id="5415814">(</span><span class="ident" id="5415815">pattern</span>&nbsp;<span class="builtintype" id="5415823">string</span><span class="op" id="5415829">,</span>&nbsp;<span class="ident" id="5415831">b</span>&nbsp;<span class="op" id="5415833">[</span><span class="op" id="5415834">]</span><span class="builtintype" id="5415835">byte</span><span class="op" id="5415839">)</span>&nbsp;<span class="op" id="5415841">(</span><span class="ident" id="5415842">matched</span>&nbsp;<span class="builtintype" id="5415850">bool</span><span class="op" id="5415854">,</span>&nbsp;<span class="ident" id="5415856">err</span>&nbsp;<span class="builtintype" id="5415860">error</span><span class="op" id="5415865">)</span>&nbsp;<span class="op" id="5415867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5415870">re</span><span class="op" id="5415872">,</span>&nbsp;<span class="ident" id="5415874"><a href="/regexp/regexp.go.html#5415856">err</a></span>&nbsp;<span class="op" id="5415878">:=</span>&nbsp;<span class="ident" id="5415881"><a href="/regexp/regexp.go.html#5406892">Compile</a></span><span class="op" id="5415888">(</span><span class="ident" id="5415889"><a href="/regexp/regexp.go.html#5415815">pattern</a></span><span class="op" id="5415896">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415899">if</span>&nbsp;<span class="ident" id="5415902"><a href="/regexp/regexp.go.html#5415856">err</a></span>&nbsp;<span class="op" id="5415906">!=</span>&nbsp;<span class="ident" id="5415909">nil</span>&nbsp;<span class="op" id="5415913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415917">return</span>&nbsp;<span class="builtintype" id="5415924">false</span><span class="op" id="5415929">,</span>&nbsp;<span class="ident" id="5415931"><a href="/regexp/regexp.go.html#5415856">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5415936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5415939">return</span>&nbsp;<span class="ident" id="5415946"><a href="/regexp/regexp.go.html#5415870">re</a></span><span class="op" id="5415948">.</span><span class="ident" id="5415949">Match</span><span class="op" id="5415954">(</span><span class="ident" id="5415955"><a href="/regexp/regexp.go.html#5415831">b</a></span><span class="op" id="5415956">)</span><span class="op" id="5415957">,</span>&nbsp;<span class="ident" id="5415959">nil</span><br>
<span class="lineno"></span><span class="op" id="5415963">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5415966">//&nbsp;ReplaceAllString&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="5416041">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;string&nbsp;repl.&nbsp;&nbsp;Inside&nbsp;repl,&nbsp;$&nbsp;signs&nbsp;are&nbsp;interpreted&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5416119">//&nbsp;in&nbsp;Expand,&nbsp;so&nbsp;for&nbsp;instance&nbsp;$1&nbsp;represents&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;first&nbsp;submatch.</span><br>
<span class="lineno"></span><span class="keyword" id="5416195">func</span>&nbsp;<span class="op" id="5416200">(</span><span class="ident" id="5416201">re</span>&nbsp;<span class="op" id="5416204">*</span><span class="ident" id="5416205"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5416211">)</span>&nbsp;<span class="ident" id="5416213">ReplaceAllString</span><span class="op" id="5416229">(</span><span class="ident" id="5416230">src</span><span class="op" id="5416233">,</span>&nbsp;<span class="ident" id="5416235">repl</span>&nbsp;<span class="builtintype" id="5416240">string</span><span class="op" id="5416246">)</span>&nbsp;<span class="builtintype" id="5416248">string</span>&nbsp;<span class="op" id="5416255">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416258">n</span>&nbsp;<span class="op" id="5416260">:=</span>&nbsp;<span class="num" id="5416263">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5416266">if</span>&nbsp;<span class="ident" id="5416269"><a href="/regexp/regexp.go.html#5405224">strings</a></span><span class="op" id="5416276">.</span><span class="ident" id="5416277">Index</span><span class="op" id="5416282">(</span><span class="ident" id="5416283"><a href="/regexp/regexp.go.html#5416235">repl</a></span><span class="op" id="5416287">,</span>&nbsp;<span class="string" id="5416289">&#34;$&#34;</span><span class="op" id="5416292">)</span>&nbsp;<span class="op" id="5416294">&gt;=</span>&nbsp;<span class="num" id="5416297">0</span>&nbsp;<span class="op" id="5416299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416303"><a href="/regexp/regexp.go.html#5416258">n</a></span>&nbsp;<span class="op" id="5416305">=</span>&nbsp;<span class="num" id="5416307">2</span>&nbsp;<span class="op" id="5416309">*</span>&nbsp;<span class="op" id="5416311">(</span><span class="ident" id="5416312"><a href="/regexp/regexp.go.html#5416201">re</a></span><span class="op" id="5416314">.</span><span class="ident" id="5416315">numSubexp</span>&nbsp;<span class="op" id="5416325">+</span>&nbsp;<span class="num" id="5416327">1</span><span class="op" id="5416328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5416331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5416334">b</span>&nbsp;<span class="op" id="5416336">:=</span>&nbsp;<span class="ident" id="5416339"><a href="/regexp/regexp.go.html#5416201">re</a></span><span class="op" id="5416341">.</span><span class="ident" id="5416342">replaceAll</span><span class="op" id="5416352">(</span><span class="ident" id="5416353">nil</span><span class="op" id="5416356">,</span>&nbsp;<span class="ident" id="5416358"><a href="/regexp/regexp.go.html#5416230">src</a></span><span class="op" id="5416361">,</span>&nbsp;<span class="ident" id="5416363"><a href="/regexp/regexp.go.html#5416258">n</a></span><span class="op" id="5416364">,</span>&nbsp;<span class="keyword" id="5416366">func</span><span class="op" id="5416370">(</span><span class="ident" id="5416371">dst</span>&nbsp;<span class="op" id="5416375">[</span><span class="op" id="5416376">]</span><span class="builtintype" id="5416377">byte</span><span class="op" id="5416381">,</span>&nbsp;<span class="ident" id="5416383">match</span>&nbsp;<span class="op" id="5416389">[</span><span class="op" id="5416390">]</span><span class="builtintype" id="5416391">int</span><span class="op" id="5416394">)</span>&nbsp;<span class="op" id="5416396">[</span><span class="op" id="5416397">]</span><span class="builtintype" id="5416398">byte</span>&nbsp;<span class="op" id="5416403">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5416407">return</span>&nbsp;<span class="ident" id="5416414"><a href="/regexp/regexp.go.html#5416201">re</a></span><span class="op" id="5416416">.</span><span class="ident" id="5416417">expand</span><span class="op" id="5416423">(</span><span class="ident" id="5416424"><a href="/regexp/regexp.go.html#5416371">dst</a></span><span class="op" id="5416427">,</span>&nbsp;<span class="ident" id="5416429"><a href="/regexp/regexp.go.html#5416235">repl</a></span><span class="op" id="5416433">,</span>&nbsp;<span class="ident" id="5416435">nil</span><span class="op" id="5416438">,</span>&nbsp;<span class="ident" id="5416440"><a href="/regexp/regexp.go.html#5416230">src</a></span><span class="op" id="5416443">,</span>&nbsp;<span class="ident" id="5416445"><a href="/regexp/regexp.go.html#5416383">match</a></span><span class="op" id="5416450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5416453">}</span><span class="op" id="5416454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5416457">return</span>&nbsp;<span class="builtintype" id="5416464">string</span><span class="op" id="5416470">(</span><span class="ident" id="5416471"><a href="/regexp/regexp.go.html#5416334">b</a></span><span class="op" id="5416472">)</span><br>
<span class="lineno"></span><span class="op" id="5416474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span><span class="comment" id="5416477">//&nbsp;ReplaceAllLiteralString&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="5416559">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;string&nbsp;repl.&nbsp;&nbsp;The&nbsp;replacement&nbsp;repl&nbsp;is&nbsp;substituted&nbsp;directly,</span><br>
<span class="lineno"></span><span class="comment" id="5416643">//&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="5416668">func</span>&nbsp;<span class="op" id="5416673">(</span><span class="ident" id="5416674">re</span>&nbsp;<span class="op" id="5416677">*</span><span class="ident" id="5416678"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5416684">)</span>&nbsp;<span class="ident" id="5416686">ReplaceAllLiteralString</span><span class="op" id="5416709">(</span><span class="ident" id="5416710">src</span><span class="op" id="5416713">,</span>&nbsp;<span class="ident" id="5416715">repl</span>&nbsp;<span class="builtintype" id="5416720">string</span><span class="op" id="5416726">)</span>&nbsp;<span class="builtintype" id="5416728">string</span>&nbsp;<span class="op" id="5416735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5416738">return</span>&nbsp;<span class="builtintype" id="5416745">string</span><span class="op" id="5416751">(</span><span class="ident" id="5416752"><a href="/regexp/regexp.go.html#5416674">re</a></span><span class="op" id="5416754">.</span><span class="ident" id="5416755">replaceAll</span><span class="op" id="5416765">(</span><span class="ident" id="5416766">nil</span><span class="op" id="5416769">,</span>&nbsp;<span class="ident" id="5416771"><a href="/regexp/regexp.go.html#5416710">src</a></span><span class="op" id="5416774">,</span>&nbsp;<span class="num" id="5416776">2</span><span class="op" id="5416777">,</span>&nbsp;<span class="keyword" id="5416779">func</span><span class="op" id="5416783">(</span><span class="ident" id="5416784">dst</span>&nbsp;<span class="op" id="5416788">[</span><span class="op" id="5416789">]</span><span class="builtintype" id="5416790">byte</span><span class="op" id="5416794">,</span>&nbsp;<span class="ident" id="5416796">match</span>&nbsp;<span class="op" id="5416802">[</span><span class="op" id="5416803">]</span><span class="builtintype" id="5416804">int</span><span class="op" id="5416807">)</span>&nbsp;<span class="op" id="5416809">[</span><span class="op" id="5416810">]</span><span class="builtintype" id="5416811">byte</span>&nbsp;<span class="op" id="5416816">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5416820">return</span>&nbsp;<span class="builtinfunc" id="5416827">append</span><span class="op" id="5416833">(</span><span class="ident" id="5416834"><a href="/regexp/regexp.go.html#5416784">dst</a></span><span class="op" id="5416837">,</span>&nbsp;<span class="ident" id="5416839"><a href="/regexp/regexp.go.html#5416715">repl</a></span><span class="op" id="5416843">...</span><span class="op" id="5416846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5416849">}</span><span class="op" id="5416850">)</span><span class="op" id="5416851">)</span><br>
<span class="lineno"></span><span class="op" id="5416853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416856">//&nbsp;ReplaceAllStringFunc&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src&nbsp;in&nbsp;which&nbsp;all&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno">465</span><span class="comment" id="5416930">//&nbsp;Regexp&nbsp;have&nbsp;been&nbsp;replaced&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;function&nbsp;repl&nbsp;applied</span><br>
<span class="lineno"></span><span class="comment" id="5417004">//&nbsp;to&nbsp;the&nbsp;matched&nbsp;substring.&nbsp;&nbsp;The&nbsp;replacement&nbsp;returned&nbsp;by&nbsp;repl&nbsp;is&nbsp;substituted</span><br>
<span class="lineno"></span><span class="comment" id="5417082">//&nbsp;directly,&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="5417117">func</span>&nbsp;<span class="op" id="5417122">(</span><span class="ident" id="5417123">re</span>&nbsp;<span class="op" id="5417126">*</span><span class="ident" id="5417127"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5417133">)</span>&nbsp;<span class="ident" id="5417135">ReplaceAllStringFunc</span><span class="op" id="5417155">(</span><span class="ident" id="5417156">src</span>&nbsp;<span class="builtintype" id="5417160">string</span><span class="op" id="5417166">,</span>&nbsp;<span class="ident" id="5417168">repl</span>&nbsp;<span class="keyword" id="5417173">func</span><span class="op" id="5417177">(</span><span class="builtintype" id="5417178">string</span><span class="op" id="5417184">)</span>&nbsp;<span class="builtintype" id="5417186">string</span><span class="op" id="5417192">)</span>&nbsp;<span class="builtintype" id="5417194">string</span>&nbsp;<span class="op" id="5417201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417204">b</span>&nbsp;<span class="op" id="5417206">:=</span>&nbsp;<span class="ident" id="5417209"><a href="/regexp/regexp.go.html#5417123">re</a></span><span class="op" id="5417211">.</span><span class="ident" id="5417212">replaceAll</span><span class="op" id="5417222">(</span><span class="ident" id="5417223">nil</span><span class="op" id="5417226">,</span>&nbsp;<span class="ident" id="5417228"><a href="/regexp/regexp.go.html#5417156">src</a></span><span class="op" id="5417231">,</span>&nbsp;<span class="num" id="5417233">2</span><span class="op" id="5417234">,</span>&nbsp;<span class="keyword" id="5417236">func</span><span class="op" id="5417240">(</span><span class="ident" id="5417241">dst</span>&nbsp;<span class="op" id="5417245">[</span><span class="op" id="5417246">]</span><span class="builtintype" id="5417247">byte</span><span class="op" id="5417251">,</span>&nbsp;<span class="ident" id="5417253">match</span>&nbsp;<span class="op" id="5417259">[</span><span class="op" id="5417260">]</span><span class="builtintype" id="5417261">int</span><span class="op" id="5417264">)</span>&nbsp;<span class="op" id="5417266">[</span><span class="op" id="5417267">]</span><span class="builtintype" id="5417268">byte</span>&nbsp;<span class="op" id="5417273">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417277">return</span>&nbsp;<span class="builtinfunc" id="5417284">append</span><span class="op" id="5417290">(</span><span class="ident" id="5417291"><a href="/regexp/regexp.go.html#5417241">dst</a></span><span class="op" id="5417294">,</span>&nbsp;<span class="ident" id="5417296"><a href="/regexp/regexp.go.html#5417168">repl</a></span><span class="op" id="5417300">(</span><span class="ident" id="5417301"><a href="/regexp/regexp.go.html#5417156">src</a></span><span class="op" id="5417304">[</span><span class="ident" id="5417305"><a href="/regexp/regexp.go.html#5417253">match</a></span><span class="op" id="5417310">[</span><span class="num" id="5417311">0</span><span class="op" id="5417312">]</span><span class="op" id="5417313">:</span><span class="ident" id="5417314"><a href="/regexp/regexp.go.html#5417253">match</a></span><span class="op" id="5417319">[</span><span class="num" id="5417320">1</span><span class="op" id="5417321">]</span><span class="op" id="5417322">]</span><span class="op" id="5417323">)</span><span class="op" id="5417324">...</span><span class="op" id="5417327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5417330">}</span><span class="op" id="5417331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417334">return</span>&nbsp;<span class="builtintype" id="5417341">string</span><span class="op" id="5417347">(</span><span class="ident" id="5417348"><a href="/regexp/regexp.go.html#5417204">b</a></span><span class="op" id="5417349">)</span><br>
<span class="lineno"></span><span class="op" id="5417351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="keyword" id="5417354">func</span>&nbsp;<span class="op" id="5417359">(</span><span class="ident" id="5417360">re</span>&nbsp;<span class="op" id="5417363">*</span><span class="ident" id="5417364"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5417370">)</span>&nbsp;<span class="ident" id="5417372">replaceAll</span><span class="op" id="5417382">(</span><span class="ident" id="5417383">bsrc</span>&nbsp;<span class="op" id="5417388">[</span><span class="op" id="5417389">]</span><span class="builtintype" id="5417390">byte</span><span class="op" id="5417394">,</span>&nbsp;<span class="ident" id="5417396">src</span>&nbsp;<span class="builtintype" id="5417400">string</span><span class="op" id="5417406">,</span>&nbsp;<span class="ident" id="5417408">nmatch</span>&nbsp;<span class="builtintype" id="5417415">int</span><span class="op" id="5417418">,</span>&nbsp;<span class="ident" id="5417420">repl</span>&nbsp;<span class="keyword" id="5417425">func</span><span class="op" id="5417429">(</span><span class="ident" id="5417430">dst</span>&nbsp;<span class="op" id="5417434">[</span><span class="op" id="5417435">]</span><span class="builtintype" id="5417436">byte</span><span class="op" id="5417440">,</span>&nbsp;<span class="ident" id="5417442">m</span>&nbsp;<span class="op" id="5417444">[</span><span class="op" id="5417445">]</span><span class="builtintype" id="5417446">int</span><span class="op" id="5417449">)</span>&nbsp;<span class="op" id="5417451">[</span><span class="op" id="5417452">]</span><span class="builtintype" id="5417453">byte</span><span class="op" id="5417457">)</span>&nbsp;<span class="op" id="5417459">[</span><span class="op" id="5417460">]</span><span class="builtintype" id="5417461">byte</span>&nbsp;<span class="op" id="5417466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417469">lastMatchEnd</span>&nbsp;<span class="op" id="5417482">:=</span>&nbsp;<span class="num" id="5417485">0</span>&nbsp;<span class="comment" id="5417487">//&nbsp;end&nbsp;position&nbsp;of&nbsp;the&nbsp;most&nbsp;recent&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417529">searchPos</span>&nbsp;<span class="op" id="5417539">:=</span>&nbsp;<span class="num" id="5417542">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5417547">//&nbsp;position&nbsp;where&nbsp;we&nbsp;next&nbsp;look&nbsp;for&nbsp;a&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417591">var</span>&nbsp;<span class="ident" id="5417595">buf</span>&nbsp;<span class="op" id="5417599">[</span><span class="op" id="5417600">]</span><span class="builtintype" id="5417601">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417607">var</span>&nbsp;<span class="ident" id="5417611">endPos</span>&nbsp;<span class="builtintype" id="5417618">int</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417623">if</span>&nbsp;<span class="ident" id="5417626"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span>&nbsp;<span class="op" id="5417631">!=</span>&nbsp;<span class="ident" id="5417634">nil</span>&nbsp;<span class="op" id="5417638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417642"><a href="/regexp/regexp.go.html#5417611">endPos</a></span>&nbsp;<span class="op" id="5417649">=</span>&nbsp;<span class="builtinfunc" id="5417651">len</span><span class="op" id="5417654">(</span><span class="ident" id="5417655"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span><span class="op" id="5417659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5417662">}</span>&nbsp;<span class="keyword" id="5417664">else</span>&nbsp;<span class="op" id="5417669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417673"><a href="/regexp/regexp.go.html#5417611">endPos</a></span>&nbsp;<span class="op" id="5417680">=</span>&nbsp;<span class="builtinfunc" id="5417682">len</span><span class="op" id="5417685">(</span><span class="ident" id="5417686"><a href="/regexp/regexp.go.html#5417396">src</a></span><span class="op" id="5417689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5417692">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417695">for</span>&nbsp;<span class="ident" id="5417699"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span>&nbsp;<span class="op" id="5417709">&lt;=</span>&nbsp;<span class="ident" id="5417712"><a href="/regexp/regexp.go.html#5417611">endPos</a></span>&nbsp;<span class="op" id="5417719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417723">a</span>&nbsp;<span class="op" id="5417725">:=</span>&nbsp;<span class="ident" id="5417728"><a href="/regexp/regexp.go.html#5417360">re</a></span><span class="op" id="5417730">.</span><span class="ident" id="5417731">doExecute</span><span class="op" id="5417740">(</span><span class="ident" id="5417741">nil</span><span class="op" id="5417744">,</span>&nbsp;<span class="ident" id="5417746"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span><span class="op" id="5417750">,</span>&nbsp;<span class="ident" id="5417752"><a href="/regexp/regexp.go.html#5417396">src</a></span><span class="op" id="5417755">,</span>&nbsp;<span class="ident" id="5417757"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span><span class="op" id="5417766">,</span>&nbsp;<span class="ident" id="5417768"><a href="/regexp/regexp.go.html#5417408">nmatch</a></span><span class="op" id="5417774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417778">if</span>&nbsp;<span class="builtinfunc" id="5417781">len</span><span class="op" id="5417784">(</span><span class="ident" id="5417785"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5417786">)</span>&nbsp;<span class="op" id="5417788">==</span>&nbsp;<span class="num" id="5417791">0</span>&nbsp;<span class="op" id="5417793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417798">break</span>&nbsp;<span class="comment" id="5417804">//&nbsp;no&nbsp;more&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5417825">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5417830">//&nbsp;Copy&nbsp;the&nbsp;unmatched&nbsp;characters&nbsp;before&nbsp;this&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5417884">if</span>&nbsp;<span class="ident" id="5417887"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span>&nbsp;<span class="op" id="5417892">!=</span>&nbsp;<span class="ident" id="5417895">nil</span>&nbsp;<span class="op" id="5417899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417904"><a href="/regexp/regexp.go.html#5417595">buf</a></span>&nbsp;<span class="op" id="5417908">=</span>&nbsp;<span class="builtinfunc" id="5417910">append</span><span class="op" id="5417916">(</span><span class="ident" id="5417917"><a href="/regexp/regexp.go.html#5417595">buf</a></span><span class="op" id="5417920">,</span>&nbsp;<span class="ident" id="5417922"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span><span class="op" id="5417926">[</span><span class="ident" id="5417927"><a href="/regexp/regexp.go.html#5417469">lastMatchEnd</a></span><span class="op" id="5417939">:</span><span class="ident" id="5417940"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5417941">[</span><span class="num" id="5417942">0</span><span class="op" id="5417943">]</span><span class="op" id="5417944">]</span><span class="op" id="5417945">...</span><span class="op" id="5417948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5417952">}</span>&nbsp;<span class="keyword" id="5417954">else</span>&nbsp;<span class="op" id="5417959">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5417964"><a href="/regexp/regexp.go.html#5417595">buf</a></span>&nbsp;<span class="op" id="5417968">=</span>&nbsp;<span class="builtinfunc" id="5417970">append</span><span class="op" id="5417976">(</span><span class="ident" id="5417977"><a href="/regexp/regexp.go.html#5417595">buf</a></span><span class="op" id="5417980">,</span>&nbsp;<span class="ident" id="5417982"><a href="/regexp/regexp.go.html#5417396">src</a></span><span class="op" id="5417985">[</span><span class="ident" id="5417986"><a href="/regexp/regexp.go.html#5417469">lastMatchEnd</a></span><span class="op" id="5417998">:</span><span class="ident" id="5417999"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418000">[</span><span class="num" id="5418001">0</span><span class="op" id="5418002">]</span><span class="op" id="5418003">]</span><span class="op" id="5418004">...</span><span class="op" id="5418007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418016">//&nbsp;Now&nbsp;insert&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;replacement&nbsp;string,&nbsp;but&nbsp;not&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418080">//&nbsp;match&nbsp;of&nbsp;the&nbsp;empty&nbsp;string&nbsp;immediately&nbsp;after&nbsp;another&nbsp;match.</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418144">//&nbsp;(Otherwise,&nbsp;we&nbsp;get&nbsp;double&nbsp;replacement&nbsp;for&nbsp;patterns&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418205">//&nbsp;match&nbsp;both&nbsp;empty&nbsp;and&nbsp;nonempty&nbsp;strings.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418250">if</span>&nbsp;<span class="ident" id="5418253"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418254">[</span><span class="num" id="5418255">1</span><span class="op" id="5418256">]</span>&nbsp;<span class="op" id="5418258">&gt;</span>&nbsp;<span class="ident" id="5418260"><a href="/regexp/regexp.go.html#5417469">lastMatchEnd</a></span>&nbsp;<span class="op" id="5418273">||</span>&nbsp;<span class="ident" id="5418276"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418277">[</span><span class="num" id="5418278">0</span><span class="op" id="5418279">]</span>&nbsp;<span class="op" id="5418281">==</span>&nbsp;<span class="num" id="5418284">0</span>&nbsp;<span class="op" id="5418286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418291"><a href="/regexp/regexp.go.html#5417595">buf</a></span>&nbsp;<span class="op" id="5418295">=</span>&nbsp;<span class="ident" id="5418297"><a href="/regexp/regexp.go.html#5417420">repl</a></span><span class="op" id="5418301">(</span><span class="ident" id="5418302"><a href="/regexp/regexp.go.html#5417595">buf</a></span><span class="op" id="5418305">,</span>&nbsp;<span class="ident" id="5418307"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418312">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418316"><a href="/regexp/regexp.go.html#5417469">lastMatchEnd</a></span>&nbsp;<span class="op" id="5418329">=</span>&nbsp;<span class="ident" id="5418331"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418332">[</span><span class="num" id="5418333">1</span><span class="op" id="5418334">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418339">//&nbsp;Advance&nbsp;past&nbsp;this&nbsp;match;&nbsp;always&nbsp;advance&nbsp;at&nbsp;least&nbsp;one&nbsp;character.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418408">var</span>&nbsp;<span class="ident" id="5418412">width</span>&nbsp;<span class="builtintype" id="5418418">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418424">if</span>&nbsp;<span class="ident" id="5418427"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span>&nbsp;<span class="op" id="5418432">!=</span>&nbsp;<span class="ident" id="5418435">nil</span>&nbsp;<span class="op" id="5418439">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418444">_</span><span class="op" id="5418445">,</span>&nbsp;<span class="ident" id="5418447"><a href="/regexp/regexp.go.html#5418412">width</a></span>&nbsp;<span class="op" id="5418453">=</span>&nbsp;<span class="ident" id="5418455"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5418459">.</span><span class="ident" id="5418460">DecodeRune</span><span class="op" id="5418470">(</span><span class="ident" id="5418471"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span><span class="op" id="5418475">[</span><span class="ident" id="5418476"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span><span class="op" id="5418485">:</span><span class="op" id="5418486">]</span><span class="op" id="5418487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418491">}</span>&nbsp;<span class="keyword" id="5418493">else</span>&nbsp;<span class="op" id="5418498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418503">_</span><span class="op" id="5418504">,</span>&nbsp;<span class="ident" id="5418506"><a href="/regexp/regexp.go.html#5418412">width</a></span>&nbsp;<span class="op" id="5418512">=</span>&nbsp;<span class="ident" id="5418514"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5418518">.</span><span class="ident" id="5418519">DecodeRuneInString</span><span class="op" id="5418537">(</span><span class="ident" id="5418538"><a href="/regexp/regexp.go.html#5417396">src</a></span><span class="op" id="5418541">[</span><span class="ident" id="5418542"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span><span class="op" id="5418551">:</span><span class="op" id="5418552">]</span><span class="op" id="5418553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418561">if</span>&nbsp;<span class="ident" id="5418564"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span><span class="op" id="5418573">+</span><span class="ident" id="5418574"><a href="/regexp/regexp.go.html#5418412">width</a></span>&nbsp;<span class="op" id="5418580">&gt;</span>&nbsp;<span class="ident" id="5418582"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418583">[</span><span class="num" id="5418584">1</span><span class="op" id="5418585">]</span>&nbsp;<span class="op" id="5418587">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418592"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span>&nbsp;<span class="op" id="5418602">+=</span>&nbsp;<span class="ident" id="5418605"><a href="/regexp/regexp.go.html#5418412">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418613">}</span>&nbsp;<span class="keyword" id="5418615">else</span>&nbsp;<span class="keyword" id="5418620">if</span>&nbsp;<span class="ident" id="5418623"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span><span class="op" id="5418632">+</span><span class="num" id="5418633">1</span>&nbsp;<span class="op" id="5418635">&gt;</span>&nbsp;<span class="ident" id="5418637"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418638">[</span><span class="num" id="5418639">1</span><span class="op" id="5418640">]</span>&nbsp;<span class="op" id="5418642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418647">//&nbsp;This&nbsp;clause&nbsp;is&nbsp;only&nbsp;needed&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418704">//&nbsp;string.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;DecodeRuneInString&nbsp;returns&nbsp;width=0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418769"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span><span class="op" id="5418778">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418783">}</span>&nbsp;<span class="keyword" id="5418785">else</span>&nbsp;<span class="op" id="5418790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418795"><a href="/regexp/regexp.go.html#5417529">searchPos</a></span>&nbsp;<span class="op" id="5418805">=</span>&nbsp;<span class="ident" id="5418807"><a href="/regexp/regexp.go.html#5417723">a</a></span><span class="op" id="5418808">[</span><span class="num" id="5418809">1</span><span class="op" id="5418810">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5418821">//&nbsp;Copy&nbsp;the&nbsp;unmatched&nbsp;characters&nbsp;after&nbsp;the&nbsp;last&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418877">if</span>&nbsp;<span class="ident" id="5418880"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span>&nbsp;<span class="op" id="5418885">!=</span>&nbsp;<span class="ident" id="5418888">nil</span>&nbsp;<span class="op" id="5418892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418896"><a href="/regexp/regexp.go.html#5417595">buf</a></span>&nbsp;<span class="op" id="5418900">=</span>&nbsp;<span class="builtinfunc" id="5418902">append</span><span class="op" id="5418908">(</span><span class="ident" id="5418909"><a href="/regexp/regexp.go.html#5417595">buf</a></span><span class="op" id="5418912">,</span>&nbsp;<span class="ident" id="5418914"><a href="/regexp/regexp.go.html#5417383">bsrc</a></span><span class="op" id="5418918">[</span><span class="ident" id="5418919"><a href="/regexp/regexp.go.html#5417469">lastMatchEnd</a></span><span class="op" id="5418931">:</span><span class="op" id="5418932">]</span><span class="op" id="5418933">...</span><span class="op" id="5418936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418939">}</span>&nbsp;<span class="keyword" id="5418941">else</span>&nbsp;<span class="op" id="5418946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5418950"><a href="/regexp/regexp.go.html#5417595">buf</a></span>&nbsp;<span class="op" id="5418954">=</span>&nbsp;<span class="builtinfunc" id="5418956">append</span><span class="op" id="5418962">(</span><span class="ident" id="5418963"><a href="/regexp/regexp.go.html#5417595">buf</a></span><span class="op" id="5418966">,</span>&nbsp;<span class="ident" id="5418968"><a href="/regexp/regexp.go.html#5417396">src</a></span><span class="op" id="5418971">[</span><span class="ident" id="5418972"><a href="/regexp/regexp.go.html#5417469">lastMatchEnd</a></span><span class="op" id="5418984">:</span><span class="op" id="5418985">]</span><span class="op" id="5418986">...</span><span class="op" id="5418989">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5418992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5418996">return</span>&nbsp;<span class="ident" id="5419003"><a href="/regexp/regexp.go.html#5417595">buf</a></span><br>
<span class="lineno"></span><span class="op" id="5419007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="5419010">//&nbsp;ReplaceAll&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="5419079">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;text&nbsp;repl.&nbsp;&nbsp;Inside&nbsp;repl,&nbsp;$&nbsp;signs&nbsp;are&nbsp;interpreted&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5419155">//&nbsp;in&nbsp;Expand,&nbsp;so&nbsp;for&nbsp;instance&nbsp;$1&nbsp;represents&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;first&nbsp;submatch.</span><br>
<span class="lineno"></span><span class="keyword" id="5419231">func</span>&nbsp;<span class="op" id="5419236">(</span><span class="ident" id="5419237">re</span>&nbsp;<span class="op" id="5419240">*</span><span class="ident" id="5419241"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5419247">)</span>&nbsp;<span class="ident" id="5419249">ReplaceAll</span><span class="op" id="5419259">(</span><span class="ident" id="5419260">src</span><span class="op" id="5419263">,</span>&nbsp;<span class="ident" id="5419265">repl</span>&nbsp;<span class="op" id="5419270">[</span><span class="op" id="5419271">]</span><span class="builtintype" id="5419272">byte</span><span class="op" id="5419276">)</span>&nbsp;<span class="op" id="5419278">[</span><span class="op" id="5419279">]</span><span class="builtintype" id="5419280">byte</span>&nbsp;<span class="op" id="5419285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419288">n</span>&nbsp;<span class="op" id="5419290">:=</span>&nbsp;<span class="num" id="5419293">2</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419296">if</span>&nbsp;<span class="ident" id="5419299"><a href="/regexp/regexp.go.html#5405181">bytes</a></span><span class="op" id="5419304">.</span><span class="ident" id="5419305">IndexByte</span><span class="op" id="5419314">(</span><span class="ident" id="5419315"><a href="/regexp/regexp.go.html#5419265">repl</a></span><span class="op" id="5419319">,</span>&nbsp;<span class="string" id="5419321">&#39;$&#39;</span><span class="op" id="5419324">)</span>&nbsp;<span class="op" id="5419326">&gt;=</span>&nbsp;<span class="num" id="5419329">0</span>&nbsp;<span class="op" id="5419331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419335"><a href="/regexp/regexp.go.html#5419288">n</a></span>&nbsp;<span class="op" id="5419337">=</span>&nbsp;<span class="num" id="5419339">2</span>&nbsp;<span class="op" id="5419341">*</span>&nbsp;<span class="op" id="5419343">(</span><span class="ident" id="5419344"><a href="/regexp/regexp.go.html#5419237">re</a></span><span class="op" id="5419346">.</span><span class="ident" id="5419347">numSubexp</span>&nbsp;<span class="op" id="5419357">+</span>&nbsp;<span class="num" id="5419359">1</span><span class="op" id="5419360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419366">srepl</span>&nbsp;<span class="op" id="5419372">:=</span>&nbsp;<span class="string" id="5419375">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419379">b</span>&nbsp;<span class="op" id="5419381">:=</span>&nbsp;<span class="ident" id="5419384"><a href="/regexp/regexp.go.html#5419237">re</a></span><span class="op" id="5419386">.</span><span class="ident" id="5419387">replaceAll</span><span class="op" id="5419397">(</span><span class="ident" id="5419398"><a href="/regexp/regexp.go.html#5419260">src</a></span><span class="op" id="5419401">,</span>&nbsp;<span class="string" id="5419403">&#34;&#34;</span><span class="op" id="5419405">,</span>&nbsp;<span class="ident" id="5419407"><a href="/regexp/regexp.go.html#5419288">n</a></span><span class="op" id="5419408">,</span>&nbsp;<span class="keyword" id="5419410">func</span><span class="op" id="5419414">(</span><span class="ident" id="5419415">dst</span>&nbsp;<span class="op" id="5419419">[</span><span class="op" id="5419420">]</span><span class="builtintype" id="5419421">byte</span><span class="op" id="5419425">,</span>&nbsp;<span class="ident" id="5419427">match</span>&nbsp;<span class="op" id="5419433">[</span><span class="op" id="5419434">]</span><span class="builtintype" id="5419435">int</span><span class="op" id="5419438">)</span>&nbsp;<span class="op" id="5419440">[</span><span class="op" id="5419441">]</span><span class="builtintype" id="5419442">byte</span>&nbsp;<span class="op" id="5419447">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419451">if</span>&nbsp;<span class="builtinfunc" id="5419454">len</span><span class="op" id="5419457">(</span><span class="ident" id="5419458"><a href="/regexp/regexp.go.html#5419366">srepl</a></span><span class="op" id="5419463">)</span>&nbsp;<span class="op" id="5419465">!=</span>&nbsp;<span class="builtinfunc" id="5419468">len</span><span class="op" id="5419471">(</span><span class="ident" id="5419472"><a href="/regexp/regexp.go.html#5419265">repl</a></span><span class="op" id="5419476">)</span>&nbsp;<span class="op" id="5419478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5419483"><a href="/regexp/regexp.go.html#5419366">srepl</a></span>&nbsp;<span class="op" id="5419489">=</span>&nbsp;<span class="builtintype" id="5419491">string</span><span class="op" id="5419497">(</span><span class="ident" id="5419498"><a href="/regexp/regexp.go.html#5419265">repl</a></span><span class="op" id="5419502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419510">return</span>&nbsp;<span class="ident" id="5419517"><a href="/regexp/regexp.go.html#5419237">re</a></span><span class="op" id="5419519">.</span><span class="ident" id="5419520">expand</span><span class="op" id="5419526">(</span><span class="ident" id="5419527"><a href="/regexp/regexp.go.html#5419415">dst</a></span><span class="op" id="5419530">,</span>&nbsp;<span class="ident" id="5419532"><a href="/regexp/regexp.go.html#5419366">srepl</a></span><span class="op" id="5419537">,</span>&nbsp;<span class="ident" id="5419539"><a href="/regexp/regexp.go.html#5419260">src</a></span><span class="op" id="5419542">,</span>&nbsp;<span class="string" id="5419544">&#34;&#34;</span><span class="op" id="5419546">,</span>&nbsp;<span class="ident" id="5419548"><a href="/regexp/regexp.go.html#5419427">match</a></span><span class="op" id="5419553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419556">}</span><span class="op" id="5419557">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419560">return</span>&nbsp;<span class="ident" id="5419567"><a href="/regexp/regexp.go.html#5419379">b</a></span><br>
<span class="lineno"></span><span class="op" id="5419569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5419572">//&nbsp;ReplaceAllLiteral&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="5419648">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;bytes&nbsp;repl.&nbsp;&nbsp;The&nbsp;replacement&nbsp;repl&nbsp;is&nbsp;substituted&nbsp;directly,</span><br>
<span class="lineno">555</span><span class="comment" id="5419731">//&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="5419756">func</span>&nbsp;<span class="op" id="5419761">(</span><span class="ident" id="5419762">re</span>&nbsp;<span class="op" id="5419765">*</span><span class="ident" id="5419766"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5419772">)</span>&nbsp;<span class="ident" id="5419774">ReplaceAllLiteral</span><span class="op" id="5419791">(</span><span class="ident" id="5419792">src</span><span class="op" id="5419795">,</span>&nbsp;<span class="ident" id="5419797">repl</span>&nbsp;<span class="op" id="5419802">[</span><span class="op" id="5419803">]</span><span class="builtintype" id="5419804">byte</span><span class="op" id="5419808">)</span>&nbsp;<span class="op" id="5419810">[</span><span class="op" id="5419811">]</span><span class="builtintype" id="5419812">byte</span>&nbsp;<span class="op" id="5419817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419820">return</span>&nbsp;<span class="ident" id="5419827"><a href="/regexp/regexp.go.html#5419762">re</a></span><span class="op" id="5419829">.</span><span class="ident" id="5419830">replaceAll</span><span class="op" id="5419840">(</span><span class="ident" id="5419841"><a href="/regexp/regexp.go.html#5419792">src</a></span><span class="op" id="5419844">,</span>&nbsp;<span class="string" id="5419846">&#34;&#34;</span><span class="op" id="5419848">,</span>&nbsp;<span class="num" id="5419850">2</span><span class="op" id="5419851">,</span>&nbsp;<span class="keyword" id="5419853">func</span><span class="op" id="5419857">(</span><span class="ident" id="5419858">dst</span>&nbsp;<span class="op" id="5419862">[</span><span class="op" id="5419863">]</span><span class="builtintype" id="5419864">byte</span><span class="op" id="5419868">,</span>&nbsp;<span class="ident" id="5419870">match</span>&nbsp;<span class="op" id="5419876">[</span><span class="op" id="5419877">]</span><span class="builtintype" id="5419878">int</span><span class="op" id="5419881">)</span>&nbsp;<span class="op" id="5419883">[</span><span class="op" id="5419884">]</span><span class="builtintype" id="5419885">byte</span>&nbsp;<span class="op" id="5419890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5419894">return</span>&nbsp;<span class="builtinfunc" id="5419901">append</span><span class="op" id="5419907">(</span><span class="ident" id="5419908"><a href="/regexp/regexp.go.html#5419858">dst</a></span><span class="op" id="5419911">,</span>&nbsp;<span class="ident" id="5419913"><a href="/regexp/regexp.go.html#5419797">repl</a></span><span class="op" id="5419917">...</span><span class="op" id="5419920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5419923">}</span><span class="op" id="5419924">)</span><br>
<span class="lineno">560</span><span class="op" id="5419926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5419929">//&nbsp;ReplaceAllFunc&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src&nbsp;in&nbsp;which&nbsp;all&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5419997">//&nbsp;Regexp&nbsp;have&nbsp;been&nbsp;replaced&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;function&nbsp;repl&nbsp;applied</span><br>
<span class="lineno"></span><span class="comment" id="5420071">//&nbsp;to&nbsp;the&nbsp;matched&nbsp;byte&nbsp;slice.&nbsp;&nbsp;The&nbsp;replacement&nbsp;returned&nbsp;by&nbsp;repl&nbsp;is&nbsp;substituted</span><br>
<span class="lineno">565</span><span class="comment" id="5420150">//&nbsp;directly,&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="5420185">func</span>&nbsp;<span class="op" id="5420190">(</span><span class="ident" id="5420191">re</span>&nbsp;<span class="op" id="5420194">*</span><span class="ident" id="5420195"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5420201">)</span>&nbsp;<span class="ident" id="5420203">ReplaceAllFunc</span><span class="op" id="5420217">(</span><span class="ident" id="5420218">src</span>&nbsp;<span class="op" id="5420222">[</span><span class="op" id="5420223">]</span><span class="builtintype" id="5420224">byte</span><span class="op" id="5420228">,</span>&nbsp;<span class="ident" id="5420230">repl</span>&nbsp;<span class="keyword" id="5420235">func</span><span class="op" id="5420239">(</span><span class="op" id="5420240">[</span><span class="op" id="5420241">]</span><span class="builtintype" id="5420242">byte</span><span class="op" id="5420246">)</span>&nbsp;<span class="op" id="5420248">[</span><span class="op" id="5420249">]</span><span class="builtintype" id="5420250">byte</span><span class="op" id="5420254">)</span>&nbsp;<span class="op" id="5420256">[</span><span class="op" id="5420257">]</span><span class="builtintype" id="5420258">byte</span>&nbsp;<span class="op" id="5420263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420266">return</span>&nbsp;<span class="ident" id="5420273"><a href="/regexp/regexp.go.html#5420191">re</a></span><span class="op" id="5420275">.</span><span class="ident" id="5420276">replaceAll</span><span class="op" id="5420286">(</span><span class="ident" id="5420287"><a href="/regexp/regexp.go.html#5420218">src</a></span><span class="op" id="5420290">,</span>&nbsp;<span class="string" id="5420292">&#34;&#34;</span><span class="op" id="5420294">,</span>&nbsp;<span class="num" id="5420296">2</span><span class="op" id="5420297">,</span>&nbsp;<span class="keyword" id="5420299">func</span><span class="op" id="5420303">(</span><span class="ident" id="5420304">dst</span>&nbsp;<span class="op" id="5420308">[</span><span class="op" id="5420309">]</span><span class="builtintype" id="5420310">byte</span><span class="op" id="5420314">,</span>&nbsp;<span class="ident" id="5420316">match</span>&nbsp;<span class="op" id="5420322">[</span><span class="op" id="5420323">]</span><span class="builtintype" id="5420324">int</span><span class="op" id="5420327">)</span>&nbsp;<span class="op" id="5420329">[</span><span class="op" id="5420330">]</span><span class="builtintype" id="5420331">byte</span>&nbsp;<span class="op" id="5420336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420340">return</span>&nbsp;<span class="builtinfunc" id="5420347">append</span><span class="op" id="5420353">(</span><span class="ident" id="5420354"><a href="/regexp/regexp.go.html#5420304">dst</a></span><span class="op" id="5420357">,</span>&nbsp;<span class="ident" id="5420359"><a href="/regexp/regexp.go.html#5420230">repl</a></span><span class="op" id="5420363">(</span><span class="ident" id="5420364"><a href="/regexp/regexp.go.html#5420218">src</a></span><span class="op" id="5420367">[</span><span class="ident" id="5420368"><a href="/regexp/regexp.go.html#5420316">match</a></span><span class="op" id="5420373">[</span><span class="num" id="5420374">0</span><span class="op" id="5420375">]</span><span class="op" id="5420376">:</span><span class="ident" id="5420377"><a href="/regexp/regexp.go.html#5420316">match</a></span><span class="op" id="5420382">[</span><span class="num" id="5420383">1</span><span class="op" id="5420384">]</span><span class="op" id="5420385">]</span><span class="op" id="5420386">)</span><span class="op" id="5420387">...</span><span class="op" id="5420390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420393">}</span><span class="op" id="5420394">)</span><br>
<span class="lineno">570</span><span class="op" id="5420396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5420399">var</span>&nbsp;<span class="ident" id="5420403">specialBytes</span>&nbsp;<span class="op" id="5420416">=</span>&nbsp;<span class="op" id="5420418">[</span><span class="op" id="5420419">]</span><span class="builtintype" id="5420420">byte</span><span class="op" id="5420424">(</span><span class="string" id="5420425">`\.+*?()|[]{}^$`</span><span class="op" id="5420441">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5420444">func</span>&nbsp;<span class="ident" id="5420449">special</span><span class="op" id="5420456">(</span><span class="ident" id="5420457">b</span>&nbsp;<span class="builtintype" id="5420459">byte</span><span class="op" id="5420463">)</span>&nbsp;<span class="builtintype" id="5420465">bool</span>&nbsp;<span class="op" id="5420470">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420473">return</span>&nbsp;<span class="ident" id="5420480"><a href="/regexp/regexp.go.html#5405181">bytes</a></span><span class="op" id="5420485">.</span><span class="ident" id="5420486">IndexByte</span><span class="op" id="5420495">(</span><span class="ident" id="5420496"><a href="/regexp/regexp.go.html#5420403">specialBytes</a></span><span class="op" id="5420508">,</span>&nbsp;<span class="ident" id="5420510"><a href="/regexp/regexp.go.html#5420457">b</a></span><span class="op" id="5420511">)</span>&nbsp;<span class="op" id="5420513">&gt;=</span>&nbsp;<span class="num" id="5420516">0</span><br>
<span class="lineno"></span><span class="op" id="5420518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5420521">//&nbsp;QuoteMeta&nbsp;returns&nbsp;a&nbsp;string&nbsp;that&nbsp;quotes&nbsp;all&nbsp;regular&nbsp;expression&nbsp;metacharacters</span><br>
<span class="lineno"></span><span class="comment" id="5420601">//&nbsp;inside&nbsp;the&nbsp;argument&nbsp;text;&nbsp;the&nbsp;returned&nbsp;string&nbsp;is&nbsp;a&nbsp;regular&nbsp;expression&nbsp;matching</span><br>
<span class="lineno">580</span><span class="comment" id="5420683">//&nbsp;the&nbsp;literal&nbsp;text.&nbsp;&nbsp;For&nbsp;example,&nbsp;QuoteMeta(`[foo]`)&nbsp;returns&nbsp;`\[foo\]`.</span><br>
<span class="lineno"></span><span class="keyword" id="5420756">func</span>&nbsp;<span class="ident" id="5420761">QuoteMeta</span><span class="op" id="5420770">(</span><span class="ident" id="5420771">s</span>&nbsp;<span class="builtintype" id="5420773">string</span><span class="op" id="5420779">)</span>&nbsp;<span class="builtintype" id="5420781">string</span>&nbsp;<span class="op" id="5420788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420791">b</span>&nbsp;<span class="op" id="5420793">:=</span>&nbsp;<span class="builtinfunc" id="5420796">make</span><span class="op" id="5420800">(</span><span class="op" id="5420801">[</span><span class="op" id="5420802">]</span><span class="builtintype" id="5420803">byte</span><span class="op" id="5420807">,</span>&nbsp;<span class="num" id="5420809">2</span><span class="op" id="5420810">*</span><span class="builtinfunc" id="5420811">len</span><span class="op" id="5420814">(</span><span class="ident" id="5420815"><a href="/regexp/regexp.go.html#5420771">s</a></span><span class="op" id="5420816">)</span><span class="op" id="5420817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5420821">//&nbsp;A&nbsp;byte&nbsp;loop&nbsp;is&nbsp;correct&nbsp;because&nbsp;all&nbsp;metacharacters&nbsp;are&nbsp;ASCII.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420886">j</span>&nbsp;<span class="op" id="5420888">:=</span>&nbsp;<span class="num" id="5420891">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420894">for</span>&nbsp;<span class="ident" id="5420898">i</span>&nbsp;<span class="op" id="5420900">:=</span>&nbsp;<span class="num" id="5420903">0</span><span class="op" id="5420904">;</span>&nbsp;<span class="ident" id="5420906"><a href="/regexp/regexp.go.html#5420898">i</a></span>&nbsp;<span class="op" id="5420908">&lt;</span>&nbsp;<span class="builtinfunc" id="5420910">len</span><span class="op" id="5420913">(</span><span class="ident" id="5420914"><a href="/regexp/regexp.go.html#5420771">s</a></span><span class="op" id="5420915">)</span><span class="op" id="5420916">;</span>&nbsp;<span class="ident" id="5420918"><a href="/regexp/regexp.go.html#5420898">i</a></span><span class="op" id="5420919">++</span>&nbsp;<span class="op" id="5420922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420926">if</span>&nbsp;<span class="ident" id="5420929"><a href="/regexp/regexp.go.html#5420449">special</a></span><span class="op" id="5420936">(</span><span class="ident" id="5420937"><a href="/regexp/regexp.go.html#5420771">s</a></span><span class="op" id="5420938">[</span><span class="ident" id="5420939"><a href="/regexp/regexp.go.html#5420898">i</a></span><span class="op" id="5420940">]</span><span class="op" id="5420941">)</span>&nbsp;<span class="op" id="5420943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420948"><a href="/regexp/regexp.go.html#5420791">b</a></span><span class="op" id="5420949">[</span><span class="ident" id="5420950"><a href="/regexp/regexp.go.html#5420886">j</a></span><span class="op" id="5420951">]</span>&nbsp;<span class="op" id="5420953">=</span>&nbsp;<span class="string" id="5420955">&#39;\\&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420963"><a href="/regexp/regexp.go.html#5420886">j</a></span><span class="op" id="5420964">++</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420973"><a href="/regexp/regexp.go.html#5420791">b</a></span><span class="op" id="5420974">[</span><span class="ident" id="5420975"><a href="/regexp/regexp.go.html#5420886">j</a></span><span class="op" id="5420976">]</span>&nbsp;<span class="op" id="5420978">=</span>&nbsp;<span class="ident" id="5420980"><a href="/regexp/regexp.go.html#5420771">s</a></span><span class="op" id="5420981">[</span><span class="ident" id="5420982"><a href="/regexp/regexp.go.html#5420898">i</a></span><span class="op" id="5420983">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5420987"><a href="/regexp/regexp.go.html#5420886">j</a></span><span class="op" id="5420988">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5420992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5420995">return</span>&nbsp;<span class="builtintype" id="5421002">string</span><span class="op" id="5421008">(</span><span class="ident" id="5421009"><a href="/regexp/regexp.go.html#5420791">b</a></span><span class="op" id="5421010">[</span><span class="num" id="5421011">0</span><span class="op" id="5421012">:</span><span class="ident" id="5421013"><a href="/regexp/regexp.go.html#5420886">j</a></span><span class="op" id="5421014">]</span><span class="op" id="5421015">)</span><br>
<span class="lineno">595</span><span class="op" id="5421017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5421020">//&nbsp;The&nbsp;number&nbsp;of&nbsp;capture&nbsp;values&nbsp;in&nbsp;the&nbsp;program&nbsp;may&nbsp;correspond</span><br>
<span class="lineno"></span><span class="comment" id="5421082">//&nbsp;to&nbsp;fewer&nbsp;capturing&nbsp;expressions&nbsp;than&nbsp;are&nbsp;in&nbsp;the&nbsp;regexp.</span><br>
<span class="lineno"></span><span class="comment" id="5421140">//&nbsp;For&nbsp;example,&nbsp;&#34;(a){0}&#34;&nbsp;turns&nbsp;into&nbsp;an&nbsp;empty&nbsp;program,&nbsp;so&nbsp;the</span><br>
<span class="lineno">600</span><span class="comment" id="5421201">//&nbsp;maximum&nbsp;capture&nbsp;in&nbsp;the&nbsp;program&nbsp;is&nbsp;0&nbsp;but&nbsp;we&nbsp;need&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="5421262">//&nbsp;an&nbsp;expression&nbsp;for&nbsp;\1.&nbsp;&nbsp;Pad&nbsp;appends&nbsp;-1s&nbsp;to&nbsp;the&nbsp;slice&nbsp;a&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="5421330">func</span>&nbsp;<span class="op" id="5421335">(</span><span class="ident" id="5421336">re</span>&nbsp;<span class="op" id="5421339">*</span><span class="ident" id="5421340"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5421346">)</span>&nbsp;<span class="ident" id="5421348">pad</span><span class="op" id="5421351">(</span><span class="ident" id="5421352">a</span>&nbsp;<span class="op" id="5421354">[</span><span class="op" id="5421355">]</span><span class="builtintype" id="5421356">int</span><span class="op" id="5421359">)</span>&nbsp;<span class="op" id="5421361">[</span><span class="op" id="5421362">]</span><span class="builtintype" id="5421363">int</span>&nbsp;<span class="op" id="5421367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421370">if</span>&nbsp;<span class="ident" id="5421373"><a href="/regexp/regexp.go.html#5421352">a</a></span>&nbsp;<span class="op" id="5421375">==</span>&nbsp;<span class="ident" id="5421378">nil</span>&nbsp;<span class="op" id="5421382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5421386">//&nbsp;No&nbsp;match.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421401">return</span>&nbsp;<span class="ident" id="5421408">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421416">n</span>&nbsp;<span class="op" id="5421418">:=</span>&nbsp;<span class="op" id="5421421">(</span><span class="num" id="5421422">1</span>&nbsp;<span class="op" id="5421424">+</span>&nbsp;<span class="ident" id="5421426"><a href="/regexp/regexp.go.html#5421336">re</a></span><span class="op" id="5421428">.</span><span class="ident" id="5421429">numSubexp</span><span class="op" id="5421438">)</span>&nbsp;<span class="op" id="5421440">*</span>&nbsp;<span class="num" id="5421442">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421445">for</span>&nbsp;<span class="builtinfunc" id="5421449">len</span><span class="op" id="5421452">(</span><span class="ident" id="5421453"><a href="/regexp/regexp.go.html#5421352">a</a></span><span class="op" id="5421454">)</span>&nbsp;<span class="op" id="5421456">&lt;</span>&nbsp;<span class="ident" id="5421458"><a href="/regexp/regexp.go.html#5421416">n</a></span>&nbsp;<span class="op" id="5421460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421464"><a href="/regexp/regexp.go.html#5421352">a</a></span>&nbsp;<span class="op" id="5421466">=</span>&nbsp;<span class="builtinfunc" id="5421468">append</span><span class="op" id="5421474">(</span><span class="ident" id="5421475"><a href="/regexp/regexp.go.html#5421352">a</a></span><span class="op" id="5421476">,</span>&nbsp;<span class="op" id="5421478">-</span><span class="num" id="5421479">1</span><span class="op" id="5421480">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421486">return</span>&nbsp;<span class="ident" id="5421493"><a href="/regexp/regexp.go.html#5421352">a</a></span><br>
<span class="lineno"></span><span class="op" id="5421495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5421498">//&nbsp;Find&nbsp;matches&nbsp;in&nbsp;slice&nbsp;b&nbsp;if&nbsp;b&nbsp;is&nbsp;non-nil,&nbsp;otherwise&nbsp;find&nbsp;matches&nbsp;in&nbsp;string&nbsp;s.</span><br>
<span class="lineno">615</span><span class="keyword" id="5421578">func</span>&nbsp;<span class="op" id="5421583">(</span><span class="ident" id="5421584">re</span>&nbsp;<span class="op" id="5421587">*</span><span class="ident" id="5421588"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5421594">)</span>&nbsp;<span class="ident" id="5421596">allMatches</span><span class="op" id="5421606">(</span><span class="ident" id="5421607">s</span>&nbsp;<span class="builtintype" id="5421609">string</span><span class="op" id="5421615">,</span>&nbsp;<span class="ident" id="5421617">b</span>&nbsp;<span class="op" id="5421619">[</span><span class="op" id="5421620">]</span><span class="builtintype" id="5421621">byte</span><span class="op" id="5421625">,</span>&nbsp;<span class="ident" id="5421627">n</span>&nbsp;<span class="builtintype" id="5421629">int</span><span class="op" id="5421632">,</span>&nbsp;<span class="ident" id="5421634">deliver</span>&nbsp;<span class="keyword" id="5421642">func</span><span class="op" id="5421646">(</span><span class="op" id="5421647">[</span><span class="op" id="5421648">]</span><span class="builtintype" id="5421649">int</span><span class="op" id="5421652">)</span><span class="op" id="5421653">)</span>&nbsp;<span class="op" id="5421655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421658">var</span>&nbsp;<span class="ident" id="5421662">end</span>&nbsp;<span class="builtintype" id="5421666">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421671">if</span>&nbsp;<span class="ident" id="5421674"><a href="/regexp/regexp.go.html#5421617">b</a></span>&nbsp;<span class="op" id="5421676">==</span>&nbsp;<span class="ident" id="5421679">nil</span>&nbsp;<span class="op" id="5421683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421687"><a href="/regexp/regexp.go.html#5421662">end</a></span>&nbsp;<span class="op" id="5421691">=</span>&nbsp;<span class="builtinfunc" id="5421693">len</span><span class="op" id="5421696">(</span><span class="ident" id="5421697"><a href="/regexp/regexp.go.html#5421607">s</a></span><span class="op" id="5421698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421701">}</span>&nbsp;<span class="keyword" id="5421703">else</span>&nbsp;<span class="op" id="5421708">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421712"><a href="/regexp/regexp.go.html#5421662">end</a></span>&nbsp;<span class="op" id="5421716">=</span>&nbsp;<span class="builtinfunc" id="5421718">len</span><span class="op" id="5421721">(</span><span class="ident" id="5421722"><a href="/regexp/regexp.go.html#5421617">b</a></span><span class="op" id="5421723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421730">for</span>&nbsp;<span class="ident" id="5421734">pos</span><span class="op" id="5421737">,</span>&nbsp;<span class="ident" id="5421739">i</span><span class="op" id="5421740">,</span>&nbsp;<span class="ident" id="5421742">prevMatchEnd</span>&nbsp;<span class="op" id="5421755">:=</span>&nbsp;<span class="num" id="5421758">0</span><span class="op" id="5421759">,</span>&nbsp;<span class="num" id="5421761">0</span><span class="op" id="5421762">,</span>&nbsp;<span class="op" id="5421764">-</span><span class="num" id="5421765">1</span><span class="op" id="5421766">;</span>&nbsp;<span class="ident" id="5421768"><a href="/regexp/regexp.go.html#5421739">i</a></span>&nbsp;<span class="op" id="5421770">&lt;</span>&nbsp;<span class="ident" id="5421772"><a href="/regexp/regexp.go.html#5421627">n</a></span>&nbsp;<span class="op" id="5421774">&amp;&amp;</span>&nbsp;<span class="ident" id="5421777"><a href="/regexp/regexp.go.html#5421734">pos</a></span>&nbsp;<span class="op" id="5421781">&lt;=</span>&nbsp;<span class="ident" id="5421784"><a href="/regexp/regexp.go.html#5421662">end</a></span><span class="op" id="5421787">;</span>&nbsp;<span class="op" id="5421789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421793">matches</span>&nbsp;<span class="op" id="5421801">:=</span>&nbsp;<span class="ident" id="5421804"><a href="/regexp/regexp.go.html#5421584">re</a></span><span class="op" id="5421806">.</span><span class="ident" id="5421807">doExecute</span><span class="op" id="5421816">(</span><span class="ident" id="5421817">nil</span><span class="op" id="5421820">,</span>&nbsp;<span class="ident" id="5421822"><a href="/regexp/regexp.go.html#5421617">b</a></span><span class="op" id="5421823">,</span>&nbsp;<span class="ident" id="5421825"><a href="/regexp/regexp.go.html#5421607">s</a></span><span class="op" id="5421826">,</span>&nbsp;<span class="ident" id="5421828"><a href="/regexp/regexp.go.html#5421734">pos</a></span><span class="op" id="5421831">,</span>&nbsp;<span class="ident" id="5421833"><a href="/regexp/regexp.go.html#5421584">re</a></span><span class="op" id="5421835">.</span><span class="ident" id="5421836">prog</span><span class="op" id="5421840">.</span><span class="ident" id="5421841">NumCap</span><span class="op" id="5421847">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421851">if</span>&nbsp;<span class="builtinfunc" id="5421854">len</span><span class="op" id="5421857">(</span><span class="ident" id="5421858"><a href="/regexp/regexp.go.html#5421793">matches</a></span><span class="op" id="5421865">)</span>&nbsp;<span class="op" id="5421867">==</span>&nbsp;<span class="num" id="5421870">0</span>&nbsp;<span class="op" id="5421872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421877">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5421885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5421890">accept</span>&nbsp;<span class="op" id="5421897">:=</span>&nbsp;<span class="builtintype" id="5421900">true</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421907">if</span>&nbsp;<span class="ident" id="5421910"><a href="/regexp/regexp.go.html#5421793">matches</a></span><span class="op" id="5421917">[</span><span class="num" id="5421918">1</span><span class="op" id="5421919">]</span>&nbsp;<span class="op" id="5421921">==</span>&nbsp;<span class="ident" id="5421924"><a href="/regexp/regexp.go.html#5421734">pos</a></span>&nbsp;<span class="op" id="5421928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5421933">//&nbsp;We&#39;ve&nbsp;found&nbsp;an&nbsp;empty&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5421967">if</span>&nbsp;<span class="ident" id="5421970"><a href="/regexp/regexp.go.html#5421793">matches</a></span><span class="op" id="5421977">[</span><span class="num" id="5421978">0</span><span class="op" id="5421979">]</span>&nbsp;<span class="op" id="5421981">==</span>&nbsp;<span class="ident" id="5421984"><a href="/regexp/regexp.go.html#5421742">prevMatchEnd</a></span>&nbsp;<span class="op" id="5421997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5422003">//&nbsp;We&nbsp;don&#39;t&nbsp;allow&nbsp;an&nbsp;empty&nbsp;match&nbsp;right</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5422046">//&nbsp;after&nbsp;a&nbsp;previous&nbsp;match,&nbsp;so&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422091"><a href="/regexp/regexp.go.html#5421890">accept</a></span>&nbsp;<span class="op" id="5422098">=</span>&nbsp;<span class="builtintype" id="5422100">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422114">var</span>&nbsp;<span class="ident" id="5422118">width</span>&nbsp;<span class="builtintype" id="5422124">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5422131">//&nbsp;TODO:&nbsp;use&nbsp;step()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422154">if</span>&nbsp;<span class="ident" id="5422157"><a href="/regexp/regexp.go.html#5421617">b</a></span>&nbsp;<span class="op" id="5422159">==</span>&nbsp;<span class="ident" id="5422162">nil</span>&nbsp;<span class="op" id="5422166">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422172">_</span><span class="op" id="5422173">,</span>&nbsp;<span class="ident" id="5422175"><a href="/regexp/regexp.go.html#5422118">width</a></span>&nbsp;<span class="op" id="5422181">=</span>&nbsp;<span class="ident" id="5422183"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5422187">.</span><span class="ident" id="5422188">DecodeRuneInString</span><span class="op" id="5422206">(</span><span class="ident" id="5422207"><a href="/regexp/regexp.go.html#5421607">s</a></span><span class="op" id="5422208">[</span><span class="ident" id="5422209"><a href="/regexp/regexp.go.html#5421734">pos</a></span><span class="op" id="5422212">:</span><span class="ident" id="5422213"><a href="/regexp/regexp.go.html#5421662">end</a></span><span class="op" id="5422216">]</span><span class="op" id="5422217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422222">}</span>&nbsp;<span class="keyword" id="5422224">else</span>&nbsp;<span class="op" id="5422229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422235">_</span><span class="op" id="5422236">,</span>&nbsp;<span class="ident" id="5422238"><a href="/regexp/regexp.go.html#5422118">width</a></span>&nbsp;<span class="op" id="5422244">=</span>&nbsp;<span class="ident" id="5422246"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5422250">.</span><span class="ident" id="5422251">DecodeRune</span><span class="op" id="5422261">(</span><span class="ident" id="5422262"><a href="/regexp/regexp.go.html#5421617">b</a></span><span class="op" id="5422263">[</span><span class="ident" id="5422264"><a href="/regexp/regexp.go.html#5421734">pos</a></span><span class="op" id="5422267">:</span><span class="ident" id="5422268"><a href="/regexp/regexp.go.html#5421662">end</a></span><span class="op" id="5422271">]</span><span class="op" id="5422272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422282">if</span>&nbsp;<span class="ident" id="5422285"><a href="/regexp/regexp.go.html#5422118">width</a></span>&nbsp;<span class="op" id="5422291">&gt;</span>&nbsp;<span class="num" id="5422293">0</span>&nbsp;<span class="op" id="5422295">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422301"><a href="/regexp/regexp.go.html#5421734">pos</a></span>&nbsp;<span class="op" id="5422305">+=</span>&nbsp;<span class="ident" id="5422308"><a href="/regexp/regexp.go.html#5422118">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422317">}</span>&nbsp;<span class="keyword" id="5422319">else</span>&nbsp;<span class="op" id="5422324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422330"><a href="/regexp/regexp.go.html#5421734">pos</a></span>&nbsp;<span class="op" id="5422334">=</span>&nbsp;<span class="ident" id="5422336"><a href="/regexp/regexp.go.html#5421662">end</a></span>&nbsp;<span class="op" id="5422340">+</span>&nbsp;<span class="num" id="5422342">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422351">}</span>&nbsp;<span class="keyword" id="5422353">else</span>&nbsp;<span class="op" id="5422358">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422363"><a href="/regexp/regexp.go.html#5421734">pos</a></span>&nbsp;<span class="op" id="5422367">=</span>&nbsp;<span class="ident" id="5422369"><a href="/regexp/regexp.go.html#5421793">matches</a></span><span class="op" id="5422376">[</span><span class="num" id="5422377">1</span><span class="op" id="5422378">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422386"><a href="/regexp/regexp.go.html#5421742">prevMatchEnd</a></span>&nbsp;<span class="op" id="5422399">=</span>&nbsp;<span class="ident" id="5422401"><a href="/regexp/regexp.go.html#5421793">matches</a></span><span class="op" id="5422408">[</span><span class="num" id="5422409">1</span><span class="op" id="5422410">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422415">if</span>&nbsp;<span class="ident" id="5422418"><a href="/regexp/regexp.go.html#5421890">accept</a></span>&nbsp;<span class="op" id="5422425">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422430"><a href="/regexp/regexp.go.html#5421634">deliver</a></span><span class="op" id="5422437">(</span><span class="ident" id="5422438"><a href="/regexp/regexp.go.html#5421584">re</a></span><span class="op" id="5422440">.</span><span class="ident" id="5422441">pad</span><span class="op" id="5422444">(</span><span class="ident" id="5422445"><a href="/regexp/regexp.go.html#5421793">matches</a></span><span class="op" id="5422452">)</span><span class="op" id="5422453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422458"><a href="/regexp/regexp.go.html#5421739">i</a></span><span class="op" id="5422459">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422467">}</span><br>
<span class="lineno"></span><span class="op" id="5422469">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="comment" id="5422472">//&nbsp;Find&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;b&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="comment" id="5422567">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5422612">func</span>&nbsp;<span class="op" id="5422617">(</span><span class="ident" id="5422618">re</span>&nbsp;<span class="op" id="5422621">*</span><span class="ident" id="5422622"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5422628">)</span>&nbsp;<span class="ident" id="5422630">Find</span><span class="op" id="5422634">(</span><span class="ident" id="5422635">b</span>&nbsp;<span class="op" id="5422637">[</span><span class="op" id="5422638">]</span><span class="builtintype" id="5422639">byte</span><span class="op" id="5422643">)</span>&nbsp;<span class="op" id="5422645">[</span><span class="op" id="5422646">]</span><span class="builtintype" id="5422647">byte</span>&nbsp;<span class="op" id="5422652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5422655">a</span>&nbsp;<span class="op" id="5422657">:=</span>&nbsp;<span class="ident" id="5422660"><a href="/regexp/regexp.go.html#5422618">re</a></span><span class="op" id="5422662">.</span><span class="ident" id="5422663">doExecute</span><span class="op" id="5422672">(</span><span class="ident" id="5422673">nil</span><span class="op" id="5422676">,</span>&nbsp;<span class="ident" id="5422678"><a href="/regexp/regexp.go.html#5422635">b</a></span><span class="op" id="5422679">,</span>&nbsp;<span class="string" id="5422681">&#34;&#34;</span><span class="op" id="5422683">,</span>&nbsp;<span class="num" id="5422685">0</span><span class="op" id="5422686">,</span>&nbsp;<span class="num" id="5422688">2</span><span class="op" id="5422689">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422692">if</span>&nbsp;<span class="ident" id="5422695"><a href="/regexp/regexp.go.html#5422655">a</a></span>&nbsp;<span class="op" id="5422697">==</span>&nbsp;<span class="ident" id="5422700">nil</span>&nbsp;<span class="op" id="5422704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422708">return</span>&nbsp;<span class="ident" id="5422715">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5422720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5422723">return</span>&nbsp;<span class="ident" id="5422730"><a href="/regexp/regexp.go.html#5422635">b</a></span><span class="op" id="5422731">[</span><span class="ident" id="5422732"><a href="/regexp/regexp.go.html#5422655">a</a></span><span class="op" id="5422733">[</span><span class="num" id="5422734">0</span><span class="op" id="5422735">]</span><span class="op" id="5422736">:</span><span class="ident" id="5422737"><a href="/regexp/regexp.go.html#5422655">a</a></span><span class="op" id="5422738">[</span><span class="num" id="5422739">1</span><span class="op" id="5422740">]</span><span class="op" id="5422741">]</span><br>
<span class="lineno"></span><span class="op" id="5422743">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5422746">//&nbsp;FindIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the&nbsp;location&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5422824">//&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;b&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.&nbsp;&nbsp;The&nbsp;match&nbsp;itself&nbsp;is&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5422902">//&nbsp;b[loc[0]:loc[1]].</span><br>
<span class="lineno"></span><span class="comment" id="5422923">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">675</span><span class="keyword" id="5422968">func</span>&nbsp;<span class="op" id="5422973">(</span><span class="ident" id="5422974">re</span>&nbsp;<span class="op" id="5422977">*</span><span class="ident" id="5422978"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5422984">)</span>&nbsp;<span class="ident" id="5422986">FindIndex</span><span class="op" id="5422995">(</span><span class="ident" id="5422996">b</span>&nbsp;<span class="op" id="5422998">[</span><span class="op" id="5422999">]</span><span class="builtintype" id="5423000">byte</span><span class="op" id="5423004">)</span>&nbsp;<span class="op" id="5423006">(</span><span class="ident" id="5423007">loc</span>&nbsp;<span class="op" id="5423011">[</span><span class="op" id="5423012">]</span><span class="builtintype" id="5423013">int</span><span class="op" id="5423016">)</span>&nbsp;<span class="op" id="5423018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423021">a</span>&nbsp;<span class="op" id="5423023">:=</span>&nbsp;<span class="ident" id="5423026"><a href="/regexp/regexp.go.html#5422974">re</a></span><span class="op" id="5423028">.</span><span class="ident" id="5423029">doExecute</span><span class="op" id="5423038">(</span><span class="ident" id="5423039">nil</span><span class="op" id="5423042">,</span>&nbsp;<span class="ident" id="5423044"><a href="/regexp/regexp.go.html#5422996">b</a></span><span class="op" id="5423045">,</span>&nbsp;<span class="string" id="5423047">&#34;&#34;</span><span class="op" id="5423049">,</span>&nbsp;<span class="num" id="5423051">0</span><span class="op" id="5423052">,</span>&nbsp;<span class="num" id="5423054">2</span><span class="op" id="5423055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423058">if</span>&nbsp;<span class="ident" id="5423061"><a href="/regexp/regexp.go.html#5423021">a</a></span>&nbsp;<span class="op" id="5423063">==</span>&nbsp;<span class="ident" id="5423066">nil</span>&nbsp;<span class="op" id="5423070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423074">return</span>&nbsp;<span class="ident" id="5423081">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423086">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423089">return</span>&nbsp;<span class="ident" id="5423096"><a href="/regexp/regexp.go.html#5423021">a</a></span><span class="op" id="5423097">[</span><span class="num" id="5423098">0</span><span class="op" id="5423099">:</span><span class="num" id="5423100">2</span><span class="op" id="5423101">]</span><br>
<span class="lineno"></span><span class="op" id="5423103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5423106">//&nbsp;FindString&nbsp;returns&nbsp;a&nbsp;string&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;s&nbsp;of&nbsp;the&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="5423196">//&nbsp;expression.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;match,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,</span><br>
<span class="lineno">685</span><span class="comment" id="5423271">//&nbsp;but&nbsp;it&nbsp;will&nbsp;also&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;regular&nbsp;expression&nbsp;successfully&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5423347">//&nbsp;an&nbsp;empty&nbsp;string.&nbsp;&nbsp;Use&nbsp;FindStringIndex&nbsp;or&nbsp;FindStringSubmatch&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5423419">//&nbsp;necessary&nbsp;to&nbsp;distinguish&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span><span class="keyword" id="5423460">func</span>&nbsp;<span class="op" id="5423465">(</span><span class="ident" id="5423466">re</span>&nbsp;<span class="op" id="5423469">*</span><span class="ident" id="5423470"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5423476">)</span>&nbsp;<span class="ident" id="5423478">FindString</span><span class="op" id="5423488">(</span><span class="ident" id="5423489">s</span>&nbsp;<span class="builtintype" id="5423491">string</span><span class="op" id="5423497">)</span>&nbsp;<span class="builtintype" id="5423499">string</span>&nbsp;<span class="op" id="5423506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423509">a</span>&nbsp;<span class="op" id="5423511">:=</span>&nbsp;<span class="ident" id="5423514"><a href="/regexp/regexp.go.html#5423466">re</a></span><span class="op" id="5423516">.</span><span class="ident" id="5423517">doExecute</span><span class="op" id="5423526">(</span><span class="ident" id="5423527">nil</span><span class="op" id="5423530">,</span>&nbsp;<span class="ident" id="5423532">nil</span><span class="op" id="5423535">,</span>&nbsp;<span class="ident" id="5423537"><a href="/regexp/regexp.go.html#5423489">s</a></span><span class="op" id="5423538">,</span>&nbsp;<span class="num" id="5423540">0</span><span class="op" id="5423541">,</span>&nbsp;<span class="num" id="5423543">2</span><span class="op" id="5423544">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423547">if</span>&nbsp;<span class="ident" id="5423550"><a href="/regexp/regexp.go.html#5423509">a</a></span>&nbsp;<span class="op" id="5423552">==</span>&nbsp;<span class="ident" id="5423555">nil</span>&nbsp;<span class="op" id="5423559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423563">return</span>&nbsp;<span class="string" id="5423570">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423577">return</span>&nbsp;<span class="ident" id="5423584"><a href="/regexp/regexp.go.html#5423489">s</a></span><span class="op" id="5423585">[</span><span class="ident" id="5423586"><a href="/regexp/regexp.go.html#5423509">a</a></span><span class="op" id="5423587">[</span><span class="num" id="5423588">0</span><span class="op" id="5423589">]</span><span class="op" id="5423590">:</span><span class="ident" id="5423591"><a href="/regexp/regexp.go.html#5423509">a</a></span><span class="op" id="5423592">[</span><span class="num" id="5423593">1</span><span class="op" id="5423594">]</span><span class="op" id="5423595">]</span><br>
<span class="lineno"></span><span class="op" id="5423597">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="comment" id="5423600">//&nbsp;FindStringIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5423672">//&nbsp;location&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;s&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.&nbsp;&nbsp;The&nbsp;match</span><br>
<span class="lineno"></span><span class="comment" id="5423749">//&nbsp;itself&nbsp;is&nbsp;at&nbsp;s[loc[0]:loc[1]].</span><br>
<span class="lineno"></span><span class="comment" id="5423783">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">700</span><span class="keyword" id="5423828">func</span>&nbsp;<span class="op" id="5423833">(</span><span class="ident" id="5423834">re</span>&nbsp;<span class="op" id="5423837">*</span><span class="ident" id="5423838"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5423844">)</span>&nbsp;<span class="ident" id="5423846">FindStringIndex</span><span class="op" id="5423861">(</span><span class="ident" id="5423862">s</span>&nbsp;<span class="builtintype" id="5423864">string</span><span class="op" id="5423870">)</span>&nbsp;<span class="op" id="5423872">(</span><span class="ident" id="5423873">loc</span>&nbsp;<span class="op" id="5423877">[</span><span class="op" id="5423878">]</span><span class="builtintype" id="5423879">int</span><span class="op" id="5423882">)</span>&nbsp;<span class="op" id="5423884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5423887">a</span>&nbsp;<span class="op" id="5423889">:=</span>&nbsp;<span class="ident" id="5423892"><a href="/regexp/regexp.go.html#5423834">re</a></span><span class="op" id="5423894">.</span><span class="ident" id="5423895">doExecute</span><span class="op" id="5423904">(</span><span class="ident" id="5423905">nil</span><span class="op" id="5423908">,</span>&nbsp;<span class="ident" id="5423910">nil</span><span class="op" id="5423913">,</span>&nbsp;<span class="ident" id="5423915"><a href="/regexp/regexp.go.html#5423862">s</a></span><span class="op" id="5423916">,</span>&nbsp;<span class="num" id="5423918">0</span><span class="op" id="5423919">,</span>&nbsp;<span class="num" id="5423921">2</span><span class="op" id="5423922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423925">if</span>&nbsp;<span class="ident" id="5423928"><a href="/regexp/regexp.go.html#5423887">a</a></span>&nbsp;<span class="op" id="5423930">==</span>&nbsp;<span class="ident" id="5423933">nil</span>&nbsp;<span class="op" id="5423937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423941">return</span>&nbsp;<span class="ident" id="5423948">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5423953">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5423956">return</span>&nbsp;<span class="ident" id="5423963"><a href="/regexp/regexp.go.html#5423887">a</a></span><span class="op" id="5423964">[</span><span class="num" id="5423965">0</span><span class="op" id="5423966">:</span><span class="num" id="5423967">2</span><span class="op" id="5423968">]</span><br>
<span class="lineno"></span><span class="op" id="5423970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5423973">//&nbsp;FindReaderIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5424045">//&nbsp;location&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;text&nbsp;read&nbsp;from</span><br>
<span class="lineno">710</span><span class="comment" id="5424123">//&nbsp;the&nbsp;RuneReader.&nbsp;&nbsp;The&nbsp;match&nbsp;text&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;input&nbsp;stream&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5424191">//&nbsp;byte&nbsp;offset&nbsp;loc[0]&nbsp;through&nbsp;loc[1]-1.</span><br>
<span class="lineno"></span><span class="comment" id="5424231">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5424276">func</span>&nbsp;<span class="op" id="5424281">(</span><span class="ident" id="5424282">re</span>&nbsp;<span class="op" id="5424285">*</span><span class="ident" id="5424286"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5424292">)</span>&nbsp;<span class="ident" id="5424294">FindReaderIndex</span><span class="op" id="5424309">(</span><span class="ident" id="5424310">r</span>&nbsp;<span class="ident" id="5424312"><a href="/regexp/regexp.go.html#5405190">io</a></span><span class="op" id="5424314">.</span><span class="ident" id="5424315">RuneReader</span><span class="op" id="5424325">)</span>&nbsp;<span class="op" id="5424327">(</span><span class="ident" id="5424328">loc</span>&nbsp;<span class="op" id="5424332">[</span><span class="op" id="5424333">]</span><span class="builtintype" id="5424334">int</span><span class="op" id="5424337">)</span>&nbsp;<span class="op" id="5424339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424342">a</span>&nbsp;<span class="op" id="5424344">:=</span>&nbsp;<span class="ident" id="5424347"><a href="/regexp/regexp.go.html#5424282">re</a></span><span class="op" id="5424349">.</span><span class="ident" id="5424350">doExecute</span><span class="op" id="5424359">(</span><span class="ident" id="5424360"><a href="/regexp/regexp.go.html#5424310">r</a></span><span class="op" id="5424361">,</span>&nbsp;<span class="ident" id="5424363">nil</span><span class="op" id="5424366">,</span>&nbsp;<span class="string" id="5424368">&#34;&#34;</span><span class="op" id="5424370">,</span>&nbsp;<span class="num" id="5424372">0</span><span class="op" id="5424373">,</span>&nbsp;<span class="num" id="5424375">2</span><span class="op" id="5424376">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424379">if</span>&nbsp;<span class="ident" id="5424382"><a href="/regexp/regexp.go.html#5424342">a</a></span>&nbsp;<span class="op" id="5424384">==</span>&nbsp;<span class="ident" id="5424387">nil</span>&nbsp;<span class="op" id="5424391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424395">return</span>&nbsp;<span class="ident" id="5424402">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424410">return</span>&nbsp;<span class="ident" id="5424417"><a href="/regexp/regexp.go.html#5424342">a</a></span><span class="op" id="5424418">[</span><span class="num" id="5424419">0</span><span class="op" id="5424420">:</span><span class="num" id="5424421">2</span><span class="op" id="5424422">]</span><br>
<span class="lineno"></span><span class="op" id="5424424">}</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="5424427">//&nbsp;FindSubmatch&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;slices&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost</span><br>
<span class="lineno"></span><span class="comment" id="5424502">//&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;b&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5424574">//&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5424650">//&nbsp;comment.</span><br>
<span class="lineno">725</span><span class="comment" id="5424662">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5424707">func</span>&nbsp;<span class="op" id="5424712">(</span><span class="ident" id="5424713">re</span>&nbsp;<span class="op" id="5424716">*</span><span class="ident" id="5424717"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5424723">)</span>&nbsp;<span class="ident" id="5424725">FindSubmatch</span><span class="op" id="5424737">(</span><span class="ident" id="5424738">b</span>&nbsp;<span class="op" id="5424740">[</span><span class="op" id="5424741">]</span><span class="builtintype" id="5424742">byte</span><span class="op" id="5424746">)</span>&nbsp;<span class="op" id="5424748">[</span><span class="op" id="5424749">]</span><span class="op" id="5424750">[</span><span class="op" id="5424751">]</span><span class="builtintype" id="5424752">byte</span>&nbsp;<span class="op" id="5424757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424760">a</span>&nbsp;<span class="op" id="5424762">:=</span>&nbsp;<span class="ident" id="5424765"><a href="/regexp/regexp.go.html#5424713">re</a></span><span class="op" id="5424767">.</span><span class="ident" id="5424768">doExecute</span><span class="op" id="5424777">(</span><span class="ident" id="5424778">nil</span><span class="op" id="5424781">,</span>&nbsp;<span class="ident" id="5424783"><a href="/regexp/regexp.go.html#5424738">b</a></span><span class="op" id="5424784">,</span>&nbsp;<span class="string" id="5424786">&#34;&#34;</span><span class="op" id="5424788">,</span>&nbsp;<span class="num" id="5424790">0</span><span class="op" id="5424791">,</span>&nbsp;<span class="ident" id="5424793"><a href="/regexp/regexp.go.html#5424713">re</a></span><span class="op" id="5424795">.</span><span class="ident" id="5424796">prog</span><span class="op" id="5424800">.</span><span class="ident" id="5424801">NumCap</span><span class="op" id="5424807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424810">if</span>&nbsp;<span class="ident" id="5424813"><a href="/regexp/regexp.go.html#5424760">a</a></span>&nbsp;<span class="op" id="5424815">==</span>&nbsp;<span class="ident" id="5424818">nil</span>&nbsp;<span class="op" id="5424822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424826">return</span>&nbsp;<span class="ident" id="5424833">nil</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424841">ret</span>&nbsp;<span class="op" id="5424845">:=</span>&nbsp;<span class="builtinfunc" id="5424848">make</span><span class="op" id="5424852">(</span><span class="op" id="5424853">[</span><span class="op" id="5424854">]</span><span class="op" id="5424855">[</span><span class="op" id="5424856">]</span><span class="builtintype" id="5424857">byte</span><span class="op" id="5424861">,</span>&nbsp;<span class="num" id="5424863">1</span><span class="op" id="5424864">+</span><span class="ident" id="5424865"><a href="/regexp/regexp.go.html#5424713">re</a></span><span class="op" id="5424867">.</span><span class="ident" id="5424868">numSubexp</span><span class="op" id="5424877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424880">for</span>&nbsp;<span class="ident" id="5424884">i</span>&nbsp;<span class="op" id="5424886">:=</span>&nbsp;<span class="keyword" id="5424889">range</span>&nbsp;<span class="ident" id="5424895"><a href="/regexp/regexp.go.html#5424841">ret</a></span>&nbsp;<span class="op" id="5424899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424903">if</span>&nbsp;<span class="num" id="5424906">2</span><span class="op" id="5424907">*</span><span class="ident" id="5424908"><a href="/regexp/regexp.go.html#5424884">i</a></span>&nbsp;<span class="op" id="5424910">&lt;</span>&nbsp;<span class="builtinfunc" id="5424912">len</span><span class="op" id="5424915">(</span><span class="ident" id="5424916"><a href="/regexp/regexp.go.html#5424760">a</a></span><span class="op" id="5424917">)</span>&nbsp;<span class="op" id="5424919">&amp;&amp;</span>&nbsp;<span class="ident" id="5424922"><a href="/regexp/regexp.go.html#5424760">a</a></span><span class="op" id="5424923">[</span><span class="num" id="5424924">2</span><span class="op" id="5424925">*</span><span class="ident" id="5424926"><a href="/regexp/regexp.go.html#5424884">i</a></span><span class="op" id="5424927">]</span>&nbsp;<span class="op" id="5424929">&gt;=</span>&nbsp;<span class="num" id="5424932">0</span>&nbsp;<span class="op" id="5424934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424939"><a href="/regexp/regexp.go.html#5424841">ret</a></span><span class="op" id="5424942">[</span><span class="ident" id="5424943"><a href="/regexp/regexp.go.html#5424884">i</a></span><span class="op" id="5424944">]</span>&nbsp;<span class="op" id="5424946">=</span>&nbsp;<span class="ident" id="5424948"><a href="/regexp/regexp.go.html#5424738">b</a></span><span class="op" id="5424949">[</span><span class="ident" id="5424950"><a href="/regexp/regexp.go.html#5424760">a</a></span><span class="op" id="5424951">[</span><span class="num" id="5424952">2</span><span class="op" id="5424953">*</span><span class="ident" id="5424954"><a href="/regexp/regexp.go.html#5424884">i</a></span><span class="op" id="5424955">]</span><span class="op" id="5424956">:</span><span class="ident" id="5424957"><a href="/regexp/regexp.go.html#5424760">a</a></span><span class="op" id="5424958">[</span><span class="num" id="5424959">2</span><span class="op" id="5424960">*</span><span class="ident" id="5424961"><a href="/regexp/regexp.go.html#5424884">i</a></span><span class="op" id="5424962">+</span><span class="num" id="5424963">1</span><span class="op" id="5424964">]</span><span class="op" id="5424965">]</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5424972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424975">return</span>&nbsp;<span class="ident" id="5424982"><a href="/regexp/regexp.go.html#5424841">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5424986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="comment" id="5424989">//&nbsp;Expand&nbsp;appends&nbsp;template&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;result;&nbsp;during&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5425058">//&nbsp;append,&nbsp;Expand&nbsp;replaces&nbsp;variables&nbsp;in&nbsp;the&nbsp;template&nbsp;with&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="5425130">//&nbsp;matches&nbsp;drawn&nbsp;from&nbsp;src.&nbsp;&nbsp;The&nbsp;match&nbsp;slice&nbsp;should&nbsp;have&nbsp;been&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5425203">//&nbsp;FindSubmatchIndex.</span><br>
<span class="lineno"></span><span class="comment" id="5425225">//</span><br>
<span class="lineno">745</span><span class="comment" id="5425228">//&nbsp;In&nbsp;the&nbsp;template,&nbsp;a&nbsp;variable&nbsp;is&nbsp;denoted&nbsp;by&nbsp;a&nbsp;substring&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5425297">//&nbsp;$name&nbsp;or&nbsp;${name},&nbsp;where&nbsp;name&nbsp;is&nbsp;a&nbsp;non-empty&nbsp;sequence&nbsp;of&nbsp;letters,</span><br>
<span class="lineno"></span><span class="comment" id="5425365">//&nbsp;digits,&nbsp;and&nbsp;underscores.&nbsp;&nbsp;A&nbsp;purely&nbsp;numeric&nbsp;name&nbsp;like&nbsp;$1&nbsp;refers&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5425434">//&nbsp;the&nbsp;submatch&nbsp;with&nbsp;the&nbsp;corresponding&nbsp;index;&nbsp;other&nbsp;names&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5425501">//&nbsp;capturing&nbsp;parentheses&nbsp;named&nbsp;with&nbsp;the&nbsp;(?P&lt;name&gt;...)&nbsp;syntax.&nbsp;&nbsp;A</span><br>
<span class="lineno">750</span><span class="comment" id="5425566">//&nbsp;reference&nbsp;to&nbsp;an&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;unmatched&nbsp;index&nbsp;or&nbsp;a&nbsp;name&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5425639">//&nbsp;present&nbsp;in&nbsp;the&nbsp;regular&nbsp;expression&nbsp;is&nbsp;replaced&nbsp;with&nbsp;an&nbsp;empty&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="5425709">//</span><br>
<span class="lineno"></span><span class="comment" id="5425712">//&nbsp;In&nbsp;the&nbsp;$name&nbsp;form,&nbsp;name&nbsp;is&nbsp;taken&nbsp;to&nbsp;be&nbsp;as&nbsp;long&nbsp;as&nbsp;possible:&nbsp;$1x&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5425782">//&nbsp;equivalent&nbsp;to&nbsp;${1x},&nbsp;not&nbsp;${1}x,&nbsp;and,&nbsp;$10&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;${10},&nbsp;not&nbsp;${1}0.</span><br>
<span class="lineno">755</span><span class="comment" id="5425861">//</span><br>
<span class="lineno"></span><span class="comment" id="5425864">//&nbsp;To&nbsp;insert&nbsp;a&nbsp;literal&nbsp;$&nbsp;in&nbsp;the&nbsp;output,&nbsp;use&nbsp;$$&nbsp;in&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="5425928">func</span>&nbsp;<span class="op" id="5425933">(</span><span class="ident" id="5425934">re</span>&nbsp;<span class="op" id="5425937">*</span><span class="ident" id="5425938"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5425944">)</span>&nbsp;<span class="ident" id="5425946">Expand</span><span class="op" id="5425952">(</span><span class="ident" id="5425953">dst</span>&nbsp;<span class="op" id="5425957">[</span><span class="op" id="5425958">]</span><span class="builtintype" id="5425959">byte</span><span class="op" id="5425963">,</span>&nbsp;<span class="ident" id="5425965">template</span>&nbsp;<span class="op" id="5425974">[</span><span class="op" id="5425975">]</span><span class="builtintype" id="5425976">byte</span><span class="op" id="5425980">,</span>&nbsp;<span class="ident" id="5425982">src</span>&nbsp;<span class="op" id="5425986">[</span><span class="op" id="5425987">]</span><span class="builtintype" id="5425988">byte</span><span class="op" id="5425992">,</span>&nbsp;<span class="ident" id="5425994">match</span>&nbsp;<span class="op" id="5426000">[</span><span class="op" id="5426001">]</span><span class="builtintype" id="5426002">int</span><span class="op" id="5426005">)</span>&nbsp;<span class="op" id="5426007">[</span><span class="op" id="5426008">]</span><span class="builtintype" id="5426009">byte</span>&nbsp;<span class="op" id="5426014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426017">return</span>&nbsp;<span class="ident" id="5426024"><a href="/regexp/regexp.go.html#5425934">re</a></span><span class="op" id="5426026">.</span><span class="ident" id="5426027">expand</span><span class="op" id="5426033">(</span><span class="ident" id="5426034"><a href="/regexp/regexp.go.html#5425953">dst</a></span><span class="op" id="5426037">,</span>&nbsp;<span class="builtintype" id="5426039">string</span><span class="op" id="5426045">(</span><span class="ident" id="5426046"><a href="/regexp/regexp.go.html#5425965">template</a></span><span class="op" id="5426054">)</span><span class="op" id="5426055">,</span>&nbsp;<span class="ident" id="5426057"><a href="/regexp/regexp.go.html#5425982">src</a></span><span class="op" id="5426060">,</span>&nbsp;<span class="string" id="5426062">&#34;&#34;</span><span class="op" id="5426064">,</span>&nbsp;<span class="ident" id="5426066"><a href="/regexp/regexp.go.html#5425994">match</a></span><span class="op" id="5426071">)</span><br>
<span class="lineno"></span><span class="op" id="5426073">}</span><br>
<span class="lineno">760</span><br>
<span class="lineno"></span><span class="comment" id="5426076">//&nbsp;ExpandString&nbsp;is&nbsp;like&nbsp;Expand&nbsp;but&nbsp;the&nbsp;template&nbsp;and&nbsp;source&nbsp;are&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="5426148">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;and&nbsp;returns&nbsp;a&nbsp;byte&nbsp;slice&nbsp;in&nbsp;order&nbsp;to&nbsp;give&nbsp;the&nbsp;calling</span><br>
<span class="lineno"></span><span class="comment" id="5426219">//&nbsp;code&nbsp;control&nbsp;over&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="5426252">func</span>&nbsp;<span class="op" id="5426257">(</span><span class="ident" id="5426258">re</span>&nbsp;<span class="op" id="5426261">*</span><span class="ident" id="5426262"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5426268">)</span>&nbsp;<span class="ident" id="5426270">ExpandString</span><span class="op" id="5426282">(</span><span class="ident" id="5426283">dst</span>&nbsp;<span class="op" id="5426287">[</span><span class="op" id="5426288">]</span><span class="builtintype" id="5426289">byte</span><span class="op" id="5426293">,</span>&nbsp;<span class="ident" id="5426295">template</span>&nbsp;<span class="builtintype" id="5426304">string</span><span class="op" id="5426310">,</span>&nbsp;<span class="ident" id="5426312">src</span>&nbsp;<span class="builtintype" id="5426316">string</span><span class="op" id="5426322">,</span>&nbsp;<span class="ident" id="5426324">match</span>&nbsp;<span class="op" id="5426330">[</span><span class="op" id="5426331">]</span><span class="builtintype" id="5426332">int</span><span class="op" id="5426335">)</span>&nbsp;<span class="op" id="5426337">[</span><span class="op" id="5426338">]</span><span class="builtintype" id="5426339">byte</span>&nbsp;<span class="op" id="5426344">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426347">return</span>&nbsp;<span class="ident" id="5426354"><a href="/regexp/regexp.go.html#5426258">re</a></span><span class="op" id="5426356">.</span><span class="ident" id="5426357">expand</span><span class="op" id="5426363">(</span><span class="ident" id="5426364"><a href="/regexp/regexp.go.html#5426283">dst</a></span><span class="op" id="5426367">,</span>&nbsp;<span class="ident" id="5426369"><a href="/regexp/regexp.go.html#5426295">template</a></span><span class="op" id="5426377">,</span>&nbsp;<span class="ident" id="5426379">nil</span><span class="op" id="5426382">,</span>&nbsp;<span class="ident" id="5426384"><a href="/regexp/regexp.go.html#5426312">src</a></span><span class="op" id="5426387">,</span>&nbsp;<span class="ident" id="5426389"><a href="/regexp/regexp.go.html#5426324">match</a></span><span class="op" id="5426394">)</span><br>
<span class="lineno"></span><span class="op" id="5426396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5426399">func</span>&nbsp;<span class="op" id="5426404">(</span><span class="ident" id="5426405">re</span>&nbsp;<span class="op" id="5426408">*</span><span class="ident" id="5426409"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5426415">)</span>&nbsp;<span class="ident" id="5426417">expand</span><span class="op" id="5426423">(</span><span class="ident" id="5426424">dst</span>&nbsp;<span class="op" id="5426428">[</span><span class="op" id="5426429">]</span><span class="builtintype" id="5426430">byte</span><span class="op" id="5426434">,</span>&nbsp;<span class="ident" id="5426436">template</span>&nbsp;<span class="builtintype" id="5426445">string</span><span class="op" id="5426451">,</span>&nbsp;<span class="ident" id="5426453">bsrc</span>&nbsp;<span class="op" id="5426458">[</span><span class="op" id="5426459">]</span><span class="builtintype" id="5426460">byte</span><span class="op" id="5426464">,</span>&nbsp;<span class="ident" id="5426466">src</span>&nbsp;<span class="builtintype" id="5426470">string</span><span class="op" id="5426476">,</span>&nbsp;<span class="ident" id="5426478">match</span>&nbsp;<span class="op" id="5426484">[</span><span class="op" id="5426485">]</span><span class="builtintype" id="5426486">int</span><span class="op" id="5426489">)</span>&nbsp;<span class="op" id="5426491">[</span><span class="op" id="5426492">]</span><span class="builtintype" id="5426493">byte</span>&nbsp;<span class="op" id="5426498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426501">for</span>&nbsp;<span class="builtinfunc" id="5426505">len</span><span class="op" id="5426508">(</span><span class="ident" id="5426509"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426517">)</span>&nbsp;<span class="op" id="5426519">&gt;</span>&nbsp;<span class="num" id="5426521">0</span>&nbsp;<span class="op" id="5426523">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426527">i</span>&nbsp;<span class="op" id="5426529">:=</span>&nbsp;<span class="ident" id="5426532"><a href="/regexp/regexp.go.html#5405224">strings</a></span><span class="op" id="5426539">.</span><span class="ident" id="5426540">Index</span><span class="op" id="5426545">(</span><span class="ident" id="5426546"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426554">,</span>&nbsp;<span class="string" id="5426556">&#34;$&#34;</span><span class="op" id="5426559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426563">if</span>&nbsp;<span class="ident" id="5426566"><a href="/regexp/regexp.go.html#5426527">i</a></span>&nbsp;<span class="op" id="5426568">&lt;</span>&nbsp;<span class="num" id="5426570">0</span>&nbsp;<span class="op" id="5426572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426577">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426589"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5426593">=</span>&nbsp;<span class="builtinfunc" id="5426595">append</span><span class="op" id="5426601">(</span><span class="ident" id="5426602"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5426605">,</span>&nbsp;<span class="ident" id="5426607"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426615">[</span><span class="op" id="5426616">:</span><span class="ident" id="5426617"><a href="/regexp/regexp.go.html#5426527">i</a></span><span class="op" id="5426618">]</span><span class="op" id="5426619">...</span><span class="op" id="5426622">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426626"><a href="/regexp/regexp.go.html#5426436">template</a></span>&nbsp;<span class="op" id="5426635">=</span>&nbsp;<span class="ident" id="5426637"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426645">[</span><span class="ident" id="5426646"><a href="/regexp/regexp.go.html#5426527">i</a></span><span class="op" id="5426647">:</span><span class="op" id="5426648">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426652">if</span>&nbsp;<span class="builtinfunc" id="5426655">len</span><span class="op" id="5426658">(</span><span class="ident" id="5426659"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426667">)</span>&nbsp;<span class="op" id="5426669">&gt;</span>&nbsp;<span class="num" id="5426671">1</span>&nbsp;<span class="op" id="5426673">&amp;&amp;</span>&nbsp;<span class="ident" id="5426676"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426684">[</span><span class="num" id="5426685">1</span><span class="op" id="5426686">]</span>&nbsp;<span class="op" id="5426688">==</span>&nbsp;<span class="string" id="5426691">&#39;$&#39;</span>&nbsp;<span class="op" id="5426695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5426700">//&nbsp;Treat&nbsp;$$&nbsp;as&nbsp;$.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426721"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5426725">=</span>&nbsp;<span class="builtinfunc" id="5426727">append</span><span class="op" id="5426733">(</span><span class="ident" id="5426734"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5426737">,</span>&nbsp;<span class="string" id="5426739">&#39;$&#39;</span><span class="op" id="5426742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426747"><a href="/regexp/regexp.go.html#5426436">template</a></span>&nbsp;<span class="op" id="5426756">=</span>&nbsp;<span class="ident" id="5426758"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426766">[</span><span class="num" id="5426767">2</span><span class="op" id="5426768">:</span><span class="op" id="5426769">]</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426774">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426789">name</span><span class="op" id="5426793">,</span>&nbsp;<span class="ident" id="5426795">num</span><span class="op" id="5426798">,</span>&nbsp;<span class="ident" id="5426800">rest</span><span class="op" id="5426804">,</span>&nbsp;<span class="ident" id="5426806">ok</span>&nbsp;<span class="op" id="5426809">:=</span>&nbsp;<span class="ident" id="5426812"><a href="/regexp/regexp.go.html#5427708">extract</a></span><span class="op" id="5426819">(</span><span class="ident" id="5426820"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426832">if</span>&nbsp;<span class="op" id="5426835">!</span><span class="ident" id="5426836"><a href="/regexp/regexp.go.html#5426806">ok</a></span>&nbsp;<span class="op" id="5426839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5426844">//&nbsp;Malformed;&nbsp;treat&nbsp;$&nbsp;as&nbsp;raw&nbsp;text.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426882"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5426886">=</span>&nbsp;<span class="builtinfunc" id="5426888">append</span><span class="op" id="5426894">(</span><span class="ident" id="5426895"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5426898">,</span>&nbsp;<span class="string" id="5426900">&#39;$&#39;</span><span class="op" id="5426903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426908"><a href="/regexp/regexp.go.html#5426436">template</a></span>&nbsp;<span class="op" id="5426917">=</span>&nbsp;<span class="ident" id="5426919"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5426927">[</span><span class="num" id="5426928">1</span><span class="op" id="5426929">:</span><span class="op" id="5426930">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426935">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5426946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426950"><a href="/regexp/regexp.go.html#5426436">template</a></span>&nbsp;<span class="op" id="5426959">=</span>&nbsp;<span class="ident" id="5426961"><a href="/regexp/regexp.go.html#5426800">rest</a></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426968">if</span>&nbsp;<span class="ident" id="5426971"><a href="/regexp/regexp.go.html#5426795">num</a></span>&nbsp;<span class="op" id="5426975">&gt;=</span>&nbsp;<span class="num" id="5426978">0</span>&nbsp;<span class="op" id="5426980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5426985">if</span>&nbsp;<span class="num" id="5426988">2</span><span class="op" id="5426989">*</span><span class="ident" id="5426990"><a href="/regexp/regexp.go.html#5426795">num</a></span><span class="op" id="5426993">+</span><span class="num" id="5426994">1</span>&nbsp;<span class="op" id="5426996">&lt;</span>&nbsp;<span class="builtinfunc" id="5426998">len</span><span class="op" id="5427001">(</span><span class="ident" id="5427002"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427007">)</span>&nbsp;<span class="op" id="5427009">&amp;&amp;</span>&nbsp;<span class="ident" id="5427012"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427017">[</span><span class="num" id="5427018">2</span><span class="op" id="5427019">*</span><span class="ident" id="5427020"><a href="/regexp/regexp.go.html#5426795">num</a></span><span class="op" id="5427023">]</span>&nbsp;<span class="op" id="5427025">&gt;=</span>&nbsp;<span class="num" id="5427028">0</span>&nbsp;<span class="op" id="5427030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427036">if</span>&nbsp;<span class="ident" id="5427039"><a href="/regexp/regexp.go.html#5426453">bsrc</a></span>&nbsp;<span class="op" id="5427044">!=</span>&nbsp;<span class="ident" id="5427047">nil</span>&nbsp;<span class="op" id="5427051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427058"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5427062">=</span>&nbsp;<span class="builtinfunc" id="5427064">append</span><span class="op" id="5427070">(</span><span class="ident" id="5427071"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5427074">,</span>&nbsp;<span class="ident" id="5427076"><a href="/regexp/regexp.go.html#5426453">bsrc</a></span><span class="op" id="5427080">[</span><span class="ident" id="5427081"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427086">[</span><span class="num" id="5427087">2</span><span class="op" id="5427088">*</span><span class="ident" id="5427089"><a href="/regexp/regexp.go.html#5426795">num</a></span><span class="op" id="5427092">]</span><span class="op" id="5427093">:</span><span class="ident" id="5427094"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427099">[</span><span class="num" id="5427100">2</span><span class="op" id="5427101">*</span><span class="ident" id="5427102"><a href="/regexp/regexp.go.html#5426795">num</a></span><span class="op" id="5427105">+</span><span class="num" id="5427106">1</span><span class="op" id="5427107">]</span><span class="op" id="5427108">]</span><span class="op" id="5427109">...</span><span class="op" id="5427112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427118">}</span>&nbsp;<span class="keyword" id="5427120">else</span>&nbsp;<span class="op" id="5427125">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427132"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5427136">=</span>&nbsp;<span class="builtinfunc" id="5427138">append</span><span class="op" id="5427144">(</span><span class="ident" id="5427145"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5427148">,</span>&nbsp;<span class="ident" id="5427150"><a href="/regexp/regexp.go.html#5426466">src</a></span><span class="op" id="5427153">[</span><span class="ident" id="5427154"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427159">[</span><span class="num" id="5427160">2</span><span class="op" id="5427161">*</span><span class="ident" id="5427162"><a href="/regexp/regexp.go.html#5426795">num</a></span><span class="op" id="5427165">]</span><span class="op" id="5427166">:</span><span class="ident" id="5427167"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427172">[</span><span class="num" id="5427173">2</span><span class="op" id="5427174">*</span><span class="ident" id="5427175"><a href="/regexp/regexp.go.html#5426795">num</a></span><span class="op" id="5427178">+</span><span class="num" id="5427179">1</span><span class="op" id="5427180">]</span><span class="op" id="5427181">]</span><span class="op" id="5427182">...</span><span class="op" id="5427185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427200">}</span>&nbsp;<span class="keyword" id="5427202">else</span>&nbsp;<span class="op" id="5427207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427212">for</span>&nbsp;<span class="ident" id="5427216">i</span><span class="op" id="5427217">,</span>&nbsp;<span class="ident" id="5427219">namei</span>&nbsp;<span class="op" id="5427225">:=</span>&nbsp;<span class="keyword" id="5427228">range</span>&nbsp;<span class="ident" id="5427234"><a href="/regexp/regexp.go.html#5426405">re</a></span><span class="op" id="5427236">.</span><span class="ident" id="5427237">subexpNames</span>&nbsp;<span class="op" id="5427249">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427255">if</span>&nbsp;<span class="ident" id="5427258"><a href="/regexp/regexp.go.html#5426789">name</a></span>&nbsp;<span class="op" id="5427263">==</span>&nbsp;<span class="ident" id="5427266"><a href="/regexp/regexp.go.html#5427219">namei</a></span>&nbsp;<span class="op" id="5427272">&amp;&amp;</span>&nbsp;<span class="num" id="5427275">2</span><span class="op" id="5427276">*</span><span class="ident" id="5427277"><a href="/regexp/regexp.go.html#5427216">i</a></span><span class="op" id="5427278">+</span><span class="num" id="5427279">1</span>&nbsp;<span class="op" id="5427281">&lt;</span>&nbsp;<span class="builtinfunc" id="5427283">len</span><span class="op" id="5427286">(</span><span class="ident" id="5427287"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427292">)</span>&nbsp;<span class="op" id="5427294">&amp;&amp;</span>&nbsp;<span class="ident" id="5427297"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427302">[</span><span class="num" id="5427303">2</span><span class="op" id="5427304">*</span><span class="ident" id="5427305"><a href="/regexp/regexp.go.html#5427216">i</a></span><span class="op" id="5427306">]</span>&nbsp;<span class="op" id="5427308">&gt;=</span>&nbsp;<span class="num" id="5427311">0</span>&nbsp;<span class="op" id="5427313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427320">if</span>&nbsp;<span class="ident" id="5427323"><a href="/regexp/regexp.go.html#5426453">bsrc</a></span>&nbsp;<span class="op" id="5427328">!=</span>&nbsp;<span class="ident" id="5427331">nil</span>&nbsp;<span class="op" id="5427335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427343"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5427347">=</span>&nbsp;<span class="builtinfunc" id="5427349">append</span><span class="op" id="5427355">(</span><span class="ident" id="5427356"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5427359">,</span>&nbsp;<span class="ident" id="5427361"><a href="/regexp/regexp.go.html#5426453">bsrc</a></span><span class="op" id="5427365">[</span><span class="ident" id="5427366"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427371">[</span><span class="num" id="5427372">2</span><span class="op" id="5427373">*</span><span class="ident" id="5427374"><a href="/regexp/regexp.go.html#5427216">i</a></span><span class="op" id="5427375">]</span><span class="op" id="5427376">:</span><span class="ident" id="5427377"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427382">[</span><span class="num" id="5427383">2</span><span class="op" id="5427384">*</span><span class="ident" id="5427385"><a href="/regexp/regexp.go.html#5427216">i</a></span><span class="op" id="5427386">+</span><span class="num" id="5427387">1</span><span class="op" id="5427388">]</span><span class="op" id="5427389">]</span><span class="op" id="5427390">...</span><span class="op" id="5427393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427400">}</span>&nbsp;<span class="keyword" id="5427402">else</span>&nbsp;<span class="op" id="5427407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427415"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5427419">=</span>&nbsp;<span class="builtinfunc" id="5427421">append</span><span class="op" id="5427427">(</span><span class="ident" id="5427428"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5427431">,</span>&nbsp;<span class="ident" id="5427433"><a href="/regexp/regexp.go.html#5426466">src</a></span><span class="op" id="5427436">[</span><span class="ident" id="5427437"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427442">[</span><span class="num" id="5427443">2</span><span class="op" id="5427444">*</span><span class="ident" id="5427445"><a href="/regexp/regexp.go.html#5427216">i</a></span><span class="op" id="5427446">]</span><span class="op" id="5427447">:</span><span class="ident" id="5427448"><a href="/regexp/regexp.go.html#5426478">match</a></span><span class="op" id="5427453">[</span><span class="num" id="5427454">2</span><span class="op" id="5427455">*</span><span class="ident" id="5427456"><a href="/regexp/regexp.go.html#5427216">i</a></span><span class="op" id="5427457">+</span><span class="num" id="5427458">1</span><span class="op" id="5427459">]</span><span class="op" id="5427460">]</span><span class="op" id="5427461">...</span><span class="op" id="5427464">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427478">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427497">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427503"><a href="/regexp/regexp.go.html#5426424">dst</a></span>&nbsp;<span class="op" id="5427507">=</span>&nbsp;<span class="builtinfunc" id="5427509">append</span><span class="op" id="5427515">(</span><span class="ident" id="5427516"><a href="/regexp/regexp.go.html#5426424">dst</a></span><span class="op" id="5427519">,</span>&nbsp;<span class="ident" id="5427521"><a href="/regexp/regexp.go.html#5426436">template</a></span><span class="op" id="5427529">...</span><span class="op" id="5427532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427535">return</span>&nbsp;<span class="ident" id="5427542"><a href="/regexp/regexp.go.html#5426424">dst</a></span><br>
<span class="lineno"></span><span class="op" id="5427546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span><span class="comment" id="5427549">//&nbsp;extract&nbsp;returns&nbsp;the&nbsp;name&nbsp;from&nbsp;a&nbsp;leading&nbsp;&#34;$name&#34;&nbsp;or&nbsp;&#34;${name}&#34;&nbsp;in&nbsp;str.</span><br>
<span class="lineno"></span><span class="comment" id="5427621">//&nbsp;If&nbsp;it&nbsp;is&nbsp;a&nbsp;number,&nbsp;extract&nbsp;returns&nbsp;num&nbsp;set&nbsp;to&nbsp;that&nbsp;number;&nbsp;otherwise&nbsp;num&nbsp;=&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="5427703">func</span>&nbsp;<span class="ident" id="5427708">extract</span><span class="op" id="5427715">(</span><span class="ident" id="5427716">str</span>&nbsp;<span class="builtintype" id="5427720">string</span><span class="op" id="5427726">)</span>&nbsp;<span class="op" id="5427728">(</span><span class="ident" id="5427729">name</span>&nbsp;<span class="builtintype" id="5427734">string</span><span class="op" id="5427740">,</span>&nbsp;<span class="ident" id="5427742">num</span>&nbsp;<span class="builtintype" id="5427746">int</span><span class="op" id="5427749">,</span>&nbsp;<span class="ident" id="5427751">rest</span>&nbsp;<span class="builtintype" id="5427756">string</span><span class="op" id="5427762">,</span>&nbsp;<span class="ident" id="5427764">ok</span>&nbsp;<span class="builtintype" id="5427767">bool</span><span class="op" id="5427771">)</span>&nbsp;<span class="op" id="5427773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427776">if</span>&nbsp;<span class="builtinfunc" id="5427779">len</span><span class="op" id="5427782">(</span><span class="ident" id="5427783"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427786">)</span>&nbsp;<span class="op" id="5427788">&lt;</span>&nbsp;<span class="num" id="5427790">2</span>&nbsp;<span class="op" id="5427792">||</span>&nbsp;<span class="ident" id="5427795"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427798">[</span><span class="num" id="5427799">0</span><span class="op" id="5427800">]</span>&nbsp;<span class="op" id="5427802">!=</span>&nbsp;<span class="string" id="5427805">&#39;$&#39;</span>&nbsp;<span class="op" id="5427809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427813">return</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427824">brace</span>&nbsp;<span class="op" id="5427830">:=</span>&nbsp;<span class="builtintype" id="5427833">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427840">if</span>&nbsp;<span class="ident" id="5427843"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427846">[</span><span class="num" id="5427847">1</span><span class="op" id="5427848">]</span>&nbsp;<span class="op" id="5427850">==</span>&nbsp;<span class="string" id="5427853">&#39;{&#39;</span>&nbsp;<span class="op" id="5427857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427861"><a href="/regexp/regexp.go.html#5427824">brace</a></span>&nbsp;<span class="op" id="5427867">=</span>&nbsp;<span class="builtintype" id="5427869">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427876"><a href="/regexp/regexp.go.html#5427716">str</a></span>&nbsp;<span class="op" id="5427880">=</span>&nbsp;<span class="ident" id="5427882"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427885">[</span><span class="num" id="5427886">2</span><span class="op" id="5427887">:</span><span class="op" id="5427888">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427891">}</span>&nbsp;<span class="keyword" id="5427893">else</span>&nbsp;<span class="op" id="5427898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427902"><a href="/regexp/regexp.go.html#5427716">str</a></span>&nbsp;<span class="op" id="5427906">=</span>&nbsp;<span class="ident" id="5427908"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427911">[</span><span class="num" id="5427912">1</span><span class="op" id="5427913">:</span><span class="op" id="5427914">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5427917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5427920">i</span>&nbsp;<span class="op" id="5427922">:=</span>&nbsp;<span class="num" id="5427925">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427928">for</span>&nbsp;<span class="ident" id="5427932"><a href="/regexp/regexp.go.html#5427920">i</a></span>&nbsp;<span class="op" id="5427934">&lt;</span>&nbsp;<span class="builtinfunc" id="5427936">len</span><span class="op" id="5427939">(</span><span class="ident" id="5427940"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427943">)</span>&nbsp;<span class="op" id="5427945">{</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5427949">rune</span><span class="op" id="5427953">,</span>&nbsp;<span class="ident" id="5427955">size</span>&nbsp;<span class="op" id="5427960">:=</span>&nbsp;<span class="ident" id="5427963"><a href="/regexp/regexp.go.html#5405254">utf8</a></span><span class="op" id="5427967">.</span><span class="ident" id="5427968">DecodeRuneInString</span><span class="op" id="5427986">(</span><span class="ident" id="5427987"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5427990">[</span><span class="ident" id="5427991"><a href="/regexp/regexp.go.html#5427920">i</a></span><span class="op" id="5427992">:</span><span class="op" id="5427993">]</span><span class="op" id="5427994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5427998">if</span>&nbsp;<span class="op" id="5428001">!</span><span class="ident" id="5428002"><a href="/regexp/regexp.go.html#5405243">unicode</a></span><span class="op" id="5428009">.</span><span class="ident" id="5428010">IsLetter</span><span class="op" id="5428018">(</span><span class="builtintype" id="5428019"><a href="/regexp/regexp.go.html#5427949">rune</a></span><span class="op" id="5428023">)</span>&nbsp;<span class="op" id="5428025">&amp;&amp;</span>&nbsp;<span class="op" id="5428028">!</span><span class="ident" id="5428029"><a href="/regexp/regexp.go.html#5405243">unicode</a></span><span class="op" id="5428036">.</span><span class="ident" id="5428037">IsDigit</span><span class="op" id="5428044">(</span><span class="builtintype" id="5428045"><a href="/regexp/regexp.go.html#5427949">rune</a></span><span class="op" id="5428049">)</span>&nbsp;<span class="op" id="5428051">&amp;&amp;</span>&nbsp;<span class="builtintype" id="5428054"><a href="/regexp/regexp.go.html#5427949">rune</a></span>&nbsp;<span class="op" id="5428059">!=</span>&nbsp;<span class="string" id="5428062">&#39;_&#39;</span>&nbsp;<span class="op" id="5428066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428071">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428083"><a href="/regexp/regexp.go.html#5427920">i</a></span>&nbsp;<span class="op" id="5428085">+=</span>&nbsp;<span class="ident" id="5428088"><a href="/regexp/regexp.go.html#5427955">size</a></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428097">if</span>&nbsp;<span class="ident" id="5428100"><a href="/regexp/regexp.go.html#5427920">i</a></span>&nbsp;<span class="op" id="5428102">==</span>&nbsp;<span class="num" id="5428105">0</span>&nbsp;<span class="op" id="5428107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5428111">//&nbsp;empty&nbsp;name&nbsp;is&nbsp;not&nbsp;okay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428139">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428147">}</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428150"><a href="/regexp/regexp.go.html#5427729">name</a></span>&nbsp;<span class="op" id="5428155">=</span>&nbsp;<span class="ident" id="5428157"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5428160">[</span><span class="op" id="5428161">:</span><span class="ident" id="5428162"><a href="/regexp/regexp.go.html#5427920">i</a></span><span class="op" id="5428163">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428166">if</span>&nbsp;<span class="ident" id="5428169"><a href="/regexp/regexp.go.html#5427824">brace</a></span>&nbsp;<span class="op" id="5428175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428179">if</span>&nbsp;<span class="ident" id="5428182"><a href="/regexp/regexp.go.html#5427920">i</a></span>&nbsp;<span class="op" id="5428184">&gt;=</span>&nbsp;<span class="builtinfunc" id="5428187">len</span><span class="op" id="5428190">(</span><span class="ident" id="5428191"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5428194">)</span>&nbsp;<span class="op" id="5428196">||</span>&nbsp;<span class="ident" id="5428199"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5428202">[</span><span class="ident" id="5428203"><a href="/regexp/regexp.go.html#5427920">i</a></span><span class="op" id="5428204">]</span>&nbsp;<span class="op" id="5428206">!=</span>&nbsp;<span class="string" id="5428209">&#39;}&#39;</span>&nbsp;<span class="op" id="5428213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5428218">//&nbsp;missing&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428246">return</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428259"><a href="/regexp/regexp.go.html#5427920">i</a></span><span class="op" id="5428260">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5428268">//&nbsp;Parse&nbsp;number.</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428286"><a href="/regexp/regexp.go.html#5427742">num</a></span>&nbsp;<span class="op" id="5428290">=</span>&nbsp;<span class="num" id="5428292">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428295">for</span>&nbsp;<span class="ident" id="5428299">i</span>&nbsp;<span class="op" id="5428301">:=</span>&nbsp;<span class="num" id="5428304">0</span><span class="op" id="5428305">;</span>&nbsp;<span class="ident" id="5428307"><a href="/regexp/regexp.go.html#5428299">i</a></span>&nbsp;<span class="op" id="5428309">&lt;</span>&nbsp;<span class="builtinfunc" id="5428311">len</span><span class="op" id="5428314">(</span><span class="ident" id="5428315"><a href="/regexp/regexp.go.html#5427729">name</a></span><span class="op" id="5428319">)</span><span class="op" id="5428320">;</span>&nbsp;<span class="ident" id="5428322"><a href="/regexp/regexp.go.html#5428299">i</a></span><span class="op" id="5428323">++</span>&nbsp;<span class="op" id="5428326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428330">if</span>&nbsp;<span class="ident" id="5428333"><a href="/regexp/regexp.go.html#5427729">name</a></span><span class="op" id="5428337">[</span><span class="ident" id="5428338"><a href="/regexp/regexp.go.html#5428299">i</a></span><span class="op" id="5428339">]</span>&nbsp;<span class="op" id="5428341">&lt;</span>&nbsp;<span class="string" id="5428343">&#39;0&#39;</span>&nbsp;<span class="op" id="5428347">||</span>&nbsp;<span class="string" id="5428350">&#39;9&#39;</span>&nbsp;<span class="op" id="5428354">&lt;</span>&nbsp;<span class="ident" id="5428356"><a href="/regexp/regexp.go.html#5427729">name</a></span><span class="op" id="5428360">[</span><span class="ident" id="5428361"><a href="/regexp/regexp.go.html#5428299">i</a></span><span class="op" id="5428362">]</span>&nbsp;<span class="op" id="5428364">||</span>&nbsp;<span class="ident" id="5428367"><a href="/regexp/regexp.go.html#5427742">num</a></span>&nbsp;<span class="op" id="5428371">&gt;=</span>&nbsp;<span class="num" id="5428374">1e8</span>&nbsp;<span class="op" id="5428378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428383"><a href="/regexp/regexp.go.html#5427742">num</a></span>&nbsp;<span class="op" id="5428387">=</span>&nbsp;<span class="op" id="5428389">-</span><span class="num" id="5428390">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428395">break</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428407"><a href="/regexp/regexp.go.html#5427742">num</a></span>&nbsp;<span class="op" id="5428411">=</span>&nbsp;<span class="ident" id="5428413"><a href="/regexp/regexp.go.html#5427742">num</a></span><span class="op" id="5428416">*</span><span class="num" id="5428417">10</span>&nbsp;<span class="op" id="5428420">+</span>&nbsp;<span class="builtintype" id="5428422">int</span><span class="op" id="5428425">(</span><span class="ident" id="5428426"><a href="/regexp/regexp.go.html#5427729">name</a></span><span class="op" id="5428430">[</span><span class="ident" id="5428431"><a href="/regexp/regexp.go.html#5428299">i</a></span><span class="op" id="5428432">]</span><span class="op" id="5428433">)</span>&nbsp;<span class="op" id="5428435">-</span>&nbsp;<span class="string" id="5428437">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5428445">//&nbsp;Disallow&nbsp;leading&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428473">if</span>&nbsp;<span class="ident" id="5428476"><a href="/regexp/regexp.go.html#5427729">name</a></span><span class="op" id="5428480">[</span><span class="num" id="5428481">0</span><span class="op" id="5428482">]</span>&nbsp;<span class="op" id="5428484">==</span>&nbsp;<span class="string" id="5428487">&#39;0&#39;</span>&nbsp;<span class="op" id="5428491">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5428494">len</span><span class="op" id="5428497">(</span><span class="ident" id="5428498"><a href="/regexp/regexp.go.html#5427729">name</a></span><span class="op" id="5428502">)</span>&nbsp;<span class="op" id="5428504">&gt;</span>&nbsp;<span class="num" id="5428506">1</span>&nbsp;<span class="op" id="5428508">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428512"><a href="/regexp/regexp.go.html#5427742">num</a></span>&nbsp;<span class="op" id="5428516">=</span>&nbsp;<span class="op" id="5428518">-</span><span class="num" id="5428519">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5428522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428526"><a href="/regexp/regexp.go.html#5427751">rest</a></span>&nbsp;<span class="op" id="5428531">=</span>&nbsp;<span class="ident" id="5428533"><a href="/regexp/regexp.go.html#5427716">str</a></span><span class="op" id="5428536">[</span><span class="ident" id="5428537"><a href="/regexp/regexp.go.html#5427920">i</a></span><span class="op" id="5428538">:</span><span class="op" id="5428539">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5428542"><a href="/regexp/regexp.go.html#5427764">ok</a></span>&nbsp;<span class="op" id="5428545">=</span>&nbsp;<span class="builtintype" id="5428547">true</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428553">return</span><br>
<span class="lineno"></span><span class="op" id="5428560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5428563">//&nbsp;FindSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs&nbsp;identifying&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5428640">//&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;b&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of</span><br>
<span class="lineno">870</span><span class="comment" id="5428717">//&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and&nbsp;&#39;Index&#39;&nbsp;descriptions</span><br>
<span class="lineno"></span><span class="comment" id="5428794">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5428821">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5428866">func</span>&nbsp;<span class="op" id="5428871">(</span><span class="ident" id="5428872">re</span>&nbsp;<span class="op" id="5428875">*</span><span class="ident" id="5428876"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5428882">)</span>&nbsp;<span class="ident" id="5428884">FindSubmatchIndex</span><span class="op" id="5428901">(</span><span class="ident" id="5428902">b</span>&nbsp;<span class="op" id="5428904">[</span><span class="op" id="5428905">]</span><span class="builtintype" id="5428906">byte</span><span class="op" id="5428910">)</span>&nbsp;<span class="op" id="5428912">[</span><span class="op" id="5428913">]</span><span class="builtintype" id="5428914">int</span>&nbsp;<span class="op" id="5428918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5428921">return</span>&nbsp;<span class="ident" id="5428928"><a href="/regexp/regexp.go.html#5428872">re</a></span><span class="op" id="5428930">.</span><span class="ident" id="5428931">pad</span><span class="op" id="5428934">(</span><span class="ident" id="5428935"><a href="/regexp/regexp.go.html#5428872">re</a></span><span class="op" id="5428937">.</span><span class="ident" id="5428938">doExecute</span><span class="op" id="5428947">(</span><span class="ident" id="5428948">nil</span><span class="op" id="5428951">,</span>&nbsp;<span class="ident" id="5428953"><a href="/regexp/regexp.go.html#5428902">b</a></span><span class="op" id="5428954">,</span>&nbsp;<span class="string" id="5428956">&#34;&#34;</span><span class="op" id="5428958">,</span>&nbsp;<span class="num" id="5428960">0</span><span class="op" id="5428961">,</span>&nbsp;<span class="ident" id="5428963"><a href="/regexp/regexp.go.html#5428872">re</a></span><span class="op" id="5428965">.</span><span class="ident" id="5428966">prog</span><span class="op" id="5428970">.</span><span class="ident" id="5428971">NumCap</span><span class="op" id="5428977">)</span><span class="op" id="5428978">)</span><br>
<span class="lineno">875</span><span class="op" id="5428980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5428983">//&nbsp;FindStringSubmatch&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5429056">//&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;s&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5429133">//&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;description&nbsp;in&nbsp;the</span><br>
<span class="lineno">880</span><span class="comment" id="5429204">//&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5429224">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5429269">func</span>&nbsp;<span class="op" id="5429274">(</span><span class="ident" id="5429275">re</span>&nbsp;<span class="op" id="5429278">*</span><span class="ident" id="5429279"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5429285">)</span>&nbsp;<span class="ident" id="5429287">FindStringSubmatch</span><span class="op" id="5429305">(</span><span class="ident" id="5429306">s</span>&nbsp;<span class="builtintype" id="5429308">string</span><span class="op" id="5429314">)</span>&nbsp;<span class="op" id="5429316">[</span><span class="op" id="5429317">]</span><span class="builtintype" id="5429318">string</span>&nbsp;<span class="op" id="5429325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429328">a</span>&nbsp;<span class="op" id="5429330">:=</span>&nbsp;<span class="ident" id="5429333"><a href="/regexp/regexp.go.html#5429275">re</a></span><span class="op" id="5429335">.</span><span class="ident" id="5429336">doExecute</span><span class="op" id="5429345">(</span><span class="ident" id="5429346">nil</span><span class="op" id="5429349">,</span>&nbsp;<span class="ident" id="5429351">nil</span><span class="op" id="5429354">,</span>&nbsp;<span class="ident" id="5429356"><a href="/regexp/regexp.go.html#5429306">s</a></span><span class="op" id="5429357">,</span>&nbsp;<span class="num" id="5429359">0</span><span class="op" id="5429360">,</span>&nbsp;<span class="ident" id="5429362"><a href="/regexp/regexp.go.html#5429275">re</a></span><span class="op" id="5429364">.</span><span class="ident" id="5429365">prog</span><span class="op" id="5429369">.</span><span class="ident" id="5429370">NumCap</span><span class="op" id="5429376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429379">if</span>&nbsp;<span class="ident" id="5429382"><a href="/regexp/regexp.go.html#5429328">a</a></span>&nbsp;<span class="op" id="5429384">==</span>&nbsp;<span class="ident" id="5429387">nil</span>&nbsp;<span class="op" id="5429391">{</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429395">return</span>&nbsp;<span class="ident" id="5429402">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5429407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429410">ret</span>&nbsp;<span class="op" id="5429414">:=</span>&nbsp;<span class="builtinfunc" id="5429417">make</span><span class="op" id="5429421">(</span><span class="op" id="5429422">[</span><span class="op" id="5429423">]</span><span class="builtintype" id="5429424">string</span><span class="op" id="5429430">,</span>&nbsp;<span class="num" id="5429432">1</span><span class="op" id="5429433">+</span><span class="ident" id="5429434"><a href="/regexp/regexp.go.html#5429275">re</a></span><span class="op" id="5429436">.</span><span class="ident" id="5429437">numSubexp</span><span class="op" id="5429446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429449">for</span>&nbsp;<span class="ident" id="5429453">i</span>&nbsp;<span class="op" id="5429455">:=</span>&nbsp;<span class="keyword" id="5429458">range</span>&nbsp;<span class="ident" id="5429464"><a href="/regexp/regexp.go.html#5429410">ret</a></span>&nbsp;<span class="op" id="5429468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429472">if</span>&nbsp;<span class="num" id="5429475">2</span><span class="op" id="5429476">*</span><span class="ident" id="5429477"><a href="/regexp/regexp.go.html#5429453">i</a></span>&nbsp;<span class="op" id="5429479">&lt;</span>&nbsp;<span class="builtinfunc" id="5429481">len</span><span class="op" id="5429484">(</span><span class="ident" id="5429485"><a href="/regexp/regexp.go.html#5429328">a</a></span><span class="op" id="5429486">)</span>&nbsp;<span class="op" id="5429488">&amp;&amp;</span>&nbsp;<span class="ident" id="5429491"><a href="/regexp/regexp.go.html#5429328">a</a></span><span class="op" id="5429492">[</span><span class="num" id="5429493">2</span><span class="op" id="5429494">*</span><span class="ident" id="5429495"><a href="/regexp/regexp.go.html#5429453">i</a></span><span class="op" id="5429496">]</span>&nbsp;<span class="op" id="5429498">&gt;=</span>&nbsp;<span class="num" id="5429501">0</span>&nbsp;<span class="op" id="5429503">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5429508"><a href="/regexp/regexp.go.html#5429410">ret</a></span><span class="op" id="5429511">[</span><span class="ident" id="5429512"><a href="/regexp/regexp.go.html#5429453">i</a></span><span class="op" id="5429513">]</span>&nbsp;<span class="op" id="5429515">=</span>&nbsp;<span class="ident" id="5429517"><a href="/regexp/regexp.go.html#5429306">s</a></span><span class="op" id="5429518">[</span><span class="ident" id="5429519"><a href="/regexp/regexp.go.html#5429328">a</a></span><span class="op" id="5429520">[</span><span class="num" id="5429521">2</span><span class="op" id="5429522">*</span><span class="ident" id="5429523"><a href="/regexp/regexp.go.html#5429453">i</a></span><span class="op" id="5429524">]</span><span class="op" id="5429525">:</span><span class="ident" id="5429526"><a href="/regexp/regexp.go.html#5429328">a</a></span><span class="op" id="5429527">[</span><span class="num" id="5429528">2</span><span class="op" id="5429529">*</span><span class="ident" id="5429530"><a href="/regexp/regexp.go.html#5429453">i</a></span><span class="op" id="5429531">+</span><span class="num" id="5429532">1</span><span class="op" id="5429533">]</span><span class="op" id="5429534">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5429538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5429541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429544">return</span>&nbsp;<span class="ident" id="5429551"><a href="/regexp/regexp.go.html#5429410">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5429555">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span><span class="comment" id="5429558">//&nbsp;FindStringSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="5429625">//&nbsp;identifying&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;s&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5429698">//&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5429774">//&nbsp;&#39;Index&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">900</span><span class="comment" id="5429822">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5429867">func</span>&nbsp;<span class="op" id="5429872">(</span><span class="ident" id="5429873">re</span>&nbsp;<span class="op" id="5429876">*</span><span class="ident" id="5429877"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5429883">)</span>&nbsp;<span class="ident" id="5429885">FindStringSubmatchIndex</span><span class="op" id="5429908">(</span><span class="ident" id="5429909">s</span>&nbsp;<span class="builtintype" id="5429911">string</span><span class="op" id="5429917">)</span>&nbsp;<span class="op" id="5429919">[</span><span class="op" id="5429920">]</span><span class="builtintype" id="5429921">int</span>&nbsp;<span class="op" id="5429925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5429928">return</span>&nbsp;<span class="ident" id="5429935"><a href="/regexp/regexp.go.html#5429873">re</a></span><span class="op" id="5429937">.</span><span class="ident" id="5429938">pad</span><span class="op" id="5429941">(</span><span class="ident" id="5429942"><a href="/regexp/regexp.go.html#5429873">re</a></span><span class="op" id="5429944">.</span><span class="ident" id="5429945">doExecute</span><span class="op" id="5429954">(</span><span class="ident" id="5429955">nil</span><span class="op" id="5429958">,</span>&nbsp;<span class="ident" id="5429960">nil</span><span class="op" id="5429963">,</span>&nbsp;<span class="ident" id="5429965"><a href="/regexp/regexp.go.html#5429909">s</a></span><span class="op" id="5429966">,</span>&nbsp;<span class="num" id="5429968">0</span><span class="op" id="5429969">,</span>&nbsp;<span class="ident" id="5429971"><a href="/regexp/regexp.go.html#5429873">re</a></span><span class="op" id="5429973">.</span><span class="ident" id="5429974">prog</span><span class="op" id="5429978">.</span><span class="ident" id="5429979">NumCap</span><span class="op" id="5429985">)</span><span class="op" id="5429986">)</span><br>
<span class="lineno"></span><span class="op" id="5429988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="5429991">//&nbsp;FindReaderSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="5430058">//&nbsp;identifying&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;of&nbsp;text&nbsp;read&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5430134">//&nbsp;the&nbsp;RuneReader,&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined</span><br>
<span class="lineno"></span><span class="comment" id="5430212">//&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and&nbsp;&#39;Index&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.&nbsp;&nbsp;A</span><br>
<span class="lineno"></span><span class="comment" id="5430285">//&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">910</span><span class="keyword" id="5430328">func</span>&nbsp;<span class="op" id="5430333">(</span><span class="ident" id="5430334">re</span>&nbsp;<span class="op" id="5430337">*</span><span class="ident" id="5430338"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5430344">)</span>&nbsp;<span class="ident" id="5430346">FindReaderSubmatchIndex</span><span class="op" id="5430369">(</span><span class="ident" id="5430370">r</span>&nbsp;<span class="ident" id="5430372"><a href="/regexp/regexp.go.html#5405190">io</a></span><span class="op" id="5430374">.</span><span class="ident" id="5430375">RuneReader</span><span class="op" id="5430385">)</span>&nbsp;<span class="op" id="5430387">[</span><span class="op" id="5430388">]</span><span class="builtintype" id="5430389">int</span>&nbsp;<span class="op" id="5430393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430396">return</span>&nbsp;<span class="ident" id="5430403"><a href="/regexp/regexp.go.html#5430334">re</a></span><span class="op" id="5430405">.</span><span class="ident" id="5430406">pad</span><span class="op" id="5430409">(</span><span class="ident" id="5430410"><a href="/regexp/regexp.go.html#5430334">re</a></span><span class="op" id="5430412">.</span><span class="ident" id="5430413">doExecute</span><span class="op" id="5430422">(</span><span class="ident" id="5430423"><a href="/regexp/regexp.go.html#5430370">r</a></span><span class="op" id="5430424">,</span>&nbsp;<span class="ident" id="5430426">nil</span><span class="op" id="5430429">,</span>&nbsp;<span class="string" id="5430431">&#34;&#34;</span><span class="op" id="5430433">,</span>&nbsp;<span class="num" id="5430435">0</span><span class="op" id="5430436">,</span>&nbsp;<span class="ident" id="5430438"><a href="/regexp/regexp.go.html#5430334">re</a></span><span class="op" id="5430440">.</span><span class="ident" id="5430441">prog</span><span class="op" id="5430445">.</span><span class="ident" id="5430446">NumCap</span><span class="op" id="5430452">)</span><span class="op" id="5430453">)</span><br>
<span class="lineno"></span><span class="op" id="5430455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5430458">const</span>&nbsp;<span class="ident" id="5430464">startSize</span>&nbsp;<span class="op" id="5430474">=</span>&nbsp;<span class="num" id="5430476">10</span>&nbsp;<span class="comment" id="5430479">//&nbsp;The&nbsp;size&nbsp;at&nbsp;which&nbsp;to&nbsp;start&nbsp;a&nbsp;slice&nbsp;in&nbsp;the&nbsp;&#39;All&#39;&nbsp;routines.</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="5430541">//&nbsp;FindAll&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;Find;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="5430619">//&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5430692">//&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5430712">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">920</span><span class="keyword" id="5430757">func</span>&nbsp;<span class="op" id="5430762">(</span><span class="ident" id="5430763">re</span>&nbsp;<span class="op" id="5430766">*</span><span class="ident" id="5430767"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5430773">)</span>&nbsp;<span class="ident" id="5430775">FindAll</span><span class="op" id="5430782">(</span><span class="ident" id="5430783">b</span>&nbsp;<span class="op" id="5430785">[</span><span class="op" id="5430786">]</span><span class="builtintype" id="5430787">byte</span><span class="op" id="5430791">,</span>&nbsp;<span class="ident" id="5430793">n</span>&nbsp;<span class="builtintype" id="5430795">int</span><span class="op" id="5430798">)</span>&nbsp;<span class="op" id="5430800">[</span><span class="op" id="5430801">]</span><span class="op" id="5430802">[</span><span class="op" id="5430803">]</span><span class="builtintype" id="5430804">byte</span>&nbsp;<span class="op" id="5430809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430812">if</span>&nbsp;<span class="ident" id="5430815"><a href="/regexp/regexp.go.html#5430793">n</a></span>&nbsp;<span class="op" id="5430817">&lt;</span>&nbsp;<span class="num" id="5430819">0</span>&nbsp;<span class="op" id="5430821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430825"><a href="/regexp/regexp.go.html#5430793">n</a></span>&nbsp;<span class="op" id="5430827">=</span>&nbsp;<span class="builtinfunc" id="5430829">len</span><span class="op" id="5430832">(</span><span class="ident" id="5430833"><a href="/regexp/regexp.go.html#5430783">b</a></span><span class="op" id="5430834">)</span>&nbsp;<span class="op" id="5430836">+</span>&nbsp;<span class="num" id="5430838">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430844">result</span>&nbsp;<span class="op" id="5430851">:=</span>&nbsp;<span class="builtinfunc" id="5430854">make</span><span class="op" id="5430858">(</span><span class="op" id="5430859">[</span><span class="op" id="5430860">]</span><span class="op" id="5430861">[</span><span class="op" id="5430862">]</span><span class="builtintype" id="5430863">byte</span><span class="op" id="5430867">,</span>&nbsp;<span class="num" id="5430869">0</span><span class="op" id="5430870">,</span>&nbsp;<span class="ident" id="5430872"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5430881">)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430884"><a href="/regexp/regexp.go.html#5430763">re</a></span><span class="op" id="5430886">.</span><span class="ident" id="5430887">allMatches</span><span class="op" id="5430897">(</span><span class="string" id="5430898">&#34;&#34;</span><span class="op" id="5430900">,</span>&nbsp;<span class="ident" id="5430902"><a href="/regexp/regexp.go.html#5430783">b</a></span><span class="op" id="5430903">,</span>&nbsp;<span class="ident" id="5430905"><a href="/regexp/regexp.go.html#5430793">n</a></span><span class="op" id="5430906">,</span>&nbsp;<span class="keyword" id="5430908">func</span><span class="op" id="5430912">(</span><span class="ident" id="5430913">match</span>&nbsp;<span class="op" id="5430919">[</span><span class="op" id="5430920">]</span><span class="builtintype" id="5430921">int</span><span class="op" id="5430924">)</span>&nbsp;<span class="op" id="5430926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5430930"><a href="/regexp/regexp.go.html#5430844">result</a></span>&nbsp;<span class="op" id="5430937">=</span>&nbsp;<span class="builtinfunc" id="5430939">append</span><span class="op" id="5430945">(</span><span class="ident" id="5430946"><a href="/regexp/regexp.go.html#5430844">result</a></span><span class="op" id="5430952">,</span>&nbsp;<span class="ident" id="5430954"><a href="/regexp/regexp.go.html#5430783">b</a></span><span class="op" id="5430955">[</span><span class="ident" id="5430956"><a href="/regexp/regexp.go.html#5430913">match</a></span><span class="op" id="5430961">[</span><span class="num" id="5430962">0</span><span class="op" id="5430963">]</span><span class="op" id="5430964">:</span><span class="ident" id="5430965"><a href="/regexp/regexp.go.html#5430913">match</a></span><span class="op" id="5430970">[</span><span class="num" id="5430971">1</span><span class="op" id="5430972">]</span><span class="op" id="5430973">]</span><span class="op" id="5430974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5430977">}</span><span class="op" id="5430978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5430981">if</span>&nbsp;<span class="builtinfunc" id="5430984">len</span><span class="op" id="5430987">(</span><span class="ident" id="5430988"><a href="/regexp/regexp.go.html#5430844">result</a></span><span class="op" id="5430994">)</span>&nbsp;<span class="op" id="5430996">==</span>&nbsp;<span class="num" id="5430999">0</span>&nbsp;<span class="op" id="5431001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431005">return</span>&nbsp;<span class="ident" id="5431012">nil</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431020">return</span>&nbsp;<span class="ident" id="5431027"><a href="/regexp/regexp.go.html#5430844">result</a></span><br>
<span class="lineno"></span><span class="op" id="5431034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5431037">//&nbsp;FindAllIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindIndex;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all</span><br>
<span class="lineno">935</span><span class="comment" id="5431114">//&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description</span><br>
<span class="lineno"></span><span class="comment" id="5431191">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5431218">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5431263">func</span>&nbsp;<span class="op" id="5431268">(</span><span class="ident" id="5431269">re</span>&nbsp;<span class="op" id="5431272">*</span><span class="ident" id="5431273"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5431279">)</span>&nbsp;<span class="ident" id="5431281">FindAllIndex</span><span class="op" id="5431293">(</span><span class="ident" id="5431294">b</span>&nbsp;<span class="op" id="5431296">[</span><span class="op" id="5431297">]</span><span class="builtintype" id="5431298">byte</span><span class="op" id="5431302">,</span>&nbsp;<span class="ident" id="5431304">n</span>&nbsp;<span class="builtintype" id="5431306">int</span><span class="op" id="5431309">)</span>&nbsp;<span class="op" id="5431311">[</span><span class="op" id="5431312">]</span><span class="op" id="5431313">[</span><span class="op" id="5431314">]</span><span class="builtintype" id="5431315">int</span>&nbsp;<span class="op" id="5431319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431322">if</span>&nbsp;<span class="ident" id="5431325"><a href="/regexp/regexp.go.html#5431304">n</a></span>&nbsp;<span class="op" id="5431327">&lt;</span>&nbsp;<span class="num" id="5431329">0</span>&nbsp;<span class="op" id="5431331">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431335"><a href="/regexp/regexp.go.html#5431304">n</a></span>&nbsp;<span class="op" id="5431337">=</span>&nbsp;<span class="builtinfunc" id="5431339">len</span><span class="op" id="5431342">(</span><span class="ident" id="5431343"><a href="/regexp/regexp.go.html#5431294">b</a></span><span class="op" id="5431344">)</span>&nbsp;<span class="op" id="5431346">+</span>&nbsp;<span class="num" id="5431348">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431354">result</span>&nbsp;<span class="op" id="5431361">:=</span>&nbsp;<span class="builtinfunc" id="5431364">make</span><span class="op" id="5431368">(</span><span class="op" id="5431369">[</span><span class="op" id="5431370">]</span><span class="op" id="5431371">[</span><span class="op" id="5431372">]</span><span class="builtintype" id="5431373">int</span><span class="op" id="5431376">,</span>&nbsp;<span class="num" id="5431378">0</span><span class="op" id="5431379">,</span>&nbsp;<span class="ident" id="5431381"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5431390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431393"><a href="/regexp/regexp.go.html#5431269">re</a></span><span class="op" id="5431395">.</span><span class="ident" id="5431396">allMatches</span><span class="op" id="5431406">(</span><span class="string" id="5431407">&#34;&#34;</span><span class="op" id="5431409">,</span>&nbsp;<span class="ident" id="5431411"><a href="/regexp/regexp.go.html#5431294">b</a></span><span class="op" id="5431412">,</span>&nbsp;<span class="ident" id="5431414"><a href="/regexp/regexp.go.html#5431304">n</a></span><span class="op" id="5431415">,</span>&nbsp;<span class="keyword" id="5431417">func</span><span class="op" id="5431421">(</span><span class="ident" id="5431422">match</span>&nbsp;<span class="op" id="5431428">[</span><span class="op" id="5431429">]</span><span class="builtintype" id="5431430">int</span><span class="op" id="5431433">)</span>&nbsp;<span class="op" id="5431435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431439"><a href="/regexp/regexp.go.html#5431354">result</a></span>&nbsp;<span class="op" id="5431446">=</span>&nbsp;<span class="builtinfunc" id="5431448">append</span><span class="op" id="5431454">(</span><span class="ident" id="5431455"><a href="/regexp/regexp.go.html#5431354">result</a></span><span class="op" id="5431461">,</span>&nbsp;<span class="ident" id="5431463"><a href="/regexp/regexp.go.html#5431422">match</a></span><span class="op" id="5431468">[</span><span class="num" id="5431469">0</span><span class="op" id="5431470">:</span><span class="num" id="5431471">2</span><span class="op" id="5431472">]</span><span class="op" id="5431473">)</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431476">}</span><span class="op" id="5431477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431480">if</span>&nbsp;<span class="builtinfunc" id="5431483">len</span><span class="op" id="5431486">(</span><span class="ident" id="5431487"><a href="/regexp/regexp.go.html#5431354">result</a></span><span class="op" id="5431493">)</span>&nbsp;<span class="op" id="5431495">==</span>&nbsp;<span class="num" id="5431498">0</span>&nbsp;<span class="op" id="5431500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431504">return</span>&nbsp;<span class="ident" id="5431511">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431519">return</span>&nbsp;<span class="ident" id="5431526"><a href="/regexp/regexp.go.html#5431354">result</a></span><br>
<span class="lineno">950</span><span class="op" id="5431533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5431536">//&nbsp;FindAllString&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindString;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="5431615">//&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description</span><br>
<span class="lineno"></span><span class="comment" id="5431692">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">955</span><span class="comment" id="5431719">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5431764">func</span>&nbsp;<span class="op" id="5431769">(</span><span class="ident" id="5431770">re</span>&nbsp;<span class="op" id="5431773">*</span><span class="ident" id="5431774"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5431780">)</span>&nbsp;<span class="ident" id="5431782">FindAllString</span><span class="op" id="5431795">(</span><span class="ident" id="5431796">s</span>&nbsp;<span class="builtintype" id="5431798">string</span><span class="op" id="5431804">,</span>&nbsp;<span class="ident" id="5431806">n</span>&nbsp;<span class="builtintype" id="5431808">int</span><span class="op" id="5431811">)</span>&nbsp;<span class="op" id="5431813">[</span><span class="op" id="5431814">]</span><span class="builtintype" id="5431815">string</span>&nbsp;<span class="op" id="5431822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431825">if</span>&nbsp;<span class="ident" id="5431828"><a href="/regexp/regexp.go.html#5431806">n</a></span>&nbsp;<span class="op" id="5431830">&lt;</span>&nbsp;<span class="num" id="5431832">0</span>&nbsp;<span class="op" id="5431834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431838"><a href="/regexp/regexp.go.html#5431806">n</a></span>&nbsp;<span class="op" id="5431840">=</span>&nbsp;<span class="builtinfunc" id="5431842">len</span><span class="op" id="5431845">(</span><span class="ident" id="5431846"><a href="/regexp/regexp.go.html#5431796">s</a></span><span class="op" id="5431847">)</span>&nbsp;<span class="op" id="5431849">+</span>&nbsp;<span class="num" id="5431851">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431854">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431857">result</span>&nbsp;<span class="op" id="5431864">:=</span>&nbsp;<span class="builtinfunc" id="5431867">make</span><span class="op" id="5431871">(</span><span class="op" id="5431872">[</span><span class="op" id="5431873">]</span><span class="builtintype" id="5431874">string</span><span class="op" id="5431880">,</span>&nbsp;<span class="num" id="5431882">0</span><span class="op" id="5431883">,</span>&nbsp;<span class="ident" id="5431885"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5431894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431897"><a href="/regexp/regexp.go.html#5431770">re</a></span><span class="op" id="5431899">.</span><span class="ident" id="5431900">allMatches</span><span class="op" id="5431910">(</span><span class="ident" id="5431911"><a href="/regexp/regexp.go.html#5431796">s</a></span><span class="op" id="5431912">,</span>&nbsp;<span class="ident" id="5431914">nil</span><span class="op" id="5431917">,</span>&nbsp;<span class="ident" id="5431919"><a href="/regexp/regexp.go.html#5431806">n</a></span><span class="op" id="5431920">,</span>&nbsp;<span class="keyword" id="5431922">func</span><span class="op" id="5431926">(</span><span class="ident" id="5431927">match</span>&nbsp;<span class="op" id="5431933">[</span><span class="op" id="5431934">]</span><span class="builtintype" id="5431935">int</span><span class="op" id="5431938">)</span>&nbsp;<span class="op" id="5431940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5431944"><a href="/regexp/regexp.go.html#5431857">result</a></span>&nbsp;<span class="op" id="5431951">=</span>&nbsp;<span class="builtinfunc" id="5431953">append</span><span class="op" id="5431959">(</span><span class="ident" id="5431960"><a href="/regexp/regexp.go.html#5431857">result</a></span><span class="op" id="5431966">,</span>&nbsp;<span class="ident" id="5431968"><a href="/regexp/regexp.go.html#5431796">s</a></span><span class="op" id="5431969">[</span><span class="ident" id="5431970"><a href="/regexp/regexp.go.html#5431927">match</a></span><span class="op" id="5431975">[</span><span class="num" id="5431976">0</span><span class="op" id="5431977">]</span><span class="op" id="5431978">:</span><span class="ident" id="5431979"><a href="/regexp/regexp.go.html#5431927">match</a></span><span class="op" id="5431984">[</span><span class="num" id="5431985">1</span><span class="op" id="5431986">]</span><span class="op" id="5431987">]</span><span class="op" id="5431988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5431991">}</span><span class="op" id="5431992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5431995">if</span>&nbsp;<span class="builtinfunc" id="5431998">len</span><span class="op" id="5432001">(</span><span class="ident" id="5432002"><a href="/regexp/regexp.go.html#5431857">result</a></span><span class="op" id="5432008">)</span>&nbsp;<span class="op" id="5432010">==</span>&nbsp;<span class="num" id="5432013">0</span>&nbsp;<span class="op" id="5432015">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432019">return</span>&nbsp;<span class="ident" id="5432026">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432034">return</span>&nbsp;<span class="ident" id="5432041"><a href="/regexp/regexp.go.html#5431857">result</a></span><br>
<span class="lineno"></span><span class="op" id="5432048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">970</span><span class="comment" id="5432051">//&nbsp;FindAllStringIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindStringIndex;&nbsp;it&nbsp;returns&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5432127">//&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;</span><br>
<span class="lineno"></span><span class="comment" id="5432205">//&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5432244">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5432289">func</span>&nbsp;<span class="op" id="5432294">(</span><span class="ident" id="5432295">re</span>&nbsp;<span class="op" id="5432298">*</span><span class="ident" id="5432299"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5432305">)</span>&nbsp;<span class="ident" id="5432307">FindAllStringIndex</span><span class="op" id="5432325">(</span><span class="ident" id="5432326">s</span>&nbsp;<span class="builtintype" id="5432328">string</span><span class="op" id="5432334">,</span>&nbsp;<span class="ident" id="5432336">n</span>&nbsp;<span class="builtintype" id="5432338">int</span><span class="op" id="5432341">)</span>&nbsp;<span class="op" id="5432343">[</span><span class="op" id="5432344">]</span><span class="op" id="5432345">[</span><span class="op" id="5432346">]</span><span class="builtintype" id="5432347">int</span>&nbsp;<span class="op" id="5432351">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432354">if</span>&nbsp;<span class="ident" id="5432357"><a href="/regexp/regexp.go.html#5432336">n</a></span>&nbsp;<span class="op" id="5432359">&lt;</span>&nbsp;<span class="num" id="5432361">0</span>&nbsp;<span class="op" id="5432363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432367"><a href="/regexp/regexp.go.html#5432336">n</a></span>&nbsp;<span class="op" id="5432369">=</span>&nbsp;<span class="builtinfunc" id="5432371">len</span><span class="op" id="5432374">(</span><span class="ident" id="5432375"><a href="/regexp/regexp.go.html#5432326">s</a></span><span class="op" id="5432376">)</span>&nbsp;<span class="op" id="5432378">+</span>&nbsp;<span class="num" id="5432380">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432386">result</span>&nbsp;<span class="op" id="5432393">:=</span>&nbsp;<span class="builtinfunc" id="5432396">make</span><span class="op" id="5432400">(</span><span class="op" id="5432401">[</span><span class="op" id="5432402">]</span><span class="op" id="5432403">[</span><span class="op" id="5432404">]</span><span class="builtintype" id="5432405">int</span><span class="op" id="5432408">,</span>&nbsp;<span class="num" id="5432410">0</span><span class="op" id="5432411">,</span>&nbsp;<span class="ident" id="5432413"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5432422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432425"><a href="/regexp/regexp.go.html#5432295">re</a></span><span class="op" id="5432427">.</span><span class="ident" id="5432428">allMatches</span><span class="op" id="5432438">(</span><span class="ident" id="5432439"><a href="/regexp/regexp.go.html#5432326">s</a></span><span class="op" id="5432440">,</span>&nbsp;<span class="ident" id="5432442">nil</span><span class="op" id="5432445">,</span>&nbsp;<span class="ident" id="5432447"><a href="/regexp/regexp.go.html#5432336">n</a></span><span class="op" id="5432448">,</span>&nbsp;<span class="keyword" id="5432450">func</span><span class="op" id="5432454">(</span><span class="ident" id="5432455">match</span>&nbsp;<span class="op" id="5432461">[</span><span class="op" id="5432462">]</span><span class="builtintype" id="5432463">int</span><span class="op" id="5432466">)</span>&nbsp;<span class="op" id="5432468">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432472"><a href="/regexp/regexp.go.html#5432386">result</a></span>&nbsp;<span class="op" id="5432479">=</span>&nbsp;<span class="builtinfunc" id="5432481">append</span><span class="op" id="5432487">(</span><span class="ident" id="5432488"><a href="/regexp/regexp.go.html#5432386">result</a></span><span class="op" id="5432494">,</span>&nbsp;<span class="ident" id="5432496"><a href="/regexp/regexp.go.html#5432455">match</a></span><span class="op" id="5432501">[</span><span class="num" id="5432502">0</span><span class="op" id="5432503">:</span><span class="num" id="5432504">2</span><span class="op" id="5432505">]</span><span class="op" id="5432506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432509">}</span><span class="op" id="5432510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432513">if</span>&nbsp;<span class="builtinfunc" id="5432516">len</span><span class="op" id="5432519">(</span><span class="ident" id="5432520"><a href="/regexp/regexp.go.html#5432386">result</a></span><span class="op" id="5432526">)</span>&nbsp;<span class="op" id="5432528">==</span>&nbsp;<span class="num" id="5432531">0</span>&nbsp;<span class="op" id="5432533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432537">return</span>&nbsp;<span class="ident" id="5432544">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432549">}</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432552">return</span>&nbsp;<span class="ident" id="5432559"><a href="/regexp/regexp.go.html#5432386">result</a></span><br>
<span class="lineno"></span><span class="op" id="5432566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5432569">//&nbsp;FindAllSubmatch&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindSubmatch;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="5432645">//&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;</span><br>
<span class="lineno">990</span><span class="comment" id="5432717">//&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5432756">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5432801">func</span>&nbsp;<span class="op" id="5432806">(</span><span class="ident" id="5432807">re</span>&nbsp;<span class="op" id="5432810">*</span><span class="ident" id="5432811"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5432817">)</span>&nbsp;<span class="ident" id="5432819">FindAllSubmatch</span><span class="op" id="5432834">(</span><span class="ident" id="5432835">b</span>&nbsp;<span class="op" id="5432837">[</span><span class="op" id="5432838">]</span><span class="builtintype" id="5432839">byte</span><span class="op" id="5432843">,</span>&nbsp;<span class="ident" id="5432845">n</span>&nbsp;<span class="builtintype" id="5432847">int</span><span class="op" id="5432850">)</span>&nbsp;<span class="op" id="5432852">[</span><span class="op" id="5432853">]</span><span class="op" id="5432854">[</span><span class="op" id="5432855">]</span><span class="op" id="5432856">[</span><span class="op" id="5432857">]</span><span class="builtintype" id="5432858">byte</span>&nbsp;<span class="op" id="5432863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5432866">if</span>&nbsp;<span class="ident" id="5432869"><a href="/regexp/regexp.go.html#5432845">n</a></span>&nbsp;<span class="op" id="5432871">&lt;</span>&nbsp;<span class="num" id="5432873">0</span>&nbsp;<span class="op" id="5432875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432879"><a href="/regexp/regexp.go.html#5432845">n</a></span>&nbsp;<span class="op" id="5432881">=</span>&nbsp;<span class="builtinfunc" id="5432883">len</span><span class="op" id="5432886">(</span><span class="ident" id="5432887"><a href="/regexp/regexp.go.html#5432835">b</a></span><span class="op" id="5432888">)</span>&nbsp;<span class="op" id="5432890">+</span>&nbsp;<span class="num" id="5432892">1</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5432895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432898">result</span>&nbsp;<span class="op" id="5432905">:=</span>&nbsp;<span class="builtinfunc" id="5432908">make</span><span class="op" id="5432912">(</span><span class="op" id="5432913">[</span><span class="op" id="5432914">]</span><span class="op" id="5432915">[</span><span class="op" id="5432916">]</span><span class="op" id="5432917">[</span><span class="op" id="5432918">]</span><span class="builtintype" id="5432919">byte</span><span class="op" id="5432923">,</span>&nbsp;<span class="num" id="5432925">0</span><span class="op" id="5432926">,</span>&nbsp;<span class="ident" id="5432928"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5432937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432940"><a href="/regexp/regexp.go.html#5432807">re</a></span><span class="op" id="5432942">.</span><span class="ident" id="5432943">allMatches</span><span class="op" id="5432953">(</span><span class="string" id="5432954">&#34;&#34;</span><span class="op" id="5432956">,</span>&nbsp;<span class="ident" id="5432958"><a href="/regexp/regexp.go.html#5432835">b</a></span><span class="op" id="5432959">,</span>&nbsp;<span class="ident" id="5432961"><a href="/regexp/regexp.go.html#5432845">n</a></span><span class="op" id="5432962">,</span>&nbsp;<span class="keyword" id="5432964">func</span><span class="op" id="5432968">(</span><span class="ident" id="5432969">match</span>&nbsp;<span class="op" id="5432975">[</span><span class="op" id="5432976">]</span><span class="builtintype" id="5432977">int</span><span class="op" id="5432980">)</span>&nbsp;<span class="op" id="5432982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5432986">slice</span>&nbsp;<span class="op" id="5432992">:=</span>&nbsp;<span class="builtinfunc" id="5432995">make</span><span class="op" id="5432999">(</span><span class="op" id="5433000">[</span><span class="op" id="5433001">]</span><span class="op" id="5433002">[</span><span class="op" id="5433003">]</span><span class="builtintype" id="5433004">byte</span><span class="op" id="5433008">,</span>&nbsp;<span class="builtinfunc" id="5433010">len</span><span class="op" id="5433013">(</span><span class="ident" id="5433014"><a href="/regexp/regexp.go.html#5432969">match</a></span><span class="op" id="5433019">)</span><span class="op" id="5433020">/</span><span class="num" id="5433021">2</span><span class="op" id="5433022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433026">for</span>&nbsp;<span class="ident" id="5433030">j</span>&nbsp;<span class="op" id="5433032">:=</span>&nbsp;<span class="keyword" id="5433035">range</span>&nbsp;<span class="ident" id="5433041"><a href="/regexp/regexp.go.html#5432986">slice</a></span>&nbsp;<span class="op" id="5433047">{</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433052">if</span>&nbsp;<span class="ident" id="5433055"><a href="/regexp/regexp.go.html#5432969">match</a></span><span class="op" id="5433060">[</span><span class="num" id="5433061">2</span><span class="op" id="5433062">*</span><span class="ident" id="5433063"><a href="/regexp/regexp.go.html#5433030">j</a></span><span class="op" id="5433064">]</span>&nbsp;<span class="op" id="5433066">&gt;=</span>&nbsp;<span class="num" id="5433069">0</span>&nbsp;<span class="op" id="5433071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433077"><a href="/regexp/regexp.go.html#5432986">slice</a></span><span class="op" id="5433082">[</span><span class="ident" id="5433083"><a href="/regexp/regexp.go.html#5433030">j</a></span><span class="op" id="5433084">]</span>&nbsp;<span class="op" id="5433086">=</span>&nbsp;<span class="ident" id="5433088"><a href="/regexp/regexp.go.html#5432835">b</a></span><span class="op" id="5433089">[</span><span class="ident" id="5433090"><a href="/regexp/regexp.go.html#5432969">match</a></span><span class="op" id="5433095">[</span><span class="num" id="5433096">2</span><span class="op" id="5433097">*</span><span class="ident" id="5433098"><a href="/regexp/regexp.go.html#5433030">j</a></span><span class="op" id="5433099">]</span><span class="op" id="5433100">:</span><span class="ident" id="5433101"><a href="/regexp/regexp.go.html#5432969">match</a></span><span class="op" id="5433106">[</span><span class="num" id="5433107">2</span><span class="op" id="5433108">*</span><span class="ident" id="5433109"><a href="/regexp/regexp.go.html#5433030">j</a></span><span class="op" id="5433110">+</span><span class="num" id="5433111">1</span><span class="op" id="5433112">]</span><span class="op" id="5433113">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433126"><a href="/regexp/regexp.go.html#5432898">result</a></span>&nbsp;<span class="op" id="5433133">=</span>&nbsp;<span class="builtinfunc" id="5433135">append</span><span class="op" id="5433141">(</span><span class="ident" id="5433142"><a href="/regexp/regexp.go.html#5432898">result</a></span><span class="op" id="5433148">,</span>&nbsp;<span class="ident" id="5433150"><a href="/regexp/regexp.go.html#5432986">slice</a></span><span class="op" id="5433155">)</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433158">}</span><span class="op" id="5433159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433162">if</span>&nbsp;<span class="builtinfunc" id="5433165">len</span><span class="op" id="5433168">(</span><span class="ident" id="5433169"><a href="/regexp/regexp.go.html#5432898">result</a></span><span class="op" id="5433175">)</span>&nbsp;<span class="op" id="5433177">==</span>&nbsp;<span class="num" id="5433180">0</span>&nbsp;<span class="op" id="5433182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433186">return</span>&nbsp;<span class="ident" id="5433193">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433201">return</span>&nbsp;<span class="ident" id="5433208"><a href="/regexp/regexp.go.html#5432898">result</a></span><br>
<span class="lineno">1010</span><span class="op" id="5433215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5433218">//&nbsp;FindAllSubmatchIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindSubmatchIndex;&nbsp;it&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="5433296">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5433370">//&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">1015</span><span class="comment" id="5433415">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5433460">func</span>&nbsp;<span class="op" id="5433465">(</span><span class="ident" id="5433466">re</span>&nbsp;<span class="op" id="5433469">*</span><span class="ident" id="5433470"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5433476">)</span>&nbsp;<span class="ident" id="5433478">FindAllSubmatchIndex</span><span class="op" id="5433498">(</span><span class="ident" id="5433499">b</span>&nbsp;<span class="op" id="5433501">[</span><span class="op" id="5433502">]</span><span class="builtintype" id="5433503">byte</span><span class="op" id="5433507">,</span>&nbsp;<span class="ident" id="5433509">n</span>&nbsp;<span class="builtintype" id="5433511">int</span><span class="op" id="5433514">)</span>&nbsp;<span class="op" id="5433516">[</span><span class="op" id="5433517">]</span><span class="op" id="5433518">[</span><span class="op" id="5433519">]</span><span class="builtintype" id="5433520">int</span>&nbsp;<span class="op" id="5433524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433527">if</span>&nbsp;<span class="ident" id="5433530"><a href="/regexp/regexp.go.html#5433509">n</a></span>&nbsp;<span class="op" id="5433532">&lt;</span>&nbsp;<span class="num" id="5433534">0</span>&nbsp;<span class="op" id="5433536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433540"><a href="/regexp/regexp.go.html#5433509">n</a></span>&nbsp;<span class="op" id="5433542">=</span>&nbsp;<span class="builtinfunc" id="5433544">len</span><span class="op" id="5433547">(</span><span class="ident" id="5433548"><a href="/regexp/regexp.go.html#5433499">b</a></span><span class="op" id="5433549">)</span>&nbsp;<span class="op" id="5433551">+</span>&nbsp;<span class="num" id="5433553">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433556">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433559">result</span>&nbsp;<span class="op" id="5433566">:=</span>&nbsp;<span class="builtinfunc" id="5433569">make</span><span class="op" id="5433573">(</span><span class="op" id="5433574">[</span><span class="op" id="5433575">]</span><span class="op" id="5433576">[</span><span class="op" id="5433577">]</span><span class="builtintype" id="5433578">int</span><span class="op" id="5433581">,</span>&nbsp;<span class="num" id="5433583">0</span><span class="op" id="5433584">,</span>&nbsp;<span class="ident" id="5433586"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5433595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433598"><a href="/regexp/regexp.go.html#5433466">re</a></span><span class="op" id="5433600">.</span><span class="ident" id="5433601">allMatches</span><span class="op" id="5433611">(</span><span class="string" id="5433612">&#34;&#34;</span><span class="op" id="5433614">,</span>&nbsp;<span class="ident" id="5433616"><a href="/regexp/regexp.go.html#5433499">b</a></span><span class="op" id="5433617">,</span>&nbsp;<span class="ident" id="5433619"><a href="/regexp/regexp.go.html#5433509">n</a></span><span class="op" id="5433620">,</span>&nbsp;<span class="keyword" id="5433622">func</span><span class="op" id="5433626">(</span><span class="ident" id="5433627">match</span>&nbsp;<span class="op" id="5433633">[</span><span class="op" id="5433634">]</span><span class="builtintype" id="5433635">int</span><span class="op" id="5433638">)</span>&nbsp;<span class="op" id="5433640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5433644"><a href="/regexp/regexp.go.html#5433559">result</a></span>&nbsp;<span class="op" id="5433651">=</span>&nbsp;<span class="builtinfunc" id="5433653">append</span><span class="op" id="5433659">(</span><span class="ident" id="5433660"><a href="/regexp/regexp.go.html#5433559">result</a></span><span class="op" id="5433666">,</span>&nbsp;<span class="ident" id="5433668"><a href="/regexp/regexp.go.html#5433627">match</a></span><span class="op" id="5433673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433676">}</span><span class="op" id="5433677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433680">if</span>&nbsp;<span class="builtinfunc" id="5433683">len</span><span class="op" id="5433686">(</span><span class="ident" id="5433687"><a href="/regexp/regexp.go.html#5433559">result</a></span><span class="op" id="5433693">)</span>&nbsp;<span class="op" id="5433695">==</span>&nbsp;<span class="num" id="5433698">0</span>&nbsp;<span class="op" id="5433700">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433704">return</span>&nbsp;<span class="ident" id="5433711">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5433716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5433719">return</span>&nbsp;<span class="ident" id="5433726"><a href="/regexp/regexp.go.html#5433559">result</a></span><br>
<span class="lineno"></span><span class="op" id="5433733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1030</span><span class="comment" id="5433736">//&nbsp;FindAllStringSubmatch&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindStringSubmatch;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5433808">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5433886">//&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5433935">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5433980">func</span>&nbsp;<span class="op" id="5433985">(</span><span class="ident" id="5433986">re</span>&nbsp;<span class="op" id="5433989">*</span><span class="ident" id="5433990"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5433996">)</span>&nbsp;<span class="ident" id="5433998">FindAllStringSubmatch</span><span class="op" id="5434019">(</span><span class="ident" id="5434020">s</span>&nbsp;<span class="builtintype" id="5434022">string</span><span class="op" id="5434028">,</span>&nbsp;<span class="ident" id="5434030">n</span>&nbsp;<span class="builtintype" id="5434032">int</span><span class="op" id="5434035">)</span>&nbsp;<span class="op" id="5434037">[</span><span class="op" id="5434038">]</span><span class="op" id="5434039">[</span><span class="op" id="5434040">]</span><span class="builtintype" id="5434041">string</span>&nbsp;<span class="op" id="5434048">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434051">if</span>&nbsp;<span class="ident" id="5434054"><a href="/regexp/regexp.go.html#5434030">n</a></span>&nbsp;<span class="op" id="5434056">&lt;</span>&nbsp;<span class="num" id="5434058">0</span>&nbsp;<span class="op" id="5434060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434064"><a href="/regexp/regexp.go.html#5434030">n</a></span>&nbsp;<span class="op" id="5434066">=</span>&nbsp;<span class="builtinfunc" id="5434068">len</span><span class="op" id="5434071">(</span><span class="ident" id="5434072"><a href="/regexp/regexp.go.html#5434020">s</a></span><span class="op" id="5434073">)</span>&nbsp;<span class="op" id="5434075">+</span>&nbsp;<span class="num" id="5434077">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434083">result</span>&nbsp;<span class="op" id="5434090">:=</span>&nbsp;<span class="builtinfunc" id="5434093">make</span><span class="op" id="5434097">(</span><span class="op" id="5434098">[</span><span class="op" id="5434099">]</span><span class="op" id="5434100">[</span><span class="op" id="5434101">]</span><span class="builtintype" id="5434102">string</span><span class="op" id="5434108">,</span>&nbsp;<span class="num" id="5434110">0</span><span class="op" id="5434111">,</span>&nbsp;<span class="ident" id="5434113"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5434122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434125"><a href="/regexp/regexp.go.html#5433986">re</a></span><span class="op" id="5434127">.</span><span class="ident" id="5434128">allMatches</span><span class="op" id="5434138">(</span><span class="ident" id="5434139"><a href="/regexp/regexp.go.html#5434020">s</a></span><span class="op" id="5434140">,</span>&nbsp;<span class="ident" id="5434142">nil</span><span class="op" id="5434145">,</span>&nbsp;<span class="ident" id="5434147"><a href="/regexp/regexp.go.html#5434030">n</a></span><span class="op" id="5434148">,</span>&nbsp;<span class="keyword" id="5434150">func</span><span class="op" id="5434154">(</span><span class="ident" id="5434155">match</span>&nbsp;<span class="op" id="5434161">[</span><span class="op" id="5434162">]</span><span class="builtintype" id="5434163">int</span><span class="op" id="5434166">)</span>&nbsp;<span class="op" id="5434168">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434172">slice</span>&nbsp;<span class="op" id="5434178">:=</span>&nbsp;<span class="builtinfunc" id="5434181">make</span><span class="op" id="5434185">(</span><span class="op" id="5434186">[</span><span class="op" id="5434187">]</span><span class="builtintype" id="5434188">string</span><span class="op" id="5434194">,</span>&nbsp;<span class="builtinfunc" id="5434196">len</span><span class="op" id="5434199">(</span><span class="ident" id="5434200"><a href="/regexp/regexp.go.html#5434155">match</a></span><span class="op" id="5434205">)</span><span class="op" id="5434206">/</span><span class="num" id="5434207">2</span><span class="op" id="5434208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434212">for</span>&nbsp;<span class="ident" id="5434216">j</span>&nbsp;<span class="op" id="5434218">:=</span>&nbsp;<span class="keyword" id="5434221">range</span>&nbsp;<span class="ident" id="5434227"><a href="/regexp/regexp.go.html#5434172">slice</a></span>&nbsp;<span class="op" id="5434233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434238">if</span>&nbsp;<span class="ident" id="5434241"><a href="/regexp/regexp.go.html#5434155">match</a></span><span class="op" id="5434246">[</span><span class="num" id="5434247">2</span><span class="op" id="5434248">*</span><span class="ident" id="5434249"><a href="/regexp/regexp.go.html#5434216">j</a></span><span class="op" id="5434250">]</span>&nbsp;<span class="op" id="5434252">&gt;=</span>&nbsp;<span class="num" id="5434255">0</span>&nbsp;<span class="op" id="5434257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434263"><a href="/regexp/regexp.go.html#5434172">slice</a></span><span class="op" id="5434268">[</span><span class="ident" id="5434269"><a href="/regexp/regexp.go.html#5434216">j</a></span><span class="op" id="5434270">]</span>&nbsp;<span class="op" id="5434272">=</span>&nbsp;<span class="ident" id="5434274"><a href="/regexp/regexp.go.html#5434020">s</a></span><span class="op" id="5434275">[</span><span class="ident" id="5434276"><a href="/regexp/regexp.go.html#5434155">match</a></span><span class="op" id="5434281">[</span><span class="num" id="5434282">2</span><span class="op" id="5434283">*</span><span class="ident" id="5434284"><a href="/regexp/regexp.go.html#5434216">j</a></span><span class="op" id="5434285">]</span><span class="op" id="5434286">:</span><span class="ident" id="5434287"><a href="/regexp/regexp.go.html#5434155">match</a></span><span class="op" id="5434292">[</span><span class="num" id="5434293">2</span><span class="op" id="5434294">*</span><span class="ident" id="5434295"><a href="/regexp/regexp.go.html#5434216">j</a></span><span class="op" id="5434296">+</span><span class="num" id="5434297">1</span><span class="op" id="5434298">]</span><span class="op" id="5434299">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434304">}</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434312"><a href="/regexp/regexp.go.html#5434083">result</a></span>&nbsp;<span class="op" id="5434319">=</span>&nbsp;<span class="builtinfunc" id="5434321">append</span><span class="op" id="5434327">(</span><span class="ident" id="5434328"><a href="/regexp/regexp.go.html#5434083">result</a></span><span class="op" id="5434334">,</span>&nbsp;<span class="ident" id="5434336"><a href="/regexp/regexp.go.html#5434172">slice</a></span><span class="op" id="5434341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434344">}</span><span class="op" id="5434345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434348">if</span>&nbsp;<span class="builtinfunc" id="5434351">len</span><span class="op" id="5434354">(</span><span class="ident" id="5434355"><a href="/regexp/regexp.go.html#5434083">result</a></span><span class="op" id="5434361">)</span>&nbsp;<span class="op" id="5434363">==</span>&nbsp;<span class="num" id="5434366">0</span>&nbsp;<span class="op" id="5434368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434372">return</span>&nbsp;<span class="ident" id="5434379">nil</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434387">return</span>&nbsp;<span class="ident" id="5434394"><a href="/regexp/regexp.go.html#5434083">result</a></span><br>
<span class="lineno"></span><span class="op" id="5434401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5434404">//&nbsp;FindAllStringSubmatchIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of</span><br>
<span class="lineno">1055</span><span class="comment" id="5434458">//&nbsp;FindStringSubmatchIndex;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5434534">//&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5434604">//&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5434616">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5434661">func</span>&nbsp;<span class="op" id="5434666">(</span><span class="ident" id="5434667">re</span>&nbsp;<span class="op" id="5434670">*</span><span class="ident" id="5434671"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5434677">)</span>&nbsp;<span class="ident" id="5434679">FindAllStringSubmatchIndex</span><span class="op" id="5434705">(</span><span class="ident" id="5434706">s</span>&nbsp;<span class="builtintype" id="5434708">string</span><span class="op" id="5434714">,</span>&nbsp;<span class="ident" id="5434716">n</span>&nbsp;<span class="builtintype" id="5434718">int</span><span class="op" id="5434721">)</span>&nbsp;<span class="op" id="5434723">[</span><span class="op" id="5434724">]</span><span class="op" id="5434725">[</span><span class="op" id="5434726">]</span><span class="builtintype" id="5434727">int</span>&nbsp;<span class="op" id="5434731">{</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434734">if</span>&nbsp;<span class="ident" id="5434737"><a href="/regexp/regexp.go.html#5434716">n</a></span>&nbsp;<span class="op" id="5434739">&lt;</span>&nbsp;<span class="num" id="5434741">0</span>&nbsp;<span class="op" id="5434743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434747"><a href="/regexp/regexp.go.html#5434716">n</a></span>&nbsp;<span class="op" id="5434749">=</span>&nbsp;<span class="builtinfunc" id="5434751">len</span><span class="op" id="5434754">(</span><span class="ident" id="5434755"><a href="/regexp/regexp.go.html#5434706">s</a></span><span class="op" id="5434756">)</span>&nbsp;<span class="op" id="5434758">+</span>&nbsp;<span class="num" id="5434760">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434766">result</span>&nbsp;<span class="op" id="5434773">:=</span>&nbsp;<span class="builtinfunc" id="5434776">make</span><span class="op" id="5434780">(</span><span class="op" id="5434781">[</span><span class="op" id="5434782">]</span><span class="op" id="5434783">[</span><span class="op" id="5434784">]</span><span class="builtintype" id="5434785">int</span><span class="op" id="5434788">,</span>&nbsp;<span class="num" id="5434790">0</span><span class="op" id="5434791">,</span>&nbsp;<span class="ident" id="5434793"><a href="/regexp/regexp.go.html#5430464">startSize</a></span><span class="op" id="5434802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434805"><a href="/regexp/regexp.go.html#5434667">re</a></span><span class="op" id="5434807">.</span><span class="ident" id="5434808">allMatches</span><span class="op" id="5434818">(</span><span class="ident" id="5434819"><a href="/regexp/regexp.go.html#5434706">s</a></span><span class="op" id="5434820">,</span>&nbsp;<span class="ident" id="5434822">nil</span><span class="op" id="5434825">,</span>&nbsp;<span class="ident" id="5434827"><a href="/regexp/regexp.go.html#5434716">n</a></span><span class="op" id="5434828">,</span>&nbsp;<span class="keyword" id="5434830">func</span><span class="op" id="5434834">(</span><span class="ident" id="5434835">match</span>&nbsp;<span class="op" id="5434841">[</span><span class="op" id="5434842">]</span><span class="builtintype" id="5434843">int</span><span class="op" id="5434846">)</span>&nbsp;<span class="op" id="5434848">{</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5434852"><a href="/regexp/regexp.go.html#5434766">result</a></span>&nbsp;<span class="op" id="5434859">=</span>&nbsp;<span class="builtinfunc" id="5434861">append</span><span class="op" id="5434867">(</span><span class="ident" id="5434868"><a href="/regexp/regexp.go.html#5434766">result</a></span><span class="op" id="5434874">,</span>&nbsp;<span class="ident" id="5434876"><a href="/regexp/regexp.go.html#5434835">match</a></span><span class="op" id="5434881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434884">}</span><span class="op" id="5434885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434888">if</span>&nbsp;<span class="builtinfunc" id="5434891">len</span><span class="op" id="5434894">(</span><span class="ident" id="5434895"><a href="/regexp/regexp.go.html#5434766">result</a></span><span class="op" id="5434901">)</span>&nbsp;<span class="op" id="5434903">==</span>&nbsp;<span class="num" id="5434906">0</span>&nbsp;<span class="op" id="5434908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434912">return</span>&nbsp;<span class="ident" id="5434919">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5434924">}</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5434927">return</span>&nbsp;<span class="ident" id="5434934"><a href="/regexp/regexp.go.html#5434766">result</a></span><br>
<span class="lineno"></span><span class="op" id="5434941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5434944">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;the&nbsp;expression&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5435029">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;expression&nbsp;matches.</span><br>
<span class="lineno">1075</span><span class="comment" id="5435081">//</span><br>
<span class="lineno"></span><span class="comment" id="5435084">//&nbsp;The&nbsp;slice&nbsp;returned&nbsp;by&nbsp;this&nbsp;method&nbsp;consists&nbsp;of&nbsp;all&nbsp;the&nbsp;substrings&nbsp;of&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="5435157">//&nbsp;not&nbsp;contained&nbsp;in&nbsp;the&nbsp;slice&nbsp;returned&nbsp;by&nbsp;FindAllString.&nbsp;When&nbsp;called&nbsp;on&nbsp;an&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="5435243">//&nbsp;that&nbsp;contains&nbsp;no&nbsp;metacharacters,&nbsp;it&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;strings.SplitN.</span><br>
<span class="lineno"></span><span class="comment" id="5435315">//</span><br>
<span class="lineno">1080</span><span class="comment" id="5435318">//&nbsp;Example:</span><br>
<span class="lineno"></span><span class="comment" id="5435330">//&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;regexp.MustCompile(&#34;a*&#34;).Split(&#34;abaabaccadaaae&#34;,&nbsp;5)</span><br>
<span class="lineno"></span><span class="comment" id="5435392">//&nbsp;&nbsp;&nbsp;//&nbsp;s:&nbsp;[&#34;&#34;,&nbsp;&#34;b&#34;,&nbsp;&#34;b&#34;,&nbsp;&#34;c&#34;,&nbsp;&#34;cadaaae&#34;]</span><br>
<span class="lineno"></span><span class="comment" id="5435434">//</span><br>
<span class="lineno"></span><span class="comment" id="5435437">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">1085</span><span class="comment" id="5435497">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="5435581">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="5435630">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="5435657">func</span>&nbsp;<span class="op" id="5435662">(</span><span class="ident" id="5435663">re</span>&nbsp;<span class="op" id="5435666">*</span><span class="ident" id="5435667"><a href="/regexp/regexp.go.html#5405425">Regexp</a></span><span class="op" id="5435673">)</span>&nbsp;<span class="ident" id="5435675">Split</span><span class="op" id="5435680">(</span><span class="ident" id="5435681">s</span>&nbsp;<span class="builtintype" id="5435683">string</span><span class="op" id="5435689">,</span>&nbsp;<span class="ident" id="5435691">n</span>&nbsp;<span class="builtintype" id="5435693">int</span><span class="op" id="5435696">)</span>&nbsp;<span class="op" id="5435698">[</span><span class="op" id="5435699">]</span><span class="builtintype" id="5435700">string</span>&nbsp;<span class="op" id="5435707">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435711">if</span>&nbsp;<span class="ident" id="5435714"><a href="/regexp/regexp.go.html#5435691">n</a></span>&nbsp;<span class="op" id="5435716">==</span>&nbsp;<span class="num" id="5435719">0</span>&nbsp;<span class="op" id="5435721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435725">return</span>&nbsp;<span class="ident" id="5435732">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5435737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435741">if</span>&nbsp;<span class="builtinfunc" id="5435744">len</span><span class="op" id="5435747">(</span><span class="ident" id="5435748"><a href="/regexp/regexp.go.html#5435663">re</a></span><span class="op" id="5435750">.</span><span class="ident" id="5435751">expr</span><span class="op" id="5435755">)</span>&nbsp;<span class="op" id="5435757">&gt;</span>&nbsp;<span class="num" id="5435759">0</span>&nbsp;<span class="op" id="5435761">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5435764">len</span><span class="op" id="5435767">(</span><span class="ident" id="5435768"><a href="/regexp/regexp.go.html#5435681">s</a></span><span class="op" id="5435769">)</span>&nbsp;<span class="op" id="5435771">==</span>&nbsp;<span class="num" id="5435774">0</span>&nbsp;<span class="op" id="5435776">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435780">return</span>&nbsp;<span class="op" id="5435787">[</span><span class="op" id="5435788">]</span><span class="builtintype" id="5435789">string</span><span class="op" id="5435795">{</span><span class="string" id="5435796">&#34;&#34;</span><span class="op" id="5435798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5435801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5435805">matches</span>&nbsp;<span class="op" id="5435813">:=</span>&nbsp;<span class="ident" id="5435816"><a href="/regexp/regexp.go.html#5435663">re</a></span><span class="op" id="5435818">.</span><span class="ident" id="5435819">FindAllStringIndex</span><span class="op" id="5435837">(</span><span class="ident" id="5435838"><a href="/regexp/regexp.go.html#5435681">s</a></span><span class="op" id="5435839">,</span>&nbsp;<span class="ident" id="5435841"><a href="/regexp/regexp.go.html#5435691">n</a></span><span class="op" id="5435842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5435845">strings</span>&nbsp;<span class="op" id="5435853">:=</span>&nbsp;<span class="builtinfunc" id="5435856">make</span><span class="op" id="5435860">(</span><span class="op" id="5435861">[</span><span class="op" id="5435862">]</span><span class="builtintype" id="5435863">string</span><span class="op" id="5435869">,</span>&nbsp;<span class="num" id="5435871">0</span><span class="op" id="5435872">,</span>&nbsp;<span class="builtinfunc" id="5435874">len</span><span class="op" id="5435877">(</span><span class="ident" id="5435878"><a href="/regexp/regexp.go.html#5435805">matches</a></span><span class="op" id="5435885">)</span><span class="op" id="5435886">)</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5435890">beg</span>&nbsp;<span class="op" id="5435894">:=</span>&nbsp;<span class="num" id="5435897">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5435900">end</span>&nbsp;<span class="op" id="5435904">:=</span>&nbsp;<span class="num" id="5435907">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435910">for</span>&nbsp;<span class="ident" id="5435914">_</span><span class="op" id="5435915">,</span>&nbsp;<span class="ident" id="5435917">match</span>&nbsp;<span class="op" id="5435923">:=</span>&nbsp;<span class="keyword" id="5435926">range</span>&nbsp;<span class="ident" id="5435932"><a href="/regexp/regexp.go.html#5435805">matches</a></span>&nbsp;<span class="op" id="5435940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435944">if</span>&nbsp;<span class="ident" id="5435947"><a href="/regexp/regexp.go.html#5435691">n</a></span>&nbsp;<span class="op" id="5435949">&gt;</span>&nbsp;<span class="num" id="5435951">0</span>&nbsp;<span class="op" id="5435953">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5435956">len</span><span class="op" id="5435959">(</span><span class="ident" id="5435960"><a href="/regexp/regexp.go.html#5435845">strings</a></span><span class="op" id="5435967">)</span>&nbsp;<span class="op" id="5435969">&gt;=</span>&nbsp;<span class="ident" id="5435972"><a href="/regexp/regexp.go.html#5435691">n</a></span><span class="op" id="5435973">-</span><span class="num" id="5435974">1</span>&nbsp;<span class="op" id="5435976">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5435981">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5435989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5435994"><a href="/regexp/regexp.go.html#5435900">end</a></span>&nbsp;<span class="op" id="5435998">=</span>&nbsp;<span class="ident" id="5436000"><a href="/regexp/regexp.go.html#5435917">match</a></span><span class="op" id="5436005">[</span><span class="num" id="5436006">0</span><span class="op" id="5436007">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5436011">if</span>&nbsp;<span class="ident" id="5436014"><a href="/regexp/regexp.go.html#5435917">match</a></span><span class="op" id="5436019">[</span><span class="num" id="5436020">1</span><span class="op" id="5436021">]</span>&nbsp;<span class="op" id="5436023">!=</span>&nbsp;<span class="num" id="5436026">0</span>&nbsp;<span class="op" id="5436028">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5436033"><a href="/regexp/regexp.go.html#5435845">strings</a></span>&nbsp;<span class="op" id="5436041">=</span>&nbsp;<span class="builtinfunc" id="5436043">append</span><span class="op" id="5436049">(</span><span class="ident" id="5436050"><a href="/regexp/regexp.go.html#5435845">strings</a></span><span class="op" id="5436057">,</span>&nbsp;<span class="ident" id="5436059"><a href="/regexp/regexp.go.html#5435681">s</a></span><span class="op" id="5436060">[</span><span class="ident" id="5436061"><a href="/regexp/regexp.go.html#5435890">beg</a></span><span class="op" id="5436064">:</span><span class="ident" id="5436065"><a href="/regexp/regexp.go.html#5435900">end</a></span><span class="op" id="5436068">]</span><span class="op" id="5436069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5436073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5436077"><a href="/regexp/regexp.go.html#5435890">beg</a></span>&nbsp;<span class="op" id="5436081">=</span>&nbsp;<span class="ident" id="5436083"><a href="/regexp/regexp.go.html#5435917">match</a></span><span class="op" id="5436088">[</span><span class="num" id="5436089">1</span><span class="op" id="5436090">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5436093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5436097">if</span>&nbsp;<span class="ident" id="5436100"><a href="/regexp/regexp.go.html#5435900">end</a></span>&nbsp;<span class="op" id="5436104">!=</span>&nbsp;<span class="builtinfunc" id="5436107">len</span><span class="op" id="5436110">(</span><span class="ident" id="5436111"><a href="/regexp/regexp.go.html#5435681">s</a></span><span class="op" id="5436112">)</span>&nbsp;<span class="op" id="5436114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5436118"><a href="/regexp/regexp.go.html#5435845">strings</a></span>&nbsp;<span class="op" id="5436126">=</span>&nbsp;<span class="builtinfunc" id="5436128">append</span><span class="op" id="5436134">(</span><span class="ident" id="5436135"><a href="/regexp/regexp.go.html#5435845">strings</a></span><span class="op" id="5436142">,</span>&nbsp;<span class="ident" id="5436144"><a href="/regexp/regexp.go.html#5435681">s</a></span><span class="op" id="5436145">[</span><span class="ident" id="5436146"><a href="/regexp/regexp.go.html#5435890">beg</a></span><span class="op" id="5436149">:</span><span class="op" id="5436150">]</span><span class="op" id="5436151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5436154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5436158">return</span>&nbsp;<span class="ident" id="5436165"><a href="/regexp/regexp.go.html#5435845">strings</a></span><br>
<span class="lineno">1120</span><span class="op" id="5436173">}</span>
</div>
</body>
</html>
